typedef unsigned char   undefined;

typedef unsigned char    bool;
typedef unsigned char    byte;
typedef unsigned int    dword;
typedef unsigned char    uchar;
typedef unsigned int    uint;
typedef unsigned long    ulong;
typedef unsigned char    undefined1;
typedef unsigned short    undefined2;
typedef unsigned int    undefined4;
typedef unsigned short    ushort;
typedef unsigned short    word;
typedef ulong u_long;

typedef ushort u_short;

typedef uchar u_char;

typedef struct VERTC VERTC, *PVERTC;

typedef struct CVECTOR CVECTOR, *PCVECTOR;

struct CVECTOR {
    u_char r;
    u_char g;
    u_char b;
    u_char cd;
};

struct VERTC {
    short vx;
    short vy;
    short vz;
    u_char tu;
    u_char tv;
    struct CVECTOR col;
};

typedef struct CdlLOC CdlLOC, *PCdlLOC;

struct CdlLOC {
    u_char minute;
    u_char second;
    u_char sector;
    u_char track;
};

typedef void (* CdlCB)(u_char, u_char *);

typedef struct DR_MODE DR_MODE, *PDR_MODE;

struct DR_MODE {
    u_long tag;
    u_long code[2];
};

typedef struct RECT RECT, *PRECT;

struct RECT {
    short x;
    short y;
    short w;
    short h;
};

typedef struct DISPENV DISPENV, *PDISPENV;

struct DISPENV {
    struct RECT disp;
    struct RECT screen;
    u_char isinter;
    u_char isrgb24;
    u_char pad0;
    u_char pad1;
};

typedef struct DRAWENV DRAWENV, *PDRAWENV;

typedef struct DR_ENV DR_ENV, *PDR_ENV;

struct DR_ENV {
    u_long tag;
    u_long code[15];
};

struct DRAWENV {
    struct RECT clip;
    short ofs[2];
    struct RECT tw;
    u_short tpage;
    u_char dtd;
    u_char dfe;
    u_char isbg;
    u_char r0;
    u_char g0;
    u_char b0;
    struct DR_ENV dr_env;
};

typedef struct POLY_F4 POLY_F4, *PPOLY_F4;

struct POLY_F4 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    short x1;
    short y1;
    short x2;
    short y2;
    short x3;
    short y3;
};

typedef int __ssize_t;

typedef __ssize_t ssize_t;

typedef long __off_t;

typedef struct VectorShort VectorShort, *PVectorShort;

struct VectorShort {
    short X;
    short Y;
    short Z;
};

typedef struct u8RGB u8RGB, *Pu8RGB;

struct u8RGB {
    byte R;
    byte G;
    byte B;
};

typedef struct MonochromePoly4F MonochromePoly4F, *PMonochromePoly4F;

typedef struct u8Vec2 u8Vec2, *Pu8Vec2;

struct u8Vec2 {
    short x;
    short y;
};

struct MonochromePoly4F {
    int pad1;
    int pad2;
    int pad3;
    int tag;
    struct u8RGB color;
    byte command;
    struct u8Vec2 v1;
    struct u8Vec2 v2;
    struct u8Vec2 v3;
    struct u8Vec2 v4;
};

typedef struct SkillPointFlags SkillPointFlags, *PSkillPointFlags;

struct SkillPointFlags {
    char skelosCacti;
    char hurricosWindmills;
    char colossusHockey;
    char fractureSupercharge;
    char roboticaSupercharge;
    char crushPerfect;
    char gulpPerfect;
    char riptoPerfect;
    char scorchTrees;
    char oceanUnder110;
    char metroUnder115;
    char icyUnder115;
    char canyonUnder110;
    char idoStandOnHead;
    char aquariaSeaweed;
    char gulpHitRipto;
    char skelosCatbatQuartet;
    char unused1;
    char unused2;
    char unused3;
};

typedef struct InputState InputState, *PInputState;

typedef enum InputFlags {
    None=0,
    TriggerLeft=1,
    TriggerRight=2,
    BumperLeft=4,
    BumperRight=8,
    Triangle=16,
    Circle=32,
    Cross=64,
    Square=128,
    Select=256,
    StickLeft=512,
    StickRight=1024,
    Start=2048,
    DPadUp=4096,
    DPadRight=8192,
    DPadDown=16384,
    DPadLeft=32768
} InputFlags;

struct InputState {
    enum InputFlags current;
    enum InputFlags pressed;
    enum InputFlags released;
    byte rightStickAnalogX;
    byte rightStickAnalogY;
    byte leftStickAnalogX;
    byte leftStickAnalogY;
};

typedef struct SpriteInfo SpriteInfo, *PSpriteInfo;

struct SpriteInfo {
    byte X;
    byte Y;
    byte clutX;
    byte clutY;
};

typedef struct TextConfig TextConfig, *PTextConfig;

struct TextConfig {
    int vramYmin;
    int vramYmax;
    int length;
};

typedef enum CollisionType {
    Sink=0,
    Hot=1,
    SuperCharge=2,
    Ice=4,
    Barrier=5,
    Portal=6,
    Electric=7,
    Ladder=8,
    Ramp=9,
    Slip=10
} CollisionType;

typedef struct Triangle Triangle, *PTriangle;

typedef struct Vec3 Vec3, *PVec3;

struct Vec3 {
    int x;
    int y;
    int z;
};

struct Triangle {
    struct Vec3 v1;
    struct Vec3 v2;
    struct Vec3 v3;
};

typedef enum SpyroColor {
    Normal=0,
    Red=1,
    Blue=2,
    Pink=3,
    Green=4,
    Yellow=5,
    Black=6
} SpyroColor;

typedef enum CameraState {
    Align=0,
    Moving=1,
    ChaseCharge=2,
    ChaseFly=3,
    ChaseSwim=4,
    ChaseIce=5,
    Passive=6,
    Look=7,
    QuickAlign=8,
    AlchemistCutscene=9,
    Freecam?=10,
    TransitioningToParagliding?=11,
    MaybeLockToThirdParty=12,
    BossLock=13,
    Vehicle=14,
    New_Name_(1)=15,
    unk=16,
    AlchemistRelated=17,
    Dialogue=18,
    New_Name=19,
    New_Name_(2)=20,
    New_Name_(3)=21,
    New_Name_(5)=22,
    WhirlwindAlign=23,
    New_Name_(7)=24,
    Paragliding=25
} CameraState;

typedef struct ModelSet ModelSet, *PModelSet;

struct ModelSet {
    int modelCount;
    undefined4 field1_0x4;
    undefined4 field2_0x8;
    undefined4 field3_0xc;
    uint * defaultModel;
    pointer models;
};

typedef enum SpyroState {
    Idle=0,
    Walk=1,
    Run=2,
    Stop=3,
    Pivot=4,
    Jump=5,
    Flop=6,
    Flame=7,
    Electrified=8,
    Ice=9,
    Charge=12,
    Bonk=13,
    IdleLedge=14,
    Hurt=15,
    Glide=16,
    Hover=17,
    Whirlwind=18,
    IdleLook=19,
    Catapult=20,
    ChargeAir=21,
    StartRun=22,
    GlideHoldBack=24,
    SuperchargeAscending=25,
    HurtSquash=26,
    Spring=27,
    HurtBurn=28,
    HurtPitchSpin=29,
    Drowning=30,
    DeathPirouette=31,
    DeathSquash=32,
    Superfly=33,
    SuperflyAscending=34,
    SuperflyDescending=35,
    Manta=36,
    IdleSit=38,
    UnderwaterSwim=40,
    UnderwaterIdle=41,
    UnderwaterCharge=42,
    WaterSwim=43,
    WaterIdle=44,
    HeadBash=46,
    ClimbIdle=47,
    New_Name=48,
    Slide=49,
    ClimbVertical=50,
    ClimbRight=51,
    ClimbLeft=52,
    New_Name_(1)=53,
    Spit=54,
    WaterSlap=55,
    HurtYawSpin=56,
    UnderwaterHurt=57,
    DeathBurn=58,
    Paragliding=60,
    Supercharge=61
} SpyroState;

typedef struct Vec2 Vec2, *PVec2;

struct Vec2 {
    int x;
    int y;
};

typedef enum LevelID {
    SUMMER_FOREST=0,
    GLIMMER=1,
    IDOL_SPRINGS=2,
    COLOSSUS=3,
    HURRICOS=4,
    AQUARIA_TOWERS=5,
    SUNNY_BEACH=6,
    OCEAN_SPEEDWAY=7,
    CRUSHS_DUNGEON=8,
    AUTUMN_PLAINS=9,
    SKELOS_BADLANDS=10,
    CRYSTAL_GLACIER=11,
    BREEZE_HARBOR=12,
    ZEPHYR=13,
    METRO_SPEEDWAY=14,
    SCORCH=15,
    SHADY_OASIS=16,
    MAGMA_CONE=17,
    FRACTURE_HILLS=18,
    ICY_SPEEDWAY=19,
    GULPS_OVERLOOK=20,
    WINTER_TUNDRA=21,
    MYSTIC_MARSH=22,
    CLOUD_TEMPLES=23,
    CANYON_SPEEDWAY=24,
    ROBOTICA_FARMS=25,
    METROPOLIS=26,
    DRAGON_SHORES=27,
    RIPTOS_ARENA=28
} LevelID;

typedef struct NPCDialogue NPCDialogue, *PNPCDialogue;

struct NPCDialogue {
    undefined field0_0x0;
    undefined field1_0x1;
    byte nextDialogueBranch;
    byte dialogueLength;
    byte activeDialogueBranch;
    undefined field5_0x5;
    undefined field6_0x6;
    undefined field7_0x7;
    undefined field8_0x8;
    undefined field9_0x9;
    undefined field10_0xa;
    undefined field11_0xb;
    char * name;
    undefined field13_0x10;
    undefined field14_0x11;
    undefined field15_0x12;
    undefined field16_0x13;
};

typedef struct Spyro Spyro, *PSpyro;

typedef struct AngleByte AngleByte, *PAngleByte;

typedef struct Color Color, *PColor;

typedef struct Mat33 Mat33, *PMat33;

typedef enum AirVelocityFlags {
    NORMAL=0,
    FALLING=1,
    PEAK=2,
    WATER_EXIT=3
} AirVelocityFlags;

typedef enum Substate {
    Idle=0,
    Walk=1,
    Jump=2,
    Flop=3,
    Charge=4,
    Glide=5,
    Superfly=6,
    Hurt=7,
    Death=8,
    Supercharge=9,
    Swim=10,
    UnderwaterSwim=11,
    UnderwaterCharge=12,
    Climb=13,
    Whirlwind=14,
    Headbash=15,
    Ice=16
} Substate;

typedef struct Angle Angle, *PAngle;

struct Angle {
    int Roll;
    int Pitch;
    int Yaw;
};

struct AngleByte {
    byte pitch;
    byte roll;
    byte yaw;
    byte pad;
};

struct Color {
    byte Red;
    byte Green;
    byte Blue;
    byte Alpha;
};

struct Mat33 {
    int R12R11;
    int R21R13;
    int R23R22;
    int R32R31;
    int R33;
};

struct Spyro {
    struct Vec3 position;
    struct AngleByte angleAsByte;
    struct AngleByte anotherByteAngle;
    byte currentAnimationState;
    byte nextAnimationState;
    byte currentAnimationFrame;
    byte nextAnimationFrame;
    byte field7_0x18;
    byte field8_0x19;
    byte field9_0x1a;
    byte field10_0x1b;
    byte field11_0x1c;
    byte field12_0x1d;
    byte field13_0x1e;
    undefined field14_0x1f;
    struct Color color;
    int takingDamageRelated;
    int field17_0x28;
    int field18_0x2c;
    struct Mat33 groundedGlidingMovementMatrix;
    undefined field20_0x44;
    undefined field21_0x45;
    undefined field22_0x46;
    undefined field23_0x47;
    undefined field24_0x48;
    undefined field25_0x49;
    undefined field26_0x4a;
    undefined field27_0x4b;
    undefined field28_0x4c;
    undefined field29_0x4d;
    undefined field30_0x4e;
    undefined field31_0x4f;
    enum SpyroState state;
    enum AirVelocityFlags airVelocityFlag;
    enum Substate maybeSubstate;
    int field35_0x5c;
    int field36_0x60;
    struct Angle rotation;
    int field38_0x70;
    int field39_0x74;
    int field40_0x78;
    struct Vec3 field41_0x7c;
    struct Vec3 field42_0x88;
    struct Vec3 trueVelocity;
    struct Vec3 physicsVelocity;
    int maybeTargetYaw;
    int maybeTurnSpeed;
    int maybeHorizontalSpeed;
    int maybeHorizontalSpeedDecay;
    int field49_0xbc;
    int airTime;
    int field51_0xc4;
    struct Vec3 field52_0xc8;
    struct Vec3 field53_0xd4;
    struct Vec3 field54_0xe0;
    int field55_0xec;
    struct Vec3 field56_0xf0;
    int field57_0xfc;
    int superflySpeed;
    char ledgeDetected;
    char field60_0x105;
    char field61_0x106;
    undefined field62_0x107;
    char field63_0x108;
    char field64_0x109;
    byte field65_0x10a;
    undefined field66_0x10b;
    undefined field67_0x10c;
    undefined field68_0x10d;
    undefined field69_0x10e;
    undefined field70_0x10f;
    int field71_0x110;
    int field72_0x114;
    int field73_0x118;
    struct Vec3 field74_0x11c;
    int field75_0x128;
    struct Vec3 field76_0x12c;
    int field77_0x138;
    int field78_0x13c;
    int field79_0x140;
    int field80_0x144;
    int field81_0x148;
    int field82_0x14c;
    int field83_0x150;
    int field84_0x154;
    int field85_0x158;
    int field86_0x15c;
    int field87_0x160;
    int field88_0x164;
    int field89_0x168;
    int field90_0x16c;
    undefined field91_0x170;
    undefined field92_0x171;
    undefined field93_0x172;
    undefined field94_0x173;
    int jumpRelated;
    int field96_0x178;
    int field97_0x17c;
    int field98_0x180;
    int field99_0x184;
    int field100_0x188;
    int field101_0x18c;
    int field102_0x190;
    int field103_0x194;
    int field104_0x198;
    struct Mat33 unkMatrix;
    undefined field106_0x1b0;
    undefined field107_0x1b1;
    undefined field108_0x1b2;
    undefined field109_0x1b3;
    undefined field110_0x1b4;
    undefined field111_0x1b5;
    undefined field112_0x1b6;
    undefined field113_0x1b7;
    undefined field114_0x1b8;
    undefined field115_0x1b9;
    undefined field116_0x1ba;
    undefined field117_0x1bb;
    char field118_0x1bc;
    char field119_0x1bd;
    char field120_0x1be;
    undefined field121_0x1bf;
    char field122_0x1c0;
    char field123_0x1c1;
    char field124_0x1c2;
    undefined field125_0x1c3;
    int powerFlightTime;
    int superflyRelated;
    int maybeSpeedway;
    int maybeSupercharge;
    int powerInvincibleTime;
    int powerFireballTime;
    int powerIceTime;
    int powerSpringTime;
    int powerRiptoPlasmaTime;
    int powerRiptoSuperChargeTime;
    int field136_0x1ec;
    int field137_0x1f0;
    int field138_0x1f4;
    int field139_0x1f8;
    int field140_0x1fc;
    int field141_0x200;
    undefined field142_0x204;
    undefined field143_0x205;
    undefined field144_0x206;
    undefined field145_0x207;
    undefined field146_0x208;
    undefined field147_0x209;
    undefined field148_0x20a;
    undefined field149_0x20b;
    int field150_0x20c;
    int field151_0x210;
    int field152_0x214;
    int field153_0x218;
    struct Vec3 field154_0x21c;
    char field155_0x228;
    char field156_0x229;
    char field157_0x22a;
    undefined field158_0x22b;
    struct Vec3 field159_0x22c;
    int field160_0x238;
    int field161_0x23c;
    int field162_0x240;
    int field163_0x244;
    struct Vec3 field164_0x248;
    int field165_0x254;
    int health;
    int iframeTimer;
    int field168_0x260;
    int field169_0x264;
    int field170_0x268;
    int field171_0x26c;
    int field172_0x270;
    int field173_0x274;
    int field174_0x278;
    int field175_0x27c;
    int field176_0x280;
    struct Vec3 field177_0x284;
    struct Vec3 field178_0x290;
    int currentTriangleStoodOnIndex;
    struct Triangle currentTriangleVertices;
};

typedef enum LoadedLevelID {
    New_Name=0,
    New_Name_(1)=1,
    New_Name_(2)=2,
    New_Name_(3)=3,
    New_Name_(4)=4,
    New_Name_(5)=5,
    New_Name_(6)=6,
    New_Name_(7)=7,
    New_Name_(8)=8,
    New_Name_(9)=9,
    SUMMER_FOREST=10,
    GLIMMER=11,
    IDOL_SPRINGS=12,
    COLOSSUS=13,
    New_Name_(14)=14,
    New_Name_(15)=15,
    New_Name_(16)=16,
    New_Name_(17)=17,
    New_Name_(18)=18,
    New_Name_(19)=19,
    New_Name_(20)=20,
    HURRICOS=21,
    AQUARIA_TOWERS=22,
    SUNNY_BEACH=23,
    New_Name_(24)=24,
    OCEAN_SPEEDWAY=25,
    CRUSHS_DUNGEON=26,
    New_Name_(27)=27,
    New_Name_(28)=28,
    New_Name_(29)=29,
    AUTUMN_PLAINS=30,
    SKELOS_BADLANDS=31,
    CRYSTAL_GLACIER=32,
    BREEZE_HARBOR=33,
    ZEPHYR=34,
    METRO_SPEEDWAY=35,
    New_Name_(35)=36,
    New_Name_(36)=37,
    New_Name_(37)=38,
    New_Name_(38)=39,
    New_Name_(39)=40,
    SCORCH=41,
    SHADY_OASIS=42,
    MAGMA_CONE=43,
    FRACTURE_HILLS=44,
    ICY_SPEEDWAY=45,
    GULPS_OVERLOOK=46,
    New_Name_(10)=47,
    New_Name_(11)=48,
    New_Name_(12)=49,
    WINTER_TUNDRA=50,
    MYSTIC_MARSH=51,
    CLOUD_TEMPLES=52,
    New_Name_(21)=53,
    New_Name_(22)=54,
    CANYON_SPEEDWAY=55,
    New_Name_(23)=56,
    New_Name_(25)=57,
    New_Name_(31)=58,
    New_Name_(32)=59,
    New_Name_(33)=60,
    ROBOTICA_FARMS=61,
    METROPOLIS=62,
    New_Name_(46)=63,
    New_Name_(47)=64,
    DRAGON_SHORES=65,
    RIPTOS_ARENA=66
} LoadedLevelID;

typedef enum ColorIndex {
    MURKY_YELLOW=0,
    BRIGHT_YELLOW=1,
    GOLD=2,
    SILVER=3,
    GREEN=4,
    LIGHT_RED=5,
    DARK_ORANGE=6,
    BROWN=7,
    WARM_BROWN=8,
    WARM_YELLOW=9,
    DARK_BROWN=10,
    DARK_RED=11,
    WOOD=12,
    GREY=13
} ColorIndex;

typedef struct Object Object, *PObject;

struct Object {
    pointer data;
    pointer collisionShape;
    pointer maybeIsActive;
    struct Vec3 position;
    int collisionFlagsReceived;
    undefined field5_0x1c;
    undefined field6_0x1d;
    undefined field7_0x1e;
    undefined field8_0x1f;
    struct Mat33 maybeMatrix;
    undefined field10_0x34;
    undefined field11_0x35;
    short type;
    undefined field13_0x38;
    undefined field14_0x39;
    byte subType;
    undefined field16_0x3b;
    byte modelId;
    byte nextModelId;
    byte keyframe;
    byte nextKeyframe;
    undefined field21_0x40;
    bool animating;
    undefined field23_0x42;
    undefined field24_0x43;
    struct AngleByte eulerRotation;
    byte state;
    byte gemValueId;
    undefined field28_0x4a;
    undefined field29_0x4b;
    undefined field30_0x4c;
    bool isShown;
    byte lodDistanceLimit;
    undefined field33_0x4f;
    byte heldGemValue;
    undefined field35_0x51;
    undefined field36_0x52;
    undefined field37_0x53;
    struct Color color;
};

typedef struct FrameBuffer FrameBuffer, *PFrameBuffer;

struct FrameBuffer {
    struct DRAWENV drawEnvironment;
    struct DISPENV displayEnvironment;
    uint * field2_0x70;
};

typedef struct MoneybagsPaywall MoneybagsPaywall, *PMoneybagsPaywall;

struct MoneybagsPaywall {
    short cost;
    short isPayed;
};

typedef struct HUDElement HUDElement, *PHUDElement;

typedef enum HUDDisplayState {
    Hidden=0,
    Appearing=1,
    Updating=2,
    Held=3,
    Disappearing=4
} HUDDisplayState;

struct HUDElement {
    enum HUDDisplayState displayState;
    byte field1_0x1;
    short displayTime;
    uint displayNumber;
};

typedef enum RenderFlags {
    None=0,
    Objects=1,
    World=4,
    Skybox=8,
    Particles=16,
    HUD=32
} RenderFlags;

typedef struct TerrainCollision TerrainCollision, *PTerrainCollision;

struct TerrainCollision {
    uint triangleCount;
    uint collisionFlagsOffset;
    uint field2_0x8;
    pointer field3_0xc;
    pointer field4_0x10;
    struct Triangle * triangles;
    byte * collisionFlags;
    pointer field7_0x1c;
    pointer field8_0x20;
};

typedef enum PauseMenuState {
    Pausing=0,
    Paused=1,
    Playing=2,
    BetweenMenuAndHomeworld=3,
    Homeworld=4,
    BetweenHomeworldAndWorld=5,
    World=6,
    SwitchingWorlds=7
} PauseMenuState;

typedef struct Orbit Orbit, *POrbit;

struct Orbit {
    int Longitude;
    int Latitude;
    int Radius;
    int Pitch;
    int Yaw;
};

typedef struct CheckpointData CheckpointData, *PCheckpointData;

struct CheckpointData {
    int checkpointSaved;
    undefined1 unkBlock32;
    undefined field2_0x5;
    undefined field3_0x6;
    undefined field4_0x7;
    undefined field5_0x8;
    undefined field6_0x9;
    undefined field7_0xa;
    undefined field8_0xb;
    undefined field9_0xc;
    undefined field10_0xd;
    undefined field11_0xe;
    undefined field12_0xf;
    undefined field13_0x10;
    undefined field14_0x11;
    undefined field15_0x12;
    undefined field16_0x13;
    undefined field17_0x14;
    undefined field18_0x15;
    undefined field19_0x16;
    undefined field20_0x17;
    undefined field21_0x18;
    undefined field22_0x19;
    undefined field23_0x1a;
    undefined field24_0x1b;
    undefined field25_0x1c;
    undefined field26_0x1d;
    undefined field27_0x1e;
    undefined field28_0x1f;
    undefined field29_0x20;
    undefined field30_0x21;
    undefined field31_0x22;
    undefined field32_0x23;
    struct Vec3 spawnPosition;
    int spawnYaw;
    undefined1 unkBlock12;
    undefined field36_0x35;
    undefined field37_0x36;
    undefined field38_0x37;
    undefined field39_0x38;
    undefined field40_0x39;
    undefined field41_0x3a;
    undefined field42_0x3b;
    undefined field43_0x3c;
    undefined field44_0x3d;
    undefined field45_0x3e;
    undefined field46_0x3f;
    undefined1 unkBlock512;
    undefined field48_0x41;
    undefined field49_0x42;
    undefined field50_0x43;
    undefined field51_0x44;
    undefined field52_0x45;
    undefined field53_0x46;
    undefined field54_0x47;
    undefined field55_0x48;
    undefined field56_0x49;
    undefined field57_0x4a;
    undefined field58_0x4b;
    undefined field59_0x4c;
    undefined field60_0x4d;
    undefined field61_0x4e;
    undefined field62_0x4f;
    undefined field63_0x50;
    undefined field64_0x51;
    undefined field65_0x52;
    undefined field66_0x53;
    undefined field67_0x54;
    undefined field68_0x55;
    undefined field69_0x56;
    undefined field70_0x57;
    undefined field71_0x58;
    undefined field72_0x59;
    undefined field73_0x5a;
    undefined field74_0x5b;
    undefined field75_0x5c;
    undefined field76_0x5d;
    undefined field77_0x5e;
    undefined field78_0x5f;
    undefined field79_0x60;
    undefined field80_0x61;
    undefined field81_0x62;
    undefined field82_0x63;
    undefined field83_0x64;
    undefined field84_0x65;
    undefined field85_0x66;
    undefined field86_0x67;
    undefined field87_0x68;
    undefined field88_0x69;
    undefined field89_0x6a;
    undefined field90_0x6b;
    undefined field91_0x6c;
    undefined field92_0x6d;
    undefined field93_0x6e;
    undefined field94_0x6f;
    undefined field95_0x70;
    undefined field96_0x71;
    undefined field97_0x72;
    undefined field98_0x73;
    undefined field99_0x74;
    undefined field100_0x75;
    undefined field101_0x76;
    undefined field102_0x77;
    undefined field103_0x78;
    undefined field104_0x79;
    undefined field105_0x7a;
    undefined field106_0x7b;
    undefined field107_0x7c;
    undefined field108_0x7d;
    undefined field109_0x7e;
    undefined field110_0x7f;
    undefined field111_0x80;
    undefined field112_0x81;
    undefined field113_0x82;
    undefined field114_0x83;
    undefined field115_0x84;
    undefined field116_0x85;
    undefined field117_0x86;
    undefined field118_0x87;
    undefined field119_0x88;
    undefined field120_0x89;
    undefined field121_0x8a;
    undefined field122_0x8b;
    undefined field123_0x8c;
    undefined field124_0x8d;
    undefined field125_0x8e;
    undefined field126_0x8f;
    undefined field127_0x90;
    undefined field128_0x91;
    undefined field129_0x92;
    undefined field130_0x93;
    undefined field131_0x94;
    undefined field132_0x95;
    undefined field133_0x96;
    undefined field134_0x97;
    undefined field135_0x98;
    undefined field136_0x99;
    undefined field137_0x9a;
    undefined field138_0x9b;
    undefined field139_0x9c;
    undefined field140_0x9d;
    undefined field141_0x9e;
    undefined field142_0x9f;
    undefined field143_0xa0;
    undefined field144_0xa1;
    undefined field145_0xa2;
    undefined field146_0xa3;
    undefined field147_0xa4;
    undefined field148_0xa5;
    undefined field149_0xa6;
    undefined field150_0xa7;
    undefined field151_0xa8;
    undefined field152_0xa9;
    undefined field153_0xaa;
    undefined field154_0xab;
    undefined field155_0xac;
    undefined field156_0xad;
    undefined field157_0xae;
    undefined field158_0xaf;
    undefined field159_0xb0;
    undefined field160_0xb1;
    undefined field161_0xb2;
    undefined field162_0xb3;
    undefined field163_0xb4;
    undefined field164_0xb5;
    undefined field165_0xb6;
    undefined field166_0xb7;
    undefined field167_0xb8;
    undefined field168_0xb9;
    undefined field169_0xba;
    undefined field170_0xbb;
    undefined field171_0xbc;
    undefined field172_0xbd;
    undefined field173_0xbe;
    undefined field174_0xbf;
    undefined field175_0xc0;
    undefined field176_0xc1;
    undefined field177_0xc2;
    undefined field178_0xc3;
    undefined field179_0xc4;
    undefined field180_0xc5;
    undefined field181_0xc6;
    undefined field182_0xc7;
    undefined field183_0xc8;
    undefined field184_0xc9;
    undefined field185_0xca;
    undefined field186_0xcb;
    undefined field187_0xcc;
    undefined field188_0xcd;
    undefined field189_0xce;
    undefined field190_0xcf;
    undefined field191_0xd0;
    undefined field192_0xd1;
    undefined field193_0xd2;
    undefined field194_0xd3;
    undefined field195_0xd4;
    undefined field196_0xd5;
    undefined field197_0xd6;
    undefined field198_0xd7;
    undefined field199_0xd8;
    undefined field200_0xd9;
    undefined field201_0xda;
    undefined field202_0xdb;
    undefined field203_0xdc;
    undefined field204_0xdd;
    undefined field205_0xde;
    undefined field206_0xdf;
    undefined field207_0xe0;
    undefined field208_0xe1;
    undefined field209_0xe2;
    undefined field210_0xe3;
    undefined field211_0xe4;
    undefined field212_0xe5;
    undefined field213_0xe6;
    undefined field214_0xe7;
    undefined field215_0xe8;
    undefined field216_0xe9;
    undefined field217_0xea;
    undefined field218_0xeb;
    undefined field219_0xec;
    undefined field220_0xed;
    undefined field221_0xee;
    undefined field222_0xef;
    undefined field223_0xf0;
    undefined field224_0xf1;
    undefined field225_0xf2;
    undefined field226_0xf3;
    undefined field227_0xf4;
    undefined field228_0xf5;
    undefined field229_0xf6;
    undefined field230_0xf7;
    undefined field231_0xf8;
    undefined field232_0xf9;
    undefined field233_0xfa;
    undefined field234_0xfb;
    undefined field235_0xfc;
    undefined field236_0xfd;
    undefined field237_0xfe;
    undefined field238_0xff;
    undefined field239_0x100;
    undefined field240_0x101;
    undefined field241_0x102;
    undefined field242_0x103;
    undefined field243_0x104;
    undefined field244_0x105;
    undefined field245_0x106;
    undefined field246_0x107;
    undefined field247_0x108;
    undefined field248_0x109;
    undefined field249_0x10a;
    undefined field250_0x10b;
    undefined field251_0x10c;
    undefined field252_0x10d;
    undefined field253_0x10e;
    undefined field254_0x10f;
    undefined field255_0x110;
    undefined field256_0x111;
    undefined field257_0x112;
    undefined field258_0x113;
    undefined field259_0x114;
    undefined field260_0x115;
    undefined field261_0x116;
    undefined field262_0x117;
    undefined field263_0x118;
    undefined field264_0x119;
    undefined field265_0x11a;
    undefined field266_0x11b;
    undefined field267_0x11c;
    undefined field268_0x11d;
    undefined field269_0x11e;
    undefined field270_0x11f;
    undefined field271_0x120;
    undefined field272_0x121;
    undefined field273_0x122;
    undefined field274_0x123;
    undefined field275_0x124;
    undefined field276_0x125;
    undefined field277_0x126;
    undefined field278_0x127;
    undefined field279_0x128;
    undefined field280_0x129;
    undefined field281_0x12a;
    undefined field282_0x12b;
    undefined field283_0x12c;
    undefined field284_0x12d;
    undefined field285_0x12e;
    undefined field286_0x12f;
    undefined field287_0x130;
    undefined field288_0x131;
    undefined field289_0x132;
    undefined field290_0x133;
    undefined field291_0x134;
    undefined field292_0x135;
    undefined field293_0x136;
    undefined field294_0x137;
    undefined field295_0x138;
    undefined field296_0x139;
    undefined field297_0x13a;
    undefined field298_0x13b;
    undefined field299_0x13c;
    undefined field300_0x13d;
    undefined field301_0x13e;
    undefined field302_0x13f;
    undefined field303_0x140;
    undefined field304_0x141;
    undefined field305_0x142;
    undefined field306_0x143;
    undefined field307_0x144;
    undefined field308_0x145;
    undefined field309_0x146;
    undefined field310_0x147;
    undefined field311_0x148;
    undefined field312_0x149;
    undefined field313_0x14a;
    undefined field314_0x14b;
    undefined field315_0x14c;
    undefined field316_0x14d;
    undefined field317_0x14e;
    undefined field318_0x14f;
    undefined field319_0x150;
    undefined field320_0x151;
    undefined field321_0x152;
    undefined field322_0x153;
    undefined field323_0x154;
    undefined field324_0x155;
    undefined field325_0x156;
    undefined field326_0x157;
    undefined field327_0x158;
    undefined field328_0x159;
    undefined field329_0x15a;
    undefined field330_0x15b;
    undefined field331_0x15c;
    undefined field332_0x15d;
    undefined field333_0x15e;
    undefined field334_0x15f;
    undefined field335_0x160;
    undefined field336_0x161;
    undefined field337_0x162;
    undefined field338_0x163;
    undefined field339_0x164;
    undefined field340_0x165;
    undefined field341_0x166;
    undefined field342_0x167;
    undefined field343_0x168;
    undefined field344_0x169;
    undefined field345_0x16a;
    undefined field346_0x16b;
    undefined field347_0x16c;
    undefined field348_0x16d;
    undefined field349_0x16e;
    undefined field350_0x16f;
    undefined field351_0x170;
    undefined field352_0x171;
    undefined field353_0x172;
    undefined field354_0x173;
    undefined field355_0x174;
    undefined field356_0x175;
    undefined field357_0x176;
    undefined field358_0x177;
    undefined field359_0x178;
    undefined field360_0x179;
    undefined field361_0x17a;
    undefined field362_0x17b;
    undefined field363_0x17c;
    undefined field364_0x17d;
    undefined field365_0x17e;
    undefined field366_0x17f;
    undefined field367_0x180;
    undefined field368_0x181;
    undefined field369_0x182;
    undefined field370_0x183;
    undefined field371_0x184;
    undefined field372_0x185;
    undefined field373_0x186;
    undefined field374_0x187;
    undefined field375_0x188;
    undefined field376_0x189;
    undefined field377_0x18a;
    undefined field378_0x18b;
    undefined field379_0x18c;
    undefined field380_0x18d;
    undefined field381_0x18e;
    undefined field382_0x18f;
    undefined field383_0x190;
    undefined field384_0x191;
    undefined field385_0x192;
    undefined field386_0x193;
    undefined field387_0x194;
    undefined field388_0x195;
    undefined field389_0x196;
    undefined field390_0x197;
    undefined field391_0x198;
    undefined field392_0x199;
    undefined field393_0x19a;
    undefined field394_0x19b;
    undefined field395_0x19c;
    undefined field396_0x19d;
    undefined field397_0x19e;
    undefined field398_0x19f;
    undefined field399_0x1a0;
    undefined field400_0x1a1;
    undefined field401_0x1a2;
    undefined field402_0x1a3;
    undefined field403_0x1a4;
    undefined field404_0x1a5;
    undefined field405_0x1a6;
    undefined field406_0x1a7;
    undefined field407_0x1a8;
    undefined field408_0x1a9;
    undefined field409_0x1aa;
    undefined field410_0x1ab;
    undefined field411_0x1ac;
    undefined field412_0x1ad;
    undefined field413_0x1ae;
    undefined field414_0x1af;
    undefined field415_0x1b0;
    undefined field416_0x1b1;
    undefined field417_0x1b2;
    undefined field418_0x1b3;
    undefined field419_0x1b4;
    undefined field420_0x1b5;
    undefined field421_0x1b6;
    undefined field422_0x1b7;
    undefined field423_0x1b8;
    undefined field424_0x1b9;
    undefined field425_0x1ba;
    undefined field426_0x1bb;
    undefined field427_0x1bc;
    undefined field428_0x1bd;
    undefined field429_0x1be;
    undefined field430_0x1bf;
    undefined field431_0x1c0;
    undefined field432_0x1c1;
    undefined field433_0x1c2;
    undefined field434_0x1c3;
    undefined field435_0x1c4;
    undefined field436_0x1c5;
    undefined field437_0x1c6;
    undefined field438_0x1c7;
    undefined field439_0x1c8;
    undefined field440_0x1c9;
    undefined field441_0x1ca;
    undefined field442_0x1cb;
    undefined field443_0x1cc;
    undefined field444_0x1cd;
    undefined field445_0x1ce;
    undefined field446_0x1cf;
    undefined field447_0x1d0;
    undefined field448_0x1d1;
    undefined field449_0x1d2;
    undefined field450_0x1d3;
    undefined field451_0x1d4;
    undefined field452_0x1d5;
    undefined field453_0x1d6;
    undefined field454_0x1d7;
    undefined field455_0x1d8;
    undefined field456_0x1d9;
    undefined field457_0x1da;
    undefined field458_0x1db;
    undefined field459_0x1dc;
    undefined field460_0x1dd;
    undefined field461_0x1de;
    undefined field462_0x1df;
    undefined field463_0x1e0;
    undefined field464_0x1e1;
    undefined field465_0x1e2;
    undefined field466_0x1e3;
    undefined field467_0x1e4;
    undefined field468_0x1e5;
    undefined field469_0x1e6;
    undefined field470_0x1e7;
    undefined field471_0x1e8;
    undefined field472_0x1e9;
    undefined field473_0x1ea;
    undefined field474_0x1eb;
    undefined field475_0x1ec;
    undefined field476_0x1ed;
    undefined field477_0x1ee;
    undefined field478_0x1ef;
    undefined field479_0x1f0;
    undefined field480_0x1f1;
    undefined field481_0x1f2;
    undefined field482_0x1f3;
    undefined field483_0x1f4;
    undefined field484_0x1f5;
    undefined field485_0x1f6;
    undefined field486_0x1f7;
    undefined field487_0x1f8;
    undefined field488_0x1f9;
    undefined field489_0x1fa;
    undefined field490_0x1fb;
    undefined field491_0x1fc;
    undefined field492_0x1fd;
    undefined field493_0x1fe;
    undefined field494_0x1ff;
    undefined field495_0x200;
    undefined field496_0x201;
    undefined field497_0x202;
    undefined field498_0x203;
    undefined field499_0x204;
    undefined field500_0x205;
    undefined field501_0x206;
    undefined field502_0x207;
    undefined field503_0x208;
    undefined field504_0x209;
    undefined field505_0x20a;
    undefined field506_0x20b;
    undefined field507_0x20c;
    undefined field508_0x20d;
    undefined field509_0x20e;
    undefined field510_0x20f;
    undefined field511_0x210;
    undefined field512_0x211;
    undefined field513_0x212;
    undefined field514_0x213;
    undefined field515_0x214;
    undefined field516_0x215;
    undefined field517_0x216;
    undefined field518_0x217;
    undefined field519_0x218;
    undefined field520_0x219;
    undefined field521_0x21a;
    undefined field522_0x21b;
    undefined field523_0x21c;
    undefined field524_0x21d;
    undefined field525_0x21e;
    undefined field526_0x21f;
    undefined field527_0x220;
    undefined field528_0x221;
    undefined field529_0x222;
    undefined field530_0x223;
    undefined field531_0x224;
    undefined field532_0x225;
    undefined field533_0x226;
    undefined field534_0x227;
    undefined field535_0x228;
    undefined field536_0x229;
    undefined field537_0x22a;
    undefined field538_0x22b;
    undefined field539_0x22c;
    undefined field540_0x22d;
    undefined field541_0x22e;
    undefined field542_0x22f;
    undefined field543_0x230;
    undefined field544_0x231;
    undefined field545_0x232;
    undefined field546_0x233;
    undefined field547_0x234;
    undefined field548_0x235;
    undefined field549_0x236;
    undefined field550_0x237;
    undefined field551_0x238;
    undefined field552_0x239;
    undefined field553_0x23a;
    undefined field554_0x23b;
    undefined field555_0x23c;
    undefined field556_0x23d;
    undefined field557_0x23e;
    undefined field558_0x23f;
    undefined4 unk1;
    undefined4 swimFlag;
};

typedef struct LinkedList LinkedList, *PLinkedList;

struct LinkedList {
    uint * tail;
    uint * head;
};

typedef struct Moby Moby, *PMoby;

struct Moby {
    pointer MobyTag;
    undefined field1_0x4;
    undefined field2_0x5;
    undefined field3_0x6;
    undefined field4_0x7;
    undefined field5_0x8;
    undefined field6_0x9;
    undefined field7_0xa;
    undefined field8_0xb;
    struct Vec3 Position;
    int AttackFlags;
    undefined field11_0x1c;
    undefined field12_0x1d;
    undefined field13_0x1e;
    undefined field14_0x1f;
    undefined field15_0x20;
    undefined field16_0x21;
    undefined field17_0x22;
    undefined field18_0x23;
    undefined field19_0x24;
    undefined field20_0x25;
    undefined field21_0x26;
    undefined field22_0x27;
    undefined field23_0x28;
    undefined field24_0x29;
    undefined field25_0x2a;
    undefined field26_0x2b;
    undefined field27_0x2c;
    undefined field28_0x2d;
    undefined field29_0x2e;
    undefined field30_0x2f;
    undefined field31_0x30;
    undefined field32_0x31;
    undefined field33_0x32;
    undefined field34_0x33;
    undefined field35_0x34;
    undefined field36_0x35;
    short MobyClass;
    undefined field38_0x38;
    undefined field39_0x39;
    undefined field40_0x3a;
    undefined field41_0x3b;
    byte CurrentAnimationId;
    byte NextAnimationId;
    byte CurrentAnimationFrame;
    byte NextAnimationFrame;
    byte AnimationProgress;
    undefined field47_0x41;
    undefined field48_0x42;
    undefined field49_0x43;
    byte Angle[4];
    byte State;
    byte Substate;
    undefined field53_0x4a;
    undefined field54_0x4b;
    undefined field55_0x4c;
    undefined field56_0x4d;
    undefined field57_0x4e;
    byte Size;
    undefined field59_0x50;
    undefined field60_0x51;
    undefined field61_0x52;
    undefined field62_0x53;
    struct Color Color;
};

typedef enum CheatType {
    AllAbilities=0,
    Credits=1,
    BigHeadSpyro=2,
    PaperSpyro=3,
    ColorSpyro=4,
    ExtraHitPoint=5
} CheatType;

typedef enum UpdateFlags {
    None=0,
    Visuals=1,
    World=2,
    Spyro=8,
    Camera=16,
    Particles=32,
    HUD=64
} UpdateFlags;

typedef enum GameState {
    Normal=0,
    Dialogue=1,
    Freeze=2,
    FadeIn=3,
    Pause=4,
    FadeOut=5,
    Cutscene=6,
    WorldTransition=7,
    MainMenu=11
} GameState;

typedef struct MoneybagsArray MoneybagsArray, *PMoneybagsArray;

struct MoneybagsArray {
    struct MoneybagsPaywall glacierBridge;
    struct MoneybagsPaywall aquariaSubmarine;
    struct MoneybagsPaywall magmaElevator;
    struct MoneybagsPaywall glimmerBridge;
    struct MoneybagsPaywall swim;
    struct MoneybagsPaywall climb;
    struct MoneybagsPaywall headbash;
    struct MoneybagsPaywall aquariaWall;
    struct MoneybagsPaywall unk3.100;
    struct MoneybagsPaywall sfBrokenBridgeCleared;
    struct MoneybagsPaywall zephyrEntry;
    struct MoneybagsPaywall shadyEntry;
    struct MoneybagsPaywall icyEntry;
    struct MoneybagsPaywall crushDefeated;
    struct MoneybagsPaywall gulpDefeated;
    struct MoneybagsPaywall extendedSparxRange;
    struct MoneybagsPaywall cameraHunter;
    struct MoneybagsPaywall unk5;
    struct MoneybagsPaywall canyonEntry;
    struct MoneybagsPaywall tunnelOfLoveToken;
    struct MoneybagsPaywall targetShootingToken1;
    struct MoneybagsPaywall targetShootingToken2;
    struct MoneybagsPaywall targetShootingToken3;
    struct MoneybagsPaywall coasterToken1;
    struct MoneybagsPaywall coasterToken2;
    struct MoneybagsPaywall coasterToken3;
    struct MoneybagsPaywall dunkTankToken1;
    struct MoneybagsPaywall dunkTankToken2;
    struct MoneybagsPaywall dunkTankToken3;
    struct MoneybagsPaywall crushEloraTalked;
    struct MoneybagsPaywall gulpEloraTalked;
    struct MoneybagsPaywall oceanEloraTalked;
    struct MoneybagsPaywall metroEloraTalked;
    struct MoneybagsPaywall doorProfessorTalked;
    struct MoneybagsPaywall unk18;
    struct MoneybagsPaywall TheaterUnlocked;
    struct MoneybagsPaywall professorDoorOpened;
    struct MoneybagsPaywall finalCutsceneWatched;
    struct MoneybagsPaywall unk22;
};

typedef struct MATRIX MATRIX, *PMATRIX;

struct MATRIX {
    short m[3][3];
    long t[3];
};

typedef struct VECTOR VECTOR, *PVECTOR;

struct VECTOR {
    long vx;
    long vy;
    long vz;
    long pad;
};

typedef struct SVECTOR SVECTOR, *PSVECTOR;

struct SVECTOR {
    short vx;
    short vy;
    short vz;
    short pad;
};

typedef struct DVECTOR DVECTOR, *PDVECTOR;

struct DVECTOR {
    short vx;
    short vy;
};

typedef ulong size_t;

typedef struct SpuVoiceAttr SpuVoiceAttr, *PSpuVoiceAttr;

typedef struct SpuVolume SpuVolume, *PSpuVolume;

struct SpuVolume {
    short left;
    short right;
};

struct SpuVoiceAttr {
    ulong voice;
    ulong mask;
    struct SpuVolume volume;
    struct SpuVolume volmode;
    struct SpuVolume volumex;
    ushort pitch;
    ushort note;
    ushort sample_note;
    short envx;
    ulong addr;
    ulong loop_addr;
    long a_mode;
    long s_mode;
    long r_mode;
    ushort ar;
    ushort dr;
    ushort sr;
    ushort rr;
    ushort sl;
    ushort adsr1;
    ushort adsr2;
};

typedef struct SpuExtAttr SpuExtAttr, *PSpuExtAttr;

struct SpuExtAttr {
    struct SpuVolume volume;
    long reverb;
    long mix;
};

typedef struct SpuCommonAttr SpuCommonAttr, *PSpuCommonAttr;

struct SpuCommonAttr {
    ulong mask;
    struct SpuVolume mvol;
    struct SpuVolume mvolmode;
    struct SpuVolume mvolx;
    struct SpuExtAttr cd;
    struct SpuExtAttr ext;
};




void main(void)

{
  FUN_80054834();
  FUN_80011e9c();
  do {
    UpdateGame();
    RenderGame();
  } while( true );
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_80011b1c(void)

{
  InitSound();
  return;
}



void FUN_80011b3c(void)

{
  u_char local_10 [8];
  
  local_10[0] = 0x80;
  CdInit();
  CdControl('\x0e',local_10,(u_char *)0x0);
  CdReadCallback(FUN_8001379c);
  DAT_800682d8 = 500;
  FUN_80013810(500,&DAT_8006d264,0x800,0);
  MemCopy(&DAT_800676d8,&DAT_8006d264,0x628);
  return;
}



void FUN_80011bbc(void)

{
  VSync(0);
  SetDispMask(0);
  FUN_8005557c(0);
  FUN_800556f0(0);
  SetDefDrawEnv(&doubleFrameBuffer[0].drawEnvironment,0,0xc,0x200,0xd8);
  SetDefDrawEnv(&doubleFrameBuffer[1].drawEnvironment,0,0xf0,0x200,0xd8);
  SetDefDispEnv(&doubleFrameBuffer[0].displayEnvironment,0,0xe4,0x200,0xf0);
  SetDefDispEnv(&doubleFrameBuffer[1].displayEnvironment,0,0,0x200,0xf0);
                    // WARNING: Read-only address (ram,0x800699a6) is written
  doubleFrameBuffer[1].drawEnvironment.ofs[1] = 0xe4;
                    // WARNING: Read-only address (ram,0x80069930) is written
  doubleFrameBuffer[0].drawEnvironment.ofs[0] = 0;
                    // WARNING: Read-only address (ram,0x80069932) is written
  doubleFrameBuffer[0].drawEnvironment.ofs[1] = 0;
                    // WARNING: Read-only address (ram,0x800699a4) is written
  doubleFrameBuffer[1].drawEnvironment.ofs[0] = 0;
                    // WARNING: Read-only address (ram,0x80069a00) is written
  doubleFrameBuffer[1].displayEnvironment.screen.x = 0;
                    // WARNING: Read-only address (ram,0x8006998c) is written
  doubleFrameBuffer[0].displayEnvironment.screen.x = 0;
                    // WARNING: Read-only address (ram,0x80069a02) is written
  doubleFrameBuffer[1].displayEnvironment.screen.y = 0;
                    // WARNING: Read-only address (ram,0x8006998e) is written
  doubleFrameBuffer[0].displayEnvironment.screen.y = 0;
                    // WARNING: Read-only address (ram,0x80069940) is written
  doubleFrameBuffer[0].drawEnvironment.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x800699b4) is written
  doubleFrameBuffer[1].drawEnvironment.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x8006993e) is written
  doubleFrameBuffer[0].drawEnvironment.dtd = '\x01';
                    // WARNING: Read-only address (ram,0x800699b2) is written
  doubleFrameBuffer[1].drawEnvironment.dtd = '\x01';
  ClearDoubleBuffer();
  VSync(0);
  DAT_80066fc0 = 0x8006999c;
  FUN_80055ca0(0x800699f8);
  FUN_80055be0(DAT_80066fc0);
  SetDispMask(1);
  return;
}



void InitGeometry(void)

{
  InitGeom();
  FUN_80057af8(0x100,0x78);
  FUN_80057ae8(0x155);
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible S_I.OBJ/SpuInit

void SsUtReverbOff(void)

{
  FUN_8007cc38(0);
  return;
}



void FUN_80011d78(void)

{
  PadInitDirect((uchar *)&DAT_8006a95c,&DAT_8006ab4c);
  FUN_80058408();
  FUN_80012b58();
  vibrationFlag = 1;
  FUN_80054934(FUN_800125c8);
  return;
}



void FUN_80011dd4(void)

{
  DAT_8006b2b0 = &DAT_801ff800;
  DAT_8006b2a4 = (LinkedList *)(DAT_8006b2ac + -0x2c08);
  DAT_8006b2a8 = (int *)(DAT_8006b2ac + -0x2c00);
  doubleFrameBuffer[1].field2_0x70 = (uint *)(DAT_8006b2ac + -0x1ec08);
  doubleFrameBuffer[0].field2_0x70 = (uint *)(DAT_8006b2ac + -0x3ac08);
  DAT_8006b284 = &DAT_8006d264;
  DAT_8006b29c = doubleFrameBuffer[0].field2_0x70;
  DAT_8006b2a0 = doubleFrameBuffer[1].field2_0x70;
                    // WARNING: Read-only address (ram,0x80069998) is written
                    // WARNING: Read-only address (ram,0x80069a0c) is written
  MEMSET((int *)DAT_8006b2a4,0,8);
  MEMSET(DAT_8006b2a8,0,0x2c00);
  LinkedList_primitiveBuffer = DAT_8006b2a4;
  DAT_80066ffc = DAT_8006b2a8;
  return;
}



void FUN_80011e9c(void)

{
  FUN_800548a4();
  FUN_80011bbc();
  FUN_80011b1c();
  FUN_80011b3c();
  FUN_80012b84();
  InitGeometry();
  FUN_80013810(DAT_800682d8,&DAT_8006d264,DAT_800676e4,DAT_800676e0);
  DAT_800670c4 = DAT_800676e4;
  FUN_OVRTitleScreenAndLoading__80077374(1);
  maybeQuitGame();
  return;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_80011f30(void)

{
  FUN_8001d7e8();
  return;
}



void FUN_80011f50(undefined4 *param_1)

{
  byte bVar1;
  char cVar2;
  undefined4 *puVar3;
  int iVar4;
  
  puVar3 = param_1;
  do {
    bVar1 = *(byte *)puVar3;
    puVar3 = (undefined4 *)((int)puVar3 + 1);
    if (0xbe < bVar1 + 0xf) {
      *param_1 = 0x7f7f7f7f;
      break;
    }
  } while ((int)puVar3 < (int)(param_1 + 1));
  iVar4 = 0;
  puVar3 = &DAT_80068378;
  DAT_80068378 = *param_1;
  do {
    cVar2 = *(char *)puVar3;
    (&DAT_8006837c)[iVar4] = cVar2 + '0';
    (&DAT_80068384)[iVar4] = -1 - (cVar2 + '0');
    cVar2 = *(char *)puVar3;
    (&DAT_80068380)[iVar4] = cVar2 + -0x30;
    (&DAT_80068388)[iVar4] = cVar2 + -0x30;
    iVar4 = iVar4 + 1;
    puVar3 = (undefined4 *)((int)puVar3 + 1);
  } while (iVar4 < 4);
  return;
}



void FUN_8001200c(byte *param_1)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  byte *pbVar4;
  int iVar5;
  
  if (DAT_80067024 == 0) {
    iVar5 = 0;
    do {
      uVar2 = (uint)*param_1;
      if ((byte)(&DAT_8006837c)[iVar5] < uVar2) {
        uVar3 = (uint)(byte)(&DAT_80068384)[iVar5];
        iVar1 = (uVar2 - (byte)(&DAT_8006837c)[iVar5]) * 0x80;
        if (uVar3 == 0) {
          trap(0x1c00);
        }
        if ((uVar3 == 0xffffffff) && (iVar1 == -0x80000000)) {
          trap(0x1800);
        }
        *param_1 = (char)(iVar1 / (int)uVar3) + 0x7f;
      }
      else if (uVar2 < (byte)(&DAT_80068380)[iVar5]) {
        uVar3 = (uint)(byte)(&DAT_80068388)[iVar5];
        iVar1 = (uVar2 - (byte)(&DAT_80068380)[iVar5]) * 0x80;
        if (uVar3 == 0) {
          trap(0x1c00);
        }
        if ((uVar3 == 0xffffffff) && (iVar1 == -0x80000000)) {
          trap(0x1800);
        }
        *param_1 = (char)(iVar1 / (int)uVar3) + 0x80;
      }
      else {
        *param_1 = 0x7f;
      }
      iVar5 = iVar5 + 1;
      param_1 = param_1 + 1;
    } while (iVar5 < 4);
  }
  else {
    pbVar4 = param_1 + 4;
    do {
      uVar2 = (uint)*param_1;
      if (uVar2 < 0xb0) {
        if (uVar2 < 0x4f) {
          *param_1 = (char)((int)((uVar2 - 0x4f) * 0x80) / 0x4f) + 0x80;
        }
        else {
          *param_1 = 0x7f;
        }
      }
      else {
        *param_1 = (char)((int)((uVar2 - 0xaf) * 0x80) / 0x50) + 0x7f;
      }
      param_1 = param_1 + 1;
    } while ((int)param_1 < (int)pbVar4);
  }
  return;
}



void FUN_800121b0(void)

{
  byte bVar1;
  InputFlags IVar2;
  InputFlags IVar3;
  undefined4 *puVar4;
  undefined *puVar5;
  int iVar6;
  
  bVar1 = DAT_80068370;
  if ((char)DAT_8006a95c == '\0') {
    if (DAT_8006a95c._1_1_ == 0x53) {
LAB_8001223c:
      if (DAT_80068370 != 3) {
        FUN_80011f50(&DAT_8006a960);
      }
      DAT_80068370 = 3;
    }
    else {
      if (DAT_8006a95c._1_1_ < 0x54) {
        if (DAT_8006a95c._1_1_ == 0x41) {
          DAT_80068370 = 2;
          goto LAB_80012278;
        }
      }
      else if (DAT_8006a95c._1_1_ == 0x73) goto LAB_8001223c;
      DAT_80068370 = 1;
    }
LAB_80012278:
    if (DAT_80068370 != bVar1) {
      DAT_80068375 = 1;
      goto LAB_80012294;
    }
  }
  else {
    DAT_80068370 = 0;
    DAT_80068372 = 0;
LAB_80012294:
    DAT_80068373 = 0;
    DAT_80068371 = 0;
  }
  iVar6 = 3;
  puVar5 = &DAT_8006a9cc;
  puVar4 = &DAT_8006a9dc;
  do {
    MemCopy(puVar4,puVar5,0x10);
    puVar5 = puVar5 + -0x10;
    iVar6 = iVar6 + -1;
    puVar4 = puVar4 + -4;
  } while (0 < iVar6);
  if (DAT_80068370 < 2) goto LAB_80012454;
  rawInputState.current =
       ~(uint)CONCAT11(DAT_8006a95c._2_1_,DAT_8006a95c._3_1_) &
       (TriggerLeft|TriggerRight|BumperLeft|BumperRight|Triangle|Circle|Cross|Square|Select|
        StickLeft|StickRight|Start|DPadUp|DPadRight|DPadDown|DPadLeft);
  if (DAT_80068370 == 3) {
    rawInputState.rightStickAnalogX = (byte)DAT_8006a960;
    rawInputState.rightStickAnalogY = DAT_8006a960._1_1_;
    rawInputState.leftStickAnalogX = DAT_8006a960._2_1_;
    rawInputState.leftStickAnalogY = DAT_8006a960._3_1_;
    FUN_8001200c(0x8006a9b8);
    if (DAT_8006a95c._1_1_ == 0x53) {
      IVar3 = rawInputState.current & ~(TriggerRight|BumperLeft|BumperRight|Triangle|Square);
      if ((rawInputState.current & Square) != None) {
        IVar3 = IVar3 | TriggerRight;
      }
      if ((rawInputState.current & Triangle) != None) {
        IVar3 = IVar3 | BumperRight;
      }
      if ((rawInputState.current & BumperRight) != None) {
        IVar3 = IVar3 | Triangle;
      }
      IVar2 = rawInputState.current & BumperLeft;
      if ((rawInputState.current & TriggerRight) != None) {
        IVar3 = IVar3 | BumperLeft;
      }
      rawInputState.current = IVar3;
      if (IVar2 != None) {
        rawInputState.current = IVar3 | Square;
      }
    }
    if ((rawInputState.current & (DPadUp|DPadRight|DPadDown|DPadLeft)) == None) {
      if (rawInputState.leftStickAnalogX < 0xc1) {
        IVar3 = rawInputState.current | DPadLeft;
        if (rawInputState.leftStickAnalogX < 0x40) goto LAB_800123d4;
      }
      else {
        IVar3 = rawInputState.current | DPadRight;
LAB_800123d4:
        rawInputState.current = IVar3;
      }
      if (rawInputState.leftStickAnalogY < 0xc1) {
        if (rawInputState.leftStickAnalogY < 0x40) {
          rawInputState.current = rawInputState.current | DPadUp;
        }
      }
      else {
        rawInputState.current = rawInputState.current | DPadDown;
      }
    }
  }
  else {
    rawInputState.rightStickAnalogX = 0x7f;
    rawInputState.rightStickAnalogY = 0x7f;
    rawInputState.leftStickAnalogX = 0x7f;
    rawInputState.leftStickAnalogY = 0x7f;
  }
  rawInputState.pressed = ~DAT_8006a9bc & rawInputState.current;
  rawInputState.released = DAT_8006a9bc & ~rawInputState.current;
LAB_80012454:
  DAT_80067160 = DAT_80067160 + 1;
  return;
}



void FUN_80012488(void)

{
  undefined4 *puVar1;
  int *piVar2;
  int iVar3;
  
  DAT_8006838c = 0;
  DAT_80068390 = 0;
  DAT_80068394 = 0;
  iVar3 = 0;
  if (DAT_80067024 == 2) {
    *DAT_80066f04 = DAT_8006a95c;
    piVar2 = DAT_80066f28;
    puVar1 = DAT_80066f04;
    DAT_80066f04[1] = DAT_8006a960;
    *piVar2 = (((int)puVar1 - (int)piVar2 >> 2) + 1) / 2;
  }
  do {
    clock = clock + 1;
    DAT_8006a95c = *DAT_80066f04;
    DAT_8006a960 = DAT_80066f04[1];
    iVar3 = iVar3 + 1;
    FUN_800121b0();
  } while (iVar3 < 2);
  if (DAT_80067024 == 2) {
    VSync(2);
  }
  DAT_8006a95c = 0xffff7300;
  DAT_8006a960 = 0x7f7f7f7f;
  DAT_80066f04 = DAT_80066f04 + 2;
  return;
}



void FUN_800125c8(void)

{
  DAT_800682ec = DAT_800682ec + 1;
  if (DAT_80067024 == 0) {
    DAT_8006710c._0_1_ = false;
    DAT_8006710c._1_1_ = 0;
    clock = clock + 1;
    if ((DAT_80068373 == '\0') || (vibrationFlag == '\0')) {
      DAT_8006838c = 0;
      DAT_80068390 = 0;
      DAT_80068394 = 0;
    }
    else {
      if (DAT_80068394 != 0) {
        DAT_8006710c._1_1_ = (undefined)DAT_80068398;
        DAT_80068394 = DAT_80068394 + -1;
      }
      DAT_8006710c._0_1_ = DAT_80068390 != 0;
      if ((bool)(undefined)DAT_8006710c) {
        DAT_8006710c._1_1_ = 0;
        DAT_80068390 = DAT_80068390 + -1;
      }
      if (DAT_8006838c != 0) {
        DAT_8006710c._0_1_ = true;
        DAT_8006710c._1_1_ = 0x78;
        DAT_8006838c = DAT_8006838c + -1;
      }
    }
    FUN_800121b0();
  }
  return;
}



void ReadInput(void)

{
  int iVar1;
  int iVar2;
  InputState *pIVar3;
  int iVar4;
  InputState *pIVar5;
  
  if (DAT_80067024 != 0) {
    FUN_80012488();
  }
  deltaTime = DAT_80067160;
  DAT_80067160 = 0;
  inputStates[0].pressed = None;
  inputStates[0].released = None;
  DAT_8006839c = 1;
  DAT_8006839d = '\x01';
  DAT_8006839e = 0;
  if (3 < deltaTime) {
    inputStates[0].pressed = ~inputStates[0].current & DAT_8006a9dc;
    inputStates[0].released = inputStates[0].current & ~DAT_8006a9dc;
  }
  if (4 < deltaTime) {
    deltaTime = 4;
  }
  iVar4 = 0;
  if (0 < deltaTime) {
    pIVar3 = inputStates + 1;
    iVar2 = 0;
    pIVar5 = pIVar3;
    do {
      MemCopy(pIVar5,(deltaTime * 0x10 + -0x7ff95664) - iVar2,0x10);
      inputStates[0].pressed =
           inputStates[0].pressed | *(InputFlags *)((int)&inputStates[1].pressed + iVar2);
      inputStates[0].released =
           inputStates[0].released | *(InputFlags *)((int)&inputStates[1].released + iVar2);
      if (((&inputStates[1].leftStickAnalogX)[iVar2] == 0x7f) &&
         ((&inputStates[1].leftStickAnalogY)[iVar2] == 0x7f)) {
        if ((pIVar3->current & (DPadUp|DPadRight|DPadDown|DPadLeft)) != None) goto LAB_800128b0;
      }
      else {
        DAT_8006839e = 1;
LAB_800128b0:
        DAT_8006839d = '\0';
      }
      if ((DAT_8006839d == '\0') ||
         ((pIVar3->current &
          (TriggerLeft|TriggerRight|BumperLeft|BumperRight|Triangle|Circle|Cross|Square|DPadUp|
           DPadRight|DPadDown|DPadLeft)) != None)) {
        DAT_8006839c = 0;
      }
      pIVar3 = pIVar3 + 1;
      iVar2 = iVar2 + 0x10;
      iVar4 = iVar4 + 1;
      pIVar5 = pIVar5 + 1;
    } while (iVar4 < deltaTime);
  }
  inputStates[0].current = rawInputState.current;
  inputStates[0].rightStickAnalogX = rawInputState.rightStickAnalogX;
  inputStates[0].rightStickAnalogY = rawInputState.rightStickAnalogY;
  inputStates[0].leftStickAnalogX = rawInputState.leftStickAnalogX;
  inputStates[0].leftStickAnalogY = rawInputState.leftStickAnalogY;
  if (deltaTime < 2) {
    deltaTime = 2;
  }
  if (DAT_80068375 != '\0') {
    iVar4 = FUN_80058448(0);
    if (iVar4 == 2) {
      DAT_80068371 = '\x01';
    }
    else {
      if (iVar4 != 6) {
        return;
      }
      if ((DAT_80068372 == '\0') || (DAT_80068371 == '\0')) {
        DAT_80068373 = 0;
        iVar4 = FUN_80058514(0,4,1);
        if (iVar4 != 7) {
          return;
        }
        iVar4 = FUN_8005860c(0,0xffffffff,0);
        iVar2 = 0;
        if (iVar4 == 2) {
          iVar4 = 0;
          do {
            iVar1 = FUN_8005860c(0,iVar4,4);
            iVar2 = iVar2 + iVar1;
            iVar4 = iVar4 + 1;
          } while (iVar4 < 2);
          if (iVar2 < 0x3c) {
            if (DAT_80068371 == '\0') {
              FUN_80058760(0,&DAT_8006710c,2);
              iVar4 = FUN_800586e0(0,&DAT_80061bb0);
              if (iVar4 != 0) {
                DAT_80068371 = '\x01';
              }
            }
            DAT_80068373 = 1;
            iVar4 = FUN_80058718(0,1,0);
            if (iVar4 == 0) {
              return;
            }
            DAT_80068372 = 1;
            return;
          }
        }
      }
    }
    DAT_80068375 = '\0';
  }
                    // WARNING: Read-only address (ram,0x8006a9dc) is written
  return;
}



void FUN_80012ac0(int param_1)

{
  int iVar1;
  
  iVar1 = 0;
  *(undefined4 *)(param_1 + 0x3c) = 0x7f7f7f7f;
  *(undefined4 *)(param_1 + 0x30) = 0;
  *(undefined4 *)(param_1 + 0x34) = 0;
  *(undefined4 *)(param_1 + 0x38) = 0;
  *(undefined *)(param_1 + 0x2c) = 1;
  *(undefined *)(param_1 + 0x2d) = 1;
  *(undefined *)(param_1 + 0x2e) = 0;
  do {
    *(undefined4 *)(param_1 + 0x40) = 0;
    *(undefined4 *)(param_1 + 0x44) = 0;
    *(undefined4 *)(param_1 + 0x48) = 0;
    *(undefined4 *)(param_1 + 0x4c) = 0x7f7f7f7f;
    iVar1 = iVar1 + 1;
    param_1 = param_1 + 0x10;
  } while (iVar1 < 4);
  return;
}



void FUN_80012b1c(undefined4 param_1,undefined4 param_2)

{
  MemCopy(param_2,param_1,0x80);
  FUN_80012ac0(param_1);
  return;
}



void FUN_80012b58(void)

{
  DAT_80068375 = 1;
  DAT_80068372 = 0;
  DAT_80068373 = 0;
  DAT_80068371 = 0;
  return;
}



void FUN_80012b84(void)

{
  DAT_800682f4 = 0;
  DAT_80068304 = 1;
  DAT_800682f8 = 0;
  DAT_800682fc = 0;
  DAT_80068300 = 0;
  maybeScaledMusicVolume = 0x3fff;
  DAT_80068318 = 0x7fff;
  DAT_8006831c = 0;
  DAT_80068320 = 0;
  DAT_80068334 = 0;
  DAT_80068348 = 0;
  DAT_8006835c = 0;
  DAT_80068330 = &maybeScaledMusicVolume;
  DAT_80068344 = &maybeScaledMusicVolume;
  DAT_80068358 = &DAT_80068318;
  DAT_8006836c = &DAT_80068318;
  return;
}



void FUN_80012c1c(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  DAT_80068334 = param_1;
  DAT_80068338 = param_1;
  DAT_8006833c = param_2;
  DAT_80068340 = param_3;
  DAT_800682f4 = 8;
  DAT_80068304 = 0;
  return;
}



void FUN_80012c58(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  if (0 < *DAT_8006836c) {
    if (DAT_800682f4 != 5) {
      DAT_800682f4 = 8;
    }
    DAT_80068304 = 0;
    DAT_8006835c = param_1;
    DAT_80068360 = param_1;
    DAT_80068364 = param_2;
    DAT_80068368 = param_3;
  }
  return;
}



void FUN_80012cbc(void)

{
  int iVar1;
  uint uVar2;
  undefined4 uVar3;
  int *piVar4;
  undefined auStack_60 [8];
  u_char auStack_58 [5];
  undefined auStack_53 [3];
  CdlLOC aCStack_50 [2];
  undefined uStack_48;
  undefined uStack_47;
  SpuCommonAttr SStack_40;
  
  piVar4 = (int *)0x0;
  iVar1 = CdSync(1,auStack_58);
  uVar2 = CdStatus();
  if (DAT_8006831c == 1) {
    if (DAT_8006835c == 0) {
      DAT_80068300 = 0;
    }
    piVar4 = &DAT_80068320;
    if ((DAT_800682f4 - 6U < 2) && (DAT_8006835c != 0)) {
      DAT_800682f4 = 8;
    }
  }
  else if (DAT_8006831c < 2) {
    if ((DAT_8006831c == 0) && (DAT_8006835c == 0)) {
      DAT_80068300 = 0;
    }
  }
  else if ((DAT_8006831c == 2) && (piVar4 = &DAT_80068348, DAT_80068300 == 1)) {
    DAT_800682f4 = 8;
    DAT_80068300 = 0;
  }
  if (DAT_80068304 == 0) {
    if ((DAT_80068308 != 0) && (DAT_800682f4 == 8)) {
      DAT_800682f4 = 6;
      DAT_80068308 = 0;
    }
  }
  else if ((piVar4 == (int *)0x0) || (DAT_80068308 != 0)) {
    if ((DAT_80068304 != 0) &&
       (((piVar4 == (int *)0x0 && (DAT_80068308 == 0)) && (DAT_800682f4 != 0)))) {
      DAT_8006831c = 0;
      DAT_800682f4 = 9;
    }
  }
  else {
    DAT_800682f4 = 8;
    DAT_80068308 = 1;
  }
  if ((uVar2 & 0x10) != 0) {
    if (DAT_800682f4 == 8) {
      DAT_800682fc = 0;
      DAT_8006831c = 0;
    }
    else if ((DAT_800682f4 != 0) && (DAT_800682f4 != 9)) {
      DAT_800682fc = 0;
      DAT_800682f4 = 1;
    }
    DAT_800682f8 = 1;
    uVar3 = 1;
    goto LAB_8001341c;
  }
  if ((uVar2 & 4) == 0) {
    if (((uVar2 & 1) != 0) || (iVar1 == 5)) {
      if (DAT_800682f4 == 8) {
        DAT_800682fc = 0;
        DAT_8006831c = 0;
        uVar3 = 1;
      }
      else {
        if ((DAT_800682f4 != 0) && (DAT_800682f4 != 9)) {
          DAT_800682fc = 0;
          DAT_800682f4 = 1;
        }
        uVar3 = 1;
      }
      goto LAB_8001341c;
    }
  }
  else {
    DAT_800682fc = 0;
    DAT_800682f4 = 1;
  }
  if (DAT_800682f8 == 1) {
    uVar3 = 9;
    if ((uVar2 & 2) != 0) {
      iVar1 = FUN_800587d4(9);
      if (iVar1 == 2) {
        uVar3 = 0x1b;
      }
      else {
        if ((uVar2 & 0x40) == 0) {
          iVar1 = 1000;
          if (piVar4 != (int *)0x0) {
            iVar1 = piVar4[1];
          }
          CdIntToPos(iVar1,aCStack_50);
          FUN_80058994(2,aCStack_50);
          return;
        }
        DAT_800682f8 = 0;
        uVar3 = 1;
      }
    }
    goto LAB_8001341c;
  }
  if (iVar1 != 2) {
    return;
  }
  switch(DAT_800682f4) {
  case 0:
    goto LAB_80013098;
  case 1:
    auStack_60[0] = 200;
    FUN_80058994(0xe,auStack_60);
    SStack_40.cd.volume.right = 0;
    SStack_40.cd.volume.left = 0;
    SStack_40.mask = 0xc0;
    SpuSetCommonAttr(&SStack_40);
    DAT_8006830c = 10;
    DAT_800682f4 = 2;
    break;
  case 2:
    CdIntToPos(piVar4[1],aCStack_50);
    FUN_80058994(2,aCStack_50);
    DAT_800682f4 = 3;
    break;
  case 3:
    uStack_48 = 1;
    uStack_47 = (undefined)piVar4[3];
    FUN_80058994(0xd,&uStack_48);
    DAT_800682f4 = 4;
    break;
  case 4:
    FUN_80058994(0x1b,0);
    DAT_8006830c = 300;
    DAT_800682f4 = 5;
    break;
  case 5:
    iVar1 = FUN_800587d4();
    if ((iVar1 == 1) && ((uVar2 & 0x60) == 0x20)) {
      DAT_800682fc = 0;
      DAT_800682f4 = 6;
      uVar3 = 1;
    }
    else {
      DAT_8006830c = DAT_8006830c + -1;
      if (DAT_8006830c < 0) {
        DAT_800682f4 = 2;
        DAT_80068310 = DAT_80068310 + -1;
      }
      uVar3 = 1;
    }
    goto LAB_8001341c;
  case 6:
    DAT_800682fc = DAT_800682fc + *(int *)piVar4[4] / 2;
    if (*(int *)piVar4[4] <= DAT_800682fc) {
      DAT_800682f4 = 7;
      DAT_800682fc = *(int *)piVar4[4];
    }
    SStack_40.mask = 0xc0;
    SStack_40.cd.volume.right = (short)DAT_800682fc;
    SStack_40.cd.volume.left = (short)DAT_800682fc;
    SpuSetCommonAttr(&SStack_40);
    uVar3 = 0x11;
    goto LAB_8001341c;
  case 7:
    iVar1 = *(int *)piVar4[4];
    if (DAT_800682fc != iVar1) {
      SStack_40.cd.volume.left = (short)iVar1;
      SStack_40.mask = 0xc0;
      DAT_800682fc = iVar1;
      SStack_40.cd.volume.right = SStack_40.cd.volume.left;
      SpuSetCommonAttr(&SStack_40);
    }
    iVar1 = FUN_800587d4();
    uVar3 = 0x11;
    if (iVar1 == 0x11) {
      iVar1 = FUN_80058d9c(auStack_53);
      if (*piVar4 < iVar1) {
        piVar4[1] = iVar1;
      }
      if ((piVar4[2] + -0x13 < iVar1) || (uVar3 = 0x11, *(int *)piVar4[4] == 0)) {
        DAT_800682f4 = 8;
        uVar3 = 0x11;
      }
    }
    goto LAB_8001341c;
  case 8:
    if (piVar4 == (int *)0x0) {
      DAT_800682fc = 0;
    }
    else {
      iVar1 = *(int *)piVar4[4];
      if (iVar1 < 0) {
        iVar1 = iVar1 + 7;
      }
      DAT_800682fc = DAT_800682fc - (iVar1 >> 3);
    }
    if (DAT_800682fc < 1) {
      DAT_800682fc = 0;
      if (DAT_80068304 == 0) {
        if ((DAT_8006835c == 0) || (*DAT_8006836c < 1)) {
          if ((DAT_80068334 == 0) || (*DAT_80068344 < 1)) {
            if ((DAT_80068320 == 0) || (*DAT_80068330 < 1)) {
              DAT_800682f4 = 9;
              DAT_8006831c = 0;
            }
            else {
              if ((DAT_80068324 < DAT_80068320) || (DAT_80068328 + -0x4c < DAT_80068324)) {
                DAT_80068324 = DAT_80068320;
              }
              DAT_800682f4 = 1;
              DAT_8006831c = 1;
            }
          }
          else {
            DAT_80068320 = DAT_80068334;
            DAT_80068324 = DAT_80068338;
            DAT_80068328 = DAT_8006833c;
            DAT_8006832c = DAT_80068340;
            DAT_80068330 = DAT_80068344;
            DAT_800682f4 = 1;
            DAT_80068334 = 0;
            DAT_8006831c = 1;
          }
        }
        else {
          DAT_80068348 = DAT_8006835c;
          DAT_8006834c = DAT_80068360;
          DAT_80068350 = DAT_80068364;
          DAT_80068354 = DAT_80068368;
          DAT_80068358 = DAT_8006836c;
          DAT_8006831c = 2;
          DAT_8006835c = 0;
          DAT_800682f4 = 1;
        }
      }
      else {
        DAT_8006831c = 0;
        DAT_800682f4 = 9;
        DAT_80068308 = 0;
      }
    }
    SStack_40.mask = 0xc0;
    SStack_40.cd.volume.right = (short)DAT_800682fc;
    SStack_40.cd.volume.left = (short)DAT_800682fc;
    SpuSetCommonAttr(&SStack_40);
    break;
  case 9:
    if ((DAT_80068304 == 0) || ((uVar2 & 0x20) == 0)) {
      DAT_800682f4 = 0;
    }
    else {
      FUN_80058994(9,0);
    }
LAB_80013098:
    if (DAT_80068304 != 0) {
      return;
    }
    if (DAT_8006835c == 0) {
      if (DAT_80068334 != 0) {
        DAT_80068320 = DAT_80068334;
        DAT_80068324 = DAT_80068338;
        DAT_80068328 = DAT_8006833c;
        DAT_8006832c = DAT_80068340;
        DAT_80068330 = DAT_80068344;
        DAT_80068334 = 0;
LAB_8001318c:
        DAT_8006831c = 1;
        goto LAB_80013194;
      }
      if (DAT_80068320 != 0) goto LAB_8001318c;
    }
    else {
      DAT_80068348 = DAT_8006835c;
      DAT_8006834c = DAT_80068360;
      DAT_80068350 = DAT_80068364;
      DAT_80068354 = DAT_80068368;
      DAT_80068358 = DAT_8006836c;
      DAT_8006831c = 2;
      DAT_8006835c = 0;
LAB_80013194:
      DAT_800682f4 = 1;
    }
    uVar3 = 1;
LAB_8001341c:
    FUN_80058994(uVar3,0);
  }
  return;
}



bool FUN_80013690(void)

{
  bool bVar1;
  int iVar2;
  u_char local_10 [8];
  
  if (DAT_800682f4 == 0) {
    if (DAT_800682e8 == 0) {
      iVar2 = CdSync(1,(u_char *)0x0);
      bVar1 = iVar2 != 2;
    }
    else {
      bVar1 = true;
      if (DAT_800682f0 <= DAT_800682ec) {
        local_10[0] = 0x80;
        CdInit();
        CdControl('\x0e',local_10,(u_char *)0x0);
        CdReadCallback(FUN_8001379c);
        do {
          iVar2 = CdSync(1,(u_char *)0x0);
        } while (iVar2 != 2);
        CdControl('\x02',&DAT_800682e0,(u_char *)0x0);
        DAT_800682ec = 0;
        CdRead(DAT_800682dc,DAT_800682e4,0x80);
        bVar1 = true;
      }
    }
  }
  else {
    DAT_80068304 = 1;
    FUN_80012cbc();
    bVar1 = true;
  }
  return bVar1;
}



void FUN_8001379c(char param_1)

{
  if (DAT_800682e8 != 0) {
    if (param_1 == '\x02') {
      DAT_800682e8 = 0;
    }
    else {
      CdControl('\x02',&DAT_800682e0,(u_char *)0x0);
      DAT_800682ec = 0;
      CdRead(DAT_800682dc,DAT_800682e4,0x80);
    }
  }
  return;
}



void FUN_80013810(int param_1,u_long *param_2,int param_3,int param_4)

{
  int iVar1;
  u_char local_20 [8];
  
  local_20[0] = 0x80;
  do {
    iVar1 = FUN_80013690();
  } while (iVar1 != 0);
  CdControl('\x0e',local_20,(u_char *)0x0);
  iVar1 = param_4 >> 0xb;
  if (param_4 < 0) {
    iVar1 = param_4 + 0x7ff >> 0xb;
  }
  CdIntToPos(param_1 + iVar1,(CdlLOC *)&DAT_800682e0);
  CdControl('\x02',&DAT_800682e0,(u_char *)0x0);
  iVar1 = param_3 + 0x7ff;
  if (iVar1 < 0) {
    iVar1 = param_3 + 0xffe;
  }
  DAT_800682dc = iVar1 >> 0xb;
  DAT_800682e8 = 1;
  DAT_800682f0 = DAT_800682dc + 0x78;
  DAT_800682ec = 0;
  DAT_800682e4 = param_2;
  CdRead(DAT_800682dc,param_2,0x80);
  do {
    iVar1 = FUN_80013690();
  } while (iVar1 != 0);
  return;
}



undefined4 FUN_80013918(int param_1,u_long *param_2,int param_3,int param_4)

{
  int iVar1;
  undefined4 uVar2;
  u_char local_20 [8];
  
  local_20[0] = 0x80;
  iVar1 = FUN_80013690();
  uVar2 = 0;
  if (iVar1 == 0) {
    CdControl('\x0e',local_20,(u_char *)0x0);
    iVar1 = param_4 >> 0xb;
    if (param_4 < 0) {
      iVar1 = param_4 + 0x7ff >> 0xb;
    }
    CdIntToPos(param_1 + iVar1,(CdlLOC *)&DAT_800682e0);
    CdControl('\x02',&DAT_800682e0,(u_char *)0x0);
    iVar1 = param_3 + 0x7ff;
    if (iVar1 < 0) {
      iVar1 = param_3 + 0xffe;
    }
    DAT_800682dc = iVar1 >> 0xb;
    DAT_800682e8 = 1;
    DAT_800682f0 = DAT_800682dc + 0x78;
    DAT_800682ec = 0;
    DAT_800682e4 = param_2;
    CdRead(DAT_800682dc,param_2,0x80);
    uVar2 = 1;
  }
  return uVar2;
}



void FUN_80013a14(void)

{
  short sVar1;
  int iVar2;
  uint uVar3;
  
  if (DAT_80067ec4 == 0) {
                    // WARNING: Read-only address (ram,0x80069941) is written
                    // WARNING: Read-only address (ram,0x80069942) is written
                    // WARNING: Read-only address (ram,0x80069943) is written
                    // WARNING: Read-only address (ram,0x800699b5) is written
    doubleFrameBuffer[1].drawEnvironment.r0 = clearColor.Red;
                    // WARNING: Read-only address (ram,0x800699b6) is written
    doubleFrameBuffer[1].drawEnvironment.g0 = clearColor.Green;
                    // WARNING: Read-only address (ram,0x800699b7) is written
    doubleFrameBuffer[1].drawEnvironment.b0 = clearColor.Blue;
  }
  else {
    uVar3 = (uint)clearColor.Red;
                    // WARNING: Read-only address (ram,0x80069941) is written
    doubleFrameBuffer[1].drawEnvironment.r0 = (u_char)((int)(uVar3 + (DAT_80067408 >> 4)) >> 1);
                    // WARNING: Read-only address (ram,0x80069942) is written
    doubleFrameBuffer[1].drawEnvironment.g0 = (u_char)((int)(uVar3 + (DAT_8006740c >> 4)) >> 1);
                    // WARNING: Read-only address (ram,0x80069943) is written
    doubleFrameBuffer[1].drawEnvironment.b0 = (u_char)((int)(uVar3 + (DAT_80067410 >> 4)) >> 1);
                    // WARNING: Read-only address (ram,0x800699b5) is written
                    // WARNING: Read-only address (ram,0x800699b6) is written
                    // WARNING: Read-only address (ram,0x800699b7) is written
  }
  doubleFrameBuffer[0].drawEnvironment.r0 = doubleFrameBuffer[1].drawEnvironment.r0;
  doubleFrameBuffer[0].drawEnvironment.g0 = doubleFrameBuffer[1].drawEnvironment.g0;
  doubleFrameBuffer[0].drawEnvironment.b0 = doubleFrameBuffer[1].drawEnvironment.b0;
  SelectRender(Objects|World|Skybox|Particles|HUD);
  if (DAT_80067024 == 1) {
    if (((char)DAT_8006a95c == '\0') && ((DAT_8006a95c._2_1_ != -1 || (DAT_8006a95c._3_1_ != -1))))
    {
      DAT_80067178 = DAT_80067024;
    }
    iVar2 = GetTextWidth((&PTR_s_DEMO_MODE_80061bac)[DAT_80067118]);
    sVar1 = (short)(iVar2 >> 1);
    RenderRoundedBackground(0xf9 - sVar1,sVar1 + 0x104,0xc2,0xcf);
    DrawText_Center((&PTR_s_DEMO_MODE_80061bac)[DAT_80067118],0x100,0xc4,1);
  }
  return;
}



void FUN_80013bc4(void)

{
  bool bVar1;
  short left;
  char cVar2;
  int iVar3;
  short *psVar4;
  uint colorIndex;
  int iVar5;
  int iVar6;
  short sVar7;
  char **ppcVar8;
  char *pcVar9;
  short *psVar10;
  TextConfig local_78;
  char acStack_68 [72];
  
  if ((int)prevGameState < 3) {
    iVar6 = 0x400;
    if (prevGameState == Normal) {
      if (0x23 < DAT_80067130 - 0x18) {
        if ((int)DAT_80067130 < 0x3c) goto LAB_80013c3c;
        goto LAB_80013c50;
      }
      iVar6 = (int)*(short *)(&DAT_800633f4 + ((int)(DAT_80067130 - 0x18) >> 1) * 2);
    }
    else {
LAB_80013c3c:
      if (prevGameState == Dialogue) {
LAB_80013c50:
        iVar6 = 0;
      }
      else if (prevGameState == Freeze) {
        iVar6 = (int)*(short *)(&DAT_80063418 + ((int)DAT_80067130 >> 1) * 2);
      }
    }
    if (iVar6 != 0x400) {
      RenderDialoguePanel(iVar6 + 0x18,iVar6 + 0x1e8,0x92,0xd4);
      if (DAT_8006713c == '\0') {
        bVar1 = DAT_80066f5c != 0;
        pcVar9 = *(char **)(currentNPC->data + 0xc);
        if (*pcVar9 == -1) goto LAB_80013ddc;
      }
      else {
        pcVar9 = s_Spyro_80066ea8;
        bVar1 = DAT_80066f5c == 0;
      }
      iVar3 = GetTextWidth(pcVar9);
      if (bVar1) {
        iVar6 = (iVar6 + 0x1cc) - iVar3;
      }
      else {
        iVar6 = iVar6 + 0x28;
      }
      SetTPage(0x18);
      left = (short)iVar6;
      sVar7 = left + (short)iVar3;
      DrawDarkTransparentRect(left,sVar7 + 0xe,0x86,0x92);
      DrawDarkTransparentRect(left + 1,sVar7 + 0xd,0x85,0x86);
      DrawDarkTransparentRect(left + 4,sVar7 + 10,0x84,0x85);
      if ((prevGameState == Dialogue) || ((prevGameState == Normal && (0x3b < (int)DAT_80067130))))
      {
        DrawShadowedOrangeLine(left + 0x18,0x91,sVar7 + -10,0x91);
        RenderText(pcVar9,iVar6 + 8,0x86,0,(TextConfig *)0x0);
      }
    }
  }
LAB_80013ddc:
  if (prevGameState == Dialogue) {
    if (DAT_8006713c == '\0') {
      iVar6 = 0;
      if (0 < DAT_8006706c + -1) {
        psVar4 = &DAT_8006abaa;
        do {
          if (DAT_80066ef0 <= *psVar4) break;
          iVar6 = iVar6 + 1;
          psVar4 = psVar4 + 1;
        } while (iVar6 < DAT_8006706c + -1);
      }
      if (DAT_8006714c == 0) {
        if (iVar6 < 5) {
          iVar3 = iVar6 * 0xc + 0x96;
        }
        else {
          if (DAT_800670b8 < iVar6) {
            DAT_8006714c = 0xb;
          }
          iVar3 = DAT_8006714c + 0xc6;
        }
      }
      else {
        iVar3 = DAT_8006714c + 0xc5;
        DAT_8006714c = DAT_8006714c + -1;
      }
      iVar5 = iVar6 + -5;
      bVar1 = iVar6 < iVar5;
      if (iVar5 < 0) {
        iVar5 = 0;
        bVar1 = iVar6 < 0;
      }
      DAT_800670b8 = iVar6;
      if (!bVar1) {
        psVar10 = (short *)(&DAT_8006aba8 + iVar6 * 2);
        psVar4 = &DAT_8006abaa + iVar6;
        do {
          if (iVar3 - 0x8eU < 0x42) {
            local_78.vramYmin = 0;
            local_78.vramYmax = 9;
            local_78.length = (int)*psVar4 - (int)*psVar10;
            if (iVar3 < 0x96) {
              local_78.vramYmin = 0x96 - iVar3;
            }
            if (199 < iVar3) {
              local_78.vramYmax = 0xd0 - iVar3;
            }
            if (DAT_80066ef0 < *psVar4) {
              local_78.length = DAT_80066ef0 - *psVar10;
            }
            RenderText((char *)(&DAT_8006a8cc)[iVar6],0x28,(short)iVar3,0,&local_78);
          }
          psVar10 = psVar10 + -1;
          psVar4 = psVar4 + -1;
          iVar6 = iVar6 + -1;
          iVar3 = iVar3 + -0xc;
        } while (iVar5 <= iVar6);
      }
      if (((DAT_80067094 != 0) || (DAT_80066f7c != '\0')) && ((clock & 0x1f) < 0x10)) {
        RenderText(&DAT_80066eb0,0x1da,200,0,(TextConfig *)0x0);
      }
    }
    else {
      local_78.vramYmin = 0;
      local_78.vramYmax = 9;
      if (DAT_80066f08 == '\0') {
        iVar6 = 0;
        if (0 < DAT_80066f10) {
          ppcVar8 = (char **)&DAT_8006a8b4;
          sVar7 = 0x98;
          do {
            local_78.length =
                 (int)(short)(&DAT_8006abaa)[DAT_8006706c + iVar6] -
                 (int)*(short *)(&DAT_8006aba8 + (DAT_8006706c + iVar6) * 2);
            iVar3 = 0x31;
            if (iVar6 < DAT_80066f10 + -2) {
              pcVar9 = *ppcVar8;
              colorIndex = 0;
            }
            else {
              colorIndex = 0;
              if ((DAT_80067130 & 0x1f) < 0x10) {
                colorIndex = (uint)(iVar6 == (int)DAT_80066f10 + DAT_80066f48 + -2);
              }
              iVar3 = 0x48;
              pcVar9 = *ppcVar8;
            }
            RenderText(pcVar9,iVar3,sVar7,colorIndex,&local_78);
            iVar6 = iVar6 + 1;
            ppcVar8 = ppcVar8 + 1;
            sVar7 = sVar7 + 0xc;
          } while (iVar6 < DAT_80066f10);
        }
        RenderText(&DAT_80066eb0,0x3c,(DAT_80066f10 + DAT_80066f48 + -2) * 0xc + 0x98,1,
                   (TextConfig *)0x0);
      }
      else {
        iVar6 = 0;
        if (0 < DAT_80066f10) {
          ppcVar8 = (char **)&DAT_8006a8b4;
          sVar7 = 0x98;
          do {
            local_78.length =
                 (int)(short)(&DAT_8006abaa)[DAT_8006706c + iVar6] -
                 (int)*(short *)(&DAT_8006aba8 + (DAT_8006706c + iVar6) * 2);
            iVar6 = iVar6 + 1;
            RenderText(*ppcVar8,0x28,sVar7,4,&local_78);
            ppcVar8 = ppcVar8 + 1;
            sVar7 = sVar7 + 0xc;
          } while (iVar6 < DAT_80066f10);
        }
      }
      if (showPaymentOption != 0) {
        DrawText_Right((&PTR_s_Your_Total__80061b30)[DAT_80067118],0x14a,0xc4,1);
        RenderSprite(spriteGemAnimation + ((int)clock >> 2) % 6,0x150,0xbe,1);
        DrawNumberBig(0x162,0xbf,gemsCollectedNetValue);
      }
    }
    if (DAT_80066fcc != 0) {
      cVar2 = DAT_80066f7c;
      if (DAT_80066f08 != '\0') {
        cVar2 = DAT_8006713c;
      }
      if (cVar2 != '\0') {
        iVar6 = 0;
        iVar3 = 0x186;
        DrawText_Right((&PTR_s_Difficulty__80061b34)[DAT_80067118],0x17c,200,0);
        do {
          iVar5 = 7;
          if (iVar6 < DAT_80066fcc) {
            iVar5 = 6;
          }
          RenderText(&DAT_80066eb4,iVar3,200,iVar5,(TextConfig *)0x0);
          iVar6 = iVar6 + 1;
          iVar3 = iVar3 + 0xe;
        } while (iVar6 < 5);
      }
    }
  }
  if ((prevGameState == FadeIn) && (DAT_800676d4 != 0)) {
    FUN_8005304c();
  }
  if (((prevGameState != Pause) && ((prevGameState != FadeIn || (DAT_80067164 == 0)))) ||
     (0x82 < DAT_80067130 - 0x14)) goto LAB_800144d4;
  if (prevGameState == FadeIn) {
    pcVar9 = (&PTR_s_You_already_have_this_orb_80061b38)[DAT_80067118];
LAB_80014440:
    sprintf(acStack_68,pcVar9);
  }
  else {
    if (DAT_80067164 != 0) {
      pcVar9 = (&PTR_s_You_already_have_this_talisman_80061b3c)[DAT_80067118];
      goto LAB_80014440;
    }
    sprintf(acStack_68,&DAT_80066eb8,
            (&PTR_s_Summer_Forest_800649b4)[DAT_80067118 * 0x20 + g_currLevelID],
            PTR_s__Talisman_80061b40);
  }
  iVar6 = GetTextWidth(acStack_68);
  iVar3 = 0x100 - (iVar6 >> 1);
  RenderRoundedBackground((short)iVar3 + -9,(short)(iVar6 >> 1) + 0x109,199,0xd4);
  RenderText(acStack_68,iVar3,0xc9,1,(TextConfig *)0x0);
LAB_800144d4:
  SelectRender(Objects|World|Skybox|Particles);
  return;
}



void FUN_80014504(void)

{
  if ((menuState == Paused) || (2 < (int)menuState)) {
                    // WARNING: Read-only address (ram,0x80069941) is written
    doubleFrameBuffer[0].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80069942) is written
    doubleFrameBuffer[0].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80069943) is written
    doubleFrameBuffer[0].drawEnvironment.b0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b5) is written
    doubleFrameBuffer[1].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b6) is written
    doubleFrameBuffer[1].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b7) is written
    doubleFrameBuffer[1].drawEnvironment.b0 = '\0';
    if ((pauseSubMenuId != 0) && (menuAnimation != 0)) {
      SetTPage(0x38);
      RenderHUDSpyroLivesPopup();
    }
  }
  else {
    SelectRender(Objects|World|Skybox|Particles|HUD);
  }
  return;
}



void PauseMenuOpeningRelated(void)

{
  short sVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  RECT local_30;
  RECT local_28 [3];
  
  DAT_80069924 = (undefined *)0x0;
  switch(menuState) {
  case Pausing:
    if (menuAnimation == 0) {
      SelectRender(Objects|World|Skybox|Particles);
    }
    else {
      sVar1 = 0xc;
      if (menuAnimation == 2) {
        local_30.x = 0;
        if (DAT_80066fc0 != doubleFrameBuffer) {
          sVar1 = 0xf0;
        }
        iVar4 = 0xc;
        local_30.w = 0x200;
        local_30.h = 0xd8;
        if (DAT_80066fc0 == doubleFrameBuffer) {
          iVar4 = 0xf0;
        }
        local_30.y = sVar1;
        MoveImage(&local_30,0,iVar4);
        DrawSync(0);
        VSync(0);
                    // WARNING: Read-only address (ram,0x80069940) is written
        doubleFrameBuffer[0].drawEnvironment.isbg = '\0';
                    // WARNING: Read-only address (ram,0x800699b4) is written
        doubleFrameBuffer[1].drawEnvironment.isbg = '\0';
        FUN_80055ca0(0x80069984);
        FUN_80055be0(0x8006999c);
        iVar4 = 1;
        do {
          AnimatePausePhoto(iVar4);
          VSync(0);
          uVar2 = FUN_8001b2a8(0);
          FUN_80055b70(uVar2);
          iVar4 = iVar4 + 1;
        } while (iVar4 < 0x11);
        DrawSync(0);
        local_28[0].x = 0x200;
        local_28[0].y = 0;
        local_28[0].w = 0x100;
        local_28[0].h = 0xe0;
        StoreImage(local_28,(u_long *)(DAT_8006b29c + 0x1c000));
        local_28[0].y = 0x15c;
        local_28[0].x = 0;
        local_28[0].w = 0x100;
        local_28[0].h = 0x6c;
        MoveImage(local_28,0x200,0xc);
        FUN_8004dd94();
                    // WARNING: Read-only address (ram,0x80069940) is written
        doubleFrameBuffer[0].drawEnvironment.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x800699b4) is written
        doubleFrameBuffer[1].drawEnvironment.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x80069941) is written
        doubleFrameBuffer[0].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80069942) is written
        doubleFrameBuffer[0].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80069943) is written
        doubleFrameBuffer[0].drawEnvironment.b0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b5) is written
        doubleFrameBuffer[1].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b6) is written
        doubleFrameBuffer[1].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b7) is written
        doubleFrameBuffer[1].drawEnvironment.b0 = '\0';
        DAT_80066fc0 = doubleFrameBuffer;
        doubleFrameBuffer[1].field2_0x70 = (uint *)(DAT_8006b29c + 0xe000);
        primitiveBuffer_next = (undefined *)doubleFrameBuffer[0].field2_0x70;
        DAT_80067034 = (int)doubleFrameBuffer[0].field2_0x70 + DAT_80067170;
                    // WARNING: Read-only address (ram,0x80069a0c) is written
      }
    }
    if ((1 < menuAnimation) && (DrawGameScreenshot(), 5 < menuAnimation)) {
      TopLeftPauseMenuBackgroundRelated((&DAT_80063812)[menuAnimation]);
      PauseMenuTextRelated((&DAT_80063812)[menuAnimation]);
      RenderMenuGuidebook((&DAT_8006383e)[menuAnimation]);
    }
    break;
  case Paused:
    DrawGameScreenshot();
    TopLeftPauseMenuBackgroundRelated(0);
    PauseMenuTextRelated(0);
    RenderMenuGuidebook(0);
    break;
  case Playing:
    if (menuAnimation < 0xd) {
      DrawGameScreenshot();
      TopLeftPauseMenuBackgroundRelated((&DAT_80063834)[menuAnimation]);
      PauseMenuTextRelated((&DAT_80063834)[menuAnimation]);
      RenderMenuGuidebook((&DAT_80063860)[menuAnimation]);
    }
    else if (menuAnimation < 0xf) {
      DrawGameScreenshot();
    }
    else if (menuAnimation == 0xf) {
      DrawSync(0);
      VSync(0);
      FUN_80055ca0(0x80069984);
      FUN_80055be0(doubleFrameBuffer);
      local_30.x = 0x200;
      local_30.w = 0x100;
      DAT_80066fc0 = doubleFrameBuffer;
      local_30.y = 0;
      local_30.h = 0xe0;
      LoadImage(&local_30,(u_long *)(DAT_8006b29c + 0x1c000));
      DrawSync(0);
                    // WARNING: Read-only address (ram,0x80069a0c) is written
      doubleFrameBuffer[1].field2_0x70 = DAT_8006b2a0;
      primitiveBuffer_next = (undefined *)DAT_80066fc0->field2_0x70;
                    // WARNING: Read-only address (ram,0x80069942) is written
      doubleFrameBuffer[0].drawEnvironment.g0 = clearColor.Green;
                    // WARNING: Read-only address (ram,0x80069943) is written
      doubleFrameBuffer[0].drawEnvironment.b0 = clearColor.Blue;
                    // WARNING: Read-only address (ram,0x800699b6) is written
      doubleFrameBuffer[1].drawEnvironment.g0 = clearColor.Green;
                    // WARNING: Read-only address (ram,0x800699b7) is written
      doubleFrameBuffer[1].drawEnvironment.b0 = clearColor.Blue;
      DAT_80067034 = (int)primitiveBuffer_next + DAT_80067170;
                    // WARNING: Read-only address (ram,0x80069941) is written
      doubleFrameBuffer[0].drawEnvironment.r0 = clearColor.Red;
                    // WARNING: Read-only address (ram,0x800699b5) is written
      doubleFrameBuffer[1].drawEnvironment.r0 = clearColor.Red;
      SelectRender(Objects|World|Skybox|Particles);
    }
    else {
                    // WARNING: Read-only address (ram,0x80069940) is written
      doubleFrameBuffer[0].drawEnvironment.isbg = '\0';
                    // WARNING: Read-only address (ram,0x800699b4) is written
      doubleFrameBuffer[1].drawEnvironment.isbg = '\0';
      FUN_80055be0(0x8006999c);
      DrawSync(0);
      iVar4 = 0xe;
      do {
        AnimatePausePhoto(iVar4);
        VSync(0);
        uVar2 = FUN_8001b2a8(0);
        FUN_80055b70(uVar2);
        iVar4 = iVar4 + -2;
      } while (1 < iVar4);
      DrawSync(0);
                    // WARNING: Read-only address (ram,0x80069940) is written
      doubleFrameBuffer[0].drawEnvironment.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x800699b4) is written
      doubleFrameBuffer[1].drawEnvironment.isbg = '\x01';
      DAT_80066fc0 = (FrameBuffer *)0x8006999c;
      primitiveBuffer_next = (undefined *)doubleFrameBuffer[1].field2_0x70;
      DAT_80067034 = (int)doubleFrameBuffer[1].field2_0x70 + DAT_80067170;
      VSync(0);
      FUN_80055ca0(&DAT_80066fc0->displayEnvironment);
      FUN_80055be0(DAT_80066fc0);
      SelectRender(Objects|World|Skybox|Particles);
    }
    break;
  case BetweenMenuAndHomeworld:
    if (DAT_80069910 != 0) {
      if (DAT_80069910 == 1) {
        FUN_8004f200();
        FUN_8004f26c();
        FUN_8004f2dc();
        FUN_8004f348();
      }
      else {
        if (DAT_80069910 != 2) {
          DAT_80069924 = (undefined *)0x0;
          return;
        }
        FUN_8004f200();
        FUN_8004f26c();
        FUN_8004f6f4(pauseSubMenuId);
        FUN_8004f2dc();
        if (0xb < menuAnimation) {
          DAT_80069924 = primitiveBuffer_next;
          FUN_8004f4a8(pauseSubMenuId);
          goto LAB_80015184;
        }
      }
      goto LAB_80015048;
    }
    if (menuAnimation < 0x12) {
      DrawGameScreenshot();
      TopLeftPauseMenuBackgroundRelated(0);
      PauseMenuTextRelated(0);
    }
    if (6 < menuAnimation) {
      FUN_8004f26c();
      FUN_8004f348();
    }
    if (0xb < menuAnimation) {
      FUN_8004f3b8(1);
      return;
    }
    DAT_80069924 = primitiveBuffer_next;
    RenderMenuGuidebook(0);
    uVar3 = (uint)(byte)(&DAT_80063870)[menuAnimation % 0xc];
    goto LAB_800151cc;
  case Homeworld:
    FUN_8004f200();
    FUN_8004f26c();
    if (pauseMenuCurrentItem == 0) {
      FUN_8004f4a8(pauseSubMenuId);
      FUN_8004f6f4(pauseSubMenuId);
      return;
    }
    FUN_8004f4a8(pauseSubMenuId);
    FUN_8004f6f4(pauseSubMenuId + 1);
    DAT_80069924 = primitiveBuffer_next;
    if (menuAnimation < 0xc) {
      FUN_8004f6f4(pauseSubMenuId);
      uVar3 = (uint)(byte)(&DAT_80063870)[menuAnimation % 0xc];
    }
    else {
      FUN_8004f4a8(pauseSubMenuId + 1);
LAB_80015184:
      uVar3 = (byte)(&DAT_80063870)[menuAnimation % 0xc] + 0xc0;
    }
    goto LAB_800151cc;
  case BetweenHomeworldAndWorld:
  case SwitchingWorlds:
    FUN_8004f200();
    FUN_8004f26c();
    if (DAT_80069910 == 0) {
      if (menuState == BetweenHomeworldAndWorld) {
        FUN_8004f4a8(pauseSubMenuId);
      }
      else {
        FUN_8004f994();
      }
      FUN_8004f348();
      if (menuAnimation < 0xc) {
        DAT_80069924 = primitiveBuffer_next;
        if (menuState == BetweenHomeworldAndWorld) {
          FUN_8004f6f4(pauseSubMenuId);
        }
        else {
          FUN_8004fb48();
        }
        uVar3 = (uint)(byte)(&DAT_80063870)[menuAnimation % 0xc];
        goto LAB_800151cc;
      }
    }
    else if (DAT_80069910 == 1) {
      FUN_8004f2dc();
      FUN_8004f348();
    }
    else {
      FUN_8004fb48();
      FUN_8004f2dc();
      if (0xb < menuAnimation) {
        DAT_80069924 = primitiveBuffer_next;
        FUN_8004f994();
        goto LAB_80015184;
      }
    }
    goto LAB_80015048;
  case World:
    FUN_8004f200();
    FUN_8004f26c();
    FUN_8004f994();
    FUN_8004fb48();
    break;
  case 8:
    FUN_8006fc3c();
    break;
  case 9:
    FUN_8006fe2c();
    break;
  case 10:
    FUN_8004f200();
    FUN_8004f26c();
    if (DAT_80069910 == 0) {
      FUN_8004f4a8(pauseSubMenuId);
      FUN_8004f348();
      if (menuAnimation < 0xc) {
        DAT_80069924 = primitiveBuffer_next;
        FUN_8004f6f4(pauseSubMenuId);
        uVar3 = (uint)(byte)(&DAT_80063870)[menuAnimation % 0xc];
        goto LAB_800151cc;
      }
    }
    else if (DAT_80069910 == 1) {
      FUN_8004f2dc();
      FUN_8004f348();
    }
    else {
      FUN_800501c0(pauseSubMenuId);
      FUN_8004f2dc();
      iVar4 = pauseSubMenuId;
      if (0xb < menuAnimation) goto LAB_80015178;
    }
LAB_80015048:
    FUN_8004f3b8(0);
    break;
  case 0xb:
    FUN_8004f200();
    FUN_8004f26c();
    if (pauseMenuCurrentItem == 0) {
      FUN_8005004c(pauseSubMenuId);
      FUN_800501c0(pauseSubMenuId);
      return;
    }
    FUN_8005004c(pauseSubMenuId);
    FUN_800501c0(pauseSubMenuId + 1);
    DAT_80069924 = primitiveBuffer_next;
    if (0xb < menuAnimation) {
      iVar4 = pauseSubMenuId + 1;
LAB_80015178:
      DAT_80069924 = primitiveBuffer_next;
      FUN_8005004c(iVar4);
      goto LAB_80015184;
    }
    FUN_800501c0(pauseSubMenuId);
    uVar3 = (uint)(byte)(&DAT_80063870)[menuAnimation % 0xc];
LAB_800151cc:
    FUN_8004bf94(DAT_80069924,uVar3);
  }
                    // WARNING: Read-only address (ram,0x80069940) is written
                    // WARNING: Read-only address (ram,0x80069941) is written
                    // WARNING: Read-only address (ram,0x80069942) is written
                    // WARNING: Read-only address (ram,0x80069943) is written
                    // WARNING: Read-only address (ram,0x80069998) is written
                    // WARNING: Read-only address (ram,0x800699b4) is written
                    // WARNING: Read-only address (ram,0x800699b5) is written
                    // WARNING: Read-only address (ram,0x800699b6) is written
                    // WARNING: Read-only address (ram,0x800699b7) is written
                    // WARNING: Read-only address (ram,0x80069a0c) is written
  return;
}



void FUN_800151f0(void)

{
  undefined *ptrPrimitive;
  undefined uVar1;
  int tpage;
  short sVar2;
  int iVar3;
  
  if (menuState == Pausing) {
    if (menuAnimation != 0) {
      uVar1 = 0x80;
      if (menuAnimation < 8) {
        uVar1 = (undefined)(menuAnimation << 4);
      }
      iVar3 = 0;
      sVar2 = 0x40;
      tpage = 0x108;
      do {
        SetTPage(tpage);
        ptrPrimitive = primitiveBuffer_next;
        tpage = tpage + 2;
        iVar3 = iVar3 + 1;
        *(undefined4 *)primitiveBuffer_next = 0x4000000;
        ptrPrimitive[7] = 100;
        *(undefined2 *)(ptrPrimitive + 10) = 0x3c;
        *(undefined2 *)(ptrPrimitive + 0x10) = 0x80;
        ptrPrimitive[4] = uVar1;
        ptrPrimitive[5] = uVar1;
        ptrPrimitive[6] = uVar1;
        ptrPrimitive[0xc] = 0;
        ptrPrimitive[0xd] = 0;
        *(short *)(ptrPrimitive + 8) = sVar2;
        *(undefined2 *)(ptrPrimitive + 0x12) = 0x78;
        PrimitiveBuffer_Insert((uint *)ptrPrimitive);
        primitiveBuffer_next = ptrPrimitive + 0x14;
        sVar2 = sVar2 + 0x80;
      } while (iVar3 < 3);
      if (menuAnimation < 0xb) {
        return;
      }
      if ((&DAT_80063278)[pauseMenuCurrentItem] == '\0') {
        return;
      }
      if (0x40 < (int)currentLoadedLevel) {
        return;
      }
      if (DAT_80067e20 == 0) {
        return;
      }
      if (DAT_80067e28 < 0) {
        return;
      }
      if ((&DAT_80067e54)[DAT_80067e24] == -1) {
        return;
      }
      if (DAT_80067e1c != 0) {
        return;
      }
      DrawText_Center((&PTR_s_Auto_Saving____80061b60)[DAT_80067118],0x104,0xc4,1);
      return;
    }
    if (DAT_800698fc == 0) {
      ClearDoubleBuffer();
      return;
    }
  }
  else if (menuState != Playing) {
    return;
  }
  FUN_8004d810();
                    // WARNING: Read-only address (ram,0x80067118) is written
  return;
}



void FUN_800153f8(void)

{
  RenderFlags flags;
  
  flags = Objects|World|Skybox;
  if (0x45 < (int)currentLoadedLevel) {
    flags = Objects|World|Skybox|Particles;
  }
  SelectRender(flags);
  return;
}



void FUN_80015430(void)

{
  if ((int)menuState < 4) {
    if (0 < (int)menuState) {
      FUN_80070eec();
      return;
    }
    if (menuState != Pausing) {
      return;
    }
  }
  else if (menuState != Homeworld) {
    return;
  }
  SelectRender(Objects|World|Skybox);
  return;
}



void FUN_80015494(void)

{
  if ((int)menuState < 3) {
    if (0 < (int)menuState) {
      FUN_80072b90();
      return;
    }
    if (menuState != Pausing) {
      return;
    }
  }
  else if (menuState != Homeworld) {
    return;
  }
  SelectRender(Objects|World|Skybox);
  return;
}



void FUN_800154f8(void)

{
  if (menuState == Pausing) {
    SelectRender(Objects|World|Skybox|Particles|HUD);
  }
  else if ((int)menuState < 3) {
    FUN_800733b0();
  }
  return;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_80015540(void)

{
  FUN_8006ee18();
  return;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_80015560(void)

{
  FUN_8007bfc4();
  return;
}



void FUN_80015580(void)

{
  SelectRender(Objects|World|Skybox|Particles|HUD);
  return;
}



void SelectRender(RenderFlags flags)

{
  int iVar1;
  undefined4 *puVar2;
  int iVar3;
  
  if ((flags & Objects) != None) {
    RenderObjects();
  }
  FUN_800540b0();
  if ((flags & World) != None) {
    RenderWorld();
  }
  if ((flags & Particles) != None) {
    iVar3 = 0;
    RenderAura();
    iVar1 = 0;
    RenderGemShine();
    RenderTrails();
    RenderTrails2();
    puVar2 = &DAT_80069f30;
    do {
      if (*(int *)((int)&DAT_80069f30 + iVar1) != 0) {
        FUN_8004baa4(puVar2);
      }
      puVar2 = puVar2 + 5;
      iVar3 = iVar3 + 1;
      iVar1 = iVar1 + 0x14;
    } while (iVar3 < 8);
  }
  if ((flags & HUD) != None) {
    RenderHUD();
  }
  if ((flags & Skybox) != None) {
    RenderSkyboxes();
    RenderPortalSkyboxes();
  }
  if ((flags & Particles) != None) {
    RenderParticles();
  }
  if (blackOverlayOpacity != 0) {
    FillColor(2,blackOverlayOpacity,blackOverlayOpacity,blackOverlayOpacity);
  }
  if (whiteOverlayOpacity != 0) {
    FillColor(1,whiteOverlayOpacity,whiteOverlayOpacity,whiteOverlayOpacity);
  }
  FUN_8004d604();
  return;
}



void RenderGame(void)

{
  int iVar1;
  undefined4 uVar2;
  FrameBuffer *doubleBuffer;
  
  if (DAT_800670c8 != 0) {
    return;
  }
  doubleBuffer = doubleFrameBuffer;
  if (DAT_80066fc0 == doubleFrameBuffer) {
    doubleBuffer = (FrameBuffer *)0x8006999c;
  }
  primitiveBuffer_next = (undefined *)doubleBuffer->field2_0x70;
  DAT_80067168 = DAT_80066ffc + 0x1000;
  DAT_80067034 = (undefined *)((int)primitiveBuffer_next + DAT_80067170);
  DAT_80066fc0 = doubleBuffer;
  FUN_8001c2f8(&VectorShort_80067ec8,&Mat33_80067e98,&Mat33_80067e84);
  VectorCopy(&Vec3_80067eb8,&cameraPosition);
  switch(currGameState) {
  case Dialogue:
    FUN_80013bc4();
    break;
  case Freeze:
    if (0 < INT_80067ed4) {
      (*DAT_80066f88)();
      SelectRender(World|Skybox);
      break;
    }
  case Normal:
    FUN_80013a14();
    break;
  case FadeIn:
    FUN_80014504();
    break;
  case Pause:
    PauseMenuOpeningRelated();
    break;
  case FadeOut:
    FUN_800151f0();
    break;
  case Cutscene:
    FUN_800153f8();
    break;
  case WorldTransition:
    FUN_80015430();
    break;
  case 8:
    FUN_80015494();
    break;
  case 9:
    FUN_800154f8();
    break;
  case 10:
    FUN_80015540();
    break;
  case MainMenu:
    FUN_80015560();
    break;
  case 0xc:
    FUN_80015580();
  }
  DAT_8006717c = (int)DAT_80067034 - (int)primitiveBuffer_next;
  DrawSync(0);
  if ((currGameState == Pause) || (currGameState == 9)) {
    VSync(0);
  }
  else {
    if (DAT_80067044 != 0) {
      VSync(0);
    }
    DAT_80066fa0 = VSync(-1);
    iVar1 = DAT_80066fa0 - DAT_80066f9c;
    while (iVar1 < 2) {
      VSync(0);
      DAT_80066fa0 = VSync(-1);
      iVar1 = DAT_80066fa0 - DAT_80066f9c;
    }
  }
  DAT_80066f9c = VSync(-1);
  FUN_80055ca0(&DAT_80066fc0->displayEnvironment);
  FUN_80055be0(DAT_80066fc0);
  uVar2 = FUN_8001b2a8(0x580);
  FUN_80055b70(uVar2);
  return;
}



void UpdateGameNormalState(void)

{
  int iVar1;
  
  if ((inputStates[0].pressed & Select) != None) {
    DAT_8006768c = 0x5a;
  }
  DAT_80067008 = DAT_80067008 + 1;
  SelectUpdate(Visuals|World|Spyro|Camera|Particles|HUD);
  if (((inputStates[0].pressed & Start) == None) && (1 < DAT_80068370)) {
LAB_80015ab0:
    if (DAT_80067100 == 0) goto LAB_80015acc;
  }
  else if (DAT_80067100 == 0) {
    if ((((DAT_8006701c == 0) && (blackOverlayOpacity == 0)) && (-1 < Spyro.health)) &&
       (currGameState == Normal)) {
      OpenPauseMenu();
    }
    goto LAB_80015ab0;
  }
  StopLevelCompletePopupSequence();
LAB_80015acc:
  if (DAT_80067024 == 1) {
    if (*DAT_80066f28 + -0x12 <= DAT_80067008) {
      if (blackOverlayOpacity == 0) {
        blackOverlayOpacity = 0x10;
      }
      if (((*DAT_80066f28 + -0x12 <= DAT_80067008) &&
          (iVar1 = blackOverlayOpacity + 0x10, blackOverlayOpacity != 0)) &&
         (blackOverlayOpacity = iVar1, 0xff < iVar1)) {
        DAT_80067178 = DAT_80067024;
      }
    }
    if (DAT_80067178 != 0) {
      if (blackOverlayOpacity < 0x100) {
        FUN_8004d810();
      }
      ClearDoubleBuffer();
      FUN_80019230(0x11);
      DAT_800698fc = 0;
      loadingStatus = 0;
      cheatFireball = (undefined)DAT_800670e4;
    }
  }
  return;
}



void UpdateDialogue(Object *npc,undefined4 param_2,undefined4 param_3)

{
  byte bVar1;
  char cVar2;
  short sVar3;
  short *psVar4;
  int iVar5;
  char *pcVar6;
  uint uVar7;
  char *pcVar8;
  ushort uVar9;
  int iVar10;
  byte *pbVar11;
  int iVar12;
  byte *pbVar13;
  NPCDialogue *puVar14;
  byte *pbVar14;
  undefined4 *puVar15;
  int *piVar16;
  char local_30 [32];
  
  puVar14 = (NPCDialogue *)npc->data;
  DAT_800670dc = param_2;
  DAT_80067120 = param_3;
  puVar14->field_0x7 = 0;
  if (currGameState == Dialogue) {
    prevGameState = currGameState;
  }
  else {
    prevGameState = Normal;
  }
  currGameState = Dialogue;
  DAT_8006704c = 1;
  DAT_80067130 = 0;
  DAT_8006706c = 0;
  DAT_80066ef0 = 0;
  DAT_80066ef4 = 0;
  DAT_80067094 = 0;
  DAT_80066f7c = 0;
  DAT_80066fe4 = 0;
  DAT_800670b8 = 0;
  DAT_8006714c = 0;
  DAT_80066f10 = 0;
  DAT_80066f48 = 0;
  DAT_8006713c = 0;
  DAT_80066f08 = 0;
  DAT_80066fcc = 0;
  DAT_80067164 = 0;
  DAT_80066fe8 = 0xffffffff;
  DAT_80066f94 = 0;
  showPaymentOption = 0;
  DAT_80067138 = enableVoiceAudio;
  currentNPC = npc;
  StopLevelCompletePopupSequence();
  SetupDialogue(npc);
  puVar14->activeDialogueBranch = puVar14->nextDialogueBranch;
  pbVar14 = *(byte **)(&puVar14->field_0x10 + (uint)puVar14->nextDialogueBranch * 4);
  DAT_8006703c = 0xff;
  if (pbVar14[1] == 0x28) {
    DAT_8006703c = pbVar14[2] - 1;
    if (enableVoiceAudio == 0) {
      DAT_8006703c = 0xff;
    }
    else {
      psVar4 = (short *)(DAT_8006703c * 8 + DAT_80066f20);
      FUN_80012c58(DAT_80066d44 + *(int *)(psVar4 + 2),
                   DAT_80066d44 + *(int *)(psVar4 + 2) + (int)psVar4[1],(int)*psVar4);
    }
  }
  iVar10 = 0;
  if (DAT_8006703c == 0xff) {
    DAT_80067138 = 0;
  }
  iVar12 = 0;
  pbVar14 = pbVar14 + *pbVar14;
  bVar1 = *pbVar14;
  sVar3 = (short)pbVar14;
  pbVar13 = pbVar14;
  DAT_8006a8cc = pbVar14;
  iVar5 = DAT_80066fe4;
  do {
    DAT_80066fe4 = iVar5;
    if ((bVar1 == 0) || (uVar7 = (uint)*pbVar14, uVar7 == 0xff)) {
      iVar10 = DAT_8006706c + 1;
      DAT_8006706c = iVar10 - (short)DAT_80066f10;
      *(short *)(&DAT_8006aba8 + iVar10 * 2) = (short)pbVar14 - sVar3;
      DAT_80066ef4 = (int)*(short *)(&DAT_8006aba8 + DAT_8006706c * 2);
      iVar10 = 0;
      if (0 < DAT_80066fe4) {
        piVar16 = &DAT_80067058;
        puVar15 = &currentDisplayedPaywallCost;
        do {
          sprintf(local_30,&DAT_80066ec0,*puVar15);
          iVar12 = 0;
          pcVar6 = local_30;
          cVar2 = local_30[0];
          while (cVar2 != '\0') {
            pcVar8 = (char *)(*piVar16 + iVar12);
            iVar12 = iVar12 + 1;
            *pcVar8 = *pcVar6;
            pcVar6 = local_30 + iVar12;
            cVar2 = local_30[iVar12];
          }
          piVar16 = piVar16 + 1;
          iVar10 = iVar10 + 1;
          puVar15 = puVar15 + 1;
        } while (iVar10 < DAT_80066fe4);
      }
      DAT_800670a0 = 5;
      DAT_80067098 = DAT_80066ef4;
      if ((DAT_80067138 == 0) && (5 < DAT_8006706c)) {
        DAT_80067098 = (int)DAT_8006abb2;
      }
      if (enableVoiceAudio != 0) {
        DAT_80066f64 = ((int)*(short *)(DAT_8006703c * 8 + DAT_80066f20 + 2) << 1) / 5;
      }
      return;
    }
    pbVar11 = pbVar14;
    if (uVar7 == 0x20) {
      iVar12 = 0;
      pbVar13 = pbVar14 + 1;
      iVar10 = iVar10 + 0xb;
    }
    else if (uVar7 == 0x40) {
      pbVar11 = pbVar14 + 1;
    }
    else {
      if (uVar7 == 0x26) {
        uVar9 = DAT_80066f10 + 1;
        uVar7 = (uint)DAT_80066f10;
        DAT_80066f10 = uVar9;
        *(byte **)((int)&DAT_8006a8b4 + ((int)(uVar7 << 0x10) >> 0xe)) = pbVar14 + 1;
        if (pbVar14[1] == 0x5b) {
          DAT_80066f08 = 1;
          *(byte **)(&UNK_8006a8b0 + ((int)((uint)uVar9 << 0x10) >> 0xe)) = pbVar14 + 1;
        }
LAB_80015eb0:
        iVar12 = 0;
        iVar10 = 0;
        DAT_8006706c = DAT_8006706c + 1;
        iVar5 = DAT_8006706c * 2;
        (&DAT_8006a8cc)[DAT_8006706c] = pbVar14 + 1;
        *(short *)(&DAT_8006aba8 + iVar5) = (short)(pbVar14 + 1) - sVar3;
      }
      else {
        if (uVar7 == 0x5c) goto LAB_80015eb0;
        if (uVar7 == 0x5e) {
          (&DAT_80067058)[iVar5] = pbVar14;
          pbVar11 = pbVar14 + 1;
          piVar16 = &DAT_80067050 + iVar5;
          *piVar16 = 1;
          iVar12 = 0xc;
          bVar1 = *pbVar11;
          while (iVar10 = iVar10 + 0xc, bVar1 == 0x5e) {
            pbVar11 = pbVar11 + 1;
            *piVar16 = *piVar16 + 1;
            iVar12 = iVar12 + 0xc;
            bVar1 = *pbVar11;
          }
          pbVar13 = pbVar14;
          DAT_80066fe4 = DAT_80066fe4 + 1;
        }
        else {
          uVar7 = *(byte *)((int)spriteCharacterWidths + uVar7 * 2 + 1) & 0xf;
          iVar10 = iVar10 + uVar7;
          iVar12 = iVar12 + uVar7;
        }
      }
      if (0x1b2 < iVar10) {
        iVar10 = (int)(short)DAT_80066f10;
        if (iVar10 != 0) {
          DAT_80066f10 = DAT_80066f10 + 1;
          (&DAT_8006a8b4)[iVar10] = pbVar13;
        }
        DAT_8006706c = DAT_8006706c + 1;
        iVar10 = DAT_8006706c * 2;
        (&DAT_8006a8cc)[DAT_8006706c] = pbVar13;
        *(short *)(&DAT_8006aba8 + iVar10) = (short)pbVar13 - sVar3;
        iVar10 = iVar12;
      }
    }
    pbVar14 = pbVar11 + 1;
    bVar1 = *pbVar14;
    iVar5 = DAT_80066fe4;
  } while( true );
}



void FUN_800161c8(void)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  int iVar4;
  
  iVar4 = 0;
  if (0 < DAT_80066fe4) {
    piVar2 = &DAT_80067050;
    piVar3 = &DAT_80067058;
    do {
      iVar1 = 0;
      if (0 < *piVar2) {
        do {
          *(undefined *)(*piVar3 + iVar1) = 0x5e;
          iVar1 = iVar1 + 1;
        } while (iVar1 < *piVar2);
      }
      piVar2 = piVar2 + 1;
      iVar4 = iVar4 + 1;
      piVar3 = piVar3 + 1;
    } while (iVar4 < DAT_80066fe4);
  }
  if ((DAT_80067120 != DAT_800670dc) && (currentNPC->nextModelId != DAT_800670dc)) {
    DAT_8006711c = 0;
    currentNPC->field_0x40 = 0xf2;
    currentNPC->nextModelId = (byte)DAT_800670dc;
    currentNPC->nextKeyframe = 0;
    FUN_80037c80(currentNPC);
  }
  DAT_80066f48 = 0xffff;
  currGameState = Normal;
  DAT_80066fbc = 0;
  DAT_80066f5c = 0xffffffff;
  DAT_80067100 = 0;
  if (currentNPC->data[5] == '\x02') {
    Spyro.field150_0x20c = 0x10000002;
  }
  return;
}



void UpdateDialogue(void)

{
  bool bVar1;
  Object *pOVar2;
  GameState GVar3;
  int iVar4;
  Object *pOVar5;
  undefined4 *puVar6;
  uint uVar7;
  undefined4 uVar8;
  Vec3 *inputVector;
  Vec3 *out;
  undefined *puVar9;
  undefined4 *puVar10;
  Vec3 local_38;
  Vec3 local_28;
  
  if (DAT_80067120 != DAT_800670dc) {
    if (DAT_8006703c == 0xff) {
      if (currentNPC->nextModelId != DAT_80067120) {
        DAT_8006711c = 0;
        currentNPC->field_0x40 = 0xf2;
        currentNPC->nextModelId = (byte)DAT_80067120;
LAB_800164b4:
        currentNPC->nextKeyframe = 0;
        FUN_80037c80(currentNPC);
      }
    }
    else {
      if (currentNPC->nextModelId != DAT_80067120) {
        if ((DAT_8006831c == 2) && (DAT_800682f4 - 6U < 2)) {
          DAT_8006711c = 0;
          currentNPC->field_0x40 = 0xf2;
          currentNPC->nextModelId = (byte)DAT_80067120;
          goto LAB_800164b4;
        }
        if (currentNPC->nextModelId != DAT_80067120) goto LAB_800164d4;
      }
      if (((DAT_8006831c != 2) || (1 < DAT_800682f4 - 6U)) &&
         (currentNPC->nextModelId != DAT_800670dc)) {
        DAT_8006711c = 0;
        currentNPC->field_0x40 = 0xf2;
        currentNPC->nextModelId = (byte)DAT_800670dc;
        goto LAB_800164b4;
      }
    }
  }
LAB_800164d4:
  DAT_80067100 = 1;
  if (prevGameState == Normal) {
    DAT_80067130 = DAT_80067130 + deltaTime;
    if ((0x3b < DAT_80067130) && (0x4b < DAT_80067130)) {
      DAT_80067130 = 0;
      prevGameState = Dialogue;
    }
    goto LAB_800170c4;
  }
  if (prevGameState == Dialogue) {
    if (DAT_8006713c == '\0') {
      if ((DAT_80066f7c == '\0') || ((inputStates[0].pressed & (Triangle|Cross|Start)) == None)) {
        if (DAT_80067094 == 0) {
          if (DAT_80067138 == 0) {
            DAT_80066ef0 = DAT_80066ef0 + 3;
            if ((inputStates[0].pressed & (Cross|Start)) != None) {
              DAT_80066ef0 = DAT_80067098;
            }
          }
          else {
            DAT_80067130 = DAT_80067130 + 2;
            DAT_80066ef0 = (DAT_80067130 * DAT_80066ef4) / DAT_80066f64;
            if (DAT_80066f64 == 0) {
              trap(0x1c00);
            }
            if ((DAT_80066f64 == -1) && (DAT_80067130 * DAT_80066ef4 == -0x80000000)) {
              trap(0x1800);
            }
            if ((inputStates[0].pressed & (Cross|Start)) != None) {
              DAT_80067138 = 0;
              DAT_80068300 = 1;
              iVar4 = 5;
              if (((DAT_800670b8 < 5) || (iVar4 = 8, DAT_800670b8 < 8)) ||
                 (iVar4 = 0xb, DAT_800670b8 < 0xb)) {
                DAT_800670a0 = iVar4;
              }
              if (DAT_800670a0 < DAT_8006706c) {
                DAT_80067098 = (int)*(short *)(&DAT_8006aba8 + DAT_800670a0 * 2);
              }
              else {
                DAT_80067098 = DAT_80066ef4;
              }
            }
          }
          if (DAT_80066ef0 < DAT_80066ef4) {
            if (DAT_80066ef0 < DAT_80067098) {
              if ((DAT_8006714c != 0) && ((short)(&DAT_8006abaa)[DAT_800670b8] <= DAT_80066ef0)) {
                DAT_80066ef0 = (short)(&DAT_8006abaa)[DAT_800670b8] + -1;
              }
            }
            else {
              DAT_80066ef0 = DAT_80067098;
              DAT_80067094 = 1;
            }
          }
          else {
            DAT_80066ef0 = DAT_80066ef4;
            DAT_80066f7c = '\x01';
          }
        }
        else if ((inputStates[0].pressed & (Cross|Start)) != None) {
          DAT_800670a0 = DAT_800670a0 + 3;
          DAT_80067098 = DAT_80066ef4;
          if (DAT_800670a0 < DAT_8006706c) {
            DAT_80067098 = (int)*(short *)(&DAT_8006aba8 + DAT_800670a0 * 2);
          }
          DAT_80067094 = 0;
        }
        goto LAB_800170c4;
      }
      if (DAT_80066f10 != 0) {
        DAT_8006713c = '\x01';
        goto LAB_800170c4;
      }
      if (DAT_80066fe8 != -1) {
        FUN_8003a568(currentNPC);
        UpdateDialogue(currentNPC,DAT_800670dc,DAT_80067120);
        goto LAB_800170c4;
      }
      PlayAudio(*(undefined *)(audioBank + 0x16),0,0x80);
      GVar3 = Freeze;
    }
    else {
      DAT_80067130 = DAT_80067130 + deltaTime;
      if ((DAT_80066f08 == '\0') && ((inputStates[0].pressed & (DPadUp|DPadDown)) != None)) {
        PlayAudio(*(undefined *)(audioBank + 0x17),0,0);
        DAT_80067130 = 0;
        DAT_80066f48 = 1 - DAT_80066f48;
      }
      if (((inputStates[0].pressed & (Cross|Start)) == None) &&
         ((DAT_80066f08 == '\0' || ((inputStates[0].pressed & (Triangle|Start)) == None))))
      goto LAB_800170c4;
      if (DAT_80066f08 == '\0') {
        FUN_8003a568(currentNPC);
        if (DAT_8006713c != '\0') {
          UpdateDialogue(currentNPC,DAT_800670dc,DAT_80067120);
          if (DAT_80066f10 == 0) {
            DAT_80066f48 = -1;
          }
          goto LAB_800170c4;
        }
        PlayAudio(*(undefined *)(audioBank + 0x16),0,0x80);
        GVar3 = Freeze;
      }
      else {
        PlayAudio(*(undefined *)(audioBank + 0x16),0,0x80);
        GVar3 = Freeze;
      }
    }
  }
  else {
    if (prevGameState != Freeze) {
      if (prevGameState == FadeIn) {
        iVar4 = DAT_80067130 + 1;
        if (iVar4 == 0x1e) {
          DAT_80067130 = iVar4;
          pOVar5 = (Object *)(*DAT_800670b4)(DAT_80066f94,currentNPC);
          puVar9 = pOVar5->data;
          local_38.x = 0x80;
          local_38.y = 0x180;
          local_38.z = 0x180;
          if (DAT_80066f5c == 4) {
            local_38.y = -0x180;
          }
          pOVar5->state = 1;
          (pOVar5->color).Red = 2;
          (pOVar5->eulerRotation).pitch = 0x20;
          pOVar2 = currentNPC;
          *(undefined4 *)&pOVar5->field_0x1c = 0xffffffff;
          FUN_80041538(pOVar2,4);
          MatrixMultVector(&currentNPC->maybeMatrix,&local_38,&local_38);
          VectorAdd(&pOVar5->position,&local_38,&currentNPC->position);
          VectorSubtract(&local_38,&Spyro.position,&pOVar5->position);
          VectorDivByN(puVar9,&local_38,100);
          *(undefined4 *)(puVar9 + 8) = 0x54;
          puVar9[0xc] = 0xff;
          iVar4 = rand();
          puVar9[0xd] = (byte)iVar4 & 0x3f;
          FUN_80050648(pOVar5,0,0);
          uVar8 = 4;
LAB_80016ff4:
          (*DAT_800670fc)(uVar8,0xc,pOVar5,3);
          goto LAB_800170c4;
        }
        if ((iVar4 == 100) && (DAT_80067164 == 0)) {
          DAT_800676d4 = 1;
          DAT_80067130 = iVar4;
          goto LAB_800170c4;
        }
        if (iVar4 == 0x8c) {
LAB_8001701c:
          DAT_80067130 = DAT_80067130 + 1;
          FUN_8003cafc();
          goto LAB_800170c4;
        }
        if (iVar4 == 0x96) {
          DAT_80067130 = iVar4;
          if ((0x15 < (int)g_currLevelID) &&
             ((s_Perfect_80066e70[g_currLevelID + IDOL_SPRINGS] & DAT_80066ff0) != 0)) {
            worldsCompleted[g_currLevelID] = true;
            DAT_80066ff4 = 1;
          }
          goto LAB_800170c4;
        }
        DAT_80067130 = iVar4;
        if (iVar4 < 0xd2) goto LAB_800170c4;
      }
      else if (prevGameState == Pause) {
        iVar4 = DAT_80067130 + 1;
        if (DAT_80067130 - 0x13U < 0x3d) {
          local_28.x = (currentNPC->position).x * 7 + Spyro.position.x * 9 >> 4;
          local_28.z = Spyro.position.z + 0x1c0;
          local_28.y = (currentNPC->position).y * 7 + Spyro.position.y * 9 >> 4;
          DAT_80067130 = iVar4;
          FUN_800328e8(&local_28);
          if (DAT_80067130 < 0x48) {
            puVar6 = (undefined4 *)(*DAT_800670b4)(0x81,currentNPC);
            if (puVar6 != (undefined4 *)0x0) {
              puVar10 = (undefined4 *)*puVar6;
              if (DAT_80067130 == 0x14) {
                PlayAudio(*(undefined *)(audioBank + 0x20),0,0x80);
              }
              uVar7 = rand();
              uVar7 = (uVar7 & 0x1ff) + 0x80;
              puVar6[3] = uVar7;
              if ((uVar7 & 1) != 0) {
                puVar6[3] = -uVar7;
              }
              uVar7 = rand();
              uVar7 = (uVar7 & 0x7ff) + 0x80;
              puVar6[4] = uVar7;
              if ((uVar7 & 1) != 0) {
                puVar6[4] = -uVar7;
              }
              inputVector = (Vec3 *)(puVar6 + 3);
              puVar6[5] = 0xfffffc9c;
              MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,inputVector,inputVector);
              VectorAdd(inputVector,inputVector,&local_28);
              FUN_80041438(puVar6);
              out = (Vec3 *)(puVar10 + 2);
              VectorSubtract(out,&local_28,inputVector);
              VectorDivByN(out,out,0x10);
              uVar8 = FUN_800502fc(inputVector,3,6,0x40e0e0);
              puVar10[1] = uVar8;
              *puVar10 = 0x10;
              if (puVar10[1] == 0) {
                FUN_8004132c(puVar6);
              }
            }
            goto LAB_800170c4;
          }
          if (DAT_80067130 != 0x50) goto LAB_800170c4;
          pOVar5 = (Object *)(*DAT_800670b4)(DAT_80066f94,currentNPC);
          VectorCopy(&pOVar5->position,&local_28);
          *(undefined4 *)&pOVar5->field_0x1c = 0xffffffff;
          FUN_800381ec(pOVar5);
          FUN_80041ab8(pOVar5);
          uVar8 = 0xc;
          goto LAB_80016ff4;
        }
        if (iVar4 == 0x8c) goto LAB_8001701c;
        if (iVar4 == 0x96) {
          DAT_80066ff4 = 1;
          DAT_80067130 = iVar4;
          if (worldsCompleted[g_currLevelID] == false) {
            worldsCompleted[g_currLevelID] = true;
            talismansCollected = talismansCollected + 1;
          }
          goto LAB_800170c4;
        }
        DAT_80067130 = iVar4;
        if (iVar4 < 200) goto LAB_800170c4;
      }
      else {
        DAT_80067130 = DAT_80067130 + 1;
        if (DAT_80067130 != 0x30) goto LAB_800170c4;
      }
LAB_800170b8:
      FUN_800161c8();
      goto LAB_800170c4;
    }
    if (((DAT_80067130 == 0) && (FUN_8003a568(currentNPC), DAT_80066fbc != 0)) &&
       (DAT_80066f94 == 0)) {
      FUN_8003cafc();
    }
    DAT_80067130 = DAT_80067130 + deltaTime;
    if (DAT_80067130 < 0x18) goto LAB_800170c4;
    if (DAT_80066f94 != 0) {
      prevGameState = Pause;
      if (DAT_80066f94 == 0x71) {
        prevGameState = FadeIn;
      }
      DAT_80067130 = 0;
      bVar1 = DAT_80066f5c == 0;
      DAT_80066f5c = 4;
      if (bVar1) {
        DAT_80066f5c = 3;
      }
      VectorCopy(&Vec3_80067ee4,&Spyro.position);
      DAT_80067ef0 = Spyro.rotation.Yaw;
      OrbitRotateLongitude(&Orbit_80067ff4,(Orbit *)(DAT_80066f5c * 0x14 + -0x7ff9e9c4),0);
      FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
      FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
      OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
      goto LAB_800170c4;
    }
    GVar3 = FadeOut;
    if (DAT_80066fbc == 0) goto LAB_800170b8;
  }
  DAT_80067130 = 0;
  prevGameState = GVar3;
LAB_800170c4:
  Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10000002;
  if (prevGameState != Freeze) {
    if ((currGameState == Dialogue) && (DAT_8006704c != '\0')) {
      FUN_80031468(currentNPC);
    }
    FUN_8001f1e4(currentNPC,0x12);
  }
  SelectUpdate(Visuals|World|Spyro|Camera|Particles);
  return;
}



void FUN_80017164(void)

{
  menuState = Pausing;
  menuAnimation = 0;
  pauseSubMenuId = 0;
  DAT_800698fc = 0;
  currGameState = FadeIn;
  FUN_80050aac();
  DAT_80068304 = 1;
  return;
}



void FUN_800171bc(void)

{
  FUN_80017164();
  menuState = Paused;
  menuAnimation = 1;
  blackOverlayOpacity = 0xff;
  DAT_800670c8 = 1;
  MEMSET(&checkpointStorage.checkpointSaved,0,0x248);
  MEMSET(&CheckpointData_8006718c.checkpointSaved,0,0x248);
  return;
}



void FUN_8001722c(void)

{
  uint uVar1;
  int iVar2;
  
  if (menuState == Paused) {
    iVar2 = menuAnimation + 1;
    if ((menuAnimation != 0) && (menuAnimation = iVar2, pauseSubMenuId != 0)) {
      if (iVar2 < 0x3c) {
        hudLives.field1_0x1 = 3;
      }
      else {
        hudLives.field1_0x1 = 0;
      }
      UpdateHUDElement(&hudLives,lives);
    }
    iVar2 = FUN_80013690();
    if (iVar2 == 0) {
      if (menuAnimation == 0) {
        FUN_80013918(DAT_800682d8,DAT_8006b294,(&DAT_8006b0a8)[(DAT_80067118 + 3) * 2],
                     (&DAT_8006b0a4)[(DAT_80067118 + 3) * 2] +
                     *(int *)(&DAT_80067750 + g_currLevelID * 0x10));
        menuAnimation = 1;
        if (pauseSubMenuId != 0) {
          InitHudElement(&hudLives,lives + 1);
          uVar1 = rand();
          DAT_80067690 = (uVar1 & 0x1f) + 0x14;
        }
      }
      else if (((pauseSubMenuId == 0) && (5 < menuAnimation)) || (0x4f < menuAnimation)) {
        FUN_80030a6c();
        OnWorldEnter(DAT_8006b294);
        if (-1 < inSpeedwayFlag) {
          iVar2 = RaycastDown(&Spyro.position,0x400);
          if (iVar2 != 0) {
            Spyro.position.z = iVar2 + 0x164;
            SetSpyroState(Idle);
          }
        }
        iVar2 = (uint)(byte)(&DAT_80060140)[g_currLevelID] * 8;
        FUN_80012c1c(DAT_80066d44 + *(int *)(&DAT_80064de4 + iVar2),
                     DAT_80066d44 + *(int *)(&DAT_80064de4 + iVar2) +
                     (uint)*(ushort *)(&DAT_80064de8 + iVar2),*(undefined2 *)(&DAT_80064dea + iVar2)
                    );
        Spyro.field150_0x20c = 0x10000002;
        SelectUpdate(Visuals|World|Spyro|Camera|Particles|HUD);
        menuState = menuState + Paused;
      }
    }
  }
  else if ((int)menuState < 2) {
    if ((menuState == Pausing) &&
       (blackOverlayOpacity = blackOverlayOpacity + 0x10, 0xfe < blackOverlayOpacity)) {
      blackOverlayOpacity = 0xff;
      menuState = Paused;
    }
  }
  else if (menuState == Playing) {
    blackOverlayOpacity = blackOverlayOpacity + -0x10;
    if (blackOverlayOpacity < 1) {
      blackOverlayOpacity = 0;
      currGameState = Normal;
      DAT_80067100 = 0;
      if (checkpointStorage.checkpointSaved == 0) {
        Spyro.position.z = Spyro.position.z + -0x164;
        SaveCheckpoint(&checkpointStorage,&Spyro,(uint)Spyro.angleAsByte.yaw);
        Spyro.position.z = Spyro.position.z + 0x164;
      }
    }
    Spyro.field150_0x20c = 0x10000002;
    SelectUpdate(Visuals|World|Spyro|Camera|Particles|HUD);
    DAT_80067008 = DAT_80067008 + 1;
  }
  return;
}



void OpenPauseMenu(void)

{
  int iVar1;
  
  menuState = Pausing;
  pauseMenuCurrentItem = 0;
  menuAnimation = 0;
  pauseSubMenuId = 0;
  DAT_800698fc = 0;
  if (currentLoadedLevel == GLIMMER) {
    DAT_800698fc = (uint)!worldsEntered[0];
  }
  DAT_80069914 = 0;
  currGameState = Pause;
  StopLevelCompletePopupSequence();
  FUN_800543a8();
  iVar1 = 0;
  totalSkillPoints = 0;
  do {
    if ((&skillPointFlags.skelosCacti)[iVar1] != '\0') {
      totalSkillPoints = totalSkillPoints + 1;
    }
    iVar1 = iVar1 + 1;
  } while (iVar1 < 0x14);
  FUN_80050aac();
  PlayAudio(*(undefined *)(audioBank + 0x15),0,0x40);
  DAT_80068304 = 1;
  return;
}



void FUN_800176a4(void)

{
  byte *pbVar1;
  int iVar2;
  InputFlags IVar3;
  PauseMenuState PVar4;
  uint uVar5;
  undefined4 uVar6;
  int *piVar7;
  int iVar8;
  int iVar9;
  
  iVar8 = DAT_80069900;
  switch(menuState) {
  case Pausing:
    menuAnimation = menuAnimation + 1;
    if (menuAnimation == 0x20) {
      if (DAT_80069914 == 0) {
        menuState = Paused;
        menuAnimation = 0;
      }
      else {
        if (DAT_80069914 == 2) {
          DAT_80069910 = 0;
          menuState = 8;
          FUN_80054318();
        }
        else {
          menuState = BetweenMenuAndHomeworld;
        }
        pauseMenuCurrentItem = 1;
        menuAnimation = 1;
        DAT_80069914 = 0;
      }
    }
    break;
  case Paused:
    FUN_800543dc();
    menuAnimation = menuAnimation + 1;
    if (menuAnimation < 6) {
      return;
    }
    if (pauseSubMenuId == 1) {
LAB_80017a98:
      if (pauseSubMenuId == 0) {
        if ((inputStates[0].pressed & Triangle) == None) {
          if ((inputStates[0].pressed & Cross) == None) {
            return;
          }
          menuAnimation = 0;
          if (pauseMenuCurrentItem != 0) {
            if (pauseMenuCurrentItem == 1) {
              FUN_80054318();
              menuAnimation = 1;
              menuState = BetweenMenuAndHomeworld;
              pauseMenuCurrentItem = 1;
              DAT_80069910 = 0;
              return;
            }
            if (pauseMenuCurrentItem == 2) {
              menuAnimation = 0;
              pauseMenuCurrentItem = 0;
              pauseSubMenuId = 1;
              return;
            }
            if (pauseMenuCurrentItem == 3) {
              FUN_80054170();
              pauseMenuCurrentItem = 0;
              pauseSubMenuId = 2;
              return;
            }
            if (pauseMenuCurrentItem == 4) {
              FUN_80054170();
              pauseMenuCurrentItem = 0;
              pauseSubMenuId = 3;
              return;
            }
            if (pauseMenuCurrentItem != 5) {
              menuAnimation = 0;
              return;
            }
            if (inHomeWorld != 0) {
              FUN_80054170();
              pauseMenuCurrentItem = 1;
              pauseSubMenuId = 4;
              return;
            }
          }
          FUN_800541a0();
          menuState = menuState + Paused;
          return;
        }
        pauseMenuCurrentItem = 0;
        menuState = menuState + Paused;
      }
      else {
        if (pauseSubMenuId == 1) {
          if (pauseMenuCurrentItem < 2) {
            iVar8 = FUN_80013690();
            if (iVar8 == 0) {
              if (pauseMenuCurrentItem == 0) {
                FUN_80013918(DAT_800682d8,&DAT_8006d264,DAT_800676e4,DAT_800676e0);
              }
              else {
                DAT_80067e08 = 0;
                DAT_80067e0c = 0;
                DAT_80067e70 = DAT_8006b2a8 + 0x1800;
                FUN_8007cc68();
              }
              pauseMenuCurrentItem = pauseMenuCurrentItem + 1;
              return;
            }
            return;
          }
          if (pauseMenuCurrentItem == 2) {
            FUN_80077e70();
            return;
          }
          iVar8 = FUN_80013690();
          if (iVar8 != 0) {
            return;
          }
          if (pauseMenuCurrentItem != 3) {
            menuAnimation = 0;
            pauseMenuCurrentItem = 2;
            pauseSubMenuId = 0;
            return;
          }
          FUN_8007ccd8();
          uVar6 = DAT_8006b2a0;
          DAT_8006b2a0 = DAT_80069a0c;
          DrawSync(0);
          loadingStatus = 8;
          do {
            FUN_8001d658();
          } while (-1 < loadingStatus);
          VSync(0);
          VSync(0);
          pauseMenuCurrentItem = pauseMenuCurrentItem + 1;
          DAT_8006b2a0 = uVar6;
          return;
        }
        if (pauseSubMenuId == 2) {
          if ((DAT_80068373 == '\0') && (pauseMenuCurrentItem == 2)) {
            pauseMenuCurrentItem = 1;
          }
          if ((inputStates[0].pressed & (Cross|DPadRight|DPadLeft)) == None) {
            if ((inputStates[0].pressed & Triangle) != None) {
              FUN_800541a0();
              menuAnimation = 0;
              pauseMenuCurrentItem = 3;
              pauseSubMenuId = 0;
              return;
            }
            return;
          }
          if (pauseMenuCurrentItem != 0) {
            if (pauseMenuCurrentItem == 1) {
              FUN_80054210();
              cameraMode = '\x01' - cameraMode;
              FUN_8001fa24();
              globalProgressFlags.cameraHunter.isPayed = 1;
              return;
            }
            if (pauseMenuCurrentItem == 2) {
              FUN_80054210();
              vibrationFlag = '\x01' - vibrationFlag;
              if (vibrationFlag != '\0') {
                DAT_8006838c = 0xf;
                return;
              }
              return;
            }
            if (pauseMenuCurrentItem == 3) {
              if (((DAT_80067060 < 0x10) &&
                  (iVar8 = DAT_80067060 + 1, (inputStates[0].pressed & DPadRight) != None)) ||
                 ((-0x10 < DAT_80067060 &&
                  (iVar8 = DAT_80067060 + -1, (inputStates[0].pressed & DPadLeft) != None)))) {
                DAT_80067060 = iVar8;
                DAT_80067140 = 1;
                FUN_80054210();
              }
                    // WARNING: Read-only address (ram,0x8006998c) is written
                    // WARNING: Read-only address (ram,0x80069a00) is written
              DAT_8006418a = (char)DAT_80067060 + '\x10';
              doubleFrameBuffer[0].displayEnvironment.screen.x = (short)DAT_80067060;
              doubleFrameBuffer[1].displayEnvironment.screen.x = (short)DAT_80067060;
              return;
            }
            if (pauseMenuCurrentItem != 4) {
              if (pauseMenuCurrentItem != 5) {
                return;
              }
              if ((inputStates[0].pressed & Cross) != None) {
                FUN_800541a0();
                pauseMenuCurrentItem = 3;
                pauseSubMenuId = 0;
                return;
              }
              return;
            }
            if (((DAT_80067064 < 0x10) &&
                (iVar8 = DAT_80067064 + 1, (inputStates[0].pressed & DPadRight) != None)) ||
               ((0 < DAT_80067064 &&
                (iVar8 = DAT_80067064 + -1, (inputStates[0].pressed & DPadLeft) != None)))) {
              DAT_80067064 = iVar8;
              DAT_80067140 = 1;
              FUN_80054210();
            }
                    // WARNING: Read-only address (ram,0x8006998e) is written
                    // WARNING: Read-only address (ram,0x80069a02) is written
            DAT_8006418b = (char)DAT_80067064 + '\x10';
            doubleFrameBuffer[0].displayEnvironment.screen.y = (short)DAT_80067064;
            doubleFrameBuffer[1].displayEnvironment.screen.y = (short)DAT_80067064;
            return;
          }
          FUN_80054210();
          piVar7 = (int *)&displayMap;
          iVar8 = 1;
          uVar5 = displayMap;
code_r0x80018630:
          menuAnimation = 0;
          *piVar7 = iVar8 - uVar5;
          return;
        }
        if (pauseSubMenuId == 3) {
          if ((inputStates[0].pressed & (Cross|DPadRight|DPadLeft)) == None) {
            IVar3 = inputStates[0].pressed & Triangle;
            iVar8 = 4;
            goto joined_r0x800182f4;
          }
          menuAnimation = 0;
          if (pauseMenuCurrentItem == 0) {
            FUN_80054210();
            enableVoiceAudio = 1 - enableVoiceAudio;
            return;
          }
          if (pauseMenuCurrentItem == 1) {
            if ((9 < settingsSoundVolume) ||
               (iVar8 = settingsSoundVolume + 1, (inputStates[0].pressed & DPadRight) == None)) {
              if (settingsSoundVolume == 0) {
                menuAnimation = 0;
                return;
              }
              iVar8 = settingsSoundVolume + -1;
              if ((inputStates[0].pressed & DPadLeft) == None) {
                menuAnimation = 0;
                return;
              }
            }
            settingsSoundVolume = iVar8;
            FUN_80054210();
            return;
          }
          if (pauseMenuCurrentItem != 2) {
            if (pauseMenuCurrentItem == 3) {
              FUN_80054210();
              speakerSetup = 1 - speakerSetup;
              return;
            }
            if (pauseMenuCurrentItem == 4) {
              if ((inputStates[0].pressed & Cross) != None) {
                pauseSubMenuId = 0;
                FUN_800541a0();
                return;
              }
              menuAnimation = 0;
              return;
            }
            menuAnimation = 0;
            return;
          }
          iVar8 = -1;
          if ((settingsMusicVolume < 10) && ((inputStates[0].pressed & DPadRight) != None)) {
            settingsMusicVolume = settingsMusicVolume + 1;
          }
          else {
            if ((settingsMusicVolume == 0) || ((inputStates[0].pressed & DPadLeft) == None))
            goto LAB_80018174;
            settingsMusicVolume = settingsMusicVolume + -1;
          }
          iVar8 = PlayAudio(*(undefined *)(audioBank + 0x19),0,0);
LAB_80018174:
          if (-1 < iVar8) {
            FUN_80050cf4(iVar8,(settingsMusicVolume * 0xc00) / 10);
          }
          maybeScaledMusicVolume = (settingsMusicVolume * 0x3fff) / 10;
          return;
        }
        if (pauseSubMenuId != 4) {
          return;
        }
        if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None) {
          FUN_80054210();
          menuAnimation = 0;
          pauseMenuCurrentItem = 1 - pauseMenuCurrentItem;
          return;
        }
        if (((inputStates[0].pressed & Cross) == None) || (pauseMenuCurrentItem != 0)) {
          IVar3 = inputStates[0].pressed & (Triangle|Cross);
          iVar8 = 5;
joined_r0x800182f4:
          if (IVar3 != None) {
            pauseSubMenuId = 0;
            menuAnimation = 0;
            pauseMenuCurrentItem = iVar8;
            FUN_800541a0();
            return;
          }
          return;
        }
        menuState = menuState + Paused;
      }
    }
    else {
      if (pauseSubMenuId != 4) {
        iVar8 = 5;
        if (((pauseSubMenuId == 0) && (DAT_800698fc == 0)) || (pauseSubMenuId == 2)) {
          iVar8 = 6;
        }
        if (DAT_80069914 == 0) {
          if ((inputStates[0].pressed & DPadUp) == None) {
            if ((inputStates[0].pressed & DPadDown) == None) goto LAB_80017a50;
            if (pauseSubMenuId == 3) {
              if (pauseMenuCurrentItem == 2) {
                settingsSoundVolume = DAT_8006716c;
                goto LAB_800179c4;
              }
              if (pauseMenuCurrentItem != 1) goto LAB_800179c4;
              FUN_800541d0();
              DAT_8006716c = settingsSoundVolume;
              settingsSoundVolume = 10;
            }
            else {
LAB_800179c4:
              FUN_800541d0();
            }
            menuAnimation = 0;
            pauseMenuCurrentItem = pauseMenuCurrentItem + 1;
            if (iVar8 <= pauseMenuCurrentItem) {
              pauseMenuCurrentItem = 0;
            }
            if (((pauseSubMenuId != 2) || (pauseMenuCurrentItem != 2)) || (DAT_80068373 != '\0'))
            goto LAB_80017a50;
            iVar8 = 3;
          }
          else {
            if (pauseSubMenuId == 3) {
              if (pauseMenuCurrentItem == 2) {
                settingsSoundVolume = DAT_8006716c;
                goto LAB_800178cc;
              }
              if (pauseMenuCurrentItem != 3) goto LAB_800178cc;
              FUN_800541d0();
              DAT_8006716c = settingsSoundVolume;
              settingsSoundVolume = 10;
            }
            else {
LAB_800178cc:
              FUN_800541d0();
            }
            menuAnimation = 0;
            pauseMenuCurrentItem = pauseMenuCurrentItem + -1;
            if (pauseMenuCurrentItem < 0) {
              pauseMenuCurrentItem = iVar8 + -1;
            }
            if (((pauseSubMenuId != 2) || (pauseMenuCurrentItem != 2)) ||
               (iVar8 = 1, DAT_80068373 != '\0')) goto LAB_80017a50;
          }
          menuAnimation = 0;
          pauseMenuCurrentItem = iVar8;
        }
        else {
          menuAnimation = 0;
          pauseMenuCurrentItem = 0;
          DAT_80069914 = 0;
          menuState = menuState + Paused;
        }
      }
LAB_80017a50:
      if (((pauseSubMenuId == 1) || (pauseSubMenuId == 4)) ||
         ((inputStates[0].pressed & Start) == None)) goto LAB_80017a98;
      pauseMenuCurrentItem = 0;
      menuState = menuState + Paused;
    }
    menuAnimation = 0;
    FUN_800541a0();
    break;
  case Playing:
    menuAnimation = menuAnimation + 1;
    if (0x10 < menuAnimation) {
      if (pauseSubMenuId == 0) {
        if (pauseMenuCurrentItem == 5) {
          if (inSpeedwayFlag != -1) {
            (*DAT_80066f8c)();
            return;
          }
          if (((int)currentLoadedLevel / 10) * 10 != currentLoadedLevel + ~New_Name_(5)) {
            FUN_80019928(0xffffffff);
            return;
          }
          if (currentLoadedLevel == CRUSHS_DUNGEON) {
            uVar6 = 5;
          }
          else {
            uVar6 = 0xd;
            if (currentLoadedLevel == GULPS_OVERLOOK) {
              uVar6 = 9;
            }
          }
          FUN_80019230(uVar6);
          loadingStatus = 0;
          DAT_800698fc = 1;
          DAT_8006991c = 1;
          return;
        }
      }
      else if (pauseSubMenuId == 4) {
        GameOver();
        return;
      }
      currGameState = Normal;
      DAT_80068304 = 0;
    }
    break;
  case BetweenMenuAndHomeworld:
    iVar8 = menuAnimation + pauseMenuCurrentItem;
    if (DAT_80069910 == 0) {
      if (iVar8 == 0) {
        menuAnimation = 0;
        menuState = Paused;
        pauseMenuCurrentItem = 1;
        pauseSubMenuId = 0;
        return;
      }
      if ((iVar8 != 0xc) || (pauseMenuCurrentItem != 1)) {
        if (iVar8 < 0x18) {
          menuAnimation = iVar8;
          return;
        }
        menuAnimation = iVar8;
        iVar8 = FUN_80013690();
        if (iVar8 != 0) {
          menuAnimation = 0x18;
          return;
        }
        FUN_80054318();
        iVar8 = 0;
LAB_80018f18:
        FUN_8004de1c(iVar8);
        menuAnimation = 0;
        DAT_80069910 = 1;
        return;
      }
    }
    else {
      if (DAT_80069910 == 1) {
        if (iVar8 != (iVar8 / 0xc) * 0xc) {
          menuAnimation = iVar8;
          return;
        }
        menuAnimation = iVar8;
        FUN_80054318();
        iVar8 = FUN_80013690();
        if (iVar8 != 0) {
          return;
        }
        if (pauseMenuCurrentItem != 1) {
          FUN_8004dd94();
          menuAnimation = 0x17;
          pauseSubMenuId = 0;
          DAT_80069910 = 0;
          return;
        }
        FUN_8004dee8();
        DAT_80069918 = 1;
        DAT_80069910 = 2;
        if (8 < (int)g_currLevelID) {
          pauseSubMenuId = 1;
        }
        if (0x14 < (int)g_currLevelID) {
          pauseSubMenuId = 2;
        }
        DAT_80069900 = 0;
        do {
          if ((byte)(&DAT_80063ea0)[DAT_80069900] == g_currLevelID) break;
          DAT_80069900 = DAT_80069900 + 1;
        } while (DAT_80069900 < 0x20);
        if (currentLoadedLevel == DRAGON_SHORES) {
          DAT_80069900 = 0x15;
        }
        piVar7 = &DAT_80069900;
        iVar8 = DAT_80069900;
        uVar5 = (uint)(byte)(&DAT_80066e64)[pauseSubMenuId];
        goto code_r0x80018630;
      }
      if (iVar8 == 0) {
        menuAnimation = iVar8;
        FUN_80054318();
        menuAnimation = 0x17;
        DAT_80069910 = 1;
        return;
      }
      if ((iVar8 != 0xc) || (pauseMenuCurrentItem != -1)) {
        PVar4 = Homeworld;
joined_r0x80019064:
        if (menuAnimation + pauseMenuCurrentItem == 0x18) {
          menuAnimation = menuAnimation + pauseMenuCurrentItem;
          menuState = PVar4;
          pauseMenuCurrentItem = 0;
          return;
        }
        menuAnimation = menuAnimation + pauseMenuCurrentItem;
        return;
      }
    }
    goto LAB_800187f0;
  case Homeworld:
    if (pauseMenuCurrentItem != 0) {
joined_r0x800191bc:
      if (menuAnimation + pauseMenuCurrentItem == 0) {
        menuAnimation = menuAnimation + pauseMenuCurrentItem;
        pauseMenuCurrentItem = 0;
        DAT_80069900 = 0;
        return;
      }
      menuAnimation = menuAnimation + pauseMenuCurrentItem;
      if (menuAnimation == 0x18) {
        pauseMenuCurrentItem = 0;
        pauseSubMenuId = pauseSubMenuId + 1;
        DAT_80069900 = 0;
        return;
      }
      return;
    }
    menuAnimation = menuAnimation + 1;
    if ((inputStates[0].pressed & (Triangle|Start)) != None) {
      if ((inputStates[0].pressed & Start) != None) {
        DAT_80069914 = 1;
      }
      FUN_80054318();
      menuAnimation = 0x17;
      menuState = BetweenMenuAndHomeworld;
      pauseMenuCurrentItem = -1;
      DAT_80069910 = 2;
      return;
    }
    if ((inputStates[0].pressed & DPadLeft) == None) {
      if ((inputStates[0].pressed & DPadRight) == None) {
        if ((inputStates[0].pressed & (DPadUp|DPadDown)) != None) {
          iVar9 = 1;
          if ((inputStates[0].pressed & DPadUp) != None) {
            iVar9 = -1;
          }
          do {
            DAT_80069900 = DAT_80069900 + iVar9;
            if (DAT_80069900 < 0) {
              DAT_80069900 = (byte)(&DAT_80066e60)[pauseSubMenuId] - 1;
            }
            if ((int)(uint)(byte)(&DAT_80066e60)[pauseSubMenuId] <= DAT_80069900) {
              DAT_80069900 = 0;
            }
          } while (worldsEntered
                   [(byte)(&DAT_80063ea0)
                          [(uint)(byte)(&DAT_80066e64)[pauseSubMenuId] + DAT_80069900]] == false);
          if (DAT_80069900 != iVar8) {
            FUN_800541d0();
            menuAnimation = 0;
            return;
          }
          return;
        }
        if ((inputStates[0].pressed & Cross) == None) {
          return;
        }
        menuState = BetweenHomeworldAndWorld;
        menuAnimation = 0;
        pauseMenuCurrentItem = 1;
        DAT_80069910 = 0;
        DAT_80069904 = (uint)(byte)(&DAT_80063ea0)
                                   [(uint)(byte)(&DAT_80066e64)[pauseSubMenuId] + DAT_80069900];
        iVar8 = menuAnimation;
      }
      else {
        if ((pauseSubMenuId < 2) && (worldsEntered[(&DAT_80066e65)[pauseSubMenuId]] != false)) {
          DAT_80069900 = -1;
          goto LAB_8001915c;
        }
        if (totalSkillPoints == 0) {
          return;
        }
        if (globalProgressFlags.extendedSparxRange.isPayed == 0) {
          return;
        }
        menuState = 10;
        menuAnimation = 0;
        pauseMenuCurrentItem = 1;
        DAT_80069910 = 0;
        iVar8 = menuAnimation;
      }
    }
    else {
      if (pauseSubMenuId < 1) {
        return;
      }
      DAT_80069900 = -1;
      pauseMenuCurrentItem = -1;
      iVar8 = 0x17;
      pauseSubMenuId = pauseSubMenuId + -1;
    }
    goto LAB_800187f0;
  case BetweenHomeworldAndWorld:
  case SwitchingWorlds:
    iVar8 = menuAnimation + pauseMenuCurrentItem;
    if (DAT_80069910 == 0) {
      if (iVar8 == 0) {
        if (menuState != BetweenHomeworldAndWorld) {
          menuAnimation = iVar8;
          menuState = World;
          return;
        }
LAB_80018eac:
        menuAnimation = menuAnimation + pauseMenuCurrentItem;
        menuState = Homeworld;
        pauseMenuCurrentItem = 0;
        return;
      }
      if ((iVar8 != 0xc) || (pauseMenuCurrentItem != 1)) {
        if (iVar8 < 0x18) {
          menuAnimation = iVar8;
          return;
        }
        menuAnimation = iVar8;
        iVar8 = FUN_80013690();
        if (iVar8 != 0) {
          menuAnimation = 0x18;
          return;
        }
        FUN_80054318();
        if (menuState == SwitchingWorlds) {
          DAT_80069904 = (uint)(byte)(&DAT_80063ea0)[DAT_8006990c];
        }
        iVar8 = DAT_80069904 + 1;
        goto LAB_80018f18;
      }
    }
    else {
      if (DAT_80069910 == 1) {
        if (iVar8 != (iVar8 / 0xc) * 0xc) {
          menuAnimation = iVar8;
          return;
        }
        menuAnimation = iVar8;
        FUN_80054318();
        iVar8 = FUN_80013690();
        if (iVar8 != 0) {
          return;
        }
        FUN_8004dee8();
        if (pauseMenuCurrentItem == 1) {
          DAT_80069910 = 2;
          menuAnimation = 0;
        }
        else {
          DAT_80069910 = 0;
          menuAnimation = 0x17;
          if (menuState != SwitchingWorlds) {
            menuAnimation = 0x17;
            DAT_80069910 = 0;
            DAT_80069918 = 1;
            return;
          }
        }
        DAT_80069908 = -1;
        iVar8 = (uint)(byte)(&DAT_80066e64)[pauseSubMenuId] + DAT_80069900;
        do {
          iVar9 = iVar8 + -1;
          iVar2 = DAT_80069908;
          if (iVar9 < 0) break;
          pbVar1 = &DAT_80063e9f + iVar8;
          iVar2 = iVar9;
          iVar8 = iVar9;
        } while (worldsEntered[*pbVar1] == false);
        DAT_80069908 = iVar2;
        DAT_8006990c = (uint)(byte)(&DAT_80066e64)[pauseSubMenuId] + DAT_80069900;
        do {
          DAT_8006990c = DAT_8006990c + 1;
          if (0x1b < DAT_8006990c) {
            DAT_8006990c = 0xffffffff;
            DAT_80069918 = 2;
            return;
          }
        } while (worldsEntered[(byte)(&DAT_80063ea0)[DAT_8006990c]] == false);
        DAT_80069918 = 2;
        return;
      }
      if (iVar8 < 1) {
        if (DAT_80069914 == 0) {
          menuAnimation = iVar8;
          iVar8 = FUN_80013690();
          if (iVar8 != 0) {
            menuAnimation = 0;
            return;
          }
          FUN_80054318();
          iVar8 = 0;
          if (menuState == SwitchingWorlds) {
            DAT_80069904 = (uint)(byte)(&DAT_80063ea0)[DAT_80069908];
            iVar8 = DAT_80069904 + 1;
          }
          FUN_8004de1c(iVar8);
          menuAnimation = 0x17;
          DAT_80069910 = 1;
          return;
        }
LAB_80018ff0:
        menuAnimation = menuAnimation + pauseMenuCurrentItem;
        FUN_80054318();
        menuAnimation = 0x17;
        menuState = BetweenMenuAndHomeworld;
        DAT_80069910 = 1;
        return;
                    // WARNING: Read-only address (ram,0x800676e0) is written
                    // WARNING: Read-only address (ram,0x800676e4) is written
                    // WARNING: Read-only address (ram,0x8006998c) is written
                    // WARNING: Read-only address (ram,0x8006998e) is written
                    // WARNING: Read-only address (ram,0x80069a00) is written
                    // WARNING: Read-only address (ram,0x80069a02) is written
      }
      if ((iVar8 != 0xc) || (pauseMenuCurrentItem != -1)) {
        if (iVar8 == 0x18) {
          menuAnimation = iVar8;
          menuState = World;
          return;
        }
        menuAnimation = iVar8;
        return;
      }
    }
    goto LAB_800187f0;
  case World:
    menuAnimation = menuAnimation + 1;
    iVar8 = 0;
    if ((inputStates[0].pressed & (Triangle|Start)) == None) {
      if ((DAT_80069908 < 0) || ((inputStates[0].pressed & DPadLeft) == None)) {
        if ((DAT_8006990c < 0) || ((inputStates[0].pressed & DPadRight) == None)) goto LAB_80018dc8;
        menuAnimation = 0;
        pauseMenuCurrentItem = 1;
        DAT_80069910 = 0;
        iVar8 = DAT_8006990c;
      }
      else {
        menuAnimation = 0x17;
        pauseMenuCurrentItem = -1;
        DAT_80069910 = 2;
        iVar8 = DAT_80069908;
      }
      menuState = SwitchingWorlds;
      FUN_80054318();
    }
    else {
      if ((inputStates[0].pressed & Start) != None) {
        DAT_80069914 = 1;
      }
      FUN_80054318();
      menuState = BetweenHomeworldAndWorld;
      menuAnimation = 0x17;
      pauseMenuCurrentItem = -1;
      DAT_80069910 = 2;
    }
LAB_80018dc8:
    if (menuState == SwitchingWorlds) {
      if (iVar8 < (int)(uint)DAT_80066e66) {
        if (iVar8 < (int)(uint)DAT_80066e65) {
          pauseSubMenuId = 0;
        }
        else {
          pauseSubMenuId = 1;
        }
      }
      else {
        pauseSubMenuId = 2;
      }
      DAT_80069900 = iVar8 - (uint)(byte)(&DAT_80066e64)[pauseSubMenuId];
    }
    break;
  case 8:
    FUN_8006f884();
    break;
  case 9:
    FUN_8006fa78();
    break;
  case 10:
    iVar8 = menuAnimation + pauseMenuCurrentItem;
    if (DAT_80069910 == 0) {
      if (iVar8 == 0) goto LAB_80018eac;
      if ((iVar8 != 0xc) || (pauseMenuCurrentItem != 1)) {
        if (iVar8 < 0x18) {
          menuAnimation = iVar8;
          return;
        }
        menuAnimation = iVar8;
        iVar8 = FUN_80013690();
        if (iVar8 != 0) {
          menuAnimation = 0x18;
          return;
        }
        FUN_80054318();
        iVar8 = 0x1f;
        DAT_80069904 = 0x1f;
        goto LAB_80018f18;
      }
    }
    else {
      if (DAT_80069910 == 1) {
        if (iVar8 != (iVar8 / 0xc) * 0xc) {
          menuAnimation = iVar8;
          return;
        }
        menuAnimation = iVar8;
        FUN_80054318();
        iVar8 = FUN_80013690();
        if (iVar8 == 0) {
          FUN_8004dee8();
          if (pauseMenuCurrentItem != 1) {
            menuAnimation = 0x17;
            DAT_80069910 = 0;
            DAT_80069918 = 1;
            return;
          }
          menuAnimation = 0;
          pauseSubMenuId = 0;
          DAT_80069910 = 2;
          DAT_80069918 = 2;
          return;
        }
        return;
      }
      if (iVar8 < 1) {
        if (DAT_80069914 == 0) {
          menuAnimation = iVar8;
          iVar8 = FUN_80013690();
          if (iVar8 != 0) {
            menuAnimation = 0;
            return;
          }
          FUN_80054318();
          FUN_8004de1c(0);
          menuAnimation = 0x17;
          pauseSubMenuId = 2;
          DAT_80069910 = 1;
          return;
        }
        goto LAB_80018ff0;
      }
      if ((iVar8 != 0xc) || (pauseMenuCurrentItem != -1)) {
        PVar4 = 0xb;
        goto joined_r0x80019064;
      }
    }
    goto LAB_800187f0;
  case 0xb:
    if (pauseMenuCurrentItem != 0) goto joined_r0x800191bc;
    menuAnimation = menuAnimation + 1;
    if ((inputStates[0].pressed & (Triangle|Start)) != None) {
      if ((inputStates[0].pressed & Start) != None) {
        DAT_80069914 = 1;
      }
LAB_800190ec:
      FUN_80054318();
      menuAnimation = 0x17;
      menuState = 10;
      pauseMenuCurrentItem = -1;
      DAT_80069910 = 2;
      return;
    }
    if ((inputStates[0].pressed & DPadLeft) == None) {
      if ((inputStates[0].pressed & DPadRight) == None) {
        if ((inputStates[0].pressed & Cross) == None) {
          return;
        }
        if (7 < totalSkillPoints) {
          DAT_800698bc = 0xff;
          FUN_80019230(0);
          return;
        }
        return;
      }
      if (pauseSubMenuId != 0) {
        return;
      }
      if (totalSkillPoints < 0xb) {
        return;
      }
LAB_8001915c:
      pauseMenuCurrentItem = 1;
      iVar8 = 1;
    }
    else {
      if (pauseSubMenuId == 0) goto LAB_800190ec;
      pauseMenuCurrentItem = -1;
      iVar8 = 0x17;
      pauseSubMenuId = pauseSubMenuId + -1;
    }
LAB_800187f0:
    menuAnimation = iVar8;
    FUN_80054318();
  }
                    // WARNING: Read-only address (ram,0x800676e0) is written
                    // WARNING: Read-only address (ram,0x800676e4) is written
                    // WARNING: Read-only address (ram,0x8006998c) is written
                    // WARNING: Read-only address (ram,0x8006998e) is written
                    // WARNING: Read-only address (ram,0x80069a00) is written
                    // WARNING: Read-only address (ram,0x80069a02) is written
  return;
}



void FUN_80019230(int param_1)

{
  currGameState = FadeOut;
  menuState = Pausing;
  menuAnimation = 0;
  DAT_8006991c = 0;
  DAT_800698fc = (uint)(byte)(&DAT_80063264)[param_1];
  loadingStatus = (uint)(byte)(&DAT_80063250)[param_1];
  if ((param_1 == 7) && (worldsEntered[9])) {
    param_1 = 9;
  }
  if ((param_1 == 0xb) && (worldsEntered[21])) {
    param_1 = 0xd;
  }
  if (param_1 != 0) {
    currentLoadedLevel = (LoadedLevelID)(byte)ARRAY_8006323c[param_1];
  }
  DAT_80067e04 = 0;
                    // WARNING: Read-only address (ram,0x80069941) is written
  doubleFrameBuffer[0].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80069942) is written
  doubleFrameBuffer[0].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80069943) is written
  doubleFrameBuffer[0].drawEnvironment.b0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b5) is written
  doubleFrameBuffer[1].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b6) is written
  doubleFrameBuffer[1].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b7) is written
  doubleFrameBuffer[1].drawEnvironment.b0 = '\0';
  DAT_80066fd0 = g_currLevelID;
  pauseMenuCurrentItem = param_1;
  FUN_8004d158(0x1c000);
  FUN_80050aac();
  DAT_80068304 = 1;
  return;
}



void FUN_80019364(void)

{
  int iVar1;
  int iVar2;
  short *psVar3;
  RECT local_10;
  
  if (menuState == Paused) {
    if (DAT_800698bc == -1) {
      FUN_80013810(DAT_800682d8,&DAT_8006d264,DAT_80067724,DAT_80067720);
      pauseMenuCurrentItem = 0x12;
    }
    else if ((DAT_80067178 == 0) || (pauseMenuCurrentItem != 0x11)) {
      if ((int)currentLoadedLevel < 0x46) {
        if (-1 < loadingStatus) {
          do {
            FUN_8001d658();
          } while (-1 < loadingStatus);
        }
      }
      else {
        while (loadingStatus < 5) {
          FUN_8001d658();
        }
        do {
          iVar1 = FUN_80013690();
        } while (iVar1 != 0);
        DAT_8006b290 = FUN_8006fa98(DAT_8006b28c);
        FUN_8001c5ec();
      }
    }
    else {
      while (loadingStatus < 2) {
        FUN_8001d658();
      }
      FUN_80077374(0);
    }
    menuState = menuState + Paused;
    return;
  }
  if ((int)menuState < 2) {
    if (menuState != Pausing) {
      return;
    }
    if (menuAnimation == 0) {
      FUN_80013810(DAT_800682d8,&DAT_8006d264 + DAT_800670c4,0x16800,
                   DAT_80067718 + pauseMenuCurrentItem * 0x16800 + DAT_80067118 * 0x195000);
      local_10.x = 0x200;
      local_10.w = 0x180;
      local_10.y = 0;
      local_10.h = 0x78;
      LoadImage(&local_10,(u_long *)(&DAT_8006d264 + DAT_800670c4));
      DrawSync(0);
    }
    menuAnimation = menuAnimation + 1;
    if ((menuAnimation == 0xb) && ((&DAT_80063278)[pauseMenuCurrentItem] != '\0')) {
      while (loadingStatus < 2) {
        FUN_8001d658();
      }
      while (-1 < DAT_80067e04) {
                    // WARNING: Read-only address (ram,0x80067118) is written
                    // WARNING: Read-only address (ram,0x80067718) is written
                    // WARNING: Read-only address (ram,0x80067720) is written
                    // WARNING: Read-only address (ram,0x80067724) is written
        FUN_800709fc();
      }
    }
    if (menuAnimation < 0xe) {
      return;
    }
    menuState = menuState + Paused;
    return;
  }
  if (menuState != Playing) {
    return;
  }
  switch(pauseMenuCurrentItem) {
  case 0:
  case 3:
  case 5:
  case 9:
  case 0xd:
    if (DAT_8006991c == 2) {
      VortexSequence(1);
    }
    else {
      FUN_800171bc();
      if (DAT_8006991c == 1) {
        DAT_800698fc = DAT_8006991c;
      }
    }
    break;
  case 1:
    FUN_80073e48(2);
    break;
  case 2:
    FUN_80073e48(3);
    break;
  case 4:
    FUN_80073e48(4);
    break;
  case 6:
    FUN_80073e48(5);
    break;
  case 7:
    FUN_80073e48(6);
    break;
  case 8:
    FUN_80073e48(7);
    break;
  case 10:
    if (currentLoadedLevel != GULPS_OVERLOOK) {
      FUN_80073e48(8);
      return;
    }
  case 0x10:
switchD_800196e0_caseD_10:
    FUN_800171bc();
    break;
  case 0xb:
    FUN_80073e48(9);
    break;
  case 0xc:
    FUN_80073e48(10);
    break;
  case 0xe:
    if (currentLoadedLevel != RIPTOS_ARENA) {
      FUN_80073e48(0xb);
      return;
    }
    goto switchD_800196e0_caseD_10;
  case 0xf:
    if (globalProgressFlags.finalCutsceneWatched.isPayed == 0) {
      psVar3 = &globalProgressFlags.glacierBridge.isPayed;
      iVar1 = 0;
      do {
        iVar2 = (int)*(short *)((int)&globalProgressFlags.glacierBridge.cost + iVar1);
        if (iVar2 != 0) {
          if (*psVar3 == 1) {
            gemsCollectedNetValue = gemsCollectedNetValue + iVar2;
          }
          else if (*psVar3 == 0) {
            *psVar3 = 1;
          }
        }
        psVar3 = psVar3 + 2;
        iVar1 = iVar1 + 4;
      } while ((int)psVar3 < -0x7ff9b8f2);
      globalProgressFlags.finalCutsceneWatched.isPayed = 1;
    }
    FUN_80073e48(0xc);
    break;
  case 0x11:
    if (DAT_80067178 != 0) {
      maybeQuitGame();
      return;
    }
    goto switchD_800196e0_caseD_10;
  case 0x12:
    FUN_8006d2b8();
    DAT_800698bc = (byte)currentLoadedLevel;
    FUN_80019230(0);
    currentLoadedLevel = (LoadedLevelID)DAT_800698bc;
    loadingStatus = 0;
    DAT_800698bc = '\0';
  }
                    // WARNING: Read-only address (ram,0x80067118) is written
                    // WARNING: Read-only address (ram,0x80067718) is written
                    // WARNING: Read-only address (ram,0x80067720) is written
                    // WARNING: Read-only address (ram,0x80067724) is written
  return;
}



void FUN_80019928(int param_1)

{
  byte bVar1;
  int *piVar2;
  int iVar3;
  undefined4 uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  Vec3 local_30;
  
  if (param_1 < 0) {
    bVar1 = parentHomeworldArray[g_currLevelID];
    pauseSubMenuId = 1;
  }
  else {
    piVar2 = (int *)(param_1 * 0x44 + DAT_80066f00);
    iVar3 = Atan2(piVar2[0xc] - *piVar2,piVar2[0xd] - piVar2[1],1);
    iVar6 = param_1 * 0x44 + DAT_80066f00;
    uVar4 = Atan2(Spyro.position.x - *(int *)(iVar6 + 0x18),
                  Spyro.position.y - *(int *)(iVar6 + 0x1c),1);
    iVar6 = maybeNegativeAngularDistance4096(iVar3,uVar4);
    uVar5 = iVar3 + 0x400;
    if (iVar6 < 0) {
      uVar5 = iVar3 - 0x400;
    }
    uVar5 = uVar5 & 0xfff;
    local_30.x = cosineLookup(uVar5);
    local_30.x = local_30.x >> 1;
    local_30.y = sineLookup(uVar5);
    local_30.y = local_30.y >> 1;
    local_30.z = -1000;
    iVar7 = param_1 * 0x44;
    VectorAdd((Vec3 *)&DAT_8006b2b8,(Vec3 *)(DAT_80066f00 + iVar7 + 0x18),&local_30);
    VectorCopy(&Vec3_8006b2c4,&local_30);
    local_30.x = -local_30.x >> 2;
    local_30.y = -local_30.y >> 2;
    VectorCopy((Vec3 *)&DAT_8006b2d4,&cameraPosition);
    VectorAdd((Vec3 *)&DAT_8006b2e0,(Vec3 *)(DAT_80066f00 + iVar7 + 0x18),&local_30);
    DAT_8006b2ee = (undefined2)uVar5;
    DAT_8006b2ec = VectorShort_80067ec8.Z;
    uVar4 = Atan2(*(int *)(iVar7 + DAT_80066f00 + 0x18) - cameraPosition.x,
                  *(int *)(iVar7 + DAT_80066f00 + 0x1c) - cameraPosition.y,1);
    VectorSubtract(&local_30,(Vec3 *)&DAT_8006b2d4,(Vec3 *)&DAT_8006b2e0);
    iVar3 = maybeAngularDistance4096(uVar5,uVar4);
    iVar6 = VectorLength(&local_30,0);
    DAT_8006b2f0 = iVar3 * iVar6 >> 0xb;
    if (DAT_8006b2f0 < 400) {
      DAT_8006b2f0 = 0;
    }
    DAT_8006b2f8 = 0;
    if (inHomeWorld == 0) {
      bVar1 = parentHomeworldArray[g_currLevelID];
    }
    else {
      bVar1 = *(byte *)(iVar7 + DAT_80066f00 + 0x42);
    }
    pauseSubMenuId = 0;
    DAT_8006b2b4 = param_1;
  }
  DAT_8006715c = (uint)bVar1;
  DAT_8006b2fc = 0;
  menuState = Pausing;
  menuAnimation = 0;
  loadingStatus = 0;
  DAT_80067e04 = 0;
  currGameState = WorldTransition;
  StopLevelCompletePopupSequence();
  FUN_80050aac();
  DAT_80068304 = 1;
  return;
}



void UpdateWorldTransition(void)

{
  int iVar1;
  int iVar2;
  Vec3 aVStack_28 [2];
  
  if ((int)menuState < 4) {
    if ((int)menuState < 1) {
      if (menuState == Pausing) {
        if (loadingStatus < 1) {
          FUN_8001d658();
        }
        if (pauseSubMenuId == 0) {
          if (menuAnimation == 0) {
            SetSpyroState(Glide);
          }
          FUN_8002e304();
          iVar1 = FUN_80031b94(&DAT_8006b2b8);
          if (iVar1 < 0x400) {
            DAT_8006b2b8 = DAT_8006b2b8 + Vec3_8006b2c4.x;
            DAT_8006b2bc = DAT_8006b2bc + Vec3_8006b2c4.y;
          }
          Spyro.field13_0x1e = Spyro.field13_0x1e + 1;
          if (0x40 < Spyro.field13_0x1e) {
            Spyro.field13_0x1e = 0x40;
          }
          VectorSubtract(aVStack_28,(Vec3 *)&DAT_8006b2e0,(Vec3 *)&DAT_8006b2d4);
          VectorMultByN(aVStack_28,aVStack_28,menuAnimation);
          VectorDivByN(aVStack_28,aVStack_28,0x20);
          VectorAdd(&cameraPosition,(Vec3 *)&DAT_8006b2d4,aVStack_28);
          iVar1 = cosineLookup((int)DAT_8006b2ee);
          cameraPosition.x =
               cameraPosition.x -
               ((iVar1 * DAT_8006b2f0 >> 0xc) * (int)sineLookupTable[menuAnimation * 4] >> 0xc);
          iVar1 = sineLookup((int)DAT_8006b2ee);
          cameraPosition.y =
               cameraPosition.y -
               ((iVar1 * DAT_8006b2f0 >> 0xc) * (int)sineLookupTable[menuAnimation * 4] >> 0xc);
          iVar1 = maybeNegativeAngularDistance4096((int)DAT_8006b2ee,(int)DAT_8006b2ec);
          iVar1 = iVar1 * menuAnimation;
          if (iVar1 < 0) {
            iVar1 = iVar1 + 0x1f;
          }
          VectorShort_80067ec8.Z = DAT_8006b2ec + (short)(iVar1 >> 5) & 0xfff;
          if (menuAnimation < 0x20) {
            iVar1 = maybeNegativeAngularDistance4096(0,(int)VectorShort_80067ec8.Y);
            iVar2 = 0x20 - menuAnimation;
            if (iVar2 == 0) {
              trap(0x1c00);
            }
            if ((iVar2 == -1) && (iVar1 == -0x80000000)) {
              trap(0x1800);
            }
            VectorShort_80067ec8.Y = VectorShort_80067ec8.Y + (short)(iVar1 / iVar2);
          }
          else {
            VectorShort_80067ec8.Y = 0;
          }
        }
        else if (menuAnimation < 0x1f) {
          blackOverlayOpacity = (menuAnimation + 1) * 8;
          menuAnimation = menuAnimation + 1;
        }
        if (menuAnimation < 0x20) {
          menuAnimation = menuAnimation + 1;
        }
        if (((menuAnimation == 0x20) && (0 < loadingStatus)) && (iVar1 = FUN_80013690(), iVar1 == 0)
           ) {
          FUN_8004d158(0x1c000);
          DAT_80067170 = 0x16000;
          menuState = Paused;
          menuAnimation = 0;
          doubleFrameBuffer[1].field2_0x70 = doubleFrameBuffer[0].field2_0x70 + 0x5800;
                    // WARNING: Read-only address (ram,0x80069a0c) is written
        }
      }
    }
    else {
      FUN_80071bd4();
    }
  }
  else if (menuState == Homeworld) {
    if (menuAnimation == 0) {
      if (-1 < loadingStatus) {
        do {
          FUN_8001d658();
        } while (-1 < loadingStatus);
      }
      MEMSET(&checkpointStorage.checkpointSaved,0,0x248);
      MEMSET(&CheckpointData_8006718c.checkpointSaved,0,0x248);
      if ((&DAT_800632ac)[g_currLevelID] == '\0') {
        FUN_800171bc();
      }
      else {
        FUN_80030a6c();
        OnWorldEnter(DAT_8006b294);
        iVar1 = (uint)(byte)(&DAT_80060140)[g_currLevelID] * 8;
        FUN_80012c1c(DAT_80066d44 + *(int *)(&DAT_80064de4 + iVar1),
                     DAT_80066d44 + *(int *)(&DAT_80064de4 + iVar1) +
                     (uint)*(ushort *)(&DAT_80064de8 + iVar1),*(undefined2 *)(&DAT_80064dea + iVar1)
                    );
        if (inHomeWorld != 0) {
          VectorCopy(&Spyro.position,(Vec3 *)&DAT_8006b2b8);
          Spyro.rotation.Yaw = (int)DAT_8006b2d0;
          SetSpyroState(Glide);
          ApplyCameraOrbit(&Orbit_80061718);
          DAT_80067fc4 = 1;
          DAT_80067fc5 = 1;
          DAT_80067fc6 = 0;
          FUN_80031b94(&Vec3_8006b2c4);
          UpdateCamera();
        }
      }
    }
    menuAnimation = menuAnimation + 1;
    if (menuAnimation < 9) {
      blackOverlayOpacity = (8 - menuAnimation) * 0x20;
    }
    if (inHomeWorld != 0) {
      FUN_8002e304();
      if (9 < menuAnimation) {
        iVar1 = FUN_80031b94(&Vec3_8006b2c4);
        Spyro.angleAsByte.pitch = 0;
        Spyro.angleAsByte.roll = 0;
        UpdateCamera();
        if (iVar1 == 0) {
          SetSpyroState(Idle);
          currGameState = FadeIn;
          menuState = Playing;
          menuAnimation = 0;
          pauseSubMenuId = 0;
          blackOverlayOpacity = 0;
          DAT_800670c8 = 1;
        }
      }
      Spyro.field13_0x1e = 0x20;
    }
  }
  return;
}



void FUN_8001a290(void)

{
  menuState = Pausing;
  menuAnimation = 0;
  loadingStatus = 0;
  DAT_80067e04 = 0;
  currGameState = 8;
  DAT_8006715c = currentLoadedLevel + New_Name_(16);
  FUN_80050aac();
  DAT_80068304 = 1;
  return;
}



void FUN_8001a2fc(void)

{
  short sVar1;
  int iVar2;
  Vec3 local_20;
  
  switch(menuState) {
  case Pausing:
    if (loadingStatus < 1) {
      FUN_8001d658();
    }
    Spyro.position.z = Spyro.position.z + -0x118;
    FUN_8002e304();
    if (menuAnimation < 0x10) {
      blackOverlayOpacity = (menuAnimation + 1) * 8;
      menuAnimation = menuAnimation + 1;
    }
    else {
      ClearDoubleBuffer();
                    // WARNING: Read-only address (ram,0x80069941) is written
      doubleFrameBuffer[0].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80069942) is written
      doubleFrameBuffer[0].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80069943) is written
      doubleFrameBuffer[0].drawEnvironment.b0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b5) is written
      doubleFrameBuffer[1].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b6) is written
      doubleFrameBuffer[1].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b7) is written
      doubleFrameBuffer[1].drawEnvironment.b0 = '\0';
      FUN_8004d158(0x1c000);
      while (loadingStatus < 2) {
        FUN_8001d658();
      }
      if ((g_currLevelID == SUMMER_FOREST) && (worldsEntered[8] == false)) {
        FUN_80019230(6);
      }
      else if ((g_currLevelID == AUTUMN_PLAINS) && (worldsEntered[20] == false)) {
        FUN_80019230(10);
      }
      else {
        menuState = Paused;
        menuAnimation = 0;
        DAT_800670c8 = 1;
      }
    }
    break;
  case Paused:
  case Playing:
    FUN_80072f9c();
    break;
  case BetweenMenuAndHomeworld:
    while (-1 < loadingStatus) {
      FUN_8001d658();
    }
    DAT_800670c8 = 1;
    menuState = Homeworld;
    menuAnimation = 0;
    break;
  case Homeworld:
    if (menuAnimation == 0) {
      MEMSET(&checkpointStorage.checkpointSaved,0,0x248);
      MEMSET(&CheckpointData_8006718c.checkpointSaved,0,0x248);
      FUN_80030a6c();
      OnWorldEnter(DAT_8006b294);
      Spyro.position.z = Spyro.position.z + -0x164;
      Spyro.angleAsByte.yaw = (byte)(Spyro.rotation.Yaw >> 4);
      SaveCheckpoint(&checkpointStorage,&Spyro,Spyro.rotation.Yaw >> 4 & 0xff);
      Spyro.position.z = Spyro.position.z + 0x164;
      SetSpyroState(Flop);
      Spyro.position.z = Spyro.position.z + 0x3000;
      iVar2 = (uint)(byte)(&DAT_80060140)[g_currLevelID] * 8;
      FUN_80012c1c(DAT_80066d44 + *(int *)(&DAT_80064de4 + iVar2),
                   DAT_80066d44 + *(int *)(&DAT_80064de4 + iVar2) +
                   (uint)*(ushort *)(&DAT_80064de8 + iVar2),*(undefined2 *)(&DAT_80064dea + iVar2));
    }
    menuAnimation = menuAnimation + 1;
    if (menuAnimation < 9) {
      blackOverlayOpacity = (8 - menuAnimation) * 0x20;
    }
    Spyro.field150_0x20c = 0x10000002;
    UpdateSpyro();
    VectorSubtract(&local_20,&Spyro.position,&cameraPosition);
    VectorShort_80067ec8.X = 0;
    iVar2 = VectorLength(&local_20,0);
    sVar1 = Atan2(iVar2,local_20.z,1);
    VectorShort_80067ec8.Y = -sVar1;
    VectorShort_80067ec8.Z = Atan2(local_20.x,local_20.y,1);
    iVar2 = RaycastDown(&Spyro.position,0x4000);
    if (Spyro.position.z - iVar2 < 0x1a4) {
      currGameState = Normal;
    }
  }
  return;
}



void GameOver(void)

{
  currGameState = 9;
  menuState = Pausing;
  blackOverlayOpacity = 0;
  if ((currentLoadedLevel != GLIMMER) || (worldsEntered[0])) {
    DAT_8006715c = (LoadedLevelID)parentHomeworldArray[g_currLevelID];
  }
  else {
    DAT_8006715c = currentLoadedLevel;
  }
  loadingStatus = 0;
  FUN_80050aac();
  DAT_80068304 = 1;
  return;
}



void FUN_8001a79c(void)

{
  if ((int)menuState < 3) {
    if ((int)menuState < 1) {
      if (menuState == Pausing) {
        if (loadingStatus < 2) {
          FUN_8001d658();
        }
        blackOverlayOpacity = blackOverlayOpacity + 0x10;
        if (0xff < blackOverlayOpacity) {
          ClearDoubleBuffer();
          FUN_8004d158(0x1c000);
          while (loadingStatus < 2) {
            FUN_8001d658();
          }
          if (lives < 0) {
            menuState = Paused;
            menuAnimation = 0;
            DAT_800670c8 = 1;
            currentLoadedLevel = DAT_8006715c;
            DAT_80066fd0 = g_currLevelID;
          }
          else {
            FUN_80077374(0);
            maybeQuitGame();
          }
        }
      }
    }
    else {
      FUN_80073510();
    }
  }
  else if (menuState == BetweenMenuAndHomeworld) {
    while (-1 < loadingStatus) {
      FUN_8001d658();
    }
    FUN_800171bc();
  }
  return;
}



void FUN_8001a910(void)

{
  currGameState = 10;
  DAT_800670ec = 0;
  DAT_800670e8 = 0;
  DAT_80066f0c = 0;
  DAT_80066ee8 = 0xffff;
  DAT_80067080 = 0;
  DAT_80067184 = 0;
  DAT_80067128 = 0;
  DAT_8006707c = 0;
  DAT_80066f34 = 0;
  FUN_80013810(DAT_800682d8,&DAT_8006d264,DAT_80067714,DAT_80067710);
  FUN_80050aac();
  return;
}



void FUN_8001a9b0(void)

{
  if (DAT_80066ee8 == 99) {
    loadingStatus = 1;
    if (DAT_80067048 == -1) {
      FUN_80019230(0x10);
    }
    else {
      FUN_80019230(0);
      currentLoadedLevel = (LoadedLevelID)DAT_80067048;
      DAT_80067048 = -1;
      loadingStatus = 0;
    }
    DAT_80067128 = 0;
    DAT_80066ee8 = DAT_80066ee8 + 1;
  }
  else if (DAT_80066ee8 == 100) {
    DAT_80067128 = DAT_80067128 + (short)deltaTime;
    FUN_8001d658();
  }
  else {
    FUN_8006d96c();
  }
  return;
}



void maybeQuitGame(void)

{
  undefined uVar1;
  uint uVar2;
  
  currGameState = MainMenu;
  DAT_80067024 = 0;
  DAT_80067178 = 0;
  DAT_80067044 = 0;
  DAT_80067100 = 0;
  DAT_8006701c = 0;
  FUN_8004d158(0x1c000);
  MEMSET(&DAT_80067e00,0,0x84);
  MEMSET((int *)&hudGems,0,0x7c);
  MEMSET((int *)&Spyro,0,0x2c4);
  MEMSET(&DAT_800698d0,0,0x1c);
  MEMSET(&Vec3_8006aa1c.x,0,0x130);
  MEMSET(&Mat33_80067e84.R12R11,0,500);
  Spyro.field169_0x264 = -1;
  Spyro.field171_0x26c = -1;
  Spyro.health = maxHealth;
  MEMSET(&checkpointStorage.checkpointSaved,0,0x248);
  MEMSET(&CheckpointData_8006718c.checkpointSaved,0,0x248);
  uVar1 = cheatFireball;
  MEMSET((int *)&cheatInvincible,0,0x18);
  cheatFireball = uVar1;
  MemCopy(&maxHealth,&DAT_80061ab4,0x28);
  uVar2 = maybeReadSysClock();
  srand(uVar2);
  return;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_8001ac20(void)

{
  FUN_80079df0();
  return;
}



void VortexSequence(PauseMenuState param_1)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  byte *pbVar4;
  Object *pOVar5;
  int iVar6;
  
  currGameState = 0xc;
  menuAnimation = 0;
  menuState = param_1;
  if (param_1 != Pausing) {
    MEMSET(&checkpointStorage.checkpointSaved,0,0x248);
    MEMSET(&CheckpointData_8006718c.checkpointSaved,0,0x248);
    FUN_80030a6c();
    OnWorldEnter(DAT_8006b294);
    iVar2 = (uint)(byte)(&DAT_80060140)[g_currLevelID] * 8;
    FUN_80012c1c(DAT_80066d44 + *(int *)(&DAT_80064de4 + iVar2),
                 DAT_80066d44 + *(int *)(&DAT_80064de4 + iVar2) +
                 (uint)*(ushort *)(&DAT_80064de8 + iVar2),*(undefined2 *)(&DAT_80064dea + iVar2));
    pOVar5 = Objects;
    if (Objects->state != 0xff) {
      pbVar4 = &Objects->state;
      do {
        if ((*(short *)(pbVar4 + -0x12) == 0x23b) &&
           (*(int *)(pOVar5->data + 8) == destinationVortexRelated)) break;
        pbVar4 = pbVar4 + 0x58;
        pOVar5 = pOVar5 + 1;
      } while (*pbVar4 != 0xff);
    }
    VectorCopy(&Spyro.position,&pOVar5->position);
    Spyro.position.z = Spyro.position.z + 0x6f4;
    Spyro.rotation.Yaw = (uint)(pOVar5->eulerRotation).yaw << 4;
    Spyro.angleAsByte.yaw = (pOVar5->eulerRotation).yaw;
    Spyro.field13_0x1e = 4;
    SetSpyroState(Glide);
    iVar6 = 0;
    ApplyCameraOrbit(&Orbit_80061718);
    Spyro.position.z = Spyro.position.z + -0x400;
    Vec3_8006b2c4.x = (pOVar5->position).x + (int)cosineLookupTable[(pOVar5->eulerRotation).yaw];
    Vec3_8006b2c4.y = (pOVar5->position).y + (int)sineLookupTable[(pOVar5->eulerRotation).yaw];
    Vec3_8006b2c4.z = (pOVar5->position).z + 0x400;
    iVar2 = RaycastDown(&Vec3_8006b2c4,0x1000);
    Vec3_8006b2c4.z = iVar2 + 0x164;
    do {
      iVar6 = iVar6 + 1;
      iVar2 = rand();
      iVar3 = (pOVar5->position).z;
      (pOVar5->eulerRotation).yaw = (pOVar5->eulerRotation).yaw + (char)iVar2;
      (pOVar5->position).z = iVar3 + 0x200;
      FUN_80041538(pOVar5,4);
      (*DAT_800670fc)(8,0xc,pOVar5,3);
      bVar1 = (pOVar5->eulerRotation).yaw;
      (pOVar5->position).z = (pOVar5->position).z + -0x200;
      (pOVar5->eulerRotation).yaw = bVar1 - (char)iVar2;
      FUN_80041538(pOVar5,4);
    } while (iVar6 < 0x10);
    blackOverlayOpacity = 0xff;
  }
  return;
}



void FUN_8001af18(void)

{
  int iVar1;
  
  menuAnimation = menuAnimation + 1;
  if (menuState != Pausing) {
    FUN_8002e304();
    if (menuAnimation < 9) {
      blackOverlayOpacity = (8 - menuAnimation) * 0x20;
    }
    if (menuAnimation < 0x21) {
      Spyro.position.z = Spyro.position.z + 0x20;
      Spyro.angleAsByte.yaw = Spyro.angleAsByte.yaw + 8;
    }
    else {
      iVar1 = FUN_80031b94(&Vec3_8006b2c4);
      Spyro.angleAsByte.pitch = 0;
      Spyro.angleAsByte.roll = 0;
      UpdateCamera();
      if (iVar1 == 0) {
        SetSpyroState(Idle);
        currGameState = FadeIn;
        menuState = Playing;
        menuAnimation = 0;
        pauseSubMenuId = 0;
        blackOverlayOpacity = 0;
        DAT_800670c8 = 1;
      }
    }
  }
  SelectUpdate(Visuals|World|Particles|HUD);
  DAT_80067008 = DAT_80067008 + 1;
  return;
}



void SelectUpdate(UpdateFlags flags)

{
  if ((flags & Visuals) != None) {
    UpdateTerrainAnimations(deltaTime);
    FUN_80023778();
    FUN_80023994();
    FUN_80023a9c();
  }
  if (((flags & World) != None) && (ptrUpdateWorld != (code *)0x0)) {
    (*ptrUpdateWorld)();
  }
  if ((flags & Spyro) != None) {
    UpdateSpyro();
  }
  if ((flags & Particles) != None) {
    if (ptrUpdateParticles != (code *)0x0) {
      (*ptrUpdateParticles)(deltaTime);
    }
    FUN_800504a8();
  }
  if ((flags & Camera) != None) {
    UpdateCamera();
  }
  if ((flags & HUD) != None) {
    UpdateHUD();
  }
  return;
}



void UpdateGame(void)

{
  DAT_800670c8 = 0;
  ReadInput();
  FUN_80012cbc();
  switch(currGameState) {
  case Normal:
    UpdateGameNormalState();
    break;
  case Dialogue:
    UpdateDialogue();
    break;
  case Freeze:
    if (INT_80067ed4 == 2) {
      (*DAT_80066f84)();
      SelectUpdate(Visuals|Camera);
    }
    else {
      SelectUpdate(Camera);
    }
    break;
  case FadeIn:
    FUN_8001722c();
    break;
  case Pause:
    FUN_800176a4();
    break;
  case FadeOut:
    FUN_80019364();
    break;
  case Cutscene:
    UpdateCutscene();
    break;
  case WorldTransition:
    UpdateWorldTransition();
    break;
  case 8:
    FUN_8001a2fc();
    break;
  case 9:
    FUN_8001a79c();
    break;
  case 10:
    FUN_8001a9b0();
    break;
  case MainMenu:
    FUN_8001ac20();
    break;
  case 0xc:
    FUN_8001af18();
  }
  FUN_80050d38();
  return;
}



undefined * FUN_8001b2a8(int param_1)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined2 *puVar3;
  undefined4 *puVar4;
  int iVar5;
  undefined *puVar6;
  
  puVar4 = (undefined4 *)(DAT_80066ffc + param_1 * 8);
  puVar2 = (undefined4 *)(DAT_80066ffc + -8);
  puVar1 = (undefined4 *)(DAT_80067168 + 8);
  if ((int)puVar4 - (int)(undefined4 *)(DAT_80067168 + 8) < 1) {
    puVar1 = puVar4;
  }
  do {
    puVar4 = puVar1;
    puVar3 = (undefined2 *)puVar4[-2];
    if (puVar4 == puVar2) {
      return &DAT_8006012c;
    }
    puVar1 = puVar4 + -2;
  } while (puVar3 == (undefined2 *)0x0);
  puVar6 = (undefined *)puVar4[-1];
  *puVar1 = 0;
  puVar4[-1] = 0;
  while (puVar4 = puVar1, iVar5 = puVar4[-1], puVar4 != puVar2) {
    puVar1 = puVar4 + -2;
    if (iVar5 != 0) {
      *puVar3 = (short)iVar5;
      *(char *)(puVar3 + 1) = (char)((uint)iVar5 >> 0x10);
      puVar3 = (undefined2 *)*puVar1;
      puVar4[-1] = 0;
      *puVar1 = 0;
    }
  }
  *puVar3 = 300;
  *(undefined *)(puVar3 + 1) = 6;
  return puVar6;
}



void FUN_8001b354(int param_1,int param_2)

{
  undefined2 *puVar1;
  int *piVar2;
  
  piVar2 = (int *)(param_2 * 8 + DAT_80066ffc);
  puVar1 = (undefined2 *)*piVar2;
  *piVar2 = param_1;
  if (puVar1 != (undefined2 *)0x0) {
    *puVar1 = (short)param_1;
    *(char *)(puVar1 + 1) = (char)((uint)param_1 >> 0x10);
    return;
  }
  piVar2[1] = param_1;
  return;
}



void PrimitiveBuffer_Insert(uint *ptrPrimitive)

{
  ushort *ptrLastPrimitive;
  LinkedList *ptrLinkedList;
  
  ptrLinkedList = LinkedList_primitiveBuffer;
  ptrLastPrimitive = (ushort *)LinkedList_primitiveBuffer->tail;
  LinkedList_primitiveBuffer->tail = ptrPrimitive;
  if (ptrLastPrimitive != (ushort *)0x0) {
    *ptrLastPrimitive = (ushort)ptrPrimitive;
    *(char *)(ptrLastPrimitive + 1) = (char)((uint)ptrPrimitive >> 0x10);
    return;
  }
  ptrLinkedList->head = ptrPrimitive;
  return;
}



void MEMSET(int *param_1,int param_2,int param_3)

{
  bool bVar1;
  int *piVar2;
  
  piVar2 = (int *)((int)param_1 + param_3 + -4);
  do {
    *param_1 = param_2;
    bVar1 = param_1 != piVar2;
    param_1 = param_1 + 1;
  } while (bVar1);
  return;
}



void MemFill(undefined4 *addr,undefined4 value,int length)

{
  bool bVar1;
  undefined4 *puVar2;
  
  puVar2 = (undefined4 *)((int)addr + length + -0x10);
  do {
    *addr = value;
    addr[1] = value;
    addr[2] = value;
    addr[3] = value;
    bVar1 = addr != puVar2;
    addr = addr + 4;
  } while (bVar1);
  return;
}



void MemCopy(undefined4 *target,undefined4 *values,int length)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  
  puVar2 = (undefined4 *)((int)target + length + -4);
  do {
    uVar3 = values[1];
    uVar4 = values[2];
    uVar5 = values[3];
    *target = *values;
    values = values + 4;
    if (target == puVar2) {
      return;
    }
    target[1] = uVar3;
    if (target + 1 == puVar2) {
      return;
    }
    target[2] = uVar4;
    puVar1 = target + 3;
    if (target + 2 == puVar2) {
      return;
    }
    *puVar1 = uVar5;
    target = target + 4;
  } while (puVar1 != puVar2);
  return;
}



void FUN_8001b460(int param_1,int param_2,int param_3)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  
  param_2 = param_2 + param_3;
  param_3 = param_3 + param_1;
  param_1 = param_1 + 4;
  do {
    uVar2 = *(undefined4 *)(param_2 + -8);
    uVar3 = *(undefined4 *)(param_2 + -0xc);
    uVar4 = *(undefined4 *)(param_2 + -0x10);
    *(undefined4 *)(param_3 + -4) = *(undefined4 *)(param_2 + -4);
    param_2 = param_2 + -0x10;
    if (param_1 == param_3) {
      return;
    }
    *(undefined4 *)(param_3 + -8) = uVar2;
    if (param_1 == param_3 + -4) {
      return;
    }
    *(undefined4 *)(param_3 + -0xc) = uVar3;
    iVar1 = param_3 + -0xc;
    if (param_1 == param_3 + -8) {
      return;
    }
    *(undefined4 *)(param_3 + -0x10) = uVar4;
    param_3 = param_3 + -0x10;
  } while (param_1 != iVar1);
  return;
}



// 4096 represents pi/2 radians anticlockwise from posititive x axis

uint Atan2(int vx,int vy,int flag)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  
  iVar4 = vx;
  if (vx < 0) {
    iVar4 = -vx;
  }
  iVar3 = vy;
  if (vy < 0) {
    iVar3 = -vy;
  }
  iVar2 = iVar4;
  if (0 < iVar4 - iVar3) {
    iVar2 = iVar3;
    iVar3 = iVar4;
  }
  if (iVar3 == 0) {
    iVar3 = 1;
  }
  uVar7 = (iVar2 << 0xe) / iVar3;
  if (vx < 0) {
    if (vy < 0) {
      bVar1 = false;
      if (vy - vx < 0) {
        bVar1 = true;
        iVar4 = 0x3000;
      }
      else {
        iVar4 = 0x2000;
      }
    }
    else {
      bVar1 = true;
      if (-vy - vx < 0) {
        bVar1 = false;
        iVar4 = 0x1000;
      }
      else {
        iVar4 = 0x2000;
      }
    }
  }
  else if (vy < 0) {
    bVar1 = true;
    if (vx + vy < 0) {
      bVar1 = false;
      iVar4 = 0x3000;
    }
    else {
      iVar4 = 0;
    }
  }
  else {
    bVar1 = false;
    if (vx - vy < 0) {
      bVar1 = true;
      iVar4 = 0x1000;
    }
    else {
      iVar4 = 0;
    }
  }
  uVar6 = uVar7 & 0x7f;
  uVar7 = uVar7 >> 7;
  uVar5 = (uint)(ushort)arctanArray[uVar7];
  if (uVar6 != 0) {
    uVar5 = uVar5 + (uVar6 * ((ushort)arctanArray[uVar7 + 1] - uVar5) >> 7);
  }
  if (bVar1) {
    uVar5 = -uVar5;
  }
  uVar5 = iVar4 + uVar5;
  if (flag != 0) {
    if (flag != 1) {
      return uVar5 & 0x3fff;
    }
    return uVar5 + 2 >> 2 & 0xfff;
  }
  return uVar5 + 0x20 >> 6 & 0xff;
}



int sineLookup(uint param_1)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = (param_1 & 0xfff) >> 4;
  iVar1 = (int)sineLookupTable[uVar2];
  if ((param_1 & 0xf) != 0) {
    iVar1 = iVar1 + ((int)((param_1 & 0xf) * (sineLookupTable[uVar2 + 1] - iVar1)) >> 4);
  }
  return iVar1;
}



int cosineLookup(uint param_1)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = (param_1 & 0xfff) >> 4;
  iVar1 = (int)cosineLookupTable[uVar2];
  if ((param_1 & 0xf) != 0) {
    iVar1 = iVar1 + ((int)((param_1 & 0xf) * (cosineLookupTable[uVar2 + 1] - iVar1)) >> 4);
  }
  return iVar1;
}



int FUN_8001b6ac(int param_1)

{
  int iVar1;
  
  gte_ldLZCS(param_1);
  iVar1 = 0x1f;
  if (param_1 != 0) {
    iVar1 = gte_stLZCR();
  }
  return 0x1f - iVar1;
}



void BuildRotationMatrix(uint *inputRotation,uint *outputMatrix,Mat33 *inputMatrix)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  
  uVar1 = *inputRotation;
  if (inputMatrix == (Mat33 *)0x0) {
    uVar5 = 0x1000;
    uVar6 = 0;
    uVar7 = 0x1000;
    uVar8 = 0;
    uVar9 = 0x1000;
  }
  else {
    uVar5 = inputMatrix->R12R11;
    uVar6 = inputMatrix->R21R13;
    uVar7 = inputMatrix->R23R22;
    uVar8 = inputMatrix->R32R31;
    uVar9 = inputMatrix->R33;
  }
  gte_ldR11R12(uVar5);
  gte_ldR13R21(uVar6);
  gte_ldR22R23(uVar7);
  gte_ldR31R32(uVar8);
  gte_ldR33(uVar9);
                    // Yaw
  uVar2 = uVar1 >> 0xf & 0x1fe;
  if (uVar2 != 0) {
    gte_ldVXY0((uint)*(ushort *)((int)cosineLookupTable + uVar2));
    gte_ldVZ0((uint)*(ushort *)((int)sineLookupTable + uVar2));
    gte_rtv0_b();
    uVar9 = gte_stIR1();
    gte_ldVXY0(-(uint)*(ushort *)((int)sineLookupTable + uVar2) & 0xffff);
    gte_ldVZ0((uint)*(ushort *)((int)cosineLookupTable + uVar2));
    iVar4 = gte_stIR2();
    uVar6 = gte_stIR3();
    gte_rtv0_b();
    uVar5 = (uVar5 & 0xffff0000) + (uVar9 & 0xffff);
    uVar8 = (uVar8 & 0xffff0000) + (uVar6 & 0xffff);
    uVar6 = gte_stIR1();
    iVar3 = gte_stIR2();
    uVar9 = gte_stIR3();
    uVar6 = (uVar6 & 0xffff) + iVar4 * 0x10000;
    uVar7 = (uVar7 & 0xffff) + iVar3 * 0x10000;
    uVar9 = uVar9 & 0xffff;
    gte_ldR11R12(uVar5);
    gte_ldR13R21(uVar6);
    gte_ldR22R23(uVar7);
    gte_ldR31R32(uVar8);
    gte_ldR33(uVar9);
  }
                    // Roll
  uVar2 = (uVar1 & 0xff00) >> 7;
  if ((uVar1 & 0xff00) != 0) {
    uVar7 = (uint)*(ushort *)((int)cosineLookupTable + uVar2);
    uVar9 = (uint)*(ushort *)((int)sineLookupTable + uVar2);
    gte_ldVXY0(uVar7 << 0x10);
    gte_ldVZ0(uVar9);
    gte_rtv0_b();
    iVar3 = gte_stIR1();
    gte_ldVXY0(uVar9 * -0x10000);
    gte_ldVZ0(uVar7);
    uVar2 = gte_stIR2();
    iVar4 = gte_stIR3();
    gte_rtv0_b();
    uVar5 = (uVar5 & 0xffff) + iVar3 * 0x10000;
    uVar8 = (uVar8 & 0xffff) + iVar4 * 0x10000;
    uVar7 = gte_stIR1();
    iVar3 = gte_stIR2();
    uVar9 = gte_stIR3();
    uVar6 = (uVar6 & 0xffff0000) + (uVar7 & 0xffff);
    uVar7 = iVar3 * 0x10000 + (uVar2 & 0xffff);
    uVar9 = uVar9 & 0xffff;
    gte_ldR11R12(uVar5);
    gte_ldR13R21(uVar6);
    gte_ldR22R23(uVar7);
    gte_ldR31R32(uVar8);
    gte_ldR33(uVar9);
  }
                    // Pitch
  uVar1 = uVar1 & 0xff;
  if (uVar1 != 0) {
    gte_ldVZ0(0);
    gte_ldVXY0((uint)(ushort)sineLookupTable[uVar1] * 0x10000 +
               (uint)(ushort)cosineLookupTable[uVar1]);
    gte_rtv0_b();
    uVar5 = gte_stIR1();
    gte_ldVXY0((-(uint)(ushort)sineLookupTable[uVar1] & 0xffff) +
               (uint)(ushort)cosineLookupTable[uVar1] * 0x10000);
    gte_ldVZ0(0);
    iVar3 = gte_stIR2();
    uVar8 = gte_stIR3();
    gte_rtv0_b();
    uVar6 = (uVar6 & 0xffff) + iVar3 * 0x10000;
    iVar3 = gte_stIR1();
    uVar1 = gte_stIR2();
    iVar4 = gte_stIR3();
    uVar5 = iVar3 * 0x10000 + (uVar5 & 0xffff);
    uVar7 = (uVar7 & 0xffff0000) + (uVar1 & 0xffff);
    uVar8 = iVar4 * 0x10000 + (uVar8 & 0xffff);
    gte_ldR11R12(uVar5);
    gte_ldR13R21(uVar6);
    gte_ldR22R23(uVar7);
    gte_ldR31R32(uVar8);
    gte_ldR33(uVar9);
  }
  *outputMatrix = uVar5;
  outputMatrix[1] = uVar6;
  outputMatrix[2] = uVar7;
  outputMatrix[3] = uVar8;
  outputMatrix[4] = uVar9;
  return;
}



void TransposeMatrix(Mat33 *outputMatrix,Mat33 *inputMatrix)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  
  uVar8 = inputMatrix->R23R22;
  iVar10 = inputMatrix->R33;
  uVar3 = inputMatrix->R12R11 & 0xffff0000;
  uVar5 = inputMatrix->R21R13 & 0xffff0000;
  uVar7 = inputMatrix->R21R13 ^ uVar5;
  uVar1 = uVar7 & 0xffff;
  uVar6 = inputMatrix->R32R31 & 0xffff;
  uVar9 = inputMatrix->R32R31 ^ uVar6;
  uVar4 = uVar8 & 0xffff0000;
  uVar2 = uVar9 & 0xffff0000;
  outputMatrix->R12R11 = inputMatrix->R12R11 ^ uVar3 | uVar5;
  outputMatrix->R21R13 = (uVar7 | uVar3) ^ uVar1 | uVar6;
  outputMatrix->R23R22 = uVar8 ^ uVar4 | uVar2;
  outputMatrix->R32R31 = (uVar9 | uVar1) ^ uVar2 | uVar4;
  outputMatrix->R33 = iVar10;
  return;
}



void MatrixMultVector(Mat33 *inputMatrix,Vec3 *inputVector,Vec3 *outputVector)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  if (inputMatrix != (Mat33 *)0x0) {
    gte_ldR11R12(inputMatrix->R12R11);
    gte_ldR13R21(inputMatrix->R21R13);
    gte_ldR22R23(inputMatrix->R23R22);
    gte_ldR31R32(inputMatrix->R32R31);
    gte_ldR33(inputMatrix->R33);
  }
  gte_ldIR3(inputVector->x);
  gte_ldIR1(-inputVector->y);
  gte_ldIR2(-inputVector->z);
  gte_rtir();
  iVar1 = gte_stMAC3();
  iVar2 = gte_stMAC1();
  iVar3 = gte_stMAC2();
  outputVector->x = iVar1;
  outputVector->y = -iVar2;
  outputVector->z = -iVar3;
  return;
}



int VectorLength(Vec3 *vector,int third_dim)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  
  uVar1 = vector->x;
  uVar3 = vector->y;
  uVar4 = 0;
  if (third_dim != 0) {
    uVar4 = vector->z;
  }
  uVar5 = uVar1;
  if ((int)uVar1 < 0) {
    uVar5 = -uVar1;
  }
  uVar7 = uVar3;
  if ((int)uVar3 < 0) {
    uVar7 = -uVar3;
  }
  uVar8 = uVar4;
  if ((int)uVar4 < 0) {
    uVar8 = -uVar4;
  }
  gte_ldLZCS(uVar5 | uVar7 | uVar8);
  iVar6 = gte_stLZCR();
  uVar7 = 0x12 - iVar6;
  uVar5 = 0;
  if (0 < (int)uVar7) {
    uVar1 = (int)uVar1 >> (uVar7 & 0x1f);
    uVar3 = (int)uVar3 >> (uVar7 & 0x1f);
    uVar4 = (int)uVar4 >> (uVar7 & 0x1f);
    uVar5 = uVar7;
  }
  gte_ldsv_(uVar1,uVar3,uVar4);
  gte_sqr0(0);
  read_mt(uVar1,uVar3,uVar4);
  iVar6 = uVar1 + uVar3 + uVar4;
  gte_ldLZCS(iVar6);
  uVar1 = 0;
  if (iVar6 != 0) {
    uVar1 = gte_stLZCR();
    uVar3 = (uVar1 & 0xfe) - 0x18;
    iVar2 = iVar6 << (uVar3 & 0x1f);
    if ((int)uVar3 < 0) {
      iVar2 = iVar6 >> (-uVar3 & 0x1f);
    }
    uVar1 = (uint)((int)squareRootLookup[iVar2 + -0x40] << (0x1f - (uVar1 & 0xfe) >> 1 & 0x1f)) >>
            0xc;
    if (uVar1 != 0) {
      uVar1 = uVar1 + ((int)(iVar6 - uVar1 * uVar1) / (int)(uVar1 + 1) >> 1);
    }
  }
  return uVar1 << (uVar5 & 0x1f);
}



void VectorNormalize(Vec3 *vector,int param_2)

{
  int iVar1;
  code *UNRECOVERED_JUMPTABLE;
  
  iVar1 = VectorLength(vector,1);
  if (iVar1 != 0) {
    iVar1 = (param_2 << 0xf) / iVar1;
    vector->x = vector->x * iVar1 >> 0xf;
    vector->y = vector->y * iVar1 >> 0xf;
    vector->z = vector->z * iVar1 >> 0xf;
  }
                    // WARNING: Could not recover jumptable at 0x8001bba4. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)();
  return;
}



undefined4 FUN_8001bbac(int *param_1,int *param_2,int *param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int in_t4;
  int in_t5;
  
  iVar2 = param_2[1];
  iVar4 = param_2[2];
  iVar1 = *param_2 >> 4;
  iVar3 = iVar2 >> 4;
  iVar5 = iVar4 >> 4;
  iVar6 = *param_1;
  iVar7 = param_1[1];
  iVar8 = param_1[2];
  iVar10 = iVar7 * -0x10000;
  gte_ldR11R12((-iVar6 & 0xffffU) + iVar10);
  gte_ldR13R21(-iVar8);
  gte_ldsv_(iVar1,iVar3,iVar5);
  gte_rtir_sf0();
  iVar9 = gte_stMAC1();
  gte_ldsv_(iVar1,iVar3,iVar5);
  if (iVar9 < 0) {
    *param_3 = iVar6;
    param_3[1] = iVar7;
    param_3[2] = iVar8;
    return 0;
  }
  gte_sqr0_b(0);
  read_mt(iVar10,in_t4,in_t5);
  gte_ldsv_(iVar1,iVar3,iVar5);
  gte_ldIR0((iVar9 << 6) / (iVar10 + in_t4 + in_t5));
  gte_gpf0(0);
  read_mt(iVar1,iVar3,iVar5);
  *param_3 = (*param_2 >> 10) * 2 + iVar6;
  param_3[1] = (iVar2 >> 10) * 2 + iVar7;
  param_3[2] = (iVar4 >> 10) * 2 + iVar8;
  return 1;
}



void VectorScale(Vec3 *vector,int param_2,int param_3)

{
  int iVar1;
  
  if (param_2 != 0) {
    iVar1 = (param_3 << 0xf) / param_2;
    vector->x = vector->x * iVar1 >> 0xf;
    vector->y = vector->y * iVar1 >> 0xf;
    vector->z = vector->z * iVar1 >> 0xf;
  }
  return;
}



void VectorShiftUp(Vec3 *param_1,uint param_2)

{
  param_1->x = param_1->x << (param_2 & 0x1f);
  param_1->y = param_1->y << (param_2 & 0x1f);
  param_1->z = param_1->z << (param_2 & 0x1f);
  return;
}



void VectorShiftRight(Vec3 *vector,uint shift)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar1 = vector->x;
  iVar2 = vector->y;
  iVar3 = vector->z;
  iVar4 = iVar1 >> (shift & 0x1f);
  if (iVar1 < 0) {
    iVar4 = -(-iVar1 >> (shift & 0x1f));
  }
  iVar1 = iVar2 >> (shift & 0x1f);
  if (iVar2 < 0) {
    iVar1 = -(-iVar2 >> (shift & 0x1f));
  }
  iVar2 = iVar3 >> (shift & 0x1f);
  if (iVar3 < 0) {
    iVar2 = -(-iVar3 >> (shift & 0x1f));
  }
  vector->x = iVar4;
  vector->y = iVar1;
  vector->z = iVar2;
  return;
}



void VectorClear(Vec3 *vector)

{
  vector->x = 0;
  vector->y = 0;
  vector->z = 0;
  return;
}



void VectorCopy(Vec3 *to,Vec3 *from)

{
  int iVar1;
  int iVar2;
  
  iVar1 = from->y;
  iVar2 = from->z;
  to->x = from->x;
  to->y = iVar1;
  to->z = iVar2;
  return;
}



void VectorAdd(Vec3 *out,Vec3 *left,Vec3 *right)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar1 = left->y;
  iVar2 = left->z;
  iVar3 = right->y;
  iVar4 = right->z;
  out->x = left->x + right->x;
  out->y = iVar1 + iVar3;
  out->z = iVar2 + iVar4;
  return;
}



void VectorSubtract(Vec3 *out,Vec3 *left,Vec3 *right)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar1 = left->y;
  iVar2 = left->z;
  iVar3 = right->y;
  iVar4 = right->z;
  out->x = left->x - right->x;
  out->y = iVar1 - iVar3;
  out->z = iVar2 - iVar4;
  return;
}



void VectorMultByN(long *param_1,VECTOR *param_2,undefined4 param_3)

{
  gte_ldlvl(param_2);
  gte_ldIR0(param_3);
  gte_gpf0(0);
  gte_stlvnl0(param_1);
  gte_stMAC2();
  gte_stMAC3();
  return;
}



void VectorDivByN(int *param_1,int *param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar1 = param_2[1];
  iVar2 = param_2[2];
  *param_1 = *param_2 / param_3;
  param_1[1] = iVar1 / param_3;
  param_1[2] = iVar2 / param_3;
  return;
}



uint maybeAngularDistance256(int param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = param_1 - param_2 & 0xff;
  if (-1 < (int)(uVar1 - 0x80)) {
    uVar1 = 0x100 - uVar1;
  }
  return uVar1;
}



uint maybeAngularDistance4096(int param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = param_1 - param_2 & 0xfff;
  if (-1 < (int)(uVar1 - 0x800)) {
    uVar1 = 0x1000 - uVar1;
  }
  return uVar1;
}



uint maybeNegativeAngularDistance256(int param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = param_1 - param_2 & 0xff;
  if (0 < (int)(uVar1 - 0x80)) {
    return uVar1 - 0x100;
  }
  return uVar1;
}



uint maybeNegativeAngularDistance4096(int param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = param_1 - param_2 & 0xfff;
  if (0 < (int)(uVar1 - 0x800)) {
    return uVar1 - 0x1000;
  }
  return uVar1;
}



char maybeAngleCorrection(char param_1,char param_2,char param_3,int param_4)

{
  uint uVar1;
  
  uVar1 = (uint)(byte)(param_1 - param_2);
  if ((int)(uVar1 - 0x80) < 1) {
    if (-1 < (int)(uVar1 - param_4)) {
      return param_2 + param_3;
    }
  }
  else if ((int)((uVar1 - 0x100) + param_4) < 1) {
    return param_2 - param_3;
  }
  return param_2;
}



int Vec2OctagonalDistanceApproximation(Vec2 *v1,Vec2 *v2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar1 = v1->x - v2->x;
  iVar3 = v1->y - v2->y;
  if (iVar1 < 0) {
    iVar1 = -iVar1;
  }
  if (iVar3 < 0) {
    iVar3 = -iVar3;
  }
  iVar2 = iVar1;
  if (iVar1 - iVar3 < 0) {
    iVar2 = iVar3;
    iVar3 = iVar1;
  }
  return iVar2 + ((uint)(iVar3 * 3) >> 3);
}



uint maybeSquareRoot(int param_1)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  
  gte_ldLZCS(param_1);
  uVar2 = 0;
  if (param_1 != 0) {
    uVar2 = gte_stLZCR();
    uVar3 = (uVar2 & 0xfe) - 0x18;
    iVar1 = param_1 << (uVar3 & 0x1f);
    if ((int)uVar3 < 0) {
      iVar1 = param_1 >> (-uVar3 & 0x1f);
    }
    uVar2 = (uint)((int)squareRootLookup[iVar1 + -0x40] << (0x1f - (uVar2 & 0xfe) >> 1 & 0x1f)) >>
            0xc;
    if (uVar2 != 0) {
      uVar2 = uVar2 + ((int)(param_1 - uVar2 * uVar2) / (int)(uVar2 + 1) >> 1);
    }
  }
  return uVar2;
}



void FUN_8001c040(Vec3 *outputVector,Vec3 *param_2,uint param_3)

{
  int iVar1;
  int iVar2;
  
  gte_ldR11R12(Mat33_80067e84.R12R11);
  gte_ldR13R21(Mat33_80067e84.R21R13);
  gte_ldR22R23(Mat33_80067e84.R23R22);
  gte_ldR31R32(Mat33_80067e84.R32R31);
  gte_ldR33(Mat33_80067e84.R33);
  gte_ldtr(0,0,0);
  gte_ldVZ0(param_2->x - cameraPosition.x >> (param_3 & 0x1f));
  gte_ldVXY0(cameraPosition.y - param_2->y >> (param_3 & 0x1f) & 0xffffU |
             (cameraPosition.z - param_2->z >> (param_3 & 0x1f)) << 0x10);
  gte_rtps();
  iVar1 = gte_stSXY2();
  iVar2 = gte_stMAC3();
  outputVector->x = (int)(short)iVar1;
  outputVector->y = iVar1 >> 0x10;
  outputVector->z = iVar2 << (param_3 & 0x1f);
  return;
}



byte FUN_8001c0f4(int param_1,int param_2,int param_3)

{
  byte bVar1;
  
  bVar1 = param_1 < 1;
  if (-1 < param_1 + -0x200) {
    bVar1 = bVar1 | 2;
  }
  if (param_2 + -0xd < 0) {
    bVar1 = bVar1 | 4;
  }
  if (-1 < param_2 + -0xe4) {
    bVar1 = bVar1 | 8;
  }
  if (param_3 + -0x100 < 0) {
    bVar1 = bVar1 | 0x10;
  }
  return bVar1;
}



void VecIntToShort(VectorShort *param_1,Vec3 *param_2)

{
  int iVar1;
  int iVar2;
  
  iVar1 = param_2->y;
  iVar2 = param_2->z;
  param_1->X = (short)(param_2->x >> 2);
  param_1->Y = (short)(iVar1 >> 2);
  param_1->Z = (short)(iVar2 >> 2);
  return;
}



void VecShortToInt(Vec3 *param_1,VectorShort *param_2)

{
  ushort uVar1;
  ushort uVar2;
  
  uVar1 = param_2->Y;
  uVar2 = param_2->Z;
  param_1->x = (uint)(ushort)param_2->X << 2;
  param_1->y = (uint)uVar1 << 2;
  param_1->z = (uint)uVar2 << 2;
  return;
}



void CastVectorShortToVector(Vec3 *to,VectorShort *from)

{
  short sVar1;
  short sVar2;
  
  sVar1 = from->Y;
  sVar2 = from->Z;
  to->x = (int)from->X;
  to->y = (int)sVar1;
  to->z = (int)sVar2;
  return;
}



void VecIntToShort2(VectorShort *param_1,Vec3 *param_2)

{
  int iVar1;
  int iVar2;
  
  iVar1 = param_2->y;
  iVar2 = param_2->z;
  param_1->X = (short)param_2->x;
  param_1->Y = (short)iVar1;
  param_1->Z = (short)iVar2;
  return;
}



void CopyVectorShort(VectorShort *param_1,VectorShort *param_2)

{
  short sVar1;
  short sVar2;
  
  sVar1 = param_2->Y;
  sVar2 = param_2->Z;
  param_1->X = param_2->X;
  param_1->Y = sVar1;
  param_1->Z = sVar2;
  return;
}



void VectorShortAdd(short *param_1,short *param_2,short *param_3)

{
  short sVar1;
  short sVar2;
  short sVar3;
  short sVar4;
  
  sVar1 = param_2[1];
  sVar2 = param_2[2];
  sVar3 = param_3[1];
  sVar4 = param_3[2];
  *param_1 = *param_2 + *param_3;
  param_1[1] = sVar1 + sVar3;
  param_1[2] = sVar2 + sVar4;
  return;
}



void UnpackCollisionTriangle(int triangleIndex,Triangle *triangleVertices)

{
  Vec3 *pVVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  
  pVVar1 = &TerrainCollisionData->triangles->v1 + triangleIndex;
  uVar2 = pVVar1->x;
  uVar3 = pVVar1->y;
  uVar4 = pVVar1->z;
  uVar5 = uVar2 & 0x3fff;
  (triangleVertices->v1).x = uVar5 << 4;
  (triangleVertices->v2).x = (((int)(uVar2 << 9) >> 0x17) + uVar5) * 0x10;
  (triangleVertices->v3).x = (((int)uVar2 >> 0x17) + uVar5) * 0x10;
  uVar2 = uVar3 & 0x3fff;
  (triangleVertices->v1).y = uVar2 << 4;
  (triangleVertices->v2).y = (((int)(uVar3 << 9) >> 0x17) + uVar2) * 0x10;
  (triangleVertices->v3).y = (((int)uVar3 >> 0x17) + uVar2) * 0x10;
  uVar2 = uVar4 & 0x3fff;
  (triangleVertices->v1).z = uVar2 << 4;
  (triangleVertices->v2).z = (((uVar4 << 8) >> 0x18) + uVar2) * 0x10;
  (triangleVertices->v3).z = ((uVar4 >> 0x18) + uVar2) * 0x10;
  return;
}



undefined2 maybeReadSysClock(void)

{
  return (undefined2)TMR_SYSCLOCK_VAL;
}



undefined4 FUN_8001c2e8(void)

{
  return 0x40000000;
}



void FUN_8001c2f8(VectorShort *param_1,undefined4 param_2,undefined4 param_3)

{
  short sVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  short sVar5;
  MATRIX *m0;
  code *UNRECOVERED_JUMPTABLE;
  undefined4 uVar6;
  code *unaff_retaddr;
  
  DAT_8006a9ec = param_2;
  DAT_8006a9f0 = param_3;
  DAT_8006a9f4 = unaff_retaddr;
  MEMSET((int *)&DAT_1f800000,0,0x3c);
  iVar2 = (int)param_1->X;
  iVar3 = (int)param_1->Y;
  iVar4 = (int)param_1->Z;
  sVar5 = 0x1000;
  m0 = (MATRIX *)&DAT_1f800000;
  sVar1 = cosineLookup(iVar3);
  m0->m[1][1] = sVar1;
  m0->m[2][2] = sVar1;
  sVar1 = sineLookup(iVar3);
  m0->m[2][1] = sVar1;
  m0->m[1][2] = -sVar1;
  m0->m[0] = sVar5;
  sVar1 = cosineLookup(iVar4);
  *(short *)m0->t = sVar1;
  m0[1].m[2] = sVar1;
  sVar1 = sineLookup(iVar4);
  *(short *)(m0->t + 1) = sVar1;
  m0[1].m[0] = -sVar1;
  *(short *)(m0->t + 2) = sVar5;
  sVar1 = cosineLookup(iVar2);
  m0[1].m[1][1] = sVar1;
  m0[1].m[2][2] = sVar1;
  sVar1 = sineLookup(iVar2);
  m0[1].m[1][2] = sVar1;
  m0[1].m[2][1] = -sVar1;
  *(short *)(m0[1].t + 1) = sVar5;
  MulMatrix0(m0,(MATRIX *)m0->t,(MATRIX *)(m0[1].t + 2));
  MulMatrix0((MATRIX *)&DAT_1f800028,(MATRIX *)&DAT_1f80003c,(MATRIX *)&DAT_1f800000);
  UNRECOVERED_JUMPTABLE = DAT_8006a9f4;
  uVar6 = DAT_8006a9f0;
  MemCopy(DAT_8006a9ec,0x1f800000,0x14);
  DAT_1f800006 = (short)(DAT_1f800006 * 0x140 >> 9);
  DAT_1f800008 = (short)(DAT_1f800008 * 0x140 >> 9);
  DAT_1f80000a = (short)(DAT_1f80000a * 0x140 >> 9);
  MemCopy(uVar6,0x1f800000,0x14);
                    // WARNING: Could not recover jumptable at 0x8001c44c. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)();
  return;
}



void FUN_8001c454(short *param_1,short *param_2,int param_3,int param_4)

{
  uint uVar1;
  short *psVar2;
  short sVar3;
  short *psVar4;
  short *psVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  
  psVar5 = (short *)(param_3 + (int)param_2);
  sVar3 = *param_1;
  param_1 = param_1 + 1;
  do {
    uVar1 = (int)sVar3 & 0xff;
    if (uVar1 != 0) {
      psVar2 = param_2 + uVar1;
      psVar4 = param_2;
      do {
        param_2 = psVar4 + 1;
        *psVar4 = 0;
        psVar4 = param_2;
      } while (param_2 != psVar2);
    }
    uVar1 = (int)sVar3 & 0xff00;
    if (uVar1 != 0) {
      psVar2 = (short *)((uVar1 >> 7) + (int)param_2);
      psVar4 = param_2;
      if (param_4 < 1) {
        do {
          param_2 = psVar4 + 1;
          *psVar4 = *param_1;
          param_1 = param_1 + 1;
          psVar4 = param_2;
        } while (param_2 != psVar2);
      }
      else {
        do {
          uVar1 = (uint)*param_1;
          param_2 = psVar4 + 1;
          iVar6 = (uVar1 & 0x1f) - param_4;
          if (iVar6 < 0) {
            iVar6 = 0;
          }
          iVar7 = (uVar1 & 0x3e0) + param_4 * -0x20;
          if (iVar7 < 0) {
            iVar7 = 0;
          }
          iVar8 = (uVar1 & 0x7c00) + param_4 * -0x400;
          sVar3 = (short)iVar6 + (short)iVar7;
          if (-1 < iVar8) {
            sVar3 = sVar3 + (short)iVar8;
          }
          *psVar4 = sVar3;
          param_1 = param_1 + 1;
          psVar4 = param_2;
        } while (param_2 != psVar2);
      }
    }
    sVar3 = *param_1;
    param_1 = param_1 + 1;
  } while (param_2 != psVar5);
  return;
}



void FUN_8001c510(ModelSet *param_1)

{
  int iVar1;
  uint *puVar2;
  uint **ppuVar3;
  int iVar4;
  
  ppuVar3 = (uint **)&param_1[2].field3_0xc;
  iVar1 = (int)&param_1->modelCount + param_1[2].field2_0x8;
  iVar4 = 0;
  DAT_80066edc = iVar1;
  DAT_80066f24 = ppuVar3;
  objectModels[0] = param_1;
  if (0 < param_1->modelCount) {
    do {
      puVar2 = (uint *)((int)&param_1->modelCount + (int)*ppuVar3);
      if (*ppuVar3 != (uint *)0xffffffff) {
        *ppuVar3 = puVar2;
        puVar2[1] = iVar1 + puVar2[1];
        (*ppuVar3)[2] = iVar1 + (*ppuVar3)[2];
        (*ppuVar3)[3] = iVar1 + (*ppuVar3)[3];
        (*ppuVar3)[4] = iVar1 + (*ppuVar3)[4];
      }
      iVar4 = iVar4 + 1;
      ppuVar3 = ppuVar3 + 1;
    } while (iVar4 < objectModels[0]->modelCount);
  }
  return;
}



void FUN_8001c5ec(void)

{
  byte **ppbVar1;
  int iVar2;
  
  if (DAT_800681c4 != (byte *)0x0) {
    clearColor.Red = *DAT_800681c4;
    clearColor.Green = DAT_800681c4[1];
    clearColor.Blue = DAT_800681c4[2];
    DAT_800681b8 = *(int *)(DAT_800681c4 + 4);
    ppbVar1 = (byte **)(DAT_800681c4 + 8);
    iVar2 = 0;
    DAT_800681bc = ppbVar1;
    if (0 < DAT_800681b8) {
      do {
        iVar2 = iVar2 + 1;
        *ppbVar1 = DAT_800681c4 + (int)*ppbVar1;
        ppbVar1 = ppbVar1 + 1;
      } while (iVar2 < DAT_800681b8);
    }
    DAT_800681c4 = (byte *)0x0;
  }
  return;
}



void FUN_8001c68c(int param_1)

{
  DAT_80066f18 = param_1;
  DAT_80066fd8 = param_1;
  *(undefined *)(param_1 + 1) = 0xff;
  *(undefined4 *)(DAT_80066f18 + 0x2000) = 0xffffffff;
  MEMSET(&DAT_80068078,0,0x140);
  MEMSET(&DAT_80067d00,0,0x100);
  MEMSET(&DAT_8006b400,0,0x180);
  MEMSET(&DAT_8006a2b4,0,0x600);
  MEMSET(&DAT_80069f30,0,0xa0);
  return;
}



int * OnWorldEnter(Vec3 *param_1)

{
  byte *pbVar1;
  bool bVar2;
  undefined *puVar3;
  int *piVar4;
  int iVar5;
  int *piVar6;
  uint uVar7;
  SpyroState newSpyroState;
  Orbit *orbitPosition;
  int iVar8;
  uint uVar9;
  int *piVar10;
  int iVar11;
  Vec3 aVStack_90 [8];
  
  iVar11 = 0;
  worldsEntered[g_currLevelID] = true;
  clock = 0;
  DAT_80067008 = 0;
  DAT_80067100 = 0;
  DAT_8006701c = 0;
  popupLevelCompleteSequenceTime = 0;
  if (((inHomeWorld != 0) && (worldGemsCollectedValue[g_currLevelID] == 400)) &&
     (orbsCollectedFlags[g_currLevelID] == (&orbsOfWorldsFlags)[g_currLevelID])) {
    popupLevelCompleteSequenceTime = 0x96;
  }
  iVar8 = 9;
  puVar3 = &DAT_8006ac01;
  riptoHPClone_ = 0;
  DAT_80067084 = 0;
  DAT_80067088 = 0;
  DAT_8006708c = 0;
  DAT_80066f30 = 0;
  SpiritParticles = 0;
  DAT_80066efc = 0;
  DAT_80066f50 = 0;
  DAT_80067038 = 0;
  DAT_800670f4 = 0;
  do {
    *puVar3 = 0;
    iVar8 = iVar8 + -1;
    puVar3 = puVar3 + -1;
  } while (-1 < iVar8);
  DAT_80066f5c = 0xffffffff;
  Spyro.rotation.Roll = 0;
  Spyro.rotation.Pitch = 0;
  if (checkpointStorage.checkpointSaved == 0) {
    if ((DAT_800698bd != '\0') && (currentLoadedLevel == DRAGON_SHORES)) {
      Spyro.position.y = 0x15670;
      Spyro.position.z = 0x5c64;
      Spyro.position.x = 0x17466;
      Spyro.rotation.Yaw = 0xf28;
      DAT_800698bd = '\0';
      goto LAB_8001cab4;
    }
    if (DAT_80067024 == 0) {
switchD_8001c988_caseD_e:
      VectorCopy(&Spyro.position,param_1);
      Spyro.rotation.Yaw = (uint)*(byte *)((int)&param_1[1].x + 2) << 4;
    }
    else {
      switch(currentLoadedLevel) {
      case COLOSSUS:
        Spyro.position.y = 0x1d283;
        Spyro.position.z = 0x4486;
        Spyro.position.x = 0x1d270;
        Spyro.rotation.Yaw = 3999;
        break;
      default:
        goto switchD_8001c988_caseD_e;
      case SKELOS_BADLANDS:
        Spyro.position.y = 0x165b5;
        Spyro.position.z = 0x7367;
        Spyro.position.x = 0x12090;
        Spyro.rotation.Yaw = 0x460;
        break;
      case SCORCH:
        Spyro.position.y = 0x10b58;
        Spyro.position.z = 0x2c6a;
        Spyro.position.x = 0x1784f;
        Spyro.rotation.Yaw = 0x625;
        break;
      case CLOUD_TEMPLES:
        Spyro.position.x = 0x18acb;
        Spyro.position.y = 0x6256;
        Spyro.position.z = 0x5966;
        Spyro.rotation.Yaw = 0x3d7;
        break;
      case METROPOLIS:
        Spyro.position.y = 0x1c405;
        Spyro.position.z = 0x996b;
        Spyro.position.x = 0x1d1b5;
        Spyro.rotation.Yaw = 0xda0;
      }
    }
LAB_8001cab4:
    VectorCopy(&Spyro.field76_0x12c,&Spyro.position);
    if (lives < 0) {
      if (currentLoadedLevel != GLIMMER) goto LAB_8001cb1c;
LAB_8001cba4:
      if (lives < 0) {
        lives = 4;
      }
    }
    else if ((currGameState == FadeIn) && (DAT_800698fc != 0)) {
LAB_8001cb1c:
      VecShortToInt(&Spyro.position,
                    (VectorShort *)((uint)(byte)(&DAT_80064b1c)[DAT_80066fd0] * 8 + -0x7ff9b4c4));
      VecShortToInt(&Spyro.field76_0x12c,
                    (VectorShort *)((uint)(byte)(&DAT_80064b1c)[DAT_80066fd0] * 8 + -0x7ff9b4c4));
      Spyro.rotation.Yaw =
           (int)*(short *)(&DAT_80064b42 + (uint)(byte)(&DAT_80064b1c)[DAT_80066fd0] * 8);
      goto LAB_8001cba4;
    }
    DAT_80066fd0 = 0;
  }
  else {
    VectorCopy(&Spyro.position,&checkpointStorage.spawnPosition);
    VectorCopy(&Spyro.field76_0x12c,&checkpointStorage.spawnPosition);
    Spyro.rotation.Yaw = checkpointStorage.spawnYaw;
  }
  DAT_80066ed8 = param_1[1].y;
  MEMSET(&Vec3_8006aa1c.x,0,0x130);
  DAT_8006aa2c = param_1[1].z;
  DAT_8006aa30 = param_1[2].x;
  DAT_8006820c = param_1[2].y;
  iVar8 = 0;
  DAT_80068210 = param_1[2].z;
  piVar10 = &param_1[3].z;
  DAT_80066fdc = param_1[3].x;
  DAT_80066fe0 = param_1[3].y;
  piVar6 = &param_1[4].y;
  DAT_800681d4 = param_1[4].x;
  DAT_800681d8 = piVar6;
  if (0 < DAT_800681d4) {
    do {
      iVar8 = iVar8 + 1;
      *piVar6 = (int)piVar10 + *piVar6 + 4;
      piVar6 = piVar6 + 1;
    } while (iVar8 < DAT_800681d4);
  }
  iVar8 = 0;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  DAT_800681dc = piVar10[1];
  piVar6 = piVar10 + 2;
  DAT_800681e0 = piVar6;
  if (0 < DAT_800681dc) {
    do {
      iVar8 = iVar8 + 1;
      *piVar6 = (int)piVar10 + *piVar6 + 4;
      piVar6 = piVar6 + 1;
    } while (iVar8 < DAT_800681dc);
  }
  iVar8 = 0;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  DAT_800681f4 = piVar10[1];
  piVar6 = piVar10 + 2;
  DAT_800681f8 = piVar6;
  if (0 < DAT_800681f4) {
    do {
      iVar8 = iVar8 + 1;
      *piVar6 = (int)piVar10 + *piVar6 + 4;
      piVar6 = piVar6 + 1;
    } while (iVar8 < DAT_800681f4);
  }
  iVar8 = 0;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  DAT_800681e4 = piVar10[1];
  piVar6 = piVar10 + 2;
  DAT_800681e8 = piVar6;
  if (0 < DAT_800681e4) {
    do {
      iVar8 = iVar8 + 1;
      *piVar6 = (int)piVar10 + *piVar6 + 4;
      piVar6 = piVar6 + 1;
    } while (iVar8 < DAT_800681e4);
  }
  iVar8 = 0;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  DAT_80068204 = piVar10[1];
  piVar6 = piVar10 + 2;
  DAT_80068208 = piVar6;
  if (0 < DAT_80068204) {
    do {
      iVar8 = iVar8 + 1;
      *piVar6 = (int)piVar10 + *piVar6 + 4;
      piVar6 = piVar6 + 1;
    } while (iVar8 < DAT_80068204);
  }
  iVar8 = 0;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  DAT_800681fc = piVar10[1];
  piVar6 = piVar10 + 2;
  DAT_80068200 = piVar6;
  if (0 < DAT_800681fc) {
    do {
      iVar8 = iVar8 + 1;
      *piVar6 = (int)piVar10 + *piVar6 + 4;
      piVar6 = piVar6 + 1;
    } while (iVar8 < DAT_800681fc);
  }
  iVar8 = 0;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  DAT_800681ec = piVar10[1];
  piVar6 = piVar10 + 2;
  DAT_800681f0 = piVar6;
  if (0 < DAT_800681ec) {
    do {
      iVar8 = iVar8 + 1;
      *piVar6 = (int)piVar10 + *piVar6 + 4;
      piVar6 = piVar6 + 1;
    } while (iVar8 < DAT_800681ec);
  }
  piVar10 = (int *)((int)piVar10 + *piVar10);
  FUN_800231f4();
  DAT_80066f20 = piVar10 + 1;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  Objects = (Object *)(piVar10 + 2);
  iVar8 = *piVar10;
  DAT_80066fd4 = piVar10 + piVar10[1] * 0x16 + 2;
  DAT_800670bc = DAT_80066fd4;
  *(undefined *)(DAT_80066fd4 + 0x12) = 0xff;
  piVar10 = (int *)((int)piVar10 + iVar8);
  iVar8 = (int)((ulonglong)((uint)((int)piVar10 - (int)DAT_800670bc) >> 4) * 0x24924926 >> 0x20);
  DAT_80066f3c = 0;
  DAT_80066f40 = iVar8 + -1;
  DAT_80066fb4 = DAT_800670bc + iVar8 * 0x16;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  DAT_80066f4c = piVar10[1];
  DAT_800670e0 = piVar10 + 2;
  iVar8 = DAT_80066f4c + -1;
  DAT_800670d8 = DAT_80066fb4;
  if (-1 < iVar8) {
    piVar6 = DAT_800670e0 + iVar8;
    do {
      iVar8 = iVar8 + -1;
      *piVar6 = *piVar6 + (int)piVar10;
      piVar6 = piVar6 + -1;
    } while (-1 < iVar8);
  }
  iVar8 = 0;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  piVar6 = piVar10 + 1;
  if (0 < *piVar10) {
    do {
      piVar4 = (int *)((int)&param_1->x + *piVar6);
      iVar8 = iVar8 + 1;
      *piVar4 = (int)&param_1->x + *piVar4;
      piVar6 = piVar6 + 1;
    } while (iVar8 < *piVar10);
  }
  if (DAT_80067024 != 0) {
    MemCopy(piVar10 + 0xc01,piVar6,*piVar6 << 3 | 4);
  }
  DAT_80067174 = piVar10;
  MEMSET(piVar10,0,0x1000);
  uVar9 = 0;
  if (Objects->state != 0xff) {
    iVar8 = 0;
    do {
      bVar2 = true;
      iVar5 = (int)*(short *)((int)&Objects->type + iVar8);
      if ((iVar5 < 0x300) && (objectModels[iVar5] != (ModelSet *)0x0)) {
        FUN_80041438();
      }
      else {
        FUN_80041524((int)&Objects->data + iVar8);
      }
      uVar7 = (uint)(&Objects->heldGemValue)[iVar8];
      if ((((1 < uVar7 - 1) && (uVar7 != 5)) && (uVar7 != 10)) && (uVar7 != 0x19)) {
        uVar7 = 0;
      }
      (&Objects->subType)[iVar8] = 0xff;
      if ((&Objects->field_0x3b)[iVar8] == '~') {
        bVar2 = true;
      }
      else if ((&Objects->field_0x3b)[iVar8] == '}') {
        if (((int)uVar9 < 0x100) &&
           (((int)collectedFlags[g_currLevelID][(int)uVar9 >> 5] >> (uVar9 & 0x1f) & 1U) != 0)) {
          bVar2 = false;
          iVar11 = iVar11 + uVar7;
        }
      }
      else if (((checkpointStorage.checkpointSaved != 0) && ((int)uVar9 < 0x100)) &&
              ((*(int *)(&checkpointStorage.unkBlock32 + ((int)uVar9 >> 5) * 4) >> (uVar9 & 0x1f) &
               1U) != 0)) {
        bVar2 = false;
      }
      if (bVar2) {
        VectorCopy(aVStack_90,(Vec3 *)((int)&(Objects->position).x + iVar8));
        aVStack_90[0].z = aVStack_90[0].z + 0x400;
        FUN_8003ee3c(aVStack_90,0x10000,0,(int)&Objects->data + iVar8);
        FUN_80041ab8((int)&Objects->data + iVar8);
        if ((&Objects->field_0x52)[iVar8] == '\0') {
          (&Objects->field_0x52)[iVar8] = 0xff;
        }
        else {
          (&Objects->field_0x52)[iVar8] = (char)DAT_8006ab98;
        }
        (&Objects->isShown)[iVar8] = true;
      }
      else {
        FUN_8004132c((int)&Objects->data + iVar8);
        DAT_80066efc = SpiritParticles + ((byte)(&Objects->field_0x53)[iVar8] & 0x7f);
        SpiritParticles = DAT_80066efc;
      }
      pbVar1 = &Objects[1].state + iVar8;
      uVar9 = uVar9 + 1;
      iVar8 = iVar8 + 0x58;
    } while (*pbVar1 != 0xff);
  }
  if ((iVar11 != worldGemsCollectedValue[g_currLevelID]) && ((int)currentLoadedLevel % 10 < 5)) {
    FUN_80054280();
    gemsCollectedNetValue =
         gemsCollectedNetValue + (iVar11 - worldGemsCollectedValue[g_currLevelID]);
    if (gemsCollectedNetValue < 0) {
      gemsCollectedNetValue = 0;
    }
    worldGemsCollectedValue[g_currLevelID] = iVar11;
  }
  if (checkpointStorage.checkpointSaved != 0) {
    FUN_8004c31c();
    if (checkpointStorage.swimFlag == 1) {
      newSpyroState = WaterIdle;
    }
    else {
      if (checkpointStorage.swimFlag != 2) goto LAB_8001d3dc;
      newSpyroState = UnderwaterIdle;
    }
    SetSpyroState(newSpyroState);
  }
LAB_8001d3dc:
  FUN_8001c68c(DAT_80067174 + 0x400);
  DAT_8006b298 = DAT_80066f18 + 0x2004;
  if (DAT_80067024 != 0) {
    srand(0x4d2);
    DAT_80067044 = 1;
    if (DAT_80067024 == 1) {
      DAT_80066f28 = DAT_8006b298;
      DAT_80066f04 = DAT_8006b298 + 4;
    }
    else {
      DAT_80066f28 = -0x7fa00000;
      DAT_80066f04 = -0x7f9ffffc;
      MEMSET((int *)0x80600000,0,0x4000);
    }
  }
  if ((DAT_800670b4 == (code *)0x0) || (-1 < inSpeedwayFlag)) {
    DAT_80067028 = 0;
  }
  else {
    DAT_80067028 = (*DAT_800670b4)(0x78,0);
  }
  orbitPosition = &Orbit_80061560;
  if (-1 < inSpeedwayFlag) {
    orbitPosition = &Orbit_800615c4;
  }
  ApplyCameraOrbit(orbitPosition);
  DAT_80067ec4 = 0;
                    // WARNING (jumptable): Read-only address (ram,0x80069941) is written
                    // WARNING: Read-only address (ram,0x80069941) is written
  doubleFrameBuffer[0].drawEnvironment.r0 = clearColor.Red;
                    // WARNING (jumptable): Read-only address (ram,0x80069942) is written
                    // WARNING: Read-only address (ram,0x80069942) is written
  doubleFrameBuffer[0].drawEnvironment.g0 = clearColor.Green;
                    // WARNING (jumptable): Read-only address (ram,0x80069943) is written
                    // WARNING: Read-only address (ram,0x80069943) is written
  doubleFrameBuffer[0].drawEnvironment.b0 = clearColor.Blue;
                    // WARNING (jumptable): Read-only address (ram,0x800699b5) is written
                    // WARNING: Read-only address (ram,0x800699b5) is written
  doubleFrameBuffer[1].drawEnvironment.r0 = clearColor.Red;
                    // WARNING (jumptable): Read-only address (ram,0x800699b6) is written
                    // WARNING: Read-only address (ram,0x800699b6) is written
  doubleFrameBuffer[1].drawEnvironment.g0 = clearColor.Green;
                    // WARNING (jumptable): Read-only address (ram,0x800699b7) is written
                    // WARNING: Read-only address (ram,0x800699b7) is written
  doubleFrameBuffer[1].drawEnvironment.b0 = clearColor.Blue;
  MEMSET(&DAT_8006b300,0x3030303,0x100);
  if (ptrUpdateWorld != (code *)0x0) {
    (*ptrUpdateWorld)();
  }
  InitHUDDisplay();
  if (((inHomeWorld == 0) && (currentLoadedLevel != DRAGON_SHORES)) && (DAT_80066fa8 != 0)) {
    *(undefined *)(DAT_80066f00 + 0x40) = 0;
  }
  return piVar10;
}



void FUN_8001d5fc(int param_1,int param_2)

{
  int iVar1;
  int *piVar2;
  
  DAT_80067068 = param_1 + 0x104;
  audioBank = param_1;
  if ((param_2 != 0) && (iVar1 = *(int *)(param_1 + 0x100) + -1, -1 < iVar1)) {
    piVar2 = (int *)(iVar1 * 0x14 + DAT_80067068);
    do {
      iVar1 = iVar1 + -1;
      *piVar2 = *piVar2 + 0x1010;
      piVar2 = piVar2 + -5;
    } while (-1 < iVar1);
  }
  return;
}



void FUN_8001d658(void)

{
  int iVar1;
  
  iVar1 = FUN_80013690();
  if (iVar1 == 0) {
    switch(loadingStatus) {
    case 0:
      FUN_80013918(DAT_800682d8,&DAT_8006d264,DAT_800676e4,DAT_800676e0);
      DAT_800670c4 = DAT_800676e4;
      break;
    case 1:
    case 2:
    case 3:
    case 4:
    case 5:
    case 6:
      FUN_80070498();
      break;
    case 8:
      if (currGameState != Pause) {
        FUN_8004d158((uint)(byte)(&DAT_80061bb8)[g_currLevelID] << 10);
        FUN_8001c5ec();
      }
      FUN_80013918(DAT_800682d8,DAT_8006b284,*(undefined4 *)(&DAT_8006774c + g_currLevelID * 0x10),
                   *(undefined4 *)(&DAT_80067748 + g_currLevelID * 0x10));
      break;
    case 9:
      if (currGameState != Pause) {
        DAT_800670d0 = worldGemsCollectedValue[g_currLevelID];
        gemCollectedPhysicalCount = 0;
      }
      loadingStatus = -1;
    }
    if (-1 < loadingStatus) {
      loadingStatus = loadingStatus + 1;
    }
  }
  return;
}



void FUN_8001d7e8(void)

{
  FUN_80013810(DAT_800682d8,&DAT_801ae800,DAT_800676dc,DAT_800676d8);
  DAT_8006b2ac = (int)&DAT_801ff800 - DAT_801ae800;
  FUN_8001b460(DAT_8006b2ac,&DAT_801af000);
  FUN_8001c510(DAT_8006b2ac + DAT_801ae804 + -0x800);
  FUN_80011dd4();
  return;
}



void UpdateCamera(void)

{
  UpdateCameraTransform();
  FUN_80021dc0();
  return;
}



void UpdateCameraTransform(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  
  UpdateCameraState();
  if (DAT_80067fc9 == '\0') {
    iVar6 = 0;
    if (0 < deltaTime) {
      do {
        iVar6 = iVar6 + 1;
        FUN_80021558();
      } while (iVar6 < deltaTime);
    }
    FUN_8001e204();
    FUN_8001e270();
  }
  else {
    VectorCopy(&cameraPosition,&Vec3_80068064);
    VectorShort_80067ec8.X = DAT_80068070;
    VectorShort_80067ec8.Y = DAT_80068072;
    VectorShort_80067ec8.Z = DAT_80068074;
  }
  iVar6 = cameraOrbitVelocity.Longitude;
  if (cameraOrbitVelocity.Longitude < 0) {
    iVar6 = -cameraOrbitVelocity.Longitude;
  }
  iVar1 = cameraOrbitVelocity.Latitude;
  if (cameraOrbitVelocity.Latitude < 0) {
    iVar1 = -cameraOrbitVelocity.Latitude;
  }
  iVar3 = cameraOrbitVelocity.Radius;
  if (cameraOrbitVelocity.Radius < 0) {
    iVar3 = -cameraOrbitVelocity.Radius;
  }
  iVar2 = cameraOrbitVelocity.Pitch;
  if (cameraOrbitVelocity.Pitch < 0) {
    iVar2 = -cameraOrbitVelocity.Pitch;
  }
  iVar4 = cameraOrbitVelocity.Yaw;
  if (cameraOrbitVelocity.Yaw < 0) {
    iVar4 = -cameraOrbitVelocity.Yaw;
  }
  DAT_80067fb4 = iVar6 + iVar1 + iVar3 + iVar2 + iVar4;
  if (DAT_8006805c == 0) {
    DAT_80068060 = 0;
  }
  else {
    if (DAT_80068060 < DAT_8006805c) {
      DAT_80068060 = DAT_8006805c;
    }
    DAT_8006805c = DAT_8006805c - deltaTime;
    if (DAT_8006805c < 0) {
      DAT_8006805c = 0;
    }
    iVar6 = DAT_80068058 * DAT_8006805c * ((DAT_80067008 & 2) - 1);
    if (DAT_80068060 == 0) {
      trap(0x1c00);
    }
    if ((DAT_80068060 == -1) && (iVar6 == -0x80000000)) {
      trap(0x1800);
    }
    cameraPosition.z = cameraPosition.z + (iVar6 / DAT_80068060 >> 6);
  }
  if (DAT_80067ee0 != '\0') {
    uVar5 = (Orbit_80067f00.Longitude - Spyro.rotation.Yaw) - 0x800U & 0xfff;
    if (0x800 < uVar5) {
      uVar5 = uVar5 - 0x1000;
    }
    if ((int)uVar5 < 0) {
      uVar5 = -uVar5;
    }
    if ((((int)uVar5 < 0x40) || (cameraRotateInput != 0)) || (DAT_80067fc8 != '\0')) {
      DAT_80067ee0 = '\0';
    }
  }
  return;
}



void FUN_8001db58(void)

{
  int iVar1;
  
  iVar1 = cameraRotateInput;
  if (cameraRotateInput == 0) {
    cameraOrbitAcceleration.Longitude =
         Orbit_80067f14.Longitude - cameraOrbitPosition.Longitude & 0xfff;
    iVar1 = cameraOrbitAcceleration.Longitude - 0x1000;
    if ((uint)cameraOrbitAcceleration.Longitude < 0x801) goto LAB_8001dba4;
  }
  cameraOrbitAcceleration.Longitude = iVar1;
LAB_8001dba4:
  cameraOrbitAcceleration.Latitude = Orbit_80067f14.Latitude - cameraOrbitPosition.Latitude & 0xfff;
  cameraOrbitAcceleration.Radius = Orbit_80067f14.Radius - cameraOrbitPosition.Radius;
  if (0x800 < (uint)cameraOrbitAcceleration.Latitude) {
    cameraOrbitAcceleration.Latitude = cameraOrbitAcceleration.Latitude - 0x1000;
  }
  cameraOrbitAcceleration.Pitch = Orbit_80067f14.Pitch - cameraOrbitPosition.Pitch & 0xfff;
  if (0x800 < (uint)cameraOrbitAcceleration.Pitch) {
    cameraOrbitAcceleration.Pitch = cameraOrbitAcceleration.Pitch - 0x1000;
  }
  cameraOrbitAcceleration.Yaw = Orbit_80067f14.Yaw - cameraOrbitPosition.Yaw & 0xfff;
  if (0x800 < (uint)cameraOrbitAcceleration.Yaw) {
    cameraOrbitAcceleration.Yaw = cameraOrbitAcceleration.Yaw - 0x1000;
  }
  return;
}



void UpdateCameraOrbitPhysics(void)

{
  int iVar1;
  
  cameraOrbitVelocity.Longitude =
       cameraOrbitVelocity.Longitude +
       (cameraOrbitAcceleration_Scale.Longitude * cameraOrbitAcceleration.Longitude -
        cameraOrbitDrag.Longitude * cameraOrbitVelocity.Longitude >> 6);
  iVar1 = cameraOrbitVelocity.Longitude;
  if (cameraOrbitVelocity.Longitude < 0) {
    iVar1 = -cameraOrbitVelocity.Longitude;
  }
  if (iVar1 < Orbit_80067f8c.Longitude) {
    cameraOrbitVelocity.Longitude = cameraOrbitAcceleration.Longitude << 7;
    if (0x100 < cameraOrbitAcceleration.Longitude << 7) {
      cameraOrbitVelocity.Longitude = 0x100;
    }
    if (cameraOrbitVelocity.Longitude < -0x100) {
      cameraOrbitVelocity.Longitude = -0x100;
    }
  }
  if (-1 < Orbit_80067fa0.Longitude) {
    if (cameraOrbitVelocity.Longitude < Orbit_80067fa0.Longitude * -0x100) {
      cameraOrbitVelocity.Longitude = Orbit_80067fa0.Longitude * -0x100;
    }
    if (Orbit_80067fa0.Longitude << 8 < cameraOrbitVelocity.Longitude) {
      cameraOrbitVelocity.Longitude = Orbit_80067fa0.Longitude << 8;
    }
  }
  cameraOrbitPosition.Longitude =
       cameraOrbitPosition.Longitude + (cameraOrbitVelocity.Longitude >> 8) & 0xfff;
  if (0x800 < (uint)cameraOrbitPosition.Longitude) {
    cameraOrbitPosition.Longitude = cameraOrbitPosition.Longitude - 0x1000;
  }
  cameraOrbitVelocity.Latitude =
       cameraOrbitVelocity.Latitude +
       (cameraOrbitAcceleration_Scale.Latitude * cameraOrbitAcceleration.Latitude -
        cameraOrbitDrag.Latitude * cameraOrbitVelocity.Latitude >> 6);
  iVar1 = cameraOrbitVelocity.Latitude;
  if (cameraOrbitVelocity.Latitude < 0) {
    iVar1 = -cameraOrbitVelocity.Latitude;
  }
  if (iVar1 < Orbit_80067f8c.Latitude) {
    cameraOrbitVelocity.Latitude = cameraOrbitAcceleration.Latitude << 7;
    if (0x100 < cameraOrbitAcceleration.Latitude << 7) {
      cameraOrbitVelocity.Latitude = 0x100;
    }
    if (cameraOrbitVelocity.Latitude < -0x100) {
      cameraOrbitVelocity.Latitude = -0x100;
    }
  }
  if (-1 < Orbit_80067fa0.Latitude) {
    if (cameraOrbitVelocity.Latitude < Orbit_80067fa0.Latitude * -0x100) {
      cameraOrbitVelocity.Latitude = Orbit_80067fa0.Latitude * -0x100;
    }
    if (Orbit_80067fa0.Latitude << 8 < cameraOrbitVelocity.Latitude) {
      cameraOrbitVelocity.Latitude = Orbit_80067fa0.Latitude << 8;
    }
  }
  cameraOrbitPosition.Latitude =
       cameraOrbitPosition.Latitude + (cameraOrbitVelocity.Latitude >> 8) & 0xfff;
  if (0x800 < (uint)cameraOrbitPosition.Latitude) {
    cameraOrbitPosition.Latitude = cameraOrbitPosition.Latitude - 0x1000;
  }
  cameraOrbitVelocity.Radius =
       cameraOrbitVelocity.Radius +
       (cameraOrbitAcceleration_Scale.Radius * cameraOrbitAcceleration.Radius -
        cameraOrbitDrag.Radius * cameraOrbitVelocity.Radius >> 6);
  iVar1 = cameraOrbitVelocity.Radius;
  if (cameraOrbitVelocity.Radius < 0) {
    iVar1 = -cameraOrbitVelocity.Radius;
  }
  if (iVar1 < Orbit_80067f8c.Radius) {
    cameraOrbitVelocity.Radius = cameraOrbitAcceleration.Radius << 7;
    if (0x100 < cameraOrbitAcceleration.Radius << 7) {
      cameraOrbitVelocity.Radius = 0x100;
    }
    if (cameraOrbitVelocity.Radius < -0x100) {
      cameraOrbitVelocity.Radius = -0x100;
    }
  }
  if (-1 < Orbit_80067fa0.Radius) {
    if (cameraOrbitVelocity.Radius < Orbit_80067fa0.Radius * -0x100) {
      cameraOrbitVelocity.Radius = Orbit_80067fa0.Radius * -0x100;
    }
    if (Orbit_80067fa0.Radius << 8 < cameraOrbitVelocity.Radius) {
      cameraOrbitVelocity.Radius = Orbit_80067fa0.Radius << 8;
    }
  }
  cameraOrbitPosition.Radius = cameraOrbitPosition.Radius + (cameraOrbitVelocity.Radius >> 8);
  cameraOrbitVelocity.Pitch =
       cameraOrbitVelocity.Pitch +
       (cameraOrbitAcceleration_Scale.Pitch * cameraOrbitAcceleration.Pitch -
        cameraOrbitDrag.Pitch * cameraOrbitVelocity.Pitch >> 6);
  iVar1 = cameraOrbitVelocity.Pitch;
  if (cameraOrbitVelocity.Pitch < 0) {
    iVar1 = -cameraOrbitVelocity.Pitch;
  }
  if (iVar1 < Orbit_80067f8c.Pitch) {
    cameraOrbitVelocity.Pitch = cameraOrbitAcceleration.Pitch << 7;
    if (0x100 < cameraOrbitAcceleration.Pitch << 7) {
      cameraOrbitVelocity.Pitch = 0x100;
    }
    if (cameraOrbitVelocity.Pitch < -0x100) {
      cameraOrbitVelocity.Pitch = -0x100;
    }
  }
  if (-1 < Orbit_80067fa0.Pitch) {
    if (cameraOrbitVelocity.Pitch < Orbit_80067fa0.Pitch * -0x100) {
      cameraOrbitVelocity.Pitch = Orbit_80067fa0.Pitch * -0x100;
    }
    if (Orbit_80067fa0.Pitch << 8 < cameraOrbitVelocity.Pitch) {
      cameraOrbitVelocity.Pitch = Orbit_80067fa0.Pitch << 8;
    }
  }
  cameraOrbitPosition.Pitch = cameraOrbitPosition.Pitch + (cameraOrbitVelocity.Pitch >> 8) & 0xfff;
  if (0x800 < (uint)cameraOrbitPosition.Pitch) {
    cameraOrbitPosition.Pitch = cameraOrbitPosition.Pitch - 0x1000;
  }
  cameraOrbitVelocity.Yaw =
       cameraOrbitVelocity.Yaw +
       (cameraOrbitAcceleration_Scale.Yaw * cameraOrbitAcceleration.Yaw -
        cameraOrbitDrag.Yaw * cameraOrbitVelocity.Yaw >> 6);
  iVar1 = cameraOrbitVelocity.Yaw;
  if (cameraOrbitVelocity.Yaw < 0) {
    iVar1 = -cameraOrbitVelocity.Yaw;
  }
  if (iVar1 < Orbit_80067f8c.Yaw) {
    cameraOrbitVelocity.Yaw = cameraOrbitAcceleration.Yaw << 7;
    if (0x100 < cameraOrbitAcceleration.Yaw << 7) {
      cameraOrbitVelocity.Yaw = 0x100;
    }
    if (cameraOrbitVelocity.Yaw < -0x100) {
      cameraOrbitVelocity.Yaw = -0x100;
    }
  }
  if (-1 < Orbit_80067fa0.Yaw) {
    if (cameraOrbitVelocity.Yaw < Orbit_80067fa0.Yaw * -0x100) {
      cameraOrbitVelocity.Yaw = Orbit_80067fa0.Yaw * -0x100;
    }
    if (Orbit_80067fa0.Yaw << 8 < cameraOrbitVelocity.Yaw) {
      cameraOrbitVelocity.Yaw = Orbit_80067fa0.Yaw << 8;
    }
  }
  cameraOrbitPosition.Yaw = cameraOrbitPosition.Yaw + (cameraOrbitVelocity.Yaw >> 8) & 0xfff;
  if (0x800 < (uint)cameraOrbitPosition.Yaw) {
    cameraOrbitPosition.Yaw = cameraOrbitPosition.Yaw - 0x1000;
  }
  return;
}



void FUN_8001e204(void)

{
  VectorFromOrbitWithCenter(&Vec3_80067ef4,&cameraOrbitPosition,&Vec3_80067ee4);
  FUN_8001e454();
  DAT_80067fc7 = FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Vec3_80067ee4);
  FUN_8001e808();
  return;
}



void FUN_8001e270(void)

{
  VectorShort_80067ec8.X = 0;
  VectorShort_80067ec8.Y = (short)Orbit_80067f00.Latitude + (short)cameraOrbitPosition.Pitch & 0xfff
  ;
  VectorShort_80067ec8.Z =
       (short)Orbit_80067f00.Longitude + (short)cameraOrbitPosition.Yaw + 0x800 & 0xfff;
  FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
  return;
}



void ApplyCameraOrbit(Orbit *orbitPosition)

{
  Vec3 VStack_20;
  
  FUN_8001fa24();
  VectorCopy(&Vec3_80067ee4,&Spyro.position);
  DAT_80067ef0 = Spyro.rotation.Yaw;
  OrbitRotateLongitude(&Orbit_80067f14,orbitPosition,Spyro.rotation.Yaw);
  OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f14,0);
  OrbitRotateLongitude(&Orbit_80067f00,&Orbit_80067f14,0);
  OrbitClear(&cameraOrbitVelocity);
  VectorFromOrbitWithCenter(&Vec3_80067ef4,&cameraOrbitPosition,&Vec3_80067ee4);
  VectorCopy(&cameraPosition,&Vec3_80067ef4);
  FUN_8001e270();
  DAT_80067fb8 = 0;
  DAT_80067fbc = 0;
  MEMSET(&DAT_80067fec,0,0x6c);
  MEMSET(&DAT_80068058,0,0xc);
  SetCameraState(1);
  if (Spyro.maybeSubstate + ~Swim < 2) {
    VectorCopy(&VStack_20,&cameraPosition);
    isOnWaterSurface = 0;
    VStack_20.z = VStack_20.z + -0x1000;
    FUN_8003ce94(&cameraPosition,&VStack_20);
    if (isOnWaterSurface == 0) {
      DAT_80067fc0 = 0;
      DAT_80067fca = 0;
      return;
    }
  }
  DAT_80067ec4 = 0;
  DAT_80067fca = 0;
  DAT_80067fc0 = 0;
  return;
}



void FUN_8001e454(void)

{
  bool bVar1;
  bool bVar2;
  int iVar3;
  int iVar4;
  Vec3 *from;
  int iVar5;
  int iVar6;
  int iVar7;
  Vec3 local_68;
  Vec3 VStack_58;
  Vec3 VStack_48;
  Vec3 aVStack_38 [2];
  
  bVar2 = false;
  DAT_80067fc8 = 0;
  if (DAT_80067fc4 == '\0') {
    VectorSubtract(&local_68,&Vec3_80067ef4,&cameraPosition);
    iVar4 = VectorLength(&local_68,1);
    iVar5 = iVar4 / 0xf0 + 1;
    iVar4 = local_68.z;
    if (1 < iVar5) {
      iVar6 = local_68.x / iVar5;
      if (iVar5 == 0) {
        trap(0x1c00);
      }
      if ((iVar5 == -1) && (local_68.x == -0x80000000)) {
        trap(0x1800);
      }
      iVar7 = local_68.y / iVar5;
      if (iVar5 == 0) {
        trap(0x1c00);
      }
      if ((iVar5 == -1) && (local_68.y == -0x80000000)) {
        trap(0x1800);
      }
      iVar4 = local_68.z / iVar5;
      if (iVar5 == 0) {
        trap(0x1c00);
      }
      local_68.x = iVar6;
      local_68.y = iVar7;
      if ((iVar5 == -1) && (local_68.z == -0x80000000)) {
        trap(0x1800);
      }
    }
    local_68.z = iVar4;
    VectorCopy(&VStack_58,&cameraPosition);
    iVar4 = 0;
    if (0 < iVar5) {
      do {
        VectorAdd(&VStack_58,&VStack_58,&local_68);
        VectorCopy(&VStack_48,&VStack_58);
        iVar6 = 0;
        do {
          iVar7 = 0;
          if (DAT_80067fc5 == '\0') {
            iVar7 = FUN_8004055c(&VStack_58,0x100,0,0,0,(Object *)0x0);
          }
          if (iVar7 != 0) {
            if ((*(byte *)(iVar7 + 0x53) & 0x80) == 0) {
              VectorCopy(&VStack_58,&Vec3_8006ab7c);
              bVar2 = true;
            }
            else {
              iVar7 = 0;
            }
          }
          iVar3 = FUN_8003dcc0(&VStack_58,0x100);
          if (iVar3 == 0) {
            bVar1 = iVar6 < 6;
            if (iVar7 == 0) break;
          }
          else {
            VectorCopy(&VStack_58,&Vec3_8006ab7c);
            DAT_80067fc8 = 1;
          }
          iVar6 = iVar6 + 1;
          bVar1 = iVar6 < 6;
        } while (bVar1);
        if ((!bVar1) && (bVar2)) {
          VectorCopy(&VStack_58,&VStack_48);
          iVar6 = 0;
          do {
            iVar7 = FUN_8003dcc0(&VStack_58,0x100);
            if (iVar7 == 0) break;
            VectorCopy(&VStack_58,&Vec3_8006ab7c);
            DAT_80067fc8 = 1;
            iVar6 = iVar6 + 1;
          } while (iVar6 < 6);
        }
        iVar4 = iVar4 + 1;
      } while (iVar4 < iVar5);
    }
    from = &VStack_58;
  }
  else {
    from = &Vec3_80067ef4;
  }
  VectorCopy(&cameraPosition,from);
  VectorCopy(aVStack_38,&cameraPosition);
  aVStack_38[0].z = aVStack_38[0].z + 0x80;
  iVar4 = RaycastDown(aVStack_38,0x300);
  if ((iVar4 == 0) || (isOnWaterSurface == 0)) {
    if (DAT_80067fca == '\0') {
      DAT_80067fc0 = 0;
    }
    DAT_80067fca = 0;
  }
  else {
    DAT_80067fca = 1;
    DAT_80067fc0 = iVar4;
  }
  if (DAT_80067fc0 != 0) {
    if (cameraPosition.z < DAT_80067fc0) {
      DAT_80067ec4 = 0x800;
    }
    else {
      DAT_80067ec4 = 0;
    }
  }
  return;
}



void FUN_8001e808(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  Orbit *orbitPosition;
  uint uVar4;
  Vec3 VStack_58;
  undefined auStack_48 [16];
  Orbit local_38;
  
  if ((DAT_80067fc5 == '\0') && (currGameState != WorldTransition)) {
    VectorCopy(&VStack_58,&Spyro.position);
    VStack_58.z = VStack_58.z + -0x124;
    iVar1 = FUN_8001f618(&cameraPosition,&VStack_58,1);
    if (iVar1 == 0) {
      DAT_80067fc8 = 1;
      DAT_80067fbc = DAT_80067fbc + deltaTime;
      uVar4 = 0;
      if (0x3c < DAT_80067fbc) {
        iVar1 = 0;
        orbitPosition = (Orbit *)&DAT_800618bc;
        while( true ) {
          ApplyCameraOrbit(orbitPosition);
          iVar2 = FUN_8003dcc0(&cameraPosition,0x100);
          if ((iVar2 == 0) && (iVar2 = FUN_8001f618(&cameraPosition,&VStack_58,1), iVar2 != 0))
          break;
          iVar1 = iVar1 + 1;
          orbitPosition = orbitPosition + 1;
          if (4 < iVar1) {
            return;
          }
        }
        return;
      }
      uVar3 = 0;
      iVar1 = 0;
      do {
        local_38.Longitude = Orbit_80067f00.Longitude + *(int *)((int)&DAT_8006186c + iVar1) & 0xfff
        ;
        if (0x800 < (uint)local_38.Longitude) {
          local_38.Longitude = local_38.Longitude - 0x1000;
        }
        if (0x400 < local_38.Longitude) {
          local_38.Longitude = 0x400;
        }
        local_38.Latitude = Orbit_80067f00.Latitude + *(int *)((int)&DAT_80061870 + iVar1) & 0xfff;
        local_38.Radius = Orbit_80067f00.Radius + *(int *)((int)&DAT_80061874 + iVar1);
        VectorFromOrbitWithCenter(auStack_48,&local_38,&Vec3_80067ee4);
        iVar2 = FUN_8003dcc0(auStack_48,0x100);
        if ((iVar2 == 0) && (iVar2 = FUN_8001f618(&cameraPosition,auStack_48,1), iVar2 != 0)) {
          uVar4 = uVar4 | 1 << (uVar3 & 0x1f);
          iVar2 = FUN_8001f618(auStack_48,&VStack_58,1);
          if (iVar2 != 0) goto LAB_8001ec7c;
        }
        uVar3 = uVar3 + 1;
        iVar1 = iVar1 + 0x14;
      } while ((int)uVar3 < 4);
      uVar3 = 0;
      if (uVar4 == 0) {
        return;
      }
      iVar1 = 0;
      do {
        if (((int)uVar4 >> (uVar3 & 0x1f) & 1U) != 0) {
          local_38.Longitude =
               Orbit_80067f00.Longitude + *(int *)((int)&DAT_8006186c + iVar1) * 2 & 0xfff;
          if (0x800 < (uint)local_38.Longitude) {
            local_38.Longitude = local_38.Longitude - 0x1000;
          }
          if (0x400 < local_38.Longitude) {
            local_38.Longitude = 0x400;
          }
          local_38.Latitude =
               Orbit_80067f00.Latitude + *(int *)((int)&DAT_80061870 + iVar1) * 2 & 0xfff;
          local_38.Radius = Orbit_80067f00.Radius + *(int *)((int)&DAT_80061874 + iVar1) * 2;
          VectorFromOrbitWithCenter(auStack_48,&local_38,&Vec3_80067ee4);
          iVar2 = FUN_8003dcc0(auStack_48,0x100);
          if ((iVar2 == 0) && (iVar2 = FUN_8001f618(&cameraPosition,auStack_48,1), iVar2 != 0)) {
            iVar2 = FUN_8001f618(auStack_48,&VStack_58,1);
            if (iVar2 != 0) goto LAB_8001ec7c;
          }
          else {
            uVar4 = uVar4 & ~(1 << (uVar3 & 0x1f));
          }
        }
        uVar3 = uVar3 + 1;
        iVar1 = iVar1 + 0x14;
      } while ((int)uVar3 < 4);
      uVar3 = 0;
      if (uVar4 == 0) {
        return;
      }
      iVar1 = 0;
      do {
        if (((int)uVar4 >> (uVar3 & 0x1f) & 1U) != 0) {
          local_38.Longitude =
               Orbit_80067f00.Longitude + *(int *)((int)&DAT_8006186c + iVar1) * 4 & 0xfff;
          if (0x800 < (uint)local_38.Longitude) {
            local_38.Longitude = local_38.Longitude - 0x1000;
          }
          if (0x400 < local_38.Longitude) {
            local_38.Longitude = 0x400;
          }
          local_38.Latitude =
               Orbit_80067f00.Latitude + *(int *)((int)&DAT_80061870 + iVar1) * 4 & 0xfff;
          local_38.Radius = Orbit_80067f00.Radius + *(int *)((int)&DAT_80061874 + iVar1) * 4;
          VectorFromOrbitWithCenter(auStack_48,&local_38,&Vec3_80067ee4);
          iVar2 = FUN_8003dcc0(auStack_48,0x100);
          if ((iVar2 == 0) && (iVar2 = FUN_8001f618(&cameraPosition,auStack_48,1), iVar2 != 0)) {
            iVar2 = FUN_8001f618(auStack_48,&VStack_58,1);
            if (iVar2 != 0) {
LAB_8001ec7c:
              FUN_8001ee18(&Orbit_80067f14,auStack_48,&Vec3_80067ee4);
              DAT_80067fb8 = 0x10;
              return;
            }
          }
          else {
            uVar4 = uVar4 & ~(1 << (uVar3 & 0x1f));
          }
        }
        uVar3 = uVar3 + 1;
        iVar1 = iVar1 + 0x14;
        if (3 < (int)uVar3) {
          return;
        }
      } while( true );
    }
    if (DAT_80067fc6 == '\0') {
      DAT_80067fbc = 0;
      return;
    }
  }
  DAT_80067fbc = 0;
  DAT_80067fb8 = 0;
                    // WARNING: Read-only address (ram,0x80067f00) is written
                    // WARNING: Read-only address (ram,0x80067f04) is written
                    // WARNING: Read-only address (ram,0x80067f08) is written
                    // WARNING: Read-only address (ram,0x80067f00) is written
                    // WARNING: Read-only address (ram,0x80067f04) is written
                    // WARNING: Read-only address (ram,0x80067f08) is written
  return;
}



void OrbitRotateLongitude(Orbit *outputOrbit,Orbit *inputOrbit,int rotation)

{
  uint uVar1;
  
  uVar1 = inputOrbit->Longitude + rotation & 0xfff;
  outputOrbit->Longitude = uVar1;
  if (0x800 < uVar1) {
    outputOrbit->Longitude = uVar1 - 0x1000;
  }
  outputOrbit->Latitude = inputOrbit->Latitude;
  outputOrbit->Radius = inputOrbit->Radius;
  outputOrbit->Pitch = inputOrbit->Pitch;
  outputOrbit->Yaw = inputOrbit->Yaw;
  return;
}



void VectorFromOrbitWithCenter(Vec3 *out,Orbit *orbitPosition,Vec3 *center)

{
  int iVar1;
  int iVar2;
  
  iVar1 = cosineLookup(orbitPosition->Latitude);
  iVar2 = cosineLookup(orbitPosition->Longitude);
  out->x = (orbitPosition->Radius * iVar1 >> 0xc) * iVar2 >> 0xc;
  iVar1 = cosineLookup(orbitPosition->Latitude);
  iVar2 = sineLookup(orbitPosition->Longitude);
  out->y = (orbitPosition->Radius * iVar1 >> 0xc) * iVar2 >> 0xc;
  iVar1 = sineLookup(orbitPosition->Latitude);
  out->z = orbitPosition->Radius * iVar1 >> 0xc;
  if (center != (Vec3 *)0x0) {
    VectorAdd(out,out,center);
  }
  return;
}



undefined4 FUN_8001ee18(Orbit *param_1,Vec3 *param_2,Vec3 *param_3)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  undefined4 uVar5;
  Vec3 local_20;
  
  uVar5 = 0;
  if (param_3 == (Vec3 *)0x0) {
    VectorCopy(&local_20,param_2);
  }
  else {
    VectorSubtract(&local_20,param_2,param_3);
  }
  iVar2 = VectorLength(&local_20,0);
  iVar2 = Atan2(iVar2,local_20.z,1);
  param_1->Latitude = iVar2;
  uVar3 = Atan2(local_20.x,local_20.y,1);
  uVar4 = uVar3 - param_1->Longitude & 0xfff;
  if (0x800 < uVar4) {
    uVar4 = uVar4 - 0x1000;
  }
  if ((int)uVar4 < 0) {
    uVar4 = -uVar4;
  }
  if ((0x400 < (int)uVar4) &&
     (((DAT_80067fc7 != '\0' || (cameraState == Look)) || (cameraState == New_Name_(1))))) {
    uVar3 = uVar3 + 0x800 & 0xfff;
    uVar5 = 1;
    param_1->Latitude = 0x800U - param_1->Latitude & 0xfff;
  }
  if (local_20.x < 0) {
    local_20.x = -local_20.x;
  }
  bVar1 = (int)uVar3 < 0x801;
  if (local_20.x < 0x80) {
    if (local_20.y < 0) {
      local_20.y = -local_20.y;
    }
    bVar1 = (int)uVar3 < 0x801;
    if (local_20.y < 0x80) {
      bVar1 = cameraOrbitPosition.Longitude < 0x801;
      uVar3 = cameraOrbitPosition.Longitude;
    }
  }
  if (!bVar1) {
    uVar3 = uVar3 - 0x1000;
  }
  param_1->Longitude = uVar3;
  if (0x800 < param_1->Latitude) {
    param_1->Latitude = param_1->Latitude + -0x1000;
  }
  iVar2 = VectorLength(&local_20,1);
  param_1->Radius = iVar2;
  return uVar5;
}



void FUN_8001efa8(Orbit *param_1,Orbit *param_2)

{
  uint uVar1;
  
  uVar1 = (int)VectorShort_80067ec8.Y - param_2->Latitude & 0xfff;
  param_1->Pitch = uVar1;
  if (0x800 < uVar1) {
    param_1->Pitch = uVar1 - 0x1000;
  }
  uVar1 = (int)VectorShort_80067ec8.Z - (param_2->Longitude + 0x800) & 0xfff;
  param_1->Yaw = uVar1;
  if (0x800 < uVar1) {
    param_1->Yaw = uVar1 - 0x1000;
  }
  return;
}



void OrbitClear(Orbit *orbitPosition)

{
  orbitPosition->Longitude = 0;
  orbitPosition->Latitude = 0;
  orbitPosition->Radius = 0;
  orbitPosition->Pitch = 0;
  orbitPosition->Yaw = 0;
  return;
}



void InputRotateCamera(int rotateSpeed)

{
  cameraRotateInput = 0;
  if (DAT_80067fd8 == 1) {
    DAT_80067fd8 = 3;
  }
  if (Spyro.field162_0x240 != 0) {
    cameraRotateInput = 0;
    return;
  }
  if ((inputStates[0].current & (TriggerRight|BumperRight)) != None) {
    if ((inputStates[0].current & (TriggerLeft|BumperLeft)) != None) goto LAB_8001f088;
    DAT_80067fd8 = 1;
    cameraRotateInput = rotateSpeed;
  }
  if ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None) {
    return;
  }
LAB_8001f088:
  if ((inputStates[0].current & (TriggerRight|BumperRight)) == None) {
    DAT_80067fd8 = 1;
    cameraRotateInput = -rotateSpeed;
  }
  return;
}



void FUN_8001f0bc(void)

{
  if (cameraRotateInput != 0) {
    DAT_80067fd8 = 1;
    return;
  }
  if (DAT_80067fd8 == 1) {
    DAT_80067fdc = Orbit_80067f00.Longitude - Orbit_80067f14.Longitude & 0xfff;
    if (0x800 < DAT_80067fdc) {
      DAT_80067fdc = DAT_80067fdc - 0x1000;
    }
    Orbit_80067f14.Longitude = Orbit_80067f00.Longitude;
    DAT_80067fd8 = 2;
    return;
  }
  if (DAT_80067fd8 != 2) {
    return;
  }
  if ((int)DAT_80067fdc < 1) {
    DAT_80067fdc = DAT_80067fdc + 0x18;
    if ((int)DAT_80067fdc < 0) goto LAB_8001f1a8;
  }
  else {
    DAT_80067fdc = DAT_80067fdc + -0x18;
    if (0 < (int)DAT_80067fdc) goto LAB_8001f1a8;
  }
  DAT_80067fdc = 0;
  DAT_80067fd8 = 0;
LAB_8001f1a8:
  Orbit_80067f14.Longitude = Orbit_80067f14.Longitude + DAT_80067fdc & 0xfff;
  if (0x800 < (uint)Orbit_80067f14.Longitude) {
    Orbit_80067f14.Longitude = Orbit_80067f14.Longitude - 0x1000;
  }
  return;
}



void FUN_8001f1e4(undefined4 param_1,undefined4 param_2)

{
  DAT_80067fec = param_2;
  DAT_80067ff0 = param_1;
  return;
}



void FUN_8001f1fc(Orbit *param_1)

{
  if ((DAT_80067fec == 0) || (DAT_80067fec == 0x11)) {
    DAT_80067fec = 0x11;
    OrbitRotateLongitude(&Orbit_80067ff4,param_1,0);
  }
  return;
}



void FUN_8001f24c(undefined4 param_1,Vec3 *param_2)

{
  if (cameraState != AlchemistCutscene) {
    OrbitRotateLongitude(&Orbit_80068014,&Orbit_80067f00,0);
  }
  DAT_80067fec = 9;
  VectorCopy(&Vec3_80068008,param_2);
  FUN_8001ee18(&Orbit_80067ff4,param_1,param_2);
  Orbit_80067ff4.Pitch = 0;
  Orbit_80067ff4.Yaw = 0;
  return;
}



void FUN_8001f2e4(int param_1)

{
  CameraState CVar1;
  
  if (cameraState == AlchemistCutscene) {
    if (param_1 == 0) {
      DAT_80067fec = 0;
      VectorCopy(&Vec3_80067ee4,&Spyro.position);
      DAT_80067fc7 = FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Vec3_80067ee4);
      FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
      OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
      CVar1 = cameraStateLookup[Spyro.state];
joined_r0x8001f444:
      if (CVar1 == Align) {
        CVar1 = Passive;
      }
      SetCameraState(CVar1);
      return;
    }
    VectorCopy(&Vec3_80068008,&Spyro.position);
    OrbitRotateLongitude(&Orbit_80067ff4,&Orbit_80068014,0);
  }
  else {
    if (cameraState != Freecam?) {
      return;
    }
    if (param_1 == 0) {
      DAT_80067fec = 0;
      VectorCopy(&Vec3_80067ee4,&Spyro.position);
      DAT_80067fc7 = FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Vec3_80067ee4);
      FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
      OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
      CVar1 = cameraStateLookup[Spyro.state];
      goto joined_r0x8001f444;
    }
    if ((INT_80067ed4 & 0x80U) != 0) {
      return;
    }
  }
  DAT_80067ed8 = 0;
  INT_80067ed4 = 0x80;
  return;
}



void FUN_8001f4a4(undefined4 param_1,undefined4 param_2)

{
  if (1 < cameraState + ~QuickAlign) {
    OrbitRotateLongitude(&Orbit_80068014,&Orbit_80067f00,0);
  }
  DAT_80067fec = 10;
  DAT_80068028 = param_1;
  DAT_8006802c = 0;
  DAT_80068038 = param_2;
  return;
}



void FUN_8001f524(Vec3 *param_1,int param_2,Vec3 *param_3,int param_4)

{
  undefined4 uVar1;
  
  if (-1 < Spyro.health) {
    uVar1 = 0;
    VectorCopy(&Spyro.field159_0x22c,param_1);
    Spyro.field160_0x238 = param_2 << 4;
    DAT_80067fec = 0xb;
    Spyro.field161_0x23c = param_4;
    if (param_3 == (Vec3 *)0x0) {
      VectorClear(&Vec3_80068008);
    }
    else {
      VectorCopy(&Vec3_80068008,param_3);
    }
    if ((cameraState == AlchemistCutscene) && (0x7f < blackOverlayOpacity)) {
      uVar1 = 0x10;
    }
    SetCameraState(0xb);
    DAT_80067ed8 = uVar1;
  }
  return;
}



undefined4 FUN_8001f618(Vec3 *param_1,Vec3 *param_2,uint param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  Vec3 local_50;
  Vec3 VStack_40;
  Vec3 aVStack_30 [2];
  
  isOnWaterSurface = 0;
  VectorSubtract(&local_50,param_2,param_1);
  iVar1 = VectorLength(&local_50,1);
  iVar2 = (iVar1 >> 10) + 1;
  iVar1 = local_50.z;
  if (1 < iVar2) {
    iVar3 = local_50.x / iVar2;
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (local_50.x == -0x80000000)) {
      trap(0x1800);
    }
    iVar4 = local_50.y / iVar2;
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (local_50.y == -0x80000000)) {
      trap(0x1800);
    }
    iVar1 = local_50.z / iVar2;
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    local_50.x = iVar3;
    local_50.y = iVar4;
    if ((iVar2 == -1) && (local_50.z == -0x80000000)) {
      trap(0x1800);
    }
  }
  local_50.z = iVar1;
  VectorCopy(&VStack_40,param_1);
  iVar1 = 0;
  if (0 < iVar2) {
    do {
      VectorAdd(aVStack_30,&VStack_40,&local_50);
      iVar3 = FUN_8003ce38(&VStack_40,aVStack_30,2,0,0);
      if ((iVar3 != 0) && (isOnWaterSurface == 0)) {
        return 0;
      }
      if (((param_3 & 2) != 0) && (isOnWaterSurface != 0)) {
        return 0;
      }
      if ((((param_3 & 1) != 0) && (iVar3 = FUN_8003f88c(&VStack_40,aVStack_30,1,0,0), iVar3 != 0))
         && ((*(byte *)(iVar3 + 0x53) & 0x80) == 0)) {
        return 0;
      }
      VectorCopy(&VStack_40,aVStack_30);
      iVar1 = iVar1 + 1;
    } while (iVar1 < iVar2);
  }
  return 1;
}



void FUN_8001f814(void)

{
  int iVar1;
  Orbit *pOVar2;
  int local_10;
  int local_c;
  
  switch(cameraState) {
  case Align:
  case ChaseSwim:
  case QuickAlign:
  case MaybeLockToThirdParty:
  case WhirlwindAlign:
    pOVar2 = &Orbit_80061560;
    break;
  case Moving:
    pOVar2 = &Orbit_80061560;
    iVar1 = maybeAngularDistance4096(Spyro.rotation.Yaw,Orbit_80067f00.Longitude);
    if (iVar1 < 0x280) {
      pOVar2 = &Orbit_80061574;
    }
    break;
  case ChaseCharge:
    pOVar2 = &Orbit_80061588;
    break;
  case ChaseFly:
    pOVar2 = &Orbit_800615c4;
    break;
  case ChaseIce:
    pOVar2 = &Orbit_8006159c;
    break;
  case Passive:
    SetCameraState(0);
    return;
  default:
    goto switchD_8001f844_caseD_7;
  case BossLock:
    pOVar2 = &Orbit_80061628;
    break;
  case Vehicle:
    pOVar2 = &Orbit_80061600;
    break;
  case New_Name_(1):
  case 0x1d:
    pOVar2 = &Orbit_800615ec;
    break;
  case unk:
    pOVar2 = &Orbit_80061614;
    break;
  case AlchemistRelated:
  case Dialogue:
    pOVar2 = &Orbit_80067ff4;
    break;
  case New_Name_(3):
    pOVar2 = &Orbit_800616a0;
    break;
  case New_Name_(5):
    pOVar2 = &Orbit_800616b4;
    break;
  case New_Name_(7):
    pOVar2 = &Orbit_800616c8;
    break;
  case Paragliding:
    pOVar2 = &Orbit_800616dc;
    break;
  case 0x1a:
    pOVar2 = &Orbit_800616f0;
  }
  FUN_8002b4e4(&local_10,0);
  if ((inputStates[0].current & BumperRight) == None) {
    if ((inputStates[0].current & BumperLeft) == None) {
      if ((inputStates[0].current & Cross) != None) {
        pOVar2->Longitude = pOVar2->Longitude + (local_10 >> 3);
        pOVar2->Latitude = pOVar2->Latitude + (local_c >> 3);
      }
    }
    else {
      pOVar2->Yaw = pOVar2->Yaw - (local_10 >> 3);
      pOVar2->Pitch = pOVar2->Pitch + (local_c >> 3);
    }
  }
  else {
    pOVar2->Radius = pOVar2->Radius - (local_c >> 2);
  }
switchD_8001f844_caseD_7:
                    // WARNING: Read-only address (ram,0x80067f00) is written
  return;
}



void FUN_8001fa24(void)

{
  if (cameraMode == '\0') {
    DAT_80067edc = 7;
  }
  else {
    DAT_80067edc = 0;
  }
  return;
}



void UpdateCameraState(void)

{
  ushort uVar1;
  ushort uVar2;
  ushort uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  Orbit *pOVar7;
  Orbit *pOVar8;
  int iVar9;
  Vec3 local_50;
  int local_40;
  int local_3c;
  Vec3 local_38;
  Vec3 local_28;
  
  cameraRotateInput = 0;
  if (DAT_80067fc8 != '\0') {
    OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
  }
  iVar9 = DAT_80067fbc + 2 >> 2;
  if (4 < iVar9) {
    iVar9 = 4;
  }
  switch(cameraState) {
  case Align:
    InputRotateCamera(0x400);
    if (cameraRotateInput == 0) {
      DAT_80067fc6 = 0;
    }
    else {
      DAT_80067fc6 = 1;
      if (INT_80067ed4 == 1) {
        INT_80067ed4 = 0;
      }
    }
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80061560,DAT_80067ef0);
    }
    else {
      cameraRotateInput = 0;
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar9 * 0x14 + -0x7ff9e8d4),0);
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar9 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
    if ((INT_80067ed4 == 1) && (8 < Orbit_80067fa0.Longitude)) {
      Orbit_80067fa0.Longitude = 8;
    }
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    if (((DAT_80067edc & 2) == 0) && (cameraOrbitAcceleration_Scale.Longitude < 0x4c)) {
      cameraOrbitAcceleration_Scale.Longitude = 0x4c;
    }
    break;
  case Moving:
    if (DAT_80067fb8 == 0) {
      if (((DAT_80067ee0 == '\0') &&
          (iVar4 = maybeAngularDistance4096(Spyro.rotation.Yaw,Orbit_80067f00.Longitude),
          iVar4 < 0x280)) &&
         (((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
          ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)))) {
        pOVar7 = &Orbit_80061574;
      }
      else {
        pOVar7 = &Orbit_80061560;
      }
      OrbitRotateLongitude(&Orbit_80067f14,pOVar7,DAT_80067ef0);
      VectorCopy(&local_50,&Spyro.trueVelocity);
      VectorShiftRight(&local_50,2);
      VectorAdd(&local_50,&Spyro.position,&local_50);
      VectorSubtract(&local_50,&local_50,&cameraPosition);
      iVar4 = Atan2(local_50.x,local_50.y,1);
      uVar6 = iVar4 - VectorShort_80067ec8.Z & 0xfff;
      iVar4 = uVar6 << 1;
      if (0x800 < uVar6) {
        uVar6 = uVar6 - 0x1000;
        iVar4 = uVar6 * 2;
      }
      iVar4 = (int)(iVar4 * 0x44 + uVar6 * 0x45) >> 8;
      Orbit_80067f14.Yaw = iVar4;
      if (0xc0 < iVar4) {
        Orbit_80067f14.Yaw = 0xc0;
      }
      if (iVar4 < -0xc0) {
        Orbit_80067f14.Yaw = -0xc0;
      }
      iVar4 = Orbit_80067f14.Yaw;
      if (Orbit_80067f14.Yaw < 0) {
        iVar4 = -Orbit_80067f14.Yaw;
      }
      if (iVar4 < 9) {
        Orbit_80067f14.Yaw = 0;
      }
      InputRotateCamera(0x400);
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar9 * 0x14 + -0x7ff9e8d4),0);
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar9 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    if (((DAT_80067edc & 2) == 0) && (cameraOrbitAcceleration_Scale.Longitude < 0x4c)) {
      cameraOrbitAcceleration_Scale.Longitude = 0x4c;
    }
    break;
  case ChaseCharge:
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80061588,DAT_80067ef0);
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar9 * 0x14 + -0x7ff9e8d4),0);
    if (cameraOrbitAcceleration_Scale.Longitude < 0x100) {
      cameraOrbitAcceleration_Scale.Longitude = 0x100;
    }
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar9 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    pOVar8 = &Orbit_80061844;
    pOVar7 = &Orbit_80067fa0;
    goto LAB_80020724;
  default:
    if (DAT_8006709c != (code *)0x0) {
      (*DAT_8006709c)();
    }
    break;
  case Passive:
    InputRotateCamera(0x400);
    DAT_80067fc6 = cameraRotateInput != 0;
    if ((bool)DAT_80067fc6) {
      DAT_80067ed8 = 0;
    }
    if (DAT_80067fb8 != 0) {
      cameraRotateInput = 0;
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar9 * 0x14 + -0x7ff9e8d4),0);
    pOVar7 = (Orbit *)(iVar9 * 0x14 + -0x7ff9e848);
    goto LAB_800206f4;
  case Look:
    if (INT_80067ed4 == 0) {
      if (DAT_80067fb8 == 0) {
        OrbitRotateLongitude(&Orbit_80067f14,&Orbit_800615b0,DAT_80067ef0);
        iVar9 = Orbit_80067f14.Radius - Orbit_80067f00.Radius;
        if (iVar9 < 0) {
          iVar9 = -iVar9;
        }
        if (iVar9 < 0x200) {
          INT_80067ed4 = 2;
        }
      }
      if (DAT_80067fc8 != '\0') {
        OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80067f00,0);
        INT_80067ed4 = 1;
      }
    }
    else if (INT_80067ed4 == 1) {
      Orbit_80067f14.Radius = Orbit_800615b0.Radius;
      iVar9 = Orbit_800615b0.Radius - Orbit_80067f00.Radius;
      if (iVar9 < 0) {
        iVar9 = -iVar9;
      }
      Orbit_80067f14.Pitch = Orbit_800615b0.Pitch;
      Orbit_80067f14.Yaw = Orbit_800615b0.Yaw;
      if (iVar9 < 0x200) {
        INT_80067ed4 = 2;
      }
    }
    else if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_800615b0,DAT_80067ef0);
      FUN_8002b694(&local_40,&DAT_80067fe0,1);
      if (INT_80067ed4 - 3U < 2) {
        DAT_80067fcc = DAT_80067fcc + (-local_40 >> 2);
        DAT_80067fd0 = DAT_80067fd0 + (local_3c >> 2);
        if (DAT_80067fd0 < -0x200) {
          DAT_80067fd0 = -0x200;
        }
        if (0x200 < DAT_80067fd0) {
          DAT_80067fd0 = 0x200;
        }
        if (DAT_80067fcc < -0x300) {
          DAT_80067fcc = -0x300;
        }
        iVar9 = 0x300;
        if (0x300 < DAT_80067fcc) {
LAB_80020308:
          DAT_80067fcc = iVar9;
        }
      }
      else {
        DAT_80067fcc = DAT_80067fcc + (-local_40 >> 1);
        DAT_80067fd0 = DAT_80067fd0 + (local_3c >> 1);
        if (DAT_80067fd0 < -0x3d0) {
          DAT_80067fd0 = -0x3d0;
        }
        if (0x500 < DAT_80067fd0) {
          DAT_80067fd0 = 0x500;
        }
        if (DAT_80067fcc < -0x400) {
          DAT_80067fcc = -0x400;
        }
        iVar9 = 0x400;
        if (0x400 < DAT_80067fcc) goto LAB_80020308;
      }
      Orbit_80067f14.Longitude = Orbit_80067f14.Longitude - DAT_80067fcc;
      if (DAT_80067fd0 < -0x140) {
        Orbit_80067f14.Latitude = Orbit_80067f14.Latitude + -0x140;
        Orbit_80067f14.Pitch = Orbit_80067f14.Pitch + 0x140 + DAT_80067fd0;
      }
      else {
        Orbit_80067f14.Latitude = Orbit_80067f14.Latitude + DAT_80067fd0;
      }
      Spyro.field101_0x18c = -DAT_80067fcc;
      if (Spyro.maybeSubstate == UnderwaterSwim) {
        if (Spyro.field101_0x18c < -0x140) {
          Spyro.field101_0x18c = -0x140;
        }
        if (0x140 < Spyro.field101_0x18c) {
          Spyro.field101_0x18c = 0x140;
        }
      }
      else if (Spyro.maybeSubstate == Swim) {
        if (Spyro.field101_0x18c < -0x200) {
          Spyro.field101_0x18c = -0x200;
        }
        if (0x200 < Spyro.field101_0x18c) {
          Spyro.field101_0x18c = 0x200;
        }
      }
      else {
        if (Spyro.field101_0x18c < -0x300) {
          Spyro.field101_0x18c = -0x300;
        }
        if (0x300 < Spyro.field101_0x18c) {
          Spyro.field101_0x18c = 0x300;
        }
      }
      Spyro.field100_0x188 = -DAT_80067fd0;
      if (Spyro.maybeSubstate == UnderwaterSwim) {
        if (Spyro.field100_0x188 < -0x100) {
          Spyro.field100_0x188 = -0x100;
        }
      }
      else if (Spyro.maybeSubstate == Swim) {
        if (Spyro.field100_0x188 < -0x140) {
          Spyro.field100_0x188 = -0x140;
        }
      }
      else if (Spyro.field100_0x188 < -0x200) {
        Spyro.field100_0x188 = -0x200;
      }
      if (0x200 < Spyro.field100_0x188) {
        Spyro.field100_0x188 = 0x200;
      }
      if ((Spyro.field90_0x16c == 3) && (1 < INT_80067ed4 - 3U)) {
        uVar6 = Orbit_80067f14.Longitude - Orbit_80067f00.Longitude & 0xfff;
        if (0x800 < uVar6) {
          uVar6 = uVar6 - 0x1000;
        }
        uVar5 = Orbit_80067f14.Latitude - Orbit_80067f00.Latitude & 0xfff;
        if (0x800 < uVar5) {
          uVar5 = uVar5 - 0x1000;
        }
        if ((int)uVar6 < 0) {
          uVar6 = -uVar6;
        }
        if ((int)uVar6 < 0x80) {
          if ((int)uVar5 < 0) {
            uVar5 = -uVar5;
          }
          if ((int)uVar5 < 0x80) {
            INT_80067ed4 = Spyro.field90_0x16c;
          }
        }
      }
      else if (((Spyro.powerFireballTime != 0) ||
               (((cheatFireball != '\0' || (Spyro.powerIceTime != 0)) ||
                (Spyro.powerRiptoPlasmaTime != 0)))) &&
              (((&DAT_80061373)[Spyro.state * 4] != '\0' && (1 < INT_80067ed4 - 3U)))) {
        uVar6 = Orbit_80067f14.Longitude - Orbit_80067f00.Longitude & 0xfff;
        if (0x800 < uVar6) {
          uVar6 = uVar6 - 0x1000;
        }
        uVar5 = Orbit_80067f14.Latitude - Orbit_80067f00.Latitude & 0xfff;
        if (0x800 < uVar5) {
          uVar5 = uVar5 - 0x1000;
        }
        if ((int)uVar6 < 0) {
          uVar6 = -uVar6;
        }
        if ((int)uVar6 < 0x80) {
          if ((int)uVar5 < 0) {
            uVar5 = -uVar5;
          }
          if ((int)uVar5 < 0x80) {
            INT_80067ed4 = 3;
          }
        }
      }
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,&Orbit_80061790,0);
    pOVar7 = &Orbit_8006181c;
LAB_800206f4:
    OrbitRotateLongitude(&cameraOrbitDrag,pOVar7,0);
    OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
    pOVar7 = &Orbit_80067f8c;
    pOVar8 = &Orbit_80061858;
LAB_80020724:
    OrbitRotateLongitude(pOVar7,pOVar8,0);
    break;
  case QuickAlign:
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80061560,DAT_80067ef0);
    }
    cameraRotateInput = 0;
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,&Orbit_800617a4,0);
    OrbitRotateLongitude(&cameraOrbitDrag,&Orbit_80061830,0);
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    Orbit_80067fa0.Longitude = -1;
    Orbit_80067fa0.Latitude = -1;
    Orbit_80067fa0.Radius = -1;
    Orbit_80067fa0.Pitch = -1;
    Orbit_80067fa0.Yaw = -1;
    Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10004000;
    break;
  case AlchemistCutscene:
    uVar6 = INT_80067ed4 & 0xffffff7f;
    if (uVar6 == 0) {
      blackOverlayOpacity = DAT_80067ed8 << 4;
      if (0xff < blackOverlayOpacity) {
        blackOverlayOpacity = 0xff;
      }
      if (0x10 < DAT_80067ed8) {
        INT_80067ed4 = INT_80067ed4 & 0x80U | 1;
        OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80067ff4,0);
        VectorCopy(&Vec3_80067ee4,&Vec3_80068008);
        DAT_80067ef0 = 0;
        OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f14,0);
        OrbitRotateLongitude(&Orbit_80067f00,&Orbit_80067f14,0);
        OrbitClear(&cameraOrbitVelocity);
        VectorFromOrbitWithCenter(&Vec3_80067ef4,&cameraOrbitPosition,&Vec3_80067ee4);
        VectorCopy(&cameraPosition,&Vec3_80067ef4);
        DAT_80067fc9 = 0;
      }
    }
    else if ((-1 < (int)uVar6) && ((int)uVar6 < 3)) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80067ff4,0);
      VectorCopy(&Vec3_80067ee4,&Vec3_80068008);
      DAT_80067ef0 = 0;
      if ((Spyro.state == Flop) && (Spyro.airVelocityFlag == FALLING)) {
        OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,&Orbit_80061790,0);
        pOVar7 = &Orbit_8006181c;
      }
      else {
        OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar9 * 0x14 + -0x7ff9e8d4),0)
        ;
        pOVar7 = (Orbit *)(iVar9 * 0x14 + -0x7ff9e848);
      }
      OrbitRotateLongitude(&cameraOrbitDrag,pOVar7,0);
      OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
      OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
      if ((INT_80067ed4 & 0xffffff7fU) == 1) {
        blackOverlayOpacity = (DAT_80067ed8 + -0x10) * -0x10 + 0x100;
        if (blackOverlayOpacity < 1) {
          INT_80067ed4 = INT_80067ed4 & 0x80U | 2;
          blackOverlayOpacity = 0;
        }
        if (0xff < blackOverlayOpacity) {
          blackOverlayOpacity = 0xff;
        }
      }
      if (INT_80067ed4 == 1) {
        DAT_80067100 = INT_80067ed4;
      }
      else if (INT_80067ed4 == 0x81) {
        DAT_80067100 = 0;
      }
    }
    goto LAB_800213f0;
  case Freecam?:
    if (INT_80067ed4 == 3) {
      if (0x3f < DAT_80067ed8) {
        DAT_80067ed8 = 0x40;
        INT_80067ed4 = 2;
      }
      local_38.x = (uint)*(ushort *)(DAT_80068028 + 1) << 2;
      local_38.y = (uint)*(ushort *)((int)DAT_80068028 + 6) << 2;
      local_38.z = (uint)*(ushort *)(DAT_80068028 + 2) << 2;
      local_28.x = (int)*(short *)((int)DAT_80068028 + 10);
      local_28.y = (int)*(short *)(DAT_80068028 + 3);
      local_28.z = (int)*(short *)((int)DAT_80068028 + 0xe);
      VectorSubtract(&local_38,&local_38,&Vec3_8006803c);
      local_28.x = local_28.x - DAT_80068048 & 0xfff;
      if (0x800 < (uint)local_28.x) {
        local_28.x = local_28.x - 0x1000;
      }
      local_28.y = local_28.y - DAT_8006804c & 0xfff;
      if (0x800 < (uint)local_28.y) {
        local_28.y = local_28.y - 0x1000;
      }
      local_28.z = local_28.z - DAT_80068050 & 0xfff;
      if (0x800 < (uint)local_28.z) {
        local_28.z = local_28.z - 0x1000;
      }
      VectorScale(&local_38,0x40,DAT_80067ed8);
      VectorScale(&local_28,0x40,DAT_80067ed8);
      VectorAdd(&Vec3_80068064,&local_38,&Vec3_8006803c);
      uVar6 = local_28.x + DAT_80068048 & 0xfff;
      DAT_80068070 = (short)uVar6;
      if (0x800 < uVar6) {
        DAT_80068070 = DAT_80068070 + -0x1000;
      }
      uVar6 = local_28.y + DAT_8006804c & 0xfff;
      DAT_80068072 = (short)uVar6;
      if (0x800 < uVar6) {
        DAT_80068072 = DAT_80068072 + -0x1000;
      }
      uVar6 = local_28.z + DAT_80068050 & 0xfff;
      DAT_80068074 = (short)uVar6;
      if (0x800 < uVar6) {
        DAT_80068074 = DAT_80068074 + -0x1000;
      }
      DAT_80067100 = 1;
    }
    else if (INT_80067ed4 < 4) {
      if (INT_80067ed4 == 1) {
        blackOverlayOpacity = (DAT_80067ed8 + -0x10) * -0x10 + 0x100;
        if (blackOverlayOpacity < 1) {
          blackOverlayOpacity = 0;
          INT_80067ed4 = 2;
        }
        if (0xff < blackOverlayOpacity) {
          blackOverlayOpacity = 0xff;
        }
        uVar1 = *(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 1);
        uVar2 = *(ushort *)((int)DAT_80068028 + DAT_8006802c * 0xc + 6);
        uVar3 = *(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 2);
        DAT_80068070 = *(short *)((int)DAT_80068028 + DAT_8006802c * 0xc + 10);
        DAT_80068072 = *(short *)(DAT_80068028 + DAT_8006802c * 3 + 3);
        DAT_80068074 = *(short *)((int)DAT_80068028 + DAT_8006802c * 0xc + 0xe);
        DAT_80067100 = 1;
LAB_80021024:
        Vec3_80068064.z = (uint)uVar3 << 2;
        Vec3_80068064.y = (uint)uVar2 << 2;
        Vec3_80068064.x = (uint)uVar1 << 2;
      }
      else {
        if (1 < INT_80067ed4) {
          DAT_80067100 = 1;
          if ((DAT_80068038 & 1) == 0) {
            DAT_8006802c = DAT_8006802c + 1;
            if (*DAT_80068028 <= DAT_8006802c) {
              if ((DAT_80068038 & 4) == 0) {
                DAT_8006802c = *DAT_80068028 + -1;
                if ((DAT_80068038 & 8) == 0) {
                  INT_80067ed4 = 0x80;
                  DAT_80067ed8 = 0;
                }
              }
              else {
                DAT_8006802c = 0;
              }
            }
          }
          goto LAB_80020fb8;
        }
        if (INT_80067ed4 == 0) {
          blackOverlayOpacity = DAT_80067ed8 << 4;
          if (0xff < blackOverlayOpacity) {
            blackOverlayOpacity = 0xff;
          }
          if (0x10 < DAT_80067ed8) {
            INT_80067ed4 = 1;
            DAT_80067fc9 = 1;
            goto LAB_80020fb8;
          }
        }
      }
    }
    else {
      if (INT_80067ed4 == 0x81) {
        blackOverlayOpacity = (DAT_80067ed8 + -0x10) * -0x10 + 0x100;
        if (blackOverlayOpacity < 1) {
          blackOverlayOpacity = 0;
          INT_80067ed4 = 0x82;
        }
        DAT_80067100 = 0;
        if (0xff < blackOverlayOpacity) {
          blackOverlayOpacity = 0xff;
        }
LAB_80020fb8:
        uVar1 = *(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 1);
        uVar2 = *(ushort *)((int)DAT_80068028 + DAT_8006802c * 0xc + 6);
        uVar3 = *(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 2);
        DAT_80068070 = *(short *)((int)DAT_80068028 + DAT_8006802c * 0xc + 10);
        DAT_80068072 = *(short *)(DAT_80068028 + DAT_8006802c * 3 + 3);
        DAT_80068074 = *(short *)((int)DAT_80068028 + DAT_8006802c * 0xc + 0xe);
        goto LAB_80021024;
      }
      if ((INT_80067ed4 < 0x82) && (INT_80067ed4 == 0x80)) {
        blackOverlayOpacity = DAT_80067ed8 << 4;
        if (0xff < blackOverlayOpacity) {
          blackOverlayOpacity = 0xff;
        }
        if (DAT_80067ed8 < 0x11) goto LAB_80020fb8;
        INT_80067ed4 = 0x81;
        VectorCopy(&Vec3_80067ee4,&Spyro.position);
        OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80068014,0);
        DAT_80067fc9 = 0;
      }
    }
    goto LAB_800213f0;
  case TransitioningToParagliding?:
    if (INT_80067ed4 == 0) {
      blackOverlayOpacity = DAT_80067ed8 << 4;
      if (0xff < blackOverlayOpacity) {
        blackOverlayOpacity = 0xff;
      }
      if (0x10 < DAT_80067ed8) {
        if (Spyro.field161_0x23c == 0x29) {
          VectorCopy(&Spyro.position,&Spyro.field159_0x22c);
          iVar9 = Spyro.position.z;
        }
        else {
          VectorCopy(&local_28,&Spyro.field159_0x22c);
          local_28.z = local_28.z + 0x200;
          local_28.z = RaycastDown(&local_28,0x800);
          VectorCopy(&Spyro.position,&local_28);
          iVar9 = Spyro.field159_0x22c.z;
          if (local_28.z != 0) {
            iVar9 = Spyro.position.z + 0x164;
          }
        }
        Spyro.position.z = iVar9;
        Spyro.rotation.Yaw = Spyro.field160_0x238;
        Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10010480;
        if (Spyro.field161_0x23c != 0x29) {
          DAT_80067ec4 = 0;
        }
        VectorClear(&Spyro.field154_0x21c);
        VectorCopy(&Vec3_80067ee4,&Spyro.position);
        if (Spyro.health < 0) {
          Spyro.health = 0;
        }
        DAT_80067fc7 = 0;
        DAT_80067ef0 = Spyro.rotation.Yaw;
        if (Vec3_80068008.x == 0) {
          pOVar8 = &Orbit_80067ff4;
          OrbitRotateLongitude(&Orbit_80067ff4,&Orbit_80061560,Spyro.rotation.Yaw);
          pOVar7 = &Orbit_80067f14;
          Orbit_80067ff4.Longitude = Orbit_80067ff4.Longitude - DAT_80067ef0 & 0xfff;
        }
        else {
          pOVar8 = &Orbit_80067f14;
          FUN_8001ee18(&Orbit_80067f14,&Vec3_80068008,&Vec3_80067ee4);
          FUN_8001efa8(&Orbit_80067f14,&Orbit_80067f14);
          pOVar7 = &Orbit_80067ff4;
          Orbit_80067f14.Longitude = Orbit_80067f14.Longitude + DAT_80067ef0 & 0xfff;
        }
        OrbitRotateLongitude(pOVar7,pOVar8,0);
        OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f14,DAT_80067ef0);
        OrbitRotateLongitude(&Orbit_80067f00,&Orbit_80067f14,DAT_80067ef0);
        OrbitClear(&cameraOrbitVelocity);
        VectorFromOrbitWithCenter(&Vec3_80067ef4,&cameraOrbitPosition,&Vec3_80067ee4);
        VectorCopy(&cameraPosition,&Vec3_80067ef4);
        DAT_80067fb8 = 0;
        DAT_80067fbc = 0;
        DAT_80067fc9 = 0;
        INT_80067ed4 = 1;
      }
    }
    else if (INT_80067ed4 == 1) {
      VectorCopy(&Vec3_80067ee4,&Spyro.position);
      DAT_80067ef0 = Spyro.rotation.Yaw;
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80067ff4,Spyro.rotation.Yaw);
      OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar9 * 0x14 + -0x7ff9e8d4),0);
      OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar9 * 0x14 + -0x7ff9e848),0);
      OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
      OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
      if (DAT_80067fec != 9) {
        blackOverlayOpacity = (DAT_80067ed8 + -0x10) * -0x10 + 0x100;
      }
      if (blackOverlayOpacity < 1) {
        blackOverlayOpacity = 0;
        DAT_80067fec = 0;
      }
      DAT_80067100 = 0;
      if (0xff < blackOverlayOpacity) {
        blackOverlayOpacity = 0xff;
      }
    }
LAB_800213f0:
    Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10000002;
    break;
  case Dialogue:
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80067ff4,DAT_80067ef0);
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = (uint)(currentNPC->eulerRotation).yaw * 0x10 + 0x800;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar9 * 0x14 + -0x7ff9e8d4),0);
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar9 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
    if (((DAT_80067edc & 2) == 0) && (cameraOrbitAcceleration_Scale.Longitude < 0x4c)) {
      cameraOrbitAcceleration_Scale.Longitude = 0x4c;
    }
  }
  DAT_80067ed8 = DAT_80067ed8 + deltaTime;
  return;
}



void FUN_80021558(void)

{
  if (cameraState == Passive) {
    OrbitClear(&cameraOrbitAcceleration);
    if (((DAT_80067edc & 4) != 0) || (DAT_80067ec4 != 0)) {
      cameraOrbitAcceleration.Latitude =
           Orbit_80061560.Latitude - cameraOrbitPosition.Latitude & 0xfff;
      if (0x800 < (uint)cameraOrbitAcceleration.Latitude) {
        cameraOrbitAcceleration.Latitude = cameraOrbitAcceleration.Latitude - 0x1000;
      }
    }
    if (cameraRotateInput != 0) {
      cameraOrbitAcceleration.Longitude = cameraRotateInput;
    }
  }
  else {
    if ((((int)cameraState < 6) || (0xb < (int)cameraState)) || ((int)cameraState < 9)) {
      if (DAT_80067040 != (code *)0x0) {
        (*DAT_80067040)();
        return;
      }
    }
    else {
      if (INT_80067ed4 == 0) {
        OrbitClear(&cameraOrbitAcceleration);
        goto LAB_800216c0;
      }
      if ((Spyro.state != Flop) || (Spyro.airVelocityFlag != FALLING)) {
        OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f14,0);
        return;
      }
    }
    FUN_8001db58();
  }
LAB_800216c0:
  UpdateCameraOrbitPhysics();
  return;
}



void SetCameraState(CameraState newCameraState)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int rotation;
  Vec3 VStack_50;
  undefined auStack_40 [16];
  Vec3 local_30;
  
  if ((newCameraState == Passive) &&
     ((((((DAT_80067edc & 1) == 0 && (cameraState != QuickAlign)) && (DAT_80067fd8 != 3)) ||
       ((Spyro.maybeSubstate == Climb || (DAT_80067ee0 != '\0')))) ||
      (((inputStates[0].current & (TriggerRight|BumperRight)) != None &&
       ((inputStates[0].current & (TriggerLeft|BumperLeft)) != None)))))) {
    newCameraState = Align;
  }
  DAT_80067fcb = 0;
  DAT_80067114 = 0;
  if ((Spyro.field151_0x210 & 0x2000U) == 0) {
    Spyro.field168_0x260 = 0;
  }
  switch(newCameraState) {
  case Align:
  case Passive:
    INT_80067ed4 = 0;
    DAT_80067fc4 = 0;
    DAT_80067fc5 = 0;
    DAT_80067fc6 = 0;
    DAT_80067fc9 = 0;
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    goto LAB_80021d30;
  case Moving:
    INT_80067ed4 = 0;
    DAT_80067fc4 = 0;
    DAT_80067fc5 = 0;
    DAT_80067fc6 = 1;
    DAT_80067fc9 = 0;
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
    FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
    break;
  case ChaseCharge:
  case QuickAlign:
    INT_80067ed4 = 0;
    DAT_80067fc4 = 0;
    DAT_80067fc5 = 0;
    DAT_80067fc6 = 1;
    DAT_80067fc9 = 0;
    DAT_80067ee0 = '\0';
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
    FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
    break;
  default:
    if (DAT_800670ac != (code *)0x0) {
      (*DAT_800670ac)(newCameraState);
      cameraState = newCameraState;
      DAT_80067ed8 = 0;
      DAT_80067fd8 = 0;
      return;
    }
    DAT_80067114 = 0;
    cameraState = newCameraState;
    DAT_80067ed8 = 0;
    DAT_80067fcb = 0;
    DAT_80067fd8 = 0;
    return;
  case Look:
    INT_80067ed4 = 0;
    DAT_80067fcc = 0;
    DAT_80067fd0 = 0;
    DAT_80067fe4 = 0;
    DAT_80067fe8 = 0;
    DAT_80067fc4 = 0;
    DAT_80067fc5 = 0;
    DAT_80067fc6 = 1;
    DAT_80067fc9 = 0;
    DAT_80067ee0 = '\0';
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
    FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
    break;
  case AlchemistCutscene:
  case TransitioningToParagliding?:
    DAT_80067114 = 0;
    cameraState = newCameraState;
    INT_80067ed4 = 0;
    DAT_80067ed8 = 0;
    DAT_80067ee0 = 0;
    DAT_80067fb8 = 0;
    DAT_80067fbc = 0;
    DAT_80067fc4 = 1;
    DAT_80067fc5 = 1;
    DAT_80067fcb = 0;
    DAT_80067fd8 = 0;
    return;
  case Freecam?:
    if ((DAT_80068038 & 2) == 0) {
      if (1 < cameraState + ~QuickAlign) {
        INT_80067ed4 = 0;
      }
    }
    else {
      INT_80067ed4 = 3;
      VectorCopy(&Vec3_8006803c,&cameraPosition);
      DAT_80068048 = (int)VectorShort_80067ec8.X;
      DAT_8006804c = (int)VectorShort_80067ec8.Y;
      DAT_80068050 = (int)VectorShort_80067ec8.Z;
      DAT_80067fc9 = 1;
    }
                    // WARNING: Read-only address (ram,0x80067f00) is written
    cameraState = newCameraState;
    DAT_80067ed8 = 0;
    DAT_80067ee0 = 0;
    DAT_80067fb8 = 0;
    DAT_80067fbc = 0;
    DAT_80067fc4 = 1;
    DAT_80067fc5 = 1;
    DAT_80067fd8 = 0;
    return;
  case Dialogue:
    INT_80067ed4 = 0;
    DAT_80067fc4 = 0;
    DAT_80067fc5 = 1;
    DAT_80067fc6 = 1;
    DAT_80067fc9 = 0;
    DAT_80067ee0 = '\0';
    local_30.x = cosineLookupTable[(currentNPC->eulerRotation).yaw] * 0xd >> 5;
    local_30.z = 0x164;
    local_30.y = sineLookupTable[(currentNPC->eulerRotation).yaw] * 0xd >> 5;
    VectorAdd(&local_30,&local_30,&currentNPC->position);
    local_30.z = RaycastDown(&local_30,0x800);
    if (local_30.z == 0) {
      VectorCopy(&local_30,&Spyro.position);
    }
    else {
      local_30.z = local_30.z + 0x164;
    }
    VectorCopy(&VStack_50,&Spyro.position);
    VStack_50.z = VStack_50.z + -0x124;
    rotation = (uint)(currentNPC->eulerRotation).yaw * 0x10 + 0x800;
    uVar2 = Orbit_80067f00.Longitude - rotation & 0xfff;
    if (0x800 < uVar2) {
      uVar2 = uVar2 - 0x1000;
    }
    uVar2 = uVar2 >> 0x1f;
    iVar3 = 0;
    do {
      OrbitRotateLongitude(&Orbit_80067f14,(Orbit *)(uVar2 * 0x14 + -0x7ff9e9c4),rotation);
      VectorFromOrbitWithCenter(auStack_40,&Orbit_80067f14,&local_30);
      iVar1 = FUN_8003dcc0(auStack_40,0x100);
      if (((iVar1 == 0) && (iVar1 = FUN_8001f618(&cameraPosition,auStack_40,0), iVar1 != 0)) &&
         (iVar1 = FUN_8001f618(auStack_40,&local_30,0), iVar1 != 0)) break;
      uVar2 = 1 - uVar2;
      iVar3 = iVar3 + 1;
    } while (iVar3 < 2);
    if (iVar3 == 2) {
      uVar2 = 2;
    }
    if (-1 < (int)DAT_80066f5c) {
      uVar2 = DAT_80066f5c;
    }
    DAT_80066f5c = uVar2;
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&Orbit_80067ff4,(Orbit *)(DAT_80066f5c * 0x14 + -0x7ff9e9c4),0);
LAB_80021d30:
    FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
    FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
  }
  OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
                    // WARNING: Read-only address (ram,0x80067f00) is written
  cameraState = newCameraState;
  DAT_80067ed8 = 0;
  DAT_80067fd8 = 0;
  return;
}



void FUN_80021dc0(void)

{
  bool bVar1;
  CameraState CVar2;
  undefined4 uVar3;
  
  CVar2 = DAT_80067fec;
  switch(cameraState) {
  case Align:
    if (DAT_80067fec != Align) goto LAB_80022064;
    if (((inputStates[0].current & Triangle) == None) || (Spyro.field123_0x1c1 == '\0')) {
      if (((((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) == None)
           || (((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
               ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)))) ||
          (CVar2 = QuickAlign, Spyro.field162_0x240 != 0)) &&
         (CVar2 = cameraStateLookup[Spyro.state], cameraState == CVar2)) {
        if (DAT_80067fd8 == 3) {
          SetCameraState(6);
          INT_80067ed4 = 1;
          return;
        }
        if ((DAT_80067edc & 1) == 0) {
          return;
        }
        if (0x3ff < DAT_80067fb4) {
          return;
        }
        if (DAT_80067fb8 != 0) {
          return;
        }
        if (DAT_80067ee0 != '\0') {
          return;
        }
        CVar2 = Passive;
        if (INT_80067ed4 - 1U < 2) {
          return;
        }
      }
      goto LAB_80022064;
    }
    break;
  case Moving:
    if (DAT_80067fec != Align) goto LAB_80022064;
    if (((inputStates[0].current & Triangle) == None) || (Spyro.field123_0x1c1 == '\0')) {
      if (((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) != None) &&
         ((((inputStates[0].current & (TriggerRight|BumperRight)) != None &&
           ((inputStates[0].current & (TriggerLeft|BumperLeft)) != None)) &&
          (CVar2 = QuickAlign, Spyro.field162_0x240 == 0)))) goto LAB_80022064;
      CVar2 = cameraStateLookup[Spyro.state];
      goto joined_r0x80022050;
    }
    break;
  case ChaseCharge:
    if (DAT_80067fec != Align) goto LAB_80022064;
    CVar2 = cameraStateLookup[Spyro.state];
joined_r0x80022050:
    if (cameraState == CVar2) {
      return;
    }
    if (CVar2 == Align) {
      CVar2 = Passive;
    }
    goto LAB_80022064;
  default:
    if (DAT_80067014 != (code *)0x0) {
      (*DAT_80067014)();
      return;
    }
    return;
  case Passive:
    if ((DAT_80067fec != Align) && (DAT_80067fec != AlchemistRelated)) goto LAB_80022064;
    if (((inputStates[0].current & Triangle) == None) || (Spyro.field123_0x1c1 == '\0')) {
      if ((((((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) != None)
            && ((inputStates[0].current & (TriggerRight|BumperRight)) != None)) &&
           ((inputStates[0].current & (TriggerLeft|BumperLeft)) != None)) &&
          (CVar2 = QuickAlign, Spyro.field162_0x240 == 0)) ||
         (CVar2 = cameraStateLookup[Spyro.state], cameraStateLookup[Spyro.state] != Align))
      goto LAB_80022064;
      if (DAT_80067fb8 == 0) {
        if ((INT_80067ed4 == 1) || (DAT_80067ed8 < 0x3c)) {
          if ((((DAT_80067edc & 1) == 0) && (CVar2 = Align, INT_80067ed4 != 1)) ||
             (CVar2 = Align, DAT_80067ee0 != '\0')) goto LAB_80022064;
          if (DAT_80067fd8 != 3) {
            return;
          }
        }
        else {
          uVar3 = 0;
          if (DAT_80067fec == AlchemistRelated) {
            uVar3 = 0x11;
          }
          SetCameraState(uVar3);
        }
        INT_80067ed4 = 1;
        return;
      }
      goto LAB_8002245c;
    }
    break;
  case Look:
    if ((((((DAT_80067fec != Align) && (1 < DAT_80067fec + ~TransitioningToParagliding?)) &&
          (DAT_80067fec != Vehicle)) &&
         ((1 < DAT_80067fec + ~New_Name_(1) && (1 < DAT_80067fec + ~AlchemistRelated)))) &&
        (DAT_80067fec != New_Name_(2))) &&
       (((DAT_80067fec != New_Name_(5) && (DAT_80067fec != 0x1a)) && (DAT_80067fec != New_Name_(7)))
       )) {
      SetCameraState();
    }
    if (Spyro.field123_0x1c1 != '\0') {
      if (((inputStates[0].current & Triangle) == None) &&
         (((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
          ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)))) {
        if (INT_80067ed4 == 3) {
          INT_80067ed4 = 4;
          DAT_80067ed8 = 0;
          return;
        }
        if (INT_80067ed4 == 4) {
          if (Spyro.field90_0x16c == 4) {
            if (0xd < DAT_80067ed8) {
              DAT_80067ed8 = 0xd;
              return;
            }
            return;
          }
          if (DAT_80067ed8 < 0x10) {
            return;
          }
        }
        DAT_80067114 = 0;
        Spyro.field168_0x260 = 0;
        SetCameraState(0);
        INT_80067ed4 = 2;
        return;
      }
      if (INT_80067ed4 == 4) {
        INT_80067ed4 = 3;
        return;
      }
      if (DAT_80067fcb == '\0') {
        return;
      }
      if (Spyro.powerFireballTime != 0) {
        return;
      }
      if (Spyro.powerIceTime != 0) {
        return;
      }
      if (Spyro.powerRiptoPlasmaTime != 0) {
        return;
      }
      if (cheatFireball == '\0') {
        DAT_80067114 = 0;
        DAT_80067fcb = 0;
        Spyro.field168_0x260 = 0;
        return;
      }
      return;
    }
    Spyro.field168_0x260 = 0;
    DAT_80067114 = 0;
    CVar2 = cameraStateLookup[Spyro.state];
    goto LAB_80022064;
  case QuickAlign:
    if (DAT_80067fc8 != '\0') {
      SetCameraState(7);
    }
    if (0xfff < DAT_80067fb4) {
      return;
    }
LAB_8002245c:
    CVar2 = Align;
    goto LAB_80022064;
  case AlchemistCutscene:
    if (INT_80067ed4 != 0x82) {
      return;
    }
    goto LAB_800225a0;
  case Freecam?:
    if (INT_80067ed4 != 0x82) {
      if ((DAT_80068038 & 8) == 0) {
        return;
      }
      if (*DAT_80068028 + -1 <= DAT_8006802c) {
        DAT_80067fec = 0;
        SetCameraState(cameraStateLookup[Spyro.state]);
        DAT_80067100 = 0;
        return;
      }
      return;
    }
    goto LAB_800225a0;
  case TransitioningToParagliding?:
    if (DAT_80067fec != Align) {
      if (DAT_80067fec == AlchemistCutscene) {
        bVar1 = blackOverlayOpacity < 0x80;
        SetCameraState(9);
        DAT_80067ed8 = (bVar1 ^ 1) << 4;
        return;
      }
      return;
    }
    goto LAB_800225b4;
  case Dialogue:
    if ((DAT_80067fec != Align) && (DAT_80067fec != cameraState)) goto LAB_80022064;
    if (currGameState == Dialogue) {
      return;
    }
LAB_800225a0:
    DAT_80067fec = Align;
LAB_800225b4:
    CVar2 = cameraStateLookup[Spyro.state];
    goto LAB_80022064;
  }
  CVar2 = Look;
LAB_80022064:
  SetCameraState(CVar2);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void UpdateTerrainAnimations(int param_1)

{
  byte bVar1;
  byte bVar2;
  byte bVar3;
  int iVar4;
  Vec3 *pVVar5;
  uint uVar6;
  uint uVar7;
  undefined4 *puVar8;
  uint uVar9;
  uint *puVar10;
  undefined4 *puVar11;
  uint *puVar12;
  byte *pbVar13;
  undefined4 *puVar14;
  undefined4 uVar15;
  int iVar16;
  uint uVar17;
  uint uVar18;
  uint uVar19;
  uint uVar20;
  int iVar21;
  uint uVar22;
  int iVar23;
  uint uVar24;
  int iVar25;
  char cVar26;
  int iVar27;
  int iVar28;
  uint uVar29;
  int *piVar30;
  uint *puVar31;
  int *piVar32;
  uint *puVar33;
  
  piVar32 = DAT_800681d8 + DAT_800681d4;
  piVar30 = DAT_800681d8;
  while (iVar27 = *piVar30, piVar30 != piVar32) {
    piVar30 = piVar30 + 1;
    if ((*(byte *)(iVar27 + 1) & 2) == 0) {
      uVar6 = (uint)*(byte *)(iVar27 + 3) - param_1;
      if ((int)uVar6 < 1) {
        bVar1 = *(byte *)((uint)*(byte *)(iVar27 + 2) * 4 + iVar27 + 8 + (*(byte *)(iVar27 + 1) & 1)
                         + 1);
        while( true ) {
          pbVar13 = (byte *)((uint)bVar1 * 4 + iVar27 + 8);
          bVar2 = *pbVar13;
          *(byte *)(iVar27 + 1) = bVar2 & 3;
          uVar7 = (uint)(bVar2 >> 2);
          if (((bVar2 & 2) != 0) || (uVar7 = uVar7 + uVar6, 0 < (int)uVar7)) break;
          bVar1 = pbVar13[(bVar2 & 1) + 1];
          uVar6 = uVar7;
        }
        *(char *)(iVar27 + 3) = (char)uVar7;
        *(byte *)(iVar27 + 2) = bVar1;
        puVar11 = (undefined4 *)((uint)pbVar13[3] * 0x30 + DAT_800673f4);
        puVar14 = (undefined4 *)(*(int *)(iVar27 + 4) * 0x30 + DAT_800673f4);
        puVar8 = puVar11 + 0xc;
        do {
          uVar15 = puVar11[1];
          *puVar14 = *puVar11;
          puVar14[1] = uVar15;
          puVar11 = puVar11 + 2;
          puVar14 = puVar14 + 2;
        } while (puVar11 != puVar8);
      }
      else {
        *(char *)(iVar27 + 3) = (char)uVar6;
      }
    }
  }
  piVar32 = DAT_800681e0 + DAT_800681dc;
  piVar30 = DAT_800681e0;
  while (iVar27 = *piVar30, piVar30 != piVar32) {
    piVar30 = piVar30 + 1;
    if ((*(byte *)(iVar27 + 1) & 2) == 0) {
      uVar6 = (uint)*(byte *)(iVar27 + 3) - param_1;
      if ((int)uVar6 < 1) {
        bVar1 = *(byte *)((uint)*(byte *)(iVar27 + 2) * 4 + iVar27 + 8 + (*(byte *)(iVar27 + 1) & 1)
                         + 1);
        iVar16 = 0;
        while( true ) {
          pbVar13 = (byte *)((uint)bVar1 * 4 + iVar27 + 8);
          bVar3 = *pbVar13;
          bVar2 = pbVar13[3];
          *(byte *)(iVar27 + 1) = bVar3 & 3;
          iVar16 = iVar16 + (char)bVar2;
          uVar7 = (uint)(bVar3 >> 2);
          if (((bVar3 & 2) != 0) || (uVar7 = uVar7 + uVar6, 0 < (int)uVar7)) break;
          bVar1 = pbVar13[(bVar3 & 1) + 1];
          uVar6 = uVar7;
        }
        *(char *)(iVar27 + 3) = (char)uVar7;
        *(byte *)(iVar27 + 2) = bVar1;
        iVar4 = DAT_800673f4 + (uint)*(ushort *)(iVar27 + 4) * 0x30;
        uVar6 = (uint)*(ushort *)(iVar27 + 6) + iVar16 & 0x7f;
        *(short *)(iVar27 + 6) = (short)uVar6;
        cVar26 = (char)(uVar6 >> 2);
        *(char *)(iVar4 + 1) = cVar26;
        *(char *)(iVar4 + 5) = cVar26 + '\x1f';
        *(char *)(iVar4 + 9) = cVar26;
        *(char *)(iVar4 + 0xd) = cVar26 + '\x1f';
        cVar26 = (char)(uVar6 >> 1);
        *(char *)(iVar4 + 0x11) = cVar26;
        *(char *)(iVar4 + 0x15) = cVar26 + '\x1f';
        *(char *)(iVar4 + 0x19) = cVar26;
        *(char *)(iVar4 + 0x1d) = cVar26 + '\x1f';
        bVar1 = cVar26 + 0x20U & 0x3f;
        *(byte *)(iVar4 + 0x21) = bVar1;
        *(byte *)(iVar4 + 0x25) = bVar1 + 0x1f;
        *(byte *)(iVar4 + 0x29) = bVar1;
        *(byte *)(iVar4 + 0x2d) = bVar1 + 0x1f;
      }
      else {
        *(char *)(iVar27 + 3) = (char)uVar6;
      }
    }
  }
  cVar26 = -1;
  piVar32 = DAT_800681e8 + DAT_800681e4;
  piVar30 = DAT_800681e8;
  while (cVar26 = cVar26 + '\x01', piVar30 != piVar32) {
    iVar27 = *piVar30;
    piVar30 = piVar30 + 1;
    if ((*(byte *)(iVar27 + 1) & 2) == 0) {
      uVar6 = (uint)*(byte *)(iVar27 + 3) - param_1;
      if ((int)uVar6 < 1) {
        bVar1 = *(byte *)((uint)*(byte *)(iVar27 + 2) * 8 + iVar27 + 0xc +
                          (*(byte *)(iVar27 + 1) & 1) + 2);
        while( true ) {
          pbVar13 = (byte *)((uint)bVar1 * 8 + iVar27 + 0xc);
          bVar2 = *pbVar13;
          uVar7 = (uint)pbVar13[1];
          *(byte *)(iVar27 + 1) = bVar2;
          if (((bVar2 & 2) != 0) || (uVar7 = uVar7 + uVar6, 0 < (int)uVar7)) break;
          bVar1 = pbVar13[(bVar2 & 1) + 2];
          uVar6 = uVar7;
        }
        *(char *)(iVar27 + 3) = (char)uVar7;
        *(byte *)(iVar27 + 2) = bVar1;
        *(char *)(*(int *)(DAT_800673d4 + (uint)*(byte *)(iVar27 + 4) * 4) + 0x18) = cVar26;
      }
      else {
        *(char *)(iVar27 + 3) = (char)uVar6;
      }
    }
  }
  cVar26 = -1;
  piVar32 = DAT_800681f0 + DAT_800681ec;
  piVar30 = DAT_800681f0;
  while (cVar26 = cVar26 + '\x01', piVar30 != piVar32) {
    iVar27 = *piVar30;
    piVar30 = piVar30 + 1;
    if ((*(byte *)(iVar27 + 1) & 2) == 0) {
      uVar6 = (uint)*(byte *)(iVar27 + 3) - param_1;
      if ((int)uVar6 < 1) {
        bVar1 = *(byte *)((uint)*(byte *)(iVar27 + 2) * 8 + iVar27 + 0xc +
                          (*(byte *)(iVar27 + 1) & 1) + 2);
        while( true ) {
          pbVar13 = (byte *)((uint)bVar1 * 8 + iVar27 + 0xc);
          bVar2 = *pbVar13;
          uVar7 = (uint)pbVar13[1];
          *(byte *)(iVar27 + 1) = bVar2;
          if (((bVar2 & 2) != 0) || (uVar7 = uVar7 + uVar6, 0 < (int)uVar7)) break;
          bVar1 = pbVar13[(bVar2 & 1) + 2];
          uVar6 = uVar7;
        }
        *(char *)(iVar27 + 3) = (char)uVar7;
        *(byte *)(iVar27 + 2) = bVar1;
        *(char *)(*(int *)(DAT_800673d4 + (uint)*(ushort *)(iVar27 + 4) * 4) + 0x19) = cVar26;
      }
      else {
        *(char *)(iVar27 + 3) = (char)uVar6;
      }
    }
  }
  cVar26 = -1;
  piVar32 = DAT_800681f8 + DAT_800681f4;
  piVar30 = DAT_800681f8;
  while (cVar26 = cVar26 + '\x01', piVar30 != piVar32) {
    iVar27 = *piVar30;
    piVar30 = piVar30 + 1;
    if ((*(byte *)(iVar27 + 1) & 2) == 0) {
      uVar6 = (uint)*(byte *)(iVar27 + 3) - param_1;
      if ((int)uVar6 < 1) {
        bVar1 = *(byte *)((uint)*(byte *)(iVar27 + 2) * 8 + iVar27 + 0xc +
                          (*(byte *)(iVar27 + 1) & 1) + 2);
        while( true ) {
          pbVar13 = (byte *)((uint)bVar1 * 8 + iVar27 + 0xc);
          bVar2 = *pbVar13;
          uVar7 = (uint)pbVar13[1];
          *(byte *)(iVar27 + 1) = bVar2;
          if (((bVar2 & 2) != 0) || (uVar7 = uVar7 + uVar6, 0 < (int)uVar7)) break;
          bVar1 = pbVar13[(bVar2 & 1) + 2];
          uVar6 = uVar7;
        }
        *(char *)(iVar27 + 3) = (char)uVar7;
        *(byte *)(iVar27 + 2) = bVar1;
        *(char *)(*(int *)(DAT_800673d4 + (uint)*(byte *)(iVar27 + 4) * 4) + 0x1a) = cVar26;
      }
      else {
        *(char *)(iVar27 + 3) = (char)uVar6;
      }
    }
  }
  cVar26 = -1;
  piVar32 = DAT_80068200 + DAT_800681fc;
  piVar30 = DAT_80068200;
  while (cVar26 = cVar26 + '\x01', piVar30 != piVar32) {
    iVar27 = *piVar30;
    piVar30 = piVar30 + 1;
    if ((*(byte *)(iVar27 + 1) & 2) == 0) {
      uVar6 = (uint)*(byte *)(iVar27 + 3) - param_1;
      if ((int)uVar6 < 1) {
        bVar1 = *(byte *)((uint)*(byte *)(iVar27 + 2) * 8 + iVar27 + 0xc +
                          (*(byte *)(iVar27 + 1) & 1) + 2);
        while( true ) {
          pbVar13 = (byte *)((uint)bVar1 * 8 + iVar27 + 0xc);
          bVar2 = *pbVar13;
          uVar7 = (uint)pbVar13[1];
          *(byte *)(iVar27 + 1) = bVar2;
          if (((bVar2 & 2) != 0) || (uVar7 = uVar7 + uVar6, 0 < (int)uVar7)) break;
          bVar1 = pbVar13[(bVar2 & 1) + 2];
          uVar6 = uVar7;
        }
        *(char *)(iVar27 + 3) = (char)uVar7;
        *(byte *)(iVar27 + 2) = bVar1;
        *(char *)(*(int *)(DAT_800673d4 + (uint)*(ushort *)(iVar27 + 4) * 4) + 0x1b) = cVar26;
      }
      else {
        *(char *)(iVar27 + 3) = (char)uVar6;
      }
    }
  }
  puVar33 = DAT_80068208 + DAT_80068204;
  puVar31 = DAT_80068208;
  while (uVar6 = *puVar31, puVar31 != puVar33) {
    puVar31 = puVar31 + 1;
    if ((*(byte *)(uVar6 + 1) & 2) == 0) {
      uVar7 = (uint)*(byte *)(uVar6 + 3) - param_1;
      if ((int)uVar7 < 1) {
        bVar1 = *(byte *)((uint)*(byte *)(uVar6 + 2) * 8 + uVar6 + 0xc + (*(byte *)(uVar6 + 1) & 1)
                         + 2);
        while( true ) {
          pbVar13 = (byte *)((uint)bVar1 * 8 + uVar6 + 0xc);
          bVar2 = *pbVar13;
          uVar9 = (uint)pbVar13[1];
          *(byte *)(uVar6 + 1) = bVar2;
          if (((bVar2 & 2) != 0) || (uVar9 = uVar9 + uVar7, 0 < (int)uVar9)) break;
          bVar1 = pbVar13[(bVar2 & 1) + 2];
          uVar7 = uVar9;
        }
        *(char *)(uVar6 + 3) = (char)uVar9;
        *(byte *)(uVar6 + 2) = bVar1;
        uVar9 = *(uint *)(pbVar13 + 4);
        uVar22 = uVar9 & 0xff;
        uVar20 = uVar9 >> 8 & 0xff;
        uVar7 = *(uint *)(uVar6 + 4) >> 0x10;
        iVar27 = (*(uint *)(uVar6 + 4) & 0xffff) * 0xc;
        iVar16 = *(int *)(uVar6 + 8) + uVar6;
        if (uVar22 == 0) {
          iVar4 = iVar27 * uVar20;
          puVar10 = (uint *)(iVar16 + iVar4);
          pVVar5 = &TerrainCollisionData->triangles->v1 + uVar7;
          do {
            uVar9 = puVar10[2];
            uVar7 = puVar10[1];
            uVar6 = *puVar10;
            uVar20 = (uVar9 & 0x2000) << 1 | 0x8000;
            iVar23 = (int)(uVar9 << 9) >> 0x17;
            iVar28 = (int)uVar9 >> 0x17;
            uVar9 = uVar9 & 0x1fff;
            if ((iVar23 < 0) || (iVar28 < 0)) {
              uVar29 = iVar28 + uVar9;
              uVar24 = iVar23 + uVar9;
              uVar22 = uVar6 & 0x3fff;
              uVar17 = ((int)uVar6 >> 0x17) + uVar22;
              uVar6 = ((int)(uVar6 << 9) >> 0x17) + uVar22;
              uVar18 = uVar7 & 0x3fff;
              uVar19 = ((int)uVar7 >> 0x17) + uVar18;
              uVar7 = ((int)(uVar7 << 9) >> 0x17) + uVar18;
              if (iVar28 - iVar23 < 0) {
                pVVar5->x = uVar17 & 0x3fff | (uVar6 - uVar17) * 0x800000 |
                            (uVar22 - uVar17 & 0x1ff) << 0xe;
                pVVar5->y = uVar19 & 0x3fff | (uVar7 - uVar19) * 0x800000 |
                            (uVar18 - uVar19 & 0x1ff) << 0xe;
                pVVar5->z = uVar29 & 0x3fff | (uVar24 - uVar29) * 0x1000000 |
                            (uVar9 - uVar29 & 0x1ff) << 0x10 | uVar20;
              }
              else {
                pVVar5->x = uVar6 & 0x3fff | (uVar22 - uVar6) * 0x800000 |
                            (uVar17 - uVar6 & 0x1ff) << 0xe;
                pVVar5->y = uVar7 & 0x3fff | (uVar18 - uVar7) * 0x800000 |
                            (uVar19 - uVar7 & 0x1ff) << 0xe;
                pVVar5->z = uVar24 & 0x3fff | (uVar9 - uVar24) * 0x1000000 |
                            (uVar29 - uVar24 & 0x1ff) << 0x10 | uVar20;
              }
            }
            else {
              pVVar5->x = uVar6;
              pVVar5->y = uVar7;
              pVVar5->z = uVar9 | iVar23 << 0x10 | iVar28 << 0x18 | uVar20;
            }
            puVar10 = puVar10 + 3;
            pVVar5 = pVVar5 + 1;
          } while (puVar10 != (uint *)(iVar16 + iVar4 + iVar27));
        }
        else {
          puVar12 = (uint *)(iVar16 + iVar27 * (uVar9 >> 0x10 & 0xff));
          iVar28 = iVar27 * uVar20;
          pVVar5 = &TerrainCollisionData->triangles->v1 + uVar7;
          puVar10 = (uint *)(iVar16 + iVar28);
          iVar4 = uVar22 * 0x10;
          iVar23 = uVar22 * -0x10 + 0x1000;
          do {
            uVar7 = *puVar10;
            uVar20 = *puVar12;
            uVar9 = uVar7 & 0x3fff;
            gte_ldIR0(iVar23);
            gte_ldsv_(uVar9,((int)(uVar7 << 9) >> 0x17) + uVar9,((int)uVar7 >> 0x17) + uVar9);
            gte_gpf0_b(0);
            uVar7 = uVar20 & 0x3fff;
            iVar21 = ((int)(uVar20 << 9) >> 0x17) + uVar7;
            iVar25 = ((int)uVar20 >> 0x17) + uVar7;
            gte_ldIR0(iVar4);
            gte_ldsv_(uVar7,iVar21,iVar25);
            gte_gpl0_b(0);
            uVar7 = puVar10[1];
            read_mt(iVar21,iVar25,uVar6);
            uVar20 = puVar12[1];
            _DAT_1f800000 = iVar21 >> 0xc;
            _DAT_1f800004 = iVar25 >> 0xc;
            _DAT_1f800008 = (int)uVar6 >> 0xc;
            uVar9 = uVar7 & 0x3fff;
            gte_ldIR0(iVar23);
            gte_ldsv_(uVar9,((int)(uVar7 << 9) >> 0x17) + uVar9,((int)uVar7 >> 0x17) + uVar9);
            gte_gpf0_b(0);
            uVar7 = uVar20 & 0x3fff;
            iVar21 = ((int)(uVar20 << 9) >> 0x17) + uVar7;
            iVar25 = ((int)uVar20 >> 0x17) + uVar7;
            gte_ldIR0(iVar4);
            gte_ldsv_(uVar7,iVar21,iVar25);
            gte_gpl0_b(0);
            uVar7 = puVar10[2];
            read_mt(iVar21,iVar25,_DAT_1f800008);
            uVar9 = puVar12[2];
            _DAT_1f80000c = iVar21 >> 0xc;
            _DAT_1f800010 = iVar25 >> 0xc;
            _DAT_1f800014 = (int)uVar6 >> 0x18;
            uVar6 = uVar7 & 0x1fff;
            gte_ldIR0(iVar23);
            gte_ldsv_(uVar6,((int)(uVar7 << 9) >> 0x17) + uVar6,((int)uVar7 >> 0x17) + uVar6);
            gte_gpf0_b(0);
            uVar6 = uVar9 & 0x1fff;
            uVar20 = ((int)(uVar9 << 9) >> 0x17) + uVar6;
            uVar9 = ((int)uVar9 >> 0x17) + uVar6;
            gte_ldIR0(iVar4);
            gte_ldsv_(uVar6,uVar20,uVar9);
            gte_gpl0_b(0);
            read_mt(uVar20,uVar9,_DAT_1f800014);
            uVar20 = uVar20 >> 0xc;
            uVar9 = uVar9 >> 0xc;
            uVar6 = _DAT_1f800014 >> 0xc;
            if (((int)(uVar9 - uVar20) < 0) || ((int)(uVar6 - uVar20) < 0)) {
              if ((int)(uVar6 - uVar9) < 0) {
                pVVar5->z = uVar6 & 0x3fff | (uVar20 - uVar6 & 0xff) << 0x10 |
                            (uVar9 - uVar6) * 0x1000000;
                pVVar5->y = _DAT_1f800014 & 0x3fff | (_DAT_1f80000c - _DAT_1f800014 & 0x1ff) << 0xe
                            | (_DAT_1f800010 - _DAT_1f800014) * 0x800000;
                uVar6 = _DAT_1f800008 & 0x3fff | (_DAT_1f800000 - _DAT_1f800008 & 0x1ff) << 0xe |
                        (_DAT_1f800004 - _DAT_1f800008) * 0x800000;
                pVVar5->x = uVar6;
              }
              else {
                pVVar5->z = uVar9 & 0x3fff | (uVar6 - uVar9 & 0xff) << 0x10 |
                            (uVar20 - uVar9) * 0x1000000;
                pVVar5->y = _DAT_1f800010 & 0x3fff | (_DAT_1f800014 - _DAT_1f800010 & 0x1ff) << 0xe
                            | (_DAT_1f80000c - _DAT_1f800010) * 0x800000;
                uVar6 = (_DAT_1f800008 - _DAT_1f800004 & 0x1ff) << 0xe;
                pVVar5->x = _DAT_1f800004 & 0x3fff | uVar6 |
                            (_DAT_1f800000 - _DAT_1f800004) * 0x800000;
              }
            }
            else {
              pVVar5->z = uVar20 & 0x3fff | (uVar9 - uVar20 & 0xff) << 0x10 |
                          (uVar6 - uVar20) * 0x1000000 | (uVar7 & 0x2000) << 1 | 0x8000;
              pVVar5->y = _DAT_1f80000c & 0x3fff | (_DAT_1f800010 - _DAT_1f80000c & 0x1ff) << 0xe |
                          (_DAT_1f800014 - _DAT_1f80000c) * 0x800000;
              uVar6 = (_DAT_1f800008 - _DAT_1f800000) * 0x800000;
              pVVar5->x = _DAT_1f800000 & 0x3fff | (_DAT_1f800004 - _DAT_1f800000 & 0x1ff) << 0xe |
                          uVar6;
            }
            puVar10 = puVar10 + 3;
            puVar12 = puVar12 + 3;
            pVVar5 = pVVar5 + 1;
          } while (puVar10 != (uint *)(iVar16 + iVar28 + iVar27));
        }
      }
      else {
        *(char *)(uVar6 + 3) = (char)uVar7;
      }
    }
  }
  return;
}



void FUN_800231f4(void)

{
  ushort uVar1;
  byte bVar2;
  int iVar3;
  Vec3 *pVVar4;
  undefined4 *puVar5;
  uint *puVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  int iVar9;
  uint uVar10;
  uint uVar11;
  undefined4 uVar12;
  uint uVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  uint uVar17;
  uint uVar18;
  char cVar19;
  int iVar20;
  int iVar21;
  uint uVar22;
  int *piVar23;
  uint uVar24;
  int *piVar25;
  int iVar26;
  
  piVar25 = DAT_800681d8 + DAT_800681d4;
  piVar23 = DAT_800681d8;
  while (iVar20 = *piVar23, piVar23 != piVar25) {
    piVar23 = piVar23 + 1;
    puVar7 = (undefined4 *)
             ((uint)*(byte *)(iVar20 + (uint)*(byte *)(iVar20 + 2) * 4 + 0xb) * 0x30 + DAT_800673f4)
    ;
    puVar8 = (undefined4 *)(*(int *)(iVar20 + 4) * 0x30 + DAT_800673f4);
    puVar5 = puVar7 + 0xc;
    do {
      uVar12 = puVar7[1];
      *puVar8 = *puVar7;
      puVar8[1] = uVar12;
      puVar7 = puVar7 + 2;
      puVar8 = puVar8 + 2;
    } while (puVar7 != puVar5);
  }
  piVar25 = DAT_800681e0 + DAT_800681dc;
  for (piVar23 = DAT_800681e0; piVar23 != piVar25; piVar23 = piVar23 + 1) {
    uVar1 = *(ushort *)(*piVar23 + 6);
    iVar20 = DAT_800673f4 + (uint)*(ushort *)(*piVar23 + 4) * 0x30;
    cVar19 = (char)(uVar1 >> 2);
    *(char *)(iVar20 + 1) = cVar19;
    *(char *)(iVar20 + 5) = cVar19 + '\x1f';
    *(char *)(iVar20 + 9) = cVar19;
    *(char *)(iVar20 + 0xd) = cVar19 + '\x1f';
    cVar19 = (char)(uVar1 >> 1);
    *(char *)(iVar20 + 0x11) = cVar19;
    *(char *)(iVar20 + 0x15) = cVar19 + '\x1f';
    *(char *)(iVar20 + 0x19) = cVar19;
    *(char *)(iVar20 + 0x1d) = cVar19 + '\x1f';
    bVar2 = cVar19 + 0x20U & 0x3f;
    *(byte *)(iVar20 + 0x21) = bVar2;
    *(byte *)(iVar20 + 0x25) = bVar2 + 0x1f;
    *(byte *)(iVar20 + 0x29) = bVar2;
    *(byte *)(iVar20 + 0x2d) = bVar2 + 0x1f;
  }
  cVar19 = -1;
  piVar25 = DAT_800681e8 + DAT_800681e4;
  for (piVar23 = DAT_800681e8; cVar19 = cVar19 + '\x01', piVar23 != piVar25; piVar23 = piVar23 + 1)
  {
    *(char *)(*(int *)(DAT_800673d4 + (uint)*(byte *)(*piVar23 + 4) * 4) + 0x18) = cVar19;
  }
  cVar19 = -1;
  piVar25 = DAT_800681f0 + DAT_800681ec;
  for (piVar23 = DAT_800681f0; cVar19 = cVar19 + '\x01', piVar23 != piVar25; piVar23 = piVar23 + 1)
  {
    *(char *)(*(int *)(DAT_800673d4 + (uint)*(ushort *)(*piVar23 + 4) * 4) + 0x19) = cVar19;
  }
  cVar19 = -1;
  piVar25 = DAT_800681f8 + DAT_800681f4;
  for (piVar23 = DAT_800681f8; cVar19 = cVar19 + '\x01', piVar23 != piVar25; piVar23 = piVar23 + 1)
  {
    *(char *)(*(int *)(DAT_800673d4 + (uint)*(byte *)(*piVar23 + 4) * 4) + 0x1a) = cVar19;
  }
  cVar19 = -1;
  piVar25 = DAT_80068200 + DAT_800681fc;
  for (piVar23 = DAT_80068200; cVar19 = cVar19 + '\x01', piVar23 != piVar25; piVar23 = piVar23 + 1)
  {
    *(char *)(*(int *)(DAT_800673d4 + (uint)*(ushort *)(*piVar23 + 4) * 4) + 0x1b) = cVar19;
  }
  piVar25 = DAT_80068208 + DAT_80068204;
  piVar23 = DAT_80068208;
  while (iVar20 = *piVar23, piVar23 != piVar25) {
    piVar23 = piVar23 + 1;
    iVar3 = (*(uint *)(iVar20 + 4) & 0xffff) * 0xc;
    iVar9 = *(int *)(iVar20 + 8) + iVar20;
    iVar26 = iVar3 * (*(uint *)(iVar20 + (uint)*(byte *)(iVar20 + 2) * 8 + 0x10) >> 8 & 0xff);
    puVar6 = (uint *)(iVar9 + iVar26);
    pVVar4 = &TerrainCollisionData->triangles->v1 + (*(uint *)(iVar20 + 4) >> 0x10);
    do {
      uVar17 = puVar6[2];
      uVar14 = puVar6[1];
      uVar10 = *puVar6;
      uVar24 = (uVar17 & 0x2000) << 1 | 0x8000;
      iVar20 = (int)(uVar17 << 9) >> 0x17;
      iVar21 = (int)uVar17 >> 0x17;
      uVar17 = uVar17 & 0x1fff;
      if ((iVar20 < 0) || (iVar21 < 0)) {
        uVar22 = iVar21 + uVar17;
        uVar18 = iVar20 + uVar17;
        uVar11 = uVar10 & 0x3fff;
        uVar13 = ((int)uVar10 >> 0x17) + uVar11;
        uVar10 = ((int)(uVar10 << 9) >> 0x17) + uVar11;
        uVar15 = uVar14 & 0x3fff;
        uVar16 = ((int)uVar14 >> 0x17) + uVar15;
        uVar14 = ((int)(uVar14 << 9) >> 0x17) + uVar15;
        if (iVar21 - iVar20 < 0) {
          pVVar4->x = uVar13 & 0x3fff | (uVar10 - uVar13) * 0x800000 |
                      (uVar11 - uVar13 & 0x1ff) << 0xe;
          pVVar4->y = uVar16 & 0x3fff | (uVar14 - uVar16) * 0x800000 |
                      (uVar15 - uVar16 & 0x1ff) << 0xe;
          pVVar4->z = uVar22 & 0x3fff | (uVar18 - uVar22) * 0x1000000 |
                      (uVar17 - uVar22 & 0x1ff) << 0x10 | uVar24;
        }
        else {
          pVVar4->x = uVar10 & 0x3fff | (uVar11 - uVar10) * 0x800000 |
                      (uVar13 - uVar10 & 0x1ff) << 0xe;
          pVVar4->y = uVar14 & 0x3fff | (uVar15 - uVar14) * 0x800000 |
                      (uVar16 - uVar14 & 0x1ff) << 0xe;
          pVVar4->z = uVar18 & 0x3fff | (uVar17 - uVar18) * 0x1000000 |
                      (uVar22 - uVar18 & 0x1ff) << 0x10 | uVar24;
        }
      }
      else {
        pVVar4->x = uVar10;
        pVVar4->y = uVar14;
        pVVar4->z = uVar17 | iVar20 << 0x10 | iVar21 << 0x18 | uVar24;
      }
      puVar6 = puVar6 + 3;
      pVVar4 = pVVar4 + 1;
    } while (puVar6 != (uint *)(iVar9 + iVar26 + iVar3));
  }
  return;
}



void FUN_8002365c(uint param_1,byte param_2,byte param_3)

{
  byte *pbVar1;
  byte **ppbVar2;
  int iVar3;
  byte **ppbVar4;
  int *piVar5;
  
  piVar5 = &DAT_800681d4;
  while (iVar3 = *piVar5, piVar5 != &DAT_8006820c) {
    ppbVar2 = (byte **)piVar5[1];
    piVar5 = piVar5 + 2;
    ppbVar4 = ppbVar2 + iVar3;
    while (pbVar1 = *ppbVar2, ppbVar2 != ppbVar4) {
      ppbVar2 = ppbVar2 + 1;
      if (*pbVar1 == param_1) {
        pbVar1[1] = pbVar1[1] & param_2 | param_3;
      }
    }
  }
  return;
}



void FUN_800236c0(int param_1)

{
  int *piVar1;
  int **ppiVar2;
  int iVar3;
  int **ppiVar4;
  int *piVar5;
  
  piVar5 = &DAT_800681d4;
  do {
    iVar3 = *piVar5;
    if (piVar5 == &DAT_8006820c) {
      return;
    }
    ppiVar2 = (int **)piVar5[1];
    piVar5 = piVar5 + 2;
    ppiVar4 = ppiVar2 + iVar3;
    while (piVar1 = *ppiVar2, ppiVar2 != ppiVar4) {
      ppiVar2 = ppiVar2 + 1;
      if (*piVar1 << 0x18 == param_1 << 0x18) {
        return;
      }
    }
  } while( true );
}



void FUN_80023710(uint param_1,byte param_2,uint param_3)

{
  uint uVar1;
  byte *pbVar2;
  byte **ppbVar3;
  int iVar4;
  byte **ppbVar5;
  int *piVar6;
  
  piVar6 = &DAT_800681d4;
  while (iVar4 = *piVar6, piVar6 != &DAT_8006820c) {
    ppbVar3 = (byte **)piVar6[1];
    piVar6 = piVar6 + 2;
    uVar1 = param_3 & 1;
    param_3 = param_3 >> 1;
    if (uVar1 == 0) {
      ppbVar5 = ppbVar3 + iVar4;
      while (pbVar2 = *ppbVar3, ppbVar3 != ppbVar5) {
        ppbVar3 = ppbVar3 + 1;
        if (*pbVar2 == param_1) {
          pbVar2[2] = param_2;
        }
      }
    }
  }
  return;
}



undefined8 FUN_80023778(void)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  uint *puVar4;
  uint *puVar5;
  undefined4 *puVar6;
  int iVar7;
  undefined4 *puVar8;
  uint uVar9;
  undefined4 uVar10;
  uint uVar11;
  int *piVar12;
  uint *puVar13;
  uint *puVar14;
  
  iVar3 = DAT_800673d4;
  iVar2 = clock;
  piVar12 = (int *)(DAT_800673f0 + 8);
  uVar11 = *(uint *)(DAT_800673f0 + 0xc);
  puVar13 = (uint *)(DAT_800673f0 + 0x10);
  puVar14 = puVar13 + *piVar12;
  puVar5 = (uint *)(uVar11 >> 4 & 0xff0);
  puVar6 = (undefined4 *)(uVar11 >> 0xc & 0xff0);
  gte_ldfcdir((uVar11 & 0xff) << 4,puVar5,puVar6);
  while( true ) {
    uVar11 = *puVar13;
    bVar1 = puVar13 == puVar14;
    puVar13 = puVar13 + 1;
    if (bVar1) break;
    puVar6 = (undefined4 *)(uVar11 & 0xff);
    puVar8 = puVar6 + -0x1ffe5340;
    puVar5 = (uint *)(uVar11 >> 6);
    if (-1 < (int)uVar11) {
      puVar4 = (uint *)(piVar12 + (uVar11 >> 0x10));
      puVar5 = (uint *)((int)puVar4 + ((uint)puVar5 & 0x3fc) + 4);
      puVar6 = (undefined4 *)((int)puVar6 * 4);
      if ((*(byte *)puVar8 & 1) != 0) {
        iVar7 = *(int *)((int)puVar6 + iVar3);
        uVar11 = *puVar4;
        puVar4 = puVar4 + 1;
        puVar8 = (undefined4 *)
                 (iVar7 + 0x1c + ((uint)*(byte *)(iVar7 + 0x14) + (uint)*(byte *)(iVar7 + 0x17)) * 4
                 );
        do {
          uVar9 = uVar11 >> 0x18 & 3;
          iVar7 = iVar2;
          if ((uVar9 != 0) && (iVar7 = iVar2 * 2, uVar9 == 3)) {
            iVar7 = iVar2 * 3;
          }
          gte_ldRGB(uVar11 & 0xffffff);
          gte_ldIR0(((int)cosineLookupTable[(uVar11 >> 0x18) + iVar7 & 0xff] >> 4) +
                    ((int)cosineLookupTable[(uVar11 >> 0x18) + iVar7 & 0xff] >> 3) + 0x480);
          puVar6 = puVar8 + 1;
          gte_dpcs_b();
          uVar11 = *puVar4;
          puVar4 = puVar4 + 1;
          uVar10 = gte_stRGB2();
          *puVar8 = uVar10;
          puVar8 = puVar6;
        } while (puVar4 != puVar5);
      }
    }
  }
  return CONCAT44(puVar6,puVar5);
}



void FUN_800238dc(uint param_1,uint param_2)

{
  uint uVar1;
  uint *puVar2;
  uint *puVar3;
  int iVar4;
  uint *puVar5;
  int *piVar6;
  
  iVar4 = DAT_800673d4;
  piVar6 = (int *)(DAT_800673f0 + 8);
  puVar2 = (uint *)(DAT_800673f0 + 0x10);
  do {
    puVar3 = puVar2;
    uVar1 = *puVar3;
    if (puVar3 == (uint *)(DAT_800673f0 + 0x10) + *piVar6) {
      return;
    }
    puVar2 = puVar3 + 1;
  } while ((uVar1 & 0xff) != param_1);
  *puVar3 = uVar1 & 0x7fffffff | (param_2 ^ 1) << 0x1f;
  puVar2 = (uint *)(piVar6 + (uVar1 >> 0x10 & 0x7fff));
  puVar3 = (uint *)((uVar1 >> 6 & 0x3fc) + (int)puVar2);
  iVar4 = *(int *)((uVar1 & 0xff) * 4 + iVar4);
  puVar5 = (uint *)(iVar4 + 0x1c +
                   ((uint)*(byte *)(iVar4 + 0x14) + (uint)*(byte *)(iVar4 + 0x17)) * 4);
  do {
    uVar1 = *puVar2;
    puVar2 = puVar2 + 1;
    *puVar5 = uVar1 & 0xffffff;
    puVar5 = puVar5 + 1;
  } while (puVar2 != puVar3);
  return;
}



void FUN_80023994(void)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  uint *puVar4;
  uint *puVar5;
  int iVar6;
  uint *puVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  int *piVar11;
  uint *puVar12;
  uint *puVar13;
  
  iVar2 = DAT_800673d4;
  piVar11 = (int *)((int)DAT_800673f0 + *DAT_800673f0);
  puVar12 = (uint *)(piVar11 + 1);
  puVar13 = puVar12 + *piVar11;
  iVar10 = clock + (clock >> 1);
  while( true ) {
    uVar3 = *puVar12;
    bVar1 = puVar12 == puVar13;
    puVar12 = puVar12 + 1;
    if (bVar1) break;
    puVar4 = (uint *)(piVar11 + (uVar3 >> 0x10));
    puVar5 = (uint *)((uVar3 >> 6 & 0x3fc) + (int)puVar4);
    if ((*(byte *)((int)&DAT_8006b300 + (uVar3 & 0xff)) & 1) != 0) {
      iVar6 = *(int *)((uVar3 & 0xff) * 4 + iVar2);
      puVar7 = (uint *)(iVar6 + 0x1c + (uint)*(byte *)(iVar6 + 0x17) * 4);
      uVar3 = *puVar4;
      do {
        uVar8 = uVar3 + iVar10;
        uVar9 = uVar3 >> 0x10;
        uVar3 = puVar4[1];
        *puVar7 = (cosineLookupTable[uVar8 & 0xff] * 0x140 >> 0x10) + uVar9 | *puVar7 & 0xfffffc00;
        puVar4 = puVar4 + 1;
        puVar7 = puVar7 + 1;
      } while (puVar4 != puVar5);
    }
  }
  return;
}



void FUN_80023a9c(void)

{
  uint *puVar1;
  bool bVar2;
  byte bVar3;
  int iVar4;
  uint uVar5;
  uint *puVar6;
  uint *puVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  int *piVar11;
  uint *puVar12;
  uint *puVar13;
  
  iVar4 = DAT_800673d4;
  piVar11 = (int *)(DAT_800673f0 + *(int *)(DAT_800673f0 + 4));
  puVar12 = (uint *)(piVar11 + 1);
  puVar13 = puVar12 + *piVar11;
  iVar10 = clock + (clock >> 1);
  while( true ) {
    uVar5 = *puVar12;
    bVar2 = puVar12 == puVar13;
    puVar12 = puVar12 + 1;
    if (bVar2) break;
    puVar6 = (uint *)(piVar11 + (uVar5 >> 0x10));
    puVar7 = (uint *)((uVar5 >> 5 & 0x7f8) + (int)puVar6);
    if ((*(byte *)((int)&DAT_8006b300 + (uVar5 & 0xff)) & 1) != 0) {
      iVar8 = *(int *)((uVar5 & 0xff) * 4 + iVar4);
      bVar3 = *(byte *)(iVar8 + 0x17);
      do {
        uVar5 = *puVar6;
        puVar1 = puVar6 + 1;
        puVar6 = puVar6 + 2;
        uVar9 = uVar5 + iVar10 & 0xff;
        *(uint *)((uVar5 >> 0xe & 0x3fc) + iVar8 + 0x1c + (uint)bVar3 * 4) =
             *puVar1 + ((int)sineLookupTable[uVar9 + 0x20] >> 10) +
             ((int)sineLookupTable[uVar9] >> 8) * 0x400 +
             ((int)cosineLookupTable[uVar9] >> 8) * 0x200000;
      } while (puVar6 != puVar7);
    }
  }
  return;
}


/*
Unable to decompile 'FUN_80023bb4'
Cause: Exception while decompiling 80023bb4: process: timeout

*/


void RenderSkyboxes(undefined4 param_1,uint param_2,uint param_3)

{
  bool bVar1;
  char cVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint *puVar7;
  uint *puVar8;
  uint *puVar9;
  undefined2 *puVar10;
  uint uVar11;
  uint *puVar12;
  uint *puVar13;
  uint uVar14;
  uint uVar15;
  int iVar16;
  uint **ppuVar17;
  uint **ppuVar18;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  uint *puVar19;
  uint *puVar20;
  undefined4 unaff_s2;
  int iVar21;
  undefined4 unaff_s3;
  uint uVar22;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  uint *puVar23;
  undefined4 unaff_s6;
  ushort *puVar24;
  undefined4 unaff_s7;
  int iVar25;
  ushort *puVar26;
  uint uVar27;
  undefined4 *puVar28;
  undefined *puVar29;
  undefined *puVar30;
  undefined4 unaff_s8;
  undefined4 *puVar33;
  undefined4 unaff_retaddr;
  undefined4 *puVar34;
  undefined auStackX_0 [16];
  undefined *puVar31;
  undefined *puVar32;
  
  DAT_8006aa0c = &DAT_80066d38;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  FUN_80048d18(1);
  iVar3 = DAT_80067ec4;
  gte_ldR11R12(Mat33_80067e84.R12R11);
  gte_ldR13R21(Mat33_80067e84.R21R13);
  gte_ldR22R23(Mat33_80067e84.R23R22);
  gte_ldR31R32(Mat33_80067e84.R32R31);
  gte_ldR33(Mat33_80067e84.R33);
  gte_ldtr(0,0,0);
  puVar33 = &DAT_1f8003c0;
  puVar34 = (undefined4 *)((int)&DAT_1f8003c0 + DAT_800681b8);
  puVar19 = (uint *)(primitiveBuffer_next + 4);
  uVar22 = 0;
  iVar21 = DAT_80067034 + -0x400;
  puVar20 = puVar19;
  puVar29 = DAT_800681bc;
  while (cVar2 = *(char *)puVar33, puVar8 = (uint *)primitiveBuffer_next, puVar33 != puVar34) {
    puVar28 = *(undefined4 **)puVar29;
    puVar33 = (undefined4 *)((int)puVar33 + 1);
    puVar30 = puVar29 + 4;
    puVar31 = puVar29 + 4;
    puVar32 = puVar29 + 4;
    puVar29 = puVar29 + 4;
    if (cVar2 != '\0') {
      gte_ldVXY0(*puVar28);
      gte_ldVZ0((int)puVar28[1] >> 0x10);
      gte_rtv0_b();
      uVar14 = puVar28[3];
      iVar4 = gte_stIR3();
      iVar25 = (int)puVar28[2] >> 0x10;
      puVar29 = puVar30;
      if (0 < iVar4 - (short)puVar28[1]) {
        iVar4 = (int)(short)puVar28[2];
        uVar5 = puVar28[5];
        uVar27 = 0xffffffff;
        uVar6 = puVar28[6];
        gte_ldVXY0((iVar4 - (uVar5 >> 10 & 0x7ff)) + (iVar25 - (uVar5 & 0x3ff)) * 0x10000);
        gte_ldVZ0((uVar5 >> 0x15) + ((int)uVar14 >> 0x10));
        puVar8 = puVar28 + 6;
        ppuVar17 = (uint **)&DAT_1f800000;
        do {
          puVar7 = puVar8;
          gte_rtps_b();
          uVar5 = uVar6 >> 0x15;
          uVar11 = uVar6 >> 10;
          uVar15 = uVar6 & 0x3ff;
          uVar6 = puVar7[1];
          iVar16 = gte_stSXY2();
          gte_ldVXY0((iVar4 - (uVar11 & 0x7ff)) + (iVar25 - uVar15) * 0x10000);
          gte_ldVZ0(uVar5 + ((int)uVar14 >> 0x10));
          puVar12 = (uint *)(iVar16 * 0x20);
          if (iVar16 + -0xd0000 < 1) {
            puVar12 = (uint *)((int)puVar12 + 1);
          }
          if (-1 < iVar16 + -0xe40000) {
            puVar12 = (uint *)((int)puVar12 + 2);
          }
          puVar9 = (uint *)(iVar16 * 0x10000 + -0x2000000);
          if (iVar16 * 0x10000 < 1) {
            puVar12 = puVar12 + 1;
          }
          ppuVar18 = ppuVar17 + 1;
          if (-1 < (int)puVar9) {
            puVar12 = puVar12 + 2;
          }
          uVar27 = uVar27 & (uint)puVar12;
          *ppuVar17 = puVar12;
          uVar5 = DAT_80067410;
          puVar8 = puVar7 + 1;
          ppuVar17 = ppuVar18;
        } while (ppuVar18 != (uint **)((uVar14 & 0xff) * 4 + 0x1f800000));
        puVar29 = puVar31;
        if ((uVar27 & 0xf) == 0) {
          puVar23 = (uint *)(((uVar14 & 0xffff) >> 6 & 0x3fc) + (int)puVar7);
          puVar24 = (ushort *)(((uint)puVar28[4] >> 0x10) + (int)puVar23);
          uVar14 = (uint)*puVar24;
          puVar26 = (ushort *)((puVar28[4] & 0xffff) + (int)puVar24);
          uVar6 = 0;
          puVar13 = puVar7;
          if (iVar3 != 0) {
            puVar13 = &DAT_800683f0;
            puVar9 = puVar23 + 1;
            gte_ldfcdir(DAT_80067408,DAT_8006740c,DAT_80067410);
            gte_ldIR0(iVar3);
            gte_ldRGB(*puVar7);
            puVar7 = puVar7 + 1;
            puVar12 = puVar13;
            do {
              gte_dpcs_b();
              uVar27 = *puVar7;
              puVar7 = puVar7 + 1;
              param_2 = gte_stRGB2();
              gte_ldRGB(uVar27);
              *puVar12 = param_2;
              puVar12 = puVar12 + 1;
              param_3 = uVar5;
            } while (puVar7 != puVar9);
          }
          while( true ) {
            while (bVar1 = uVar6 != 0, uVar6 = uVar6 - 1, bVar1) {
              uVar27 = uVar14 << 2;
              uVar14 = (uint)(short)puVar24[1];
              puVar24 = puVar24 + 1;
              puVar8 = puVar9;
              uVar5 = param_2;
              if (-1 < (int)uVar27) {
                puVar8 = puVar12;
                puVar12 = puVar9;
                uVar5 = param_3;
                param_3 = param_2;
              }
              param_2 = param_3;
              puVar9 = puVar12;
              puVar12 = *(uint **)((uVar27 & 0x3fc) + 0x1f800000);
              param_3 = *(uint *)((uVar27 >> 8 & 0x1fc) + (int)puVar13);
              if (((uint)puVar8 & (uint)puVar9 & (uint)puVar12 & 0xf) == 0) {
                puVar20[2] = (int)puVar8 >> 5;
                if ((uVar5 == param_2) && (uVar5 == param_3)) {
                  puVar20[3] = (int)puVar9 >> 5;
                  puVar20[4] = (int)puVar12 >> 5;
                  puVar20[1] = uVar5 + 0xf0000000;
                  uVar5 = uVar22 ^ (uint)puVar20;
                  uVar22 = 0x84000000;
                  *(uint *)primitiveBuffer_next = uVar5;
                  primitiveBuffer_next = (undefined *)puVar20;
                  puVar20 = puVar20 + 5;
                }
                else {
                  puVar20[1] = uVar5;
                  puVar20[3] = param_2;
                  puVar20[4] = (int)puVar9 >> 5;
                  puVar20[5] = param_3;
                  puVar20[6] = (int)puVar12 >> 5;
                  *(uint *)primitiveBuffer_next = uVar22 ^ (uint)puVar20;
                  uVar22 = 0x86000000;
                  primitiveBuffer_next = (undefined *)puVar20;
                  puVar20 = puVar20 + 7;
                }
              }
            }
            bVar1 = puVar24 == puVar26;
            puVar24 = puVar24 + 1;
            puVar29 = puVar32;
            if (bVar1) break;
            uVar27 = *puVar23;
            puVar23 = puVar23 + 1;
            uVar5 = uVar14 >> 6;
            puVar8 = (uint *)primitiveBuffer_next;
            if (iVar21 - (int)puVar20 < 1) goto LAB_80029630;
            uVar6 = uVar14 & 0xff;
            uVar14 = (uint)(short)*puVar24;
            uVar5 = *(uint *)((uVar5 & 0x3fc) + 0x1f800000);
            puVar9 = *(uint **)(uVar6 * 4 + 0x1f800000);
            puVar12 = *(uint **)((uVar27 >> 0x16 & 0x3fc) + 0x1f800000);
            uVar6 = uVar27 & 7;
            if ((uVar5 & (uint)puVar9 & (uint)puVar12 & 0xf) == 0) {
              puVar20[2] = (int)uVar5 >> 5;
              puVar20[4] = (int)puVar9 >> 5;
              puVar20[6] = (int)puVar12 >> 5;
              uVar5 = uVar27 >> 0xf & 0x1fc;
              uVar11 = uVar27 >> 8 & 0x1fc;
              uVar27 = uVar27 >> 1 & 0x1fc;
              if ((uVar5 == uVar11) && (uVar5 == uVar27)) {
                param_2 = *(uint *)(uVar5 + (int)puVar13);
                puVar20[3] = (int)puVar9 >> 5;
                puVar20[4] = (int)puVar12 >> 5;
                puVar20[1] = param_2 + 0xf0000000;
                *(uint *)primitiveBuffer_next = uVar22 ^ (uint)puVar20;
                uVar22 = 0x84000000;
                param_3 = param_2;
                primitiveBuffer_next = (undefined *)puVar20;
                puVar20 = puVar20 + 5;
              }
              else {
                param_2 = *(uint *)(uVar11 + (int)puVar13);
                param_3 = *(uint *)(uVar27 + (int)puVar13);
                puVar20[1] = *(uint *)(uVar5 + (int)puVar13);
                puVar20[3] = param_2;
                puVar20[5] = param_3;
                *(uint *)primitiveBuffer_next = uVar22 ^ (uint)puVar20;
                uVar22 = 0x86000000;
                primitiveBuffer_next = (undefined *)puVar20;
                puVar20 = puVar20 + 7;
              }
            }
            else {
              param_2 = uVar27 >> 8;
              if (uVar6 != 0) {
                param_2 = *(uint *)((param_2 & 0x1fc) + (int)puVar13);
                param_3 = *(uint *)((uVar27 >> 1 & 0x1fc) + (int)puVar13);
              }
            }
          }
        }
      }
    }
  }
LAB_80029630:
  iVar3 = DAT_80067168;
  primitiveBuffer_next = (undefined *)puVar20;
  if (puVar20 != puVar19) {
    puVar10 = *(undefined2 **)(DAT_80067168 + 8);
    *puVar8 = uVar22 ^ 0x80000000;
    *(uint **)(iVar3 + 8) = puVar8;
    if (puVar10 == (undefined2 *)0x0) {
      *(uint **)(iVar3 + 0xc) = puVar19;
    }
    else {
      *puVar10 = (short)puVar19;
      *(char *)(puVar10 + 1) = (char)((uint)puVar19 >> 0x10);
    }
  }
  DAT_80067168 = DAT_80067168 + 8;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_800296d0(int param_1)

{
  undefined8 uVar1;
  int iVar2;
  uint *puVar3;
  uint *puVar4;
  int iVar5;
  undefined4 *puVar6;
  uint uVar7;
  int iVar8;
  int *piVar9;
  undefined4 *puVar10;
  int iVar11;
  uint uVar12;
  int iVar13;
  undefined2 *puVar14;
  uint uVar15;
  uint uVar16;
  undefined4 uVar17;
  uint uVar18;
  int iVar19;
  undefined4 uVar20;
  uint uVar21;
  uint uVar22;
  undefined4 uVar23;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 *puVar24;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 *puVar25;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 *puVar26;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  uint *puVar27;
  undefined *puVar28;
  undefined4 unaff_s8;
  undefined *puVar29;
  undefined4 unaff_retaddr;
  undefined *puVar30;
  undefined8 uVar31;
  undefined auStackX_0 [16];
  
  iVar2 = DAT_80068bfc;
  iVar13 = DAT_80068bf8;
  iVar8 = DAT_80068bf4;
  iVar5 = DAT_80068bf0;
  DAT_8006aa0c = &DAT_80066d38;
  piVar9 = DAT_80068c00;
  if (param_1 < 1) {
    piVar9 = DAT_80068c00 + 0xf;
  }
  gte_ldL11L12(DAT_80068c04);
  gte_ldfcdir(_DAT_80068c08 & 0xffff,_DAT_80068c08 >> 0x10,_DAT_80068c0c & 0xffff);
  gte_ldIR0(_DAT_80068c0c >> 0x10);
  puVar26 = &DAT_1f800200;
  puVar25 = &DAT_1f8003d0;
  iVar11 = DAT_80068c10 * 2;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  if ((DAT_80068c10 & 0x1fffffff) != 0) {
    puVar10 = &DAT_80068c14;
    do {
      uVar17 = puVar10[1];
      *puVar25 = *puVar10;
      puVar25[1] = uVar17;
      puVar25 = puVar25 + 2;
      puVar10 = puVar10 + 2;
    } while (puVar25 != &DAT_1f8003d0 + iVar11);
  }
  do {
    puVar25 = puVar26 + 2;
    *puVar26 = 0xffffffff;
    puVar26[1] = 0xffffffff;
    puVar26 = puVar25;
  } while (puVar25 != &DAT_1f8003d0);
  iVar11 = *piVar9;
  puVar3 = (uint *)(piVar9[1] + (int)piVar9);
  uVar18 = *puVar3;
  puVar4 = puVar3;
  do {
    iVar19 = (int)uVar18 >> 5;
    uVar15 = iVar19 << 5;
    if (iVar19 + iVar5 * -0x10000 < 1) {
      uVar15 = uVar15 | 1;
    }
    if (-1 < iVar19 + iVar8 * -0x10000) {
      uVar15 = uVar15 | 2;
    }
    uVar18 = puVar4[1];
    if (iVar19 * 0x10000 + iVar13 * -0x10000 < 1) {
      uVar15 = uVar15 | 4;
    }
    puVar27 = puVar4 + 1;
    if (-1 < iVar19 * 0x10000 + iVar2 * -0x10000) {
      uVar15 = uVar15 | 8;
    }
    *puVar4 = uVar15;
    puVar4 = puVar27;
  } while (puVar27 != puVar3 + iVar11);
  iVar5 = gte_stIR0();
  puVar25 = (undefined4 *)(piVar9[3] + (int)piVar9);
  puVar26 = puVar25;
  if (iVar5 != 0) {
    iVar5 = piVar9[2];
    puVar26 = &DAT_800683f0;
    gte_ldRGB(*puVar25);
    puVar6 = puVar25 + 1;
    puVar10 = puVar26;
    do {
      gte_dpcs_b();
      uVar17 = *puVar6;
      puVar6 = puVar6 + 1;
      uVar20 = gte_stRGB2();
      gte_ldRGB(uVar17);
      *puVar10 = uVar20;
      puVar10 = puVar10 + 1;
    } while (puVar6 != puVar25 + iVar5 + 1);
  }
  puVar25 = puVar26;
  if (DAT_80067ec4 != 0) {
    iVar5 = piVar9[2];
    puVar25 = &DAT_800683f0;
    gte_ldfcdir(DAT_80067408,DAT_8006740c,DAT_80067410);
    gte_ldIR0(DAT_80067ec4);
    gte_ldRGB(*puVar26);
    puVar6 = puVar26 + 1;
    puVar10 = puVar25;
    do {
      gte_dpcs_b();
      uVar17 = *puVar6;
      puVar6 = puVar6 + 1;
      uVar20 = gte_stRGB2();
      gte_ldRGB(uVar17);
      *puVar10 = uVar20;
      puVar10 = puVar10 + 1;
    } while (puVar6 != puVar26 + iVar5 + 1);
  }
  iVar5 = piVar9[1];
  puVar3 = (uint *)(piVar9[5] + (int)piVar9);
  puVar27 = puVar3 + piVar9[4] * 2;
  gte_ldL22L23(DAT_80067034 + -0x400);
  puVar28 = (undefined *)0x0;
  gte_ldL13L21(primitiveBuffer_next + 4);
  uVar18 = *puVar3;
  puVar4 = (uint *)primitiveBuffer_next;
  puVar29 = primitiveBuffer_next + 4;
  uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
  while( true ) {
    _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
    DAT_1f800104 = (undefined4)uVar1;
    uVar15 = uVar18 >> 0x14;
    if (puVar3 == puVar27) break;
    uVar7 = *(uint *)((int)piVar9 + uVar15 * 4 + iVar5);
    uVar21 = uVar18 >> 10 & 0x3ff;
    uVar22 = uVar18 & 0x3ff;
    uVar12 = *(uint *)((int)piVar9 + uVar21 * 4 + iVar5);
    uVar16 = *(uint *)((int)piVar9 + uVar22 * 4 + iVar5);
    uVar31 = CONCAT44(uVar16,uVar12);
    uVar18 = puVar3[2];
    puVar3 = puVar3 + 2;
    if ((uVar7 & 0xf & uVar12 & uVar16) == 0) {
      uVar15 = (uint)*(char *)((int)&DAT_1f800200 + uVar15);
      iVar8 = (int)uVar7 >> 5;
      if ((int)uVar15 < 0) {
        gte_ldSXY2(iVar8);
        uVar15 = 0;
        uVar31 = FUN_80029f04();
        uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
      }
      _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
      DAT_1f800104 = (undefined4)uVar1;
      uVar7 = (uint)*(char *)((int)&DAT_1f800200 + uVar21);
      iVar13 = (int)uVar31 >> 5;
      uVar31 = CONCAT44((int)((ulonglong)uVar31 >> 0x20),iVar13);
      if ((int)uVar7 < 0) {
        gte_ldSXY2(iVar13);
        uVar7 = 0;
        uVar31 = FUN_80029f04();
        uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
      }
      _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
      DAT_1f800104 = (undefined4)uVar1;
      uVar12 = (uint)*(char *)((int)&DAT_1f800200 + uVar22);
      iVar13 = (int)((longlong)uVar31 >> 0x25);
      uVar31 = CONCAT44(iVar13,(int)uVar31);
      if ((int)uVar12 < 0) {
        gte_ldSXY2(iVar13);
        uVar12 = 0;
        uVar31 = FUN_80029f04();
        uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
      }
      _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
      DAT_1f800104 = (undefined4)uVar1;
      uVar17 = (undefined4)((ulonglong)uVar31 >> 0x20);
      if ((int)(uVar15 & uVar7 & uVar12) < 1) {
        iVar13 = gte_stL22L23();
        uVar16 = puVar3[-1];
        uVar12 = uVar15 | uVar7 | uVar12;
        if (iVar13 - (int)puVar29 < 1) break;
        if ((int)uVar16 < 0) {
          uVar15 = *(uint *)((uVar16 >> 0x12 & 0xffc) + (int)puVar25);
          if (uVar12 != 0) {
            FUN_80029bb8(uVar15,uVar15,uVar15);
            return;
          }
          *(int *)(puVar29 + 8) = iVar8;
          *(undefined8 *)(puVar29 + 0xc) = uVar31;
          *(uint *)(puVar29 + 4) = uVar15 | 0x20000000;
          *puVar4 = (uint)puVar28 ^ (uint)puVar29;
          uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
          puVar28 = (undefined *)0x84000000;
          puVar4 = (uint *)puVar29;
          puVar29 = puVar29 + 0x14;
        }
        else {
          uVar15 = *(uint *)((uVar16 >> 0x12) + (int)puVar25);
          uVar20 = *(undefined4 *)((uVar16 >> 8 & 0xffc) + (int)puVar25);
          uVar23 = puVar25[uVar16 & 0x3ff];
          if ((int)uVar12 < 1) {
            *(int *)(puVar29 + 8) = iVar8;
            *(int *)(puVar29 + 0x10) = (int)uVar31;
            *(undefined4 *)(puVar29 + 0x18) = uVar17;
            *(uint *)(puVar29 + 4) = uVar15 | 0x30000000;
            *(undefined4 *)(puVar29 + 0xc) = uVar20;
            *(undefined4 *)(puVar29 + 0x14) = uVar23;
            *puVar4 = (uint)puVar28 ^ (uint)puVar29;
            puVar28 = (undefined *)0x86000000;
            puVar4 = (uint *)puVar29;
            puVar29 = puVar29 + 0x1c;
            uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
          }
          else {
            puVar26 = (undefined4 *)&DAT_1f800118;
            puVar10 = (undefined4 *)
                      ((int)&DAT_1f8003c8 + (((byte)(&DAT_800631d0)[uVar12] & 0xf0) >> 1));
            while (puVar24 = puVar10, puVar6 = puVar26, puVar10 = puVar24 + 2, _DAT_1f800100 = iVar8
                  , DAT_1f80010c = uVar15, _DAT_1f800110 = uVar20, DAT_1f800114 = uVar23,
                  puVar10 != &DAT_1f8003d0 + ((byte)(&DAT_800631d0)[uVar12] & 0xf) * 2) {
              puVar26 = (undefined4 *)((uint)puVar6 & 0x100 ^ 0x100 | 0x1f800000);
              if (((uint)puVar6 & 0xff) != 0) {
                gte_ldSXY0(*puVar10);
                gte_ldSXY1(puVar24[3]);
                gte_ldSXY2(puVar6[-6]);
                gte_nclip_b();
                uVar18 = gte_stMAC0();
                gte_ldSXY2(puVar6[-5]);
                gte_nclip_b();
                uVar15 = gte_stMAC0();
                gte_ldSXY2(puVar6[-4]);
                gte_nclip_b();
                uVar7 = gte_stMAC0();
                DAT_1f800104 = (int)uVar31;
                _DAT_1f800108 = uVar17;
                    // WARNING: Could not recover jumptable at 0x80029ca0. Too many branches
                    // WARNING: Treating indirect jump as call
                (*(code *)(&UNK_80029ca8 +
                          (uVar18 >> 0x1f | (uVar15 >> 0x1f) << 1 | (uVar7 >> 0x1f) << 2) * 8))();
                return;
              }
            }
            while( true ) {
              _DAT_1f800108 = (undefined4)((ulonglong)uVar31 >> 0x20);
              DAT_1f800104 = (undefined4)uVar31;
              puVar26 = puVar6 + -6;
              uVar1 = uVar31;
              if (((uint)puVar6 & 0xff) == 0) break;
              uVar17 = puVar6[-5];
              uVar20 = puVar6[-4];
              uVar15 = puVar6[-3];
              uVar7 = puVar6[-2];
              uVar12 = puVar6[-1];
              *(undefined4 *)(puVar29 + 8) = *puVar26;
              puVar6 = puVar26;
              if ((uVar15 == uVar7) && (uVar15 == uVar12)) {
                *(undefined4 *)(puVar29 + 0xc) = uVar17;
                *(undefined4 *)(puVar29 + 0x10) = uVar20;
                *(uint *)(puVar29 + 4) = uVar15 | 0x20000000;
                *puVar4 = (uint)puVar28 ^ (uint)puVar29;
                uVar31 = CONCAT44(_DAT_1f800108,DAT_1f800104);
                puVar28 = (undefined *)0x84000000;
                puVar4 = (uint *)puVar29;
                puVar29 = puVar29 + 0x14;
              }
              else {
                *(undefined4 *)(puVar29 + 0x10) = uVar17;
                *(undefined4 *)(puVar29 + 0x18) = uVar20;
                *(uint *)(puVar29 + 4) = uVar15 | 0x30000000;
                *(uint *)(puVar29 + 0xc) = uVar7;
                *(uint *)(puVar29 + 0x14) = uVar12;
                *puVar4 = (uint)puVar28 ^ (uint)puVar29;
                uVar31 = CONCAT44(_DAT_1f800108,DAT_1f800104);
                puVar28 = (undefined *)0x86000000;
                puVar4 = (uint *)puVar29;
                puVar29 = puVar29 + 0x1c;
              }
            }
          }
        }
      }
    }
  }
  _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
  DAT_1f800104 = (undefined4)uVar1;
  puVar30 = (undefined *)gte_stL13L21();
  primitiveBuffer_next = puVar29;
  if (puVar29 != puVar30) {
    iVar5 = gte_stL11L12();
    iVar8 = iVar5 * 8;
    if (-1 < iVar5 + -0x108) {
      iVar8 = iVar8 + 0x140;
    }
    piVar9 = (int *)(iVar8 + 0x18 + DAT_80066ffc);
    puVar14 = (undefined2 *)*piVar9;
    *puVar4 = (uint)puVar28 & 0x7fffffff;
    *piVar9 = (int)puVar4;
    if (puVar14 == (undefined2 *)0x0) {
      piVar9[1] = (int)puVar30;
      uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
    }
    else {
      *puVar14 = (short)puVar30;
      *(char *)(puVar14 + 1) = (char)((uint)puVar30 >> 0x10);
      uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
    }
  }
  _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
  DAT_1f800104 = (undefined4)uVar1;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_80029bb8(uint param_1,undefined4 param_2,undefined4 param_3,uint param_4)

{
  undefined8 uVar1;
  int iVar2;
  int *piVar3;
  int in_at;
  uint uVar4;
  int iVar5;
  undefined2 *puVar6;
  undefined4 in_v0;
  uint uVar7;
  undefined4 uVar8;
  uint uVar9;
  undefined4 in_v1;
  uint uVar10;
  undefined4 uVar11;
  uint uVar12;
  uint uVar13;
  uint in_t5;
  undefined4 *puVar14;
  undefined4 *puVar15;
  undefined4 *puVar16;
  int unaff_s3;
  int unaff_s5;
  int unaff_s6;
  int unaff_s7;
  int in_t8;
  int in_t9;
  undefined4 *puVar18;
  uint *puVar19;
  undefined *unaff_s8;
  undefined *puVar20;
  undefined8 uVar21;
  undefined local_res0 [16];
  undefined4 *puVar17;
  
  uVar21 = CONCAT44(in_v1,in_v0);
  puVar18 = &DAT_80066d38;
  do {
    _DAT_1f800108 = (undefined4)((ulonglong)uVar21 >> 0x20);
    DAT_1f800104 = (undefined4)uVar21;
    puVar15 = (undefined4 *)&DAT_1f800118;
    puVar16 = (undefined4 *)(unaff_s3 + -8 + (((byte)(&DAT_800631d0)[param_4] & 0xf0) >> 1));
    while (puVar17 = puVar16, puVar14 = puVar15, puVar16 = puVar17 + 2,
          puVar19 = (uint *)register0x00000074, _DAT_1f800100 = in_at, DAT_1f80010c = param_1,
          _DAT_1f800110 = param_2, DAT_1f800114 = param_3,
          puVar16 != (undefined4 *)(unaff_s3 + ((byte)(&DAT_800631d0)[param_4] & 0xf) * 8)) {
      puVar15 = (undefined4 *)((uint)puVar14 & 0x100 ^ 0x100 | 0x1f800000);
      if (((uint)puVar14 & 0xff) != 0) {
        gte_ldSXY0(*puVar16);
        gte_ldSXY1(puVar17[3]);
        gte_ldSXY2(puVar14[-6]);
        gte_nclip_b();
        uVar4 = gte_stMAC0();
        gte_ldSXY2(puVar14[-5]);
        gte_nclip_b();
        uVar7 = gte_stMAC0();
        gte_ldSXY2(puVar14[-4]);
        gte_nclip_b();
        uVar10 = gte_stMAC0();
                    // WARNING: Could not recover jumptable at 0x80029ca0. Too many branches
                    // WARNING: Treating indirect jump as call
        (*(code *)(&UNK_80029ca8 +
                  (uVar4 >> 0x1f | (uVar7 >> 0x1f) << 1 | (uVar10 >> 0x1f) << 2) * 8))();
        return;
      }
    }
    while( true ) {
      _DAT_1f800108 = (undefined4)((ulonglong)uVar21 >> 0x20);
      DAT_1f800104 = (undefined4)uVar21;
      puVar15 = puVar14 + -6;
      register0x00000074 = (BADSPACEBASE *)puVar19;
      uVar1 = uVar21;
      if (((uint)puVar14 & 0xff) == 0) break;
      uVar8 = puVar14[-5];
      uVar11 = puVar14[-4];
      uVar4 = puVar14[-3];
      uVar7 = puVar14[-2];
      uVar10 = puVar14[-1];
      *(undefined4 *)(unaff_s8 + 8) = *puVar15;
      puVar14 = puVar15;
      if ((uVar4 == uVar7) && (uVar4 == uVar10)) {
        *(undefined4 *)(unaff_s8 + 0xc) = uVar8;
        *(undefined4 *)(unaff_s8 + 0x10) = uVar11;
        *(uint *)(unaff_s8 + 4) = uVar4 | 0x20000000;
        uVar21 = CONCAT44(_DAT_1f800108,DAT_1f800104);
        *puVar19 = (uint)puVar18 ^ (uint)unaff_s8;
        puVar18 = (undefined4 *)0x84000000;
        puVar19 = (uint *)unaff_s8;
        unaff_s8 = unaff_s8 + 0x14;
      }
      else {
        *(undefined4 *)(unaff_s8 + 0x10) = uVar8;
        *(undefined4 *)(unaff_s8 + 0x18) = uVar11;
        *(uint *)(unaff_s8 + 4) = uVar4 | 0x30000000;
        *(uint *)(unaff_s8 + 0xc) = uVar7;
        *(uint *)(unaff_s8 + 0x14) = uVar10;
        uVar21 = CONCAT44(_DAT_1f800108,DAT_1f800104);
        *puVar19 = (uint)puVar18 ^ (uint)unaff_s8;
        puVar18 = (undefined4 *)0x86000000;
        puVar19 = (uint *)unaff_s8;
        unaff_s8 = unaff_s8 + 0x1c;
      }
    }
LAB_80029970:
    do {
      do {
        _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
        DAT_1f800104 = (undefined4)uVar1;
        uVar4 = in_t5 >> 0x14;
        if (in_t8 == in_t9) goto LAB_80029b10;
        uVar7 = *(uint *)(uVar4 * 4 + unaff_s6);
        uVar12 = in_t5 >> 10 & 0x3ff;
        uVar13 = in_t5 & 0x3ff;
        uVar10 = *(uint *)(uVar12 * 4 + unaff_s6);
        uVar9 = *(uint *)(uVar13 * 4 + unaff_s6);
        uVar21 = CONCAT44(uVar9,uVar10);
        in_t5 = *(uint *)(in_t8 + 8);
        in_t8 = in_t8 + 8;
      } while ((uVar7 & 0xf & uVar10 & uVar9) != 0);
      uVar4 = (uint)*(char *)(uVar4 + unaff_s5);
      in_at = (int)uVar7 >> 5;
      if ((int)uVar4 < 0) {
        gte_ldSXY2(in_at);
        uVar4 = 0;
        uVar21 = FUN_80029f04();
        uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
      }
      _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
      DAT_1f800104 = (undefined4)uVar1;
      uVar7 = (uint)*(char *)(uVar12 + unaff_s5);
      iVar5 = (int)uVar21 >> 5;
      uVar21 = CONCAT44((int)((ulonglong)uVar21 >> 0x20),iVar5);
      if ((int)uVar7 < 0) {
        gte_ldSXY2(iVar5);
        uVar7 = 0;
        uVar21 = FUN_80029f04();
        uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
      }
      _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
      DAT_1f800104 = (undefined4)uVar1;
      param_4 = (uint)*(char *)(uVar13 + unaff_s5);
      iVar5 = (int)((longlong)uVar21 >> 0x25);
      uVar21 = CONCAT44(iVar5,(int)uVar21);
      if ((int)param_4 < 0) {
        gte_ldSXY2(iVar5);
        param_4 = 0;
        uVar21 = FUN_80029f04();
        uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
      }
      _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
      DAT_1f800104 = (undefined4)uVar1;
    } while (0 < (int)(uVar4 & uVar7 & param_4));
    iVar5 = gte_stL22L23();
    uVar10 = *(uint *)(in_t8 + -4);
    param_4 = uVar4 | uVar7 | param_4;
    if (iVar5 - (int)unaff_s8 < 1) {
LAB_80029b10:
      _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
      DAT_1f800104 = (undefined4)uVar1;
      puVar20 = (undefined *)gte_stL13L21();
      primitiveBuffer_next = unaff_s8;
      if (unaff_s8 != puVar20) {
        iVar5 = gte_stL11L12();
        iVar2 = iVar5 * 8;
        if (-1 < iVar5 + -0x108) {
          iVar2 = iVar2 + 0x140;
        }
        piVar3 = (int *)(iVar2 + 0x18 + DAT_80066ffc);
        puVar6 = (undefined2 *)*piVar3;
        *(uint *)register0x00000074 = (uint)puVar18 & 0x7fffffff;
        *piVar3 = (int)register0x00000074;
        if (puVar6 == (undefined2 *)0x0) {
          piVar3[1] = (int)puVar20;
          uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
        }
        else {
          *puVar6 = (short)puVar20;
          *(char *)(puVar6 + 1) = (char)((uint)puVar20 >> 0x10);
          uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
        }
      }
      _DAT_1f800108 = (undefined4)((ulonglong)uVar1 >> 0x20);
      DAT_1f800104 = (undefined4)uVar1;
      return;
    }
    if ((int)uVar10 < 0) {
      uVar4 = *(uint *)((uVar10 >> 0x12 & 0xffc) + unaff_s7);
      if (param_4 != 0) {
        FUN_80029bb8(uVar4,uVar4,uVar4);
        return;
      }
      *(int *)(unaff_s8 + 8) = in_at;
      *(undefined8 *)(unaff_s8 + 0xc) = uVar21;
      *(uint *)(unaff_s8 + 4) = uVar4 | 0x20000000;
      uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
      *(uint *)register0x00000074 = (uint)puVar18 ^ (uint)unaff_s8;
      puVar18 = (undefined4 *)0x84000000;
      register0x00000074 = (BADSPACEBASE *)unaff_s8;
      unaff_s8 = unaff_s8 + 0x14;
      goto LAB_80029970;
    }
    param_1 = *(uint *)((uVar10 >> 0x12) + unaff_s7);
    param_2 = *(undefined4 *)((uVar10 >> 8 & 0xffc) + unaff_s7);
    param_3 = *(undefined4 *)((uVar10 & 0x3ff) * 4 + unaff_s7);
    if ((int)param_4 < 1) {
      *(int *)(unaff_s8 + 8) = in_at;
      *(int *)(unaff_s8 + 0x10) = (int)uVar21;
      *(int *)(unaff_s8 + 0x18) = (int)((ulonglong)uVar21 >> 0x20);
      *(uint *)(unaff_s8 + 4) = param_1 | 0x30000000;
      *(undefined4 *)(unaff_s8 + 0xc) = param_2;
      *(undefined4 *)(unaff_s8 + 0x14) = param_3;
      uVar1 = CONCAT44(_DAT_1f800108,DAT_1f800104);
      *(uint *)register0x00000074 = (uint)puVar18 ^ (uint)unaff_s8;
      puVar18 = (undefined4 *)0x86000000;
      register0x00000074 = (BADSPACEBASE *)unaff_s8;
      unaff_s8 = unaff_s8 + 0x1c;
      goto LAB_80029970;
    }
  } while( true );
}



void FUN_80029f04(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined *in_a3;
  undefined uVar3;
  uint in_t0;
  uint uVar4;
  uint uVar5;
  undefined4 *unaff_s3;
  undefined4 *unaff_s4;
  
  uVar3 = (undefined)in_t0;
  if (unaff_s3 != unaff_s4) {
    gte_ldSXY0(*unaff_s3);
    gte_ldSXY1(unaff_s3[1]);
    uVar4 = 0xffffffff;
    do {
      gte_nclip_b();
      puVar1 = unaff_s3 + 2;
      puVar2 = unaff_s3 + 3;
      unaff_s3 = unaff_s3 + 2;
      uVar4 = uVar4 + 1;
      uVar5 = gte_stMAC0();
      gte_ldSXY0(*puVar1);
      gte_ldSXY1(*puVar2);
      in_t0 = in_t0 | (uVar5 >> 0x1f) << (uVar4 & 0x1f);
      uVar3 = (undefined)in_t0;
    } while (unaff_s3 != unaff_s4);
  }
  *in_a3 = uVar3;
  return;
}



undefined8 FUN_80029f58(int param_1,int param_2,undefined4 param_3,uint param_4)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  int *unaff_s1;
  
  iVar1 = (int)(short)*unaff_s1;
  iVar2 = *unaff_s1 >> 0x10;
  gte_ldIR2((short)unaff_s1[1] - iVar1);
  gte_ldIR1(iVar2 - (unaff_s1[1] >> 0x10));
  gte_ldIR3(0);
  iVar5 = param_1 >> 0x10;
  iVar4 = (int)(short)param_1;
  gte_ldR11R12(iVar1 - iVar4 & 0xffffU | (iVar2 - iVar5) * 0x10000);
  uVar6 = (short)param_2 - iVar4;
  iVar7 = (param_2 >> 0x10) - iVar5;
  gte_ldR31R32(uVar6 & 0xffff | iVar7 * 0x10000);
  gte_rtir_sf0();
  iVar1 = gte_stMAC1();
  iVar2 = gte_stMAC3();
  iVar2 = (iVar1 << 0xc) / iVar2;
  gte_ldMAC1(iVar4 << 0xc);
  gte_ldMAC2(iVar5 << 0xc);
  gte_ldIR1(uVar6);
  gte_ldIR2(iVar7);
  gte_ldRFC((param_4 & 0xff) << 4);
  gte_ldGFC(param_4 >> 4 & 0xff0);
  gte_ldBFC(param_4 >> 0xc & 0xff0);
  gte_ldRGB(param_3);
  gte_ldIR0(iVar2);
  gte_gpl0();
  gte_stMAC1();
  gte_stMAC2();
  gte_ldIR0(iVar2);
  gte_dpcs_b();
  uVar3 = gte_stRGB2();
  return CONCAT44(iVar2,uVar3);
}



void UpdateSpyro(void)

{
  VectorClear(&Spyro.field41_0x7c);
  UpdateSpyroPowers();
  FUN_80030c94();
  FUN_8002a164();
  ProcessSpyroCollision();
  ProcessSpyroInput();
  FUN_8002fc20();
  FUN_8002e304();
  FUN_8002f08c();
  FUN_8002f7a8();
  FUN_80031e4c();
  FUN_800327f0();
  FUN_800313e4();
  if (Spyro.maybeSubstate == Superfly) {
    FUN_8003305c(0x3f,0x8006a274);
    FUN_8003305c(0x3e,0x8006a280);
  }
  if ((scaleSpyroHead != false) && (Spyro.anotherByteAngle.roll == 0)) {
    Spyro.anotherByteAngle.roll = 1;
  }
  return;
}



void FUN_8002a164(void)

{
  int iVar1;
  
  iVar1 = 0;
  if (0 < deltaTime) {
    do {
      FUN_80033300(iVar1);
      iVar1 = iVar1 + 1;
    } while (iVar1 < deltaTime);
  }
  iVar1 = 0;
  FUN_8002a78c();
  FUN_800347a4();
  FUN_80034e0c();
  if (0 < deltaTime) {
    do {
      FUN_800350d0(iVar1);
      iVar1 = iVar1 + 1;
    } while (iVar1 < deltaTime);
  }
  Spyro.angleAsByte.pitch = (byte)(Spyro.rotation.Roll >> 4);
  Spyro.angleAsByte.roll = (byte)(Spyro.rotation.Pitch >> 4);
  Spyro.angleAsByte.yaw = (byte)(Spyro.rotation.Yaw >> 4);
  BuildRotationMatrix(0x80069ffc,0x8006a020,(Mat33 *)0x0);
  BuildRotationMatrix(0x8006a000,0x8006a18c,(Mat33 *)0x0);
  MulMatrix0((MATRIX *)&Spyro.groundedGlidingMovementMatrix,(MATRIX *)&Spyro.unkMatrix,
             (MATRIX *)&Spyro.unkMatrix);
  if (scaleSpyroHead != false) {
    ScaleMatrix((MATRIX *)&Spyro.unkMatrix,(VECTOR *)&spyroScale);
  }
  if ((Spyro.position.z < 0x400) ||
     (((Spyro.state == Flop && (Spyro.airVelocityFlag == FALLING)) && (0x3b < Spyro.field35_0x5c))))
  {
    OnDeath();
  }
  else if (Spyro.position.z < maybeDeathPlaneHeightArray[g_currLevelID]) {
    if (Spyro.state != Flop) {
      SetSpyroState(Flop);
    }
    Spyro.airVelocityFlag = FALLING;
    if (cameraState != AlchemistCutscene) {
      DAT_80067fec = 9;
      SetCameraState(9);
      INT_80067ed4 = 2;
      VectorCopy(&Vec3_8006803c,&cameraPosition);
    }
    VectorCopy(&Vec3_80068008,&Spyro.position);
    FUN_8001ee18(&Orbit_80067ff4,&Vec3_8006803c,&Spyro);
    Orbit_80067ff4.Pitch = 0;
    Orbit_80067ff4.Yaw = 0;
  }
  else if ((Spyro.position.x < 0x800) || (Spyro.position.y < 0x800)) {
    if (Spyro.state == Flop) {
      Spyro.physicsVelocity.x = 0;
      Spyro.physicsVelocity.y = 0;
      Spyro.trueVelocity.x = 0;
      Spyro.trueVelocity.y = 0;
    }
    else {
      VectorClear(&Spyro.physicsVelocity);
      VectorClear(&Spyro.trueVelocity);
      SetSpyroState(Flop);
    }
    Spyro.airVelocityFlag = FALLING;
    if (cameraState != AlchemistCutscene) {
      DAT_80067fec = 9;
      SetCameraState(9);
      INT_80067ed4 = 2;
    }
    VectorCopy(&Vec3_80068008,&Spyro.position);
    FUN_8001ee18(&Orbit_80067ff4,&cameraPosition,&Spyro);
  }
  return;
}



void ProcessSpyroCollision(void)

{
  CollisionType CVar1;
  int iVar2;
  SpyroState newSpyroState;
  
  iVar2 = 0;
  if (Spyro.airTime == 0) {
    iVar2 = FUN_8002aafc(Spyro.field72_0x114,1);
  }
  if ((((iVar2 != 0) || (iVar2 = FUN_8002aafc(Spyro.field71_0x110,0), iVar2 != 0)) ||
      (FUN_8002aafc(Spyro.field73_0x118,2), Spyro.field57_0xfc == 0)) || (Spyro.health < 0))
  goto LAB_8002a6b8;
  if (inSpeedwayFlag < 0) {
    if ((Spyro.maybeSubstate == UnderwaterSwim) || (Spyro.state == UnderwaterHurt)) {
      if (Spyro.position.z < Spyro.field57_0xfc) goto LAB_8002a6b8;
      if (Spyro.state == UnderwaterSwim) {
        newSpyroState = WaterIdle;
        goto joined_r0x8002a5e8;
      }
LAB_8002a6ac:
      newSpyroState = WaterIdle;
    }
    else if (Spyro.maybeSubstate == UnderwaterCharge) {
      if (Spyro.position.z < Spyro.field57_0xfc) goto LAB_8002a6b8;
      newSpyroState = ChargeAir;
joined_r0x8002a5e8:
      if (Spyro.airVelocityFlag == FALLING) goto LAB_8002a6b8;
    }
    else {
      if (((0 < Spyro.physicsVelocity.z) || (Spyro.maybeSubstate == Swim)) ||
         (Spyro.field57_0xfc + 0xb2 < Spyro.position.z)) goto LAB_8002a6b8;
      if ((Spyro.state == ChargeAir) || (newSpyroState = WaterIdle, Spyro.state == HeadBash)) {
        if (globalProgressFlags.swim.isPayed == 0) goto LAB_8002a6ac;
        iVar2 = FUN_8003ee3c(&Spyro,0x400,1,0);
        newSpyroState = WaterIdle;
        if (iVar2 == 0) {
          newSpyroState = UnderwaterCharge;
        }
      }
    }
  }
  else {
    newSpyroState = WaterSlap;
    if (Spyro.maybeSubstate == Death) goto LAB_8002a6b8;
  }
  SetSpyroState(newSpyroState);
LAB_8002a6b8:
  Spyro.field18_0x2c = 0;
  iVar2 = RaycastDown(&Spyro.position,0xc00);
  if ((iVar2 != 0) && (CVar1 = GetCollisiontType(DAT_8006ab94), CVar1 == Ice)) {
    Spyro.field18_0x2c = Spyro.position.z - Vec3_8006ab70.z;
  }
  if (((Spyro.field18_0x2c == 0) && (iVar2 = RaycastDown(&cameraPosition,0x1000), iVar2 != 0)) &&
     (CVar1 = GetCollisiontType(DAT_8006ab94), CVar1 == Ice)) {
    Spyro.field18_0x2c = Spyro.position.z - Vec3_8006ab70.z;
  }
  return;
}



void FUN_8002a78c(void)

{
  int iVar1;
  int iVar2;
  Vec3 local_30;
  Vec3 VStack_20;
  
  if ((Spyro.field163_0x244 & 1U) != 0) {
    VectorClear(&VStack_20);
    VectorCopy(&local_30,&Spyro.field41_0x7c);
    VectorShiftRight(&local_30,6);
    VectorAdd(&local_30,&local_30,&Spyro.position);
    VectorSubtract(&local_30,&Spyro.field164_0x248,&local_30);
    if ((Spyro.field163_0x244 & 4U) == 0) {
      iVar1 = VectorLength(&local_30,0);
      local_30.z = 0;
    }
    else {
      iVar1 = VectorLength(&local_30,1);
    }
    if ((Spyro.field163_0x244 & 2U) == 0) {
      if (Spyro.field165_0x254 + -0x2000 < iVar1) {
        iVar2 = (iVar1 + 0x2000) - Spyro.field165_0x254;
        VectorScale(&local_30,iVar1,iVar2);
        VectorAdd(&Spyro.field41_0x7c,&Spyro.field41_0x7c,&local_30);
        if ((Spyro.field163_0x244 & 4U) != 0) {
          iVar1 = VectorLength(&local_30,0);
          iVar1 = Atan2(iVar1,local_30.z,1);
          VStack_20.y = iVar1 - Spyro.rotation.Pitch & 0xfff;
          if (0x800 < (uint)VStack_20.y) {
            VStack_20.y = VStack_20.y - 0x1000;
          }
        }
        iVar1 = Atan2(local_30.x,local_30.y,1);
        VStack_20.z = iVar1 - Spyro.rotation.Yaw & 0xfff;
        if (0x800 < (uint)VStack_20.z) {
          VStack_20.z = VStack_20.z - 0x1000;
        }
        if (0x2000 < iVar2) {
          iVar2 = 0x2000;
        }
        VectorScale(&VStack_20,0x2000,iVar2);
        VectorShiftRight(&VStack_20,3);
        Spyro.rotation.Pitch = Spyro.rotation.Pitch + VStack_20.y;
        Spyro.rotation.Yaw = Spyro.rotation.Yaw + VStack_20.z;
      }
    }
    else if (Spyro.field165_0x254 <= iVar1) {
      VectorShiftRight(&local_30,6);
      VectorNormalize(&local_30,0x1000);
      iVar1 = local_30.x * Spyro.field41_0x7c.x + local_30.y * Spyro.field41_0x7c.y +
              local_30.z * Spyro.field41_0x7c.z >> 0xc;
      if (iVar1 < 0) {
        if ((Spyro.field163_0x244 & 4U) != 0) {
          iVar2 = VectorLength(&local_30,0);
          iVar2 = Atan2(iVar2,local_30.z,1);
          VStack_20.y = iVar2 - Spyro.rotation.Pitch & 0xfff;
          if (0x800 < (uint)VStack_20.y) {
            VStack_20.y = VStack_20.y - 0x1000;
          }
        }
        iVar2 = Atan2(local_30.x,local_30.y,1);
        VStack_20.z = iVar2 - Spyro.rotation.Yaw & 0xfff;
        if (0x800 < (uint)VStack_20.z) {
          VStack_20.z = VStack_20.z - 0x1000;
        }
        VectorShiftRight(&VStack_20,5);
        Spyro.rotation.Pitch = Spyro.rotation.Pitch + VStack_20.y;
        Spyro.rotation.Yaw = Spyro.rotation.Yaw + VStack_20.z;
        VectorScale(&local_30,0x1000,-iVar1);
        VectorAdd(&Spyro.field41_0x7c,&Spyro.field41_0x7c,&local_30);
      }
    }
  }
  return;
}



undefined4 FUN_8002aafc(uint param_1,int param_2)

{
  undefined uVar1;
  int iVar2;
  CollisionType *pCVar3;
  SpyroState newSpyroState;
  
  if ((param_1 & 0x3f) != 0x3f) {
    pCVar3 = collisionTypes[param_1 & 0x3f] + 1;
    switch(*(undefined *)collisionTypes[param_1 & 0x3f]) {
    case 0:
      if (param_2 != 1) {
        return 0;
      }
      if (0 < Spyro.physicsVelocity.z) {
        return 0;
      }
      if (Spyro.powerInvincibleTime != 0) {
        return 0;
      }
      if (Spyro.state == Drowning) {
        return 1;
      }
      Spyro.iframeTimer = 0x5a;
      iVar2 = -1;
      if ((*pCVar3 != Sink) || (iVar2 = Spyro.health + -1, -1 < Spyro.health)) {
        Spyro.health = iVar2;
      }
      newSpyroState = Drowning;
      break;
    case 1:
      if ((Spyro.field150_0x20c & 0x40000U) != 0) {
        return 0;
      }
      if (param_2 != 1) {
        return 0;
      }
      if (Spyro.powerInvincibleTime != 0) {
        return 0;
      }
      if (Spyro.maybeSubstate == Death) {
        return 0;
      }
      if (((Spyro.maybeSubstate == Jump) || (Spyro.maybeSubstate == Hurt)) &&
         (0 < Spyro.physicsVelocity.z)) {
        return 0;
      }
      if (inSpeedwayFlag < 0) {
        Spyro.iframeTimer = 0x5a;
        iVar2 = Spyro.health + -1;
        if (((Spyro.health < 0) || (newSpyroState = HurtBurn, Spyro.health = iVar2, iVar2 < 0)) &&
           (newSpyroState = DeathBurn, objectModels[0][0xc].field1_0x4 == 0)) {
          SetSpyroState(DeathPirouette);
          if (inSpeedwayFlag < 0) {
            return 1;
          }
          Spyro.airVelocityFlag = FALLING;
          return 1;
        }
      }
      else {
        newSpyroState = DeathBurn;
        if (Spyro.maybeSubstate == Death) {
          return 1;
        }
      }
      break;
    case 2:
      if (Spyro.maybeSubstate != Superfly) {
        return 0;
      }
      newSpyroState = Supercharge;
      if (inSpeedwayFlag < 0) {
        return 0;
      }
      break;
    default:
      goto LAB_8002afc4;
    case 4:
      if (param_2 != 1) {
        return 0;
      }
      if (Spyro.maybeSubstate == Ice) {
        return 0;
      }
      if (Spyro.maybeSubstate + ~Superfly < 2) {
        return 0;
      }
      if (Spyro.maybeSubstate == Idle) {
        return 0;
      }
      newSpyroState = Ice;
      if (Spyro.state == Bonk) {
        return 0;
      }
      break;
    case 5:
      if (param_2 == 2) {
        if (Spyro.state != Bonk) {
          SetSpyroState(Bonk);
        }
        VectorNormalize(0x8006a0d0,0x800);
        VectorCopy(&Spyro.trueVelocity,&Spyro.field54_0xe0);
        VectorCopy(&Spyro.field42_0x88,&Spyro.field54_0xe0);
        iVar2 = (*DAT_800670b4)(0x2cc,0);
        if (iVar2 == 0) {
          return 1;
        }
        VectorCopy((Vec3 *)(iVar2 + 0xc),&Spyro.position);
        uVar1 = Atan2(Spyro.field54_0xe0.x,Spyro.field54_0xe0.y,0);
        *(undefined *)(iVar2 + 0x46) = uVar1;
        return 1;
      }
      if (param_2 != 0) {
        return 0;
      }
      if (Spyro.state != Bonk) {
        SetSpyroState(Bonk);
      }
      VectorNormalize(0x8006a10c,0x800);
      VectorCopy(&Spyro.trueVelocity,&Spyro.field74_0x11c);
      VectorCopy(&Spyro.field42_0x88,&Spyro.field74_0x11c);
      iVar2 = (*DAT_800670b4)(0x2cc,0);
      if (iVar2 == 0) {
        return 1;
      }
      VectorCopy((Vec3 *)(iVar2 + 0xc),&Spyro.position);
      uVar1 = Atan2(Spyro.field74_0x11c.x,Spyro.field74_0x11c.y,0);
      *(undefined *)(iVar2 + 0x46) = uVar1;
      return 1;
    case 6:
      FUN_80019928(*pCVar3);
      return 0;
    case 7:
      if (param_2 != 1) {
        return 0;
      }
      if (0 < Spyro.physicsVelocity.z) {
        return 0;
      }
      if (Spyro.powerInvincibleTime != 0) {
        return 0;
      }
      if (Spyro.maybeSubstate == Death) {
        return 0;
      }
      Spyro.iframeTimer = 0x5a;
      iVar2 = Spyro.health + -1;
      if ((Spyro.health < 0) || (Spyro.health = iVar2, iVar2 < 0)) {
        newSpyroState = DeathPirouette;
        if (objectModels[0][0xc].field1_0x4 != 0) {
          newSpyroState = DeathBurn;
        }
      }
      else {
        newSpyroState = Electrified;
      }
      break;
    case 9:
      if (Spyro.state == Supercharge) {
        Spyro.airVelocityFlag = FALLING;
        return 0;
      }
      return 0;
    case 10:
      if (param_2 != 1) {
        return 0;
      }
      if (Spyro.maybeSubstate == (Walk|Ice)) {
        return 0;
      }
      if (Spyro.maybeSubstate + ~Superfly < 2) {
        return 0;
      }
      newSpyroState = Slide;
    }
    SetSpyroState(newSpyroState);
    return 1;
  }
LAB_8002afc4:
  return 0;
}



CollisionType FUN_8002afdc(Mat33 *param_1,Vec3 *param_2,Vec3 *param_3)

{
  int iVar1;
  CollisionType CVar2;
  
  MatrixMultVector(param_1,param_2,param_2);
  VectorAdd(param_2,param_2,&Spyro.position);
  MatrixMultVector((Mat33 *)0x0,param_3,param_3);
  VectorAdd(param_3,param_3,&Spyro.position);
  iVar1 = FUN_8003ce94(param_2,param_3);
  CVar2 = ~Sink;
  if (iVar1 != 0) {
    CVar2 = GetCollisiontType(DAT_8006ab94);
  }
  return CVar2;
}



CollisionType GetCollisiontType(uint index)

{
  CollisionType CVar1;
  
  if ((index & 0x3f) == 0x3f) {
    CVar1 = ~Sink;
  }
  else {
    CVar1 = (CollisionType)*(byte *)collisionTypes[index & 0x3f];
  }
  return CVar1;
}



undefined4 maybeTakeDamage(void)

{
  undefined4 uVar1;
  SpyroState newSpyroState;
  
  uVar1 = 0;
  if ((Spyro.iframeTimer == 0) && (uVar1 = 0, Spyro.powerInvincibleTime == 0)) {
    if ((Spyro.takingDamageRelated & 0x1f9U) == 0) {
      uVar1 = 0;
    }
    else {
      Spyro.iframeTimer = 0x5a;
      if (-1 < Spyro.health) {
        Spyro.health = Spyro.health + -1;
      }
      if ((Spyro.takingDamageRelated & 1U) == 0) {
        newSpyroState = HurtSquash;
        if (((((Spyro.takingDamageRelated & 0x10U) == 0) &&
             (newSpyroState = Electrified, (Spyro.takingDamageRelated & 0x20U) == 0)) &&
            (newSpyroState = HurtPitchSpin, (Spyro.takingDamageRelated & 0x80U) == 0)) &&
           (newSpyroState = 0x17, (Spyro.takingDamageRelated & 0x100U) == 0)) {
          if ((Spyro.takingDamageRelated & 8U) == 0) {
            if ((Spyro.takingDamageRelated & 0x40U) == 0) {
              Spyro.iframeTimer = 0x5a;
              return 1;
            }
            newSpyroState = HurtYawSpin;
            if ((Spyro.health < 0) && (newSpyroState = 0x3b, objectModels[0][0xc].field2_0x8 == 0))
            {
              newSpyroState = HurtYawSpin;
            }
          }
          else if (Spyro.health < 0) {
            newSpyroState = DeathPirouette;
            if (objectModels[0][0xc].field1_0x4 != 0) {
              newSpyroState = DeathBurn;
            }
          }
          else {
            newSpyroState = HurtBurn;
          }
        }
      }
      else {
        newSpyroState = Hurt;
        if (Spyro.maybeSubstate + ~Swim < 2) {
          newSpyroState = UnderwaterHurt;
        }
      }
      SetSpyroState(newSpyroState);
      uVar1 = 1;
    }
  }
  return uVar1;
}



undefined4 FUN_8002b228(void)

{
  int iVar1;
  undefined4 uVar2;
  uint uVar3;
  Vec3 local_18;
  
  if (Spyro.maybeSubstate == Supercharge) {
    if ((Spyro.takingDamageRelated & 0x4000U) == 0) {
      return 0;
    }
  }
  else {
    uVar3 = Spyro.takingDamageRelated & 6;
    if (uVar3 == 4) {
      if (Spyro.maybeSubstate == UnderwaterCharge) {
        return 0;
      }
    }
    else {
      if (4 < uVar3) {
        if (uVar3 != 6) {
          return 0;
        }
        uVar2 = maybeTakeDamage();
        return uVar2;
      }
      if (uVar3 != 2) {
        return 0;
      }
      if ((Spyro.field79_0x140 == 0) || (Spyro.maybeSubstate == UnderwaterCharge)) {
        return 0;
      }
      VectorSubtract(&local_18,(Vec3 *)(Spyro.field79_0x140 + 0xc),&Spyro.position);
      iVar1 = Atan2(local_18.x,local_18.y,1);
      uVar3 = iVar1 - Spyro.rotation.Yaw & 0xfff;
      if (0x800 < uVar3) {
        uVar3 = uVar3 - 0x1000;
      }
      if ((int)uVar3 < 0) {
        uVar3 = -uVar3;
      }
      if (0x1ff < (int)uVar3) {
        return 0;
      }
    }
  }
  SetSpyroState(Bonk);
  return 1;
}



void FUN_8002b36c(int param_1)

{
  int iVar1;
  Vec3 local_18;
  
  if (DAT_8006839e == '\0') {
    if ((*DAT_80066f38 & 0x1000) == 0) {
      local_18.y = 0xff;
      if ((*DAT_80066f38 & 0x4000) == 0) {
        local_18.y = 0x7f;
      }
    }
    else {
      local_18.y = 0;
    }
    local_18.x = 0xff;
    if (((*DAT_80066f38 & 0x2000) == 0) && (local_18.x = 0x7f, (*DAT_80066f38 & 0x8000) != 0)) {
      local_18.x = 0;
    }
  }
  else {
    local_18.x = (int)*(byte *)((int)DAT_80066f38 + 0xe);
    local_18.y = (int)*(byte *)((int)DAT_80066f38 + 0xf);
  }
  if ((local_18.x == 0x7f) && (local_18.y == 0x7f)) {
    Spyro.maybeHorizontalSpeed = 0;
    Spyro.maybeTargetYaw = Spyro.rotation.Yaw;
  }
  else {
    local_18.y = 0x7f - local_18.y;
    local_18.x = 0x7f - local_18.x;
    iVar1 = Atan2(local_18.y,local_18.x,1);
    Spyro.maybeTargetYaw = iVar1 + VectorShort_80067ec8.Z & 0xfff;
    iVar1 = VectorLength(&local_18,0);
    Spyro.maybeHorizontalSpeed = param_1 * iVar1 >> 7;
    if (param_1 < Spyro.maybeHorizontalSpeed) {
      Spyro.maybeHorizontalSpeed = param_1;
    }
  }
  return;
}



void FUN_8002b4e4(int *param_1,int param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int local_18;
  int local_14;
  
  if (DAT_8006839e == '\0') {
    if ((*DAT_80066f38 & 0x1000) == 0) {
      if ((*DAT_80066f38 & 0x4000) == 0) {
        local_14 = 0;
      }
      else {
        local_14 = -0x7f;
      }
    }
    else {
      local_14 = 0x7f;
    }
    if ((*DAT_80066f38 & 0x2000) == 0) {
      if ((*DAT_80066f38 & 0x8000) == 0) {
        local_18 = 0;
      }
      else {
        local_18 = -0x7f;
      }
    }
    else {
      local_18 = 0x7f;
    }
  }
  else {
    local_18 = *(byte *)((int)DAT_80066f38 + 0xe) - 0x7f;
    local_14 = 0x7f - (uint)*(byte *)((int)DAT_80066f38 + 0xf);
  }
  if (param_2 == 0) {
    *param_1 = local_18;
  }
  else {
    uVar3 = Spyro.rotation.Yaw - VectorShort_80067ec8.Z & 0xfff;
    iVar1 = cosineLookup(uVar3);
    iVar2 = sineLookup(uVar3);
    *param_1 = -local_18 * iVar1 - local_14 * iVar2 >> 0xc;
    iVar1 = cosineLookup(uVar3);
    iVar2 = sineLookup(uVar3);
    local_14 = local_14 * iVar1 - local_18 * iVar2 >> 0xc;
  }
  param_1[1] = local_14;
  return;
}



void FUN_8002b694(int *param_1,int param_2,int param_3)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int local_8;
  int local_4;
  
  if (DAT_8006839e == '\0') {
    if ((*DAT_80066f38 & 0x1000) == 0) {
      if ((*DAT_80066f38 & 0x4000) == 0) {
        iVar4 = *(int *)(param_2 + 4);
        iVar2 = -iVar4;
        iVar3 = iVar2;
        if (0x20 < iVar2) {
          iVar3 = 0x20;
        }
        iVar3 = iVar4 + iVar3;
        if (iVar2 < -0x20) {
          iVar3 = iVar4 + -0x20;
        }
        *(int *)(param_2 + 4) = iVar3;
      }
      else {
        iVar2 = *(int *)(param_2 + 4) + -0x10;
        *(int *)(param_2 + 4) = iVar2;
        if (iVar2 < -0x7f) {
          *(undefined4 *)(param_2 + 4) = 0xffffff81;
        }
      }
    }
    else {
      iVar2 = *(int *)(param_2 + 4) + 0x10;
      *(int *)(param_2 + 4) = iVar2;
      if (0x7f < iVar2) {
        *(undefined4 *)(param_2 + 4) = 0x7f;
      }
    }
    local_4 = *(int *)(param_2 + 4);
    if ((*DAT_80066f38 & 0x2000) == 0) {
      if ((*DAT_80066f38 & 0x8000) == 0) {
        iVar4 = *(int *)(param_2 + 8);
        iVar2 = -iVar4;
        iVar3 = iVar2;
        if (0x20 < iVar2) {
          iVar3 = 0x20;
        }
        iVar3 = iVar4 + iVar3;
        if (iVar2 < -0x20) {
          iVar3 = iVar4 + -0x20;
        }
        *(int *)(param_2 + 8) = iVar3;
      }
      else {
        iVar2 = *(int *)(param_2 + 8) + -0x10;
        *(int *)(param_2 + 8) = iVar2;
        if (iVar2 < -0x7f) {
          *(undefined4 *)(param_2 + 8) = 0xffffff81;
        }
      }
    }
    else {
      iVar2 = *(int *)(param_2 + 8) + 0x10;
      *(int *)(param_2 + 8) = iVar2;
      if (0x7f < iVar2) {
        *(undefined4 *)(param_2 + 8) = 0x7f;
      }
    }
    local_8 = *(int *)(param_2 + 8);
  }
  else {
    bVar1 = *(byte *)((int)DAT_80066f38 + 0xf);
    local_8 = (*(byte *)((int)DAT_80066f38 + 0xe) - 0x7f) - *(int *)(param_2 + 8);
    if (local_8 < -0x10) {
      local_8 = -0x10;
    }
    if (0x10 < local_8) {
      local_8 = 0x10;
    }
    local_8 = *(int *)(param_2 + 8) + local_8;
    *(int *)(param_2 + 8) = local_8;
    if (local_8 < -0x7f) {
      *(undefined4 *)(param_2 + 8) = 0xffffff81;
    }
    if (0x7f < *(int *)(param_2 + 8)) {
      *(undefined4 *)(param_2 + 8) = 0x7f;
    }
    local_8 = *(int *)(param_2 + 8);
    local_4 = (0x7f - (uint)bVar1) - *(int *)(param_2 + 4);
    if (local_4 < -0x10) {
      local_4 = -0x10;
    }
    if (0x10 < local_4) {
      local_4 = 0x10;
    }
    local_4 = *(int *)(param_2 + 4) + local_4;
    *(int *)(param_2 + 4) = local_4;
    if (local_4 < -0x7f) {
      *(undefined4 *)(param_2 + 4) = 0xffffff81;
    }
    if (0x7f < *(int *)(param_2 + 4)) {
      *(undefined4 *)(param_2 + 4) = 0x7f;
    }
    local_4 = *(int *)(param_2 + 4);
  }
  *param_1 = -local_8;
  if ((local_4 == 0) && (param_3 == 0)) {
    iVar2 = Spyro.rotation.Pitch >> 3;
    param_1[1] = iVar2;
    if (0x7f < iVar2) {
      param_1[1] = 0x7f;
    }
    local_4 = -0x7f;
    if (-0x80 < param_1[1]) {
      return;
    }
  }
  param_1[1] = local_4;
  return;
}



void FUN_8002b9a0(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar1 = cosineLookup(Spyro.rotation.Roll);
  iVar2 = sineLookup(Spyro.rotation.Roll);
  iVar3 = cosineLookup(-Spyro.rotation.Pitch & 0xfff);
  if (iVar3 == 0) {
    iVar3 = 1;
  }
  iVar4 = sineLookup(-Spyro.rotation.Pitch & 0xfff);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (param_1 * iVar4 == -0x80000000)) {
    trap(0x1800);
  }
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (param_1 * iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  Spyro.rotation.Pitch = Spyro.rotation.Pitch + (param_1 * iVar2 >> 0xc) & 0xfff;
  Spyro.rotation.Yaw = Spyro.rotation.Yaw + (param_1 * iVar1) / iVar3 & 0xfff;
  Spyro.rotation.Roll = Spyro.rotation.Roll + (((param_1 * iVar4) / iVar3) * iVar1 >> 0xc) & 0xfff;
  return;
}



uint FUN_8002bb24(int param_1,int param_2)

{
  bool bVar1;
  uint uVar2;
  
  uVar2 = Spyro.maybeTargetYaw - Spyro.rotation.Yaw & 0xfff;
  if (0x800 < uVar2) {
    uVar2 = uVar2 - 0x1000;
  }
  if ((int)uVar2 < 1) {
    if (-1 < (int)uVar2) {
      Spyro.maybeTurnSpeed = 0;
      return 0;
    }
    if (0 < Spyro.maybeTurnSpeed) {
      Spyro.maybeTurnSpeed = 0;
    }
    Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed - param_2;
    if (Spyro.maybeTurnSpeed < -param_1) {
      Spyro.maybeTurnSpeed = -param_1;
    }
    bVar1 = Spyro.maybeTurnSpeed < (int)uVar2;
  }
  else {
    if (Spyro.maybeTurnSpeed < 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + param_2;
    if (param_1 < Spyro.maybeTurnSpeed) {
      Spyro.maybeTurnSpeed = param_1;
    }
    bVar1 = (int)uVar2 < Spyro.maybeTurnSpeed;
  }
  if (bVar1) {
    Spyro.maybeTurnSpeed = uVar2;
  }
  FUN_8002b9a0(Spyro.maybeTurnSpeed);
  return uVar2;
}



bool FUN_8002bc68(void)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  Vec3 local_18;
  
  bVar1 = false;
  if (((DAT_8006839e != '\0') && (bVar1 = false, (Spyro.field150_0x20c & 0x40U) == 0)) &&
     (bVar1 = false, (*(uint *)(DAT_80066f38 + 0xc) & 0xffff0000) != 0x7f7f0000)) {
    local_18.x = *(byte *)(DAT_80066f38 + 0xe) - 0x7f;
    local_18.z = 0;
    local_18.y = *(byte *)(DAT_80066f38 + 0xf) - 0x7f;
    iVar2 = VectorLength(&local_18,0);
    bVar1 = false;
    if (iVar2 < 0x60) {
      uVar4 = Spyro.maybeTargetYaw - Spyro.rotation.Yaw & 0xfff;
      if (0x800 < uVar4) {
        uVar4 = uVar4 - 0x1000;
      }
      uVar3 = uVar4;
      if ((int)uVar4 < 0) {
        uVar3 = -uVar4;
      }
      bVar1 = 0x100 < (int)uVar3;
      Spyro.maybeTargetYaw = Spyro.rotation.Yaw + ((int)(iVar2 * uVar4) >> 9) & 0xfff;
    }
  }
  return bVar1;
}



void FUN_8002bd70(int param_1,int param_2)

{
  bool bVar1;
  
  if (Spyro.maybeHorizontalSpeedDecay < Spyro.maybeHorizontalSpeed) {
    bVar1 = Spyro.maybeHorizontalSpeed < Spyro.maybeHorizontalSpeedDecay + param_1;
    Spyro.maybeHorizontalSpeedDecay = Spyro.maybeHorizontalSpeedDecay + param_1;
  }
  else {
    Spyro.maybeHorizontalSpeedDecay = Spyro.maybeHorizontalSpeedDecay - param_2;
    bVar1 = Spyro.maybeHorizontalSpeedDecay < Spyro.maybeHorizontalSpeed;
  }
  if (bVar1) {
    Spyro.maybeHorizontalSpeedDecay = Spyro.maybeHorizontalSpeed;
  }
  return;
}



void FUN_8002bdbc(void)

{
  Spyro.field42_0x88.y = 0;
  Spyro.field42_0x88.z = 0;
  Spyro.field42_0x88.x = Spyro.maybeHorizontalSpeedDecay;
  MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&Spyro.field42_0x88,&Spyro.field42_0x88);
  return;
}



void FUN_8002be04(void)

{
  char cVar1;
  int iVar2;
  Vec3 local_30;
  Vec3 local_20;
  
  if ((Spyro.maybeSubstate == Walk) || (Spyro.maybeSubstate == Ice)) {
    local_30.z = 0x20 - Spyro.field172_0x270;
    local_20.x = Spyro.field172_0x270 + 0x60;
    local_20.z = local_30.z;
  }
  else if (Spyro.maybeSubstate == Swim) {
    local_30.z = 0;
    local_20.z = 0;
    local_20.x = Spyro.field172_0x270 + 0x60;
  }
  else {
    if (Spyro.maybeSubstate == Climb) {
      local_20.x = Spyro.field172_0x270 + 0xa0;
    }
    else {
      local_20.x = Spyro.field172_0x270 + 0x60;
    }
    local_30.z = -Spyro.field172_0x270;
    local_20.z = local_30.z + -0x40;
  }
  local_20.y = 0;
  local_30.y = 0;
  local_30.x = 0;
  MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_30,&local_30);
  VectorAdd(&local_30,&local_30,&Spyro.position);
  MatrixMultVector((Mat33 *)0x0,&local_20,&local_20);
  VectorAdd(&local_20,&local_20,&Spyro.position);
  iVar2 = FUN_8003ce94(&local_30,&local_20);
  if (iVar2 != 0) {
    iVar2 = VectorLength(&Vec3_8006ab88,0);
    cVar1 = Atan2(Vec3_8006ab88.z,iVar2,0);
    if ('\x16' < cVar1) {
      Spyro.field61_0x106 = '\x01';
      VectorCopy(&Spyro.field54_0xe0,&Vec3_8006ab88);
      Spyro.field73_0x118 = DAT_8006ab94;
    }
  }
  return;
}



void FUN_8002bfbc(void)

{
  int iVar1;
  Vec3 VStack_18;
  
  iVar1 = VectorLength(&Spyro.trueVelocity,0);
  if (0x180 < iVar1) {
    VectorSubtract(&VStack_18,&Spyro.physicsVelocity,&Spyro.trueVelocity);
    iVar1 = VectorLength(&VStack_18,0);
    if (0xc0 < iVar1) {
      VStack_18.z = 0;
      VectorCopy(&Spyro.field54_0xe0,&VStack_18);
      Spyro.field61_0x106 = '\x01';
    }
  }
  return;
}



void FUN_8002c038(void)

{
  int iVar1;
  
  VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
  if (Spyro.field61_0x106 != '\0') {
    Spyro.field54_0xe0.z = 0;
    VectorNormalize(0x8006a0d0,0x1000);
    iVar1 = -Spyro.trueVelocity.x * Spyro.field54_0xe0.x -
            Spyro.trueVelocity.y * Spyro.field54_0xe0.y >> 0xc;
    if (0 < iVar1) {
      VectorScale(&Spyro.field54_0xe0,0x1000,iVar1);
      VectorAdd(&Spyro.trueVelocity,&Spyro.trueVelocity,&Spyro.field54_0xe0);
    }
  }
  return;
}



void FUN_8002c0f4(void)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  Spyro *from;
  Spyro *to;
  int iVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  Vec3 local_80;
  Vec3 local_70;
  Vec3 VStack_60;
  Vec3 VStack_50;
  Vec3 VStack_40;
  int local_30;
  
  Spyro.field71_0x110 = 0xff;
  Spyro.field72_0x114 = 0xff;
  Spyro.field73_0x118 = 0xff;
  Spyro.field61_0x106 = '\0';
  Spyro.field79_0x140 = 0;
  Spyro.field51_0xc4 = Spyro.field51_0xc4 + 1;
  VectorClear(&Spyro.field54_0xe0);
  VectorClear(&Spyro.field52_0xc8);
  uVar3 = Spyro.rotation.Yaw - Spyro.field78_0x13c & 0xfff;
  if (0x800 < uVar3) {
    uVar3 = uVar3 - 0x1000;
  }
  if ((int)uVar3 < 0) {
    uVar3 = -uVar3;
  }
  uVar6 = 0;
  if (0x40 < (int)uVar3) {
    Spyro.field64_0x109 = '\0';
  }
  uVar3 = 0;
  VectorCopy(&VStack_50,&Spyro.position);
  VectorShiftRight(&Spyro.field41_0x7c,6);
  iVar5 = 0;
  if (Spyro.field60_0x105 == '\0') {
    iVar1 = VectorLength(&Spyro.field41_0x7c,1);
    iVar4 = Spyro.field172_0x270 + -0x10;
    if (iVar4 == 0) {
      trap(0x1c00);
    }
    if ((iVar4 == -1) && (iVar1 == -0x80000000)) {
      trap(0x1800);
    }
    iVar4 = iVar1 / iVar4 + 1;
    iVar1 = Spyro.field41_0x7c.z;
    if (1 < iVar4) {
      iVar7 = Spyro.field41_0x7c.x / iVar4;
      if (iVar4 == 0) {
        trap(0x1c00);
      }
      if ((iVar4 == -1) && (Spyro.field41_0x7c.x == -0x80000000)) {
        trap(0x1800);
      }
      iVar8 = Spyro.field41_0x7c.y / iVar4;
      if (iVar4 == 0) {
        trap(0x1c00);
      }
      if ((iVar4 == -1) && (Spyro.field41_0x7c.y == -0x80000000)) {
        trap(0x1800);
      }
      iVar1 = Spyro.field41_0x7c.z / iVar4;
      if (iVar4 == 0) {
        trap(0x1c00);
      }
      Spyro.field41_0x7c.x = iVar7;
      Spyro.field41_0x7c.y = iVar8;
      if ((iVar4 == -1) && (Spyro.field41_0x7c.z == -0x80000000)) {
        trap(0x1800);
      }
    }
    Spyro.field41_0x7c.z = iVar1;
    local_30 = 0;
    if (0 < iVar4) {
      do {
        VectorAdd(&Spyro.position,&Spyro.position,&Spyro.field41_0x7c);
        iVar5 = 0;
        do {
          VectorCopy(&VStack_60,&Spyro.position);
          if (Spyro.maybeSubstate == Hurt) {
            iVar1 = FUN_8004055c(&Spyro.position,Spyro.field172_0x270,1,0x8006a014,
                                 Spyro.field77_0x138,(Object *)0x0);
            if ((iVar1 == 0) || (Spyro.state == HurtSquash)) {
LAB_8002c4e0:
              iVar1 = 0;
            }
            else {
LAB_8002c4bc:
              FUN_8004055c(&Spyro.position,Spyro.field172_0x270,2,0,0,(Object *)0x0);
            }
          }
          else if ((int)Spyro.maybeSubstate < 8) {
            if (Spyro.maybeSubstate == Charge) {
LAB_8002c39c:
              iVar1 = FUN_8004055c(&Spyro.position,Spyro.field172_0x270,1,0x8006a014,
                                   Spyro.field77_0x138,(Object *)0x0);
              if (iVar1 != 0) {
                if ((Spyro.takingDamageRelated & 6U) == 0) {
                  iVar1 = 0;
                }
                else {
                  FUN_8004055c(&Spyro.position,Spyro.field172_0x270,2,0,0,(Object *)0x0);
                }
                DAT_80068398 = 0x78;
                DAT_80068394 = 0xf;
              }
            }
            else {
LAB_8002c4ec:
              iVar1 = FUN_8004055c(&Spyro.position,Spyro.field172_0x270,0,0x8006a014,
                                   Spyro.field77_0x138,(Object *)0x0);
            }
          }
          else {
            if (Spyro.maybeSubstate != Supercharge) {
              if (Spyro.maybeSubstate == UnderwaterCharge) goto LAB_8002c39c;
              goto LAB_8002c4ec;
            }
            iVar1 = FUN_8004055c(&Spyro.position,Spyro.field172_0x270,1,0x8006a014,
                                 Spyro.field77_0x138,(Object *)0x0);
            if (iVar1 == 0) goto LAB_8002c4e0;
            if ((Spyro.takingDamageRelated & 0x4000U) != 0) goto LAB_8002c4bc;
            iVar1 = 0;
          }
          if (((Spyro.takingDamageRelated != 0) && (Spyro.field173_0x274 < 0)) &&
             (DAT_8006aba0 != 0)) {
            VectorSubtract(&local_80,&Spyro.position,(Vec3 *)(DAT_8006aba0 + 0xc));
            Spyro.field173_0x274 = Atan2(local_80.x,local_80.y,0);
          }
          if (iVar1 != 0) {
            Spyro.field79_0x140 = iVar1;
            VectorCopy(&Spyro.position,&Vec3_8006ab7c);
            VectorSubtract(&local_80,&Spyro.position,&VStack_60);
            iVar7 = VectorLength(&local_80,1);
            if (0x140 < iVar7) {
              VectorScale(&local_80,iVar7,0x140);
              VectorAdd(&Spyro.position,&VStack_60,&local_80);
            }
          }
          iVar7 = FUN_8003dc64(&Spyro,Spyro.field172_0x270,0,0x8006a014,Spyro.field77_0x138,0);
          if (iVar7 == 0) {
            if (iVar1 == 0) break;
          }
          else {
            VectorCopy(&Spyro.field52_0xc8,&Vec3_8006ab88);
            if (Spyro.maybeSubstate + ~Charge < 2) {
              VectorSubtract(&local_80,&Vec3_8006ab70,&Spyro.position);
              VectorNormalize(&local_80,0x100);
              if (local_80.z < -200) goto LAB_8002c6d4;
              VectorCopy(&local_70,&Spyro.field41_0x7c);
              VectorNormalize(&local_70,0x100);
              if (0xe0 < local_80.x * local_70.x + local_80.y * local_70.y + local_80.z * local_70.z
                         >> 8) goto LAB_8002c6d4;
            }
            else {
LAB_8002c6d4:
              Spyro.field51_0xc4 = 0;
            }
            if ((Spyro.field71_0x110 & 0x3fU) == 0x3f) {
              Spyro.field71_0x110 = DAT_8006ab94;
              VectorCopy(&Spyro.field74_0x11c,&Vec3_8006ab88);
            }
            iVar1 = VectorLength(&Vec3_8006ab88,0);
            uVar2 = Atan2(iVar1,Vec3_8006ab88.z,1);
            uVar2 = uVar2 & 0xfff;
            if (0x800 < uVar2) {
              uVar2 = uVar2 - 0x800;
            }
            if ((int)uVar2 < 0) {
              uVar2 = -uVar2;
            }
            if ((int)uVar2 < 0x200) {
              iVar1 = Atan2(Vec3_8006ab88.x,Vec3_8006ab88.y,1);
              uVar2 = iVar1 - (Spyro.rotation.Yaw + -0x800) & 0xfff;
              if (0x800 < uVar2) {
                uVar2 = uVar2 - 0x1000;
              }
              if ((int)uVar2 < (int)uVar6) {
                uVar6 = uVar2;
              }
              if ((int)uVar3 < (int)uVar2) {
                uVar3 = uVar2;
              }
            }
            VectorCopy(&Spyro.position,&Vec3_8006ab7c);
            VectorSubtract(&local_80,&Spyro.position,&VStack_60);
            iVar1 = VectorLength(&local_80,1);
            if (0x140 < iVar1) {
              VectorScale(&local_80,iVar1,0x140);
              VectorAdd(&Spyro.position,&VStack_60,&local_80);
            }
          }
          iVar5 = iVar5 + 1;
        } while (iVar5 < 6);
        if ((5 < iVar5) && (Spyro.field79_0x140 != 0)) {
          iVar5 = 0;
          do {
            VectorCopy(&VStack_60,&Spyro.position);
            iVar1 = FUN_8003dcc0(&Spyro,Spyro.field172_0x270);
            if (iVar1 == 0) break;
            VectorCopy(&Spyro.field52_0xc8,&Vec3_8006ab88);
            if (Spyro.maybeSubstate + ~Charge < 2) {
              VectorSubtract(&local_80,&Vec3_8006ab70,&Spyro.position);
              VectorNormalize(&local_80,0x100);
              if (local_80.z < -200) goto LAB_8002c910;
              VectorCopy(&local_70,&Spyro.field41_0x7c);
              VectorNormalize(&local_70,0x100);
              if (0xe0 < local_80.x * local_70.x + local_80.y * local_70.y + local_80.z * local_70.z
                         >> 8) goto LAB_8002c910;
            }
            else {
LAB_8002c910:
              Spyro.field51_0xc4 = 0;
            }
            if ((Spyro.field71_0x110 & 0x3fU) == 0x3f) {
              Spyro.field71_0x110 = DAT_8006ab94;
              VectorCopy(&Spyro.field74_0x11c,&Vec3_8006ab88);
            }
            iVar1 = VectorLength(&Vec3_8006ab88,0);
            uVar2 = Atan2(iVar1,Vec3_8006ab88.z,1);
            uVar2 = uVar2 & 0xfff;
            if (0x800 < uVar2) {
              uVar2 = uVar2 - 0x800;
            }
            if ((int)uVar2 < 0) {
              uVar2 = -uVar2;
            }
            if ((int)uVar2 < 0x200) {
              iVar1 = Atan2(Vec3_8006ab88.x,Vec3_8006ab88.y,1);
              uVar2 = iVar1 - (Spyro.rotation.Yaw + -0x800) & 0xfff;
              if (0x800 < uVar2) {
                uVar2 = uVar2 - 0x1000;
              }
              if ((int)uVar2 < (int)uVar6) {
                uVar6 = uVar2;
              }
              if ((int)uVar3 < (int)uVar2) {
                uVar3 = uVar2;
              }
            }
            VectorCopy(&Spyro.position,&Vec3_8006ab7c);
            VectorSubtract(&local_80,&Spyro.position,&VStack_60);
            iVar1 = VectorLength(&local_80,1);
            if (0x140 < iVar1) {
              VectorScale(&local_80,iVar1,0x140);
              VectorAdd(&Spyro.position,&VStack_60,&local_80);
            }
            iVar5 = iVar5 + 1;
          } while (iVar5 < 6);
        }
        local_30 = local_30 + 1;
      } while (local_30 < iVar4);
    }
    to = &Spyro;
    VectorSubtract(&VStack_40,&Spyro.position,&VStack_50);
    VectorScale(&VStack_40,0x1000,0x1100);
    VectorAdd(&VStack_40,&VStack_40,&VStack_50);
    iVar1 = FUN_8003ce94(&VStack_50,&VStack_40);
    if ((iVar1 == 0) || (isOnWaterSurface != 0)) {
      if (5 < iVar5) goto LAB_8002caf8;
      goto LAB_8002cae0;
    }
    from = (Spyro *)&Spyro.field76_0x12c;
  }
  else {
    VectorAdd(&Spyro.position,&Spyro.position,&Spyro.field41_0x7c);
LAB_8002cae0:
    to = (Spyro *)&Spyro.field76_0x12c;
    from = &Spyro;
  }
  VectorCopy(&to->position,&from->position);
LAB_8002caf8:
  VectorSubtract(&Spyro.physicsVelocity,&Spyro.position,&VStack_50);
  VectorShiftUp(&Spyro.physicsVelocity,6);
  if ((Spyro.field150_0x20c & 8U) != 0) {
    VectorCopy(&local_80,&Spyro.field154_0x21c);
    VectorShiftUp(&local_80,6);
    VectorSubtract(&Spyro.physicsVelocity,&Spyro.physicsVelocity,&local_80);
  }
  if (deltaTime == 0) {
    trap(0x1c00);
  }
  if ((deltaTime == -1) && (Spyro.physicsVelocity.x == -0x80000000)) {
    trap(0x1800);
  }
  if (deltaTime == 0) {
    trap(0x1c00);
  }
  if ((deltaTime == -1) && (Spyro.physicsVelocity.y == -0x80000000)) {
    trap(0x1800);
  }
  if (deltaTime == 0) {
    trap(0x1c00);
  }
  if ((deltaTime == -1) && (Spyro.physicsVelocity.z == -0x80000000)) {
    trap(0x1800);
  }
  Spyro.physicsVelocity.x = Spyro.physicsVelocity.x / deltaTime;
  Spyro.physicsVelocity.y = Spyro.physicsVelocity.y / deltaTime;
  Spyro.physicsVelocity.z = Spyro.physicsVelocity.z / deltaTime;
  Spyro.field49_0xbc = VectorLength(&Spyro.physicsVelocity,0);
  if ((uVar6 != 0) && (uVar3 != 0)) {
    Spyro.field64_0x109 = '\x01';
    Spyro.field78_0x13c = Spyro.rotation.Yaw;
  }
  return;
}



void FUN_8002cc88(void)

{
  char cVar1;
  int iVar2;
  Vec3 local_48;
  Vec3 local_38;
  Vec3 VStack_28;
  
  Spyro.airTime = Spyro.airTime + 1;
  VectorClear(&Spyro.field53_0xd4);
  Spyro.field53_0xd4.z = 0x1000;
  Spyro.field55_0xec = 0;
  Spyro.ledgeDetected = '\0';
  Spyro.currentTriangleStoodOnIndex = -1;
  if (Spyro.field60_0x105 == '\0') {
    local_48.x = 0;
    local_38.x = 0;
    local_48.y = 0;
    local_38.y = 0;
    local_48.z = -Spyro.field172_0x270 + 0x60;
    local_38.z = -Spyro.field172_0x270 + -0x60;
    MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&local_48);
    VectorAdd(&local_48,&local_48,&Spyro.position);
    MatrixMultVector((Mat33 *)0x0,&local_38,&local_38);
    VectorAdd(&local_38,&local_38,&Spyro.position);
    iVar2 = FUN_8003ce38(&local_48,&local_38,4,0,0);
    if (iVar2 == 0) {
      Spyro.field80_0x144 = 0;
    }
    else {
      VectorCopy(&Spyro.field53_0xd4,&Vec3_8006ab88);
      iVar2 = VectorLength(&Vec3_8006ab88,0);
      cVar1 = Atan2(Vec3_8006ab88.z,iVar2,0);
      Spyro.field55_0xec = (int)cVar1;
      if (Spyro.field55_0xec < 0) {
        Spyro.field55_0xec = 0x400;
      }
      if (overTriangleIndex < 0) {
        Spyro.field80_0x144 = DAT_8006aba0;
      }
      else {
        Spyro.field80_0x144 = 0;
      }
      if (Spyro.field55_0xec < 0x21) {
        Spyro.airTime = 0;
        Spyro.field72_0x114 = DAT_8006ab94;
        Spyro.currentTriangleStoodOnIndex = overTriangleIndex;
        Spyro.field119_0x1bd = Spyro.field55_0xec < 0x17;
        if (-1 < overTriangleIndex) {
          UnpackCollisionTriangle(overTriangleIndex,&Spyro.currentTriangleVertices);
        }
        local_48.y = 0;
        local_38.y = 0;
        local_48.x = Spyro.field172_0x270 + -0x60;
        local_48.z = -Spyro.field172_0x270 + 0x60;
        local_38.x = Spyro.field172_0x270 + 0x60;
        local_38.z = -Spyro.field172_0x270 + -0x60;
        MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&local_48);
        VectorAdd(&local_48,&local_48,&Spyro.position);
        MatrixMultVector((Mat33 *)0x0,&local_38,&local_38);
        VectorAdd(&local_38,&local_38,&Spyro.position);
        iVar2 = FUN_8003ce94(&local_48,&local_38);
        if (iVar2 == 0) {
          Spyro.ledgeDetected = '\x01';
        }
      }
    }
    if ((((Spyro.state != Charge) && (Spyro.state != Run)) && (Spyro.airTime != 0)) &&
       (Spyro.field51_0xc4 == 0)) {
      local_48.x = 0;
      local_48.y = 0;
      local_38.x = 0;
      local_38.y = 0;
      local_48.z = -Spyro.field172_0x270 + 0x60;
      local_38.z = -Spyro.field172_0x270 + -0x60;
      VectorAdd(&local_48,&local_48,&Spyro.position);
      VectorAdd(&local_38,&local_38,&Spyro.position);
      iVar2 = FUN_8003ce38(&local_48,&local_38,4,0,0);
      if (iVar2 != 0) {
        VectorCopy(&Spyro.field53_0xd4,&Vec3_8006ab88);
        iVar2 = VectorLength(&Spyro.field53_0xd4,0);
        cVar1 = Atan2(Spyro.field53_0xd4.z,iVar2,0);
        Spyro.field55_0xec = (int)cVar1;
        if (Spyro.field55_0xec < 0) {
          Spyro.field55_0xec = 0x400;
        }
        if (Spyro.field55_0xec < 0x21) {
          Spyro.airTime = 0;
          Spyro.field72_0x114 = DAT_8006ab94;
          Spyro.currentTriangleStoodOnIndex = overTriangleIndex;
          Spyro.field119_0x1bd = Spyro.field55_0xec < 0x17;
          if (-1 < overTriangleIndex) {
            UnpackCollisionTriangle(overTriangleIndex,&Spyro.currentTriangleVertices);
          }
        }
      }
    }
  }
  VectorCopy(&VStack_28,&Spyro.position);
  VStack_28.z = VStack_28.z + 0x264;
  iVar2 = RaycastDown(&VStack_28,0x4c8);
  if ((iVar2 == 0) || (isOnWaterSurface == 0)) {
    if (Spyro.field63_0x108 == '\0') {
      Spyro.field57_0xfc = 0;
    }
    Spyro.field63_0x108 = '\0';
  }
  else {
    Spyro.field63_0x108 = '\x01';
    Spyro.field57_0xfc = iVar2;
  }
  return;
}



void FUN_8002d0f8(void)

{
  int iVar1;
  Vec3 local_70;
  Vec3 local_60;
  Vec3 local_50;
  undefined local_40;
  char local_3f;
  undefined local_3e;
  Mat33 MStack_38;
  
  if (Spyro.field61_0x106 == '\0') {
    local_40 = (undefined)(Spyro.rotation.Roll >> 4);
    local_3e = (undefined)(Spyro.rotation.Yaw >> 4);
    local_3f = (char)(Spyro.rotation.Pitch >> 4);
  }
  else {
    local_40 = 0;
    iVar1 = VectorLength(&Spyro.field54_0xe0,0);
    local_3f = Atan2(iVar1,Spyro.field54_0xe0.z,0);
    local_3f = -local_3f;
    local_3e = Atan2(-Spyro.field54_0xe0.x,-Spyro.field54_0xe0.y,0);
  }
  BuildRotationMatrix(&local_40,&MStack_38,(Mat33 *)0x0);
  local_50.y = 0;
  local_50.z = 0;
  local_50.x = Spyro.field172_0x270;
  VectorCopy(&local_60,&local_50);
  local_60.x = local_60.x + 0xa0;
  VectorCopy(&local_70,&local_50);
  local_70.x = local_70.x + -0x80;
  MatrixMultVector(&MStack_38,&local_70,&local_70);
  VectorAdd(&local_70,&Spyro.position,&local_70);
  MatrixMultVector((Mat33 *)0x0,&local_60,&local_60);
  VectorAdd(&local_60,&Spyro.position,&local_60);
  MatrixMultVector((Mat33 *)0x0,&local_50,&local_50);
  VectorAdd(&local_50,&Spyro.position,&local_50);
  iVar1 = FUN_8003ce94(&local_70,&local_60);
  if (iVar1 != 0) {
    VectorSubtract(&local_50,&Vec3_8006ab70,&local_50);
    iVar1 = local_50.x;
    if (local_50.x < 0) {
      iVar1 = -local_50.x;
    }
    if (iVar1 < 8) {
      local_50.x = 0;
    }
    iVar1 = local_50.y;
    if (local_50.y < 0) {
      iVar1 = -local_50.y;
    }
    if (iVar1 < 8) {
      local_50.y = 0;
    }
    iVar1 = local_50.z;
    if (local_50.z < 0) {
      iVar1 = -local_50.z;
    }
    if (iVar1 < 8) {
      local_50.z = 0;
    }
    VectorAdd(&Spyro.position,&Spyro.position,&local_50);
  }
  return;
}



bool FUN_8002d328(undefined4 param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  bool bVar5;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  int local_4c;
  int local_48;
  undefined local_40;
  char local_3f;
  undefined local_3e;
  undefined auStack_38 [32];
  
  if ((globalProgressFlags.climb.isPayed == 0) || (Spyro.field61_0x106 == '\0')) {
switchD_8002d460_caseD_5:
    return false;
  }
  local_4c = 0;
  local_60 = 0;
  local_5c = 0;
  local_50 = Spyro.field172_0x270 + 0x60;
  local_58 = -0x40 - Spyro.field172_0x270;
  local_48 = local_58;
  iVar1 = FUN_8002afdc(0x8006a020,&local_60,&local_50);
  if (iVar1 == 8) {
    local_40 = 0;
    iVar1 = VectorLength(&Vec3_8006ab88,0);
    local_3f = Atan2(iVar1,Vec3_8006ab88.z,0);
    local_3f = -local_3f;
    local_3e = Atan2(-Vec3_8006ab88.x,-Vec3_8006ab88.y,0);
  }
  else {
    local_40 = (undefined)(Spyro.rotation.Roll >> 4);
    local_3e = (undefined)(Spyro.rotation.Yaw >> 4);
    local_3f = (char)(Spyro.rotation.Pitch >> 4);
  }
  BuildRotationMatrix(&local_40,auStack_38,(Mat33 *)0x0);
  switch(param_1) {
  case 0:
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_5c = 0x40 - Spyro.field172_0x270;
    local_58 = Spyro.field172_0x270 + -0x60;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_4c = local_5c;
    local_48 = local_58;
    iVar1 = FUN_8002afdc(auStack_38,&local_60,&local_50);
    local_48 = -Spyro.field172_0x270;
    local_4c = local_48 + 0x40;
    break;
  case 1:
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_58 = Spyro.field172_0x270 + -0x60;
    local_5c = local_60;
    local_4c = local_60;
    local_48 = local_58;
    iVar1 = FUN_8002afdc(auStack_38,&local_60,&local_50);
    bVar5 = iVar1 == 8;
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_48 = -Spyro.field172_0x270;
    local_4c = local_60;
    goto LAB_8002d68c;
  case 2:
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_5c = 0xa0 - Spyro.field172_0x270;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_48 = Spyro.field172_0x270;
    local_58 = Spyro.field172_0x270;
    local_4c = local_5c;
    iVar1 = FUN_8002afdc(auStack_38,&local_60,&local_50);
    bVar5 = iVar1 == 8;
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_4c = Spyro.field172_0x270 + -0xa0;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_48 = Spyro.field172_0x270;
    goto LAB_8002d68c;
  case 3:
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_5c = -Spyro.field172_0x270 + 0xa0;
    local_58 = -Spyro.field172_0x270 + -0xa0;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_4c = local_5c;
    local_48 = local_58;
    iVar1 = FUN_8002afdc(auStack_38,&local_60,&local_50);
    local_4c = Spyro.field172_0x270 + -0xa0;
    local_48 = -0xa0 - Spyro.field172_0x270;
    break;
  case 4:
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_5c = 0xa0 - Spyro.field172_0x270;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_58 = local_60;
    local_4c = local_5c;
    local_48 = local_60;
    iVar1 = FUN_8002afdc(auStack_38,&local_60,&local_50);
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_5c = Spyro.field172_0x270 + -0xa0;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_58 = local_60;
    local_4c = local_5c;
    local_48 = local_60;
    iVar2 = FUN_8002afdc(auStack_38,&local_60,&local_50);
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_58 = -Spyro.field172_0x270;
    local_5c = local_58 + 0x80;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_4c = local_5c;
    local_48 = local_58;
    iVar3 = FUN_8002afdc(auStack_38,&local_60,&local_50);
    local_50 = Spyro.field172_0x270 + 0xa0;
    local_5c = Spyro.field172_0x270 + -0x80;
    local_58 = -Spyro.field172_0x270;
    local_60 = Spyro.field172_0x270 + -0x40;
    local_4c = local_5c;
    local_48 = local_58;
    iVar4 = FUN_8002afdc(auStack_38,&local_60,&local_50);
    return ((iVar1 == 8 && iVar2 == 8) && iVar3 == 8) && iVar4 == 8;
  default:
    goto switchD_8002d460_caseD_5;
  }
  local_50 = Spyro.field172_0x270 + 0xa0;
  bVar5 = iVar1 == 8;
  local_60 = Spyro.field172_0x270 + -0x40;
LAB_8002d68c:
  local_5c = local_4c;
  local_58 = local_48;
  iVar1 = FUN_8002afdc(auStack_38,&local_60,&local_50);
  return (bool)(bVar5 & iVar1 == 8);
}



void FUN_8002d7f8(void)

{
  int iVar1;
  Vec3 local_48;
  Vec3 VStack_38;
  Vec3 VStack_28;
  
  local_48.x = 0;
  local_48.y = 0;
  local_48.z = -Spyro.field172_0x270;
  VectorCopy(&VStack_28,&local_48);
  VStack_28.z = VStack_28.z + -0x80;
  VectorCopy(&VStack_38,&local_48);
  VStack_38.z = VStack_38.z + 0x80;
  MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&VStack_28,&VStack_28);
  VectorAdd(&VStack_28,&Spyro.position,&VStack_28);
  MatrixMultVector((Mat33 *)0x0,&VStack_38,&VStack_38);
  VectorAdd(&VStack_38,&Spyro.position,&VStack_38);
  MatrixMultVector((Mat33 *)0x0,&local_48,&local_48);
  VectorAdd(&local_48,&Spyro.position,&local_48);
  iVar1 = FUN_8003ce94(&VStack_38,&VStack_28);
  if ((iVar1 == 0) || (Vec3_8006ab88.z < 1)) {
    Spyro.airTime = Spyro.airTime + 1;
  }
  else {
    VectorSubtract(&local_48,&Vec3_8006ab70,&local_48);
    iVar1 = local_48.x;
    if (local_48.x < 0) {
      iVar1 = -local_48.x;
    }
    if (iVar1 < 8) {
      local_48.x = 0;
    }
    iVar1 = local_48.y;
    if (local_48.y < 0) {
      iVar1 = -local_48.y;
    }
    if (iVar1 < 8) {
      local_48.y = 0;
    }
    iVar1 = local_48.z;
    if (local_48.z < 0) {
      iVar1 = -local_48.z;
    }
    if (iVar1 < 8) {
      local_48.z = 0;
    }
    VectorAdd(&Spyro.position,&Spyro.position,&local_48);
    Spyro.airTime = 0;
    Spyro.field72_0x114 = DAT_8006ab94;
  }
  return;
}



undefined4 FUN_8002d9c4(void)

{
  undefined4 uVar1;
  Vec3 *out;
  Vec3 *right;
  int iVar2;
  Triangle TStack_50;
  Vec3 local_28;
  
  if (Spyro.currentTriangleStoodOnIndex < 0) {
    uVar1 = 0;
  }
  else {
    VectorClear(&local_28);
    iVar2 = 0;
    right = (Vec3 *)&Spyro.currentTriangleVertices;
    out = (Vec3 *)&TStack_50;
    UnpackCollisionTriangle(Spyro.currentTriangleStoodOnIndex,&TStack_50);
    do {
      VectorSubtract(out,out,right);
      VectorAdd(&local_28,&local_28,out);
      right = right + 1;
      iVar2 = iVar2 + 1;
      out = out + 1;
    } while (iVar2 < 3);
    local_28.x = local_28.x / 3;
    local_28.y = local_28.y / 3;
    local_28.z = local_28.z / 3;
    VectorShiftUp(&local_28,6);
    VectorAdd(&Spyro.field41_0x7c,&Spyro.field41_0x7c,&local_28);
    iVar2 = VectorLength(&local_28,1);
    uVar1 = 0;
    if (0x20 < iVar2) {
      uVar1 = 1;
    }
  }
  return uVar1;
}



void FUN_8002db08(undefined4 param_1)

{
  VectorCopy(&Spyro.field56_0xf0,&Spyro.field53_0xd4);
  VectorNormalize(0x8006a0e0,param_1);
  Spyro.field56_0xf0.x = -Spyro.field56_0xf0.x;
  Spyro.field56_0xf0.y = -Spyro.field56_0xf0.y;
  Spyro.field56_0xf0.z = -Spyro.field56_0xf0.z;
  return;
}



void FUN_8002db8c(int *param_1)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  Vec3 local_30;
  uint local_20;
  uint local_1c;
  
  if ((0x16 < Spyro.field55_0xec) && (Spyro.maybeSubstate != (Walk|Ice))) {
    param_1 = (int *)0x0;
  }
  if (param_1 == (int *)0x0) {
    local_20 = 0;
    local_1c = 0;
  }
  else {
    iVar1 = cosineLookup(Spyro.rotation.Yaw);
    iVar2 = sineLookup(Spyro.rotation.Yaw);
    local_30.x = *param_1 * iVar1 + param_1[1] * iVar2 >> 0xc;
    iVar1 = cosineLookup(Spyro.rotation.Yaw);
    iVar2 = sineLookup(Spyro.rotation.Yaw);
    local_30.y = param_1[1] * iVar1 - *param_1 * iVar2 >> 0xc;
    local_30.z = param_1[2];
    uVar3 = maybeSquareRoot(local_30.x * local_30.x + local_30.z * local_30.z);
    iVar1 = Atan2(uVar3,local_30.y,1);
    local_20 = -iVar1;
    iVar1 = Atan2(local_30.z,local_30.x,1);
    local_1c = -iVar1;
  }
  local_20 = local_20 - Spyro.rotation.Roll & 0xfff;
  if (0x800 < local_20) {
    local_20 = local_20 - 0x1000;
  }
  local_1c = local_1c - Spyro.rotation.Pitch & 0xfff;
  if (0x800 < local_1c) {
    local_1c = local_1c - 0x1000;
  }
  Spyro.field38_0x70 =
       Spyro.field38_0x70 + (((int)(local_20 << 2) >> 4) - ((Spyro.field38_0x70 << 4) >> 6));
  Spyro.field39_0x74 =
       Spyro.field39_0x74 + (((int)(local_1c << 2) >> 4) - ((Spyro.field39_0x74 << 4) >> 6));
  local_20 = Spyro.field38_0x70 >> 2;
  local_1c = Spyro.field39_0x74 >> 2;
  Spyro.rotation.Roll = Spyro.rotation.Roll + local_20 & 0xfff;
  if (0x800 < (uint)Spyro.rotation.Roll) {
    Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
  }
  Spyro.rotation.Pitch = Spyro.rotation.Pitch + local_1c & 0xfff;
  if (0x800 < (uint)Spyro.rotation.Pitch) {
    Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
  }
  if (((param_1 != (int *)0x0) && (0xc0 < (byte)(Spyro.angleAsByte.pitch - 0x20))) &&
     (0xc0 < (byte)(Spyro.angleAsByte.roll - 0x20))) {
    iVar1 = sineLookup();
    local_30.y = -iVar1 * (Spyro.field172_0x270 + 0x10) >> 0xc;
    iVar1 = sineLookup(local_1c);
    local_30.x = -iVar1 * (Spyro.field172_0x270 + 0x10) >> 0xc;
    iVar1 = cosineLookup(local_1c);
    iVar2 = cosineLookup(local_20);
    local_30.z = ((0x2000 - iVar1) - iVar2) * (Spyro.field172_0x270 + 0x10) >> 0xc;
    MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_30,&local_30);
    VectorAdd(&Spyro.position,&Spyro.position,&local_30);
  }
  return;
}



void FUN_8002ded0(Vec3 *param_1)

{
  int iVar1;
  uint local_18;
  uint local_14;
  
  iVar1 = VectorLength(param_1,0);
  iVar1 = Atan2(iVar1,param_1->z,1);
  local_18 = -Spyro.rotation.Roll & 0xfff;
  if (0x800 < local_18) {
    local_18 = local_18 - 0x1000;
  }
  local_14 = (iVar1 + 0x8e) - Spyro.rotation.Pitch & 0xfff;
  if (0x800 < local_14) {
    local_14 = local_14 - 0x1000;
  }
  Spyro.field38_0x70 =
       Spyro.field38_0x70 + (((int)(local_18 << 2) >> 4) - ((Spyro.field38_0x70 << 4) >> 6));
  Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field38_0x70 >> 2) & 0xfff;
  Spyro.field39_0x74 =
       Spyro.field39_0x74 + (((int)(local_14 << 2) >> 4) - ((Spyro.field39_0x74 << 4) >> 6));
  if (0x800 < (uint)Spyro.rotation.Roll) {
    Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
  }
  Spyro.rotation.Pitch = Spyro.rotation.Pitch + (Spyro.field39_0x74 >> 2) & 0xfff;
  if (0x800 < (uint)Spyro.rotation.Pitch) {
    Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
  }
  return;
}



void FUN_8002e00c(Vec3 *param_1)

{
  int iVar1;
  uint local_70;
  uint local_6c;
  uint local_68;
  Vec3 local_60;
  Vec3 VStack_50;
  undefined local_40;
  undefined local_3f;
  undefined local_3e;
  Mat33 MStack_38;
  
  if (Spyro.field61_0x106 == '\0') {
    local_6c = Spyro.rotation.Pitch + 0x400;
    local_68 = Spyro.rotation.Yaw;
  }
  else {
    iVar1 = VectorLength(param_1,0);
    local_6c = Atan2(param_1->z,iVar1,1);
    local_68 = Atan2(-param_1->x,-param_1->y,1);
  }
  local_70 = -Spyro.rotation.Roll & 0xfff;
  if (0x800 < local_70) {
    local_70 = local_70 - 0x1000;
  }
  local_6c = local_6c - (Spyro.rotation.Pitch + 0x400) & 0xfff;
  if (0x800 < local_6c) {
    local_6c = local_6c - 0x1000;
  }
  local_68 = local_68 - Spyro.rotation.Yaw & 0xfff;
  if (0x800 < local_68) {
    local_68 = local_68 - 0x1000;
  }
  Spyro.field38_0x70 =
       Spyro.field38_0x70 + (((int)(local_70 << 2) >> 4) - ((Spyro.field38_0x70 << 4) >> 6));
  Spyro.field39_0x74 =
       Spyro.field39_0x74 + (((int)(local_6c << 2) >> 4) - ((Spyro.field39_0x74 << 4) >> 6));
  Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field38_0x70 >> 2) & 0xfff;
  Spyro.field40_0x78 =
       Spyro.field40_0x78 + (((int)(local_68 << 2) >> 4) - ((Spyro.field40_0x78 << 4) >> 6));
  if (0x800 < (uint)Spyro.rotation.Roll) {
    Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
  }
  Spyro.rotation.Pitch = Spyro.rotation.Pitch + (Spyro.field39_0x74 >> 2) & 0xfff;
  if (0x800 < (uint)Spyro.rotation.Pitch) {
    Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
  }
  Spyro.rotation.Yaw = Spyro.rotation.Yaw + (Spyro.field40_0x78 >> 2) & 0xfff;
  if (0x800 < (uint)Spyro.rotation.Yaw) {
    Spyro.rotation.Yaw = Spyro.rotation.Yaw - 0x1000;
  }
  local_60.x = 0x164;
  local_60.z = 0;
  local_60.y = 0;
  VectorCopy(&VStack_50,&local_60);
  MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_60,&local_60);
  local_40 = (undefined)(Spyro.rotation.Roll >> 4);
  local_3f = (undefined)(Spyro.rotation.Pitch >> 4);
  local_3e = (undefined)(Spyro.rotation.Yaw >> 4);
  BuildRotationMatrix(&local_40,&MStack_38,(Mat33 *)0x0);
  MatrixMultVector(&MStack_38,&VStack_50,&VStack_50);
  VectorSubtract(&VStack_50,&VStack_50,&local_60);
  VectorSubtract(&Spyro.position,&Spyro.position,&VStack_50);
  return;
}



void FUN_8002e2bc(void)

{
  VectorClear(&Spyro.physicsVelocity);
  VectorClear(&Spyro.field42_0x88);
  VectorClear(&Spyro.trueVelocity);
  Spyro.maybeHorizontalSpeedDecay = 0;
  return;
}



void FUN_8002e304(void)

{
  int iVar1;
  
  iVar1 = 0;
  if (0 < deltaTime) {
    do {
      if ((Spyro.field137_0x1f0 == 0) && (Spyro.state == Spyro.field136_0x1ec)) {
        FUN_8002e440();
      }
      else {
        FUN_8002e64c();
      }
      if (Spyro.field90_0x16c == Spyro.field140_0x1fc) {
        if (Spyro.field141_0x200 == 0) {
          FUN_8002eb00();
        }
        else {
          if (Spyro.field141_0x200 != 6) goto LAB_8002e3bc;
          FUN_80030a14();
        }
      }
      else {
LAB_8002e3bc:
        FUN_8002ebc8();
      }
      iVar1 = iVar1 + 1;
    } while (iVar1 < deltaTime);
  }
  return;
}



void FUN_8002e3f8(int param_1)

{
  if (0xf < Spyro.field11_0x1c) {
    Spyro.field139_0x1f8 = (int)(byte)(&DAT_80062868)[Spyro.field11_0x1c];
    Spyro.field11_0x1c = (byte)(Spyro.field139_0x1f8 >> 4);
  }
  Spyro.field138_0x1f4 = param_1;
  return;
}



void FUN_8002e440(void)

{
  bool bVar1;
  byte bVar2;
  
  bVar1 = false;
  if (Spyro.field11_0x1c < 0x10) {
    Spyro.field139_0x1f8 = Spyro.field139_0x1f8 + Spyro.field138_0x1f4;
    bVar1 = 0xff < Spyro.field139_0x1f8;
    if (bVar1) {
      Spyro.field139_0x1f8 = Spyro.field139_0x1f8 + -0x100;
    }
    Spyro.field11_0x1c = (byte)(Spyro.field139_0x1f8 >> 4);
  }
  else if ((Spyro.field11_0x1c & 0xf) == Spyro.field11_0x1c >> 4) {
    bVar1 = true;
    Spyro.field11_0x1c =
         (byte)(*(int *)(*(int *)((uint)Spyro.nextAnimationState * 4 + DAT_80066f24) +
                         (uint)Spyro.nextAnimationFrame * 0x14 + 0x14) >> 0xe) & 0xf0;
  }
  else {
    Spyro.field11_0x1c = (Spyro.field11_0x1c & 0xf0) + (Spyro.field11_0x1c & 0xf) + 1;
  }
  if (bVar1) {
    bVar2 = Spyro.nextAnimationFrame + 1;
    Spyro.currentAnimationState = Spyro.nextAnimationState;
    Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
    Spyro.nextAnimationFrame = bVar2;
    if ((byte)(&DAT_80060335)[(uint)Spyro.nextAnimationState * 4] <= bVar2) {
      Spyro.nextAnimationFrame = (&DAT_80060334)[(uint)Spyro.nextAnimationState * 4];
    }
  }
  return;
}



void FUN_8002e568(void)

{
  uint uVar1;
  uint uVar2;
  
  if ((Spyro.field11_0x1c & 0xf) == Spyro.field11_0x1c >> 4) {
    uVar2 = (uint)Spyro.nextAnimationFrame;
    uVar1 = uVar2 + 1;
    Spyro.currentAnimationState = Spyro.nextAnimationState;
    Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
    Spyro.nextAnimationFrame = (byte)uVar1;
    Spyro.field11_0x1c =
         (byte)(*(int *)(*(int *)((uint)Spyro.nextAnimationState * 4 + DAT_80066f24) + uVar2 * 0x14
                        + 0x14) >> 0xe) & 0xf0;
    if ((int)((byte)(&DAT_80060336)[(uint)Spyro.nextAnimationState * 4] - 1) <= (int)(uVar1 & 0xff))
    {
      Spyro.nextAnimationFrame = 0;
      Spyro.field11_0x1c = 0x71;
      Spyro.field137_0x1f0 = 0;
      Spyro.nextAnimationState = (byte)Spyro.state;
      Spyro.field136_0x1ec = Spyro.state;
    }
  }
  else {
    Spyro.field11_0x1c = (Spyro.field11_0x1c & 0xf0) + (Spyro.field11_0x1c & 0xf) + 1;
  }
  return;
}



void FUN_8002e64c(void)

{
  byte bVar1;
  byte bVar2;
  
  if (Spyro.field137_0x1f0 != 0) {
    if (Spyro.field137_0x1f0 == 4) {
      if (((byte)(&DAT_8006042c)[Spyro.state + Spyro.field136_0x1ec * 0x3e] - 4 < 2) ||
         (Spyro.state == Spyro.field136_0x1ec)) goto LAB_8002e96c;
    }
    else if (Spyro.field137_0x1f0 == 5) {
      if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
        Spyro.currentAnimationState = Spyro.nextAnimationState;
        Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
      }
      Spyro.nextAnimationFrame = (&DAT_80060335)[(uint)Spyro.currentAnimationState * 4];
      Spyro.field11_0x1c = 0x71;
      Spyro.field137_0x1f0 = 4;
      return;
    }
  }
  if (Spyro.field136_0x1ec == Spyro.state) {
    return;
  }
  bVar2 = (byte)Spyro.state;
  switch((&DAT_8006042c)[Spyro.state + Spyro.field136_0x1ec * 0x3e]) {
  case 1:
    if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
      Spyro.currentAnimationState = Spyro.nextAnimationState;
      Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
    }
    Spyro.nextAnimationFrame = 0;
    Spyro.field11_0x1c = 0x71;
    break;
  case 2:
    if (Spyro.state != HurtSquash) {
      Spyro.field11_0x1c =
           (byte)(*(int *)(*(int *)((Spyro.state & 0xff) * 4 + DAT_80066f24) + 0x14) >> 0xe) & 0xf0;
    }
    else {
      Spyro.field11_0x1c = 0;
    }
    Spyro.currentAnimationState = bVar2;
    Spyro.nextAnimationState = bVar2;
    Spyro.currentAnimationFrame = 0;
    Spyro.nextAnimationFrame = Spyro.state != HurtSquash;
    Spyro.field136_0x1ec = Spyro.state;
    Spyro.field137_0x1f0 = 0;
    return;
  case 3:
    if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
      bVar1 = Spyro.nextAnimationFrame + 1;
      Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
      Spyro.nextAnimationFrame = bVar1;
      if ((byte)(&DAT_80060335)[(uint)Spyro.currentAnimationState * 4] <= bVar1) {
        Spyro.nextAnimationFrame = (&DAT_80060334)[(uint)Spyro.currentAnimationState * 4];
      }
    }
    Spyro.field11_0x1c = 0x31;
    break;
  case 4:
    Spyro.field137_0x1f0 = 4;
LAB_8002e96c:
    FUN_8002e568();
    return;
  case 5:
    if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
      Spyro.currentAnimationState = Spyro.nextAnimationState;
      Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
    }
    Spyro.field11_0x1c = 0x71;
    if ((Spyro.field136_0x1ec != 6) || (0x17 < Spyro.field36_0x60)) {
      Spyro.nextAnimationFrame = (&DAT_80060335)[(uint)Spyro.currentAnimationState * 4];
      Spyro.field11_0x1c = 0x71;
      Spyro.field137_0x1f0 = 4;
      return;
    }
    Spyro.nextAnimationFrame = 1;
    break;
  default:
    goto switchD_8002e7bc_caseD_6;
  case 10:
    if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
      Spyro.currentAnimationState = Spyro.nextAnimationState;
      Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
    }
    Spyro.nextAnimationFrame = (&DAT_80060334)[(Spyro.state & 0xff) * 4];
    Spyro.field11_0x1c = 0x71;
    Spyro.field136_0x1ec = Spyro.state;
    Spyro.field137_0x1f0 = 0;
    Spyro.nextAnimationState = bVar2;
    goto switchD_8002e7bc_caseD_6;
  }
  Spyro.field137_0x1f0 = 0;
  Spyro.field136_0x1ec = Spyro.state;
  Spyro.nextAnimationState = bVar2;
switchD_8002e7bc_caseD_6:
  return;
}



void FUN_8002eb00(void)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  
  if ((Spyro.field12_0x1d & 0xf) == Spyro.field12_0x1d >> 4) {
    uVar2 = (uint)Spyro.field10_0x1b;
    iVar3 = (uint)Spyro.field8_0x19 * 4;
    uVar1 = uVar2 + 1;
    Spyro.field7_0x18 = Spyro.field8_0x19;
    Spyro.field9_0x1a = Spyro.field10_0x1b;
    Spyro.field10_0x1b = (byte)uVar1;
    Spyro.field12_0x1d =
         (byte)(*(int *)(*(int *)(iVar3 + DAT_80066f24) + uVar2 * 0x14 + 0x14) >> 0xe) & 0xf0;
    if ((uint)(byte)(&DAT_80060335)[iVar3] <= (uVar1 & 0xff)) {
      Spyro.field10_0x1b = (&DAT_80060334)[iVar3];
    }
  }
  else {
    Spyro.field12_0x1d = (Spyro.field12_0x1d & 0xf0) + (Spyro.field12_0x1d & 0xf) + 1;
  }
  return;
}



void FUN_8002ebc8(void)

{
  int iVar1;
  uint uVar2;
  
  if ((Spyro.field141_0x200 != 6) && (Spyro.field141_0x200 != 0)) {
    if ((Spyro.field12_0x1d & 0xf) == Spyro.field12_0x1d >> 4) {
      uVar2 = (uint)Spyro.field10_0x1b;
      iVar1 = (uint)Spyro.field8_0x19 * 4;
      Spyro.field12_0x1d =
           (byte)(*(int *)(*(int *)(iVar1 + DAT_80066f24) + uVar2 * 0x14 + 0x14) >> 0xe) & 0xf0;
      if (Spyro.field141_0x200 == 4) {
        Spyro.field7_0x18 = Spyro.field8_0x19;
        Spyro.field9_0x1a = Spyro.field10_0x1b;
        Spyro.field10_0x1b = (byte)(uVar2 + 1);
        if ((int)((byte)(&DAT_80060336)[iVar1] - 1) <= (int)(uVar2 + 1 & 0xff)) {
          Spyro.field141_0x200 = 9;
        }
      }
      else if (Spyro.field141_0x200 < 5) {
        if (Spyro.field141_0x200 == 1) {
          Spyro.field7_0x18 = Spyro.field8_0x19;
          Spyro.field9_0x1a = Spyro.field10_0x1b;
          Spyro.field141_0x200 = 9;
        }
      }
      else if (Spyro.field141_0x200 == 7) {
        Spyro.field7_0x18 = Spyro.field8_0x19;
        Spyro.field9_0x1a = Spyro.field10_0x1b;
        Spyro.field10_0x1b = (byte)(uVar2 + 1);
        if ((int)((byte)(&DAT_80060336)[iVar1] - 1) <= (int)(uVar2 + 1 & 0xff)) {
          Spyro.field12_0x1d = 0x71;
          Spyro.field141_0x200 = 8;
          Spyro.field8_0x19 = Spyro.nextAnimationState;
          Spyro.field10_0x1b = Spyro.nextAnimationFrame;
          Spyro.field140_0x1fc = Spyro.field90_0x16c;
        }
      }
      else if (Spyro.field141_0x200 == 8) {
        FUN_80030a14();
        Spyro.field141_0x200 = 6;
        Spyro.field140_0x1fc = Spyro.field90_0x16c;
      }
    }
    else {
      Spyro.field12_0x1d = (Spyro.field12_0x1d & 0xf0) + (Spyro.field12_0x1d & 0xf) + 1;
    }
  }
  if (Spyro.field141_0x200 == 9) {
    if (Spyro.field140_0x1fc != Spyro.field90_0x16c) goto LAB_8002ef38;
    uVar2 = (uint)*(byte *)(Spyro.field140_0x1fc * 9 + -0x7ff9ecd0);
    if (uVar2 == 6) {
      if (Spyro.field8_0x19 == Spyro.nextAnimationState) {
        FUN_80030a14();
        Spyro.field141_0x200 = uVar2;
      }
      else {
        Spyro.field8_0x19 = Spyro.nextAnimationState;
        Spyro.field12_0x1d = 0x71;
        Spyro.field141_0x200 = 1;
        Spyro.field10_0x1b = Spyro.nextAnimationFrame;
      }
    }
    else if (uVar2 < 7) {
      if (uVar2 == 0) {
        if (Spyro.field8_0x19 == (&DAT_80066d54)[Spyro.field140_0x1fc]) {
          Spyro.field141_0x200 = 0;
          Spyro.field12_0x1d = 0x71;
          FUN_8002eb00();
        }
        else {
          Spyro.field7_0x18 = Spyro.field8_0x19;
          Spyro.field9_0x1a = Spyro.field10_0x1b;
          Spyro.field8_0x19 = (&DAT_80066d54)[Spyro.field140_0x1fc];
          Spyro.field12_0x1d = 0x71;
          Spyro.field10_0x1b = 0;
          Spyro.field141_0x200 = 1;
        }
      }
    }
    else if (uVar2 == 7) {
      Spyro.field10_0x1b = Spyro.field10_0x1b + 1;
      Spyro.field141_0x200 = uVar2;
    }
  }
  if (Spyro.field140_0x1fc == Spyro.field90_0x16c) {
    return;
  }
LAB_8002ef38:
  uVar2 = (uint)*(byte *)(Spyro.field140_0x1fc * 8 + -0x7ff9ecd0 + Spyro.field90_0x16c);
  if (uVar2 == 4) {
    if (Spyro.field8_0x19 == (&DAT_80066d54)[Spyro.field140_0x1fc]) {
      Spyro.field141_0x200 = uVar2;
    }
    Spyro.field140_0x1fc = Spyro.field90_0x16c;
  }
  else if (uVar2 < 5) {
    if (uVar2 == 1) {
      if (0x5f < (byte)(&DAT_80062868)[Spyro.field12_0x1d]) {
        Spyro.field7_0x18 = Spyro.field8_0x19;
        Spyro.field9_0x1a = Spyro.field10_0x1b;
      }
      Spyro.field8_0x19 = (&DAT_80066d54)[Spyro.field90_0x16c];
      Spyro.field10_0x1b = 0;
      Spyro.field12_0x1d = 0x71;
      Spyro.field140_0x1fc = Spyro.field90_0x16c;
      Spyro.field141_0x200 = uVar2;
    }
  }
  else if (uVar2 == 6) {
    FUN_80030a14();
    Spyro.field140_0x1fc = Spyro.field90_0x16c;
    Spyro.field141_0x200 = uVar2;
  }
  return;
}



void FUN_8002f08c(void)

{
  int iVar1;
  int iVar2;
  CollisionType CVar3;
  byte bVar4;
  Vec3 *pVVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  byte *pbVar9;
  char *pcVar10;
  int iVar11;
  Vec3 local_68;
  Vec3 VStack_58;
  Vec3 local_48;
  int local_38;
  
  local_38 = 0;
  if (DAT_8006aab4 != '\0') {
    if ((Spyro.airTime == 0) && (0x80 < Spyro.angleAsByte.roll)) {
      Spyro.field100_0x188 = (0x100 - (uint)Spyro.angleAsByte.roll) * 8;
    }
    else {
      Spyro.field100_0x188 = 0;
    }
    iVar8 = 0;
    if (0 < deltaTime) {
      do {
        if (DAT_8006aab5 < 8) {
          (&DAT_8006aa3c)[(byte)(&DAT_80063130)[(uint)DAT_8006aab5 + (uint)DAT_8006aab7 * 8]] =
               (char)deltaTime - (char)iVar8;
          (&DAT_8006aa44)[(byte)(&DAT_80063130)[(uint)DAT_8006aab5 + (uint)DAT_8006aab7 * 8]] = 0x20
          ;
          (&DAT_8006aa4c)[(byte)(&DAT_80063130)[(uint)DAT_8006aab5 + (uint)DAT_8006aab7 * 8]] = 0;
        }
        iVar8 = iVar8 + 1;
        DAT_8006aab5 = DAT_8006aab5 + 1;
      } while (iVar8 < deltaTime);
    }
    if (DAT_8006aab6 == '\0') {
      VectorAdd(&Vec3_8006aa1c,&Spyro.position,&Vec3_8006ab40);
    }
    else {
      FUN_80032a90(&local_68);
      FUN_8004055c(&local_68,0xa0,0,0,0x10000,(Object *)0x0);
      DAT_8006aa28 = Spyro.angleAsByte.pitch;
      DAT_8006aa29 = Spyro.angleAsByte.roll;
      DAT_8006aa2a = Spyro.angleAsByte.yaw;
      MemCopy(&Mat33_8006aab8,0x8006a18c,0x14);
      iVar8 = *(int *)(*(int *)((uint)Spyro.currentAnimationState * 4 + DAT_80066f24) +
                       (uint)Spyro.currentAnimationFrame * 0x14 + 0x1c);
      local_68.x = iVar8 >> 0x15;
      local_68.y = (iVar8 << 0xb) >> 0x15;
      local_68.z = (iVar8 << 0x16) >> 0x15;
      MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_68,&local_68);
      VectorAdd(&Vec3_8006aa1c,&local_68,&Spyro.position);
      if (DAT_8006aab5 < 0xe) {
        pVVar5 = (Vec3 *)((uint)(DAT_8006aab5 >> 1) * 0xc + -0x7ff9d590);
      }
      else {
        pVVar5 = (Vec3 *)&DAT_80062ac4;
      }
      VectorCopy(&local_68,pVVar5);
      MatrixMultVector(&Spyro.unkMatrix,&local_68,&local_68);
      VectorAdd(&Vec3_8006aa1c,&Vec3_8006aa1c,&local_68);
      VectorSubtract(&Vec3_8006ab40,&Vec3_8006aa1c,&Spyro.position);
    }
    iVar8 = 0;
    iVar11 = 0;
    pbVar9 = &DAT_8006aa3c;
    pcVar10 = &DAT_8006aa4c;
    pVVar5 = (Vec3 *)&DAT_8006aae0;
    do {
      if (*pbVar9 == 0) {
        local_38 = local_38 + 1;
      }
      else {
        uVar7 = 0x16;
        if (iVar8 < 4) {
          bVar4 = 0x1e;
        }
        else {
          uVar7 = 0x1c;
          bVar4 = 0x24;
        }
        if (*pcVar10 != '\0') {
          *pbVar9 = *pbVar9 + (char)deltaTime;
        }
        if (*pbVar9 < bVar4) {
          if (*pcVar10 != '\x02') {
            if (iVar8 < 4) {
              iVar1 = -0x7ff9d530;
              iVar2 = iVar8;
            }
            else {
              iVar2 = iVar8 + -4;
              iVar1 = -0x7ff9d270;
            }
            iVar1 = iVar2 * uVar7 * 8 + iVar1;
            uVar6 = (uint)*pbVar9;
            if ((int)uVar6 < (int)(uVar7 - 1)) {
              CastVectorShortToVector(&VStack_58,(VectorShort *)(iVar1 + (uVar6 + 1) * 8));
              MatrixMultVector(&Mat33_8006aab8,&VStack_58,&VStack_58);
              VectorAdd(&VStack_58,&VStack_58,&Vec3_8006aa1c);
              if (*pcVar10 == '\0') {
                VectorCopy(&local_48,&Spyro.position);
                *pcVar10 = '\x01';
              }
              else {
                VectorCopy(&local_48,pVVar5);
              }
              VectorCopy(pVVar5,&VStack_58);
              iVar2 = FUN_8004055c(&VStack_58,0xa0,0,0,0x10000,(Object *)0x0);
              if ((iVar2 != 0) ||
                 (iVar2 = FUN_8003ce38(&local_48,&VStack_58,0,0x10000,0), iVar2 != 0)) {
                *pcVar10 = '\x02';
                (&DAT_8006aa44)[iVar8] = *pbVar9;
                if (DAT_800670fc != (code *)0x0) {
                  local_48.x = -0x10;
                  uVar7 = rand();
                  local_48.y = (uVar7 & 0x1f) - 0x10;
                  local_48.z = 0;
                  MatrixMultVector(&Mat33_8006aab8,&local_48,&local_48);
                  local_48.z = 0;
                  (*DAT_800670fc)(1,1,&VStack_58,&local_48);
                  (*DAT_800670fc)(4,0x4e,&VStack_58,0);
                  local_48.x = 0x30;
                  local_48.y = 0;
                  local_48.z = 0;
                  MatrixMultVector((Mat33 *)0x0,&local_48,&local_48);
                  (*DAT_800670fc)(5,0x4f,&VStack_58,&local_48);
                }
                CVar3 = GetCollisiontType(DAT_8006ab94);
                if (CVar3 == 3) {
                  collisionTypes[DAT_8006ab94 & 0x3f][1] =
                       collisionTypes[DAT_8006ab94 & 0x3f][1] | 0x10000;
                }
              }
            }
            else if (((int)uVar7 < (int)(uVar6 + deltaTime)) && (uVar6 <= uVar7)) {
              CastVectorShortToVector(&VStack_58,(VectorShort *)(iVar1 + (uVar7 - 2) * 8));
              MatrixMultVector(&Mat33_8006aab8,&VStack_58,&VStack_58);
              VectorAdd(&VStack_58,&VStack_58,&Vec3_8006aa1c);
              VectorClear(&local_48);
              if (DAT_800670fc != (code *)0x0) {
                (*DAT_800670fc)(1,0,&VStack_58,&local_48);
                (*DAT_800670fc)(4,0x4e,&VStack_58,0);
                MatrixMultVector((Mat33 *)0x0,(Vec3 *)(&DAT_80063140 + iVar11),&local_48);
                (*DAT_800670fc)(5,0x4f,&VStack_58,&local_48);
              }
            }
          }
        }
        else {
          *pbVar9 = 0;
        }
      }
      iVar11 = iVar11 + 0xc;
      pbVar9 = pbVar9 + 1;
      pcVar10 = pcVar10 + 1;
      iVar8 = iVar8 + 1;
      pVVar5 = pVVar5 + 1;
    } while (iVar8 < 8);
    if (local_38 == 8) {
      DAT_8006aab4 = '\0';
    }
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_8002f7a8(void)

{
  char cVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  Vec3 local_48;
  Mat33 MStack_38;
  
  if (Spyro.field13_0x1e < 0x7f) {
    Spyro.field13_0x1e = 5;
  }
  DAT_800698e4 = 3;
  local_48.z = -Spyro.field172_0x270;
  _DAT_800698e0 = (AngleByte)(uint)_DAT_800698e0;
  local_48.x = 0;
  local_48.y = 0;
  if (Spyro.maybeSubstate == Climb) {
    DAT_800698e1 = Spyro.angleAsByte.roll + 0x40;
    DAT_800698e0 = Spyro.angleAsByte.pitch;
    DAT_800698e2 = Spyro.angleAsByte.yaw;
    DAT_800698e3 = 0;
    BuildRotationMatrix(&DAT_800698e0,&MStack_38,(Mat33 *)0x0);
    MatrixMultVector(&MStack_38,&local_48,&local_48);
    VectorAdd(&Vec3_800698d4,&local_48,&Spyro.position);
    VectorSubtract(&local_48,&Vec3_800698d4,&Spyro.position);
    VectorAdd(&local_48,&local_48,&Vec3_800698d4);
    iVar2 = FUN_8003ce94(&Spyro.position,&local_48);
    if (iVar2 == 0) {
      DAT_800698e3 = 1;
    }
  }
  else {
    MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&local_48);
    VectorAdd(&Vec3_800698d4,&local_48,&Spyro.position);
    Vec3_800698d4.z = Vec3_800698d4.z + 0x80;
                    // WARNING: Read-only address (ram,0x800698dc) is written
    Vec3_800698d4.z = RaycastDown(&Vec3_800698d4,0x10000);
                    // WARNING: Read-only address (ram,0x800698dc) is written
    if ((int)Spyro.maybeSubstate < 2) {
      MemCopy(&MStack_38,0x8006a020,0x14);
      _DAT_800698e0 = Spyro.angleAsByte;
      iVar2 = Spyro.field55_0xec;
    }
    else {
      iVar2 = cosineLookup(Spyro.rotation.Yaw);
      iVar4 = sineLookup(Spyro.rotation.Yaw);
      local_48.x = Vec3_8006ab88.x * iVar2 + Vec3_8006ab88.y * iVar4 >> 0xc;
      iVar2 = cosineLookup(Spyro.rotation.Yaw);
      iVar4 = sineLookup(Spyro.rotation.Yaw);
      local_48.z = Vec3_8006ab88.z;
      local_48.y = Vec3_8006ab88.y * iVar2 - Vec3_8006ab88.x * iVar4 >> 0xc;
      uVar3 = maybeSquareRoot(local_48.x * local_48.x + Vec3_8006ab88.z * Vec3_8006ab88.z);
      cVar1 = Atan2(uVar3,local_48.y,0);
      _DAT_800698e0 = (AngleByte)CONCAT31(_DAT_800698e1,-cVar1);
      cVar1 = Atan2(local_48.z,local_48.x,0);
      uVar3 = _DAT_800698e0;
      DAT_800698e1 = -cVar1;
      DAT_800698e3 = SUB41(uVar3,3);
      DAT_800698e2 = Spyro.angleAsByte.yaw;
      BuildRotationMatrix(&DAT_800698e0,&MStack_38,(Mat33 *)0x0);
      iVar2 = VectorLength(&Vec3_8006ab88,0);
      iVar2 = Atan2(Vec3_8006ab88.z,iVar2,0);
    }
    if ((Vec3_800698d4.z < 0x401) || (Spyro.field17_0x28 < 0)) {
      DAT_800698e3 = 1;
    }
    if (Spyro.field172_0x270 + 0x100 < Spyro.position.z - Vec3_800698d4.z) {
      DAT_800698e4 = 5;
    }
    DAT_800698e8 = DAT_800698e8 + 1 & 7;
    MatrixMultVector(&MStack_38,(Vec3 *)(DAT_800698e8 * 0xc + -0x7ff9ccf4),&local_48);
    VectorAdd(&local_48,&local_48,&Vec3_800698d4);
    local_48.z = local_48.z + 0x200;
    iVar4 = RaycastDown(&local_48,0x400);
    iVar4 = (local_48.z + -0x200) - iVar4;
    if (iVar4 < 0) {
      iVar4 = -iVar4;
    }
    if ((iVar4 < 0x40) && (iVar2 < 0x21)) {
      DAT_800698d0 = DAT_800698d0 & 0xffU - (1 << (DAT_800698e8 & 0x1f));
    }
    else {
      DAT_800698d0 = DAT_800698d0 | 1 << (DAT_800698e8 & 0x1f);
    }
  }
  return;
}



void FUN_8002fc20(void)

{
  int local_38;
  
  local_38 = 0;
  if (0 < deltaTime) {
    do {
      DAT_80066f38 = local_38 * 0x10 + -0x7ff97c50;
      if ((uint)Spyro.field90_0x16c < 8) {
        (*(code *)(&PTR_FUN_80010b0c)[Spyro.field90_0x16c])();
        return;
      }
      FUN_800308d4();
      local_38 = local_38 + 1;
      Spyro.jumpRelated = Spyro.jumpRelated + 1;
    } while (local_38 < deltaTime);
  }
  return;
}



void FUN_8002fcbc(void)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  uint *unaff_s3;
  int *unaff_s5;
  int *unaff_s6;
  CameraState unaff_s7;
  char cVar4;
  uint unaff_s8;
  int in_stack_00000060;
  
  DAT_8006aab6 = '\0';
  if (((*unaff_s3 & 4) == 0) && (cameraState != unaff_s7)) {
    VectorClear((Vec3 *)(unaff_s3 + -0x22));
    uVar3 = unaff_s3[-0x6f];
    if (uVar3 == unaff_s8) {
      if ((int)unaff_s3[-0x57] < 9) {
        if ((int)unaff_s3[-0x57] < -8) {
          unaff_s3[-0x20] = 0xfffffe80;
        }
        goto LAB_8002fd80;
      }
      uVar3 = 0x180;
    }
    else if (uVar3 == 0x16) {
      bVar1 = (int)unaff_s3[-0x57] < -0x10;
      if ((int)unaff_s3[-0x57] < 0x11) {
LAB_8002fd74:
        uVar3 = 0xffffff00;
        if (!bVar1) goto LAB_8002fd80;
      }
      else {
        uVar3 = 0x100;
      }
    }
    else {
      if (uVar3 != 2) goto LAB_8002fd80;
      bVar1 = (int)unaff_s3[-0x57] < -0x20;
      if ((int)unaff_s3[-0x57] < 0x21) goto LAB_8002fd74;
      uVar3 = 0x100;
    }
    unaff_s3[-0x20] = uVar3;
  }
LAB_8002fd80:
  cVar4 = (char)unaff_s8;
  if ((*(uint *)(DAT_80066f38 + 4) & 0x20) == 0) {
LAB_8002ffd4:
    if (((*unaff_s3 & 0x10000001) == 0x10000001) && ((&DAT_80061371)[unaff_s3[-0x6f] * 4] != '\0'))
    {
      if (unaff_s3[-0x6d] == 0) {
        SetSpyroState(New_Name_(1));
      }
      unaff_s3[-0x28] = 2;
      unaff_s3[-0x26] = 0;
      unaff_s3[-0x31] = unaff_s3[3];
    }
    if ((*unaff_s3 & 0x10001000) == 0x10001000) {
      unaff_s3[-0x28] = 3;
      unaff_s3[-0x26] = 0;
      VectorClear((Vec3 *)(unaff_s3 + -0x22));
      unaff_s3[-0x31] = unaff_s3[3];
    }
    if (((cameraState == unaff_s7) &&
        ((((unaff_s3[-0xd] != 0 || (cheatFireball != '\0')) || (unaff_s3[-0xc] != 0)) ||
         (unaff_s3[-10] != 0)))) &&
       (((&DAT_80061373)[*unaff_s5 * 4] != '\0' && (INT_80067ed4 - 3U < 2)))) {
      DAT_80067114 = unaff_s8;
      unaff_s5[0x84] = unaff_s8;
      DAT_80067fcb = cVar4;
    }
    else {
      DAT_80067114 = 0;
    }
    goto LAB_80030870;
  }
  if ((Spyro.powerIceTime == 0) || ((&DAT_80061373)[Spyro.state * 4] == '\0')) {
    if ((Spyro.powerRiptoPlasmaTime == 0) || ((&DAT_80061373)[Spyro.state * 4] == '\0')) {
      if (((Spyro.powerFireballTime == 0) && (cheatFireball == '\0')) ||
         ((&DAT_80061373)[Spyro.state * 4] == '\0')) {
        if ((DAT_8006aab4 == '\0') && ((&DAT_80061370)[*unaff_s5 * 4] != '\0')) {
          if (unaff_s5[2] == 0) {
            SetSpyroState(Flame);
          }
          unaff_s5[0x47] = unaff_s8;
          unaff_s5[0x49] = 0;
          DAT_8006aab5 = 0;
          DAT_8006aab4 = cVar4;
          DAT_8006aab6 = cVar4;
          iVar2 = rand();
          DAT_8006aab7 = (byte)iVar2 & 1;
          DAT_80067114 = 0;
          unaff_s5[0x84] = 0;
          MEMSET((int *)&DAT_8006aa3c,0,8);
          PlayAudio(*(undefined *)(audioBank + 3),0,0);
          goto LAB_80030870;
        }
        if ((Spyro.maybeSubstate == UnderwaterSwim) && (DAT_800670fc != 0)) {
          Spyro.jumpRelated = 0;
          Spyro.field90_0x16c = unaff_s7;
          goto LAB_80030870;
        }
        goto LAB_8002ffd4;
      }
      goto LAB_8002fe78;
    }
    bVar1 = Spyro.jumpRelated < 0x1f;
  }
  else {
LAB_8002fe78:
    bVar1 = Spyro.jumpRelated < 0x16;
  }
  if (!bVar1) {
    if (Spyro.maybeSubstate == Idle) {
      SetSpyroState(Flame);
    }
    Spyro.field90_0x16c = 6;
    Spyro.jumpRelated = 0;
  }
LAB_80030870:
  do {
    FUN_800308d4();
    in_stack_00000060 = in_stack_00000060 + 1;
    bVar1 = deltaTime <= in_stack_00000060;
    *unaff_s6 = *unaff_s6 + 1;
    if (bVar1) {
      return;
    }
    DAT_80066f38 = in_stack_00000060 * 0x10 + -0x7ff97c50;
  } while (7 < (uint)Spyro.field90_0x16c);
  (*(code *)(&PTR_FUN_80010b0c)[Spyro.field90_0x16c])();
  return;
}



void FUN_800306bc(void)

{
  bool bVar1;
  code *pcVar2;
  undefined4 uVar3;
  uint *unaff_s3;
  int *unaff_s6;
  CameraState unaff_s7;
  int param_11;
  
  if (((*unaff_s3 & 4) == 0) && (cameraState != unaff_s7)) {
    VectorClear((Vec3 *)(unaff_s3 + -0x22));
  }
  pcVar2 = DAT_800670b4;
  if (3 < *unaff_s6) {
    unaff_s6[-2] = 0;
    *unaff_s6 = 0;
    if (pcVar2 != (code *)0x0) {
      uVar3 = 0x2c2;
      if (unaff_s6[0x1c] == 0) {
        if (unaff_s6[0x1a] == 0) {
          uVar3 = 0x1e3;
          if (unaff_s6[-0x47] - 0xbU < 2) {
            uVar3 = 0x1f8;
          }
        }
        else {
          uVar3 = 0x270;
        }
      }
      (*pcVar2)(uVar3,0);
    }
  }
  do {
    FUN_800308d4();
    param_11 = param_11 + 1;
    bVar1 = deltaTime <= param_11;
    *unaff_s6 = *unaff_s6 + 1;
    if (bVar1) {
      return;
    }
    DAT_80066f38 = param_11 * 0x10 + -0x7ff97c50;
  } while (7 < (uint)Spyro.field90_0x16c);
  (*(code *)(&PTR_FUN_80010b0c)[Spyro.field90_0x16c])();
  return;
}



void FUN_800308d4(void)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = Spyro.field99_0x184 - Spyro.field96_0x178 & 0xfff;
  iVar1 = uVar2 << 7;
  if (0x800 < uVar2) {
    iVar1 = (uVar2 - 0x1000) * 0x80;
  }
  uVar2 = Spyro.field100_0x188 - Spyro.field97_0x17c & 0xfff;
  Spyro.field102_0x190 = Spyro.field102_0x190 + (iVar1 + Spyro.field102_0x190 * -0x10 >> 6);
  Spyro.field96_0x178 = Spyro.field96_0x178 + (Spyro.field102_0x190 >> 6);
  iVar1 = uVar2 << 7;
  if (0x800 < uVar2) {
    iVar1 = (uVar2 - 0x1000) * 0x80;
  }
  uVar2 = Spyro.field101_0x18c - Spyro.field98_0x180 & 0xfff;
  Spyro.field103_0x194 = Spyro.field103_0x194 + (iVar1 + Spyro.field103_0x194 * -0x10 >> 6);
  Spyro.field97_0x17c = Spyro.field97_0x17c + (Spyro.field103_0x194 >> 6);
  if (0x800 < uVar2) {
    uVar2 = uVar2 - 0x1000;
  }
  Spyro.anotherByteAngle.pitch = (byte)(Spyro.field96_0x178 >> 4);
  Spyro.anotherByteAngle.roll = (byte)(Spyro.field97_0x17c >> 4);
  Spyro.field104_0x198 =
       Spyro.field104_0x198 + ((int)(uVar2 * 0x80 + Spyro.field104_0x198 * -0x10) >> 6);
  Spyro.field98_0x180 = Spyro.field98_0x180 + (Spyro.field104_0x198 >> 6);
  Spyro.anotherByteAngle.yaw = (byte)(Spyro.field98_0x180 >> 4);
  return;
}



void FUN_80030a14(void)

{
  Spyro.field7_0x18 = Spyro.currentAnimationState;
  Spyro.field8_0x19 = Spyro.nextAnimationState;
  Spyro.field9_0x1a = Spyro.currentAnimationFrame;
  Spyro.field10_0x1b = Spyro.nextAnimationFrame;
  Spyro.field12_0x1d = Spyro.field11_0x1c;
  return;
}



void FUN_80030a6c(void)

{
  int iVar1;
  Vec3 VStack_38;
  Vec3 VStack_28;
  
  if ((-1 < Spyro.field169_0x264) && (iVar1 = FUN_80050b20(Spyro.field170_0x268), iVar1 != 0)) {
    FUN_80050a40(Spyro.field169_0x264);
  }
  if ((-1 < Spyro.field171_0x26c) &&
     (iVar1 = FUN_80050b20(*(undefined *)(audioBank + 6)), iVar1 != 0)) {
    FUN_80050a40(Spyro.field171_0x26c);
  }
  VectorCopy(&VStack_38,&Spyro.position);
  VectorCopy(&VStack_28,(Vec3 *)&Spyro.rotation);
  iVar1 = Spyro.health;
  MEMSET((int *)&Spyro,0,0x2c4);
  Spyro.field169_0x264 = -1;
  Spyro.field171_0x26c = -1;
  Spyro.field71_0x110 = 0xff;
  Spyro.field72_0x114 = 0xff;
  Spyro.field73_0x118 = 0xff;
  Spyro.currentTriangleStoodOnIndex = -1;
  VectorCopy(&Spyro.position,&VStack_38);
  VectorCopy(&Spyro.field76_0x12c,&Spyro.position);
  VectorCopy((Vec3 *)&Spyro.rotation,&VStack_28);
  BuildRotationMatrix(0x80069ffc,0x8006a020,(Mat33 *)0x0);
  BuildRotationMatrix(0x8006a000,0x8006a18c,(Mat33 *)0x0);
  MulMatrix0((MATRIX *)&Spyro.groundedGlidingMovementMatrix,(MATRIX *)&Spyro.unkMatrix,
             (MATRIX *)&Spyro.unkMatrix);
  Spyro.health = iVar1;
  if (inSpeedwayFlag < 0) {
    SetSpyroState(Idle);
  }
  else {
    SetSpyroState(Superfly);
    Spyro.maybeHorizontalSpeedDecay = 0x800;
    Spyro.superflySpeed = levelSuperflySpeeds[g_currLevelID];
    FUN_8002bdbc();
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    VectorCopy(&Spyro.physicsVelocity,&Spyro.field42_0x88);
  }
  Spyro.field11_0x1c = 0x10;
  Spyro.field12_0x1d = 0x10;
  Spyro.field141_0x200 = 6;
  return;
}



void FUN_80030c94(void)

{
  int iVar1;
  InputState *pIVar2;
  InputFlags *pIVar3;
  uint uVar4;
  int iVar5;
  Vec3 VStack_50;
  Vec3 VStack_40;
  Vec3 local_30 [2];
  
  if ((Spyro.field150_0x20c & 0x10000000U) == 0) {
    Spyro.field150_0x20c = 0;
    Spyro.field152_0x214 = 0;
    Spyro.field162_0x240 = 0;
    switch(Spyro.state) {
    case Idle:
    case Flame:
    case IdleLedge:
    case IdleLook:
    case 0x25:
    case IdleSit:
    case 0x27:
    case UnderwaterIdle:
    case WaterIdle:
    case ClimbIdle:
    case New_Name_(1):
    case Spit:
      if (Spyro.field124_0x1c2 == '\0') {
        Spyro.field123_0x1c1 = '\x01';
        Spyro.field150_0x20c = 0;
        Spyro.field152_0x214 = 0;
        Spyro.field162_0x240 = 0;
        return;
      }
      if ((inputStates[0].current & Triangle) != None) {
        Spyro.field150_0x20c = 0;
        Spyro.field152_0x214 = 0;
        Spyro.field162_0x240 = 0;
        return;
      }
      Spyro.field123_0x1c1 = '\x01';
      Spyro.field124_0x1c2 = '\0';
      Spyro.field150_0x20c = 0;
      Spyro.field152_0x214 = 0;
      Spyro.field162_0x240 = 0;
      return;
    default:
      Spyro.field124_0x1c2 = '\0';
      break;
    case HeadBash:
      Spyro.field124_0x1c2 = '\x01';
    }
    Spyro.field123_0x1c1 = '\0';
  }
  else {
    if ((Spyro.field150_0x20c & 2U) != 0) {
      FUN_80012b1c(&DAT_80068370,&DAT_80068238);
      Spyro.field162_0x240 = 1;
      Spyro.field123_0x1c1 = '\0';
    }
    if ((Spyro.field150_0x20c & 0x4000U) != 0) {
      FUN_80012b1c(&DAT_80068370,&DAT_80068238);
    }
    if ((Spyro.field150_0x20c & 8U) != 0) {
      VectorCopy(&VStack_50,&Spyro.field154_0x21c);
      VectorShiftUp(&VStack_50,6);
      VectorAdd(&Spyro.field41_0x7c,&Spyro.field41_0x7c,&VStack_50);
      Spyro.rotation.Yaw = Spyro.rotation.Yaw + Spyro.field157_0x22a & 0xfff;
    }
    if (((Spyro.field150_0x20c & 0x10U) != 0) && (Spyro.state != Catapult)) {
      SetSpyroState(Catapult);
    }
    if (((((Spyro.field150_0x20c & 0x20U) != 0) && (Spyro.maybeSubstate != Whirlwind)) &&
        (Spyro.maybeSubstate != Superfly)) && (Spyro.maybeSubstate != Supercharge)) {
      SetSpyroState(Whirlwind);
    }
    if ((Spyro.field150_0x20c & 0x40U) != 0) {
      FUN_80012b1c(&DAT_80068370,&DAT_80068238);
      if ((Spyro.field151_0x210 & 0x40U) == 0) {
        VectorSubtract(&VStack_40,&Spyro.position,&Spyro.field159_0x22c);
        iVar1 = VectorLength(&VStack_40,0);
        if ((iVar1 < 0x100) && (Spyro.field49_0xbc < 0x640)) {
          Spyro.field152_0x214 = 1;
        }
      }
      iVar1 = Spyro.field153_0x218 + 0xc;
      if (Spyro.field153_0x218 == 0) {
        iVar1 = 0;
      }
      FUN_800315bc(0x8006a21c,iVar1);
      Spyro.field162_0x240 = 1;
      Spyro.field123_0x1c1 = '\0';
    }
    if ((((Spyro.field150_0x20c & 0x80U) != 0) && (Spyro.maybeSubstate != Death)) &&
       (Spyro.state != Spyro.field161_0x23c)) {
      SetSpyroState(Spyro.field161_0x23c);
    }
    if ((Spyro.field150_0x20c & 0x100U) != 0) {
      FUN_80012b1c(&DAT_80068370,&DAT_80068238);
      FUN_80031960(0x8006a21c);
      Spyro.field162_0x240 = 1;
      Spyro.field123_0x1c1 = '\0';
    }
    if ((Spyro.field150_0x20c & 0x400U) != 0) {
      VectorCopy(&Spyro.trueVelocity,&Spyro.field154_0x21c);
      VectorShiftUp(&Spyro.trueVelocity,6);
      VectorCopy(&Spyro.field42_0x88,&Spyro.trueVelocity);
    }
    if ((Spyro.field150_0x20c & 0x800U) != 0) {
      VectorSubtract(local_30,(Vec3 *)(Spyro.field153_0x218 + 0xc),&Spyro.position);
      iVar1 = Atan2(local_30[0].x,local_30[0].y,1);
      uVar4 = iVar1 - Spyro.rotation.Yaw & 0xfff;
      local_30[0].x = cosineLookupTable[(int)uVar4 >> 4] * 0xd >> 5;
      local_30[0].z = 0x200;
      local_30[0].y = sineLookupTable[(int)uVar4 >> 4] * 0xd >> 5;
      VectorAdd(local_30,local_30,(Vec3 *)(Spyro.field153_0x218 + 0xc));
      if (0x800 < uVar4) {
        uVar4 = uVar4 - 0x1000;
      }
      iVar5 = (int)uVar4 >> 3;
      iVar1 = iVar5;
      if (0x20 < iVar5) {
        iVar1 = 0x20;
      }
      if (iVar5 < -0x20) {
        iVar1 = -0x20;
      }
      Spyro.field162_0x240 = 1;
      Spyro.field123_0x1c1 = '\0';
      Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar1;
      VectorSubtract(local_30,local_30,&Spyro.position);
      iVar1 = VectorLength(local_30,1);
      if (0x80 < iVar1) {
        if (0x1000 < iVar1) {
          VectorScale(local_30,iVar1,0x1000);
        }
        VectorAdd(&Spyro.field41_0x7c,&Spyro.field41_0x7c,local_30);
      }
    }
    if ((Spyro.field150_0x20c & 0x2000U) != 0) {
      Spyro.field168_0x260 = 1;
    }
    if ((Spyro.field150_0x20c & 0x8000U) != 0) {
      FUN_80012b1c(&DAT_80068370,&DAT_80068238);
      Spyro.field162_0x240 = 1;
      Spyro.field123_0x1c1 = '\0';
      if (Spyro.state != Spyro.field161_0x23c) {
        SetSpyroState(Spyro.field161_0x23c);
      }
      VectorCopy(&Spyro.position,&Spyro.field159_0x22c);
      Spyro.rotation.Roll = (uint)(byte)Spyro.field155_0x228 << 4;
      Spyro.rotation.Yaw = (uint)(byte)Spyro.field157_0x22a << 4;
      Spyro.rotation.Pitch = (uint)(byte)Spyro.field156_0x229 << 4;
    }
    if ((Spyro.field150_0x20c & 0x10000U) != 0) {
      Spyro.field60_0x105 = '\x01';
    }
    if ((Spyro.field150_0x20c & 0x20000U) != 0) {
      if (Spyro.maybeSubstate != Idle) {
        SetSpyroState(Idle);
      }
      iVar1 = deltaTime;
      iVar5 = 0;
      pIVar2 = inputStates;
      inputStates[0].current = inputStates[0].current | Triangle;
      if (0 < deltaTime) {
        do {
          pIVar2 = pIVar2 + 1;
          iVar5 = iVar5 + 1;
          pIVar2->current = pIVar2->current | Triangle;
        } while (iVar5 < iVar1);
      }
      FUN_80012b1c(&DAT_80068370,&DAT_80068238);
      inputStates[0].pressed = inputStates[0].pressed | DAT_8006826c & Circle;
      pIVar3 = &inputStates[1].pressed;
      if (0 < deltaTime) {
        iVar5 = 0;
        iVar1 = deltaTime * 0x10;
        do {
          *pIVar3 = *pIVar3 | *(InputFlags *)((int)&DAT_8006827c + iVar5) & Circle;
          pIVar3 = pIVar3 + 4;
          iVar5 = iVar5 + 0x10;
        } while ((int)pIVar3 < iVar1 + -0x7ff97c4c);
      }
      Spyro.field123_0x1c1 = '\x01';
      Spyro.field162_0x240 = 1;
    }
  }
                    // WARNING: Read-only address (ram,0x8006826c) is written
  return;
}



void FUN_800313e4(void)

{
  if ((Spyro.field150_0x20c & 0x2c142U) == 0) {
    Spyro.field162_0x240 = 0;
  }
  else {
    FUN_80012b1c(&DAT_80068238,&DAT_80068370);
  }
  if ((Spyro.field150_0x20c & 0x140U) == 0) {
    Spyro.field152_0x214 = 0;
  }
  Spyro.field151_0x210 = Spyro.field150_0x20c;
  Spyro.field150_0x20c = 0;
  return;
}



void FUN_80031468(int param_1)

{
  Vec3 local_20;
  
  if (-1 < (int)Spyro.maybeSubstate) {
    if ((int)Spyro.maybeSubstate < 2) {
      Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10000040;
      VectorSubtract(&local_20,&Spyro.position,&currentNPC->position);
      Spyro.field160_0x238 = Atan2(-local_20.x,-local_20.y,0);
      local_20.x = cosineLookupTable[*(byte *)(param_1 + 0x46)] * 0xd >> 5;
      local_20.z = 0;
      local_20.y = sineLookupTable[*(byte *)(param_1 + 0x46)] * 0xd >> 5;
      VectorAdd(&Spyro.field159_0x22c,&local_20,(Vec3 *)(param_1 + 0xc));
      Spyro.field153_0x218 = 0;
    }
    else if (((int)Spyro.maybeSubstate < 0xc) && (9 < (int)Spyro.maybeSubstate)) {
      Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10000800;
      Spyro.field153_0x218 = param_1;
    }
  }
  return;
}



void FUN_800315bc(Vec3 *param_1,Vec3 *param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  byte *pbVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  Vec3 local_38 [2];
  
  iVar8 = 0;
  DAT_80068370 = 3;
  VectorSubtract(local_38,param_1,&Spyro.position);
  iVar1 = VectorLength(local_38,0);
  iVar1 = iVar1 >> 2;
  if (0x60 < iVar1) {
    iVar1 = 0x60;
  }
  if (param_2 == (Vec3 *)0x0) {
    iVar2 = 0;
LAB_800316b8:
    uVar6 = 0;
  }
  else {
    VectorSubtract(local_38,param_1,param_2);
    iVar2 = VectorLength(local_38,0);
    if (iVar2 < 0x80) goto LAB_800316b8;
    iVar3 = Atan2(local_38[0].x,local_38[0].y,1);
    VectorSubtract(local_38,&Spyro.position,param_2);
    iVar8 = Atan2(local_38[0].x,local_38[0].y,1);
    uVar6 = iVar3 - iVar8 & 0xfff;
    if (0x800 < uVar6) {
      uVar6 = uVar6 - 0x1000;
    }
  }
  if (Spyro.field152_0x214 == 0) {
    uVar7 = uVar6;
    if ((int)uVar6 < 0) {
      uVar7 = -uVar6;
    }
    if ((0x1f < (int)uVar7) || (0xf < iVar1)) {
      if (iVar2 < 0x80) {
        VectorCopy(local_38,param_1);
        if (iVar1 < 0x10) {
          Spyro.field152_0x214 = 1;
        }
      }
      else {
        uVar7 = uVar6;
        if (0x40 < (int)uVar6) {
          uVar7 = 0x40;
        }
        iVar3 = uVar7 + iVar8;
        if ((int)uVar6 < -0x40) {
          iVar3 = iVar8 + -0x40;
        }
        iVar8 = cosineLookup(iVar3);
        local_38[0].x = iVar8 * iVar2 >> 0xc;
        iVar8 = sineLookup(iVar3);
        local_38[0].z = 0;
        local_38[0].y = iVar8 * iVar2 >> 0xc;
        VectorAdd(local_38,local_38,param_2);
      }
      VectorSubtract(local_38,local_38,&Spyro.position);
      uVar6 = Atan2(local_38[0].x,local_38[0].y,1);
      goto LAB_80031858;
    }
  }
  uVar6 = Spyro.field160_0x238 * 0x10;
  uVar7 = uVar6 - Spyro.rotation.Yaw & 0xfff;
  if (0x800 < uVar7) {
    uVar7 = uVar7 - 0x1000;
  }
  uVar4 = uVar7;
  if ((int)uVar7 < 0) {
    uVar4 = -uVar7;
  }
  iVar1 = 0;
  if ((int)uVar4 < 0x50) {
    Spyro.field152_0x214 = 2;
    Spyro.rotation.Yaw = uVar6;
  }
  else {
    iVar1 = (int)uVar4 >> 5;
    if (4 < iVar1) {
      iVar1 = 4;
    }
    iVar8 = 0x400;
    if ((int)uVar7 < 1) {
      iVar8 = -0x400;
    }
    uVar6 = Spyro.rotation.Yaw + iVar8 & 0xfff;
    if (0x800 < uVar6) {
      uVar6 = uVar6 - 0x1000;
    }
    Spyro.field152_0x214 = 1;
  }
LAB_80031858:
  uVar6 = (int)(uVar6 - (int)VectorShort_80067ec8.Z) >> 3 & 0x1fe;
  inputStates[0]._12_3_ =
       CONCAT12(0x7f - (char)(iVar1 * *(short *)((int)sineLookupTable + uVar6) >> 0xc),
                inputStates[0]._12_2_);
  inputStates[0].leftStickAnalogY =
       0x7f - (char)(iVar1 * *(short *)((int)cosineLookupTable + uVar6) >> 0xc);
  if ((inputStates[0]._12_4_ & 0xffff0000) != 0x7f7f0000) {
    DAT_8006839e = 1;
    DAT_8006839d = 0;
  }
  iVar1 = 0;
  if (0 < deltaTime) {
    pbVar5 = &inputStates[1].rightStickAnalogX;
    do {
      iVar1 = iVar1 + 1;
      *(undefined4 *)pbVar5 = inputStates[0]._12_4_;
      pbVar5 = pbVar5 + 0x10;
    } while (iVar1 < deltaTime);
  }
  return;
}



void FUN_80031960(Vec3 *param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  byte *pbVar5;
  Vec3 local_28 [2];
  
  DAT_80068370 = 3;
  VectorSubtract(local_28,param_1,&Spyro.position);
  iVar1 = VectorLength(local_28,0);
  iVar1 = iVar1 >> 1;
  if (0x7f < iVar1) {
    iVar1 = 0x7f;
  }
  iVar2 = Atan2(local_28[0].x,local_28[0].y,1);
  if (Spyro.field152_0x214 == 0) {
    if (Spyro.maybeSubstate != Jump) {
      SetSpyroState(Jump);
    }
    inputStates[0].current = Cross;
    iVar3 = 1;
    if (Spyro.airTime == 0) goto LAB_80031a58;
  }
  else {
    if ((Spyro.field152_0x214 != 1) ||
       ((inputStates[0].current = Cross, Spyro.airTime != 0 && (Spyro.maybeSubstate == Jump))))
    goto LAB_80031a58;
    iVar3 = 2;
  }
  inputStates[0].current = Cross;
  Spyro.field152_0x214 = iVar3;
LAB_80031a58:
  if (Spyro.field152_0x214 < 2) {
    uVar4 = iVar2 - VectorShort_80067ec8.Z >> 3 & 0x1fe;
    inputStates[0]._12_3_ =
         CONCAT12(0x7f - (char)(iVar1 * *(short *)((int)sineLookupTable + uVar4) >> 0xc),
                  inputStates[0]._12_2_);
    DAT_8006839c = 0;
    inputStates[0].leftStickAnalogY =
         0x7f - (char)(iVar1 * *(short *)((int)cosineLookupTable + uVar4) >> 0xc);
    if ((inputStates[0]._12_4_ & 0xffff0000) != 0x7f7f0000) {
      DAT_8006839e = 1;
      DAT_8006839d = 0;
    }
    iVar1 = 0;
    if (0 < deltaTime) {
      pbVar5 = &inputStates[1].rightStickAnalogX;
      iVar2 = 0;
      do {
        *(undefined4 *)pbVar5 = inputStates[0]._12_4_;
        iVar1 = iVar1 + 1;
        *(InputFlags *)((int)&inputStates[1].current + iVar2) = inputStates[0].current;
        pbVar5 = pbVar5 + 0x10;
        *(InputFlags *)((int)&inputStates[1].pressed + iVar2) = inputStates[0].pressed;
        iVar2 = iVar2 + 0x10;
      } while (iVar1 < deltaTime);
    }
  }
  return;
}



int FUN_80031b94(Vec3 *param_1)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  Vec3 local_30;
  
  VectorSubtract(&local_30,param_1,&Spyro.position);
  uVar1 = Atan2(local_30.x,local_30.y,1);
  iVar2 = maybeAngularDistance4096(uVar1,Spyro.rotation.Yaw);
  if (iVar2 < 800) {
    iVar6 = 800 - iVar2 >> 2;
    if (100 < iVar6) {
      iVar6 = 100;
    }
    iVar2 = (iVar2 >> 3) + 4;
  }
  else {
    iVar6 = 0;
    iVar2 = 0x80;
  }
  iVar3 = maybeNegativeAngularDistance4096(uVar1,Spyro.rotation.Yaw);
  if (iVar3 < -iVar2) {
    iVar3 = -iVar2;
  }
  if (iVar2 < iVar3) {
    iVar3 = iVar2;
  }
  Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar3;
  VectorClear((Vec3 *)&Spyro.field99_0x184);
  FUN_800308d4();
  uVar4 = -Spyro.rotation.Pitch & 0xfff;
  if (0x800 < uVar4) {
    uVar4 = uVar4 - 0x1000;
  }
  uVar5 = uVar4;
  if ((int)uVar4 < -0x1e) {
    uVar5 = 0xffffffe2;
  }
  if (0x1e < (int)uVar4) {
    uVar5 = 0x1e;
  }
  Spyro.rotation.Pitch = Spyro.rotation.Pitch + uVar5;
  uVar4 = iVar3 * -8 - Spyro.rotation.Roll & 0xfff;
  if (0x800 < uVar4) {
    uVar4 = uVar4 - 0x1000;
  }
  uVar5 = uVar4;
  if ((int)uVar4 < -0x10) {
    uVar5 = 0xfffffff0;
  }
  if (0x10 < (int)uVar4) {
    uVar5 = 0x10;
  }
  Spyro.rotation.Roll = Spyro.rotation.Roll + uVar5;
  Spyro.angleAsByte.pitch = (byte)(Spyro.rotation.Roll >> 4);
  Spyro.angleAsByte.roll = (byte)(Spyro.rotation.Pitch >> 4);
  Spyro.angleAsByte.yaw = (byte)(Spyro.rotation.Yaw >> 4);
  BuildRotationMatrix(0x80069ffc,0x8006a020,(Mat33 *)0x0);
  iVar2 = VectorLength(&local_30,0);
  if (iVar2 < 0x101) {
    VectorCopy(&Spyro.position,param_1);
    iVar2 = 0;
  }
  else {
    Spyro.maybeHorizontalSpeedDecay = iVar6;
    FUN_8002bdbc();
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (local_30.z * iVar6 == -0x80000000)) {
      trap(0x1800);
    }
    Spyro.position.x = Spyro.position.x + Spyro.field42_0x88.x;
    Spyro.position.y = Spyro.position.y + Spyro.field42_0x88.y;
    Spyro.position.z = Spyro.position.z + (local_30.z * iVar6) / iVar2;
  }
  return iVar2;
}



void FUN_80031e4c(void)

{
  Spyro.field173_0x274 = -1;
  Spyro.takingDamageRelated = 0;
  if ((Spyro.maybeSubstate != Hurt) &&
     (Spyro.iframeTimer = Spyro.iframeTimer - deltaTime, Spyro.iframeTimer < 0)) {
    Spyro.iframeTimer = 0;
  }
  return;
}



void UpdateSpyroPowers(void)

{
  int iVar1;
  uint uVar2;
  
  if ((cheatInvincible) && (Spyro.powerInvincibleTime < 0x1e)) {
    Spyro.powerInvincibleTime = 0x1e;
  }
  if (((inSpeedwayFlag < 0) && (Spyro.airTime == 0)) && (Spyro.superflySpeed < Spyro.position.z)) {
    Spyro.powerFlightTime = 0;
  }
  Spyro.powerFlightTime = Spyro.powerFlightTime - deltaTime;
  if (Spyro.powerFlightTime < 0) {
    Spyro.powerFlightTime = 0;
  }
  Spyro.powerInvincibleTime = Spyro.powerInvincibleTime - deltaTime;
  if (Spyro.powerInvincibleTime < 0) {
    Spyro.powerInvincibleTime = 0;
  }
  if ((Spyro.powerFireballTime == 0) ||
     (iVar1 = Spyro.powerFireballTime - deltaTime, Spyro.field90_0x16c != 6)) {
    Spyro.powerFireballTime = Spyro.powerFireballTime - deltaTime;
    if (Spyro.powerFireballTime < 0) {
      Spyro.powerFireballTime = 0;
    }
  }
  else {
    Spyro.powerFireballTime = iVar1;
    if (iVar1 < 1) {
      Spyro.powerFireballTime = 1;
    }
  }
  if ((Spyro.powerIceTime == 0) || (Spyro.field90_0x16c != 6)) {
    Spyro.powerIceTime = Spyro.powerIceTime - deltaTime;
    if (Spyro.powerIceTime < 0) {
      Spyro.powerIceTime = 0;
    }
  }
  else {
    Spyro.powerIceTime = Spyro.powerIceTime - deltaTime;
    if (Spyro.powerIceTime < 1) {
      Spyro.powerIceTime = 1;
    }
  }
  if ((Spyro.powerRiptoPlasmaTime == 0) || (Spyro.field90_0x16c != 6)) {
    Spyro.powerRiptoPlasmaTime = Spyro.powerRiptoPlasmaTime - deltaTime;
    if (Spyro.powerRiptoPlasmaTime < 0) {
      Spyro.powerRiptoPlasmaTime = 0;
    }
  }
  else {
    Spyro.powerRiptoPlasmaTime = Spyro.powerRiptoPlasmaTime - deltaTime;
    if (Spyro.powerRiptoPlasmaTime < 1) {
      Spyro.powerRiptoPlasmaTime = 1;
    }
  }
  Spyro.powerRiptoSuperChargeTime = Spyro.powerRiptoSuperChargeTime - deltaTime;
  if (Spyro.powerRiptoSuperChargeTime < 0) {
    Spyro.powerRiptoSuperChargeTime = 0;
  }
  if (currGameState == Dialogue) {
    Spyro.powerFlightTime = 0;
    if (currentLoadedLevel != SHADY_OASIS) {
      Spyro.powerInvincibleTime = 0;
    }
    Spyro.powerFireballTime = 0;
    Spyro.powerIceTime = 0;
    Spyro.powerRiptoPlasmaTime = 0;
    Spyro.powerRiptoSuperChargeTime = 0;
  }
  if (Spyro.superflyRelated != 0) {
    if (((Spyro.maybeSubstate + ~Superfly < 2) || (Spyro.maybeSubstate == Superfly)) ||
       (Spyro.powerFlightTime == 0)) {
      Spyro.superflyRelated = 0;
    }
    else if (Spyro.maybeSubstate == Glide) {
LAB_800321e0:
      SetSpyroState(Superfly);
      Spyro.superflyRelated = 0;
    }
    else if (Spyro.maybeSubstate == Jump) {
      if (Spyro.physicsVelocity.z < 0) goto LAB_800321e0;
    }
    else {
      SetSpyroState(Jump);
      Spyro.field82_0x14c = 1;
    }
  }
  if (Spyro.maybeSupercharge != 0) {
    SetSpyroState(Supercharge);
    Spyro.airVelocityFlag = PEAK;
  }
  Spyro.maybeSupercharge = 0;
  if (Spyro.powerSpringTime != 0) {
    SetSpyroState(Spring);
  }
  if (-1 < inSpeedwayFlag) {
    if (Spyro.powerFlightTime < 0x1e) {
      Spyro.powerFlightTime = 0x1e;
    }
    Spyro.maybeSpeedway = 1;
  }
  if (Spyro.powerInvincibleTime != 0) {
    if ((0xb4 < Spyro.powerInvincibleTime) ||
       ((Spyro.powerInvincibleTime != 0 && ((Spyro.powerInvincibleTime & 0x10U) != 0)))) {
      Spyro.color.Red = 0x90;
      Spyro.color.Green = 0x20;
      Spyro.color.Blue = 0x10;
      Spyro.color.Alpha = 0xd8;
      goto switchD_80032518_caseD_6;
    }
LAB_80032638:
    Spyro.color.Alpha = 0;
    goto switchD_80032518_caseD_6;
  }
  if (Spyro.powerFireballTime != 0) {
    uVar2 = Spyro.powerFireballTime * 2;
    if (Spyro.powerFireballTime < 0xb4) {
      uVar2 = Spyro.powerFireballTime * -6 + 0x5a0;
    }
    Spyro.color.Red = 0x90;
    uVar2 = (uint)(ushort)cosineLookupTable[uVar2 & 0xff];
    Spyro.color.Blue = 0x10;
    Spyro.color.Alpha = 0xd8;
LAB_8003240c:
    iVar1 = (int)(uVar2 << 0x10) >> 0x15;
    if (iVar1 < 0) {
      iVar1 = -iVar1;
    }
    Spyro.color.Green = (char)iVar1 + 0x20;
    goto switchD_80032518_caseD_6;
  }
  if (Spyro.powerIceTime != 0) {
    uVar2 = Spyro.powerIceTime * 2;
    if (Spyro.powerIceTime < 0xb4) {
      uVar2 = Spyro.powerIceTime * -6 + 0x5a0;
    }
    Spyro.color.Red = 0x10;
    uVar2 = (uint)(ushort)cosineLookupTable[uVar2 & 0xff];
    Spyro.color.Blue = 0x90;
    Spyro.color.Alpha = 0x80;
    goto LAB_8003240c;
  }
  if (Spyro.powerRiptoSuperChargeTime != 0) {
    uVar2 = Spyro.powerRiptoSuperChargeTime * 2;
    if (Spyro.powerRiptoSuperChargeTime < 0xb4) {
      uVar2 = Spyro.powerRiptoSuperChargeTime * -6 + 0x5a0;
    }
    Spyro.color.Red = 0x10;
    uVar2 = (uint)(ushort)cosineLookupTable[uVar2 & 0xff];
    Spyro.color.Blue = 0x90;
    Spyro.color.Alpha = 0xa0;
    goto LAB_8003240c;
  }
  if (Spyro.powerRiptoPlasmaTime != 0) {
    uVar2 = Spyro.powerRiptoPlasmaTime * 2;
    if (Spyro.powerRiptoPlasmaTime < 0xb4) {
      uVar2 = Spyro.powerRiptoPlasmaTime * -6 + 0x5a0;
    }
    Spyro.color.Blue = 0;
    Spyro.color.Green = 0xff;
    Spyro.color.Alpha = 0xa0;
    iVar1 = ((int)cosineLookupTable[uVar2 & 0xff] / 0x30) * 0x10000 >> 0x10;
    if (iVar1 < 0) {
      iVar1 = -iVar1;
    }
    Spyro.color.Red = (char)iVar1 + 0x30;
    goto switchD_80032518_caseD_6;
  }
  if (cheatSpyroColor == Normal) goto LAB_80032638;
  switch(cheatSpyroColor) {
  case Red:
    Spyro.color.Red = 0x90;
    Spyro.color.Green = 0;
    goto LAB_800325c0;
  case Blue:
    Spyro.color.Red = 0x18;
    Spyro.color.Green = 0x30;
    Spyro.color.Blue = 0xa0;
    Spyro.color.Alpha = 0xa0;
    break;
  case Pink:
    Spyro.color.Red = 0xff;
    Spyro.color.Green = 0x80;
    Spyro.color.Blue = 0x80;
    Spyro.color.Alpha = 0xa0;
    break;
  case Green:
    Spyro.color.Red = 0x10;
    Spyro.color.Green = 0x90;
LAB_800325c0:
    Spyro.color.Blue = 0;
    Spyro.color.Alpha = 0xa0;
    break;
  case Yellow:
    Spyro.color.Red = 0xff;
    Spyro.color.Green = 0xff;
    Spyro.color.Blue = 0x80;
    Spyro.color.Alpha = 0xff;
    break;
  case Black:
    Spyro.color.Red = 0x18;
    Spyro.color.Green = 0x18;
    Spyro.color.Blue = 0x18;
    Spyro.color.Alpha = 0xff;
  }
switchD_80032518_caseD_6:
  if (Spyro.maybeSubstate == Superfly) {
    if (Spyro.field175_0x27c == 0) {
      Spyro.field175_0x27c = FUN_800502fc(0x8006a274,0xfffffffd,6,0x303030);
    }
    if (Spyro.field176_0x280 == 0) {
      Spyro.field176_0x280 = FUN_800502fc(0x8006a280,0xfffffffd,6,0x303030);
    }
    if (Spyro.state == SuperflyAscending) {
      if (Spyro.field175_0x27c != 0) {
        *(undefined *)(Spyro.field175_0x27c + 0x29) = 3;
      }
      if (Spyro.field176_0x280 != 0) {
        *(undefined *)(Spyro.field176_0x280 + 0x29) = 3;
      }
    }
    else {
      if ((Spyro.field175_0x27c != 0) &&
         (*(char *)(Spyro.field175_0x27c + 0x29) = *(char *)(Spyro.field175_0x27c + 0x29) + '\x01',
         6 < *(byte *)(Spyro.field175_0x27c + 0x29))) {
        *(undefined *)(Spyro.field175_0x27c + 0x29) = 6;
      }
      if ((Spyro.field176_0x280 != 0) &&
         (*(char *)(Spyro.field176_0x280 + 0x29) = *(char *)(Spyro.field176_0x280 + 0x29) + '\x01',
         6 < *(byte *)(Spyro.field176_0x280 + 0x29))) {
        *(undefined *)(Spyro.field176_0x280 + 0x29) = 6;
      }
    }
  }
  else {
    if (Spyro.field175_0x27c != 0) {
      FUN_800504a0();
      Spyro.field175_0x27c = 0;
    }
    if (Spyro.field176_0x280 != 0) {
      FUN_800504a0();
      Spyro.field176_0x280 = 0;
    }
  }
  return;
}



void FUN_800327f0(void)

{
  int iVar1;
  Vec3 local_20;
  
  VectorSubtract(&local_20,&cameraPosition,&Spyro.position);
  iVar1 = Atan2(local_20.x,local_20.y,0);
  local_20.x = cosineLookupTable[iVar1] * 0x59 >> 10;
  local_20.z = 0;
  local_20.y = sineLookupTable[iVar1] * 0x59 >> 10;
  VectorAdd(&local_20,&local_20,&Spyro.position);
  iVar1 = FUN_8001f618(&cameraPosition,&local_20,0);
  if (iVar1 == 0) {
    Spyro.field13_0x1e = 0;
  }
  else {
    Spyro.field13_0x1e = 5;
  }
  return;
}



void FUN_800328e8(Vec3 *param_1)

{
  int iVar1;
  uint uVar2;
  Mat33 MStack_40;
  Vec3 local_20;
  
  local_20.x = 100;
  local_20.y = 0;
  local_20.z = 0x40;
  MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_20,&local_20);
  VectorAdd(&local_20,&local_20,&Spyro.position);
  VectorSubtract(&local_20,param_1,&local_20);
  TransposeMatrix(&MStack_40,&Spyro.groundedGlidingMovementMatrix);
  MatrixMultVector(&MStack_40,&local_20,&local_20);
  iVar1 = VectorLength(&local_20,0);
  uVar2 = Atan2(iVar1,local_20.z,1);
  Spyro.field100_0x188 = uVar2 & 0xfff;
  if (0x800 < (uint)Spyro.field100_0x188) {
    Spyro.field100_0x188 = Spyro.field100_0x188 - 0x1000;
  }
  if (Spyro.field100_0x188 < -0x180) {
    Spyro.field100_0x188 = -0x180;
  }
  if (0x180 < Spyro.field100_0x188) {
    Spyro.field100_0x188 = 0x180;
  }
  uVar2 = Atan2(local_20.x,local_20.y,1);
  Spyro.field101_0x18c = uVar2 & 0xfff;
  if (0x800 < (uint)Spyro.field101_0x18c) {
    Spyro.field101_0x18c = Spyro.field101_0x18c - 0x1000;
  }
  if (Spyro.field101_0x18c < -0x200) {
    Spyro.field101_0x18c = -0x200;
  }
  if (0x200 < Spyro.field101_0x18c) {
    Spyro.field101_0x18c = 0x200;
  }
  Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10000004;
  return;
}



void FUN_80032a90(undefined4 param_1)

{
  FUN_8003305c(0xbb,param_1);
  return;
}



void FUN_80032ab4(void)

{
  int iVar1;
  CollisionType CVar2;
  Vec3 VStack_20;
  
  VectorCopy(&VStack_20,&Spyro.position);
  VStack_20.z = VStack_20.z - Spyro.field172_0x270;
  FUN_8004055c(&VStack_20,0x80,1,0,0x80000,(Object *)0x0);
  iVar1 = FUN_8003dc64(&VStack_20,0x80,1,0,0x80000,0);
  if ((iVar1 != 0) && (CVar2 = GetCollisiontType(DAT_8006ab94), CVar2 == 3)) {
    collisionTypes[DAT_8006ab94 & 0x3f][1] = collisionTypes[DAT_8006ab94 & 0x3f][1] | 0x80000;
  }
  return;
}



void FUN_80032b94(void)

{
  undefined4 uVar1;
  Vec3 VStack_20;
  
  if ((Spyro.field77_0x138 & 0x40000U) == 0) {
    uVar1 = 0x200000;
    if ((Spyro.field77_0x138 & 0x20000U) == 0) {
      return;
    }
  }
  else {
    uVar1 = 0x600000;
  }
  VectorCopy(&VStack_20,&Spyro.field42_0x88);
  VectorShiftRight(&VStack_20,3);
  VectorAdd(&VStack_20,&VStack_20,&Spyro.position);
  FUN_8003ce38(&Spyro.position,&VStack_20,0,uVar1,0);
  return;
}



undefined4 FUN_80032c34(void)

{
  undefined4 uVar1;
  SpyroState *pSVar2;
  uint uVar3;
  int iVar4;
  
  if (((((Spyro.field162_0x240 == 0) && ((Spyro.field150_0x20c & 8U) == 0)) &&
       (Spyro.field90_0x16c == 0)) &&
      (((currentLoadedLevel != IDOL_SPRINGS || (DAT_80066f30 != 1)) || (Spyro.state != Idle)))) &&
     ((Spyro.nextAnimationState == Spyro.currentAnimationState &&
      (Spyro.nextAnimationFrame < Spyro.currentAnimationFrame)))) {
    if (Spyro.field83_0x150 != 0) {
      return 0;
    }
    Spyro.field83_0x150 = 1;
    if ((Spyro.state != Idle) && (Spyro.state != 0x25)) {
      SetSpyroState(Idle);
      return 1;
    }
    Spyro.field82_0x14c = Spyro.field82_0x14c + -1;
    if (0 < Spyro.field82_0x14c) {
      Spyro.field83_0x150 = 1;
      return 0;
    }
    uVar3 = (uint)Spyro.field65_0x10a;
    pSVar2 = maybeIdleStateArray + uVar3;
    if ((&objectModels[0][2].field3_0xc)[*pSVar2] == 0) {
      do {
        uVar3 = uVar3 + 1;
        pSVar2 = pSVar2 + 1;
        if (3 < (int)uVar3) {
          uVar3 = 0;
          pSVar2 = maybeIdleStateArray;
        }
      } while ((uVar3 != Spyro.field65_0x10a) && ((&objectModels[0][2].field3_0xc)[*pSVar2] == 0));
      if ((&objectModels[0][2].field3_0xc)[maybeIdleStateArray[uVar3]] == 0) goto LAB_80032e5c;
    }
    iVar4 = uVar3 + 1;
    SetSpyroState(maybeIdleStateArray[uVar3]);
    if (3 < iVar4) {
      iVar4 = 0;
    }
    Spyro.field65_0x10a = (byte)iVar4;
    uVar1 = 1;
  }
  else {
    Spyro.field83_0x150 = 0;
LAB_80032e5c:
    uVar1 = 0;
  }
  return uVar1;
}



void OnDeath(void)

{
  if (DAT_80067024 == 1) {
    DAT_80067178 = DAT_80067024;
  }
  else {
    if (currentLoadedLevel == CRUSHS_DUNGEON) {
      crushDeathCounter = crushDeathCounter + '\x01';
    }
    else if (currentLoadedLevel == GULPS_OVERLOOK) {
      gulpDeathCounter = gulpDeathCounter + '\x01';
    }
    else if (currentLoadedLevel == RIPTOS_ARENA) {
      if ((byte)Objects[2].data[6] < 3) {
        riptoPhase1DeathCounter = riptoPhase1DeathCounter + '\x01';
      }
      else if ((byte)Objects[2].data[6] < 4) {
        riptoPhase1DeathCounter = riptoPhase1DeathCounter + '\x01';
        riptoPhase2DeathCounter = riptoPhase2DeathCounter + '\x01';
      }
      else {
        riptoPhase1DeathCounter = riptoPhase1DeathCounter + '\x01';
        riptoPhase2DeathCounter = riptoPhase2DeathCounter + '\x01';
        riptoPhase3DeathCounter = riptoPhase3DeathCounter + '\x01';
      }
    }
    fodderCountTillNextLifeButterfly = 0;
    if (inSpeedwayFlag < 0) {
      lives = lives + -1;
      Spyro.health = maxHealth;
      if (lives < 0) {
        GameOver();
      }
      else {
        maybeLoadCheckpoint(&checkpointStorage);
        pauseSubMenuId = 1;
        Spyro.field162_0x240 = 0;
      }
    }
    else {
      maybeLoadCheckpoint(&checkpointStorage);
    }
  }
  return;
}



void FUN_8003305c(int param_1,Vec3 *param_2)

{
  bool bVar1;
  int iVar2;
  Spyro *inputVector;
  Vec3 VStack_48;
  Vec3 local_38;
  Vec3 local_28;
  
  bVar1 = (int)(uint)*(byte *)(*DAT_80066f24 + 2) <= param_1;
  if (bVar1) {
    param_1 = param_1 - (uint)*(byte *)(*DAT_80066f24 + 2);
  }
  FUN_800418c8(param_1,param_2,Spyro.currentAnimationState,Spyro.currentAnimationFrame,bVar1);
  if ((&DAT_80062868)[Spyro.field11_0x1c] != '\0') {
    FUN_800418c8(param_1,&VStack_48,Spyro.nextAnimationState,Spyro.nextAnimationFrame,bVar1);
    VectorMultByN(param_2,param_2,0x100 - (uint)(byte)(&DAT_80062868)[Spyro.field11_0x1c]);
    VectorMultByN(&VStack_48,&VStack_48,(&DAT_80062868)[Spyro.field11_0x1c]);
    VectorAdd(param_2,param_2,&VStack_48);
    VectorShiftRight(param_2,8);
  }
  if (bVar1) {
    iVar2 = *(int *)(DAT_80066f24[Spyro.currentAnimationState] +
                     (uint)Spyro.currentAnimationFrame * 0x14 + 0x1c);
    local_38.x = iVar2 >> 0x15;
    local_38.y = (iVar2 << 0xb) >> 0x15;
    local_38.z = (iVar2 << 0x16) >> 0x15;
    if ((&DAT_80062868)[Spyro.field11_0x1c] != '\0') {
      iVar2 = *(int *)(DAT_80066f24[Spyro.nextAnimationState] +
                       (uint)Spyro.nextAnimationFrame * 0x14 + 0x1c);
      local_28.x = iVar2 >> 0x15;
      local_28.y = (iVar2 << 0xb) >> 0x15;
      local_28.z = (iVar2 << 0x16) >> 0x15;
      VectorMultByN(&local_38,&local_38,0x100 - (uint)(byte)(&DAT_80062868)[Spyro.field11_0x1c]);
      VectorMultByN(&local_28,&local_28,(&DAT_80062868)[Spyro.field11_0x1c]);
      VectorAdd(&local_38,&local_38,&local_28);
      VectorShiftRight(&local_38,8);
    }
    inputVector = (Spyro *)&local_38;
    MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,(Vec3 *)inputVector,(Vec3 *)inputVector);
    MatrixMultVector(&Spyro.unkMatrix,param_2,param_2);
    VectorAdd(param_2,param_2,&Spyro.position);
  }
  else {
    MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,param_2,param_2);
    inputVector = &Spyro;
  }
  VectorAdd(param_2,param_2,&inputVector->position);
  return;
}



void FUN_80033300(int param_1)

{
  bool bVar1;
  InputFlags IVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  Vec3 *left;
  undefined4 uVar9;
  undefined4 uVar10;
  int local_a0 [2];
  Vec3 local_98;
  Vec3 local_88;
  Vec3 local_78;
  int local_68;
  int local_64;
  Vec3 local_60;
  int local_50 [2];
  Vec3 VStack_48;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  Vec3 local_28;
  
  if ((Spyro.field150_0x20c & 0x8000U) != 0) {
    return;
  }
  DAT_80066f38 = inputStates + param_1 + 1;
  param_1 = Spyro.field35_0x5c + param_1;
  iVar5 = Spyro.rotation.Roll;
  switch(Spyro.state) {
  case Idle:
  case Flame:
  case IdleLedge:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    iVar5 = Spyro.rotation.Roll;
    if (cameraState != Look) {
      FUN_8002b36c(0x1200);
      FUN_8002bc68();
      FUN_8002bb24(0x5a,0x10);
      iVar5 = Spyro.rotation.Roll;
    }
    break;
  case Walk:
  case Run:
  case StartRun:
    FUN_8002b36c(0x1200);
    if ((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
        (TriggerLeft|TriggerRight)) {
      Spyro.maybeHorizontalSpeed = 0;
    }
    iVar5 = 0;
    if (Spyro.state == Run) {
      uVar10 = 8;
      uVar9 = 0x28;
    }
    else {
      uVar10 = 0xc;
      if (Spyro.state == StartRun) {
        uVar9 = 0x41;
      }
      else {
        uVar10 = 0x10;
        if ((Spyro.field150_0x20c & 0x40U) == 0) {
          uVar9 = 0x5a;
          iVar5 = FUN_8002bc68();
        }
        else {
          uVar9 = 0x50;
        }
      }
    }
    iVar4 = FUN_8002bb24(uVar9,uVar10);
    iVar3 = Spyro.maybeHorizontalSpeed;
    iVar6 = Spyro.maybeTurnSpeed;
    if (Spyro.maybeTurnSpeed < 0) {
      iVar6 = -Spyro.maybeTurnSpeed;
    }
    if ((iVar6 < 8) &&
       ((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
        (TriggerLeft|TriggerRight))) {
      Spyro.field82_0x14c = Spyro.field82_0x14c + 1;
    }
    else {
      Spyro.field82_0x14c = 0;
    }
    if (iVar5 == 0) {
      if (iVar4 < 0) {
        iVar4 = -iVar4;
      }
      if (0x200 < iVar4) goto LAB_800334ec;
    }
    else {
LAB_800334ec:
      if ((Spyro.field150_0x20c & 0x40U) == 0) {
        if (Spyro.maybeHorizontalSpeedDecay < Spyro.maybeHorizontalSpeed) {
          Spyro.maybeHorizontalSpeed = Spyro.maybeHorizontalSpeedDecay;
        }
      }
      else {
        Spyro.maybeHorizontalSpeed = 0;
      }
    }
    FUN_8002bd70(0x140,0xc0);
    Spyro.maybeHorizontalSpeed = iVar3;
    if (Spyro.field64_0x109 == '\0') {
      FUN_8002bdbc();
      FUN_8002c038();
    }
    else {
      VectorClear(&Spyro.trueVelocity);
    }
    if ((Spyro.ledgeDetected == '\0') && (Spyro.airTime == 0)) goto LAB_800337f0;
LAB_800337d0:
    Spyro.trueVelocity.z = Spyro.physicsVelocity.z + -0xc0;
    goto LAB_800337fc;
  case Stop:
    FUN_8002b36c(0x1200);
    if ((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
        (TriggerLeft|TriggerRight)) {
      Spyro.maybeHorizontalSpeed = 0;
    }
    iVar5 = FUN_8002bb24(0x5a,0x10);
    if (iVar5 < 0) {
      iVar5 = -iVar5;
    }
    if (0x200 < iVar5) {
      Spyro.maybeHorizontalSpeed = 0;
    }
    if (Spyro.ledgeDetected == '\0') {
      if (Spyro.airVelocityFlag == NORMAL) {
        FUN_8002bd70(0x140,0xc0);
      }
      else if (0x1d < Spyro.field35_0x5c) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    else {
      Spyro.maybeHorizontalSpeedDecay = 0;
    }
    FUN_8002bdbc();
    if ((Spyro.ledgeDetected != '\0') || (Spyro.airTime != 0)) goto LAB_800337d0;
    left = &Spyro.field42_0x88;
    goto LAB_800337f4;
  case Pivot:
    iVar5 = maybeAngularDistance4096(Spyro.maybeTargetYaw,Spyro.rotation.Yaw);
    uVar7 = iVar5 >> 3;
    if (0x7f < iVar5) {
      if (Spyro.field35_0x5c < 6) {
        Spyro.maybeTurnSpeed = 0;
        uVar7 = Spyro.maybeTurnSpeed;
      }
      else {
        Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + 0x10;
        uVar8 = Spyro.maybeTargetYaw - Spyro.rotation.Yaw & 0xfff;
        if (0x62 < Spyro.maybeTurnSpeed) {
          Spyro.maybeTurnSpeed = 0x62;
        }
        uVar7 = Spyro.maybeTurnSpeed;
        if ((int)uVar8 < Spyro.maybeTurnSpeed) {
          uVar7 = uVar8;
        }
      }
    }
    Spyro.maybeTurnSpeed = uVar7;
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    Spyro.maybeHorizontalSpeed = 0;
    if (Spyro.ledgeDetected == '\0') {
      FUN_8002bd70(0,0x100);
    }
    else {
      Spyro.maybeHorizontalSpeedDecay = 0;
    }
    FUN_8002bdbc();
    FUN_8002c038();
    if ((Spyro.ledgeDetected != '\0') || (Spyro.airTime != 0)) goto LAB_800337d0;
LAB_800337f0:
    left = &Spyro.trueVelocity;
LAB_800337f4:
    VectorAdd(&Spyro.trueVelocity,left,&Spyro.field56_0xf0);
LAB_800337fc:
    iVar5 = Spyro.rotation.Roll;
    if ((currGameState == Dialogue) && (Spyro.ledgeDetected != '\0')) {
      VectorClear(&Spyro.trueVelocity);
      VectorClear(&Spyro.field42_0x88);
      iVar5 = Spyro.rotation.Roll;
    }
    break;
  case Jump:
    if (Spyro.maybeSubstate == Climb) {
      FUN_8002b4e4(local_a0,0);
      local_a0[0] = (local_a0[0] << 0xb) >> 7;
      iVar5 = sineLookup(Spyro.rotation.Yaw);
      local_98.x = local_a0[0] * iVar5 >> 0xc;
      iVar5 = cosineLookup(Spyro.rotation.Yaw);
      local_98.y = -local_a0[0] * iVar5 >> 0xc;
      iVar5 = cosineLookup(Spyro.rotation.Yaw);
      local_98.x = local_98.x + ((iVar5 << 10) >> 0xc);
      iVar5 = sineLookup(Spyro.rotation.Yaw);
      local_98.y = local_98.y + ((iVar5 << 10) >> 0xc);
      VectorSubtract(&local_98,&local_98,&Spyro.trueVelocity);
      local_98.z = 0;
      iVar5 = VectorLength(&local_98,0);
      if (0x280 < iVar5) {
        VectorScale(&local_98,iVar5,0x280);
      }
      VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_98);
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
      if ((param_1 < 0xd) && ((Spyro.airVelocityFlag & 0xffffff7f) == 0)) {
        IVar2 = DAT_80066f38->current & Cross;
joined_r0x80033ac0:
        if (IVar2 != None) goto LAB_80033ac8;
      }
    }
    else {
      FUN_8002b36c(0xc80);
      FUN_8002bb24(0x28,8);
      FUN_8002bd70(0x140,0xc0);
      iVar5 = cosineLookup(Spyro.maybeTargetYaw);
      local_88.x = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
      iVar5 = sineLookup(Spyro.maybeTargetYaw);
      local_88.y = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
      VectorSubtract(&local_88,&local_88,&Spyro.trueVelocity);
      local_88.z = 0;
      iVar5 = VectorLength(&local_88,0);
      if (0x280 < iVar5) {
        VectorScale(&local_88,iVar5,0x280);
      }
      VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_88);
      FUN_8002c038();
      if ((param_1 < 0xd) && (Spyro.airVelocityFlag == NORMAL)) {
        IVar2 = Spyro.field82_0x14c;
        if ((DAT_80066f38->current & Cross) == None) goto joined_r0x80033ac0;
LAB_80033ac8:
        Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x17;
        iVar5 = Spyro.rotation.Roll;
        break;
      }
    }
    Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
    iVar5 = Spyro.rotation.Roll;
    break;
  case Flop:
    FUN_8002b36c(0x640);
    FUN_8002bb24(0x16,4);
    if (Spyro.airVelocityFlag == PEAK) {
      if (0x1d < Spyro.field35_0x5c) {
        Spyro.airVelocityFlag = NORMAL;
      }
      VectorClear(&local_78);
    }
    else {
      FUN_8002bd70(0x140,0xc0);
      iVar5 = cosineLookup(Spyro.maybeTargetYaw);
      local_78.x = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
      iVar5 = sineLookup(Spyro.maybeTargetYaw);
      local_78.y = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
      VectorSubtract(&local_78,&local_78,&Spyro.trueVelocity);
      local_78.z = 0;
      iVar5 = VectorLength(&local_78,0);
      if (0x140 < iVar5) {
        VectorScale(&local_78,iVar5,0x140);
      }
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_78);
    FUN_8002c038();
    goto LAB_80033c98;
  default:
    if (DAT_80067078 != (code *)0x0) {
      (*DAT_80067078)();
      iVar5 = Spyro.rotation.Roll;
    }
    break;
  case Charge:
    FUN_8002b4e4(local_a0,1);
    iVar5 = local_a0[0] * 0x19 >> 7;
    if (iVar5 == 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    else if (iVar5 < 0) {
      if (0 < Spyro.maybeTurnSpeed) {
        Spyro.maybeTurnSpeed = 0;
      }
    }
    else if (Spyro.maybeTurnSpeed < 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    if (Spyro.maybeTurnSpeed < iVar5) {
      bVar1 = iVar5 < Spyro.maybeTurnSpeed + 5;
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + 5;
    }
    else {
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + -5;
      bVar1 = Spyro.maybeTurnSpeed < iVar5;
    }
    if (bVar1) {
      Spyro.maybeTurnSpeed = iVar5;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    FUN_8002bd70(0x240,0x180);
    FUN_8002bdbc();
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    if ((Spyro.ledgeDetected == '\0') && (Spyro.airTime == 0)) {
      VectorAdd(&Spyro.trueVelocity,&Spyro.trueVelocity,&Spyro.field56_0xf0);
      iVar5 = Spyro.rotation.Roll;
    }
    else {
      Spyro.trueVelocity.z = Spyro.physicsVelocity.z + -0xc0;
      iVar5 = Spyro.rotation.Roll;
    }
    break;
  case Bonk:
    if (0x12 < param_1) {
      Spyro.field42_0x88.x = Spyro.trueVelocity.x * 7;
      Spyro.field42_0x88.y = Spyro.trueVelocity.y * 7;
      Spyro.field42_0x88.z = Spyro.trueVelocity.z * 7;
      VectorShiftRight(&Spyro.field42_0x88,3);
    }
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
    if (Spyro.trueVelocity.z < -0xc80) {
      Spyro.trueVelocity.z = -0xc80;
    }
    Spyro.field42_0x88.z = Spyro.trueVelocity.z;
    iVar5 = Spyro.rotation.Roll;
    break;
  case Hurt:
    if (0x12 < param_1) {
      Spyro.field42_0x88.x = Spyro.trueVelocity.x * 0xe0;
      Spyro.field42_0x88.y = Spyro.trueVelocity.y * 0xe0;
      Spyro.field42_0x88.z = Spyro.trueVelocity.z * 0xe0;
      VectorShiftRight(&Spyro.field42_0x88,8);
    }
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
LAB_80033c98:
    Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
    iVar5 = Spyro.rotation.Roll;
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    break;
  case Glide:
  case GlideHoldBack:
    FUN_8002b4e4(&local_68,1);
    Spyro.maybeTurnSpeed = local_68 * 0x14 >> 7;
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + Spyro.maybeTurnSpeed;
    if (local_64 < 0) {
      Spyro.maybeHorizontalSpeed = (local_64 * 0x1180 >> 7) + 0x1900;
    }
    else {
      Spyro.maybeHorizontalSpeed = 0x1900;
    }
    FUN_8002bd70(0x80,0x80);
    if (Spyro.maybeHorizontalSpeedDecay < 0x780) {
      Spyro.maybeHorizontalSpeedDecay = 0x780;
    }
    FUN_8002bdbc();
    FUN_8002c038();
    Spyro.trueVelocity.z = Spyro.physicsVelocity.z + -0x80;
    if (Spyro.trueVelocity.z < -0x780) {
      Spyro.trueVelocity.z = -0x780;
    }
    if (0 < Spyro.trueVelocity.z) {
      Spyro.trueVelocity.z = 0;
    }
    uVar7 = -Spyro.rotation.Pitch & 0xfff;
    if (0x800 < uVar7) {
      uVar7 = uVar7 - 0x1000;
    }
    uVar8 = uVar7;
    if ((int)uVar7 < -0xf) {
      uVar8 = 0xfffffff1;
    }
    if (0xf < (int)uVar7) {
      uVar8 = 0xf;
    }
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + uVar8;
    uVar7 = Spyro.maybeTurnSpeed * -8 - Spyro.rotation.Roll & 0xfff;
    if (0x800 < uVar7) {
      uVar7 = uVar7 - 0x1000;
    }
    uVar8 = uVar7;
    if ((int)uVar7 < -0x10) {
      uVar8 = 0xfffffff0;
    }
    iVar5 = Spyro.rotation.Roll + uVar8;
    if (0x10 < (int)uVar7) {
      iVar5 = Spyro.rotation.Roll + 0x10;
    }
    break;
  case Hover:
    FUN_8002b36c(0x640);
    FUN_8002bb24(0x14,4);
    FUN_8002bd70(0x140,0xc0);
    iVar5 = cosineLookup(Spyro.maybeTargetYaw);
    local_60.x = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    iVar5 = sineLookup(Spyro.maybeTargetYaw);
    local_60.y = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    VectorSubtract(&local_60,&local_60,&Spyro.trueVelocity);
    local_60.z = 0;
    iVar5 = VectorLength(&local_60,0);
    if (0x280 < iVar5) {
      VectorScale(&local_60,iVar5,0x280);
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_60);
    FUN_8002c038();
    if (param_1 < 7) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x17;
    }
    else {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
    }
    iVar6 = (Spyro.field83_0x150 - Spyro.position.z) * 0x40 - Spyro.field41_0x7c.z;
    iVar5 = Spyro.rotation.Roll;
    if (iVar6 < Spyro.trueVelocity.z) {
      Spyro.trueVelocity.z = iVar6;
    }
    break;
  case ChargeAir:
    FUN_8002b4e4(local_50,1);
    iVar5 = local_50[0] * 0x19 >> 7;
    if (iVar5 == 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    else if (iVar5 < 0) {
      if (0 < Spyro.maybeTurnSpeed) {
        Spyro.maybeTurnSpeed = 0;
      }
    }
    else if (Spyro.maybeTurnSpeed < 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    if (Spyro.maybeTurnSpeed < iVar5) {
      bVar1 = iVar5 < Spyro.maybeTurnSpeed + 5;
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + 5;
    }
    else {
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + -5;
      bVar1 = Spyro.maybeTurnSpeed < iVar5;
    }
    if (bVar1) {
      Spyro.maybeTurnSpeed = iVar5;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    FUN_8002bd70(0x100,0x180);
    iVar5 = cosineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.x = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    iVar5 = sineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.z = Spyro.trueVelocity.z;
    Spyro.field42_0x88.y = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    FUN_8002c038();
    if (((0xc < param_1) || (Spyro.airVelocityFlag != NORMAL)) ||
       ((DAT_80066f38->current & Cross) == None)) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
    }
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    iVar5 = Spyro.rotation.Roll;
    if ((DAT_80066f38->current & Square) == None) {
      Spyro.field82_0x14c = Spyro.field82_0x14c + 1;
    }
    else {
      Spyro.field82_0x14c = 0;
    }
    break;
  case DeathPirouette:
    if (Spyro.airTime == 0) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      VectorClear(&VStack_48);
      VectorSubtract(&VStack_48,&VStack_48,&Spyro.trueVelocity);
      VStack_48.z = 0;
      iVar5 = VectorLength(&VStack_48,0);
      if (0x40 < iVar5) {
        VectorScale(&VStack_48,iVar5,0x40);
      }
      VStack_48.z = -0xc0;
      VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&VStack_48);
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    }
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    iVar5 = Spyro.rotation.Roll;
    if (((Spyro.state == DeathBurn) && (DAT_800670fc != (code *)0x0)) && ((DAT_80067008 & 1) != 0))
    {
      local_38 = 0;
      local_34 = 0;
      local_30 = 0xe;
      VectorCopy(&local_28,&Spyro.position);
      iVar5 = RandomRangeGen(0,300);
      local_28.x = local_28.x + iVar5;
      iVar5 = RandomRangeGen(0,300);
      local_28.y = local_28.y + iVar5;
      iVar5 = RandomRangeGen(0,300);
      local_28.z = local_28.z + iVar5;
      iVar5 = (*DAT_800670fc)(1,0xd,&local_28,&local_38);
      *(undefined *)(iVar5 + 2) = 6;
      *(undefined *)(iVar5 + 10) = 0x20;
      iVar5 = Spyro.rotation.Roll;
    }
    break;
  case HeadBash:
    Spyro.trueVelocity.x = 0;
    Spyro.trueVelocity.y = 0;
    if (Spyro.airVelocityFlag == FALLING) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0x800;
      if (Spyro.trueVelocity.z < -0x3200) {
        Spyro.trueVelocity.z = -0x3200;
      }
      if ((((Spyro.airTime == 0) && (8 < Spyro.field35_0x5c)) && (Spyro.field55_0xec < 0x17)) &&
         (Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)) {
        DAT_80068058 = 0x1000;
        DAT_8006805c = 0x1e;
        Spyro.airVelocityFlag = PEAK;
        Spyro.field35_0x5c = 0;
        if (DAT_800670fc != (code *)0x0) {
          (*DAT_800670fc)(8,0x21,0,2);
          (*DAT_800670fc)(8,0x21,0,3);
        }
        DAT_80068398 = 0x78;
        DAT_80068394 = 0xf;
        PlayAudio(*(undefined *)(audioBank + 0x14),0,0);
        iVar5 = Spyro.rotation.Roll;
      }
    }
    else if ((int)Spyro.airVelocityFlag < 2) {
      if (Spyro.airVelocityFlag == NORMAL) {
        if (Spyro.field35_0x5c < 0x2a) {
          Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0x20;
        }
        else {
          Spyro.airVelocityFlag = FALLING;
          Spyro.field35_0x5c = 0;
        }
      }
    }
    else if (Spyro.airVelocityFlag == PEAK) {
      Spyro.trueVelocity.z = 0;
    }
  }
  Spyro.rotation.Roll = iVar5;
  VectorAdd(&Spyro.field41_0x7c,&Spyro.field41_0x7c,&Spyro.trueVelocity);
  return;
}



void FUN_800347a4(void)

{
  char cVar1;
  int iVar2;
  int iVar3;
  
  if ((Spyro.field150_0x20c & 0x8000U) != 0) {
    return;
  }
  if (Spyro.airTime == 0) {
    Spyro.field75_0x128 = Spyro.field72_0x114;
  }
  switch(Spyro.state) {
  case Idle:
  case IdleLedge:
    iVar2 = FUN_8002d9c4();
    if (iVar2 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    goto LAB_80034c64;
  case Walk:
  case StartRun:
    FUN_8002d9c4();
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_8002db08(0xc00);
    if (Spyro.field49_0xbc == 0) {
      iVar2 = Spyro.maybeTurnSpeed << 2;
    }
    else {
      iVar2 = Spyro.field49_0xbc * 0x15 >> 8;
    }
    iVar3 = iVar2;
    if (iVar2 < 0x10) {
      iVar3 = 0x10;
    }
    if (0x60 < iVar2) {
      iVar3 = 0x60;
    }
    FUN_8002e3f8(iVar3);
    break;
  case Run:
    FUN_8002d9c4();
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    goto LAB_80034c84;
  case Stop:
    FUN_8002d9c4();
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_8002db08(0xc00);
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(1,0x21,0,0);
    }
    break;
  case Pivot:
    FUN_8002d9c4();
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_8002db08(0xc00);
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(1,0x21,0,0);
    }
    break;
  case Jump:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    if (Spyro.maybeSubstate == Climb) {
      FUN_8002d0f8();
      if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
        Spyro.airVelocityFlag = Spyro.airVelocityFlag & 0x80 | 1;
LAB_80034a64:
        if ((Spyro.airVelocityFlag & 0x80) == 0) break;
      }
      else if ((Spyro.airVelocityFlag & 0x80) == 0) {
        if ((inputStates[0].current & Cross) == None) {
          Spyro.airVelocityFlag = PEAK;
        }
        goto LAB_80034a64;
      }
      if (Spyro.position.z <= Spyro.field82_0x14c) {
        Spyro.airVelocityFlag = Spyro.airVelocityFlag & 0xffffff7f;
      }
    }
    else if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      if (Spyro.airVelocityFlag + ~PEAK < 2) {
        Spyro.airVelocityFlag = 4;
      }
      else {
        Spyro.airVelocityFlag = FALLING;
      }
    }
    else if ((Spyro.airVelocityFlag == NORMAL) &&
            (((inputStates[0].current & Cross) == None && (Spyro.field82_0x14c == 0)))) {
      Spyro.airVelocityFlag = PEAK;
    }
    break;
  case Flop:
  case Flame:
  case Bonk:
  case DeathPirouette:
    FUN_8002c0f4();
LAB_80034c64:
    FUN_8002cc88();
    break;
  default:
    if (DAT_80067074 != (code *)0x0) {
      (*DAT_80067074)();
    }
    goto LAB_80034dd0;
  case Charge:
    FUN_8002d9c4();
    FUN_8002c0f4();
    FUN_8002cc88();
    if ((Spyro.airTime != 0) && (Spyro.field51_0xc4 == 0)) {
      iVar2 = VectorLength(&Spyro.field52_0xc8,0);
      cVar1 = Atan2(Spyro.field52_0xc8.z,iVar2,0);
      Spyro.field55_0xec = (int)cVar1;
    }
    FUN_8002db08(0xc00);
    FUN_80032b94();
    Spyro.field17_0x28 = 0;
    iVar2 = FUN_80050b20(*(undefined *)(audioBank + 0x21),Spyro.field169_0x264);
    if (iVar2 == 0) {
      Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 0x21),0,4);
      Spyro.field170_0x268 = (int)*(byte *)(audioBank + 0x21);
    }
    goto LAB_80034dd0;
  case Hurt:
    FUN_8002c0f4();
    FUN_8002cc88();
LAB_80034c84:
    FUN_8002db08(0xc00);
    break;
  case Glide:
  case Hover:
  case GlideHoldBack:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    break;
  case ChargeAir:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_80032b94();
    if ((Spyro.maybeSubstate == Supercharge) && (DAT_800670fc != (code *)0x0)) {
      (*DAT_800670fc)(1,9,0,0);
    }
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    else if ((Spyro.airVelocityFlag == NORMAL) && ((inputStates[0].current & Cross) == None)) {
      Spyro.airVelocityFlag = PEAK;
    }
    break;
  case HeadBash:
    FUN_8002c0f4();
    FUN_8002cc88();
    if (Spyro.airVelocityFlag == FALLING) {
      FUN_80032ab4();
    }
  }
  Spyro.field17_0x28 = 0;
LAB_80034dd0:
  if (Spyro.airTime != 0) {
    Spyro.field72_0x114 = Spyro.field75_0x128;
  }
  Spyro.field60_0x105 = '\0';
  return;
}



void FUN_80034e0c(void)

{
  byte bVar1;
  int iVar2;
  uint uVar3;
  
  if (Spyro.maybeSubstate + ~Swim < 2) {
    iVar2 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field171_0x26c);
    if (iVar2 == 0) {
      Spyro.field171_0x26c = PlayAudio(*(undefined *)(audioBank + 6),0,4);
    }
  }
  else {
    iVar2 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field171_0x26c);
    if (iVar2 != 0) {
      FUN_80050a40(Spyro.field171_0x26c);
      Spyro.field171_0x26c = -1;
    }
  }
  uVar3 = (uint)Spyro.currentAnimationFrame;
  if (Spyro.field174_0x278 == uVar3) goto code_r0x800350ac;
  switch(Spyro.currentAnimationState) {
  case 1:
    bVar1 = 0xd;
    if (Spyro.currentAnimationFrame != 5) {
LAB_80035028:
      if (Spyro.currentAnimationFrame != bVar1) break;
    }
    goto LAB_80035030;
  case 2:
    uVar3 = (uint)Spyro.currentAnimationFrame;
    if ((((uVar3 != 7) && (uVar3 != 9)) && (uVar3 != 0x11)) && (uVar3 != 0)) goto code_r0x800350ac;
    FUN_800506ac(0,*(undefined *)(g_currLevelID * 4 + -0x7ff9fd4c + (Spyro.field72_0x114 >> 6)),0);
    Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
    break;
  default:
    if (DAT_80066fc4 != (code *)0x0) {
      (*DAT_80066fc4)();
    }
    break;
  case 0xd:
    if ((Spyro.currentAnimationFrame == 2) || (Spyro.currentAnimationFrame == 5)) {
      iVar2 = PlayAudio(*(undefined *)(audioBank + 0x12),0,0);
      Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
      if ((-1 < iVar2) && (Spyro.field174_0x278 == 5)) {
        FUN_80050cf4(iVar2,0xc00);
        FUN_80050c64(iVar2,0xe00);
      }
    }
    break;
  case 0x16:
    bVar1 = 0xc;
    if (Spyro.currentAnimationFrame != 2) goto LAB_80035028;
LAB_80035030:
    FUN_800506ac(0,*(undefined *)(g_currLevelID * 4 + -0x7ff9fd4c + (Spyro.field72_0x114 >> 6)),0);
    Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
    break;
  case 0x1f:
    break;
  }
  uVar3 = (uint)Spyro.currentAnimationFrame;
code_r0x800350ac:
  if (uVar3 != Spyro.field174_0x278) {
    Spyro.field174_0x278 = -1;
  }
  return;
}



void FUN_800350d0(int param_1)

{
  if ((Spyro.field150_0x20c & 0x8000U) != 0) {
    return;
  }
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case Idle:
  case Walk:
  case Run:
  case Stop:
  case Pivot:
  case Flame:
  case Charge:
  case Bonk:
  case IdleLedge:
  case Hurt:
  case StartRun:
  case DeathPirouette:
    FUN_8002db8c(0x8006a0c4);
    break;
  case Jump:
    if (Spyro.maybeSubstate == Climb) {
      FUN_8002e00c(0x8006a0d0);
      break;
    }
  case Flop:
  case Hover:
  case HeadBash:
    FUN_8002db8c(0);
    break;
  default:
    if (DAT_80067070 != (code *)0x0) {
      (*DAT_80067070)();
    }
    break;
  case Glide:
  case GlideHoldBack:
    break;
  case ChargeAir:
    FUN_8002ded0(0x8006a084);
  }
  Spyro.field35_0x5c = Spyro.field35_0x5c + 1;
  return;
}



void SetSpyroState(SpyroState newSpyroState)

{
  undefined uVar1;
  Substate SVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  Vec3 VStack_50;
  int local_40;
  int local_3c;
  Vec3 VStack_38;
  Vec3 VStack_28;
  
  if (-1 < Spyro.field169_0x264) {
    iVar3 = FUN_80050b20(Spyro.field170_0x268);
    if (iVar3 != 0) {
      FUN_80050a40(Spyro.field169_0x264);
    }
    Spyro.field169_0x264 = -1;
  }
  SVar2 = Spyro.maybeSubstate;
  Spyro.field174_0x278 = -1;
  if ((newSpyroState == Glide) && (Spyro.powerFlightTime != 0)) {
    newSpyroState = Superfly;
  }
  Spyro.field172_0x270 = 0x164;
  Spyro.field77_0x138 = 0;
  switch(newSpyroState) {
  case Idle:
  case IdleLedge:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
    uVar5 = 1;
    if (newSpyroState == 0x25) {
      uVar5 = 5;
      uVar6 = 8;
    }
    else {
      uVar6 = 3;
    }
    Spyro.field82_0x14c = randomRangeGen(uVar5,uVar6);
    iVar3 = Spyro.field35_0x5c;
    Spyro.field83_0x150 = 0;
    if (DAT_800670b4 != (code *)0x0) {
      if (newSpyroState == 0x25) {
        uVar5 = 0x1f1;
      }
      else {
        if (newSpyroState != 0x27) {
          Spyro.state = newSpyroState;
          Spyro.field35_0x5c = 0;
          Spyro.field36_0x60 = iVar3;
          Spyro.field83_0x150 = 0;
          Spyro.field120_0x1be = '\0';
          Spyro.field122_0x1c0 = '\0';
          Spyro.maybeSpeedway = 0;
          return;
        }
        uVar5 = 0x1db;
      }
      (*DAT_800670b4)(uVar5,0);
    }
    break;
  case Walk:
  case Run:
  case Stop:
  case Pivot:
  case StartRun:
    Spyro.maybeSubstate = Walk;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    if (newSpyroState == Stop) {
      if (0x1400 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x1400;
      }
      if (Spyro.state != Catapult) {
LAB_800353bc:
        PlayAudio(*(undefined *)(audioBank + 0x10),0,0);
      }
    }
    else if (newSpyroState == Pivot) {
      if (Spyro.maybeTurnSpeed < 0) {
        Spyro.maybeTurnSpeed = 0;
      }
      goto LAB_800353bc;
    }
    FUN_8002db08(0xc00);
    Spyro.field82_0x14c = 0;
    Spyro.field118_0x1bc = '\x01';
    break;
  case Jump:
    if (((Spyro.maybeSubstate == Swim) && (DAT_800670fc != (code *)0x0)) && (Spyro.field17_0x28 < 0)
       ) {
      VectorCopy(&VStack_50,&Spyro.position);
      VStack_50.z = -Spyro.field17_0x28;
      (*DAT_800670fc)(6,0x2e,&VStack_50,0);
      (*DAT_800670fc)(4,0x29,&VStack_50,0);
    }
    if (Spyro.maybeSubstate == Climb) {
      Spyro.airVelocityFlag = NORMAL;
      if (DAT_8006839d == '\0') {
        FUN_8002b4e4(&local_40,0);
        iVar3 = local_40;
        if (local_40 < 0) {
          iVar3 = -local_40;
        }
        iVar4 = local_3c;
        if (local_3c < 0) {
          iVar4 = -local_3c;
        }
        if (iVar4 < iVar3) {
          Spyro.airVelocityFlag = Spyro.airVelocityFlag | 0x80;
          Spyro.field82_0x14c = Spyro.position.z;
        }
        local_40 = local_40 * 0xdc0 >> 7;
      }
      else {
        local_40 = 0;
        local_3c = 0x7f;
      }
      iVar3 = sineLookup(Spyro.rotation.Yaw);
      Spyro.trueVelocity.x = local_40 * iVar3 >> 0xc;
      iVar3 = cosineLookup(Spyro.rotation.Yaw);
      Spyro.trueVelocity.z = (local_3c + 0x40) * 0xdc0 >> 7;
      Spyro.trueVelocity.y = -local_40 * iVar3 >> 0xc;
      if (0xdc0 < Spyro.trueVelocity.z) {
        Spyro.trueVelocity.z = 0xdc0;
      }
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.trueVelocity,0);
    }
    else {
      Spyro.maybeSubstate = Jump;
      VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.trueVelocity.z = 0xdc0;
      Spyro.airVelocityFlag = NORMAL;
      if (Spyro.state == Drowning) {
        Spyro.field82_0x14c = 1;
      }
      else {
        Spyro.field82_0x14c = 0;
      }
    }
    Spyro.field118_0x1bc = '\0';
    uVar1 = *(undefined *)(audioBank + 0x22);
    goto LAB_80035948;
  case Flop:
    if (Spyro.state == Bonk) {
      Spyro.airVelocityFlag = PEAK;
    }
    else {
      Spyro.airVelocityFlag = NORMAL;
    }
    Spyro.maybeSubstate = Flop;
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.field118_0x1bc = '\0';
    Spyro.field119_0x1bd = '\x01';
    break;
  case Flame:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    goto LAB_80035c6c;
  default:
    if (DAT_800670a8 != (code *)0x0) {
      (*DAT_800670a8)(newSpyroState);
    }
    break;
  case Charge:
    Spyro.maybeSubstate = Charge;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.maybeHorizontalSpeed = 0x1e80;
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    Spyro.field77_0x138 = 0x20000;
    break;
  case Bonk:
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(8,0x21,0,1);
    }
    Spyro.maybeSubstate = Walk;
    Spyro.airVelocityFlag = NORMAL;
    VectorClear(&VStack_38);
    VectorSubtract(&Spyro.trueVelocity,&VStack_38,&Spyro.field42_0x88);
    VectorShiftRight(&Spyro.trueVelocity,2);
    VectorCopy(&Spyro.field42_0x88,&Spyro.trueVelocity);
    if (Spyro.trueVelocity.z < 0) {
      Spyro.trueVelocity.z = 0;
    }
    Spyro.field118_0x1bc = '\x01';
    PlayAudio(*(undefined *)(audioBank + 2),0,0);
    DAT_80068398 = 0x78;
    DAT_80068394 = 0xf;
    break;
  case Hurt:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = SVar2;
    if (Spyro.field173_0x274 < 0) {
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      Spyro.trueVelocity.x = (int)cosineLookupTable[Spyro.field173_0x274] >> 1;
      Spyro.trueVelocity.z = 0;
      Spyro.trueVelocity.y = (int)sineLookupTable[Spyro.field173_0x274] >> 1;
    }
    VectorCopy(&Spyro.field42_0x88,&Spyro.trueVelocity);
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    if (newSpyroState == Electrified) {
      DAT_80068390 = 0x2d;
    }
    else {
      DAT_8006838c = 0xf;
    }
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    iVar3 = Spyro.field35_0x5c;
    if (newSpyroState != HurtYawSpin) {
      Spyro.state = newSpyroState;
      Spyro.field35_0x5c = 0;
      Spyro.field36_0x60 = iVar3;
      Spyro.field120_0x1be = '\0';
      Spyro.field122_0x1c0 = '\0';
      Spyro.maybeSpeedway = 0;
      return;
    }
    uVar1 = *(undefined *)(audioBank + 0x13);
LAB_80035948:
    PlayAudio(uVar1,0,0);
    break;
  case Glide:
  case GlideHoldBack:
    if (Spyro.maybeSubstate != Glide) {
      Spyro.maybeSubstate = Glide;
      Spyro.airVelocityFlag = NORMAL;
      VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
      if (0 < Spyro.trueVelocity.z) {
        Spyro.trueVelocity.z = 0;
      }
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      if (Spyro.maybeHorizontalSpeedDecay < 0x780) {
        Spyro.maybeHorizontalSpeedDecay = 0x780;
      }
      if (0x1900 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x1900;
      }
      Spyro.field118_0x1bc = '\0';
      Spyro.field119_0x1bd = '\0';
      Spyro.field83_0x150 = Spyro.position.z;
    }
    break;
  case Hover:
    if (Spyro.maybeSubstate != Glide) {
      Spyro.field83_0x150 = Spyro.position.z + 0x400;
    }
    Spyro.maybeSubstate = Jump;
    Spyro.airVelocityFlag = NORMAL;
    VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.trueVelocity.z = 0xc00;
    Spyro.field118_0x1bc = '\0';
    break;
  case ChargeAir:
    if (Spyro.maybeSubstate == Supercharge) {
      Spyro.field77_0x138 = 0x60000;
      Spyro.airVelocityFlag = NORMAL;
    }
    else {
      if (Spyro.maybeSubstate + ~Swim < 2) {
        PlayAudio(*(undefined *)(audioBank + 7),0,0);
        VectorCopy(&VStack_28,&Spyro.position);
        VStack_28.z = VStack_28.z + 0x400;
        VStack_28.z = RaycastDown(&VStack_28,0x800);
        if (((VStack_28.z != 0) && (isOnWaterSurface != 0)) && (DAT_800670fc != (code *)0x0)) {
          (*DAT_800670fc)(6,0x2e,&VStack_28,0);
          (*DAT_800670fc)(4,0x29,&VStack_28,0);
        }
        Spyro.airVelocityFlag = WATER_EXIT;
      }
      else {
        Spyro.airVelocityFlag = NORMAL;
      }
      Spyro.maybeSubstate = Charge;
      Spyro.field77_0x138 = 0x20000;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
        Spyro.trueVelocity.x = (int)cosineLookupTable[Spyro.angleAsByte.yaw] >> 1;
        Spyro.trueVelocity.y = (int)sineLookupTable[Spyro.angleAsByte.yaw] >> 1;
      }
      else {
                    // Makes proxies happen
        VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
      }
      Spyro.maybeHorizontalSpeed = 0x1800;
    }
    Spyro.field118_0x1bc = '\0';
    Spyro.field82_0x14c = 0;
    break;
  case DeathPirouette:
    Spyro.maybeSubstate = Death;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002db08(0xc00);
LAB_80035c6c:
    Spyro.field118_0x1bc = '\x01';
    break;
  case HeadBash:
    Spyro.maybeSubstate = Headbash;
    Spyro.airVelocityFlag = NORMAL;
    VectorClear(&Spyro.trueVelocity);
    Spyro.trueVelocity.z = 0x800;
    Spyro.field118_0x1bc = '\0';
    Spyro.field77_0x138 = 0x20000;
  }
  Spyro.field36_0x60 = Spyro.field35_0x5c;
  Spyro.field120_0x1be = '\0';
  Spyro.field122_0x1c0 = '\0';
  Spyro.maybeSpeedway = 0;
  Spyro.state = newSpyroState;
  Spyro.field35_0x5c = 0;
  return;
}



void ProcessSpyroInput(void)

{
  bool bVar1;
  CollisionType CVar2;
  int iVar3;
  SpyroState SVar4;
  
  if ((Spyro.field150_0x20c & 0x8000U) != 0) {
    return;
  }
  switch(Spyro.state) {
  case Idle:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) != None) &&
       ((currentLoadedLevel != METROPOLIS ||
        (CVar2 = GetCollisiontType(Spyro.field72_0x114), CVar2 != Ice)))) {
LAB_800371d0:
      SetSpyroState(Jump);
      return;
    }
    CVar2 = GetCollisiontType(Spyro.field72_0x114);
    if (CVar2 == Ice) {
      if (DAT_8006839d != '\0') {
        return;
      }
      SetSpyroState(Ice);
      return;
    }
    if ((3 < Spyro.airTime) || (0x16 < Spyro.field55_0xec)) break;
    if ((inputStates[0].current & Square) != None) goto LAB_80037228;
    iVar3 = Spyro.maybeTurnSpeed;
    if (Spyro.maybeTurnSpeed < 0) {
      iVar3 = -Spyro.maybeTurnSpeed;
    }
    if ((iVar3 < 0x11) &&
       (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
         (TriggerLeft|TriggerRight) || (Spyro.maybeHorizontalSpeed == 0)))) {
      if ((cameraState != Look) && (Spyro.field162_0x240 == 0)) {
        if (Spyro.ledgeDetected != '\0') {
          SetSpyroState(IdleLedge);
          return;
        }
        FUN_80032c34();
        return;
      }
      if (Spyro.state == Idle) {
        return;
      }
      SetSpyroState(Idle);
      if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
        Spyro.currentAnimationState = Spyro.nextAnimationState;
        Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
      }
      Spyro.nextAnimationState = (byte)Spyro.state;
      Spyro.nextAnimationFrame = 0;
      Spyro.field11_0x1c = 0x71;
      Spyro.field136_0x1ec = Spyro.state;
      Spyro.field137_0x1f0 = 0;
      return;
    }
    goto LAB_800373c4;
  case Walk:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto LAB_800371d0;
    if ((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) {
      if ((inputStates[0].current & Square) != None) goto LAB_80037228;
      if (Spyro.field35_0x5c < 0x10) {
        return;
      }
      if (((DAT_8006839d == '\0') || (Spyro.maybeHorizontalSpeedDecay != 0)) &&
         (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) !=
           (TriggerLeft|TriggerRight) || (Spyro.field82_0x14c < 0x10)))) {
        if (Spyro.field49_0xbc < 0x781) {
          return;
        }
        FUN_800506ac(0,*(undefined *)(g_currLevelID * 4 + -0x7ff9fd4c + (Spyro.field72_0x114 >> 6)),
                     0);
        Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
        SVar4 = StartRun;
        goto LAB_8003731c;
      }
      goto LAB_8003755c;
    }
    break;
  case Run:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto LAB_800371d0;
    if ((3 < Spyro.airTime) || (0x16 < Spyro.field55_0xec)) break;
    if ((inputStates[0].current & Square) != None) goto LAB_80037228;
    if (Spyro.maybeHorizontalSpeed != 0) {
      iVar3 = maybeAngularDistance4096(Spyro.maybeTargetYaw,Spyro.rotation.Yaw);
      if (0x500 < iVar3) {
LAB_8003629c:
        SetSpyroState(Pivot);
        return;
      }
      if (0xc7f < Spyro.field49_0xbc) {
        return;
      }
      FUN_800506ac(0,*(undefined *)(g_currLevelID * 4 + -0x7ff9fd4c + (Spyro.field72_0x114 >> 6)),0)
      ;
      Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
      SVar4 = StartRun;
      goto LAB_8003731c;
    }
    goto LAB_800373ec;
  case Stop:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto LAB_800371d0;
    if ((3 < Spyro.airTime) || (0x16 < Spyro.field55_0xec)) break;
    if ((inputStates[0].current & Square) != None) goto LAB_80037228;
    iVar3 = Spyro.maybeHorizontalSpeedDecay;
    if (Spyro.maybeHorizontalSpeed != 0) {
      if ((Spyro.field35_0x5c < 0x12) &&
         (iVar3 = maybeAngularDistance4096(Spyro.maybeTargetYaw,Spyro.rotation.Yaw), 0x500 < iVar3))
      goto LAB_8003629c;
      goto LAB_800362ac;
    }
    goto joined_r0x8003691c;
  case Pivot:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto LAB_800371d0;
    if ((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) {
      if ((inputStates[0].current & Square) != None) goto LAB_80037228;
      if (Spyro.field35_0x5c < 0x25) {
        return;
      }
      if (DAT_8006839d == '\0') {
        SetSpyroState(Walk);
        Spyro.maybeTurnSpeed = 0;
        Spyro.maybeHorizontalSpeedDecay = 0x780;
        return;
      }
      goto LAB_8003755c;
    }
    break;
  case Jump:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (Spyro.maybeSubstate == Climb) {
      if ((inputStates[0].pressed & Cross) != None) {
        Spyro.field120_0x1be = '\x01';
      }
      if ((((Spyro.airTime == 0) && (0xf < Spyro.field35_0x5c)) && (Spyro.field55_0xec < 0x17)) &&
         (Spyro.field53_0xd4.x * Spyro.trueVelocity.x + Spyro.field53_0xd4.y * Spyro.trueVelocity.y
          + Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)) goto LAB_8003755c;
      if (Spyro.airVelocityFlag != FALLING) {
        return;
      }
      iVar3 = FUN_8002d328(4);
      if (iVar3 != 0) goto LAB_80037434;
      if (Spyro.field120_0x1be != '\0') goto LAB_80037500;
      bVar1 = Spyro.field35_0x5c < 0x41;
    }
    else {
      if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
        Spyro.field120_0x1be = '\x01';
      }
      if (((Spyro.airTime == 0) && (0xf < Spyro.field35_0x5c)) &&
         ((Spyro.field55_0xec < 0x17 &&
          (Spyro.field53_0xd4.x * Spyro.trueVelocity.x + Spyro.field53_0xd4.y * Spyro.trueVelocity.y
           + Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)))) {
        if (Spyro.maybeHorizontalSpeed == 0) {
          SVar4 = Idle;
          if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
            SVar4 = Stop;
          }
        }
        else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
          SVar4 = Walk;
          if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
            SVar4 = StartRun;
          }
        }
        else {
          SVar4 = Run;
        }
        SetSpyroState(SVar4);
        PlayAudio(*(undefined *)(audioBank + 0x12),0,0);
        return;
      }
      if (Spyro.superflyRelated != 0) {
        return;
      }
      if ((inputStates[0].current & Square) == None) {
        if (((inputStates[0].pressed & Triangle) != None) &&
           (globalProgressFlags.headbash.isPayed != 0)) {
          iVar3 = RaycastDown(&Spyro.position,0x364);
          SVar4 = HeadBash;
          if (iVar3 == 0) goto LAB_800366d8;
        }
      }
      else {
        SVar4 = ChargeAir;
        if (0 < Spyro.physicsVelocity.z) {
          Spyro.physicsVelocity.z = 0;
        }
LAB_800366d8:
        SetSpyroState(SVar4);
      }
      if ((Spyro.field119_0x1bd != '\0') && (Spyro.field120_0x1be != '\0')) {
        if (Spyro.airVelocityFlag != FALLING) {
          return;
        }
        goto LAB_80037500;
      }
      if (Spyro.airVelocityFlag != FALLING) {
        return;
      }
      iVar3 = FUN_8002d328(4);
      if (iVar3 != 0) {
LAB_80037434:
        SetSpyroState(ClimbIdle);
        return;
      }
      if (Spyro.airVelocityFlag != FALLING) {
        return;
      }
      if (Spyro.physicsVelocity.z < -0x1900) break;
      bVar1 = Spyro.field35_0x5c < 0x79;
    }
    goto LAB_8003757c;
  case Flop:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) != None) && (Spyro.field119_0x1bd != '\0')) {
      Spyro.field120_0x1be = '\x01';
    }
    if ((Spyro.airTime == 0) && (Spyro.field55_0xec < 0x17)) {
      if (Spyro.maybeHorizontalSpeed == 0) {
        SVar4 = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          SVar4 = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        SVar4 = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          SVar4 = StartRun;
        }
      }
      else {
        SVar4 = Run;
      }
      SetSpyroState(SVar4);
      if (DAT_800670fc != (code *)0x0) {
        (*DAT_800670fc)(8,0x21,0,2);
      }
      PlayAudio(*(undefined *)(audioBank + 0x12),0,0);
      if (Spyro.field36_0x60 < 0x18) {
        return;
      }
      DAT_80068394 = 0xf;
      DAT_80068398 = 0x78;
      return;
    }
    if ((Spyro.airVelocityFlag != WATER_EXIT) && (iVar3 = FUN_8002d328(4), iVar3 != 0))
    goto LAB_80037434;
    if (Spyro.field120_0x1be == '\0') {
      return;
    }
    bVar1 = Spyro.field35_0x5c < 0x1f;
    goto LAB_800374f8;
  case Flame:
    iVar3 = maybeTakeDamage();
joined_r0x8003691c:
    if (iVar3 != 0) {
      return;
    }
LAB_8003755c:
    SetSpyroState(Idle);
    return;
  default:
    if (DAT_80067010 == (code *)0x0) {
      return;
    }
    (*DAT_80067010)();
    return;
  case Charge:
    iVar3 = FUN_8002b228();
    if (iVar3 != 0) {
      return;
    }
    if (((inputStates[0].current & (Cross|Square)) == (Cross|Square)) &&
       ((Spyro.field55_0xec < 0xc ||
        (-1 < Spyro.field53_0xd4.x * Spyro.trueVelocity.x +
              Spyro.field53_0xd4.y * Spyro.trueVelocity.y)))) {
      SetSpyroState(ChargeAir);
      PlayAudio(*(undefined *)(audioBank + 0x22),0,0);
      Spyro.trueVelocity.z = 0xdc0;
      Spyro.airTime = Spyro.airTime + 1;
      return;
    }
    if (Spyro.airTime < 4) {
      if ((0x16 < Spyro.field55_0xec) &&
         (Spyro.field52_0xc8.x * Spyro.trueVelocity.x + Spyro.field52_0xc8.y * Spyro.trueVelocity.y
          < 0)) break;
    }
    else {
      SetSpyroState(ChargeAir);
    }
    if ((Spyro.field35_0x5c < 0xd) || ((inputStates[0].current & Square) != None)) {
      if ((Spyro.maybeHorizontalSpeedDecay < 0xc81) ||
         (Spyro.maybeHorizontalSpeedDecay <= Spyro.field49_0xbc << 1)) {
        if (Spyro.maybeSpeedway == 0) {
          return;
        }
LAB_800370dc:
        SetSpyroState(Supercharge);
        return;
      }
LAB_8003708c:
      SetSpyroState(Bonk);
      return;
    }
    goto LAB_8003739c;
  case Bonk:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((0x10 < Spyro.field35_0x5c) && ((Spyro.airTime != 0 || (0x16 < Spyro.field55_0xec)))) break;
    if (Spyro.field35_0x5c < 0x29) {
      return;
    }
    goto LAB_8003755c;
  case IdleLedge:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto LAB_800371d0;
    if ((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) {
      if ((inputStates[0].current & Square) != None) goto LAB_80037228;
      if (cameraState != Look) {
        if (DAT_8006839d == '\0') goto LAB_800373c4;
        if (Spyro.ledgeDetected != '\0') {
          return;
        }
        if (Spyro.field35_0x5c < 0x1f) {
          return;
        }
      }
      goto LAB_8003755c;
    }
    break;
  case Hurt:
    if (Spyro.field35_0x5c < 0x19) {
      return;
    }
    if (Spyro.health < 0) {
      SetSpyroState(DeathPirouette);
      return;
    }
    if (Spyro.field82_0x14c == 10) {
      SetSpyroState(WaterIdle);
      return;
    }
    if (Spyro.field82_0x14c - 0xbU < 2) {
      SetSpyroState(UnderwaterIdle);
      return;
    }
    if (Spyro.airTime == 0) goto LAB_8003755c;
    break;
  case Glide:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (Spyro.airTime != 0) {
      if ((inputStates[0].current & Square) != None) {
LAB_80037414:
        SetSpyroState(ChargeAir);
        return;
      }
      iVar3 = FUN_8002d328(4);
      if (iVar3 != 0) goto LAB_80037434;
      if ((Spyro.field51_0xc4 != 0) && (0x3ff < Spyro.field49_0xbc)) {
        if ((inputStates[0].pressed & Triangle) != None) {
LAB_80037488:
          SetSpyroState(Hover);
          return;
        }
        if (Spyro.powerFlightTime != 0) {
LAB_800374ac:
          SetSpyroState(Superfly);
          return;
        }
        if ((Spyro.physicsVelocity.z < 1) || (Spyro.field35_0x5c < 0x11)) {
          if (0xc7f < Spyro.maybeHorizontalSpeedDecay) {
            return;
          }
          if (Spyro.field35_0x5c < 0x11) {
            return;
          }
          SetSpyroState(GlideHoldBack);
          return;
        }
      }
      break;
    }
    if (0x16 < Spyro.field55_0xec) break;
    if (0 < Spyro.maybeHorizontalSpeed) goto LAB_800362ac;
joined_r0x800373e4:
    Spyro.airTime = 0;
    if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
LAB_800373ec:
      SetSpyroState(Stop);
      return;
    }
    goto LAB_8003755c;
  case Hover:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((((Spyro.airTime == 0) && (0xf < Spyro.field35_0x5c)) && (Spyro.field55_0xec < 0x17)) &&
       (Spyro.field53_0xd4.x * Spyro.trueVelocity.x + Spyro.field53_0xd4.y * Spyro.trueVelocity.y +
        Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)) {
      if (Spyro.maybeHorizontalSpeed != 0) {
LAB_800362ac:
        if (0xf00 < Spyro.maybeHorizontalSpeedDecay) {
LAB_8003739c:
          SetSpyroState(Run);
          return;
        }
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
LAB_800373b4:
          SetSpyroState(StartRun);
          return;
        }
LAB_800373c4:
        SetSpyroState(Walk);
        return;
      }
      goto joined_r0x800373e4;
    }
    if (((inputStates[0].pressed & Triangle) != None) && (globalProgressFlags.headbash.isPayed != 0)
       ) {
      SetSpyroState(HeadBash);
      return;
    }
    iVar3 = FUN_8002d328(4);
    if (iVar3 != 0) goto LAB_80037434;
    if (Spyro.physicsVelocity.z < -0x1900) break;
    bVar1 = Spyro.field35_0x5c < 0x79;
    goto LAB_8003757c;
  case ChargeAir:
    iVar3 = FUN_8002b228();
    if (iVar3 != 0) {
      return;
    }
    if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
      Spyro.field120_0x1be = '\x01';
    }
    if ((Spyro.airVelocityFlag != WATER_EXIT) &&
       (((0x16 < Spyro.field55_0xec &&
         (Spyro.trueVelocity.x * Spyro.field53_0xd4.x + Spyro.trueVelocity.y * Spyro.field53_0xd4.y
          < 0)) ||
        ((Spyro.airVelocityFlag != WATER_EXIT &&
         ((0xc80 < Spyro.maybeHorizontalSpeedDecay &&
          (Spyro.field49_0xbc << 1 < Spyro.maybeHorizontalSpeedDecay)))))))) goto LAB_8003708c;
    if ((Spyro.airTime == 0) && (4 < Spyro.field35_0x5c)) {
      if (Spyro.maybeSubstate != Supercharge) goto LAB_80037228;
      goto LAB_800370dc;
    }
    if ((Spyro.field120_0x1be == '\0') || (-1 < Spyro.trueVelocity.z)) {
      if ((Spyro.field82_0x14c < 9) || (Spyro.maybeSubstate != Charge)) {
        if (Spyro.maybeSubstate == Supercharge) {
          return;
        }
        if (Spyro.maybeSpeedway == 0) {
          return;
        }
        SetSpyroState(SuperchargeAscending);
        return;
      }
      if (Spyro.field120_0x1be == '\0') {
        SetSpyroState(Flop);
        Spyro.field35_0x5c = 0x1f;
        return;
      }
    }
    goto LAB_80037500;
  case StartRun:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto LAB_800371d0;
    if ((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) {
      if ((inputStates[0].current & Square) == None) {
        if ((Spyro.field49_0xbc < 0xf01) || (Spyro.field35_0x5c < 0x10)) {
          if (0x63f < Spyro.field49_0xbc) {
            return;
          }
          if (Spyro.field35_0x5c < 0x10) {
            return;
          }
          FUN_800506ac(0,*(undefined *)
                          (g_currLevelID * 4 + -0x7ff9fd4c + (Spyro.field72_0x114 >> 6)),0);
          Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
          SVar4 = Walk;
        }
        else {
          FUN_800506ac(0,*(undefined *)
                          (g_currLevelID * 4 + -0x7ff9fd4c + (Spyro.field72_0x114 >> 6)),0);
          Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
          SVar4 = Run;
        }
LAB_8003731c:
        SetSpyroState(SVar4);
        return;
      }
LAB_80037228:
      SetSpyroState(Charge);
      return;
    }
    break;
  case GlideHoldBack:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) break;
      if (0 < Spyro.maybeHorizontalSpeed) {
        if (0xf00 < Spyro.maybeHorizontalSpeedDecay) goto LAB_8003739c;
        if (Spyro.maybeHorizontalSpeedDecay < 0x781) goto LAB_800373c4;
        goto LAB_800373b4;
      }
      goto joined_r0x800373e4;
    }
    if ((inputStates[0].current & Square) != None) goto LAB_80037414;
    iVar3 = FUN_8002d328(4);
    if (iVar3 != 0) goto LAB_80037434;
    if ((Spyro.field51_0xc4 == 0) || (Spyro.field49_0xbc < 0x400)) break;
    if ((inputStates[0].pressed & Triangle) != None) goto LAB_80037488;
    if (Spyro.powerFlightTime != 0) goto LAB_800374ac;
    if ((0 < Spyro.physicsVelocity.z) && (0x10 < Spyro.field35_0x5c)) break;
    bVar1 = Spyro.maybeHorizontalSpeedDecay < 0xf01;
LAB_800374f8:
    if (bVar1) {
      return;
    }
LAB_80037500:
    SetSpyroState(Glide);
    return;
  case DeathPirouette:
    if (Spyro.field35_0x5c < 0x65) {
      return;
    }
    OnDeath();
    return;
  case HeadBash:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (Spyro.airVelocityFlag == PEAK) goto LAB_8003755c;
    bVar1 = Spyro.field35_0x5c < 0x3d;
LAB_8003757c:
    if (bVar1) {
      return;
    }
  }
  SetSpyroState(Flop);
  return;
}



void FUN_800375c8(int param_1)

{
  *(undefined *)(param_1 + 0x4c) = 0x10;
  *(undefined *)(param_1 + 0x47) = 4;
  *(undefined *)(param_1 + 0x40) = 0x30;
  *(undefined *)(param_1 + 0x4a) = 0xff;
  *(undefined *)(param_1 + 0x3f) = 1;
  *(undefined *)(param_1 + 0x41) = 1;
  *(undefined *)(param_1 + 0x43) = 0xff;
  *(undefined *)(param_1 + 0x4e) = 0x40;
  *(undefined *)(param_1 + 0x52) = 0xff;
  return;
}



void FUN_80037608(int param_1)

{
  Object *pOVar1;
  undefined uVar2;
  undefined uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined4 *puVar7;
  undefined4 uVar8;
  int iVar9;
  short *psVar10;
  undefined4 *puVar11;
  int iVar12;
  int **ppiVar13;
  int *piVar14;
  int iVar15;
  Vec3 VStack_88;
  int local_78 [2];
  Vec3 VStack_70;
  undefined **local_60;
  int **local_58;
  int local_50;
  int local_48;
  Vec3 *local_40;
  Vec3 *local_38;
  
  local_50 = -1;
  local_48 = -1;
  iVar15 = 0x7fffffff;
  if ((*(byte *)(param_1 + 0x53) & 0x7f) != 0) {
    local_58 = (int **)0x0;
    local_60 = &Object_800685f0.collisionShape;
    if (Object_800685f0.data != (undefined *)0x0) {
      local_40 = (Vec3 *)(param_1 + 0xc);
      local_38 = &VStack_70;
      ppiVar13 = (int **)Object_800685f0.data;
      do {
        if (*(ushort *)((int)ppiVar13 + 0x36) - 0x1cc < 10) {
          piVar14 = *ppiVar13;
          VectorSubtract(&VStack_88,(Vec3 *)(ppiVar13 + 3),local_40);
          iVar4 = VectorLength(&VStack_88,1);
          if ((iVar4 < 0x2800) &&
             (iVar5 = FUN_8001f618(local_40,(Vec3 *)(ppiVar13 + 3),0), iVar5 != 0)) {
            local_50 = -1;
            local_48 = -1;
            local_58 = ppiVar13;
            break;
          }
          if (*piVar14 < 1) {
            VectorSubtract(local_38,(Vec3 *)(param_1 + 0xc),(Vec3 *)(ppiVar13 + 3));
            iVar5 = VectorLength(local_38,1);
            if (iVar5 < iVar15) {
              local_50 = -1;
              local_48 = -1;
              iVar15 = iVar4;
              local_58 = ppiVar13;
            }
          }
          else {
            iVar4 = 0;
            if (0 < *piVar14) {
              do {
                psVar10 = (short *)piVar14[iVar4 + 1];
                iVar5 = FUN_80038acc(param_1 + 0xc,psVar10,local_78);
                if (iVar5 < 0x4000) {
                  iVar12 = local_78[0] + 1;
                  iVar9 = local_78[0];
                  if ((local_78[0] < *psVar10 + -1) && (iVar12 != -1)) {
                    uVar2 = Atan2(*(int *)(psVar10 + local_78[0] * 8 + 6) - *(int *)(param_1 + 0xc),
                                  *(int *)(psVar10 + local_78[0] * 8 + 8) - *(int *)(param_1 + 0x10)
                                  ,0);
                    iVar9 = piVar14[iVar4 + 1] + iVar12 * 0x10;
                    uVar3 = Atan2(*(int *)(iVar9 + 0xc) - *(int *)(param_1 + 0xc),
                                  *(int *)(iVar9 + 0x10) - *(int *)(param_1 + 0x10),0);
                    iVar6 = maybeAngularDistance256(uVar2,uVar3);
                    iVar9 = iVar12;
                    if (iVar6 < 0x40) goto LAB_800377d8;
                  }
                  local_78[0] = iVar9;
                }
LAB_800377d8:
                if (iVar5 < iVar15) {
                  local_48 = local_78[0];
                  iVar15 = iVar5;
                  local_58 = ppiVar13;
                  local_50 = iVar4;
                }
                iVar4 = iVar4 + 1;
              } while (iVar4 < *piVar14);
            }
          }
        }
        ppiVar13 = (int **)*local_60;
        local_60 = local_60 + 1;
      } while (ppiVar13 != (int **)0x0);
    }
    if (local_58 != (int **)0x0) {
      puVar7 = (undefined4 *)(*DAT_800670b4)(0x68,local_58);
      puVar11 = (undefined4 *)*puVar7;
      *(undefined *)((int)puVar7 + 0x4a) = 0xff;
      VectorCopy((Vec3 *)(puVar7 + 3),(Vec3 *)(param_1 + 0xc));
      *(short *)(puVar11 + 4) = (short)((int)puVar7[3] >> 4);
      *(short *)((int)puVar11 + 0x12) = (short)((int)puVar7[4] >> 4);
      iVar15 = rand();
      *(char *)((int)puVar11 + 0x16) = (char)iVar15;
      *(undefined2 *)((int)puVar11 + 0xe) = 0x8c;
      puVar7[3] = *(short *)(puVar11 + 4) * 0x10 +
                  (cosineLookupTable[*(byte *)((int)puVar11 + 0x16)] * 0x8c >> 0xc);
      puVar7[4] = *(short *)((int)puVar11 + 0x12) * 0x10 +
                  ((int)sineLookupTable[*(byte *)((int)puVar11 + 0x16)] *
                   (int)*(short *)((int)puVar11 + 0xe) >> 0xc);
      uVar8 = FUN_800502fc((Vec3 *)(puVar7 + 3),3,6,0x808080);
      pOVar1 = Objects;
      *puVar11 = uVar8;
      *(undefined2 *)((int)puVar11 + 6) = (undefined2)local_50;
      *(undefined2 *)(puVar11 + 3) = 0;
      *(undefined2 *)(puVar11 + 2) = (undefined2)local_48;
      *(short *)(puVar11 + 1) = (short)(((int)local_58 - (int)pOVar1) * -0x45d1745d >> 3);
    }
  }
  return;
}



int FUN_800379f4(Object *param_1,int *param_2,undefined4 param_3,int *param_4,int param_5,
                int param_6,undefined4 param_7,uint param_8)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = 0;
  if (param_4 == (int *)0x0) {
    param_8 = param_8 | 4;
  }
  if (*param_2 != 0) {
    iVar3 = FUN_80038388(param_1,param_3,*param_2,param_7,param_7,param_8 | 0x2000);
    if (iVar3 == 4) {
      iVar1 = VectorLength(&Vec3_8006ab88,0);
      iVar1 = Atan2(Vec3_8006ab88.z,iVar1,0);
      if ((iVar1 - 0x24U < 0xb9) && (0 < *param_2)) {
        iVar1 = *param_2 * 3;
        if (iVar1 < 0) {
          iVar1 = iVar1 + 3;
        }
        *param_2 = iVar1 >> 2;
      }
    }
    iVar1 = *param_2;
    *param_2 = iVar1 - param_5;
    if (iVar1 - param_5 < 0) {
      *param_2 = 0;
    }
  }
  if ((param_4 != (int *)0x0) && (*param_4 != 0xffff)) {
    iVar1 = FUN_80038238(param_1,600);
    (param_1->position).z = (param_1->position).z + *param_4;
    iVar2 = *param_4;
    *param_4 = iVar2 - param_6;
    if (iVar2 - param_6 < -0x104) {
      *param_4 = -0x104;
    }
    if ((*param_4 < 1) &&
       (iVar1 = iVar1 + *(short *)&param_1->field_0x38, (param_1->position).z < iVar1)) {
      (param_1->position).z = iVar1;
      iVar3 = 3;
    }
    FUN_80041a8c(param_1);
    FUN_80041ab8(param_1);
  }
  return iVar3;
}



undefined4 FUN_80037bb0(Vec3 *param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  Vec3 VStack_50;
  Vec3 VStack_40;
  Vec3 aVStack_30 [2];
  
  VectorSubtract(&VStack_50,&Spyro.position,param_1);
  iVar1 = VectorLength(&VStack_50,1);
  VectorScale(&VStack_50,iVar1,0x400);
  VectorCopy(&VStack_40,param_1);
  iVar3 = 0;
  if (0 < iVar1 >> 10) {
    do {
      VectorAdd(aVStack_30,&VStack_40,&VStack_50);
      iVar2 = FUN_8003ce94(&VStack_40,aVStack_30);
      if (iVar2 != 0) {
        return 0;
      }
      VectorCopy(&VStack_40,aVStack_30);
      iVar3 = iVar3 + 1;
    } while (iVar3 < iVar1 >> 10);
  }
  return 1;
}



void FUN_80037c80(void)

{
  return;
}



undefined4 FUN_80037c88(Object *param_1,int param_2,int param_3,int param_4)

{
  bool bVar1;
  byte bVar2;
  undefined4 uVar3;
  int iVar4;
  
  uVar3 = Atan2(Spyro.position.x - (param_1->position).x,Spyro.position.y - (param_1->position).y,0)
  ;
  iVar4 = maybeAngularDistance256(uVar3,(param_1->eulerRotation).yaw);
  if (deltaTime == 3) {
    param_2 = param_2 + (param_2 >> 1);
  }
  else {
    bVar1 = iVar4 < param_2;
    if (deltaTime != 4) goto LAB_80037d20;
    param_2 = param_2 << 1;
  }
  bVar1 = iVar4 < param_2;
LAB_80037d20:
  if (bVar1) {
    param_2 = iVar4;
  }
  iVar4 = maybeAngularDistance256(uVar3,(param_1->eulerRotation).yaw);
  if (param_3 < iVar4) {
    bVar2 = maybeAngleCorrection(uVar3,(param_1->eulerRotation).yaw,param_2,(param_2 >> 1) + 1);
    (param_1->eulerRotation).yaw = bVar2;
    uVar3 = 0;
  }
  else {
    if (param_4 != 0) {
      bVar2 = maybeAngleCorrection(uVar3,(param_1->eulerRotation).yaw,param_2,(param_2 >> 1) + 1);
      (param_1->eulerRotation).yaw = bVar2;
    }
    uVar3 = 1;
  }
  return uVar3;
}



bool FUN_80037da8(Object *param_1,undefined4 param_2,int param_3,int param_4,int param_5,int param_6
                 )

{
  byte bVar1;
  bool bVar2;
  int iVar3;
  
  iVar3 = maybeAngularDistance256(param_2,(param_1->eulerRotation).yaw);
  if (deltaTime == 3) {
    param_3 = param_3 + (param_3 >> 1);
  }
  else {
    bVar2 = iVar3 < param_3;
    if (deltaTime != 4) goto LAB_80037e20;
    param_3 = param_3 << 1;
  }
  bVar2 = iVar3 < param_3;
LAB_80037e20:
  if (bVar2) {
    param_3 = iVar3;
  }
  if (param_4 < iVar3) {
    if (param_6 == 0) {
      bVar1 = maybeAngleCorrection(param_2,(param_1->eulerRotation).yaw,param_3,(param_3 >> 1) + 1);
    }
    else {
      bVar1 = (param_1->eulerRotation).yaw + (char)param_3 * (char)param_6;
    }
    (param_1->eulerRotation).yaw = bVar1;
    iVar3 = maybeAngularDistance256(param_2,(param_1->eulerRotation).yaw);
    bVar2 = iVar3 <= param_4;
  }
  else {
    if ((param_5 != 0) && (2 < iVar3)) {
      if (param_6 == 0) {
        bVar1 = maybeAngleCorrection
                          (param_2,(param_1->eulerRotation).yaw,param_3,(param_3 >> 1) + 1);
      }
      else {
        bVar1 = (param_1->eulerRotation).yaw + (char)param_3 * (char)param_6;
      }
      (param_1->eulerRotation).yaw = bVar1;
    }
    bVar2 = true;
  }
  return bVar2;
}



undefined4 AdvanceTimer(int *param_1,int param_2)

{
  int intTimeRemaining;
  byte byteTimeRemaining;
  short shortTimeRemaining;
  
                    // Returns 0 if still running, returns 2 if finished after this advance, returns
                    // 1 never.
  if (param_2 == 4) {
    intTimeRemaining = *param_1;
    if (deltaTime < intTimeRemaining) {
      *param_1 = intTimeRemaining - deltaTime;
      return 0;
    }
    if (intTimeRemaining != 0) {
      *param_1 = 0;
      return 2;
    }
  }
  else if (param_2 == 2) {
    shortTimeRemaining = *(short *)param_1;
    if (deltaTime < shortTimeRemaining) {
      *(short *)param_1 = shortTimeRemaining - (short)deltaTime;
      return 0;
    }
    if (shortTimeRemaining != 0) {
      *(undefined2 *)param_1 = 0;
      return 2;
    }
  }
  else {
    if (param_2 != 1) {
      return 0;
    }
    byteTimeRemaining = *(byte *)param_1;
    if (deltaTime < (int)(uint)byteTimeRemaining) {
      *(byte *)param_1 = byteTimeRemaining - (char)deltaTime;
      return 0;
    }
    if (byteTimeRemaining != 0) {
      *(undefined *)param_1 = 0;
      return 2;
    }
  }
  return 1;
}



int FUN_80037fcc(Object *param_1,short *param_2,int param_3,undefined4 param_4,undefined4 param_5,
                int param_6,int param_7,uint param_8)

{
  bool bVar1;
  byte bVar2;
  short sVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  
  iVar6 = 0;
  if ((param_8 & 0x100) == 0) {
    bVar1 = true;
  }
  else {
    iVar5 = (param_1->position).z - *(int *)(param_2 + param_2[1] * 8 + 10);
    if (iVar5 < 0) {
      iVar5 = -iVar5;
    }
    bVar1 = iVar5 < param_3;
  }
  iVar5 = Vec2OctagonalDistanceApproximation
                    ((Vec2 *)&param_1->position,(Vec2 *)(param_2 + param_2[1] * 8 + 6));
  if ((iVar5 < param_3) && (bVar1)) {
    iVar5 = (int)*param_2;
    iVar6 = (int)param_2[1] + (int)param_2[5] + iVar5;
    if (iVar5 == 0) {
      trap(0x1c00);
    }
    if ((iVar5 == -1) && (iVar6 == -0x80000000)) {
      trap(0x1800);
    }
    sVar3 = (short)(iVar6 % iVar5);
    iVar6 = sVar3 + 0x8000;
    param_2[1] = sVar3;
  }
  uVar4 = Atan2(*(int *)(param_2 + param_2[1] * 8 + 6) - (param_1->position).x,
                *(int *)(param_2 + param_2[1] * 8 + 8) - (param_1->position).y,0);
  iVar5 = maybeAngularDistance256(uVar4,(param_1->eulerRotation).yaw);
  if (param_7 < iVar5) {
    if (deltaTime == 3) {
      param_6 = param_6 + (param_6 >> 1);
    }
    else if (deltaTime == 4) {
      param_6 = param_6 << 1;
    }
    if (iVar5 < param_6) {
      param_6 = iVar5;
    }
    bVar2 = maybeAngleCorrection(uVar4,(param_1->eulerRotation).yaw,param_6,(param_6 >> 1) + 1);
    (param_1->eulerRotation).yaw = bVar2;
  }
  else {
    FUN_80037da8(param_1,uVar4,param_6,param_7,1,0);
    FUN_80038290(param_1,param_4,param_5,0,param_8);
  }
  return iVar6;
}



void FUN_800381ec(Object *param_1)

{
  (param_1->position).z = (param_1->position).z + 0x5dc;
  RaycastDown(&param_1->position,0x1000);
  (param_1->position).z = (param_1->position).z + -0x5dc;
  return;
}



void FUN_80038238(Object *param_1,int param_2)

{
  (param_1->position).z = (param_1->position).z + param_2;
  RaycastDown(&param_1->position,0x1000);
  (param_1->position).z = (param_1->position).z - param_2;
  return;
}



void FUN_80038290(Object *param_1,int param_2,undefined4 param_3,undefined4 param_4,
                 undefined4 param_5)

{
  Vec3 local_28;
  
  if (deltaTime == 3) {
    param_2 = param_2 + (param_2 >> 1);
  }
  else if (deltaTime == 4) {
    param_2 = param_2 << 1;
  }
  local_28.x = cosineLookupTable[(param_1->eulerRotation).yaw] * param_2 >> 0xc;
  local_28.z = 0;
  local_28.y = sineLookupTable[(param_1->eulerRotation).yaw] * param_2 >> 0xc;
  VectorAdd(&local_28,&local_28,&param_1->position);
  FUN_8003bb14(param_1,&local_28,param_4,param_3,param_5);
  return;
}



void FUN_80038388(Object *param_1,int param_2,int param_3,undefined4 param_4,undefined4 param_5,
                 uint param_6)

{
  Vec3 local_20;
  
  if (deltaTime == 3) {
    param_3 = param_3 + (param_3 >> 1);
  }
  else if (deltaTime == 4) {
    param_3 = param_3 << 1;
  }
  local_20.x = cosineLookupTable[param_2] * param_3 >> 0xc;
  local_20.z = 0;
  local_20.y = sineLookupTable[param_2] * param_3 >> 0xc;
  VectorAdd(&local_20,&local_20,&param_1->position);
  if ((param_6 & 0x2000) != 0) {
    if (local_20.x < 0x400) {
      local_20.x = 0x400;
    }
    if (local_20.y < 0x400) {
      local_20.y = 0x400;
    }
    if (local_20.z < 0x400) {
      local_20.z = 0x400;
    }
  }
  FUN_8003bb14(param_1,&local_20,param_5,param_4,param_6);
  return;
}



undefined4 FUN_800384b4(undefined4 param_1,undefined4 param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar1 = maybeNegativeAngularDistance256();
  iVar2 = iVar1;
  if (iVar1 < 0) {
    iVar2 = -iVar1;
  }
  if (param_3 < iVar2) {
    if (iVar1 < 0) {
      param_1 = AddChar(param_2,param_3);
    }
    else {
      param_1 = AddChar(param_2,-param_3);
    }
  }
  return param_1;
}



void FUN_8003853c(undefined4 param_1,undefined4 param_2,uint param_3)

{
  int iVar1;
  
  iVar1 = maybeNegativeAngularDistance256(param_2,param_1);
  AddChar(param_2,(int)(iVar1 * (param_3 & 0xff)) >> 8);
  return;
}



void FUN_80038594(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined param_4)

{
  undefined4 uVar1;
  
  uVar1 = FUN_800384b4();
  FUN_8003853c(uVar1,param_2,param_4);
  return;
}



uint maybeNegativeAngularDistance256(int param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = param_2 - param_1 & 0xff;
  if (0x80 < uVar1) {
    uVar1 = uVar1 - 0x100;
  }
  return uVar1;
}



char AddChar(char param_1,char param_2)

{
  return param_1 + param_2;
}



void FUN_80038604(char *param_1)

{
  char cVar1;
  undefined4 uVar2;
  
  uVar2 = maybeSquareRoot(Vec3_8006ab88.x * Vec3_8006ab88.x + Vec3_8006ab88.z * Vec3_8006ab88.z);
  cVar1 = Atan2(uVar2,Vec3_8006ab88.y,0);
  *param_1 = -cVar1;
  cVar1 = Atan2(Vec3_8006ab88.z,Vec3_8006ab88.x,0);
  param_1[1] = -cVar1;
  return;
}



int FUN_8003869c(short *param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  iVar5 = 0;
  iVar2 = 0;
  iVar4 = 0;
  if (0 < *param_1) {
    iVar3 = 0xc;
    do {
      iVar1 = Vec2OctagonalDistanceApproximation((Vec2 *)&Spyro,(Vec2 *)((int)param_1 + iVar3));
      if (iVar5 < iVar1) {
        iVar4 = iVar2;
        iVar5 = iVar1;
      }
      iVar2 = iVar2 + 1;
      iVar3 = iVar3 + 0x10;
    } while (iVar2 < *param_1);
  }
  return iVar4;
}



bool FUN_8003873c(Vec3 *param_1,Vec3 *param_2)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  Vec3 local_20;
  
  iVar3 = param_2[1].z;
  VectorSubtract(&local_20,param_1,param_2);
  iVar2 = (local_20.x * cosineLookupTable[iVar3] >> 0xc) -
          (local_20.y * sineLookupTable[iVar3] >> 0xc);
  if (iVar2 < 0) {
    iVar2 = -iVar2;
  }
  iVar3 = (local_20.x * sineLookupTable[iVar3] >> 0xc) +
          (local_20.y * cosineLookupTable[iVar3] >> 0xc);
  if (iVar3 < 0) {
    iVar3 = -iVar3;
  }
  bVar1 = false;
  if (iVar2 < param_2[1].x) {
    bVar1 = iVar3 < param_2[1].y;
  }
  return bVar1;
}



void FUN_80038844(Vec3 *param_1,int param_2,int param_3,Vec3 *param_4)

{
  short sVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  iVar3 = param_4[1].z;
  iVar5 = param_2 * param_4[1].x >> 7;
  iVar4 = param_3 * param_4[1].y >> 7;
  param_1->x = iVar5 * cosineLookupTable[iVar3] + iVar4 * sineLookupTable[iVar3] >> 0xc;
  sVar1 = sineLookupTable[iVar3];
  sVar2 = cosineLookupTable[iVar3];
  param_1->z = 0;
  param_1->y = iVar4 * sVar2 - iVar5 * sVar1 >> 0xc;
  VectorAdd(param_1,param_1,param_4);
  return;
}



int randomRangeGen(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  
  iVar1 = rand();
  iVar2 = (param_2 - param_1) + 1;
  if (iVar2 == 0) {
    trap(0x1c00);
  }
  if ((iVar2 == -1) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  return iVar1 % iVar2 + param_1;
}



int RandomRangeGen(int param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  
  uVar1 = rand();
  iVar2 = (param_2 - param_1) + 1;
  if (iVar2 == 0) {
    trap(0x1c00);
  }
  if ((iVar2 == -1) && (uVar1 == 0x80000000)) {
    trap(0x1800);
  }
  param_1 = (int)uVar1 % iVar2 + param_1;
  if ((uVar1 & 1) == 0) {
    param_1 = -param_1;
  }
  return param_1;
}



int FUN_80038a0c(Vec2 *param_1,short *param_2,int *param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  iVar5 = 0xffffff;
  iVar2 = 0;
  iVar4 = 0;
  if (0 < *param_2) {
    iVar3 = 0xc;
    do {
      iVar1 = Vec2OctagonalDistanceApproximation(param_1,(Vec2 *)((int)param_2 + iVar3));
      if (iVar1 < iVar5) {
        iVar4 = iVar2;
        iVar5 = iVar1;
      }
      iVar2 = iVar2 + 1;
      iVar3 = iVar3 + 0x10;
    } while (iVar2 < *param_2);
  }
  if (param_3 != (int *)0x0) {
    *param_3 = iVar4;
  }
  return iVar5;
}



int FUN_80038acc(Vec3 *param_1,short *param_2,int *param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  Vec3 aVStack_38 [2];
  
  iVar5 = 0xffffff;
  iVar2 = 0;
  iVar4 = 0;
  if (0 < *param_2) {
    iVar3 = 0xc;
    do {
      VectorSubtract(aVStack_38,(Vec3 *)((int)param_2 + iVar3),param_1);
      iVar1 = VectorLength(aVStack_38,1);
      if (iVar1 < iVar5) {
        iVar4 = iVar2;
        iVar5 = iVar1;
      }
      iVar2 = iVar2 + 1;
      iVar3 = iVar3 + 0x10;
    } while (iVar2 < *param_2);
  }
  if (param_3 != (int *)0x0) {
    *param_3 = iVar4;
  }
  return iVar5;
}



int FUN_80038b9c(int *param_1,int *param_2,int *param_3,int *param_4)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar1 = *param_2 * param_4[1] - param_2[1] * *param_4 >> 6;
  iVar2 = ((param_1[1] - param_3[1]) * *param_4 - (*param_1 - *param_3) * param_4[1]) * 0x40;
  if (iVar1 == 0) {
    iVar3 = 0x7fffffff;
  }
  else {
    iVar3 = iVar2 / iVar1;
    if (iVar1 == 0) {
      trap(0x1c00);
    }
    if ((iVar1 == -1) && (iVar2 == -0x80000000)) {
      trap(0x1800);
    }
  }
  return iVar3;
}



void FUN_80038c44(int param_1,short *param_2)

{
  short sVar1;
  short sVar2;
  int iVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int iVar6;
  int iVar7;
  
  iVar7 = (int)*param_2;
  iVar3 = (int)param_2[1] + iVar7 + 1;
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && (iVar3 == -0x80000000)) {
    trap(0x1800);
  }
  iVar6 = (int)param_2[1] + iVar7 + -1;
  if (iVar7 == 0) {
    trap(0x1c00);
  }
  if ((iVar7 == -1) && (iVar6 == -0x80000000)) {
    trap(0x1800);
  }
  uVar4 = Atan2(Spyro.position.x - *(int *)(param_1 + 0xc),
                Spyro.position.y - *(int *)(param_1 + 0x10),0);
  uVar5 = Atan2(*(int *)(param_2 + (iVar3 % iVar7) * 8 + 6) - *(int *)(param_1 + 0xc),
                *(int *)((int)(param_2 + (iVar3 % iVar7) * 8 + 6) + 4) - *(int *)(param_1 + 0x10),0)
  ;
  iVar3 = maybeAngularDistance256(uVar4,uVar5);
  uVar5 = Atan2(*(int *)(param_2 + (iVar6 % iVar7) * 8 + 6) - *(int *)(param_1 + 0xc),
                *(int *)((int)(param_2 + (iVar6 % iVar7) * 8 + 6) + 4) - *(int *)(param_1 + 0x10),0)
  ;
  iVar7 = maybeAngularDistance256(uVar4,uVar5);
  sVar1 = param_2[5];
  sVar2 = 1;
  if (iVar3 <= iVar7) {
    sVar2 = -1;
  }
  param_2[5] = sVar2;
  if ((int)sVar1 != (int)param_2[5]) {
    iVar7 = (int)*param_2;
    iVar3 = (int)param_2[1] + (int)param_2[5] + iVar7;
    if (iVar7 == 0) {
      trap(0x1c00);
    }
    if ((iVar7 == -1) && (iVar3 == -0x80000000)) {
      trap(0x1800);
    }
    param_2[1] = (short)(iVar3 % iVar7);
  }
  return;
}



uint FUN_80038e08(int param_1)

{
  int iVar1;
  
  iVar1 = (param_1 - (int)Objects) * -0x45d1745d;
  return *(int *)(&checkpointStorage.unkBlock32 + (iVar1 >> 8) * 4) >> (iVar1 >> 3 & 0x1fU) & 1;
}



int FUN_80038e6c(int *param_1,int *param_2,int param_3,int param_4,int *param_5)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int local_20;
  int local_1c;
  
  local_20 = *param_1 - *param_2;
  local_1c = param_1[1] - param_2[1];
  iVar1 = VectorLength((Vec3 *)&local_20,0);
  iVar3 = iVar1 / param_3;
  if (param_3 == 0) {
    trap(0x1c00);
  }
  if ((param_3 == -1) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  if (param_5 != (int *)0x0) {
    *param_5 = iVar3;
  }
  if (iVar3 == 0) {
    iVar2 = 0;
  }
  else {
    iVar1 = -((param_1[2] - param_2[2]) + (param_4 * iVar3 * iVar3 >> 1));
    iVar2 = iVar1 / iVar3;
    if (iVar3 == 0) {
      trap(0x1c00);
    }
    if ((iVar3 == -1) && (iVar1 == -0x80000000)) {
      trap(0x1800);
    }
  }
  return iVar2;
}



void FUN_80038f90(int param_1,int param_2)

{
  int iVar1;
  short extraout_var;
  short extraout_var_00;
  int *piVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  short local_24;
  
  iVar4 = 1;
  iVar6 = *(int *)(param_2 + 0xc);
  iVar5 = *(int *)(param_2 + 0x10);
  cosineLookup(VectorShort_80067ec8.Z + -0x400);
  sineLookup(VectorShort_80067ec8.Z + -0x400);
  local_24 = 0x80;
  if (param_1 != 0) {
    do {
      iVar1 = param_1 / 10;
      piVar2 = (int *)(*DAT_800670b4)(0x104,0);
      *(char *)(piVar2 + 0xf) = (char)(param_1 % 10);
      piVar2[3] = iVar6;
      piVar2[4] = iVar5;
      iVar3 = *(int *)(param_2 + 0x14);
      iVar7 = (param_1 % 10) * iVar4;
      *(undefined *)(piVar2 + 0x11) = 0;
      *(undefined *)((int)piVar2 + 0x45) = 0;
      piVar2[5] = iVar3;
      iVar3 = *piVar2;
      *(char *)((int)piVar2 + 0x46) = (char)((ushort)VectorShort_80067ec8.Z >> 4);
      *(undefined4 *)(iVar3 + 4) = 0x60;
      *(int *)(iVar3 + 0xc) = (int)extraout_var;
      *(int *)(iVar3 + 0x10) = (int)extraout_var_00;
      *(int *)(iVar3 + 0x14) = (int)local_24;
      iVar4 = iVar4 * 10;
      *(int *)(iVar3 + 8) = iVar7;
      local_24 = local_24 + -0x10;
      iVar6 = iVar6 - ((int)sineLookupTable[*(byte *)((int)piVar2 + 0x46)] >> 4);
      iVar5 = iVar5 + ((int)cosineLookupTable[*(byte *)((int)piVar2 + 0x46)] >> 4);
      param_1 = iVar1;
    } while (iVar1 != 0);
  }
  return;
}



int FUN_8003912c(int param_1,int param_2,int param_3)

{
  int iVar1;
  
  if ((param_2 != 0) || (iVar1 = 0, (*(uint *)(param_1 + 0x18) & 0x10000) != 0)) {
    if ((*(uint *)(param_1 + 0x18) & 0x10000) == 0) {
      iVar1 = param_2 + -1;
      if (0x20 < iVar1) {
        iVar1 = param_2 + -2;
      }
    }
    else {
      iVar1 = param_2 + 0x10;
    }
    if (0x3f < iVar1) {
      iVar1 = 0x3f;
    }
    if (param_3 == 0) {
      *(int *)(param_1 + 0x54) = (iVar1 >> 2) * 0x1000000 + 0x30000080;
    }
    else {
      *(uint *)(param_1 + 0x54) =
           (*(uint *)(param_1 + 0x54) & 0xf0000000) + iVar1 * -0x100fe + 0xa605050;
    }
  }
  return iVar1;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_800391f8(void)

{
  FUN_80049efc();
  return;
}



int FUN_80039218(int param_1)

{
  ushort uVar1;
  ushort *puVar2;
  int iVar3;
  
  iVar3 = 0;
  if (param_1 < DAT_80066f4c) {
    puVar2 = *(ushort **)(param_1 * 4 + DAT_800670e0);
    do {
      uVar1 = *puVar2;
      if (Objects[uVar1 & 0x7fff].state < 0x80) {
        iVar3 = iVar3 + 1;
      }
      puVar2 = puVar2 + 1;
    } while (-1 < (int)((uint)uVar1 << 0x10));
  }
  else {
    iVar3 = 0;
  }
  return iVar3;
}



void FUN_800392a8(int param_1,byte param_2)

{
  ushort uVar1;
  ushort *puVar2;
  
  if (param_1 < DAT_80066f4c) {
    puVar2 = *(ushort **)(param_1 * 4 + DAT_800670e0);
    do {
      if (Objects[*puVar2 & 0x7fff].state < 0x80) {
        Objects[*puVar2 & 0x7fff].state = param_2;
      }
      uVar1 = *puVar2;
      puVar2 = puVar2 + 1;
    } while (-1 < (short)uVar1);
  }
  return;
}



Vec3 ** FUN_80039334(Object *param_1,uint param_2,Vec3 *param_3,Vec3 *param_4)

{
  byte bVar1;
  bool bVar2;
  Vec3 **ppVVar3;
  uint uVar4;
  int iVar5;
  Vec3 *pVVar6;
  int iVar7;
  Vec3 *to;
  Vec3 local_40;
  Vec3 VStack_30;
  
  if (param_1->heldGemValue == 0xff) {
    return (Vec3 **)0x0;
  }
  ppVVar3 = (Vec3 **)(*DAT_800670b4)(1,param_1);
  *(undefined *)(ppVVar3 + 0x12) = 2;
  to = *ppVVar3;
  bVar1 = (&DAT_8006440c)[param_1->heldGemValue];
  *(byte *)((int)ppVVar3 + 0x49) = bVar1;
  *(undefined *)(ppVVar3 + 0xf) = (&DAT_80064430)[bVar1];
  *(undefined *)(ppVVar3 + 0x15) = (&DAT_80064438)[*(byte *)((int)ppVVar3 + 0x49)];
  *(undefined *)((int)&to[1].z + 1) = 0xff;
  if ((param_2 & 4) != 0) {
    *(undefined *)((int)&to[1].y + 3) = 1;
  }
  if ((param_2 & 8) != 0) {
    *(undefined *)((int)&to[1].y + 3) = 3;
  }
  if ((param_2 & 2) == 0) {
    *(undefined *)&to[1].z = 3;
  }
  else {
    *(undefined *)&to[1].z = 0;
  }
  if (param_3 == (Vec3 *)0x0) {
    VectorCopy((Vec3 *)(ppVVar3 + 3),&param_1->position);
    ppVVar3[5] = (Vec3 *)&ppVVar3[5][0x15].y;
  }
  else {
    VectorCopy((Vec3 *)(ppVVar3 + 3),param_3);
  }
  if (param_4 == (Vec3 *)0x0) {
    if (((param_2 & 1) == 0) &&
       ((Spyro.maybeSubstate == Charge || (Spyro.maybeSubstate == UnderwaterCharge)))) {
      VectorSubtract(&VStack_30,(Vec3 *)(ppVVar3 + 3),&Spyro.position);
      iVar5 = VectorLength(&VStack_30,1);
      if (iVar5 < 0xa00) {
        VectorCopy(to,(Vec3 *)(ppVVar3 + 3));
        iVar5 = rand();
        *(byte *)&to[1].y = (byte)iVar5 & 0xe;
        iVar5 = rand();
        *(byte *)((int)&to[1].y + 1) = (byte)iVar5 & 0xe;
        iVar5 = rand();
        *(byte *)((int)&to[1].y + 2) = (byte)iVar5 & 0xe;
        *(undefined *)(ppVVar3 + 0x12) = 3;
        *(undefined *)((int)ppVVar3 + 0x4a) = 0xff;
        return ppVVar3;
      }
    }
    iVar5 = 0;
    do {
      VectorCopy(&local_40,&param_1->position);
      uVar4 = rand();
      local_40.x = local_40.x + -0x200 + (uVar4 & 0x3ff);
      uVar4 = rand();
      local_40.y = local_40.y + -0x200 + (uVar4 & 0x3ff);
      local_40.z = local_40.z + 0x400;
      local_40.z = RaycastDown(&local_40,0x800);
      if (0 < local_40.z) {
        iVar7 = VectorLength(&Vec3_8006ab88,0);
        iVar7 = Atan2(Vec3_8006ab88.z,iVar7,0);
        if ((iVar7 < 0x18) && (iVar7 = FUN_8004055c(&local_40,200,0,0,0,param_1), iVar7 == 0))
        break;
      }
      iVar5 = iVar5 + 1;
    } while (iVar5 < 4);
    if (iVar5 != 4) goto LAB_800395f0;
    param_4 = &param_1->position;
  }
  VectorCopy(&local_40,param_4);
LAB_800395f0:
  iVar5 = 0x8c;
  iVar7 = 0;
  pVVar6 = ppVVar3[5];
  do {
    pVVar6 = (Vec3 *)((int)&pVVar6->x + iVar5);
    while( true ) {
      iVar5 = iVar5 + -10;
      iVar7 = iVar7 + 1;
      if (0 < iVar5) break;
      bVar2 = (int)pVVar6 <= local_40.z;
      pVVar6 = (Vec3 *)((int)pVVar6 + iVar5);
      if (bVar2) {
        VectorSubtract(&local_40,&local_40,(Vec3 *)(ppVVar3 + 3));
        VectorDivByN(&local_40,&local_40,iVar7);
        local_40.z = 0x8c;
        VectorCopy(to,&local_40);
        return ppVVar3;
      }
    }
  } while( true );
}



void OnGemCollected(Object *param_1)

{
  uint uVar1;
  
  uVar1 = (uint)gemValues[param_1->gemValueId];
  worldGemsCollectedValue[g_currLevelID] = worldGemsCollectedValue[g_currLevelID] + uVar1;
  gemsCollectedNetValue = gemsCollectedNetValue + uVar1;
  (&DAT_80068218)[gemCollectedPhysicalCount & 0x1f] = param_1->gemValueId;
  gemCollectedPhysicalCount = gemCollectedPhysicalCount + 1;
  if ((worldGemsCollectedValue[g_currLevelID] == (uint)(byte)maxGemsOfWorlds[g_currLevelID] * 100)
     && ((orbsCollectedFlags[g_currLevelID] != (&orbsOfWorldsFlags)[g_currLevelID] ||
         (worldsCompleted[g_currLevelID] == false)))) {
    allGemsCollectedTimer = 0x78;
  }
  if (0x2ff < (param_1->position).z) {
    FUN_80038f90(uVar1,param_1);
  }
  uVar1 = (uint)param_1->subType;
  if (uVar1 == 0xff) {
    uVar1 = ((int)param_1 - (int)Objects) * -0x45d1745d >> 3;
  }
  else {
    param_1 = Objects + uVar1;
  }
  FUN_8004c3d4(param_1);
  collectedFlags[g_currLevelID][(int)uVar1 >> 5] =
       collectedFlags[g_currLevelID][(int)uVar1 >> 5] | 1 << (uVar1 & 0x1f);
  return;
}



void FUN_8003986c(Object *param_1)

{
  int iVar1;
  
  iVar1 = FUN_800381ec(param_1);
  (param_1->position).z = iVar1 + *(short *)&param_1->field_0x38;
  FUN_80041a8c(param_1);
  FUN_80041ab8(param_1);
  return;
}



int FUN_800398b0(int param_1,int param_2)

{
  int iVar1;
  Vec3 local_18;
  
  local_18.x = 0x1400 - param_1 % 0x2800;
  local_18.y = 0x1400 - param_2 % 0x2800;
  iVar1 = VectorLength(&local_18,0);
  return ((int)cosineLookupTable[(0xff - (iVar1 * 0xff) / 0x1c49) + (clock * 3) / 2 & 0xff] / 200) *
         0x10000 >> 0xe;
}



void FUN_800399c0(Object *param_1,Vec2 *param_2,int param_3)

{
  byte bVar1;
  short sVar2;
  char cVar3;
  undefined uVar4;
  undefined4 uVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  int iVar9;
  uint uVar10;
  Vec3 local_38 [2];
  
  bVar1 = *(byte *)((int)&param_2[1].y + 2);
  uVar8 = (uint)*(byte *)&param_2[2].x;
  if (bVar1 == 1) {
    FUN_80037da8(param_1,(uint)*(byte *)((int)&param_2[2].x + 3),
                 (uint)*(byte *)((int)&param_2[2].x + 1),0,1,0);
    iVar6 = AdvanceTimer((undefined *)((int)&param_2[1].y + 3),1);
    if (iVar6 != 0) {
      *(undefined *)((int)&param_2[1].y + 2) = 0;
    }
LAB_80039b00:
    if (param_3 == 0) {
      sVar2 = *(short *)&param_2[1].y;
      uVar5 = 0x22;
    }
    else {
      sVar2 = *(short *)&param_2[1].y;
      uVar5 = 0x57;
    }
    uVar8 = FUN_80038290(param_1,uVar8,(int)sVar2,(int)sVar2,uVar5);
    if ((uVar8 & 1) != 0) {
      uVar4 = Atan2((param_1->position).x - *(int *)(DAT_8006aba0 + 0xc),
                    (param_1->position).y - *(int *)(DAT_8006aba0 + 0x10),0);
      *(undefined *)((int)&param_2[2].x + 3) = uVar4;
      *(undefined *)((int)&param_2[1].y + 2) = 3;
      return;
    }
    if (param_3 == 0) {
LAB_80039cd8:
      if (*(char *)((int)&param_2[1].y + 2) == '\x03') {
        return;
      }
      iVar6 = Vec2OctagonalDistanceApproximation((Vec2 *)&param_1->position,param_2);
      if ((int)((uint)*(byte *)((int)&param_2[2].x + 2) << 4) < iVar6) {
        uVar4 = Atan2(param_2->x - (param_1->position).x,param_2->y - (param_1->position).y,0);
        *(undefined *)((int)&param_2[2].x + 3) = uVar4;
        goto LAB_80039d34;
      }
      iVar6 = Vec2OctagonalDistanceApproximation((Vec2 *)&param_1->position,(Vec2 *)&Spyro);
      if (0xfff < iVar6) {
        return;
      }
      iVar9 = Atan2((param_1->position).x - Spyro.position.x,
                    (param_1->position).y - Spyro.position.y,0);
      cVar3 = (char)((int)((uint)*(byte *)((int)&param_2[2].x + 3) * iVar6 +
                          iVar9 * (0x1000 - iVar6)) >> 0xc);
    }
    else {
      iVar9 = (uint)*(byte *)&param_2[2].x + *(short *)&param_2[1].y * 2;
      local_38[0].x = cosineLookupTable[(param_1->eulerRotation).yaw] * iVar9 >> 0xc;
      local_38[0].y = sineLookupTable[(param_1->eulerRotation).yaw] * iVar9 >> 0xc;
      local_38[0].z = 0x80 - *(short *)&param_1->field_0x38;
      VectorAdd(local_38,local_38,&param_1->position);
      iVar6 = RaycastDown(local_38,0x100);
      if ((iVar6 != 0) && ((uVar8 & 2) == 0)) goto LAB_80039cd8;
      iVar6 = 0x20;
      do {
        uVar8 = (uint)(param_1->eulerRotation).yaw + iVar6;
        uVar10 = uVar8 & 0xff;
        local_38[0].x = cosineLookupTable[uVar10] * iVar9 >> 0xc;
        local_38[0].y = sineLookupTable[uVar10] * iVar9 >> 0xc;
        local_38[0].z = 0x80 - *(short *)&param_1->field_0x38;
        VectorAdd(local_38,local_38,&param_1->position);
        iVar7 = RaycastDown(local_38,0x100);
        iVar6 = iVar6 + 0x40;
        if (iVar7 != 0) {
          *(char *)((int)&param_2[2].x + 3) = (char)uVar8;
          *(undefined *)((int)&param_2[1].y + 2) = 2;
          break;
        }
      } while (iVar6 < 0x100);
      bVar1 = (param_1->eulerRotation).yaw;
      *(undefined *)((int)&param_2[1].y + 2) = 2;
      cVar3 = bVar1 + 0x80;
    }
    *(char *)((int)&param_2[2].x + 3) = cVar3;
  }
  else {
    if (bVar1 < 2) {
      if (bVar1 == 0) {
        cVar3 = randomRangeGen(0xffffffe0,0x20);
        *(char *)((int)&param_2[2].x + 3) = *(char *)((int)&param_2[2].x + 3) + cVar3;
        uVar4 = randomRangeGen(0x1e,0x5a);
        *(undefined *)((int)&param_2[1].y + 3) = uVar4;
        *(undefined *)((int)&param_2[1].y + 2) = 1;
      }
      goto LAB_80039b00;
    }
    if (bVar1 != 2) {
      if (bVar1 == 3) {
        iVar6 = FUN_80037da8(param_1,(uint)*(byte *)((int)&param_2[2].x + 3),
                             (uint)*(byte *)((int)&param_2[2].x + 1),8,1,0);
        if (iVar6 != 0) {
          uVar4 = randomRangeGen(0x1e,0x5a);
          *(undefined *)((int)&param_2[1].y + 3) = uVar4;
          *(undefined *)((int)&param_2[1].y + 2) = 1;
        }
        uVar8 = (int)uVar8 >> 1;
      }
      goto LAB_80039b00;
    }
    iVar6 = FUN_80037da8(param_1,(uint)*(byte *)((int)&param_2[2].x + 3),
                         (uint)*(byte *)((int)&param_2[2].x + 1),8,1,0);
    if (iVar6 == 0) {
      return;
    }
LAB_80039d34:
    uVar4 = randomRangeGen(0x1e,0x5a);
    *(undefined *)((int)&param_2[1].y + 3) = uVar4;
    *(undefined *)((int)&param_2[1].y + 2) = 1;
  }
  return;
}



int FUN_80039de4(Object *param_1,int *param_2,int param_3,undefined4 param_4,int param_5,int param_6
                ,undefined4 param_7,undefined4 param_8,int param_9,int param_10,undefined4 param_11,
                undefined4 param_12,uint param_13)

{
  char cVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  int iVar6;
  byte bVar7;
  
  cVar1 = Atan2((param_1->position).x - *param_2,(param_1->position).y - param_2[1],0);
  iVar2 = maybeNegativeAngularDistance256(param_4,cVar1);
  iVar3 = iVar2;
  if (iVar2 < 0) {
    iVar3 = -iVar2;
  }
  if (iVar3 < param_5) {
    return iVar3;
  }
  if ((param_9 != 0xff) && (iVar3 = maybeAngularDistance256(cVar1,param_9), iVar3 < 5)) {
    iVar3 = maybeNegativeAngularDistance256(param_9,cVar1);
    if ((iVar2 < 0) && (iVar3 < 0)) {
      return 0x100;
    }
    if ((0 < iVar2) && (0 < iVar3)) {
      return 0x100;
    }
  }
  if (((param_10 != 0xff) && (iVar3 = maybeAngularDistance256(cVar1,param_10), iVar3 < 5)) &&
     (((iVar3 = maybeNegativeAngularDistance256(param_10,cVar1), iVar2 < 0 && (iVar3 < 0)) ||
      ((0 < iVar2 && (0 < iVar3)))))) {
    return 0x100;
  }
  if (iVar2 < 0) {
    bVar7 = cVar1 + 3;
  }
  else {
    bVar7 = cVar1 - 3;
  }
  iVar6 = *param_2 + (cosineLookupTable[bVar7] * param_3 >> 0xc);
  iVar3 = param_2[1] + (sineLookupTable[bVar7] * param_3 >> 0xc);
  uVar4 = Atan2(iVar6 - (param_1->position).x,iVar3 - (param_1->position).y,0);
  if (deltaTime == 3) {
    param_6 = param_6 + (param_6 >> 1);
  }
  else if (deltaTime == 4) {
    param_6 = param_6 << 1;
  }
  if ((param_13 & 8) == 0) {
    iVar3 = FUN_80037da8(param_1,uVar4,param_7,param_8,1,0);
    if (iVar3 == 0) goto LAB_8003a098;
    iVar3 = FUN_80038290(param_1,param_6,param_11,param_12,param_13);
  }
  else {
    uVar5 = Atan2(*param_2 - (param_1->position).x,param_2[1] - (param_1->position).y,0);
    FUN_80037da8(param_1,uVar5,param_7,0,0,0);
    iVar3 = FUN_80038388(param_1,uVar4,param_6,param_11,param_12,param_13,iVar6,iVar3);
  }
  if (iVar3 != 0) {
    return -iVar3;
  }
LAB_8003a098:
  if (iVar2 < 0) {
    return -iVar2;
  }
  return iVar2;
}



void SetupDialogue(Object *npc)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  int iVar4;
  uint uVar5;
  byte *pbVar6;
  byte *pbVar7;
  byte *pbVar8;
  NPCDialogue *puVar10;
  byte bVar9;
  uint uVar10;
  
  bVar3 = false;
  puVar10 = (NPCDialogue *)npc->data;
  uVar10 = 0;
  iVar4 = 0;
  do {
    pbVar7 = *(byte **)(&puVar10->field_0x10 + iVar4);
    bVar1 = *pbVar7;
    pbVar8 = pbVar7 + 1;
    if (pbVar8 < pbVar7 + bVar1) {
      pbVar6 = pbVar7 + 2;
      do {
        uVar5 = (uint)*pbVar8;
        bVar9 = (byte)uVar10;
        if ((uVar5 != 0) && (uVar5 < 10)) {
          if (uVar5 == 1) {
            if ((DAT_80066f44 != '\0') && (DAT_80066ff4 == '\0')) {
              puVar10->nextDialogueBranch = bVar9;
              DAT_80066fcc = 0;
              DAT_80066f94 = (uint)*pbVar6;
              if (worldsCompleted[g_currLevelID] != false) {
                DAT_80067164 = 1;
              }
            }
          }
          else if ((((int)(uVar5 - 1) < 8) &&
                   (uVar5 = 1 << (uVar5 - 2 & 0x1f), (DAT_80067148 & uVar5) != 0)) &&
                  ((DAT_80066ff0 & uVar5) == 0)) {
            puVar10->nextDialogueBranch = bVar9;
            DAT_80066fcc = 0;
            DAT_80066f94 = (uint)*pbVar6;
            DAT_80066ff0 = DAT_80066ff0 | (byte)uVar5;
            bVar9 = orbsCollectedFlags[g_currLevelID];
            bVar3 = true;
            if ((bVar9 & uVar5) == 0) {
              orbsCollectedFlags[g_currLevelID] = bVar9 | (byte)uVar5;
              orbsCollectedCount = orbsCollectedCount + 1;
            }
            else {
              DAT_80067164 = 1;
            }
          }
          goto LAB_8003a4f8;
        }
        switch(*pbVar8) {
        case 0x23:
          pbVar6 = pbVar6 + 3;
          pbVar8 = pbVar8 + 3;
          goto switchD_8003a2cc_caseD_b;
        case 0x24:
          uVar5 = (uint)*pbVar6;
          cVar2 = DAT_80066f44;
          if (uVar5 == 1) {
code_r0x8003a430:
            if (cVar2 != '\0') {
LAB_8003a438:
              puVar10->nextDialogueBranch = bVar9;
              *pbVar6 = 0xff;
              DAT_80066fe8 = 0xffffffff;
              DAT_80066fcc = 0;
              FUN_8004c214(pbVar6,1,&CheckpointData_8006718c);
            }
          }
          else if ((int)(uVar5 - 1) < 10) {
            if (((uint)DAT_80067148 & 1 << (uVar5 - 2 & 0x1f)) != 0) goto LAB_8003a438;
          }
          else if ((int)(uVar5 - 1) < 0x14) {
            cVar2 = (&DAT_8006abed)[uVar5];
            goto code_r0x8003a430;
          }
          break;
        case 0x25:
          if ((puVar10->nextDialogueBranch == uVar10) &&
             (iVar4 = (pbVar6[2] - 1) * 4, pbVar6[2] - 1 != 0xfe)) {
            currentDisplayedPaywallCost = (int)*(short *)((int)&globalProgressFlags + iVar4);
            showPaymentOption = 1;
            if ((*(short *)((int)&globalProgressFlags + iVar4 + 2) == 0) &&
               (gemsCollectedNetValue < *(short *)((int)&globalProgressFlags + iVar4))) {
              puVar10->nextDialogueBranch = pbVar6[3] - 1;
              return;
            }
          }
          pbVar6 = pbVar6 + 5;
          pbVar8 = pbVar8 + 5;
          goto switchD_8003a2cc_caseD_b;
        case 0x26:
          if (uVar10 == puVar10->nextDialogueBranch) {
            DAT_80066fbc = 1;
          }
        case 0x2a:
        case 0x2b:
          pbVar6 = pbVar6 + 1;
          pbVar8 = pbVar8 + 1;
          goto switchD_8003a2cc_caseD_b;
        case 0x27:
          if (uVar10 == puVar10->nextDialogueBranch) {
            maybeNPCTalkedToFlags[g_currLevelID] =
                 maybeNPCTalkedToFlags[g_currLevelID] | (byte)(1 << (*pbVar6 - 1 & 0x1f));
          }
          break;
        case 0x28:
          break;
        case 0x29:
          if (puVar10->nextDialogueBranch == uVar10) {
            DAT_80066fe8 = 1;
          }
          break;
        case 0x2c:
          if (uVar10 == puVar10->nextDialogueBranch) {
            DAT_80066f5c = *pbVar6 - 1;
          }
          break;
        case 0x2d:
          if (puVar10->nextDialogueBranch == uVar10) {
            DAT_80066fcc = *pbVar6 - 1;
          }
          break;
        default:
          goto switchD_8003a2cc_caseD_b;
        }
LAB_8003a4f8:
        pbVar6 = pbVar6 + 2;
        pbVar8 = pbVar8 + 2;
switchD_8003a2cc_caseD_b:
      } while (pbVar8 < pbVar7 + bVar1);
    }
    uVar10 = uVar10 + 1;
    if (((int)(uint)puVar10->dialogueLength < (int)uVar10) || (iVar4 = uVar10 * 4, bVar3)) {
      FUN_8004c214(&puVar10->nextDialogueBranch,1,&CheckpointData_8006718c);
      return;
    }
  } while( true );
}



void FUN_8003a568(Object *npc)

{
  byte *pbVar1;
  byte bVar2;
  byte bVar3;
  uint uVar4;
  int iVar5;
  char cVar6;
  byte *pbVar7;
  byte *pbVar8;
  int iVar9;
  undefined *puVar10;
  
  puVar10 = npc->data;
  pbVar7 = *(byte **)(puVar10 + (uint)(byte)puVar10[2] * 4 + 0x10);
  bVar2 = *pbVar7;
  pbVar8 = pbVar7 + 1;
  do {
    if (pbVar7 + bVar2 <= pbVar8) {
      pbVar7 = *(byte **)(puVar10 + (uint)(byte)puVar10[2] * 4 + 0x10);
      bVar2 = *pbVar7;
      pbVar8 = pbVar7 + 1;
      do {
        if (pbVar7 + bVar2 <= pbVar8) {
          FUN_8004c214(puVar10 + 2,1,&CheckpointData_8006718c);
          return;
        }
        switch(*pbVar8) {
        case 0x23:
          pbVar8 = pbVar8 + 3;
          break;
        default:
          pbVar8 = pbVar8 + 2;
          break;
        case 0x25:
          pbVar8 = pbVar8 + 5;
          break;
        case 0x2b:
          puVar10[5] = 2;
        case 0x26:
        case 0x2a:
          pbVar8 = pbVar8 + 1;
        }
      } while( true );
    }
    switch(*pbVar8) {
    case 0x23:
      iVar9 = pbVar8[1] - 1;
      iVar5 = pbVar8[2] - 1;
      if (iVar9 == iVar5) {
LAB_8003a678:
        puVar10[2] = (char)iVar9;
      }
      else {
        uVar4 = randomRangeGen(iVar9,iVar5);
        bVar3 = puVar10[2] + 1;
        if (((byte)puVar10[2] == uVar4) && (puVar10[2] = bVar3, iVar5 < (int)(uint)bVar3))
        goto LAB_8003a678;
      }
      pbVar8 = pbVar8 + 3;
      break;
    default:
      pbVar8 = pbVar8 + 2;
      break;
    case 0x25:
      cVar6 = pbVar8[1] - 1;
      if (DAT_80066f48 == 0) {
        iVar5 = (pbVar8[3] - 1) * 4;
        if (pbVar8[3] - 1 == 0xfe) {
          puVar10[2] = cVar6;
        }
        else if (gemsCollectedNetValue < *(short *)((int)&globalProgressFlags + iVar5)) {
          if (DAT_800698b9 == '\0') {
            puVar10[2] = pbVar8[4] - 1;
          }
          else {
            puVar10[2] = cVar6;
            *(undefined2 *)((int)&globalProgressFlags + iVar5 + 2) = 1;
          }
        }
        else {
          puVar10[2] = cVar6;
          *(undefined2 *)((int)&globalProgressFlags + iVar5 + 2) = 1;
          gemsCollectedNetValue =
               gemsCollectedNetValue - *(short *)((int)&globalProgressFlags + iVar5);
        }
      }
      else if (DAT_80066f48 == 1) {
        puVar10[2] = pbVar8[2] - 1;
      }
      if (0x7f < (byte)puVar10[2]) {
        puVar10[2] = puVar10[2] + 0x80;
        DAT_8006713c = 0;
      }
      pbVar8 = pbVar8 + 5;
      break;
    case 0x29:
      pbVar1 = pbVar8 + 1;
      pbVar8 = pbVar8 + 2;
      puVar10[2] = *pbVar1 - 1;
      break;
    case 0x2a:
      puVar10[5] = 0xff;
      FUN_8004c214(puVar10 + 5,1,&CheckpointData_8006718c);
    case 0x26:
    case 0x2b:
      pbVar8 = pbVar8 + 1;
    }
  } while( true );
}



bool FUN_8003a86c(Object *param_1,uint *param_2,int param_3,int param_4,uint param_5)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  
  iVar2 = FUN_800381ec(param_1);
  if (param_3 == 4) {
    uVar4 = *param_2;
    *param_2 = uVar4 - param_4;
    if ((int)(uVar4 - param_4) < (int)param_5) {
      *param_2 = param_5;
    }
  }
  else if (param_3 == 2) {
    uVar4 = (uint)*(short *)param_2;
    *(short *)param_2 = (short)(uVar4 - param_4);
    if ((int)((uVar4 - param_4) * 0x10000) >> 0x10 < (int)param_5) {
      *(short *)param_2 = (short)param_5;
    }
  }
  else {
    uVar4 = (uint)*(byte *)param_2;
    *(byte *)param_2 = (byte)(uVar4 - param_4);
    if ((int)(uVar4 - param_4 & 0xff) < (int)param_5) {
      *(byte *)param_2 = (byte)param_5;
    }
  }
  iVar3 = (param_1->position).z;
  bVar1 = (int)((iVar3 - *(short *)&param_1->field_0x38) + uVar4) < iVar2;
  if (bVar1) {
    (param_1->position).z = iVar2 + *(short *)&param_1->field_0x38;
  }
  else {
    (param_1->position).z = iVar3 + uVar4;
  }
  return bVar1;
}



undefined4 FUN_8003a98c(int *param_1,uint param_2)

{
  char cVar1;
  bool bVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  
  iVar8 = *param_1;
  iVar3 = Vec2OctagonalDistanceApproximation((Vec2 *)(param_1 + 3),(Vec2 *)&Spyro);
  if (*(char *)(iVar8 + 5) == -1) {
    *(undefined *)(iVar8 + 7) = 0;
  }
  else {
    bVar2 = false;
    if (iVar3 < 0xa00) {
      cVar1 = *(char *)(iVar8 + 7);
      *(undefined *)(iVar8 + 7) = 0;
      if (((param_2 & 1) != 0) || (Spyro.airTime == 0)) {
        bVar2 = true;
      }
      iVar5 = param_1[5] - (int)*(short *)(param_1 + 0xe);
      iVar7 = iVar5 + 800;
      iVar6 = iVar5;
      if ((param_2 & 8) != 0) {
        iVar6 = iVar5 + -800;
      }
      if (Spyro.maybeSubstate == UnderwaterSwim) {
        iVar7 = iVar5 + 0x708;
        iVar6 = iVar6 + -400;
        bVar2 = true;
      }
      iVar5 = 0x40;
      if (iVar3 < 0x500) {
        iVar3 = 0x80;
      }
      else {
        iVar5 = 0x20;
        iVar3 = 0x48;
      }
      if (!bVar2) {
        return 0;
      }
      if (iVar7 < Spyro.position.z) {
        return 0;
      }
      if (Spyro.position.z < iVar6) {
        return 0;
      }
      if ((param_2 & 2) == 0) {
        uVar4 = Atan2(Spyro.position.x - param_1[3],Spyro.position.y - param_1[4],0);
        iVar6 = maybeAngularDistance256(*(undefined *)((int)param_1 + 0x46),uVar4);
        if (iVar5 < iVar6) {
          return 0;
        }
      }
      uVar4 = Atan2(param_1[3] - Spyro.position.x,param_1[4] - Spyro.position.y,0);
      iVar6 = maybeAngularDistance256(Spyro.angleAsByte.yaw,uVar4);
      if (iVar3 < iVar6) {
        return 0;
      }
      if (*(char *)((int)param_1 + 0x4d) == '\0') {
        return 0;
      }
      if (((DAT_80067100 != 0) || (DAT_8006701c != 0)) && (*(char *)(iVar8 + 5) != '\x02')) {
        return 0;
      }
      if (currGameState != Normal) {
        return 0;
      }
      if (((param_2 & 4) == 0) && (Spyro.maybeSubstate == Charge)) {
        return 0;
      }
      if (Spyro.maybeSubstate == Supercharge) {
        return 0;
      }
      if (((DAT_80067008 < 10) && (*(char *)(iVar8 + 5) != '\0')) &&
         ((inHomeWorld != 0 && (*(char *)(iVar8 + 2) != '\0')))) {
        *(undefined *)(iVar8 + 5) = 0;
      }
      if (((inputStates[0].pressed & Triangle) != None) || (*(char *)(iVar8 + 5) != '\0')) {
        if (*(char *)(iVar8 + 5) == '\x02') {
          Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10000002;
        }
        *(undefined *)(iVar8 + 5) = 0;
        FUN_8004c214(iVar8 + 5,1,&checkpointStorage);
        FUN_8004c214(iVar8 + 5,1,&CheckpointData_8006718c);
        return 1;
      }
      if (cVar1 == '\0') {
        FUN_8003acd4(param_1);
      }
      *(undefined *)(iVar8 + 7) = 2;
    }
  }
  return 0;
}



void FUN_8003acd4(undefined4 param_1)

{
  undefined uVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = 0;
  iVar3 = 0;
  do {
    puVar2 = (undefined4 *)(*DAT_800670b4)(0x137,param_1);
    *(undefined4 *)*puVar2 = param_1;
    uVar1 = (&DAT_80063500)[iVar3];
    *(char *)((int)puVar2 + 0x49) = (char)iVar4;
    iVar4 = iVar4 + 1;
    *(undefined *)(puVar2 + 0xf) = uVar1;
    puVar2[5] = puVar2[5] + -0xa00;
    uVar1 = (&DAT_80063503)[iVar3];
    *(undefined *)((int)puVar2 + 0x47) = 4;
    *(undefined *)(puVar2 + 0x15) = uVar1;
    iVar3 = iVar3 + 4;
  } while (iVar4 < 7);
  return;
}



int FUN_8003ad84(Object *param_1,short *param_2,Vec3 *param_3,int *param_4,int param_5,uint param_6)

{
  byte bVar1;
  char cVar2;
  short sVar3;
  int iVar4;
  undefined *puVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  Vec3 local_48;
  Vec3 VStack_38;
  
  iVar6 = 0;
  if (param_5 < 9) {
    if (param_5 < 7) {
      iVar4 = 1;
      if (param_5 < 5) {
        puVar5 = (undefined *)0x80066e80;
      }
      else {
        puVar5 = (undefined *)0x800647ac;
        iVar4 = 3;
      }
    }
    else {
      puVar5 = (undefined *)0x800647bc;
      iVar4 = 5;
    }
  }
  else {
    puVar5 = &DAT_800647d4;
    iVar4 = 7;
  }
  if (*param_4 < param_5) {
    if (iVar4 < *param_4) {
      VectorSubtract(&local_48,(Vec3 *)(param_2 + param_2[1] * 8 + 6),&param_1->position);
      param_5 = param_5 - (*param_4 + -1);
      iVar7 = local_48.x / param_5;
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_48.x == -0x80000000)) {
        trap(0x1800);
      }
      iVar8 = local_48.y / param_5;
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_48.y == -0x80000000)) {
        trap(0x1800);
      }
      iVar4 = local_48.z / param_5;
      if (param_5 == 0) {
        trap(0x1c00);
      }
      local_48.x = iVar7;
      local_48.y = iVar8;
      if ((param_5 == -1) && (local_48.z == -0x80000000)) {
        trap(0x1800);
      }
    }
    else {
      VectorSubtract(&local_48,(Vec3 *)(param_2 + param_2[1] * 8 + 6),&param_1->position);
      param_5 = param_5 - (*param_4 + -1);
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_48.x == -0x80000000)) {
        trap(0x1800);
      }
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_48.y == -0x80000000)) {
        trap(0x1800);
      }
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_48.z == -0x80000000)) {
        trap(0x1800);
      }
      local_48.x = local_48.x / param_5;
      local_48.y = local_48.y / param_5;
      local_48.z = local_48.z / param_5;
      VectorMultByN(&local_48,&local_48,(int)*(short *)(puVar5 + *param_4 * 4));
      VectorMultByN(&VStack_38,param_3,(int)*(short *)(puVar5 + *param_4 * 4 + 2));
      VectorAdd(&local_48,&local_48,&VStack_38);
      VectorShiftRight(&local_48,10);
      iVar4 = local_48.z;
    }
    local_48.z = iVar4;
    *param_4 = *param_4 + 1;
  }
  else {
    VectorSubtract(&local_48,(Vec3 *)(param_2 + param_2[1] * 8 + 6),&param_1->position);
    VectorCopy(param_3,&local_48);
    iVar4 = (int)*param_2;
    iVar6 = (int)param_2[1] + (int)param_2[5] + iVar4;
    if (iVar4 == 0) {
      trap(0x1c00);
    }
    if ((iVar4 == -1) && (iVar6 == -0x80000000)) {
      trap(0x1800);
    }
    sVar3 = (short)(iVar6 % iVar4);
    iVar6 = sVar3 + 0x8000;
    param_2[1] = sVar3;
    *param_4 = 0;
  }
  if ((param_6 & 4) != 0) {
    local_48.z = 0;
  }
  bVar1 = Atan2(local_48.x,local_48.y,0);
  (param_1->eulerRotation).yaw = bVar1;
  iVar4 = VectorLength(&local_48,0);
  cVar2 = Atan2(local_48.z,iVar4,0);
  (param_1->eulerRotation).roll = 0x40 - cVar2;
  VectorAdd(&param_1->position,&param_1->position,&local_48);
  if ((param_6 & 4) != 0) {
    FUN_8003986c(param_1);
  }
  FUN_80041538(param_1,2);
  return iVar6;
}



uint FUN_8003b164(Object *param_1,int param_2,int param_3,undefined4 param_4,undefined4 param_5,
                 undefined4 param_6,char **param_7,int param_8,short *param_9)

{
  int iVar1;
  uint uVar2;
  undefined4 uVar3;
  int iVar4;
  int *piVar5;
  undefined4 *puVar6;
  uint uVar7;
  int iVar8;
  char *pcVar9;
  int iVar10;
  undefined4 *puVar11;
  short *psVar12;
  int iVar13;
  Vec3 local_a8;
  int local_98;
  int local_94;
  Vec2 local_90;
  uint local_88 [2];
  Vec3 VStack_80;
  Vec3 local_70;
  int local_60;
  int local_58;
  undefined4 local_50;
  
  local_88[0] = 0xffffffff;
  local_60 = param_2;
  local_58 = param_3;
  local_50 = param_4;
  VectorCopy(&local_a8,&param_1->position);
  local_a8.x = local_a8.x + (cosineLookupTable[local_60] * local_58 >> 0xc);
  local_a8.y = local_a8.y + (sineLookupTable[local_60] * local_58 >> 0xc);
  if ((param_8 != 0) && (iVar13 = 0, 0 < param_8)) {
    do {
      pcVar9 = *param_7;
      if (*pcVar9 == '\0') {
        iVar1 = Vec2OctagonalDistanceApproximation((Vec2 *)&param_1->position,(Vec2 *)(pcVar9 + 4));
        if (iVar1 < *(short *)(pcVar9 + 2)) {
          uVar2 = (uint)(byte)pcVar9[1];
          uVar7 = 0;
          if (uVar2 != 0) {
            iVar1 = 0xc;
            do {
              piVar5 = (int *)(pcVar9 + iVar1);
              local_90.x = local_a8.x - piVar5[2];
              local_90.y = local_a8.y - piVar5[3];
              if (*piVar5 * local_90.y - piVar5[1] * local_90.x < 0) break;
              uVar7 = uVar7 + 1;
              iVar1 = iVar1 + 0x1c;
            } while ((int)uVar7 < (int)(uint)(byte)pcVar9[1]);
            uVar2 = (uint)(byte)pcVar9[1];
          }
          if (uVar7 == uVar2) {
            iVar1 = 9999999;
            iVar8 = 0;
            puVar11 = (undefined4 *)0x0;
            if (uVar2 != 0) {
              iVar10 = 0xc;
              do {
                puVar6 = (undefined4 *)(pcVar9 + iVar10);
                iVar4 = puVar6[6] + puVar6[4] * local_a8.x + puVar6[5] * local_a8.y >> 10;
                local_90.x = local_a8.x - (iVar4 * puVar6[4] >> 10);
                local_90.y = local_a8.y - (iVar4 * puVar6[5] >> 10);
                iVar4 = Vec2OctagonalDistanceApproximation(&local_90,(Vec2 *)&local_a8);
                if (iVar4 < iVar1) {
                  local_98 = local_90.x;
                  local_94 = local_90.y;
                  puVar11 = puVar6;
                  iVar1 = iVar4;
                }
                iVar8 = iVar8 + 1;
                iVar10 = iVar10 + 0x1c;
              } while (iVar8 < (int)(uint)(byte)pcVar9[1]);
            }
            local_88[0] = Atan2(*puVar11,puVar11[1],0);
            iVar1 = maybeAngularDistance256(local_88[0],(param_1->eulerRotation).yaw);
            if (0x40 < iVar1) {
              local_88[0] = local_88[0] + 0x80 & 0xff;
            }
          }
        }
      }
      else {
        iVar1 = FUN_8003b77c(pcVar9,&local_a8,&local_98,local_88,(param_1->eulerRotation).yaw,0x200)
        ;
        if (iVar1 == 0x2000) {
          return 0x2000;
        }
      }
      iVar13 = iVar13 + 1;
      param_7 = param_7 + 1;
    } while (iVar13 < param_8);
  }
  if (local_88[0] == 0xffffffff) {
    if ((param_9 != (short *)0x0) && (iVar13 = 0, 0 < *param_9)) {
      iVar1 = 0xc;
      psVar12 = param_9;
      do {
        uVar7 = *(uint *)(psVar12 + 0xc) & 0x7fff;
        uVar2 = uVar7;
        if ((*(uint *)(psVar12 + 0xc) & 0x8000) != 0) {
          uVar2 = (int)(uVar7 * 5) >> 2;
        }
        VectorSubtract(&VStack_80,&local_a8,(Vec3 *)((int)param_9 + iVar1));
        iVar8 = VectorLength(&VStack_80,0);
        if (iVar8 < (int)uVar2) {
          uVar3 = Atan2(*(int *)(psVar12 + 6) - (param_1->position).x,
                        *(int *)(psVar12 + 8) - (param_1->position).y,0);
          iVar8 = maybeAngularDistance256(local_60,uVar3);
          if (iVar8 < 0x40) {
            *(uint *)(psVar12 + 0xc) = *(uint *)(psVar12 + 0xc) | 0x8000;
            VectorCopy(&local_70,&param_1->position);
            local_70.x = local_70.x + cosineLookupTable[local_60];
            local_70.y = local_70.y + sineLookupTable[local_60];
            uVar3 = Atan2(local_70.x - *(int *)(psVar12 + 6),local_70.y - *(int *)(psVar12 + 8),0);
            uVar2 = FUN_80039de4(param_1,(Vec3 *)((int)param_9 + iVar1),uVar7 - local_58,uVar3,8,
                                 local_58,4,0x40,0xff,0xff,0,0,param_6);
            return uVar2 | 0x4000;
          }
        }
        *(uint *)(psVar12 + 0xc) = *(uint *)(psVar12 + 0xc) & 0x7fff;
        iVar13 = iVar13 + 1;
        iVar1 = iVar1 + 0x10;
        psVar12 = psVar12 + 8;
      } while (iVar13 < *param_9);
    }
    iVar13 = FUN_80037da8(param_1,local_60,4,0x18,1,0);
    if (iVar13 == 0) {
      return 0;
    }
    uVar2 = FUN_80038290(param_1,local_58,local_50,param_5,param_6);
    return uVar2;
  }
  iVar13 = maybeAngularDistance256(local_60);
  if (0x50 < iVar13) {
    local_88[0] = local_88[0] + 0x80 & 0xff;
  }
  iVar13 = FUN_80037da8(param_1,local_88[0],4,3,0,0);
  if (iVar13 == 0) {
    return 0;
  }
  local_90.x = (param_1->position).x;
  local_90.y = (param_1->position).y;
  (param_1->position).x = local_98;
  (param_1->position).y = local_94;
  uVar2 = FUN_80038290(param_1,local_58,local_50,param_5,param_6);
  iVar1 = (param_1->position).x;
  iVar13 = iVar1 - local_90.x;
  if (iVar13 < 0) {
    if (4 < local_90.x - iVar1) goto LAB_8003b554;
  }
  else if (4 < iVar13) {
    return uVar2 | 0x1000;
  }
  iVar1 = (param_1->position).y;
  iVar13 = iVar1 - local_90.y;
  if (iVar13 < 0) {
    if (4 < local_90.y - iVar1) {
LAB_8003b554:
      return uVar2 | 0x1000;
    }
  }
  else if (4 < iVar13) {
    return uVar2 | 0x1000;
  }
  return uVar2 | 0x2000;
}



undefined4
FUN_8003b77c(int param_1,Vec2 *param_2,Vec2 *param_3,uint *param_4,undefined4 param_5,int param_6)

{
  bool bVar1;
  bool bVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int *piVar9;
  int iVar10;
  int iVar11;
  Vec2 local_48;
  uint *local_40;
  undefined4 local_38;
  
  bVar1 = false;
  bVar2 = false;
  local_38 = 0;
  iVar10 = 0;
  if (*(char *)(param_1 + 1) != '\0') {
    iVar11 = 0xc;
    local_40 = param_4;
    do {
      piVar9 = (int *)(param_1 + iVar11);
      if (*piVar9 * (param_2->y - piVar9[3]) - piVar9[1] * (param_2->x - piVar9[2]) < 1) {
        bVar2 = false;
      }
      else {
        iVar4 = piVar9[6] + piVar9[4] * param_2->x + piVar9[5] * param_2->y >> 10;
        param_3->x = param_2->x - (iVar4 * piVar9[4] >> 10);
        param_3->y = param_2->y - (iVar4 * piVar9[5] >> 10);
        Vec2OctagonalDistanceApproximation(param_3,param_2);
        uVar3 = Atan2(*piVar9,piVar9[1],0);
        iVar4 = maybeAngularDistance256(uVar3,param_5);
        if (0x40 < iVar4) {
          uVar3 = uVar3 + 0x80 & 0xff;
        }
        iVar7 = param_3->x;
        iVar4 = piVar9[2];
        if (((iVar7 <= iVar4) || (iVar7 <= iVar4 + *piVar9)) &&
           ((iVar4 <= iVar7 || (iVar4 + *piVar9 <= iVar7)))) {
          iVar7 = param_3->y;
          iVar4 = piVar9[3];
          if ((((iVar7 <= iVar4) || (iVar7 <= iVar4 + piVar9[1])) &&
              ((iVar4 <= iVar7 || (iVar4 + piVar9[1] <= iVar7)))) &&
             (iVar4 = Vec2OctagonalDistanceApproximation(param_3,param_2), iVar4 < param_6)) {
            if (local_40 != (uint *)0x0) {
              *local_40 = uVar3;
            }
            return 1;
          }
        }
        iVar4 = piVar9[2];
        iVar5 = iVar4 + *piVar9;
        iVar7 = iVar4;
        if (iVar5 < iVar4) {
          iVar7 = iVar5;
        }
        if (iVar4 < iVar5) {
          iVar4 = iVar5;
        }
        iVar5 = piVar9[3];
        iVar6 = iVar5 + piVar9[1];
        iVar8 = iVar5;
        if (iVar6 < iVar5) {
          iVar8 = iVar6;
        }
        if (iVar5 < iVar6) {
          iVar5 = iVar6;
        }
        local_48.x = param_3->x;
        if (iVar4 < param_3->x) {
          local_48.x = iVar4;
        }
        local_48.y = param_3->y;
        if (iVar5 < param_3->y) {
          local_48.y = iVar5;
        }
        if (local_48.x < iVar7) {
          local_48.x = iVar7;
        }
        if (local_48.y < iVar8) {
          local_48.y = iVar8;
        }
        iVar4 = Vec2OctagonalDistanceApproximation(&local_48,param_2);
        if (iVar4 <= param_6) {
          if ((iVar10 == *(byte *)(param_1 + 1) - 1) && (bVar1)) {
            return 0x2000;
          }
          if (bVar2) {
            return 0x2000;
          }
          bVar2 = true;
          if (iVar10 == 0) {
            bVar1 = true;
          }
        }
      }
      iVar10 = iVar10 + 1;
      iVar11 = iVar11 + 0x1c;
    } while (iVar10 < (int)(uint)*(byte *)(param_1 + 1));
  }
  return local_38;
}



uint FUN_8003bb14(Object *param_1,Vec3 *param_2,int param_3,int param_4,uint param_5)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  
  uVar6 = 0;
  iVar7 = 0;
  if ((param_5 & 1) != 0) {
    param_2->z = param_2->z + 300 + param_3;
  }
  iVar5 = 0;
  do {
    if (param_4 == 0) {
      iVar2 = 0;
    }
    else {
      iVar2 = FUN_8004055c(param_2,param_4,0,0,0,param_1);
    }
    if (iVar2 != 0) {
      uVar6 = uVar6 | 1;
      iVar7 = iVar2;
      if ((param_5 & 2) != 0) {
        VectorCopy(param_2,&Vec3_8006ab7c);
        goto LAB_8003bbcc;
      }
LAB_8003bc50:
      iVar5 = 6;
      break;
    }
LAB_8003bbcc:
    if (param_3 == 0) {
LAB_8003bbe4:
      if (iVar2 == 0) {
        bVar1 = iVar5 < 6;
        if ((param_5 & 0x400) != 0) goto LAB_8003bc40;
        iVar2 = FUN_8003ce94(&param_1->position,param_2);
        bVar1 = iVar5 < 6;
        if (iVar2 == 0) goto LAB_8003bc40;
        iVar5 = 6;
        uVar6 = uVar6 | 2;
        break;
      }
    }
    else {
      iVar3 = FUN_8003dcc0(param_2,param_3);
      if (iVar3 == 0) goto LAB_8003bbe4;
      uVar6 = uVar6 | 2;
      if ((param_5 & 0x20) == 0) goto LAB_8003bc50;
      VectorCopy(param_2,&Vec3_8006ab7c);
    }
    iVar5 = iVar5 + 1;
  } while (iVar5 < 6);
  bVar1 = iVar5 < 6;
LAB_8003bc40:
  if (!bVar1) goto LAB_8003be0c;
  if ((param_5 & 1) != 0) {
    param_2->z = (param_2->z + -300) - param_3;
  }
  param_2->z = param_2->z + 0x400;
  iVar5 = RaycastDown(param_2,0x2000);
  if ((param_5 & 0x1000) != 0) {
    param_2->z = param_2->z + -0x400;
  }
  if ((param_5 & 0x10) != 0) {
    iVar4 = (param_1->position).z;
    iVar3 = iVar5 + *(short *)&param_1->field_0x38;
    iVar2 = iVar3 - iVar4;
    if (iVar2 < 0) {
      iVar2 = iVar4 - iVar3;
    }
    if (400 < iVar2) {
      uVar6 = uVar6 | 2;
      goto LAB_8003be0c;
    }
  }
  if (((param_5 & 0x200) != 0) &&
     (200 < (iVar5 + *(short *)&param_1->field_0x38) - (param_1->position).z)) {
    uVar6 = uVar6 | 2;
    goto LAB_8003be0c;
  }
  if ((param_5 & 0x40) != 0) {
    iVar2 = VectorLength(&Vec3_8006ab88,0);
    iVar2 = Atan2(iVar2,Vec3_8006ab88.z,0);
    if (0x80 < iVar2) {
      iVar2 = iVar2 + -0x100;
    }
    if (iVar2 < 0) {
      iVar2 = -iVar2;
    }
    if (iVar2 < 0x17) {
      uVar6 = uVar6 | 2;
      goto LAB_8003be0c;
    }
  }
  (param_1->position).x = param_2->x;
  (param_1->position).y = param_2->y;
  if ((param_5 & 4) == 0) {
    if ((param_5 & 0x1000) != 0) {
      iVar5 = param_2->z;
      goto code_r0x8003bdec;
    }
  }
  else {
    iVar2 = (param_1->position).z;
    iVar3 = (iVar5 + *(short *)&param_1->field_0x38) - iVar2;
    iVar5 = iVar3;
    if (iVar3 < -0xfa) {
      iVar5 = -0xfa;
    }
    iVar5 = iVar2 + iVar5;
    if (0xfa < iVar3) {
      iVar5 = iVar2 + 0xfa;
    }
code_r0x8003bdec:
    (param_1->position).z = iVar5;
  }
  FUN_80041a8c(param_1);
  FUN_80041ab8(param_1);
  FUN_80041538(param_1,2);
LAB_8003be0c:
  if (iVar7 != 0) {
    DAT_8006aba0 = iVar7;
  }
  return uVar6;
}



int * FUN_8003be50(Vec2 *param_1,char **param_2,int param_3)

{
  bool bVar1;
  bool bVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int *piVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  int iVar12;
  char *pcVar13;
  int *piVar14;
  int iVar15;
  Vec2 local_res0 [2];
  Vec2 local_60;
  int local_58;
  int local_54;
  Vec2 local_50;
  int local_48;
  
  piVar14 = (int *)0x0;
  if ((param_3 != 0) &&
     (iVar15 = 0, local_res0[0].x = (int)param_1, local_48 = param_3, 0 < param_3)) {
    do {
      pcVar13 = *param_2;
      bVar1 = false;
      if (*pcVar13 == '\0') {
        iVar3 = Vec2OctagonalDistanceApproximation((Vec2 *)local_res0[0].x,(Vec2 *)(pcVar13 + 4));
        if (iVar3 < *(short *)(pcVar13 + 2)) {
          uVar4 = (uint)(byte)pcVar13[1];
          uVar10 = 0;
          if (uVar4 != 0) {
            iVar3 = 0xc;
            do {
              piVar8 = (int *)(pcVar13 + iVar3);
              local_60.x = *(int *)local_res0[0].x - piVar8[2];
              local_60.y = *(int *)(local_res0[0].x + 4) - piVar8[3];
              if (*piVar8 * local_60.y - piVar8[1] * local_60.x < 0) break;
              uVar10 = uVar10 + 1;
              iVar3 = iVar3 + 0x1c;
            } while ((int)uVar10 < (int)(uint)(byte)pcVar13[1]);
            uVar4 = (uint)(byte)pcVar13[1];
          }
          if (uVar10 == uVar4) {
            iVar3 = 9999999;
            iVar11 = 0;
            if (uVar4 != 0) {
              iVar12 = 0xc;
              do {
                piVar8 = (int *)(pcVar13 + iVar12);
                iVar5 = piVar8[6] +
                        piVar8[4] * *(int *)local_res0[0].x +
                        piVar8[5] * *(int *)(local_res0[0].x + 4) >> 10;
                local_60.x = *(int *)local_res0[0].x - (iVar5 * piVar8[4] >> 10);
                local_60.y = *(int *)(local_res0[0].x + 4) - (iVar5 * piVar8[5] >> 10);
                iVar5 = Vec2OctagonalDistanceApproximation(&local_60,local_res0);
                if (iVar5 < iVar3) {
                  iVar3 = iVar5;
                  piVar14 = piVar8;
                }
                iVar11 = iVar11 + 1;
                iVar12 = iVar12 + 0x1c;
              } while (iVar11 < (int)(uint)(byte)pcVar13[1]);
            }
          }
        }
      }
      else {
        bVar2 = false;
        iVar3 = 0;
        if (pcVar13[1] != '\0') {
          iVar11 = 0xc;
          do {
            piVar8 = (int *)(pcVar13 + iVar11);
            local_60.x = *(int *)local_res0[0].x - piVar8[2];
            local_60.y = *(int *)(local_res0[0].x + 4) - piVar8[3];
            if (*piVar8 * local_60.y - piVar8[1] * local_60.x < 1) {
              bVar2 = false;
            }
            else {
              iVar12 = piVar8[6] +
                       piVar8[4] * *(int *)local_res0[0].x +
                       piVar8[5] * *(int *)(local_res0[0].x + 4) >> 10;
              local_58 = *(int *)local_res0[0].x - (iVar12 * piVar8[4] >> 10);
              local_54 = *(int *)(local_res0[0].x + 4) - (iVar12 * piVar8[5] >> 10);
              iVar12 = piVar8[2];
              if ((local_58 <= iVar12) || (local_58 <= iVar12 + *piVar8)) {
                if (((iVar12 <= local_58) || (iVar12 + *piVar8 <= local_58)) &&
                   ((iVar12 = piVar8[3], local_54 <= iVar12 || (local_54 <= iVar12 + piVar8[1])))) {
                  if (iVar12 <= local_54) {
                    return piVar8;
                  }
                  if (iVar12 + piVar8[1] <= local_54) {
                    return piVar8;
                  }
                }
                iVar12 = piVar8[2];
              }
              iVar6 = iVar12 + *piVar8;
              iVar5 = iVar12;
              if (iVar6 < iVar12) {
                iVar5 = iVar6;
              }
              if (iVar12 < iVar6) {
                iVar12 = iVar6;
              }
              iVar6 = piVar8[3];
              iVar7 = iVar6 + piVar8[1];
              iVar9 = iVar6;
              if (iVar7 < iVar6) {
                iVar9 = iVar7;
              }
              if (iVar6 < iVar7) {
                iVar6 = iVar7;
              }
              local_50.x = local_58;
              if (iVar12 < local_58) {
                local_50.x = iVar12;
              }
              local_50.y = local_54;
              if (iVar6 < local_54) {
                local_50.y = iVar6;
              }
              if (local_50.x < iVar5) {
                local_50.x = iVar5;
              }
              if (local_50.y < iVar9) {
                local_50.y = iVar9;
              }
              iVar12 = Vec2OctagonalDistanceApproximation(&local_50,(Vec2 *)local_res0[0].x);
              if (iVar12 < 0x12d) {
                if ((iVar3 == (byte)pcVar13[1] - 1) && (bVar1)) {
                  return piVar8;
                }
                if (bVar2) {
                  return piVar8;
                }
                bVar2 = true;
                piVar14 = piVar8;
                if (iVar3 == 0) {
                  bVar1 = true;
                }
              }
            }
            iVar3 = iVar3 + 1;
            iVar11 = iVar11 + 0x1c;
          } while (iVar3 < (int)(uint)(byte)pcVar13[1]);
        }
      }
      iVar15 = iVar15 + 1;
      param_2 = param_2 + 1;
    } while (iVar15 < local_48);
  }
  return piVar14;
}



void FUN_8003c310(uint param_1,int *param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint *puVar4;
  short *psVar5;
  int iVar6;
  int iVar7;
  
  iVar7 = 0;
  if (0 < DAT_80067124) {
    iVar6 = 0;
    do {
      psVar5 = (short *)(iVar6 + DAT_800670d4);
      if ((int)psVar5[1] == (param_1 & 0xff)) {
        iVar2 = param_2[2];
        puVar4 = *(uint **)(*psVar5 * 4 + DAT_800673d4);
        iVar1 = *(int *)(psVar5 + 0xc);
        *puVar4 = (*(int *)(psVar5 + 8) + (*param_2 >> 4)) * 0x10000 |
                  *(int *)(psVar5 + 10) + (param_2[1] >> 4) & 0xffffU;
        iVar3 = iVar6 + DAT_800670d4;
        puVar4[1] = (uint)*(ushort *)(puVar4 + 1) | (iVar1 + (iVar2 >> 4)) * 0x10000;
        iVar2 = param_2[2];
        iVar1 = *(int *)(iVar3 + 0xc);
        puVar4[2] = (*(int *)(iVar3 + 4) + (*param_2 >> 4)) * 0x10000 |
                    *(int *)(iVar3 + 8) + (param_2[1] >> 4) & 0xffffU;
        puVar4[3] = puVar4[3] & 0x1ffff | (iVar1 + (iVar2 >> 5)) * 0x20000;
      }
      iVar7 = iVar7 + 1;
      iVar6 = iVar6 + 0x1c;
    } while (iVar7 < DAT_80067124);
  }
  return;
}



undefined4 FUN_8003c444(Object *param_1,int param_2,Vec3 *param_3)

{
  int iVar1;
  undefined4 uVar2;
  int iVar3;
  Vec3 *out;
  int iVar4;
  Vec3 local_90;
  Vec3 local_80;
  int local_70;
  int local_6c;
  int local_68;
  Vec3 local_60;
  Vec3 VStack_50;
  Vec3 VStack_40;
  undefined4 local_30;
  uint local_2c;
  undefined4 local_28;
  
  iVar4 = 4;
  if (deltaTime == 3) {
    param_2 = param_2 + (param_2 >> 1);
    iVar4 = 6;
  }
  else if (deltaTime == 4) {
    param_2 = param_2 << 1;
    iVar4 = 8;
  }
  FUN_80041538(param_1,4);
  VectorCopy(&local_80,param_3);
  iVar1 = VectorLength(param_3,1);
  VectorScale(param_3,iVar1,param_2);
  out = &param_1->position;
  VectorAdd(out,out,param_3);
  local_60.x = 0;
  local_60.y = 0;
  local_60.z = -0x400;
  MatrixMultVector(&param_1->maybeMatrix,&local_60,&local_60);
  VectorCopy(&VStack_50,out);
  VectorSubtract(&VStack_50,&VStack_50,&local_60);
  VectorCopy(&VStack_40,out);
  VectorAdd(&VStack_40,&VStack_40,&local_60);
  VectorAdd(&VStack_40,&VStack_40,&local_60);
  iVar1 = FUN_8003ce94(&VStack_50,&VStack_40);
  if (iVar1 != 0) {
    VectorCopy(out,&Vec3_8006ab70);
    VectorCopy(&local_90,&Vec3_8006ab88);
    VectorNormalize(&local_90,0x1000);
    local_70 = local_90.y * local_80.z - local_90.z * local_80.y >> 0xc;
    local_6c = local_90.z * local_80.x - local_90.x * local_80.z >> 0xc;
    local_68 = local_90.x * local_80.y - local_90.y * local_80.x >> 0xc;
    VectorNormalize(&local_70,0x1000);
    local_80.x = local_6c * local_90.z - local_68 * local_90.y >> 0xc;
    local_80.y = local_68 * local_90.x - local_70 * local_90.z >> 0xc;
    local_80.z = local_70 * local_90.y - local_6c * local_90.x >> 0xc;
    VectorNormalize(&local_80,0x1000);
    uVar2 = maybeSquareRoot(local_90.z * local_90.z + local_68 * local_68);
    iVar1 = Atan2(uVar2,-local_80.z,0);
    local_2c = -iVar1;
    iVar1 = (int)cosineLookupTable[local_2c & 0xff];
    if (iVar1 < 0) {
      iVar1 = -iVar1;
    }
    if (iVar1 < 0x10) {
      local_30 = 0;
      local_28 = Atan2(local_90.x,local_90.y,0);
    }
    else {
      local_28 = Atan2(local_80.x,local_80.y,0);
      local_30 = Atan2(local_90.z,local_68,0);
    }
    iVar3 = maybeNegativeAngularDistance256((param_1->eulerRotation).pitch,local_30);
    iVar1 = -iVar4;
    if (iVar4 < iVar3) {
      iVar3 = iVar4;
    }
    if (iVar3 < iVar1) {
      iVar3 = iVar1;
    }
    (param_1->eulerRotation).pitch = (param_1->eulerRotation).pitch + (char)iVar3;
    iVar3 = maybeNegativeAngularDistance256((param_1->eulerRotation).roll,local_2c);
    if (iVar4 < iVar3) {
      iVar3 = iVar4;
    }
    if (iVar3 < iVar1) {
      iVar3 = iVar1;
    }
    (param_1->eulerRotation).roll = (param_1->eulerRotation).roll + (char)iVar3;
    iVar3 = maybeNegativeAngularDistance256((param_1->eulerRotation).yaw,local_28);
    if (iVar4 < iVar3) {
      iVar3 = iVar4;
    }
    if (iVar3 < iVar1) {
      iVar3 = iVar1;
    }
    (param_1->eulerRotation).yaw = (param_1->eulerRotation).yaw + (char)iVar3;
  }
  return 0;
}



uint FUN_8003c87c(int param_1,short *param_2,int param_3,undefined4 param_4,undefined4 param_5,
                 undefined4 param_6,undefined4 param_7)

{
  int iVar1;
  int iVar2;
  short sVar3;
  uint uVar4;
  Vec3 VStack_30;
  
  uVar4 = 0;
  VectorSubtract(&VStack_30,(Vec3 *)(param_2 + param_2[1] * 8 + 6),(Vec3 *)(param_1 + 0xc));
  iVar1 = VectorLength(&VStack_30,1);
  if (iVar1 < param_3) {
    iVar2 = (int)*param_2;
    iVar1 = (int)param_2[1] + iVar2 + 1;
    if (iVar2 == 0) {
      trap(0x1c00);
    }
    if ((iVar2 == -1) && (iVar1 == -0x80000000)) {
      trap(0x1800);
    }
    sVar3 = (short)(iVar1 % iVar2);
    uVar4 = (int)sVar3 | 0x8000;
    param_2[1] = sVar3;
    VectorSubtract(&VStack_30,(Vec3 *)(param_2 + sVar3 * 8 + 6),(Vec3 *)(param_1 + 0xc));
  }
  FUN_8003c444(param_1,param_4,&VStack_30,0,0,param_7);
  return uVar4;
}



int FUN_8003c99c(int *param_1,int *param_2)

{
  int iVar1;
  
  iVar1 = (*param_2 * *param_1 + param_2[1] * param_1[1] + param_2[2] * param_1[2] >> 10) +
          param_2[3];
  if (iVar1 < 0) {
    iVar1 = -iVar1;
  }
  return iVar1;
}



void FUN_8003ca00(undefined4 param_1)

{
  undefined4 *puVar1;
  int iVar2;
  undefined4 *puVar3;
  int iVar4;
  Vec3 local_50;
  undefined local_40;
  undefined local_3f;
  undefined local_3e;
  Mat33 MStack_38;
  
  iVar4 = 0;
  do {
    puVar1 = (undefined4 *)(*DAT_800670b4)(0x81,param_1);
    if (puVar1 != (undefined4 *)0x0) {
      puVar3 = (undefined4 *)*puVar1;
      iVar2 = FUN_800502fc(puVar1 + 3,3,6,0x40e0e0);
      puVar3[1] = iVar2;
      if (iVar2 == 0) {
        FUN_8004132c(puVar1);
      }
      else {
        *puVar3 = 0x10;
        local_40 = 0;
        iVar2 = rand();
        local_3f = (undefined)iVar2;
        iVar2 = rand();
        local_3e = (undefined)iVar2;
        BuildRotationMatrix(&local_40,&MStack_38,(Mat33 *)0x0);
        local_50.x = 0x32;
        local_50.y = 0;
        local_50.z = 0;
        MatrixMultVector(&MStack_38,&local_50,(Vec3 *)(puVar3 + 2));
      }
    }
    iVar4 = iVar4 + 1;
  } while (iVar4 < 4);
  return;
}



int * FUN_8003cafc(void)

{
  int *piVar1;
  int iVar2;
  Vec3 VStack_20;
  
  piVar1 = (int *)(*DAT_800670b4)(0x110,currentNPC);
  if (piVar1 != (int *)0x0) {
    iVar2 = *piVar1;
    *(byte *)((int)piVar1 + 0x53) = *(byte *)((int)piVar1 + 0x53) | 0x80;
    VectorCopy(&VStack_20,(Vec3 *)(DAT_80066f5c * 0x10 + -0x7ff9cc94));
    *(byte *)((int)piVar1 + 0x46) =
         Spyro.angleAsByte.yaw + (char)*(undefined4 *)(&DAT_80063378 + DAT_80066f5c * 0x10);
    MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&VStack_20,&VStack_20);
    VectorAdd((Vec3 *)(piVar1 + 3),&Spyro.position,&VStack_20);
    *(undefined *)((int)piVar1 + 0x4f) = 0x7f;
    *(undefined *)(iVar2 + 2) = 3;
    *(undefined *)(iVar2 + 1) = 2;
    *(byte *)(iVar2 + 3) = Spyro.angleAsByte.yaw;
  }
  return piVar1;
}



bool FUN_8003cbf0(int param_1)

{
  bool bVar1;
  int iVar2;
  Vec3 local_18;
  
  if (*(char *)(param_1 + 0x4d) == '\0') {
    return false;
  }
  VectorSubtract(&local_18,(Vec3 *)(param_1 + 0xc),&cameraPosition);
  iVar2 = VectorLength(&local_18,1);
  if (0x4000 < iVar2) {
    iVar2 = FUN_8001b6ac(iVar2);
    iVar2 = iVar2 + -0xf;
    if (-1 < iVar2) goto LAB_8003cc60;
  }
  iVar2 = 0;
LAB_8003cc60:
  FUN_8001c040(&local_18,(Vec3 *)(param_1 + 0xc),iVar2);
  bVar1 = false;
  if ((0 < local_18.z) && (local_18.x - 1U < 0x1ff)) {
    bVar1 = local_18.y - 0xdU < 0xd7;
  }
  return bVar1;
}



int CalculateLevelPercentage(int param_1)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  uVar2 = 0;
  iVar3 = worldGemsCollectedValue[param_1];
  if (maxOrbsOfWorlds[param_1] != 0) {
    uVar1 = (uint)orbsCollectedFlags[param_1];
    do {
      if ((uVar1 & 1) != 0) {
        iVar3 = iVar3 + 200;
      }
      uVar2 = uVar2 + 1;
      uVar1 = (int)(uint)orbsCollectedFlags[param_1] >> (uVar2 & 0x1f);
    } while ((int)uVar2 < (int)(uint)maxOrbsOfWorlds[param_1]);
  }
  iVar4 = (uint)(byte)maxGemsOfWorlds[param_1] * 100 + (uint)maxOrbsOfWorlds[param_1] * 200;
  if ((((uint)LoadedLevelIDAsBytesArray[param_1] % 10 - 1 < 4) && (param_1 < 0x15)) ||
     ((uint)LoadedLevelIDAsBytesArray[param_1] % 10 == 6)) {
    if (worldsCompleted[param_1] != false) {
      iVar3 = iVar3 + 500;
    }
    iVar4 = iVar4 + 500;
  }
  iVar5 = (iVar3 * 100) / iVar4;
  if (iVar4 == 0) {
    trap(0x1c00);
  }
  if ((iVar4 == -1) && (iVar3 * 100 == -0x80000000)) {
    trap(0x1800);
  }
  if ((iVar3 != 0) && (iVar5 == 0)) {
    iVar5 = 1;
  }
  return iVar5;
}



// WARNING: Instruction at (ram,0x8003db24) overlaps instruction at (ram,0x8003db20)
// 
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 FUN_8003ce38(Vec3 *param_1,Vec3 *param_2,uint param_3,uint param_4,undefined *param_5)

{
  bool bVar1;
  undefined *puVar2;
  uint uVar3;
  undefined4 uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  int *piVar8;
  int iVar9;
  uint uVar10;
  undefined uVar11;
  uint uVar12;
  undefined uVar13;
  uint uVar14;
  int *piVar15;
  int iVar16;
  ushort *puVar17;
  int iVar18;
  ushort *puVar19;
  int iVar20;
  int iVar21;
  int iVar22;
  uint *puVar23;
  uint uVar24;
  uint uVar25;
  int iVar26;
  int iVar27;
  int iVar28;
  int iVar29;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  int iVar30;
  uint uVar31;
  undefined4 unaff_s2;
  int iVar32;
  int *piVar33;
  int iVar34;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  uint uVar35;
  undefined4 unaff_s5;
  uint uVar36;
  undefined4 unaff_s6;
  uint uVar37;
  undefined4 unaff_s7;
  uint uVar38;
  int iVar39;
  uint uVar40;
  uint uVar41;
  int iVar42;
  undefined4 *puVar43;
  Triangle *pTVar44;
  undefined4 unaff_s8;
  uint *puVar45;
  undefined4 unaff_retaddr;
  int *piVar46;
  undefined *puVar47;
  undefined auStackX_0 [16];
  
  DAT_8006aa0c = &DAT_80066d38;
  DAT_1f8000bc = 0x40000000;
  _DAT_1f8000c4 = (uint *)&DAT_1f800000;
  _DAT_1f8000d4 = param_5;
  uVar35 = param_1->x;
  uVar36 = param_1->y;
  uVar37 = param_1->z;
  uVar38 = param_2->x;
  uVar40 = param_2->y;
  uVar41 = param_2->z;
  uVar4 = 0;
  DAT_1f8000c8 = param_3;
  _DAT_1f8000d0 = param_4;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  if (-1 < (int)(uVar35 | uVar36 | uVar37 | uVar38 | uVar40 | uVar41)) {
    DAT_1f800098 = uVar35;
    DAT_1f80009c = uVar38;
    if (0 < (int)(uVar35 - uVar38)) {
      DAT_1f800098 = uVar38;
      DAT_1f80009c = uVar35;
    }
    _DAT_1f8000a0 = uVar36;
    _DAT_1f8000a4 = uVar40;
    if (0 < (int)(uVar36 - uVar40)) {
      _DAT_1f8000a0 = uVar40;
      _DAT_1f8000a4 = uVar36;
    }
    DAT_1f8000a8 = uVar37;
    DAT_1f8000ac = uVar41;
    if (0 < (int)(uVar37 - uVar41)) {
      DAT_1f8000a8 = uVar41;
      DAT_1f8000ac = uVar37;
    }
    piVar46 = (int *)&DAT_1f800080;
    do {
      piVar15 = piVar46 + 2;
      iVar9 = ((uint)piVar46[7] >> 4) + 1;
      *piVar46 = iVar9 - ((uint)piVar46[6] >> 4);
      piVar46[1] = iVar9;
      iVar9 = DAT_80067174;
      piVar46 = piVar15;
    } while ((uint *)piVar15 != &DAT_1f800098);
    uVar3 = uVar35 >> 0xc;
    uVar5 = uVar36 >> 0xc;
    uVar7 = uVar37 >> 0xc;
    uVar10 = uVar38 >> 0xc;
    uVar12 = uVar40 >> 0xc;
    uVar14 = uVar41 >> 0xc;
    DAT_1f800002 = (undefined2)uVar3;
    DAT_1f800000._1_1_ = (undefined)uVar5;
    DAT_1f800000._0_1_ = (undefined)uVar7;
    uVar13 = (undefined)uVar14;
    uVar11 = (undefined)uVar12;
    if (uVar3 == uVar10) {
      DAT_1f800006 = DAT_1f800002;
      if (uVar5 == uVar12) {
        if (uVar7 == uVar14) {
          piVar46 = (int *)&DAT_1f800004;
        }
        else {
          piVar46 = (int *)&DAT_1f800008;
          DAT_1f800004._0_1_ = uVar13;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        }
      }
      else {
        DAT_1f800004._1_1_ = uVar11;
        if (uVar7 == uVar14) {
          piVar46 = (int *)&DAT_1f800008;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        }
        else {
          piVar46 = (int *)&DAT_1f800010;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800008._0_1_ = uVar13;
          DAT_1f800008._1_1_ = DAT_1f800000._1_1_;
          DAT_1f80000a = DAT_1f800002;
          DAT_1f80000c = uVar13;
          DAT_1f80000d = uVar11;
          DAT_1f80000e = DAT_1f800002;
        }
      }
    }
    else {
      DAT_1f800006 = (undefined2)uVar10;
      if (uVar5 == uVar12) {
        if (uVar7 == uVar14) {
          piVar46 = (int *)&DAT_1f80000c;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
          DAT_1f80000a = DAT_1f800002;
        }
        else {
          piVar46 = (int *)&DAT_1f800010;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
          DAT_1f800008._0_1_ = uVar13;
          DAT_1f800008._1_1_ = DAT_1f800000._1_1_;
          DAT_1f80000a = DAT_1f800002;
          DAT_1f80000c = uVar13;
          DAT_1f80000d = DAT_1f800000._1_1_;
          DAT_1f80000e = DAT_1f800006;
        }
      }
      else {
        DAT_1f800008._1_1_ = uVar11;
        if (uVar7 == uVar14) {
          piVar46 = (int *)&DAT_1f800010;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
          DAT_1f800008._0_1_ = (undefined)DAT_1f800000;
          DAT_1f80000a = DAT_1f800002;
          DAT_1f80000c = (undefined)DAT_1f800000;
          DAT_1f80000d = uVar11;
          DAT_1f80000e = DAT_1f800006;
        }
        else {
          piVar46 = (int *)&DAT_1f800020;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
          DAT_1f800008._0_1_ = (undefined)DAT_1f800000;
          DAT_1f80000a = DAT_1f800002;
          DAT_1f80000c = (undefined)DAT_1f800000;
          DAT_1f80000d = uVar11;
          DAT_1f80000e = DAT_1f800006;
          DAT_1f800010._0_1_ = uVar13;
          DAT_1f800010._1_1_ = DAT_1f800000._1_1_;
          DAT_1f800012 = DAT_1f800002;
          DAT_1f800014._0_1_ = uVar13;
          DAT_1f800014._1_1_ = uVar11;
          DAT_1f800016 = DAT_1f800002;
          DAT_1f800018._0_1_ = uVar13;
          DAT_1f800018._1_1_ = DAT_1f800000._1_1_;
          DAT_1f80001a = DAT_1f800006;
          DAT_1f80001c._0_1_ = uVar13;
          DAT_1f80001c._1_1_ = uVar11;
          _DAT_1f80001e = DAT_1f800006;
        }
      }
    }
    iVar39 = uVar38 - uVar35;
    uVar40 = uVar40 - uVar36;
    iVar42 = uVar41 - uVar37;
    uVar38 = uVar3;
    if (0 < (int)(uVar3 - uVar10)) {
      uVar38 = uVar10;
      uVar10 = uVar3;
    }
    uVar41 = uVar38 - 1 >> 1;
    if ((int)(uVar38 - 1) < 0) {
      uVar41 = 0;
    }
    uVar38 = uVar5;
    if (0 < (int)(uVar5 - uVar12)) {
      uVar38 = uVar12;
      uVar12 = uVar5;
    }
    uVar3 = uVar38 - 1 >> 1;
    if ((int)(uVar38 - 1) < 0) {
      uVar3 = 0;
    }
    iVar6 = uVar3 << 7;
    iVar21 = uVar41 * 4;
    do {
      do {
        piVar15 = piVar46;
        *piVar15 = iVar21 + iVar6 + iVar9;
        piVar46 = piVar15 + 1;
        bVar1 = iVar21 != (uVar10 + 1 >> 1) << 2;
        iVar21 = iVar21 + 4;
      } while (bVar1);
      bVar1 = iVar6 != (uVar12 + 1 >> 1) << 7;
      iVar6 = iVar6 + 0x80;
      iVar21 = uVar41 * 4;
    } while (bVar1);
    *piVar46 = iVar9;
    piVar15[2] = 0;
    puVar43 = &DAT_80066d38;
LAB_8003d150:
    uVar38 = *_DAT_1f8000c4;
    _DAT_1f8000c4 = _DAT_1f8000c4 + 1;
    if (0 < (int)uVar38) {
      uVar10 = uVar38 >> 8 & 0xff;
      uVar41 = uVar38 >> 0x10 & 0xff;
      puVar17 = (ushort *)TerrainCollisionData->field3_0xc;
      pTVar44 = TerrainCollisionData->triangles;
      puVar19 = (ushort *)((uint)puVar17[(uVar38 & 0xff) + 1] + (int)puVar17);
      if ((puVar17[(uVar38 & 0xff) + 1] != 0xffff) && (0 < (int)((uint)*puVar17 - (uVar38 & 0xff))))
      {
        uVar38 = (uint)puVar19[uVar10 + 1];
        puVar17 = (ushort *)(uVar38 + (int)puVar17);
        if ((uVar38 != 0xffff) && (0 < (int)(*puVar19 - uVar10))) {
          uVar38 = (uint)puVar17[uVar41 + 1];
          if ((0 < (int)(*puVar17 - uVar41)) && (uVar38 != 0xffff)) {
            puVar45 = (uint *)((int)(TerrainCollisionData->field4_0x10 + uVar38 * 2) + 2);
            puVar2 = (undefined *)
                     ((int)*(short *)(TerrainCollisionData->field4_0x10 + uVar38 * 2) & 0x7fff);
LAB_8003d6d8:
            puVar47 = puVar2;
            puVar43 = (undefined4 *)puVar47;
            if (-1 < (int)puVar47) {
              puVar43 = (undefined4 *)(int)*(short *)puVar45;
              puVar45 = (uint *)((int)puVar45 + 2);
              puVar23 = (uint *)((int)pTVar44 + (int)puVar47 * 0xc);
              uVar41 = puVar23[2];
              iVar9 = (uVar41 & 0x3fff) - _DAT_1f800094;
              uVar38 = uVar41 >> 0x18;
              puVar2 = (undefined *)puVar43;
              if ((iVar9 < 1) &&
                 (uVar10 = uVar41 >> 0x10 & 0xff, iVar9 = iVar9 + DAT_1f800090,
                 -1 < (int)(iVar9 + uVar10 & iVar9 + uVar38))) {
                uVar12 = puVar23[1];
                iVar9 = (int)uVar12 >> 0x17;
                iVar21 = (int)(uVar12 << 9) >> 0x17;
                uVar3 = (uVar12 & 0x3fff) - DAT_1f80008c;
                uVar5 = uVar3 + DAT_1f800088;
                if (((int)(uVar3 | uVar3 + iVar21 | uVar3 + iVar9) < 1) &&
                   (-1 < (int)(uVar5 & uVar5 + iVar21 & uVar5 + iVar9))) {
                  uVar3 = *puVar23;
                  iVar6 = (int)uVar3 >> 0x17;
                  iVar32 = (int)(uVar3 << 9) >> 0x17;
                  uVar5 = (uVar3 & 0x3fff) - _DAT_1f800084;
                  uVar7 = uVar5 + _DAT_1f800080;
                  if (((int)(uVar5 | uVar5 + iVar32 | uVar5 + iVar6) < 1) &&
                     (uVar5 = uVar7 + iVar6, DAT_1f8000d8 = uVar41,
                     -1 < (int)(uVar7 & uVar7 + iVar32 & uVar5))) {
                    uVar41 = (uVar41 & 0x8000) >> 0xf;
                    iVar20 = (uVar3 & 0x3fff) << 4;
                    iVar30 = (uVar12 & 0x3fff) << 4;
                    iVar34 = (uVar41 & 0x3fff) << 4;
                    iVar27 = iVar6 >> uVar41;
                    iVar28 = iVar9 >> uVar41;
                    iVar29 = (int)uVar38 >> uVar41;
                    iVar22 = iVar32 >> uVar41;
                    iVar16 = iVar21 >> uVar41;
                    iVar18 = (int)uVar10 >> uVar41;
                    do {
                      gte_ldsv_(iVar22,iVar16,iVar18);
                      gte_ldR11R12(iVar27);
                      gte_ldR22R23(iVar28);
                      gte_ldR33(iVar29);
                      uVar41 = uVar35 - iVar20;
                      iVar27 = uVar36 - iVar30;
                      gte_op0_b(0);
                      uVar12 = uVar37 - iVar34;
                      iVar28 = uVar12 + iVar42;
                      gte_ldR11R12(iVar27 * 0x10000 + (uVar41 & 0xffff));
                      gte_ldR13R21(iVar39 * 0x10000 + (uVar12 & 0xffff));
                      gte_ldR22R23(iVar42 * 0x10000 + (uVar40 & 0xffff));
                      uVar7 = uVar41 + iVar39 & 0xffff;
                      uVar3 = (iVar27 + uVar40) * 0x10000 + uVar7;
                      gte_ldR31R32(uVar3);
                      gte_ldR33(iVar28);
                      read_mt(uVar3,uVar7,uVar5);
                      gte_rtir_sf0_b();
                      _DAT_1f8000b0 = iVar20;
                      _DAT_1f8000b4 = iVar30;
                      DAT_1f8000b8 = iVar34;
                      if ((DAT_1f8000c8 & 2) == 0) {
                        uVar14 = gte_stMAC1();
                        iVar29 = gte_stMAC3();
                        if ((-1 < (int)uVar14) && (uVar31 = uVar14, iVar29 < 0)) goto LAB_8003d8dc;
                      }
                      else {
                        uVar14 = gte_stMAC1();
                        uVar31 = gte_stMAC3();
                        if ((int)(uVar14 ^ uVar31) < 0) {
                          uVar31 = uVar14;
                          if ((int)uVar14 < 0) {
                            uVar31 = -uVar14;
                          }
LAB_8003d8dc:
                          gte_ldLZCS(uVar31);
                          iVar29 = gte_stLZCR();
                          iVar22 = gte_stMAC2();
                          uVar24 = iVar29 - 2;
                          if (-1 < iVar29 + -0xe) {
                            uVar24 = 0xc;
                          }
                          uVar25 = 0xc - uVar24;
                          iVar22 = iVar22 >> (uVar25 & 0x1f);
                          iVar29 = (int)(uVar14 << (uVar24 & 0x1f)) / iVar22;
                          if (-1 < (int)puVar47) {
                            iVar6 = iVar6 << 4;
                            iVar9 = iVar9 << 4;
                            uVar38 = uVar38 << 4;
                            iVar32 = iVar32 << 4;
                            iVar21 = iVar21 << 4;
                            uVar10 = uVar10 << 4;
                          }
                          gte_ldsv_(iVar39,uVar40,iVar42);
                          gte_ldIR0(iVar29);
                          gte_gpf0(0);
                          read_mt(iVar29,uVar25,iVar28);
                          iVar29 = iVar29 >> 0xc;
                          iVar26 = (int)uVar25 >> 0xc;
                          iVar28 = iVar28 >> 0xc;
                          gte_ldsv_(iVar29,iVar26,iVar28);
                          iVar16 = uVar41 - iVar29;
                          iVar27 = iVar27 - iVar26;
                          gte_sqr0_b(0);
                          iVar18 = uVar12 - iVar28;
                          read_mt(iVar29,iVar26,iVar28);
                          _DAT_1f8000c0 = iVar29 + iVar26 + iVar28;
                          if (_DAT_1f8000c0 - DAT_1f8000bc < 0) {
                            gte_ldR13R21(uVar5);
                            uVar41 = uVar7 << 0x10 | uVar3 & 0xffff;
                            gte_ldsv_(iVar6,iVar9,uVar38);
                            gte_ldR11R12(iVar16);
                            gte_ldR22R23(iVar27);
                            gte_ldR33(iVar18);
                            gte_op0(0);
                            read_mt(DAT_1f8000bc,iVar22,uVar31);
                            gte_ldsv_(DAT_1f8000bc >> 10,iVar22 >> 10,(int)uVar31 >> 10);
                            gte_ldR11R12(uVar41);
                            gte_rtir_sf0();
                            iVar28 = gte_stMAC1();
                            if (iVar28 < 1) {
                              gte_ldsv_(iVar16,iVar27,iVar18);
                              gte_ldR11R12(iVar32);
                              gte_ldR22R23(iVar21);
                              gte_ldR33(uVar10);
                              gte_op0(0);
                              read_mt(iVar28,iVar22 >> 10,(int)uVar31 >> 10);
                              gte_ldsv_(iVar28 >> 10,iVar22 >> 0x14,(int)uVar31 >> 0x14);
                              gte_ldR11R12(uVar41);
                              gte_rtir_sf0();
                              iVar28 = gte_stMAC1();
                              if (iVar28 < 1) {
                                gte_ldsv_(iVar32 - iVar6,iVar21 - iVar9,uVar10 - uVar38);
                                gte_ldR11R12(iVar16 - iVar6);
                                gte_ldR22R23(iVar27 - iVar9);
                                gte_ldR33(iVar18 - uVar38);
                                gte_op0(0);
                                read_mt(iVar28,iVar22 >> 0x14,(int)uVar31 >> 0x14);
                                gte_ldsv_(iVar28 >> 10,iVar22 >> 0x1e,(int)uVar31 >> 0x1e);
                                gte_ldR11R12(uVar41);
                                gte_rtir_sf0();
                                iVar9 = gte_stMAC1();
                                if ((iVar9 < 1) &&
                                   (((DAT_1f8000c8 & 4) == 0 || ((DAT_1f8000d8 & 0x4000) == 0)))) {
                                  isOnWaterSurface = (DAT_1f8000d8 & 0x4000) >> 0xc;
                                  Vec3_8006ab70.x = iVar20 + iVar16;
                                  Vec3_8006ab70.y = iVar30 + iVar27;
                                  Vec3_8006ab70.z = iVar34 + iVar18;
                                  uVar38 = DAT_1f8000c8 & 1;
                                  Vec3_8006ab88.x = uVar3;
                                  Vec3_8006ab88.y = uVar7;
                                  Vec3_8006ab88.z = uVar5;
                                  if (-1 < (int)puVar47) {
                                    DAT_8006aba0 = (undefined *)0x0;
                                    DAT_8006ab94 = 0xff;
                                    if (0 < (int)(TerrainCollisionData->collisionFlagsOffset -
                                                 (int)puVar47)) {
                                      DAT_8006ab94 = (uint)TerrainCollisionData->collisionFlags
                                                           [(int)puVar47];
                                    }
                                    DAT_8006ab98 = 0xfe;
                                    if (0 < (int)(TerrainCollisionData->field2_0x8 - (int)puVar47))
                                    {
                                      DAT_8006ab98 = (uint)(byte)TerrainCollisionData->field7_0x1c
                                                                 [(int)puVar47];
                                    }
                                    puVar2 = (undefined *)puVar43;
                                    DAT_1f8000bc = _DAT_1f8000c0;
                                    overTriangleIndex = puVar47;
                                    if (uVar38 != 0) goto LAB_8003dc10;
                                    break;
                                  }
                                  overTriangleIndex = (undefined *)((uint)puVar45 | 0x80000000);
                                  isOnWaterSurface = 0;
                                  DAT_8006aba0 = puVar47;
                                  *(uint *)(puVar47 + 0x18) =
                                       _DAT_1f8000d0 | *(uint *)(puVar47 + 0x18);
                                  DAT_8006ab94 = 0xff;
                                  DAT_8006ab98 = 0xfe;
                                  DAT_1f8000bc = _DAT_1f8000c0;
                                  if (uVar38 != 0) goto LAB_8003dc10;
                                }
                              }
                            }
                          }
                        }
                      }
                      do {
                        do {
                          do {
                            do {
                              while( true ) {
                                puVar2 = (undefined *)puVar43;
                                if (-1 < (int)puVar47) goto LAB_8003d6d8;
                                puVar43 = (undefined4 *)*puVar45;
                                puVar45 = puVar45 + 1;
                                if (-1 < (int)puVar43) break;
LAB_8003d174:
                                do {
                                  do {
                                    do {
                                      do {
                                        puVar47 = *(undefined **)(puVar47 + 4);
                                        puVar45 = *(uint **)(puVar47 + 8);
                                        if (puVar47 == (undefined *)0x0) goto LAB_8003d150;
                                        iVar9 = *(int *)(puVar47 + 0xc);
                                      } while ((puVar47 == _DAT_1f8000d4) ||
                                              (puVar45 == (uint *)0x0));
                                      uVar38 = *puVar45 >> 0x10;
                                      uVar41 = *puVar45 & 0xff;
                                    } while (uVar38 == 0);
                                    iVar21 = uVar41 * 0x20;
                                  } while (((((-1 < (int)((DAT_1f800098 + uVar41 * -0x20) - iVar9))
                                             || (iVar6 = *(int *)(puVar47 + 0x10),
                                                (int)((DAT_1f80009c + iVar21) - iVar9) < 1)) ||
                                            (-1 < (int)((_DAT_1f8000a0 + uVar41 * -0x20) - iVar6)))
                                           || ((iVar32 = *(int *)(puVar47 + 0x14),
                                               (int)((_DAT_1f8000a4 + iVar21) - iVar6) < 1 ||
                                               (-1 < (int)((DAT_1f8000a8 + uVar41 * -0x20) - iVar32)
                                               )))) || ((int)((DAT_1f8000ac + iVar21) - iVar32) < 1)
                                          );
                                  gte_ldR11R12(*(undefined4 *)(puVar47 + 0x20));
                                  gte_ldR13R21(*(undefined4 *)(puVar47 + 0x24));
                                  gte_ldR22R23(*(undefined4 *)(puVar47 + 0x28));
                                  gte_ldR31R32(*(undefined4 *)(puVar47 + 0x2c));
                                  gte_ldR33(*(undefined4 *)(puVar47 + 0x30));
                                  uVar41 = *(uint *)(puVar47 + 0x3c);
                                  iVar21 = (&objectModels[*(ushort *)(puVar47 + 0x36)][2].field3_0xc
                                           )[uVar41 & 0xff];
                                  uVar10 = (uint)*(char *)(iVar21 + 2);
                                  piVar46 = (int *)((*(uint *)(iVar21 + (uVar41 >> 0xd & 0x7f8) +
                                                              0x24) & 0xffff) * 2 +
                                                   *(int *)(iVar21 + 0x20));
                                  uVar38 = uVar38 & 0x7f;
                                  if ((byte)(&DAT_80062868)[(byte)puVar47[0x40]] == 0) {
                                    iVar22 = *piVar46;
                                    iVar21 = 0x40000000;
                                    iVar27 = 0;
                                    iVar28 = 0x40000000;
                                    iVar29 = 0;
                                    piVar15 = (int *)&DAT_1f800100;
                                    do {
                                      piVar46 = piVar46 + 1;
                                      gte_ldIR3(iVar22 >> 0x15);
                                      gte_ldIR1((iVar22 << 10) >> 0x15);
                                      gte_ldIR2((iVar22 << 0x14) >> 0x14);
                                      piVar33 = piVar15 + 3;
                                      gte_rtir_b();
                                      iVar22 = *piVar46;
                                      iVar16 = gte_stMAC3();
                                      iVar18 = gte_stMAC1();
                                      iVar20 = gte_stMAC2();
                                      iVar16 = (iVar16 << (uVar10 & 0x1f)) + iVar9;
                                      iVar18 = iVar6 - (iVar18 << (uVar10 & 0x1f));
                                      piVar15[2] = iVar32 - (iVar20 << (uVar10 & 0x1f));
                                      if (0 < iVar21 - iVar16) {
                                        iVar21 = iVar16;
                                      }
                                      if (iVar27 - iVar16 < 0) {
                                        iVar27 = iVar16;
                                      }
                                      if (0 < iVar28 - iVar18) {
                                        iVar28 = iVar18;
                                      }
                                      *piVar15 = iVar16;
                                      if (iVar29 - iVar18 < 0) {
                                        iVar29 = iVar18;
                                      }
                                      piVar15[1] = iVar18;
                                      piVar15 = piVar33;
                                    } while (piVar33 != (int *)(&DAT_1f800100 + uVar38 * 6));
                                  }
                                  else {
                                    iVar21 = *(int *)((int)&objectModels
                                                            [*(ushort *)(puVar47 + 0x36)][2].
                                                            field3_0xc + (uVar41 >> 6 & 0x3fc));
                                    iVar22 = *piVar46;
                                    piVar33 = (int *)((*(uint *)(iVar21 + (uVar41 >> 0x15 & 0x7f8) +
                                                                0x24) & 0xffff) * 2 +
                                                     *(int *)(iVar21 + 0x20));
                                    gte_ldIR0((uint)(byte)(&DAT_80062868)[(byte)puVar47[0x40]] << 4)
                                    ;
                                    iVar21 = 0x40000000;
                                    iVar27 = 0;
                                    iVar28 = 0x40000000;
                                    iVar29 = 0;
                                    piVar15 = (int *)&DAT_1f800100;
                                    do {
                                      piVar46 = piVar46 + 1;
                                      iVar20 = *piVar33;
                                      gte_ldsv_(iVar22 >> 0x15,(iVar22 << 10) >> 0x15,
                                                (iVar22 << 0x14) >> 0x14);
                                      iVar16 = iVar20 >> 0x15;
                                      iVar18 = (iVar20 << 10) >> 0x15;
                                      iVar20 = (iVar20 << 0x14) >> 0x14;
                                      gte_ldfcdir(iVar16,iVar18,iVar20);
                                      piVar33 = piVar33 + 1;
                                      gte_intpl_b();
                                      iVar22 = *piVar46;
                                      piVar8 = piVar15 + 3;
                                      read_mt(iVar16,iVar18,iVar20);
                                      gte_ldIR3(iVar16);
                                      gte_ldIR1(iVar18);
                                      gte_ldIR2(iVar20);
                                      gte_rtir();
                                      iVar16 = gte_stMAC3();
                                      iVar18 = gte_stMAC1();
                                      iVar20 = gte_stMAC2();
                                      iVar16 = (iVar16 << (uVar10 & 0x1f)) + iVar9;
                                      iVar18 = iVar6 - (iVar18 << (uVar10 & 0x1f));
                                      piVar15[2] = iVar32 - (iVar20 << (uVar10 & 0x1f));
                                      if (0 < iVar21 - iVar16) {
                                        iVar21 = iVar16;
                                      }
                                      if (iVar27 - iVar16 < 0) {
                                        iVar27 = iVar16;
                                      }
                                      if (0 < iVar28 - iVar18) {
                                        iVar28 = iVar18;
                                      }
                                      *piVar15 = iVar16;
                                      if (iVar29 - iVar18 < 0) {
                                        iVar29 = iVar18;
                                      }
                                      piVar15[1] = iVar18;
                                      piVar15 = piVar8;
                                    } while (piVar8 != (int *)(&DAT_1f800100 + uVar38 * 6));
                                  }
                                  puVar45 = puVar45 + 1;
                                  pTVar44 = (Triangle *)&DAT_1f800100;
                                } while (((0 < (int)(DAT_1f800098 - iVar27)) ||
                                         ((int)(DAT_1f80009c - iVar21) < 0)) ||
                                        ((0 < (int)(_DAT_1f8000a0 - iVar29) ||
                                         ((int)(_DAT_1f8000a4 - iVar28) < 0))));
                              }
                              piVar33 = (int *)((int)pTVar44 +
                                               ((uint)puVar43 >> 0x15 & 0x1f8) +
                                               (((uint)puVar43 >> 0x15 & 0x1f8) >> 1));
                              iVar20 = *piVar33;
                              piVar15 = (int *)((int)pTVar44 +
                                               ((uint)puVar43 >> 0xd & 0x1f8) +
                                               (((uint)puVar43 >> 0xd & 0x1f8) >> 1));
                              iVar32 = *piVar15;
                              piVar46 = (int *)((int)pTVar44 +
                                               ((uint)puVar43 >> 5 & 0x1f8) +
                                               (((uint)puVar43 >> 5 & 0x1f8) >> 1));
                              iVar6 = *piVar46;
                            } while (((int)(iVar6 - DAT_1f800098 & iVar32 - DAT_1f800098 &
                                           iVar20 - DAT_1f800098) < 0) ||
                                    (iVar30 = piVar33[1],
                                    (int)(DAT_1f80009c - iVar6 & DAT_1f80009c - iVar32 &
                                         DAT_1f80009c - iVar20) < 0));
                            iVar21 = piVar15[1];
                            iVar9 = piVar46[1];
                          } while (((int)(iVar9 - _DAT_1f8000a0 & iVar21 - _DAT_1f8000a0 &
                                         iVar30 - _DAT_1f8000a0) < 0) ||
                                  (iVar34 = piVar33[2],
                                  (int)(_DAT_1f8000a4 - iVar9 & _DAT_1f8000a4 - iVar21 &
                                       _DAT_1f8000a4 - iVar30) < 0));
                          iVar28 = piVar15[2];
                          iVar27 = piVar46[2];
                        } while ((int)(iVar27 - DAT_1f8000a8 & iVar28 - DAT_1f8000a8 &
                                      iVar34 - DAT_1f8000a8) < 0);
                        uVar5 = DAT_1f8000ac - iVar34;
                        iVar6 = iVar6 - iVar20;
                      } while ((int)(DAT_1f8000ac - iVar27 & DAT_1f8000ac - iVar28 & uVar5) < 0);
                      iVar9 = iVar9 - iVar30;
                      uVar38 = iVar27 - iVar34;
                      iVar32 = iVar32 - iVar20;
                      iVar21 = iVar21 - iVar30;
                      uVar10 = iVar28 - iVar34;
                      iVar27 = iVar6 >> 5;
                      iVar28 = iVar9 >> 5;
                      iVar29 = (int)uVar38 >> 5;
                      iVar22 = iVar32 >> 5;
                      iVar16 = iVar21 >> 5;
                      iVar18 = (int)uVar10 >> 5;
                      DAT_1f8000d8 = 0;
                    } while( true );
                  }
                }
              }
              goto LAB_8003d6d8;
            }
          }
        }
      }
      goto LAB_8003d150;
    }
    puVar47 = (undefined *)(uVar38 - 4);
    if (uVar38 != 0) goto LAB_8003d174;
LAB_8003dc10:
    uVar4 = 0;
    if (DAT_1f8000bc != 0x40000000) {
      uVar4 = 1;
    }
  }
  return uVar4;
}



// WARNING: Instruction at (ram,0x8003db24) overlaps instruction at (ram,0x8003db20)
// 
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 FUN_8003ce94(Vec3 *param_1,Vec3 *param_2)

{
  bool bVar1;
  undefined *puVar2;
  uint uVar3;
  undefined4 uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  int *piVar8;
  int iVar9;
  uint uVar10;
  undefined uVar11;
  uint uVar12;
  undefined uVar13;
  uint uVar14;
  int *piVar15;
  int iVar16;
  ushort *puVar17;
  int iVar18;
  ushort *puVar19;
  int iVar20;
  int iVar21;
  int iVar22;
  uint *puVar23;
  uint uVar24;
  uint uVar25;
  int iVar26;
  int iVar27;
  int iVar28;
  int iVar29;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  int iVar30;
  uint uVar31;
  undefined4 unaff_s2;
  int iVar32;
  int *piVar33;
  int iVar34;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  uint uVar35;
  undefined4 unaff_s5;
  uint uVar36;
  undefined4 unaff_s6;
  uint uVar37;
  undefined4 unaff_s7;
  uint uVar38;
  int iVar39;
  uint uVar40;
  uint uVar41;
  int iVar42;
  undefined4 *puVar43;
  Triangle *pTVar44;
  undefined4 unaff_s8;
  uint *puVar45;
  undefined4 unaff_retaddr;
  int *piVar46;
  undefined *puVar47;
  undefined auStackX_0 [16];
  
  DAT_8006aa0c = &DAT_80066d38;
  DAT_1f8000bc = 0x40000000;
  _DAT_1f8000c4 = (uint *)&DAT_1f800000;
  DAT_1f8000c8 = 0;
  _DAT_1f8000d0 = 0;
  _DAT_1f8000d4 = (undefined *)0x0;
  uVar35 = param_1->x;
  uVar36 = param_1->y;
  uVar37 = param_1->z;
  uVar38 = param_2->x;
  uVar40 = param_2->y;
  uVar41 = param_2->z;
  uVar4 = 0;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  if (-1 < (int)(uVar35 | uVar36 | uVar37 | uVar38 | uVar40 | uVar41)) {
    DAT_1f800098 = uVar35;
    DAT_1f80009c = uVar38;
    if (0 < (int)(uVar35 - uVar38)) {
      DAT_1f800098 = uVar38;
      DAT_1f80009c = uVar35;
    }
    _DAT_1f8000a0 = uVar36;
    _DAT_1f8000a4 = uVar40;
    if (0 < (int)(uVar36 - uVar40)) {
      _DAT_1f8000a0 = uVar40;
      _DAT_1f8000a4 = uVar36;
    }
    DAT_1f8000a8 = uVar37;
    DAT_1f8000ac = uVar41;
    if (0 < (int)(uVar37 - uVar41)) {
      DAT_1f8000a8 = uVar41;
      DAT_1f8000ac = uVar37;
    }
    piVar46 = (int *)&DAT_1f800080;
    do {
      piVar15 = piVar46 + 2;
      iVar9 = ((uint)piVar46[7] >> 4) + 1;
      *piVar46 = iVar9 - ((uint)piVar46[6] >> 4);
      piVar46[1] = iVar9;
      iVar9 = DAT_80067174;
      piVar46 = piVar15;
    } while ((uint *)piVar15 != &DAT_1f800098);
    uVar3 = uVar35 >> 0xc;
    uVar5 = uVar36 >> 0xc;
    uVar7 = uVar37 >> 0xc;
    uVar10 = uVar38 >> 0xc;
    uVar12 = uVar40 >> 0xc;
    uVar14 = uVar41 >> 0xc;
    DAT_1f800002 = (undefined2)uVar3;
    DAT_1f800000._1_1_ = (undefined)uVar5;
    DAT_1f800000._0_1_ = (undefined)uVar7;
    uVar13 = (undefined)uVar14;
    uVar11 = (undefined)uVar12;
    if (uVar3 == uVar10) {
      DAT_1f800006 = DAT_1f800002;
      if (uVar5 == uVar12) {
        if (uVar7 == uVar14) {
          piVar46 = (int *)&DAT_1f800004;
        }
        else {
          piVar46 = (int *)&DAT_1f800008;
          DAT_1f800004._0_1_ = uVar13;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        }
      }
      else {
        DAT_1f800004._1_1_ = uVar11;
        if (uVar7 == uVar14) {
          piVar46 = (int *)&DAT_1f800008;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        }
        else {
          piVar46 = (int *)&DAT_1f800010;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800008._0_1_ = uVar13;
          DAT_1f800008._1_1_ = DAT_1f800000._1_1_;
          DAT_1f80000a = DAT_1f800002;
          DAT_1f80000c = uVar13;
          DAT_1f80000d = uVar11;
          DAT_1f80000e = DAT_1f800002;
        }
      }
    }
    else {
      DAT_1f800006 = (undefined2)uVar10;
      if (uVar5 == uVar12) {
        if (uVar7 == uVar14) {
          piVar46 = (int *)&DAT_1f80000c;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
          DAT_1f80000a = DAT_1f800002;
        }
        else {
          piVar46 = (int *)&DAT_1f800010;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
          DAT_1f800008._0_1_ = uVar13;
          DAT_1f800008._1_1_ = DAT_1f800000._1_1_;
          DAT_1f80000a = DAT_1f800002;
          DAT_1f80000c = uVar13;
          DAT_1f80000d = DAT_1f800000._1_1_;
          DAT_1f80000e = DAT_1f800006;
        }
      }
      else {
        DAT_1f800008._1_1_ = uVar11;
        if (uVar7 == uVar14) {
          piVar46 = (int *)&DAT_1f800010;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
          DAT_1f800008._0_1_ = (undefined)DAT_1f800000;
          DAT_1f80000a = DAT_1f800002;
          DAT_1f80000c = (undefined)DAT_1f800000;
          DAT_1f80000d = uVar11;
          DAT_1f80000e = DAT_1f800006;
        }
        else {
          piVar46 = (int *)&DAT_1f800020;
          DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
          DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
          DAT_1f800008._0_1_ = (undefined)DAT_1f800000;
          DAT_1f80000a = DAT_1f800002;
          DAT_1f80000c = (undefined)DAT_1f800000;
          DAT_1f80000d = uVar11;
          DAT_1f80000e = DAT_1f800006;
          DAT_1f800010._0_1_ = uVar13;
          DAT_1f800010._1_1_ = DAT_1f800000._1_1_;
          DAT_1f800012 = DAT_1f800002;
          DAT_1f800014._0_1_ = uVar13;
          DAT_1f800014._1_1_ = uVar11;
          DAT_1f800016 = DAT_1f800002;
          DAT_1f800018._0_1_ = uVar13;
          DAT_1f800018._1_1_ = DAT_1f800000._1_1_;
          DAT_1f80001a = DAT_1f800006;
          DAT_1f80001c._0_1_ = uVar13;
          DAT_1f80001c._1_1_ = uVar11;
          _DAT_1f80001e = DAT_1f800006;
        }
      }
    }
    iVar39 = uVar38 - uVar35;
    uVar40 = uVar40 - uVar36;
    iVar42 = uVar41 - uVar37;
    uVar38 = uVar3;
    if (0 < (int)(uVar3 - uVar10)) {
      uVar38 = uVar10;
      uVar10 = uVar3;
    }
    uVar41 = uVar38 - 1 >> 1;
    if ((int)(uVar38 - 1) < 0) {
      uVar41 = 0;
    }
    uVar38 = uVar5;
    if (0 < (int)(uVar5 - uVar12)) {
      uVar38 = uVar12;
      uVar12 = uVar5;
    }
    uVar3 = uVar38 - 1 >> 1;
    if ((int)(uVar38 - 1) < 0) {
      uVar3 = 0;
    }
    iVar6 = uVar3 << 7;
    iVar21 = uVar41 * 4;
    do {
      do {
        piVar15 = piVar46;
        *piVar15 = iVar21 + iVar6 + iVar9;
        piVar46 = piVar15 + 1;
        bVar1 = iVar21 != (uVar10 + 1 >> 1) << 2;
        iVar21 = iVar21 + 4;
      } while (bVar1);
      bVar1 = iVar6 != (uVar12 + 1 >> 1) << 7;
      iVar6 = iVar6 + 0x80;
      iVar21 = uVar41 * 4;
    } while (bVar1);
    *piVar46 = iVar9;
    piVar15[2] = 0;
    puVar43 = &DAT_80066d38;
LAB_8003d150:
    uVar38 = *_DAT_1f8000c4;
    _DAT_1f8000c4 = _DAT_1f8000c4 + 1;
    if (0 < (int)uVar38) {
      uVar10 = uVar38 >> 8 & 0xff;
      uVar41 = uVar38 >> 0x10 & 0xff;
      puVar17 = (ushort *)TerrainCollisionData->field3_0xc;
      pTVar44 = TerrainCollisionData->triangles;
      puVar19 = (ushort *)((uint)puVar17[(uVar38 & 0xff) + 1] + (int)puVar17);
      if ((puVar17[(uVar38 & 0xff) + 1] != 0xffff) && (0 < (int)((uint)*puVar17 - (uVar38 & 0xff))))
      {
        uVar38 = (uint)puVar19[uVar10 + 1];
        puVar17 = (ushort *)(uVar38 + (int)puVar17);
        if ((uVar38 != 0xffff) && (0 < (int)(*puVar19 - uVar10))) {
          uVar38 = (uint)puVar17[uVar41 + 1];
          if ((0 < (int)(*puVar17 - uVar41)) && (uVar38 != 0xffff)) {
            puVar45 = (uint *)((int)(TerrainCollisionData->field4_0x10 + uVar38 * 2) + 2);
            puVar2 = (undefined *)
                     ((int)*(short *)(TerrainCollisionData->field4_0x10 + uVar38 * 2) & 0x7fff);
LAB_8003d6d8:
            puVar47 = puVar2;
            puVar43 = (undefined4 *)puVar47;
            if (-1 < (int)puVar47) {
              puVar43 = (undefined4 *)(int)*(short *)puVar45;
              puVar45 = (uint *)((int)puVar45 + 2);
              puVar23 = (uint *)((int)pTVar44 + (int)puVar47 * 0xc);
              uVar41 = puVar23[2];
              iVar9 = (uVar41 & 0x3fff) - _DAT_1f800094;
              uVar38 = uVar41 >> 0x18;
              puVar2 = (undefined *)puVar43;
              if ((iVar9 < 1) &&
                 (uVar10 = uVar41 >> 0x10 & 0xff, iVar9 = iVar9 + DAT_1f800090,
                 -1 < (int)(iVar9 + uVar10 & iVar9 + uVar38))) {
                uVar12 = puVar23[1];
                iVar9 = (int)uVar12 >> 0x17;
                iVar21 = (int)(uVar12 << 9) >> 0x17;
                uVar3 = (uVar12 & 0x3fff) - DAT_1f80008c;
                uVar5 = uVar3 + DAT_1f800088;
                if (((int)(uVar3 | uVar3 + iVar21 | uVar3 + iVar9) < 1) &&
                   (-1 < (int)(uVar5 & uVar5 + iVar21 & uVar5 + iVar9))) {
                  uVar3 = *puVar23;
                  iVar6 = (int)uVar3 >> 0x17;
                  iVar32 = (int)(uVar3 << 9) >> 0x17;
                  uVar5 = (uVar3 & 0x3fff) - _DAT_1f800084;
                  uVar7 = uVar5 + _DAT_1f800080;
                  if (((int)(uVar5 | uVar5 + iVar32 | uVar5 + iVar6) < 1) &&
                     (uVar5 = uVar7 + iVar6, DAT_1f8000d8 = uVar41,
                     -1 < (int)(uVar7 & uVar7 + iVar32 & uVar5))) {
                    uVar41 = (uVar41 & 0x8000) >> 0xf;
                    iVar20 = (uVar3 & 0x3fff) << 4;
                    iVar30 = (uVar12 & 0x3fff) << 4;
                    iVar34 = (uVar41 & 0x3fff) << 4;
                    iVar27 = iVar6 >> uVar41;
                    iVar28 = iVar9 >> uVar41;
                    iVar29 = (int)uVar38 >> uVar41;
                    iVar22 = iVar32 >> uVar41;
                    iVar16 = iVar21 >> uVar41;
                    iVar18 = (int)uVar10 >> uVar41;
                    do {
                      gte_ldsv_(iVar22,iVar16,iVar18);
                      gte_ldR11R12(iVar27);
                      gte_ldR22R23(iVar28);
                      gte_ldR33(iVar29);
                      uVar41 = uVar35 - iVar20;
                      iVar27 = uVar36 - iVar30;
                      gte_op0_b(0);
                      uVar12 = uVar37 - iVar34;
                      iVar28 = uVar12 + iVar42;
                      gte_ldR11R12(iVar27 * 0x10000 + (uVar41 & 0xffff));
                      gte_ldR13R21(iVar39 * 0x10000 + (uVar12 & 0xffff));
                      gte_ldR22R23(iVar42 * 0x10000 + (uVar40 & 0xffff));
                      uVar7 = uVar41 + iVar39 & 0xffff;
                      uVar3 = (iVar27 + uVar40) * 0x10000 + uVar7;
                      gte_ldR31R32(uVar3);
                      gte_ldR33(iVar28);
                      read_mt(uVar3,uVar7,uVar5);
                      gte_rtir_sf0_b();
                      _DAT_1f8000b0 = iVar20;
                      _DAT_1f8000b4 = iVar30;
                      DAT_1f8000b8 = iVar34;
                      if ((DAT_1f8000c8 & 2) == 0) {
                        uVar14 = gte_stMAC1();
                        iVar29 = gte_stMAC3();
                        if ((-1 < (int)uVar14) && (uVar31 = uVar14, iVar29 < 0)) goto LAB_8003d8dc;
                      }
                      else {
                        uVar14 = gte_stMAC1();
                        uVar31 = gte_stMAC3();
                        if ((int)(uVar14 ^ uVar31) < 0) {
                          uVar31 = uVar14;
                          if ((int)uVar14 < 0) {
                            uVar31 = -uVar14;
                          }
LAB_8003d8dc:
                          gte_ldLZCS(uVar31);
                          iVar29 = gte_stLZCR();
                          iVar22 = gte_stMAC2();
                          uVar24 = iVar29 - 2;
                          if (-1 < iVar29 + -0xe) {
                            uVar24 = 0xc;
                          }
                          uVar25 = 0xc - uVar24;
                          iVar22 = iVar22 >> (uVar25 & 0x1f);
                          iVar29 = (int)(uVar14 << (uVar24 & 0x1f)) / iVar22;
                          if (-1 < (int)puVar47) {
                            iVar6 = iVar6 << 4;
                            iVar9 = iVar9 << 4;
                            uVar38 = uVar38 << 4;
                            iVar32 = iVar32 << 4;
                            iVar21 = iVar21 << 4;
                            uVar10 = uVar10 << 4;
                          }
                          gte_ldsv_(iVar39,uVar40,iVar42);
                          gte_ldIR0(iVar29);
                          gte_gpf0(0);
                          read_mt(iVar29,uVar25,iVar28);
                          iVar29 = iVar29 >> 0xc;
                          iVar26 = (int)uVar25 >> 0xc;
                          iVar28 = iVar28 >> 0xc;
                          gte_ldsv_(iVar29,iVar26,iVar28);
                          iVar16 = uVar41 - iVar29;
                          iVar27 = iVar27 - iVar26;
                          gte_sqr0_b(0);
                          iVar18 = uVar12 - iVar28;
                          read_mt(iVar29,iVar26,iVar28);
                          _DAT_1f8000c0 = iVar29 + iVar26 + iVar28;
                          if (_DAT_1f8000c0 - DAT_1f8000bc < 0) {
                            gte_ldR13R21(uVar5);
                            uVar41 = uVar7 << 0x10 | uVar3 & 0xffff;
                            gte_ldsv_(iVar6,iVar9,uVar38);
                            gte_ldR11R12(iVar16);
                            gte_ldR22R23(iVar27);
                            gte_ldR33(iVar18);
                            gte_op0(0);
                            read_mt(DAT_1f8000bc,iVar22,uVar31);
                            gte_ldsv_(DAT_1f8000bc >> 10,iVar22 >> 10,(int)uVar31 >> 10);
                            gte_ldR11R12(uVar41);
                            gte_rtir_sf0();
                            iVar28 = gte_stMAC1();
                            if (iVar28 < 1) {
                              gte_ldsv_(iVar16,iVar27,iVar18);
                              gte_ldR11R12(iVar32);
                              gte_ldR22R23(iVar21);
                              gte_ldR33(uVar10);
                              gte_op0(0);
                              read_mt(iVar28,iVar22 >> 10,(int)uVar31 >> 10);
                              gte_ldsv_(iVar28 >> 10,iVar22 >> 0x14,(int)uVar31 >> 0x14);
                              gte_ldR11R12(uVar41);
                              gte_rtir_sf0();
                              iVar28 = gte_stMAC1();
                              if (iVar28 < 1) {
                                gte_ldsv_(iVar32 - iVar6,iVar21 - iVar9,uVar10 - uVar38);
                                gte_ldR11R12(iVar16 - iVar6);
                                gte_ldR22R23(iVar27 - iVar9);
                                gte_ldR33(iVar18 - uVar38);
                                gte_op0(0);
                                read_mt(iVar28,iVar22 >> 0x14,(int)uVar31 >> 0x14);
                                gte_ldsv_(iVar28 >> 10,iVar22 >> 0x1e,(int)uVar31 >> 0x1e);
                                gte_ldR11R12(uVar41);
                                gte_rtir_sf0();
                                iVar9 = gte_stMAC1();
                                if ((iVar9 < 1) &&
                                   (((DAT_1f8000c8 & 4) == 0 || ((DAT_1f8000d8 & 0x4000) == 0)))) {
                                  isOnWaterSurface = (DAT_1f8000d8 & 0x4000) >> 0xc;
                                  Vec3_8006ab70.x = iVar20 + iVar16;
                                  Vec3_8006ab70.y = iVar30 + iVar27;
                                  Vec3_8006ab70.z = iVar34 + iVar18;
                                  uVar38 = DAT_1f8000c8 & 1;
                                  Vec3_8006ab88.x = uVar3;
                                  Vec3_8006ab88.y = uVar7;
                                  Vec3_8006ab88.z = uVar5;
                                  if (-1 < (int)puVar47) {
                                    DAT_8006aba0 = (undefined *)0x0;
                                    DAT_8006ab94 = 0xff;
                                    if (0 < (int)(TerrainCollisionData->collisionFlagsOffset -
                                                 (int)puVar47)) {
                                      DAT_8006ab94 = (uint)TerrainCollisionData->collisionFlags
                                                           [(int)puVar47];
                                    }
                                    DAT_8006ab98 = 0xfe;
                                    if (0 < (int)(TerrainCollisionData->field2_0x8 - (int)puVar47))
                                    {
                                      DAT_8006ab98 = (uint)(byte)TerrainCollisionData->field7_0x1c
                                                                 [(int)puVar47];
                                    }
                                    puVar2 = (undefined *)puVar43;
                                    DAT_1f8000bc = _DAT_1f8000c0;
                                    overTriangleIndex = puVar47;
                                    if (uVar38 != 0) goto LAB_8003dc10;
                                    break;
                                  }
                                  overTriangleIndex = (undefined *)((uint)puVar45 | 0x80000000);
                                  isOnWaterSurface = 0;
                                  DAT_8006aba0 = puVar47;
                                  *(uint *)(puVar47 + 0x18) =
                                       _DAT_1f8000d0 | *(uint *)(puVar47 + 0x18);
                                  DAT_8006ab94 = 0xff;
                                  DAT_8006ab98 = 0xfe;
                                  DAT_1f8000bc = _DAT_1f8000c0;
                                  if (uVar38 != 0) goto LAB_8003dc10;
                                }
                              }
                            }
                          }
                        }
                      }
                      do {
                        do {
                          do {
                            do {
                              while( true ) {
                                puVar2 = (undefined *)puVar43;
                                if (-1 < (int)puVar47) goto LAB_8003d6d8;
                                puVar43 = (undefined4 *)*puVar45;
                                puVar45 = puVar45 + 1;
                                if (-1 < (int)puVar43) break;
LAB_8003d174:
                                do {
                                  do {
                                    do {
                                      do {
                                        puVar47 = *(undefined **)(puVar47 + 4);
                                        puVar45 = *(uint **)(puVar47 + 8);
                                        if (puVar47 == (undefined *)0x0) goto LAB_8003d150;
                                        iVar9 = *(int *)(puVar47 + 0xc);
                                      } while ((puVar47 == _DAT_1f8000d4) ||
                                              (puVar45 == (uint *)0x0));
                                      uVar38 = *puVar45 >> 0x10;
                                      uVar41 = *puVar45 & 0xff;
                                    } while (uVar38 == 0);
                                    iVar21 = uVar41 * 0x20;
                                  } while (((((-1 < (int)((DAT_1f800098 + uVar41 * -0x20) - iVar9))
                                             || (iVar6 = *(int *)(puVar47 + 0x10),
                                                (int)((DAT_1f80009c + iVar21) - iVar9) < 1)) ||
                                            (-1 < (int)((_DAT_1f8000a0 + uVar41 * -0x20) - iVar6)))
                                           || ((iVar32 = *(int *)(puVar47 + 0x14),
                                               (int)((_DAT_1f8000a4 + iVar21) - iVar6) < 1 ||
                                               (-1 < (int)((DAT_1f8000a8 + uVar41 * -0x20) - iVar32)
                                               )))) || ((int)((DAT_1f8000ac + iVar21) - iVar32) < 1)
                                          );
                                  gte_ldR11R12(*(undefined4 *)(puVar47 + 0x20));
                                  gte_ldR13R21(*(undefined4 *)(puVar47 + 0x24));
                                  gte_ldR22R23(*(undefined4 *)(puVar47 + 0x28));
                                  gte_ldR31R32(*(undefined4 *)(puVar47 + 0x2c));
                                  gte_ldR33(*(undefined4 *)(puVar47 + 0x30));
                                  uVar41 = *(uint *)(puVar47 + 0x3c);
                                  iVar21 = (&objectModels[*(ushort *)(puVar47 + 0x36)][2].field3_0xc
                                           )[uVar41 & 0xff];
                                  uVar10 = (uint)*(char *)(iVar21 + 2);
                                  piVar46 = (int *)((*(uint *)(iVar21 + (uVar41 >> 0xd & 0x7f8) +
                                                              0x24) & 0xffff) * 2 +
                                                   *(int *)(iVar21 + 0x20));
                                  uVar38 = uVar38 & 0x7f;
                                  if ((byte)(&DAT_80062868)[(byte)puVar47[0x40]] == 0) {
                                    iVar22 = *piVar46;
                                    iVar21 = 0x40000000;
                                    iVar27 = 0;
                                    iVar28 = 0x40000000;
                                    iVar29 = 0;
                                    piVar15 = (int *)&DAT_1f800100;
                                    do {
                                      piVar46 = piVar46 + 1;
                                      gte_ldIR3(iVar22 >> 0x15);
                                      gte_ldIR1((iVar22 << 10) >> 0x15);
                                      gte_ldIR2((iVar22 << 0x14) >> 0x14);
                                      piVar33 = piVar15 + 3;
                                      gte_rtir_b();
                                      iVar22 = *piVar46;
                                      iVar16 = gte_stMAC3();
                                      iVar18 = gte_stMAC1();
                                      iVar20 = gte_stMAC2();
                                      iVar16 = (iVar16 << (uVar10 & 0x1f)) + iVar9;
                                      iVar18 = iVar6 - (iVar18 << (uVar10 & 0x1f));
                                      piVar15[2] = iVar32 - (iVar20 << (uVar10 & 0x1f));
                                      if (0 < iVar21 - iVar16) {
                                        iVar21 = iVar16;
                                      }
                                      if (iVar27 - iVar16 < 0) {
                                        iVar27 = iVar16;
                                      }
                                      if (0 < iVar28 - iVar18) {
                                        iVar28 = iVar18;
                                      }
                                      *piVar15 = iVar16;
                                      if (iVar29 - iVar18 < 0) {
                                        iVar29 = iVar18;
                                      }
                                      piVar15[1] = iVar18;
                                      piVar15 = piVar33;
                                    } while (piVar33 != (int *)(&DAT_1f800100 + uVar38 * 6));
                                  }
                                  else {
                                    iVar21 = *(int *)((int)&objectModels
                                                            [*(ushort *)(puVar47 + 0x36)][2].
                                                            field3_0xc + (uVar41 >> 6 & 0x3fc));
                                    iVar22 = *piVar46;
                                    piVar33 = (int *)((*(uint *)(iVar21 + (uVar41 >> 0x15 & 0x7f8) +
                                                                0x24) & 0xffff) * 2 +
                                                     *(int *)(iVar21 + 0x20));
                                    gte_ldIR0((uint)(byte)(&DAT_80062868)[(byte)puVar47[0x40]] << 4)
                                    ;
                                    iVar21 = 0x40000000;
                                    iVar27 = 0;
                                    iVar28 = 0x40000000;
                                    iVar29 = 0;
                                    piVar15 = (int *)&DAT_1f800100;
                                    do {
                                      piVar46 = piVar46 + 1;
                                      iVar20 = *piVar33;
                                      gte_ldsv_(iVar22 >> 0x15,(iVar22 << 10) >> 0x15,
                                                (iVar22 << 0x14) >> 0x14);
                                      iVar16 = iVar20 >> 0x15;
                                      iVar18 = (iVar20 << 10) >> 0x15;
                                      iVar20 = (iVar20 << 0x14) >> 0x14;
                                      gte_ldfcdir(iVar16,iVar18,iVar20);
                                      piVar33 = piVar33 + 1;
                                      gte_intpl_b();
                                      iVar22 = *piVar46;
                                      piVar8 = piVar15 + 3;
                                      read_mt(iVar16,iVar18,iVar20);
                                      gte_ldIR3(iVar16);
                                      gte_ldIR1(iVar18);
                                      gte_ldIR2(iVar20);
                                      gte_rtir();
                                      iVar16 = gte_stMAC3();
                                      iVar18 = gte_stMAC1();
                                      iVar20 = gte_stMAC2();
                                      iVar16 = (iVar16 << (uVar10 & 0x1f)) + iVar9;
                                      iVar18 = iVar6 - (iVar18 << (uVar10 & 0x1f));
                                      piVar15[2] = iVar32 - (iVar20 << (uVar10 & 0x1f));
                                      if (0 < iVar21 - iVar16) {
                                        iVar21 = iVar16;
                                      }
                                      if (iVar27 - iVar16 < 0) {
                                        iVar27 = iVar16;
                                      }
                                      if (0 < iVar28 - iVar18) {
                                        iVar28 = iVar18;
                                      }
                                      *piVar15 = iVar16;
                                      if (iVar29 - iVar18 < 0) {
                                        iVar29 = iVar18;
                                      }
                                      piVar15[1] = iVar18;
                                      piVar15 = piVar8;
                                    } while (piVar8 != (int *)(&DAT_1f800100 + uVar38 * 6));
                                  }
                                  puVar45 = puVar45 + 1;
                                  pTVar44 = (Triangle *)&DAT_1f800100;
                                } while (((0 < (int)(DAT_1f800098 - iVar27)) ||
                                         ((int)(DAT_1f80009c - iVar21) < 0)) ||
                                        ((0 < (int)(_DAT_1f8000a0 - iVar29) ||
                                         ((int)(_DAT_1f8000a4 - iVar28) < 0))));
                              }
                              piVar33 = (int *)((int)pTVar44 +
                                               ((uint)puVar43 >> 0x15 & 0x1f8) +
                                               (((uint)puVar43 >> 0x15 & 0x1f8) >> 1));
                              iVar20 = *piVar33;
                              piVar15 = (int *)((int)pTVar44 +
                                               ((uint)puVar43 >> 0xd & 0x1f8) +
                                               (((uint)puVar43 >> 0xd & 0x1f8) >> 1));
                              iVar32 = *piVar15;
                              piVar46 = (int *)((int)pTVar44 +
                                               ((uint)puVar43 >> 5 & 0x1f8) +
                                               (((uint)puVar43 >> 5 & 0x1f8) >> 1));
                              iVar6 = *piVar46;
                            } while (((int)(iVar6 - DAT_1f800098 & iVar32 - DAT_1f800098 &
                                           iVar20 - DAT_1f800098) < 0) ||
                                    (iVar30 = piVar33[1],
                                    (int)(DAT_1f80009c - iVar6 & DAT_1f80009c - iVar32 &
                                         DAT_1f80009c - iVar20) < 0));
                            iVar21 = piVar15[1];
                            iVar9 = piVar46[1];
                          } while (((int)(iVar9 - _DAT_1f8000a0 & iVar21 - _DAT_1f8000a0 &
                                         iVar30 - _DAT_1f8000a0) < 0) ||
                                  (iVar34 = piVar33[2],
                                  (int)(_DAT_1f8000a4 - iVar9 & _DAT_1f8000a4 - iVar21 &
                                       _DAT_1f8000a4 - iVar30) < 0));
                          iVar28 = piVar15[2];
                          iVar27 = piVar46[2];
                        } while ((int)(iVar27 - DAT_1f8000a8 & iVar28 - DAT_1f8000a8 &
                                      iVar34 - DAT_1f8000a8) < 0);
                        uVar5 = DAT_1f8000ac - iVar34;
                        iVar6 = iVar6 - iVar20;
                      } while ((int)(DAT_1f8000ac - iVar27 & DAT_1f8000ac - iVar28 & uVar5) < 0);
                      iVar9 = iVar9 - iVar30;
                      uVar38 = iVar27 - iVar34;
                      iVar32 = iVar32 - iVar20;
                      iVar21 = iVar21 - iVar30;
                      uVar10 = iVar28 - iVar34;
                      iVar27 = iVar6 >> 5;
                      iVar28 = iVar9 >> 5;
                      iVar29 = (int)uVar38 >> 5;
                      iVar22 = iVar32 >> 5;
                      iVar16 = iVar21 >> 5;
                      iVar18 = (int)uVar10 >> 5;
                      DAT_1f8000d8 = 0;
                    } while( true );
                  }
                }
              }
              goto LAB_8003d6d8;
            }
          }
        }
      }
      goto LAB_8003d150;
    }
    puVar47 = (undefined *)(uVar38 - 4);
    if (uVar38 != 0) goto LAB_8003d174;
LAB_8003dc10:
    uVar4 = 0;
    if (DAT_1f8000bc != 0x40000000) {
      uVar4 = 1;
    }
  }
  return uVar4;
}



// WARNING: Type propagation algorithm not settling
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4
FUN_8003dc64(int *param_1,uint param_2,uint param_3,undefined4 *param_4,uint param_5,
            undefined *param_6)

{
  bool bVar1;
  undefined *puVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  int iVar10;
  undefined4 uVar11;
  uint uVar12;
  uint uVar13;
  int iVar14;
  uint *puVar15;
  int iVar16;
  uint uVar17;
  uint uVar18;
  undefined uVar19;
  uint uVar20;
  undefined uVar21;
  uint uVar22;
  int *piVar23;
  int iVar24;
  ushort *puVar25;
  ushort *puVar26;
  int *piVar27;
  uint *puVar28;
  Vec3 *pVVar29;
  uint in_t3;
  uint in_t4;
  int iVar30;
  undefined4 unaff_s0;
  int iVar31;
  char cVar32;
  undefined4 unaff_s1;
  int iVar33;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  int iVar34;
  int iVar35;
  int iVar36;
  undefined4 *puVar37;
  Triangle *pTVar38;
  undefined4 unaff_s8;
  uint *puVar39;
  undefined4 unaff_retaddr;
  int *piVar40;
  undefined *puVar41;
  undefined auStackX_0 [16];
  
  iVar31 = DAT_80067174;
  DAT_8006aa0c = &DAT_80066d38;
  _DAT_1f8000c4 = (uint *)&DAT_1f800000;
  _DAT_1f8000d0 = param_5;
  _DAT_1f8000d4 = param_6;
  _DAT_1f8000c0 = param_2 * param_2;
  iVar36 = param_1[2];
  iVar35 = param_1[1];
  iVar34 = *param_1;
  DAT_1f8000bc = _DAT_1f8000c0 - (_DAT_1f8000c0 >> 8);
  isOnWaterSurface = 0;
  uVar3 = iVar34 - param_2;
  uVar7 = iVar35 - param_2;
  uVar12 = iVar36 - param_2;
  uVar17 = iVar34 + param_2;
  if ((int)(uVar3 | uVar7 | uVar12) < 0) {
    isOnWaterSurface = 0;
    DAT_8006aa18 = unaff_retaddr;
    DAT_8006aa14 = unaff_s8;
    DAT_8006aa10 = auStackX_0;
    DAT_8006aa08 = unaff_s7;
    DAT_8006aa04 = unaff_s6;
    DAT_8006aa00 = unaff_s5;
    DAT_8006a9fc = unaff_s4;
    DAT_8006a9f8 = unaff_s3;
    DAT_8006a9f4 = unaff_s2;
    DAT_8006a9f0 = unaff_s1;
    DAT_8006a9ec = unaff_s0;
    DAT_1f8000cc = param_4;
    DAT_1f8000c8 = param_3;
    return 0;
  }
  _DAT_1f8000a4 = iVar35 + param_2;
  DAT_1f8000ac = iVar36 + param_2;
  _DAT_1f800084 = (uVar17 >> 4) + 1;
  DAT_1f80008c = (_DAT_1f8000a4 >> 4) + 1;
  _DAT_1f800094 = (DAT_1f8000ac >> 4) + 1;
  _DAT_1f800080 = (param_2 >> 3) + 1;
  uVar4 = uVar3 >> 0xc;
  uVar8 = uVar7 >> 0xc;
  uVar13 = uVar12 >> 0xc;
  uVar18 = uVar17 >> 0xc;
  uVar20 = _DAT_1f8000a4 >> 0xc;
  uVar22 = DAT_1f8000ac >> 0xc;
  DAT_1f800002 = (undefined2)uVar4;
  DAT_1f800000._1_1_ = (undefined)uVar8;
  DAT_1f800000._0_1_ = (undefined)uVar13;
  uVar21 = (undefined)uVar22;
  uVar19 = (undefined)uVar20;
  if (uVar4 == uVar18) {
    DAT_1f800006 = DAT_1f800002;
    if (uVar8 == uVar20) {
      if (uVar13 == uVar22) {
        piVar40 = (int *)&DAT_1f800004;
      }
      else {
        piVar40 = (int *)&DAT_1f800008;
        DAT_1f800004._0_1_ = uVar21;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
      }
    }
    else {
      DAT_1f800004._1_1_ = uVar19;
      if (uVar13 == uVar22) {
        piVar40 = (int *)&DAT_1f800008;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
      }
      else {
        piVar40 = (int *)&DAT_1f800010;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800008._0_1_ = uVar21;
        DAT_1f800008._1_1_ = DAT_1f800000._1_1_;
        DAT_1f80000a = DAT_1f800002;
        DAT_1f80000c = uVar21;
        DAT_1f80000d = uVar19;
        DAT_1f80000e = DAT_1f800002;
      }
    }
  }
  else {
    DAT_1f800006 = (undefined2)uVar18;
    if (uVar8 == uVar20) {
      if (uVar13 == uVar22) {
        piVar40 = (int *)&DAT_1f800008;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        DAT_1f80000a = DAT_1f800002;
      }
      else {
        piVar40 = (int *)&DAT_1f800010;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        DAT_1f800008._0_1_ = uVar21;
        DAT_1f800008._1_1_ = DAT_1f800000._1_1_;
        DAT_1f80000a = DAT_1f800002;
        DAT_1f80000c = uVar21;
        DAT_1f80000d = DAT_1f800000._1_1_;
        DAT_1f80000e = DAT_1f800006;
      }
    }
    else {
      DAT_1f800008._1_1_ = uVar19;
      if (uVar13 == uVar22) {
        piVar40 = (int *)&DAT_1f800010;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        DAT_1f800008._0_1_ = (undefined)DAT_1f800000;
        DAT_1f80000a = DAT_1f800002;
        DAT_1f80000c = (undefined)DAT_1f800000;
        DAT_1f80000d = uVar19;
        DAT_1f80000e = DAT_1f800006;
      }
      else {
        piVar40 = (int *)&DAT_1f800020;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        DAT_1f800008._0_1_ = (undefined)DAT_1f800000;
        DAT_1f80000a = DAT_1f800002;
        DAT_1f80000c = (undefined)DAT_1f800000;
        DAT_1f80000d = uVar19;
        DAT_1f80000e = DAT_1f800006;
        DAT_1f800010._0_1_ = uVar21;
        DAT_1f800010._1_1_ = DAT_1f800000._1_1_;
        DAT_1f800012 = DAT_1f800002;
        DAT_1f800014._0_1_ = uVar21;
        DAT_1f800014._1_1_ = uVar19;
        DAT_1f800016 = DAT_1f800002;
        DAT_1f800018._0_1_ = uVar21;
        DAT_1f800018._1_1_ = DAT_1f800000._1_1_;
        DAT_1f80001a = DAT_1f800006;
        DAT_1f80001c._0_1_ = uVar21;
        DAT_1f80001c._1_1_ = uVar19;
        _DAT_1f80001e = DAT_1f800006;
      }
    }
  }
  uVar4 = uVar4 - 1;
  if ((int)uVar4 < 0) {
    uVar4 = 0;
  }
  iVar5 = (uVar4 >> 1) * 4;
  uVar8 = uVar8 - 1;
  if ((int)uVar8 < 0) {
    uVar8 = 0;
  }
  iVar9 = (uVar8 >> 1) << 7;
  iVar33 = iVar5;
  DAT_1f800088 = _DAT_1f800080;
  DAT_1f800090 = _DAT_1f800080;
  DAT_1f800098 = uVar3;
  DAT_1f80009c = uVar17;
  _DAT_1f8000a0 = uVar7;
  DAT_1f8000a8 = uVar12;
  DAT_1f8000c8 = param_3;
  DAT_1f8000cc = param_4;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  do {
    do {
      piVar23 = piVar40;
      *piVar23 = iVar33 + iVar9 + iVar31;
      piVar40 = piVar23 + 1;
      bVar1 = iVar33 != (uVar18 + 1 >> 1) << 2;
      iVar33 = iVar33 + 4;
    } while (bVar1);
    bVar1 = iVar9 != (uVar20 + 1 >> 1) << 7;
    iVar9 = iVar9 + 0x80;
    iVar33 = iVar5;
  } while (bVar1);
  *piVar40 = iVar31;
  piVar23[2] = 0;
  puVar37 = &DAT_80066d38;
LAB_8003df48:
  do {
    do {
      do {
        do {
          uVar3 = *_DAT_1f8000c4;
          _DAT_1f8000c4 = _DAT_1f8000c4 + 1;
          if ((int)uVar3 < 1) {
            puVar41 = (undefined *)(uVar3 - 4);
            if (uVar3 != 0) goto LAB_8003df6c;
            if (DAT_1f8000bc == 0) {
              return 0;
            }
            if (DAT_1f8000bc == _DAT_1f8000c0 - (_DAT_1f8000c0 >> 8)) {
              return 0;
            }
            gte_ldLZCS(DAT_1f8000bc);
            uVar3 = gte_stLZCR();
            uVar7 = (uVar3 & 0xfe) - 0x18;
            iVar31 = DAT_1f8000bc << (uVar7 & 0x1f);
            if ((int)uVar7 < 0) {
              iVar31 = (int)DAT_1f8000bc >> (-uVar7 & 0x1f);
            }
            uVar3 = (uint)((int)squareRootLookup[iVar31 + -0x40] <<
                          (0x1f - (uVar3 & 0xfe) >> 1 & 0x1f)) >> 0xc;
            pVVar29 = &Vec3_8006ab70;
            iVar31 = uVar3 + ((int)(DAT_1f8000bc - uVar3 * uVar3) / (int)(uVar3 + 1) >> 1);
            do {
              iVar5 = iVar34 - _DAT_1f8000b0;
              iVar33 = iVar35 - _DAT_1f8000b4;
              iVar9 = iVar36 - DAT_1f8000b8;
              gte_ldsv_(iVar5,iVar33,iVar9);
              gte_ldIR0(param_2);
              gte_gpf0(0);
              read_mt(iVar5,iVar33,iVar9);
              iVar5 = iVar5 / iVar31;
              iVar33 = iVar33 / iVar31;
              iVar9 = iVar9 / iVar31;
              gte_ldsv_(iVar5,iVar33,iVar9);
              gte_sqr0_b(0);
              read_mt(pVVar29,in_t3,in_t4);
              pVVar29 = (Vec3 *)((int)pVVar29 + ((in_t4 + in_t3) - _DAT_1f8000c0));
              iVar31 = iVar31 + -1;
            } while ((int)pVVar29 < 0);
            Vec3_8006ab70.x = _DAT_1f8000b0;
            Vec3_8006ab70.y = _DAT_1f8000b4;
            Vec3_8006ab70.z = DAT_1f8000b8;
            Vec3_8006ab7c.x = _DAT_1f8000b0 + iVar5;
            Vec3_8006ab7c.y = _DAT_1f8000b4 + iVar33;
            Vec3_8006ab7c.z = DAT_1f8000b8 + iVar9;
            return 1;
          }
          uVar12 = uVar3 >> 8 & 0xff;
          uVar7 = uVar3 >> 0x10 & 0xff;
          puVar25 = (ushort *)TerrainCollisionData->field3_0xc;
          pTVar38 = TerrainCollisionData->triangles;
          puVar26 = (ushort *)((uint)puVar25[(uVar3 & 0xff) + 1] + (int)puVar25);
        } while ((puVar25[(uVar3 & 0xff) + 1] == 0xffff) ||
                ((int)((uint)*puVar25 - (uVar3 & 0xff)) < 1));
        uVar3 = (uint)puVar26[uVar12 + 1];
        puVar25 = (ushort *)(uVar3 + (int)puVar25);
      } while ((uVar3 == 0xffff) || ((int)(*puVar26 - uVar12) < 1));
      uVar3 = (uint)puVar25[uVar7 + 1];
    } while (((int)(*puVar25 - uVar7) < 1) || (uVar3 == 0xffff));
    puVar39 = (uint *)((int)(TerrainCollisionData->field4_0x10 + uVar3 * 2) + 2);
    puVar2 = (undefined *)((int)*(short *)(TerrainCollisionData->field4_0x10 + uVar3 * 2) & 0x7fff);
LAB_8003e518:
    puVar41 = puVar2;
    puVar37 = (undefined4 *)puVar41;
  } while ((int)puVar41 < 0);
  puVar37 = (undefined4 *)(int)*(short *)puVar39;
  puVar39 = (uint *)((int)puVar39 + 2);
  puVar28 = (uint *)((int)pTVar38 + (int)puVar41 * 0xc);
  uVar7 = puVar28[2];
  in_t4 = (uVar7 & 0x3fff) - _DAT_1f800094;
  uVar3 = uVar7 >> 0x18;
  in_t3 = _DAT_1f800094;
  puVar2 = (undefined *)puVar37;
  if ((int)in_t4 < 1) {
    uVar12 = uVar7 >> 0x10 & 0xff;
    in_t4 = in_t4 + DAT_1f800090 + uVar12 & in_t4 + DAT_1f800090 + uVar3;
    in_t3 = DAT_1f80008c;
    if (-1 < (int)in_t4) {
      uVar17 = puVar28[1];
      iVar31 = (int)uVar17 >> 0x17;
      iVar5 = (int)(uVar17 << 9) >> 0x17;
      uVar4 = (uVar17 & 0x3fff) - DAT_1f80008c;
      in_t3 = uVar4 | uVar4 + iVar5 | uVar4 + iVar31;
      uVar4 = uVar4 + DAT_1f800088;
      in_t4 = DAT_1f800088;
      if (((int)in_t3 < 1) &&
         (in_t4 = uVar4 & uVar4 + iVar5 & uVar4 + iVar31, in_t3 = _DAT_1f800084, -1 < (int)in_t4)) {
        uVar4 = *puVar28;
        iVar33 = (int)uVar4 >> 0x17;
        iVar9 = (int)(uVar4 << 9) >> 0x17;
        uVar8 = (uVar4 & 0x3fff) - _DAT_1f800084;
        in_t3 = uVar8 | uVar8 + iVar9 | uVar8 + iVar33;
        uVar8 = uVar8 + _DAT_1f800080;
        in_t4 = _DAT_1f800080;
        if ((int)in_t3 < 1) {
          in_t4 = uVar8 & uVar8 + iVar9 & uVar8 + iVar33;
          iVar6 = (uVar4 & 0x3fff) << 4;
          if (-1 < (int)in_t4) {
            iVar10 = (uVar17 & 0x3fff) << 4;
            iVar14 = (uVar7 & 0x3fff) << 4;
            uVar8 = (uVar7 & 0x8000) >> 0xf;
            iVar16 = iVar33 >> uVar8;
            iVar24 = iVar31 >> uVar8;
            iVar30 = (int)uVar3 >> uVar8;
            uVar17 = iVar9 >> uVar8;
            uVar4 = iVar5 >> uVar8;
            uVar8 = (int)uVar12 >> uVar8;
            do {
              gte_ldsv_(uVar17,uVar4,uVar8);
              gte_ldR11R12(iVar16);
              gte_ldR22R23(iVar24);
              gte_ldR33(iVar30);
              in_t3 = iVar35 - iVar10;
              gte_op0_b(0);
              in_t4 = iVar36 - iVar14;
              gte_ldR11R12(in_t3 * 0x10000 + (iVar34 - iVar6 & 0xffffU));
              gte_ldR13R21(in_t4);
              read_mt(uVar17,uVar4,uVar8);
              gte_ldR31R32(uVar4 * 0x10000 + (uVar17 & 0xffff));
              gte_ldR33(uVar8);
              DAT_1f8000d8 = uVar7 & 0x4000;
              gte_rtir_sf0_b();
              if (DAT_1f8000d8 == 0) {
                iVar16 = gte_stMAC1();
                iVar24 = gte_stMAC3();
                gte_ldLZCS(iVar16);
                if (0 < iVar16) goto LAB_8003e6cc;
              }
              else {
                iVar16 = gte_stMAC1();
                iVar24 = gte_stMAC3();
                gte_ldLZCS(iVar16);
LAB_8003e6cc:
                iVar30 = gte_stLZCR();
                uVar7 = iVar30 - 2;
                if (-1 < iVar30 + -0xe) {
                  uVar7 = 0xc;
                }
                iVar24 = iVar24 >> (0xc - uVar7 & 0x1f);
                iVar16 = (iVar16 << (uVar7 & 0x1f)) / iVar24;
                if (-1 < (int)puVar41) {
                  iVar33 = iVar33 << 4;
                  iVar31 = iVar31 << 4;
                  uVar3 = uVar3 << 4;
                  iVar9 = iVar9 << 4;
                  iVar5 = iVar5 << 4;
                  uVar12 = uVar12 << 4;
                }
                gte_ldsv_(uVar17,uVar4,uVar8);
                gte_ldIR0(iVar16);
                gte_gpf0(0);
                read_mt(iVar16,iVar24,uVar7);
                iVar16 = iVar16 >> 0xc;
                iVar24 = iVar24 >> 0xc;
                iVar30 = (int)uVar7 >> 0xc;
                gte_ldsv_(iVar16,iVar24,iVar30);
                uVar13 = (iVar34 - iVar6) - iVar16;
                in_t3 = in_t3 - iVar24;
                gte_sqr0_b(0);
                in_t4 = in_t4 - iVar30;
                uVar7 = DAT_1f8000bc;
                if (DAT_1f8000d8 != 0) {
                  uVar7 = _DAT_1f8000c0;
                }
                read_mt(iVar16,iVar24,iVar30);
                if (0 < (int)(((uVar7 - iVar16) - iVar24) - iVar30)) {
                  cVar32 = (int)(uVar17 + uVar4 ^ uVar17 - uVar4) < 0;
                  uVar7 = uVar17;
                  if ((bool)cVar32) {
                    uVar7 = uVar4;
                  }
                  if ((int)(uVar7 + uVar8 ^ uVar7 - uVar8) < 0) {
                    cVar32 = '\x02';
                    uVar7 = uVar8;
                  }
                  gte_ldsv_(iVar33,iVar31,uVar3);
                  gte_ldR11R12(uVar13);
                  gte_ldR22R23(in_t3);
                  gte_ldR33(in_t4);
                  gte_op0(0);
                  uVar18 = gte_stMAC1();
                  if ((cVar32 != '\0') && (uVar18 = gte_stMAC2(), cVar32 != '\x01')) {
                    uVar18 = gte_stMAC3();
                  }
                  gte_ldsv_(uVar13,in_t3,in_t4);
                  gte_ldR11R12(iVar9);
                  gte_ldR22R23(iVar5);
                  gte_ldR33(uVar12);
                  gte_op0(0);
                  uVar20 = gte_stMAC1();
                  if ((cVar32 != '\0') && (uVar20 = gte_stMAC2(), cVar32 != '\x01')) {
                    uVar20 = gte_stMAC3();
                  }
                  gte_ldIR1(iVar9 - iVar33);
                  gte_ldIR2(iVar5 - iVar31);
                  gte_ldIR3(uVar12 - uVar3);
                  gte_ldR11R12(uVar13 - iVar33);
                  gte_ldR22R23(in_t3 - iVar31);
                  gte_ldR33(in_t4 - uVar3);
                  gte_op0(0);
                  uVar22 = gte_stMAC1();
                  if ((cVar32 != '\0') && (uVar22 = gte_stMAC2(), cVar32 != '\x01')) {
                    uVar22 = gte_stMAC3();
                  }
                  uVar7 = (uVar18 ^ uVar7) >> 0x1f | ((uVar20 ^ uVar7) >> 0x1f) << 1 |
                          ((uVar22 ^ uVar7) >> 0x1f) << 2;
                  if (uVar7 == 1) {
                    iVar6 = iVar9 + iVar6;
                    iVar10 = iVar5 + iVar10;
                    iVar14 = uVar12 + iVar14;
                  }
                  else if (uVar7 == 2) {
                    iVar6 = iVar33 + iVar6;
                    iVar10 = iVar31 + iVar10;
                    iVar14 = uVar3 + iVar14;
                  }
                  else {
                    iVar33 = iVar33 >> 4;
                    iVar31 = iVar31 >> 4;
                    iVar16 = (int)uVar3 >> 4;
                    iVar9 = iVar9 >> 4;
                    iVar5 = iVar5 >> 4;
                    iVar24 = (int)uVar12 >> 4;
                    if (uVar7 == 3) {
                      uVar13 = uVar13 + iVar9 * -0x10;
                      in_t3 = in_t3 + iVar5 * -0x10;
                      in_t4 = in_t4 + iVar24 * -0x10;
                      goto LAB_8003e9bc;
                    }
                    if (uVar7 != 4) {
                      if (uVar7 == 5) {
                        iVar33 = iVar9;
                        iVar31 = iVar5;
                        iVar16 = iVar24;
                        iVar9 = 0;
                        iVar5 = 0;
                        iVar24 = 0;
LAB_8003e9bc:
                        gte_ldR31R32(in_t3 * 0x10000 + (uVar13 & 0xffff));
                        gte_ldR33(in_t4);
                        uVar3 = iVar33 - iVar9;
                        iVar34 = iVar31 - iVar5;
                        iVar35 = iVar16 - iVar24;
                        gte_ldsv_(uVar3,iVar34,iVar35);
                        gte_ldR11R12(iVar34 * 0x10000 + (uVar3 & 0xffff));
                        gte_ldR13R21(iVar35);
                        gte_rtir_sf0();
                        iVar36 = gte_stMAC3();
                        iVar6 = gte_stMAC1();
                        iVar6 = (iVar36 << 4) / iVar6;
                        gte_ldsv_(uVar3,iVar34,iVar35);
                        iVar36 = iVar33 * 0x10 + iVar9 * -0x10;
                        iVar33 = 0;
                        iVar34 = iVar31 * 0x10 + iVar5 * -0x10;
                        if ((iVar36 - iVar34 ^ iVar36 + iVar34) < 0) {
                          iVar36 = iVar31 * 0x10 + iVar5 * -0x10;
                          iVar33 = 8;
                        }
                        iVar31 = iVar16 * 0x10 + iVar24 * -0x10;
                        if ((iVar36 - iVar31 ^ iVar36 + iVar31) < 0) {
                          iVar33 = 0x10;
                        }
                        gte_ldIR0(iVar6);
                        gte_gpf0_b(0);
                        read_mt(iVar6,0x8003eab8,iVar35);
                    // WARNING: Could not recover jumptable at 0x8003eab0. Too many branches
                    // WARNING: Treating indirect jump as call
                        uVar11 = (*(code *)(&UNK_8003eab8 + iVar33))();
                        return uVar11;
                      }
                      if (uVar7 == 6) {
                        iVar9 = 0;
                        iVar5 = 0;
                        iVar24 = 0;
                        goto LAB_8003e9bc;
                      }
                      iVar6 = uVar13 + iVar6;
                      iVar10 = in_t3 + iVar10;
                      iVar14 = in_t4 + iVar14;
                    }
                  }
                  iVar31 = iVar34 - iVar6;
                  iVar5 = iVar35 - iVar10;
                  iVar33 = iVar36 - iVar14;
                  gte_ldsv_(iVar31,iVar5,iVar33);
                  gte_sqr0_b(0);
                  uVar3 = DAT_1f8000bc;
                  if (DAT_1f8000d8 != 0) {
                    uVar3 = _DAT_1f8000c0;
                  }
                  read_mt(iVar31,iVar5,iVar33);
                  uVar7 = iVar31 + iVar5 + iVar33;
                  in_t3 = DAT_1f8000c8;
                  if (0 < (int)(uVar3 - uVar7)) {
                    in_t3 = DAT_1f8000c8 & 1;
                    puVar2 = (undefined *)puVar37;
                    if (DAT_1f8000d8 != 0) {
                      isOnWaterSurface = DAT_1f8000d8 >> 0xc;
                      break;
                    }
                    _DAT_1f8000b0 = iVar6;
                    _DAT_1f8000b4 = iVar10;
                    DAT_1f8000b8 = iVar14;
                    DAT_1f8000bc = uVar7;
                    Vec3_8006ab88.x = uVar17;
                    Vec3_8006ab88.y = uVar4;
                    Vec3_8006ab88.z = uVar8;
                    if (-1 < (int)puVar41) {
                      DAT_8006aba0 = (undefined *)0x0;
                      DAT_8006ab94 = 0xff;
                      if (0 < (int)(TerrainCollisionData->collisionFlagsOffset - (int)puVar41)) {
                        DAT_8006ab94 = (uint)TerrainCollisionData->collisionFlags[(int)puVar41];
                      }
                      DAT_8006ab98 = 0xfe;
                      if (0 < (int)(TerrainCollisionData->field2_0x8 - (int)puVar41)) {
                        DAT_8006ab98 = (uint)(byte)TerrainCollisionData->field7_0x1c[(int)puVar41];
                      }
                      overTriangleIndex = puVar41;
                      if (in_t3 != 0) {
                        Vec3_8006ab70.x = iVar6;
                        Vec3_8006ab70.y = iVar10;
                        Vec3_8006ab70.z = iVar14;
                        DAT_8006aba0 = (undefined *)0x0;
                        return 1;
                      }
                      break;
                    }
                    DAT_8006aba0 = puVar41;
                    if ((0 < (int)DAT_1f8000dc << 0x18) && (DAT_1f8000cc != (undefined4 *)0x0)) {
                      *DAT_1f8000cc =
                           *(undefined4 *)
                            (&DAT_80064668 + ((uint)((int)DAT_1f8000dc << 0x18) >> 0x16));
                    }
                    overTriangleIndex = (undefined *)((uint)puVar39 | 0x80000000);
                    DAT_8006ab94 = 0xff;
                    *(uint *)(puVar41 + 0x18) = _DAT_1f8000d0 | *(uint *)(puVar41 + 0x18);
                    DAT_8006ab98 = 0xfe;
                    if (in_t3 != 0) {
                      Vec3_8006ab70.x = _DAT_1f8000b0;
                      Vec3_8006ab70.y = _DAT_1f8000b4;
                      Vec3_8006ab70.z = DAT_1f8000b8;
                      DAT_8006ab98 = 0xfe;
                      return 1;
                    }
                  }
                }
              }
              do {
                do {
                  do {
                    while( true ) {
                      puVar2 = (undefined *)puVar37;
                      if (-1 < (int)puVar41) goto LAB_8003e518;
                      puVar37 = (undefined4 *)*puVar39;
                      puVar39 = puVar39 + 1;
                      if (-1 < (int)puVar37) break;
LAB_8003df6c:
                      do {
                        do {
                          do {
                            do {
                              do {
                                puVar41 = *(undefined **)(puVar41 + 4);
                                puVar39 = *(uint **)(puVar41 + 8);
                                if (puVar41 == (undefined *)0x0) goto LAB_8003df48;
                                iVar31 = *(int *)(puVar41 + 0xc);
                              } while ((puVar41 == _DAT_1f8000d4) || (puVar39 == (uint *)0x0));
                              in_t4 = *puVar39 >> 0x10;
                              uVar3 = *puVar39 & 0xff;
                            } while (in_t4 == 0);
                            iVar5 = uVar3 * 0x20;
                          } while (((((-1 < (int)((DAT_1f800098 + uVar3 * -0x20) - iVar31)) ||
                                     (iVar33 = *(int *)(puVar41 + 0x10),
                                     (int)((DAT_1f80009c + iVar5) - iVar31) < 1)) ||
                                    (-1 < (int)((_DAT_1f8000a0 + uVar3 * -0x20) - iVar33))) ||
                                   ((iVar9 = *(int *)(puVar41 + 0x14),
                                    (int)((_DAT_1f8000a4 + iVar5) - iVar33) < 1 ||
                                    (-1 < (int)((DAT_1f8000a8 + uVar3 * -0x20) - iVar9))))) ||
                                  (iVar6 = iVar31 - iVar34,
                                  (int)((DAT_1f8000ac + iVar5) - iVar9) < 1));
                          iVar10 = iVar33 - iVar35;
                          iVar14 = iVar9 - iVar36;
                          gte_ldsv_(iVar6,iVar10,iVar14);
                          gte_sqr0_b(0);
                          read_mt(iVar6,iVar10,iVar14);
                        } while ((int)((((iVar5 + param_2) * (iVar5 + param_2) - iVar6) - iVar10) -
                                      iVar14) < 1);
                        gte_ldR11R12(*(undefined4 *)(puVar41 + 0x20));
                        gte_ldR13R21(*(undefined4 *)(puVar41 + 0x24));
                        gte_ldR22R23(*(undefined4 *)(puVar41 + 0x28));
                        gte_ldR31R32(*(undefined4 *)(puVar41 + 0x2c));
                        gte_ldR33(*(undefined4 *)(puVar41 + 0x30));
                        uVar7 = *(uint *)(puVar41 + 0x3c);
                        iVar5 = (&objectModels[*(ushort *)(puVar41 + 0x36)][2].field3_0xc)
                                [uVar7 & 0xff];
                        uVar12 = (uint)*(char *)(iVar5 + 2);
                        piVar40 = (int *)((*(uint *)(iVar5 + (uVar7 >> 0xd & 0x7f8) + 0x24) & 0xffff
                                          ) * 2 + *(int *)(iVar5 + 0x20));
                        uVar3 = in_t4 & 0x7f;
                        if ((byte)(&DAT_80062868)[(byte)puVar41[0x40]] == 0) {
                          iVar5 = *piVar40;
                          in_t4 = 0x40000000;
                          uVar7 = 0;
                          uVar17 = 0x40000000;
                          uVar4 = 0;
                          puVar28 = (uint *)&DAT_1f800100;
                          do {
                            piVar40 = piVar40 + 1;
                            gte_ldIR3(iVar5 >> 0x15);
                            gte_ldIR1((iVar5 << 10) >> 0x15);
                            gte_ldIR2((iVar5 << 0x14) >> 0x14);
                            puVar15 = puVar28 + 3;
                            gte_rtir_b();
                            iVar5 = *piVar40;
                            iVar6 = gte_stMAC3();
                            iVar10 = gte_stMAC1();
                            iVar14 = gte_stMAC2();
                            uVar8 = (iVar6 << (uVar12 & 0x1f)) + iVar31;
                            uVar13 = iVar33 - (iVar10 << (uVar12 & 0x1f));
                            puVar28[2] = iVar9 - (iVar14 << (uVar12 & 0x1f));
                            if (0 < (int)(in_t4 - uVar8)) {
                              in_t4 = uVar8;
                            }
                            if ((int)(uVar7 - uVar8) < 0) {
                              uVar7 = uVar8;
                            }
                            if (0 < (int)(uVar17 - uVar13)) {
                              uVar17 = uVar13;
                            }
                            *puVar28 = uVar8;
                            if ((int)(uVar4 - uVar13) < 0) {
                              uVar4 = uVar13;
                            }
                            puVar28[1] = uVar13;
                            puVar28 = puVar15;
                          } while (puVar15 != (uint *)(&DAT_1f800100 + uVar3 * 6));
                        }
                        else {
                          iVar5 = *(int *)((int)&objectModels[*(ushort *)(puVar41 + 0x36)][2].
                                                 field3_0xc + (uVar7 >> 6 & 0x3fc));
                          iVar6 = *piVar40;
                          piVar23 = (int *)((*(uint *)(iVar5 + (uVar7 >> 0x15 & 0x7f8) + 0x24) &
                                            0xffff) * 2 + *(int *)(iVar5 + 0x20));
                          gte_ldIR0((uint)(byte)(&DAT_80062868)[(byte)puVar41[0x40]] << 4);
                          in_t4 = 0x40000000;
                          uVar7 = 0;
                          uVar17 = 0x40000000;
                          uVar4 = 0;
                          puVar28 = (uint *)&DAT_1f800100;
                          do {
                            piVar40 = piVar40 + 1;
                            iVar14 = *piVar23;
                            gte_ldsv_(iVar6 >> 0x15,(iVar6 << 10) >> 0x15,(iVar6 << 0x14) >> 0x14);
                            iVar5 = iVar14 >> 0x15;
                            iVar10 = (iVar14 << 10) >> 0x15;
                            iVar14 = (iVar14 << 0x14) >> 0x14;
                            gte_ldfcdir(iVar5,iVar10,iVar14);
                            piVar23 = piVar23 + 1;
                            gte_intpl_b();
                            iVar6 = *piVar40;
                            puVar15 = puVar28 + 3;
                            read_mt(iVar5,iVar10,iVar14);
                            gte_ldIR3(iVar5);
                            gte_ldIR1(iVar10);
                            gte_ldIR2(iVar14);
                            gte_rtir();
                            iVar5 = gte_stMAC3();
                            iVar10 = gte_stMAC1();
                            iVar14 = gte_stMAC2();
                            uVar8 = (iVar5 << (uVar12 & 0x1f)) + iVar31;
                            uVar13 = iVar33 - (iVar10 << (uVar12 & 0x1f));
                            puVar28[2] = iVar9 - (iVar14 << (uVar12 & 0x1f));
                            if (0 < (int)(in_t4 - uVar8)) {
                              in_t4 = uVar8;
                            }
                            if ((int)(uVar7 - uVar8) < 0) {
                              uVar7 = uVar8;
                            }
                            if (0 < (int)(uVar17 - uVar13)) {
                              uVar17 = uVar13;
                            }
                            *puVar28 = uVar8;
                            if ((int)(uVar4 - uVar13) < 0) {
                              uVar4 = uVar13;
                            }
                            puVar28[1] = uVar13;
                            puVar28 = puVar15;
                          } while (puVar15 != (uint *)(&DAT_1f800100 + uVar3 * 6));
                        }
                        puVar39 = puVar39 + 1;
                        pTVar38 = (Triangle *)&DAT_1f800100;
                        in_t3 = DAT_1f80009c - in_t4;
                      } while (((0 < (int)(DAT_1f800098 - uVar7)) || ((int)in_t3 < 0)) ||
                              ((in_t3 = _DAT_1f8000a4 - uVar17, 0 < (int)(_DAT_1f8000a0 - uVar4) ||
                               ((int)in_t3 < 0))));
                    }
                    piVar27 = (int *)((int)pTVar38 +
                                     ((uint)puVar37 >> 0x15 & 0x1f8) +
                                     (((uint)puVar37 >> 0x15 & 0x1f8) >> 1));
                    iVar6 = *piVar27;
                    piVar23 = (int *)((int)pTVar38 +
                                     ((uint)puVar37 >> 0xd & 0x1f8) +
                                     (((uint)puVar37 >> 0xd & 0x1f8) >> 1));
                    iVar9 = *piVar23;
                    piVar40 = (int *)((int)pTVar38 +
                                     ((uint)puVar37 >> 5 & 0x1f8) +
                                     (((uint)puVar37 >> 5 & 0x1f8) >> 1));
                    iVar33 = *piVar40;
                    in_t3 = DAT_1f800098;
                    in_t4 = DAT_1f80009c;
                  } while (((int)(iVar33 - DAT_1f800098 & iVar9 - DAT_1f800098 &
                                 iVar6 - DAT_1f800098) < 0) ||
                          (iVar10 = piVar27[1],
                          (int)(DAT_1f80009c - iVar33 & DAT_1f80009c - iVar9 & DAT_1f80009c - iVar6)
                          < 0));
                  iVar5 = piVar23[1];
                  iVar31 = piVar40[1];
                  in_t3 = _DAT_1f8000a0;
                  in_t4 = _DAT_1f8000a4;
                } while (((int)(iVar31 - _DAT_1f8000a0 & iVar5 - _DAT_1f8000a0 &
                               iVar10 - _DAT_1f8000a0) < 0) ||
                        (iVar14 = piVar27[2],
                        (int)(_DAT_1f8000a4 - iVar31 & _DAT_1f8000a4 - iVar5 &
                             _DAT_1f8000a4 - iVar10) < 0));
                iVar24 = piVar23[2];
                iVar16 = piVar40[2];
                in_t3 = DAT_1f8000a8;
                in_t4 = DAT_1f8000ac;
              } while (((int)(iVar16 - DAT_1f8000a8 & iVar24 - DAT_1f8000a8 & iVar14 - DAT_1f8000a8)
                        < 0) || (iVar33 = iVar33 - iVar6,
                                (int)(DAT_1f8000ac - iVar16 & DAT_1f8000ac - iVar24 &
                                     DAT_1f8000ac - iVar14) < 0));
              iVar31 = iVar31 - iVar10;
              uVar3 = iVar16 - iVar14;
              iVar9 = iVar9 - iVar6;
              iVar5 = iVar5 - iVar10;
              uVar12 = iVar24 - iVar14;
              iVar16 = iVar33 >> 5;
              iVar24 = iVar31 >> 5;
              iVar30 = (int)uVar3 >> 5;
              uVar17 = iVar9 >> 5;
              uVar4 = iVar5 >> 5;
              uVar8 = (int)uVar12 >> 5;
              uVar7 = 0;
              DAT_1f8000dc = (undefined *)puVar37;
            } while( true );
          }
        }
      }
    }
  }
  goto LAB_8003e518;
}



// WARNING: Type propagation algorithm not settling
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 FUN_8003dcc0(int *param_1,uint param_2)

{
  bool bVar1;
  undefined *puVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  int iVar10;
  undefined4 uVar11;
  uint uVar12;
  uint uVar13;
  int iVar14;
  uint *puVar15;
  int iVar16;
  uint uVar17;
  uint uVar18;
  undefined uVar19;
  uint uVar20;
  undefined uVar21;
  uint uVar22;
  int *piVar23;
  int iVar24;
  ushort *puVar25;
  ushort *puVar26;
  int *piVar27;
  uint *puVar28;
  Vec3 *pVVar29;
  uint in_t3;
  uint in_t4;
  int iVar30;
  undefined4 unaff_s0;
  int iVar31;
  char cVar32;
  undefined4 unaff_s1;
  int iVar33;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  int iVar34;
  int iVar35;
  int iVar36;
  undefined4 *puVar37;
  Triangle *pTVar38;
  undefined4 unaff_s8;
  uint *puVar39;
  undefined4 unaff_retaddr;
  int *piVar40;
  undefined *puVar41;
  undefined auStackX_0 [16];
  
  iVar31 = DAT_80067174;
  DAT_8006aa0c = &DAT_80066d38;
  _DAT_1f8000c4 = (uint *)&DAT_1f800000;
  DAT_1f8000c8 = 0;
  DAT_1f8000cc = (undefined4 *)0x0;
  _DAT_1f8000d0 = 0;
  _DAT_1f8000d4 = (undefined *)0x0;
  _DAT_1f8000c0 = param_2 * param_2;
  iVar36 = param_1[2];
  iVar35 = param_1[1];
  iVar34 = *param_1;
  DAT_1f8000bc = _DAT_1f8000c0 - (_DAT_1f8000c0 >> 8);
  isOnWaterSurface = 0;
  uVar3 = iVar34 - param_2;
  uVar7 = iVar35 - param_2;
  uVar12 = iVar36 - param_2;
  uVar17 = iVar34 + param_2;
  if ((int)(uVar3 | uVar7 | uVar12) < 0) {
    isOnWaterSurface = 0;
    DAT_8006aa18 = unaff_retaddr;
    DAT_8006aa14 = unaff_s8;
    DAT_8006aa10 = auStackX_0;
    DAT_8006aa08 = unaff_s7;
    DAT_8006aa04 = unaff_s6;
    DAT_8006aa00 = unaff_s5;
    DAT_8006a9fc = unaff_s4;
    DAT_8006a9f8 = unaff_s3;
    DAT_8006a9f4 = unaff_s2;
    DAT_8006a9f0 = unaff_s1;
    DAT_8006a9ec = unaff_s0;
    _DAT_1f8000d4 = (undefined *)0x0;
    _DAT_1f8000d0 = 0;
    DAT_1f8000cc = (undefined4 *)0x0;
    DAT_1f8000c8 = 0;
    return 0;
  }
  _DAT_1f8000a4 = iVar35 + param_2;
  DAT_1f8000ac = iVar36 + param_2;
  _DAT_1f800084 = (uVar17 >> 4) + 1;
  DAT_1f80008c = (_DAT_1f8000a4 >> 4) + 1;
  _DAT_1f800094 = (DAT_1f8000ac >> 4) + 1;
  _DAT_1f800080 = (param_2 >> 3) + 1;
  uVar4 = uVar3 >> 0xc;
  uVar8 = uVar7 >> 0xc;
  uVar13 = uVar12 >> 0xc;
  uVar18 = uVar17 >> 0xc;
  uVar20 = _DAT_1f8000a4 >> 0xc;
  uVar22 = DAT_1f8000ac >> 0xc;
  DAT_1f800002 = (undefined2)uVar4;
  DAT_1f800000._1_1_ = (undefined)uVar8;
  DAT_1f800000._0_1_ = (undefined)uVar13;
  uVar21 = (undefined)uVar22;
  uVar19 = (undefined)uVar20;
  if (uVar4 == uVar18) {
    DAT_1f800006 = DAT_1f800002;
    if (uVar8 == uVar20) {
      if (uVar13 == uVar22) {
        piVar40 = (int *)&DAT_1f800004;
      }
      else {
        piVar40 = (int *)&DAT_1f800008;
        DAT_1f800004._0_1_ = uVar21;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
      }
    }
    else {
      DAT_1f800004._1_1_ = uVar19;
      if (uVar13 == uVar22) {
        piVar40 = (int *)&DAT_1f800008;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
      }
      else {
        piVar40 = (int *)&DAT_1f800010;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800008._0_1_ = uVar21;
        DAT_1f800008._1_1_ = DAT_1f800000._1_1_;
        DAT_1f80000a = DAT_1f800002;
        DAT_1f80000c = uVar21;
        DAT_1f80000d = uVar19;
        DAT_1f80000e = DAT_1f800002;
      }
    }
  }
  else {
    DAT_1f800006 = (undefined2)uVar18;
    if (uVar8 == uVar20) {
      if (uVar13 == uVar22) {
        piVar40 = (int *)&DAT_1f800008;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        DAT_1f80000a = DAT_1f800002;
      }
      else {
        piVar40 = (int *)&DAT_1f800010;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        DAT_1f800008._0_1_ = uVar21;
        DAT_1f800008._1_1_ = DAT_1f800000._1_1_;
        DAT_1f80000a = DAT_1f800002;
        DAT_1f80000c = uVar21;
        DAT_1f80000d = DAT_1f800000._1_1_;
        DAT_1f80000e = DAT_1f800006;
      }
    }
    else {
      DAT_1f800008._1_1_ = uVar19;
      if (uVar13 == uVar22) {
        piVar40 = (int *)&DAT_1f800010;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        DAT_1f800008._0_1_ = (undefined)DAT_1f800000;
        DAT_1f80000a = DAT_1f800002;
        DAT_1f80000c = (undefined)DAT_1f800000;
        DAT_1f80000d = uVar19;
        DAT_1f80000e = DAT_1f800006;
      }
      else {
        piVar40 = (int *)&DAT_1f800020;
        DAT_1f800004._0_1_ = (undefined)DAT_1f800000;
        DAT_1f800004._1_1_ = DAT_1f800000._1_1_;
        DAT_1f800008._0_1_ = (undefined)DAT_1f800000;
        DAT_1f80000a = DAT_1f800002;
        DAT_1f80000c = (undefined)DAT_1f800000;
        DAT_1f80000d = uVar19;
        DAT_1f80000e = DAT_1f800006;
        DAT_1f800010._0_1_ = uVar21;
        DAT_1f800010._1_1_ = DAT_1f800000._1_1_;
        DAT_1f800012 = DAT_1f800002;
        DAT_1f800014._0_1_ = uVar21;
        DAT_1f800014._1_1_ = uVar19;
        DAT_1f800016 = DAT_1f800002;
        DAT_1f800018._0_1_ = uVar21;
        DAT_1f800018._1_1_ = DAT_1f800000._1_1_;
        DAT_1f80001a = DAT_1f800006;
        DAT_1f80001c._0_1_ = uVar21;
        DAT_1f80001c._1_1_ = uVar19;
        _DAT_1f80001e = DAT_1f800006;
      }
    }
  }
  uVar4 = uVar4 - 1;
  if ((int)uVar4 < 0) {
    uVar4 = 0;
  }
  iVar5 = (uVar4 >> 1) * 4;
  uVar8 = uVar8 - 1;
  if ((int)uVar8 < 0) {
    uVar8 = 0;
  }
  iVar9 = (uVar8 >> 1) << 7;
  iVar33 = iVar5;
  DAT_1f800088 = _DAT_1f800080;
  DAT_1f800090 = _DAT_1f800080;
  DAT_1f800098 = uVar3;
  DAT_1f80009c = uVar17;
  _DAT_1f8000a0 = uVar7;
  DAT_1f8000a8 = uVar12;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  do {
    do {
      piVar23 = piVar40;
      *piVar23 = iVar33 + iVar9 + iVar31;
      piVar40 = piVar23 + 1;
      bVar1 = iVar33 != (uVar18 + 1 >> 1) << 2;
      iVar33 = iVar33 + 4;
    } while (bVar1);
    bVar1 = iVar9 != (uVar20 + 1 >> 1) << 7;
    iVar9 = iVar9 + 0x80;
    iVar33 = iVar5;
  } while (bVar1);
  *piVar40 = iVar31;
  piVar23[2] = 0;
  puVar37 = &DAT_80066d38;
LAB_8003df48:
  do {
    do {
      do {
        do {
          uVar3 = *_DAT_1f8000c4;
          _DAT_1f8000c4 = _DAT_1f8000c4 + 1;
          if ((int)uVar3 < 1) {
            puVar41 = (undefined *)(uVar3 - 4);
            if (uVar3 != 0) goto LAB_8003df6c;
            if (DAT_1f8000bc == 0) {
              return 0;
            }
            if (DAT_1f8000bc == _DAT_1f8000c0 - (_DAT_1f8000c0 >> 8)) {
              return 0;
            }
            gte_ldLZCS(DAT_1f8000bc);
            uVar3 = gte_stLZCR();
            uVar7 = (uVar3 & 0xfe) - 0x18;
            iVar31 = DAT_1f8000bc << (uVar7 & 0x1f);
            if ((int)uVar7 < 0) {
              iVar31 = (int)DAT_1f8000bc >> (-uVar7 & 0x1f);
            }
            uVar3 = (uint)((int)squareRootLookup[iVar31 + -0x40] <<
                          (0x1f - (uVar3 & 0xfe) >> 1 & 0x1f)) >> 0xc;
            pVVar29 = &Vec3_8006ab70;
            iVar31 = uVar3 + ((int)(DAT_1f8000bc - uVar3 * uVar3) / (int)(uVar3 + 1) >> 1);
            do {
              iVar5 = iVar34 - _DAT_1f8000b0;
              iVar33 = iVar35 - _DAT_1f8000b4;
              iVar9 = iVar36 - DAT_1f8000b8;
              gte_ldsv_(iVar5,iVar33,iVar9);
              gte_ldIR0(param_2);
              gte_gpf0(0);
              read_mt(iVar5,iVar33,iVar9);
              iVar5 = iVar5 / iVar31;
              iVar33 = iVar33 / iVar31;
              iVar9 = iVar9 / iVar31;
              gte_ldsv_(iVar5,iVar33,iVar9);
              gte_sqr0_b(0);
              read_mt(pVVar29,in_t3,in_t4);
              pVVar29 = (Vec3 *)((int)pVVar29 + ((in_t4 + in_t3) - _DAT_1f8000c0));
              iVar31 = iVar31 + -1;
            } while ((int)pVVar29 < 0);
            Vec3_8006ab70.x = _DAT_1f8000b0;
            Vec3_8006ab70.y = _DAT_1f8000b4;
            Vec3_8006ab70.z = DAT_1f8000b8;
            Vec3_8006ab7c.x = _DAT_1f8000b0 + iVar5;
            Vec3_8006ab7c.y = _DAT_1f8000b4 + iVar33;
            Vec3_8006ab7c.z = DAT_1f8000b8 + iVar9;
            return 1;
          }
          uVar12 = uVar3 >> 8 & 0xff;
          uVar7 = uVar3 >> 0x10 & 0xff;
          puVar25 = (ushort *)TerrainCollisionData->field3_0xc;
          pTVar38 = TerrainCollisionData->triangles;
          puVar26 = (ushort *)((uint)puVar25[(uVar3 & 0xff) + 1] + (int)puVar25);
        } while ((puVar25[(uVar3 & 0xff) + 1] == 0xffff) ||
                ((int)((uint)*puVar25 - (uVar3 & 0xff)) < 1));
        uVar3 = (uint)puVar26[uVar12 + 1];
        puVar25 = (ushort *)(uVar3 + (int)puVar25);
      } while ((uVar3 == 0xffff) || ((int)(*puVar26 - uVar12) < 1));
      uVar3 = (uint)puVar25[uVar7 + 1];
    } while (((int)(*puVar25 - uVar7) < 1) || (uVar3 == 0xffff));
    puVar39 = (uint *)((int)(TerrainCollisionData->field4_0x10 + uVar3 * 2) + 2);
    puVar2 = (undefined *)((int)*(short *)(TerrainCollisionData->field4_0x10 + uVar3 * 2) & 0x7fff);
LAB_8003e518:
    puVar41 = puVar2;
    puVar37 = (undefined4 *)puVar41;
  } while ((int)puVar41 < 0);
  puVar37 = (undefined4 *)(int)*(short *)puVar39;
  puVar39 = (uint *)((int)puVar39 + 2);
  puVar28 = (uint *)((int)pTVar38 + (int)puVar41 * 0xc);
  uVar7 = puVar28[2];
  in_t4 = (uVar7 & 0x3fff) - _DAT_1f800094;
  uVar3 = uVar7 >> 0x18;
  in_t3 = _DAT_1f800094;
  puVar2 = (undefined *)puVar37;
  if ((int)in_t4 < 1) {
    uVar12 = uVar7 >> 0x10 & 0xff;
    in_t4 = in_t4 + DAT_1f800090 + uVar12 & in_t4 + DAT_1f800090 + uVar3;
    in_t3 = DAT_1f80008c;
    if (-1 < (int)in_t4) {
      uVar17 = puVar28[1];
      iVar31 = (int)uVar17 >> 0x17;
      iVar5 = (int)(uVar17 << 9) >> 0x17;
      uVar4 = (uVar17 & 0x3fff) - DAT_1f80008c;
      in_t3 = uVar4 | uVar4 + iVar5 | uVar4 + iVar31;
      uVar4 = uVar4 + DAT_1f800088;
      in_t4 = DAT_1f800088;
      if (((int)in_t3 < 1) &&
         (in_t4 = uVar4 & uVar4 + iVar5 & uVar4 + iVar31, in_t3 = _DAT_1f800084, -1 < (int)in_t4)) {
        uVar4 = *puVar28;
        iVar33 = (int)uVar4 >> 0x17;
        iVar9 = (int)(uVar4 << 9) >> 0x17;
        uVar8 = (uVar4 & 0x3fff) - _DAT_1f800084;
        in_t3 = uVar8 | uVar8 + iVar9 | uVar8 + iVar33;
        uVar8 = uVar8 + _DAT_1f800080;
        in_t4 = _DAT_1f800080;
        if ((int)in_t3 < 1) {
          in_t4 = uVar8 & uVar8 + iVar9 & uVar8 + iVar33;
          iVar6 = (uVar4 & 0x3fff) << 4;
          if (-1 < (int)in_t4) {
            iVar10 = (uVar17 & 0x3fff) << 4;
            iVar14 = (uVar7 & 0x3fff) << 4;
            uVar8 = (uVar7 & 0x8000) >> 0xf;
            iVar16 = iVar33 >> uVar8;
            iVar24 = iVar31 >> uVar8;
            iVar30 = (int)uVar3 >> uVar8;
            uVar17 = iVar9 >> uVar8;
            uVar4 = iVar5 >> uVar8;
            uVar8 = (int)uVar12 >> uVar8;
            do {
              gte_ldsv_(uVar17,uVar4,uVar8);
              gte_ldR11R12(iVar16);
              gte_ldR22R23(iVar24);
              gte_ldR33(iVar30);
              in_t3 = iVar35 - iVar10;
              gte_op0_b(0);
              in_t4 = iVar36 - iVar14;
              gte_ldR11R12(in_t3 * 0x10000 + (iVar34 - iVar6 & 0xffffU));
              gte_ldR13R21(in_t4);
              read_mt(uVar17,uVar4,uVar8);
              gte_ldR31R32(uVar4 * 0x10000 + (uVar17 & 0xffff));
              gte_ldR33(uVar8);
              DAT_1f8000d8 = uVar7 & 0x4000;
              gte_rtir_sf0_b();
              if (DAT_1f8000d8 == 0) {
                iVar16 = gte_stMAC1();
                iVar24 = gte_stMAC3();
                gte_ldLZCS(iVar16);
                if (0 < iVar16) goto LAB_8003e6cc;
              }
              else {
                iVar16 = gte_stMAC1();
                iVar24 = gte_stMAC3();
                gte_ldLZCS(iVar16);
LAB_8003e6cc:
                iVar30 = gte_stLZCR();
                uVar7 = iVar30 - 2;
                if (-1 < iVar30 + -0xe) {
                  uVar7 = 0xc;
                }
                iVar24 = iVar24 >> (0xc - uVar7 & 0x1f);
                iVar16 = (iVar16 << (uVar7 & 0x1f)) / iVar24;
                if (-1 < (int)puVar41) {
                  iVar33 = iVar33 << 4;
                  iVar31 = iVar31 << 4;
                  uVar3 = uVar3 << 4;
                  iVar9 = iVar9 << 4;
                  iVar5 = iVar5 << 4;
                  uVar12 = uVar12 << 4;
                }
                gte_ldsv_(uVar17,uVar4,uVar8);
                gte_ldIR0(iVar16);
                gte_gpf0(0);
                read_mt(iVar16,iVar24,uVar7);
                iVar16 = iVar16 >> 0xc;
                iVar24 = iVar24 >> 0xc;
                iVar30 = (int)uVar7 >> 0xc;
                gte_ldsv_(iVar16,iVar24,iVar30);
                uVar13 = (iVar34 - iVar6) - iVar16;
                in_t3 = in_t3 - iVar24;
                gte_sqr0_b(0);
                in_t4 = in_t4 - iVar30;
                uVar7 = DAT_1f8000bc;
                if (DAT_1f8000d8 != 0) {
                  uVar7 = _DAT_1f8000c0;
                }
                read_mt(iVar16,iVar24,iVar30);
                if (0 < (int)(((uVar7 - iVar16) - iVar24) - iVar30)) {
                  cVar32 = (int)(uVar17 + uVar4 ^ uVar17 - uVar4) < 0;
                  uVar7 = uVar17;
                  if ((bool)cVar32) {
                    uVar7 = uVar4;
                  }
                  if ((int)(uVar7 + uVar8 ^ uVar7 - uVar8) < 0) {
                    cVar32 = '\x02';
                    uVar7 = uVar8;
                  }
                  gte_ldsv_(iVar33,iVar31,uVar3);
                  gte_ldR11R12(uVar13);
                  gte_ldR22R23(in_t3);
                  gte_ldR33(in_t4);
                  gte_op0(0);
                  uVar18 = gte_stMAC1();
                  if ((cVar32 != '\0') && (uVar18 = gte_stMAC2(), cVar32 != '\x01')) {
                    uVar18 = gte_stMAC3();
                  }
                  gte_ldsv_(uVar13,in_t3,in_t4);
                  gte_ldR11R12(iVar9);
                  gte_ldR22R23(iVar5);
                  gte_ldR33(uVar12);
                  gte_op0(0);
                  uVar20 = gte_stMAC1();
                  if ((cVar32 != '\0') && (uVar20 = gte_stMAC2(), cVar32 != '\x01')) {
                    uVar20 = gte_stMAC3();
                  }
                  gte_ldIR1(iVar9 - iVar33);
                  gte_ldIR2(iVar5 - iVar31);
                  gte_ldIR3(uVar12 - uVar3);
                  gte_ldR11R12(uVar13 - iVar33);
                  gte_ldR22R23(in_t3 - iVar31);
                  gte_ldR33(in_t4 - uVar3);
                  gte_op0(0);
                  uVar22 = gte_stMAC1();
                  if ((cVar32 != '\0') && (uVar22 = gte_stMAC2(), cVar32 != '\x01')) {
                    uVar22 = gte_stMAC3();
                  }
                  uVar7 = (uVar18 ^ uVar7) >> 0x1f | ((uVar20 ^ uVar7) >> 0x1f) << 1 |
                          ((uVar22 ^ uVar7) >> 0x1f) << 2;
                  if (uVar7 == 1) {
                    iVar6 = iVar9 + iVar6;
                    iVar10 = iVar5 + iVar10;
                    iVar14 = uVar12 + iVar14;
                  }
                  else if (uVar7 == 2) {
                    iVar6 = iVar33 + iVar6;
                    iVar10 = iVar31 + iVar10;
                    iVar14 = uVar3 + iVar14;
                  }
                  else {
                    iVar33 = iVar33 >> 4;
                    iVar31 = iVar31 >> 4;
                    iVar16 = (int)uVar3 >> 4;
                    iVar9 = iVar9 >> 4;
                    iVar5 = iVar5 >> 4;
                    iVar24 = (int)uVar12 >> 4;
                    if (uVar7 == 3) {
                      uVar13 = uVar13 + iVar9 * -0x10;
                      in_t3 = in_t3 + iVar5 * -0x10;
                      in_t4 = in_t4 + iVar24 * -0x10;
                      goto LAB_8003e9bc;
                    }
                    if (uVar7 != 4) {
                      if (uVar7 == 5) {
                        iVar33 = iVar9;
                        iVar31 = iVar5;
                        iVar16 = iVar24;
                        iVar9 = 0;
                        iVar5 = 0;
                        iVar24 = 0;
LAB_8003e9bc:
                        gte_ldR31R32(in_t3 * 0x10000 + (uVar13 & 0xffff));
                        gte_ldR33(in_t4);
                        uVar3 = iVar33 - iVar9;
                        iVar34 = iVar31 - iVar5;
                        iVar35 = iVar16 - iVar24;
                        gte_ldsv_(uVar3,iVar34,iVar35);
                        gte_ldR11R12(iVar34 * 0x10000 + (uVar3 & 0xffff));
                        gte_ldR13R21(iVar35);
                        gte_rtir_sf0();
                        iVar36 = gte_stMAC3();
                        iVar6 = gte_stMAC1();
                        iVar6 = (iVar36 << 4) / iVar6;
                        gte_ldsv_(uVar3,iVar34,iVar35);
                        iVar36 = iVar33 * 0x10 + iVar9 * -0x10;
                        iVar33 = 0;
                        iVar34 = iVar31 * 0x10 + iVar5 * -0x10;
                        if ((iVar36 - iVar34 ^ iVar36 + iVar34) < 0) {
                          iVar36 = iVar31 * 0x10 + iVar5 * -0x10;
                          iVar33 = 8;
                        }
                        iVar31 = iVar16 * 0x10 + iVar24 * -0x10;
                        if ((iVar36 - iVar31 ^ iVar36 + iVar31) < 0) {
                          iVar33 = 0x10;
                        }
                        gte_ldIR0(iVar6);
                        gte_gpf0_b(0);
                        read_mt(iVar6,0x8003eab8,iVar35);
                    // WARNING: Could not recover jumptable at 0x8003eab0. Too many branches
                    // WARNING: Treating indirect jump as call
                        uVar11 = (*(code *)(&UNK_8003eab8 + iVar33))();
                        return uVar11;
                      }
                      if (uVar7 == 6) {
                        iVar9 = 0;
                        iVar5 = 0;
                        iVar24 = 0;
                        goto LAB_8003e9bc;
                      }
                      iVar6 = uVar13 + iVar6;
                      iVar10 = in_t3 + iVar10;
                      iVar14 = in_t4 + iVar14;
                    }
                  }
                  iVar31 = iVar34 - iVar6;
                  iVar5 = iVar35 - iVar10;
                  iVar33 = iVar36 - iVar14;
                  gte_ldsv_(iVar31,iVar5,iVar33);
                  gte_sqr0_b(0);
                  uVar3 = DAT_1f8000bc;
                  if (DAT_1f8000d8 != 0) {
                    uVar3 = _DAT_1f8000c0;
                  }
                  read_mt(iVar31,iVar5,iVar33);
                  uVar7 = iVar31 + iVar5 + iVar33;
                  in_t3 = DAT_1f8000c8;
                  if (0 < (int)(uVar3 - uVar7)) {
                    in_t3 = DAT_1f8000c8 & 1;
                    puVar2 = (undefined *)puVar37;
                    if (DAT_1f8000d8 != 0) {
                      isOnWaterSurface = DAT_1f8000d8 >> 0xc;
                      break;
                    }
                    _DAT_1f8000b0 = iVar6;
                    _DAT_1f8000b4 = iVar10;
                    DAT_1f8000b8 = iVar14;
                    DAT_1f8000bc = uVar7;
                    Vec3_8006ab88.x = uVar17;
                    Vec3_8006ab88.y = uVar4;
                    Vec3_8006ab88.z = uVar8;
                    if (-1 < (int)puVar41) {
                      DAT_8006aba0 = (undefined *)0x0;
                      DAT_8006ab94 = 0xff;
                      if (0 < (int)(TerrainCollisionData->collisionFlagsOffset - (int)puVar41)) {
                        DAT_8006ab94 = (uint)TerrainCollisionData->collisionFlags[(int)puVar41];
                      }
                      DAT_8006ab98 = 0xfe;
                      if (0 < (int)(TerrainCollisionData->field2_0x8 - (int)puVar41)) {
                        DAT_8006ab98 = (uint)(byte)TerrainCollisionData->field7_0x1c[(int)puVar41];
                      }
                      overTriangleIndex = puVar41;
                      if (in_t3 != 0) {
                        Vec3_8006ab70.x = iVar6;
                        Vec3_8006ab70.y = iVar10;
                        Vec3_8006ab70.z = iVar14;
                        DAT_8006aba0 = (undefined *)0x0;
                        return 1;
                      }
                      break;
                    }
                    DAT_8006aba0 = puVar41;
                    if ((0 < (int)DAT_1f8000dc << 0x18) && (DAT_1f8000cc != (undefined4 *)0x0)) {
                      *DAT_1f8000cc =
                           *(undefined4 *)
                            (&DAT_80064668 + ((uint)((int)DAT_1f8000dc << 0x18) >> 0x16));
                    }
                    overTriangleIndex = (undefined *)((uint)puVar39 | 0x80000000);
                    DAT_8006ab94 = 0xff;
                    *(uint *)(puVar41 + 0x18) = _DAT_1f8000d0 | *(uint *)(puVar41 + 0x18);
                    DAT_8006ab98 = 0xfe;
                    if (in_t3 != 0) {
                      Vec3_8006ab70.x = _DAT_1f8000b0;
                      Vec3_8006ab70.y = _DAT_1f8000b4;
                      Vec3_8006ab70.z = DAT_1f8000b8;
                      DAT_8006ab98 = 0xfe;
                      return 1;
                    }
                  }
                }
              }
              do {
                do {
                  do {
                    while( true ) {
                      puVar2 = (undefined *)puVar37;
                      if (-1 < (int)puVar41) goto LAB_8003e518;
                      puVar37 = (undefined4 *)*puVar39;
                      puVar39 = puVar39 + 1;
                      if (-1 < (int)puVar37) break;
LAB_8003df6c:
                      do {
                        do {
                          do {
                            do {
                              do {
                                puVar41 = *(undefined **)(puVar41 + 4);
                                puVar39 = *(uint **)(puVar41 + 8);
                                if (puVar41 == (undefined *)0x0) goto LAB_8003df48;
                                iVar31 = *(int *)(puVar41 + 0xc);
                              } while ((puVar41 == _DAT_1f8000d4) || (puVar39 == (uint *)0x0));
                              in_t4 = *puVar39 >> 0x10;
                              uVar3 = *puVar39 & 0xff;
                            } while (in_t4 == 0);
                            iVar5 = uVar3 * 0x20;
                          } while (((((-1 < (int)((DAT_1f800098 + uVar3 * -0x20) - iVar31)) ||
                                     (iVar33 = *(int *)(puVar41 + 0x10),
                                     (int)((DAT_1f80009c + iVar5) - iVar31) < 1)) ||
                                    (-1 < (int)((_DAT_1f8000a0 + uVar3 * -0x20) - iVar33))) ||
                                   ((iVar9 = *(int *)(puVar41 + 0x14),
                                    (int)((_DAT_1f8000a4 + iVar5) - iVar33) < 1 ||
                                    (-1 < (int)((DAT_1f8000a8 + uVar3 * -0x20) - iVar9))))) ||
                                  (iVar6 = iVar31 - iVar34,
                                  (int)((DAT_1f8000ac + iVar5) - iVar9) < 1));
                          iVar10 = iVar33 - iVar35;
                          iVar14 = iVar9 - iVar36;
                          gte_ldsv_(iVar6,iVar10,iVar14);
                          gte_sqr0_b(0);
                          read_mt(iVar6,iVar10,iVar14);
                        } while ((int)((((iVar5 + param_2) * (iVar5 + param_2) - iVar6) - iVar10) -
                                      iVar14) < 1);
                        gte_ldR11R12(*(undefined4 *)(puVar41 + 0x20));
                        gte_ldR13R21(*(undefined4 *)(puVar41 + 0x24));
                        gte_ldR22R23(*(undefined4 *)(puVar41 + 0x28));
                        gte_ldR31R32(*(undefined4 *)(puVar41 + 0x2c));
                        gte_ldR33(*(undefined4 *)(puVar41 + 0x30));
                        uVar7 = *(uint *)(puVar41 + 0x3c);
                        iVar5 = (&objectModels[*(ushort *)(puVar41 + 0x36)][2].field3_0xc)
                                [uVar7 & 0xff];
                        uVar12 = (uint)*(char *)(iVar5 + 2);
                        piVar40 = (int *)((*(uint *)(iVar5 + (uVar7 >> 0xd & 0x7f8) + 0x24) & 0xffff
                                          ) * 2 + *(int *)(iVar5 + 0x20));
                        uVar3 = in_t4 & 0x7f;
                        if ((byte)(&DAT_80062868)[(byte)puVar41[0x40]] == 0) {
                          iVar5 = *piVar40;
                          in_t4 = 0x40000000;
                          uVar7 = 0;
                          uVar17 = 0x40000000;
                          uVar4 = 0;
                          puVar28 = (uint *)&DAT_1f800100;
                          do {
                            piVar40 = piVar40 + 1;
                            gte_ldIR3(iVar5 >> 0x15);
                            gte_ldIR1((iVar5 << 10) >> 0x15);
                            gte_ldIR2((iVar5 << 0x14) >> 0x14);
                            puVar15 = puVar28 + 3;
                            gte_rtir_b();
                            iVar5 = *piVar40;
                            iVar6 = gte_stMAC3();
                            iVar10 = gte_stMAC1();
                            iVar14 = gte_stMAC2();
                            uVar8 = (iVar6 << (uVar12 & 0x1f)) + iVar31;
                            uVar13 = iVar33 - (iVar10 << (uVar12 & 0x1f));
                            puVar28[2] = iVar9 - (iVar14 << (uVar12 & 0x1f));
                            if (0 < (int)(in_t4 - uVar8)) {
                              in_t4 = uVar8;
                            }
                            if ((int)(uVar7 - uVar8) < 0) {
                              uVar7 = uVar8;
                            }
                            if (0 < (int)(uVar17 - uVar13)) {
                              uVar17 = uVar13;
                            }
                            *puVar28 = uVar8;
                            if ((int)(uVar4 - uVar13) < 0) {
                              uVar4 = uVar13;
                            }
                            puVar28[1] = uVar13;
                            puVar28 = puVar15;
                          } while (puVar15 != (uint *)(&DAT_1f800100 + uVar3 * 6));
                        }
                        else {
                          iVar5 = *(int *)((int)&objectModels[*(ushort *)(puVar41 + 0x36)][2].
                                                 field3_0xc + (uVar7 >> 6 & 0x3fc));
                          iVar6 = *piVar40;
                          piVar23 = (int *)((*(uint *)(iVar5 + (uVar7 >> 0x15 & 0x7f8) + 0x24) &
                                            0xffff) * 2 + *(int *)(iVar5 + 0x20));
                          gte_ldIR0((uint)(byte)(&DAT_80062868)[(byte)puVar41[0x40]] << 4);
                          in_t4 = 0x40000000;
                          uVar7 = 0;
                          uVar17 = 0x40000000;
                          uVar4 = 0;
                          puVar28 = (uint *)&DAT_1f800100;
                          do {
                            piVar40 = piVar40 + 1;
                            iVar14 = *piVar23;
                            gte_ldsv_(iVar6 >> 0x15,(iVar6 << 10) >> 0x15,(iVar6 << 0x14) >> 0x14);
                            iVar5 = iVar14 >> 0x15;
                            iVar10 = (iVar14 << 10) >> 0x15;
                            iVar14 = (iVar14 << 0x14) >> 0x14;
                            gte_ldfcdir(iVar5,iVar10,iVar14);
                            piVar23 = piVar23 + 1;
                            gte_intpl_b();
                            iVar6 = *piVar40;
                            puVar15 = puVar28 + 3;
                            read_mt(iVar5,iVar10,iVar14);
                            gte_ldIR3(iVar5);
                            gte_ldIR1(iVar10);
                            gte_ldIR2(iVar14);
                            gte_rtir();
                            iVar5 = gte_stMAC3();
                            iVar10 = gte_stMAC1();
                            iVar14 = gte_stMAC2();
                            uVar8 = (iVar5 << (uVar12 & 0x1f)) + iVar31;
                            uVar13 = iVar33 - (iVar10 << (uVar12 & 0x1f));
                            puVar28[2] = iVar9 - (iVar14 << (uVar12 & 0x1f));
                            if (0 < (int)(in_t4 - uVar8)) {
                              in_t4 = uVar8;
                            }
                            if ((int)(uVar7 - uVar8) < 0) {
                              uVar7 = uVar8;
                            }
                            if (0 < (int)(uVar17 - uVar13)) {
                              uVar17 = uVar13;
                            }
                            *puVar28 = uVar8;
                            if ((int)(uVar4 - uVar13) < 0) {
                              uVar4 = uVar13;
                            }
                            puVar28[1] = uVar13;
                            puVar28 = puVar15;
                          } while (puVar15 != (uint *)(&DAT_1f800100 + uVar3 * 6));
                        }
                        puVar39 = puVar39 + 1;
                        pTVar38 = (Triangle *)&DAT_1f800100;
                        in_t3 = DAT_1f80009c - in_t4;
                      } while (((0 < (int)(DAT_1f800098 - uVar7)) || ((int)in_t3 < 0)) ||
                              ((in_t3 = _DAT_1f8000a4 - uVar17, 0 < (int)(_DAT_1f8000a0 - uVar4) ||
                               ((int)in_t3 < 0))));
                    }
                    piVar27 = (int *)((int)pTVar38 +
                                     ((uint)puVar37 >> 0x15 & 0x1f8) +
                                     (((uint)puVar37 >> 0x15 & 0x1f8) >> 1));
                    iVar6 = *piVar27;
                    piVar23 = (int *)((int)pTVar38 +
                                     ((uint)puVar37 >> 0xd & 0x1f8) +
                                     (((uint)puVar37 >> 0xd & 0x1f8) >> 1));
                    iVar9 = *piVar23;
                    piVar40 = (int *)((int)pTVar38 +
                                     ((uint)puVar37 >> 5 & 0x1f8) +
                                     (((uint)puVar37 >> 5 & 0x1f8) >> 1));
                    iVar33 = *piVar40;
                    in_t3 = DAT_1f800098;
                    in_t4 = DAT_1f80009c;
                  } while (((int)(iVar33 - DAT_1f800098 & iVar9 - DAT_1f800098 &
                                 iVar6 - DAT_1f800098) < 0) ||
                          (iVar10 = piVar27[1],
                          (int)(DAT_1f80009c - iVar33 & DAT_1f80009c - iVar9 & DAT_1f80009c - iVar6)
                          < 0));
                  iVar5 = piVar23[1];
                  iVar31 = piVar40[1];
                  in_t3 = _DAT_1f8000a0;
                  in_t4 = _DAT_1f8000a4;
                } while (((int)(iVar31 - _DAT_1f8000a0 & iVar5 - _DAT_1f8000a0 &
                               iVar10 - _DAT_1f8000a0) < 0) ||
                        (iVar14 = piVar27[2],
                        (int)(_DAT_1f8000a4 - iVar31 & _DAT_1f8000a4 - iVar5 &
                             _DAT_1f8000a4 - iVar10) < 0));
                iVar24 = piVar23[2];
                iVar16 = piVar40[2];
                in_t3 = DAT_1f8000a8;
                in_t4 = DAT_1f8000ac;
              } while (((int)(iVar16 - DAT_1f8000a8 & iVar24 - DAT_1f8000a8 & iVar14 - DAT_1f8000a8)
                        < 0) || (iVar33 = iVar33 - iVar6,
                                (int)(DAT_1f8000ac - iVar16 & DAT_1f8000ac - iVar24 &
                                     DAT_1f8000ac - iVar14) < 0));
              iVar31 = iVar31 - iVar10;
              uVar3 = iVar16 - iVar14;
              iVar9 = iVar9 - iVar6;
              iVar5 = iVar5 - iVar10;
              uVar12 = iVar24 - iVar14;
              iVar16 = iVar33 >> 5;
              iVar24 = iVar31 >> 5;
              iVar30 = (int)uVar3 >> 5;
              uVar17 = iVar9 >> 5;
              uVar4 = iVar5 >> 5;
              uVar8 = (int)uVar12 >> 5;
              uVar7 = 0;
              DAT_1f8000dc = (undefined *)puVar37;
            } while( true );
          }
        }
      }
    }
  }
  goto LAB_8003e518;
}



// WARNING: Instruction at (ram,0x8003f3bc) overlaps instruction at (ram,0x8003f3b8)
// 
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

uint FUN_8003ee3c(uint *param_1,int param_2,uint param_3,undefined *param_4)

{
  ushort *puVar1;
  undefined *puVar2;
  uint uVar3;
  int *piVar4;
  int iVar5;
  int *piVar6;
  int iVar7;
  int *piVar8;
  int iVar9;
  uint uVar10;
  int *piVar11;
  uint uVar12;
  int iVar13;
  ushort *puVar14;
  int iVar15;
  ushort *puVar16;
  int iVar17;
  uint *puVar18;
  uint uVar19;
  int iVar20;
  int iVar21;
  int iVar22;
  uint uVar23;
  uint uVar24;
  int iVar25;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  int iVar26;
  undefined4 unaff_s2;
  int iVar27;
  undefined4 unaff_s3;
  int *piVar28;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  uint uVar29;
  undefined4 unaff_s6;
  uint uVar30;
  undefined4 unaff_s7;
  uint uVar31;
  uint uVar32;
  uint uVar33;
  undefined4 *puVar34;
  Triangle *pTVar35;
  undefined4 unaff_s8;
  uint *puVar36;
  undefined4 unaff_retaddr;
  undefined *puVar37;
  undefined auStackX_0 [16];
  
  DAT_8006aa0c = &DAT_80066d38;
  piVar28 = (int *)&DAT_1f800000;
  uVar33 = param_1[2];
  uVar32 = param_1[1];
  uVar31 = *param_1;
  if ((int)(uVar33 | uVar32 | uVar31) < 0) {
    DAT_8006aa18 = unaff_retaddr;
    DAT_8006aa14 = unaff_s8;
    DAT_8006aa10 = auStackX_0;
    DAT_8006aa08 = unaff_s7;
    DAT_8006aa04 = unaff_s6;
    DAT_8006aa00 = unaff_s5;
    DAT_8006a9fc = unaff_s4;
    DAT_8006a9f8 = unaff_s3;
    DAT_8006a9f4 = unaff_s2;
    DAT_8006a9f0 = unaff_s1;
    DAT_8006a9ec = unaff_s0;
    _DAT_1f80001c = param_4;
    _DAT_1f800018 = param_3;
    return 0;
  }
  uVar29 = uVar33 - param_2;
  if ((int)uVar29 < 0) {
    uVar29 = 0;
  }
  uVar3 = uVar31 >> 0xd;
  iVar5 = (uVar32 >> 0xd) * 0x20;
  _DAT_1f800000 = (uVar3 + iVar5) * 4 + DAT_80067174;
  iVar7 = uVar3 + 1;
  if (((uVar31 & 0x1000) == 0) && (uVar3 != 0)) {
    iVar7 = uVar3 - 1;
  }
  _DAT_1f800004 = (iVar7 + iVar5) * 4 + DAT_80067174;
  iVar9 = iVar5 + 0x20;
  if (((uVar32 & 0x1000) == 0) && (uVar32 >> 0xd != 0)) {
    iVar9 = iVar5 + -0x20;
  }
  _DAT_1f800008 = (uVar3 + iVar9) * 4 + DAT_80067174;
  _DAT_1f80000c = (iVar7 + iVar9) * 4 + DAT_80067174;
  _DAT_1f800010 = DAT_80067174;
  _DAT_1f800014 = 0;
  iVar5 = (uVar33 >> 0xc) + 1;
  Vec3_8006ab70.z = uVar29;
  puVar34 = &DAT_80066d38;
  _DAT_1f800018 = param_3;
  _DAT_1f80001c = param_4;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
LAB_8003ef8c:
  do {
    do {
      do {
        iVar7 = *piVar28;
        if (iVar7 != 0) {
          piVar28 = piVar28 + 1;
          puVar37 = (undefined *)(iVar7 + -4);
          iVar7 = iVar5;
          goto LAB_8003efa4;
        }
        iVar7 = iVar5 + -1;
        if (iVar5 * 0x1000 - Vec3_8006ab70.z < 1) {
          if (Vec3_8006ab70.z == uVar29) {
            Vec3_8006ab70.x = uVar31;
            Vec3_8006ab70.y = uVar32;
            Vec3_8006ab70.z = 0;
            return 0;
          }
          Vec3_8006ab70.x = uVar31;
          Vec3_8006ab70.y = uVar32;
          return Vec3_8006ab70.z;
        }
        puVar14 = (ushort *)TerrainCollisionData->field3_0xc;
        pTVar35 = TerrainCollisionData->triangles;
        puVar1 = puVar14 + iVar5;
        puVar16 = (ushort *)((uint)*puVar1 + (int)puVar14);
        iVar5 = iVar7;
      } while ((*puVar1 == 0xffff) || ((int)((uint)*puVar14 - iVar7) < 1));
      uVar3 = (uint)puVar16[(uVar32 >> 0xc) + 1];
      puVar14 = (ushort *)(uVar3 + (int)puVar14);
    } while ((uVar3 == 0xffff) || ((int)((uint)*puVar16 - (uVar32 >> 0xc)) < 1));
    uVar3 = (uint)puVar14[(uVar31 >> 0xc) + 1];
  } while (((int)((uint)*puVar14 - (uVar31 >> 0xc)) < 1) || (uVar3 == 0xffff));
  puVar36 = (uint *)((int)(TerrainCollisionData->field4_0x10 + uVar3 * 2) + 2);
  puVar2 = (undefined *)((int)*(short *)(TerrainCollisionData->field4_0x10 + uVar3 * 2) & 0x7fff);
LAB_8003f4bc:
  do {
    puVar37 = puVar2;
    iVar5 = iVar7;
    puVar34 = (undefined4 *)puVar37;
    if ((int)puVar37 < 0) goto LAB_8003ef8c;
    puVar34 = (undefined4 *)(int)*(short *)puVar36;
    puVar36 = (uint *)((int)puVar36 + 2);
    puVar18 = (uint *)((int)pTVar35 + (int)puVar37 * 0xc);
    uVar3 = *puVar18;
    iVar9 = (int)uVar3 >> 0x17;
    iVar5 = (int)(uVar3 << 9) >> 0x17;
    uVar3 = uVar3 & 0x3fff;
    iVar26 = uVar3 - (uVar31 >> 4);
    puVar2 = (undefined *)puVar34;
    if (uVar3 == uVar31 >> 4) goto LAB_8003f524;
    iVar27 = iVar26 + iVar9;
    if (iVar26 < 0) break;
    if (iVar27 < 1) goto LAB_8003f524;
    iVar27 = 0;
  } while (0 < iVar26 + iVar5);
  if ((iVar27 < 0) && (iVar26 + iVar5 < 0)) goto LAB_8003f4bc;
LAB_8003f524:
  uVar19 = puVar18[1];
  iVar27 = (int)uVar19 >> 0x17;
  iVar26 = (int)(uVar19 << 9) >> 0x17;
  uVar19 = uVar19 & 0x3fff;
  iVar21 = uVar19 - (uVar32 >> 4);
  if (uVar19 != uVar32 >> 4) {
    iVar22 = iVar21 + iVar27;
    if (-1 < iVar21) {
      if (iVar22 < 1) goto LAB_8003f56c;
      iVar22 = 0;
      if (0 < iVar21 + iVar26) goto LAB_8003f4bc;
    }
    if ((iVar22 < 0) && (iVar21 + iVar26 < 0)) goto LAB_8003f4bc;
  }
LAB_8003f56c:
  uVar24 = puVar18[2];
  uVar23 = uVar24 & 0x3fff;
  uVar10 = uVar24 >> 0x18;
  if ((int)(uVar23 - uVar33) < 1) {
    uVar12 = uVar24 >> 0x10 & 0xff;
    iVar21 = ((uint)Vec3_8006ab70.z >> 4) - uVar23;
    uVar24 = uVar24 & 0x4000;
    uVar30 = Vec3_8006ab70.z;
    if ((int)(iVar21 - uVar12 | iVar21 - uVar10) < 1) {
      do {
        gte_ldsv_(iVar5,iVar26,uVar12);
        gte_ldR11R12(iVar9);
        gte_ldR22R23(iVar27);
        gte_ldR33(uVar10);
        gte_op0_b(0);
        iVar21 = 10;
        if (-1 < (int)puVar37) {
          iVar21 = 2;
          uVar3 = uVar3 << 4;
          uVar19 = uVar19 << 4;
          uVar23 = uVar23 << 4;
        }
        iVar15 = gte_stMAC3();
        iVar13 = gte_stMAC2();
        iVar20 = gte_stMAC1();
        iVar22 = iVar9;
        iVar25 = iVar27;
        _DAT_1f800020 = uVar24;
        if ((0 < iVar15) ||
           ((iVar15 != 0 &&
            (iVar22 = iVar5, iVar25 = iVar26, iVar5 = iVar9, iVar26 = iVar27,
            (_DAT_1f800018 & 2) != 0)))) {
          iVar9 = uVar31 - uVar3;
          iVar27 = uVar32 - uVar19;
          gte_ldIR1(iVar9);
          gte_ldIR2(iVar27);
          gte_ldR11R12(iVar22);
          gte_ldR22R23(iVar25);
          iVar20 = iVar20 >> iVar21;
          iVar13 = iVar13 >> iVar21;
          gte_op0_b(0);
          iVar15 = iVar15 >> iVar21;
          if (-1 < (int)puVar37) {
            iVar22 = iVar22 << 4;
            iVar25 = iVar25 << 4;
          }
          iVar21 = gte_stMAC3();
          if (-1 < iVar21) {
            gte_ldIR1(iVar5);
            gte_ldIR2(iVar26);
            gte_ldR11R12(iVar9);
            gte_ldR22R23(iVar27);
            gte_op0(0);
            if (-1 < (int)puVar37) {
              iVar5 = iVar5 << 4;
              iVar26 = iVar26 << 4;
            }
            iVar21 = gte_stMAC3();
            if (-1 < iVar21) {
              gte_ldIR1(iVar9 - iVar22);
              gte_ldIR2(iVar27 - iVar25);
              gte_ldR11R12(iVar5 - iVar22);
              gte_ldR22R23(iVar26 - iVar25);
              gte_op0_b(0);
              if ((((_DAT_1f800018 & 1) == 0) || (uVar24 == 0)) &&
                 (iVar5 = gte_stMAC3(), -1 < iVar5)) {
                iVar9 = -(iVar27 * iVar13) - iVar9 * iVar20;
                iVar5 = iVar9;
                if (iVar9 < 0) {
                  iVar5 = -iVar9;
                }
                gte_ldLZCS(iVar5);
                iVar5 = gte_stLZCR();
                uVar3 = iVar5 - 2;
                if (-1 < iVar5 + -0xe) {
                  uVar3 = 0xc;
                }
                Vec3_8006ab70.z =
                     uVar23 + ((iVar9 << (uVar3 & 0x1f)) / (iVar15 >> (0xc - uVar3 & 0x1f)) >> 0xc);
                if ((0 < (int)(uVar33 - Vec3_8006ab70.z)) && ((int)(uVar30 - Vec3_8006ab70.z) < 0))
                {
                  Vec3_8006ab88.x = iVar20;
                  Vec3_8006ab88.y = iVar13;
                  Vec3_8006ab88.z = iVar15;
                  if (-1 < (int)puVar37) {
                    DAT_8006aba0 = (undefined *)0x0;
                    DAT_8006ab94 = 0xff;
                    if (0 < (int)(TerrainCollisionData->collisionFlagsOffset - (int)puVar37)) {
                      DAT_8006ab94 = (uint)TerrainCollisionData->collisionFlags[(int)puVar37];
                    }
                    DAT_8006ab98 = 0xfe;
                    if (0 < (int)(TerrainCollisionData->field2_0x8 - (int)puVar37)) {
                      DAT_8006ab98 = (uint)(byte)TerrainCollisionData->field7_0x1c[(int)puVar37];
                    }
                    isOnWaterSurface = uVar24 >> 0xc;
                    puVar2 = (undefined *)puVar34;
                    overTriangleIndex = puVar37;
                    break;
                  }
                  overTriangleIndex = (undefined *)((uint)puVar36 | 0x80000000);
                  DAT_8006ab94 = 0xff;
                  DAT_8006ab98 = 0xfe;
                  isOnWaterSurface = 0;
                  uVar30 = Vec3_8006ab70.z;
                  DAT_8006aba0 = puVar37;
                }
              }
            }
          }
        }
LAB_8003f304:
        do {
          while( true ) {
            Vec3_8006ab70.z = uVar30;
            puVar2 = (undefined *)puVar34;
            if (-1 < (int)puVar37) goto LAB_8003f4bc;
            puVar34 = (undefined4 *)*puVar36;
            puVar36 = puVar36 + 1;
            if (-1 < (int)puVar34) break;
LAB_8003efa4:
            do {
              do {
                do {
                  do {
                    puVar37 = *(undefined **)(puVar37 + 4);
                    puVar36 = *(uint **)(puVar37 + 8);
                    iVar5 = iVar7;
                    if (puVar37 == (undefined *)0x0) goto LAB_8003ef8c;
                    iVar5 = *(int *)(puVar37 + 0xc);
                  } while ((puVar37 == _DAT_1f80001c) || (puVar36 == (uint *)0x0));
                  uVar3 = *puVar36 >> 0x10;
                  uVar19 = *puVar36 & 0xff;
                } while (uVar3 == 0);
                iVar9 = uVar19 * 0x20;
              } while (((((-1 < (int)((uVar31 + uVar19 * -0x20) - iVar5)) ||
                         (iVar26 = *(int *)(puVar37 + 0x10), (int)((uVar31 + iVar9) - iVar5) < 1))
                        || (-1 < (int)((uVar32 + uVar19 * -0x20) - iVar26))) ||
                       ((iVar27 = *(int *)(puVar37 + 0x14), (int)((uVar32 + iVar9) - iVar26) < 1 ||
                        (-1 < (int)((Vec3_8006ab70.z + uVar19 * -0x20) - iVar27))))) ||
                      ((int)((uVar33 + iVar9) - iVar27) < 1));
              gte_ldR11R12(*(undefined4 *)(puVar37 + 0x20));
              gte_ldR13R21(*(undefined4 *)(puVar37 + 0x24));
              gte_ldR22R23(*(undefined4 *)(puVar37 + 0x28));
              gte_ldR31R32(*(undefined4 *)(puVar37 + 0x2c));
              gte_ldR33(*(undefined4 *)(puVar37 + 0x30));
              uVar19 = *(uint *)(puVar37 + 0x3c);
              iVar9 = (&objectModels[*(ushort *)(puVar37 + 0x36)][2].field3_0xc)[uVar19 & 0xff];
              uVar10 = (uint)*(char *)(iVar9 + 2);
              piVar4 = (int *)((*(uint *)(iVar9 + (uVar19 >> 0xd & 0x7f8) + 0x24) & 0xffff) * 2 +
                              *(int *)(iVar9 + 0x20));
              uVar3 = uVar3 & 0x7f;
              if ((byte)(&DAT_80062868)[(byte)puVar37[0x40]] == 0) {
                iVar20 = *piVar4;
                iVar9 = 0x40000000;
                iVar21 = 0;
                iVar22 = 0x40000000;
                iVar25 = 0;
                piVar11 = (int *)&DAT_1f800100;
                do {
                  piVar4 = piVar4 + 1;
                  gte_ldIR3(iVar20 >> 0x15);
                  gte_ldIR1((iVar20 << 10) >> 0x15);
                  gte_ldIR2((iVar20 << 0x14) >> 0x14);
                  piVar6 = piVar11 + 3;
                  gte_rtir_b();
                  iVar20 = *piVar4;
                  iVar13 = gte_stMAC3();
                  iVar15 = gte_stMAC1();
                  iVar17 = gte_stMAC2();
                  iVar13 = (iVar13 << (uVar10 & 0x1f)) + iVar5;
                  iVar15 = iVar26 - (iVar15 << (uVar10 & 0x1f));
                  piVar11[2] = iVar27 - (iVar17 << (uVar10 & 0x1f));
                  if (0 < iVar9 - iVar13) {
                    iVar9 = iVar13;
                  }
                  if (iVar21 - iVar13 < 0) {
                    iVar21 = iVar13;
                  }
                  if (0 < iVar22 - iVar15) {
                    iVar22 = iVar15;
                  }
                  *piVar11 = iVar13;
                  if (iVar25 - iVar15 < 0) {
                    iVar25 = iVar15;
                  }
                  piVar11[1] = iVar15;
                  piVar11 = piVar6;
                } while (piVar6 != (int *)(&DAT_1f800100 + uVar3 * 6));
              }
              else {
                iVar9 = *(int *)((int)&objectModels[*(ushort *)(puVar37 + 0x36)][2].field3_0xc +
                                (uVar19 >> 6 & 0x3fc));
                iVar20 = *piVar4;
                piVar6 = (int *)((*(uint *)(iVar9 + (uVar19 >> 0x15 & 0x7f8) + 0x24) & 0xffff) * 2 +
                                *(int *)(iVar9 + 0x20));
                gte_ldIR0((uint)(byte)(&DAT_80062868)[(byte)puVar37[0x40]] << 4);
                iVar9 = 0x40000000;
                iVar21 = 0;
                iVar22 = 0x40000000;
                iVar25 = 0;
                piVar11 = (int *)&DAT_1f800100;
                do {
                  piVar4 = piVar4 + 1;
                  iVar17 = *piVar6;
                  gte_ldsv_(iVar20 >> 0x15,(iVar20 << 10) >> 0x15,(iVar20 << 0x14) >> 0x14);
                  iVar13 = iVar17 >> 0x15;
                  iVar15 = (iVar17 << 10) >> 0x15;
                  iVar17 = (iVar17 << 0x14) >> 0x14;
                  gte_ldfcdir(iVar13,iVar15,iVar17);
                  piVar6 = piVar6 + 1;
                  gte_intpl_b();
                  iVar20 = *piVar4;
                  piVar8 = piVar11 + 3;
                  read_mt(iVar13,iVar15,iVar17);
                  gte_ldIR3(iVar13);
                  gte_ldIR1(iVar15);
                  gte_ldIR2(iVar17);
                  gte_rtir();
                  iVar13 = gte_stMAC3();
                  iVar15 = gte_stMAC1();
                  iVar17 = gte_stMAC2();
                  iVar13 = (iVar13 << (uVar10 & 0x1f)) + iVar5;
                  iVar15 = iVar26 - (iVar15 << (uVar10 & 0x1f));
                  piVar11[2] = iVar27 - (iVar17 << (uVar10 & 0x1f));
                  if (0 < iVar9 - iVar13) {
                    iVar9 = iVar13;
                  }
                  if (iVar21 - iVar13 < 0) {
                    iVar21 = iVar13;
                  }
                  if (0 < iVar22 - iVar15) {
                    iVar22 = iVar15;
                  }
                  *piVar11 = iVar13;
                  if (iVar25 - iVar15 < 0) {
                    iVar25 = iVar15;
                  }
                  piVar11[1] = iVar15;
                  piVar11 = piVar8;
                } while (piVar8 != (int *)(&DAT_1f800100 + uVar3 * 6));
              }
              puVar36 = puVar36 + 1;
              pTVar35 = (Triangle *)&DAT_1f800100;
            } while (((0 < (int)(uVar31 - iVar21)) || ((int)(uVar31 - iVar9) < 0)) ||
                    ((0 < (int)(uVar32 - iVar25) ||
                     (uVar30 = Vec3_8006ab70.z, (int)(uVar32 - iVar22) < 0))));
          }
          puVar18 = (uint *)((int)pTVar35 +
                            ((uint)puVar34 >> 0x15 & 0x1f8) + (((uint)puVar34 >> 0x15 & 0x1f8) >> 1)
                            );
          uVar3 = *puVar18;
          piVar11 = (int *)((int)pTVar35 +
                           ((uint)puVar34 >> 0xd & 0x1f8) + (((uint)puVar34 >> 0xd & 0x1f8) >> 1));
          piVar4 = (int *)((int)pTVar35 +
                          ((uint)puVar34 >> 5 & 0x1f8) + (((uint)puVar34 >> 5 & 0x1f8) >> 1));
          uVar23 = *piVar11 - uVar31;
          uVar10 = *piVar4 - uVar31;
          uVar19 = uVar10 & uVar23 & uVar3 - uVar31;
        } while ((int)uVar19 < 0);
        if (uVar19 == 0) {
          uVar19 = puVar18[1];
        }
        else {
          uVar19 = puVar18[1];
          if (-1 < (int)(uVar10 | uVar23 | uVar3 - uVar31)) goto LAB_8003f304;
        }
        uVar24 = piVar11[1] - uVar32;
        uVar23 = piVar4[1] - uVar32;
        uVar10 = uVar23 & uVar24 & uVar19 - uVar32;
        if ((int)uVar10 < 0) goto LAB_8003f304;
        if (uVar10 == 0) {
          iVar5 = piVar4[2];
        }
        else {
          iVar5 = piVar4[2];
          if (-1 < (int)(uVar23 | uVar24 | uVar19 - uVar32)) goto LAB_8003f304;
        }
        iVar21 = piVar11[2];
        uVar23 = puVar18[2];
        if (((int)(iVar5 - uVar30 & iVar21 - uVar30 & uVar23 - uVar30) < 0) ||
           (iVar9 = *piVar4 - uVar3, (int)(uVar33 - iVar5 & uVar33 - iVar21 & uVar33 - uVar23) < 0))
        goto LAB_8003f304;
        iVar27 = piVar4[1] - uVar19;
        uVar10 = iVar5 - uVar23;
        iVar5 = *piVar11 - uVar3;
        iVar26 = piVar11[1] - uVar19;
        uVar12 = iVar21 - uVar23;
        uVar24 = 0;
      } while( true );
    }
  }
  goto LAB_8003f4bc;
}



// WARNING: Instruction at (ram,0x8003f3bc) overlaps instruction at (ram,0x8003f3b8)
// 
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

uint RaycastDown(Vec3 *origin,int distance)

{
  ushort *puVar1;
  undefined *puVar2;
  uint uVar3;
  int *piVar4;
  int iVar5;
  int *piVar6;
  int iVar7;
  int *piVar8;
  int iVar9;
  uint uVar10;
  int *piVar11;
  uint uVar12;
  int iVar13;
  ushort *puVar14;
  int iVar15;
  ushort *puVar16;
  int iVar17;
  uint *puVar18;
  uint uVar19;
  int iVar20;
  int iVar21;
  int iVar22;
  uint uVar23;
  uint uVar24;
  int iVar25;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  int iVar26;
  undefined4 unaff_s2;
  int iVar27;
  undefined4 unaff_s3;
  int *piVar28;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  uint uVar29;
  undefined4 unaff_s6;
  uint uVar30;
  undefined4 unaff_s7;
  uint uVar31;
  uint uVar32;
  uint uVar33;
  undefined4 *puVar34;
  Triangle *pTVar35;
  undefined4 unaff_s8;
  uint *puVar36;
  undefined4 unaff_retaddr;
  undefined *puVar37;
  undefined auStackX_0 [16];
  
  DAT_8006aa0c = &DAT_80066d38;
  piVar28 = (int *)&DAT_1f800000;
  _DAT_1f800018 = 0;
  _DAT_1f80001c = (undefined *)0x0;
  uVar33 = origin->z;
  uVar32 = origin->y;
  uVar31 = origin->x;
  if ((int)(uVar33 | uVar32 | uVar31) < 0) {
    DAT_8006aa18 = unaff_retaddr;
    DAT_8006aa14 = unaff_s8;
    DAT_8006aa10 = auStackX_0;
    DAT_8006aa08 = unaff_s7;
    DAT_8006aa04 = unaff_s6;
    DAT_8006aa00 = unaff_s5;
    DAT_8006a9fc = unaff_s4;
    DAT_8006a9f8 = unaff_s3;
    DAT_8006a9f4 = unaff_s2;
    DAT_8006a9f0 = unaff_s1;
    DAT_8006a9ec = unaff_s0;
    _DAT_1f80001c = (undefined *)0x0;
    _DAT_1f800018 = 0;
    return 0;
  }
  uVar29 = uVar33 - distance;
  if ((int)uVar29 < 0) {
    uVar29 = 0;
  }
  uVar3 = uVar31 >> 0xd;
  iVar5 = (uVar32 >> 0xd) * 0x20;
  _DAT_1f800000 = (uVar3 + iVar5) * 4 + DAT_80067174;
  iVar7 = uVar3 + 1;
  if (((uVar31 & 0x1000) == 0) && (uVar3 != 0)) {
    iVar7 = uVar3 - 1;
  }
  _DAT_1f800004 = (iVar7 + iVar5) * 4 + DAT_80067174;
  iVar9 = iVar5 + 0x20;
  if (((uVar32 & 0x1000) == 0) && (uVar32 >> 0xd != 0)) {
    iVar9 = iVar5 + -0x20;
  }
  _DAT_1f800008 = (uVar3 + iVar9) * 4 + DAT_80067174;
  _DAT_1f80000c = (iVar7 + iVar9) * 4 + DAT_80067174;
  _DAT_1f800010 = DAT_80067174;
  _DAT_1f800014 = 0;
  iVar5 = (uVar33 >> 0xc) + 1;
  Vec3_8006ab70.z = uVar29;
  puVar34 = &DAT_80066d38;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
LAB_8003ef8c:
  do {
    do {
      do {
        iVar7 = *piVar28;
        if (iVar7 != 0) {
          piVar28 = piVar28 + 1;
          puVar37 = (undefined *)(iVar7 + -4);
          iVar7 = iVar5;
          goto LAB_8003efa4;
        }
        iVar7 = iVar5 + -1;
        if (iVar5 * 0x1000 - Vec3_8006ab70.z < 1) {
          if (Vec3_8006ab70.z == uVar29) {
            Vec3_8006ab70.x = uVar31;
            Vec3_8006ab70.y = uVar32;
            Vec3_8006ab70.z = 0;
            return 0;
          }
          Vec3_8006ab70.x = uVar31;
          Vec3_8006ab70.y = uVar32;
          return Vec3_8006ab70.z;
        }
        puVar14 = (ushort *)TerrainCollisionData->field3_0xc;
        pTVar35 = TerrainCollisionData->triangles;
        puVar1 = puVar14 + iVar5;
        puVar16 = (ushort *)((uint)*puVar1 + (int)puVar14);
        iVar5 = iVar7;
      } while ((*puVar1 == 0xffff) || ((int)((uint)*puVar14 - iVar7) < 1));
      uVar3 = (uint)puVar16[(uVar32 >> 0xc) + 1];
      puVar14 = (ushort *)(uVar3 + (int)puVar14);
    } while ((uVar3 == 0xffff) || ((int)((uint)*puVar16 - (uVar32 >> 0xc)) < 1));
    uVar3 = (uint)puVar14[(uVar31 >> 0xc) + 1];
  } while (((int)((uint)*puVar14 - (uVar31 >> 0xc)) < 1) || (uVar3 == 0xffff));
  puVar36 = (uint *)((int)(TerrainCollisionData->field4_0x10 + uVar3 * 2) + 2);
  puVar2 = (undefined *)((int)*(short *)(TerrainCollisionData->field4_0x10 + uVar3 * 2) & 0x7fff);
LAB_8003f4bc:
  do {
    puVar37 = puVar2;
    iVar5 = iVar7;
    puVar34 = (undefined4 *)puVar37;
    if ((int)puVar37 < 0) goto LAB_8003ef8c;
    puVar34 = (undefined4 *)(int)*(short *)puVar36;
    puVar36 = (uint *)((int)puVar36 + 2);
    puVar18 = (uint *)((int)pTVar35 + (int)puVar37 * 0xc);
    uVar3 = *puVar18;
    iVar9 = (int)uVar3 >> 0x17;
    iVar5 = (int)(uVar3 << 9) >> 0x17;
    uVar3 = uVar3 & 0x3fff;
    iVar26 = uVar3 - (uVar31 >> 4);
    puVar2 = (undefined *)puVar34;
    if (uVar3 == uVar31 >> 4) goto LAB_8003f524;
    iVar27 = iVar26 + iVar9;
    if (iVar26 < 0) break;
    if (iVar27 < 1) goto LAB_8003f524;
    iVar27 = 0;
  } while (0 < iVar26 + iVar5);
  if ((iVar27 < 0) && (iVar26 + iVar5 < 0)) goto LAB_8003f4bc;
LAB_8003f524:
  uVar19 = puVar18[1];
  iVar27 = (int)uVar19 >> 0x17;
  iVar26 = (int)(uVar19 << 9) >> 0x17;
  uVar19 = uVar19 & 0x3fff;
  iVar21 = uVar19 - (uVar32 >> 4);
  if (uVar19 != uVar32 >> 4) {
    iVar22 = iVar21 + iVar27;
    if (-1 < iVar21) {
      if (iVar22 < 1) goto LAB_8003f56c;
      iVar22 = 0;
      if (0 < iVar21 + iVar26) goto LAB_8003f4bc;
    }
    if ((iVar22 < 0) && (iVar21 + iVar26 < 0)) goto LAB_8003f4bc;
  }
LAB_8003f56c:
  uVar24 = puVar18[2];
  uVar23 = uVar24 & 0x3fff;
  uVar10 = uVar24 >> 0x18;
  if ((int)(uVar23 - uVar33) < 1) {
    uVar12 = uVar24 >> 0x10 & 0xff;
    iVar21 = ((uint)Vec3_8006ab70.z >> 4) - uVar23;
    uVar24 = uVar24 & 0x4000;
    uVar30 = Vec3_8006ab70.z;
    if ((int)(iVar21 - uVar12 | iVar21 - uVar10) < 1) {
      do {
        gte_ldsv_(iVar5,iVar26,uVar12);
        gte_ldR11R12(iVar9);
        gte_ldR22R23(iVar27);
        gte_ldR33(uVar10);
        gte_op0_b(0);
        iVar21 = 10;
        if (-1 < (int)puVar37) {
          iVar21 = 2;
          uVar3 = uVar3 << 4;
          uVar19 = uVar19 << 4;
          uVar23 = uVar23 << 4;
        }
        iVar15 = gte_stMAC3();
        iVar13 = gte_stMAC2();
        iVar20 = gte_stMAC1();
        iVar22 = iVar9;
        iVar25 = iVar27;
        _DAT_1f800020 = uVar24;
        if ((0 < iVar15) ||
           ((iVar15 != 0 &&
            (iVar22 = iVar5, iVar25 = iVar26, iVar5 = iVar9, iVar26 = iVar27,
            (_DAT_1f800018 & 2) != 0)))) {
          iVar9 = uVar31 - uVar3;
          iVar27 = uVar32 - uVar19;
          gte_ldIR1(iVar9);
          gte_ldIR2(iVar27);
          gte_ldR11R12(iVar22);
          gte_ldR22R23(iVar25);
          iVar20 = iVar20 >> iVar21;
          iVar13 = iVar13 >> iVar21;
          gte_op0_b(0);
          iVar15 = iVar15 >> iVar21;
          if (-1 < (int)puVar37) {
            iVar22 = iVar22 << 4;
            iVar25 = iVar25 << 4;
          }
          iVar21 = gte_stMAC3();
          if (-1 < iVar21) {
            gte_ldIR1(iVar5);
            gte_ldIR2(iVar26);
            gte_ldR11R12(iVar9);
            gte_ldR22R23(iVar27);
            gte_op0(0);
            if (-1 < (int)puVar37) {
              iVar5 = iVar5 << 4;
              iVar26 = iVar26 << 4;
            }
            iVar21 = gte_stMAC3();
            if (-1 < iVar21) {
              gte_ldIR1(iVar9 - iVar22);
              gte_ldIR2(iVar27 - iVar25);
              gte_ldR11R12(iVar5 - iVar22);
              gte_ldR22R23(iVar26 - iVar25);
              gte_op0_b(0);
              if ((((_DAT_1f800018 & 1) == 0) || (uVar24 == 0)) &&
                 (iVar5 = gte_stMAC3(), -1 < iVar5)) {
                iVar9 = -(iVar27 * iVar13) - iVar9 * iVar20;
                iVar5 = iVar9;
                if (iVar9 < 0) {
                  iVar5 = -iVar9;
                }
                gte_ldLZCS(iVar5);
                iVar5 = gte_stLZCR();
                uVar3 = iVar5 - 2;
                if (-1 < iVar5 + -0xe) {
                  uVar3 = 0xc;
                }
                Vec3_8006ab70.z =
                     uVar23 + ((iVar9 << (uVar3 & 0x1f)) / (iVar15 >> (0xc - uVar3 & 0x1f)) >> 0xc);
                if ((0 < (int)(uVar33 - Vec3_8006ab70.z)) && ((int)(uVar30 - Vec3_8006ab70.z) < 0))
                {
                  Vec3_8006ab88.x = iVar20;
                  Vec3_8006ab88.y = iVar13;
                  Vec3_8006ab88.z = iVar15;
                  if (-1 < (int)puVar37) {
                    DAT_8006aba0 = (undefined *)0x0;
                    DAT_8006ab94 = 0xff;
                    if (0 < (int)(TerrainCollisionData->collisionFlagsOffset - (int)puVar37)) {
                      DAT_8006ab94 = (uint)TerrainCollisionData->collisionFlags[(int)puVar37];
                    }
                    DAT_8006ab98 = 0xfe;
                    if (0 < (int)(TerrainCollisionData->field2_0x8 - (int)puVar37)) {
                      DAT_8006ab98 = (uint)(byte)TerrainCollisionData->field7_0x1c[(int)puVar37];
                    }
                    isOnWaterSurface = uVar24 >> 0xc;
                    puVar2 = (undefined *)puVar34;
                    overTriangleIndex = puVar37;
                    break;
                  }
                  overTriangleIndex = (undefined *)((uint)puVar36 | 0x80000000);
                  DAT_8006ab94 = 0xff;
                  DAT_8006ab98 = 0xfe;
                  isOnWaterSurface = 0;
                  uVar30 = Vec3_8006ab70.z;
                  DAT_8006aba0 = puVar37;
                }
              }
            }
          }
        }
LAB_8003f304:
        do {
          while( true ) {
            Vec3_8006ab70.z = uVar30;
            puVar2 = (undefined *)puVar34;
            if (-1 < (int)puVar37) goto LAB_8003f4bc;
            puVar34 = (undefined4 *)*puVar36;
            puVar36 = puVar36 + 1;
            if (-1 < (int)puVar34) break;
LAB_8003efa4:
            do {
              do {
                do {
                  do {
                    puVar37 = *(undefined **)(puVar37 + 4);
                    puVar36 = *(uint **)(puVar37 + 8);
                    iVar5 = iVar7;
                    if (puVar37 == (undefined *)0x0) goto LAB_8003ef8c;
                    iVar5 = *(int *)(puVar37 + 0xc);
                  } while ((puVar37 == _DAT_1f80001c) || (puVar36 == (uint *)0x0));
                  uVar3 = *puVar36 >> 0x10;
                  uVar19 = *puVar36 & 0xff;
                } while (uVar3 == 0);
                iVar9 = uVar19 * 0x20;
              } while (((((-1 < (int)((uVar31 + uVar19 * -0x20) - iVar5)) ||
                         (iVar26 = *(int *)(puVar37 + 0x10), (int)((uVar31 + iVar9) - iVar5) < 1))
                        || (-1 < (int)((uVar32 + uVar19 * -0x20) - iVar26))) ||
                       ((iVar27 = *(int *)(puVar37 + 0x14), (int)((uVar32 + iVar9) - iVar26) < 1 ||
                        (-1 < (int)((Vec3_8006ab70.z + uVar19 * -0x20) - iVar27))))) ||
                      ((int)((uVar33 + iVar9) - iVar27) < 1));
              gte_ldR11R12(*(undefined4 *)(puVar37 + 0x20));
              gte_ldR13R21(*(undefined4 *)(puVar37 + 0x24));
              gte_ldR22R23(*(undefined4 *)(puVar37 + 0x28));
              gte_ldR31R32(*(undefined4 *)(puVar37 + 0x2c));
              gte_ldR33(*(undefined4 *)(puVar37 + 0x30));
              uVar19 = *(uint *)(puVar37 + 0x3c);
              iVar9 = (&objectModels[*(ushort *)(puVar37 + 0x36)][2].field3_0xc)[uVar19 & 0xff];
              uVar10 = (uint)*(char *)(iVar9 + 2);
              piVar4 = (int *)((*(uint *)(iVar9 + (uVar19 >> 0xd & 0x7f8) + 0x24) & 0xffff) * 2 +
                              *(int *)(iVar9 + 0x20));
              uVar3 = uVar3 & 0x7f;
              if ((byte)(&DAT_80062868)[(byte)puVar37[0x40]] == 0) {
                iVar20 = *piVar4;
                iVar9 = 0x40000000;
                iVar21 = 0;
                iVar22 = 0x40000000;
                iVar25 = 0;
                piVar11 = (int *)&DAT_1f800100;
                do {
                  piVar4 = piVar4 + 1;
                  gte_ldIR3(iVar20 >> 0x15);
                  gte_ldIR1((iVar20 << 10) >> 0x15);
                  gte_ldIR2((iVar20 << 0x14) >> 0x14);
                  piVar6 = piVar11 + 3;
                  gte_rtir_b();
                  iVar20 = *piVar4;
                  iVar13 = gte_stMAC3();
                  iVar15 = gte_stMAC1();
                  iVar17 = gte_stMAC2();
                  iVar13 = (iVar13 << (uVar10 & 0x1f)) + iVar5;
                  iVar15 = iVar26 - (iVar15 << (uVar10 & 0x1f));
                  piVar11[2] = iVar27 - (iVar17 << (uVar10 & 0x1f));
                  if (0 < iVar9 - iVar13) {
                    iVar9 = iVar13;
                  }
                  if (iVar21 - iVar13 < 0) {
                    iVar21 = iVar13;
                  }
                  if (0 < iVar22 - iVar15) {
                    iVar22 = iVar15;
                  }
                  *piVar11 = iVar13;
                  if (iVar25 - iVar15 < 0) {
                    iVar25 = iVar15;
                  }
                  piVar11[1] = iVar15;
                  piVar11 = piVar6;
                } while (piVar6 != (int *)(&DAT_1f800100 + uVar3 * 6));
              }
              else {
                iVar9 = *(int *)((int)&objectModels[*(ushort *)(puVar37 + 0x36)][2].field3_0xc +
                                (uVar19 >> 6 & 0x3fc));
                iVar20 = *piVar4;
                piVar6 = (int *)((*(uint *)(iVar9 + (uVar19 >> 0x15 & 0x7f8) + 0x24) & 0xffff) * 2 +
                                *(int *)(iVar9 + 0x20));
                gte_ldIR0((uint)(byte)(&DAT_80062868)[(byte)puVar37[0x40]] << 4);
                iVar9 = 0x40000000;
                iVar21 = 0;
                iVar22 = 0x40000000;
                iVar25 = 0;
                piVar11 = (int *)&DAT_1f800100;
                do {
                  piVar4 = piVar4 + 1;
                  iVar17 = *piVar6;
                  gte_ldsv_(iVar20 >> 0x15,(iVar20 << 10) >> 0x15,(iVar20 << 0x14) >> 0x14);
                  iVar13 = iVar17 >> 0x15;
                  iVar15 = (iVar17 << 10) >> 0x15;
                  iVar17 = (iVar17 << 0x14) >> 0x14;
                  gte_ldfcdir(iVar13,iVar15,iVar17);
                  piVar6 = piVar6 + 1;
                  gte_intpl_b();
                  iVar20 = *piVar4;
                  piVar8 = piVar11 + 3;
                  read_mt(iVar13,iVar15,iVar17);
                  gte_ldIR3(iVar13);
                  gte_ldIR1(iVar15);
                  gte_ldIR2(iVar17);
                  gte_rtir();
                  iVar13 = gte_stMAC3();
                  iVar15 = gte_stMAC1();
                  iVar17 = gte_stMAC2();
                  iVar13 = (iVar13 << (uVar10 & 0x1f)) + iVar5;
                  iVar15 = iVar26 - (iVar15 << (uVar10 & 0x1f));
                  piVar11[2] = iVar27 - (iVar17 << (uVar10 & 0x1f));
                  if (0 < iVar9 - iVar13) {
                    iVar9 = iVar13;
                  }
                  if (iVar21 - iVar13 < 0) {
                    iVar21 = iVar13;
                  }
                  if (0 < iVar22 - iVar15) {
                    iVar22 = iVar15;
                  }
                  *piVar11 = iVar13;
                  if (iVar25 - iVar15 < 0) {
                    iVar25 = iVar15;
                  }
                  piVar11[1] = iVar15;
                  piVar11 = piVar8;
                } while (piVar8 != (int *)(&DAT_1f800100 + uVar3 * 6));
              }
              puVar36 = puVar36 + 1;
              pTVar35 = (Triangle *)&DAT_1f800100;
            } while (((0 < (int)(uVar31 - iVar21)) || ((int)(uVar31 - iVar9) < 0)) ||
                    ((0 < (int)(uVar32 - iVar25) ||
                     (uVar30 = Vec3_8006ab70.z, (int)(uVar32 - iVar22) < 0))));
          }
          puVar18 = (uint *)((int)pTVar35 +
                            ((uint)puVar34 >> 0x15 & 0x1f8) + (((uint)puVar34 >> 0x15 & 0x1f8) >> 1)
                            );
          uVar3 = *puVar18;
          piVar11 = (int *)((int)pTVar35 +
                           ((uint)puVar34 >> 0xd & 0x1f8) + (((uint)puVar34 >> 0xd & 0x1f8) >> 1));
          piVar4 = (int *)((int)pTVar35 +
                          ((uint)puVar34 >> 5 & 0x1f8) + (((uint)puVar34 >> 5 & 0x1f8) >> 1));
          uVar23 = *piVar11 - uVar31;
          uVar10 = *piVar4 - uVar31;
          uVar19 = uVar10 & uVar23 & uVar3 - uVar31;
        } while ((int)uVar19 < 0);
        if (uVar19 == 0) {
          uVar19 = puVar18[1];
        }
        else {
          uVar19 = puVar18[1];
          if (-1 < (int)(uVar10 | uVar23 | uVar3 - uVar31)) goto LAB_8003f304;
        }
        uVar24 = piVar11[1] - uVar32;
        uVar23 = piVar4[1] - uVar32;
        uVar10 = uVar23 & uVar24 & uVar19 - uVar32;
        if ((int)uVar10 < 0) goto LAB_8003f304;
        if (uVar10 == 0) {
          iVar5 = piVar4[2];
        }
        else {
          iVar5 = piVar4[2];
          if (-1 < (int)(uVar23 | uVar24 | uVar19 - uVar32)) goto LAB_8003f304;
        }
        iVar21 = piVar11[2];
        uVar23 = puVar18[2];
        if (((int)(iVar5 - uVar30 & iVar21 - uVar30 & uVar23 - uVar30) < 0) ||
           (iVar9 = *piVar4 - uVar3, (int)(uVar33 - iVar5 & uVar33 - iVar21 & uVar33 - uVar23) < 0))
        goto LAB_8003f304;
        iVar27 = piVar4[1] - uVar19;
        uVar10 = iVar5 - uVar23;
        iVar5 = *piVar11 - uVar3;
        iVar26 = piVar11[1] - uVar19;
        uVar12 = iVar21 - uVar23;
        uVar24 = 0;
      } while( true );
    }
  }
  goto LAB_8003f4bc;
}



// WARNING: Instruction at (ram,0x800404f4) overlaps instruction at (ram,0x800404f0)
// 
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

int FUN_8003f88c(uint *param_1,uint *param_2,uint param_3,uint param_4,int param_5)

{
  bool bVar1;
  longlong lVar2;
  longlong lVar3;
  uint uVar4;
  int *piVar5;
  uint uVar6;
  int iVar7;
  int *piVar8;
  int *piVar9;
  int *piVar10;
  uint uVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  int iVar16;
  uint uVar17;
  int iVar18;
  int iVar19;
  int iVar20;
  undefined4 unaff_s0;
  int iVar21;
  uint uVar22;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  uint uVar23;
  undefined4 unaff_s5;
  uint uVar24;
  undefined4 unaff_s6;
  uint uVar25;
  undefined4 unaff_s7;
  uint uVar26;
  uint uVar27;
  int iVar28;
  uint uVar29;
  int iVar30;
  uint *puVar31;
  uint *puVar32;
  uint *puVar33;
  uint *puVar34;
  undefined4 unaff_s8;
  int iVar35;
  undefined4 unaff_retaddr;
  int *piVar36;
  int iVar37;
  undefined auStackX_0 [16];
  
  iVar28 = DAT_80067174;
  DAT_8006aa0c = &DAT_80066d38;
  uVar23 = *param_1;
  uVar24 = param_1[1];
  uVar25 = param_1[2];
  uVar26 = *param_2;
  uVar27 = param_2[1];
  uVar29 = param_2[2];
  DAT_1f800068 = 0;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  if (-1 < (int)(uVar23 | uVar24 | uVar25 | uVar26 | uVar27 | uVar29)) {
    DAT_1f800040 = uVar23;
    _DAT_1f800044 = uVar26;
    if (0 < (int)(uVar23 - uVar26)) {
      DAT_1f800040 = uVar26;
      _DAT_1f800044 = uVar23;
    }
    DAT_1f800048 = uVar24;
    DAT_1f80004c = uVar27;
    if (0 < (int)(uVar24 - uVar27)) {
      DAT_1f800048 = uVar27;
      DAT_1f80004c = uVar24;
    }
    _DAT_1f800050 = uVar25;
    _DAT_1f800054 = uVar29;
    if (0 < (int)(uVar25 - uVar29)) {
      _DAT_1f800050 = uVar29;
      _DAT_1f800054 = uVar25;
    }
    uVar4 = uVar23 >> 0xc;
    uVar6 = uVar24 >> 0xc;
    uVar11 = uVar26 >> 0xc;
    uVar12 = uVar27 >> 0xc;
    uVar22 = uVar4;
    if (0 < (int)(uVar4 - uVar11)) {
      uVar22 = uVar11;
      uVar11 = uVar4;
    }
    uVar4 = uVar22 - 1 >> 1;
    if ((int)(uVar22 - 1) < 0) {
      uVar4 = 0;
    }
    uVar17 = uVar6 - uVar12;
    uVar22 = uVar6;
    if (0 < (int)uVar17) {
      uVar22 = uVar12;
      uVar12 = uVar6;
    }
    uVar6 = uVar22 - 1 >> 1;
    if ((int)(uVar22 - 1) < 0) {
      uVar6 = 0;
    }
    iVar7 = uVar6 << 7;
    iVar30 = uVar4 * 4;
    piVar36 = (int *)&DAT_1f800000;
    do {
      do {
        piVar5 = piVar36;
        *piVar5 = iVar30 + iVar7 + iVar28;
        piVar36 = piVar5 + 1;
        bVar1 = iVar30 != (uVar11 + 1 >> 1) << 2;
        iVar30 = iVar30 + 4;
      } while (bVar1);
      bVar1 = iVar7 != (uVar12 + 1 >> 1) << 7;
      iVar7 = iVar7 + 0x80;
      iVar30 = uVar4 * 4;
    } while (bVar1);
    *piVar36 = iVar28;
    piVar5[2] = 0;
    piVar36 = (int *)&DAT_1f800000;
    uVar26 = uVar26 - uVar23;
    iVar28 = uVar27 - uVar24;
    iVar30 = uVar29 - uVar25;
    while( true ) {
      iVar7 = *piVar36;
      piVar36 = piVar36 + 1;
      iVar35 = iVar7 + -4;
      if (iVar7 == 0) break;
LAB_8003fa1c:
      iVar35 = *(int *)(iVar35 + 4);
      puVar31 = *(uint **)(iVar35 + 8);
      if (iVar35 != 0) {
        iVar7 = *(int *)(iVar35 + 0xc);
        if ((iVar35 != param_5) && (uVar27 = *puVar31, puVar31 != (uint *)0x0)) {
          uVar29 = uVar27 & 0xff;
          iVar21 = uVar29 * 0x20;
          if (((int)((DAT_1f800040 + uVar29 * -0x20) - iVar7) < 0) &&
             ((((iVar19 = *(int *)(iVar35 + 0x10), 0 < (int)((_DAT_1f800044 + iVar21) - iVar7) &&
                ((int)((DAT_1f800048 + uVar29 * -0x20) - iVar19) < 0)) &&
               (iVar20 = *(int *)(iVar35 + 0x14), 0 < (int)((DAT_1f80004c + iVar21) - iVar19))) &&
              (((int)((_DAT_1f800050 + uVar29 * -0x20) - iVar20) < 0 &&
               (0 < (int)((_DAT_1f800054 + iVar21) - iVar20))))))) {
            puVar32 = puVar31 + 1;
            if (uVar27 >> 0x10 != 0) {
              if ((uVar27 >> 0x10 & 0x80) == 0) goto LAB_8003fa1c;
              puVar32 = (uint *)((int)puVar31 + (uVar27 >> 0x16 & 0x3fc) + 4);
            }
            uVar22 = 0;
            uVar29 = uVar27 >> 8 & 0x7f;
            puVar34 = puVar32;
            if ((uVar27 >> 8 & 0xff) != 0) {
              uVar17 = *(uint *)(iVar35 + 0x30);
              gte_ldR11R12(*(undefined4 *)(iVar35 + 0x20));
              gte_ldR13R21(*(undefined4 *)(iVar35 + 0x24));
              gte_ldR22R23(*(undefined4 *)(iVar35 + 0x28));
              gte_ldR31R32(*(undefined4 *)(iVar35 + 0x2c));
              gte_ldR33(uVar17);
              if (uVar29 != 0) {
                uVar27 = *(uint *)(iVar35 + 0x3c);
                iVar21 = (&objectModels[*(ushort *)(iVar35 + 0x36)][2].field3_0xc)[uVar27 & 0xff];
                uVar11 = (uint)*(char *)(iVar21 + 2);
                piVar5 = (int *)((*(uint *)(iVar21 + (uVar27 >> 0xd & 0x7f8) + 0x24) & 0xffff) * 2 +
                                *(int *)(iVar21 + 0x20));
                if ((byte)(&DAT_80062868)[*(byte *)(iVar35 + 0x40)] == 0) {
                  iVar21 = *piVar5;
                  piVar9 = (int *)&DAT_1f800100;
                  do {
                    piVar5 = piVar5 + 1;
                    gte_ldIR3(iVar21 >> 0x15);
                    gte_ldIR1((iVar21 << 10) >> 0x15);
                    gte_ldIR2((iVar21 << 0x14) >> 0x14);
                    piVar8 = piVar9 + 3;
                    gte_rtir_b();
                    iVar21 = *piVar5;
                    iVar14 = gte_stMAC3();
                    iVar15 = gte_stMAC1();
                    iVar18 = gte_stMAC2();
                    uVar17 = iVar20 - (iVar18 << (uVar11 & 0x1f));
                    *piVar9 = (iVar14 << (uVar11 & 0x1f)) + iVar7;
                    piVar9[1] = iVar19 - (iVar15 << (uVar11 & 0x1f));
                    piVar9[2] = uVar17;
                    piVar9 = piVar8;
                  } while (piVar8 != (int *)(&DAT_1f800100 + uVar29 * 6));
                }
                else {
                  iVar21 = *(int *)((int)&objectModels[*(ushort *)(iVar35 + 0x36)][2].field3_0xc +
                                   (uVar27 >> 6 & 0x3fc));
                  iVar14 = *piVar5;
                  piVar8 = (int *)((*(uint *)(iVar21 + (uVar27 >> 0x15 & 0x7f8) + 0x24) & 0xffff) *
                                   2 + *(int *)(iVar21 + 0x20));
                  gte_ldIR0((uint)(byte)(&DAT_80062868)[*(byte *)(iVar35 + 0x40)] << 4);
                  piVar9 = (int *)&DAT_1f800100;
                  do {
                    piVar5 = piVar5 + 1;
                    iVar18 = *piVar8;
                    gte_ldsv_(iVar14 >> 0x15,(iVar14 << 10) >> 0x15,(iVar14 << 0x14) >> 0x13);
                    iVar21 = iVar18 >> 0x15;
                    iVar15 = (iVar18 << 10) >> 0x15;
                    iVar18 = (iVar18 << 0x14) >> 0x14;
                    gte_ldfcdir(iVar21,iVar15,iVar18);
                    piVar8 = piVar8 + 1;
                    gte_intpl_b();
                    iVar14 = *piVar5;
                    piVar10 = piVar9 + 3;
                    read_mt(iVar21,iVar15,iVar18);
                    gte_ldIR3(iVar21);
                    gte_ldIR1(iVar15);
                    gte_ldIR2(iVar18);
                    gte_rtir();
                    iVar21 = gte_stMAC3();
                    iVar15 = gte_stMAC1();
                    iVar18 = gte_stMAC2();
                    uVar17 = iVar20 - (iVar18 << (uVar11 & 0x1f));
                    *piVar9 = (iVar21 << (uVar11 & 0x1f)) + iVar7;
                    piVar9[1] = iVar19 - (iVar15 << (uVar11 & 0x1f));
                    piVar9[2] = uVar17;
                    piVar9 = piVar10;
                  } while (piVar10 != (int *)(&DAT_1f800100 + uVar29 * 6));
                }
              }
            }
LAB_8003fd00:
            puVar33 = puVar34;
            uVar27 = uVar22 & 1;
            uVar22 = *puVar33;
            if (uVar27 == 0) {
              if (((param_3 & 2) != 0) || (uVar27 = uVar22 >> 8, (uVar22 & 2) == 0)) {
                uVar29 = uVar22 >> 8 & 0xff;
                if (uVar29 == 0) {
                  puVar34 = puVar33 + 4;
                  uVar27 = uVar22 >> 0x10;
                  iVar21 = iVar7 + ((int)puVar33[1] >> 0x10);
                  iVar14 = iVar19 + (short)puVar33[1];
                  iVar15 = iVar20 + puVar33[2];
                  DAT_1f80006c = 0;
LAB_800402cc:
                  do {
                    uVar29 = iVar21 - uVar23;
                    iVar14 = iVar14 - uVar24;
                    iVar15 = iVar15 - uVar25;
                    gte_ldsv_(uVar26,iVar28,iVar30);
                    gte_ldR31R32(iVar28 * 0x10000 + (uVar26 & 0xffff));
                    gte_ldR33(iVar30);
                    gte_ldR11R12(iVar14 * 0x10000 + (uVar29 & 0xffff));
                    gte_ldR13R21(iVar15);
                    iVar37 = uVar27 * uVar27;
                    gte_rtir_sf0_b();
                    iVar18 = gte_stMAC1();
                    iVar13 = gte_stMAC3();
                    iVar21 = iVar18;
                    if (iVar18 < 0) {
                      iVar21 = -iVar18;
                    }
                    gte_ldLZCS(iVar21);
                    iVar21 = gte_stLZCR();
                    uVar27 = iVar21 - 2;
                    if (-1 < iVar21 + -0xe) {
                      uVar27 = 0xc;
                    }
                    uVar11 = 0xc - uVar27;
                    iVar13 = iVar13 >> (uVar11 & 0x1f);
                    if (iVar13 == 0) goto LAB_8003fd00;
                    gte_ldsv_(uVar29,iVar14,iVar15);
                    gte_sqr0(0);
                    read_mt(uVar27,uVar11,uVar17);
                    iVar21 = uVar29 - uVar26;
                    if (0 < (int)(iVar37 - (uVar27 + uVar11 + uVar17))) {
LAB_800404bc:
                      DAT_1f800068 = iVar35;
                      DAT_8006aba0 = iVar35;
                      if ((uVar22 & 4) == 0) {
                        *(uint *)(iVar35 + 0x18) = *(uint *)(iVar35 + 0x18) | param_4;
                      }
                      goto joined_r0x800404e8;
                    }
                    iVar16 = iVar14 - iVar28;
                    uVar17 = iVar15 - iVar30;
                    gte_ldsv_(iVar21,iVar16,uVar17);
                    gte_sqr0(0);
                    read_mt(iVar21,iVar16,uVar17);
                    iVar21 = iVar37 - (iVar21 + iVar16 + uVar17);
                    if (0 < iVar21) goto LAB_800404bc;
                    gte_ldsv_(uVar26,iVar28,iVar30);
                    gte_ldIR0((iVar18 << (uVar27 & 0x1f)) / iVar13);
                    gte_gpf0(0);
                    read_mt(iVar21,iVar16,uVar17);
                    uVar17 = (int)uVar17 >> 0xc;
                    iVar18 = uVar29 - (iVar21 >> 0xc);
                    iVar14 = iVar14 - (iVar16 >> 0xc);
                    iVar15 = iVar15 - uVar17;
                    gte_ldsv_(iVar18,iVar14,iVar15);
                    gte_sqr0(0);
                    read_mt(iVar18,iVar14,iVar15);
                    if (0 < iVar37 - (iVar18 + iVar14 + iVar15)) {
                      gte_ldsv_(uVar26,iVar28,iVar30);
                      gte_ldR31R32(iVar28 * 0x10000 + (uVar26 & 0xffff));
                      gte_ldR33(iVar30);
                      gte_ldR11R12((iVar16 >> 0xc) * 0x10000 + (iVar21 >> 0xc & 0xffffU));
                      gte_ldR13R21(uVar17);
                      gte_rtir_sf0();
                      uVar27 = gte_stMAC1();
                      uVar29 = gte_stMAC3();
                      if ((-1 < (int)(uVar27 ^ uVar29)) && ((int)(uVar27 - uVar29) < 0))
                      goto LAB_800404bc;
                    }
                    if (DAT_1f80006c == 0) goto LAB_8003fd00;
                    if (DAT_1f80006c != 1) goto LAB_8003fef8;
                    iVar15 = iVar20 + (short)_DAT_1f800074;
                    DAT_1f80006c = 2;
                    iVar21 = iVar7;
                    iVar14 = iVar19;
                    uVar27 = DAT_1f80007c;
                  } while( true );
                }
                if (uVar29 == 1) {
                  puVar34 = puVar33 + 4;
                  uVar27 = uVar22 >> 0x10;
                  gte_ldIR3((int)puVar33[1] >> 0x10);
                  gte_ldIR1(-(int)(short)puVar33[1]);
                  gte_ldIR2(-puVar33[2]);
                  gte_rtir();
                  iVar21 = gte_stMAC3();
                  iVar14 = gte_stMAC1();
                  iVar15 = gte_stMAC2();
                  iVar21 = iVar7 + iVar21;
                  iVar14 = iVar19 - iVar14;
                  iVar15 = iVar20 - iVar15;
                  DAT_1f80006c = 0;
                  goto LAB_800402cc;
                }
                if (uVar29 == 2) {
                  puVar34 = puVar33 + 3;
                  uVar27 = puVar33[1] & 0xffff;
                  iVar15 = (int)puVar33[1] >> 0x10;
                  if (iVar15 < 0) {
                    iVar21 = *(int *)(&DAT_1f800100 + uVar27 * 6);
                    iVar14 = (&DAT_1f800104)[uVar27 * 3];
                    iVar15 = *(int *)(&DAT_1f800108 + uVar27 * 6);
                    uVar27 = uVar22 >> 0x10;
                    DAT_1f80006c = 0;
                    puVar34 = puVar33 + 3;
                  }
                  else {
                    iVar21 = *(int *)(&DAT_1f800100 + uVar27 * 6) +
                             *(int *)(&DAT_1f800100 + iVar15 * 6) >> 1;
                    iVar14 = (int)((&DAT_1f800104)[uVar27 * 3] + (&DAT_1f800104)[iVar15 * 3]) >> 1;
                    iVar15 = *(int *)(&DAT_1f800108 + uVar27 * 6) +
                             *(int *)(&DAT_1f800108 + iVar15 * 6) >> 1;
                    uVar27 = uVar22 >> 0x10;
                    DAT_1f80006c = 0;
                  }
                  goto LAB_800402cc;
                }
                uVar27 = uVar29 - 4;
                if (uVar29 == 3) {
                  _DAT_1f800074 = puVar33[1];
                  DAT_1f800078 = puVar33[2];
                  DAT_1f80007c = puVar33[3];
                  puVar34 = puVar33 + 5;
                  _DAT_1f800070 = uVar22 >> 0x10;
                  if (_DAT_1f800070 == DAT_1f80007c) {
                    iVar15 = iVar20 + (_DAT_1f800074 >> 0x10);
                    DAT_1f80006c = 1;
                    iVar21 = iVar7;
                    iVar14 = iVar19;
                    uVar27 = DAT_1f80007c;
                    puVar34 = puVar33 + 5;
                    goto LAB_800402cc;
                  }
LAB_8003fef8:
                  uVar27 = uVar26;
                  if ((int)uVar26 < 0) {
                    uVar27 = -uVar26;
                  }
                  iVar21 = iVar28;
                  if (iVar28 < 0) {
                    iVar21 = -iVar28;
                  }
                  bVar1 = false;
                  iVar14 = _DAT_1f800070 * _DAT_1f800070;
                  if ((int)(uVar27 + iVar21 + -0x20) < 0) {
                    gte_ldIR1(iVar7 - uVar23);
                    gte_ldIR2(iVar19 - uVar24);
                    gte_sqr0_b(0);
                    iVar21 = gte_stMAC1();
                    iVar18 = gte_stMAC2();
                    gte_ldIR1((iVar7 - uVar23) - uVar26);
                    gte_ldIR2((iVar19 - uVar24) - iVar28);
                    gte_sqr0_b(0);
                    iVar15 = gte_stMAC1();
                    iVar13 = gte_stMAC2();
                    bVar1 = true;
                    if (-1 < ((iVar21 + iVar18) - iVar14 | (iVar15 + iVar13) - iVar14))
                    goto LAB_8003fd00;
                  }
                  if (((int)(_DAT_1f800050 - ((_DAT_1f800074 >> 0x10) + iVar20)) < 0) &&
                     (0 < (int)(_DAT_1f800054 - ((short)_DAT_1f800074 + iVar20)))) {
                    if (!bVar1) {
                      gte_ldsv_(uVar26,iVar28,0);
                      gte_ldR11R12(iVar28 * 0x10000 + (uVar26 & 0xffff));
                      gte_ldR13R21(0);
                      gte_ldR31R32((uVar24 - iVar19) * 0x10000 + (uVar23 - iVar7 & 0xffff));
                      gte_ldR33(0);
                      gte_rtir_sf0_b();
                      iVar15 = gte_stMAC3();
                      iVar21 = gte_stMAC1();
                      lVar2 = (longlong)(iVar15 * 2) * (longlong)(iVar15 * 2);
                      uVar17 = (uint)lVar2;
                      iVar13 = (int)((ulonglong)lVar2 >> 0x20);
                      gte_ldsv_(uVar23 - iVar7,uVar24 - iVar19,0);
                      gte_rtir_sf0();
                      iVar18 = gte_stMAC3();
                      lVar3 = (longlong)iVar21 * (longlong)((iVar18 - iVar14) * 4);
                      uVar29 = (uint)lVar3;
                      uVar27 = (uint)((ulonglong)lVar3 >> 0x20);
                      if ((-1 < lVar3) &&
                         (((int)(iVar13 - uVar27) < 0 ||
                          (((int)(iVar13 - uVar27) < 1 && ((int)((uVar17 >> 2) - (uVar29 >> 2)) < 1)
                           ))))) goto LAB_8003fd00;
                      gte_ldLZCS(iVar13);
                      iVar14 = gte_stLZCR();
                      gte_ldLZCS(uVar17);
                      if (iVar14 == 0x20) {
                        iVar14 = gte_stLZCR();
                        iVar14 = iVar14 + 0x20;
                      }
                      if (lVar3 < 0) {
                        lVar3 = CONCAT44(-uVar27,-uVar29);
                      }
                      gte_ldLZCS((int)((ulonglong)lVar3 >> 0x20));
                      iVar18 = gte_stLZCR();
                      gte_ldLZCS((int)lVar3);
                      if (iVar18 == 0x20) {
                        iVar18 = gte_stLZCR();
                        iVar18 = iVar18 + 0x20;
                      }
                      if (0 < iVar14 - iVar18) {
                        iVar14 = iVar18;
                      }
                      uVar11 = 0;
                      if (iVar14 + -0x23 < 0) {
                        uVar12 = -(iVar14 + -0x23);
                        uVar11 = uVar12 & 0xfffffffe;
                        uVar17 = uVar17 >> (uVar12 & 0x1e);
                        uVar27 = uVar27 << (0x20 - uVar11 & 0x1f) | uVar29 >> (uVar12 & 0x1e);
                        lVar2 = CONCAT44(iVar13 << (0x20 - uVar11 & 0x1f) | uVar17,uVar17);
                      }
                      uVar17 = (uint)lVar2;
                      iVar18 = (int)((ulonglong)lVar2 >> 0x20) - uVar27;
                      gte_ldLZCS(iVar18);
                      uVar27 = gte_stLZCR();
                      uVar29 = (uVar27 & 0xfe) - 0x18;
                      iVar14 = iVar18 << (uVar29 & 0x1f);
                      if ((int)uVar29 < 0) {
                        iVar14 = iVar18 >> (-uVar29 & 0x1f);
                      }
                      uVar27 = (uint)((int)squareRootLookup[iVar14 + -0x40] <<
                                     (0x1f - (uVar27 & 0xfe) >> 1 & 0x1f)) >> 0xc;
                      iVar14 = uVar27 + ((int)(iVar18 - uVar27 * uVar27) / (int)(uVar27 + 1) >> 1)
                               << (uVar11 >> 1 & 0x1f);
                      uVar29 = iVar15 * -2 + iVar14;
                      uVar11 = iVar15 * -2 - iVar14;
                      uVar27 = uVar29;
                      if ((int)uVar29 < 0) {
                        uVar27 = -uVar29;
                      }
                      uVar12 = uVar11;
                      if ((int)uVar11 < 0) {
                        uVar12 = -uVar11;
                      }
                      gte_ldLZCS(uVar27 | uVar12);
                      iVar14 = gte_stLZCR();
                      uVar27 = iVar14 - 2;
                      if (-1 < iVar14 + -0xe) {
                        uVar27 = 0xc;
                      }
                      iVar21 = (iVar21 << 1) >> (0xc - uVar27 & 0x1f);
                      uVar29 = (int)(uVar29 << (uVar27 & 0x1f)) / iVar21;
                      uVar27 = (int)(uVar11 << (uVar27 & 0x1f)) / iVar21;
                      if (((int)(uVar29 & uVar27) < 0) ||
                         (-1 < (int)(uVar29 - 0x1000 | uVar27 - 0x1000))) goto LAB_8003fd00;
                      iVar21 = ((int)(uVar29 * iVar30) >> 0xc) + uVar25;
                      iVar14 = ((int)(uVar27 * iVar30) >> 0xc) + uVar25;
                      iVar15 = (_DAT_1f800074 >> 0x10) + iVar20;
                      iVar18 = (short)_DAT_1f800074 + iVar20;
                      if ((-1 < (iVar18 - iVar21 | iVar18 - iVar14)) ||
                         ((iVar15 - iVar21 & iVar15 - iVar14) < 0)) goto LAB_8003fd00;
                    }
                    DAT_1f800068 = iVar35;
                    DAT_8006aba0 = iVar35;
                    if ((uVar22 & 4) == 0) {
                      *(uint *)(iVar35 + 0x18) = *(uint *)(iVar35 + 0x18) | param_4;
                    }
joined_r0x800404e8:
                    if ((param_3 & 1) != 0) {
                      return DAT_1f800068;
                    }
                  }
                  goto LAB_8003fd00;
                }
              }
              puVar34 = puVar33 + 4;
              if ((-1 < (int)((uVar27 & 0xff) - 2)) && (puVar34 = puVar33 + 3, (uVar27 & 0xff) != 2)
                 ) {
                puVar34 = puVar33 + 5;
              }
              goto LAB_8003fd00;
            }
          }
        }
        goto LAB_8003fa1c;
      }
    }
  }
  return DAT_1f800068;
}



Object * FUN_8004055c(Vec3 *param_1,uint param_2,uint param_3,uint *param_4,uint param_5,
                     Object *param_6)

{
  bool bVar1;
  uint uVar2;
  uint **ppuVar3;
  Vec3 **ppVVar4;
  uint uVar5;
  int *piVar6;
  uint **ppuVar7;
  uint **ppuVar8;
  int iVar9;
  uint uVar10;
  Vec3 *pVVar11;
  uint *puVar12;
  int iVar13;
  Vec3 *pVVar14;
  int in_t3;
  int iVar15;
  int *piVar16;
  int iVar17;
  undefined4 unaff_s0;
  int iVar18;
  uint uVar19;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  Object *pOVar20;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  int iVar21;
  int iVar22;
  int iVar23;
  uint *puVar24;
  uint *puVar25;
  uint *puVar26;
  uint *puVar27;
  undefined4 unaff_s8;
  int iVar28;
  Object *pOVar29;
  undefined4 unaff_retaddr;
  Vec3 **ppVVar30;
  int *piVar31;
  undefined auStackX_0 [16];
  
  pVVar14 = DAT_80067174;
  DAT_8006aa0c = &DAT_80066d38;
  pOVar20 = (Object *)0x0;
  iVar21 = param_1->x;
  iVar22 = param_1->y;
  iVar23 = param_1->z;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  if ((-1 < (int)(iVar21 - param_2)) && (-1 < (int)(iVar22 - param_2))) {
    uVar2 = iVar21 - param_2 >> 0xc;
    uVar5 = iVar22 - param_2 >> 0xc;
    if (uVar2 != 0) {
      uVar2 = uVar2 - 1;
    }
    if (uVar5 != 0) {
      uVar5 = uVar5 - 1;
    }
    ppuVar3 = (uint **)((uVar2 >> 1) * 4);
    piVar6 = (int *)((uVar5 >> 1) << 7);
    ppuVar7 = (uint **)(((iVar21 + param_2 >> 0xc) + 1 >> 1) << 2);
    ppuVar8 = ppuVar3;
    ppVVar4 = (Vec3 **)&DAT_1f800000;
    do {
      do {
        ppVVar30 = ppVVar4;
        pVVar11 = (Vec3 *)((int)&pVVar14->x + (int)ppuVar8 + (int)piVar6);
        *ppVVar30 = pVVar11;
        ppVVar4 = ppVVar30 + 1;
        bVar1 = ppuVar8 != ppuVar7;
        ppuVar8 = ppuVar8 + 1;
      } while (bVar1);
      bVar1 = piVar6 != (int *)(((iVar22 + param_2 >> 0xc) + 1 >> 1) << 7);
      piVar6 = piVar6 + 0x20;
      ppuVar8 = ppuVar3;
    } while (bVar1);
    *ppVVar4 = pVVar14;
    ppVVar30[2] = (Vec3 *)0x0;
    piVar31 = (int *)&DAT_1f800000;
    puVar12 = param_4;
    while( true ) {
      iVar28 = *piVar31;
      piVar31 = piVar31 + 1;
      pOVar29 = (Object *)(iVar28 + -4);
      if (iVar28 == 0) break;
LAB_80040668:
      pOVar29 = (Object *)pOVar29->collisionShape;
      puVar24 = (uint *)pOVar29->maybeIsActive;
      if (pOVar29 != (Object *)0x0) {
        iVar28 = (pOVar29->position).x;
        if ((pOVar29 != param_6) && (uVar2 = *puVar24, puVar24 != (uint *)0x0)) {
          uVar5 = uVar2 & 0xff;
          iVar18 = uVar5 * 0x20;
          if (((int)(((iVar21 - param_2) + uVar5 * -0x20) - iVar28) < 0) &&
             ((((iVar15 = (pOVar29->position).y, 0 < (int)((iVar21 + param_2 + iVar18) - iVar28) &&
                ((int)(((iVar22 - param_2) + uVar5 * -0x20) - iVar15) < 0)) &&
               (iVar17 = (pOVar29->position).z, 0 < (int)((iVar22 + param_2 + iVar18) - iVar15))) &&
              (((int)(((iVar23 - param_2) + uVar5 * -0x20) - iVar17) < 0 &&
               (iVar28 = iVar28 - iVar21, 0 < (int)((iVar23 + param_2 + iVar18) - iVar17))))))) {
            piVar16 = (int *)(iVar15 - iVar22);
            iVar17 = iVar17 - iVar23;
            gte_ldsv_(iVar28,piVar16,iVar17);
            gte_sqr0_b(0);
            uVar5 = uVar2 >> 0x10;
            puVar25 = puVar24 + 1;
            if (uVar5 != 0) {
              if ((uVar5 & 0x80) == 0) goto LAB_80040668;
              uVar5 = uVar2 >> 0x16 & 0x3fc;
              puVar25 = (uint *)((int)puVar24 + uVar5 + 4);
            }
            read_mt(uVar5,piVar6,ppuVar7);
            uVar19 = 0;
            if (0 < (int)((((iVar18 + param_2) * (iVar18 + param_2) - uVar5) - (int)piVar6) -
                         (int)ppuVar7)) {
              uVar5 = uVar2 >> 8 & 0x7f;
              puVar27 = puVar25;
              if ((uVar2 >> 8 & 0xff) != 0) {
                pVVar11 = (Vec3 *)(pOVar29->maybeMatrix).R21R13;
                puVar12 = (uint *)(pOVar29->maybeMatrix).R23R22;
                gte_ldR11R12((pOVar29->maybeMatrix).R12R11);
                gte_ldR13R21(pVVar11);
                gte_ldR22R23(puVar12);
                gte_ldR31R32((pOVar29->maybeMatrix).R32R31);
                gte_ldR33((pOVar29->maybeMatrix).R33);
                if (uVar5 != 0) {
                  uVar2._0_1_ = pOVar29->modelId;
                  uVar2._1_1_ = pOVar29->nextModelId;
                  uVar2._2_1_ = pOVar29->keyframe;
                  uVar2._3_1_ = pOVar29->nextKeyframe;
                  iVar18 = (&objectModels[(ushort)pOVar29->type][2].field3_0xc)[uVar2 & 0xff];
                  piVar6 = (int *)(uVar2 >> 0x15 & 0x7f8);
                  uVar10 = (uint)*(char *)(iVar18 + 2);
                  ppVVar4 = (Vec3 **)((*(uint *)(iVar18 + (uVar2 >> 0xd & 0x7f8) + 0x24) & 0xffff) *
                                      2 + *(int *)(iVar18 + 0x20));
                  in_t3 = uVar5 * 8;
                  if ((byte)(&DAT_80062868)[(byte)pOVar29->field_0x40] == 0) {
                    pVVar14 = *ppVVar4;
                    ppuVar8 = (uint **)&DAT_1f800100;
                    do {
                      ppVVar4 = ppVVar4 + 1;
                      gte_ldIR3((int)pVVar14 >> 0x15);
                      gte_ldIR1(((int)pVVar14 << 10) >> 0x15);
                      gte_ldIR2(((int)pVVar14 << 0x14) >> 0x14);
                      ppuVar7 = ppuVar8 + 3;
                      gte_rtir_b();
                      pVVar14 = *ppVVar4;
                      iVar18 = gte_stMAC3();
                      iVar15 = gte_stMAC1();
                      iVar13 = gte_stMAC2();
                      puVar12 = (uint *)((iVar18 << (uVar10 & 0x1f)) + iVar28);
                      *ppuVar8 = puVar12;
                      ppuVar8[1] = (uint *)((int)piVar16 - (iVar15 << (uVar10 & 0x1f)));
                      ppuVar8[2] = (uint *)(iVar17 - (iVar13 << (uVar10 & 0x1f)));
                      ppuVar8 = ppuVar7;
                    } while (ppuVar7 != (uint **)(&DAT_1f800100 + uVar5 * 6));
                    pVVar11 = (Vec3 *)0x0;
                  }
                  else {
                    iVar18 = *(int *)((int)&objectModels[(ushort)pOVar29->type][2].field3_0xc +
                                     (uVar2 >> 6 & 0x3fc));
                    pVVar14 = *ppVVar4;
                    piVar6 = (int *)((*(uint *)((int)piVar6 + iVar18 + 0x24) & 0xffff) * 2 +
                                    *(int *)(iVar18 + 0x20));
                    pVVar11 = (Vec3 *)((uint)(byte)(&DAT_80062868)[(byte)pOVar29->field_0x40] << 4);
                    gte_ldIR0(pVVar11);
                    ppuVar8 = (uint **)&DAT_1f800100;
                    do {
                      ppVVar4 = ppVVar4 + 1;
                      in_t3 = *piVar6;
                      gte_ldsv_((int)pVVar14 >> 0x15,((int)pVVar14 << 10) >> 0x15,
                                ((int)pVVar14 << 0x14) >> 0x13);
                      iVar18 = in_t3 >> 0x15;
                      iVar15 = (in_t3 << 10) >> 0x15;
                      iVar13 = (in_t3 << 0x14) >> 0x14;
                      gte_ldfcdir(iVar18,iVar15,iVar13);
                      piVar6 = piVar6 + 1;
                      gte_intpl_b();
                      pVVar14 = *ppVVar4;
                      ppuVar7 = ppuVar8 + 3;
                      read_mt(iVar18,iVar15,iVar13);
                      gte_ldIR3(iVar18);
                      gte_ldIR1(iVar15);
                      gte_ldIR2(iVar13);
                      gte_rtir();
                      iVar18 = gte_stMAC3();
                      iVar15 = gte_stMAC1();
                      iVar13 = gte_stMAC2();
                      puVar12 = (uint *)((iVar18 << (uVar10 & 0x1f)) + iVar28);
                      *ppuVar8 = puVar12;
                      ppuVar8[1] = (uint *)((int)piVar16 - (iVar15 << (uVar10 & 0x1f)));
                      ppuVar8[2] = (uint *)(iVar17 - (iVar13 << (uVar10 & 0x1f)));
                      ppuVar8 = ppuVar7;
                    } while (ppuVar7 != (uint **)(&DAT_1f800100 + uVar5 * 6));
                  }
                }
              }
              while (puVar26 = puVar27, uVar2 = uVar19 & 1, uVar19 = *puVar26, uVar2 == 0) {
                uVar2 = uVar19 >> 8 & 0xff;
                if (uVar2 == 0) {
LAB_800409c8:
                  uVar2 = uVar19 >> 0x10;
                  ppuVar7 = (uint **)(iVar17 + puVar26[2]);
                  iVar18 = iVar28 + ((int)puVar26[1] >> 0x10);
                  piVar6 = (int *)((int)piVar16 + (int)(short)puVar26[1]);
                  puVar27 = puVar26 + 4;
                  goto LAB_80040b84;
                }
                if (uVar2 == 1) {
                  puVar27 = puVar26 + 4;
                  uVar2 = uVar19 >> 0x10;
                  gte_ldIR3((int)puVar26[1] >> 0x10);
                  gte_ldIR1(-(int)(short)puVar26[1]);
                  gte_ldIR2(-puVar26[2]);
                  gte_rtir();
                  iVar18 = gte_stMAC3();
                  iVar15 = gte_stMAC1();
                  iVar13 = gte_stMAC2();
                  iVar18 = iVar28 + iVar18;
                  piVar6 = (int *)((int)piVar16 - iVar15);
                  ppuVar7 = (uint **)(iVar17 - iVar13);
                  goto LAB_80040b84;
                }
                if (uVar2 == 2) {
                  puVar27 = puVar26 + 3;
                  uVar2 = puVar26[1] & 0xffff;
                  pVVar11 = (Vec3 *)((int)puVar26[1] >> 0x10);
                  if ((int)pVVar11 < 0) {
                    iVar18 = *(int *)(&DAT_1f800100 + uVar2 * 6);
                    piVar6 = (int *)(&DAT_1f800104)[uVar2 * 3];
                    ppuVar7 = *(uint ***)(&DAT_1f800108 + uVar2 * 6);
                    uVar2 = uVar19 >> 0x10;
                    puVar27 = puVar26 + 3;
                  }
                  else {
                    iVar18 = (int)pVVar11 * 6;
                    iVar15 = (int)pVVar11 * 3;
                    pVVar11 = *(Vec3 **)(&DAT_1f800108 + (int)pVVar11 * 6);
                    iVar18 = *(int *)(&DAT_1f800100 + uVar2 * 6) + *(int *)(&DAT_1f800100 + iVar18)
                             >> 1;
                    piVar6 = (int *)((int)((&DAT_1f800104)[uVar2 * 3] + (&DAT_1f800104)[iVar15]) >>
                                    1);
                    ppuVar7 = (uint **)((int)&pVVar11->x + *(int *)(&DAT_1f800108 + uVar2 * 6) >> 1)
                    ;
                    uVar2 = uVar19 >> 0x10;
                  }
                  goto LAB_80040b84;
                }
                if (uVar2 != 3) goto LAB_800409c8;
                gte_ldIR1(iVar28);
                gte_ldIR2(piVar16);
                uVar2 = uVar19 >> 0x10;
                gte_sqr0_b(0);
                piVar6 = (int *)puVar26[1];
                pVVar14 = (Vec3 *)gte_stMAC1();
                in_t3 = gte_stMAC2();
                puVar27 = puVar26 + 5;
                if (0 < (int)(((uVar2 + param_2) * (uVar2 + param_2) - (int)pVVar14) - in_t3)) {
                  pVVar11 = (Vec3 *)(param_2 >> 3);
                  puVar12 = (uint *)(param_2 >> 4);
                  iVar13 = (int)&pVVar11->x + (param_2 >> 1) + (int)puVar12;
                  iVar15 = 6;
                  iVar18 = iVar28;
                  if ((((int)piVar6 >> 0x10) + iVar17 + iVar13 < 0) ||
                     (iVar15 = 4, 0 < ((short)piVar6 + iVar17) - iVar13)) {
                    uVar2 = puVar26[3];
                    ppuVar7 = (uint **)(iVar17 + *(short *)((int)puVar26 + iVar15 + 4));
                    piVar6 = piVar16;
                    puVar27 = puVar26 + 5;
                  }
                  else {
                    ppuVar7 = (uint **)0x0;
                    piVar6 = piVar16;
                    puVar27 = puVar26 + 5;
                  }
LAB_80040b84:
                  gte_ldsv_(iVar18,piVar6,ppuVar7);
                  iVar15 = uVar2 + param_2;
                  gte_sqr0_b(0);
                  read_mt(iVar15,pVVar11,puVar12);
                  if (0 < ((iVar15 * iVar15 - iVar15) - (int)pVVar11) - (int)puVar12) {
                    if ((uVar19 & 4) == 0) {
                      pVVar14 = (Vec3 *)(pOVar29->collisionFlagsReceived | param_5);
                      pOVar29->collisionFlagsReceived = (int)pVVar14;
                    }
                    if (param_4 != (uint *)0x0) {
                      pVVar14 = *(Vec3 **)((int)puVar27 + -4);
                      if (pVVar14 != (Vec3 *)0x0) {
                        *param_4 = *param_4 | (uint)pVVar14;
                        pVVar14 = &Vec3_8006ab70;
                        DAT_8006aba0 = pOVar29;
                      }
                    }
                    if ((uVar19 & 2) == 0) {
                      pOVar20 = pOVar29;
                      if ((param_3 & 1) == 0) {
                        iVar13 = uVar2 + param_2;
                        iVar15 = (int)&pVVar11->x + iVar15 + (int)puVar12;
                        if (iVar15 != 0) {
                          gte_ldLZCS(iVar15);
                          uVar2 = gte_stLZCR();
                          uVar5 = (uVar2 & 0xfe) - 0x18;
                          iVar28 = iVar15 << (uVar5 & 0x1f);
                          if ((int)uVar5 < 0) {
                            iVar28 = iVar15 >> (-uVar5 & 0x1f);
                          }
                          uVar2 = (uint)((int)squareRootLookup[iVar28 + -0x40] <<
                                        (0x1f - (uVar2 & 0xfe) >> 1 & 0x1f)) >> 0xc;
                          iVar17 = uVar2 + 1;
                          iVar15 = (int)(iVar15 - uVar2 * uVar2) / iVar17 >> 1;
                          iVar9 = uVar2 + iVar15;
                          iVar28 = 0;
                          do {
                            gte_ldsv_(-iVar18,-(int)piVar6,-(int)ppuVar7);
                            gte_ldIR0(iVar13);
                            gte_gpf0(0);
                            read_mt(iVar15,uVar2,iVar17);
                            iVar15 = iVar15 / iVar9;
                            uVar2 = (int)uVar2 / iVar9;
                            iVar17 = iVar17 / iVar9;
                            gte_ldsv_(iVar15,uVar2,iVar17);
                            gte_sqr0_b(0);
                            read_mt(iVar28,pVVar14,in_t3);
                            iVar28 = (int)pVVar14 +
                                     ((in_t3 + iVar28) - (int)(Vec3 *)(iVar13 * iVar13));
                            iVar9 = iVar9 + -1;
                            pVVar14 = (Vec3 *)(iVar13 * iVar13);
                          } while (iVar28 < 0);
                          Vec3_8006ab7c.x = iVar15 + iVar21 + iVar18;
                          Vec3_8006ab7c.y = (int)piVar6 + uVar2 + iVar22;
                          Vec3_8006ab7c.z = (int)ppuVar7 + iVar17 + iVar23;
                          return pOVar29;
                        }
                      }
                      else if ((param_3 & 2) != 0) {
                        return pOVar29;
                      }
                    }
                  }
                }
              }
            }
          }
        }
        goto LAB_80040668;
      }
    }
  }
  return pOVar20;
}



undefined4 FUN_80040db4(int *param_1,int param_2,uint param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  param_2 = param_2 + 0x164;
  iVar1 = *param_1 - Spyro.position.x;
  iVar2 = iVar1 - param_2;
  if (iVar1 < 0) {
    iVar1 = -iVar1;
    iVar2 = iVar1 - param_2;
  }
  if (iVar2 < 1) {
    iVar2 = param_1[1] - Spyro.position.y;
    iVar3 = iVar2 - param_2;
    if (iVar2 < 0) {
      iVar2 = -iVar2;
      iVar3 = iVar2 - param_2;
    }
    if (iVar3 < 1) {
      iVar3 = param_1[2] - Spyro.position.z;
      iVar4 = iVar3 - param_2;
      if (iVar3 < 0) {
        iVar3 = -iVar3;
        iVar4 = iVar3 - param_2;
      }
      if (iVar4 < 1) {
        gte_ldsv_(iVar1,iVar2,iVar3);
        gte_sqr0(0);
        read_mt(iVar1,iVar2,iVar3);
        if ((iVar1 + iVar2 + iVar3) - param_2 * param_2 < 1) {
          Spyro.takingDamageRelated = Spyro.takingDamageRelated | param_3;
          return 1;
        }
      }
    }
  }
  return 0;
}



void FUN_80040e94(void)

{
  bool bVar1;
  char cVar2;
  byte bVar3;
  short sVar4;
  Object *pOVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  undefined4 *puVar9;
  Object *pOVar10;
  int iVar11;
  short **ppsVar12;
  short **ppsVar13;
  int iVar14;
  uint uVar15;
  int iVar16;
  short *psVar17;
  Object *pOVar18;
  undefined4 *puVar19;
  Object *pOVar20;
  Object *pOVar21;
  
  puVar19 = &DAT_800682b8;
  do {
    *puVar19 = 0;
    puVar9 = puVar19 + 2;
    puVar19[1] = 0;
    iVar8 = Spyro.position.z;
    iVar7 = Spyro.position.y;
    iVar6 = Spyro.position.x;
    puVar19 = puVar9;
  } while (puVar9 != &DAT_800682d8);
  puVar19 = &DAT_800682b8;
  pOVar20 = Objects + -1;
  pOVar18 = &Object_800685f0;
LAB_80040eec:
  do {
    while( true ) {
      while( true ) {
        pOVar21 = pOVar18;
        pOVar10 = pOVar20;
        pOVar5 = Objects;
        pOVar20 = pOVar10 + 1;
        pOVar18 = pOVar21;
        if (-1 < (char)pOVar10[1].state) break;
        ppsVar13 = DAT_800670e0;
        if (pOVar10[1].state == 0xff) {
          while( true ) {
            ppsVar12 = ppsVar13;
            cVar2 = *(char *)puVar19;
            bVar1 = puVar19 == &DAT_800682d8;
            puVar19 = (undefined4 *)((int)puVar19 + 1);
            if (bVar1) break;
            ppsVar13 = ppsVar12 + 1;
            if (cVar2 != '\0') {
              psVar17 = *ppsVar12;
              pOVar20 = pOVar21;
              do {
                sVar4 = *psVar17;
                psVar17 = psVar17 + 1;
                pOVar18 = pOVar5 + ((int)sVar4 & 0x7fff);
                bVar3 = pOVar18->state;
                pOVar20->data = (undefined *)pOVar18;
                pOVar21 = (Object *)&pOVar20->collisionShape;
                if ((char)bVar3 < '\0') {
                  pOVar21 = pOVar20;
                }
                pOVar18->field_0x4b = 1;
                pOVar20 = pOVar21;
              } while (-1 < sVar4);
            }
          }
          pOVar21->data = (undefined *)0x0;
          return;
        }
      }
      iVar11 = (int)(char)pOVar10[1].field_0x43;
      if (pOVar10[1].isShown == false) break;
      pOVar21->data = (undefined *)pOVar20;
      pOVar10[1].field_0x4b = 1;
      pOVar18 = (Object *)&pOVar21->collisionShape;
      if (-1 < iVar11) {
        *(undefined *)((int)&DAT_800682b8 + iVar11) = 1;
        pOVar18 = pOVar21;
      }
    }
    iVar14 = (int)(char)pOVar10[1].field_0x4a;
    iVar16 = pOVar10[1].position.x;
    pOVar10[1].field_0x4b = 0;
    uVar15 = iVar14 * 0x400;
  } while (iVar14 == 0);
  if (-1 < (int)uVar15) goto code_r0x80040f44;
  goto LAB_80040fbc;
code_r0x80040f44:
  iVar16 = iVar16 - iVar6;
  if ((0 < (int)(iVar16 + uVar15)) && (iVar16 + iVar14 * -0x400 < 0)) {
    gte_ldIR1(iVar16 >> 3);
    iVar16 = pOVar10[1].position.y - iVar7;
    if ((0 < (int)(iVar16 + uVar15)) && (iVar16 + iVar14 * -0x400 < 0)) {
      gte_ldIR2(iVar16 >> 3);
      iVar16 = pOVar10[1].position.z - iVar8;
      gte_sqr0_b(0);
      if ((0 < (int)(iVar16 + uVar15)) && (iVar16 + iVar14 * -0x400 < 0)) {
        iVar14 = gte_stMAC1();
        iVar16 = gte_stMAC2();
        if (0 < (int)(((uVar15 >> 3) * (uVar15 >> 3) - iVar14) - iVar16)) {
LAB_80040fbc:
          pOVar21->data = (undefined *)pOVar20;
          pOVar10[1].field_0x4b = 1;
          pOVar18 = (Object *)&pOVar21->collisionShape;
          if (-1 < iVar11) {
            *(undefined *)((int)&DAT_800682b8 + iVar11) = 1;
            pOVar18 = pOVar21;
          }
        }
      }
    }
  }
  goto LAB_80040eec;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_80041068(int *param_1,uint param_2)

{
  char cVar1;
  undefined uVar2;
  byte bVar3;
  undefined4 uVar4;
  int *piVar5;
  uint uVar6;
  int *piVar7;
  byte bVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  uint uVar12;
  uint uVar13;
  int mobyTag;
  undefined4 unaff_retaddr;
  
  piVar5 = &DAT_800683f0;
  uVar6 = _DAT_1f800000;
  uVar9 = _DAT_1f800004;
LAB_80041088:
  while( true ) {
    do {
      do {
        _DAT_1f800004 = uVar9;
        _DAT_1f800000 = uVar6;
        mobyTag = *param_1;
        param_1 = param_1 + 1;
        uVar6 = *(uint *)(mobyTag + 0x40);
        if (mobyTag == 0) {
          piVar7 = &DAT_800683f0;
          uVar4 = unaff_retaddr;
          if (piVar5 != &DAT_800683f0) {
            do {
              DAT_8006a9f4 = uVar4;
              DAT_8006a9f0 = piVar5;
              DAT_8006a9ec = piVar7 + 2;
              FUN_80050648(*piVar7,piVar7[1],0);
              piVar7 = DAT_8006a9ec;
              piVar5 = DAT_8006a9f0;
              uVar4 = DAT_8006a9f4;
            } while (DAT_8006a9ec != DAT_8006a9f0);
            return;
          }
          return;
        }
        uVar9 = *(uint *)(mobyTag + 0x3c);
        DAT_1f800000._0_1_ = (byte)uVar6;
        DAT_1f800000._1_1_ = (char)(uVar6 >> 8);
      } while (DAT_1f800000._1_1_ == '\0');
      bVar8 = (byte)DAT_1f800000 >> 4;
    } while (bVar8 == 0);
    iVar10 = ((uVar6 & 0xf) + (param_2 & 3)) - (uint)bVar8;
    DAT_1f800002._1_1_ = (undefined)(uVar6 >> 0x18);
    uVar2 = DAT_1f800002._1_1_;
    DAT_1f800000 = (ushort)uVar6;
    cVar1 = (char)iVar10;
    if (0 < iVar10) break;
    if (-1 < (int)param_2) {
      _DAT_1f800000 = (uint3)DAT_1f800000;
      uVar6 = _DAT_1f800000;
    }
    _DAT_1f800000 = uVar6;
    _DAT_1f800000 = CONCAT31(ram0x1f800001,cVar1 + bVar8 * '\x11');
    _DAT_1f800004 = uVar9;
    *(uint *)(mobyTag + 0x40) = _DAT_1f800000;
    *(uint *)(mobyTag + 0x3c) = uVar9;
    uVar6 = _DAT_1f800000;
    uVar9 = _DAT_1f800004;
  }
  DAT_1f800004._1_1_ = (byte)(uVar9 >> 8);
  bVar8 = DAT_1f800004._1_1_;
  uVar11 = (uint)DAT_1f800004._1_1_;
  DAT_1f800006._1_1_ = (byte)(uVar9 >> 0x18);
  bVar3 = DAT_1f800006._1_1_;
  uVar12 = (uint)DAT_1f800006._1_1_;
  if ((uVar9 & 0xff) == uVar11) {
    bVar8 = 0;
    if ((int)param_2 < 0) goto code_r0x800410e8;
    goto LAB_80041100;
  }
  _DAT_1f800004 = CONCAT31((int3)(uVar9 >> 8),bVar8);
  _DAT_1f800004 = CONCAT12(bVar3,DAT_1f800004);
  uVar13 = *(uint *)(uVar12 * 8 + (&objectModels[*(ushort *)(mobyTag + 0x36)][2].field3_0xc)[uVar11]
                    + 0x28);
  _DAT_1f800000 = CONCAT12(1,DAT_1f800000);
  uVar6 = uVar13 >> 5 & 0xf0;
  _DAT_1f800000 = CONCAT31(ram0x1f800001,(char)uVar6);
  _DAT_1f800004 = CONCAT13(bVar3 + 1,_DAT_1f800004);
  if (uVar6 == 0) {
    _DAT_1f800004 = CONCAT13(bVar3,_DAT_1f800004);
  }
  goto LAB_800411bc;
code_r0x800410e8:
  DAT_1f800002._0_1_ = (byte)(uVar6 >> 0x10);
  bVar8 = (byte)DAT_1f800002;
  if (((byte)DAT_1f800002 == 0) || (bVar8 = (byte)DAT_1f800002 | 4, (uVar6 & 0x20000) == 0)) {
LAB_80041100:
    DAT_1f800004 = (undefined2)uVar9;
    _DAT_1f800004 = CONCAT12(DAT_1f800006._1_1_,DAT_1f800004);
    uVar13 = *(uint *)((byte *)(&objectModels[*(ushort *)(mobyTag + 0x36)][2].field3_0xc)[uVar11] +
                      uVar12 * 8 + 0x28);
    _DAT_1f800004 = CONCAT13((char)(uVar12 + 1),_DAT_1f800004);
    uVar6 = CONCAT31((int3)(CONCAT13(DAT_1f800002._1_1_,CONCAT12(bVar8,DAT_1f800000)) >> 8),
                     ((byte)(uVar13 >> 5) & 0xf0) + cVar1 + -1);
    _DAT_1f800000 = uVar6 | 0x10000;
    if (-1 < (int)((uVar12 + 1) -
                  (uint)*(byte *)(&objectModels[*(ushort *)(mobyTag + 0x36)][2].field3_0xc)[uVar11])
       ) {
      _DAT_1f800004 = (uint)_DAT_1f800004;
      DAT_1f800000 = (ushort)uVar6;
      _DAT_1f800000 = CONCAT13(uVar2,CONCAT12(bVar8,DAT_1f800000)) | 0x30000;
    }
LAB_800411bc:
    uVar6 = _DAT_1f800004;
    *(uint *)(mobyTag + 0x40) = _DAT_1f800000;
    *(uint *)(mobyTag + 0x3c) = uVar6;
    uVar6 = _DAT_1f800000;
    uVar9 = _DAT_1f800004;
    if (-1 < (int)(uVar13 << 8)) {
      *piVar5 = mobyTag;
      piVar5[1] = (int)(uVar13 << 8) >> 0x18;
      piVar5 = piVar5 + 2;
      uVar6 = _DAT_1f800000;
      uVar9 = _DAT_1f800004;
    }
  }
  goto LAB_80041088;
}



void FUN_80041238(undefined4 *param_1)

{
  undefined4 *in_at;
  undefined4 unaff_retaddr;
  
  DAT_8006a9f0 = param_1;
  DAT_8006a9f4 = unaff_retaddr;
  do {
    DAT_8006a9ec = in_at + 2;
    FUN_80050648(*in_at,in_at[1],0);
    in_at = DAT_8006a9ec;
  } while (DAT_8006a9ec != DAT_8006a9f0);
  return;
}



int * FUN_80041290(void)

{
  char cVar1;
  int *piVar2;
  int *piVar3;
  int *piVar4;
  
  piVar3 = DAT_80066fd4;
  piVar4 = (int *)(DAT_80066fb4 + -0x58);
  if (DAT_80066fd4 == piVar4) {
    return (int *)0x0;
  }
  DAT_80066f3c = DAT_80066f3c + 1;
  cVar1 = *(char *)(DAT_80066fd4 + 0x12);
  *(undefined *)(DAT_80066fd4 + 0x12) = 0;
  *DAT_80066fd4 = DAT_800670d8;
  piVar2 = DAT_80066fd4 + 0x16;
  if (cVar1 != -1) {
    do {
      DAT_80066fd4 = piVar2;
      DAT_800670d8 = DAT_800670d8 + 0x18;
      if (DAT_80066fd4 == piVar4) {
        return piVar3;
      }
      piVar2 = DAT_80066fd4 + 0x16;
    } while (-1 < *(char *)(DAT_80066fd4 + 0x12));
    return piVar3;
  }
  piVar4 = DAT_80066fd4 + 0x28;
  DAT_80066fd4 = DAT_80066fd4 + 0x16;
  *(undefined *)piVar4 = 0xff;
  DAT_800670d8 = DAT_800670d8 + 0x18;
  return piVar3;
}



void FUN_8004132c(int param_1)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  
  if (-1 < *(short *)(param_1 + 0x34)) {
    iVar1 = DAT_80067174 + *(short *)(param_1 + 0x34) * 4 + -4;
    do {
      piVar3 = (int *)(iVar1 + 4);
      iVar1 = *piVar3;
    } while (iVar1 != param_1);
    *piVar3 = *(int *)(param_1 + 4);
  }
  if (0 < DAT_800670bc - param_1) {
    *(undefined *)(param_1 + 0x48) = 0xfd;
    return;
  }
  *(undefined *)(param_1 + 0x48) = 0xfe;
  DAT_80066f3c = DAT_80066f3c + -1;
  iVar1 = param_1;
  if (*(char *)(param_1 + 0xa0) == -1) {
    iVar1 = param_1 + -0x58;
    do {
      iVar2 = iVar1;
      iVar1 = iVar2 + -0x58;
    } while (*(char *)(iVar2 + 0x48) == -2);
    iVar1 = iVar2 + 0x58;
    *(undefined *)(iVar2 + 0xa0) = 0xff;
  }
  if (-1 < DAT_80066fd4 - param_1) {
    DAT_800670d8 = DAT_800670d8 + ((DAT_80066fd4 - param_1) / 0x58) * -0x18;
    DAT_80066fd4 = iVar1;
  }
  return;
}



void FUN_80041438(int param_1)

{
  ModelSet *pMVar1;
  undefined *puVar2;
  int iVar3;
  int *piVar4;
  uint uVar5;
  int iVar6;
  undefined uVar7;
  code *UNRECOVERED_JUMPTABLE;
  
  pMVar1 = objectModels[*(ushort *)(param_1 + 0x36)];
  if ((int)pMVar1 < 1) {
    uVar5 = *(uint *)((byte *)(&pMVar1[2].field3_0xc)[*(byte *)(param_1 + 0x3c)] +
                     (uint)*(byte *)(param_1 + 0x3e) * 8 + 0x28);
    uVar7 = 0x72;
    if ((int)(*(byte *)(&pMVar1[2].field3_0xc)[*(byte *)(param_1 + 0x3c)] - 1) < 1) {
      uVar7 = 0;
    }
    *(undefined *)(param_1 + 0x40) = uVar7;
    *(undefined *)(param_1 + 0x41) = 1;
    puVar2 = pMVar1->models;
    *(undefined4 *)(param_1 + 8) = *(undefined4 *)((int)&pMVar1->models + (uVar5 >> 0xb & 0x1c));
  }
  else {
    puVar2 = (undefined *)pMVar1->field2_0x8;
    *(undefined *)(param_1 + 0x40) = 0;
    *(undefined *)(param_1 + 0x41) = 0;
    *(undefined **)(param_1 + 8) = puVar2;
  }
  *(undefined2 *)(param_1 + 0x34) = 0xffff;
  iVar6 = DAT_80067174;
  if (puVar2 != (undefined *)0x0) {
    iVar3 = (*(uint *)(param_1 + 0xc) >> 0xd) + (*(uint *)(param_1 + 0x10) >> 0xd) * 0x20;
    *(short *)(param_1 + 0x34) = (short)iVar3;
    piVar4 = (int *)(iVar3 * 4 + iVar6);
    iVar6 = *piVar4;
    *piVar4 = param_1;
    *(int *)(param_1 + 4) = iVar6;
  }
  BuildRotationMatrix(param_1 + 0x44,param_1 + 0x20,(Mat33 *)0x0);
                    // WARNING: Could not recover jumptable at 0x8004151c. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)();
  return;
}



void FUN_80041524(int param_1)

{
  *(undefined *)(param_1 + 0x41) = 0;
  *(undefined4 *)(param_1 + 8) = 0;
  *(undefined2 *)(param_1 + 0x34) = 0xffff;
  return;
}



void FUN_80041538(Object *param_1,uint param_2)

{
  int iVar1;
  ModelSet *pMVar2;
  uint uVar3;
  int iVar4;
  Object **ppOVar5;
  uint uVar6;
  Object *pOVar7;
  uint uVar8;
  int iVar9;
  undefined **ppuVar10;
  
  if ((param_2 & 1) != 0) {
    uVar3._0_1_ = param_1->modelId;
    uVar3._1_1_ = param_1->nextModelId;
    uVar3._2_1_ = param_1->keyframe;
    uVar3._3_1_ = param_1->nextKeyframe;
    pMVar2 = objectModels[(ushort)param_1->type];
    if ((int)((byte)(&DAT_80062868)[(byte)param_1->field_0x40] - 0x80) < 0) {
      uVar8 = uVar3 >> 0x10 & 0xff;
      uVar6 = uVar3;
    }
    else {
      uVar6 = uVar3 >> 8;
      uVar8 = uVar3 >> 0x18;
    }
    if ((int)pMVar2 < 1) {
      param_1->maybeIsActive =
           *(undefined **)
            ((int)&pMVar2->models +
            (*(uint *)((&pMVar2[2].field3_0xc)[uVar6 & 0xff] + uVar8 * 8 + 0x28) >> 0xb & 0x1c));
    }
    else {
      param_1->maybeIsActive = (undefined *)pMVar2->field2_0x8;
    }
  }
  iVar1 = DAT_80067174;
  if ((param_2 & 2) != 0) {
    uVar3 = 0;
    if ((param_2 & 8) == 0) {
      uVar3 = (param_1->position).x;
      uVar6 = (param_1->position).y;
    }
    else {
      uVar6 = 0;
    }
    iVar4 = (uVar3 >> 0xd) + (uVar6 >> 0xd) * 0x20;
    iVar9 = *(short *)&param_1->field_0x34 * 4;
    if ((iVar4 != *(short *)&param_1->field_0x34) && (-1 < iVar9)) {
      pOVar7 = (Object *)(iVar9 + DAT_80067174 + -4);
      do {
        ppuVar10 = &pOVar7->collisionShape;
        pOVar7 = (Object *)*ppuVar10;
      } while (pOVar7 != param_1);
      *ppuVar10 = param_1->collisionShape;
      *(short *)&param_1->field_0x34 = (short)iVar4;
      ppOVar5 = (Object **)(iVar4 * 4 + iVar1);
      pOVar7 = *ppOVar5;
      *ppOVar5 = param_1;
      param_1->collisionShape = (undefined *)pOVar7;
    }
  }
  if ((param_2 & 4) != 0) {
    BuildRotationMatrix(&param_1->eulerRotation,&param_1->maybeMatrix,(Mat33 *)0x0);
  }
  return;
}



int FUN_800416a0(int param_1)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = *(uint *)(param_1 + 0x3c);
  uVar2 = (uint)*(byte *)(param_1 + 0x40);
  if (((uVar1 >> 0x10 & 0xff) + 1 != uVar1 >> 0x18) &&
     (uVar2 = 0, (uVar1 & 0xff) != (uVar1 >> 8 & 0xff))) {
    uVar1 = uVar1 >> 8;
  }
  return (*(uint *)((&objectModels[*(ushort *)(param_1 + 0x36)][2].field3_0xc)[uVar1 & 0xff] +
                    (uVar1 >> 0x10 & 0xff) * 8 + 0x28) & 0x1ff) + ((uVar2 & 0xf) >> 1);
}



undefined8 FUN_80041730(Object *param_1,int param_2,Vec3 *param_3)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  
  gte_ldR11R12((param_1->maybeMatrix).R12R11);
  gte_ldR13R21((param_1->maybeMatrix).R21R13);
  gte_ldR22R23((param_1->maybeMatrix).R23R22);
  gte_ldR31R32((param_1->maybeMatrix).R32R31);
  gte_ldR33((param_1->maybeMatrix).R33);
  uVar4._0_1_ = param_1->modelId;
  uVar4._1_1_ = param_1->nextModelId;
  uVar4._2_1_ = param_1->keyframe;
  uVar4._3_1_ = param_1->nextKeyframe;
  iVar2 = (&objectModels[(ushort)param_1->type][2].field3_0xc)[uVar4 & 0xff];
  uVar1 = (uint)*(byte *)(iVar2 + 2);
  iVar2 = *(int *)((*(uint *)((uVar4 >> 0xd & 0x7f8) + iVar2 + 0x24) & 0xffff) * 2 +
                   *(int *)(iVar2 + 0x20) + param_2 * 4);
  iVar3 = *(int *)((int)&objectModels[(ushort)param_1->type][2].field3_0xc + (uVar4 >> 6 & 0x3fc));
  iVar8 = (iVar2 << 0x14) >> 0x14;
  iVar6 = (iVar2 << 10) >> 0x15;
  iVar5 = iVar2 >> 0x15;
  if ((byte)(&DAT_80062868)[(byte)param_1->field_0x40] != 0) {
    iVar3 = *(int *)((*(uint *)((uVar4 >> 0x15 & 0x7f8) + iVar3 + 0x24) & 0xffff) * 2 +
                     *(int *)(iVar3 + 0x20) + param_2 * 4);
    gte_ldsv_(iVar5,iVar6,iVar8);
    iVar8 = (iVar3 << 0x14) >> 0x14;
    iVar6 = (iVar3 << 10) >> 0x15;
    iVar5 = iVar3 >> 0x15;
    gte_ldfcdir(iVar5,iVar6,iVar8);
    gte_ldIR0((uint)(byte)(&DAT_80062868)[(byte)param_1->field_0x40] << 4);
    gte_intpl();
    read_mt(iVar5,iVar6,iVar8);
  }
  gte_ldIR3(iVar5 << (uVar1 & 0x1f));
  gte_ldIR1(iVar6 << (uVar1 & 0x1f));
  gte_ldIR2(iVar8 << (uVar1 & 0x1f));
  gte_rtir();
  iVar5 = (param_1->position).y;
  iVar6 = (param_1->position).z;
  iVar8 = gte_stMAC3();
  iVar7 = gte_stMAC1();
  iVar9 = gte_stMAC2();
  param_3->x = iVar8 + (param_1->position).x;
  param_3->y = iVar5 - iVar7;
  param_3->z = iVar6 - iVar9;
  return CONCAT44(iVar3,iVar2);
}



void FUN_800418c8(int param_1,int *param_2,int param_3,int param_4,int param_5)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  short *psVar5;
  uint uVar6;
  byte *pbVar7;
  int *piVar8;
  uint uVar9;
  int iVar10;
  
  iVar2 = *(int *)(param_3 * 4 + DAT_80066f24);
  iVar3 = param_4 * 0x14 + iVar2;
  uVar4 = *(uint *)(iVar3 + 0x14);
  uVar6 = *(uint *)(iVar3 + 0x18);
  piVar8 = *(int **)(iVar2 + 4);
  if (param_5 < 1) {
    uVar9 = uVar4 >> 4;
    uVar4 = uVar4 & 0xffff;
    iVar3 = (uVar6 >> 10 & 0x3ff) + uVar4;
  }
  else {
    uVar9 = uVar4 >> 5;
    iVar3 = (uVar6 >> 0x14) + (uVar4 & 0xffff);
    uVar4 = (uVar4 & 0xffff) + (uVar6 & 0x3ff);
    piVar8 = piVar8 + *(byte *)(iVar2 + 2);
  }
  uVar9 = uVar9 & 0x1000;
  psVar5 = (short *)(uVar4 + *(int *)(iVar2 + 0x10));
  pbVar7 = (byte *)(iVar3 + *(int *)(iVar2 + 0x10));
  iVar2 = 0;
  uVar4 = 0;
  iVar3 = 0;
  do {
    while (param_1 = param_1 + -1, uVar9 == 0) {
      bVar1 = *pbVar7;
      pbVar7 = pbVar7 + 1;
      uVar9 = bVar1 & 1;
      iVar10 = *(int *)(&DAT_80062674 + (bVar1 & 0xfe) * 2) + *piVar8;
      iVar2 = iVar2 + (iVar10 >> 0x15);
      uVar4 = uVar4 - (iVar10 * 0x800 >> 0x15);
      iVar3 = iVar3 - (iVar10 * 0x400000 >> 0x15);
joined_r0x80041a38:
      piVar8 = piVar8 + 1;
      if (param_1 < 0) goto LAB_80041a74;
    }
    iVar10 = *piVar8;
    uVar6 = (uint)*psVar5;
    uVar9 = uVar6 & 1;
    if ((uVar6 & 2) == 0) {
      iVar2 = iVar2 + (iVar10 >> 0x15) + ((int)uVar6 >> 9);
      uVar4 = (uVar4 - ((iVar10 << 0xb) >> 0x15)) - ((int)(uVar6 << 0x15) >> 0x19);
      iVar3 = (iVar3 - ((iVar10 << 0x16) >> 0x15)) + ((int)(uVar6 << 0x1a) >> 0x1b) * -4;
      psVar5 = psVar5 + 1;
      goto joined_r0x80041a38;
    }
    iVar2 = (int)psVar5[1];
    psVar5 = psVar5 + 2;
    iVar3 = (int)(uVar6 << 0x14) >> 0x15;
    uVar4 = (iVar2 << 0x1a) >> 0x15 | (uVar6 & 0xf000) >> 0xb;
    iVar2 = iVar2 >> 5;
    piVar8 = piVar8 + 1;
  } while (-1 < param_1);
LAB_80041a74:
  *param_2 = iVar2;
  param_2[1] = -uVar4;
  param_2[2] = -iVar3;
  return;
}



void FUN_80041a8c(int param_1)

{
  if (*(char *)(param_1 + 0x52) != -1) {
    *(char *)(param_1 + 0x52) = (char)DAT_8006ab98;
  }
  return;
}



void FUN_80041ab8(int param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  
  gte_ldIR1(Vec3_8006ab88.x);
  gte_ldIR3(Vec3_8006ab88.z);
  gte_sqr0(0);
  uVar4 = *(uint *)(param_1 + 0x1c);
  iVar1 = gte_stMAC1();
  iVar2 = gte_stMAC3();
  iVar1 = iVar1 + iVar2;
  if ((int)uVar4 < 0) {
    gte_ldLZCS(iVar1);
    uVar4 = 0;
    if (iVar1 != 0) {
      uVar4 = gte_stLZCR();
      uVar3 = (uVar4 & 0xfe) - 0x18;
      iVar2 = iVar1 << (uVar3 & 0x1f);
      if ((int)uVar3 < 0) {
        iVar2 = iVar1 >> (-uVar3 & 0x1f);
      }
      uVar4 = (uint)((int)squareRootLookup[iVar2 + -0x40] << (0x1f - (uVar4 & 0xfe) >> 1 & 0x1f)) >>
              0xc;
    }
    if ((int)(uVar4 - Vec3_8006ab88.y) < 0) {
      if ((int)(uVar4 + Vec3_8006ab88.y) < 0) {
        iVar2 = (Vec3_8006ab88.y << 5) / (int)uVar4;
        iVar1 = 0x80;
      }
      else {
        iVar2 = (int)(uVar4 << 5) / -Vec3_8006ab88.y;
        iVar1 = 0x40;
      }
    }
    else if ((int)(uVar4 + Vec3_8006ab88.y) < 0) {
      iVar2 = (int)(uVar4 << 5) / -Vec3_8006ab88.y;
      iVar1 = 0xc0;
    }
    else {
      iVar2 = (Vec3_8006ab88.y << 5) / (int)uVar4;
      iVar1 = 0;
    }
    if (Vec3_8006ab88.z - Vec3_8006ab88.x < 0) {
      if (Vec3_8006ab88.z + Vec3_8006ab88.x < 0) {
        iVar6 = (Vec3_8006ab88.x << 5) / Vec3_8006ab88.z;
        iVar5 = 0x80;
      }
      else {
        iVar6 = (Vec3_8006ab88.z << 5) / -Vec3_8006ab88.x;
        iVar5 = 0x40;
      }
    }
    else if (Vec3_8006ab88.z + Vec3_8006ab88.x < 0) {
      iVar6 = (Vec3_8006ab88.z << 5) / -Vec3_8006ab88.x;
      iVar5 = 0xc0;
    }
    else {
      iVar6 = (Vec3_8006ab88.x << 5) / Vec3_8006ab88.z;
      iVar5 = 0;
    }
    uVar4 = ((uint)-(iVar6 + iVar5) >> 2 & 0x3f) << 0x10 | 0x80000000 |
            ((uint)-(iVar2 + iVar1) >> 2 & 0x3f) << 0x16 | (uint)Vec3_8006ab70.z >> 2;
  }
  *(uint *)(param_1 + 0x1c) = uVar4;
  return;
}



void FUN_80041c50(undefined param_1)

{
  byte *pbVar1;
  char cVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  code *UNRECOVERED_JUMPTABLE;
  
  iVar6 = DAT_80066f18 + 0x2000;
  if (DAT_80066fd8 != iVar6) {
    cVar2 = *(char *)(DAT_80066fd8 + 1);
    *(undefined *)(DAT_80066fd8 + 1) = param_1;
    iVar5 = DAT_80066fd8 + 0x20;
    if (cVar2 == -1) {
      if (iVar5 != iVar6) {
        *(undefined *)(DAT_80066fd8 + 0x21) = 0xff;
      }
      DAT_80066fd8 = iVar5;
      return;
    }
    do {
      DAT_80066fd8 = iVar5;
      if (DAT_80066fd8 == iVar6) {
        return;
      }
      iVar5 = DAT_80066fd8 + 0x20;
    } while (-1 < *(char *)(DAT_80066fd8 + 1));
    return;
  }
  uVar3 = rand();
  iVar4 = iVar6 + ((uVar3 & 0xff) + 1) * -0x20;
  iVar5 = iVar4;
  while (pbVar1 = (byte *)(iVar5 + 1), iVar5 = iVar5 + 0x20, (*pbVar1 & 0x10) != 0) {
    if ((iVar5 == iVar6) &&
       ((iVar5 == iVar4 || (iVar5 = iVar6 + -0x2000, iVar6 = iVar4, iVar5 == iVar4)))) break;
  }
                    // WARNING: Could not recover jumptable at 0x80041cd0. Too many branches
                    // WARNING: Treating indirect jump as call
  *(undefined *)(iVar5 + -0x1f) = param_1;
  (*UNRECOVERED_JUMPTABLE)();
  return;
}



void FUN_80041d20(int param_1)

{
  bool bVar1;
  int iVar2;
  
  iVar2 = DAT_80066fd8;
  if ((param_1 + 0x20 != DAT_80066f18 + 0x2000) && (*(char *)(param_1 + 0x21) != -1)) {
    *(undefined *)(param_1 + 1) = 0xfe;
    if (-1 < iVar2 - param_1) {
      DAT_80066fd8 = param_1;
    }
    return;
  }
  iVar2 = param_1 + -0x20;
  if (param_1 != DAT_80066f18) {
    do {
      if (-1 < *(char *)(iVar2 + 1)) break;
      bVar1 = iVar2 != DAT_80066f18;
      iVar2 = iVar2 + -0x20;
    } while (bVar1);
  }
  if (-1 < DAT_80066fd8 - (iVar2 + 0x20)) {
    DAT_80066fd8 = iVar2 + 0x20;
  }
  *(undefined *)(iVar2 + 0x21) = 0xff;
  return;
}



void FUN_80041dbc(void)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  undefined *puVar4;
  uint uVar5;
  int iVar6;
  undefined4 uVar7;
  byte *pbVar8;
  ushort *puVar9;
  undefined4 uVar10;
  short *psVar11;
  short *psVar12;
  ushort *puVar13;
  undefined2 *puVar14;
  undefined uVar15;
  int iVar16;
  int iVar17;
  ushort *puVar18;
  uint uVar19;
  int iVar20;
  ushort *puVar21;
  int *piVar22;
  int *piVar23;
  uint uVar24;
  uint uVar25;
  int iVar26;
  int iVar27;
  byte *pbVar28;
  uint uVar29;
  short *psVar30;
  undefined4 uVar31;
  uint uVar32;
  uint uVar33;
  uint *puVar34;
  uint uVar35;
  uint uVar36;
  uint uVar37;
  uint *puVar38;
  undefined2 *puVar39;
  uint uVar40;
  uint uVar41;
  uint uVar42;
  int iVar43;
  int iVar44;
  uint uVar45;
  undefined4 unaff_s0;
  uint uVar46;
  int iVar47;
  int iVar48;
  int *piVar49;
  short sVar50;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 uVar51;
  int *piVar52;
  undefined4 unaff_s5;
  int *piVar53;
  undefined4 unaff_s6;
  int iVar54;
  int unaff_s7;
  int iVar55;
  AngleByte AVar56;
  undefined4 *puVar57;
  uint *puVar58;
  undefined4 *puVar59;
  undefined *puVar60;
  undefined *puVar61;
  undefined2 *puVar62;
  undefined2 *puVar63;
  undefined2 *puVar64;
  undefined2 *puVar65;
  undefined4 unaff_s8;
  undefined4 *puVar66;
  undefined4 *puVar67;
  undefined4 *puVar68;
  int *piVar69;
  uint *puVar70;
  undefined4 unaff_retaddr;
  undefined4 *puVar71;
  int iVar72;
  int iVar73;
  undefined auStackX_0 [16];
  
  uVar7 = Spyro._20_4_;
  iVar6 = DAT_80067034;
  iVar17 = DAT_80066f24;
  DAT_8006aa0c = &DAT_80066d38;
  gte_ldVXY1(DAT_80067034 + -0x3000);
  puVar58 = (uint *)(DAT_80067034 + -0x1c00);
  uVar5 = (uint)(byte)(&DAT_80062868)[Spyro.field11_0x1c];
  iVar16 = *(int *)((Spyro._20_4_ & 0xff) * 4 + DAT_80066f24);
  uVar19 = (uint)Spyro._20_4_ >> 0xc & 0xff0;
  iVar20 = uVar19 + (uVar19 >> 2) + iVar16;
  uVar24 = *(uint *)(iVar20 + 0x18);
  iVar26 = *(int *)(iVar16 + 0x10);
  bVar2 = *(byte *)(iVar16 + 2);
  uVar19 = *(uint *)(iVar20 + 0x14) & 0xffff;
  iVar54 = *(int *)(iVar20 + 0x1c);
  uVar32 = *(uint *)(iVar20 + 0x14) >> 4 & 0x1000 | 0x80000000 | uVar5 * 0x10 | (uint)bVar2 << 0x10;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  *(undefined4 *)(DAT_80067034 + -0x1bdc) = *(undefined4 *)(iVar16 + 4);
  *(uint *)(iVar6 + -0x1bd8) = (uVar24 >> 10 & 0x3ff) + uVar19 + iVar26;
  *(uint *)(iVar6 + -0x1bd4) = uVar19 + iVar26;
  if (uVar5 != 0) {
    iVar20 = *(int *)(((uint)uVar7 >> 6 & 0x3fc) + iVar17);
    uVar19 = (uint)uVar7 >> 0x14 & 0xff0;
    iVar26 = uVar19 + (uVar19 >> 2) + iVar20;
    uVar24 = *(uint *)(iVar26 + 0x18);
    iVar27 = *(int *)(iVar20 + 0x10);
    unaff_s7 = *(int *)(iVar26 + 0x1c);
    uVar32 = uVar32 | *(uint *)(iVar26 + 0x14) >> 3 & 0x2000;
    uVar19 = *(uint *)(iVar26 + 0x14) & 0xffff;
    *(undefined4 *)(iVar6 + -0x1bd0) = *(undefined4 *)(iVar20 + 4);
    *(uint *)(iVar6 + -0x1bcc) = (uVar24 >> 10 & 0x3ff) + uVar19 + iVar27;
    *(uint *)(iVar6 + -0x1bc8) = uVar19 + iVar27;
  }
  *puVar58 = uVar32;
  uVar7 = Spyro._24_4_;
  bVar3 = (&DAT_80062868)[Spyro.field12_0x1d];
  iVar20 = *(int *)((Spyro._24_4_ & 0xff) * 4 + iVar17);
  uVar19 = (uint)Spyro._24_4_ >> 0xc & 0xff0;
  iVar26 = uVar19 + (uVar19 >> 2) + iVar20;
  uVar19 = *(uint *)(iVar26 + 0x14);
  uVar32 = *(uint *)(iVar26 + 0x18);
  iVar26 = *(int *)(iVar20 + 0x10);
  uVar24 = uVar19 & 0xffff;
  uVar19 = uVar19 >> 5 & 0x1000 | (uint)bVar3 << 4 | (uint)*(byte *)(iVar20 + 3) << 0x10;
  iVar27 = (uint)bVar2 * 4;
  *(int *)(iVar6 + -0x1ba0) = *(int *)(iVar20 + 4) + iVar27;
  *(uint *)(iVar6 + -0x1b9c) = (uVar32 >> 0x14) + uVar24 + iVar26;
  *(uint *)(iVar6 + -0x1b98) = uVar24 + (uVar32 & 0x3ff) + iVar26;
  if (bVar3 != 0) {
    iVar17 = *(int *)(((uint)uVar7 >> 6 & 0x3fc) + iVar17);
    uVar24 = (uint)uVar7 >> 0x14 & 0xff0;
    iVar20 = uVar24 + (uVar24 >> 2) + iVar17;
    uVar24 = *(uint *)(iVar20 + 0x14);
    uVar32 = *(uint *)(iVar20 + 0x18);
    iVar20 = *(int *)(iVar17 + 0x10);
    uVar19 = uVar19 | uVar24 >> 4 & 0x2000;
    uVar24 = uVar24 & 0xffff;
    *(int *)(iVar6 + -0x1b94) = *(int *)(iVar17 + 4) + iVar27;
    *(uint *)(iVar6 + -0x1b90) = (uVar32 >> 0x14) + uVar24 + iVar20;
    *(uint *)(iVar6 + -0x1b8c) = uVar24 + (uVar32 & 0x3ff) + iVar20;
  }
  *(uint *)(iVar6 + -0x1bc4) = uVar19;
  iVar17 = iVar54 >> 0x15;
  iVar20 = (iVar54 << 0xb) >> 0x15;
  iVar26 = (iVar54 << 0x16) >> 0x15;
  if (uVar5 != 0) {
    gte_ldIR0(uVar5 * 0x10);
    gte_ldsv_(iVar17,iVar20,iVar26);
    gte_ldfcdir(unaff_s7 >> 0x15,(unaff_s7 << 0xb) >> 0x15,(unaff_s7 << 0x16) >> 0x15);
    gte_intpl();
    read_mt(iVar17,iVar20,iVar26);
  }
  *(undefined4 *)(iVar6 + -0x1b88) = 0;
  *(undefined4 *)(iVar6 + -0x1b84) = 0;
  *(undefined4 *)(iVar6 + -0x1b80) = 0;
  *(int *)(iVar6 + -0x1b78) = iVar17;
  *(int *)(iVar6 + -0x1b74) = iVar20;
  *(int *)(iVar6 + -0x1b70) = iVar26;
  iVar6 = Spyro.position.x - cameraPosition.x;
  iVar54 = cameraPosition.y - Spyro.position.y;
  iVar27 = cameraPosition.z - Spyro.position.z;
  gte_ldR11R12(Mat33_80067e84.R12R11);
  gte_ldR13R21(Mat33_80067e84.R21R13);
  gte_ldR22R23(Mat33_80067e84.R23R22);
  gte_ldR31R32(Mat33_80067e84.R32R31);
  gte_ldR33(Mat33_80067e84.R33);
  gte_ldtr(0,0,0);
  gte_ldIR3(iVar6);
  gte_ldIR1(iVar54);
  gte_ldIR2(iVar27);
  gte_rtir_b();
  if (-1 < (int)(iVar6 + 0x4000U ^ iVar6 - 0x4000U)) {
    return;
  }
  if (-1 < (int)(iVar54 + 0x4000U ^ iVar54 - 0x4000U)) {
    return;
  }
  iVar6 = gte_stMAC3();
  uVar10 = gte_stMAC2();
  uVar7 = gte_stMAC1();
  if (-1 < (int)(iVar27 + 0x4000U ^ iVar27 - 0x4000U)) {
    return;
  }
  if (iVar6 + 0x400 < 1) {
    return;
  }
  iVar54 = (iVar6 >> 7) - (int)(char)Spyro.field13_0x1e;
  if (iVar54 < 0) {
    iVar54 = 0;
  }
  gte_ldRBK(iVar54);
  gte_ldGBK(iVar6 + -0x800);
  iVar54 = gte_stVXY1();
  iVar27 = iVar54 + 0x1400;
  gte_ldtr(uVar7,uVar10,iVar6);
  *(undefined4 *)(iVar54 + 0x1404) = uVar7;
  *(undefined4 *)(iVar54 + 0x1408) = uVar10;
  *(int *)(iVar54 + 0x140c) = iVar6;
  iVar6 = Spyro.field18_0x2c;
  BuildRotationMatrix(0x80069ffc,iVar54 + 0x1410,&Mat33_80067e84);
  if (scaleSpyroBody != false) {
    ScaleMatrix((MATRIX *)(iVar27 + 0x10),(VECTOR *)&spyroScale);
  }
  if (iVar6 != 0) {
    uVar5 = *(uint *)(iVar27 + 0x10) & 0xffff;
    uVar5 = -(*(uint *)(iVar27 + 0x10) ^ uVar5) | uVar5;
    uVar19 = *(uint *)(iVar27 + 0x18) & 0xffff;
    uVar19 = *(uint *)(iVar27 + 0x18) ^ uVar19 | -uVar19 & 0xffff;
    uVar24 = *(uint *)(iVar27 + 0x1c) & 0xffff;
    uVar24 = -(*(uint *)(iVar27 + 0x1c) ^ uVar24) | uVar24;
    *(uint *)(iVar27 + 0x10) = uVar5;
    *(uint *)(iVar27 + 0x18) = uVar19;
    *(uint *)(iVar27 + 0x1c) = uVar24;
    gte_ldR11R12(uVar5);
    gte_ldR22R23(uVar19);
    gte_ldR31R32(uVar24);
  }
  gte_ldVXY0(iVar26 * -0x10000 - iVar20);
  gte_ldVZ0(iVar17);
  gte_rtps_b();
  AVar56.pitch = 0;
  AVar56.roll = 0;
  AVar56.yaw = 0;
  AVar56.pad = 0;
  if (iVar6 == 0) {
    AVar56 = Spyro.anotherByteAngle;
  }
  uVar7 = gte_stIR1();
  uVar10 = gte_stIR2();
  uVar51 = gte_stIR3();
  *(undefined4 *)(iVar27 + 0x40) = uVar7;
  *(undefined4 *)(iVar27 + 0x44) = uVar10;
  *(undefined4 *)(iVar27 + 0x48) = uVar51;
  if (AVar56 != (AngleByte)0x0) {
    BuildRotationMatrix(0x8006a000,iVar27 + 0x4c,(Mat33 *)(iVar27 + 0x10));
    if (scaleSpyroHead != false) {
      ScaleMatrix((MATRIX *)(iVar27 + 0x4c),(VECTOR *)&spyroScale);
    }
    *(undefined *)(iVar27 + 0x3f) = 0x80;
  }
  if (DAT_8006aab6 != '\0') {
    iVar17 = iVar27 + 0x4c;
    if ((int)AVar56 < 1) {
      iVar17 = iVar27 + 0x10;
    }
    MemCopy(&DAT_8006aacc,iVar17,0x14);
  }
  iVar17 = Spyro.field17_0x28;
  iVar6 = gte_stVXY1();
  puVar58 = (uint *)(iVar6 + 0x1400);
  uVar5 = *puVar58;
  puVar66 = (undefined4 *)&DAT_1f800000;
  puVar62 = (undefined2 *)(iVar6 + 0xc00);
  do {
    gte_ldtr(puVar58[1],puVar58[2],puVar58[3]);
    if ((int)uVar5 < 0) {
      gte_ldR11R12(puVar58[4]);
      gte_ldR13R21(puVar58[5]);
      gte_ldR22R23(puVar58[6]);
      gte_ldR31R32(puVar58[7]);
      gte_ldR33(puVar58[8]);
    }
    puVar71 = (undefined4 *)((uVar5 >> 0xe & 0x3fc) + 0x1f7ffffc);
    piVar52 = (int *)puVar58[9];
    pbVar8 = (byte *)puVar58[10];
    psVar11 = (short *)puVar58[0xb];
    iVar26 = 0;
    uVar19 = 0;
    iVar6 = 0;
    uVar32 = uVar5 & 0xfff;
    uVar24 = uVar5 & 0x1000;
    iVar20 = *piVar52;
    puVar14 = puVar62;
    puVar57 = puVar66 + 1;
    if (uVar32 == 0) {
LAB_800423cc:
      do {
        puVar67 = puVar66;
        puVar63 = puVar14;
        piVar52 = piVar52 + 1;
        if (uVar24 != 0) goto LAB_8004245c;
        gte_rtps_b();
        bVar2 = *pbVar8;
        pbVar8 = pbVar8 + 1;
        uVar24 = bVar2 & 1;
        uVar7 = gte_stSXY2();
        uVar10 = gte_stSZ3();
        iVar54 = *(int *)(&DAT_80062674 + (bVar2 & 0xfe) * 2) + iVar20;
        iVar20 = *piVar52;
        iVar26 = iVar26 + (iVar54 >> 0x15);
        uVar19 = uVar19 - (iVar54 * 0x800 >> 0x15);
        iVar6 = iVar6 - (iVar54 * 0x400000 >> 0x15);
        iVar54 = iVar6 * 0x10000 + uVar19;
        gte_ldVXY0(iVar54);
        gte_ldVZ0(iVar26);
        *puVar63 = (short)uVar10;
        if (iVar17 != 0) {
          puVar63[3] = (short)iVar26;
          *(int *)(puVar63 + 0x202) = iVar54;
        }
        *puVar67 = uVar7;
        puVar14 = puVar63 + 2;
        puVar66 = puVar67 + 1;
      } while (puVar67 + 1 != puVar57);
      goto LAB_80042564;
    }
    piVar53 = (int *)puVar58[0xc];
    pbVar28 = (byte *)puVar58[0xd];
    psVar30 = (short *)puVar58[0xe];
    iVar54 = 0;
    uVar36 = 0;
    iVar27 = 0;
    uVar5 = uVar5 & 0x2000;
    iVar55 = *piVar53;
LAB_8004258c:
    do {
      puVar67 = puVar66;
      puVar64 = puVar14;
      piVar52 = piVar52 + 1;
      if (uVar24 == 0) {
        gte_rtps_b();
        bVar2 = *pbVar8;
        pbVar8 = pbVar8 + 1;
        uVar24 = bVar2 & 1;
        gte_ldIR0(uVar32);
        iVar20 = *(int *)(&DAT_80062674 + (bVar2 & 0xfe) * 2) + iVar20;
        iVar26 = iVar26 + (iVar20 >> 0x15);
        iVar44 = iVar20 * 0x800 >> 0x15;
        psVar12 = psVar11;
        if (uVar5 == 0) {
          uVar42 = (uint)*pbVar28;
          uVar19 = uVar19 - iVar44;
          iVar6 = iVar6 - (iVar20 * 0x400000 >> 0x15);
          goto LAB_80042610;
        }
        uVar42 = (uint)*psVar30;
        uVar19 = uVar19 - iVar44;
        iVar6 = iVar6 - (iVar20 * 0x400000 >> 0x15);
LAB_800426f4:
        gte_ldsv_(iVar26,uVar19,iVar6);
        uVar5 = uVar42 & 1;
        if ((uVar42 & 2) == 0) {
          iVar20 = *piVar52;
          uVar46 = (iVar55 << 0xb) >> 0x15;
          iVar54 = iVar54 + (iVar55 >> 0x15) + ((int)uVar42 >> 9);
          uVar36 = (uVar36 - uVar46) - ((int)(uVar42 << 0x15) >> 0x19);
          iVar43 = (int)(uVar42 << 0x1a) >> 0x1b;
          iVar44 = iVar43 * 4;
          iVar27 = (iVar27 - ((iVar55 << 0x16) >> 0x15)) + iVar43 * -4;
          psVar30 = psVar30 + 1;
        }
        else {
          iVar44 = (int)psVar30[1];
          psVar30 = psVar30 + 2;
          iVar27 = (int)(uVar42 << 0x14) >> 0x15;
          uVar42 = uVar42 & 0xf000;
          uVar46 = uVar42 >> 0xb;
          iVar20 = *piVar52;
          uVar36 = (iVar44 << 0x1a) >> 0x15 | uVar46;
          iVar54 = iVar44 >> 5;
        }
      }
      else {
        gte_rtps_b();
        uVar46 = (uint)*psVar11;
        psVar12 = psVar11 + 1;
        uVar24 = uVar46 & 1;
        if ((uVar46 & 2) != 0) {
          sVar50 = *psVar12;
          psVar12 = psVar11 + 2;
          iVar6 = (int)(uVar46 << 0x14) >> 0x15;
          uVar46 = (uVar46 & 0xf000) >> 0xb;
          gte_ldIR0(uVar32);
          uVar19 = ((int)sVar50 << 0x1a) >> 0x15;
          iVar26 = (int)sVar50 >> 5;
          if (uVar5 == 0) {
            uVar42 = (uint)*pbVar28;
            uVar19 = uVar19 | uVar46;
            goto LAB_80042610;
          }
          uVar42 = (uint)*psVar30;
          uVar19 = uVar19 | uVar46;
          goto LAB_800426f4;
        }
        iVar44 = uVar19 - ((iVar20 << 0xb) >> 0x15);
        iVar6 = iVar6 - ((iVar20 << 0x16) >> 0x15);
        iVar26 = iVar26 + (iVar20 >> 0x15) + ((int)uVar46 >> 9);
        iVar20 = (int)(uVar46 << 0x15) >> 0x19;
        gte_ldIR0(uVar32);
        iVar43 = (int)(uVar46 << 0x1a) >> 0x1b;
        if (uVar5 != 0) {
          uVar42 = (uint)*psVar30;
          uVar19 = iVar44 - iVar20;
          iVar6 = iVar6 + iVar43 * -4;
          goto LAB_800426f4;
        }
        uVar42 = (uint)*pbVar28;
        uVar19 = iVar44 - iVar20;
        iVar6 = iVar6 + iVar43 * -4;
LAB_80042610:
        pbVar28 = pbVar28 + 1;
        uVar5 = uVar42 & 1;
        gte_ldsv_(iVar26,uVar19,iVar6);
        iVar20 = *piVar52;
        iVar44 = *(int *)(&DAT_80062674 + (uVar42 & 0xfe) * 2) + iVar55;
        iVar54 = iVar54 + (iVar44 >> 0x15);
        uVar36 = uVar36 - (iVar44 * 0x800 >> 0x15);
        uVar46 = iVar44 * 0x400000 >> 0x15;
        iVar27 = iVar27 - uVar46;
      }
      puVar68 = puVar67 + 1;
      puVar65 = puVar64 + 2;
      gte_ldfcdir(iVar54,uVar36,iVar27);
      uVar7 = gte_stSXY2();
      uVar10 = gte_stSZ3();
      gte_intpl_b();
      iVar55 = piVar53[1];
      *puVar64 = (short)uVar10;
      piVar53 = piVar53 + 1;
      read_mt(uVar42,iVar44,uVar46);
      gte_ldVZ0(uVar42);
      iVar44 = iVar44 + uVar46 * 0x10000;
      if (iVar17 != 0) {
        puVar64[3] = (short)uVar42;
        *(int *)(puVar64 + 0x202) = iVar44;
      }
      gte_ldVXY0(iVar44);
      *puVar67 = uVar7;
      psVar11 = psVar12;
      puVar14 = puVar64 + 2;
      puVar66 = puVar68;
    } while (puVar68 != puVar57);
    if (puVar71 != puVar57) {
      puVar14 = puVar64;
      puVar66 = puVar67;
      puVar57 = puVar71;
      if (iVar17 != 0) {
        puVar64[1] = puVar64[3];
        *(undefined4 *)(puVar64 + 0x200) = *(undefined4 *)(puVar64 + 0x202);
      }
      goto LAB_8004258c;
    }
LAB_80042860:
    gte_rtps_b();
    puVar62 = puVar65 + 2;
    puVar66 = puVar68 + 1;
    puVar58 = puVar58 + 0xf;
    uVar5 = *puVar58;
    uVar7 = gte_stSXY2();
    uVar10 = gte_stSZ3();
    *puVar68 = uVar7;
    *puVar65 = (short)uVar10;
  } while (uVar5 != 0);
  puVar59 = *(undefined4 **)(iVar16 + 0xc);
  puVar66 = puVar59;
  if ((uint)Spyro.color >> 0x18 != 0) {
    bVar2 = *(byte *)(iVar16 + 1);
    iVar6 = gte_stVXY1();
    puVar66 = (undefined4 *)(iVar6 + 0x1800);
    gte_ldIR0(((uint)Spyro.color >> 0x18) << 4);
    gte_ldRFC(((uint)Spyro.color & 0xff) << 4);
    gte_ldGFC((uint)Spyro.color >> 4 & 0xff0);
    gte_ldBFC((uint)Spyro.color >> 0xc & 0xff0);
    gte_ldRGB(*puVar59);
    puVar57 = puVar66;
    puVar71 = puVar59;
    do {
      gte_dpcs_b();
      puVar60 = (undefined *)((int)puVar71 + 8);
      uVar7 = gte_stRGB2();
      gte_ldRGB(*(undefined4 *)((int)puVar71 + 4));
      *puVar57 = uVar7;
      puVar57 = puVar57 + 1;
      puVar71 = (undefined4 *)((int)puVar71 + 4);
    } while ((undefined4 *)puVar60 != puVar59 + bVar2 + 1);
  }
  iVar6 = 0;
  if (iVar17 != 0) {
    iVar20 = Spyro.position.z - iVar17;
    if (iVar17 < 1) {
      iVar20 = iVar20 + iVar17 * 2;
      uVar7 = 0x300;
      if (cameraPosition.z + iVar17 < 1) {
        uVar7 = 0xfffffd00;
        iVar6 = -0x1800;
      }
      gte_ldL33(uVar7);
      gte_ldLR1LR2(DAT_80067408);
      gte_ldLR3LG1(DAT_8006740c);
      gte_ldLG2LG3(DAT_80067410);
    }
    gte_ldR11R12(Spyro.groundedGlidingMovementMatrix.R12R11);
    gte_ldR13R21(Spyro.groundedGlidingMovementMatrix.R21R13);
    gte_ldR22R23(Spyro.groundedGlidingMovementMatrix.R23R22);
    gte_ldR31R32(Spyro.groundedGlidingMovementMatrix.R32R31);
    gte_ldR33(Spyro.groundedGlidingMovementMatrix.R33);
    iVar54 = gte_stVXY1();
    puVar61 = (undefined *)(iVar54 + 0xc00);
    iVar26 = 0;
    do {
      bVar2 = *(byte *)(iVar26 + iVar16 + 2);
      iVar55 = iVar26 * 0x10 + 0x1400 + iVar54;
      uVar7 = *(undefined4 *)(iVar55 + 0x78);
      iVar27 = -*(int *)(iVar55 + 0x80);
      iVar55 = -*(int *)(iVar55 + 0x7c);
      gte_ldIR3(uVar7);
      gte_ldIR2(iVar27);
      gte_ldIR1(iVar55);
      gte_rtir_b();
      read_mt(iVar55,iVar27,uVar7);
      gte_ldtr(iVar55,iVar27,uVar7);
      gte_ldVZ0((int)*(short *)(puVar61 + 2));
      gte_ldVXY0(*(undefined4 *)(puVar61 + 0x400));
      puVar4 = puVar61 + 4;
      do {
        puVar61 = puVar4;
        copFunction(2,0x480012);
        iVar27 = gte_stMAC2();
        gte_ldVZ0((int)*(short *)(puVar61 + 2));
        gte_ldVXY0(*(undefined4 *)(puVar61 + 0x400));
        *(int *)(puVar61 + 0x3fc) = iVar20 - iVar27;
        puVar4 = puVar61 + 4;
      } while (puVar61 != (undefined *)(iVar54 + 0xc00 + (uint)bVar2 * 4));
      bVar1 = iVar26 == 0;
      iVar26 = iVar26 + 1;
    } while (bVar1);
  }
  iVar27 = gte_stVXY1();
  iVar26 = gte_stGBK();
  iVar54 = iVar26 * 4;
  iVar20 = 0;
  if (iVar54 < 1) {
    iVar20 = ((uint)(iVar26 * -4) >> 6) << 3;
    iVar54 = 1;
  }
  iVar54 = iVar54 + iVar6;
  piVar53 = (int *)(iVar27 + iVar20);
  piVar52 = piVar53 + 0x300;
  piVar69 = *(int **)(iVar16 + 8);
  if (Spyro.field18_0x2c != 0) {
    puVar66 = (undefined4 *)((uint)puVar66 & 0x7fffffff);
  }
  uVar5 = piVar69[1];
  iVar6 = *piVar69;
  piVar23 = piVar53;
  puVar57 = (undefined4 *)primitiveBuffer_next;
  puVar58 = (uint *)(piVar69 + 1);
LAB_80042ad0:
  puVar70 = puVar58;
  piVar49 = DAT_80066ffc;
  if (puVar70 == (uint *)(iVar6 + (int)(piVar69 + 1))) {
    iVar17 = gte_stRBK();
    if ((int)piVar23 - (int)piVar52 < 0) {
      return;
    }
    iVar6 = gte_stVXY1();
    iVar17 = iVar17 * 8 + ((iVar6 + 0x400) - (int)piVar23 >> 6) * -8 + -8;
    if (iVar17 < 0) {
      iVar17 = 0;
    }
    piVar52 = piVar52 + -2;
    piVar53 = (int *)(iVar17 + (int)DAT_80066ffc);
    do {
      piVar69 = piVar53;
      puVar14 = (undefined2 *)*piVar69;
      piVar53 = piVar23 + -0x10;
      if (0 < (int)piVar52 - (int)(piVar23 + -0x10)) {
        piVar53 = piVar52;
      }
      if (puVar14 == (undefined2 *)0x0) {
        do {
          piVar22 = piVar23;
          piVar23 = piVar22;
          puVar39 = puVar14;
          if (piVar22 == piVar53) goto LAB_800437f4;
          piVar23 = piVar22 + -2;
        } while (piVar22[1] == 0);
        puVar14 = (undefined2 *)*piVar22;
        piVar69[1] = piVar22[1];
        piVar22[1] = 0;
        *piVar22 = 0;
      }
      do {
        do {
          piVar22 = piVar23;
          iVar17 = piVar22[1];
          piVar23 = piVar22;
          puVar39 = puVar14;
          if (piVar22 == piVar53) goto LAB_800437f4;
          piVar23 = piVar22 + -2;
        } while (iVar17 == 0);
        puVar39 = (undefined2 *)*piVar22;
        *puVar14 = (short)iVar17;
        *(char *)(puVar14 + 1) = (char)((uint)iVar17 >> 0x10);
        *piVar22 = 0;
        piVar22[1] = 0;
        puVar14 = puVar39;
      } while (piVar23 != piVar53);
LAB_800437f4:
      *piVar69 = (int)puVar39;
      if (piVar53 == piVar52) {
        primitiveBuffer_next = (undefined *)puVar57;
                    // WARNING: Read-only address (ram,0x80067408) is written
                    // WARNING: Read-only address (ram,0x8006740c) is written
                    // WARNING: Read-only address (ram,0x80067410) is written
                    // WARNING: Read-only address (ram,0x80067e84) is written
                    // WARNING: Read-only address (ram,0x80067e88) is written
                    // WARNING: Read-only address (ram,0x80067e8c) is written
                    // WARNING: Read-only address (ram,0x80067e90) is written
                    // WARNING: Read-only address (ram,0x80067e94) is written
        return;
      }
      piVar53 = piVar69 + -2;
      if (piVar69 == piVar49) {
        piVar53 = piVar69;
      }
    } while( true );
  }
  uVar46 = puVar70[1];
  uVar19 = uVar5 >> 0x16 & 0x3fc;
  uVar24 = uVar5 >> 0xe & 0x3fc;
  uVar32 = uVar5 >> 6 & 0x3fc;
  uVar36 = (uVar5 & 0xff) * 4;
  uVar15 = (undefined)((uint)puVar57 >> 0x10);
  if (uVar32 == uVar36) {
    uVar7 = *(undefined4 *)(uVar19 + 0x1f800000);
    uVar10 = *(undefined4 *)(uVar24 + 0x1f800000);
    uVar51 = *(undefined4 *)(uVar32 + 0x1f800000);
    gte_ldSXY0(uVar7);
    gte_ldSXY1(uVar10);
    gte_ldSXY2(uVar51);
    puVar57[2] = uVar7;
    puVar57[5] = uVar10;
    gte_nclip_b();
    puVar57[8] = uVar51;
    bVar1 = false;
    if ((int)uVar46 < 0) {
      uVar5 = puVar70[5];
    }
    else {
      iVar16 = gte_stMAC0();
      uVar5 = puVar70[5];
      if (-1 < (int)puVar66) {
        iVar16 = -iVar16;
      }
      puVar58 = puVar70 + 5;
      if (iVar16 < 1) goto LAB_80042ad0;
    }
    uVar42 = uVar46 >> 8 & 0x1fc;
    puVar34 = (uint *)((uVar46 >> 0x16 & 0x1fc) + (int)puVar66);
    puVar38 = (uint *)((uVar46 >> 0xf & 0x1fc) + (int)puVar66);
  }
  else {
    uVar7 = *(undefined4 *)(uVar19 + 0x1f800000);
    uVar10 = *(undefined4 *)(uVar24 + 0x1f800000);
    uVar51 = *(undefined4 *)(uVar32 + 0x1f800000);
    gte_ldSXY0(uVar7);
    gte_ldSXY1(uVar10);
    gte_ldSXY2(uVar51);
    uVar31 = *(undefined4 *)(uVar36 + 0x1f800000);
    gte_nclip_b();
    puVar57[2] = uVar7;
    puVar57[5] = uVar10;
    puVar57[8] = uVar51;
    puVar57[0xb] = uVar31;
    uVar33 = uVar46 >> 0x16 & 0x1fc;
    if ((int)uVar46 < 0) {
      uVar5 = puVar70[5];
      uVar42 = uVar46 >> 8 & 0x1fc;
      uVar40 = uVar46 >> 1 & 0x1fc;
      puVar38 = (uint *)((uVar46 >> 0xf & 0x1fc) + (int)puVar66);
LAB_80042bec:
      puVar58 = puVar70 + 5;
      uVar33 = *(uint *)(uVar33 + (int)puVar66);
      puVar34 = (uint *)(uVar42 + (int)puVar66);
      puVar71 = (undefined4 *)(uVar40 + (int)puVar66);
      puVar9 = (ushort *)(uVar19 + iVar27 + 0xc00);
      puVar13 = (ushort *)(uVar24 + iVar27 + 0xc00);
      puVar18 = (ushort *)(uVar32 + iVar27 + 0xc00);
      uVar19 = *puVar38;
      puVar21 = (ushort *)(uVar36 + iVar27 + 0xc00);
      iVar16 = uVar33 + 0x3c000000;
      if (iVar17 == 0) {
LAB_80042c3c:
        uVar32 = *puVar34;
        uVar7 = *puVar71;
        uVar24 = (uint)*puVar9;
LAB_80042c48:
        uVar36 = puVar70[2];
        uVar42 = puVar70[3];
        uVar24 = ((uVar24 + *puVar13 + (uint)*puVar18 + (uint)*puVar21) -
                 ((int)(uVar46 << 0x1d) >> 0x16)) - iVar54;
        if (0 < (int)uVar24) {
          piVar49 = piVar53 + (uVar24 >> 6) * 2;
          puVar14 = (undefined2 *)*piVar49;
          uVar24 = puVar70[4];
          puVar57[4] = uVar19;
          puVar57[7] = uVar32;
          puVar57[10] = uVar7;
          *puVar57 = 0xc000000;
          puVar57[1] = iVar16 + ((int)uVar42 >> 0x1f) * -0x2000000;
          puVar57[3] = uVar36;
          puVar57[6] = uVar42;
          puVar57[9] = uVar24;
          puVar57[0xc] = uVar24 >> 0x10;
          *piVar49 = (int)puVar57;
          if (puVar14 == (undefined2 *)0x0) {
            if (0 < (int)piVar52 - (int)piVar49) {
              piVar52 = piVar49;
            }
            piVar49[1] = (int)puVar57;
            if ((int)piVar23 - (int)piVar49 < 0) {
              piVar23 = piVar49;
            }
            puVar57 = puVar57 + 0xd;
          }
          else {
            *puVar14 = (short)puVar57;
            *(undefined *)(puVar14 + 1) = uVar15;
            puVar57 = puVar57 + 0xd;
          }
        }
      }
      else {
        uVar32 = *(uint *)(puVar9 + 0x200);
        uVar24 = *(uint *)(puVar13 + 0x200);
        uVar36 = *(uint *)(puVar18 + 0x200);
        uVar42 = *(uint *)(puVar21 + 0x200);
        if (-1 < (int)(uVar32 | uVar24 | uVar36 | uVar42)) goto LAB_80042c3c;
        if ((int)(uVar32 & uVar24 & uVar36 & uVar42) < 0) {
          if (iVar17 < 1) {
            gte_ldIR0(0x800);
            uVar7 = gte_stLR1LR2();
            uVar10 = gte_stLR3LG1();
            uVar51 = gte_stLG2LG3();
            gte_ldfcdir(uVar7,uVar10,uVar51);
            gte_ldRGB(iVar16);
            gte_dpcs();
            iVar16 = gte_stRGB2();
            gte_ldRGB(uVar19);
            gte_dpcs();
            uVar19 = gte_stRGB2();
            gte_ldRGB(*puVar34);
            gte_dpcs();
            uVar32 = gte_stRGB2();
            gte_ldRGB(*puVar71);
            iVar20 = gte_stL33();
            gte_dpcs_b();
            uVar7 = gte_stRGB2();
            uVar24 = (uint)*puVar9 + iVar20 * 8;
            goto LAB_80042c48;
          }
        }
        else {
          uVar46 = (((uint)*puVar9 + (uint)*puVar13 + (uint)*puVar18 + (uint)*puVar21) -
                   ((int)(uVar46 << 0x1d) >> 0x16)) - iVar54;
          if (0 < (int)uVar46) {
            gte_ldLB1LB2((uVar46 >> 6) << 3);
            gte_ldLB3(1);
            iVar55 = gte_stVXY1();
            iVar20 = puVar57[2];
            iVar16 = puVar57[5];
            iVar26 = puVar57[8];
            uVar7 = puVar57[0xb];
            *(int *)(iVar55 + 0x1404) = iVar16;
            *(int *)(iVar55 + 0x1408) = iVar26;
            *(undefined4 *)(iVar55 + 0x1400) = uVar7;
            *(uint *)(iVar55 + 0x140c) = uVar42;
            *(uint *)(iVar55 + 0x1410) = uVar24;
            *(uint *)(iVar55 + 0x1414) = uVar36;
            uVar5 = puVar70[2];
            uVar46 = puVar70[3];
            uVar42 = puVar70[4];
            iVar44 = (uVar5 & 0xffff0000) + (uVar46 >> 0x10);
            *(uint *)(iVar55 + 0x1418) = uVar42 >> 0x10;
            uVar5 = uVar5 & 0xffff;
            uVar46 = uVar46 & 0xffff;
            uVar42 = uVar42 & 0xffff;
            *(uint *)(iVar55 + 0x141c) = uVar46;
            *(uint *)(iVar55 + 0x1420) = uVar42;
            uVar33 = uVar33 & 0xffffff;
            uVar40 = *puVar34;
            uVar7 = *puVar71;
            *(uint *)(iVar55 + 0x1428) = uVar19;
            *(uint *)(iVar55 + 0x142c) = uVar40;
            *(undefined4 *)(iVar55 + 0x1424) = uVar7;
            goto LAB_80043044;
          }
        }
      }
      goto LAB_80042ad0;
    }
    iVar16 = gte_stMAC0();
    if ((int)puVar66 < 0) {
      gte_ldSXY0(uVar31);
    }
    else {
      gte_ldSXY2(uVar10);
      gte_ldSXY1(uVar51);
      gte_ldSXY0(uVar31);
      iVar16 = -iVar16;
    }
    uVar37 = uVar46 >> 0xf & 0x1fc;
    gte_nclip_b();
    uVar5 = puVar70[5];
    uVar42 = uVar46 >> 8 & 0x1fc;
    uVar40 = uVar46 >> 1 & 0x1fc;
    iVar20 = gte_stMAC0();
    puVar34 = (uint *)(uVar33 + (int)puVar66);
    if (iVar16 < 0) {
      puVar38 = (uint *)(uVar37 + (int)puVar66);
      if (0 < iVar20) goto LAB_80042bec;
      bVar1 = false;
      goto LAB_80042d80;
    }
    puVar38 = (uint *)(uVar37 + (int)puVar66);
    puVar58 = puVar70 + 5;
    if (iVar20 < 1) goto LAB_80042ad0;
    puVar57[2] = uVar31;
    puVar34 = (uint *)(uVar40 + (int)puVar66);
    bVar1 = true;
    uVar19 = uVar36;
  }
LAB_80042d80:
  puVar58 = puVar70 + 5;
  uVar33 = *puVar34;
  puVar34 = (uint *)(uVar42 + (int)puVar66);
  puVar9 = (ushort *)(uVar19 + iVar27 + 0xc00);
  puVar13 = (ushort *)(uVar24 + iVar27 + 0xc00);
  puVar18 = (ushort *)(uVar32 + iVar27 + 0xc00);
  if (iVar17 == 0) {
LAB_80042db8:
    uVar19 = puVar70[2];
    iVar16 = (uint)*puVar9 + (uint)*puVar13 * 2 + (uint)*puVar18;
    uVar24 = *puVar38;
    uVar32 = *puVar34;
  }
  else {
    uVar32 = *(uint *)(puVar9 + 0x200);
    uVar24 = *(uint *)(puVar13 + 0x200);
    uVar36 = *(uint *)(puVar18 + 0x200);
    if (-1 < (int)(uVar32 | uVar24 | uVar36)) goto LAB_80042db8;
    if (-1 < (int)(uVar32 & uVar24 & uVar36)) {
      uVar19 = (((uint)*puVar9 + (uint)*puVar13 * 2 + (uint)*puVar18) -
               ((int)(uVar46 << 0x1d) >> 0x16)) - iVar54;
      if (0 < (int)uVar19) {
        gte_ldLB1LB2((uVar19 >> 6) << 3);
        gte_ldLB3(0);
        iVar20 = puVar57[2];
        iVar16 = puVar57[5];
        iVar26 = puVar57[8];
        uVar5 = puVar70[2];
        if (bVar1) {
          uVar5 = puVar70[4] >> 0x10;
        }
        iVar44 = (puVar70[2] & 0xffff0000) + (puVar70[3] >> 0x10);
        uVar5 = uVar5 & 0xffff;
        uVar46 = puVar70[3] & 0xffff;
        uVar42 = puVar70[4] & 0xffff;
        uVar33 = uVar33 & 0xffffff;
        uVar19 = *puVar38;
        uVar40 = *puVar34;
LAB_800431b4:
        iVar55 = iVar20;
        iVar43 = iVar26;
        uVar37 = uVar5;
        uVar25 = uVar42;
        uVar29 = uVar33;
        uVar35 = uVar40;
        uVar41 = uVar32;
        uVar45 = uVar36;
        if (((int)(uVar24 ^ uVar36) < 0) &&
           (iVar55 = iVar26, iVar43 = iVar20, uVar37 = uVar42, uVar25 = uVar5, uVar29 = uVar40,
           uVar35 = uVar33, uVar41 = uVar36, uVar45 = uVar32, (int)(uVar32 ^ uVar24) < 0)) {
          iVar55 = iVar16;
          iVar16 = iVar20;
          iVar43 = iVar26;
          uVar37 = uVar46;
          uVar46 = uVar5;
          uVar25 = uVar42;
          uVar29 = uVar19;
          uVar19 = uVar33;
          uVar35 = uVar40;
          uVar41 = uVar24;
          uVar24 = uVar32;
          uVar45 = uVar36;
        }
        iVar20 = iVar55 >> 0x10;
        sVar50 = (short)iVar55;
        if ((int)uVar41 < 0) {
          gte_ldBBK(uVar41 >> 0x1f);
          iVar72 = (int)(uVar24 << 0xc) / (int)(uVar24 - uVar41);
          iVar73 = (int)(uVar45 << 0xc) / (int)(uVar45 - uVar41);
          gte_ldIR0(iVar72);
          gte_ldRFC(iVar20);
          gte_ldGFC((int)sVar50);
          gte_ldIR1(iVar16 >> 0x10);
          gte_ldIR2((int)(short)iVar16);
          gte_intpl();
          iVar26 = gte_stMAC1();
          iVar47 = gte_stMAC2();
          iVar47 = iVar26 * 0x10000 + iVar47;
          gte_ldRFC(uVar37 & 0xff);
          gte_ldGFC(uVar37 >> 8 & 0xff);
          gte_ldIR1(uVar46 & 0xff);
          gte_ldIR2(uVar46 >> 8 & 0xff);
          gte_intpl();
          iVar26 = gte_stMAC2();
          iVar48 = gte_stMAC1();
          uVar5 = iVar26 * 0x100 + iVar48;
          gte_ldIR0(iVar73);
          gte_ldRFC(iVar20);
          gte_ldGFC((int)sVar50);
          gte_ldIR1(iVar43 >> 0x10);
          gte_ldIR2((int)(short)iVar43);
          gte_intpl();
          iVar20 = gte_stMAC1();
          iVar26 = gte_stMAC2();
          iVar26 = iVar20 * 0x10000 + iVar26;
          gte_ldRFC(uVar37 & 0xff);
          gte_ldGFC(uVar37 >> 8 & 0xff);
          gte_ldIR1(uVar25 & 0xff);
          gte_ldIR2(uVar25 >> 8 & 0xff);
          gte_intpl();
          iVar20 = gte_stMAC2();
          iVar48 = gte_stMAC1();
          uVar42 = iVar20 * 0x100 + iVar48;
        }
        else {
          gte_ldBBK(uVar41 >> 0x1f);
          iVar72 = (int)(uVar41 << 0xc) / (int)(uVar41 - uVar24);
          iVar73 = (int)(uVar41 << 0xc) / (int)(uVar41 - uVar45);
          gte_ldIR0(iVar72);
          gte_ldIR1(iVar20);
          gte_ldIR2((int)sVar50);
          gte_ldRFC(iVar16 >> 0x10);
          gte_ldGFC((int)(short)iVar16);
          gte_intpl();
          iVar26 = gte_stMAC1();
          iVar47 = gte_stMAC2();
          iVar47 = iVar26 * 0x10000 + iVar47;
          gte_ldIR1(uVar37 & 0xff);
          gte_ldIR2(uVar37 >> 8 & 0xff);
          gte_ldRFC(uVar46 & 0xff);
          gte_ldGFC(uVar46 >> 8 & 0xff);
          gte_intpl();
          iVar26 = gte_stMAC2();
          iVar48 = gte_stMAC1();
          uVar5 = iVar26 * 0x100 + iVar48;
          gte_ldIR0(iVar73);
          gte_ldIR1(iVar20);
          gte_ldIR2((int)sVar50);
          gte_ldRFC(iVar43 >> 0x10);
          gte_ldGFC((int)(short)iVar43);
          gte_intpl();
          iVar20 = gte_stMAC1();
          iVar26 = gte_stMAC2();
          iVar26 = iVar20 * 0x10000 + iVar26;
          gte_ldIR1(uVar37 & 0xff);
          gte_ldIR2(uVar37 >> 8 & 0xff);
          gte_ldRFC(uVar25 & 0xff);
          gte_ldGFC(uVar25 >> 8 & 0xff);
          gte_intpl();
          iVar20 = gte_stMAC2();
          iVar48 = gte_stMAC1();
          uVar42 = iVar20 * 0x100 + iVar48;
          iVar72 = 0x1000 - iVar72;
          iVar73 = 0x1000 - iVar73;
        }
        gte_ldRFC((uVar29 & 0xff) << 4);
        gte_ldGFC(uVar29 >> 4 & 0xff0);
        gte_ldBFC(uVar29 >> 0xc & 0xff0);
        gte_ldIR0(iVar72);
        gte_ldRGB(uVar19);
        gte_dpcs();
        uVar24 = gte_stRGB2();
        gte_ldIR0(iVar73);
        gte_ldRGB(uVar35);
        gte_dpcs();
        uVar40 = gte_stRGB2();
        iVar20 = gte_stBBK();
        *puVar57 = 0xc000000;
        uVar7 = 0;
        if (iVar20 < 1) {
          if (0 < iVar17) goto LAB_80043620;
          uVar7 = gte_stLR1LR2();
          uVar10 = gte_stLR3LG1();
          gte_ldRFC(uVar7);
          uVar7 = gte_stLG2LG3();
          gte_ldGFC(uVar10);
          gte_ldBFC(uVar7);
          uVar7 = 0x800;
        }
        gte_ldIR0(uVar7);
        gte_ldRGB(uVar19);
        puVar57[2] = iVar16;
        *(short *)(puVar57 + 3) = (short)uVar46;
        gte_dpcs_b();
        iVar16 = gte_stRGB2();
        gte_ldRGB(uVar24);
        gte_dpcs_b();
        puVar57[1] = iVar16 + 0x3c000000;
        puVar57[5] = iVar47;
        *(short *)(puVar57 + 6) = (short)uVar5;
        uVar7 = gte_stRGB2();
        gte_ldRGB(uVar35);
        puVar57[4] = uVar7;
        puVar57[8] = iVar43;
        gte_dpcs_b();
        *(short *)(puVar57 + 9) = (short)uVar25;
        uVar7 = gte_stRGB2();
        gte_ldRGB(uVar40);
        puVar57[0xb] = iVar26;
        *(short *)(puVar57 + 0xc) = (short)uVar42;
        gte_dpcs_b();
        puVar57[7] = uVar7;
        *(short *)((int)puVar57 + 0xe) = (short)((uint)iVar44 >> 0x10);
        uVar7 = gte_stRGB2();
        *(short *)((int)puVar57 + 0x1a) = (short)iVar44;
        puVar57[10] = uVar7;
        iVar20 = gte_stIR0();
        iVar16 = gte_stLB1LB2();
        piVar49 = (int *)(iVar16 + (int)piVar53);
        if (iVar20 != 0) {
          iVar16 = gte_stL33();
          piVar49 = (int *)((int)piVar49 + iVar16);
        }
        puVar14 = (undefined2 *)*piVar49;
        *piVar49 = (int)puVar57;
        if (puVar14 == (undefined2 *)0x0) {
          if (0 < (int)piVar52 - (int)piVar49) {
            piVar52 = piVar49;
          }
          piVar49[1] = (int)puVar57;
          if ((int)piVar23 - (int)piVar49 < 0) {
            piVar23 = piVar49;
          }
          puVar57 = puVar57 + 0xd;
        }
        else {
          *puVar14 = (short)puVar57;
          *(char *)(puVar14 + 1) = (char)((uint)puVar57 >> 0x10);
          puVar57 = puVar57 + 0xd;
        }
LAB_80043620:
        do {
          iVar16 = gte_stBBK();
          *puVar57 = 0x9000000;
          uVar7 = 0;
          if (iVar16 == 0) {
LAB_80043658:
            gte_ldIR0(uVar7);
            gte_ldRGB(uVar29);
            puVar57[2] = iVar55;
            *(short *)(puVar57 + 3) = (short)uVar37;
            gte_dpcs_b();
            iVar16 = gte_stRGB2();
            gte_ldRGB(uVar24);
            gte_dpcs_b();
            puVar57[1] = iVar16 + 0x34000000;
            puVar57[5] = iVar47;
            *(short *)(puVar57 + 6) = (short)uVar5;
            uVar7 = gte_stRGB2();
            gte_ldRGB(uVar40);
            puVar57[4] = uVar7;
            puVar57[8] = iVar26;
            gte_dpcs_b();
            *(short *)(puVar57 + 9) = (short)uVar42;
            *(short *)((int)puVar57 + 0xe) = (short)((uint)iVar44 >> 0x10);
            uVar7 = gte_stRGB2();
            *(short *)((int)puVar57 + 0x1a) = (short)iVar44;
            puVar57[7] = uVar7;
            iVar20 = gte_stIR0();
            iVar16 = gte_stLB1LB2();
            piVar49 = (int *)(iVar16 + (int)piVar53);
            if (iVar20 != 0) {
              iVar16 = gte_stL33();
              piVar49 = (int *)((int)piVar49 + iVar16);
            }
            puVar14 = (undefined2 *)*piVar49;
            *piVar49 = (int)puVar57;
            if (puVar14 == (undefined2 *)0x0) {
              if (0 < (int)piVar52 - (int)piVar49) {
                piVar52 = piVar49;
              }
              piVar49[1] = (int)puVar57;
              if ((int)piVar23 - (int)piVar49 < 0) {
                piVar23 = piVar49;
              }
              puVar57 = puVar57 + 10;
            }
            else {
              *puVar14 = (short)puVar57;
              *(char *)(puVar14 + 1) = (char)((uint)puVar57 >> 0x10);
              puVar57 = puVar57 + 10;
            }
          }
          else if (iVar17 < 1) {
            uVar7 = gte_stLR1LR2();
            uVar10 = gte_stLR3LG1();
            gte_ldRFC(uVar7);
            uVar7 = gte_stLG2LG3();
            gte_ldGFC(uVar10);
            gte_ldBFC(uVar7);
            uVar7 = 0x800;
            goto LAB_80043658;
          }
          iVar16 = gte_stLB3();
          uVar5 = puVar70[5];
          puVar58 = puVar70 + 5;
          if (iVar16 == 0) break;
          iVar55 = gte_stVXY1();
          iVar20 = *(int *)(iVar55 + 0x1400);
          iVar16 = *(int *)(iVar55 + 0x1404);
          iVar26 = *(int *)(iVar55 + 0x1408);
          uVar32 = *(uint *)(iVar55 + 0x140c);
          uVar24 = *(uint *)(iVar55 + 0x1410);
          uVar36 = *(uint *)(iVar55 + 0x1414);
          uVar5 = *(uint *)(iVar55 + 0x1418);
          uVar46 = *(uint *)(iVar55 + 0x141c);
          uVar42 = *(uint *)(iVar55 + 0x1420);
          uVar33 = *(uint *)(iVar55 + 0x1424);
          uVar19 = *(uint *)(iVar55 + 0x1428);
          uVar40 = *(uint *)(iVar55 + 0x142c);
          gte_ldLB3(0);
LAB_80043044:
          uVar7 = 0;
          if (((int)(uVar32 | uVar24 | uVar36) < 1) &&
             (uVar7 = 1, -1 < (int)(uVar32 & uVar24 & uVar36))) goto LAB_800431b4;
          gte_ldBBK(uVar7);
          iVar55 = iVar20;
          uVar37 = uVar5;
          uVar29 = uVar33;
          iVar47 = iVar16;
          uVar5 = uVar46;
          uVar24 = uVar19;
        } while( true );
      }
      goto LAB_80042ad0;
    }
    if (0 < iVar17) goto LAB_80042ad0;
    gte_ldIR0(0x800);
    uVar7 = gte_stLR1LR2();
    uVar10 = gte_stLR3LG1();
    uVar51 = gte_stLG2LG3();
    gte_ldfcdir(uVar7,uVar10,uVar51);
    gte_ldRGB(uVar33);
    gte_dpcs_b();
    uVar33 = gte_stRGB2();
    gte_ldRGB(*puVar38);
    iVar16 = gte_stL33();
    gte_dpcs_b();
    uVar24 = gte_stRGB2();
    gte_ldRGB(*puVar34);
    gte_dpcs_b();
    uVar19 = puVar70[2];
    iVar16 = (uint)*puVar9 + iVar16 * 8 + (uint)*puVar13 * 2 + (uint)*puVar18;
    uVar32 = gte_stRGB2();
  }
  uVar36 = (iVar16 - ((int)(uVar46 << 0x1d) >> 0x16)) - iVar54;
  if (0 < (int)uVar36) {
    piVar49 = piVar53 + (uVar36 >> 6) * 2;
    puVar14 = (undefined2 *)*piVar49;
    uVar36 = puVar70[3];
    uVar46 = puVar70[4];
    puVar57[4] = uVar24;
    puVar57[7] = uVar32;
    *puVar57 = 0x9000000;
    puVar57[1] = uVar33 + 0x34000000 + ((int)uVar36 >> 0x1f) * -0x2000000;
    puVar57[3] = uVar19;
    if (bVar1) {
      *(short *)(puVar57 + 3) = (short)(uVar46 >> 0x10);
    }
    puVar57[6] = uVar36;
    puVar57[9] = uVar46;
    *piVar49 = (int)puVar57;
    if (puVar14 == (undefined2 *)0x0) {
      if (0 < (int)piVar52 - (int)piVar49) {
        piVar52 = piVar49;
      }
      piVar49[1] = (int)puVar57;
      if ((int)piVar23 - (int)piVar49 < 0) {
        piVar23 = piVar49;
      }
      puVar57 = puVar57 + 10;
    }
    else {
      *puVar14 = (short)puVar57;
      *(undefined *)(puVar14 + 1) = uVar15;
      puVar57 = puVar57 + 10;
    }
  }
  goto LAB_80042ad0;
LAB_8004245c:
  gte_rtps_b();
  uVar5 = (uint)*psVar11;
  iVar54 = iVar20 >> 0x15;
  iVar27 = iVar20 << 0xb;
  iVar55 = iVar20 << 0x16;
  uVar24 = uVar5 & 1;
  if ((uVar5 & 2) == 0) {
    iVar20 = *piVar52;
    iVar26 = iVar26 + iVar54 + ((int)uVar5 >> 9);
    uVar19 = (uVar19 - (iVar27 >> 0x15)) - ((int)(uVar5 << 0x15) >> 0x19);
    iVar6 = (iVar6 - (iVar55 >> 0x15)) + ((int)(uVar5 << 0x1a) >> 0x1b) * -4;
    uVar7 = gte_stSXY2();
    uVar10 = gte_stSZ3();
    iVar54 = iVar6 * 0x10000 + uVar19;
    gte_ldVXY0(iVar54);
    gte_ldVZ0(iVar26);
    *puVar63 = (short)uVar10;
    if (iVar17 != 0) {
      puVar63[3] = (short)iVar26;
      *(int *)(puVar63 + 0x202) = iVar54;
    }
    *puVar67 = uVar7;
    psVar11 = psVar11 + 1;
  }
  else {
    iVar26 = (int)psVar11[1];
    iVar6 = (int)(uVar5 << 0x14) >> 0x15;
    iVar20 = *piVar52;
    uVar19 = (iVar26 << 0x1a) >> 0x15 | (uVar5 & 0xf000) >> 0xb;
    iVar26 = iVar26 >> 5;
    uVar7 = gte_stSXY2();
    uVar10 = gte_stSZ3();
    iVar54 = iVar6 * 0x10000 + uVar19;
    gte_ldVXY0(iVar54);
    gte_ldVZ0(iVar26);
    *puVar63 = (short)uVar10;
    if (iVar17 != 0) {
      puVar63[3] = (short)iVar26;
      *(int *)(puVar63 + 0x202) = iVar54;
    }
    *puVar67 = uVar7;
    psVar11 = psVar11 + 2;
  }
  puVar14 = puVar63 + 2;
  puVar66 = puVar67 + 1;
  if (puVar67 + 1 == puVar57) {
LAB_80042564:
    puVar68 = puVar67 + 1;
    puVar65 = puVar63 + 2;
    if (puVar71 != puVar57) {
      puVar14 = puVar63;
      puVar66 = puVar67;
      puVar57 = puVar71;
      if (iVar17 != 0) {
        puVar63[1] = puVar63[3];
        *(undefined4 *)(puVar63 + 0x200) = *(undefined4 *)(puVar63 + 0x202);
      }
      goto LAB_800423cc;
    }
    goto LAB_80042860;
  }
  goto LAB_800423cc;
}



void FUN_80043858(void)

{
  byte bVar1;
  ushort uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  undefined4 *puVar12;
  uint *puVar13;
  uint uVar14;
  AngleByte AVar15;
  int iVar16;
  int iVar17;
  Color CVar18;
  uint uVar19;
  Object **ppOVar20;
  uint uVar21;
  Object **ppOVar22;
  int iVar23;
  uint uVar24;
  uint uVar25;
  int iVar26;
  uint uVar27;
  uint uVar28;
  int iVar29;
  uint uVar30;
  uint uVar31;
  int iVar32;
  uint uVar33;
  int iVar34;
  uint uVar35;
  Object *pOVar36;
  undefined4 unaff_s0;
  ModelSet *pMVar37;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  undefined4 unaff_s8;
  uint *puVar38;
  undefined4 unaff_retaddr;
  Object *pOVar39;
  undefined auStackX_0 [16];
  Object *pOVar40;
  
  iVar10 = cameraPosition.z;
  iVar9 = cameraPosition.y;
  iVar8 = cameraPosition.x;
  iVar7 = Mat33_80067e84.R33;
  iVar6 = Mat33_80067e84.R32R31;
  iVar5 = Mat33_80067e84.R23R22;
  iVar4 = Mat33_80067e84.R21R13;
  iVar3 = Mat33_80067e84.R12R11;
  DAT_8006aa0c = &DAT_80066d38;
  gte_ldVXY1(DAT_80067034 + -0x3000);
  gte_ldVZ1(DAT_80066fa4);
  puVar38 = (uint *)(DAT_80067034 + -0x1000);
  puVar13 = (uint *)(DAT_80067034 + -0x10);
  DAT_80068214 = (Object **)(DAT_80067034 + -0x1c00);
  gte_ldL11L12(DAT_80067034 + -0x1400);
  gte_ldL13L21(DAT_80067034 + -0x1010);
  pOVar39 = Objects + -1;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
LAB_80043920:
  do {
    do {
      do {
        do {
          do {
            do {
              while( true ) {
                while( true ) {
                  pOVar40 = pOVar39;
                  pOVar39 = pOVar40 + 1;
                  if (-1 < (char)pOVar40[1].state) break;
                  if (pOVar40[1].state == 0xff) goto code_r0x800440d0;
                }
                pOVar40[1].isShown = false;
                iVar17 = (int)((uint)*(ushort *)&pOVar40[1].field_0x4c << 0x18) >> 0x10;
                iVar34 = iVar17 + (*(ushort *)&pOVar40[1].field_0x4c & 0x300);
                if (0 < iVar17) break;
                iVar11 = pOVar40[1].position.x;
                if (iVar17 != 0) {
                  uVar14 = pOVar40[1].position.y;
                  iVar17 = pOVar40[1].position.z;
                  uVar21._0_1_ = pOVar40[1].modelId;
                  uVar21._1_1_ = pOVar40[1].nextModelId;
                  uVar21._2_1_ = pOVar40[1].keyframe;
                  uVar21._3_1_ = pOVar40[1].nextKeyframe;
                  pOVar36 = (Object *)
                            (&objectModels[(ushort)pOVar40[1].type]->modelCount + (uVar21 & 0xff));
                  iVar34 = 0xffff;
LAB_8004415c:
                  ppOVar20 = (Object **)gte_stL11L12();
                  ppOVar22 = (Object **)gte_stL13L21();
                  *ppOVar20 = pOVar39;
                  if (ppOVar20 != ppOVar22) {
                    ppOVar20[1] = (Object *)(iVar11 * 0x10000 + (uVar14 & 0xffff));
                    ppOVar20[2] = (Object *)(iVar17 * 0x10000 + iVar34);
                    ppOVar20[3] = pOVar36;
                    gte_ldL11L12(ppOVar20 + 4);
                  }
                }
              }
              iVar11 = pOVar40[1].position.x - iVar8 >> 2;
            } while ((iVar11 + iVar34 < 1) || (-1 < iVar11 - iVar34));
            uVar14 = iVar9 - pOVar40[1].position.y >> 2;
          } while (((int)(uVar14 + iVar34) < 1) || (-1 < (int)(uVar14 - iVar34)));
          iVar17 = iVar10 - pOVar40[1].position.z >> 2;
        } while (((iVar17 + iVar34 < 1) || (-1 < iVar17 - iVar34)) ||
                (((int)((byte)pOVar40[1].field_0x52 - 0xfe) < 0 &&
                 (*(char *)((int)&DAT_8006b300 + (uint)(byte)pOVar40[1].field_0x52) == '\0'))));
        uVar28._0_1_ = pOVar40[1].modelId;
        uVar28._1_1_ = pOVar40[1].nextModelId;
        uVar28._2_1_ = pOVar40[1].keyframe;
        uVar28._3_1_ = pOVar40[1].nextKeyframe;
        pMVar37 = objectModels[(ushort)pOVar40[1].type];
        pOVar36 = (Object *)(&pMVar37->modelCount + (uVar28 & 0xff));
        if (0 < (int)pMVar37) goto LAB_8004415c;
        uVar35 = *(uint *)&pOVar36->modelId;
        gte_ldR11R12(iVar3);
        gte_ldR13R21(iVar4);
        gte_ldR22R23(iVar5);
        gte_ldR31R32(iVar6);
        gte_ldR33(iVar7);
        uVar21 = (uint)*(byte *)(uVar35 + 7);
        gte_ldIR3(iVar11);
        gte_ldIR1(uVar14);
        gte_ldIR2(iVar17);
        uVar14 = uVar21 * 0x10;
        gte_rtir_b();
        iVar23 = (uVar14 >> 1) + (uVar14 >> 2) + (uVar14 >> 5);
        iVar26 = (uVar14 >> 1) + uVar21 + (uVar14 >> 5);
        iVar16 = gte_stMAC3();
        iVar11 = gte_stMAC2();
        iVar17 = gte_stMAC1();
      } while ((-1 < iVar16 - iVar34) || ((int)(iVar16 + uVar14) < 1));
      iVar34 = iVar17;
      if (iVar17 < 0) {
        iVar34 = -iVar17;
      }
    } while (-1 < (iVar34 - iVar23) * 4 + (iVar16 + iVar26) * -3);
    iVar34 = (uVar14 >> 1) + uVar21;
    iVar29 = (uVar14 >> 2) + uVar21;
    if ((*(int *)&pOVar40[1].field_0x1c < 0) && (iVar16 + -0x1200 < 0)) {
      bVar1 = *(byte *)((uVar28 >> 0xd & 0x7f8) + uVar35 + 0x2b);
      *DAT_80068214 = pOVar39;
      DAT_80068214[1] = (Object *)(uint)bVar1;
      DAT_80068214 = DAT_80068214 + 2;
    }
    iVar32 = iVar11;
    if (iVar11 < 0) {
      iVar32 = -iVar11;
    }
  } while (iVar16 + iVar29 + (iVar32 - iVar34) * -3 < 1);
  gte_ldtr(iVar17,iVar11,iVar16);
  if (iVar17 < 0) {
    iVar17 = -iVar17;
  }
  uVar14 = 1;
  if ((iVar17 + iVar23) * 4 + (iVar16 - iVar26) * -3 < 0) {
    if (iVar11 < 0) {
      iVar11 = -iVar11;
    }
    uVar14 = 1;
    if (0 < (iVar16 - iVar29) + (iVar11 + iVar34) * -3) {
      uVar14 = 2;
    }
  }
  CVar18 = pOVar40[1].color;
  AVar15 = pOVar40[1].eulerRotation;
  pOVar40[1].isShown = SUB41(uVar14,0);
  *(Color *)(puVar38 + 0xf) = CVar18;
  uVar21 = iVar3;
  uVar30 = iVar4;
  uVar31 = iVar5;
  uVar33 = iVar6;
  uVar24 = iVar7;
  if ((int)CVar18 << 1 < 0) {
    if (-1 < (int)CVar18 << 3) {
      puVar38[0xf] = 0;
    }
    gte_ldL22L23(DAT_80068214);
    gte_ldL31L32(puVar13);
    uVar27 = (uint)CVar18 >> 0x10 & 0xf;
    uVar19 = ((uint)AVar15 >> 0xc & 0xff0) + uVar27;
    uVar25 = uVar19 >> 4;
    if (uVar19 != 0) {
      iVar17 = (int)sineLookupTable[uVar25];
      if (uVar27 != 0) {
        iVar17 = iVar17 + ((int)(uVar27 * (sineLookupTable[uVar25 + 1] - iVar17)) >> 4);
      }
      iVar34 = (int)cosineLookupTable[uVar25];
      if (uVar27 != 0) {
        iVar34 = iVar34 + ((int)(uVar27 * (cosineLookupTable[uVar25 + 1] - iVar34)) >> 4);
      }
      gte_ldVZ0(iVar17);
      gte_ldVXY0(iVar34);
      gte_rtv0_b();
      uVar21 = gte_stIR1();
      gte_ldVXY0(-iVar17 & 0xffff);
      gte_ldVZ0(iVar34);
      iVar34 = gte_stIR2();
      uVar30 = gte_stIR3();
      gte_rtv0_b();
      uVar21 = (iVar3 & 0xffff0000U) + (uVar21 & 0xffff);
      uVar33 = (iVar6 & 0xffff0000U) + (uVar30 & 0xffff);
      uVar30 = gte_stIR1();
      iVar17 = gte_stIR2();
      uVar24 = gte_stIR3();
      uVar30 = (uVar30 & 0xffff) + iVar34 * 0x10000;
      uVar31 = (iVar5 & 0xffffU) + iVar17 * 0x10000;
      uVar24 = uVar24 & 0xffff;
      gte_ldR11R12(uVar21);
      gte_ldR13R21(uVar30);
      gte_ldR22R23(uVar31);
      gte_ldR31R32(uVar33);
      gte_ldR33(uVar24);
    }
    uVar27 = (uint)CVar18 >> 8 & 0xf;
    uVar19 = ((uint)AVar15 >> 4 & 0xff0) + uVar27;
    uVar25 = uVar19 >> 4;
    if (uVar19 != 0) {
      iVar17 = (int)sineLookupTable[uVar25];
      if (uVar27 != 0) {
        iVar17 = iVar17 + ((int)(uVar27 * (sineLookupTable[uVar25 + 1] - iVar17)) >> 4);
      }
      iVar34 = (int)cosineLookupTable[uVar25];
      if (uVar27 != 0) {
        iVar34 = iVar34 + ((int)(uVar27 * (cosineLookupTable[uVar25 + 1] - iVar34)) >> 4);
      }
      gte_ldVXY0(iVar34 << 0x10);
      gte_ldVZ0(iVar17);
      gte_rtv0_b();
      iVar11 = gte_stIR1();
      gte_ldVXY0(iVar17 * -0x10000);
      gte_ldVZ0(iVar34);
      uVar19 = gte_stIR2();
      iVar17 = gte_stIR3();
      gte_rtv0_b();
      uVar21 = (uVar21 & 0xffff) + iVar11 * 0x10000;
      uVar33 = (uVar33 & 0xffff) + iVar17 * 0x10000;
      uVar31 = gte_stIR1();
      iVar17 = gte_stIR2();
      uVar24 = gte_stIR3();
      uVar30 = (uVar30 & 0xffff0000) + (uVar31 & 0xffff);
      uVar31 = iVar17 * 0x10000 + (uVar19 & 0xffff);
      uVar24 = uVar24 & 0xffff;
      gte_ldR11R12(uVar21);
      gte_ldR13R21(uVar30);
      gte_ldR22R23(uVar31);
      gte_ldR31R32(uVar33);
      gte_ldR33(uVar24);
    }
    uVar27 = (uint)CVar18 & 0xf;
    uVar19 = ((uint)AVar15 & 0xff) * 0x10 + uVar27;
    uVar25 = uVar19 >> 4;
    if (uVar19 != 0) {
      iVar17 = (int)sineLookupTable[uVar25];
      if (uVar27 != 0) {
        iVar17 = iVar17 + ((int)(uVar27 * (sineLookupTable[uVar25 + 1] - iVar17)) >> 4);
      }
      iVar34 = (int)cosineLookupTable[uVar25];
      if (uVar27 != 0) {
        iVar34 = iVar34 + ((int)(uVar27 * (cosineLookupTable[uVar25 + 1] - iVar34)) >> 4);
      }
      gte_ldVZ0(0);
      gte_ldVXY0(iVar17 * 0x10000 + iVar34);
      gte_rtv0_b();
      uVar21 = gte_stIR1();
      gte_ldVXY0((-iVar17 & 0xffffU) + iVar34 * 0x10000);
      gte_ldVZ0(0);
      iVar17 = gte_stIR2();
      uVar19 = gte_stIR3();
      gte_rtv0_b();
      uVar30 = (uVar30 & 0xffff) + iVar17 * 0x10000;
      iVar17 = gte_stIR1();
      uVar33 = gte_stIR2();
      iVar34 = gte_stIR3();
      uVar21 = iVar17 * 0x10000 + (uVar21 & 0xffff);
      uVar31 = (uVar31 & 0xffff0000) + (uVar33 & 0xffff);
      uVar33 = iVar34 * 0x10000 + (uVar19 & 0xffff);
      gte_ldR11R12(uVar21);
      gte_ldR13R21(uVar30);
      gte_ldR22R23(uVar31);
      gte_ldR31R32(uVar33);
      gte_ldR33(uVar24);
    }
    DAT_80068214 = (Object **)gte_stL22L23();
    puVar13 = (uint *)gte_stL31L32();
    if ((int)CVar18 << 3 < 0) {
      uVar21 = -(uVar21 ^ uVar21 & 0xffff) | uVar21 & 0xffff;
      uVar31 = uVar31 ^ uVar31 & 0xffff | -(uVar31 & 0xffff) & 0xffff;
      uVar33 = -(uVar33 ^ uVar33 & 0xffff) | uVar33 & 0xffff;
    }
  }
  else {
    uVar19 = (uint)AVar15 >> 0xf & 0x1fe;
    if (uVar19 != 0) {
      gte_ldVXY0((uint)*(ushort *)((int)cosineLookupTable + uVar19));
      gte_ldVZ0((uint)*(ushort *)((int)sineLookupTable + uVar19));
      gte_rtv0_b();
      uVar21 = gte_stIR1();
      gte_ldVXY0(-(uint)*(ushort *)((int)sineLookupTable + uVar19) & 0xffff);
      gte_ldVZ0((uint)*(ushort *)((int)cosineLookupTable + uVar19));
      iVar34 = gte_stIR2();
      uVar30 = gte_stIR3();
      gte_rtv0_b();
      uVar21 = (iVar3 & 0xffff0000U) + (uVar21 & 0xffff);
      uVar33 = (iVar6 & 0xffff0000U) + (uVar30 & 0xffff);
      uVar30 = gte_stIR1();
      iVar17 = gte_stIR2();
      uVar24 = gte_stIR3();
      uVar30 = (uVar30 & 0xffff) + iVar34 * 0x10000;
      uVar31 = (iVar5 & 0xffffU) + iVar17 * 0x10000;
      uVar24 = uVar24 & 0xffff;
      gte_ldR11R12(uVar21);
      gte_ldR13R21(uVar30);
      gte_ldR22R23(uVar31);
      gte_ldR31R32(uVar33);
      gte_ldR33(uVar24);
    }
    uVar19 = ((uint)AVar15 & 0xff00) >> 7;
    if (((uint)AVar15 & 0xff00) != 0) {
      uVar24 = (uint)*(ushort *)((int)cosineLookupTable + uVar19);
      uVar31 = (uint)*(ushort *)((int)sineLookupTable + uVar19);
      gte_ldVXY0(uVar24 << 0x10);
      gte_ldVZ0(uVar31);
      gte_rtv0_b();
      iVar17 = gte_stIR1();
      gte_ldVXY0(uVar31 * -0x10000);
      gte_ldVZ0(uVar24);
      uVar19 = gte_stIR2();
      iVar34 = gte_stIR3();
      gte_rtv0_b();
      uVar21 = (uVar21 & 0xffff) + iVar17 * 0x10000;
      uVar33 = (uVar33 & 0xffff) + iVar34 * 0x10000;
      uVar31 = gte_stIR1();
      iVar17 = gte_stIR2();
      uVar24 = gte_stIR3();
      uVar30 = (uVar30 & 0xffff0000) + (uVar31 & 0xffff);
      uVar31 = iVar17 * 0x10000 + (uVar19 & 0xffff);
      uVar24 = uVar24 & 0xffff;
      gte_ldR11R12(uVar21);
      gte_ldR13R21(uVar30);
      gte_ldR22R23(uVar31);
      gte_ldR31R32(uVar33);
      gte_ldR33(uVar24);
    }
    uVar19 = (uint)AVar15 & 0xff;
    if (uVar19 != 0) {
      gte_ldVZ0(0);
      gte_ldVXY0((uint)(ushort)sineLookupTable[uVar19] * 0x10000 +
                 (uint)(ushort)cosineLookupTable[uVar19]);
      gte_rtv0_b();
      uVar21 = gte_stIR1();
      gte_ldVXY0((-(uint)(ushort)sineLookupTable[uVar19] & 0xffff) +
                 (uint)(ushort)cosineLookupTable[uVar19] * 0x10000);
      gte_ldVZ0(0);
      iVar17 = gte_stIR2();
      uVar19 = gte_stIR3();
      gte_rtv0_b();
      uVar30 = (uVar30 & 0xffff) + iVar17 * 0x10000;
      iVar17 = gte_stIR1();
      uVar33 = gte_stIR2();
      iVar34 = gte_stIR3();
      uVar21 = iVar17 * 0x10000 + (uVar21 & 0xffff);
      uVar31 = (uVar31 & 0xffff0000) + (uVar33 & 0xffff);
      uVar33 = iVar34 * 0x10000 + (uVar19 & 0xffff);
      gte_ldR11R12(uVar21);
      gte_ldR13R21(uVar30);
      gte_ldR22R23(uVar31);
      gte_ldR31R32(uVar33);
      gte_ldR33(uVar24);
    }
  }
  *puVar38 = uVar14;
  puVar38[10] = uVar21;
  puVar38[0xb] = uVar30;
  puVar38[0xc] = uVar31;
  puVar38[0xd] = uVar33;
  puVar38[0xe] = uVar24;
  puVar38[0x10] = (uint)pOVar39;
  if ((uVar14 & 1) != 0) {
    uVar14 = *(uint *)(uVar35 + 8);
    if (uVar14 != 0) {
      gte_ldIR3(((int)uVar14 >> 0x18) << 3);
      gte_ldIR1(((int)(uVar14 << 8) >> 0x18) * -8);
      gte_ldIR2(((int)(uVar14 << 0x10) >> 0x18) * -8);
      uVar14 = (uVar14 & 0xff) * 8;
      gte_rtirtr_b();
      iVar16 = (uVar14 >> 1) + (uVar14 >> 2) + (uVar14 >> 5);
      iVar23 = (uVar14 >> 1) + (uVar14 >> 4) + (uVar14 >> 5);
      iVar11 = gte_stMAC3();
      iVar34 = gte_stMAC2();
      iVar17 = gte_stMAC1();
      if ((int)(iVar11 + uVar14) < 1) goto LAB_80043920;
      iVar26 = iVar17;
      if (iVar17 < 0) {
        iVar26 = -iVar17;
      }
      if (-1 < (iVar26 - iVar16) * 4 + (iVar11 + iVar23) * -3) goto LAB_80043920;
      iVar29 = (uVar14 >> 1) + (uVar14 >> 4);
      iVar32 = (uVar14 >> 2) + (uVar14 >> 4);
      iVar26 = iVar34;
      if (iVar34 < 0) {
        iVar26 = -iVar34;
      }
      if (iVar11 + iVar32 + (iVar26 - iVar29) * -3 < 1) goto LAB_80043920;
      if (iVar17 < 0) {
        iVar17 = -iVar17;
      }
      if ((iVar17 + iVar16) * 4 + (iVar11 - iVar23) * -3 < 0) {
        if (iVar34 < 0) {
          iVar34 = -iVar34;
        }
        if (0 < (iVar11 - iVar32) + (iVar34 + iVar29) * -3) {
          *puVar38 = 2;
        }
      }
    }
  }
  iVar17 = gte_stTRX();
  iVar34 = gte_stTRY();
  iVar11 = gte_stTRZ();
  iVar16 = (*(ushort *)&pOVar40[1].lodDistanceLimit & 0xff) * 0x100 - iVar11;
  uVar14 = (uint)(*(ushort *)&pOVar40[1].lodDistanceLimit >> 8);
  uVar21 = *(uint *)((uVar28 >> 0xd & 0x7f8) + uVar35 + 0x24);
  if ((&DAT_80062868)[(byte)pOVar40[1].field_0x40] == '\0') {
    uVar2 = *(ushort *)(uVar35 + 2);
    uVar30 = (uint)(uVar2 >> 8);
  }
  else {
    uVar31 = *(uint *)((int)&pMVar37[2].field3_0xc + (uVar28 >> 6 & 0x3fc));
    uVar2 = *(ushort *)(uVar35 + 2);
    uVar30 = (uint)(uVar2 >> 8);
    uVar28 = *(uint *)((uVar28 >> 0x15 & 0x7f8) + uVar31 + 0x24);
    iVar23 = *(byte *)(uVar31 + 3) - uVar30;
    if (0 < iVar23) {
      uVar30 = uVar30 + iVar23;
    }
    *(undefined *)((int)puVar38 + 1) = (&DAT_80062868)[(byte)pOVar40[1].field_0x40];
    puVar38[2] = uVar31;
    puVar38[4] = uVar28;
  }
  uVar28 = (uint)uVar2;
  *(char *)((int)puVar38 + 0x1a) = (char)uVar30;
  *(char *)((int)puVar38 + 0x1b) = (char)uVar2 + (char)uVar30;
  iVar23 = ((iVar11 << 2) >> 7) - ((int)AVar15 >> 0x18);
  *(short *)((int)puVar38 + 2) = (short)iVar16;
  if (iVar23 < 0) {
    iVar23 = 0;
  }
  uVar31 = (iVar17 << 2) >> (uVar28 & 0x1f);
  iVar17 = iVar23;
  if (-1 < iVar23 + -0x110) {
    iVar17 = iVar23 + 0x20;
    if ((-1 < iVar23 + -0x1a0) &&
       (iVar23 = DAT_80066ffc + iVar17 * 8 + 0x200, DAT_80067168 - iVar23 < 0)) {
      DAT_80067168 = iVar23;
    }
  }
  puVar38[1] = uVar35;
  if (iVar16 < 0) {
    uVar21 = uVar21 | 0xfc000000;
  }
  puVar38[3] = uVar21;
  *(short *)(puVar38 + 6) = (short)iVar17;
  uVar35 = (iVar34 << 2) >> (uVar28 & 0x1f);
  uVar28 = (iVar11 << 2) >> (uVar28 & 0x1f);
  if (uVar14 != 0) {
    gte_ldIR0(uVar14);
    gte_ldsv_(uVar31,uVar35,uVar28);
    gte_gpf0(0);
    iVar11 = gte_stMAC3();
    iVar34 = gte_stMAC2();
    iVar17 = gte_stMAC1();
    uVar28 = iVar11 >> 5;
    uVar35 = iVar34 >> 5;
    uVar31 = iVar17 >> 5;
  }
  if ((int)(uVar28 - 63000) < 1) {
    if (-1 < (int)uVar21) {
      puVar38[5] = pMVar37[2].field1_0x4 + *(int *)((uVar21 >> 0x18 & 0x7c) + pMVar37[2].field1_0x4)
      ;
    }
    *(short *)((int)puVar38 + 0x3a) = (short)((int)(uVar28 - (0x200 << (uVar30 & 0x1f))) >> 1);
    puVar38[7] = uVar31;
    puVar38[8] = uVar35;
    puVar38[9] = uVar28;
    puVar38 = puVar38 + 0x11;
    if (puVar13 == puVar38) {
code_r0x800440d0:
      puVar12 = (undefined4 *)gte_stL11L12();
      *puVar38 = 0;
      *puVar12 = 0;
      return;
    }
  }
  goto LAB_80043920;
}



// WARNING: Switch with 1 destination removed at 0x80045cc4
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_80044504(void)

{
  undefined4 *puVar1;
  byte bVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  undefined *puVar6;
  bool bVar7;
  int iVar8;
  uint uVar9;
  byte *pbVar10;
  int *piVar11;
  ushort *puVar12;
  int **ppiVar13;
  short *psVar14;
  short *psVar15;
  undefined2 *puVar16;
  undefined4 *puVar17;
  ushort *puVar18;
  undefined uVar19;
  uint *puVar20;
  undefined4 *puVar21;
  ushort *puVar22;
  int **ppiVar23;
  int **ppiVar24;
  uint uVar25;
  int *piVar26;
  undefined *puVar27;
  ushort *puVar28;
  int iVar29;
  undefined4 *puVar30;
  int iVar31;
  uint uVar32;
  int iVar33;
  short sVar34;
  byte *pbVar35;
  int **ppiVar36;
  int **ppiVar37;
  short *psVar38;
  uint uVar39;
  uint uVar40;
  int **ppiVar41;
  int *piVar42;
  int **ppiVar43;
  int **in_t2;
  int **ppiVar44;
  int **ppiVar45;
  int **in_t3;
  undefined4 uVar46;
  uint uVar47;
  uint uVar48;
  uint *puVar49;
  uint uVar50;
  uint uVar51;
  undefined4 uVar52;
  int **ppiVar53;
  uint *puVar54;
  uint uVar55;
  undefined4 uVar56;
  undefined4 unaff_s0;
  int iVar57;
  short sVar58;
  undefined4 unaff_s1;
  undefined4 *puVar59;
  undefined4 unaff_s2;
  int iVar60;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  uint uVar61;
  int *piVar62;
  int *piVar63;
  undefined4 unaff_s5;
  int *piVar64;
  undefined4 unaff_s6;
  uint uVar65;
  int iVar66;
  undefined4 unaff_s7;
  undefined2 uVar67;
  uint uVar68;
  undefined4 *puVar69;
  undefined2 *puVar70;
  undefined2 *puVar71;
  undefined2 *puVar72;
  undefined2 *puVar73;
  undefined4 unaff_s8;
  uint *puVar74;
  undefined4 unaff_retaddr;
  uint *puVar75;
  int iVar76;
  uint *puVar77;
  undefined auStackX_0 [16];
  
  DAT_8006aa0c = &DAT_80066d38;
  iVar8 = gte_stVXY1();
  puVar74 = (uint *)(iVar8 + 0x1fbc);
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
LAB_80044550:
  puVar77 = puVar74 + 0x11;
  uVar47 = *puVar77;
  uVar9 = puVar74[0x14];
  if (uVar47 == 0) {
    return;
  }
  iVar60 = gte_stVXY1();
  pbVar35 = (byte *)puVar74[0x18];
  psVar38 = (short *)puVar74[0x19];
  uVar40 = puVar74[0x1a];
  gte_ldR11R12(puVar74[0x1b]);
  gte_ldR13R21(puVar74[0x1c]);
  gte_ldR22R23(puVar74[0x1d]);
  gte_ldR31R32(puVar74[0x1e]);
  gte_ldR33(puVar74[0x1f]);
  gte_ldtr(pbVar35,psVar38,uVar40);
  gte_ldL22L23((int)puVar74[0x1f] >> 0x10);
  uVar61 = puVar74[0x12];
  uVar68 = uVar47 << 0x1f ^ 0x80062674;
  gte_ldL31L32((int)uVar47 >> 0x10);
  uVar48 = uVar47 >> 4 & 0xff0;
  uVar65 = -(uVar47 & 1);
  puVar75 = (uint *)&DAT_1f800004;
  iVar8 = (uint)*(byte *)((uVar61 - ((int)uVar47 >> 0x1f)) + 4) * 4;
  gte_ldL33(iVar8 + -4);
  puVar69 = &DAT_1f800200;
  if (-1 < iVar8 + -0x200) {
    puVar69 = (undefined4 *)(iVar60 + 0xc00);
  }
  *(undefined4 *)(iVar60 + 0x1800) = 0;
  if (-1 < (int)uVar9) {
    puVar49 = (uint *)puVar74[0x16];
    iVar8 = *(int *)(uVar61 + 0x10);
    *(uint **)(iVar60 + 0x1800) = puVar49;
    *(int *)(iVar60 + 0x1804) = iVar8;
    puVar54 = (uint *)(iVar60 + 0x1808);
    do {
      uVar47 = *puVar49;
      puVar49 = puVar49 + 1;
      puVar20 = (uint *)((uVar47 & 0xffff) + iVar8);
      uVar25 = uVar47 >> 0x18 & 0x7f;
      do {
        uVar32 = *puVar49;
        *puVar54 = *puVar20;
        puVar49 = puVar49 + 1;
        *puVar20 = uVar32;
        puVar54 = puVar54 + 1;
        uVar25 = uVar25 - 1;
        puVar20 = puVar20 + 1;
      } while (0 < (int)uVar25);
    } while (0 < (int)uVar47);
  }
  uVar47 = uVar9 >> 0x19 & 1;
  piVar64 = (int *)puVar74[0x20];
  piVar62 = *(int **)(uVar61 + 0xc);
  psVar14 = (short *)((uVar9 & 0xffff) * 2 + *(int *)(uVar61 + 0x20));
  pbVar10 = (byte *)((uVar9 >> 0xf & 0x3fe) + (int)psVar14);
  iVar8 = 0;
  uVar9 = 0;
  iVar29 = 0;
  uVar25 = 0x80000000;
  if ((int)piVar64 < 0) {
    piVar62 = (int *)((uint)piVar62 ^ 0x80000000);
    puVar69 = (undefined4 *)(iVar60 + 0xc00);
  }
  gte_ldL11L12(piVar64);
  puVar16 = (undefined2 *)puVar69;
  puVar49 = (uint *)&DAT_1f800000;
  if (uVar48 == 0) goto LAB_80044714;
  uVar40 = puVar74[0x15];
  uVar25 = uVar40 >> 0x19 & 1;
  piVar64 = *(int **)(puVar74[0x13] + 0xc);
  psVar38 = (short *)((uVar40 & 0xffff) * 2 + *(int *)(puVar74[0x13] + 0x20));
  pbVar35 = (byte *)((uVar40 >> 0xf & 0x3fe) + (int)psVar38);
  uVar40 = 0;
  in_t2 = (int **)0x0;
  in_t3 = (int **)0x0;
  puVar71 = (undefined2 *)puVar69;
LAB_800448e4:
  do {
    piVar63 = piVar62 + 1;
    if (uVar47 == 0) {
      gte_rtps_b();
      bVar2 = *pbVar10;
      pbVar10 = pbVar10 + 1;
      uVar47 = bVar2 & 1;
      gte_ldIR0(uVar48);
      iVar60 = *(int *)((bVar2 & 0xfe) * 2 + uVar68) + *piVar62;
      iVar8 = iVar8 + (iVar60 >> 0x15);
      iVar57 = iVar60 * 0x800 >> 0x15;
      psVar15 = psVar14;
      if (uVar25 == 0) {
        uVar51 = (uint)*pbVar35;
        uVar9 = uVar9 - iVar57;
        iVar29 = iVar29 - (iVar60 * 0x400000 >> 0x15);
        goto LAB_80044960;
      }
      uVar50 = (uint)*psVar38;
      uVar9 = uVar9 - iVar57;
      iVar29 = iVar29 - (iVar60 * 0x400000 >> 0x15);
LAB_80044a3c:
      gte_ldsv_(iVar8,uVar9,iVar29);
      uVar25 = uVar50 & 1;
      if ((uVar50 & 2) == 0) {
        iVar57 = *piVar64;
        uVar51 = iVar57 >> 0x15;
        iVar60 = (iVar57 << 0xb) >> 0x15;
        uVar32 = (iVar57 << 0x16) >> 0x15;
        uVar40 = uVar40 + ((int)uVar50 >> 9) + uVar51;
        in_t2 = (int **)((int)in_t2 + (-iVar60 - ((int)(uVar50 << 0x15) >> 0x19)));
        in_t3 = (int **)((int)in_t3 + (((int)(uVar50 << 0x1a) >> 0x1b) * -4 - uVar32));
        psVar38 = psVar38 + 1;
      }
      else {
        iVar60 = (int)psVar38[1];
        psVar38 = psVar38 + 2;
        in_t3 = (int **)((int)((uVar50 & 0xffc) << 0x14) >> 0x14);
        uVar51 = uVar50 & 0xf000;
        uVar32 = uVar51 >> 0xb;
        gte_ldsv_(iVar8,uVar9,iVar29);
        in_t2 = (int **)((iVar60 << 0x1a) >> 0x15 | uVar32);
        uVar40 = iVar60 >> 5;
      }
    }
    else {
      gte_rtps_b();
      uVar32 = (uint)*psVar14;
      iVar60 = *piVar62;
      psVar15 = psVar14 + 1;
      uVar47 = uVar32 & 1;
      if ((uVar32 & 2) != 0) {
        sVar58 = *psVar15;
        psVar15 = psVar14 + 2;
        iVar29 = (int)((uVar32 & 0xffc) << 0x14) >> 0x14;
        uVar32 = (uVar32 & 0xf000) >> 0xb;
        gte_ldIR0(uVar48);
        uVar9 = ((int)sVar58 << 0x1a) >> 0x15;
        iVar8 = (int)sVar58 >> 5;
        if ((int)uVar25 < 1) {
          uVar51 = (uint)*pbVar35;
          uVar9 = uVar9 | uVar32;
          goto LAB_80044960;
        }
        uVar50 = (uint)*psVar38;
        uVar9 = uVar9 | uVar32;
        goto LAB_80044a3c;
      }
      iVar57 = uVar9 - ((int)(uVar32 << 0x15) >> 0x19);
      iVar29 = iVar29 + ((int)(uVar32 << 0x1a) >> 0x1b) * -4;
      gte_ldIR0(uVar48);
      iVar8 = iVar8 + ((int)uVar32 >> 9) + (iVar60 >> 0x15);
      iVar66 = (iVar60 << 0xb) >> 0x15;
      if (0 < (int)uVar25) {
        uVar50 = (uint)*psVar38;
        uVar9 = iVar57 - iVar66;
        iVar29 = iVar29 - ((iVar60 << 0x16) >> 0x15);
        goto LAB_80044a3c;
      }
      uVar51 = (uint)*pbVar35;
      uVar9 = iVar57 - iVar66;
      iVar29 = iVar29 - ((iVar60 << 0x16) >> 0x15);
LAB_80044960:
      pbVar35 = pbVar35 + 1;
      uVar25 = uVar51 & 1;
      gte_ldsv_(iVar8,uVar9,iVar29);
      iVar60 = *(int *)((uVar51 & 0xfe) * 2 + uVar68) + *piVar64;
      uVar40 = uVar40 + (iVar60 >> 0x15);
      in_t2 = (int **)((int)in_t2 - (iVar60 * 0x800 >> 0x15));
      uVar32 = iVar60 * 0x400000 >> 0x15;
      in_t3 = (int **)((int)in_t3 - uVar32);
    }
    gte_ldfcdir(uVar40,in_t2,in_t3);
    uVar50 = gte_stSXY2();
    iVar57 = gte_stSZ3();
    gte_intpl_b();
    piVar64 = piVar64 + 1;
    *puVar71 = (short)iVar57;
    puVar72 = puVar71 + 2;
    puVar73 = puVar71 + 2;
    if (-1 < (int)piVar63) {
      read_mt(uVar51,iVar60,uVar32);
      puVar71[3] = (short)uVar51;
      puVar71[0x202] = (short)iVar60;
      puVar71[0x203] = (short)uVar32;
    }
    uVar32 = uVar50 << 5;
    if (iVar57 < 1) {
      uVar32 = uVar32 | 0x10;
    }
    uVar52 = gte_stMAC1();
    iVar57 = gte_stMAC3();
    gte_ldVZ0(uVar52);
    iVar60 = gte_stMAC2();
    gte_ldVXY0(iVar60 + iVar57 * 0x10000);
    puVar54 = puVar49 + 1;
    psVar14 = psVar15;
    piVar62 = piVar63;
    if (-1 < (int)uVar68) goto LAB_80044bb0;
    *puVar49 = uVar50;
    puVar71 = puVar71 + 2;
    puVar49 = puVar54;
  } while (puVar54 != puVar75);
  puVar75 = puVar75 + -1;
  puVar73 = puVar72;
  goto LAB_80044bf0;
LAB_80044bb0:
  if ((int)(uVar50 - 0xd0000) < 1) {
    uVar32 = uVar32 | 1;
  }
  if (-1 < (int)(uVar50 - 0xe40000)) {
    uVar32 = uVar32 | 2;
  }
  if ((int)(uVar50 * 0x10000) < 1) {
    uVar32 = uVar32 | 4;
  }
  if (-1 < (int)(uVar50 * 0x10000 + -0x2000000)) {
    uVar32 = uVar32 | 8;
  }
  uVar65 = uVar65 & uVar32;
  *puVar49 = uVar32;
  puVar71 = puVar71 + 2;
  puVar49 = puVar54;
  if (puVar54 != puVar75) goto LAB_800448e4;
  puVar75 = puVar75 + -1;
LAB_80044bf0:
  puVar49 = puVar54 + -1;
  if (((uint)puVar75 & 0xffff) == 0) {
    iVar60 = gte_stL33();
    puVar71 = puVar73 + -2;
    if (-1 < (int)piVar62) {
      puVar73[-1] = puVar73[1];
      *(undefined4 *)(puVar73 + 0x1fe) = *(undefined4 *)(puVar73 + 0x200);
    }
    puVar75 = (uint *)(iVar60 + (int)puVar49);
    psVar14 = psVar15;
    puVar16 = puVar73 + -2;
    if (uVar48 == 0) {
LAB_80044714:
      do {
        while( true ) {
          piVar63 = piVar62 + 1;
          if (uVar47 == 0) {
            gte_rtps_b();
            bVar2 = *pbVar10;
            pbVar10 = pbVar10 + 1;
            uVar47 = bVar2 & 1;
            uVar51 = gte_stSXY2();
            iVar57 = gte_stSZ3();
            iVar60 = *(int *)((bVar2 & 0xfe) * 2 + uVar68) + *piVar62;
            iVar8 = iVar8 + (iVar60 >> 0x15);
            uVar9 = uVar9 - (iVar60 * 0x800 >> 0x15);
            iVar29 = iVar29 - (iVar60 * 0x400000 >> 0x15);
            iVar60 = iVar29 * 0x10000 + uVar9;
            gte_ldVXY0(iVar60);
            gte_ldVZ0(iVar8);
            psVar15 = psVar14;
            if (-1 < (int)piVar63) {
              puVar16[3] = (short)iVar8;
              *(int *)(puVar16 + 0x202) = iVar60;
            }
          }
          else {
            gte_rtps_b();
            uVar32 = (uint)*psVar14;
            iVar60 = *piVar62;
            psVar15 = psVar14 + 1;
            uVar47 = uVar32 & 1;
            if ((uVar32 & 2) == 0) {
              iVar8 = iVar8 + ((int)uVar32 >> 9) + (iVar60 >> 0x15);
              uVar9 = (uVar9 - ((int)(uVar32 << 0x15) >> 0x19)) - ((iVar60 << 0xb) >> 0x15);
              iVar29 = (iVar29 + ((int)(uVar32 << 0x1a) >> 0x1b) * -4) - ((iVar60 << 0x16) >> 0x15);
              uVar51 = gte_stSXY2();
              iVar57 = gte_stSZ3();
              iVar60 = iVar29 * 0x10000 + uVar9;
              gte_ldVXY0(iVar60);
              gte_ldVZ0(iVar8);
              if (-1 < (int)piVar63) {
                puVar16[3] = (short)iVar8;
                *(int *)(puVar16 + 0x202) = iVar60;
              }
            }
            else {
              sVar58 = *psVar15;
              psVar15 = psVar14 + 2;
              iVar29 = (int)((uVar32 & 0xffc) << 0x14) >> 0x14;
              uVar51 = gte_stSXY2();
              iVar57 = gte_stSZ3();
              uVar9 = ((int)sVar58 << 0x1a) >> 0x15 | (uVar32 & 0xf000) >> 0xb;
              iVar8 = (int)sVar58 >> 5;
              iVar60 = iVar29 * 0x10000 + uVar9;
              gte_ldVXY0(iVar60);
              gte_ldVZ0(iVar8);
              if (-1 < (int)piVar63) {
                puVar16[3] = (short)iVar8;
                *(int *)(puVar16 + 0x202) = iVar60;
              }
            }
          }
          puVar70 = puVar16 + 2;
          puVar73 = puVar16 + 2;
          *puVar16 = (short)iVar57;
          psVar14 = psVar15;
          piVar62 = piVar63;
          if (-1 < (int)uVar68) break;
          puVar54 = puVar49 + 1;
          *puVar49 = uVar51;
          puVar16 = puVar16 + 2;
          puVar49 = puVar54;
          if (puVar54 == puVar75) {
            puVar75 = puVar75 + -1;
            puVar73 = puVar70;
            goto LAB_80044bf0;
          }
        }
        uVar32 = uVar51 << 5;
        if (iVar57 < 1) {
          uVar32 = uVar32 | 0x10;
        }
        if ((int)(uVar51 - 0xd0000) < 1) {
          uVar32 = uVar32 | 1;
        }
        if (-1 < (int)(uVar51 - 0xe40000)) {
          uVar32 = uVar32 | 2;
        }
        if ((int)(uVar51 * 0x10000) < 1) {
          uVar32 = uVar32 | 4;
        }
        puVar54 = puVar49 + 1;
        if (-1 < (int)(uVar51 * 0x10000 + -0x2000000)) {
          uVar32 = uVar32 | 8;
        }
        uVar65 = uVar65 & uVar32;
        *puVar49 = uVar32;
        puVar16 = puVar16 + 2;
        puVar49 = puVar54;
      } while (puVar54 != puVar75);
      puVar75 = puVar75 + -1;
      goto LAB_80044bf0;
    }
    goto LAB_800448e4;
  }
  gte_rtps_b();
  uVar9 = gte_stSXY2();
  iVar8 = gte_stSZ3();
  *puVar54 = uVar9;
  *puVar73 = (short)iVar8;
  if (-1 < (int)uVar68) {
    uVar47 = uVar9 << 5;
    if (iVar8 < 1) {
      uVar47 = uVar47 | 0x10;
    }
    if ((int)(uVar9 - 0xd0000) < 1) {
      uVar47 = uVar47 | 1;
    }
    if (-1 < (int)(uVar9 - 0xe40000)) {
      uVar47 = uVar47 | 2;
    }
    if ((int)(uVar9 * 0x10000) < 1) {
      uVar47 = uVar47 | 4;
    }
    if (-1 < (int)(uVar9 * 0x10000 + -0x2000000)) {
      uVar47 = uVar47 | 8;
    }
    uVar65 = uVar65 & uVar47;
    *puVar54 = uVar47;
  }
  iVar8 = gte_stL33();
  if ((uVar65 & 0x1f) != 0) goto LAB_80045498;
  uVar9 = uVar68 & 0x80000000;
  iVar8 = -iVar8;
  iVar60 = gte_stL31L32();
  if (iVar60 < 1) {
    iVar29 = gte_stVZ1();
    piVar62 = *(int **)(uVar61 + 0x18);
    puVar30 = *(undefined4 **)(uVar61 + 0x1c);
    iVar57 = 0;
    puVar17 = puVar30;
    if (iVar29 != 0) {
      if (iVar60 + 0x800 < 0) {
        iVar29 = -(iVar60 + 0x800);
        if (iVar60 + 0x1000 < 1) {
          iVar29 = 0x7ff;
        }
        gte_ldIR0(iVar29 << 1);
        iVar60 = gte_stVXY1();
        puVar17 = (undefined4 *)(iVar60 + 0x1600);
        gte_ldfcdir(((uint)clearColor & 0xff) << 4,(uint)clearColor >> 4 & 0xff0,
                    (uint)clearColor >> 0xc & 0xff0);
        gte_ldRGB(*puVar30);
        puVar59 = puVar30 + *(byte *)(uVar61 + 1);
        puVar21 = puVar17;
        do {
          gte_dpcs_b();
          puVar1 = puVar30 + 1;
          puVar30 = puVar30 + 1;
          uVar52 = gte_stRGB2();
          gte_ldRGB(*puVar1);
          *puVar21 = uVar52;
          puVar21 = puVar21 + 1;
        } while (puVar30 != puVar59);
      }
    }
    goto LAB_80044d8c;
  }
  if (iVar60 + -0x400 < 0) {
    uVar47 = (iVar60 + -0x400) * -4;
    gte_ldIR0(uVar47);
    puVar75 = *(uint **)(uVar61 + 0x14);
    puVar49 = *(uint **)(uVar61 + 0x1c);
    iVar60 = gte_stVXY1();
    iVar57 = (uVar47 >> 9) << 0x16;
    if (puVar75 != puVar49) {
      uVar65 = *puVar49;
      uVar47 = *puVar75;
      puVar54 = puVar49 + *(byte *)(uVar61 + 1);
      puVar17 = (undefined4 *)(iVar60 + 0x1600);
      do {
        gte_ldRGB(uVar47);
        gte_ldfcdir((uVar65 & 0xff) << 4,uVar65 >> 4 & 0xff0,uVar65 >> 0xc & 0xff0);
        uVar65 = puVar49[1];
        puVar75 = puVar75 + 1;
        puVar49 = puVar49 + 1;
        gte_dpcs_b();
        uVar47 = *puVar75;
        uVar52 = gte_stRGB2();
        *puVar17 = uVar52;
        puVar17 = puVar17 + 1;
      } while (puVar49 != puVar54);
      piVar62 = *(int **)(uVar61 + 0x10);
      puVar17 = (undefined4 *)(iVar60 + 0x1600);
LAB_80044d8c:
      uVar47 = gte_stL11L12();
      puVar30 = puVar17;
      if (uVar47 != 0) {
        uVar65 = uVar47 >> 0x1c & 7;
        gte_ldL11L12(uVar65);
        if (uVar65 != 0) {
          if (uVar65 == 1) goto LAB_80045620;
          if (uVar65 == 2) {
            gte_ldRBK((uVar47 & 0xff) << 4);
            gte_ldGBK(uVar47 >> 4 & 0xff0);
            gte_ldBBK(uVar47 >> 0xc & 0xff0);
            gte_ldL33(uVar47 >> 0x17 & 0x1e);
            gte_ldLR1LR2(0xf666f4e0);
            gte_ldLB1LB2(0xf666f4e0);
            gte_ldLR3LG1(0xf4e0f62b);
            gte_ldLG2LG3(0xf62bf666);
            gte_ldLB3(0xf62b);
          }
          else if (uVar65 == 3) {
            iVar60 = gte_stVXY1();
            puVar30 = (undefined4 *)(iVar60 + 0x1600);
            bVar2 = *(byte *)(uVar61 + 1);
            gte_ldRFC((uVar47 & 0xff) << 4);
            gte_ldGFC(uVar47 >> 4 & 0xff0);
            gte_ldBFC(uVar47 >> 0xc & 0xff0);
            gte_ldIR0(uVar47 >> 0x10 & 0xf00);
            uVar52 = *puVar17;
            puVar21 = puVar30;
            do {
              gte_ldRGB(uVar52);
              puVar17 = puVar17 + 1;
              puVar59 = puVar21 + 1;
              gte_dpcs_b();
              uVar52 = *puVar17;
              uVar46 = gte_stRGB2();
              *puVar21 = uVar46;
              puVar21 = puVar59;
            } while (puVar59 != puVar30 + bVar2);
          }
          else {
            gte_ldL11L12(3);
            puVar30 = (undefined4 *)((uint)puVar17 ^ 0x80000000);
          }
          goto LAB_80044d9c;
        }
        if (-1 < (int)uVar47) {
LAB_80045620:
          iVar60 = gte_stL11L12();
          gte_ldRFC((uVar47 & 0xff) << 4);
          gte_ldGFC(uVar47 >> 4 & 0xff0);
          gte_ldBFC(uVar47 >> 0xc & 0xff0);
          uVar47 = uVar47 >> 0x10 & 0xf00;
          gte_ldIR0(uVar47);
          if (iVar60 != 0) {
            gte_ldL33(uVar47);
            uVar47 = puVar74[0x21];
            gte_ldR11R12(*(undefined4 *)(uVar47 + 0x20));
            gte_ldR13R21(*(undefined4 *)(uVar47 + 0x24));
            gte_ldR22R23(*(undefined4 *)(uVar47 + 0x28));
            gte_ldR31R32(*(undefined4 *)(uVar47 + 0x2c));
            gte_ldR33(*(undefined4 *)(uVar47 + 0x30));
            gte_ldLR1LR2(DAT_80066ed8 + iVar57);
            gte_stTRX();
            gte_stTRY();
            iVar60 = gte_stTRZ();
            gte_ldLR3LG1(((uint)(iVar60 <<
                                ((puVar74[0x17] >> 0x18) - (puVar74[0x17] >> 0x10 & 0xff) & 0x1f))
                         >> 6) + (ram0x80067ecc >> 3));
          }
          goto LAB_80044d9c;
        }
        gte_ldLR3LG1(puVar77);
        uVar65 = puVar74[0x21];
        in_t3 = (int **)(puVar74[0x17] >> 0x10 & 0xff);
        in_t2 = (int **)((puVar74[0x17] >> 0x18) - (int)in_t3);
        gte_ldR11R12(*(undefined4 *)(uVar65 + 0x20));
        gte_ldR13R21(*(undefined4 *)(uVar65 + 0x24));
        gte_ldR22R23(*(undefined4 *)(uVar65 + 0x28));
        gte_ldR31R32(*(undefined4 *)(uVar65 + 0x2c));
        gte_ldR33(*(undefined4 *)(uVar65 + 0x30));
        iVar29 = gte_stL31L32();
        iVar60 = (int)(uVar47 << 8) >> 8;
        iVar76 = 0x180;
        iVar33 = 0;
        iVar66 = *(int *)(uVar65 + 0x14) - iVar60;
        if (iVar60 < 1) {
          iVar66 = iVar66 + iVar60 * 2;
          if (cameraPosition.z + iVar60 < 1) {
            iVar76 = -0x180;
            iVar33 = -0xc00;
          }
          gte_ldbkdir(DAT_80067408,DAT_8006740c,DAT_80067410);
        }
        if (iVar29 < 1) {
          uVar61 = uVar61 + 1;
        }
        bVar2 = *(byte *)(uVar61 + 4);
        if (-1 < iVar60) {
          puVar17 = (undefined4 *)((uint)puVar17 & 0x7fffffff);
        }
        gte_ldVZ0((int)*(short *)((int)puVar73 + iVar8 + 2));
        gte_ldVXY0(*(undefined4 *)((int)puVar73 + iVar8 + 0x400));
        puVar6 = (undefined *)((int)puVar73 + iVar8);
        do {
          puVar27 = puVar6 + 4;
          gte_rtv0_b();
          iVar60 = gte_stMAC2();
          gte_ldVZ0((int)*(short *)(puVar6 + 6));
          gte_ldVXY0(*(undefined4 *)(puVar6 + 0x404));
          *(int *)(puVar6 + 0x400) = iVar66 - (iVar60 << ((uint)in_t2 & 0x1f));
          puVar6 = puVar27;
        } while (puVar27 != (undefined *)((int)puVar73 + (uint)bVar2 * 4 + iVar8));
        uVar47 = puVar74[0x17] >> 0x10;
        uVar65 = uVar9 + (uVar47 & 0xff) + 4;
        iVar29 = gte_stL22L23();
        gte_ldL13L21(puVar74[0x17] & 0xffff);
        gte_ldL31L32(uVar47);
        iVar66 = iVar29 * 8;
        iVar60 = 0;
        if (iVar66 < 1) {
          iVar60 = ((uint)(iVar29 * -8) >> (uVar65 & 0x1f)) << 3;
          iVar66 = 1;
        }
        iVar29 = gte_stVXY1();
        piVar64 = (int *)(iVar29 + iVar60);
        uVar47 = (uVar65 & 0xff) - 6;
        if ((int)uVar47 < 0) {
          uVar47 = 0;
        }
        gte_ldL33(iVar76 >> (uVar47 & 0x1f));
        iVar66 = iVar66 + (iVar33 >> (uVar47 & 0x1f));
        uVar47 = piVar62[1];
        piVar63 = piVar64 + 0x300;
        puVar74 = (uint *)(piVar62 + 1);
        puVar77 = (uint *)(*piVar62 + (int)puVar74);
        piVar26 = piVar64;
        puVar21 = (undefined4 *)primitiveBuffer_next;
LAB_80045fec:
        if (puVar74 == puVar77) goto LAB_80046fcc;
        uVar61 = uVar47 >> 0x16 & 0x3fc;
        uVar40 = uVar47 >> 0xe & 0x3fc;
        uVar32 = puVar74[1];
        uVar48 = uVar47 >> 6 & 0x3fc;
        uVar25 = (uVar47 & 0xff) * 4;
        uVar67 = SUB42(puVar21,0);
        uVar19 = (undefined)((uint)puVar21 >> 0x10);
        if (uVar48 == uVar25) goto LAB_800462cc;
        uVar47 = *(uint *)(uVar61 + 0x1f800000);
        uVar51 = *(uint *)(uVar40 + 0x1f800000);
        uVar50 = *(uint *)(uVar48 + 0x1f800000);
        uVar39 = *(uint *)(uVar25 + 0x1f800000);
        if (uVar9 == 0) {
          uVar55 = uVar47 & uVar51;
          uVar47 = (int)uVar47 >> 5;
          if ((uVar55 & uVar50 & uVar39 & 0x1f) != 0) {
LAB_800464fc:
            puVar75 = puVar74 + 2;
            if ((int)uVar32 < 0) {
              puVar75 = puVar74 + 5;
            }
            puVar74 = puVar75;
            uVar47 = *puVar74;
            goto LAB_80045fec;
          }
          uVar51 = (int)uVar51 >> 5;
          uVar50 = (int)uVar50 >> 5;
          uVar39 = (int)uVar39 >> 5;
        }
        gte_ldSXY0(uVar47);
        gte_ldSXY1(uVar51);
        gte_ldSXY2(uVar50);
        gte_nclip_b();
        puVar21[2] = uVar47;
        if ((int)uVar32 < 0) {
          puVar21[5] = uVar51;
          puVar21[8] = uVar50;
          puVar21[0xb] = uVar39;
          puVar74 = puVar74 + 5;
        }
        else {
          puVar21[4] = uVar51;
          puVar21[6] = uVar50;
          puVar21[8] = uVar39;
          puVar74 = puVar74 + 2;
        }
        iVar60 = gte_stMAC0();
        gte_ldSXY0(uVar39);
        gte_nclip_b();
        uVar47 = *puVar74;
        uVar51 = uVar32 >> 8 & 0x1fc;
        uVar50 = uVar32 >> 1 & 0x1fc;
        puVar75 = (uint *)((uVar32 >> 0x16 & 0x1fc) + (int)puVar17);
        iVar29 = gte_stMAC0();
        in_t2 = (int **)((uVar32 >> 0xf & 0x1fc) + (int)puVar17);
        if (-1 < iVar60) {
          in_t3 = (int **)(uVar51 + (int)puVar17);
          if (0 < iVar29) {
            puVar21[2] = uVar39;
            uVar51 = *(uint *)(uVar50 + (int)puVar17);
            in_t2 = (int **)*in_t2;
            bVar7 = true;
            uVar61 = uVar25;
            goto LAB_8004637c;
          }
          goto LAB_80045fec;
        }
        in_t3 = (int **)(uVar51 + (int)puVar17);
        if (0 < iVar29) {
          uVar51 = *puVar75;
          puVar30 = (undefined4 *)(uVar50 + (int)puVar17);
          puVar12 = (ushort *)((int)puVar73 + uVar61 + iVar8);
          puVar18 = (ushort *)((int)puVar73 + uVar40 + iVar8);
          puVar22 = (ushort *)((int)puVar73 + uVar48 + iVar8);
          puVar28 = (ushort *)((int)puVar73 + uVar25 + iVar8);
          uVar40 = *(uint *)(puVar12 + 0x200);
          uVar61 = *(uint *)(puVar18 + 0x200);
          uVar48 = *(uint *)(puVar22 + 0x200);
          uVar25 = *(uint *)(puVar28 + 0x200);
          in_t2 = (int **)*in_t2;
          in_t3 = (int **)*in_t3;
          if ((int)(uVar40 | uVar61 | uVar48 | uVar25) < 0) {
            if (-1 < (int)(uVar40 & uVar61 & uVar48 & uVar25)) {
              iVar60 = ((uint)*puVar12 + (uint)*puVar18 + (uint)*puVar22 + (uint)*puVar28) - iVar66;
              if ((-1 < iVar60) &&
                 (iVar60 = iVar60 - (((int)(uVar32 << 0x1d) >> 0x1b) << (uVar65 & 0x1f)) >>
                           (uVar65 & 0x1f), -1 < iVar60)) {
                gte_ldLB1LB2(iVar60 << 3);
                gte_ldLB3(1);
                puVar59 = (undefined4 *)gte_stLR3LG1();
                ppiVar41 = (int **)puVar21[2];
                if ((int)uVar32 < 0) {
                  ppiVar44 = (int **)puVar21[5];
                  ppiVar23 = (int **)puVar21[8];
                  uVar52 = puVar21[0xb];
                }
                else {
                  ppiVar44 = (int **)puVar21[4];
                  ppiVar23 = (int **)puVar21[6];
                  uVar52 = puVar21[8];
                }
                puVar59[1] = ppiVar44;
                puVar59[2] = ppiVar23;
                *puVar59 = uVar52;
                puVar59[3] = uVar25;
                puVar59[4] = uVar61;
                puVar59[5] = uVar48;
                if ((int)uVar32 < 0) {
                  uVar25 = puVar74[-2];
                  uVar32 = puVar74[-1];
                  uVar47 = puVar74[-3] + iVar57;
                }
                else {
                  uVar47 = 0;
                  uVar25 = 0;
                  uVar32 = 0;
                }
                gte_ldLG2LG3((uVar47 & 0xffff0000) + (uVar25 >> 0x10));
                puVar59[6] = uVar32 >> 0x10;
                uVar47 = uVar47 & 0xffff;
                uVar25 = uVar25 & 0xffff;
                uVar32 = uVar32 & 0xffff;
                puVar59[7] = uVar25;
                puVar59[8] = uVar32;
                ppiVar36 = (int **)(uVar51 & 0xffffff);
                uVar52 = *puVar30;
                puVar59[10] = in_t2;
                puVar59[0xb] = in_t3;
                puVar59[9] = uVar52;
                goto LAB_800466fc;
              }
              goto LAB_80045fec;
            }
            if (0 < (int)puVar17) goto LAB_80045fec;
            gte_ldIR0(0x800);
            uVar52 = gte_stRBK();
            uVar46 = gte_stGBK();
            uVar56 = gte_stBBK();
            gte_ldfcdir(uVar52,uVar46,uVar56);
            gte_ldRGB(uVar51);
            gte_dpcs();
            uVar51 = gte_stRGB2();
            gte_ldRGB(in_t2);
            gte_dpcs();
            in_t2 = (int **)gte_stRGB2();
            gte_ldRGB(in_t3);
            gte_dpcs();
            in_t3 = (int **)gte_stRGB2();
            gte_ldRGB(*puVar30);
            iVar60 = gte_stL33();
            gte_dpcs_b();
            uVar52 = gte_stRGB2();
            uVar61 = (uint)*puVar12 + iVar60 * 8;
          }
          else {
            uVar52 = *puVar30;
            uVar61 = (uint)*puVar12;
          }
          uVar3 = *puVar18;
          uVar4 = *puVar22;
          uVar5 = *puVar28;
          if ((int)uVar32 < 0) {
            uVar40 = puVar74[-3];
            uVar48 = puVar74[-2];
            iVar60 = (uVar61 - iVar66) + (uint)uVar3 + (uint)uVar4 + (uint)uVar5;
            iVar29 = iVar60 - (((int)(uVar32 << 0x1d) >> 0x1b) << (uVar65 & 0x1f));
            if ((-1 < iVar60) && (-1 < iVar29)) {
              piVar62 = piVar64 + (iVar29 >> (uVar65 & 0x1f)) * 2;
              puVar16 = (undefined2 *)*piVar62;
              uVar61 = puVar74[-1];
              puVar21[4] = in_t2;
              puVar21[7] = in_t3;
              puVar21[10] = uVar52;
              puVar21[1] = uVar51 + 0x3c000000 + ((int)uVar48 >> 0x1f) * -0x2000000;
              *puVar21 = 0xc000000;
              puVar21[3] = uVar40 + iVar57;
              puVar21[6] = uVar48;
              puVar21[9] = uVar61;
              puVar21[0xc] = uVar61 >> 0x10;
              *piVar62 = (int)puVar21;
              if (puVar16 == (undefined2 *)0x0) {
                if (0 < (int)piVar63 - (int)piVar62) {
                  piVar63 = piVar62;
                }
                piVar62[1] = (int)puVar21;
                if ((int)piVar26 - (int)piVar62 < 0) {
                  piVar26 = piVar62;
                }
                puVar21 = puVar21 + 0xd;
              }
              else {
                *puVar16 = uVar67;
                *(undefined *)(puVar16 + 1) = uVar19;
                puVar21 = puVar21 + 0xd;
              }
            }
          }
          else {
            puVar21[1] = uVar51 + 0x38000000;
            puVar21[3] = in_t2;
            puVar21[5] = in_t3;
            puVar21[7] = uVar52;
            iVar60 = (uVar61 - iVar66) + (uint)uVar3 + (uint)uVar4 + (uint)uVar5;
            if (-1 < iVar60) {
              *puVar21 = 0x8000000;
              iVar60 = iVar60 - (((int)(uVar32 << 0x1d) >> 0x1b) << (uVar65 & 0x1f));
              if (-1 < iVar60) {
                piVar62 = piVar64 + (iVar60 >> (uVar65 & 0x1f)) * 2;
                puVar16 = (undefined2 *)*piVar62;
                *piVar62 = (int)puVar21;
                if (puVar16 == (undefined2 *)0x0) {
                  if (0 < (int)piVar63 - (int)piVar62) {
                    piVar63 = piVar62;
                  }
                  piVar62[1] = (int)puVar21;
                  if ((int)piVar26 - (int)piVar62 < 0) {
                    piVar26 = piVar62;
                  }
                  puVar21 = puVar21 + 9;
                }
                else {
                  *puVar16 = uVar67;
                  *(undefined *)(puVar16 + 1) = uVar19;
                  puVar21 = puVar21 + 9;
                }
              }
            }
          }
          goto LAB_80045fec;
        }
        uVar51 = *puVar75;
        in_t2 = (int **)*in_t2;
        bVar7 = false;
        goto LAB_8004637c;
      }
LAB_80044d9c:
      uVar47 = puVar74[0x17] >> 0x10;
      uVar65 = uVar9 + (uVar47 & 0xff) + 4;
      iVar29 = gte_stL22L23();
      gte_ldL13L21(puVar74[0x17] & 0xffff);
      gte_ldL31L32(uVar47);
      iVar76 = *piVar62;
      iVar66 = iVar29 * 8;
      iVar60 = 0;
      if (iVar66 < 1) {
        iVar60 = ((uint)(iVar29 * -8) >> (uVar65 & 0x1f)) << 3;
        iVar66 = 1;
      }
      iVar29 = gte_stVXY1();
      piVar64 = (int *)(iVar29 + iVar60);
      uVar47 = piVar62[1];
      piVar63 = piVar64 + 0x300;
      piVar26 = piVar64;
      puVar21 = (undefined4 *)primitiveBuffer_next;
      puVar74 = (uint *)(piVar62 + 1);
LAB_80044e10:
      if (puVar74 != (uint *)(iVar76 + (int)(piVar62 + 1))) {
        uVar61 = uVar47 >> 0x16 & 0x3fc;
        uVar40 = uVar47 >> 0xe & 0x3fc;
        uVar32 = puVar74[1];
        uVar48 = uVar47 >> 6 & 0x3fc;
        uVar25 = (uVar47 & 0xff) * 4;
        uVar67 = SUB42(puVar21,0);
        uVar19 = (undefined)((uint)puVar21 >> 0x10);
        if (uVar48 != uVar25) {
          uVar47 = *(uint *)(uVar61 + 0x1f800000);
          uVar51 = *(uint *)(uVar40 + 0x1f800000);
          uVar50 = *(uint *)(uVar48 + 0x1f800000);
          uVar39 = *(uint *)(uVar25 + 0x1f800000);
          if (uVar9 == 0) {
            uVar55 = uVar47 & uVar51;
            uVar47 = (int)uVar47 >> 5;
            if ((uVar55 & uVar50 & uVar39 & 0x1f) != 0) {
LAB_80045388:
              puVar75 = puVar74 + 2;
              if ((int)uVar32 < 0) {
                puVar75 = puVar74 + 5;
              }
              uVar47 = *puVar75;
              puVar74 = puVar75;
              goto LAB_80044e10;
            }
            uVar51 = (int)uVar51 >> 5;
            uVar50 = (int)uVar50 >> 5;
            uVar39 = (int)uVar39 >> 5;
          }
          gte_ldSXY0(uVar47);
          gte_ldSXY1(uVar51);
          gte_ldSXY2(uVar50);
          gte_nclip_b();
          puVar21[2] = uVar47;
          if ((int)uVar32 < 0) {
            puVar21[5] = uVar51;
            puVar21[8] = uVar50;
            puVar21[0xb] = uVar39;
            puVar74 = puVar74 + 5;
            if (0 < (int)puVar30) goto LAB_80044eb8;
LAB_80044ee4:
            iVar60 = gte_stMAC0();
            gte_ldSXY0(uVar39);
          }
          else {
            puVar21[4] = uVar51;
            puVar21[6] = uVar50;
            puVar21[8] = uVar39;
            puVar74 = puVar74 + 2;
            if ((int)puVar30 < 1) goto LAB_80044ee4;
LAB_80044eb8:
            iVar60 = gte_stMAC0();
            gte_ldSXY2(uVar51);
            gte_ldSXY1(uVar50);
            gte_ldSXY0(uVar39);
            iVar60 = -iVar60;
          }
          gte_nclip_b();
          uVar47 = *puVar74;
          uVar51 = uVar32 >> 8 & 0x1fc;
          uVar50 = uVar32 >> 1 & 0x1fc;
          ppiVar41 = (int **)((uVar32 >> 0x16 & 0x1fc) + (int)puVar30);
          iVar29 = gte_stMAC0();
          in_t2 = (int **)((uVar32 >> 0xf & 0x1fc) + (int)puVar30);
          if (iVar60 < 0) {
            in_t3 = (int **)(uVar51 + (int)puVar30);
            if (0 < iVar29) {
              piVar42 = *ppiVar41;
              in_t2 = (int **)*in_t2;
              in_t3 = (int **)*in_t3;
              uVar52 = *(undefined4 *)(uVar50 + (int)puVar30);
              uVar3 = *(ushort *)((int)puVar73 + uVar40 + iVar8);
              uVar4 = *(ushort *)((int)puVar73 + uVar48 + iVar8);
              uVar5 = *(ushort *)((int)puVar73 + uVar25 + iVar8);
              iVar60 = (uint)*(ushort *)((int)puVar73 + uVar61 + iVar8) - iVar66;
              if ((int)uVar32 < 0) {
                uVar61 = puVar74[-3];
                uVar40 = puVar74[-2];
                iVar60 = iVar60 + (uint)uVar3 + (uint)uVar4 + (uint)uVar5;
                iVar29 = iVar60 - (((int)(uVar32 << 0x1d) >> 0x1b) << (uVar65 & 0x1f));
                if ((-1 < iVar60) && (-1 < iVar29)) {
                  piVar11 = piVar64 + (iVar29 >> (uVar65 & 0x1f)) * 2;
                  puVar16 = (undefined2 *)*piVar11;
                  uVar48 = puVar74[-1];
                  puVar21[4] = in_t2;
                  puVar21[7] = in_t3;
                  puVar21[10] = uVar52;
                  puVar21[1] = piVar42 + ((int)uVar40 >> 0x1f) * -0x800000 + 0xf000000;
                  *puVar21 = 0xc000000;
                  puVar21[3] = uVar61 + iVar57;
                  puVar21[6] = uVar40;
                  puVar21[9] = uVar48;
                  puVar21[0xc] = uVar48 >> 0x10;
                  *piVar11 = (int)puVar21;
                  if (puVar16 == (undefined2 *)0x0) {
                    if (0 < (int)piVar63 - (int)piVar11) {
                      piVar63 = piVar11;
                    }
                    piVar11[1] = (int)puVar21;
                    if ((int)piVar26 - (int)piVar11 < 0) {
                      piVar26 = piVar11;
                    }
                    puVar21 = puVar21 + 0xd;
                  }
                  else {
                    *puVar16 = uVar67;
                    *(undefined *)(puVar16 + 1) = uVar19;
                    puVar21 = puVar21 + 0xd;
                  }
                }
              }
              else {
                puVar21[1] = piVar42 + 0xe000000;
                puVar21[3] = in_t2;
                puVar21[5] = in_t3;
                puVar21[7] = uVar52;
                iVar60 = iVar60 + (uint)uVar3 + (uint)uVar4 + (uint)uVar5;
                if (-1 < iVar60) {
                  *puVar21 = 0x8000000;
                  iVar60 = iVar60 - (((int)(uVar32 << 0x1d) >> 0x1b) << (uVar65 & 0x1f));
                  if (-1 < iVar60) {
                    piVar42 = piVar64 + (iVar60 >> (uVar65 & 0x1f)) * 2;
                    puVar16 = (undefined2 *)*piVar42;
                    *piVar42 = (int)puVar21;
                    if (puVar16 == (undefined2 *)0x0) {
                      if (0 < (int)piVar63 - (int)piVar42) {
                        piVar63 = piVar42;
                      }
                      piVar42[1] = (int)puVar21;
                      if ((int)piVar26 - (int)piVar42 < 0) {
                        piVar26 = piVar42;
                      }
                      puVar21 = puVar21 + 9;
                    }
                    else {
                      *puVar16 = uVar67;
                      *(undefined *)(puVar16 + 1) = uVar19;
                      puVar21 = puVar21 + 9;
                    }
                  }
                }
              }
              goto LAB_80044e10;
            }
            ppiVar41 = (int **)*ppiVar41;
            in_t2 = (int **)*in_t2;
            bVar7 = false;
          }
          else {
            in_t3 = (int **)(uVar51 + (int)puVar30);
            if (iVar29 < 1) goto LAB_80044e10;
            puVar21[2] = uVar39;
            ppiVar41 = *(int ***)(uVar50 + (int)puVar30);
            in_t2 = (int **)*in_t2;
            bVar7 = true;
            uVar61 = uVar25;
          }
LAB_800451b0:
          uVar48 = (uint)*(ushort *)((int)puVar73 + uVar48 + iVar8);
          iVar60 = ((uint)*(ushort *)((int)puVar73 + uVar61 + iVar8) - iVar66) +
                   (uint)*(ushort *)((int)puVar73 + uVar40 + iVar8) * 2;
          in_t3 = (int **)*in_t3;
LAB_800451dc:
          iVar29 = (int)(uVar32 << 0x1d) >> 0x1b;
          if ((int)uVar32 < 0) {
            uVar61 = puVar74[-3];
            uVar40 = puVar74[-2];
            uVar25 = puVar74[-1];
            if ((-1 < (int)(iVar60 + uVar48)) &&
               (iVar60 = (int)((iVar60 + uVar48) - (iVar29 << (uVar65 & 0x1f))) >> (uVar65 & 0x1f),
               -1 < iVar60)) {
              piVar42 = piVar64 + iVar60 * 2;
              puVar16 = (undefined2 *)*piVar42;
              puVar21[4] = in_t2;
              puVar21[7] = in_t3;
              *puVar21 = 0x9000000;
              puVar21[1] = ppiVar41 + ((int)uVar40 >> 0x1f) * -0x800000 + 0xd000000;
              puVar21[3] = uVar61 + iVar57;
              puVar21[6] = uVar40;
              puVar21[9] = uVar25;
              if (bVar7) {
                *(short *)(puVar21 + 3) = (short)(uVar25 >> 0x10);
              }
              *piVar42 = (int)puVar21;
              if (puVar16 == (undefined2 *)0x0) {
                if (0 < (int)piVar63 - (int)piVar42) {
                  piVar63 = piVar42;
                }
                piVar42[1] = (int)puVar21;
                if ((int)piVar26 - (int)piVar42 < 0) {
                  piVar26 = piVar42;
                }
                puVar21 = puVar21 + 10;
              }
              else {
                *puVar16 = uVar67;
                *(undefined *)(puVar16 + 1) = uVar19;
                puVar21 = puVar21 + 10;
              }
            }
          }
          else {
            puVar21[3] = in_t2;
            puVar21[5] = in_t3;
            puVar21[1] = ppiVar41 + 0xc000000;
            if (-1 < (int)(iVar60 + uVar48)) {
              *puVar21 = 0x6000000;
              iVar60 = (int)((iVar60 + uVar48) - (iVar29 << (uVar65 & 0x1f))) >> (uVar65 & 0x1f);
              if (-1 < iVar60) {
                piVar42 = piVar64 + iVar60 * 2;
                puVar16 = (undefined2 *)*piVar42;
                *piVar42 = (int)puVar21;
                if (puVar16 == (undefined2 *)0x0) {
                  if (0 < (int)piVar63 - (int)piVar42) {
                    piVar63 = piVar42;
                  }
                  piVar42[1] = (int)puVar21;
                  if ((int)piVar26 - (int)piVar42 < 0) {
                    piVar26 = piVar42;
                  }
                  puVar21 = puVar21 + 7;
                }
                else {
                  *puVar16 = uVar67;
                  *(undefined *)(puVar16 + 1) = uVar19;
                  puVar21 = puVar21 + 7;
                }
              }
            }
          }
          goto LAB_80044e10;
        }
        uVar47 = *(uint *)(uVar61 + 0x1f800000);
        uVar25 = *(uint *)(uVar40 + 0x1f800000);
        uVar51 = *(uint *)(uVar48 + 0x1f800000);
        if (uVar9 == 0) {
          uVar50 = uVar47 & uVar25;
          uVar47 = (int)uVar47 >> 5;
          if ((uVar50 & uVar51 & 0x1f) != 0) goto LAB_80045388;
          uVar25 = (int)uVar25 >> 5;
          uVar51 = (int)uVar51 >> 5;
        }
        gte_ldSXY0(uVar47);
        gte_ldSXY1(uVar25);
        gte_ldSXY2(uVar51);
        gte_nclip_b();
        puVar21[2] = uVar47;
        if ((uVar32 & 0x30) != 0) {
          iVar60 = gte_stL11L12();
          if ((uint *)(uVar32 & 0x10) == (uint *)0x0) {
            bVar7 = false;
            if ((int)uVar32 < 0) {
              puVar21[5] = uVar25;
              puVar21[8] = uVar51;
              puVar74 = puVar74 + 5;
            }
            else {
              puVar21[4] = uVar25;
              puVar21[6] = uVar51;
              puVar74 = puVar74 + 2;
            }
            iVar29 = gte_stMAC0();
            uVar47 = *puVar74;
            if ((iVar29 != 0) &&
               ((uVar50 = uVar32 >> 0x16 & 0x1fc, (uVar32 & 8) != 0 || (-1 < iVar29)))) {
              if (iVar60 != 0) {
                if (iVar60 == 1) {
                  iVar60 = gte_stL33();
                  iVar29 = *(int *)(uVar50 + (int)puVar30);
                  uVar52 = *(undefined4 *)((uVar32 >> 0xf & 0x1fc) + (int)puVar30);
                  uVar46 = *(undefined4 *)((uVar32 >> 8 & 0x1fc) + (int)puVar30);
                  if (iVar60 != 0) {
                    gte_ldIR0(iVar60);
                    gte_ldRGB(iVar29);
                    gte_dpcs();
                    iVar29 = gte_stRGB2();
                    gte_ldRGB(uVar52);
                    gte_dpcs();
                    uVar52 = gte_stRGB2();
                    gte_ldRGB(uVar46);
                    gte_dpcs();
                    uVar46 = gte_stRGB2();
                  }
                  puVar21[4] = uVar52;
                  puVar21[5] = uVar25;
                  puVar21[7] = uVar46;
                  puVar21[8] = uVar51;
                  uVar52 = gte_stLR1LR2();
                  puVar21[1] = iVar29 + 0x34000000;
                  *(short *)((int)puVar21 + 0x1a) = (short)uVar52;
                  *(short *)((int)puVar21 + 0xe) = (short)((uint)uVar52 >> 0x10);
                  *puVar21 = 0x9000000;
                  do {
                    iVar60 = uVar61 + iVar8;
                    uVar9 = *(uint *)((int)puVar73 + iVar60 + 0x400);
                    if (*(short *)((int)puVar73 + iVar60 + 2) != 0x4000) {
                      gte_ldIR3((int)*(short *)((int)puVar73 + iVar60 + 2));
                      gte_ldIR1((int)(short)uVar9);
                      gte_ldIR2((int)uVar9 >> 0x10);
                      gte_rtir();
                      iVar57 = gte_stMAC3();
                      iVar66 = gte_stMAC1();
                      iVar76 = gte_stMAC2();
                      gte_sqr0_b(0);
                      iVar29 = iVar57;
                      if (iVar57 < 0) {
                        iVar29 = -iVar57;
                      }
                      iVar33 = -iVar66;
                      if (0 < iVar66) {
                        iVar33 = iVar66;
                      }
                      iVar31 = iVar29;
                      if (0 < iVar29 - iVar33) {
                        iVar31 = iVar33;
                        iVar33 = iVar29;
                      }
                      iVar31 = iVar31 * 0x40;
                      if (iVar33 == 0) {
                        iVar33 = 1;
                      }
                      read_mt(iVar31,iVar33,iVar29);
                      uVar47 = iVar31 + iVar33 + iVar29;
                      gte_ldLZCS(uVar47);
                      if (uVar47 != 0) {
                        uVar9 = gte_stLZCR();
                        uVar65 = (uVar9 & 0xfffffffe) - 0x18;
                        iVar29 = uVar47 << (uVar65 & 0x1f);
                        if ((int)uVar65 < 0) {
                          iVar29 = (int)uVar47 >> (-uVar65 & 0x1f);
                        }
                        uVar47 = (uint)((int)squareRootLookup[iVar29 + -0x40] <<
                                       ((int)(0x1f - (uVar9 & 0xfffffffe)) >> 1 & 0x1fU)) >> 0xc;
                        uVar9 = iVar31 / iVar33;
                      }
                      if (iVar57 < 0) {
                        if (iVar66 < 1) {
                          bVar7 = true;
                          if (iVar66 - iVar57 < 0) {
                            bVar7 = false;
                            iVar29 = 0x40;
                          }
                          else {
                            iVar29 = 0x80;
                          }
                        }
                        else {
                          bVar7 = false;
                          if (-iVar66 - iVar57 < 0) {
                            bVar7 = true;
                            iVar29 = 0xc0;
                          }
                          else {
                            iVar29 = 0x80;
                          }
                        }
                      }
                      else if (iVar66 < 1) {
                        bVar7 = false;
                        if (iVar57 + iVar66 < 0) {
                          bVar7 = true;
                          iVar29 = 0x40;
                        }
                        else {
                          iVar29 = 0;
                        }
                      }
                      else {
                        bVar7 = true;
                        if (iVar57 - iVar66 < 0) {
                          bVar7 = false;
                          iVar29 = 0xc0;
                        }
                        else {
                          iVar29 = 0;
                        }
                      }
                      uVar9 = (uint)(byte)(&DAT_80062630)[uVar9];
                      if (bVar7) {
                        uVar9 = -uVar9;
                      }
                      iVar57 = (iVar76 * -0x1000) / (int)uVar47 >> 5;
                      iVar66 = iVar57 + -0x80;
                      if (iVar57 < 0) {
                        iVar57 = 0;
                      }
                      if (0 < iVar66) {
                        iVar57 = 0x80;
                      }
                      iVar66 = gte_stLR3LG1();
                      uVar9 = iVar29 + uVar9 + iVar66 & 0xff;
                      gte_ldIR0((uint)((byte)(&DAT_800625ac)[iVar57] >> 1));
                      gte_ldIR1((int)cosineLookupTable[uVar9]);
                      gte_ldIR2((int)sineLookupTable[uVar9]);
                      gte_gpf0(0);
                      iVar29 = gte_stMAC1();
                      iVar57 = gte_stMAC2();
                      uVar9 = ((iVar57 >> 0xc) + 0x40) * 0x100 | (iVar29 >> 0xc) + 0x40U;
                      *(uint *)((int)puVar73 + iVar60 + 0x400) = uVar9;
                      *(undefined2 *)((int)puVar73 + iVar60 + 2) = 0x4000;
                    }
                    *(short *)(puVar21 + 3) = (short)uVar9;
                    uVar61 = uVar40;
                  } while( true );
                }
                if (iVar60 == 2) {
                  gte_ldIR3((int)(uVar32 << 1) >> 0x18);
                  gte_ldIR1((int)(uVar32 << 9) >> 0x18);
                  gte_ldIR2((int)(uVar32 << 0x11) >> 0x18);
                  uVar52 = gte_stL33();
                  gte_rtir_b();
                  uVar48 = (uint)*(ushort *)((int)puVar73 + uVar48 + iVar8);
                  gte_ldIR0(uVar52);
                  gte_gpf0_b(0);
                  iVar60 = ((uint)*(ushort *)((int)puVar73 + uVar61 + iVar8) - iVar66) +
                           (uint)*(ushort *)((int)puVar73 + uVar40 + iVar8) * 2;
                  gte_ldRGB(0xffffff);
                  gte_cc();
                  ppiVar41 = (int **)gte_stRGB2();
                  in_t2 = (int **)gte_stRGB2();
                  in_t3 = ppiVar41;
                  goto LAB_800451dc;
                }
                goto LAB_8004518c;
              }
              gte_ldRGB(*(undefined4 *)(uVar50 + (int)puVar30));
              gte_dpcs_b();
              uVar25 = gte_stRGB2();
              gte_ldRGB(*(undefined4 *)((uVar32 >> 0xf & 0x1fc) + (int)puVar30));
              gte_dpcs_b();
              in_t2 = (int **)gte_stRGB2();
              gte_ldRGB(*(undefined4 *)((uVar32 >> 8 & 0x1fc) + (int)puVar30));
              ppiVar41 = (int **)(uVar25 & 0xffffff);
              gte_dpcs_b();
              uVar48 = (uint)*(ushort *)((int)puVar73 + uVar48 + iVar8);
              in_t3 = (int **)gte_stRGB2();
              iVar60 = ((uint)*(ushort *)((int)puVar73 + uVar61 + iVar8) - iVar66) +
                       (uint)*(ushort *)((int)puVar73 + uVar40 + iVar8) * 2;
              goto LAB_800451dc;
            }
            goto LAB_80044e10;
          }
          uVar48 = *(uint *)(uVar61 + 0x1f800000);
          uVar61 = (uint)*(ushort *)((int)puVar73 + uVar61 + iVar8);
          if ((uVar9 == 0) &&
             (uVar47 = uVar48 & 0xf, uVar48 = (int)uVar48 >> 5, puVar75 = (uint *)(uVar32 & 0x10),
             uVar47 != 0)) {
LAB_8004584c:
            uVar47 = puVar74[5];
          }
          else {
            iVar60 = *(int *)(uVar40 + (int)puVar30);
            puVar75 = puVar77;
            if ((int)(uVar61 - 0x80) < 0) goto LAB_8004584c;
            iVar29 = uVar61 * 4 - iVar66;
            puVar49 = puVar74 + 5;
            uVar47 = *puVar49;
            if ((-1 < iVar29) &&
               (iVar29 = iVar29 - (((int)(uVar32 << 0x1d) >> 0x1b) << (uVar65 & 0x1f)) >>
                         (uVar65 & 0x1f), -1 < iVar29)) {
              piVar42 = piVar64 + iVar29 * 2;
              puVar16 = (undefined2 *)*piVar42;
              in_t2 = (int **)puVar74[2];
              in_t3 = (int **)puVar74[3];
              uVar40 = puVar74[4];
              uVar25 = (uVar32 >> 0x16) * (0x1550000 / uVar61);
              *puVar21 = 0x9000000;
              puVar21[1] = iVar60 + 0x2c000000 + ((int)in_t3 >> 0x1f) * -0x2000000;
              uVar61 = (uVar32 >> 0xc & 0x3ff) * (0x1550000 / uVar61);
              puVar21[3] = in_t2;
              puVar21[5] = in_t3;
              puVar21[7] = uVar40;
              puVar21[9] = uVar40 >> 0x10;
              sVar58 = (short)uVar48 + (short)(uVar25 >> 0x10);
              sVar34 = sVar58 - (short)(uVar25 >> 0xf);
              *(short *)(puVar21 + 2) = sVar34;
              *(short *)(puVar21 + 4) = sVar58;
              *(short *)(puVar21 + 6) = sVar34;
              *(short *)(puVar21 + 8) = sVar58;
              sVar58 = (short)(uVar48 >> 0x10) + (short)(uVar61 >> 0x10);
              sVar34 = sVar58 - (short)(uVar61 >> 0xf);
              *(short *)((int)puVar21 + 10) = sVar34;
              *(short *)((int)puVar21 + 0x12) = sVar34;
              *(short *)((int)puVar21 + 0x1a) = sVar58;
              *(short *)((int)puVar21 + 0x22) = sVar58;
              *piVar42 = (int)puVar21;
              puVar74 = puVar49;
              if (puVar16 == (undefined2 *)0x0) {
                if (0 < (int)piVar63 - (int)piVar42) {
                  piVar63 = piVar42;
                }
                piVar42[1] = (int)puVar21;
                if ((int)piVar26 - (int)piVar42 < 0) {
                  piVar26 = piVar42;
                }
                puVar21 = puVar21 + 10;
              }
              else {
                *puVar16 = uVar67;
                *(undefined *)(puVar16 + 1) = uVar19;
                puVar21 = puVar21 + 10;
              }
              goto LAB_80044e10;
            }
          }
          puVar74 = puVar74 + 5;
          puVar77 = puVar75;
          goto LAB_80044e10;
        }
        if ((int)uVar32 < 0) {
          puVar21[5] = uVar25;
          puVar21[8] = uVar51;
          puVar74 = puVar74 + 5;
          if (0 < (int)puVar30) goto LAB_80045150;
LAB_8004516c:
          iVar60 = gte_stMAC0();
        }
        else {
          puVar21[4] = uVar25;
          puVar21[6] = uVar51;
          puVar74 = puVar74 + 2;
          if ((int)puVar30 < 1) goto LAB_8004516c;
LAB_80045150:
          iVar60 = gte_stMAC0();
          iVar60 = -iVar60;
        }
        uVar47 = *puVar74;
        if ((iVar60 != 0) && ((uVar50 = uVar32 >> 0x16 & 0x1fc, (uVar32 & 8) != 0 || (-1 < iVar60)))
           ) {
LAB_8004518c:
          bVar7 = false;
          ppiVar41 = *(int ***)(uVar50 + (int)puVar30);
          in_t2 = *(int ***)((uVar32 >> 0xf & 0x1fc) + (int)puVar30);
          in_t3 = (int **)((uVar32 >> 8 & 0x1fc) + (int)puVar30);
          goto LAB_800451b0;
        }
        goto LAB_80044e10;
      }
      goto LAB_8004539c;
    }
  }
  piVar62 = *(int **)(uVar61 + 0x10);
  iVar57 = 0;
  puVar17 = *(undefined4 **)(uVar61 + 0x14);
  goto LAB_80044d8c;
LAB_80046fcc:
  puVar77 = (uint *)gte_stLR3LG1();
LAB_8004539c:
  piVar62 = DAT_80066ffc;
  iVar8 = gte_stL13L21();
  uVar9 = gte_stL31L32();
  if (-1 < (int)piVar26 - (int)piVar63) {
    iVar60 = gte_stVXY1();
    iVar8 = iVar8 * 8 + (((iVar60 + 0x400) - (int)piVar26 << (uVar9 >> 8 & 0x1f)) >> 8) * -8 + -8;
    if (iVar8 < 0) {
      iVar8 = 0;
    }
    piVar63 = piVar63 + -2;
    piVar64 = (int *)(iVar8 + (int)DAT_80066ffc);
LAB_80045400:
    piVar42 = piVar64;
    ppiVar41 = (int **)*piVar42;
    piVar64 = (int *)((int)piVar26 - (0x100U >> (uVar9 >> 8 & 0x1f)));
    if (0 < (int)piVar63 - (int)piVar64) {
      piVar64 = piVar63;
    }
    if (ppiVar41 == (int **)0x0) {
      while (piVar11 = piVar26, piVar26 = piVar11, ppiVar44 = ppiVar41, piVar11 != piVar64) {
        piVar26 = piVar11 + -2;
        if (piVar11[1] != 0) {
          ppiVar41 = (int **)*piVar11;
          piVar42[1] = piVar11[1];
          piVar11[1] = 0;
          *piVar11 = 0;
          goto LAB_80045444;
        }
      }
    }
    else {
LAB_80045444:
      do {
        do {
          piVar11 = piVar26;
          iVar8 = piVar11[1];
          piVar26 = piVar11;
          ppiVar44 = ppiVar41;
          if (piVar11 == piVar64) goto LAB_80045474;
          piVar26 = piVar11 + -2;
        } while (iVar8 == 0);
        ppiVar44 = (int **)*piVar11;
        *(short *)ppiVar41 = (short)iVar8;
        *(char *)((int)ppiVar41 + 2) = (char)((uint)iVar8 >> 0x10);
        *piVar11 = 0;
        piVar11[1] = 0;
        ppiVar41 = ppiVar44;
        in_t2 = ppiVar44;
      } while (piVar26 != piVar64);
    }
LAB_80045474:
    *piVar42 = (int)ppiVar44;
    primitiveBuffer_next = (undefined *)puVar21;
    if (piVar64 != piVar63) {
      piVar64 = piVar42 + -2;
      if (piVar42 == piVar62) {
        piVar64 = piVar42;
      }
      goto LAB_80045400;
    }
  }
LAB_80045498:
  iVar8 = gte_stVXY1();
  puVar75 = *(uint **)(iVar8 + 0x1800);
  puVar17 = (undefined4 *)(iVar8 + 0x1808);
  puVar74 = puVar77;
  if (puVar75 != (uint *)0x0) {
    iVar8 = *(int *)(iVar8 + 0x1804);
    do {
      uVar9 = *puVar75;
      puVar30 = (undefined4 *)((uVar9 & 0xffff) + iVar8);
      uVar47 = uVar9 >> 0x16 & 0x1fc;
      puVar75 = (uint *)((int)puVar75 + uVar47 + 4);
      do {
        uVar52 = *puVar17;
        puVar17 = puVar17 + 1;
        *puVar30 = uVar52;
        uVar47 = uVar47 - 4;
        puVar30 = puVar30 + 1;
      } while (0 < (int)uVar47);
    } while (0 < (int)uVar9);
  }
  goto LAB_80044550;
LAB_800462cc:
  uVar47 = *(uint *)(uVar61 + 0x1f800000);
  uVar25 = *(uint *)(uVar40 + 0x1f800000);
  uVar51 = *(uint *)(uVar48 + 0x1f800000);
  if (uVar9 == 0) {
    uVar50 = uVar47 & uVar25;
    uVar47 = (int)uVar47 >> 5;
    if ((uVar50 & uVar51 & 0x1f) != 0) goto LAB_800464fc;
    uVar25 = (int)uVar25 >> 5;
    uVar51 = (int)uVar51 >> 5;
  }
  gte_ldSXY0(uVar47);
  gte_ldSXY1(uVar25);
  gte_ldSXY2(uVar51);
  gte_nclip_b();
  puVar21[2] = uVar47;
  bVar7 = false;
  if ((int)uVar32 < 0) {
    puVar21[5] = uVar25;
    puVar21[8] = uVar51;
    puVar74 = puVar74 + 5;
  }
  else {
    puVar21[4] = uVar25;
    puVar21[6] = uVar51;
    puVar74 = puVar74 + 2;
  }
  iVar60 = gte_stMAC0();
  uVar47 = *puVar74;
  if ((iVar60 == 0) || (((uVar32 & 8) == 0 && (iVar60 < 0)))) goto LAB_80045fec;
  uVar51 = *(uint *)((uVar32 >> 0x16 & 0x1fc) + (int)puVar17);
  in_t2 = *(int ***)((uVar32 >> 0xf & 0x1fc) + (int)puVar17);
  in_t3 = (int **)((uVar32 >> 8 & 0x1fc) + (int)puVar17);
LAB_8004637c:
  puVar12 = (ushort *)((int)puVar73 + uVar61 + iVar8);
  puVar18 = (ushort *)((int)puVar73 + uVar40 + iVar8);
  puVar22 = (ushort *)((int)puVar73 + uVar48 + iVar8);
  uVar40 = *(uint *)(puVar12 + 0x200);
  uVar61 = *(uint *)(puVar18 + 0x200);
  uVar48 = *(uint *)(puVar22 + 0x200);
  in_t3 = (int **)*in_t3;
  if ((int)(uVar40 | uVar61 | uVar48) < 0) {
    if (-1 < (int)(uVar40 & uVar61 & uVar48)) {
      iVar60 = ((uint)*puVar12 - iVar66) + (uint)*puVar18 * 2 + (uint)*puVar22;
      if ((-1 < iVar60) &&
         (iVar60 = iVar60 - (((int)(uVar32 << 0x1d) >> 0x1b) << (uVar65 & 0x1f)) >> (uVar65 & 0x1f),
         -1 < iVar60)) {
        gte_ldLB1LB2(iVar60 << 3);
        gte_ldLB3(0);
        ppiVar41 = (int **)puVar21[2];
        if ((int)uVar32 < 0) {
          ppiVar44 = (int **)puVar21[5];
          ppiVar23 = (int **)puVar21[8];
          uVar25 = puVar74[-2];
          uVar32 = puVar74[-1];
          uVar50 = puVar74[-3] + iVar57;
        }
        else {
          ppiVar44 = (int **)puVar21[4];
          ppiVar23 = (int **)puVar21[6];
          uVar50 = 0;
          uVar25 = 0;
          uVar32 = 0;
        }
        uVar47 = uVar50;
        if (bVar7) {
          uVar47 = uVar32 >> 0x10;
        }
        gte_ldLG2LG3((uVar50 & 0xffff0000) + (uVar25 >> 0x10));
        uVar47 = uVar47 & 0xffff;
        uVar25 = uVar25 & 0xffff;
        uVar32 = uVar32 & 0xffff;
        ppiVar36 = (int **)(uVar51 & 0xffffff);
LAB_80046888:
        ppiVar13 = ppiVar41;
        ppiVar24 = ppiVar23;
        uVar51 = uVar47;
        uVar50 = uVar32;
        ppiVar37 = ppiVar36;
        ppiVar43 = in_t3;
        uVar39 = uVar40;
        uVar55 = uVar48;
        if (((int)(uVar61 ^ uVar48) < 0) &&
           (ppiVar13 = ppiVar23, ppiVar24 = ppiVar41, uVar51 = uVar32, uVar50 = uVar47,
           ppiVar37 = in_t3, ppiVar43 = ppiVar36, uVar39 = uVar48, uVar55 = uVar40,
           (int)(uVar40 ^ uVar61) < 0)) {
          ppiVar13 = ppiVar44;
          ppiVar44 = ppiVar41;
          ppiVar24 = ppiVar23;
          uVar51 = uVar25;
          uVar25 = uVar47;
          uVar50 = uVar32;
          ppiVar37 = in_t2;
          in_t2 = ppiVar36;
          ppiVar43 = in_t3;
          uVar39 = uVar61;
          uVar61 = uVar40;
          uVar55 = uVar48;
        }
        iVar60 = (int)ppiVar13 >> 0x10;
        sVar58 = (short)ppiVar13;
        if ((int)uVar39 < 0) {
          gte_ldLR1LR2(uVar39 >> 0x1f);
          iVar76 = (int)(uVar61 << 0xc) / (int)(uVar61 - uVar39);
          iVar33 = (int)(uVar55 << 0xc) / (int)(uVar55 - uVar39);
          gte_ldIR0(iVar76);
          gte_ldRFC(iVar60);
          gte_ldGFC((int)sVar58);
          gte_ldIR1((int)ppiVar44 >> 0x10);
          gte_ldIR2((int)(short)ppiVar44);
          gte_intpl();
          iVar29 = gte_stMAC1();
          iVar31 = gte_stMAC2();
          ppiVar45 = (int **)(iVar29 * 0x10000 + iVar31);
          gte_ldRFC(uVar51 & 0xff);
          gte_ldGFC(uVar51 >> 8 & 0xff);
          gte_ldIR1(uVar25 & 0xff);
          gte_ldIR2(uVar25 >> 8 & 0xff);
          gte_intpl();
          iVar29 = gte_stMAC2();
          iVar31 = gte_stMAC1();
          uVar61 = iVar29 * 0x100 + iVar31;
          gte_ldIR0(iVar33);
          gte_ldRFC(iVar60);
          gte_ldGFC((int)sVar58);
          gte_ldIR1((int)ppiVar24 >> 0x10);
          gte_ldIR2((int)(short)ppiVar24);
          gte_intpl();
          iVar60 = gte_stMAC1();
          iVar29 = gte_stMAC2();
          ppiVar23 = (int **)(iVar60 * 0x10000 + iVar29);
          gte_ldRFC(uVar51 & 0xff);
          gte_ldGFC(uVar51 >> 8 & 0xff);
          gte_ldIR1(uVar50 & 0xff);
          gte_ldIR2(uVar50 >> 8 & 0xff);
          gte_intpl();
          iVar60 = gte_stMAC2();
          iVar29 = gte_stMAC1();
          uVar32 = iVar60 * 0x100 + iVar29;
        }
        else {
          gte_ldLR1LR2(uVar39 >> 0x1f);
          iVar76 = (int)(uVar39 << 0xc) / (int)(uVar39 - uVar61);
          iVar33 = (int)(uVar39 << 0xc) / (int)(uVar39 - uVar55);
          gte_ldIR0(iVar76);
          gte_ldIR1(iVar60);
          gte_ldIR2((int)sVar58);
          gte_ldRFC((int)ppiVar44 >> 0x10);
          gte_ldGFC((int)(short)ppiVar44);
          gte_intpl();
          iVar29 = gte_stMAC1();
          iVar31 = gte_stMAC2();
          ppiVar45 = (int **)(iVar29 * 0x10000 + iVar31);
          gte_ldIR1(uVar51 & 0xff);
          gte_ldIR2(uVar51 >> 8 & 0xff);
          gte_ldRFC(uVar25 & 0xff);
          gte_ldGFC(uVar25 >> 8 & 0xff);
          gte_intpl();
          iVar29 = gte_stMAC2();
          iVar31 = gte_stMAC1();
          uVar61 = iVar29 * 0x100 + iVar31;
          gte_ldIR0(iVar33);
          gte_ldIR1(iVar60);
          gte_ldIR2((int)sVar58);
          gte_ldRFC((int)ppiVar24 >> 0x10);
          gte_ldGFC((int)(short)ppiVar24);
          gte_intpl();
          iVar60 = gte_stMAC1();
          iVar29 = gte_stMAC2();
          ppiVar23 = (int **)(iVar60 * 0x10000 + iVar29);
          gte_ldIR1(uVar51 & 0xff);
          gte_ldIR2(uVar51 >> 8 & 0xff);
          gte_ldRFC(uVar50 & 0xff);
          gte_ldGFC(uVar50 >> 8 & 0xff);
          gte_intpl();
          iVar60 = gte_stMAC2();
          iVar29 = gte_stMAC1();
          uVar32 = iVar60 * 0x100 + iVar29;
          iVar76 = 0x1000 - iVar76;
          iVar33 = 0x1000 - iVar33;
        }
        gte_ldRFC(((uint)ppiVar37 & 0xff) << 4);
        gte_ldGFC((uint)ppiVar37 >> 4 & 0xff0);
        gte_ldBFC((uint)ppiVar37 >> 0xc & 0xff0);
        gte_ldIR0(iVar76);
        gte_ldRGB(in_t2);
        gte_dpcs();
        ppiVar53 = (int **)gte_stRGB2();
        gte_ldIR0(iVar33);
        gte_ldRGB(ppiVar43);
        gte_dpcs();
        in_t3 = (int **)gte_stRGB2();
        uVar52 = gte_stRBK();
        uVar46 = gte_stGBK();
        gte_ldRFC(uVar52);
        uVar52 = gte_stBBK();
        gte_ldGFC(uVar46);
        gte_ldBFC(uVar52);
        uVar19 = (undefined)((uint)puVar21 >> 0x10);
        if ((uVar51 | uVar25) == 0) {
          iVar60 = gte_stLR1LR2();
          *puVar21 = 0x8000000;
          uVar52 = 0;
          if (iVar60 < 1) {
            if (0 < (int)puVar17) goto LAB_80046ee8;
            uVar52 = 0x800;
          }
          gte_ldIR0(uVar52);
          gte_ldRGB(in_t2);
          puVar21[2] = ppiVar44;
          gte_dpcs_b();
          iVar60 = gte_stRGB2();
          gte_ldRGB(ppiVar53);
          gte_dpcs_b();
          puVar21[1] = iVar60 + 0x38000000;
          uVar52 = gte_stRGB2();
          gte_ldRGB(ppiVar43);
          puVar21[4] = ppiVar45;
          puVar21[3] = uVar52;
          gte_dpcs_b();
          uVar52 = gte_stRGB2();
          gte_ldRGB(in_t3);
          puVar21[6] = ppiVar24;
          puVar21[5] = uVar52;
          gte_dpcs_b();
          uVar52 = gte_stRGB2();
          puVar21[8] = ppiVar23;
          puVar21[7] = uVar52;
          iVar29 = gte_stIR0();
          iVar60 = gte_stLB1LB2();
          piVar62 = (int *)(iVar60 + (int)piVar64);
          if (iVar29 != 0) {
            iVar60 = gte_stL33();
            piVar62 = (int *)((int)piVar62 + iVar60);
          }
          puVar16 = (undefined2 *)*piVar62;
          *piVar62 = (int)puVar21;
          if (puVar16 != (undefined2 *)0x0) {
            *puVar16 = (short)puVar21;
            *(undefined *)(puVar16 + 1) = uVar19;
            puVar21 = puVar21 + 9;
            goto LAB_80046ee8;
          }
          if (0 < (int)piVar63 - (int)piVar62) {
            piVar63 = piVar62;
          }
          piVar62[1] = (int)puVar21;
          if ((int)piVar26 - (int)piVar62 < 0) {
            piVar26 = piVar62;
          }
          puVar21 = puVar21 + 9;
          goto LAB_80046ee8;
        }
        iVar60 = gte_stLR1LR2();
        *puVar21 = 0xc000000;
        uVar52 = 0;
        ppiVar41 = ppiVar13;
        uVar47 = uVar51;
        ppiVar36 = ppiVar37;
        if (iVar60 < 1) {
          if (0 < (int)puVar17) goto LAB_80046d08;
          uVar52 = 0x800;
        }
        gte_ldIR0(uVar52);
        gte_ldRGB(in_t2);
        puVar21[2] = ppiVar44;
        *(short *)(puVar21 + 3) = (short)uVar25;
        gte_dpcs_b();
        iVar60 = gte_stRGB2();
        gte_ldRGB(ppiVar53);
        gte_dpcs_b();
        puVar21[1] = iVar60 + 0x3c000000;
        puVar21[5] = ppiVar45;
        *(short *)(puVar21 + 6) = (short)uVar61;
        uVar52 = gte_stRGB2();
        gte_ldRGB(ppiVar43);
        puVar21[4] = uVar52;
        puVar21[8] = ppiVar24;
        gte_dpcs_b();
        *(short *)(puVar21 + 9) = (short)uVar50;
        uVar52 = gte_stRGB2();
        gte_ldRGB(in_t3);
        puVar21[0xb] = ppiVar23;
        *(short *)(puVar21 + 0xc) = (short)uVar32;
        gte_dpcs_b();
        uVar46 = gte_stLG2LG3();
        puVar21[7] = uVar52;
        *(short *)((int)puVar21 + 0xe) = (short)((uint)uVar46 >> 0x10);
        *(short *)((int)puVar21 + 0x1a) = (short)uVar46;
        uVar52 = gte_stRGB2();
        puVar21[10] = uVar52;
        iVar29 = gte_stIR0();
        iVar60 = gte_stLB1LB2();
        piVar62 = (int *)(iVar60 + (int)piVar64);
        if (iVar29 != 0) {
          iVar60 = gte_stL33();
          piVar62 = (int *)((int)piVar62 + iVar60);
        }
        puVar16 = (undefined2 *)*piVar62;
        *piVar62 = (int)puVar21;
        if (puVar16 == (undefined2 *)0x0) {
          if (0 < (int)piVar63 - (int)piVar62) {
            piVar63 = piVar62;
          }
          piVar62[1] = (int)puVar21;
          if ((int)piVar26 - (int)piVar62 < 0) {
            piVar26 = piVar62;
          }
          puVar21 = puVar21 + 0xd;
        }
        else {
          *puVar16 = (short)puVar21;
          *(undefined *)(puVar16 + 1) = uVar19;
          puVar21 = puVar21 + 0xd;
        }
LAB_80046d08:
        do {
          iVar60 = gte_stLR1LR2();
          *puVar21 = 0x9000000;
          uVar52 = 0;
          if (iVar60 == 0) {
LAB_80046d28:
            gte_ldIR0(uVar52);
            gte_ldRGB(ppiVar36);
            puVar21[2] = ppiVar41;
            *(short *)(puVar21 + 3) = (short)uVar47;
            gte_dpcs_b();
            iVar60 = gte_stRGB2();
            gte_ldRGB(ppiVar53);
            gte_dpcs_b();
            puVar21[1] = iVar60 + 0x34000000;
            puVar21[5] = ppiVar45;
            *(short *)(puVar21 + 6) = (short)uVar61;
            uVar52 = gte_stRGB2();
            gte_ldRGB(in_t3);
            puVar21[4] = uVar52;
            puVar21[8] = ppiVar23;
            gte_dpcs_b();
            uVar52 = gte_stLG2LG3();
            *(short *)(puVar21 + 9) = (short)uVar32;
            *(short *)((int)puVar21 + 0xe) = (short)((uint)uVar52 >> 0x10);
            *(short *)((int)puVar21 + 0x1a) = (short)uVar52;
            uVar52 = gte_stRGB2();
            puVar21[7] = uVar52;
            iVar29 = gte_stIR0();
            iVar60 = gte_stLB1LB2();
            piVar62 = (int *)(iVar60 + (int)piVar64);
            if (iVar29 != 0) {
              iVar60 = gte_stL33();
              piVar62 = (int *)((int)piVar62 + iVar60);
            }
            puVar16 = (undefined2 *)*piVar62;
            *piVar62 = (int)puVar21;
            if (puVar16 == (undefined2 *)0x0) {
              if (0 < (int)piVar63 - (int)piVar62) {
                piVar63 = piVar62;
              }
              piVar62[1] = (int)puVar21;
              if ((int)piVar26 - (int)piVar62 < 0) {
                piVar26 = piVar62;
              }
              puVar21 = puVar21 + 10;
            }
            else {
              *puVar16 = (short)puVar21;
              *(char *)(puVar16 + 1) = (char)((uint)puVar21 >> 0x10);
              puVar21 = puVar21 + 10;
            }
          }
          else if ((int)puVar17 < 1) {
            uVar52 = 0x800;
            goto LAB_80046d28;
          }
          iVar60 = gte_stLB3();
          uVar47 = *puVar74;
          in_t2 = ppiVar45;
          in_t3 = ppiVar23;
          while( true ) {
            if (iVar60 == 0) goto LAB_80045fec;
            piVar62 = (int *)gte_stLR3LG1();
            ppiVar41 = (int **)*piVar62;
            ppiVar44 = (int **)piVar62[1];
            ppiVar23 = (int **)piVar62[2];
            uVar40 = piVar62[3];
            uVar61 = piVar62[4];
            uVar48 = piVar62[5];
            uVar47 = piVar62[6];
            uVar25 = piVar62[7];
            uVar32 = piVar62[8];
            ppiVar36 = (int **)piVar62[9];
            in_t2 = (int **)piVar62[10];
            in_t3 = (int **)piVar62[0xb];
            gte_ldLB3(0);
LAB_800466fc:
            uVar52 = 0;
            if (((int)(uVar40 | uVar61 | uVar48) < 1) &&
               (uVar52 = 1, -1 < (int)(uVar40 & uVar61 & uVar48))) goto LAB_80046888;
            gte_ldLR1LR2(uVar52);
            ppiVar13 = ppiVar41;
            ppiVar37 = ppiVar36;
            ppiVar45 = ppiVar44;
            uVar61 = uVar25;
            ppiVar53 = in_t2;
            if ((uVar47 | uVar25) != 0) break;
LAB_80046ee8:
            iVar60 = gte_stLR1LR2();
            *puVar21 = 0x6000000;
            uVar52 = 0;
            if (iVar60 == 0) {
LAB_80046f08:
              gte_ldIR0(uVar52);
              gte_ldRGB(ppiVar37);
              puVar21[2] = ppiVar13;
              gte_dpcs_b();
              iVar60 = gte_stRGB2();
              gte_ldRGB(ppiVar53);
              gte_dpcs_b();
              puVar21[1] = iVar60 + 0x30000000;
              uVar52 = gte_stRGB2();
              gte_ldRGB(in_t3);
              puVar21[4] = ppiVar45;
              puVar21[3] = uVar52;
              gte_dpcs_b();
              uVar52 = gte_stRGB2();
              puVar21[6] = ppiVar23;
              puVar21[5] = uVar52;
              iVar29 = gte_stIR0();
              iVar60 = gte_stLB1LB2();
              piVar62 = (int *)(iVar60 + (int)piVar64);
              if (iVar29 != 0) {
                iVar60 = gte_stL33();
                piVar62 = (int *)((int)piVar62 + iVar60);
              }
              puVar16 = (undefined2 *)*piVar62;
              *piVar62 = (int)puVar21;
              if (puVar16 == (undefined2 *)0x0) {
                if (0 < (int)piVar63 - (int)piVar62) {
                  piVar63 = piVar62;
                }
                piVar62[1] = (int)puVar21;
                if ((int)piVar26 - (int)piVar62 < 0) {
                  piVar26 = piVar62;
                }
                puVar21 = puVar21 + 10;
              }
              else {
                *puVar16 = (short)puVar21;
                *(char *)(puVar16 + 1) = (char)((uint)puVar21 >> 0x10);
                puVar21 = puVar21 + 10;
              }
            }
            else if ((int)puVar17 < 1) {
              uVar52 = 0x800;
              goto LAB_80046f08;
            }
            iVar60 = gte_stLB3();
            uVar47 = *puVar74;
            in_t2 = ppiVar45;
            in_t3 = ppiVar23;
          }
        } while( true );
      }
      goto LAB_80045fec;
    }
    if (0 < (int)puVar17) goto LAB_80045fec;
    gte_ldIR0(0x800);
    uVar52 = gte_stRBK();
    uVar46 = gte_stGBK();
    uVar56 = gte_stBBK();
    gte_ldfcdir(uVar52,uVar46,uVar56);
    gte_ldRGB(uVar51);
    gte_dpcs();
    uVar51 = gte_stRGB2();
    gte_ldRGB(in_t2);
    iVar60 = gte_stL33();
    gte_dpcs_b();
    in_t2 = (int **)gte_stRGB2();
    gte_ldRGB(in_t3);
    uVar61 = (uint)*puVar12 + iVar60 * 8;
    gte_dpcs_b();
    in_t3 = (int **)gte_stRGB2();
  }
  else {
    uVar61 = (uint)*puVar12;
  }
  uVar3 = *puVar22;
  iVar60 = (uVar61 - iVar66) + (uint)*puVar18 * 2;
  iVar29 = (int)(uVar32 << 0x1d) >> 0x1b;
  if ((int)uVar32 < 0) {
    uVar61 = puVar74[-3];
    uVar40 = puVar74[-2];
    uVar48 = puVar74[-1];
    iVar60 = iVar60 + (uint)uVar3;
    if ((-1 < iVar60) &&
       (iVar60 = iVar60 - (iVar29 << (uVar65 & 0x1f)) >> (uVar65 & 0x1f), -1 < iVar60)) {
      piVar62 = piVar64 + iVar60 * 2;
      puVar16 = (undefined2 *)*piVar62;
      puVar21[4] = in_t2;
      puVar21[7] = in_t3;
      *puVar21 = 0x9000000;
      puVar21[1] = uVar51 + 0x34000000 + ((int)uVar40 >> 0x1f) * -0x2000000;
      puVar21[3] = uVar61 + iVar57;
      puVar21[6] = uVar40;
      puVar21[9] = uVar48;
      if (bVar7) {
        *(short *)(puVar21 + 3) = (short)(uVar48 >> 0x10);
      }
      *piVar62 = (int)puVar21;
      if (puVar16 == (undefined2 *)0x0) {
        if (0 < (int)piVar63 - (int)piVar62) {
          piVar63 = piVar62;
        }
        piVar62[1] = (int)puVar21;
        if ((int)piVar26 - (int)piVar62 < 0) {
          piVar26 = piVar62;
        }
        puVar21 = puVar21 + 10;
      }
      else {
        *puVar16 = uVar67;
        *(undefined *)(puVar16 + 1) = uVar19;
        puVar21 = puVar21 + 10;
      }
    }
  }
  else {
    puVar21[3] = in_t2;
    puVar21[5] = in_t3;
    puVar21[1] = uVar51 + 0x30000000;
    iVar60 = iVar60 + (uint)uVar3;
    if (-1 < iVar60) {
      *puVar21 = 0x6000000;
      iVar60 = iVar60 - (iVar29 << (uVar65 & 0x1f)) >> (uVar65 & 0x1f);
      if (-1 < iVar60) {
        piVar62 = piVar64 + iVar60 * 2;
        puVar16 = (undefined2 *)*piVar62;
        *piVar62 = (int)puVar21;
        if (puVar16 == (undefined2 *)0x0) {
          if (0 < (int)piVar63 - (int)piVar62) {
            piVar63 = piVar62;
          }
          piVar62[1] = (int)puVar21;
          if ((int)piVar26 - (int)piVar62 < 0) {
            piVar26 = piVar62;
          }
          puVar21 = puVar21 + 7;
        }
        else {
          *puVar16 = uVar67;
          *(undefined *)(puVar16 + 1) = uVar19;
          puVar21 = puVar21 + 7;
        }
      }
    }
  }
  goto LAB_80045fec;
}



// WARNING: Instruction at (ram,0x80047fa0) overlaps instruction at (ram,0x80047f9c)
// 

void FUN_80046fd8(void)

{
  bool bVar1;
  int iVar2;
  uint *puVar3;
  uint *puVar4;
  int iVar5;
  int *piVar6;
  int iVar7;
  uint *puVar8;
  undefined2 *puVar9;
  undefined uVar10;
  uint uVar11;
  uint uVar13;
  uint *puVar14;
  int *piVar15;
  int *piVar16;
  uint uVar17;
  undefined4 uVar18;
  uint uVar19;
  ushort *puVar20;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  int iVar24;
  uint uVar25;
  undefined2 *puVar26;
  int iVar27;
  int iVar28;
  int iVar29;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  int *piVar30;
  int *piVar31;
  undefined4 unaff_s4;
  int *piVar32;
  undefined4 unaff_s5;
  uint uVar33;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  uint uVar34;
  uint uVar35;
  uint *puVar36;
  undefined2 uVar37;
  uint uVar38;
  int **ppiVar39;
  undefined4 unaff_s8;
  uint uVar40;
  undefined4 unaff_retaddr;
  uint *puVar41;
  undefined auStackX_0 [16];
  uint *puVar12;
  
  DAT_8006aa0c = &DAT_80066d38;
  gte_ldLR1LR2(0xf407f884);
  gte_ldLB1LB2(0xf407f884);
  gte_ldLR3LG1(0xf884f400);
  gte_ldLG2LG3(0xf400f407);
  gte_ldLB3(0xf400);
  DAT_1f8003e4 = gte_stVXY1();
  DAT_1f8003e8 = (uint *)(DAT_1f8003e4 + 0x1600);
  DAT_1f8003d4 = DAT_80068214;
  DAT_1f8003c0 = Mat33_80067e84.R12R11;
  DAT_1f8003c4 = Mat33_80067e84.R21R13;
  DAT_1f8003c8 = Mat33_80067e84.R23R22;
  DAT_1f8003cc = Mat33_80067e84.R32R31;
  DAT_1f8003d0 = Mat33_80067e84.R33;
  DAT_1f8003d8 = (uint *)primitiveBuffer_next;
  DAT_1f8003dc = DAT_80066ffc;
  DAT_1f8003e0 = sineLookupTable;
  puVar41 = (uint *)(DAT_1f8003e4 + 0x1c00);
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
LAB_800470cc:
  do {
    do {
      do {
        do {
          puVar36 = puVar41;
          uVar23 = DAT_1f8003d0;
          uVar35 = DAT_1f8003cc;
          uVar34 = DAT_1f8003c8;
          uVar21 = DAT_1f8003c4;
          uVar33 = DAT_1f8003c0;
          uVar40 = *puVar36;
          uVar13 = puVar36[2];
          iVar2 = (int)puVar36[1] >> 0x10;
          if (uVar40 == 0) {
            DAT_80068214 = DAT_1f8003d4;
            primitiveBuffer_next = (undefined *)DAT_1f8003d8;
            return;
          }
          iVar7 = (int)(short)puVar36[1];
          uVar11 = (int)uVar13 >> 0x10;
          uVar38 = puVar36[3];
          if ((int)(uVar13 << 0x10) < 0) goto LAB_80047258;
          gte_ldR11R12(DAT_1f8003c0);
          gte_ldR13R21(DAT_1f8003c4);
          gte_ldR22R23(DAT_1f8003c8);
          gte_ldR31R32(DAT_1f8003cc);
          gte_ldR33(DAT_1f8003d0);
          ppiVar39 = *(int ***)(uVar38 + 0x14);
          gte_ldIR3(iVar2);
          gte_ldIR1(iVar7);
          gte_ldIR2(uVar11);
          puVar41 = puVar36 + 4;
          gte_rtir_b();
          piVar30 = ppiVar39[1];
          uVar11 = gte_stMAC3();
          iVar7 = gte_stMAC2();
          iVar2 = gte_stMAC1();
          piVar32 = *ppiVar39;
        } while (-1 < (int)(uVar11 - (uVar13 & 0xffff)));
        uVar17 = (uint)piVar30 >> 0x14 & 0xff0;
        uVar19 = (uint)piVar30 >> 0xc & 0xff0;
        iVar24 = iVar2;
        if (iVar2 < 0) {
          iVar24 = -iVar2;
        }
      } while (-1 < (int)((iVar24 - uVar17) * 4 + (uVar11 + uVar19) * -3));
      uVar22 = (uint)piVar30 >> 4 & 0xff0;
    } while ((int)(uVar11 + uVar22) < 1);
    if ((*(int *)(uVar40 + 0x1c) < 0) && ((int)(uVar11 - 0x1200) < 0)) {
      *DAT_1f8003d4 = uVar40;
      DAT_1f8003d4[1] = (uint)piVar32 >> 0x18;
      DAT_1f8003d4 = DAT_1f8003d4 + 2;
    }
    iVar24 = iVar7;
    if (iVar7 < 0) {
      iVar24 = -iVar7;
    }
  } while ((int)(uVar11 + ((uint)piVar30 & 0xff) * 0x10 + (iVar24 - uVar22) * -3) < 1);
  *(undefined *)(uVar40 + 0x4d) = 1;
  iVar24 = iVar2;
  if (iVar2 < 0) {
    iVar24 = -iVar2;
  }
  uVar13 = 0x80000000;
  if ((int)((iVar24 + uVar17) * 4 + (uVar11 - uVar19) * -3) < 0) {
    iVar24 = iVar7;
    if (iVar7 < 0) {
      iVar24 = -iVar7;
    }
    uVar13 = 0x80000000;
    if (0 < (int)(uVar11 + ((uint)piVar30 & 0xff) * -0x10 + (iVar24 + uVar22) * -3)) {
      uVar13 = 0;
    }
  }
  goto LAB_800472bc;
LAB_80047258:
  puVar41 = puVar36 + 4;
  if ((int)uVar11 < 1) goto LAB_800470cc;
  *(undefined *)(uVar40 + 0x4d) = 1;
  uVar13 = 0;
  gte_ldOFX(iVar2 << 0x10);
  gte_ldOFY(iVar7 << 0x10);
  iVar2 = 0;
  iVar7 = 0;
  uVar11 = uVar11 >> 2;
  ppiVar39 = *(int ***)(uVar38 + 0x14);
  uVar33 = 0x1000;
  uVar21 = 0;
  uVar34 = 0xa00;
  uVar35 = 0;
  uVar23 = 0x1000;
  piVar32 = *ppiVar39;
  gte_ldR11R12(0x1000);
  gte_ldR13R21(0);
  gte_ldR22R23(0xa00);
  gte_ldR31R32(0);
  gte_ldR33(0x1000);
LAB_800472bc:
  puVar41 = puVar36 + 4;
  uVar17 = *(uint *)(uVar40 + 0x44);
  uVar40 = uVar40 ^ uVar13;
  uVar13 = uVar17 >> 0xf & 0x1fe;
  puVar20 = (ushort *)(uVar13 + (int)DAT_1f8003e0);
  if (uVar13 != 0) {
    uVar23 = (uint)puVar20[0x40];
    uVar21 = (uint)*puVar20;
    gte_ldVXY0(uVar23);
    gte_ldVZ0(uVar21);
    gte_rtv0_b();
    uVar13 = gte_stIR1();
    gte_ldVXY0(-uVar21 & 0xffff);
    gte_ldVZ0(uVar23);
    iVar27 = gte_stIR2();
    uVar21 = gte_stIR3();
    gte_rtv0_b();
    uVar33 = (uVar33 & 0xffff0000) + (uVar13 & 0xffff);
    uVar35 = (uVar35 & 0xffff0000) + (uVar21 & 0xffff);
    uVar21 = gte_stIR1();
    iVar24 = gte_stIR2();
    uVar23 = gte_stIR3();
    uVar21 = (uVar21 & 0xffff) + iVar27 * 0x10000;
    uVar34 = (uVar34 & 0xffff) + iVar24 * 0x10000;
    uVar23 = uVar23 & 0xffff;
    gte_ldR11R12(uVar33);
    gte_ldR13R21(uVar21);
    gte_ldR22R23(uVar34);
    gte_ldR31R32(uVar35);
    gte_ldR33(uVar23);
  }
  if ((uVar17 & 0xff00) != 0) {
    puVar20 = (ushort *)(((uVar17 & 0xff00) >> 7) + (int)DAT_1f8003e0);
    uVar23 = (uint)puVar20[0x40];
    uVar34 = (uint)*puVar20;
    gte_ldVXY0(uVar23 << 0x10);
    gte_ldVZ0(uVar34);
    gte_rtv0_b();
    iVar27 = gte_stIR1();
    gte_ldVXY0(uVar34 * -0x10000);
    gte_ldVZ0(uVar23);
    uVar13 = gte_stIR2();
    iVar28 = gte_stIR3();
    gte_rtv0_b();
    uVar34 = gte_stIR1();
    iVar24 = gte_stIR2();
    uVar23 = gte_stIR3();
    uVar21 = (uVar21 & 0xffff0000) + (uVar34 & 0xffff);
    uVar34 = iVar24 * 0x10000 + (uVar13 & 0xffff);
    uVar23 = uVar23 & 0xffff;
    gte_ldR11R12((uVar33 & 0xffff) + iVar27 * 0x10000);
    gte_ldR13R21(uVar21);
    gte_ldR22R23(uVar34);
    gte_ldR31R32((uVar35 & 0xffff) + iVar28 * 0x10000);
    gte_ldR33(uVar23);
  }
  if ((uVar17 & 0xff) != 0) {
    uVar35 = (uint)(ushort)(DAT_1f8003e0 + (uVar17 & 0xff))[0x40];
    uVar33 = (uint)(ushort)DAT_1f8003e0[uVar17 & 0xff];
    gte_ldVZ0(0);
    gte_ldVXY0(uVar33 * 0x10000 + uVar35);
    gte_rtv0_b();
    uVar13 = gte_stIR1();
    gte_ldVXY0((-uVar33 & 0xffff) + uVar35 * 0x10000);
    gte_ldVZ0(0);
    iVar28 = gte_stIR2();
    uVar35 = gte_stIR3();
    gte_rtv0_b();
    iVar24 = gte_stIR1();
    uVar33 = gte_stIR2();
    iVar27 = gte_stIR3();
    gte_ldR11R12(iVar24 * 0x10000 + (uVar13 & 0xffff));
    gte_ldR13R21((uVar21 & 0xffff) + iVar28 * 0x10000);
    gte_ldR22R23((uVar34 & 0xffff0000) + (uVar33 & 0xffff));
    gte_ldR31R32(iVar27 * 0x10000 + (uVar35 & 0xffff));
    gte_ldR33(uVar23);
  }
  gte_ldtr(iVar2 << 1,iVar7 << 1,uVar11 * 2);
  iVar7 = (*(ushort *)(uVar40 + 0x4e) & 0xff) * 0x400 + uVar11 * -4;
  iVar2 = ((int)(uVar11 * 4) >> 7) - ((int)uVar17 >> 0x18);
  iVar24 = uVar11 * 2 + -0x400;
  if (iVar2 < 0) {
    iVar2 = 0;
  }
  iVar27 = iVar2 * 8;
  DAT_1f8003ec = iVar27;
  if ((-1 < iVar2 + -0x110) && (DAT_1f8003ec = iVar27 + 0x100, -1 < iVar27 + -0xe00))
  goto LAB_800470cc;
  iVar2 = *(int *)((int)ppiVar39 + 0x10);
  piVar30 = (int *)((int)ppiVar39 + 0x14);
  uVar33 = (uint)piVar32 >> 6;
  if (iVar7 < 0) {
    uVar33 = (uint)piVar32 >> 0xe;
  }
  puVar36 = (uint *)((uVar33 & 0x3fc) + 0x1f800000);
  gte_ldVXY0(((iVar2 << 10) >> 0x15) + ((iVar2 << 0x14) >> 0x14) * 0x10000);
  gte_ldVZ0(iVar2 >> 0x15);
  uVar33 = 0xffffffff;
  puVar3 = (uint *)&DAT_1f800000;
  do {
    while( true ) {
      gte_rtps_b();
      iVar2 = *piVar30;
      piVar30 = piVar30 + 1;
      uVar21 = gte_stSXY2();
      uVar34 = gte_stSZ3();
      gte_ldVXY0(((iVar2 << 10) >> 0x15) + ((iVar2 << 0x14) >> 0x14) * 0x10000);
      gte_ldVZ0(iVar2 >> 0x15);
      puVar3[0x78] = uVar34;
      if (-1 < (int)uVar40) break;
      puVar8 = puVar3 + 1;
      *puVar3 = uVar21;
      puVar3 = puVar8;
      if (puVar8 == puVar36) goto LAB_80047618;
    }
    uVar34 = uVar21 << 5;
    if (iVar7 < 1) {
      uVar34 = uVar34 | 0x10;
    }
    if ((int)(uVar21 - 0xd0000) < 1) {
      uVar34 = uVar34 | 1;
    }
    if (-1 < (int)(uVar21 - 0xe40000)) {
      uVar34 = uVar34 | 2;
    }
    if ((int)(uVar21 * 0x10000) < 1) {
      uVar34 = uVar34 | 4;
    }
    puVar8 = puVar3 + 1;
    if (-1 < (int)(uVar21 * 0x10000 + -0x2000000)) {
      uVar34 = uVar34 | 8;
    }
    uVar33 = uVar33 & uVar34;
    *puVar3 = uVar34;
    puVar3 = puVar8;
  } while (puVar8 != puVar36);
  piVar30 = piVar32 + -2;
  if ((uVar33 & 0xf) != 0) {
LAB_80047ea8:
    iVar2 = DAT_1f8003ec;
    piVar31 = DAT_1f8003dc;
    gte_ldOFX(0x1000000);
    gte_ldOFY(0x780000);
    if (-1 < (int)piVar30 - (int)piVar32) {
      if ((int)puVar36 < 1) {
        iVar2 = DAT_1f8003ec + ((DAT_1f8003e4 + 0x400) - (int)piVar30 >> 6) * -8 + -8;
        if (iVar2 < 0) {
          iVar2 = 0;
        }
        piVar32 = piVar32 + -2;
        piVar16 = (int *)(iVar2 + (int)DAT_1f8003dc);
        DAT_1f8003d8 = (uint *)ppiVar39;
LAB_80047f00:
        piVar6 = piVar16;
        puVar9 = (undefined2 *)*piVar6;
        piVar16 = piVar30 + -0x10;
        if (0 < (int)piVar32 - (int)(piVar30 + -0x10)) {
          piVar16 = piVar32;
        }
        if (puVar9 == (undefined2 *)0x0) {
          do {
            piVar15 = piVar30;
            piVar30 = piVar15;
            puVar26 = puVar9;
            if (piVar15 == piVar16) goto LAB_80047f74;
            piVar30 = piVar15 + -2;
          } while (piVar15[1] == 0);
          puVar9 = (undefined2 *)*piVar15;
          piVar6[1] = piVar15[1];
          piVar15[1] = 0;
          *piVar15 = 0;
        }
        do {
          do {
            piVar15 = piVar30;
            iVar2 = piVar15[1];
            piVar30 = piVar15;
            puVar26 = puVar9;
            if (piVar15 == piVar16) goto LAB_80047f74;
            piVar30 = piVar15 + -2;
          } while (iVar2 == 0);
          puVar26 = (undefined2 *)*piVar15;
          *puVar9 = (short)iVar2;
          *(char *)(puVar9 + 1) = (char)((uint)iVar2 >> 0x10);
          *piVar15 = 0;
          piVar15[1] = 0;
          puVar9 = puVar26;
        } while (piVar30 != piVar16);
LAB_80047f74:
        *piVar6 = (int)puVar26;
        if (piVar16 != piVar32) {
          piVar16 = piVar6 + -2;
          if (piVar6 == piVar31) {
            piVar16 = piVar6;
          }
          goto LAB_80047f00;
        }
      }
      else {
        puVar9 = (undefined2 *)*piVar30;
        uVar33 = piVar30[1];
        *piVar30 = 0;
        piVar30[1] = 0;
        while (iVar7 = piVar30[-1], piVar31 = piVar30, piVar32 != piVar30) {
          while (piVar30 = piVar31 + -2, iVar7 != 0) {
            *puVar9 = (short)iVar7;
            *(char *)(puVar9 + 1) = (char)((uint)iVar7 >> 0x10);
            puVar9 = (undefined2 *)*piVar30;
            *piVar30 = 0;
            piVar31[-1] = 0;
            if (piVar32 == piVar30) goto LAB_80047fc8;
            iVar7 = piVar31[-3];
            piVar31 = piVar30;
          }
        }
LAB_80047fc8:
        piVar32 = (int *)(iVar2 + (int)DAT_1f8003dc);
        puVar26 = (undefined2 *)*piVar32;
        *ppiVar39 = (int *)(uVar33 ^ 0x82000000);
        ppiVar39[1] = (int *)0xe1000620;
        ppiVar39[2] = (int *)0x0;
        DAT_1f8003d8 = (uint *)(ppiVar39 + 3);
        *piVar32 = (int)puVar9;
        if (puVar26 == (undefined2 *)0x0) {
          piVar32[1] = (int)ppiVar39;
        }
        else {
          *puVar26 = (short)ppiVar39;
          *(char *)(puVar26 + 1) = (char)((uint)ppiVar39 >> 0x10);
        }
      }
    }
    goto LAB_800470cc;
  }
LAB_80047618:
  puVar36 = DAT_1f8003e8;
  iVar2 = *(int *)(uVar40 + 0x54);
  if (iVar7 < 1) {
    iVar27 = gte_stVZ1();
    uVar33 = *(uint *)((int)ppiVar39 + 0xc);
    iVar28 = 0;
    if (iVar27 == 0) goto LAB_800476fc;
    piVar30 = (int *)((int)ppiVar39 + (uVar33 & 0xffff));
    puVar3 = (uint *)((int)ppiVar39 + (uVar33 >> 0x10));
    puVar36 = puVar3;
    if (iVar7 + 0x2000 < 0) {
      uVar33 = -(iVar7 + 0x2000);
      if (iVar7 + 0x4000 < 1) {
        uVar33 = 0x1fff;
      }
      gte_ldIR0(uVar33 >> 1);
      iVar7 = gte_stVXY1();
      puVar36 = (uint *)(iVar7 + 0x1600);
      gte_ldfcdir(((uint)clearColor & 0xff) << 4,(uint)clearColor >> 4 & 0xff0,
                  (uint)clearColor >> 0xc & 0xff0);
      gte_ldRGB(*puVar3);
      puVar4 = puVar3 + ((uint)piVar32 & 0xff);
      puVar8 = puVar36;
      do {
        gte_dpcs_b();
        puVar12 = puVar3 + 1;
        puVar3 = puVar3 + 1;
        uVar33 = gte_stRGB2();
        gte_ldRGB(*puVar12);
        *puVar8 = uVar33;
        puVar8 = puVar8 + 1;
      } while (puVar3 != puVar4);
    }
  }
  else {
    uVar33 = -(iVar7 + -0x1000);
    if (iVar7 + -0x1000 < 0) {
      gte_ldIR0(uVar33);
      piVar30 = (int *)((int)ppiVar39 + (*(uint *)((int)ppiVar39 + 8) & 0xffff));
      puVar3 = (uint *)((int)ppiVar39 + (*(uint *)((int)ppiVar39 + 8) >> 0x10));
      puVar8 = (uint *)((int)ppiVar39 + (uint)*(ushort *)((int)ppiVar39 + 0xe));
      if (puVar3 != puVar8) {
        uVar34 = *puVar8;
        puVar12 = puVar8 + ((uint)piVar32 & 0xff);
        uVar21 = *puVar3;
        puVar4 = DAT_1f8003e8;
        do {
          gte_ldRGB(uVar21);
          gte_ldfcdir((uVar34 & 0xff) << 4,uVar34 >> 4 & 0xff0,uVar34 >> 0xc & 0xff0);
          uVar34 = puVar8[1];
          puVar3 = puVar3 + 1;
          puVar8 = puVar8 + 1;
          gte_dpcs_b();
          uVar21 = *puVar3;
          uVar35 = gte_stRGB2();
          *puVar4 = uVar35;
          puVar4 = puVar4 + 1;
        } while (puVar8 != puVar12);
        iVar28 = (uVar33 >> 9) << 0x16;
        goto LAB_8004770c;
      }
    }
    uVar33 = *(uint *)((int)ppiVar39 + 8);
LAB_800476fc:
    iVar28 = 0;
    piVar30 = (int *)((int)ppiVar39 + (uVar33 & 0xffff));
    puVar36 = (uint *)((int)ppiVar39 + (uVar33 >> 0x10));
  }
LAB_8004770c:
  if (iVar2 != 0) {
    puVar36 = (uint *)((uint)puVar36 & 0x7fffffff);
    iVar2 = iVar2 * 0x10;
    DAT_1f8003f0 = *(uint *)(&DAT_80064440 + iVar2);
    DAT_1f8003f4 = *(uint *)(&DAT_80064444 + iVar2);
    DAT_1f8003f8 = *(uint *)(&DAT_80064448 + iVar2);
    DAT_1f8003fc = *(uint *)(&DAT_8006444c + iVar2);
  }
  iVar7 = iVar24 * 4;
  iVar2 = 0;
  if (iVar7 < 1) {
    iVar2 = ((uint)(iVar24 * -4) >> 5) << 3;
    iVar7 = 1;
  }
  uVar33 = piVar30[1];
  piVar31 = (int *)(DAT_1f8003e4 + iVar2);
  piVar32 = piVar31 + 0x300;
  puVar3 = (uint *)(piVar30 + 1);
  puVar8 = (uint *)(*piVar30 + (int)puVar3);
  piVar30 = piVar31;
  ppiVar39 = (int **)DAT_1f8003d8;
LAB_80047788:
  if (puVar3 == puVar8) goto LAB_80047ea8;
  uVar34 = uVar33 >> 0x13 & 0x1fc;
  uVar35 = uVar33 >> 0xc & 0x1fc;
  uVar11 = puVar3[1];
  uVar23 = uVar33 >> 5 & 0x1fc;
  uVar21 = uVar33 & 0x7f;
  uVar13 = uVar21 * 4;
  puVar4 = (uint *)(uVar34 + 0x1f800000);
  puVar12 = (uint *)(uVar23 + 0x1f800000);
  iVar2 = (int)uVar33 >> 0x1c;
  uVar37 = SUB42(ppiVar39,0);
  uVar10 = (undefined)((uint)ppiVar39 >> 0x10);
  if (uVar23 == uVar13) {
    uVar33 = *puVar4;
    uVar17 = *(uint *)(uVar35 + 0x1f800000);
    uVar19 = *puVar12;
    if (-1 < (int)uVar40) {
      uVar21 = uVar33 & uVar17;
      uVar33 = (int)uVar33 >> 5;
      if ((uVar21 & uVar19 & 0xf) != 0) goto LAB_80047c38;
      uVar17 = (int)uVar17 >> 5;
      uVar19 = (int)uVar19 >> 5;
    }
    gte_ldSXY0(uVar33);
    gte_ldSXY1(uVar17);
    gte_ldSXY2(uVar19);
    gte_nclip_b();
    ppiVar39[2] = (int *)uVar33;
    bVar1 = false;
    if ((int)uVar11 < 0) {
      ppiVar39[5] = (int *)uVar17;
      ppiVar39[8] = (int *)uVar19;
      puVar3 = puVar3 + 5;
    }
    else {
      ppiVar39[4] = (int *)uVar17;
      ppiVar39[6] = (int *)uVar19;
      puVar3 = puVar3 + 2;
    }
    uVar22 = gte_stMAC0();
    uVar33 = *puVar3;
    if (uVar22 == 0) goto LAB_80047788;
    if ((uVar11 & 3) == 0) {
      if ((int)uVar22 < 0) goto LAB_80047788;
    }
    else if ((uVar11 & 2) != 0) {
      puVar14 = (uint *)(uVar13 + 0x1f800000);
      goto LAB_80047cac;
    }
    uVar13 = *(uint *)((uVar11 >> 0x16 & 0x1fc) + (int)puVar36);
    uVar25 = uVar11 >> 0xf & 0x1fc;
    uVar17 = uVar11 >> 8 & 0x1fc;
  }
  else {
    puVar14 = (uint *)(uVar13 + 0x1f800000);
    uVar33 = *puVar4;
    uVar17 = *(uint *)(uVar35 + 0x1f800000);
    uVar19 = *puVar12;
    uVar13 = *puVar14;
    if (-1 < (int)uVar40) {
      uVar22 = uVar33 & uVar17;
      uVar33 = (int)uVar33 >> 5;
      if ((uVar22 & uVar19 & uVar13 & 0xf) != 0) {
LAB_80047c38:
        puVar4 = puVar3 + 2;
        if ((int)uVar11 < 0) {
          puVar4 = puVar3 + 5;
        }
        puVar3 = puVar4;
        uVar33 = *puVar3;
        goto LAB_80047788;
      }
      uVar17 = (int)uVar17 >> 5;
      uVar19 = (int)uVar19 >> 5;
      uVar13 = (int)uVar13 >> 5;
    }
    gte_ldSXY0(uVar33);
    gte_ldSXY1(uVar17);
    gte_ldSXY2(uVar19);
    gte_nclip_b();
    ppiVar39[2] = (int *)uVar33;
    if ((int)uVar11 < 0) {
      ppiVar39[5] = (int *)uVar17;
      ppiVar39[8] = (int *)uVar19;
      ppiVar39[0xb] = (int *)uVar13;
      puVar3 = puVar3 + 5;
    }
    else {
      ppiVar39[4] = (int *)uVar17;
      ppiVar39[6] = (int *)uVar19;
      ppiVar39[8] = (int *)uVar13;
      puVar3 = puVar3 + 2;
    }
    uVar22 = gte_stMAC0();
    gte_ldSXY0(uVar13);
    gte_nclip_b();
    uVar33 = *puVar3;
    uVar25 = uVar11 >> 0xf & 0x1fc;
    if (((uVar11 & 3) != 0) && ((uVar11 & 2) != 0)) {
      iVar2 = gte_stMAC0();
      ppiVar39[5] = (int *)uVar13;
      if ((int)uVar22 < 0) {
        uVar22 = 1;
        if (iVar2 < 1) {
          puVar14 = puVar12;
        }
      }
      else {
        if (iVar2 < 1) {
          uVar22 = 0xffffffff;
          if (iVar2 != 0) goto LAB_80047cac;
          goto LAB_80047788;
        }
        ppiVar39[2] = (int *)uVar13;
        puVar4 = puVar14;
        puVar14 = puVar12;
      }
LAB_80047cac:
      iVar24 = (uVar22 >> 0x1f) << 0x19;
      iVar2 = gte_stTRZ();
      ppiVar39[3] = (int *)uVar17;
      if ((uVar11 & 1) != 0) {
        iVar2 = iVar2 + -0x800;
      }
      ppiVar39[4] = (int *)uVar19;
      if ((iVar2 < 0) || (iVar24 = 0x2000000, -1 < (int)uVar22)) {
        gte_ldIR3((int)(uVar11 << 1) >> 0x18);
        gte_ldIR1((int)(uVar11 << 9) >> 0x18);
        gte_ldIR2((int)(uVar11 << 0x11) >> 0x18);
        gte_rtir_b();
        iVar2 = *(int *)((int)&DAT_1f8001e0 + uVar23);
        uVar23 = puVar14[0x78];
        uVar21 = DAT_1f8003f0;
        uVar34 = DAT_1f8003f4;
        if ((uVar11 & 1) == 0) {
          uVar21 = DAT_1f8003f8;
          uVar34 = DAT_1f8003fc;
        }
        iVar27 = (puVar4[0x78] - iVar7) + *(int *)((int)&DAT_1f8001e0 + uVar35) + iVar2 + uVar23;
        gte_mvmva_b(0,2,3,3,0);
        iVar5 = iVar27 >> 5;
        if (-1 < iVar27) {
          gte_ldsv_((uVar34 & 0xff) << 4,uVar34 >> 4 & 0xff0,uVar34 >> 0xc & 0xff0);
          iVar27 = gte_stMAC1();
          iVar29 = iVar27 >> 8;
          if ((int)uVar22 < 0) {
            iVar29 = iVar27 >> 10;
            uVar21 = uVar21 >> 1;
            iVar5 = iVar5 + 0x10;
          }
          gte_ldIR0(iVar29);
          gte_gpf0_b(0);
          read_mt(iVar2,uVar23,uVar21);
          uVar34 = (uVar21 & 0xff) * 0x10 + (iVar2 >> 0xc);
          uVar35 = (uVar21 >> 4 & 0xff0) + ((int)uVar23 >> 0xc);
          uVar21 = (uVar21 >> 0xc & 0xff0) + ((int)uVar21 >> 0xc);
          iVar2 = (iVar29 + -0x5c0) * 8;
          if (0 < iVar29 + -0x5c0) {
            uVar34 = uVar34 + iVar2;
            uVar35 = uVar35 + iVar2;
            uVar21 = uVar21 + iVar2;
          }
          iVar2 = uVar34 - 0xfff;
          if ((int)uVar34 < 0) {
            uVar34 = 0;
          }
          uVar34 = uVar34 >> 4;
          if (-1 < iVar2) {
            uVar34 = 0xff;
          }
          iVar2 = uVar35 - 0xfff;
          if ((int)uVar35 < 0) {
            uVar35 = 0;
          }
          uVar35 = uVar35 >> 4;
          if (-1 < iVar2) {
            uVar35 = 0xff;
          }
          iVar2 = uVar21 - 0xfff;
          if ((int)uVar21 < 0) {
            uVar21 = 0;
          }
          uVar21 = uVar21 >> 4;
          if (-1 < iVar2) {
            uVar21 = 0xff;
          }
          if (puVar12 == puVar14) {
            uVar18 = 0x4000000;
            iVar2 = 0x22000000;
            iVar27 = 0x14;
          }
          else {
            uVar18 = 0x5000000;
            iVar2 = 0x2a000000;
            iVar27 = 0x18;
          }
          *ppiVar39 = (int *)uVar18;
          ppiVar39[1] = (int *)((iVar2 - iVar24) + uVar34 + uVar35 * 0x100 + uVar21 * 0x10000);
          piVar16 = piVar31 + iVar5 * 2;
          puVar9 = (undefined2 *)*piVar16;
          *piVar16 = (int)ppiVar39;
          if (puVar9 == (undefined2 *)0x0) {
            if (0 < (int)piVar32 - (int)piVar16) {
              piVar32 = piVar16;
            }
            piVar16[1] = (int)ppiVar39;
            if ((int)piVar30 - (int)piVar16 < 0) {
              piVar30 = piVar16;
            }
            ppiVar39 = (int **)((int)ppiVar39 + iVar27);
          }
          else {
            *puVar9 = uVar37;
            *(undefined *)(puVar9 + 1) = uVar10;
            ppiVar39 = (int **)((int)ppiVar39 + iVar27);
          }
        }
      }
      goto LAB_80047788;
    }
    uVar17 = uVar11 >> 8 & 0x1fc;
    iVar24 = gte_stMAC0();
    if ((int)uVar22 < 0) {
      uVar13 = *(uint *)((uVar11 >> 0x16 & 0x1fc) + (int)puVar36);
      if (iVar24 < 1) {
        bVar1 = false;
        goto LAB_80047ad0;
      }
      uVar17 = *(uint *)(uVar17 + (int)puVar36);
      uVar19 = *(uint *)((uVar11 >> 1 & 0x1fc) + (int)puVar36);
      iVar24 = (*(int *)((int)&DAT_1f8001e0 + uVar34) - iVar7) +
               *(int *)((int)&DAT_1f8001e0 + uVar35) + *(int *)((int)&DAT_1f8001e0 + uVar23) +
               (&DAT_1f8001e0)[uVar21];
      if ((int)uVar11 < 0) {
        uVar21 = puVar3[-3];
        uVar34 = puVar3[-2];
        iVar2 = iVar24 + iVar2 * 0x20;
        if ((-1 < iVar24) && (-1 < iVar2)) {
          piVar16 = piVar31 + (iVar2 >> 5) * 2;
          puVar9 = (undefined2 *)*piVar16;
          uVar35 = puVar3[-1];
          ppiVar39[4] = (int *)*(uint *)(uVar25 + (int)puVar36);
          ppiVar39[7] = (int *)uVar17;
          ppiVar39[10] = (int *)uVar19;
          ppiVar39[1] = (int *)((uVar13 & 0xffffff) + 0x3c000000 +
                               ((int)uVar34 >> 0x1f) * -0x2000000);
          *ppiVar39 = (int *)0xc000000;
          ppiVar39[3] = (int *)(uVar21 + iVar28);
          ppiVar39[6] = (int *)uVar34;
          ppiVar39[9] = (int *)uVar35;
          ppiVar39[0xc] = (int *)(uVar35 >> 0x10);
          *piVar16 = (int)ppiVar39;
          if (puVar9 == (undefined2 *)0x0) {
            if (0 < (int)piVar32 - (int)piVar16) {
              piVar32 = piVar16;
            }
            piVar16[1] = (int)ppiVar39;
            if ((int)piVar30 - (int)piVar16 < 0) {
              piVar30 = piVar16;
            }
            ppiVar39 = ppiVar39 + 0xd;
          }
          else {
            *puVar9 = uVar37;
            *(undefined *)(puVar9 + 1) = uVar10;
            ppiVar39 = ppiVar39 + 0xd;
          }
        }
      }
      else {
        ppiVar39[3] = (int *)*(uint *)(uVar25 + (int)puVar36);
        ppiVar39[5] = (int *)uVar17;
        ppiVar39[7] = (int *)uVar19;
        ppiVar39[1] = (int *)((uVar13 & 0xffffff) + 0x38000000);
        if (-1 < iVar24) {
          *ppiVar39 = (int *)0x8000000;
          iVar24 = iVar24 + iVar2 * 0x20;
          if (-1 < iVar24) {
            piVar16 = piVar31 + (iVar24 >> 5) * 2;
            puVar9 = (undefined2 *)*piVar16;
            *piVar16 = (int)ppiVar39;
            if (puVar9 == (undefined2 *)0x0) {
              if (0 < (int)piVar32 - (int)piVar16) {
                piVar32 = piVar16;
              }
              piVar16[1] = (int)ppiVar39;
              if ((int)piVar30 - (int)piVar16 < 0) {
                piVar30 = piVar16;
              }
              ppiVar39 = ppiVar39 + 9;
            }
            else {
              *puVar9 = uVar37;
              *(undefined *)(puVar9 + 1) = uVar10;
              ppiVar39 = ppiVar39 + 9;
            }
          }
        }
      }
      goto LAB_80047788;
    }
    if (iVar24 < 1) goto LAB_80047788;
    ppiVar39[2] = (int *)uVar13;
    uVar13 = *(uint *)((uVar11 >> 1 & 0x1fc) + (int)puVar36);
    bVar1 = true;
    puVar4 = puVar14;
  }
LAB_80047ad0:
  uVar21 = *(uint *)(uVar17 + (int)puVar36);
  iVar24 = (puVar4[0x78] - iVar7) + *(int *)((int)&DAT_1f8001e0 + uVar35) * 2 +
           *(int *)((int)&DAT_1f8001e0 + uVar23);
  if ((int)uVar11 < 0) {
    uVar34 = puVar3[-3];
    uVar35 = puVar3[-2];
    uVar23 = puVar3[-1];
    if ((-1 < iVar24) && (iVar2 = iVar24 + iVar2 * 0x20 >> 5, -1 < iVar2)) {
      piVar16 = piVar31 + iVar2 * 2;
      puVar9 = (undefined2 *)*piVar16;
      ppiVar39[4] = (int *)*(uint *)(uVar25 + (int)puVar36);
      ppiVar39[7] = (int *)uVar21;
      *ppiVar39 = (int *)0x9000000;
      ppiVar39[1] = (int *)((uVar13 & 0xffffff | 0x34000000) + ((int)uVar35 >> 0x1f) * -0x2000000);
      ppiVar39[3] = (int *)(uVar34 + iVar28);
      ppiVar39[6] = (int *)uVar35;
      ppiVar39[9] = (int *)uVar23;
      if (bVar1) {
        *(short *)(ppiVar39 + 3) = (short)(uVar23 >> 0x10);
      }
      *piVar16 = (int)ppiVar39;
      if (puVar9 == (undefined2 *)0x0) {
        if (0 < (int)piVar32 - (int)piVar16) {
          piVar32 = piVar16;
        }
        piVar16[1] = (int)ppiVar39;
        if ((int)piVar30 - (int)piVar16 < 0) {
          piVar30 = piVar16;
        }
        ppiVar39 = ppiVar39 + 10;
      }
      else {
        *puVar9 = uVar37;
        *(undefined *)(puVar9 + 1) = uVar10;
        ppiVar39 = ppiVar39 + 10;
      }
    }
  }
  else {
    ppiVar39[3] = (int *)*(uint *)(uVar25 + (int)puVar36);
    ppiVar39[5] = (int *)uVar21;
    ppiVar39[1] = (int *)(uVar13 & 0xffffff | 0x30000000);
    if (-1 < iVar24) {
      *ppiVar39 = (int *)0x6000000;
      iVar2 = iVar24 + iVar2 * 0x20 >> 5;
      if (-1 < iVar2) {
        piVar16 = piVar31 + iVar2 * 2;
        puVar9 = (undefined2 *)*piVar16;
        *piVar16 = (int)ppiVar39;
        if (puVar9 == (undefined2 *)0x0) {
          if (0 < (int)piVar32 - (int)piVar16) {
            piVar32 = piVar16;
          }
          piVar16[1] = (int)ppiVar39;
          if ((int)piVar30 - (int)piVar16 < 0) {
            piVar30 = piVar16;
          }
          ppiVar39 = ppiVar39 + 7;
        }
        else {
          *puVar9 = uVar37;
          *(undefined *)(puVar9 + 1) = uVar10;
          ppiVar39 = ppiVar39 + 7;
        }
      }
    }
  }
  goto LAB_80047788;
}



// WARNING: Instruction at (ram,0x80048670) overlaps instruction at (ram,0x8004866c)
// 
// WARNING: Removing unreachable block (ram,0x80048668)

void RenderParticles(void)

{
  ushort uVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  undefined2 *puVar5;
  undefined uVar6;
  undefined4 uVar7;
  undefined4 uVar8;
  int iVar9;
  uint uVar10;
  undefined4 uVar11;
  int iVar12;
  int iVar13;
  int *piVar14;
  uint uVar15;
  int iVar16;
  undefined4 uVar17;
  int iVar18;
  int iVar19;
  undefined4 uVar20;
  undefined4 uVar21;
  int iVar22;
  undefined4 uVar23;
  undefined4 uVar24;
  int iVar25;
  uint uVar26;
  int iVar27;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  int iVar28;
  int iVar29;
  int iVar30;
  undefined *puVar31;
  undefined2 uVar32;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  short *psVar33;
  short *psVar34;
  undefined auStackX_0 [16];
  
  iVar2 = DAT_80066ffc;
  DAT_8006aa0c = &DAT_80066d38;
  gte_ldR11R12(Mat33_80067e84.R12R11);
  gte_ldR13R21(Mat33_80067e84.R21R13);
  gte_ldR22R23(Mat33_80067e84.R23R22);
  gte_ldR31R32(Mat33_80067e84.R32R31);
  gte_ldR33(Mat33_80067e84.R33);
  gte_ldtr(0,0,0);
  iVar28 = cameraPosition.x >> 2;
  iVar29 = cameraPosition.y >> 2;
  iVar30 = cameraPosition.z >> 2;
  gte_ldDQB(0);
  gte_ldDQA(0x100);
  puVar31 = (undefined *)(int)*DAT_80066f18;
  iVar27 = DAT_80067034 + -0x400;
  psVar34 = DAT_80066f18;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  do {
    while (psVar33 = psVar34, uVar3 = (int)puVar31 >> 8, -1 < (int)puVar31) {
      uVar3 = uVar3 & 0xf;
      uVar32 = SUB42(primitiveBuffer_next,0);
      uVar6 = (undefined)((uint)primitiveBuffer_next >> 0x10);
      if (uVar3 == 0) {
        uVar3 = *(uint *)(psVar33 + 4);
        if (iVar27 - (int)primitiveBuffer_next < 1) {
          return;
        }
        gte_ldVXY0((iVar29 - (*(uint *)(psVar33 + 2) >> 0x10)) +
                   (iVar30 - (uVar3 & 0xffff)) * 0x10000);
        gte_ldVZ0((*(uint *)(psVar33 + 2) & 0xffff) - iVar28);
        gte_rtps_b();
        puVar31 = (undefined *)(int)psVar33[0x10];
        *(undefined4 *)((int)primitiveBuffer_next + 4) = *(undefined4 *)(psVar33 + 6);
        *(undefined *)((int)psVar33 + 3) = 0;
        psVar34 = psVar33 + 0x10;
        uVar15 = gte_stSZ3();
        iVar16 = gte_stSXY2();
        if ((((uVar15 != 0) && ((int)(uVar15 - 0x2000) < 0)) &&
            ((0 < iVar16 + -0xd0000 && ((iVar16 + -0xe40000 < 0 && (0 < iVar16 * 0x10000)))))) &&
           (iVar16 * 0x10000 + -0x2000000 < 0)) {
          *(undefined *)((int)psVar33 + 3) = 1;
          *(int *)((int)primitiveBuffer_next + 8) = iVar16;
          *(int *)((int)primitiveBuffer_next + 0xc) = iVar16 + 1;
          *(undefined4 *)primitiveBuffer_next = 0x3000000;
          iVar16 = (uVar15 >> 5) - (uVar3 >> 0x10 & 0xff);
          if (0 < iVar16 + -2) {
            piVar14 = (int *)(iVar16 * 8 + iVar2);
            puVar5 = (undefined2 *)*piVar14;
            *piVar14 = (int)primitiveBuffer_next;
            if (puVar5 == (undefined2 *)0x0) {
              piVar14[1] = (int)primitiveBuffer_next;
              primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x10);
            }
            else {
              *puVar5 = uVar32;
              *(undefined *)(puVar5 + 1) = uVar6;
              primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x10);
            }
          }
        }
      }
      else if (uVar3 == 1) {
        if (iVar27 - (int)primitiveBuffer_next < 1) {
          return;
        }
        gte_ldVXY0((iVar29 - (*(uint *)(psVar33 + 2) >> 0x10)) +
                   (iVar30 - (*(uint *)(psVar33 + 4) & 0xffff)) * 0x10000);
        gte_ldVZ0((*(uint *)(psVar33 + 2) & 0xffff) - iVar28);
        gte_rtps_b();
        puVar31 = (undefined *)(int)psVar33[0x10];
        psVar34 = psVar33 + 0x10;
        *(undefined *)((int)psVar33 + 3) = 0;
        gte_ldVXY0((iVar29 - (*(uint *)(psVar33 + 6) & 0xffff)) +
                   (iVar30 - (*(uint *)(psVar33 + 6) >> 0x10)) * 0x10000);
        gte_ldVZ0((*(uint *)(psVar33 + 4) >> 0x10) - iVar28);
        uVar3 = gte_stSZ3();
        iVar16 = gte_stSXY2();
        gte_rtps_b();
        uVar4 = *(undefined4 *)(psVar33 + 8);
        if (((((uVar3 != 0) && ((int)(uVar3 - 0x2000) < 0)) && (0 < iVar16 + -0xd0000)) &&
            ((uVar15 = *(uint *)(psVar33 + 10), iVar16 + -0xe40000 < 0 && (0 < iVar16 * 0x10000))))
           && (iVar16 * 0x10000 + -0x2000000 < 0)) {
          uVar7 = gte_stSXY2();
          *(int *)((int)primitiveBuffer_next + 8) = iVar16;
          *(undefined4 *)((int)primitiveBuffer_next + 0x10) = uVar7;
          *(undefined4 *)((int)primitiveBuffer_next + 4) = uVar4;
          *(uint *)((int)primitiveBuffer_next + 0xc) = uVar15;
          iVar16 = (uVar3 >> 5) - (uVar15 >> 0x18);
          if (0 < iVar16 + -2) {
            *(undefined4 *)primitiveBuffer_next = 0x4000000;
            *(undefined *)((int)psVar33 + 3) = 1;
            piVar14 = (int *)(iVar16 * 8 + iVar2);
            puVar5 = (undefined2 *)*piVar14;
            *piVar14 = (int)primitiveBuffer_next;
            if (puVar5 == (undefined2 *)0x0) {
              piVar14[1] = (int)primitiveBuffer_next;
              primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x14);
            }
            else {
              *puVar5 = uVar32;
              *(undefined *)(puVar5 + 1) = uVar6;
              primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x14);
            }
          }
        }
      }
      else if (uVar3 == 2) {
        uVar3 = *(uint *)(psVar33 + 4);
        if (iVar27 - (int)primitiveBuffer_next < 1) {
          return;
        }
        gte_ldVZ0((*(uint *)(psVar33 + 2) & 0xffff) - iVar28);
        *(undefined *)((int)psVar33 + 3) = 0;
        gte_ldVXY0((iVar29 - (*(uint *)(psVar33 + 2) >> 0x10)) +
                   (iVar30 - (uVar3 & 0xffff)) * 0x10000);
        gte_rtps_b();
        iVar16 = *(int *)(&DAT_80069e30 + ((uint)puVar31 & 0xff) * 4);
        uVar15 = uVar3 >> 0x10 & 0xff;
        uVar3 = (uVar3 >> 0x17) + 0x40 & 0x1fe;
        puVar31 = (undefined *)(int)psVar33[0x10];
        psVar34 = psVar33 + 0x10;
        uVar10 = gte_stSZ3();
        iVar9 = gte_stSXY2();
        iVar19 = (int)*(short *)((int)sineLookupTable + uVar3);
        if (((-1 < (int)(uVar10 - 0x40)) && ((int)(uVar10 - 0x2000) < 0)) && (0 < iVar9 + -0xd0000))
        {
          iVar12 = (int)*(short *)((int)cosineLookupTable + uVar3);
          if (((iVar9 + -0xe40000 < 0) && (0 < iVar9 * 0x10000)) &&
             (iVar9 * 0x10000 + -0x2000000 < 0)) {
            gte_ldIR0(uVar15);
            gte_ldIR1(iVar19);
            gte_ldIR2(iVar12);
            read_mt(uVar15,iVar19,iVar12);
            gte_gpf0_b(0);
            *(undefined *)((int)psVar33 + 3) = 1;
            gte_ldtr(uVar15 << 2,iVar19 << 2,iVar12 << 2);
            iVar19 = gte_stMAC1();
            iVar9 = gte_stMAC2();
            uVar3 = iVar19 >> 10;
            uVar15 = iVar9 >> 10;
            gte_ldVZ0(0);
            gte_ldVXY0((-uVar3 & 0xffff) + uVar15 * -0x10000);
            gte_ldVZ1(0);
            gte_ldVXY1((uVar15 & 0xffff) + uVar3 * -0x10000);
            gte_ldVZ2(0);
            gte_ldVXY2((-uVar15 & 0xffff) + uVar3 * 0x10000);
            uVar7 = gte_stR11R12();
            uVar8 = gte_stR13R21();
            uVar11 = gte_stR22R23();
            uVar17 = gte_stR31R32();
            uVar20 = gte_stR33();
            gte_ldR13R21(0);
            gte_ldR31R32(0);
            gte_ldR11R12(0x1000);
            gte_ldR33(0x1000);
            gte_ldR22R23(0xa00);
            gte_rtpt_b();
            uVar4 = *(undefined4 *)(psVar33 + 6);
            iVar19 = (uVar10 >> 5) - (uint)((ushort)psVar33[8] >> 8);
            if (-1 < iVar19) {
              iVar16 = iVar16 + ((ushort)psVar33[8] & 0xff) * 8;
              uVar10 = *(uint *)(iVar16 + 4);
              uVar26 = *(uint *)(iVar16 + 8);
              uVar21 = gte_stSXY0();
              gte_ldVXY0((uVar3 & 0xffff) + uVar15 * 0x10000);
              gte_ldVZ0(0);
              uVar23 = gte_stSXY1();
              uVar24 = gte_stSXY2();
              gte_rtps_b();
              *(undefined4 *)((int)primitiveBuffer_next + 8) = uVar21;
              *(undefined4 *)((int)primitiveBuffer_next + 0x10) = uVar23;
              *(undefined4 *)((int)primitiveBuffer_next + 0x18) = uVar24;
              *(undefined4 *)((int)primitiveBuffer_next + 4) = uVar4;
              *(undefined4 *)primitiveBuffer_next = 0x9000000;
              *(uint *)((int)primitiveBuffer_next + 0xc) = uVar10;
              *(uint *)((int)primitiveBuffer_next + 0x24) = uVar26;
              *(uint *)((int)primitiveBuffer_next + 0x1c) = uVar10 & 0xff | uVar26 & 0xff00;
              uVar4 = gte_stSXY2();
              *(uint *)((int)primitiveBuffer_next + 0x14) =
                   uVar26 ^ uVar26 & 0xff00 | uVar10 & 0xff00;
              *(undefined4 *)((int)primitiveBuffer_next + 0x20) = uVar4;
              gte_ldR11R12(uVar7);
              gte_ldR13R21(uVar8);
              gte_ldR22R23(uVar11);
              gte_ldR31R32(uVar17);
              gte_ldR33(uVar20);
              gte_ldtr(0,0,0);
              piVar14 = (int *)(iVar19 * 8 + iVar2);
              puVar5 = (undefined2 *)*piVar14;
              *piVar14 = (int)primitiveBuffer_next;
              if (puVar5 == (undefined2 *)0x0) {
                piVar14[1] = (int)primitiveBuffer_next;
                primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
              }
              else {
                *puVar5 = uVar32;
                *(undefined *)(puVar5 + 1) = uVar6;
                primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
              }
            }
          }
        }
      }
      else if (uVar3 == 3) {
        uVar3 = *(uint *)(psVar33 + 4);
        if (iVar27 - (int)primitiveBuffer_next < 1) {
          return;
        }
        gte_ldVZ0((*(uint *)(psVar33 + 2) & 0xffff) - iVar28);
        gte_ldVXY0((iVar29 - (*(uint *)(psVar33 + 2) >> 0x10)) +
                   (iVar30 - (uVar3 & 0xffff)) * 0x10000);
        *(undefined *)((int)psVar33 + 3) = 0;
        gte_rtps_b();
        iVar16 = *(int *)(&DAT_80069e30 + ((uint)puVar31 & 0xff) * 4);
        gte_ldIR1(uVar3 >> 0x10 & 0xff);
        gte_ldIR2(uVar3 >> 0x18);
        puVar31 = (undefined *)(int)psVar33[0x10];
        psVar34 = psVar33 + 0x10;
        uVar3 = gte_stSZ3();
        iVar19 = gte_stSXY2();
        if (((-1 < (int)(uVar3 - 0x40)) && ((int)(uVar3 - 0x2000) < 0)) && (0 < iVar19 + -0xd0000))
        {
          if (((iVar19 + -0xe40000 < 0) && (0 < iVar19 * 0x10000)) &&
             (iVar19 * 0x10000 + -0x2000000 < 0)) {
            *(undefined *)((int)psVar33 + 3) = 1;
            uVar15 = gte_stMAC0();
            gte_ldIR0(uVar15 >> 0xc);
            iVar9 = (uVar3 >> 5) - (uint)((ushort)psVar33[8] >> 8);
            if (-1 < iVar9) {
              gte_gpf0_b(0);
              iVar16 = iVar16 + ((ushort)psVar33[8] & 0xff) * 8;
              uVar3 = *(uint *)(iVar16 + 4);
              uVar15 = *(uint *)(iVar16 + 8);
              uVar10 = gte_stMAC1();
              uVar26 = gte_stMAC2();
              iVar16 = iVar19 + (uVar10 >> 0xd) + (uVar26 >> 0xd) * 0x10000;
              *(undefined4 *)((int)primitiveBuffer_next + 4) = *(undefined4 *)(psVar33 + 6);
              *(int *)((int)primitiveBuffer_next + 0x20) = iVar16;
              *(uint *)((int)primitiveBuffer_next + 0x18) = iVar16 - (uVar10 >> 0xc);
              iVar16 = iVar16 + (uVar26 >> 0xc) * -0x10000;
              *(int *)((int)primitiveBuffer_next + 0x10) = iVar16;
              *(uint *)((int)primitiveBuffer_next + 8) = iVar16 - (uVar10 >> 0xc);
              *(uint *)((int)primitiveBuffer_next + 0xc) = uVar3;
              *(uint *)((int)primitiveBuffer_next + 0x24) = uVar15;
              *(uint *)((int)primitiveBuffer_next + 0x1c) = uVar3 & 0xff | uVar15 & 0xff00;
              *(uint *)((int)primitiveBuffer_next + 0x14) =
                   uVar15 ^ uVar15 & 0xff00 | uVar3 & 0xff00;
              *(undefined4 *)primitiveBuffer_next = 0x9000000;
              piVar14 = (int *)(iVar9 * 8 + iVar2);
              puVar5 = (undefined2 *)*piVar14;
              *piVar14 = (int)primitiveBuffer_next;
              if (puVar5 == (undefined2 *)0x0) {
                piVar14[1] = (int)primitiveBuffer_next;
                primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
              }
              else {
                *puVar5 = uVar32;
                *(undefined *)(puVar5 + 1) = uVar6;
                primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
              }
            }
          }
        }
      }
      else if (uVar3 == 4) {
        uVar3 = *(uint *)(psVar33 + 4);
        if (iVar27 - (int)primitiveBuffer_next < 1) {
          return;
        }
        iVar16 = (*(uint *)(psVar33 + 2) & 0xffff) - iVar28;
        *(undefined *)((int)psVar33 + 3) = 0;
        uVar15 = uVar3 >> 0x17 & 0x1fe;
        iVar18 = (int)*(short *)((int)cosineLookupTable + uVar15);
        iVar19 = iVar29 - (*(uint *)(psVar33 + 2) >> 0x10);
        iVar9 = (iVar30 - (uVar3 & 0xffff)) * 0x10000;
        gte_ldIR0(uVar3 >> 0x10 & 0xff);
        gte_ldIR1((int)*(short *)((int)sineLookupTable + uVar15));
        gte_ldIR2(iVar18);
        uVar3 = (uint)puVar31 & 0xff;
        gte_gpf0_b(0);
        iVar13 = gte_stMAC1();
        iVar12 = gte_stMAC2();
        puVar31 = (undefined *)(int)psVar33[0x10];
        psVar34 = psVar33 + 0x10;
        iVar13 = iVar13 >> 0xb;
        iVar12 = iVar12 >> 0xb;
        gte_ldVXY0((iVar19 - iVar13) + iVar9);
        gte_ldVZ0(iVar16 + iVar12);
        gte_ldVXY1(iVar19 + iVar12 + iVar9);
        gte_ldVZ1(iVar16 + iVar13);
        gte_ldVXY2((iVar19 - iVar12) + iVar9);
        gte_ldVZ2(iVar16 - iVar13);
        iVar12 = iVar16 - iVar12;
        gte_rtpt_b();
        uVar1 = psVar33[8];
        iVar25 = (uVar1 & 0xff) * 8 + *(int *)(&DAT_80069e30 + uVar3 * 4);
        uVar3 = *(uint *)(iVar25 + 4);
        uVar15 = *(uint *)(iVar25 + 8);
        read_sxsy_fifo3(iVar16,iVar19,iVar9);
        gte_ldVXY0(iVar19 + iVar13 + iVar9);
        gte_ldVZ0(iVar12);
        read_sz_fifo3(iVar13,iVar18,iVar12);
        gte_rtps_b();
        *(undefined4 *)((int)primitiveBuffer_next + 4) = *(undefined4 *)(psVar33 + 6);
        *(undefined4 *)primitiveBuffer_next = 0x9000000;
        *(uint *)((int)primitiveBuffer_next + 0xc) = uVar3;
        *(uint *)((int)primitiveBuffer_next + 0x24) = uVar15;
        *(uint *)((int)primitiveBuffer_next + 0x1c) = uVar3 & 0xff | uVar15 & 0xff00;
        *(uint *)((int)primitiveBuffer_next + 0x14) = uVar15 ^ uVar15 & 0xff00 | uVar3 & 0xff00;
        iVar25 = gte_stSXY2();
        iVar22 = gte_stSZ3();
        uVar3 = iVar13 + iVar18 + iVar12 + iVar22;
        if (((-1 < (int)(uVar3 - 0x100)) && ((int)(uVar3 - 0x8000) < 0)) &&
           (iVar12 = (uVar3 >> 7) - (uint)(uVar1 >> 8), -1 < iVar12)) {
          *(int *)((int)primitiveBuffer_next + 8) = iVar16;
          *(int *)((int)primitiveBuffer_next + 0x10) = iVar19;
          *(int *)((int)primitiveBuffer_next + 0x18) = iVar9;
          *(int *)((int)primitiveBuffer_next + 0x20) = iVar25;
          if (((((0 < iVar16 + -0xd0000) || (0 < iVar19 + -0xd0000)) ||
               ((0 < iVar9 + -0xd0000 || (0 < iVar25 + -0xd0000)))) &&
              (((iVar16 + -0xe40000 < 0 || (iVar19 + -0xe40000 < 0)) ||
               ((iVar9 + -0xe40000 < 0 || (iVar25 + -0xe40000 < 0)))))) &&
             (((0 < iVar16 * 0x10000 || (0 < iVar19 * 0x10000)) || (0 < iVar25 << 0x10)))) {
            piVar14 = (int *)(iVar12 * 8 + iVar2);
            *(undefined *)((int)psVar33 + 3) = 1;
            puVar5 = (undefined2 *)*piVar14;
            *piVar14 = (int)primitiveBuffer_next;
            if (puVar5 == (undefined2 *)0x0) {
              piVar14[1] = (int)primitiveBuffer_next;
              primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
            }
            else {
              *puVar5 = uVar32;
              *(undefined *)(puVar5 + 1) = uVar6;
              primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
            }
          }
        }
      }
      else {
        uVar15 = *(uint *)(psVar33 + 4);
        uVar3 = (uint)puVar31 & 0xff;
        if (iVar27 - (int)primitiveBuffer_next < 1) {
          return;
        }
        uVar10 = (uVar15 >> 0x17) + 0x40 & 0x1fe;
        puVar31 = (undefined *)(int)psVar33[0x10];
        gte_ldIR0(uVar15 >> 0x10 & 0xff);
        gte_ldIR1((int)*(short *)((int)sineLookupTable + uVar10));
        gte_ldIR2((int)*(short *)((int)cosineLookupTable + uVar10));
        gte_gpf0_b(0);
        gte_ldtr((*(int *)(psVar33 + 2) << 0x10) >> 0xe,*(int *)(psVar33 + 2) >> 0xe,
                 (int)(uVar15 << 0x10) >> 0xe);
        iVar16 = gte_stMAC1();
        iVar19 = gte_stMAC2();
        uVar15 = iVar16 >> 10;
        uVar10 = iVar19 >> 10;
        gte_ldVZ0(0);
        gte_ldVXY0((-uVar15 & 0xffff) + uVar10 * -0x10000);
        gte_ldVZ1(0);
        gte_ldVXY1((uVar10 & 0xffff) + uVar15 * -0x10000);
        gte_ldVZ2(0);
        gte_ldVXY2((-uVar10 & 0xffff) + uVar15 * 0x10000);
        uVar17 = gte_stR11R12();
        uVar20 = gte_stR13R21();
        uVar21 = gte_stR22R23();
        uVar23 = gte_stR31R32();
        uVar24 = gte_stR33();
        gte_ldR13R21(0);
        gte_ldR31R32(0);
        gte_ldR11R12(0x1000);
        gte_ldR33(0x1000);
        gte_ldR22R23(0xa00);
        gte_rtpt_b();
        uVar8 = *(undefined4 *)(psVar33 + 6);
        iVar16 = *(int *)(&DAT_80069e30 + uVar3 * 4) + ((ushort)psVar33[8] & 0xff) * 8;
        uVar3 = *(uint *)(iVar16 + 4);
        uVar26 = *(uint *)(iVar16 + 8);
        uVar4 = gte_stSXY0();
        gte_ldVXY0((uVar15 & 0xffff) + uVar10 * 0x10000);
        gte_ldVZ0(0);
        uVar7 = gte_stSXY1();
        uVar11 = gte_stSXY2();
        gte_rtps_b();
        *(undefined4 *)((int)primitiveBuffer_next + 8) = uVar4;
        *(undefined4 *)((int)primitiveBuffer_next + 0x10) = uVar7;
        *(undefined4 *)((int)primitiveBuffer_next + 0x18) = uVar11;
        *(undefined4 *)((int)primitiveBuffer_next + 4) = uVar8;
        *(undefined4 *)primitiveBuffer_next = 0x9000000;
        *(uint *)((int)primitiveBuffer_next + 0xc) = uVar3;
        *(uint *)((int)primitiveBuffer_next + 0x24) = uVar26;
        *(uint *)((int)primitiveBuffer_next + 0x1c) = uVar3 & 0xff | uVar26 & 0xff00;
        uVar4 = gte_stSXY2();
        *(uint *)((int)primitiveBuffer_next + 0x14) = uVar26 ^ uVar26 & 0xff00 | uVar3 & 0xff00;
        *(undefined4 *)((int)primitiveBuffer_next + 0x20) = uVar4;
        gte_ldR11R12(uVar17);
        gte_ldR13R21(uVar20);
        gte_ldR22R23(uVar21);
        gte_ldR31R32(uVar23);
        gte_ldR33(uVar24);
        gte_ldtr(0,0,0);
        puVar5 = *(undefined2 **)(int *)(iVar2 + -8);
        *(int *)(iVar2 + -8) = (int)primitiveBuffer_next;
        psVar34 = psVar33 + 0x10;
        if (puVar5 == (undefined2 *)0x0) {
          *(undefined **)(iVar2 + -4) = primitiveBuffer_next;
          primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
        }
        else {
          *puVar5 = uVar32;
          *(undefined *)(puVar5 + 1) = uVar6;
          primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
        }
      }
    }
    puVar31 = (undefined *)(int)psVar33[0x10];
    psVar34 = psVar33 + 0x10;
  } while (uVar3 != 0xffffffff);
  return;
}



undefined4 FUN_80048d18(int param_1)

{
  byte *pbVar1;
  byte bVar2;
  byte bVar3;
  uint uVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  uint uVar7;
  uint uVar8;
  int *piVar9;
  uint uVar10;
  int iVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  uint uVar16;
  uint uVar17;
  uint uVar18;
  int *piVar19;
  undefined4 *puVar20;
  undefined4 *puVar21;
  
  puVar5 = &DAT_800673d4;
  puVar20 = (undefined4 *)&DAT_1f800000;
  puVar21 = (undefined4 *)&DAT_1f800100;
  if (param_1 != 0) {
    puVar20 = &DAT_1f8003c0;
    puVar21 = (undefined4 *)0x1f800400;
    puVar5 = &DAT_800673d8;
  }
  piVar19 = (int *)puVar5[2];
  if (DAT_800673e4 != 0) {
    uVar16 = (uint)Vec3_80067eb8.x >> 0xb;
    uVar17 = (uint)Vec3_80067eb8.y >> 0xb;
    uVar18 = (uint)Vec3_80067eb8.z >> 0xb;
    puVar5 = puVar20;
    if (*piVar19 != -1) {
      do {
        puVar6 = puVar5 + 2;
        *puVar5 = 0;
        puVar5[1] = 0;
        puVar5 = puVar6;
      } while (puVar6 != puVar21);
      uVar12 = 7;
      iVar13 = 0;
      iVar14 = 0;
      iVar15 = 0;
      do {
        uVar8 = (uint)*(byte *)((int)piVar19 + 1);
        bVar2 = *(byte *)piVar19;
        piVar9 = (int *)((int)piVar19 + 1);
        if ((uVar12 != 0) && (piVar9 = (int *)((int)piVar19 + 2), uVar8 != 0)) {
          piVar9 = piVar19 + 1;
        }
        uVar7 = (uint)*(byte *)piVar9;
        do {
          if (((int *)((int)piVar19 + (uint)bVar2) == piVar9) || (uVar7 == 0xff)) break;
          *(undefined *)(uVar7 + (int)puVar20) = 0;
          pbVar1 = (byte *)((int)piVar9 + 1);
          piVar9 = (int *)((int)piVar9 + 1);
          iVar11 = uVar7 - *pbVar1;
          uVar7 = (uint)*pbVar1;
        } while (iVar11 < 0);
        while (bVar3 = *(byte *)piVar9, (int *)((int)piVar19 + (uint)bVar2) != piVar9) {
          piVar9 = (int *)((int)piVar9 + 1);
          if (bVar3 != 0xff) {
            *(undefined *)((uint)bVar3 + (int)puVar20) = 0xff;
          }
        }
        uVar7 = 0;
        if ((uVar12 == 0) || (iVar13 = iVar13 * 2, uVar8 == 0)) {
          return 1;
        }
        if (-1 < (int)(uVar16 - ((uint)(iVar13 + 1 << (uVar12 & 0x1f)) >> 1))) {
          iVar13 = iVar13 + 1;
          uVar7 = 4;
        }
        iVar14 = iVar14 * 2;
        if (-1 < (int)(uVar17 - ((uint)(iVar14 + 1 << (uVar12 & 0x1f)) >> 1))) {
          iVar14 = iVar14 + 1;
          uVar7 = uVar7 + 2;
        }
        iVar15 = iVar15 * 2;
        if (-1 < (int)(uVar18 - ((uint)(iVar15 + 1 << (uVar12 & 0x1f)) >> 1))) {
          iVar15 = iVar15 + 1;
          uVar7 = uVar7 + 1;
        }
        if ((uVar8 & 1 << uVar7) == 0) break;
        piVar19 = (int *)((int)piVar19 +
                         (uint)*(byte *)((int)piVar19 + 2) +
                         (uint)*(byte *)((int)piVar19 + 3) * 0x100);
        uVar10 = 0;
        while (uVar10 != uVar7) {
          uVar4 = uVar10 & 0x1f;
          uVar10 = uVar10 + 1;
          if ((uVar8 & 1 << uVar4) != 0) {
            piVar19 = (int *)((int)piVar19 + (uint)*(byte *)piVar19);
          }
        }
        uVar12 = uVar12 - 1;
      } while( true );
    }
  }
  do {
    puVar5 = puVar20 + 2;
    *puVar20 = 0xffffffff;
    puVar20[1] = 0xffffffff;
    puVar20 = puVar5;
  } while (puVar5 != puVar21);
  return 0;
}



undefined8 FUN_80048f04(void)

{
  undefined4 uVar1;
  int iVar2;
  undefined4 uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  undefined2 *puVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  undefined4 uVar15;
  undefined4 in_t6;
  undefined4 in_t7;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  uint uVar16;
  int *piVar17;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  int *piVar18;
  undefined4 unaff_s6;
  int iVar19;
  undefined4 unaff_s7;
  int *piVar20;
  uint uVar21;
  int iVar22;
  undefined *puVar23;
  undefined *puVar24;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  undefined *puVar25;
  
  iVar2 = DAT_80066ffc;
  DAT_8006aa0c = &DAT_80066d38;
  gte_ldR11R12(Mat33_80067e84.R12R11);
  gte_ldR13R21(Mat33_80067e84.R21R13);
  gte_ldR22R23(Mat33_80067e84.R23R22);
  gte_ldR31R32(Mat33_80067e84.R32R31);
  gte_ldR33(Mat33_80067e84.R33);
  gte_ldtr(0,0,0);
  gte_ldIR3(Vec3_8006aa1c.x - cameraPosition.x);
  gte_ldIR1(cameraPosition.y - Vec3_8006aa1c.y);
  gte_ldIR2(cameraPosition.z - Vec3_8006aa1c.z);
  gte_rtir();
  iVar7 = gte_stMAC3();
  uVar5 = gte_stMAC2();
  uVar3 = gte_stMAC1();
  gte_ldTRZ(iVar7);
  gte_ldTRY(uVar5);
  gte_ldTRX(uVar3);
  gte_ldR11R12(DAT_8006aacc);
  gte_ldR13R21(DAT_8006aad0);
  gte_ldR22R23(DAT_8006aad4);
  gte_ldR31R32(DAT_8006aad8);
  gte_ldR33(DAT_8006aadc);
  iVar22 = 8;
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
LAB_80049020:
  do {
    iVar6 = iVar22;
    uVar1 = DAT_8006311c;
    iVar11 = DAT_80063118;
    uVar4 = DAT_80063114;
    uVar3 = DAT_80063110;
    iVar22 = iVar6 + -1;
    if (iVar6 == 0) {
      return CONCAT44(iVar7,uVar5);
    }
  } while ((char)(&UNK_8006aa3b)[iVar6] < 1);
  puVar23 = &DAT_80062968;
  iVar7 = 0xb0;
  if (iVar6 + -5 < 0) {
    iVar8 = 0;
    iVar19 = iVar22;
  }
  else {
    iVar7 = 0xe0;
    iVar19 = iVar6 + -5;
    iVar8 = 0x2c0;
    puVar23 = &DAT_800629e0;
  }
  uVar21 = *(uint *)(puVar23 + ((char)(&UNK_8006aa3b)[iVar6] + -1) * 4);
  iVar19 = iVar7 * iVar19 + iVar8 + -0x7ff9d530;
  puVar23 = (undefined *)0x0;
  piVar20 = (int *)(iVar19 + (uVar21 >> 0x18) * 8);
  piVar18 = (int *)((char)(&DAT_8006aa43)[iVar6] * 8 + iVar19);
  if (((int)piVar20 - (int)piVar18 < 1) && (0 < (iVar19 + iVar7) - (int)piVar20))
  goto code_r0x800490c8;
  goto LAB_8004938c;
code_r0x800490c8:
  puVar23 = (undefined *)0x1;
  gte_ldVZ0((int)(short)*piVar20);
  gte_ldVXY0(-(*piVar20 >> 0x10) & 0xffffU | piVar20[1] * -0x10000);
  gte_rtps_b();
  iVar7 = (int)(short)piVar20[-4];
  iVar6 = piVar20[-4] >> 0x10;
  uVar5 = (uint)piVar20[-3] >> 0xf & 0x1fe;
  iVar19 = (int)(short)piVar20[-3];
  uVar16 = gte_stSZ3();
  uVar15 = gte_stSXY2();
  iVar10 = *(short *)((int)cosineLookupTable + uVar5) * 0x28 >> 0xb;
  iVar12 = *(short *)((int)sineLookupTable + uVar5) * 0x28 >> 0xb;
  uVar5 = iVar10 - iVar6;
  iVar8 = iVar12 - iVar19;
  gte_ldVZ0(iVar7);
  gte_ldVZ1(iVar7);
  gte_ldVZ2(iVar7);
  gte_ldVXY0(iVar12 - iVar6 & 0xffffU | (-iVar19 - iVar10) * 0x10000);
  gte_ldVXY1(uVar5 & 0xffff | iVar8 * 0x10000);
  gte_ldVXY2(uVar5 + iVar10 * -2 & 0xffff | (iVar8 + iVar12 * -2) * 0x10000);
  gte_rtpt_b();
  iVar6 = (uVar16 >> 7) - 2;
  uVar5 = DAT_80063114;
  iVar7 = DAT_80063118;
  if (-1 < iVar6) {
    piVar17 = (int *)(iVar6 * 8 + iVar2);
    read_sxsy_fifo3(in_t6,in_t7,unaff_s0);
    gte_ldSXY0(uVar15);
    gte_ldSXY1(in_t7);
    gte_ldSXY2(in_t6);
    *(undefined4 *)((int)primitiveBuffer_next + 8) = uVar15;
    *(undefined4 *)((int)primitiveBuffer_next + 0x10) = in_t7;
    gte_nclip_b();
    *(undefined4 *)((int)primitiveBuffer_next + 0x18) = in_t6;
    *(undefined4 *)((int)primitiveBuffer_next + 4) = uVar3;
    *(int *)((int)primitiveBuffer_next + 0xc) = iVar11;
    *(uint *)((int)primitiveBuffer_next + 0x14) = uVar4;
    iVar7 = gte_stMAC0();
    *(undefined4 *)primitiveBuffer_next = 0x6000000;
    if (0 < iVar7) {
      puVar9 = (undefined2 *)*piVar17;
      *piVar17 = (int)primitiveBuffer_next;
      if (puVar9 == (undefined2 *)0x0) {
        piVar17[1] = (int)primitiveBuffer_next;
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x1c);
      }
      else {
        *puVar9 = (short)primitiveBuffer_next;
        *(char *)(puVar9 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x1c);
      }
    }
    gte_ldSXY0(uVar15);
    gte_ldSXY1(in_t6);
    gte_ldSXY2(unaff_s0);
    *(undefined4 *)((int)primitiveBuffer_next + 8) = uVar15;
    *(undefined4 *)((int)primitiveBuffer_next + 0x10) = in_t6;
    gte_nclip_b();
    *(undefined4 *)((int)primitiveBuffer_next + 0x18) = unaff_s0;
    *(undefined4 *)((int)primitiveBuffer_next + 4) = uVar3;
    *(uint *)((int)primitiveBuffer_next + 0xc) = uVar4;
    *(undefined4 *)((int)primitiveBuffer_next + 0x14) = uVar1;
    iVar7 = gte_stMAC0();
    *(undefined4 *)primitiveBuffer_next = 0x6000000;
    if (0 < iVar7) {
      puVar9 = (undefined2 *)*piVar17;
      *piVar17 = (int)primitiveBuffer_next;
      if (puVar9 == (undefined2 *)0x0) {
        piVar17[1] = (int)primitiveBuffer_next;
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x1c);
      }
      else {
        *puVar9 = (short)primitiveBuffer_next;
        *(char *)(puVar9 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x1c);
      }
    }
    gte_ldSXY0(uVar15);
    gte_ldSXY1(unaff_s0);
    gte_ldSXY2(in_t7);
    *(undefined4 *)((int)primitiveBuffer_next + 8) = uVar15;
    *(undefined4 *)((int)primitiveBuffer_next + 0x10) = unaff_s0;
    gte_nclip_b();
    *(undefined4 *)((int)primitiveBuffer_next + 0x18) = in_t7;
    *(undefined4 *)((int)primitiveBuffer_next + 4) = uVar3;
    *(undefined4 *)((int)primitiveBuffer_next + 0xc) = uVar1;
    *(int *)((int)primitiveBuffer_next + 0x14) = iVar11;
    iVar7 = gte_stMAC0();
    *(undefined4 *)primitiveBuffer_next = 0x6000000;
    if (0 < iVar7) {
      puVar9 = (undefined2 *)*piVar17;
      *piVar17 = (int)primitiveBuffer_next;
      if (puVar9 == (undefined2 *)0x0) {
        piVar17[1] = (int)primitiveBuffer_next;
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x1c);
      }
      else {
        *puVar9 = (short)primitiveBuffer_next;
        *(char *)(puVar9 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x1c);
      }
    }
    gte_ldSXY0(in_t6);
    gte_ldSXY1(in_t7);
    gte_ldSXY2(unaff_s0);
    *(undefined4 *)((int)primitiveBuffer_next + 8) = in_t6;
    *(undefined4 *)((int)primitiveBuffer_next + 0x10) = in_t7;
    gte_nclip_b();
    *(undefined4 *)((int)primitiveBuffer_next + 0x18) = unaff_s0;
    *(uint *)((int)primitiveBuffer_next + 4) = uVar4;
    *(int *)((int)primitiveBuffer_next + 0xc) = iVar11;
    *(undefined4 *)((int)primitiveBuffer_next + 0x14) = uVar1;
    iVar7 = gte_stMAC0();
    *(undefined4 *)primitiveBuffer_next = 0x6000000;
    if (0 < iVar7) {
      puVar9 = (undefined2 *)*piVar17;
      *piVar17 = (int)primitiveBuffer_next;
      if (puVar9 == (undefined2 *)0x0) {
        piVar17[1] = (int)primitiveBuffer_next;
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x1c);
      }
      else {
        *puVar9 = (short)primitiveBuffer_next;
        *(char *)(puVar9 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x1c);
      }
    }
LAB_8004938c:
    uVar4 = uVar21 >> 8 & 0xff;
    uVar16 = uVar21 >> 0x10 & 0xff;
    uVar5 = (int)(piVar20 + -4) - (int)piVar18;
    uVar21 = uVar5 >> 3;
    piVar20 = piVar20 + -4;
    if (0 < (int)uVar5) {
      uVar4 = uVar4 + uVar21;
      uVar16 = uVar16 - uVar21;
      piVar20 = piVar18;
    }
    uVar5 = uVar4 * -5 + 0x80;
    uVar5 = uVar5 | uVar5 * 0x100 | uVar5 * 0x10000;
    uVar21 = uVar5 | 0x3e000000;
    iVar7 = DAT_8006aa2c + uVar4 * 0x500;
    iVar6 = DAT_8006aa30 + -0x7f00 + uVar4 * 0x500;
    iVar19 = 0xa00;
    iVar8 = 0xa0a0a;
    iVar11 = 0;
    while( true ) {
      piVar18 = piVar20;
      iVar10 = (int)(short)*piVar18;
      uVar4 = (uint)piVar18[1] >> 0xf & 0x1fe;
      iVar12 = 8;
      if (0 < (int)uVar16) {
        puVar24 = puVar23 + iVar11;
        puVar25 = puVar23 + iVar11;
        puVar23 = puVar23 + iVar11;
        if (puVar24 != (undefined *)0x0) {
          iVar12 = 0x2f;
          puVar23 = puVar25;
        }
      }
      iVar13 = iVar12 * *(short *)((int)cosineLookupTable + uVar4) >> 0xb;
      iVar14 = iVar12 * *(short *)((int)sineLookupTable + uVar4) >> 0xb;
      uVar4 = iVar13 - (*piVar18 >> 0x10);
      iVar12 = iVar14 - (short)piVar18[1];
      gte_ldVZ0(iVar10);
      gte_ldVZ1(iVar10);
      gte_ldVXY0(uVar4 & 0xffff | iVar12 * 0x10000);
      gte_ldVXY1(uVar4 + iVar13 * -2 & 0xffff | (iVar12 + iVar14 * -2) * 0x10000);
      gte_rtpt();
      *(int *)((int)primitiveBuffer_next + 8) = iVar11;
      *(uint *)((int)primitiveBuffer_next + 0x14) = uVar5;
      *(int *)((int)primitiveBuffer_next + 0xc) = iVar7;
      *(int *)((int)primitiveBuffer_next + 0x18) = iVar6;
      *(uint *)((int)primitiveBuffer_next + 4) = uVar21;
      *(uint *)((int)primitiveBuffer_next + 0x10) = uVar21;
      *(undefined4 *)primitiveBuffer_next = 0xc000000;
      iVar10 = gte_stSXY0();
      uVar5 = gte_stSXY1();
      iVar12 = gte_stSZ1();
      iVar13 = gte_stSZ2();
      if (iVar11 != 0) {
        *(int *)((int)primitiveBuffer_next + 0x20) = iVar10;
        *(uint *)((int)primitiveBuffer_next + 0x2c) = uVar5;
        iVar7 = iVar7 + iVar19;
        *(int *)((int)primitiveBuffer_next + 0x24) = iVar7;
        iVar6 = iVar6 + iVar19;
        *(int *)((int)primitiveBuffer_next + 0x30) = iVar6;
        uVar21 = uVar21 - iVar8;
        *(uint *)((int)primitiveBuffer_next + 0x1c) = uVar21;
        *(uint *)((int)primitiveBuffer_next + 0x28) = uVar21;
        iVar11 = ((uint)(iVar12 + iVar13) >> 8) - 2;
        if (-1 < iVar11) {
          piVar20 = (int *)(iVar11 * 8 + iVar2);
          puVar9 = (undefined2 *)*piVar20;
          *piVar20 = (int)primitiveBuffer_next;
          if (puVar9 == (undefined2 *)0x0) {
            piVar20[1] = (int)primitiveBuffer_next;
            primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x34);
          }
          else {
            *puVar9 = (short)primitiveBuffer_next;
            *(char *)(puVar9 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
            primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x34);
          }
        }
      }
      iVar12 = uVar16 - 1;
      if ((int)uVar16 < 1) break;
      uVar16 = uVar16 - 2;
      iVar11 = iVar10;
      piVar20 = piVar18 + -4;
      if (iVar12 < 1) {
        iVar19 = 0x500;
        iVar8 = 0x50505;
        piVar20 = piVar18 + -2;
      }
    }
  }
  goto LAB_80049020;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_800495e8(void)

{
  bool bVar1;
  byte bVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  undefined2 *puVar6;
  undefined2 *puVar7;
  undefined4 uVar8;
  byte *pbVar9;
  undefined4 uVar10;
  undefined4 *puVar11;
  uint uVar12;
  int iVar13;
  uint uVar14;
  int iVar15;
  short sVar16;
  int iVar17;
  int **ppiVar18;
  int iVar19;
  int *piVar20;
  int iVar21;
  int iVar22;
  int *piVar23;
  
  piVar23 = &DAT_800698d0;
  if (DAT_800698e3 != '\0') {
    return;
  }
  gte_ldR11R12(Mat33_80067e84.R12R11);
  gte_ldR13R21(Mat33_80067e84.R21R13);
  gte_ldR22R23(Mat33_80067e84.R23R22);
  gte_ldR31R32(Mat33_80067e84.R32R31);
  gte_ldR33(Mat33_80067e84.R33);
  gte_ldtr(0,0,0);
  gte_ldIR3(Vec3_800698d4.x - cameraPosition.x);
  gte_ldIR1(cameraPosition.y - Vec3_800698d4.y);
  gte_ldIR2(cameraPosition.z - Vec3_800698d4.z);
  gte_rtir();
  uVar10 = gte_stMAC3();
  uVar8 = gte_stMAC2();
  uVar5 = gte_stMAC1();
  gte_ldTRZ(uVar10);
  gte_ldTRY(uVar8);
  gte_ldTRX(uVar5);
  BuildRotationMatrix(&DAT_800698e0,0x1f800000,&Mat33_80067e84);
  gte_ldR11R12(_DAT_1f800000);
  gte_ldR13R21(_DAT_1f800004);
  gte_ldR22R23(_DAT_1f800008);
  gte_ldR31R32(_DAT_1f80000c);
  gte_ldR33(_DAT_1f800010);
  uVar12 = (uint)Spyro._20_4_ >> 0xc & 0xff0;
  iVar13 = uVar12 + (uVar12 >> 2) + *(int *)((Spyro._20_4_ & 0xff) * 4 + DAT_80066f24);
  if ((byte)(&DAT_80062868)[Spyro.field11_0x1c] == 0) {
    _DAT_1f800004 = *(undefined4 *)(iVar13 + 0x24);
    _DAT_1f800000 = *(undefined4 *)(iVar13 + 0x20);
  }
  else {
    uVar12 = (uint)Spyro._20_4_ >> 0x14 & 0xff0;
    iVar15 = uVar12 + (uVar12 >> 2) + *(int *)(((uint)Spyro._20_4_ >> 6 & 0x3fc) + DAT_80066f24);
    gte_ldIR0((uint)(byte)(&DAT_80062868)[Spyro.field11_0x1c] << 4);
    _DAT_1f800000 = *(undefined4 *)(iVar13 + 0x20);
    _DAT_1f800004 = *(undefined4 *)(iVar13 + 0x24);
    _DAT_1f80000c = *(undefined4 *)(iVar15 + 0x24);
    DAT_1f800008._0_1_ = (byte)*(undefined4 *)(iVar15 + 0x20);
    puVar7 = &DAT_1f800000;
    bVar2 = (byte)DAT_1f800000;
    do {
      gte_ldIR1((uint)bVar2);
      gte_ldRFC((uint)(byte)DAT_1f800008);
      bVar2 = *(byte *)((int)puVar7 + 1);
      DAT_1f800008._0_1_ = *(byte *)((int)puVar7 + 9);
      gte_intpl_b();
      puVar6 = (undefined2 *)((int)puVar7 + 1);
      uVar5 = gte_stMAC1();
      *(char *)puVar7 = (char)uVar5;
      puVar7 = puVar6;
    } while (puVar6 != &DAT_1f800008);
  }
  puVar7 = &DAT_1f800000;
  iVar13 = *piVar23;
  _DAT_1f800008 = _DAT_1f800000;
  puVar6 = &DAT_1f800080;
  do {
    uVar12 = (uint)*(byte *)puVar7;
    uVar14 = (uint)*(byte *)((int)puVar7 + 1);
    if (iVar13 != 0) {
      uVar12 = (int)(uVar12 * 3) >> 2;
      uVar14 = (int)(uVar14 * 3) >> 2;
    }
    *(char *)puVar6 = (char)uVar12;
    *(char *)((int)puVar6 + 1) = (char)(uVar12 + uVar14 >> 1);
    puVar7 = (undefined2 *)((int)puVar7 + 1);
    puVar6 = puVar6 + 1;
  } while (puVar7 != &DAT_1f800008);
  gte_ldVXY0(0);
  gte_ldVZ0(0);
  gte_rtps_b();
  piVar23 = &DAT_800632cc;
  puVar11 = (undefined4 *)&DAT_1f800000;
  sVar16 = (short)DAT_800632cc;
  iVar15 = gte_stSXY2();
  iVar21 = gte_stSZ3();
  pbVar9 = (byte *)((int)&DAT_1f800080 + 1);
  iVar13 = DAT_800632cc;
  do {
    piVar23 = piVar23 + 1;
    gte_ldVZ0((int)((uint)(byte)DAT_1f800080 * (int)sVar16) >> 10);
    gte_ldVXY0((int)((uint)(byte)DAT_1f800080 * (iVar13 >> 0x10)) >> 10 & 0xffff);
    gte_rtps_b();
    iVar13 = *piVar23;
    DAT_1f800080._0_1_ = *pbVar9;
    sVar16 = (short)iVar13;
    uVar5 = gte_stSXY2();
    uVar8 = gte_stSZ3();
    *puVar11 = uVar5;
    puVar11[1] = uVar8;
    iVar4 = DAT_800698e4;
    iVar3 = DAT_80066ffc;
    bVar1 = puVar11 != &DAT_1f800078;
    puVar11 = puVar11 + 2;
    pbVar9 = pbVar9 + 1;
  } while (bVar1);
  piVar23 = (int *)&DAT_1f800000;
  _DAT_1f800080 = _DAT_1f800000;
  _DAT_1f800084 = _DAT_1f800004;
  while (iVar13 = *piVar23, piVar23 != (int *)&DAT_1f800080) {
    iVar17 = piVar23[1];
    iVar19 = piVar23[2];
    iVar22 = piVar23[3];
    piVar23 = piVar23 + 2;
    *(int *)((int)primitiveBuffer_next + 0x10) = 0x32608080;
    *(int *)((int)primitiveBuffer_next + 0x14) = iVar15;
    *(int *)((int)primitiveBuffer_next + 0x18) = 0;
    *(int *)((int)primitiveBuffer_next + 0x1c) = iVar13;
    *(int *)((int)primitiveBuffer_next + 0x20) = 0;
    *(int *)((int)primitiveBuffer_next + 0x24) = iVar19;
    *(int *)((int)primitiveBuffer_next + 8) = 0;
    *(int *)((int)primitiveBuffer_next + 4) = -0x1efff9c0;
    *(uint *)primitiveBuffer_next = ((uint)primitiveBuffer_next ^ 0x82000000) + 0xc;
    *(int *)((int)primitiveBuffer_next + 0xc) = 0x6000000;
    iVar13 = (iVar17 + iVar22 + ((uint)(iVar17 + iVar22) >> 1) + iVar21 >> 9) - iVar4;
    if (-1 < iVar13) {
      ppiVar18 = (int **)(iVar13 * 8 + iVar3);
      piVar20 = *ppiVar18;
      *ppiVar18 = (int *)((int)primitiveBuffer_next + 0xc);
      if (piVar20 == (int *)0x0) {
        ppiVar18[1] = (int *)primitiveBuffer_next;
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
      }
      else {
        *(short *)piVar20 = (short)primitiveBuffer_next;
        *(char *)((int)piVar20 + 2) = (char)((uint)primitiveBuffer_next >> 0x10);
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x28);
      }
    }
  }
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_800499d4(void)

{
  char cVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int *piVar9;
  uint uVar10;
  undefined4 *puVar11;
  int *piVar12;
  uint uVar13;
  int *piVar14;
  undefined2 *puVar15;
  uint uVar16;
  int iVar17;
  int *piVar18;
  int *piVar19;
  uint uVar20;
  uint uVar21;
  uint uVar22;
  undefined4 uVar23;
  uint uVar24;
  undefined4 uVar25;
  int iVar26;
  uint uVar27;
  uint uVar28;
  undefined4 uVar29;
  uint uVar30;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  int iVar31;
  undefined4 unaff_s2;
  uint uVar32;
  undefined4 unaff_s3;
  uint uVar33;
  undefined4 unaff_s4;
  uint uVar34;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  undefined4 unaff_s8;
  int iVar35;
  int *piVar36;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  
  piVar9 = DAT_80068214;
  iVar8 = DAT_8006820c;
  iVar7 = Mat33_80067e84.R33;
  iVar6 = Mat33_80067e84.R32R31;
  iVar5 = Mat33_80067e84.R23R22;
  iVar4 = Mat33_80067e84.R21R13;
  iVar3 = Mat33_80067e84.R12R11;
  iVar2 = DAT_80066ffc;
  DAT_1f8003f0 = &DAT_80066d38;
  uVar32 = (uint)cameraPosition.x >> 2;
  uVar33 = (uint)cameraPosition.y >> 2;
  uVar34 = (uint)cameraPosition.z >> 2;
  iVar35 = gte_stVXY1();
  iVar31 = DAT_80068210 + -0x1f00;
  piVar36 = (int *)(iVar35 + 0x1400);
  DAT_1f8003d0 = unaff_s0;
  DAT_1f8003d4 = unaff_s1;
  DAT_1f8003d8 = unaff_s2;
  DAT_1f8003dc = unaff_s3;
  DAT_1f8003e0 = unaff_s4;
  DAT_1f8003e4 = unaff_s5;
  DAT_1f8003e8 = unaff_s6;
  DAT_1f8003ec = unaff_s7;
  DAT_1f8003f4 = (undefined *)register0x00000074;
  DAT_1f8003f8 = unaff_s8;
  DAT_1f8003fc = unaff_retaddr;
  while (piVar12 = piVar36, piVar36 = piVar12 + 2, piVar12 != piVar9) {
    iVar35 = *piVar12;
    gte_ldR11R12(iVar3);
    gte_ldR13R21(iVar4);
    gte_ldR22R23(iVar5);
    gte_ldR31R32(iVar6);
    gte_ldR33(iVar7);
    gte_ldtr(0,0,0);
    uVar20 = *(uint *)(iVar35 + 0x1c);
    if ((uVar20 & 0xffff) != 0) {
      uVar16 = (uVar34 - (uVar20 & 0xffff)) * 0x10000;
      uVar13 = uVar16 + (uVar33 - (*(uint *)(iVar35 + 0x10) >> 2));
      gte_ldVXY0(uVar13);
      gte_ldVZ0((*(uint *)(iVar35 + 0xc) >> 2) - uVar32);
      gte_rtps_b();
      cVar1 = *(char *)(iVar35 + 0x47);
      uVar10 = uVar20 >> 0x16 & 0x3f;
      uVar20 = uVar20 >> 0x10 & 0x3f;
      uVar24 = gte_stMAC3();
      uVar22 = gte_stMAC2();
      uVar21 = gte_stMAC1();
      gte_ldTRZ(uVar24);
      if ((int)(uVar24 - 0x1000) < 0) {
        gte_ldTRY(uVar22);
        gte_ldTRX(uVar21);
        iVar35 = iVar3;
        uVar27 = iVar4;
        uVar28 = iVar5;
        iVar26 = iVar6;
        uVar30 = iVar7;
        if (uVar20 != 0) {
          gte_ldVXY0((uint)(ushort)cosineLookupTable[uVar20 * 4] << 0x10);
          gte_ldVZ0((uint)(ushort)sineLookupTable[uVar20 * 4]);
          gte_rtv0_b();
          iVar35 = gte_stIR1();
          gte_ldVXY0((uint)(ushort)sineLookupTable[uVar20 * 4] * -0x10000);
          gte_ldVZ0((uint)(ushort)cosineLookupTable[uVar20 * 4]);
          uVar24 = gte_stIR2();
          iVar26 = gte_stIR3();
          gte_rtv0_b();
          uVar22 = iVar35 * 0x10000;
          iVar35 = (iVar3 & 0xffffU) + uVar22;
          iVar26 = (iVar6 & 0xffffU) + iVar26 * 0x10000;
          uVar24 = uVar24 & 0xffff;
          uVar13 = gte_stIR1();
          iVar17 = gte_stIR2();
          uVar21 = gte_stIR3();
          uVar13 = uVar13 & 0xffff;
          uVar27 = (iVar4 & 0xffff0000U) + uVar13;
          uVar16 = iVar17 * 0x10000;
          uVar28 = uVar16 + uVar24;
          uVar30 = uVar21 & 0xffff;
          gte_ldR11R12(iVar35);
          gte_ldR13R21(uVar27);
          gte_ldR22R23(uVar28);
          gte_ldR31R32(iVar26);
          gte_ldR33(uVar30);
        }
        if (uVar10 != 0) {
          gte_ldVZ0(0);
          gte_ldVXY0((uint)(ushort)sineLookupTable[uVar10 * 4] * 0x10000 +
                     (uint)(ushort)cosineLookupTable[uVar10 * 4]);
          gte_rtv0_b();
          uVar22 = gte_stIR1();
          gte_ldVXY0((-(uint)(ushort)sineLookupTable[uVar10 * 4] & 0xffff) +
                     (uint)(ushort)cosineLookupTable[uVar10 * 4] * 0x10000);
          gte_ldVZ0(0);
          iVar35 = gte_stIR2();
          uVar20 = gte_stIR3();
          gte_rtv0_b();
          uVar24 = iVar35 * 0x10000;
          uVar27 = (uVar27 & 0xffff) + uVar24;
          uVar22 = uVar22 & 0xffff;
          iVar35 = gte_stIR1();
          uVar16 = gte_stIR2();
          iVar26 = gte_stIR3();
          uVar13 = iVar35 * 0x10000;
          iVar35 = uVar13 + uVar22;
          uVar16 = uVar16 & 0xffff;
          uVar28 = (uVar28 & 0xffff0000) + uVar16;
          uVar21 = iVar26 * 0x10000;
          iVar26 = uVar21 + (uVar20 & 0xffff);
        }
        gte_ldR11R12(iVar35);
        gte_ldR13R21(uVar27);
        gte_ldR22R23(uVar28);
        gte_ldR31R32(iVar26);
        gte_ldR33(uVar30);
        gte_ldVXY0(0);
        iVar35 = piVar12[1] * 2;
        gte_ldVZ0(iVar35);
        gte_ldVXY1(iVar35);
        gte_ldVZ1(0);
        gte_ldVXY2(0);
        uVar10 = piVar12[1] * -2 & 0xffff;
        gte_ldVZ2(uVar10);
        uVar29 = gte_stSXY2();
        iVar35 = gte_stSZ3();
        gte_rtpt_b();
        uVar20 = 0x80;
        if (0 < iVar35 + -0xc00) {
          uVar20 = 0x400U - (iVar35 + -0xc00) >> 3;
        }
        read_sxsy_fifo3(uVar21,uVar22,uVar24);
        gte_nclip_b();
        read_sz_fifo3(0x80061bd8,uVar13,uVar16);
        iVar26 = gte_stMAC0();
        gte_ldVXY0(uVar10);
        gte_ldVZ0(0);
        _DAT_1f800020 = sineLookupTable;
        _DAT_1f800000 = uVar21;
        _DAT_1f800004 = uVar22;
        _DAT_1f800008 = uVar24;
        if (-1 < iVar26) {
          gte_rtps_b();
          _DAT_1f80000c = gte_stSXY2();
          _DAT_1f80002c = gte_stSZ3();
          _DAT_1f800024 = uVar13;
          _DAT_1f800028 = uVar16;
          if (-1 < (int)(uVar21 & uVar22 & uVar24 & _DAT_1f80000c)) {
            uVar10 = uVar22 - 0xe40000 | 0xe40000 | uVar24 - 0xe40000 | _DAT_1f80000c - 0xe40000;
            if ((int)uVar10 < 0) {
              if ((-1 < (int)(uVar10 & uVar22 * 0x10000 & uVar24 * 0x10000 & _DAT_1f80000c * 0x10000
                             )) &&
                 (puVar11 = (undefined4 *)&DAT_1f800000,
                 (int)(uVar21 * 0x10000 + 0xfe000000 | uVar22 * 0x10000 + 0xfe000000 |
                       uVar24 * 0x10000 + 0xfe000000 | _DAT_1f80000c * 0x10000 + 0xfe000000) < 1)) {
                piVar12 = (int *)&DAT_1f800000;
                if (0 < iVar35 + -0x400) {
                  piVar14 = (int *)&DAT_1f800000;
                  piVar18 = (int *)&DAT_1f800004;
                  do {
                    if (piVar18[8] - piVar12[8] < 0) {
                      piVar12 = piVar18;
                    }
                    piVar19 = piVar18 + 1;
                    if (0 < piVar18[8] - piVar14[8]) {
                      piVar14 = piVar18;
                    }
                    piVar18 = piVar19;
                  } while (piVar19 != (int *)&DAT_1f800010);
                  iVar26 = *piVar14;
                  *piVar12 = *piVar12 + 0x10000;
                  *piVar14 = iVar26 + -0x10000;
                }
                _DAT_1f800010 = _DAT_1f800000;
                _DAT_1f800030 = _DAT_1f800020;
                while (uVar23 = *puVar11, puVar11 != (undefined4 *)&DAT_1f800010) {
                  uVar25 = puVar11[1];
                  iVar26 = puVar11[8];
                  iVar17 = puVar11[9];
                  puVar11 = puVar11 + 1;
                  *(uint *)((int)primitiveBuffer_next + 4) = uVar20 * 0x10101 + 0x26000000;
                  *(undefined4 *)((int)primitiveBuffer_next + 8) = uVar29;
                  *(int *)((int)primitiveBuffer_next + 0xc) = iVar8;
                  *(int *)((int)primitiveBuffer_next + 0x14) = iVar31;
                  *(int *)((int)primitiveBuffer_next + 0x1c) = iVar8 + 0x1f00;
                  *(undefined4 *)((int)primitiveBuffer_next + 0x10) = uVar23;
                  *(undefined4 *)((int)primitiveBuffer_next + 0x18) = uVar25;
                  *(undefined4 *)primitiveBuffer_next = 0x7000000;
                  iVar26 = (iVar26 + iVar17 + ((uint)(iVar26 + iVar17) >> 1) + iVar35 >> 7) -
                           (cVar1 + -3);
                  if (-1 < iVar26) {
                    piVar12 = (int *)(iVar26 * 8 + iVar2);
                    puVar15 = (undefined2 *)*piVar12;
                    *piVar12 = (int)primitiveBuffer_next;
                    if (puVar15 == (undefined2 *)0x0) {
                      piVar12[1] = (int)primitiveBuffer_next;
                      primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x20);
                    }
                    else {
                      *puVar15 = (short)primitiveBuffer_next;
                      *(char *)(puVar15 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
                      primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x20);
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return;
}



void FUN_80049efc(int param_1,undefined4 param_2)

{
  bool bVar1;
  byte bVar2;
  char cVar3;
  byte *pbVar4;
  short *psVar5;
  short *psVar6;
  undefined *puVar7;
  short sVar8;
  uint uVar9;
  int iVar10;
  short sVar11;
  int iVar12;
  short sVar13;
  int iVar14;
  int iVar15;
  uint uVar16;
  int iVar17;
  int *piVar18;
  short *psVar19;
  uint uVar20;
  short *psVar21;
  uint uVar22;
  uint uVar23;
  undefined4 uVar24;
  undefined4 uVar25;
  undefined4 uVar26;
  int iVar27;
  int iVar28;
  short *psVar29;
  code *UNRECOVERED_JUMPTABLE_00;
  
  gte_ldLR1LR2(param_2);
  gte_ldR11R12(*(undefined4 *)(param_1 + 0x20));
  gte_ldR13R21(*(undefined4 *)(param_1 + 0x24));
  gte_ldR22R23(*(undefined4 *)(param_1 + 0x28));
  gte_ldR31R32(*(undefined4 *)(param_1 + 0x2c));
  gte_ldR33(*(undefined4 *)(param_1 + 0x30));
  gte_ldtr(*(uint *)(param_1 + 0xc) >> 2,*(uint *)(param_1 + 0x10) >> 2,
           *(uint *)(param_1 + 0x14) >> 2);
  iVar27 = (&objectModels[*(ushort *)(param_1 + 0x36)][2].field3_0xc)
           [*(uint *)(param_1 + 0x3c) & 0xff];
  uVar9 = *(uint *)((*(uint *)(param_1 + 0x3c) >> 0xd & 0x7f8) + iVar27 + 0x24);
  uVar20 = (uint)*(byte *)(iVar27 + 5);
  uVar22 = (uint)*(byte *)(iVar27 + 2);
  psVar5 = (short *)((uVar9 & 0xffff) * 2 + *(int *)(iVar27 + 0x20));
  pbVar4 = (byte *)((uVar9 >> 0xf & 0x3fe) + (int)psVar5);
  uVar16 = uVar9 >> 0x19 & 1;
  iVar10 = 0;
  uVar9 = 0;
  iVar14 = 0;
  gte_ldRBK(param_1);
  if (0 < (int)(uVar20 - 0x80)) {
    uVar20 = 0x80;
  }
  psVar21 = (short *)(uVar20 * 8 + 0x1f800000);
  piVar18 = *(int **)(iVar27 + 0xc);
  psVar29 = &DAT_1f800000;
  do {
    if (uVar16 == 0) {
      bVar2 = *pbVar4;
      pbVar4 = pbVar4 + 1;
      uVar16 = bVar2 & 1;
      iVar27 = *(int *)(&DAT_80062674 + (bVar2 & 0xfe) * 2) + *piVar18;
      iVar10 = iVar10 + (iVar27 >> 0x15);
      uVar9 = uVar9 - (iVar27 * 0x800 >> 0x15);
      iVar14 = iVar14 - (iVar27 * 0x400000 >> 0x15);
      psVar6 = psVar5;
    }
    else {
      uVar23 = (uint)*psVar5;
      iVar27 = *piVar18;
      psVar6 = psVar5 + 1;
      uVar16 = uVar23 & 1;
      if ((uVar23 & 2) == 0) {
        iVar10 = iVar10 + ((int)uVar23 >> 9) + (iVar27 >> 0x15);
        uVar9 = (uVar9 - ((int)(uVar23 << 0x15) >> 0x19)) - ((iVar27 << 0xb) >> 0x15);
        iVar14 = (iVar14 + ((int)(uVar23 << 0x1a) >> 0x1b) * -4) - ((iVar27 << 0x16) >> 0x15);
      }
      else {
        sVar8 = *psVar6;
        psVar6 = psVar5 + 2;
        iVar14 = (int)((uVar23 & 0xffc) << 0x14) >> 0x14;
        iVar10 = (int)sVar8 >> 5;
        uVar9 = ((int)sVar8 << 0x1a) >> 0x15 | (uVar23 & 0xf000) >> 0xb;
      }
    }
    gte_ldIR3(iVar10 << (uVar22 & 0x1f));
    gte_ldIR1(uVar9 << (uVar22 & 0x1f));
    gte_ldIR2(iVar14 << (uVar22 & 0x1f));
    psVar19 = psVar29 + 4;
    gte_rtir_b();
    uVar24 = gte_stMAC3();
    uVar25 = gte_stMAC1();
    uVar26 = gte_stMAC2();
    *psVar29 = (short)uVar24;
    psVar29[1] = -(short)uVar25;
    psVar29[2] = -(short)uVar26;
    psVar5 = psVar6;
    piVar18 = piVar18 + 1;
    psVar29 = psVar19;
  } while (psVar19 != psVar21);
  psVar5 = &DAT_1f800000;
  iVar10 = 0;
  iVar14 = 0;
  iVar27 = 0;
  do {
    sVar8 = *psVar5;
    psVar29 = psVar5 + 1;
    psVar6 = psVar5 + 2;
    psVar5 = psVar5 + 4;
    iVar10 = iVar10 + sVar8;
    iVar14 = iVar14 + *psVar29;
    iVar27 = iVar27 + *psVar6;
  } while (psVar5 != psVar21);
  iVar28 = gte_stRBK();
  iVar12 = gte_stTRX();
  iVar15 = gte_stTRY();
  iVar17 = gte_stTRZ();
  *(int *)(iVar28 + 0xc) = iVar12 * 4 + iVar10 / (int)uVar20;
  *(int *)(iVar28 + 0x10) = iVar15 * 4 + iVar14 / (int)uVar20;
  *(int *)(iVar28 + 0x14) = iVar17 * 4 + iVar27 / (int)uVar20;
  gte_ldbkdir(iVar10 / (int)uVar20,iVar14 / (int)uVar20,iVar27 / (int)uVar20);
  uVar9 = (uint)*(byte *)(iVar28 + 2);
  psVar5 = &DAT_1f800000;
  psVar29 = (short *)(uVar20 * 8 + 0x1f7ffff8);
  do {
    while( true ) {
      uVar16 = rand();
      puVar7 = (undefined *)FUN_80041c50(2);
      uVar24 = gte_stTRX();
      uVar25 = gte_stTRY();
      uVar26 = gte_stTRZ();
      sVar8 = (*psVar5 >> 2) + (short)uVar24;
      sVar11 = (psVar5[1] >> 2) + (short)uVar25;
      sVar13 = (psVar5[2] >> 2) + (short)uVar26;
      *(short *)(puVar7 + 4) = sVar8;
      *(short *)(puVar7 + 6) = sVar11;
      *(short *)(puVar7 + 8) = sVar13;
      if ((uVar16 & 3) != 0) break;
      *(short *)(puVar7 + 10) = sVar8 + (short)((int)(uVar16 << 0x11) >> 0x1b);
      *(short *)(puVar7 + 0xc) = sVar11 + (short)((int)(uVar16 << 0x14) >> 0x1b);
      *(ushort *)(puVar7 + 0xe) = sVar13 - ((ushort)((uVar16 << 0x17) >> 0x1d) + 6);
      *puVar7 = 0x48;
      puVar7[1] = 1;
      puVar7[2] = (byte)(uVar16 >> 10) & 0x1f;
      puVar7[3] = 1;
      *(undefined4 *)(puVar7 + 0x10) = 0x5080f0f0;
      *(undefined4 *)(puVar7 + 0x14) = 0x24080c0;
      bVar1 = psVar5 == psVar29;
      psVar5 = psVar5 + 4;
      if (bVar1) {
                    // WARNING: Could not recover jumptable at 0x8004a36c. Too many branches
                    // WARNING: Treating indirect jump as call
        (*UNRECOVERED_JUMPTABLE_00)();
        return;
      }
    }
    uVar24 = gte_stLR1LR2();
    puVar7[10] = ((byte)uVar16 & 7) + (char)uVar24;
    puVar7[0xb] = (byte)uVar16;
    uVar20 = uVar16 & 0x38;
    cVar3 = (char)uVar20 + '\x18';
    if (uVar20 + 0x38 == uVar20) {
      cVar3 = (char)uVar20 + '@';
    }
    puVar7[0xc] = cVar3;
    puVar7[0xd] = cVar3;
    puVar7[0xe] = cVar3;
    puVar7[0xf] = 0x2e;
    puVar7[0x10] = 0;
    puVar7[0x11] = 4;
    sVar8 = psVar5[1];
    iVar14 = gte_stRBK();
    iVar27 = gte_stGBK();
    iVar10 = gte_stBBK();
    iVar10 = ((psVar5[2] - iVar10 >> 5) >> (uVar9 & 0x1f)) + ((int)(uVar16 << 0x17) >> 0x1d);
    *(short *)(puVar7 + 0x12) =
         (short)((*psVar5 - iVar14 >> 5) >> (uVar9 & 0x1f)) + (short)((int)(uVar16 << 0x11) >> 0x1d)
    ;
    *(short *)(puVar7 + 0x14) =
         (short)((sVar8 - iVar27 >> 5) >> (uVar9 & 0x1f)) + (short)((int)(uVar16 << 0x14) >> 0x1d);
    if (iVar10 < 0) {
      iVar10 = 0;
    }
    *(short *)(puVar7 + 0x16) = (short)iVar10;
    *puVar7 = 0xb;
    puVar7[2] = 0;
    puVar7[3] = 1;
    bVar1 = psVar5 != psVar29;
    psVar5 = psVar5 + 4;
  } while (bVar1);
                    // WARNING: Could not recover jumptable at 0x8004a2ec. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



void RenderText(char *text,int screenPosX,short screenPosY,int colorIndex,TextConfig *param_5)

{
  ushort uVar1;
  LinkedList *pLVar2;
  undefined *puVar3;
  undefined2 uVar4;
  uint uVar5;
  byte *pbVar6;
  uint *puVar7;
  byte *pbVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  uint uVar15;
  uint *puVar16;
  
  puVar3 = primitiveBuffer_next;
  pLVar2 = LinkedList_primitiveBuffer;
  uVar10 = colorArray[colorIndex];
  if (param_5 == (TextConfig *)0x0) {
    iVar11 = 0;
    iVar12 = 9;
    iVar13 = 0x80;
  }
  else {
    iVar11 = param_5->vramYmin;
    iVar12 = param_5->vramYmax;
    iVar13 = param_5->length;
  }
  if (0 < iVar12 - iVar11) {
    *(undefined4 *)(primitiveBuffer_next + 8) = 0;
    *(undefined2 *)(puVar3 + 4) = 0x618;
    *(undefined2 *)(puVar3 + 6) = 0xe100;
    *(uint *)puVar3 = (uint)(puVar3 + 0xc) ^ 0x82000000;
    puVar16 = (uint *)(puVar3 + 0xc);
LAB_8004a408:
    iVar14 = iVar13;
    iVar9 = screenPosX;
    pbVar8 = (byte *)text;
    uVar15 = (uint)*pbVar8;
    text = (char *)(pbVar8 + 1);
    iVar13 = iVar14 + -1;
    if ((uVar15 != 0) && (-1 < iVar13)) {
      uVar1 = spriteCharacterWidths[uVar15];
      uVar5 = uVar1 & 0xff;
      if (uVar5 == 0xff) goto code_r0x8004a438;
      goto LAB_8004a4b8;
    }
    if (-1 < (int)(puVar16 + -5) - (int)puVar3) {
      puVar7 = pLVar2->tail;
      pLVar2->tail = puVar16 + -5;
      primitiveBuffer_next = (undefined *)puVar16;
      if (puVar7 == (uint *)0x0) {
        pLVar2->head = (uint *)puVar3;
      }
      else {
        *(short *)puVar7 = (short)puVar3;
        *(char *)((int)puVar7 + 2) = (char)((uint)puVar3 >> 0x10);
      }
    }
  }
  return;
code_r0x8004a438:
  screenPosX = iVar9 + 10;
  if (uVar15 == 0x40) {
    uVar15 = (uint)(byte)*text;
    text = (char *)(pbVar8 + 2);
    pbVar8 = &DAT_800637a4;
    do {
      pbVar6 = pbVar8;
      if (pbVar6 == (byte *)0x800637d2) {
        uVar10 = colorArray[uVar15 - 0x30];
        screenPosX = iVar9;
        iVar13 = iVar14 + -2;
        goto LAB_8004a408;
      }
      pbVar8 = pbVar6 + 2;
    } while (*pbVar6 != uVar15);
    iVar13 = iVar14 + -2;
    uVar1 = *(ushort *)((int)spriteCharacterWidths + ((int)(char)pbVar6[1] & 0x7fU));
    uVar5 = uVar1 & 0xff;
    if ((char)pbVar6[1] < 0) {
      iVar9 = iVar9 - ((uVar1 & 0xf00) >> 8);
    }
LAB_8004a4b8:
    *(short *)((int)puVar16 + 10) =
         (short)((int)((uint)(uVar1 >> 8) << 0x18) >> 0x1c) + screenPosY + (short)iVar11;
    puVar16[1] = uVar10;
    *(short *)(puVar16 + 2) = (short)iVar9;
    *(byte *)(puVar16 + 3) = ((byte)uVar5 & 0x1f) * '\f';
    *(char *)((int)puVar16 + 0xd) =
         (char)((uVar5 & 0xe0) >> 2) + (char)((uVar5 & 0xe0) >> 5) + (char)iVar11;
    if ((((uVar15 == 0x3c) || (uVar15 == 0x3e)) || (uVar15 == 0x7b)) ||
       (uVar4 = 0x4922, uVar15 == 0x7d)) {
      puVar16[1] = 0x64808080;
      uVar4 = 0x4962;
    }
    *(undefined2 *)((int)puVar16 + 0xe) = uVar4;
    puVar16[4] = (iVar12 - iVar11) * 0x10000 + 0xc;
    *puVar16 = (uint)(puVar16 + 5) ^ 0x84000000;
    screenPosX = iVar9 + (uVar1 >> 8 & 0xf);
    puVar16 = puVar16 + 5;
  }
  goto LAB_8004a408;
}



void RenderText2(char *text,int screenPosX,short screenPosY,int colorIndex,int *param_5)

{
  ushort uVar1;
  LinkedList *pLVar2;
  undefined *puVar3;
  char cVar4;
  undefined2 uVar5;
  uint uVar6;
  byte *pbVar7;
  uint *puVar8;
  short sVar9;
  byte *pbVar10;
  uint uVar11;
  int iVar12;
  uint uVar13;
  uint *puVar14;
  
  puVar3 = primitiveBuffer_next;
  pLVar2 = LinkedList_primitiveBuffer;
  iVar12 = 10;
  if (param_5 != (int *)0x0) {
    iVar12 = 8;
  }
  uVar11 = colorArray[colorIndex];
  puVar14 = (uint *)primitiveBuffer_next;
LAB_8004a5f8:
  pbVar10 = (byte *)text;
  *(undefined2 *)((int)puVar14 + 0x16) = 0x618;
  uVar13 = (uint)*pbVar10;
  text = (char *)(pbVar10 + 1);
  if (uVar13 == 0) {
    if (-1 < (int)(puVar14 + -10) - (int)puVar3) {
      puVar8 = pLVar2->tail;
      pLVar2->tail = puVar14 + -10;
      primitiveBuffer_next = (undefined *)puVar14;
      if (puVar8 == (uint *)0x0) {
        pLVar2->head = (uint *)puVar3;
      }
      else {
        *(short *)puVar8 = (short)puVar3;
        *(char *)((int)puVar8 + 2) = (char)((uint)puVar3 >> 0x10);
      }
    }
    return;
  }
  uVar1 = spriteCharacterWidths[uVar13];
  uVar6 = uVar1 & 0xff;
  if (uVar6 == 0xff) goto code_r0x8004a628;
  goto LAB_8004a6a8;
code_r0x8004a628:
  screenPosX = screenPosX + iVar12;
  if (uVar13 == 0x40) {
    uVar13 = (uint)(byte)*text;
    text = (char *)(pbVar10 + 2);
    screenPosX = screenPosX - iVar12;
    pbVar10 = &DAT_800637a4;
    do {
      pbVar7 = pbVar10;
      if (pbVar7 == (byte *)0x800637d2) {
        uVar11 = colorArray[uVar13 - 0x30];
        goto LAB_8004a5f8;
      }
      pbVar10 = pbVar7 + 2;
    } while (*pbVar7 != uVar13);
    uVar1 = *(ushort *)((int)spriteCharacterWidths + ((int)(char)pbVar7[1] & 0x7fU));
    uVar6 = uVar1 & 0xff;
    if ((char)pbVar7[1] < 0) {
      screenPosX = screenPosX - ((uVar1 & 0xf00) >> 8);
    }
LAB_8004a6a8:
    sVar9 = (short)((int)((uint)(uVar1 >> 8) << 0x18) >> 0x1c) + screenPosY;
    *(short *)((int)puVar14 + 10) = sVar9;
    *(short *)((int)puVar14 + 0x12) = sVar9;
    *(short *)((int)puVar14 + 0x1a) = sVar9 + 9;
    *(short *)((int)puVar14 + 0x22) = sVar9 + 9;
    puVar14[1] = uVar11;
    sVar9 = (short)screenPosX;
    *(short *)(puVar14 + 2) = sVar9;
    *(short *)(puVar14 + 6) = sVar9;
    *(short *)(puVar14 + 4) = sVar9 + 0xc;
    *(short *)(puVar14 + 8) = sVar9 + 0xc;
    screenPosX = screenPosX + (uVar1 >> 8 & 0xf);
    cVar4 = ((byte)uVar6 & 0x1f) * '\f';
    *(char *)(puVar14 + 3) = cVar4;
    *(char *)(puVar14 + 7) = cVar4;
    *(char *)(puVar14 + 5) = cVar4 + '\f';
    *(char *)(puVar14 + 9) = cVar4 + '\f';
    cVar4 = (char)((uVar6 & 0xe0) >> 2) + (char)((uVar6 & 0xe0) >> 5);
    *(char *)((int)puVar14 + 0xd) = cVar4;
    *(char *)((int)puVar14 + 0x15) = cVar4;
    *(char *)((int)puVar14 + 0x1d) = cVar4 + '\t';
    *(char *)((int)puVar14 + 0x25) = cVar4 + '\t';
    uVar5 = 0x4962;
    if ((((uVar13 != 0x3c) && (uVar13 != 0x3e)) && (uVar13 != 0x7b)) && (uVar13 != 0x7d)) {
      uVar5 = 0x4922;
    }
    *(undefined2 *)((int)puVar14 + 0xe) = uVar5;
    *(undefined *)((int)puVar14 + 7) = 0x2c;
    *puVar14 = (uint)(puVar14 + 10) ^ 0x89000000;
    puVar14 = puVar14 + 10;
  }
  goto LAB_8004a5f8;
}



int GetTextWidth(char *text)

{
  byte bVar1;
  ushort uVar2;
  int iVar3;
  byte *pbVar4;
  byte *pbVar5;
  int iVar6;
  uint uVar7;
  
  iVar3 = 0;
LAB_8004a7e8:
  iVar6 = iVar3;
  pbVar5 = (byte *)text;
  uVar7 = (uint)*pbVar5;
  text = (char *)(pbVar5 + 1);
  if (uVar7 == 0) {
    return iVar6;
  }
  uVar2 = spriteCharacterWidths[uVar7];
  if ((uVar2 & 0xff) == 0xff) goto code_r0x8004a814;
  goto LAB_8004a86c;
code_r0x8004a814:
  iVar3 = iVar6 + 10;
  if (uVar7 == 0x40) {
    bVar1 = *text;
    text = (char *)(pbVar5 + 2);
    pbVar5 = &DAT_800637a4;
    do {
      pbVar4 = pbVar5;
      iVar3 = iVar6;
      if (pbVar4 == (byte *)0x800637d2) goto LAB_8004a7e8;
      pbVar5 = pbVar4 + 2;
    } while (*pbVar4 != bVar1);
    if (-1 < (char)pbVar4[1]) {
      uVar2 = *(ushort *)((int)spriteCharacterWidths + (int)(char)pbVar4[1]);
LAB_8004a86c:
      iVar3 = iVar6 + (uVar2 >> 8 & 0xf);
    }
  }
  goto LAB_8004a7e8;
}



undefined4 FUN_8004a87c(undefined param_1,undefined param_2,undefined4 param_3)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  code *UNRECOVERED_JUMPTABLE;
  
  puVar3 = &DAT_80068078;
  do {
    if (*(char *)(puVar3 + 4) == '\0') {
      *(undefined *)(puVar3 + 4) = param_1;
      *(undefined *)((int)puVar3 + 0x11) = param_2;
      puVar3[3] = param_3;
      iVar1 = rand();
      *(char *)((int)puVar3 + 0x12) = (char)iVar1;
      *(undefined *)((int)puVar3 + 0x13) = 4;
                    // WARNING: Could not recover jumptable at 0x8004a8cc. Too many branches
                    // WARNING: Treating indirect jump as call
      uVar2 = (*UNRECOVERED_JUMPTABLE)();
      return uVar2;
    }
    puVar3 = puVar3 + 5;
  } while (puVar3 != &DAT_800681b8);
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void RenderAura(void)

{
  bool bVar1;
  ushort uVar2;
  uint uVar3;
  uint *puVar4;
  uint uVar5;
  int iVar6;
  undefined4 *puVar7;
  uint uVar8;
  int iVar9;
  undefined4 uVar10;
  int iVar11;
  uint uVar12;
  ushort *puVar13;
  ushort *puVar14;
  int iVar15;
  uint **ppuVar16;
  Vec3 *pVVar17;
  uint *puVar19;
  int iVar20;
  int iVar21;
  Vec3 *pVVar18;
  
  DAT_1f8003d4 = DAT_80066ffc;
  gte_ldL11L12(Mat33_80067e84.R12R11);
  gte_ldL13L21(Mat33_80067e84.R21R13);
  gte_ldL22L23(Mat33_80067e84.R23R22);
  gte_ldL31L32(Mat33_80067e84.R32R31);
  gte_ldL33(Mat33_80067e84.R33);
  DAT_1f8003c0 = cameraPosition.x;
  DAT_1f8003c4 = cameraPosition.y;
  DAT_1f8003c8 = cameraPosition.z;
  DAT_1f8003d0 = (int)VectorShort_80067ec8.Z >> 4;
  pVVar17 = &Vec3_80068064;
  do {
    do {
      do {
        do {
          do {
            do {
              pVVar18 = pVVar17;
              iVar9 = DAT_1f8003d0;
              pVVar17 = (Vec3 *)&pVVar18[1].z;
              uVar8 = pVVar18[3].x;
              if (pVVar17 == (Vec3 *)&DAT_800681b8) {
                return;
              }
            } while ((uVar8 & 0xff) == 0);
            iVar6 = (uVar8 >> 0x10) - 2;
            *(char *)((int)&pVVar18[3].x + 2) = (char)iVar6;
            uVar5 = iVar9 + iVar6 & 0xff;
            uVar3 = uVar8 >> 8 & 0xff;
            iVar9 = *(int *)pVVar17 - DAT_1f8003c0;
            iVar6 = DAT_1f8003c4 - pVVar18[2].x;
            iVar11 = DAT_1f8003c8 - pVVar18[2].y;
            gte_ldIR3(iVar9);
            gte_ldIR1(iVar6);
            gte_ldIR2(iVar11);
          } while (((((-1 < iVar9 + -0x7800) || (iVar9 + 0x7800 < 1)) || (-1 < iVar6 + -0x7800)) ||
                   ((iVar6 + 0x7800 < 1 || (-1 < iVar11 + -0x7800)))) || (iVar11 + 0x7800 < 1));
          iVar11 = ((uVar8 & 0xff) - 1) * 0x40;
          gte_llir_b();
          puVar13 = (ushort *)(&DAT_8006430c + iVar11);
          puVar14 = (ushort *)(&DAT_8006432c + iVar11);
          uVar12 = gte_stMAC3();
          iVar6 = gte_stMAC2();
          iVar9 = gte_stMAC1();
        } while (((int)(uVar12 - 0x80) < 0) || (-1 < (int)(uVar12 - 0x7800)));
        gte_ldtr(iVar9,iVar6,uVar12);
        if (iVar9 < 0) {
          iVar9 = -iVar9;
        }
      } while (-1 < (int)(iVar9 * 4 + uVar12 * -3 + -0x400));
      if (iVar6 < 0) {
        iVar6 = -iVar6;
      }
    } while (-1 < (int)((iVar6 * 3 - uVar12) + -0x300));
    iVar9 = (uVar12 >> 7) - ((int)uVar8 >> 0x18);
    iVar6 = iVar9 * 8;
    if (iVar9 < 0) {
      iVar6 = 0;
    }
    ppuVar16 = (uint **)(DAT_1f8003d4 + iVar6);
    iVar20 = uVar3 * (int)cosineLookupTable[uVar5];
    iVar15 = pVVar18[2].z;
    iVar9 = iVar20 >> 6;
    gte_ldVXY0(0);
    iVar21 = uVar3 * (int)sineLookupTable[uVar5];
    iVar6 = iVar21 >> 6;
    gte_ldR11R12(-((iVar20 >> 7) + iVar9) & 0xffffU | ((iVar21 >> 7) + iVar6) * 0x10000);
    gte_ldR13R21(iVar6 << 0x10);
    gte_ldR22R23(iVar9);
    gte_ldR31R32(0);
    gte_ldR33(0);
    puVar7 = (undefined4 *)&DAT_1f800000;
    do {
      gte_rtps_b();
      uVar10 = gte_stSXY2();
      gte_ldVXY0(((int)(((int)(short)*puVar13 & 0xff00U) << 0x10) >> 8) +
                 ((int)(char)*puVar13 & 0xffffU));
      *puVar7 = uVar10;
      uVar8 = _DAT_1f800000;
      bVar1 = puVar13 != puVar14;
      puVar13 = puVar13 + 1;
      puVar7 = puVar7 + 1;
    } while (bVar1);
    *(uint *)primitiveBuffer_next = (uint)(uint *)((int)primitiveBuffer_next + 0xc) ^ 0x82000000;
    *(uint *)((int)primitiveBuffer_next + 4) = 0xe1000620;
    *(uint *)((int)primitiveBuffer_next + 8) = 0;
    puVar4 = (uint *)((int)primitiveBuffer_next + 0xc);
    do {
      uVar2 = *puVar14;
      puVar14 = puVar14 + 1;
      puVar4[1] = iVar15 + 0x32000000;
      puVar4[2] = uVar8;
      puVar4[3] = 0;
      puVar19 = puVar4;
      if (uVar2 == 0) break;
      puVar4[5] = 0;
      uVar3 = *(uint *)(&DAT_1f800004 + (uVar2 & 0xf) * 2);
      puVar4[4] = *(uint *)((int)&DAT_1f800004 + (uVar2 >> 6 & 0x3f));
      puVar4[6] = uVar3;
      puVar19 = puVar4 + 7;
      *puVar4 = (uint)puVar19 ^ 0x86000000;
      puVar4 = puVar19;
    } while (puVar14 != (ushort *)(iVar11 + -0x7ff9bcb4));
    puVar19[-7] = 0x6000000;
    puVar4 = *ppuVar16;
    *ppuVar16 = puVar19 + -7;
    if (puVar4 == (uint *)0x0) {
      ppuVar16[1] = (uint *)primitiveBuffer_next;
      primitiveBuffer_next = (undefined *)puVar19;
    }
    else {
      *(short *)puVar4 = (short)primitiveBuffer_next;
      *(char *)((int)puVar4 + 2) = (char)((uint)primitiveBuffer_next >> 0x10);
      primitiveBuffer_next = (undefined *)puVar19;
    }
  } while( true );
}



undefined4 FUN_8004ac20(undefined param_1)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  code *UNRECOVERED_JUMPTABLE;
  
  puVar3 = &DAT_80067d00;
  do {
    if (*(char *)(puVar3 + 3) == '\0') {
      *(undefined *)((int)puVar3 + 0xf) = param_1;
      iVar1 = rand();
      *(char *)((int)puVar3 + 0xe) = (char)iVar1;
      *(undefined *)(puVar3 + 3) = 0x30;
      *(undefined *)((int)puVar3 + 0xd) = 0x60;
                    // WARNING: Could not recover jumptable at 0x8004ac70. Too many branches
                    // WARNING: Treating indirect jump as call
      uVar2 = (*UNRECOVERED_JUMPTABLE)();
      return uVar2;
    }
    puVar3 = puVar3 + 4;
  } while (puVar3 != &DAT_80067e00);
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

uint RenderGemShine(void)

{
  int iVar1;
  undefined4 *puVar2;
  uint *puVar3;
  uint *puVar4;
  undefined uVar5;
  uint uVar6;
  undefined4 *puVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  undefined4 uVar11;
  int iVar12;
  undefined4 uVar13;
  int iVar14;
  int iVar15;
  uint uVar16;
  uint uVar17;
  uint uVar18;
  uint uVar19;
  uint **ppuVar20;
  int *piVar21;
  uint *puVar23;
  int *piVar22;
  
  DAT_1f8003d0 = DAT_80066ffc;
  DAT_1f8003d4 = deltaTime;
  gte_ldL11L12(Mat33_80067e84.R12R11);
  gte_ldL13L21(Mat33_80067e84.R21R13);
  gte_ldL22L23(Mat33_80067e84.R23R22);
  gte_ldL31L32(Mat33_80067e84.R32R31);
  gte_ldL33(Mat33_80067e84.R33);
  DAT_1f8003c0 = cameraPosition.x;
  DAT_1f8003c4 = cameraPosition.y;
  DAT_1f8003c8 = cameraPosition.z;
  uVar6 = cameraPosition.x;
  piVar21 = (int *)&UNK_80067cf0;
  while( true ) {
    piVar22 = piVar21;
    uVar9 = DAT_1f8003d4;
    piVar21 = piVar22 + 4;
    uVar8 = piVar22[7];
    if (piVar21 == &DAT_80067e00) break;
    iVar1 = (uVar8 & 0xff) - DAT_1f8003d4;
    uVar6 = uVar9;
    if ((uVar8 & 0xff) != 0) {
      *(char *)(piVar22 + 7) = (char)iVar1;
      if (iVar1 < 1) {
        *(undefined *)(piVar22 + 7) = 0;
      }
      else {
        uVar6 = uVar8 >> 8 & 0xff;
        uVar9 = uVar8 >> 0x15 & 0x7f8;
        iVar10 = uVar9 + (uVar9 >> 1);
        iVar12 = *piVar21 - DAT_1f8003c0 >> 1;
        iVar14 = DAT_1f8003c4 - piVar22[5] >> 1;
        iVar15 = DAT_1f8003c8 - piVar22[6] >> 1;
        gte_ldIR3(iVar12);
        gte_ldIR1(iVar14);
        gte_ldIR2(iVar15);
        if (((((iVar12 + -0x7800 < 0) && (0 < iVar12 + 0x7800)) && (iVar14 + -0x7800 < 0)) &&
            ((0 < iVar14 + 0x7800 && (iVar15 + -0x7800 < 0)))) && (0 < iVar15 + 0x7800)) {
          gte_llir_b();
          uVar9 = (uVar8 >> 0x10) + iVar1 * -4 & 0xff;
          if (-1 < iVar1 + -0x20) {
            iVar1 = (0x30 - iVar1) * 2;
          }
          iVar14 = (iVar1 + 8) * uVar6;
          uVar8 = gte_stMAC3();
          iVar12 = gte_stMAC2();
          iVar1 = gte_stMAC1();
          if ((-1 < (int)(uVar8 - 0x80)) && ((int)(uVar8 - 0x7800) < 0)) {
            gte_ldtr(iVar1,iVar12,uVar8);
            if (iVar1 < 0) {
              iVar1 = -iVar1;
            }
            if ((int)(iVar1 * 4 + uVar8 * -3 + -0x100) < 0) {
              if (iVar12 < 0) {
                iVar12 = -iVar12;
              }
              if ((int)((iVar12 * 3 - uVar8) + -0xc0) < 0) {
                uVar17 = *(uint *)(&DAT_8006460c + iVar10);
                uVar18 = *(uint *)(&DAT_80064610 + iVar10);
                uVar6 = iVar14 * cosineLookupTable[uVar9] >> 0xe;
                uVar19 = *(uint *)(&DAT_80064614 + iVar10);
                iVar1 = (uVar8 >> 6) - 6;
                iVar10 = iVar1 * 8;
                if (iVar1 < 0) {
                  iVar10 = 0;
                }
                ppuVar20 = (uint **)(DAT_1f8003d0 + iVar10);
                iVar1 = iVar14 * sineLookupTable[uVar9] >> 0xe;
                uVar5 = (undefined)((uint)primitiveBuffer_next >> 0x10);
                if ((int)(uVar8 - 0x2000) < 0) {
                  gte_ldR11R12(iVar1 * -0x10000 | uVar6 & 0xffff);
                  gte_ldR13R21(iVar1 << 0x10);
                  gte_ldR22R23(uVar6);
                  gte_ldR31R32(0);
                  gte_ldR33(0);
                  puVar2 = &DAT_8006459c;
                  gte_ldVXY0(DAT_80064598);
                  puVar7 = (undefined4 *)&DAT_1f800000;
                  do {
                    gte_rtps_b();
                    uVar11 = *puVar2;
                    puVar2 = puVar2 + 1;
                    uVar13 = gte_stSXY2();
                    gte_ldVXY0(uVar11);
                    *puVar7 = uVar13;
                    puVar7 = puVar7 + 1;
                  } while (puVar2 != &DAT_800645e0);
                  puVar3 = &DAT_800645ec;
                  *(uint *)primitiveBuffer_next =
                       (uint)(uint *)((int)primitiveBuffer_next + 0xc) ^ 0x82000000;
                  *(uint *)((int)primitiveBuffer_next + 4) = 0xe1000620;
                  *(uint *)((int)primitiveBuffer_next + 8) = 0;
                  puVar4 = (uint *)((int)primitiveBuffer_next + 0xc);
                  do {
                    puVar23 = puVar4;
                    uVar6 = *puVar3;
                    puVar3 = puVar3 + 1;
                    puVar23[1] = uVar19;
                    puVar23[3] = uVar18;
                    puVar23[5] = uVar17;
                    puVar23[7] = uVar19;
                    uVar9 = *(uint *)((uVar6 >> 0xe & 0x3fc) + 0x1f800000);
                    uVar8 = *(uint *)((uVar6 >> 6 & 0x3fc) + 0x1f800000);
                    uVar16 = *(uint *)((uVar6 & 0xff) * 4 + 0x1f800000);
                    puVar23[2] = *(uint *)((uVar6 >> 0x16 & 0x3fc) + 0x1f800000);
                    puVar23[4] = uVar9;
                    puVar23[6] = uVar8;
                    puVar23[8] = uVar16;
                    puVar4 = puVar23 + 9;
                    *puVar23 = (uint)puVar4 ^ 0x88000000;
                  } while (puVar3 != (uint *)&DAT_8006460c);
                  *puVar23 = 0x8000000;
                  puVar3 = *ppuVar20;
                  *ppuVar20 = puVar23;
                  uVar6 = (uint)primitiveBuffer_next >> 0x10;
                  if (puVar3 == (uint *)0x0) {
                    ppuVar20[1] = (uint *)primitiveBuffer_next;
                    primitiveBuffer_next = (undefined *)puVar4;
                  }
                  else {
                    *(short *)puVar3 = (short)primitiveBuffer_next;
                    *(undefined *)((int)puVar3 + 2) = uVar5;
                    primitiveBuffer_next = (undefined *)puVar4;
                  }
                }
                else {
                  if (0 < (int)(uVar8 - 0x4000)) {
                    ppuVar20 = ppuVar20 + 0x40;
                  }
                  uVar6 = (int)(uVar6 * uVar8) >> 0xd;
                  iVar1 = (int)(iVar1 * uVar8) >> 0xd;
                  gte_ldR11R12(iVar1 * -0x10000 | uVar6 & 0xffff);
                  gte_ldR13R21(iVar1 << 0x10);
                  gte_ldR22R23(uVar6);
                  gte_ldR31R32(0);
                  gte_ldR33(0);
                  puVar2 = &DAT_800645e0;
                  gte_ldVXY0(DAT_800645dc);
                  puVar7 = (undefined4 *)&DAT_1f800000;
                  do {
                    gte_rtps_b();
                    uVar11 = *puVar2;
                    puVar2 = puVar2 + 1;
                    uVar13 = gte_stSXY2();
                    gte_ldVXY0(uVar11);
                    *puVar7 = uVar13;
                    uVar8 = _DAT_1f80000c;
                    uVar9 = _DAT_1f800008;
                    uVar6 = _DAT_1f800004;
                    puVar7 = puVar7 + 1;
                  } while (puVar2 != &DAT_800645f0);
                  *(uint *)((int)primitiveBuffer_next + 8) = _DAT_1f800000;
                  *(uint *)((int)primitiveBuffer_next + 0x18) = uVar6;
                  *(uint *)((int)primitiveBuffer_next + 0xc) = uVar9;
                  *(uint *)((int)primitiveBuffer_next + 0x1c) = uVar8;
                  uVar17 = uVar17 + 0x6000000;
                  *(uint *)((int)primitiveBuffer_next + 4) = uVar17;
                  *(uint *)((int)primitiveBuffer_next + 0x14) = uVar17;
                  *(uint *)primitiveBuffer_next =
                       (uint)(uint *)((int)primitiveBuffer_next + 0x10) ^ 0x83000000;
                  *(uint *)((int)primitiveBuffer_next + 0x10) = 0x3000000;
                  puVar4 = *ppuVar20;
                  *ppuVar20 = (uint *)((int)primitiveBuffer_next + 0x10);
                  uVar6 = (uint)primitiveBuffer_next >> 0x10;
                  if (puVar4 == (uint *)0x0) {
                    ppuVar20[1] = (uint *)primitiveBuffer_next;
                    primitiveBuffer_next = (undefined *)(uint *)((int)primitiveBuffer_next + 0x20);
                  }
                  else {
                    *(short *)puVar4 = (short)primitiveBuffer_next;
                    *(undefined *)((int)puVar4 + 2) = uVar5;
                    primitiveBuffer_next = (undefined *)(uint *)((int)primitiveBuffer_next + 0x20);
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return uVar6;
}



undefined4 FUN_8004b120(int param_1,undefined param_2,undefined4 param_3)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  code *UNRECOVERED_JUMPTABLE;
  
  puVar4 = &DAT_8006b400;
  do {
    if (*(char *)(puVar4 + 7) == '\0') {
      *(char *)(puVar4 + 7) = (char)param_1;
      *(undefined *)((int)puVar4 + 0x1d) = 0;
      *(undefined *)((int)puVar4 + 0x1e) = param_2;
      puVar4[6] = param_3;
      *(undefined *)((int)puVar4 + 0x1b) = 0x26;
      puVar4 = puVar4 + 8;
      puVar3 = (undefined4 *)((param_1 + -1) * 2 + (int)puVar4);
      do {
        puVar4 = (undefined4 *)((int)puVar4 + 2);
        iVar1 = rand();
        *(short *)((int)puVar4 + -2) = (short)iVar1;
      } while (puVar4 != puVar3);
                    // WARNING: Could not recover jumptable at 0x8004b18c. Too many branches
                    // WARNING: Treating indirect jump as call
      uVar2 = (*UNRECOVERED_JUMPTABLE)();
      return uVar2;
    }
    puVar4 = puVar4 + 0xc;
  } while (puVar4 != (undefined4 *)&DAT_8006b580);
  return 0;
}



// WARNING: This function may have set the stack pointer
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8 RenderTrails(void)

{
  bool bVar1;
  int iVar2;
  undefined *puVar3;
  short sVar4;
  int iVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  uint uVar8;
  int iVar9;
  undefined2 *puVar10;
  int iVar11;
  short sVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  int iVar16;
  int iVar17;
  int iVar18;
  int iVar19;
  uint uVar20;
  undefined4 unaff_s0;
  ushort *puVar21;
  undefined4 unaff_s1;
  uint uVar22;
  undefined4 unaff_s2;
  uint uVar23;
  undefined4 unaff_s3;
  uint uVar24;
  undefined4 unaff_s4;
  int *piVar25;
  int *piVar26;
  uint *puVar27;
  undefined4 unaff_s5;
  int *piVar29;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  int iVar30;
  int iVar31;
  undefined *puVar32;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  uint *puVar28;
  
  iVar2 = cameraPosition.x;
  DAT_1f8003f0 = &DAT_80066d38;
  gte_ldR11R12(Mat33_80067e84.R12R11);
  gte_ldR13R21(Mat33_80067e84.R21R13);
  gte_ldR22R23(Mat33_80067e84.R23R22);
  gte_ldR31R32(Mat33_80067e84.R32R31);
  gte_ldR33(Mat33_80067e84.R33);
  gte_ldtr(0,0,0);
  uVar20 = Mat33_80067e84.R12R11;
  uVar8 = Mat33_80067e84.R21R13;
  iVar30 = cameraPosition.y;
  iVar31 = cameraPosition.z;
  puVar3 = &UNK_8006b3d0;
  DAT_1f8003d0 = unaff_s0;
  DAT_1f8003d4 = unaff_s1;
  DAT_1f8003d8 = unaff_s2;
  DAT_1f8003dc = unaff_s3;
  DAT_1f8003e0 = unaff_s4;
  DAT_1f8003e4 = unaff_s5;
  DAT_1f8003e8 = unaff_s6;
  DAT_1f8003ec = unaff_s7;
  DAT_1f8003f4 = (undefined *)register0x00000074;
  DAT_1f8003f8 = unaff_s8;
  DAT_1f8003fc = unaff_retaddr;
  while( true ) {
    puVar32 = puVar3;
    uVar24 = *(uint *)(puVar32 + 0x4c);
    if (puVar32 == &UNK_8006b550) break;
    uVar22 = uVar24 & 0xff;
    puVar3 = puVar32 + 0x30;
    if (uVar22 != 0) {
      uVar23 = (uVar24 & 0xff00) >> 8;
      if (uVar24 >> 0x10 != 0) {
        puVar32[0x4d] = '\x01' - (char)((uVar24 & 0xff00) >> 8);
      }
      piVar29 = (int *)(uVar22 * 0x10 + 0x1f800000);
      iVar9 = *(int *)(puVar32 + 0x30) - iVar2;
      puVar3 = puVar32 + 0x30;
      if ((iVar9 + -0x5400 < 0) &&
         (puVar3 = puVar32 + 0x30, _DAT_1f800000 = iVar9, 0 < iVar9 + 0x5400)) {
        iVar11 = iVar30 - *(int *)(puVar32 + 0x34);
        puVar3 = puVar32 + 0x30;
        if ((iVar11 + -0x5400 < 0) &&
           (puVar3 = puVar32 + 0x30, _DAT_1f800004 = iVar11, 0 < iVar11 + 0x5400)) {
          iVar13 = iVar31 - *(int *)(puVar32 + 0x38);
          puVar3 = puVar32 + 0x30;
          if ((iVar13 + -0x5400 < 0) &&
             (puVar3 = puVar32 + 0x30, _DAT_1f800008 = iVar13, 0 < iVar13 + 0x5400)) {
            iVar15 = *(int *)(puVar32 + 0x40);
            iVar16 = *(int *)(puVar32 + 0x44);
            iVar14 = *(int *)(puVar32 + 0x3c) - iVar2;
            *piVar29 = iVar14;
            *(int *)(&DAT_1f800004 + uVar22 * 8) = iVar30 - iVar15;
            *(int *)(&DAT_1f800008 + uVar22 * 8) = iVar31 - iVar16;
            iVar14 = (iVar14 - iVar9) / (int)uVar22;
            iVar15 = ((iVar30 - iVar15) - iVar11) / (int)uVar22;
            iVar16 = ((iVar31 - iVar16) - iVar13) / (int)uVar22;
            puVar21 = (ushort *)(puVar32 + 0x50);
            piVar26 = (int *)&DAT_1f800010;
            do {
              uVar20 = (uint)*puVar21;
              piVar25 = piVar26 + 4;
              iVar9 = iVar9 + iVar14;
              iVar11 = iVar11 + iVar15;
              iVar13 = iVar13 + iVar16;
              iVar17 = (((int)(uVar20 << 0x11) >> 0x18) >> (uVar23 & 0x1f)) + iVar9;
              iVar18 = (((int)(uVar20 << 0x16) >> 0x18) >> (uVar23 & 0x1f)) + iVar11;
              iVar19 = (((int)(uVar20 << 0x1b) >> 0x18) >> (uVar23 & 0x1f)) + iVar13;
              if (uVar23 != 0) {
                iVar5 = rand();
                *puVar21 = (ushort)iVar5;
                iVar17 = iVar17 + ((iVar5 << 0x11) >> 0x19);
                iVar18 = iVar18 + ((iVar5 << 0x16) >> 0x19);
                iVar19 = iVar19 + ((iVar5 << 0x1b) >> 0x19);
              }
              *piVar26 = iVar17;
              piVar26[1] = iVar18;
              piVar26[2] = iVar19;
              puVar21 = puVar21 + 1;
              piVar26 = piVar25;
            } while (piVar25 != piVar29);
            piVar26 = (int *)&DAT_1f800010;
            do {
              uVar20 = piVar26[4] - piVar26[-4];
              uVar8 = piVar26[5] - piVar26[-3];
              if ((int)uVar20 < 0) {
                uVar20 = -uVar20;
              }
              iVar9 = piVar26[6] - piVar26[-2];
              if ((int)uVar8 < 0) {
                uVar8 = -uVar8;
              }
              iVar11 = *piVar26;
              if (iVar9 < 0) {
                iVar9 = -iVar9;
              }
              sVar4 = (short)piVar26[1];
              uVar24 = uVar20;
              uVar23 = uVar8;
              if ((int)(uVar20 - uVar8) < 0) {
                uVar24 = uVar8;
                uVar23 = uVar20;
              }
              sVar12 = (short)(uVar24 + (uVar23 >> 1) >> 4);
              *(short *)((int)piVar26 + 0x102) = (short)piVar26[2] + sVar12;
              *(short *)((int)piVar26 + 0x10a) = (short)piVar26[2] - sVar12;
              iVar9 = iVar9 >> 4;
              if ((int)(uVar20 - uVar8) < 0) {
                iVar13 = iVar11 + iVar9;
                iVar11 = iVar11 - iVar9;
                sVar12 = sVar4;
              }
              else {
                sVar12 = sVar4 - (short)iVar9;
                iVar13 = iVar11;
                sVar4 = sVar4 + (short)iVar9;
              }
              piVar26[0x41] = iVar13;
              piVar26[0x43] = iVar11;
              *(short *)(piVar26 + 0x40) = sVar4;
              *(short *)(piVar26 + 0x42) = sVar12;
              piVar26 = piVar26 + 4;
            } while (piVar26 != piVar29);
            DAT_1f800104 = _DAT_1f800000;
            DAT_1f80010c = _DAT_1f800000;
            DAT_1f800100 = (undefined2)_DAT_1f800004;
            DAT_1f800102 = (undefined2)_DAT_1f800008;
            iVar9 = *piVar29;
            uVar6 = *(undefined4 *)(&DAT_1f800004 + uVar22 * 8);
            uVar7 = *(undefined4 *)(&DAT_1f800008 + uVar22 * 8);
            DAT_1f800108 = DAT_1f800100;
            DAT_1f80010a = DAT_1f800102;
            (&DAT_1f800104)[uVar22 * 4] = iVar9;
            (&DAT_1f80010c)[uVar22 * 4] = iVar9;
            (&DAT_1f800100)[uVar22 * 8] = (short)uVar6;
            (&DAT_1f800108)[uVar22 * 8] = (short)uVar6;
            (&DAT_1f800102)[uVar22 * 8] = (short)uVar7;
            (&DAT_1f80010a)[uVar22 * 8] = (short)uVar7;
            piVar29 = (int *)&DAT_1f800100;
            uVar24 = 0xffffffff;
            do {
              gte_ldVXY0(*piVar29);
              gte_ldVZ0(piVar29[1]);
              gte_rtps();
              iVar11 = gte_stSZ3();
              iVar9 = gte_stSXY2();
              uVar20 = iVar11 * 0x10000;
              if (iVar9 + -0xd0000 < 1) {
                uVar20 = uVar20 + 1;
              }
              if (-1 < iVar9 + -0xe40000) {
                uVar20 = uVar20 + 2;
              }
              uVar8 = iVar9 * 0x10000 + 0xfe000000;
              if (iVar9 * 0x10000 < 1) {
                uVar20 = uVar20 + 4;
              }
              *piVar29 = iVar9;
              if (-1 < (int)uVar8) {
                uVar20 = uVar20 + 8;
              }
              piVar29[1] = uVar20;
              iVar13 = DAT_80066ffc;
              iVar11 = DAT_80066fe0;
              iVar9 = DAT_80066fdc;
              uVar24 = uVar24 & uVar20;
              bVar1 = piVar29 != (int *)(&DAT_1f800108 + uVar22 * 8);
              piVar29 = piVar29 + 2;
            } while (bVar1);
            puVar3 = puVar32 + 0x30;
            if ((uVar24 & 0xf) == 0) {
              uVar6 = *(undefined4 *)(puVar32 + 0x48);
              iVar16 = DAT_80066fe0 + -0x1f00;
              iVar17 = DAT_80066fe0 + -7;
              iVar14 = (int)*(short *)((uVar22 * 0x10 + 0x3f000200 >> 1) + 6);
              gte_ldRGB(uVar6);
              iVar15 = iVar14 + -0x4000;
              puVar3 = puVar32 + 0x30;
              if (iVar14 + -0x5000 < 0) {
                gte_ldIR0(iVar15);
                gte_ldfcdir(0,0,0);
                puVar27 = (uint *)&DAT_1f800100;
                if (0 < iVar15) {
                  gte_dpcs_b();
                  uVar6 = gte_stRGB2();
                }
                while (puVar28 = puVar27, puVar27 = puVar28 + 4, puVar3 = puVar32 + 0x30,
                      puVar28 != (uint *)(&DAT_1f800100 + uVar22 * 8)) {
                  if (((puVar28[1] & puVar28[3] & puVar28[5] & puVar28[7] & 0xf) == 0) &&
                     (iVar14 = ((puVar28[1] >> 0x10) + (puVar28[3] >> 0x10) + (puVar28[5] >> 0x10) +
                                (puVar28[7] >> 0x10) >> 9) - 2, -1 < iVar14)) {
                    piVar29 = (int *)(iVar14 * 8 + iVar13);
                    uVar23 = puVar28[6];
                    uVar8 = *puVar27;
                    uVar20 = puVar28[2];
                    uVar24 = *puVar28;
                    if (uVar8 != uVar23) {
                      *(undefined4 *)primitiveBuffer_next = 0x7000000;
                      *(undefined4 *)((int)primitiveBuffer_next + 4) = uVar6;
                      *(uint *)((int)primitiveBuffer_next + 8) = uVar24;
                      *(int *)((int)primitiveBuffer_next + 0xc) = iVar9;
                      if (uVar24 == uVar20) {
                        *(int *)((int)primitiveBuffer_next + 0xc) = iVar9 + 0x1000;
                      }
                      *(uint *)((int)primitiveBuffer_next + 0x10) = uVar8;
                      *(int *)((int)primitiveBuffer_next + 0x14) = iVar16;
                      *(uint *)((int)primitiveBuffer_next + 0x18) = uVar23;
                      *(int *)((int)primitiveBuffer_next + 0x1c) = iVar11;
                      puVar10 = (undefined2 *)*piVar29;
                      *piVar29 = (int)primitiveBuffer_next;
                      if (puVar10 == (undefined2 *)0x0) {
                        piVar29[1] = (int)primitiveBuffer_next;
                        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x20);
                      }
                      else {
                        *puVar10 = (short)primitiveBuffer_next;
                        *(char *)(puVar10 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
                        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x20);
                      }
                    }
                    if (uVar24 != uVar20) {
                      *(undefined4 *)primitiveBuffer_next = 0x7000000;
                      *(undefined4 *)((int)primitiveBuffer_next + 4) = uVar6;
                      *(uint *)((int)primitiveBuffer_next + 8) = uVar24;
                      *(int *)((int)primitiveBuffer_next + 0xc) = iVar9;
                      *(uint *)((int)primitiveBuffer_next + 0x10) = uVar20;
                      *(int *)((int)primitiveBuffer_next + 0x14) = iVar17;
                      *(uint *)((int)primitiveBuffer_next + 0x18) = uVar23;
                      *(int *)((int)primitiveBuffer_next + 0x1c) = iVar11;
                      if (uVar8 == uVar23) {
                        *(int *)((int)primitiveBuffer_next + 0x1c) = iVar11 + -0x1000;
                      }
                      puVar10 = (undefined2 *)*piVar29;
                      *piVar29 = (int)primitiveBuffer_next;
                      if (puVar10 == (undefined2 *)0x0) {
                        piVar29[1] = (int)primitiveBuffer_next;
                        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x20);
                      }
                      else {
                        *puVar10 = (short)primitiveBuffer_next;
                        *(char *)(puVar10 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
                        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x20);
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
  return CONCAT44(uVar8,uVar20);
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void RenderTrails2(void)

{
  ushort *puVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  ushort *puVar5;
  undefined4 uVar6;
  undefined2 *puVar7;
  uint *puVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  undefined4 uVar12;
  int iVar13;
  int iVar14;
  uint uVar15;
  int iVar16;
  uint *puVar17;
  uint uVar19;
  uint uVar20;
  int iVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  int *piVar25;
  uint *puVar18;
  
  piVar25 = &Spyro.field178_0x290.y;
LAB_8004b73c:
  do {
    do {
      piVar4 = piVar25;
      piVar25 = piVar4 + 0xc;
      if (piVar25 == &DAT_8006a8b4) {
        return;
      }
      uVar20 = piVar4[0x16];
    } while (*piVar25 == 0);
    puVar1 = (ushort *)((int)piVar4 + (uVar20 & 0xff) * 6 + 0x34);
    puVar5 = (ushort *)((int)piVar4 + 0x2e);
    uVar19 = uVar20 >> 8 & 0xff;
    uVar22 = (uint)cameraPosition.x >> 1;
    uVar23 = (uint)cameraPosition.y >> 1;
    uVar24 = (uint)cameraPosition.z >> 1;
    uVar10 = 0xffffffff;
    puVar17 = (uint *)&DAT_1f800000;
    do {
      puVar8 = puVar17;
      iVar13 = (uint)*puVar1 * 2 - uVar22;
      iVar14 = uVar23 + (uint)puVar1[1] * -2;
      iVar16 = uVar24 + (uint)puVar1[2] * -2;
      if (((((iVar13 + 0x6000 < 1) || (-1 < iVar13 + -0x6000)) || (iVar14 + 0x6000 < 1)) ||
          ((-1 < iVar14 + -0x6000 || (iVar16 + 0x6000 < 1)))) || (-1 < iVar16 + -0x6000))
      goto LAB_8004b73c;
      gte_ldVXY0(iVar14 + iVar16 * 0x10000);
      gte_ldVZ0(iVar13);
      uVar19 = uVar19 - 1;
      puVar1 = puVar1 + -3;
      gte_rtps_b();
      if (puVar1 == puVar5) {
        puVar5 = puVar1 + (uVar20 & 0xff) * 3 + 3;
        puVar1 = (ushort *)((int)puVar1 + (uVar20 >> 7 & 0x1fe) * 3);
      }
      uVar15 = gte_stSZ3();
      iVar13 = gte_stSXY2();
      puVar8[1] = uVar15;
      uVar15 = iVar13 * 0x20;
      if (iVar13 < 1) {
        uVar15 = uVar15 + 1;
      }
      if (-1 < iVar13 + -0xf00000) {
        uVar15 = uVar15 + 2;
      }
      if (iVar13 * 0x10000 < 1) {
        uVar15 = uVar15 + 4;
      }
      if (-1 < iVar13 * 0x10000 + -0x2000000) {
        uVar15 = uVar15 + 8;
      }
      *puVar8 = uVar15;
      iVar16 = DAT_80066ffc;
      iVar14 = DAT_80066fe0;
      iVar13 = DAT_80066fdc;
      uVar10 = uVar10 & uVar15;
      puVar17 = puVar8 + 2;
    } while (uVar19 != 0);
    if ((uVar10 & 0xf) == 0) {
      gte_ldfcdir(0,0,0);
      uVar12 = piVar4[0x17];
      if (_DAT_1f800004 + -0x4000 < 0) {
        if (0 < _DAT_1f800004 + -0x3800) {
          gte_ldIR0((_DAT_1f800004 + -0x3800) * 2);
          gte_ldRGB(uVar12);
          gte_dpcs();
          uVar12 = gte_stRGB2();
        }
        iVar21 = ((int)(uVar20 << 8) >> 0x18) << 0xb;
        iVar2 = _DAT_1f800004;
        if (_DAT_1f800004 + -0x80 < 0) {
          iVar2 = 0x80;
        }
        iVar2 = iVar21 / iVar2;
        if ((iVar2 == 0) && (iVar2 = 1, iVar21 < 0)) {
          iVar2 = -1;
        }
        iVar21 = 0;
        gte_ldL11L12(iVar2 << 0x10);
        gte_ldL13L21(uVar12);
        puVar17 = (uint *)&DAT_1f800000;
        while (puVar18 = puVar17, puVar17 = puVar18 + 2, puVar18 != puVar8) {
          uVar6 = gte_stL13L21();
          iVar3 = gte_stL11L12();
          *(undefined4 *)((int)primitiveBuffer_next + 4) = uVar6;
          *(undefined4 *)((int)primitiveBuffer_next + 0x1c) = uVar6;
          gte_ldRGB(uVar12);
          iVar21 = iVar21 + 0x1000 / (int)((uVar20 >> 8 & 0xff) - 1);
          gte_ldIR0(iVar21);
          uVar10 = *puVar18;
          uVar19 = *puVar17;
          gte_dpcs_b();
          iVar9 = (int)uVar10 >> 5;
          iVar11 = (int)uVar19 >> 5;
          uVar6 = gte_stRGB2();
          *(undefined4 *)((int)primitiveBuffer_next + 0x10) = uVar6;
          *(undefined4 *)((int)primitiveBuffer_next + 0x28) = uVar6;
          gte_ldL13L21(uVar6);
          if (iVar3 < 0) {
            iVar3 = iVar3 >> 0x10;
          }
          *(int *)((int)primitiveBuffer_next + 8) = iVar9 - iVar3;
          *(int *)((int)primitiveBuffer_next + 0x20) = iVar9 + iVar3;
          iVar3 = (iVar2 - ((uint)(iVar2 * iVar21) >> 0xc)) * 0x10000;
          gte_ldL11L12(iVar3);
          if (iVar3 < 0) {
            iVar3 = iVar3 >> 0x10;
          }
          *(int *)((int)primitiveBuffer_next + 0x14) = iVar11 - iVar3;
          *(int *)((int)primitiveBuffer_next + 0x2c) = iVar11 + iVar3;
          uVar22 = puVar18[1];
          if ((uVar10 & uVar19 & 0xf) == 0) {
            uVar10 = puVar18[3];
            *(int *)((int)primitiveBuffer_next + 0xc) = iVar13;
            *(int *)((int)primitiveBuffer_next + 0x18) = iVar14 + -0x1f00;
            *(int *)((int)primitiveBuffer_next + 0x24) = iVar13 + 0x1f00;
            *(int *)((int)primitiveBuffer_next + 0x30) = iVar14;
            iVar3 = (uVar22 + uVar10 >> 7) - 2;
            if (-1 < iVar3) {
              piVar4 = (int *)(iVar3 * 8 + iVar16);
              *(undefined4 *)primitiveBuffer_next = 0xc000000;
              puVar7 = (undefined2 *)*piVar4;
              *piVar4 = (int)primitiveBuffer_next;
              if (puVar7 == (undefined2 *)0x0) {
                piVar4[1] = (int)primitiveBuffer_next;
                primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x34);
              }
              else {
                *puVar7 = (short)primitiveBuffer_next;
                *(char *)(puVar7 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
                primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x34);
              }
            }
          }
        }
      }
    }
  } while( true );
}



void FUN_8004baa4(int **param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int *piVar5;
  undefined2 *puVar6;
  uint *puVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  undefined4 *puVar11;
  int iVar12;
  int *piVar13;
  undefined4 uVar14;
  uint uVar15;
  undefined4 uVar16;
  uint uVar17;
  undefined4 uVar18;
  uint uVar19;
  undefined4 uVar20;
  undefined4 unaff_s0;
  uint uVar21;
  uint uVar22;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  uint uVar23;
  int *piVar24;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  
  iVar2 = cameraPosition.z;
  iVar1 = cameraPosition.y;
  iVar10 = cameraPosition.x;
  DAT_8006aa0c = &DAT_80066d38;
  gte_ldR11R12(Mat33_80067e84.R12R11);
  gte_ldR13R21(Mat33_80067e84.R21R13);
  gte_ldR22R23(Mat33_80067e84.R23R22);
  gte_ldR31R32(Mat33_80067e84.R32R31);
  gte_ldR33(Mat33_80067e84.R33);
  gte_ldtr(0,0,0);
  piVar13 = (int *)&DAT_1f800000;
  piVar5 = *param_1;
  piVar24 = param_1[4];
  DAT_8006a9ec = unaff_s0;
  DAT_8006a9f0 = unaff_s1;
  DAT_8006a9f4 = unaff_s2;
  DAT_8006a9f8 = unaff_s3;
  DAT_8006a9fc = unaff_s4;
  DAT_8006aa00 = unaff_s5;
  DAT_8006aa04 = unaff_s6;
  DAT_8006aa08 = unaff_s7;
  DAT_8006aa10 = (undefined *)register0x00000074;
  DAT_8006aa14 = unaff_s8;
  DAT_8006aa18 = unaff_retaddr;
  while( true ) {
    iVar8 = DAT_80066ffc;
    if (*piVar5 == -1) break;
    gte_ldVZ0(*piVar5 - iVar10 >> ((uint)piVar24 & 0x1f));
    gte_ldVXY0(iVar1 - piVar5[1] >> ((uint)piVar24 & 0x1f) & 0xffffU |
               (iVar2 - piVar5[2] >> ((uint)piVar24 & 0x1f)) << 0x10);
    gte_rtps_b();
    iVar8 = gte_stSXY2();
    iVar9 = gte_stMAC3();
    uVar19 = (uint)(iVar8 + -0xd0000 < 1);
    iVar12 = iVar8 << 0x10;
    if (-1 < iVar8 + -0xe40000) {
      iVar12 = uVar19 + 2;
    }
    if (iVar12 < 1) {
      uVar19 = uVar19 + 4;
    }
    *piVar13 = iVar8;
    if (-1 < iVar12 + -0x2000000) {
      uVar19 = uVar19 + 8;
    }
    piVar13[1] = iVar9 << 0x10 | uVar19;
    piVar13 = piVar13 + 2;
    piVar5 = piVar5 + 3;
  }
  puVar7 = (uint *)param_1[2];
  piVar5 = param_1[1];
  uVar19 = *param_1[3];
  uVar23 = param_1[3][1];
  while( true ) {
    uVar3 = *puVar7;
    uVar4 = puVar7[1];
    puVar7 = puVar7 + 2;
    if (uVar3 == 0xffffffff) break;
    uVar14 = *(undefined4 *)((uVar3 & 0xff) * 8 + 0x1f800000);
    uVar15 = (int)uVar3 >> 5 & 0x7f8;
    uVar17 = *(uint *)((int)&DAT_1f800004 + uVar15);
    uVar16 = *(undefined4 *)(uVar15 + 0x1f800000);
    uVar15 = (int)uVar3 >> 0xd & 0x7f8;
    uVar21 = *(uint *)((int)&DAT_1f800004 + uVar15);
    uVar18 = *(undefined4 *)(uVar15 + 0x1f800000);
    uVar15 = (int)uVar3 >> 0x15 & 0x7f8;
    uVar22 = *(uint *)((int)&DAT_1f800004 + uVar15);
    uVar20 = *(undefined4 *)(uVar15 + 0x1f800000);
    if ((*(uint *)(&DAT_1f800004 + (uVar3 & 0xff) * 4) & uVar17 & uVar21 & uVar22 & 0xf) == 0) {
      iVar10 = (((int)*(uint *)(&DAT_1f800004 + (uVar3 & 0xff) * 4) >> 0x10) + ((int)uVar17 >> 0x10)
                + ((int)uVar21 >> 0x10) + ((int)uVar22 >> 0x10) >> 9) << ((uint)piVar24 & 0x1f);
      if ((-1 < iVar10) && (iVar10 + -0x7ff < 1)) {
        puVar11 = (undefined4 *)(iVar10 * 8 + iVar8);
        if (0 < (int)puVar11 - (int)DAT_80067168) {
          DAT_80067168 = puVar11;
        }
        *(undefined4 *)primitiveBuffer_next = 0xc000000;
        *(uint *)((int)primitiveBuffer_next + 4) =
             piVar5[uVar4 & 0xff] | (uVar23 >> 0x1f) << 0x19 | 0x3c000000;
        *(undefined4 *)((int)primitiveBuffer_next + 8) = uVar14;
        *(uint *)((int)primitiveBuffer_next + 0xc) = uVar19;
        *(undefined4 *)((int)primitiveBuffer_next + 0x10) =
             *(undefined4 *)((uVar4 >> 6 & 0x3fc) + (int)piVar5);
        *(undefined4 *)((int)primitiveBuffer_next + 0x14) = uVar16;
        *(uint *)((int)primitiveBuffer_next + 0x18) =
             uVar23 & 0xff | uVar19 & 0xff00 | uVar23 & 0xffff0000;
        *(undefined4 *)((int)primitiveBuffer_next + 0x1c) =
             *(undefined4 *)((uVar4 >> 0xe & 0x3fc) + (int)piVar5);
        *(undefined4 *)((int)primitiveBuffer_next + 0x20) = uVar18;
        *(uint *)((int)primitiveBuffer_next + 0x24) = uVar19 & 0xff | uVar23 & 0xff00;
        *(undefined4 *)((int)primitiveBuffer_next + 0x28) =
             *(undefined4 *)((uVar4 >> 0x16 & 0x3fc) + (int)piVar5);
        *(undefined4 *)((int)primitiveBuffer_next + 0x2c) = uVar20;
        *(uint *)((int)primitiveBuffer_next + 0x30) = uVar23 & 0xffff;
        puVar6 = (undefined2 *)*puVar11;
        *puVar11 = primitiveBuffer_next;
        if (puVar6 == (undefined2 *)0x0) {
          puVar11[1] = primitiveBuffer_next;
        }
        else {
          *puVar6 = (short)primitiveBuffer_next;
          *(char *)(puVar6 + 1) = (char)((uint)primitiveBuffer_next >> 0x10);
        }
        primitiveBuffer_next = (undefined *)((int)primitiveBuffer_next + 0x34);
      }
    }
  }
  return;
}



void FUN_8004be20(int *param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int *piVar7;
  int iVar8;
  int iVar9;
  Vec3 *pVVar10;
  Triangle *pTVar11;
  
  pTVar11 = TerrainCollisionData->triangles;
  piVar7 = (int *)TerrainCollisionData->field8_0x20;
  iVar8 = *piVar7;
  iVar9 = 0;
  iVar4 = *param_1 - piVar7[1];
  iVar5 = param_1[1] - piVar7[2];
  iVar6 = param_1[2] - piVar7[3];
  piVar7[1] = piVar7[1] + iVar4;
  piVar7[2] = piVar7[2] + iVar5;
  piVar7[3] = piVar7[3] + iVar6;
  while (iVar9 != iVar8) {
    uVar3 = piVar7[iVar9 + 4];
    iVar9 = iVar9 + 1;
    uVar1 = uVar3 >> 0x10;
    if (iVar4 != 0) {
      uVar2 = (uVar3 & 0xffff) + uVar1;
      pVVar10 = &pTVar11->v1 + uVar1;
      for (; uVar1 != uVar2; uVar1 = uVar1 + 1) {
        pVVar10->x = (pVVar10->x & 0xffff8000U) + (pVVar10->x & 0x3fffU) + iVar4;
        pVVar10 = pVVar10 + 1;
      }
    }
    if (iVar5 != 0) {
      uVar1 = uVar3 >> 0x10;
      uVar2 = (uVar3 & 0xffff) + uVar1;
      pVVar10 = &pTVar11->v1 + uVar1;
      while( true ) {
        uVar1 = uVar1 + 1;
        if (uVar1 == uVar2) break;
        pVVar10->y = (pVVar10->y & 0xffff8000U) + (pVVar10->y & 0x3fffU) + iVar5;
        pVVar10 = pVVar10 + 1;
      }
    }
    if (iVar6 != 0) {
      uVar1 = uVar3 >> 0x10;
      uVar3 = (uVar3 & 0xffff) + uVar1;
      pVVar10 = &pTVar11->v1 + uVar1;
      while( true ) {
        uVar1 = uVar1 + 1;
        if (uVar1 == uVar3) break;
        pVVar10->z = (pVVar10->z & 0xffff8000U) + (pVVar10->z & 0x3fffU) + iVar6;
        pVVar10 = pVVar10 + 1;
      }
    }
  }
  return;
}



void FUN_8004bf94(uint *param_1)

{
  uint extraout_v1;
  uint extraout_v1_00;
  uint extraout_v1_01;
  uint extraout_v1_02;
  uint extraout_v1_03;
  uint extraout_v1_04;
  uint extraout_v1_05;
  uint extraout_v1_06;
  uint *puVar1;
  code *UNRECOVERED_JUMPTABLE;
  
  puVar1 = (uint *)primitiveBuffer_next;
  while (param_1 != puVar1) {
    if (*param_1 >> 0x18 == 5) {
      FUN_8004c068();
      param_1[2] = extraout_v1_03;
      FUN_8004c068();
      param_1[3] = extraout_v1_04;
      FUN_8004c068();
      param_1[4] = extraout_v1_05;
      FUN_8004c068();
      param_1[5] = extraout_v1_06;
      param_1 = param_1 + 6;
    }
    else {
      FUN_8004c068();
      param_1[2] = extraout_v1;
      FUN_8004c068();
      param_1[4] = extraout_v1_00;
      FUN_8004c068();
      param_1[6] = extraout_v1_01;
      FUN_8004c068();
      param_1[8] = extraout_v1_02;
      param_1 = param_1 + 10;
    }
  }
                    // WARNING: Could not recover jumptable at 0x8004c060. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE)();
  return;
}



void FUN_8004c068(void)

{
  return;
}



void SaveCheckpoint(CheckpointData *param_1,Vec3 *spawnPosition,uint spawnYawRotation)

{
  int iVar1;
  
  param_1->checkpointSaved = 1;
  VectorCopy(&param_1->spawnPosition,spawnPosition);
  iVar1 = (param_1->spawnPosition).z;
  param_1->spawnYaw = (spawnYawRotation & 0xff) << 4;
  (param_1->spawnPosition).z = iVar1 + 0x164;
  MemCopy(&param_1->unkBlock12,0x800671c0,0xc);
  MemCopy(&param_1->unkBlock512,0x800671cc,0x200);
  param_1->unk1 = CheckpointData_8006718c.unk1;
  MemCopy(&param_1->unkBlock32,0x80067190,0x20);
  if (Spyro.maybeSubstate == Swim) {
    param_1->swimFlag = 1;
  }
  else if (((int)Spyro.maybeSubstate < 10) || (0xc < (int)Spyro.maybeSubstate)) {
    param_1->swimFlag = 0;
  }
  else {
    param_1->swimFlag = 2;
  }
  return;
}



void maybeLoadCheckpoint(int *param_1)

{
  if (*param_1 == 0) {
    MEMSET(&CheckpointData_8006718c.checkpointSaved,0,0x248);
  }
  else {
    MemCopy(&CheckpointData_8006718c,param_1,0x248);
  }
  FUN_80017164();
  DAT_80067ec4 = 0;
  return;
}



void FUN_8004c214(undefined4 *param_1,int param_2,CheckpointData *param_3)

{
  bool bVar1;
  int iVar2;
  CheckpointData *pCVar3;
  int iVar4;
  
  bVar1 = true;
  iVar4 = param_3->unk1;
  iVar2 = 0;
  pCVar3 = param_3;
  if (0 < iVar4) {
    do {
      if (((uint)param_1 & 0xffffff) == (*(uint *)&pCVar3->unkBlock512 & 0xffffff)) {
        bVar1 = false;
        iVar4 = iVar2;
        break;
      }
      iVar2 = iVar2 + 1;
      pCVar3 = (CheckpointData *)&pCVar3->field_0x8;
    } while (iVar2 < iVar4);
  }
  if ((!bVar1) || (iVar4 < 0x40)) {
    *(uint *)(&param_3->unkBlock512 + iVar4 * 8) = (uint)param_1 & 0xffffff | param_2 << 0x18;
    if (param_2 == 2) {
      *(int *)(&param_3->field_0x44 + iVar4 * 8) = (int)*(short *)param_1;
    }
    else if (param_2 < 3) {
      if (param_2 == 1) {
        *(uint *)(&param_3->field_0x44 + iVar4 * 8) = (uint)*(byte *)param_1;
      }
    }
    else if (param_2 == 4) {
      *(undefined4 *)(&param_3->field_0x44 + iVar4 * 8) = *param_1;
    }
    if (bVar1) {
      param_3->unk1 = param_3->unk1 + 1;
    }
  }
  return;
}



void FUN_8004c31c(int param_1)

{
  int iVar1;
  undefined4 *puVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = 0;
  iVar3 = param_1;
  if (0 < *(int *)(param_1 + 0x240)) {
    do {
      iVar1 = (int)*(uint *)(iVar3 + 0x40) >> 0x18;
      puVar2 = (undefined4 *)(*(uint *)(iVar3 + 0x40) & 0xffffff | 0x80000000);
      if (iVar1 == 2) {
        *(short *)puVar2 = (short)*(undefined4 *)(iVar3 + 0x44);
      }
      else if (iVar1 < 3) {
        if (iVar1 == 1) {
          *(char *)puVar2 = (char)*(undefined4 *)(iVar3 + 0x44);
        }
      }
      else if (iVar1 == 4) {
        *puVar2 = *(undefined4 *)(iVar3 + 0x44);
      }
      iVar4 = iVar4 + 1;
      iVar3 = iVar3 + 8;
    } while (iVar4 < *(int *)(param_1 + 0x240));
  }
  return;
}



void FUN_8004c3d4(Object *param_1)

{
  int iVar1;
  
  if ((Objects <= param_1) && (param_1 < DAT_800670bc)) {
    iVar1 = ((int)param_1 - (int)Objects) * -0x45d1745d;
    *(uint *)(&CheckpointData_8006718c.unkBlock32 + (iVar1 >> 8) * 4) =
         *(uint *)(&CheckpointData_8006718c.unkBlock32 + (iVar1 >> 8) * 4) |
         1 << (iVar1 >> 3 & 0x1fU);
    SpiritParticles = SpiritParticles + ((byte)param_1->field_0x53 & 0x7f);
  }
  return;
}



void ClearDoubleBuffer(void)

{
  RECT local_10;
  
  DrawSync(0);
  VSync(0);
  local_10.w = 0x200;
  local_10.x = 0;
  local_10.y = 0;
  local_10.h = 0xf0;
  ClearImage(&local_10,'\0','\0','\0');
  local_10.y = 0xe4;
  ClearImage(&local_10,'\0','\0','\0');
  DrawSync(0);
  return;
}



void RenderWorld(void)

{
  MemFill(DAT_80067034 + -0x3000,0,0x1c00);
  FUN_80023bb4();
  return;
}



void RenderObjects(void)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  CollisionType CVar4;
  
  MemFill(DAT_80067034 + -0x3000,0,0xc00);
  FUN_80043858();
  FUN_80044504();
  FUN_80046fd8();
  FUN_800499d4();
  iVar2 = Spyro.field18_0x2c;
  bVar1 = Spyro.field13_0x1e;
  if (Spyro.field168_0x260 == 0) {
    if (Spyro.field18_0x2c != 0) {
      Spyro.position.z = Spyro.position.z + Spyro.field18_0x2c * -2;
      CVar4 = GetCollisiontType(Spyro.field72_0x114);
      Spyro.field13_0x1e = 0xf4;
      if (CVar4 == Ice) {
        Spyro.field13_0x1e = 0xfa;
      }
      FUN_80041dbc();
      iVar3 = Spyro.field18_0x2c;
      Spyro.field18_0x2c = 0;
      Spyro.position.z = Spyro.position.z + iVar3 * 2;
    }
    Spyro.field13_0x1e = bVar1;
    FUN_80041dbc();
    FUN_800495e8();
    if (DAT_8006aab4 != '\0') {
      FUN_80048f04();
    }
  }
  Spyro.field18_0x2c = iVar2;
  return;
}



void RenderPortalSkyboxes(void)

{
  short sVar1;
  short sVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int *piVar7;
  Vec3 *pVVar8;
  int iVar9;
  Vec3 *pVVar10;
  uint uVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  Vec3 local_168;
  Vec3 local_158;
  Vec3 local_148 [3];
  Vec3 aVStack_120 [7];
  uint local_c8;
  uint local_c4;
  uint local_c0;
  uint local_bc;
  uint local_b8;
  Vec3 local_b0;
  Vec3 local_a0;
  int local_90;
  uint local_88;
  int local_80;
  int local_78;
  int local_70;
  uint local_68;
  Vec3 *local_60;
  int local_58;
  Vec3 *local_50;
  int local_38;
  int local_30;
  
  local_90 = 0;
  if (0 < DAT_80066fa8) {
    local_60 = aVStack_120;
    local_50 = &local_168;
    local_38 = 0;
    do {
      if (*(char *)(local_38 + DAT_80066f00 + 0x40) != '\0') {
        VectorSubtract(&local_168,(Vec3 *)(local_38 + DAT_80066f00 + 0x18),&cameraPosition);
        local_168.z = local_168.z + -0x540;
        VectorShiftRight(&local_168,2);
        MatrixMultVector(&Mat33_80067e98,&local_168,&local_168);
        VectorShiftUp(&local_168,2);
        if ((((-0x800 < local_168.x) &&
             (piVar7 = (int *)(local_38 + DAT_80066f00),
             local_168.x < (int)((uint)*(byte *)(piVar7 + 0x10) << 10))) &&
            (local_168.y + -0xa00 < local_168.x)) && (-(local_168.y + 0x800) < local_168.x)) {
          if (local_168.x < 0) {
            local_168.x = 0;
          }
          DAT_80068c04 = local_168.x >> 7;
          local_88 = -(local_168.x < 0x4000 ^ 1) & 3;
          sVar1 = Atan2(piVar7[0xc] - *piVar7,piVar7[0xd] - piVar7[1],1);
          sVar2 = Atan2(cameraPosition.x - *(int *)(local_38 + DAT_80066f00 + 0x18),
                        cameraPosition.y - *(int *)(local_38 + DAT_80066f00 + 0x1c),1);
          iVar12 = (int)sVar1;
          local_78 = maybeNegativeAngularDistance4096(iVar12,(int)sVar2);
          if (((0x80 < local_78 + 0x40U) && (local_78 + 0x7bfU < 0xf7f)) &&
             ((-1 < local_78 || (*(char *)(local_38 + DAT_80066f00 + 0x41) != '\0')))) {
            local_158.x = cameraPosition.x - *(int *)(local_38 + DAT_80066f00 + 0x18);
            local_158.y = cameraPosition.y - *(int *)(local_38 + DAT_80066f00 + 0x1c);
            iVar3 = sineLookup(local_78);
            iVar4 = VectorLength(&local_158,0);
            iVar3 = iVar3 * iVar4 >> 0xc;
            if (iVar3 < 0) {
              iVar3 = -iVar3;
            }
            if (0x9f < iVar3) {
              local_148[0].x = sineLookup(iVar12);
              local_148[0].y = cosineLookup(iVar12);
              local_148[0].y = -local_148[0].y;
              local_148[0].z = 0;
              MatrixMultVector(&Mat33_80067e98,local_148,local_148);
              if (local_78 < 0) {
                local_70 = -local_148[0].x;
              }
              else {
                local_70 = local_148[0].x;
              }
              if (local_70 < 0x801) {
                local_80 = 1;
                if (0x4fff < local_168.x) goto LAB_8004c9a4;
LAB_8004c990:
                if (-1 < local_80) {
LAB_8004c9a4:
                  do {
                    iVar3 = 0x400;
                    iVar4 = -0x400;
                    iVar14 = 0x400;
                    iVar15 = -0x400;
                    local_68 = 0xffffffff;
                    iVar13 = 0;
                    local_58 = local_38;
                    pVVar10 = local_60;
                    iVar12 = 0;
                    do {
                      if (local_80 == 0) {
                        VectorSubtract(&local_158,(Vec3 *)(DAT_80066f00 + local_58 + iVar13),
                                       (Vec3 *)(DAT_80066f00 + local_58 + 0x18));
                        if (currentLoadedLevel == ((int)currentLoadedLevel / 10) * 10) {
                          local_158.z = local_158.z + 0x540;
                        }
                        else {
                          local_158.z = local_158.z + 800;
                        }
                        VectorShiftRight(&local_158,6);
                        VectorAdd(&local_158,&local_158,(Vec3 *)(DAT_80066f00 + local_58 + iVar13));
                        pVVar8 = &local_158;
                      }
                      else {
                        pVVar8 = (Vec3 *)(DAT_80066f00 + local_58 + iVar13);
                      }
                      FUN_8001c040(pVVar10,pVVar8,local_88);
                      pVVar8 = local_50;
                      (&local_50[0xb].y)[iVar12] =
                           (uint)*(ushort *)&pVVar10->x + pVVar10->y * 0x10000;
                      iVar6 = pVVar10->x;
                      if (iVar6 < iVar3) {
                        iVar3 = iVar6;
                      }
                      if (iVar4 < iVar6) {
                        iVar4 = iVar6;
                      }
                      iVar9 = pVVar10->y;
                      if (iVar9 < iVar14) {
                        iVar14 = iVar9;
                      }
                      if (iVar15 < iVar9) {
                        iVar15 = iVar9;
                      }
                      piVar7 = &pVVar10->z;
                      pVVar10 = pVVar10 + 1;
                      iVar13 = iVar13 + 0xc;
                      uVar5 = FUN_8001c0f4(iVar6,iVar9,*piVar7);
                      iVar6 = iVar12 + 1;
                      local_68 = local_68 & uVar5;
                      (&pVVar8[0xd].y)[iVar12] = uVar5;
                      iVar12 = iVar6;
                    } while (iVar6 < 5);
                    if (local_68 == 0) {
                      if (iVar3 < 0) {
                        iVar3 = 0;
                      }
                      if (0x200 < iVar4) {
                        iVar4 = 0x200;
                      }
                      if (iVar14 < 0xc) {
                        iVar14 = 0xc;
                      }
                      iVar12 = 0;
                      if (0xe4 < iVar15) {
                        iVar15 = 0xe4;
                      }
                      DAT_80068c00 = *(undefined4 *)(local_38 + DAT_80066f00 + 0x3c);
                      DAT_80068c08 = (cosineLookupTable[clock * 4 + local_90 * 0x40 & 0xff] >> 4) +
                                     0xe00;
                      DAT_80068c0c = 0xc00;
                      DAT_80068c0a = (cosineLookupTable[clock * 4 + local_90 * 0x40 & 0xff] >> 4) +
                                     0xe00;
                      pVVar10 = local_50;
                      iVar13 = 0;
                      DAT_80068bf0 = iVar14;
                      DAT_80068bf4 = iVar15;
                      DAT_80068bf8 = iVar3;
                      DAT_80068bfc = iVar4;
                      do {
                        iVar3 = iVar13 + 1;
                        if (((&local_50[0xd].y)[iVar13] & (&local_50[0xd].y)[iVar3 % 5]) == 0) {
                          pVVar10[4].x = iVar13;
                          pVVar10 = (Vec3 *)&pVVar10->y;
                          iVar12 = iVar12 + 1;
                        }
                        iVar13 = iVar3;
                      } while (iVar3 < 5);
                      if ((iVar12 != 0) ||
                         ((local_70 < 0 &&
                          (((local_c8 | local_c4 | local_c0 | local_bc | local_b8) & 0xf) == 0xf))))
                      {
                        iVar3 = 0;
                        DAT_80068c10 = iVar12;
                        if (0 < iVar12) {
                          iVar14 = 0;
                          iVar4 = 0;
                          do {
                            pVVar10 = local_50;
                            iVar13 = (&local_50[4].x)[iVar3];
                            iVar6 = (iVar13 + 1) % 5;
                            iVar15 = iVar14;
                            if (local_78 < 0) {
                              iVar15 = (iVar4 + 1) * 4;
                            }
                            *(int *)((int)&DAT_80068c14 + iVar15) = (&local_50[0xb].y)[iVar13];
                            iVar15 = iVar14;
                            if (0 < local_78) {
                              iVar15 = (iVar4 + 1) * 4;
                            }
                            *(int *)((int)&DAT_80068c14 + iVar15) = (&local_50[0xb].y)[iVar6];
                            if ((((&local_50[0xd].y)[iVar13] & 0x10U) != 0) ||
                               (((&local_50[0xd].y)[iVar6] & 0x10U) != 0)) {
                              local_30 = iVar12;
                              VectorSubtract(&local_b0,
                                             (Vec3 *)(DAT_80066f00 + local_38 + iVar13 * 0xc),
                                             &cameraPosition);
                              VectorSubtract(&local_a0,
                                             (Vec3 *)(DAT_80066f00 + local_38 + iVar6 * 0xc),
                                             &cameraPosition);
                              MatrixMultVector(&Mat33_80067e98,&local_b0,&local_b0);
                              MatrixMultVector(&Mat33_80067e98,&local_a0,&local_a0);
                              iVar15 = (local_a0.y - local_b0.y) * (local_b0.x + -0x100);
                              iVar12 = local_b0.x - local_a0.x;
                              if (iVar12 == 0) {
                                trap(0x1c00);
                              }
                              if ((iVar12 == -1) && (iVar15 == -0x80000000)) {
                                trap(0x1800);
                              }
                              iVar6 = (local_a0.z - local_b0.z) * (local_b0.x + -0x100);
                              if (iVar12 == 0) {
                                trap(0x1c00);
                              }
                              if ((iVar12 == -1) && (iVar6 == -0x80000000)) {
                                trap(0x1800);
                              }
                              iVar15 = (local_b0.y + iVar15 / iVar12) * 0x155;
                              if (iVar15 < 0) {
                                iVar15 = iVar15 + 0xff;
                              }
                              uVar11 = 0x100 - (iVar15 >> 8);
                              uVar5 = uVar11;
                              if (0x3ff < (int)uVar11) {
                                uVar5 = 0x3ff;
                              }
                              if ((int)uVar11 < -0x400) {
                                uVar5 = 0xfffffc00;
                              }
                              iVar12 = (local_b0.z + iVar6 / iVar12) * 0xd5;
                              if (iVar12 < 0) {
                                iVar12 = iVar12 + 0xff;
                              }
                              iVar15 = 0x78 - (iVar12 >> 8);
                              iVar12 = iVar15;
                              if (0x3ff < iVar15) {
                                iVar12 = 0x3ff;
                              }
                              if (iVar15 < -0x400) {
                                iVar12 = -0x400;
                              }
                              if (((&pVVar10[0xd].y)[iVar13] & 0x10U) == 0) {
                                if (0 < local_78) goto LAB_8004cffc;
                                piVar7 = (int *)((int)&DAT_80068c14 + iVar14);
                              }
                              else if (local_78 < 0) {
LAB_8004cffc:
                                piVar7 = &DAT_80068c14 + iVar4 + 1;
                              }
                              else {
                                piVar7 = (int *)((int)&DAT_80068c14 + iVar14);
                              }
                              *piVar7 = iVar12 * 0x10000 + (uVar5 & 0xffff);
                              iVar12 = local_30;
                            }
                            iVar14 = iVar14 + 8;
                            iVar3 = iVar3 + 1;
                            iVar4 = iVar4 + 2;
                          } while (iVar3 < iVar12);
                        }
                        if (local_168.x < 0x5000) {
                          DAT_80068c0e = (short)local_168.x + -0x4000;
                          if (local_168.x < 0x4000) {
                            DAT_80068c0e = 0;
                          }
                        }
                        else {
                          DAT_80068c0e = 0xfff;
                        }
                        FUN_800296d0(local_80);
                      }
                    }
                    local_80 = local_80 + -1;
                    if (local_168.x < 0x5000) goto LAB_8004c990;
                    if (local_80 < 1) break;
                  } while( true );
                }
              }
            }
          }
        }
      }
      local_38 = local_38 + 0x44;
      local_90 = local_90 + 1;
    } while (local_90 < DAT_80066fa8);
  }
  return;
}



void SetTPage(int tpage)

{
  undefined *ptrPrimitive;
  
  ptrPrimitive = primitiveBuffer_next;
  SetDrawMode((DR_MODE *)primitiveBuffer_next,1,0,tpage,(RECT *)0x0);
  PrimitiveBuffer_Insert((uint *)ptrPrimitive);
  primitiveBuffer_next = ptrPrimitive + 0xc;
  return;
}



void FUN_8004d158(int param_1)

{
  DrawSync(0);
  DAT_80067170 = param_1;
  DAT_8006b2a0 = (uint *)(DAT_8006b2a4 - param_1);
  DAT_8006b29c = (uint *)((int)DAT_8006b2a0 - param_1);
                    // WARNING: Read-only address (ram,0x80069998) is written
  doubleFrameBuffer[0].field2_0x70 = (uint *)((int)DAT_8006b2a0 - param_1);
                    // WARNING: Read-only address (ram,0x80069a0c) is written
  doubleFrameBuffer[1].field2_0x70 = DAT_8006b2a0;
  return;
}



void DrawShadowedOrangeLine(short p0x,short p0y,short p1x,short p1y)

{
  undefined *ptrPrimitive;
  uint *ptrPrimitive_00;
  
  ptrPrimitive = primitiveBuffer_next;
  *(undefined4 *)primitiveBuffer_next = 0x4000000;
  ptrPrimitive[7] = 0x50;
  *(short *)(ptrPrimitive + 8) = p0x;
  *(short *)(ptrPrimitive + 10) = p0y;
  *(short *)(ptrPrimitive + 0x10) = p1x;
  *(short *)(ptrPrimitive + 0x12) = p1y;
  ptrPrimitive[4] = 0xb4;
  ptrPrimitive[5] = 0x9a;
  ptrPrimitive[6] = 0x11;
  ptrPrimitive[0xc] = 0xb4;
  ptrPrimitive[0xd] = 0x9a;
  ptrPrimitive[0xe] = 0x11;
  PrimitiveBuffer_Insert((uint *)ptrPrimitive);
  ptrPrimitive_00 = (uint *)(ptrPrimitive + 0x14);
  primitiveBuffer_next = (undefined *)ptrPrimitive_00;
  *ptrPrimitive_00 = 0x4000000;
  ptrPrimitive[0x1b] = 0x50;
  *(short *)(ptrPrimitive + 0x1c) = p0x + 1;
  *(short *)(ptrPrimitive + 0x1e) = p0y + 1;
  *(short *)(ptrPrimitive + 0x24) = p1x + 1;
  *(short *)(ptrPrimitive + 0x26) = p1y + 1;
  ptrPrimitive[0x18] = 0x80;
  ptrPrimitive[0x19] = 0x52;
  ptrPrimitive[0x1a] = 0;
  ptrPrimitive[0x20] = 0x80;
  ptrPrimitive[0x21] = 0x52;
  ptrPrimitive[0x22] = 0;
  PrimitiveBuffer_Insert(ptrPrimitive_00);
  primitiveBuffer_next = ptrPrimitive + 0x28;
  return;
}



void DrawDarkTransparentRect(short left,short right,short top,short bottom)

{
  undefined *ptrPrimitive;
  
  ptrPrimitive = primitiveBuffer_next;
  *(short *)(primitiveBuffer_next + 8) = left;
  *(short *)(ptrPrimitive + 0x10) = left;
  *(undefined4 *)ptrPrimitive = 0x5000000;
  *(undefined4 *)(ptrPrimitive + 4) = 0x2a080808;
  *(short *)(ptrPrimitive + 0xc) = right;
  *(short *)(ptrPrimitive + 0x14) = right;
  *(short *)(ptrPrimitive + 10) = top;
  *(short *)(ptrPrimitive + 0xe) = top;
  *(short *)(ptrPrimitive + 0x12) = bottom;
  *(short *)(ptrPrimitive + 0x16) = bottom;
  PrimitiveBuffer_Insert((uint *)ptrPrimitive);
  primitiveBuffer_next = ptrPrimitive + 0x18;
  return;
}



void DrawOutlinedBG(short left,short right,short top,short bottom)

{
  SetTPage(0x18);
  DrawDarkTransparentRect(left,right,top,bottom);
  DrawShadowedOrangeLine(left,top,right,top);
  DrawShadowedOrangeLine(right,top,right,bottom);
  DrawShadowedOrangeLine(right,bottom,left,bottom);
  DrawShadowedOrangeLine(left,bottom,left,top);
  return;
}



void RenderDialoguePanel(short param_1,short param_2,short param_3,short param_4)

{
  short bottom;
  
  SetTPage(0x18);
  bottom = param_4 + -8;
  DrawDarkTransparentRect(param_1,param_2,param_3 + 8,bottom);
  param_2 = param_2 + -0xc;
  DrawDarkTransparentRect(param_1 + 0xc,param_2,param_3,param_3 + 8);
  DrawDarkTransparentRect(param_1 + 0xc,param_2,bottom,param_4);
  RenderSprite(&DialoguePanelTLCornerInfo,param_1,param_3,0xb);
  RenderSprite(&DialoguePanelTRCornerInfo,param_2,param_3,0xb);
  RenderSprite(&DialoguePanelBLCornerInfo,param_1,bottom,0xb);
  RenderSprite(&DialoguePanelBRCornerInfo,param_2,bottom,0xb);
  return;
}



void RenderRoundedBackground(short left,short right,short top,short bottom)

{
  SetTPage(0x18);
  DrawDarkTransparentRect(left + 3,right + -3,top,top + 1);
  DrawDarkTransparentRect(left + 1,right + -1,top + 1,top + 2);
  DrawDarkTransparentRect(left,right,top + 2,bottom + -2);
  DrawDarkTransparentRect(left + 1,right + -1,bottom + -2,bottom + -1);
  DrawDarkTransparentRect(left + 3,right + -3,bottom + -1,bottom);
  return;
}



void FUN_8004d604(void)

{
  short sVar1;
  undefined *ptrPrimitive;
  int iVar2;
  
  if (((((DAT_80067100 != 0) && (iVar2 = DAT_8006701c + 1, DAT_8006701c < 0xc)) ||
       (iVar2 = DAT_8006701c, DAT_80067100 != 0)) || (iVar2 = DAT_8006701c + -1, DAT_8006701c != 0))
     && (DAT_8006701c = iVar2, iVar2 = 0, DAT_8006701c != 0)) {
    do {
      ptrPrimitive = primitiveBuffer_next;
      *(undefined4 *)primitiveBuffer_next = 0x5000000;
      ptrPrimitive[7] = 0x28;
      *(undefined2 *)(ptrPrimitive + 8) = 0;
      *(undefined2 *)(ptrPrimitive + 0xc) = 0x200;
      *(undefined2 *)(ptrPrimitive + 0x10) = 0;
      *(undefined2 *)(ptrPrimitive + 0x14) = 0x200;
      sVar1 = (short)DAT_8006701c;
      if (iVar2 == 0) {
        *(undefined2 *)(ptrPrimitive + 10) = 0xc;
        *(short *)(ptrPrimitive + 0x12) = sVar1 + 0xc;
      }
      else {
        *(undefined2 *)(ptrPrimitive + 10) = 0xe4;
        *(short *)(ptrPrimitive + 0x12) = 0xe4 - sVar1;
      }
      iVar2 = iVar2 + 1;
      ptrPrimitive[4] = 0;
      ptrPrimitive[5] = 0;
      ptrPrimitive[6] = 0;
      *(undefined2 *)(ptrPrimitive + 0xe) = *(undefined2 *)(ptrPrimitive + 10);
      *(undefined2 *)(ptrPrimitive + 0x16) = *(undefined2 *)(ptrPrimitive + 0x12);
      PrimitiveBuffer_Insert((uint *)ptrPrimitive);
      primitiveBuffer_next = ptrPrimitive + 0x18;
    } while (iVar2 < 2);
  }
  return;
}



void FillColor(int param_1,undefined param_2,undefined param_3,undefined param_4)

{
  undefined *ptrPrimitive;
  
  ptrPrimitive = primitiveBuffer_next;
  SetDrawMode((DR_MODE *)primitiveBuffer_next,1,0,param_1 << 5,(RECT *)0x0);
  PrimitiveBuffer_Insert((uint *)ptrPrimitive);
  *(undefined4 *)(ptrPrimitive + 0xc) = 0x5000000;
  ptrPrimitive[0x13] = 0x2a;
  *(undefined2 *)(ptrPrimitive + 0x16) = 0xc;
  *(undefined2 *)(ptrPrimitive + 0x1a) = 0xc;
  *(undefined2 *)(ptrPrimitive + 0x14) = 0;
  *(undefined2 *)(ptrPrimitive + 0x18) = 0x200;
  *(undefined2 *)(ptrPrimitive + 0x1c) = 0;
  *(undefined2 *)(ptrPrimitive + 0x1e) = 0xe4;
  *(undefined2 *)(ptrPrimitive + 0x20) = 0x200;
  *(undefined2 *)(ptrPrimitive + 0x22) = 0xe4;
  ptrPrimitive[0x10] = param_2;
  ptrPrimitive[0x11] = param_3;
  ptrPrimitive[0x12] = param_4;
  PrimitiveBuffer_Insert((uint *)(ptrPrimitive + 0xc));
  primitiveBuffer_next = ptrPrimitive + 0x24;
  return;
}



void FUN_8004d810(void)

{
  FrameBuffer *pFVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  RECT local_10;
  
  DrawSync(0);
  VSync(0);
  local_10.y = 0xc;
  local_10.x = 0;
  if (DAT_80066fc0 != doubleFrameBuffer) {
    local_10.y = 0xf0;
  }
  iVar3 = 0xc;
  local_10.w = 0x200;
  local_10.h = 0xd8;
  if (DAT_80066fc0 == doubleFrameBuffer) {
    iVar3 = 0xf0;
  }
  MoveImage(&local_10,0,iVar3);
  DrawSync(0);
  iVar3 = 0;
                    // WARNING: Read-only address (ram,0x80069940) is written
  doubleFrameBuffer[0].drawEnvironment.isbg = '\0';
                    // WARNING: Read-only address (ram,0x800699b4) is written
  doubleFrameBuffer[1].drawEnvironment.isbg = '\0';
  do {
    pFVar1 = doubleFrameBuffer;
    if (DAT_80066fc0 == doubleFrameBuffer) {
      pFVar1 = (FrameBuffer *)0x8006999c;
    }
    primitiveBuffer_next = (undefined *)pFVar1->field2_0x70;
    DAT_80067168 = DAT_80066ffc + 0x1000;
    uVar2 = 0x20;
    if (iVar3 == 0) {
      uVar2 = 0x10;
      uVar4 = 0x10;
      uVar5 = 0x10;
    }
    else {
      uVar4 = 0x20;
      uVar5 = 0x20;
    }
    iVar3 = iVar3 + 1;
    DAT_80066fc0 = pFVar1;
    FillColor(2,uVar2,uVar4,uVar5);
    DrawSync(0);
    VSync(0);
    FUN_80055ca0(&DAT_80066fc0->displayEnvironment);
    FUN_80055be0(DAT_80066fc0);
    uVar2 = FUN_8001b2a8(0x580);
    FUN_80055b70(uVar2);
  } while (iVar3 < 0x10);
  ClearDoubleBuffer();
                    // WARNING: Read-only address (ram,0x80069940) is written
  doubleFrameBuffer[0].drawEnvironment.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x800699b4) is written
  doubleFrameBuffer[1].drawEnvironment.isbg = '\x01';
  return;
}



void DrawText_Center(char *text,int screenPosX,short screenPosY,int colorIndex)

{
  int iVar1;
  
  iVar1 = GetTextWidth(text);
  RenderText(text,screenPosX - (iVar1 >> 1),screenPosY,colorIndex,(TextConfig *)0x0);
  return;
}



void DrawText_CenterWithBG(char *text,int screenPosX,int screenPosY,int colorIndex)

{
  short screenPosY_00;
  short sVar1;
  int iVar2;
  
  iVar2 = GetTextWidth(text);
  sVar1 = (short)(iVar2 >> 1);
  screenPosY_00 = (short)screenPosY;
  RenderRoundedBackground
            (((short)screenPosX - sVar1) + -8,(short)screenPosX + sVar1 + 8,screenPosY_00 + -2,
             screenPosY_00 + 0xb);
  DrawText_Center(text,screenPosX,screenPosY_00,colorIndex);
  return;
}



void DrawText_Right(char *text,int screenPosX,short screenPosY,int colorIndex)

{
  int iVar1;
  
  iVar1 = GetTextWidth(text);
  RenderText(text,screenPosX - iVar1,screenPosY,colorIndex,(TextConfig *)0x0);
  return;
}



void DrawNumberSmall(int value,int screenPosX,short screenPosY,int colorIndex)

{
  int iVar1;
  char acStack_20 [8];
  
  sprintf(acStack_20,&DAT_80066ec4,value);
  if (screenPosX < 0) {
    iVar1 = strlen(acStack_20);
    screenPosX = iVar1 * -0xc - screenPosX;
  }
  if (DAT_80069924 == 0) {
    RenderText(acStack_20,screenPosX,screenPosY,colorIndex,(TextConfig *)0x0);
    if ((DAT_80067118 != 2) && (999 < value)) {
      iVar1 = screenPosX + 10;
      if (9999 < value) {
        iVar1 = screenPosX + 0x16;
      }
      RenderText(&DAT_80066ec8,iVar1,screenPosY + 1,colorIndex,(TextConfig *)0x0);
    }
  }
  else {
    RenderText2(acStack_20,screenPosX,screenPosY,colorIndex,(int *)0x0);
  }
  return;
}



void DrawNumberSmall_Right(int value,int x,short y,int colorIndex)

{
  int iVar1;
  int iVar2;
  char acStack_28 [8];
  
  iVar1 = 1;
  iVar2 = value;
  if (9 < value) {
    do {
      iVar2 = iVar2 / 10;
      iVar1 = iVar1 + 1;
    } while (9 < iVar2);
  }
  for (; 0 < iVar1; iVar1 = iVar1 + -1) {
    sprintf(acStack_28,&DAT_80066ec4,value % 10);
    x = x - (uint)(byte)(&DAT_8006380c)[value % 10];
    if (DAT_80069924 == 0) {
      RenderText(acStack_28,x,y,colorIndex,(TextConfig *)0x0);
      iVar2 = (int)((ulonglong)((longlong)value * 0x66666667) >> 0x20);
    }
    else {
      RenderText2(acStack_28,x,y,colorIndex,(int *)0x0);
      iVar2 = (int)((ulonglong)((longlong)value * 0x66666667) >> 0x20);
    }
    value = (iVar2 >> 2) - (value >> 0x1f);
  }
  return;
}



void DrawOpaqueBlackRect(short left,short right,short top,short bottom)

{
  undefined *ptrPrimitive;
  
  ptrPrimitive = primitiveBuffer_next;
  *(undefined4 *)primitiveBuffer_next = 0x5000000;
  *(short *)(ptrPrimitive + 8) = left;
  *(short *)(ptrPrimitive + 0x10) = left;
  *(undefined4 *)(ptrPrimitive + 4) = 0x28000000;
  *(short *)(ptrPrimitive + 0xc) = right;
  *(short *)(ptrPrimitive + 0x14) = right;
  *(short *)(ptrPrimitive + 10) = top;
  *(short *)(ptrPrimitive + 0xe) = top;
  *(short *)(ptrPrimitive + 0x12) = bottom;
  *(short *)(ptrPrimitive + 0x16) = bottom;
  PrimitiveBuffer_Insert((uint *)ptrPrimitive);
  primitiveBuffer_next = ptrPrimitive + 0x18;
  return;
}



void FUN_8004dd94(void)

{
  long lVar1;
  RECT local_10;
  
  DrawSync(0);
  SpuSetTransferStartAddr(0x7a000);
  SpuRead((uchar *)DAT_8006b29c,0x6000);
  do {
    lVar1 = SpuIsTransferCompleted(0);
  } while (lVar1 == 0);
  local_10.x = 0x200;
  local_10.y = 0x80;
  local_10.w = 0xc0;
  local_10.h = 0x40;
  LoadImage(&local_10,DAT_8006b29c);
  DrawSync(0);
  DAT_80069918 = 0;
  return;
}



void FUN_8004de1c(int param_1)

{
  RECT local_18;
  
  DrawSync(0);
  local_18.x = 0x200;
  local_18.y = 0x80;
  local_18.w = 0x100;
  local_18.h = 0x60;
  LoadImage(&local_18,(u_long *)(DAT_8006b29c + 0x2c000));
  DrawSync(0);
  FUN_80013918(DAT_800682d8,DAT_8006b29c + 0x2c000,0xc000,
               DAT_800676f8 + DAT_80067118 * 0x180000 + param_1 * 0xc000);
  return;
}



void FUN_8004dee8(void)

{
  RECT local_18;
  
  DrawSync(0);
  MemCopy(DAT_8006b29c,DAT_8006b29c + 0xb000,0xc000);
  local_18.x = 0x200;
  local_18.y = 0x80;
  local_18.w = 0x100;
  local_18.h = 0x60;
  StoreImage(&local_18,DAT_8006b29c + 0xb000);
  DrawSync(0);
  LoadImage(&local_18,DAT_8006b29c);
  DrawSync(0);
  return;
}



void AnimatePausePhoto(int frame)

{
  undefined2 *puVar1;
  undefined2 *puVar2;
  byte bVar3;
  short left;
  undefined *ptrPrimitive;
  short sVar4;
  char cVar5;
  int iVar6;
  short sVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  int local_30;
  
  iVar10 = 0;
  local_30 = 0;
  bVar3 = photoAnimationTopBounds[frame + 1];
  left = photoAnimationRightBounds[frame + 1];
  DrawOpaqueBlackRect(0,photoAnimationRightBounds[frame],(ushort)photoAnimationTopBounds[frame],
                      (ushort)bVar3);
  DrawOpaqueBlackRect(left,photoAnimationRightBounds[frame],(ushort)bVar3,0xe4);
  iVar11 = 0xe4 - (uint)bVar3;
  iVar8 = iVar11;
  iVar9 = 0;
  do {
    iVar6 = 0;
    sVar7 = (ushort)bVar3 + (short)(local_30 >> 2);
    do {
      ptrPrimitive = primitiveBuffer_next;
      cVar5 = (char)(iVar10 >> 2) + '\f';
      iVar12 = left * iVar6;
      *(undefined4 *)primitiveBuffer_next = 0x9000000;
      sVar4 = (ushort)bVar3 + (short)(iVar8 >> 2);
      *(short *)(primitiveBuffer_next + 0x1a) = sVar4;
      *(short *)(primitiveBuffer_next + 0x22) = sVar4;
      sVar4 = (short)iVar6;
      *(undefined4 *)(primitiveBuffer_next + 4) = 0x2c808080;
      primitiveBuffer_next[0xd] = cVar5;
      iVar6 = iVar6 + 1;
      *(short *)(primitiveBuffer_next + 0x16) = sVar4 * 2 + 0x100;
      primitiveBuffer_next[0x14] = 0x80;
      primitiveBuffer_next[0x24] = 0x80;
      primitiveBuffer_next[0x1d] = primitiveBuffer_next[0xd] + '6';
      primitiveBuffer_next[0x25] = primitiveBuffer_next[0xd] + '6';
      *(short *)(primitiveBuffer_next + 8) = (short)(iVar12 >> 2);
      *(short *)(primitiveBuffer_next + 10) = sVar7;
      *(short *)(primitiveBuffer_next + 0x12) = sVar7;
      primitiveBuffer_next[0xc] = 0;
      primitiveBuffer_next[0x1c] = 0;
      primitiveBuffer_next[0x15] = cVar5;
      *(undefined2 *)(primitiveBuffer_next + 0x18) = *(undefined2 *)(primitiveBuffer_next + 8);
      *(short *)(primitiveBuffer_next + 0x10) = (short)(left * iVar6 >> 2);
      puVar1 = (undefined2 *)(primitiveBuffer_next + 0x10);
      puVar2 = (undefined2 *)(primitiveBuffer_next + 0x20);
      primitiveBuffer_next = primitiveBuffer_next + 0x28;
      *puVar2 = *puVar1;
      PrimitiveBuffer_Insert((uint *)ptrPrimitive);
      iVar12 = iVar9 + 1;
    } while (iVar6 < 4);
    iVar10 = iVar10 + 0xd8;
    iVar8 = iVar8 + iVar11;
    local_30 = local_30 + iVar11;
    iVar9 = iVar12;
  } while (iVar12 < 4);
  return;
}



void DrawGameScreenshot(void)

{
  undefined *ptrPrimitive;
  
  SetTPage(0x108);
  ptrPrimitive = primitiveBuffer_next;
  *(undefined4 *)primitiveBuffer_next = 0x4000000;
  ptrPrimitive[0xd] = 0xc;
  *(undefined2 *)(ptrPrimitive + 10) = 0x78;
  *(undefined2 *)(ptrPrimitive + 0x10) = 0x100;
  *(undefined4 *)(ptrPrimitive + 4) = 0x64808080;
  ptrPrimitive[0xc] = 0;
  *(undefined2 *)(ptrPrimitive + 8) = 0;
  *(undefined2 *)(ptrPrimitive + 0x12) = 0x6c;
  PrimitiveBuffer_Insert((uint *)ptrPrimitive);
  primitiveBuffer_next = ptrPrimitive + 0x14;
  return;
}



void FUN_8004e1cc(undefined2 param_1,undefined2 param_2,undefined2 param_3,undefined2 param_4,
                 undefined4 param_5)

{
  undefined *ptrPrimitive;
  
  ptrPrimitive = primitiveBuffer_next;
  *(undefined2 *)(primitiveBuffer_next + 8) = param_1;
  *(undefined2 *)(ptrPrimitive + 0x10) = param_1;
  *(undefined4 *)ptrPrimitive = 0x5000000;
  *(undefined4 *)(ptrPrimitive + 4) = param_5;
  *(undefined2 *)(ptrPrimitive + 0xc) = param_3;
  *(undefined2 *)(ptrPrimitive + 0x14) = param_3;
  *(undefined2 *)(ptrPrimitive + 10) = param_2;
  *(undefined2 *)(ptrPrimitive + 0xe) = param_2;
  *(undefined2 *)(ptrPrimitive + 0x12) = param_4;
  *(undefined2 *)(ptrPrimitive + 0x16) = param_4;
  PrimitiveBuffer_Insert((uint *)ptrPrimitive);
  primitiveBuffer_next = ptrPrimitive + 0x18;
  return;
}



undefined * FUN_8004e238(short param_1,short param_2,uint param_3,int param_4)

{
  byte bVar1;
  undefined *ptrPrimitive;
  char cVar2;
  byte *pbVar3;
  int iVar4;
  
  ptrPrimitive = primitiveBuffer_next;
  iVar4 = 0;
  *(undefined4 *)primitiveBuffer_next = 0x9000000;
  *(undefined4 *)(ptrPrimitive + 4) = 0x2c808080;
  *(short *)(ptrPrimitive + 8) = param_1;
  *(short *)(ptrPrimitive + 0x18) = param_1;
  *(short *)(ptrPrimitive + 10) = param_2;
  *(short *)(ptrPrimitive + 0x12) = param_2;
  if ((int)param_3 < 0) {
    param_3 = ~param_3;
    if ((spriteBigNumbers[param_3].clutX & 0x80) != 0) {
      *(int *)(ptrPrimitive + 4) = *(int *)(ptrPrimitive + 4) + 0x2000000;
    }
    *(undefined2 *)(ptrPrimitive + 0x16) = 0x38;
    *(ushort *)(ptrPrimitive + 0xe) =
         (spriteBigNumbers[param_3].clutX & 3) +
         (ushort)spriteBigNumbers[param_3].clutY * 0x40 + 0x4020;
    *(ushort *)(ptrPrimitive + 0x10) = (ushort)spriteWidths[param_4] + param_1;
    *(ushort *)(ptrPrimitive + 0x1a) = (ushort)spriteHeights[param_4] + param_2;
    bVar1 = spriteBigNumbers[param_3].X;
    ptrPrimitive[0xc] = bVar1;
    ptrPrimitive[0x14] = bVar1 + spriteWidths[param_4];
    bVar1 = spriteBigNumbers[param_3].Y;
    ptrPrimitive[0xd] = bVar1;
    cVar2 = bVar1 + spriteHeights[param_4];
  }
  else {
    if (DAT_80069918 == 0) {
      pbVar3 = &DAT_8006387c + param_3 * 6;
    }
    else if (DAT_80069918 == 1) {
      pbVar3 = (byte *)(param_3 * 6 + -0x7ff9c1c8);
      if ((int)param_3 < 3) {
        iVar4 = 1;
      }
    }
    else {
      pbVar3 = (byte *)(param_3 * 6 + -0x7ff9c140);
      if (((param_3 == 0) || (param_3 == 0xe)) || (param_3 == 0x12)) {
        iVar4 = 1;
      }
    }
    if ((pbVar3[2] & 0x80) != 0) {
      *(undefined4 *)(ptrPrimitive + 4) = 0x2e404040;
    }
    *(ushort *)(ptrPrimitive + 0x16) = (ushort)(*pbVar3 >> 6) + (short)iVar4 * 0x80 + 8;
    *(ushort *)(ptrPrimitive + 0xe) = (pbVar3[2] & 0x7f) + (ushort)pbVar3[3] * 0x40 + 0x2020;
    *(ushort *)(ptrPrimitive + 0x10) = (ushort)pbVar3[4] + param_1;
    *(ushort *)(ptrPrimitive + 0x1a) = (ushort)pbVar3[5] + param_2;
    cVar2 = (char)((*pbVar3 & 0x3f) << (2U - iVar4 & 0x1f));
    ptrPrimitive[0xc] = cVar2;
    ptrPrimitive[0x14] = cVar2 + pbVar3[4];
    bVar1 = pbVar3[1];
    ptrPrimitive[0xd] = bVar1 + 0x80;
    cVar2 = bVar1 + 0x80 + pbVar3[5];
  }
  ptrPrimitive[0x1d] = cVar2;
  if (DAT_80069924 == 0) {
    if (ptrPrimitive[0x14] == '\0') {
      ptrPrimitive[0x14] = 0xff;
    }
    if (ptrPrimitive[0x1d] == '\0') {
      ptrPrimitive[0x1d] = 0xff;
    }
  }
  else {
    ptrPrimitive[0x14] = ptrPrimitive[0x14] + -1;
    ptrPrimitive[0x1d] = ptrPrimitive[0x1d] + -1;
  }
  ptrPrimitive[0x1c] = ptrPrimitive[0xc];
  *(undefined2 *)(ptrPrimitive + 0x20) = *(undefined2 *)(ptrPrimitive + 0x10);
  *(undefined2 *)(ptrPrimitive + 0x22) = *(undefined2 *)(ptrPrimitive + 0x1a);
  ptrPrimitive[0x24] = ptrPrimitive[0x14];
  ptrPrimitive[0x15] = ptrPrimitive[0xd];
  ptrPrimitive[0x25] = ptrPrimitive[0x1d];
  PrimitiveBuffer_Insert((uint *)ptrPrimitive);
  primitiveBuffer_next = ptrPrimitive + 0x28;
  return ptrPrimitive;
}



void FUN_8004e544(int param_1,undefined4 param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 1;
  iVar1 = param_3;
  if (9 < param_3) {
    do {
      iVar1 = iVar1 / 10;
      iVar2 = iVar2 + 1;
    } while (9 < iVar1);
  }
  for (; 0 < iVar2; iVar2 = iVar2 + -1) {
    FUN_8004e238(param_1,param_2,~(param_3 % 10),0);
    param_3 = param_3 / 10;
    param_1 = param_1 + -0x18;
  }
  return;
}



void TopLeftPauseMenuBackgroundRelated(int param_1)

{
  undefined1 *puVar1;
  undefined1 *puVar2;
  undefined1 *puVar3;
  byte *pbVar4;
  int iVar5;
  
  FUN_8004e1cc(0,0xc - param_1,0x100,0x78 - param_1,0x28bcc1cd);
  iVar5 = 0;
  do {
    puVar1 = &DAT_80063918 + iVar5;
    puVar2 = &DAT_8006391a + iVar5;
    puVar3 = &DAT_8006391b + iVar5;
    pbVar4 = &DAT_80063919 + iVar5;
    iVar5 = iVar5 + 4;
    FUN_8004e238(*puVar1,(uint)*pbVar4 - param_1,*puVar2,*puVar3);
  } while (iVar5 < 0xa0);
  return;
}



void RenderPauseMenuText(int param_1,int param_2,short param_3)

{
  uint uVar1;
  uint screenPosX;
  int colorIndex;
  char *text;
  
  param_3 = (ushort)(byte)(&DAT_80063b50)[param_1] - param_3;
  screenPosX = (uint)(byte)(&DAT_80063b2c)[DAT_80067118 * 0x22 + param_1];
  text = pauseMenuStrings[DAT_80067118 * 0x1b + (uint)(byte)(&DAT_80063b08)[param_1]];
  if (((pauseSubMenuId == 2) && (param_2 == 2)) && (DAT_80068373 == '\0')) {
    colorIndex = 0xd;
  }
  else {
    uVar1 = 0;
    if (pauseMenuCurrentItem == param_2) {
      uVar1 = (uint)((menuAnimation & 0x1f) < 0x16);
    }
    colorIndex = uVar1 + 2;
  }
  if (param_1 - 9U < 0x17) {
    if (param_1 < 0x14) {
      DrawText_Right(text,screenPosX,param_3,colorIndex);
    }
    else {
      RenderText(text,screenPosX,param_3,colorIndex,(TextConfig *)0x0);
    }
  }
  else {
    DrawText_Center(text,screenPosX,param_3,colorIndex);
  }
  return;
}



void PauseMenuTextRelated(undefined4 param_1)

{
  short sVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  
  if (pauseSubMenuId == 0) {
    iVar5 = 0;
    do {
      RenderPauseMenuText(iVar5,iVar5,param_1);
      iVar5 = iVar5 + 1;
    } while (iVar5 < 5);
    uVar2 = 6;
    if (inHomeWorld == 0) {
      uVar2 = 7;
      if (inSpeedwayFlag == -1) {
        uVar2 = 5;
        if (DAT_800698fc != 0) {
          return;
        }
        uVar3 = 5;
      }
      else {
        uVar3 = 5;
      }
    }
    else {
      uVar3 = 5;
    }
  }
  else {
    if (pauseSubMenuId == 1) {
      if (pauseMenuCurrentItem != 2) {
        return;
      }
      FUN_8007913c();
      return;
    }
    sVar1 = (short)param_1;
    if (pauseSubMenuId == 2) {
      iVar5 = 9;
      do {
        RenderPauseMenuText(iVar5,iVar5 + -9,param_1);
        iVar5 = iVar5 + 1;
      } while (iVar5 < 0xf);
      RenderPauseMenuText(displayMap + 0x14,0,param_1);
      RenderPauseMenuText(cameraMode + 0x16,1,param_1);
      RenderPauseMenuText(vibrationFlag + 0x18,2,param_1);
      uVar4 = 0;
      if (pauseMenuCurrentItem == 3) {
        uVar4 = (uint)((menuAnimation & 0x1f) < 0x16);
      }
      DrawNumberSmall(DAT_80067060,(uint)(byte)(&DAT_80063b44)[DAT_80067118 * 0x22],0x43 - sVar1,
                      uVar4 | 2);
      uVar4 = 0;
      if (pauseMenuCurrentItem == 4) {
        uVar4 = (uint)((menuAnimation & 0x1f) < 0x16);
      }
      DrawNumberSmall(DAT_80067064,(uint)(byte)(&DAT_80063b44)[DAT_80067118 * 0x22],0x51 - sVar1,
                      uVar4 | 2);
      return;
    }
    if (pauseSubMenuId == 3) {
      iVar5 = 0xf;
      if (pauseMenuCurrentItem == 2) {
        settingsSoundVolume = DAT_8006716c;
      }
      do {
        RenderPauseMenuText(iVar5,iVar5 + -0xf,param_1);
        iVar5 = iVar5 + 1;
      } while (iVar5 < 0x14);
      RenderPauseMenuText(enableVoiceAudio + 0x1a,0,param_1);
      if (settingsSoundVolume == 0) {
        RenderPauseMenuText(0x1c,1,param_1);
      }
      else {
        iVar5 = 0;
        if (0 < settingsSoundVolume) {
          iVar6 = 0;
          do {
            uVar4 = 0;
            if (pauseMenuCurrentItem == 1) {
              uVar4 = (uint)((menuAnimation & 0x1f) < 0x16);
            }
            RenderText(string_VolumeIBar,(uint)(byte)(&DAT_80063b48)[DAT_80067118 * 0x22] + iVar6,
                       0x2d - sVar1,uVar4 | 2,(TextConfig *)0x0);
            iVar5 = iVar5 + 1;
            iVar6 = iVar6 + 6;
          } while (iVar5 < settingsSoundVolume);
        }
      }
      if (settingsMusicVolume == 0) {
        RenderPauseMenuText(0x1d,2,param_1);
      }
      else {
        iVar5 = 0;
        if (0 < settingsMusicVolume) {
          iVar6 = 0;
          do {
            uVar4 = 0;
            if (pauseMenuCurrentItem == 2) {
              uVar4 = (uint)((menuAnimation & 0x1f) < 0x16);
            }
            RenderText(string_VolumeIBar,(uint)(byte)(&DAT_80063b49)[DAT_80067118 * 0x22] + iVar6,
                       0x3d - sVar1,uVar4 | 2,(TextConfig *)0x0);
            iVar5 = iVar5 + 1;
            iVar6 = iVar6 + 6;
          } while (iVar5 < settingsMusicVolume);
        }
      }
      RenderPauseMenuText(0x1f - speakerSetup,3,param_1);
      if (pauseMenuCurrentItem != 2) {
        return;
      }
      settingsSoundVolume = 10;
      return;
    }
    if (pauseSubMenuId != 4) {
      return;
    }
    RenderPauseMenuText(8,0xffffffff,param_1);
    DrawShadowedOrangeLine(0x60,0x3c - sVar1,0x9e,0x3c - sVar1);
    RenderPauseMenuText(0x20,0,param_1);
    uVar2 = 0x21;
    uVar3 = 1;
  }
  RenderPauseMenuText(uVar2,uVar3,param_1);
                    // WARNING: Read-only address (ram,0x80067118) is written
  return;
}



void RenderMenuGuidebook(int param_1)

{
  undefined1 *puVar1;
  undefined1 *puVar2;
  undefined1 *puVar3;
  byte *pbVar4;
  uint uVar5;
  undefined4 uVar6;
  int iVar7;
  int iVar8;
  
  iVar7 = 0;
  do {
    puVar1 = &DAT_800639b9 + iVar7;
    puVar2 = &DAT_800639ba + iVar7;
    puVar3 = &DAT_800639bb + iVar7;
    pbVar4 = &DAT_800639b8 + iVar7;
    iVar7 = iVar7 + 4;
    FUN_8004e238((uint)*pbVar4 + param_1 + 0x100,*puVar1,*puVar2,*puVar3);
  } while (iVar7 < 0xc4);
  if (((menuAnimation & 1) != 0) && (DAT_80067690 = DAT_80067690 + -1, DAT_80067690 < 1)) {
    uVar5 = rand();
    DAT_80067690 = (uVar5 & 0x3f) + 0x28;
  }
  iVar7 = 1;
  if ((DAT_80067690 < 6) && (iVar7 = DAT_80067690, 3 < DAT_80067690)) {
    iVar7 = 7 - DAT_80067690;
  }
  FUN_8004e238(param_1 + 0x16a,0x30,0xffffffe0,9);
  FUN_8004e238((uint)(byte)(&DAT_800634e8)[iVar7] + param_1 + 0x16a,
               (byte)(&DAT_800634f4)[iVar7] + 0x30,-0x21 - iVar7,10);
  FUN_8004e238(param_1 + 0x136,0x4a,-((clock >> 2) % 6 + 0xc),1);
  iVar7 = param_1 + 0x1ac;
  if (9 < orbsCollectedCount) {
    iVar7 = param_1 + 0x19e;
  }
  FUN_8004e238(iVar7,0x47,0x15,0);
  iVar7 = GetTextWidth((&PTR_s_Summer_Forest_800649b4)[DAT_80067118 * 0x20 + g_currLevelID]);
  RenderText2((&PTR_s_Summer_Forest_800649b4)[DAT_80067118 * 0x20 + g_currLevelID],
              param_1 - ((iVar7 >> 1) + -0x18e),0x6b,2,(int *)0x1);
  if ((((int)currentLoadedLevel < 0x32) && ((int)currentLoadedLevel % 10 - 1U < 4)) &&
     (FUN_8004e238(param_1 + 0x178,0x78,0x18,0), worldsCompleted[g_currLevelID] != false)) {
    FUN_8004e238(param_1 + 0x178,0x78,0x17,0);
  }
  iVar8 = 0;
  iVar7 = param_1 + 400 + (uint)maxOrbsOfWorlds[g_currLevelID] * -0x16;
  if (maxOrbsOfWorlds[g_currLevelID] != 0) {
    do {
      uVar6 = 0x15;
      if (((int)(uint)orbsCollectedFlags[g_currLevelID] >>
           ((byte)(&DAT_80064854)[iVar8 + g_currLevelID * 4] & 0x1f) & 1U) == 0) {
        uVar6 = 0x16;
      }
      FUN_8004e238(iVar7,0xc0,uVar6,0);
      iVar8 = iVar8 + 1;
      iVar7 = iVar7 + 0x2c;
    } while (iVar8 < (int)(uint)maxOrbsOfWorlds[g_currLevelID]);
  }
  FUN_8004e238(param_1 + 0x136,0x97,-((clock >> 2) % 6 + 0xc),1);
  FUN_8004e238(param_1 + 0x136,0xaa,-((clock >> 2) % 3 + 0x14),1);
  DrawNumberSmall(lives,param_1 + 0x19e,0x3d,2);
  DrawNumberSmall(gemsCollectedNetValue,param_1 + 0x15c,0x50,2);
  DrawNumberSmall(orbsCollectedCount,-0x1e4 - param_1,0x50,2);
  DrawNumberSmall((uint)(byte)maxGemsOfWorlds[g_currLevelID] * 100,param_1 + 0x1b4,0x9d,2);
  RenderText2(string_GuidebookSlash,param_1 + 0x1a5,0x9d,2,(int *)0x0);
  DrawNumberSmall(worldGemsCollectedValue[g_currLevelID],-0x1a0 - param_1,0x9d,2);
  DrawNumberSmall((uint)(byte)maxSpiritParticlesOfWorlds[g_currLevelID],param_1 + 0x1b4,0xaf,2);
  RenderText2(string_GuidebookSlash,param_1 + 0x1a5,0xaf,2,(int *)0x0);
  DrawNumberSmall(SpiritParticles,-0x1a0 - param_1,0xaf,2);
  return;
}



void FUN_8004f200(void)

{
  byte *pbVar1;
  undefined1 *puVar2;
  undefined1 *puVar3;
  undefined1 *puVar4;
  int iVar5;
  
  iVar5 = 0;
  do {
    pbVar1 = &DAT_80063bfa + iVar5;
    puVar2 = &DAT_80063bf8 + iVar5;
    puVar3 = &DAT_80063bf9 + iVar5;
    puVar4 = &DAT_80063bfb + iVar5;
    iVar5 = iVar5 + 4;
    FUN_8004e238(*puVar2,*puVar3,~(uint)*pbVar1,*puVar4);
  } while (iVar5 < 0x80);
  return;
}



void FUN_8004f26c(void)

{
  byte *pbVar1;
  byte *pbVar2;
  undefined1 *puVar3;
  undefined1 *puVar4;
  int iVar5;
  
  iVar5 = 0;
  do {
    pbVar1 = &DAT_80063c78 + iVar5;
    pbVar2 = &DAT_80063c7a + iVar5;
    puVar3 = &DAT_80063c79 + iVar5;
    puVar4 = &DAT_80063c7b + iVar5;
    iVar5 = iVar5 + 4;
    FUN_8004e238(*pbVar1 | 0x100,*puVar3,~(uint)*pbVar2,*puVar4);
  } while (iVar5 < 0x80);
  return;
}



void FUN_8004f2dc(void)

{
  byte *pbVar1;
  undefined1 *puVar2;
  undefined1 *puVar3;
  undefined1 *puVar4;
  int iVar5;
  
  iVar5 = 0;
  do {
    pbVar1 = &DAT_80063cfa + iVar5;
    puVar2 = &DAT_80063cf8 + iVar5;
    puVar3 = &DAT_80063cf9 + iVar5;
    puVar4 = &DAT_80063cfb + iVar5;
    iVar5 = iVar5 + 4;
    FUN_8004e238(*puVar2,*puVar3,~(uint)*pbVar1,*puVar4);
  } while (iVar5 < 0xa0);
  return;
}



void FUN_8004f348(void)

{
  byte *pbVar1;
  byte *pbVar2;
  undefined1 *puVar3;
  undefined1 *puVar4;
  int iVar5;
  
  iVar5 = 0;
  do {
    pbVar1 = &DAT_80063d98 + iVar5;
    pbVar2 = &DAT_80063d9a + iVar5;
    puVar3 = &DAT_80063d99 + iVar5;
    puVar4 = &DAT_80063d9b + iVar5;
    iVar5 = iVar5 + 4;
    FUN_8004e238(*pbVar1 | 0x100,*puVar3,~(uint)*pbVar2,*puVar4);
  } while (iVar5 < 0xa0);
  return;
}



void FUN_8004f3b8(int param_1)

{
  DAT_80069924 = primitiveBuffer_next;
  if (param_1 != 0) {
    FUN_8004f200();
  }
  FUN_8004f2dc();
  FUN_8004bf94(DAT_80069924,(byte)(&DAT_80063870)[menuAnimation % 0xc] + 0xc0);
  DAT_80069924 = primitiveBuffer_next;
  FUN_8004f348();
  FUN_8004bf94(DAT_80069924,(&DAT_80063870)[menuAnimation % 0xc]);
  return;
}



void FUN_8004f4a8(int param_1)

{
  undefined4 uVar1;
  undefined4 uVar2;
  int iVar3;
  
  FUN_8004f2dc();
  FUN_8004e238(0x50,0x1a,9,0);
  FUN_8004e238(0xa6,0x1a,param_1 + 0xb,0);
  FUN_8004e238(0x70,0x29,0x10,0);
  iVar3 = 0xb6;
  if ((param_1 == 0) && (worldsEntered[9] != false)) {
    FUN_8004e238(0x3c,0xca,7,0);
    iVar3 = 0xa2;
    if (0x15 < (menuAnimation & 0x1f)) goto LAB_8004f69c;
    uVar1 = 0xd8;
    if (DAT_80067118 == 4) {
      uVar1 = 0xde;
    }
    uVar2 = 0xf;
  }
  else if (param_1 == 1) {
    iVar3 = 0xa2;
    uVar1 = 0xb6;
    if (worldsEntered[21] == false) {
      uVar1 = 0xca;
    }
    FUN_8004e238(0x3c,uVar1,6,0);
    if ((menuAnimation & 0x1f) < 0x16) {
      uVar1 = 0xb6;
      if (worldsEntered[21] == false) {
        uVar1 = 0xca;
      }
      FUN_8004e238(0x2c,uVar1,0xe,0);
    }
    if (worldsEntered[21] == false) goto LAB_8004f69c;
    FUN_8004e238(0x3c,0xca,8,0);
    iVar3 = 0x8e;
    if (0x15 < (menuAnimation & 0x1f)) goto LAB_8004f69c;
    uVar1 = 0xd8;
    uVar2 = 0xf;
  }
  else {
    if (param_1 != 2) goto LAB_8004f69c;
    FUN_8004e238(0x3c,0xca,7,0);
    iVar3 = 0xa2;
    if (0x15 < (menuAnimation & 0x1f)) goto LAB_8004f69c;
    uVar1 = 0x2c;
    if (DAT_80067118 == 4) {
      uVar1 = 0x26;
    }
    uVar2 = 0xe;
  }
  FUN_8004e238(uVar1,0xca,uVar2,0);
LAB_8004f69c:
  FUN_8004e238(0x5c,iVar3,3,0);
  FUN_8004e238(0x5c,iVar3 + 0x14,4,0);
  FUN_8004e238(0x3c,(iVar3 >> 1) + -0x18,param_1,0);
  return;
}



void FUN_8004f6f4(int param_1)

{
  int value;
  char *text;
  uint uVar1;
  int colorIndex;
  short screenPosY;
  uint uVar2;
  uint uVar3;
  
  FUN_8004f348();
  FUN_8004e238(0x144,0x1a,5,0);
  FUN_8004e238(0x154,0x29,0x10,0);
  uVar3 = 0;
  screenPosY = (byte)(&DAT_80066e68)[param_1] + 1;
  if ((&DAT_80066e60)[param_1] != '\0') {
    do {
      uVar2 = (uint)(byte)(&DAT_80063ea0)[(byte)(&DAT_80066e64)[param_1] + uVar3];
      if ((worldsEntered[uVar2] != false) || ((uint)LoadedLevelIDAsBytesArray[uVar2] % 10 < 5)) {
        uVar1 = 0;
        if (DAT_80069900 == uVar3) {
          uVar1 = (uint)((menuAnimation & 0x1f) < 0x16);
        }
        colorIndex = uVar1 + 8;
        if ((colorIndex == 8) && ((uVar3 & 1) != 0)) {
          colorIndex = 0xc;
        }
        if (worldsEntered[uVar2] == false) {
          text = "----------";
        }
        else {
          text = (&PTR_s_Summer_Forest_800649b4)[DAT_80067118 * 0x20 + uVar2];
        }
        RenderText2(text,0x10f,screenPosY,colorIndex,(int *)(uint)(worldsEntered[uVar2] != false));
        value = CalculateLevelPercentage(uVar2);
        DrawNumberSmall_Right(value,0x1d2,screenPosY,colorIndex);
        RenderText2(string__,0x1d4,screenPosY,colorIndex,(int *)0x0);
        if (param_1 == 1) {
          screenPosY = screenPosY + 0xe;
        }
        else {
          screenPosY = screenPosY + 0xf;
        }
      }
      uVar3 = uVar3 + 1;
    } while ((int)uVar3 < (int)(uint)(byte)(&DAT_80066e60)[param_1]);
  }
  if ((((pauseSubMenuId == 2) && (totalSkillPoints != 0)) &&
      (globalProgressFlags.extendedSparxRange.isPayed != 0)) &&
     (FUN_8004e238(0x134,0xca,10,0), (menuAnimation & 0x1f) < 0x16)) {
    FUN_8004e238(0x1b8,0xca,0xf,0);
  }
  return;
}



void FUN_8004f994(void)

{
  byte bVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  
  bVar1 = LoadedLevelIDAsBytesArray[DAT_80069904];
  FUN_8004f2dc();
  FUN_8004e238(0x28,0x1c,0,0);
  if (((uint)bVar1 % 10 - 1 < 4) && (DAT_80069904 < 0x15)) {
    FUN_8004e238(0x24,0x67,7,0);
    FUN_8004e238(0x24,0xb6,8,0);
    FUN_8004e238(0x4c,0x6e,3,0);
    FUN_8004e238(0x2a,0x86,worldsCompleted[DAT_80069904] + 0xd,0);
    uVar2 = 0x68;
    uVar3 = 0x86;
  }
  else {
    FUN_8004e238(0x24,0x6b,7,0);
    FUN_8004e238(0x24,0xb2,8,0);
    uVar2 = 0x48;
    uVar3 = 0x7b;
  }
  FUN_8004e238(uVar2,uVar3,0xf,0);
  FUN_8004e238(0x5c,200,6,0);
  if ((menuAnimation & 0x1f) < 0x13) {
    if (-1 < DAT_80069908) {
      FUN_8004e238(0x24,200,0x10,0);
    }
    if (-1 < DAT_8006990c) {
      FUN_8004e238(0xda,200,0x11,0);
    }
  }
  return;
}



void FUN_8004fb48(void)

{
  char **ppcVar1;
  uint uVar2;
  char *text;
  undefined4 uVar3;
  int iVar4;
  short screenPosY;
  uint uVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  
  uVar2 = (uint)LoadedLevelIDAsBytesArray[DAT_80069904] % 10;
  FUN_8004f348();
  if (maxGemsOfWorlds[DAT_80069904] != '\0') {
    uVar5 = -(uint)(worldGemsCollectedValue[DAT_80069904] < 100) & 0xc;
    if (worldGemsCollectedValue[DAT_80069904] < 10) {
      uVar5 = uVar5 + 0xc;
    }
    FUN_8004e238(((int)uVar5 >> 1) + 0x112,0x1a,-((clock >> 2) % 6 + 0xc),1);
    FUN_8004e544(0x1c4 - uVar5,0x1c,(uint)(byte)maxGemsOfWorlds[DAT_80069904] * 100);
    FUN_8004e238(0x181 - uVar5,0x1c,0xfffffff5,2);
    FUN_8004e544(0x167 - uVar5,0x1c,worldGemsCollectedValue[DAT_80069904]);
  }
  if (uVar2 < 6) {
    iVar8 = 0x34;
    if (uVar2 == 5) {
      iVar8 = 0x98;
    }
    FUN_8004e238(0x136,iVar8 + 7,4,0);
    FUN_8004e238(0x112,iVar8,7,0);
    FUN_8004e238(0x112,0xd0,8,0);
    iVar6 = 0;
    if (maxOrbsOfWorlds[DAT_80069904] != 0) {
      iVar7 = 0x1d;
      iVar9 = 0x20;
      do {
        uVar3 = 1;
        uVar5 = (uint)orbsCollectedFlags[DAT_80069904] &
                1 << ((byte)(&DAT_80064854)[iVar6 + DAT_80069904 * 4] & 0x1f);
        if (uVar5 == 0) {
          uVar3 = 2;
        }
        FUN_8004e238(0x11a,iVar8 + iVar9,uVar3,0);
        if (uVar5 == 0) {
          iVar4 = 5;
        }
        else {
          iVar4 = iVar6 + 9;
        }
        FUN_8004e238(0x14e,iVar8 + iVar7,iVar4,0);
        iVar7 = iVar7 + 0x22;
        iVar6 = iVar6 + 1;
        iVar9 = iVar9 + 0x22;
      } while (iVar6 < (int)(uint)maxOrbsOfWorlds[DAT_80069904]);
    }
  }
  if (uVar2 == 5) {
    FUN_8004e238(0x112,0x34,7,0);
    FUN_8004e238(0x112,0x86,8,0);
    iVar6 = 0;
    screenPosY = 0x3c;
    iVar8 = 0;
    iVar7 = (LoadedLevelIDAsBytesArray[DAT_80069904] / 10 - 2) * 0x58;
    do {
      if (iVar6 < 4) {
        text = *(char **)((int)&PTR_s_Rings_80061930 + iVar8 + DAT_80067118 * 0x10 + iVar7);
      }
      else {
        text = (&PTR_s_All_In_One_80061b04)[DAT_80067118];
      }
      RenderText2(text,0x11e,screenPosY,8,(int *)0x1);
      if (*(int *)((int)&DAT_80061950 + iVar8 + iVar7) == 0) {
        iVar9 = GetTextWidth((&PTR_s_No_80061b84)[DAT_80067118]);
        ppcVar1 = &PTR_s_No_80061b84 + DAT_80067118;
      }
      else {
        iVar9 = GetTextWidth((&PTR_s_Yes_80061b80)[DAT_80067118]);
        ppcVar1 = &PTR_s_Yes_80061b80 + DAT_80067118;
      }
      RenderText2(*ppcVar1,0x1c2 - (iVar9 >> 1),screenPosY,8,(int *)0x0);
      screenPosY = screenPosY + 0x10;
      iVar6 = iVar6 + 1;
      iVar8 = iVar8 + 4;
    } while (iVar6 < 5);
  }
  if (uVar2 == 6) {
    FUN_8004e238(0x112,0x30,7,0);
    FUN_8004e238(0x112,0xb8,8,0);
    FUN_8004e238(0x136,0x40,0x13,0);
    FUN_8004e238(0x136,0x5c,0x12,0);
    FUN_8004e238(0x116,0xa0,0x15 - (uint)worldsCompleted[DAT_80069904],0);
  }
  return;
}



void FUN_8005004c(int param_1)

{
  int iVar1;
  uint uVar2;
  short screenPosY;
  
  FUN_8004f2dc();
  FUN_8004e238(0x50,0x14,10,0);
  screenPosY = 0x34;
  uVar2 = 0;
  iVar1 = 0;
  do {
    if (((&skillPointFlags.skelosCacti)[iVar1] & 2U) != 0) {
      if (param_1 == 0) {
        if ((int)uVar2 < 10) goto LAB_800500d4;
      }
      else {
        if ((int)uVar2 < 10) {
          uVar2 = uVar2 + 1;
          goto LAB_80050120;
        }
LAB_800500d4:
        RenderText2((&PTR_s_Summer_Forest_800649b4)
                    [DAT_80067118 * 0x20 + (uint)(byte)(&DAT_80064770)[iVar1]],0x28,screenPosY,
                    (uVar2 & 1) << 2 | 8,(int *)0x1);
        screenPosY = screenPosY + 0xe;
      }
      uVar2 = uVar2 + 1;
    }
LAB_80050120:
    iVar1 = iVar1 + 1;
    if (0x13 < iVar1) {
      FUN_8004e238(0x5c,0xca,6,0);
      if ((((menuAnimation & 0x1f) < 0x16) && (FUN_8004e238(0x2c,0xca,0x10,0), param_1 < 1)) &&
         (10 < totalSkillPoints)) {
        FUN_8004e238(0xd8,0xca,0x11,0);
      }
      return;
    }
  } while( true );
}



void FUN_800501c0(int param_1)

{
  uint uVar1;
  int iVar2;
  undefined **ppuVar3;
  short screenPosY;
  
  FUN_8004f348();
  FUN_8004e238(0x134,0x14,0xb,0);
  screenPosY = 0x34;
  uVar1 = 0;
  iVar2 = 0;
  ppuVar3 = &PTR_s_All_Cacti_80064720;
  do {
    if (((&skillPointFlags.skelosCacti)[iVar2] & 2U) != 0) {
      if (param_1 == 0) {
        if ((int)uVar1 < 10) goto LAB_80050248;
      }
      else {
        if ((int)uVar1 < 10) {
          uVar1 = uVar1 + 1;
          goto LAB_80050270;
        }
LAB_80050248:
        RenderText2(*ppuVar3,0x114,screenPosY,(uVar1 & 1) << 2 | 8,(int *)0x1);
        screenPosY = screenPosY + 0xe;
      }
      uVar1 = uVar1 + 1;
    }
LAB_80050270:
    iVar2 = iVar2 + 1;
    ppuVar3 = ppuVar3 + 1;
    if (0x13 < iVar2) {
      if (7 < totalSkillPoints) {
        FUN_8004e238(0x134,0xc2,9,0);
      }
      if ((0xf < totalSkillPoints) && (param_1 == 1)) {
        FUN_8004e238(0x134,0x9a,0xc,0);
      }
      return;
    }
  } while( true );
}



undefined4 * FUN_800502fc(Vec3 *param_1,undefined param_2,int param_3,uint param_4)

{
  VectorShort *pVVar1;
  uint *puVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  undefined4 *puVar6;
  
  pVVar1 = (VectorShort *)&DAT_8006a2b8;
  puVar6 = &DAT_8006a2b4;
  puVar2 = &DAT_8006a2e0;
  iVar4 = 0;
  do {
    if (*(int *)((int)&DAT_8006a2b4 + iVar4) == 0) {
      *(Vec3 **)((int)&DAT_8006a2b4 + iVar4) = param_1;
      if (param_3 < 0) {
        *(undefined *)((int)&DAT_8006a2dc + iVar4 + 3) = 1;
        param_3 = -param_3;
      }
      else {
        *(undefined *)((int)&DAT_8006a2dc + iVar4 + 3) = 0;
      }
      iVar5 = param_3;
      if (param_3 < 2) {
        iVar5 = 2;
      }
      if (6 < param_3) {
        iVar5 = 6;
      }
      iVar3 = 0;
      if (0 < iVar5) {
        do {
          if (*(char *)((int)&DAT_8006a2dc + iVar4 + 3) == '\0') {
            VecIntToShort(pVVar1,param_1);
          }
          else {
            CopyVectorShort(pVVar1,(VectorShort *)param_1);
          }
          iVar3 = iVar3 + 1;
          pVVar1 = pVVar1 + 1;
        } while (iVar3 < iVar5);
      }
      *(undefined *)((int)&DAT_8006a2dc + iVar4) = 0;
      *(char *)((int)&DAT_8006a2dc + iVar4 + 1) = (char)iVar5;
      *(undefined *)((int)&DAT_8006a2dc + iVar4 + 2) = param_2;
      *puVar2 = param_4 | 0x3e000000;
      return puVar6;
    }
    puVar6 = puVar6 + 0xc;
    puVar2 = puVar2 + 0xc;
    iVar4 = iVar4 + 0x30;
    pVVar1 = pVVar1 + 8;
  } while ((int)puVar2 < -0x7ff95720);
  return (undefined4 *)0x0;
}



void FUN_800504a0(undefined4 *param_1)

{
  *param_1 = 0;
  return;
}



void FUN_800504a8(void)

{
  char cVar1;
  undefined *puVar2;
  undefined4 *puVar3;
  Vec3 **ppVVar4;
  int iVar5;
  int iVar6;
  
  iVar6 = 0;
  puVar2 = &DAT_8006a2b8;
  ppVVar4 = (Vec3 **)&DAT_8006a2b4;
  puVar3 = &DAT_8006a2dc;
  iVar5 = 0;
  do {
    if (*ppVVar4 != (Vec3 *)0x0) {
      cVar1 = *(char *)puVar3;
      *(byte *)puVar3 = cVar1 + 1U;
      if (*(byte *)((int)&DAT_8006a2dc + iVar5 + 1) <= (byte)(cVar1 + 1U)) {
        *(undefined *)puVar3 = 0;
      }
      if (*(char *)((int)&DAT_8006a2dc + iVar5 + 3) == '\0') {
        VecIntToShort((VectorShort *)(puVar2 + (uint)*(byte *)puVar3 * 6),*ppVVar4);
      }
      else {
        CopyVectorShort((VectorShort *)(puVar2 + (uint)*(byte *)puVar3 * 6),(VectorShort *)*ppVVar4)
        ;
      }
    }
    ppVVar4 = ppVVar4 + 0xc;
    puVar3 = puVar3 + 0xc;
    puVar2 = puVar2 + 0x30;
    iVar6 = iVar6 + 1;
    iVar5 = iVar5 + 0x30;
  } while (iVar6 < 0x20);
  return;
}



int * FUN_800505b8(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                  undefined4 param_5)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  int iVar4;
  
  iVar4 = 0;
  piVar2 = &DAT_80069f30;
  iVar1 = 0;
  piVar3 = piVar2;
  do {
    if (*piVar2 == 0) {
      *piVar2 = param_1;
      *(undefined4 *)((int)&DAT_80069f34 + iVar1) = param_2;
      *(undefined4 *)((int)&DAT_80069f38 + iVar1) = param_3;
      *(undefined4 *)((int)&DAT_80069f3c + iVar1) = param_4;
      *(undefined4 *)((int)&DAT_80069f40 + iVar1) = param_5;
      return piVar3;
    }
    piVar3 = piVar3 + 5;
    piVar2 = piVar2 + 5;
    iVar4 = iVar4 + 1;
    iVar1 = iVar1 + 0x14;
  } while (iVar4 < 8);
  return (int *)0x0;
}



void SetToZero(undefined4 *param_1)

{
  *param_1 = 0;
  return;
}



undefined4 FUN_80050648(int param_1,int param_2)

{
  char cVar1;
  undefined4 uVar2;
  
  cVar1 = *(char *)((int)&objectModels[*(short *)(param_1 + 0x36)]->field1_0x4 + param_2);
  uVar2 = 0xffffffff;
  if ((cVar1 != -1) && (uVar2 = 0xffffffff, *(char *)(param_1 + 0x4b) != '\0')) {
    uVar2 = PlayAudio(cVar1,param_1);
  }
  return uVar2;
}



undefined4 FUN_800506ac(int param_1,int param_2)

{
  undefined4 uVar1;
  
  if ((*(char *)(DAT_800670c0 + param_2) == -1) ||
     ((param_1 != 0 && (*(char *)(param_1 + 0x4b) == '\0')))) {
    uVar1 = 0xffffffff;
  }
  else {
    uVar1 = PlayAudio(*(undefined *)(DAT_800670c0 + param_2),param_1);
  }
  return uVar1;
}



int PlayAudio(int param_1,int param_2,byte param_3)

{
  ushort uVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  if (param_1 == 0xff) {
LAB_80050884:
    iVar2 = -1;
  }
  else {
    if ((*(char *)(param_1 * 0x14 + DAT_80067068 + 0x10) != '\0') && ((param_3 & 4) == 0)) {
      return -1;
    }
    if (settingsSoundVolume == 0) {
      return -1;
    }
    if ((DAT_80066ff8 != 0) && ((param_3 & 0x40) == 0)) {
      return -1;
    }
    if ((((param_3 & 1) == 0) && (param_2 != 0)) &&
       (iVar2 = FUN_80051548(param_1,param_2 + 0xc), iVar2 == 0)) {
      return -1;
    }
    iVar2 = 0;
    iVar4 = 0;
    do {
      if ((&DAT_80069a10)[iVar4] == '\0') break;
      iVar2 = iVar2 + 1;
      iVar4 = iVar4 + 0x2c;
    } while (iVar2 < 0x18);
    if (iVar2 == 0x18) {
      iVar4 = 0xfe;
      iVar2 = -1;
      iVar6 = 0;
      iVar5 = 0;
      do {
        if (*(int *)((int)&DAT_80069a14 + iVar5) < iVar4) {
          iVar4 = *(int *)((int)&DAT_80069a14 + iVar5);
          iVar2 = iVar6;
        }
        iVar6 = iVar6 + 1;
        iVar5 = iVar5 + 0x2c;
      } while (iVar6 < 0x18);
      if ((iVar2 < 0) || ((int)(uint)*(byte *)(param_1 * 0x14 + DAT_80067068 + 0x11) <= iVar4))
      goto LAB_80050884;
    }
    iVar6 = iVar2 * 0x2c;
    (&DAT_80069a10)[iVar6] = 1;
    (&DAT_80069a11)[iVar6] = (char)param_1;
    (&DAT_80069a12)[iVar6] = param_3;
    iVar4 = settingsSoundVolume;
    iVar5 = param_1 * 0x14 + DAT_80067068;
    iVar7 = (uint)*(ushort *)(iVar5 + 6) * settingsSoundVolume;
    (&DAT_80069a1c)[iVar2 * 0xb] = 0x1000;
    (&DAT_80069a18)[iVar2 * 0xb] = iVar7 / 10;
    (&DAT_80069a20)[iVar2 * 0xb] = (int)((uint)*(ushort *)(iVar5 + 6) * iVar4) / 10;
    uVar1 = *(ushort *)(iVar5 + 6);
    (&DAT_80069a38)[iVar2 * 0xb] = param_2;
    (&DAT_80069a24)[iVar2 * 0xb] = (int)((uint)uVar1 * iVar4) / 10;
    (&DAT_80069a13)[iVar6] = *(undefined *)(iVar5 + 0x10);
    iVar4 = param_1 * 0x14 + DAT_80067068;
    (&DAT_80069a14)[iVar2 * 0xb] = (uint)*(byte *)(iVar4 + 0x11);
    if ((uint)*(ushort *)(iVar4 + 0xc) == (uint)*(ushort *)(iVar4 + 0xe)) {
      (&DAT_80069a28)[iVar2 * 0xb] = (uint)*(ushort *)(iVar4 + 0xe);
    }
    else {
      uVar3 = randomRangeGen((uint)*(ushort *)(iVar4 + 0xc));
      (&DAT_80069a28)[iVar2 * 0xb] = uVar3;
    }
  }
  return iVar2;
}



void FUN_80050a40(int param_1)

{
  int iVar1;
  
  iVar1 = param_1 * 0x2c;
  if ((&DAT_80069a10)[iVar1] == '\x01') {
    (&DAT_80069a10)[iVar1] = 5;
  }
  else if ((&DAT_80069a10)[iVar1] == '\x02') {
    (&DAT_80069a10)[iVar1] = 3;
    (&DAT_80069a14)[param_1 * 0xb] = 0;
  }
  return;
}



void FUN_80050aac(void)

{
  int iVar1;
  int iVar2;
  
  iVar1 = 0;
  iVar2 = 0;
  DAT_80066ff8 = 1;
  do {
    if ((byte)(&DAT_80069a10)[iVar2] - 1 < 2) {
      FUN_80050a40(iVar1);
    }
    iVar1 = iVar1 + 1;
    iVar2 = iVar2 + 0x2c;
  } while (iVar1 < 0x18);
  return;
}



bool FUN_80050b20(uint param_1,int param_2)

{
  bool bVar1;
  
  bVar1 = false;
  if ((-1 < param_2) && ((byte)(&DAT_80069a11)[param_2 * 0x2c] == param_1)) {
    bVar1 = (byte)(&DAT_80069a10)[param_2 * 0x2c] - 1 < 2;
  }
  return bVar1;
}



bool FUN_80050b74(int param_1,int param_2)

{
  bool bVar1;
  
  bVar1 = false;
  if ((-1 < param_2) && ((&DAT_80069a38)[param_2 * 0xb] == param_1)) {
    bVar1 = (byte)(&DAT_80069a10)[param_2 * 0x2c] - 1 < 2;
  }
  return bVar1;
}



void FUN_80050bc8(int param_1,Vec3 *param_2)

{
  int iVar1;
  
  iVar1 = param_1 * 0x2c;
  if (((&DAT_80069a38)[param_1 * 0xb] != 0) && ((byte)(&DAT_80069a10)[iVar1] - 1 < 2)) {
    VectorCopy((Vec3 *)(&UNK_80069a2c + iVar1),param_2);
    (&DAT_80069a12)[iVar1] = (&DAT_80069a12)[iVar1] | 2;
  }
  return;
}



void FUN_80050c64(int param_1,int param_2)

{
  ushort uVar1;
  ushort uVar2;
  int iVar3;
  int iVar4;
  
  iVar4 = param_1 * 0x2c;
  iVar3 = (uint)(byte)(&DAT_80069a11)[iVar4] * 0x14 + DAT_80067068;
  uVar1 = *(ushort *)(iVar3 + 0xc);
  uVar2 = *(ushort *)(iVar3 + 0xe);
  (&DAT_80069a12)[iVar4] = (&DAT_80069a12)[iVar4] | 8;
  (&DAT_80069a28)[param_1 * 0xb] = param_2 * ((int)((uint)uVar1 + (uint)uVar2) >> 1) >> 0xc;
  return;
}



void FUN_80050cf4(int param_1,undefined4 param_2)

{
  byte bVar1;
  
  bVar1 = (&DAT_80069a12)[param_1 * 0x2c];
  (&DAT_80069a1c)[param_1 * 0xb] = param_2;
  (&DAT_80069a12)[param_1 * 0x2c] = bVar1 | 0x10;
  return;
}



void FUN_80050d38(void)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  ulong voice_bit;
  char *pcVar5;
  ulong voice_bit_00;
  char local_c0 [24];
  SpuVoiceAttr local_a8;
  SpuVoiceAttr local_68;
  
  voice_bit_00 = 0;
  voice_bit = 0;
  FUN_8005a3fc(local_c0);
  uVar4 = 0;
  pcVar5 = &DAT_80069a10;
  iVar3 = 0;
  do {
    switch(*pcVar5) {
    case '\0':
      if ((local_c0[uVar4] == '\x01') || (local_c0[uVar4] == '\x03')) {
LAB_80050e2c:
        voice_bit = voice_bit | 1 << (uVar4 & 0x1f);
        *pcVar5 = '\x05';
      }
      break;
    case '\x01':
      FUN_80050fdc(uVar4);
      if (*pcVar5 == '\x01') {
        (&DAT_80069a10)[iVar3] = 2;
        voice_bit_00 = voice_bit_00 | 1 << (uVar4 & 0x1f);
      }
      else {
        voice_bit = voice_bit | 1 << (uVar4 & 0x1f);
      }
      break;
    case '\x02':
      if (local_c0[uVar4] == '\x03') goto LAB_80050e2c;
      FUN_80050fdc(uVar4);
      break;
    case '\x03':
      local_a8.voice = 1 << (uVar4 & 0x1f);
      local_a8.mask = 0x13;
      local_a8.pitch = 0;
      iVar1 = *(int *)((int)&DAT_80069a20 + iVar3) + -0x400;
      *(int *)((int)&DAT_80069a20 + iVar3) = iVar1;
      if (iVar1 < 0) {
        *(undefined4 *)((int)&DAT_80069a20 + iVar3) = 0;
      }
      iVar1 = *(int *)((int)&DAT_80069a24 + iVar3) + -0x400;
      *(int *)((int)&DAT_80069a24 + iVar3) = iVar1;
      if (iVar1 < 0) {
        *(undefined4 *)((int)&DAT_80069a24 + iVar3) = 0;
      }
      if ((*(int *)((int)&DAT_80069a20 + iVar3) == 0) && (*(int *)((int)&DAT_80069a24 + iVar3) == 0)
         ) {
        (&DAT_80069a10)[iVar3] = 5;
        voice_bit = voice_bit | local_a8.voice;
      }
      else {
        local_a8.volume.left = (short)*(undefined4 *)((int)&DAT_80069a24 + iVar3);
        local_a8.volume.right = (short)*(undefined4 *)((int)&DAT_80069a20 + iVar3);
        SpuSetVoiceAttr(&local_a8);
      }
      break;
    case '\x04':
      uVar2 = 1 << (uVar4 & 0x1f);
      local_68.mask = 0x10;
      local_68.pitch = 0;
      local_68.voice = uVar2;
      SpuSetVoiceAttr(&local_68);
      voice_bit = voice_bit | uVar2;
      *pcVar5 = '\x05';
      break;
    case '\x05':
      voice_bit = voice_bit | 1 << (uVar4 & 0x1f);
      *pcVar5 = '\0';
    }
    pcVar5 = pcVar5 + 0x2c;
    uVar4 = uVar4 + 1;
    iVar3 = iVar3 + 0x2c;
    if (0x17 < (int)uVar4) {
      if (voice_bit_00 != 0) {
        SpuSetKey(1,voice_bit_00);
      }
      if (voice_bit != 0) {
        SpuSetKey(0,voice_bit);
      }
      DAT_80066ff8 = 0;
      return;
    }
  } while( true );
}



void FUN_80050fdc(uint param_1)

{
  int iVar1;
  int iVar2;
  SpuVoiceAttr local_48;
  
  local_48.voice = 1 << (param_1 & 0x1f);
  local_48.mask = 3;
  local_48.volume.right = (short)(&DAT_80069a18)[param_1 * 0xb];
  if ((currGameState == Dialogue) && (((&DAT_80069a12)[param_1 * 0x2c] & 0x80) == 0)) {
    local_48.volume.right = local_48.volume.right >> 2;
  }
  iVar1 = param_1 * 0x2c;
  local_48.volume.left = local_48.volume.right;
  if ((((&DAT_80069a12)[iVar1] & 1) == 0) && ((&DAT_80069a38)[param_1 * 0xb] != 0)) {
    if ((*(byte *)((&DAT_80069a38)[param_1 * 0xb] + 0x48) & 0x80) == 0) {
      FUN_80051350(&DAT_80069a10 + iVar1,&local_48);
    }
    else {
      if ((&DAT_80069a13)[iVar1] != '\0') {
        FUN_80050a40(param_1);
        return;
      }
      (&DAT_80069a12)[iVar1] = (&DAT_80069a12)[iVar1] | 1;
    }
  }
  iVar1 = param_1 * 0x2c;
  if (((&DAT_80069a12)[iVar1] & 8) != 0) {
    local_48.mask = local_48.mask | 0x10;
    local_48.pitch = (ushort)(&DAT_80069a28)[param_1 * 0xb];
    (&DAT_80069a12)[iVar1] = (&DAT_80069a12)[iVar1] & 0xf7;
  }
  if ((((&DAT_80069a38)[param_1 * 0xb] != 0) && (((&DAT_80069a12)[iVar1] & 0x21) == 0)) &&
     ((*(byte *)((&DAT_80069a38)[param_1 * 0xb] + 0x48) & 0x80) == 0)) {
    FUN_80051704(&DAT_80069a10 + iVar1,&local_48);
  }
  iVar1 = param_1 * 0x2c;
  if ((&DAT_80069a10)[iVar1] == '\x01') {
    local_48.mask = local_48.mask | 0x93;
    local_48.addr = *(ulong *)((uint)(byte)(&DAT_80069a11)[iVar1] * 0x14 + DAT_80067068);
    local_48.pitch = (ushort)(&DAT_80069a28)[param_1 * 0xb];
  }
  if (((&DAT_80069a12)[iVar1] & 0x10) != 0) {
    local_48.mask = local_48.mask | 3;
    iVar2 = (int)local_48.volume.left * (&DAT_80069a1c)[param_1 * 0xb] >> 0xc;
    iVar1 = iVar2;
    if (iVar2 < 0) {
      iVar1 = 0;
    }
    if (0x3fff < iVar2) {
      iVar1 = 0x3fff;
    }
    (&DAT_80069a24)[param_1 * 0xb] = iVar1;
    local_48.volume.left = (short)iVar1;
    iVar2 = (int)local_48.volume.right * (&DAT_80069a1c)[param_1 * 0xb] >> 0xc;
    iVar1 = iVar2;
    if (iVar2 < 0) {
      iVar1 = 0;
    }
    if (0x3fff < iVar2) {
      iVar1 = 0x3fff;
    }
    (&DAT_80069a20)[param_1 * 0xb] = iVar1;
    local_48.volume.right = (short)iVar1;
  }
  if (local_48.mask != 0) {
    SpuSetVoiceAttr(&local_48);
  }
  return;
}



void FUN_80051350(int param_1,int param_2)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  Vec3 local_20;
  
  iVar1 = FUN_80051548(*(undefined *)(param_1 + 1),*(int *)(param_1 + 0x28) + 0xc);
  *(int *)(param_1 + 8) = iVar1;
  if (iVar1 < 1) {
    FUN_80050a40((param_1 + 0x7ff965f0) * -0x45d1745d >> 2);
  }
  else {
    iVar3 = iVar1;
    if (speakerSetup != 0) {
      VectorSubtract(&local_20,(Vec3 *)(*(int *)(param_1 + 0x28) + 0xc),&cameraPosition);
      iVar1 = Atan2(local_20.x,local_20.y,1);
      uVar2 = iVar1 - VectorShort_80067ec8.Z >> 4 & 0xff;
      if (0x80 < uVar2) {
        uVar2 = uVar2 - 0x100;
      }
      iVar3 = *(int *)(param_1 + 8);
      if ((int)uVar2 < 1) {
        iVar1 = iVar3;
        if ((int)uVar2 < 0) {
          iVar3 = cosineLookupTable[uVar2 & 0xff] * iVar3;
          if (iVar3 < 0) {
            iVar3 = -iVar3;
          }
          iVar3 = iVar3 >> 0xc;
        }
      }
      else {
        iVar1 = cosineLookupTable[uVar2] * iVar3;
        if (iVar1 < 0) {
          iVar1 = -iVar1;
        }
        iVar1 = iVar1 >> 0xc;
      }
    }
    if ((currGameState == Dialogue) && ((*(byte *)(param_1 + 2) & 0x80) == 0)) {
      iVar3 = iVar3 >> 2;
      iVar1 = iVar1 >> 2;
    }
    iVar4 = iVar3;
    if (iVar3 < 0) {
      iVar4 = 0;
    }
    if (0x2fff < iVar3) {
      iVar4 = 0x2fff;
    }
    iVar3 = iVar1;
    if (iVar1 < 0) {
      iVar3 = 0;
    }
    if (0x2fff < iVar1) {
      iVar3 = 0x2fff;
    }
    *(uint *)(param_2 + 4) = *(uint *)(param_2 + 4) | 3;
    *(int *)(param_1 + 0x14) = iVar4;
    *(short *)(param_2 + 8) = (short)iVar4;
    *(int *)(param_1 + 0x10) = iVar3;
    *(short *)(param_2 + 10) = (short)iVar3;
  }
  return;
}



int FUN_80051548(int param_1,Vec3 *param_2)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  Vec3 *right;
  uint uVar6;
  uint uVar7;
  int iVar8;
  Vec3 VStack_20;
  
  if (cameraState + ~QuickAlign < 2) {
    right = &cameraPosition;
  }
  else {
    right = &Spyro.position;
  }
  VectorSubtract(&VStack_20,param_2,right);
  iVar2 = VectorLength(&VStack_20,1);
  iVar2 = iVar2 >> 2;
  if (iVar2 < 0x2000) {
    iVar5 = param_1 * 0x14 + DAT_80067068;
    uVar4 = (uint)*(ushort *)(iVar5 + 10);
    uVar6 = (uint)*(ushort *)(iVar5 + 8);
    uVar3 = 0;
    if (uVar4 != uVar6) {
      if ((int)uVar6 < iVar2) {
        if (iVar2 < (int)uVar4) {
          uVar7 = (uint)*(ushort *)(iVar5 + 6);
          iVar8 = (uVar4 - iVar2) * uVar7;
          iVar2 = uVar4 - uVar6;
          uVar3 = iVar8 / iVar2;
          if (iVar2 == 0) {
            trap(0x1c00);
          }
          if ((iVar2 == -1) && (iVar8 == -0x80000000)) {
            trap(0x1800);
          }
          uVar4 = (uint)*(ushort *)(iVar5 + 4);
          bVar1 = (int)uVar7 < (int)uVar3;
          if ((int)uVar3 < (int)uVar4) {
            bVar1 = uVar7 < uVar4;
            uVar3 = uVar4;
          }
          if (bVar1) {
            uVar3 = uVar7;
          }
        }
        else {
          uVar3 = (uint)*(ushort *)(iVar5 + 4);
        }
      }
      else {
        uVar3 = (uint)*(ushort *)(iVar5 + 6);
      }
    }
  }
  else {
    uVar3 = (uint)*(ushort *)(param_1 * 0x14 + DAT_80067068 + 4);
    if ((uVar3 == 0) || (0x23ff < iVar2)) {
      uVar3 = 0;
    }
    else {
      uVar3 = (int)((0x2400 - iVar2) * uVar3) >> 10;
    }
  }
  return (int)(uVar3 * settingsSoundVolume) / 10;
}



void FUN_80051704(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  Vec3 local_30;
  
  *(uint *)(param_2 + 4) = *(uint *)(param_2 + 4) | 0x10;
  VectorSubtract(&local_30,&Spyro.position,(Vec3 *)(*(int *)(param_1 + 0x28) + 0xc));
  iVar1 = Atan2(local_30.x,local_30.y,0);
  if ((*(byte *)(param_1 + 2) & 2) == 0) {
    iVar2 = 0;
  }
  else {
    iVar2 = Atan2(*(undefined4 *)(param_1 + 0x1c),*(undefined4 *)(param_1 + 0x20),0);
    iVar3 = VectorLength((Vec3 *)(param_1 + 0x1c),0);
    iVar2 = iVar3 * cosineLookupTable[iVar1 - iVar2 & 0xff] >> 0xc;
  }
  iVar3 = Atan2(Spyro.physicsVelocity.x,Spyro.physicsVelocity.y,0);
  iVar4 = VectorLength(&Spyro.physicsVelocity,0);
  iVar1 = *(int *)(param_1 + 0x18) *
          (((iVar4 >> 7) * (int)cosineLookupTable[(iVar1 + 0x80) - iVar3 & 0xff] >> 0xc) + 0x1000);
  iVar2 = 0x1000 - iVar2;
  uVar5 = iVar1 / iVar2;
  if (iVar2 == 0) {
    trap(0x1c00);
  }
  if ((iVar2 == -1) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  *(short *)(param_2 + 0x14) = (short)uVar5;
  iVar1 = *(int *)(param_1 + 0x18) * 0xc0;
  if ((int)(uVar5 & 0xffff) < iVar1 >> 8) {
    *(short *)(param_2 + 0x14) = (short)((uint)iVar1 >> 8);
  }
  iVar1 = *(int *)(param_1 + 0x18) * 0x140;
  if (iVar1 >> 8 < (int)(uint)*(ushort *)(param_2 + 0x14)) {
    *(short *)(param_2 + 0x14) = (short)((uint)iVar1 >> 8);
  }
  *(byte *)(param_1 + 2) = *(byte *)(param_1 + 2) & 0xfd;
  return;
}



void InitSound(void)

{
  SpuCommonAttr local_70;
  SpuVoiceAttr local_48;
  
  FUN_8005a488();
  local_70.mask = 3;
  local_70.mvol.right = 0x3ccc;
  local_70.mvol.left = 0x3ccc;
  SpuSetCommonAttr(&local_70);
  local_48.mask = 0xff13;
  local_48.volume.left = 0x2fff;
  local_48.volume.right = 0x2fff;
  local_48.pitch = 0x400;
  local_48.a_mode = 1;
  local_48.s_mode = 1;
  local_48.voice = 0xffffff;
  local_48.r_mode = 3;
  local_48.ar = 0;
  local_48.dr = 0;
  local_48.sr = 0;
  local_48.rr = 0;
  local_48.sl = 0xf;
  SpuSetVoiceAttr(&local_48);
  SpuSetKey(0,0xffffff);
  SpuSetTransferMode(0);
  return;
}



void UpdateHUDElement(HUDElement *hudElement,uint value)

{
  HUDDisplayState HVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  short sVar5;
  int iVar6;
  
  HVar1 = hudElement->displayState;
  if (HVar1 == Updating) {
    if (hudElement->field1_0x1 != 0) {
      iVar3 = (uint)(ushort)hudElement->displayTime + deltaTime;
      iVar2 = hudElement->displayNumber - value;
      if (iVar2 < 0) {
        iVar2 = -iVar2;
      }
      hudElement->displayTime = (short)iVar3;
      iVar6 = iVar3 * 0x10000 >> 0x10;
      iVar3 = 1;
      if ((5 < iVar6) || (((9 < iVar2 && (3 < iVar6)) || (0x27 < iVar2)))) {
        if (0x27 < iVar2) {
          iVar3 = 3;
        }
        uVar4 = hudElement->displayNumber;
        if (((int)uVar4 < (int)value) || (iVar3 = -iVar3, (int)value < (int)uVar4)) {
          hudElement->displayNumber = uVar4 + iVar3;
        }
        hudElement->displayTime = 0;
        if (hudElement->displayNumber == value) {
          hudElement->displayState = Held;
        }
      }
      goto LAB_80051ce8;
    }
LAB_80051bb8:
    hudElement->displayState = Disappearing;
    hudElement->displayTime = 0;
    hudElement->displayNumber = value;
    goto LAB_80051ce8;
  }
  if (HVar1 < Held) {
    if (HVar1 == Hidden) {
      if (hudElement->field1_0x1 == 0) {
        hudElement->displayNumber = value;
        goto LAB_80051ce8;
      }
      if (((((hudElement->field1_0x1 != 3) && (hudElement->displayNumber == value)) &&
           (DAT_8006768c == 0)) || ((DAT_80067100 != 0 || (DAT_8006701c != 0)))) ||
         (currGameState == Dialogue)) goto LAB_80051ce8;
      HVar1 = Appearing;
    }
    else {
      if (HVar1 != Appearing) goto LAB_80051ce8;
      iVar2 = (uint)(ushort)hudElement->displayTime + deltaTime;
      hudElement->displayTime = (short)iVar2;
      if (hudElement->field1_0x1 == 0) {
        hudElement->displayState = Disappearing;
        hudElement->displayTime = 0x30 - hudElement->displayTime;
        goto LAB_80051ce8;
      }
      if (iVar2 * 0x10000 >> 0x10 < 0x30) goto LAB_80051ce8;
      HVar1 = Updating;
      if (hudElement->displayNumber == value) {
        HVar1 = Held;
      }
    }
LAB_80051c9c:
    hudElement->displayState = HVar1;
  }
  else {
    if (HVar1 == Disappearing) {
      if (((hudElement->field1_0x1 == 0) || (hudElement->displayTime < 0x1c)) ||
         ((HVar1 = Appearing, hudElement->displayNumber == value &&
          ((HVar1 = Appearing, DAT_8006768c == 0 && (HVar1 = Appearing, hudElement->field1_0x1 != 3)
           ))))) {
        iVar2 = (uint)(ushort)hudElement->displayTime + deltaTime;
        hudElement->displayTime = (short)iVar2;
        if (0x2f < iVar2 * 0x10000 >> 0x10) {
          hudElement->displayState = Hidden;
        }
        goto LAB_80051ce8;
      }
      goto LAB_80051c9c;
    }
    if (Held < HVar1) {
      if (HVar1 == ~Hidden) {
        InitHudElement(hudElement,value);
      }
      goto LAB_80051ce8;
    }
    if (hudElement->field1_0x1 == 0) goto LAB_80051bb8;
    HVar1 = Updating;
    if (hudElement->displayNumber != value) goto LAB_80051c9c;
    sVar5 = 0x78;
    if ((HUDElement *)((int)&hudLives.displayNumber + 3) < hudElement) {
      sVar5 = 0x1e0;
    }
    if (hudElement->displayTime < sVar5) {
      hudElement->displayTime = hudElement->displayTime + (short)deltaTime;
      goto LAB_80051ce8;
    }
    if ((DAT_8006768c != 0) || (hudElement->field1_0x1 == 3)) goto LAB_80051ce8;
    hudElement->displayState = Disappearing;
  }
  hudElement->displayTime = 0;
LAB_80051ce8:
  hudElement->field1_0x1 = 0xff;
  return;
}



void InitHudElement(HUDElement *hudElement,uint value)

{
  hudElement->displayState = Hidden;
  hudElement->displayTime = 0;
  hudElement->field1_0x1 = 0xff;
  hudElement->displayNumber = value;
  return;
}



void InitHUDDisplay(void)

{
  undefined4 uVar1;
  int iVar2;
  
  iVar2 = popupLevelCompleteSequenceTime;
  uVar1 = displayMap;
  MEMSET((int *)&hudGems,0,0x7c);
  hudGems.displayState = ~Hidden;
  hudSpirits.displayState = ~Hidden;
  hudLives.displayState = ~Hidden;
  hudExtra1.displayState = ~Hidden;
  hudExtra2.displayState = ~Hidden;
  hudExtra3.displayState = ~Hidden;
  displayMap = uVar1;
  popupLevelCompleteSequenceTime = iVar2;
  return;
}



void UpdateHUD(void)

{
  uint uVar1;
  
  if ((DAT_80067100 == 0) && (DAT_8006701c == 0)) {
    UpdateHUDElement(&hudGems,gemsCollectedNetValue);
    UpdateHUDElement(&hudSpirits,SpiritParticles);
    uVar1 = hudLives.displayNumber;
    UpdateHUDElement(&hudLives,lives);
    if (((int)uVar1 < (int)hudLives.displayNumber) && (hudLives.displayState == Held)) {
      PlayAudio(*(undefined *)(audioBank + 0x1e),0,0);
    }
    if ((DAT_80067154 != (code *)0x0) && (loadingStatus < 0)) {
      (*DAT_80067154)();
    }
    if ((DAT_8006768c != 0) && (DAT_8006768c = DAT_8006768c - deltaTime, DAT_8006768c < 0)) {
      DAT_8006768c = 0;
    }
    if (popupLevelCompleteSequenceTime == 0) {
      if (((worldGemsCollectedValue[g_currLevelID] == 400) &&
          (orbsCollectedFlags[g_currLevelID] == (&orbsOfWorldsFlags)[g_currLevelID])) &&
         ((inHomeWorld != 0 || (worldsCompleted[g_currLevelID] != false)))) {
        popupLevelCompleteSequenceTime = 1;
        DAT_800676cc = 0;
        DAT_800676d0 = 0;
      }
    }
    else if (popupLevelCompleteSequenceTime < 0x96) {
      FUN_80053a24();
    }
    if ((displayMap == 0) ||
       ((popupLevelCompleteSequenceTime != 0 && (popupLevelCompleteSequenceTime < 0x96)))) {
      DAT_800676a4 = DAT_800676a4 - deltaTime;
      if (DAT_800676a4 < 0) {
        DAT_800676a4 = 0;
      }
    }
    else {
      DAT_800676a4 = DAT_800676a4 + deltaTime;
      if (0x2f < DAT_800676a4) {
        DAT_800676a4 = 0x2f;
      }
    }
    if (DAT_800676b0 == 0) {
      DAT_800676a8 = DAT_800676a8 - deltaTime;
      if (DAT_800676a8 < 0) {
        DAT_800676a8 = 0;
      }
    }
    else {
      DAT_800676a8 = DAT_800676a8 + deltaTime;
      if (0x2f < DAT_800676a8) {
        DAT_800676a8 = 0x2f;
      }
      if (*currentPowerTypeTimer < 1) {
        DAT_800676b0 = 0;
      }
    }
    if (allGemsCollectedTimer != 0) {
      allGemsCollectedTimer = allGemsCollectedTimer + -1;
    }
  }
  return;
}



uint * RenderSprite(SpriteInfo *spriteInfo,short screenPosX,short screenPosY,int spriteID)

{
  undefined *ptrPrimitive;
  byte drawCommandTri;
  undefined drawCommandQuad;
  uint *ret;
  byte spriteHeight;
  byte spriteWidth;
  
  ptrPrimitive = primitiveBuffer_next;
  if ((int)spriteInfo < 0) {
    *(undefined4 *)primitiveBuffer_next = 0x4000000;
    drawCommandTri = 0x66;
    if ((spriteInfo->clutX & 0x80) == 0) {
      drawCommandTri = 0x64;
    }
    ptrPrimitive[7] = drawCommandTri;
    ptrPrimitive[4] = 0x80;
    ptrPrimitive[5] = 0x80;
    ptrPrimitive[6] = 0x80;
    *(short *)(ptrPrimitive + 8) = screenPosX;
    *(short *)(ptrPrimitive + 10) = screenPosY;
    ptrPrimitive[0xc] = spriteInfo->X;
    ptrPrimitive[0xd] = spriteInfo->Y;
    *(ushort *)(ptrPrimitive + 0xe) =
         (spriteInfo->clutX & 3) + (ushort)spriteInfo->clutY * 64 + 0x4020;
    *(ushort *)(ptrPrimitive + 0x10) = (ushort)spriteWidths[spriteID];
    *(ushort *)(ptrPrimitive + 0x12) = (ushort)spriteHeights[spriteID];
    PrimitiveBuffer_Insert((uint *)ptrPrimitive);
    primitiveBuffer_next = ptrPrimitive + 0x14;
    ret = (uint *)ptrPrimitive;
  }
  else {
    *(undefined4 *)primitiveBuffer_next = 0x9000000;
    drawCommandQuad = 0x2e;
    if ((spriteInfo->clutX & 0x80) == 0) {
      drawCommandQuad = 0x2c;
    }
    ptrPrimitive[7] = drawCommandQuad;
    ptrPrimitive[4] = 0x80;
    ptrPrimitive[5] = 0x80;
    ptrPrimitive[6] = 0x80;
    *(short *)(ptrPrimitive + 8) = screenPosX;
    spriteWidth = spriteWidths[spriteID];
    *(short *)(ptrPrimitive + 0x18) = screenPosX;
    *(ushort *)(ptrPrimitive + 0x10) = (ushort)spriteWidth + screenPosX;
    spriteWidth = spriteWidths[spriteID];
    *(short *)(ptrPrimitive + 10) = screenPosY;
    *(short *)(ptrPrimitive + 0x12) = screenPosY;
    *(ushort *)(ptrPrimitive + 0x20) = (ushort)spriteWidth + screenPosX;
    *(ushort *)(ptrPrimitive + 0x1a) = (ushort)spriteHeights[spriteID] + screenPosY;
    spriteHeight = spriteHeights[spriteID];
    *(undefined2 *)(ptrPrimitive + 0x16) = 0x38;
    *(ushort *)(ptrPrimitive + 0x22) = (ushort)spriteHeight + screenPosY;
    *(ushort *)(ptrPrimitive + 0xe) =
         (spriteInfo->clutX & 3) + (ushort)spriteInfo->clutY * 0x40 + 0x4020;
    ptrPrimitive[0xc] = spriteInfo->X + spriteWidths[spriteID] + -1;
    ptrPrimitive[0x14] = spriteInfo->X;
    ptrPrimitive[0x1c] = spriteInfo->X + spriteWidths[spriteID] + -1;
    ptrPrimitive[0x24] = spriteInfo->X;
    ptrPrimitive[0xd] = spriteInfo->Y;
    ptrPrimitive[0x15] = spriteInfo->Y;
    ptrPrimitive[0x1d] = spriteInfo->Y + spriteHeights[spriteID] + -1;
    ptrPrimitive[0x25] = spriteInfo->Y + spriteHeights[spriteID] + -1;
    PrimitiveBuffer_Insert((uint *)ptrPrimitive);
    ret = (uint *)0x0;
    primitiveBuffer_next = ptrPrimitive + 0x28;
  }
  return ret;
}



void DrawNumberBig(int screenPosX,short screenPosY,int value)

{
  uint *primitive;
  int _value;
  int numberWidth;
  int currWidth;
  
  numberWidth = 1;
  _value = value;
  if (9 < value) {
    do {
      _value = _value / 10;
      numberWidth = numberWidth + 1;
    } while (9 < _value);
  }
  if (0 < numberWidth) {
    currWidth = numberWidth * 0x18 + screenPosX;
    do {
      numberWidth = numberWidth + -1;
      primitive = RenderSprite(spriteBigNumbers + value % 10,(short)currWidth,screenPosY,0);
      *(undefined *)(primitive + 1) = 0xc0;
      *(undefined *)((int)primitive + 5) = 0xc0;
      *(undefined *)((int)primitive + 6) = 0xc0;
      value = value / 10;
      currWidth = currWidth + -0x18;
    } while (0 < numberWidth);
  }
  return;
}



void RenderCountOfMax(int screenPosX,short screenPosY,int val)

{
  uint *primitive;
  
  DrawNumberBig(screenPosX,screenPosY,val);
  primitive = RenderSprite(&spriteBigSlash,0xf8,screenPosY,2);
  primitive[1] = 0x64c0c0c0;
  DrawNumberBig(0xf0,screenPosY,val);
  return;
}



uint FUN_80052498(char *param_1,int param_2,int param_3)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  
  cVar1 = *param_1;
  uVar2 = 0x28;
  if ((cVar1 == '\x01') || (cVar1 == '\x04')) {
    param_2 = *(short *)(param_1 + 2) + param_2;
    iVar3 = param_2;
    if (param_2 < 0) {
      iVar3 = 0;
    }
    if (0x2f < param_2) {
      iVar3 = 0x2f;
    }
    if (cVar1 == '\x01') {
      uVar2 = (uint)(byte)(&DAT_80063430)[iVar3 >> 1];
    }
    else {
      uVar2 = (uint)(byte)(&DAT_80063448)[iVar3 >> 1];
    }
  }
  if (0x78 < param_3) {
    uVar2 = -uVar2;
  }
  return uVar2;
}



uint * RenderHUDPopup(char *param_1,SpriteInfo *param_2,short param_3,undefined4 param_4)

{
  short sVar1;
  short sVar2;
  uint *puVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  if (*param_1 == '\0') {
    puVar3 = (uint *)0x0;
  }
  else {
    sVar1 = FUN_80052498(param_1,0,param_4);
    puVar3 = RenderSprite(param_2,param_3,(short)param_4 + sVar1,1);
    iVar4 = *(int *)(param_1 + 4);
    iVar6 = 1;
    if (9 < iVar4) {
      do {
        iVar4 = iVar4 / 10;
        iVar6 = iVar6 + 1;
      } while (9 < iVar4);
      iVar4 = *(int *)(param_1 + 4);
    }
    if (0 < iVar6) {
      iVar7 = iVar6 * 0x18 + 0x10;
      iVar5 = iVar6 * -3;
      do {
        sVar2 = FUN_80052498(param_1,iVar5,param_4);
        sVar1 = (short)iVar7;
        iVar7 = iVar7 + -0x18;
        iVar5 = iVar5 + 3;
        iVar6 = iVar6 + -1;
        RenderSprite(spriteBigNumbers + iVar4 % 10,param_3 + sVar1,(short)param_4 + sVar2 + 2,0);
        iVar4 = iVar4 / 10;
      } while (0 < iVar6);
    }
  }
  return puVar3;
}



uint * RenderBLProgressCounter
                 (char *param_1,SpriteInfo *param_2,short param_3,undefined4 param_4,int param_5)

{
  short sVar1;
  short sVar2;
  short screenPosX;
  uint *puVar3;
  
  puVar3 = (uint *)0x0;
  if (*param_1 != '\0') {
    sVar1 = (short)param_4;
    if (param_5 < 10) {
      sVar2 = FUN_80052498(param_1,0,param_4);
      puVar3 = RenderSprite(param_2,param_3,sVar1 + sVar2,1);
      sVar2 = FUN_80052498(param_1,0xfffffffd,param_4);
      RenderSprite(spriteBigNumbers + *(int *)(param_1 + 4),param_3 + 0x28,sVar1 + sVar2 + 2,0);
      sVar2 = FUN_80052498(param_1,0xfffffffa,param_4);
      RenderSprite(&spriteBigSlash,param_3 + 0x40,sVar1 + sVar2 + 2,2);
      sVar2 = FUN_80052498(param_1,0xfffffff7,param_4);
      param_3 = param_3 + 0x50;
    }
    else {
      if (9 < *(int *)(param_1 + 4)) {
        param_3 = param_3 + -0x18;
      }
      sVar2 = FUN_80052498(param_1,0,param_4);
      puVar3 = RenderSprite(param_2,param_3,sVar1 + sVar2,1);
      if (9 < *(int *)(param_1 + 4)) {
        sVar2 = FUN_80052498(param_1,0xfffffffd,param_4);
        screenPosX = param_3 + 0x28;
        param_3 = param_3 + 0x18;
        RenderSprite(spriteBigNumbers + *(int *)(param_1 + 4) / 10,screenPosX,sVar1 + sVar2 + 2,0);
      }
      sVar2 = FUN_80052498(param_1,0xfffffffd,param_4);
      RenderSprite(spriteBigNumbers + *(int *)(param_1 + 4) % 10,param_3 + 0x28,sVar1 + sVar2 + 2,0)
      ;
      sVar2 = FUN_80052498(param_1,0xfffffffa,param_4);
      RenderSprite(&spriteBigSlash,param_3 + 0x40,sVar1 + sVar2 + 2,2);
      sVar2 = FUN_80052498(param_1,0xfffffff7,param_4);
      RenderSprite(spriteBigNumbers + param_5 / 10,param_3 + 0x50,sVar1 + sVar2 + 2,0);
      sVar2 = FUN_80052498(param_1,0xfffffff4,param_4);
      param_5 = param_5 % 10;
      param_3 = param_3 + 0x68;
    }
    RenderSprite(spriteBigNumbers + param_5,param_3,sVar1 + sVar2 + 2,0);
  }
  return puVar3;
}



void RenderTimer(int param_1,short screenPosX,short screenPosY)

{
  int iVar1;
  int iVar2;
  
  iVar1 = ((param_1 % 60) * 5) / 3;
  iVar2 = param_1 / 3600;
  if (iVar2 != 0) {
    RenderSprite(spriteBigNumbers + iVar2,screenPosX,screenPosY,0);
    RenderSprite(&TimerColonInfo,screenPosX + 0x18,screenPosY,2);
  }
  iVar2 = param_1 / 600 + iVar2 * -6;
  if ((iVar2 != 0) || (3599 < param_1)) {
    RenderSprite(spriteBigNumbers + iVar2,screenPosX + 0x28,screenPosY,0);
  }
  RenderSprite(spriteBigNumbers + (param_1 / 60) % 10,screenPosX + 0x40,screenPosY,0);
  RenderSprite(&TimerDotInfo,screenPosX + 0x58,screenPosY,2);
  RenderSprite(spriteBigNumbers + iVar1 / 10,screenPosX + 0x68,screenPosY,0);
  RenderSprite(spriteBigNumbers + iVar1 % 10,screenPosX + 0x80,screenPosY,0);
  return;
}



void RenderHUDSpyroLivesPopup(void)

{
  short sVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  if (hudLives.displayState != Hidden) {
    DAT_80067690 = DAT_80067690 + -1;
    if (DAT_80067690 < 1) {
      uVar2 = rand();
      DAT_80067690 = (uVar2 & 0x3f) + 0x24;
    }
    iVar3 = 1;
    if ((DAT_80067690 < 6) && (iVar3 = DAT_80067690, 3 < DAT_80067690)) {
      iVar3 = 7 - DAT_80067690;
    }
    sVar1 = FUN_80052498(&hudLives,0,0);
    RenderSprite(&HUDSpyroHeadStaticInfo,0xd0,sVar1 + -0x18,9);
    sVar1 = FUN_80052498(&hudLives,0,0);
    RenderSprite(HUDSpyroHeadBlinkAnimInfo + iVar3,(byte)(&DAT_800634e8)[iVar3] + 0xd0,
                 sVar1 + ((byte)(&DAT_800634f4)[iVar3] - 0x18),10);
    iVar3 = 1;
    for (uVar2 = hudLives.displayNumber; 9 < (int)uVar2; uVar2 = (int)uVar2 / 10) {
      iVar3 = iVar3 + 1;
    }
    if (0 < iVar3) {
      iVar4 = iVar3 * -3;
      uVar2 = hudLives.displayNumber;
      iVar5 = iVar3 * 0x18 + 0xf0;
      do {
        sVar1 = FUN_80052498(&hudLives,iVar4,0);
        iVar4 = iVar4 + 3;
        iVar3 = iVar3 + -1;
        RenderSprite(spriteBigNumbers + (int)uVar2 % 10,(short)iVar5,sVar1 + -0xe,0);
        uVar2 = (int)uVar2 / 10;
        iVar5 = iVar5 + -0x18;
      } while (0 < iVar3);
    }
  }
  return;
}



void FUN_80052d84(void)

{
  byte bVar1;
  short screenPosX;
  uint uVar2;
  int iVar3;
  short sVar4;
  int iVar5;
  ushort screenPosY;
  int iVar6;
  
  uVar2 = DAT_800676b4;
  if (DAT_800676a8 != 0) {
    if (DAT_800676b0 == 0) {
      bVar1 = (&DAT_80063448)[0x2f - DAT_800676a8 >> 1];
      iVar6 = -1;
    }
    else {
      bVar1 = (&DAT_80063430)[DAT_800676a8 >> 1];
      iVar6 = (*currentPowerTypeTimer * 6) / DAT_800676b0;
      if (DAT_800676b0 == 0) {
        trap(0x1c00);
      }
      if ((DAT_800676b0 == -1) && (*currentPowerTypeTimer * 6 == -0x80000000)) {
        trap(0x1800);
      }
    }
    sVar4 = -(short)((int)((uint)bVar1 * 3) >> 1);
    screenPosX = sVar4 + 0x200;
    screenPosY = 0x40;
    if (currentLoadedLevel == RIPTOS_ARENA) {
      screenPosY = 0x34;
    }
    RenderSprite(&SpriteInfo_80063584,sVar4 + 0x202,screenPosY,6);
    RenderSprite(&SpriteInfo_80063588,sVar4 + 0x204,screenPosY | 2,7);
    RenderSprite(&SpriteInfo_80063574,screenPosX,screenPosY + 0x10,5);
    iVar5 = 0;
    sVar4 = -0x58;
    do {
      iVar3 = 0x17;
      if (iVar5 < iVar6) {
LAB_80052ef8:
        iVar3 = 0x19;
LAB_80052efc:
        iVar3 = iVar3 << 2;
      }
      else {
        if (iVar5 != iVar6) goto LAB_80052efc;
        iVar3 = 0x5c;
        if ((clock & 0xf) < 8) goto LAB_80052ef8;
      }
      RenderSprite((SpriteInfo *)(&spriteBigNumbers[0].X + iVar3),screenPosX,screenPosY - sVar4,5);
      iVar5 = iVar5 + 1;
      sVar4 = sVar4 + 0xc;
    } while (iVar5 < 6);
    RenderSprite(&SpriteInfo_8006357c,screenPosX,screenPosY + 100,5);
    uVar2 = *currentPowerTypeTimer / 0x1e;
    if ((((int)uVar2 < (int)DAT_800676b4) && (*currentPowerTypeTimer != 0)) &&
       (((int)uVar2 < 8 || (((int)uVar2 < 0x10 && ((uVar2 & 1) != 0)))))) {
      PlayAudio(*(undefined *)(audioBank + 0x1d),0,0);
    }
  }
  DAT_800676b4 = uVar2;
  return;
}



void FUN_80052fe4(void)

{
  int iVar1;
  
  iVar1 = (*DAT_800670b4)(0x71,currentNPC);
  *(undefined4 *)(iVar1 + 0xc) = 0xf0;
  *(undefined4 *)(iVar1 + 0x10) = 0xee;
  *(undefined4 *)(iVar1 + 0x14) = 0x880;
  *(undefined *)(iVar1 + 0x45) = 0xc;
  *(undefined *)(iVar1 + 0x54) = 2;
  *(undefined *)(iVar1 + 0x46) = 0x20;
  *(undefined *)(iVar1 + 0x4c) = 0x80;
  *(undefined *)(iVar1 + 0x47) = 0x20;
  return;
}



void FUN_8005304c(void)

{
  byte bVar1;
  bool bVar2;
  int iVar3;
  char *text;
  int iVar4;
  uint val;
  
  if (DAT_800676c0 == 0) {
    DAT_800676c0 = FUN_80052fe4();
    return;
  }
  if ((orbsCollectedFlags[g_currLevelID] == (&orbsOfWorldsFlags)[g_currLevelID]) &&
     (DAT_80067164 == 0)) {
    if (DAT_800676c4 == 0) {
      DAT_800676c4 = FUN_80052fe4();
      *(undefined4 *)(DAT_800676c4 + 0xc) = 0xc0;
      *(undefined4 *)(DAT_800676c4 + 0x10) = 0x2e;
      if (orbsCollectedCount == 0x40) {
        *(undefined4 *)(DAT_800676c4 + 0xc) = 0xa8;
      }
    }
    if (DAT_800676c8 == 0) {
      DAT_800676c8 = FUN_80052fe4();
      *(undefined4 *)(DAT_800676c8 + 0xc) = 0x140;
      *(undefined4 *)(DAT_800676c8 + 0x10) = 0x2e;
      if (orbsCollectedCount == 0x40) {
        *(undefined4 *)(DAT_800676c8 + 0xc) = 0x158;
      }
    }
  }
  iVar4 = orbsCollectedCount;
  if (DAT_800676d4 < 0x24) {
    iVar4 = orbsCollectedCount + -1;
  }
  if (DAT_800676d4 < 0x18) {
    bVar1 = (&DAT_80063430)[DAT_800676d4];
  }
  else {
    if (DAT_800676d4 < 0x57) {
      *(undefined4 *)(DAT_800676c0 + 0x10) = 0xc6;
      goto LAB_80053234;
    }
    bVar1 = (&DAT_800633f2)[DAT_800676d4];
  }
  *(uint *)(DAT_800676c0 + 0x10) = 0xee - (uint)bVar1;
LAB_80053234:
  *(char *)(DAT_800676c0 + 0x46) = *(char *)(DAT_800676c0 + 0x46) + '\x04';
  SetTPage(0x18);
  iVar3 = 0x9e;
  if (9 < iVar4) {
    iVar3 = 0x86;
  }
  DrawNumberBig(iVar3,(short)*(undefined4 *)(DAT_800676c0 + 0x10) + -6,iVar4);
  if (iVar4 == 1) {
    text = (&PTR_s_ORB_80061b44)[DAT_80067118];
  }
  else {
    text = (&PTR_s_ORBS_80061b48)[DAT_80067118];
  }
  RenderText(text,0x110,(short)*(undefined4 *)(DAT_800676c0 + 0x10) + -3,1,(TextConfig *)0x0);
  if ((orbsCollectedFlags[g_currLevelID] == (&orbsOfWorldsFlags)[g_currLevelID]) &&
     (DAT_80067164 == 0)) {
    iVar4 = *(int *)(DAT_800676c0 + 0x10);
    *(char *)(DAT_800676c4 + 0x46) = *(char *)(DAT_800676c4 + 0x46) + '\x04';
    iVar3 = -iVar4 + 0xf0;
    *(int *)(DAT_800676c4 + 0x10) = iVar3;
    *(char *)(DAT_800676c8 + 0x46) = *(char *)(DAT_800676c8 + 0x46) + '\x04';
    bVar2 = orbsCollectedCount < 0x40;
    *(int *)(DAT_800676c8 + 0x10) = iVar3;
    if (bVar2) {
      iVar3 = 0xc6;
      val = (uint)maxOrbsOfWorlds[g_currLevelID];
    }
    else {
      iVar3 = 0xae;
      val = 0x40;
    }
    RenderCountOfMax(iVar3,(short)-iVar4 + 0xe8,val);
  }
  DAT_800676d4 = DAT_800676d4 + 1;
  if (0x61 < DAT_800676d4) {
    DAT_800676d4 = 0;
    FUN_8004132c(DAT_800676c0);
    if (DAT_800676c4 != 0) {
      FUN_8004132c();
    }
    if (DAT_800676c8 != 0) {
      FUN_8004132c();
    }
    DAT_800676c0 = 0;
  }
                    // WARNING: Read-only address (ram,0x80067118) is written
  return;
}



void maybeDrawMap(void)

{
  byte bVar1;
  short sVar2;
  short sVar3;
  ushort uVar4;
  undefined *ptrPrimitive;
  char cVar5;
  uint *puVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  short screenPosY;
  uint uVar11;
  uint uVar12;
  short sVar13;
  short sVar14;
  
  iVar8 = g_currLevelID * 8;
  sVar13 = *(short *)(&DAT_80064ba4 + iVar8);
  sVar14 = *(short *)(&DAT_80064ba8 + iVar8);
  sVar2 = *(short *)(&DAT_80064ba6 + iVar8);
  sVar3 = *(short *)(&DAT_80064baa + iVar8);
  if (DAT_800676a4 != 0) {
    if (displayMap == 0) {
      bVar1 = (&DAT_80063478)[DAT_800676a4 >> 1];
    }
    else {
      bVar1 = (&DAT_80063460)[DAT_800676a4 >> 1];
    }
    screenPosY = -(ushort)bVar1 + 0xe8;
    RenderSprite(&SpriteInfo_80063678,0x18,screenPosY,4);
    uVar11 = 0;
    do {
      if (((int)(uint)maybeNPCTalkedToFlags[g_currLevelID] >> (uVar11 & 0x1f) & 1U) != 0) {
        uVar12 = (uint)orbsCollectedFlags[g_currLevelID] & 1 << (uVar11 & 0x1f);
        if (uVar11 == 4) {
          uVar12 = (uint)worldsCompleted[g_currLevelID];
        }
        puVar6 = RenderSprite(&SpriteInfo_800635bc + (uVar11 != 4),
                              (byte)(&DAT_80064ca4)[uVar11 * 2 + g_currLevelID * 10] + 0x14,
                              screenPosY +
                              ((byte)(&DAT_80064ca4 + uVar11 * 2 + g_currLevelID * 10)[1] - 2),0xc);
        if (uVar12 == 0) {
          cVar5 = ((byte)clock & 0x1f) * '\x04' + '@';
          *(char *)(puVar6 + 1) = cVar5;
          *(char *)((int)puVar6 + 5) = cVar5;
          *(char *)((int)puVar6 + 6) = cVar5;
        }
      }
      ptrPrimitive = primitiveBuffer_next;
      uVar12 = clock;
      uVar11 = uVar11 + 1;
    } while ((int)uVar11 < 5);
    iVar9 = (Spyro.position.x + sVar13 * -0x400) * 0xcc;
    iVar8 = sVar2 * 0x400 + sVar13 * -0x400;
    if (iVar8 == 0) {
      trap(0x1c00);
    }
    if ((iVar8 == -1) && (iVar9 == -0x80000000)) {
      trap(0x1800);
    }
    iVar10 = (Spyro.position.y + sVar14 * -0x400) * 0x50;
    iVar7 = sVar3 * 0x400 + sVar14 * -0x400;
    if (iVar7 == 0) {
      trap(0x1c00);
    }
    if ((iVar7 == -1) && (iVar10 == -0x80000000)) {
      trap(0x1800);
    }
    *(undefined4 *)primitiveBuffer_next = 0x6000000;
    uVar4 = cosineLookupTable[(uVar12 & 0x1f) * 8];
    *(undefined4 *)(ptrPrimitive + 0xc) = 0;
    *(undefined4 *)(ptrPrimitive + 0x14) = 0;
    *(int *)(ptrPrimitive + 4) = ((int)((uint)uVar4 << 0x10) >> 0x16) * 0x101 + 0x32406060;
    sVar14 = (short)(iVar9 / iVar8) + 0x18;
    *(short *)(ptrPrimitive + 8) = sVar14;
    sVar13 = (-(ushort)bVar1 + 0x138) - (short)(iVar10 / iVar7);
    *(short *)(ptrPrimitive + 10) = sVar13;
    *(short *)(ptrPrimitive + 0x10) =
         sVar14 + (short)((cosineLookupTable[Spyro.angleAsByte.yaw + 0x10 & 0xff] * 5) / 0x240);
    *(short *)(ptrPrimitive + 0x12) =
         sVar13 - sineLookupTable[Spyro.angleAsByte.yaw + 0x10 & 0xff] / 0xc0;
    *(short *)(ptrPrimitive + 0x18) =
         sVar14 + (short)((cosineLookupTable[Spyro.angleAsByte.yaw - 0x10 & 0xff] * 5) / 0x240);
    *(short *)(ptrPrimitive + 0x1a) =
         sVar13 - sineLookupTable[Spyro.angleAsByte.yaw - 0x10 & 0xff] / 0xc0;
    PrimitiveBuffer_Insert((uint *)ptrPrimitive);
    primitiveBuffer_next = ptrPrimitive + 0x1c;
  }
  return;
}



void RenderGemsCompleted(void)

{
  RenderRoundedBackground(0x86,0x17c,0x39,0x4e);
  RenderCountOfMax(0x96,0x3c,(uint)(byte)maxGemsOfWorlds[g_currLevelID] * 100);
  RenderSprite(spriteGemAnimation + (clock >> 2) % 6,0x8c,0x3a,1);
  RenderSprite(spriteGemAnimation + (clock >> 2) % 6,0x158,0x3a,1);
  return;
}



void StopLevelCompletePopupSequence(void)

{
  if ((popupLevelCompleteSequenceTime != 0) && (popupLevelCompleteSequenceTime < 0x96)) {
    popupLevelCompleteSequenceTime = 0x96;
    if (DAT_800676cc != 0) {
      FUN_8004132c();
    }
    DAT_800676cc = 0;
    if (DAT_800676d0 != 0) {
      FUN_8004132c();
    }
    DAT_800676d0 = 0;
  }
  return;
}



void FUN_80053a24(void)

{
  char cVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  
  iVar3 = -1;
  popupLevelCompleteSequenceTime = popupLevelCompleteSequenceTime + 1;
  if (popupLevelCompleteSequenceTime == 0x28) {
    PlayAudio(*(undefined *)(audioBank + 0x25),0,0);
  }
  if ((popupLevelCompleteSequenceTime == 8) || (popupLevelCompleteSequenceTime == 0x7e)) {
    local_20 = 0xfffffd20;
    if ((&DAT_800648f4)[g_currLevelID] == '\0') {
      local_20 = 0xfffffe90;
    }
    iVar3 = 1;
  }
  else if ((popupLevelCompleteSequenceTime == 0x10) || (popupLevelCompleteSequenceTime == 0x86)) {
    local_20 = 0;
    cVar1 = (&DAT_800648f4)[g_currLevelID];
    if (cVar1 != '\0') {
      iVar3 = 0;
    }
    if (popupLevelCompleteSequenceTime == 0x10) {
      if (cVar1 != '\0') {
        DAT_800676cc = (*DAT_800670b4)(cVar1,0);
        if (DAT_800676cc != 0) {
          *(undefined4 *)(DAT_800676cc + 0xc) = 0x100;
          *(undefined4 *)(DAT_800676cc + 0x10) = 0xbc;
          *(undefined4 *)(DAT_800676cc + 0x14) = 0xf00;
          *(undefined *)(DAT_800676cc + 0x4c) = 0x80;
          *(undefined *)(DAT_800676cc + 0x47) = 0x20;
        }
      }
    }
    else {
      if (DAT_800676cc != 0) {
        FUN_8004132c();
      }
      DAT_800676cc = 0;
    }
  }
  else if ((popupLevelCompleteSequenceTime == 0x18) || (popupLevelCompleteSequenceTime == 0x8e)) {
    local_20 = 0x2e0;
    if ((&DAT_800648f4)[g_currLevelID] == '\0') {
      local_20 = 0x170;
    }
    iVar3 = 1;
    if (popupLevelCompleteSequenceTime == 0x18) {
      DAT_800676d0 = FUN_80052fe4();
      if (DAT_800676d0 != 0) {
        uVar2 = 0x150;
        if ((&DAT_800648f4)[g_currLevelID] == '\0') {
          uVar2 = 0x128;
        }
        *(undefined4 *)(DAT_800676d0 + 0xc) = uVar2;
        *(undefined4 *)(DAT_800676d0 + 0x10) = 0xbc;
        *(undefined4 *)(DAT_800676d0 + 0x14) = 0xc00;
      }
    }
    else {
      if (DAT_800676d0 != 0) {
        FUN_8004132c();
      }
      DAT_800676d0 = 0;
    }
  }
  if (-1 < iVar3) {
    local_1c = 600;
    local_18 = 0xc00;
    (*DAT_800670fc)(0x10,0x3b,&local_20,iVar3);
    PlayAudio(*(undefined *)(audioBank + 1),0,0);
  }
  if (DAT_800676cc != 0) {
    *(char *)(DAT_800676cc + 0x46) = *(char *)(DAT_800676cc + 0x46) + '\x04';
  }
  if (DAT_800676d0 != 0) {
    *(char *)(DAT_800676d0 + 0x46) = *(char *)(DAT_800676d0 + 0x46) + '\x04';
  }
  return;
}



void RenderWorldCompleted(void)

{
  int iVar1;
  short sVar2;
  char acStack_48 [64];
  
  if (popupLevelCompleteSequenceTime < 0x96) {
    sprintf(acStack_48,"%s Complete!",
            (&PTR_s_Summer_Forest_800649b4)[(byte)(&DAT_80064940)[currentLoadedLevel]]);
    iVar1 = GetTextWidth(acStack_48);
    sVar2 = (short)(iVar1 >> 1);
    RenderRoundedBackground(0xf9 - sVar2,sVar2 + 0x106,0xa0,0xad);
    DrawText_Center(acStack_48,0x102,0xa2,1);
    if (popupLevelCompleteSequenceTime - 8U < 0x76) {
      if ((&DAT_800648f4)[g_currLevelID] == '\0') {
        sVar2 = 200;
      }
      else {
        sVar2 = 0xa0;
      }
      RenderSprite(spriteGemAnimation + (clock >> 2) % 6,sVar2,0xb2,1);
    }
  }
  return;
}



void RenderHUD(void)

{
  if ((DAT_80067100 == 0) && (DAT_8006701c == 0)) {
    SetTPage(0x38);
    if ((inSpeedwayFlag < 0) && (DAT_800676d4 == 0)) {
      if (((int)currentLoadedLevel / 10) * 10 != currentLoadedLevel + ~New_Name_(5)) {
        RenderHUDPopup(&hudGems,spriteGemAnimation + (DAT_80067008 >> 1) % 6,0x28,0xfffffff0);
        RenderHUDPopup(&hudSpirits,spriteSpiritAnimation + (DAT_80067008 >> 1) % 3,0x198,0xfffffff0)
        ;
      }
      FUN_80052d84();
      RenderHUDSpyroLivesPopup();
    }
    if (popupLevelCompleteSequenceTime == 0) {
      if (allGemsCollectedTimer != 0) {
        RenderGemsCompleted();
      }
    }
    else {
      RenderWorldCompleted();
    }
    if (DAT_800676d4 == 0) {
      if ((DAT_80067158 != (code *)0x0) && (loadingStatus < 0)) {
        (*DAT_80067158)();
      }
    }
    else {
      FUN_8005304c();
    }
  }
  else {
    DAT_800676a4 = 0;
    hudSpirits.displayState = ~Hidden;
    hudLives.displayState = ~Hidden;
    hudExtra1.displayState = Hidden;
    hudExtra2.displayState = Hidden;
    hudExtra3.displayState = Hidden;
    allGemsCollectedTimer = 0;
  }
  return;
}



void FUN_800540b0(void)

{
  short screenPosX;
  short screenPosY;
  
  if (((currentLoadedLevel == CANYON_SPEEDWAY) && (DAT_8006abf8 != '\0')) &&
     ((currGameState == Normal || (currGameState == Pause)))) {
    SetTPage(0x38);
    screenPosX = (short)DAT_8006a9a0 + -0x10;
    screenPosY = (short)DAT_8006a9a4 + -0x10;
  }
  else {
    if (DAT_80067114 == 0) {
      return;
    }
    SetTPage(0x38);
    screenPosX = 0xf0;
    screenPosY = 0x68;
  }
  RenderSprite(&SpriteInfo_8006358c,screenPosX,screenPosY,1);
                    // WARNING: Read-only address (ram,0x8006a9a0) is written
                    // WARNING: Read-only address (ram,0x8006a9a4) is written
  return;
}



void FUN_80054170(void)

{
  PlayAudio(*(undefined *)(audioBank + 0x15),0,0);
  return;
}



void FUN_800541a0(void)

{
  PlayAudio(*(undefined *)(audioBank + 0x16),0,0);
  return;
}



void FUN_800541d0(void)

{
  int iVar1;
  
  iVar1 = PlayAudio(*(undefined *)(audioBank + 0x17),0,0);
  if (-1 < iVar1) {
    FUN_80050cf4(iVar1,0x640);
  }
  return;
}



void FUN_80054210(void)

{
  int iVar1;
  
  iVar1 = PlayAudio(*(undefined *)(audioBank + 0x19),0,0);
  if (-1 < iVar1) {
    FUN_80050cf4(iVar1,0xc00);
  }
  return;
}



void FUN_80054250(void)

{
  PlayAudio(*(undefined *)(audioBank + 1),0,0);
  return;
}



void FUN_80054280(void)

{
  int iVar1;
  
  iVar1 = PlayAudio(*(undefined *)(audioBank + 0x19),0,0);
  if (-1 < iVar1) {
    FUN_80050cf4(iVar1,0x2000);
    FUN_80050c64(iVar1,0x600);
  }
  return;
}



void FUN_800542d8(void)

{
  int iVar1;
  
  iVar1 = PlayAudio(*audioBank,0,0);
  if (-1 < iVar1) {
    FUN_80050cf4(iVar1,0x2000);
  }
  return;
}



void FUN_80054318(void)

{
  int iVar1;
  int iVar2;
  
  iVar1 = PlayAudio(*(undefined *)(audioBank + 0x24),0,0);
  if (-1 < iVar1) {
    FUN_80050cf4(iVar1,0xc00);
    iVar2 = rand();
    FUN_80050c64(iVar1,(iVar2 % 5) * -0x80 + 0x1200);
  }
  return;
}



void FUN_800543a8(void)

{
  undefined4 *puVar1;
  int iVar2;
  
  iVar2 = 0xf;
  puVar1 = &DAT_8006a958;
  do {
    *puVar1 = 0;
    iVar2 = iVar2 + -1;
    puVar1 = puVar1 + -1;
  } while (-1 < iVar2);
  DAT_80066f98 = 0;
  DAT_800698bd = 0;
  return;
}



void FUN_800543dc(void)

{
  InputFlags IVar1;
  int iVar2;
  CheatType cheatId;
  int *piVar3;
  int *piVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  InputFlags *pIVar8;
  InputFlags (*paIVar9) [16];
  
  if (inputStates[0].pressed != None) {
    cheatId = AllAbilities;
    paIVar9 = CheatInputs;
    iVar2 = DAT_80066f98 * 4;
    DAT_80066f98 = DAT_80066f98 + 1;
    *(InputFlags *)(&DAT_8006a91c + iVar2) = inputStates[0].pressed;
    do {
      iVar2 = 0;
      IVar1 = *(InputFlags *)paIVar9;
      pIVar8 = (InputFlags *)paIVar9;
      while (IVar1 != None) {
        pIVar8 = pIVar8 + 1;
        iVar2 = iVar2 + 1;
        IVar1 = *pIVar8;
      }
      iVar5 = DAT_80066f98 - iVar2;
      if (iVar5 < 0) {
        iVar5 = iVar5 + 0x10;
      }
      iVar7 = 0;
      if (0 < iVar2) {
        piVar3 = (int *)(&DAT_8006a91c + iVar5 * 4);
        pIVar8 = (InputFlags *)paIVar9;
        do {
          iVar6 = iVar5 + 1;
          if (*piVar3 != *pIVar8) {
            iVar7 = -1;
            break;
          }
          piVar4 = piVar3 + 1;
          if (0xf < iVar6) {
            piVar4 = piVar3 + -0xf;
            iVar6 = iVar5 + -0xf;
          }
          iVar7 = iVar7 + 1;
          pIVar8 = pIVar8 + 1;
          piVar3 = piVar4;
          iVar5 = iVar6;
        } while (iVar7 < iVar2);
      }
      if (iVar7 == iVar2) {
        ApplyCheat(cheatId);
        break;
      }
      cheatId = cheatId + Credits;
      paIVar9 = (InputFlags (*) [16])((int)paIVar9 + 0x40);
    } while ((int)cheatId < 6);
    if (0xf < DAT_80066f98) {
      DAT_80066f98 = 0;
    }
  }
  return;
}



void ApplyCheat(CheatType cheatId)

{
  SpyroColor SVar1;
  undefined uVar2;
  
  switch(cheatId) {
  case AllAbilities:
    DAT_800698b9 = 1;
    if (globalProgressFlags.swim.isPayed == 0) {
      globalProgressFlags.swim.isPayed = 2;
    }
    if (globalProgressFlags.climb.isPayed == 0) {
      globalProgressFlags.climb.isPayed = 2;
    }
    if (globalProgressFlags.headbash.isPayed == 0) {
      globalProgressFlags.headbash.isPayed = 2;
    }
    break;
  case Credits:
    DAT_80067048 = (undefined2)currentLoadedLevel;
    PlayAudio(*(undefined *)(audioBank + 1),0,0);
    FUN_8001a910();
    return;
  case BigHeadSpyro:
    spyroScale.x = 0x2000;
    spyroScale.y = 0x2000;
    spyroScale.z = 0x2000;
    scaleSpyroBody = false;
    scaleSpyroHead = (bool)('\x01' - scaleSpyroHead);
    uVar2 = *(undefined *)(audioBank + 1);
    goto LAB_80054774;
  case PaperSpyro:
    spyroScale.x = 0x200;
    spyroScale.y = 0x1000;
    spyroScale.z = 0x1000;
    scaleSpyroHead = false;
    scaleSpyroBody = (bool)('\x01' - scaleSpyroBody);
    uVar2 = *(undefined *)(audioBank + 1);
    goto LAB_80054774;
  case ColorSpyro:
    cheatSpyroColor = Normal;
    PlayAudio(*(undefined *)(audioBank + 0x16),0,0);
    do {
      VSync(0);
      ReadInput();
      FUN_80050d38();
    } while (inputStates[0].pressed == None);
    SVar1 = Red;
    if (((((inputStates[0].pressed & Circle) != None) ||
         (SVar1 = Blue, (inputStates[0].pressed & Cross) != None)) ||
        (SVar1 = Pink, (inputStates[0].pressed & Square) != None)) ||
       (((SVar1 = Green, (inputStates[0].pressed & Triangle) != None ||
         (SVar1 = Yellow, (inputStates[0].pressed & DPadUp) != None)) ||
        (SVar1 = Black, (inputStates[0].pressed & DPadDown) != None)))) {
      cheatSpyroColor = SVar1;
    }
    break;
  case ExtraHitPoint:
    hasExtraHit = !hasExtraHit;
    maxHealth = 4;
    if (!hasExtraHit) {
      maxHealth = 3;
    }
    break;
  default:
    goto switchD_8005453c_caseD_6;
  }
  uVar2 = *(undefined *)(audioBank + 1);
LAB_80054774:
  PlayAudio(uVar2,0,0);
switchD_8005453c_caseD_6:
  return;
}



// WARNING: Removing unreachable block (ram,0x80054874)

void start(void)

{
  int iVar1;
  undefined4 *puVar2;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  uint uVar3;
  undefined4 unaff_retaddr;
  undefined4 uVar4;
  
  puVar2 = &DAT_80066ed8;
  do {
    *puVar2 = 0;
    puVar2 = puVar2 + 1;
  } while (puVar2 < &DAT_8006d264);
  uVar3 = DAT_80066d3c - 8U | 0x80000000;
  DAT_8006509c = ((DAT_80066d3c - 8U) - DAT_80066d38) - 0x6d264;
  DAT_80065098 = &DAT_8006d264;
  DAT_80067188 = unaff_retaddr;
  InitHeap((ulong *)&DAT_8006d268,DAT_8006509c);
  uVar4 = 0x80054830;
  main();
  iVar1 = DAT_80065094;
  trap(1);
  *(undefined4 *)(uVar3 - 0xc) = unaff_s0;
  *(undefined4 *)(uVar3 - 8) = unaff_s1;
  *(undefined4 *)(uVar3 - 4) = uVar4;
  if (iVar1 == 0) {
    DAT_80065094 = 1;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x80054874)

void FUN_80054834(void)

{
  if (DAT_80065094 == 0) {
    DAT_80065094 = 1;
  }
  return;
}



void FUN_800548a4(void)

{
  (**(code **)(PTR_PTR_s__Id__intr_c_v_1_75_1997_02_07_09_80066198 + 0xc))();
  return;
}



void FUN_800548d4(void)

{
  (**(code **)(PTR_PTR_s__Id__intr_c_v_1_75_1997_02_07_09_80066198 + 8))();
  return;
}



void FUN_80054904(void)

{
  (**(code **)(PTR_PTR_s__Id__intr_c_v_1_75_1997_02_07_09_80066198 + 4))();
  return;
}



void FUN_80054934(undefined4 param_1)

{
  (**(code **)(PTR_PTR_s__Id__intr_c_v_1_75_1997_02_07_09_80066198 + 0x14))(4,param_1);
  return;
}



void FUN_80054968(void)

{
  (**(code **)(PTR_PTR_s__Id__intr_c_v_1_75_1997_02_07_09_80066198 + 0x14))();
  return;
}



void FUN_80054998(void)

{
  (**(code **)(PTR_PTR_s__Id__intr_c_v_1_75_1997_02_07_09_80066198 + 0x10))();
  return;
}



undefined2 FUN_800549c8(void)

{
  return DAT_80065112;
}



undefined2 FUN_800549d8(undefined2 param_1)

{
  undefined2 uVar1;
  
  uVar1 = *(undefined2 *)PTR_I_MASK_800661a0;
  *(undefined2 *)PTR_I_MASK_800661a0 = param_1;
  return uVar1;
}



undefined2 * FUN_800549f0(void)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined2 *puVar3;
  int iVar4;
  undefined4 uVar5;
  
  puVar2 = PTR_I_MASK_800661a0;
  puVar1 = PTR_I_STAT_8006619c;
  puVar3 = (undefined2 *)0x0;
  if (DAT_80065110 == 0) {
    *(undefined2 *)PTR_I_MASK_800661a0 = 0;
    *(undefined2 *)puVar1 = *(undefined2 *)puVar2;
    *(undefined4 *)PTR_DMA_DPCR_800661a4 = 0x33333333;
    MemZero(&DAT_80065110,0x41a);
    iVar4 = FUN_8005abe8(&DAT_80065148);
    if (iVar4 != 0) {
      FUN_80054ac8();
    }
    DAT_8006514c = &DAT_80066128;
    HookEntryInt(&DAT_80065148);
    DAT_80065110 = 1;
    uVar5 = startIntrVSync();
    *(undefined4 *)(PTR_PTR_s__Id__intr_c_v_1_75_1997_02_07_09_80066198 + 0x14) = uVar5;
    uVar5 = startIntrDMA();
    *(undefined4 *)(PTR_PTR_s__Id__intr_c_v_1_75_1997_02_07_09_80066198 + 4) = uVar5;
    FUN_8005ab60();
    puVar3 = &DAT_80065110;
    ExitCriticalSection();
  }
  return puVar3;
}



void FUN_80054ac8(void)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  code **ppcVar5;
  
  if (DAT_80065110 == 0) {
    printf("unexpected interrupt(%04x)\n",(uint)*(ushort *)PTR_I_STAT_8006619c);
    ReturnFromException();
  }
  DAT_80065112 = 1;
  uVar2 = (uint)(*(ushort *)PTR_I_MASK_800661a0 & DAT_80065140 & *(ushort *)PTR_I_STAT_8006619c);
  if (uVar2 != 0) {
    do {
      ppcVar5 = (code **)&DAT_80065114;
      for (uVar4 = 0; (uVar2 != 0 && ((int)uVar4 < 0xb)); uVar4 = uVar4 + 1) {
        if ((uVar2 & 1) != 0) {
          *(ushort *)PTR_I_STAT_8006619c = ~(ushort)(1 << (uVar4 & 0x1f));
          if (*ppcVar5 != (code *)0x0) {
            (**ppcVar5)();
          }
        }
        ppcVar5 = ppcVar5 + 1;
        uVar2 = uVar2 >> 1;
      }
      uVar2 = (uint)(*(ushort *)PTR_I_MASK_800661a0 & DAT_80065140 & *(ushort *)PTR_I_STAT_8006619c)
      ;
    } while (uVar2 != 0);
  }
  if ((*(ushort *)PTR_I_STAT_8006619c & *(ushort *)PTR_I_MASK_800661a0) == 0) {
    DAT_800661a8 = 0;
  }
  else {
    iVar3 = DAT_800661a8 + 1;
    bVar1 = 0x800 < DAT_800661a8;
    DAT_800661a8 = iVar3;
    if (bVar1) {
      printf("intr timeout(%04x:%04x)\n",(uint)*(ushort *)PTR_I_STAT_8006619c,
             (uint)*(ushort *)PTR_I_MASK_800661a0);
      DAT_800661a8 = 0;
      *(undefined2 *)PTR_I_STAT_8006619c = 0;
    }
  }
  DAT_80065112 = 0;
  ReturnFromException();
  return;
}



int FUN_80054c98(uint param_1,int param_2)

{
  ushort uVar1;
  int *piVar2;
  ushort uVar3;
  int iVar4;
  
  piVar2 = &DAT_80065114 + param_1;
  iVar4 = *piVar2;
  if ((param_2 != iVar4) && (DAT_80065110 != 0)) {
    uVar3 = *(ushort *)PTR_I_MASK_800661a0;
    *(undefined2 *)PTR_I_MASK_800661a0 = 0;
    if (param_2 == 0) {
      uVar1 = ~(ushort)(1 << (param_1 & 0x1f));
      *piVar2 = 0;
      uVar3 = uVar3 & uVar1;
      DAT_80065140 = DAT_80065140 & uVar1;
    }
    else {
      *piVar2 = param_2;
      uVar1 = (ushort)(1 << (param_1 & 0x1f));
      uVar3 = uVar3 | uVar1;
      DAT_80065140 = DAT_80065140 | uVar1;
    }
    if (param_1 == 0) {
      ChangeClearPAD((uint)(param_2 == 0));
      ChangeClearRCnt(3,(uint)(param_2 == 0));
    }
    if (param_1 == 4) {
      ChangeClearRCnt(0,param_2 == 0);
    }
    if (param_1 == 5) {
      ChangeClearRCnt(1,param_2 == 0);
    }
    if (param_1 == 6) {
      ChangeClearRCnt(2,param_2 == 0);
    }
    *(ushort *)PTR_I_MASK_800661a0 = uVar3;
  }
  return iVar4;
}



undefined2 * FUN_80054de0(void)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined2 *puVar3;
  
  puVar3 = (undefined2 *)0x0;
  if (DAT_80065110 != 0) {
    EnterCriticalSection();
    puVar2 = PTR_I_MASK_800661a0;
    puVar1 = PTR_I_STAT_8006619c;
    DAT_80065142 = *(undefined2 *)PTR_I_MASK_800661a0;
    DAT_80065144 = *(undefined4 *)PTR_DMA_DPCR_800661a4;
    *(undefined2 *)PTR_I_MASK_800661a0 = 0;
    *(undefined2 *)puVar1 = *(undefined2 *)puVar2;
    *(uint *)PTR_DMA_DPCR_800661a4 = *(uint *)PTR_DMA_DPCR_800661a4 & 0x77777777;
    ResetEntryInt();
    DAT_80065110 = 0;
    puVar3 = &DAT_80065110;
  }
  return puVar3;
}



undefined2 * FUN_80054e80(void)

{
  undefined2 *puVar1;
  
  puVar1 = &DAT_80065110;
  if (DAT_80065110 == 0) {
    HookEntryInt(&DAT_80065148);
    DAT_80065110 = 1;
    *(undefined2 *)PTR_I_MASK_800661a0 = DAT_80065142;
    *(undefined4 *)PTR_DMA_DPCR_800661a4 = DAT_80065144;
    ExitCriticalSection();
  }
  else {
    puVar1 = (undefined2 *)0x0;
  }
  return puVar1;
}



void MemZero(undefined4 *addr,int length)

{
  int iVar1;
  
  iVar1 = length + -1;
  if (length != 0) {
    do {
      *addr = 0;
      iVar1 = iVar1 + -1;
      addr = addr + 1;
    } while (iVar1 != -1);
  }
  return;
}



void PadInitDirect(uchar *param_1,uchar *param_2)

{
  int iVar1;
  undefined4 *puVar2;
  undefined *puVar3;
  undefined *puVar4;
  undefined *puVar5;
  int iVar6;
  undefined *puVar7;
  
  DAT_80066698 = 0;
  DAT_800666ac = 0;
  _padInitDirSeq();
  puVar7 = &DAT_8006b610;
  DAT_80066660 = PADPORTD_OBJ_1C8;
  DAT_80066664 = PADPORTD_OBJ_160;
  DAT_80066668 = PADPORTD_OBJ_2CC;
  DAT_8006666c = PADPORTD_OBJ_388;
  DAT_80066670 = PADPORTD_OBJ_604;
  DAT_80066674 = PADPORTD_OBJ_63C;
  DAT_80066694 = &DAT_8006b610;
  DAT_80066684 = PADPORTD_OBJ_2BC;
  bzero(&DAT_8006b610,0x1e0);
  iVar6 = 0;
  puVar2 = &DAT_8006b650;
  puVar5 = &DAT_8006b5c8;
  puVar4 = &DAT_8006b580;
  DAT_8006b640 = param_1;
  DAT_8006b730 = param_2;
  do {
    puVar3 = puVar7 + 0x5d;
    puVar2[-0xd] = 0;
    puVar2[-0xc] = puVar7;
    *(undefined *)puVar2[-4] = 0xff;
    iVar1 = 5;
    *(undefined *)(puVar2[-4] + 1) = 0;
    puVar2[-1] = puVar4;
    *puVar2 = puVar5;
    do {
      *puVar3 = 0xff;
      iVar1 = iVar1 + -1;
      puVar3 = puVar3 + 1;
    } while (-1 < iVar1);
    puVar5 = puVar5 + 0x23;
    puVar4 = puVar4 + 0x23;
    iVar6 = iVar6 + 1;
    puVar2 = puVar2 + 0x3c;
    puVar7 = puVar7 + 0xf0;
  } while (iVar6 < 2);
  FUN_8005b054();
  DAT_80066698 = 1;
  return;
}



void PADPORTD_OBJ_160(undefined4 *param_1)

{
  int iVar1;
  undefined *puVar2;
  
  if (*(char *)((int)param_1 + 0x49) != '\0') {
    puVar2 = (undefined *)((int)param_1 + 0x5d);
    iVar1 = 5;
    *(undefined *)((int)param_1 + 0x49) = 0;
    *(undefined *)((int)param_1 + 0x46) = 0;
    *(undefined2 *)((int)param_1 + 0xe6) = 0;
    param_1[5] = 0;
    param_1[6] = 0;
    *(undefined *)((int)param_1 + 0xe3) = 0;
    *(undefined *)(param_1 + 0x39) = 0;
    *(undefined2 *)((int)param_1 + 0xe6) = 0;
    *(undefined *)((int)param_1 + 0xe9) = 0;
    *(undefined *)((int)param_1 + 0xea) = 0;
    *param_1 = 0;
    param_1[1] = 0;
    param_1[2] = 0;
    do {
      *puVar2 = 0xff;
      iVar1 = iVar1 + -1;
      puVar2 = puVar2 + 1;
    } while (-1 < iVar1);
  }
  return;
}



void PADPORTD_OBJ_1C8(int param_1)

{
  int iVar1;
  
  iVar1 = DAT_800666a0 * 0xf0;
  if (param_1 != -9) {
    if (param_1 == 0) {
      *(undefined4 *)(&DAT_800666b8 + DAT_800666a0 * 4) = 0;
      PADPORTD_OBJ_23C();
      return;
    }
    _dirFailAuto(&DAT_8006b610 + iVar1);
    PADPORTD_OBJ_2BC(&DAT_8006b610 + iVar1);
  }
  DAT_800666a4 = 0;
  *(undefined2 *)(PTR_JOY_MCD_DATA_800661b8 + 10) = 0;
  DAT_800666a0 = DAT_800666a0 + 1;
  if (DAT_800666b4 < DAT_800666a0) {
    return;
  }
  FUN_8005b388(&DAT_8006b610 + DAT_800666a0 * 0xf0);
  PADPORTD_OBJ_298();
  return;
}



// WARNING: Removing unreachable block (ram,0x80055114)
// WARNING: Removing unreachable block (ram,0x80055134)
// WARNING: Removing unreachable block (ram,0x8005513c)
// WARNING: Removing unreachable block (ram,0x80055148)

void PADPORTD_OBJ_23C(void)

{
  int unaff_s1;
  
  DAT_800666a4 = 0;
  *(undefined2 *)(PTR_JOY_MCD_DATA_800661b8 + 10) = 0;
  DAT_800666a0 = DAT_800666a0 + 1;
  if (DAT_800666b4 < DAT_800666a0) {
    return;
  }
  FUN_8005b388(DAT_800666a0 * 0xf0 + unaff_s1);
  PADPORTD_OBJ_298();
  return;
}



void PADPORTD_OBJ_298(undefined4 param_1,int param_2)

{
  int in_v0;
  int iVar1;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  
  while( true ) {
    if (in_v0 != 0) {
      return;
    }
    iVar1 = DAT_800666a0 * 0xf0 + unaff_s1;
    if (param_2 != unaff_s3) {
      if (param_2 == 0) {
        *(undefined4 *)(DAT_800666a0 * 4 + unaff_s2) = 0;
        PADPORTD_OBJ_23C();
        return;
      }
      _dirFailAuto(iVar1);
      PADPORTD_OBJ_2BC(iVar1);
    }
    DAT_800666a4 = 0;
    *(undefined2 *)(PTR_JOY_MCD_DATA_800661b8 + 10) = 0;
    DAT_800666a0 = DAT_800666a0 + 1;
    in_v0 = 1;
    if (DAT_800666a0 <= DAT_800666b4) break;
    param_2 = 0xffff;
  }
  FUN_8005b388(DAT_800666a0 * 0xf0 + unaff_s1);
  PADPORTD_OBJ_298();
  return;
}



void PADPORTD_OBJ_2BC(int param_1)

{
  undefined uVar1;
  
  uVar1 = *(undefined *)(param_1 + 0x37);
  *(undefined *)(param_1 + 0x37) = 0;
  *(undefined *)(param_1 + 0x38) = uVar1;
  return;
}



undefined4 PADPORTD_OBJ_2CC(int param_1)

{
  undefined4 uVar1;
  int iVar2;
  
  iVar2 = *(byte *)(param_1 + 0x45) - 3;
  if (*(char *)(param_1 + 0x37) == '\0') {
    if (((5 < iVar2) || (uVar1 = 0, *(char *)(param_1 + iVar2 + 0x57) != '\0')) &&
       (uVar1 = 0, iVar2 < (int)(uint)*(byte *)(param_1 + 0x34))) {
      uVar1 = PADPORTD_OBJ_380();
      return uVar1;
    }
  }
  else {
    if (*(char *)(param_1 + 0x37) != 'M') {
      uVar1 = PADPORTD_OBJ_35C();
      return uVar1;
    }
    uVar1 = 0xff;
    if (iVar2 < (int)(uint)*(byte *)(param_1 + 0x36)) {
      uVar1 = PADPORTD_OBJ_330();
      return uVar1;
    }
  }
  return uVar1;
}



void PADPORTD_OBJ_330(void)

{
  PADPORTD_OBJ_380();
  return;
}



undefined PADPORTD_OBJ_35C(int param_1)

{
  undefined uVar1;
  int in_v1;
  
  uVar1 = 0;
  if (in_v1 < (int)(uint)*(byte *)(param_1 + 0x36)) {
    uVar1 = *(undefined *)(*(int *)(param_1 + 0x2c) + in_v1);
  }
  return uVar1;
}



void PADPORTD_OBJ_380(void)

{
  return;
}



// WARNING: Removing unreachable block (ram,0x80055380)
// WARNING: Removing unreachable block (ram,0x800553ac)
// WARNING: Removing unreachable block (ram,0x800553c0)
// WARNING: Removing unreachable block (ram,0x800553cc)
// WARNING: Removing unreachable block (ram,0x800553dc)
// WARNING: Removing unreachable block (ram,0x800553ec)
// WARNING: Removing unreachable block (ram,0x800553f0)

void PADPORTD_OBJ_388(int param_1)

{
  int iVar1;
  byte *pbVar2;
  byte *pbVar3;
  byte bVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  bzero((uchar *)(param_1 + 0x57),6);
  if ((*(short *)(param_1 + 0xe6) == 0) || (*(int *)(param_1 + 0x28) == 0)) {
    if (((*(byte *)(param_1 + 0xe8) - 4 < 2) || (*(byte *)(param_1 + 0xe8) == 7)) &&
       ((*(short *)(param_1 + 0xe6) == 0 && (1 < *(byte *)(param_1 + 0x34))))) {
      if ((((**(byte **)(param_1 + 0x28) & 0xc0) == 0x40) &&
          (((*(byte **)(param_1 + 0x28))[1] & 1) != 0)) && (DAT_800666a8 + 10 < 0x3d)) {
        *(undefined *)(param_1 + 0x58) = 1;
        *(undefined *)(param_1 + 0x57) = 1;
        DAT_800666a8 = DAT_800666a8 + 10;
        PADPORTD_OBJ_5F4();
        return;
      }
    }
    else {
      if (*(char *)(param_1 + 0xe8) == '\x03') {
        *(undefined *)(param_1 + 0x57) = 1;
        PADPORTD_OBJ_5F4();
        return;
      }
      if (*(short *)(param_1 + 0xe6) == 0) {
        iVar7 = 5;
        param_1 = param_1 + 5;
        do {
          *(undefined *)(param_1 + 0x57) = 1;
          iVar7 = iVar7 + -1;
          param_1 = param_1 + -1;
        } while (-1 < iVar7);
      }
    }
  }
  else {
    uVar6 = 6;
    if (*(byte *)(param_1 + 0x34) < 7) {
      uVar6 = (uint)*(byte *)(param_1 + 0x34);
    }
    uVar5 = 0;
    if (*(char *)(param_1 + 0xe9) != '\0') {
      iVar7 = 0;
      do {
        bVar4 = 1;
        if (*(char *)(iVar7 + *(int *)(param_1 + 4) + 2) != '\0') {
          bVar4 = 0xff;
        }
        pbVar3 = (byte *)(param_1 + 0x5d);
        pbVar2 = *(byte **)(param_1 + 0x28);
        iVar1 = 0;
        if (uVar6 != 0) {
          do {
            if ((*pbVar3 == uVar5) && ((*pbVar2 & bVar4) != 0)) {
              PADPORTD_OBJ_45C(pbVar2,pbVar3,1);
              return;
            }
            pbVar3 = pbVar3 + 1;
            iVar1 = iVar1 + 1;
            pbVar2 = pbVar2 + 1;
          } while (iVar1 < (int)uVar6);
        }
        uVar5 = uVar5 + 1;
        iVar7 = iVar7 + 5;
        if ((int)(uint)*(byte *)(param_1 + 0xe9) <= (int)uVar5) {
          PADPORTD_OBJ_5F4();
          return;
        }
      } while( true );
    }
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x800553cc)
// WARNING: Removing unreachable block (ram,0x800553dc)
// WARNING: Removing unreachable block (ram,0x800553ec)
// WARNING: Removing unreachable block (ram,0x800553f0)

void PADPORTD_OBJ_45C(undefined4 param_1,undefined4 param_2,int param_3)

{
  int iVar1;
  byte *pbVar2;
  byte *pbVar3;
  byte bVar4;
  uint in_t0;
  int in_t1;
  int in_t2;
  int unaff_s0;
  
  do {
    do {
      if ((param_3 != 0) &&
         (iVar1 = DAT_800666a8 + (uint)*(byte *)(in_t2 + *(int *)(unaff_s0 + 4) + 3), iVar1 < 0x3d))
      {
        DAT_800666a8 = iVar1;
        PADPORTD_OBJ_4A8();
        return;
      }
      in_t0 = in_t0 + 1;
      in_t2 = in_t2 + 5;
      if ((int)(uint)*(byte *)(unaff_s0 + 0xe9) <= (int)in_t0) {
        PADPORTD_OBJ_5F4();
        return;
      }
      param_3 = 0;
      bVar4 = 1;
      if (*(char *)(in_t2 + *(int *)(unaff_s0 + 4) + 2) != '\0') {
        bVar4 = 0xff;
      }
      pbVar3 = (byte *)(unaff_s0 + 0x5d);
      pbVar2 = *(byte **)(unaff_s0 + 0x28);
      iVar1 = 0;
    } while (in_t1 == 0);
    do {
      if ((*pbVar3 == in_t0) && ((*pbVar2 & bVar4) != 0)) {
        PADPORTD_OBJ_45C(pbVar2,pbVar3,1);
        return;
      }
      pbVar3 = pbVar3 + 1;
      iVar1 = iVar1 + 1;
      pbVar2 = pbVar2 + 1;
    } while (iVar1 < in_t1);
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x80055380)
// WARNING: Removing unreachable block (ram,0x800553ac)
// WARNING: Removing unreachable block (ram,0x800553c0)

void PADPORTD_OBJ_4A8(undefined4 param_1,undefined4 param_2,int param_3)

{
  int iVar1;
  undefined *puVar2;
  byte *pbVar3;
  byte *pbVar4;
  byte bVar5;
  uint in_t0;
  int in_t1;
  int in_t2;
  undefined in_t3;
  int unaff_s0;
  
  if (param_3 != 0) {
    pbVar4 = (byte *)(unaff_s0 + 0x5d);
    puVar2 = (undefined *)(unaff_s0 + 0x57);
    iVar1 = 0;
    if (in_t1 != 0) {
      do {
        bVar5 = *pbVar4;
        pbVar4 = pbVar4 + 1;
        if (bVar5 == in_t0) {
          *puVar2 = in_t3;
        }
        iVar1 = iVar1 + 1;
        puVar2 = puVar2 + 1;
      } while (iVar1 < in_t1);
    }
  }
  do {
    do {
      in_t0 = in_t0 + 1;
      in_t2 = in_t2 + 5;
      if ((int)(uint)*(byte *)(unaff_s0 + 0xe9) <= (int)in_t0) {
        PADPORTD_OBJ_5F4();
        return;
      }
      bVar5 = 1;
      if (*(char *)(in_t2 + *(int *)(unaff_s0 + 4) + 2) != '\0') {
        bVar5 = 0xff;
      }
      pbVar3 = (byte *)(unaff_s0 + 0x5d);
      pbVar4 = *(byte **)(unaff_s0 + 0x28);
      iVar1 = 0;
    } while (in_t1 == 0);
    do {
      if ((*pbVar3 == in_t0) && ((*pbVar4 & bVar5) != 0)) {
        PADPORTD_OBJ_45C(pbVar4,pbVar3,1);
        return;
      }
      pbVar3 = pbVar3 + 1;
      iVar1 = iVar1 + 1;
      pbVar4 = pbVar4 + 1;
    } while (iVar1 < in_t1);
  } while( true );
}



void PADPORTD_OBJ_5F4(void)

{
  return;
}



int PADPORTD_OBJ_604(undefined *param_1)

{
  undefined *puVar1;
  int iVar2;
  int iVar3;
  
  iVar2 = 0;
  iVar3 = 0x10;
  puVar1 = &DAT_8006b610;
  do {
    if (param_1 == puVar1) {
      return iVar3;
    }
    iVar3 = iVar3 + 0x10;
    iVar2 = iVar2 + 1;
    puVar1 = puVar1 + 0xf0;
  } while (iVar2 < 2);
  return 0xff;
}



undefined * PADPORTD_OBJ_63C(uint param_1)

{
  undefined *puVar1;
  
  puVar1 = &DAT_8006b610;
  if ((param_1 & 0xf0) != 0) {
    puVar1 = &DAT_8006b700;
  }
  return puVar1;
}



uint FUN_8005557c(uint param_1)

{
  uint uVar1;
  
  uVar1 = param_1 & 7;
  if (uVar1 == 3) {
LAB_800555c8:
    printf("ResetGraph:jtb=%08x,env=%08x\n",&PTR_s__Id__sys_c_v_1_140_1998_01_12_07_800661d0,
           &DAT_80066218);
LAB_800555e4:
    FUN_80057ac0(&DAT_80066218,0,0x80);
    FUN_800548a4();
    GPU_cw((uint)PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 & 0xffffff);
    DAT_80066218 = FUN_800575f4(param_1);
    DAT_80066219 = 1;
    DAT_8006621c = *(undefined2 *)(&DAT_80066298 + (uint)DAT_80066218 * 4);
    DAT_8006621e = *(undefined2 *)(&DAT_800662a4 + (uint)DAT_80066218 * 4);
    FUN_80057ac0(&DAT_80066228,0xffffffff,0x5c);
    FUN_80057ac0(&DAT_80066284,0xffffffff,0x14);
    uVar1 = (uint)DAT_80066218;
  }
  else {
    if (uVar1 < 4) {
      if (uVar1 == 0) goto LAB_800555c8;
    }
    else if (uVar1 == 5) goto LAB_800555e4;
    if (1 < DAT_8006621a) {
      (*(code *)PTR_printf_80066214)("ResetGraph(%d)...\n",param_1);
    }
    uVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x34))(1);
  }
  return uVar1;
}



undefined FUN_800556f0(char param_1)

{
  undefined uVar1;
  
  uVar1 = DAT_8006621a;
  DAT_8006621a = param_1;
  if (param_1 != '\0') {
    (*(code *)PTR_printf_80066214)
              ("SetGraphDebug:level:%d,type:%d reverse:%d\n",param_1,DAT_80066218,DAT_8006621b);
  }
  return uVar1;
}



void SetDispMask(int mask)

{
  undefined4 uVar1;
  
  if (1 < DAT_8006621a) {
    (*(code *)PTR_printf_80066214)("SetDispMask(%d)...\n",mask);
  }
  if (mask == 0) {
    FUN_80057ac0(&DAT_80066284,0xffffffff,0x14);
  }
  uVar1 = 0x3000001;
  if (mask != 0) {
    uVar1 = 0x3000000;
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x10))(uVar1);
  return;
}



int DrawSync(int mode)

{
  int iVar1;
  
  if (1 < DAT_8006621a) {
    (*(code *)PTR_printf_80066214)("DrawSync(%d)...\n",mode);
  }
  iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x3c))(mode);
  return iVar1;
}



void FUN_8005584c(undefined4 param_1,short *param_2)

{
  int iVar1;
  char *pcVar2;
  int iVar3;
  
  if (DAT_8006621a == '\x01') {
    iVar3 = (int)param_2[2];
    if ((iVar3 <= DAT_8006621c) && (iVar3 + *param_2 <= (int)DAT_8006621c)) {
      iVar1 = (int)param_2[1];
      if (((iVar1 <= DAT_8006621e) &&
          (((iVar1 + param_2[3] <= (int)DAT_8006621e && (0 < iVar3)) && (-1 < *param_2)))) &&
         ((-1 < iVar1 && (0 < param_2[3])))) {
        return;
      }
    }
    pcVar2 = "%s:bad RECT";
  }
  else {
    if (DAT_8006621a != '\x02') {
      return;
    }
    pcVar2 = "%s:";
  }
  (*(code *)PTR_printf_80066214)(pcVar2,param_1);
  (*(code *)PTR_printf_80066214)
            ("(%d,%d)-(%d,%d)\n",(int)*param_2,(int)param_2[1],(int)param_2[2],(int)param_2[3]);
  return;
}



int ClearImage(RECT *rect,u_char r,u_char g,u_char b)

{
  int iVar1;
  
  FUN_8005584c("ClearImage",rect);
  iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 8))
                    (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0xc),rect
                     ,8,(uint)b << 0x10 | (uint)g << 8 | (uint)r);
  return iVar1;
}



int LoadImage(RECT *rect,u_long *p)

{
  int iVar1;
  
  FUN_8005584c("LoadImage",rect);
  iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 8))
                    (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x20),
                     rect,8,p);
  return iVar1;
}



int StoreImage(RECT *rect,u_long *p)

{
  int iVar1;
  
  FUN_8005584c("StoreImage",rect);
  iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 8))
                    (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x1c),
                     rect,8,p);
  return iVar1;
}



int MoveImage(RECT *rect,int x,int y)

{
  int iVar1;
  
  FUN_8005584c("MoveImage",rect);
  iVar1 = -1;
  if (rect->w != 0) {
    if (rect->h == 0) {
      iVar1 = -1;
    }
    else {
      DAT_800662bc = y << 0x10 | x & 0xffffU;
      DAT_800662b8._0_2_ = rect->x;
      DAT_800662b8._2_2_ = rect->y;
      DAT_800662c0._0_2_ = rect->w;
      DAT_800662c0._2_2_ = rect->h;
      iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 8))
                        (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x18)
                         ,&DAT_800662b0,0x14,0);
    }
  }
  return iVar1;
}



void FUN_80055b70(undefined4 param_1)

{
  if (1 < DAT_8006621a) {
    (*(code *)PTR_printf_80066214)("DrawOTag(%08x)...\n",param_1);
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 8))
            (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x18),param_1,0,0
            );
  return;
}



uchar * FUN_80055be0(uchar *param_1)

{
  undefined *puVar1;
  
  if (1 < DAT_8006621a) {
    (*(code *)PTR_printf_80066214)("PutDrawEnv(%08x)...\n",param_1);
  }
  FUN_80056390(param_1 + 0x1c,param_1);
  puVar1 = PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210;
  *(uint *)(param_1 + 0x1c) = *(uint *)(param_1 + 0x1c) | 0xffffff;
  (**(code **)(puVar1 + 8))(*(undefined4 *)(puVar1 + 0x18),param_1 + 0x1c,0x40,0);
  memcpy(&DAT_80066228,param_1,0x5c);
  return param_1;
}



ushort * FUN_80055ca0(ushort *param_1)

{
  ushort uVar1;
  bool bVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  uint uVar10;
  uint uVar11;
  
  uVar10 = 0x8000000;
  if (1 < DAT_8006621a) {
    (*(code *)PTR_printf_80066214)("PutDispEnv(%08x)...\n",param_1);
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x10))
            ((param_1[1] & 0x3ff) << 10 | *param_1 & 0x3ff | 0x5000000);
  if ((((DAT_80066294 != *(int *)(param_1 + 8)) || (DAT_80066284 != *param_1)) ||
      (DAT_80066286 != param_1[1])) ||
     ((DAT_80066288 != param_1[2] || (DAT_8006628a != param_1[3])))) {
    cVar3 = FUN_8005c238();
    *(char *)(param_1 + 9) = cVar3;
    if (cVar3 == '\x01') {
      uVar10 = 0x8000008;
    }
    if (*(char *)((int)param_1 + 0x11) != '\0') {
      uVar10 = uVar10 | 0x10;
    }
    if (*(char *)(param_1 + 8) != '\0') {
      uVar10 = uVar10 | 0x20;
    }
    if (DAT_8006621b != '\0') {
      uVar10 = uVar10 | 0x80;
    }
    uVar1 = param_1[2];
    if (0x118 < (short)uVar1) {
      if ((short)uVar1 < 0x161) {
        uVar10 = uVar10 | 1;
      }
      else if ((short)uVar1 < 0x191) {
        uVar10 = uVar10 | 0x40;
      }
      else if ((short)uVar1 < 0x231) {
        uVar10 = uVar10 | 2;
      }
      else {
        uVar10 = uVar10 | 3;
      }
    }
    bVar2 = (short)param_1[3] < 0x121;
    if (*(char *)(param_1 + 9) == '\0') {
      bVar2 = (short)param_1[3] < 0x101;
    }
    if (!bVar2) {
      uVar10 = uVar10 | 0x24;
    }
    (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x10))(uVar10);
    *(undefined *)(param_1 + 9) = 8;
  }
  if (((DAT_8006628c == param_1[4]) && (DAT_8006628e == param_1[5])) &&
     ((DAT_80066290 == param_1[6] &&
      ((DAT_80066292 == param_1[7] && (*(char *)(param_1 + 9) != '\b')))))) goto LAB_80056168;
  cVar3 = FUN_8005c238();
  *(char *)(param_1 + 9) = cVar3;
  uVar10 = (int)(short)param_1[5] + 0x13;
  if (cVar3 == '\0') {
    uVar10 = (int)(short)param_1[5] + 0x10;
  }
  uVar11 = uVar10 + (int)(short)param_1[7];
  if ((short)param_1[7] == 0) {
    uVar11 = uVar10 + 0xf0;
  }
  uVar1 = param_1[2];
  iVar9 = 0;
  if ((((0x118 < (short)uVar1) && (iVar9 = 1, 0x160 < (short)uVar1)) &&
      (iVar9 = 2, 400 < (short)uVar1)) && (iVar9 = 4, (short)uVar1 < 0x231)) {
    iVar9 = 3;
  }
  iVar4 = ((uint)*(byte *)(param_1 + 9) * 5 + iVar9) * 4;
  iVar5 = (uint)*(ushort *)(&DAT_800662ee + iVar4) - (uint)*(ushort *)(&DAT_800662ec + iVar4);
  uVar7 = (uint)*(ushort *)(&DAT_800662ec + iVar4) +
          (int)(short)param_1[4] * (uint)(byte)(&DAT_80066314)[iVar9];
  if ((short)param_1[6] != 0) {
    iVar5 = iVar5 * (short)param_1[6] >> 8;
  }
  uVar6 = uVar7 + iVar5;
  if (*(char *)(param_1 + 9) == '\0') {
    uVar8 = 500;
    if ((499 < (int)uVar7) && (uVar8 = 0xcb2, (int)uVar7 < 0xcb3)) {
      uVar8 = uVar7;
    }
    uVar7 = uVar8 + (uint)(byte)(&DAT_80066314)[iVar9] * 4;
    if (((int)uVar7 <= (int)uVar6) && (uVar7 = 0xcda, (int)uVar6 < 0xcdb)) {
      uVar7 = uVar6;
    }
    if ((int)uVar10 < 0x10) {
      uVar6 = 0x10;
    }
    else {
      uVar6 = 0x101;
      if ((int)uVar10 < 0x102) {
        uVar6 = uVar10;
      }
    }
    uVar10 = uVar6 + 2;
    bVar2 = (int)uVar11 < 0x103;
    if ((int)uVar10 <= (int)uVar11) {
      uVar10 = 0x102;
      goto LAB_80056100;
    }
  }
  else {
    uVar8 = 0x21c;
    if ((0x21b < (int)uVar7) && (uVar8 = 0xc94, (int)uVar7 < 0xc95)) {
      uVar8 = uVar7;
    }
    uVar7 = uVar8 + (uint)(byte)(&DAT_80066314)[iVar9] * 4;
    if (((int)uVar7 <= (int)uVar6) && (uVar7 = 0xcbc, (int)uVar6 < 0xcbd)) {
      uVar7 = uVar6;
    }
    if ((int)uVar10 < 0x13) {
      uVar6 = 0x13;
    }
    else {
      uVar6 = 0x12f;
      if ((int)uVar10 < 0x130) {
        uVar6 = uVar10;
      }
    }
    bVar2 = (int)uVar11 < 0x132;
    uVar10 = uVar6 + 2;
    if ((int)(uVar6 + 2) <= (int)uVar11) {
      uVar10 = 0x131;
LAB_80056100:
      if (bVar2) {
        uVar10 = uVar11;
      }
    }
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x10))
            ((uVar7 & 0xfff) << 0xc | uVar8 & 0xfff | 0x6000000);
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_140_1998_01_12_07_80066210 + 0x10))
            ((uVar10 & 0x3ff) << 10 | uVar6 & 0x3ff | 0x7000000);
LAB_80056168:
  memcpy((uchar *)&DAT_80066284,(uchar *)param_1,0x14);
  return param_1;
}



void FUN_80056198(int param_1,ushort *param_2)

{
  ushort uVar1;
  ushort uVar2;
  ushort uVar3;
  undefined4 uVar4;
  char cVar5;
  undefined4 local_18;
  undefined4 local_14;
  
  uVar4 = FUN_80056620((int)(short)*param_2,(int)(short)param_2[1]);
  *(undefined4 *)(param_1 + 4) = uVar4;
  uVar4 = func_0x800566b8((int)(((uint)param_2[2] + (uint)*param_2 + -1) * 0x10000) >> 0x10,
                          (int)(((uint)param_2[1] + (uint)param_2[3] + -1) * 0x10000) >> 0x10);
  *(undefined4 *)(param_1 + 8) = uVar4;
  uVar4 = func_0x80056750((int)(short)param_2[4],(int)(short)param_2[5]);
  *(undefined4 *)(param_1 + 0xc) = uVar4;
  uVar4 = FUN_80056600(*(undefined *)((int)param_2 + 0x17),*(undefined *)(param_2 + 0xb),param_2[10]
                      );
  *(undefined4 *)(param_1 + 0x10) = uVar4;
  uVar4 = func_0x8005676c(param_2 + 6);
  *(undefined4 *)(param_1 + 0x14) = uVar4;
  *(undefined4 *)(param_1 + 0x18) = 0xe6000000;
  cVar5 = '\a';
  if (*(char *)(param_2 + 0xc) != '\0') {
    uVar3 = param_2[2];
    uVar1 = param_2[3];
    uVar2 = 0;
    if ((-1 < (short)uVar3) && (uVar2 = DAT_8006621c - 1, (int)(short)uVar3 <= DAT_8006621c + -1)) {
      uVar2 = uVar3;
    }
    if ((short)uVar1 < 0) {
      uVar3 = 0;
    }
    else {
      uVar3 = DAT_8006621e - 1;
      if ((int)(short)uVar1 <= DAT_8006621e + -1) {
        uVar3 = uVar1;
      }
    }
    cVar5 = '\n';
    local_14 = CONCAT22(uVar3,uVar2);
    local_18 = CONCAT22(param_2[1] - param_2[5],*param_2 - param_2[4]);
    *(uint *)(param_1 + 0x1c) =
         (uint)*(byte *)((int)param_2 + 0x1b) << 0x10 |
         (uint)*(byte *)(param_2 + 0xd) << 8 | 0x60000000 | (uint)*(byte *)((int)param_2 + 0x19);
    *(undefined4 *)(param_1 + 0x20) = local_18;
    *(undefined4 *)(param_1 + 0x24) = local_14;
  }
  *(char *)(param_1 + 3) = cVar5 + -1;
  return;
}



void FUN_80056390(int param_1,undefined4 *param_2)

{
  ushort uVar1;
  ushort uVar2;
  ushort uVar3;
  undefined4 uVar4;
  char cVar5;
  undefined4 local_18;
  undefined4 local_14;
  
  uVar4 = FUN_80056620((int)(short)*(ushort *)param_2,(int)(short)*(ushort *)((int)param_2 + 2));
  *(undefined4 *)(param_1 + 4) = uVar4;
  uVar4 = func_0x800566b8((int)(((uint)*(ushort *)(param_2 + 1) + (uint)*(ushort *)param_2 + -1) *
                               0x10000) >> 0x10,
                          (int)(((uint)*(ushort *)((int)param_2 + 2) +
                                 (uint)*(ushort *)((int)param_2 + 6) + -1) * 0x10000) >> 0x10);
  *(undefined4 *)(param_1 + 8) = uVar4;
  uVar4 = func_0x80056750((int)(short)*(ushort *)(param_2 + 2),
                          (int)(short)*(ushort *)((int)param_2 + 10));
  *(undefined4 *)(param_1 + 0xc) = uVar4;
  uVar4 = FUN_80056600(*(undefined *)((int)param_2 + 0x17),*(undefined *)((int)param_2 + 0x16),
                       *(ushort *)(param_2 + 5));
  *(undefined4 *)(param_1 + 0x10) = uVar4;
  uVar4 = func_0x8005676c(param_2 + 3);
  *(undefined4 *)(param_1 + 0x14) = uVar4;
  *(undefined4 *)(param_1 + 0x18) = 0xe6000000;
  cVar5 = '\a';
  if (*(char *)(param_2 + 6) != '\0') {
    uVar4 = *param_2;
    uVar3 = *(ushort *)(param_2 + 1);
    uVar1 = *(ushort *)((int)param_2 + 6);
    uVar2 = 0;
    if ((-1 < (short)uVar3) && (uVar2 = DAT_8006621c - 1, (int)(short)uVar3 <= DAT_8006621c + -1)) {
      uVar2 = uVar3;
    }
    if ((short)uVar1 < 0) {
      uVar3 = 0;
    }
    else {
      uVar3 = DAT_8006621e - 1;
      if ((int)(short)uVar1 <= DAT_8006621e + -1) {
        uVar3 = uVar1;
      }
    }
    local_14 = CONCAT22(uVar3,uVar2);
    if (((*(ushort *)param_2 & 0x3f) == 0) && ((uVar2 & 0x3f) == 0)) {
      cVar5 = '\n';
      *(uint *)(param_1 + 0x1c) =
           (uint)*(byte *)((int)param_2 + 0x1b) << 0x10 |
           (uint)*(byte *)((int)param_2 + 0x1a) << 8 | 0x2000000 |
           (uint)*(byte *)((int)param_2 + 0x19);
      *(undefined4 *)(param_1 + 0x20) = uVar4;
      *(undefined4 *)(param_1 + 0x24) = local_14;
    }
    else {
      cVar5 = '\n';
      local_18 = CONCAT22(*(ushort *)((int)param_2 + 2) - *(ushort *)((int)param_2 + 10),
                          *(ushort *)param_2 - *(ushort *)(param_2 + 2));
      *(uint *)(param_1 + 0x1c) =
           (uint)*(byte *)((int)param_2 + 0x1b) << 0x10 |
           (uint)*(byte *)((int)param_2 + 0x1a) << 8 | 0x60000000 |
           (uint)*(byte *)((int)param_2 + 0x19);
      *(undefined4 *)(param_1 + 0x20) = local_18;
      *(undefined4 *)(param_1 + 0x24) = local_14;
    }
  }
  *(char *)(param_1 + 3) = cVar5 + -1;
  return;
}



uint FUN_80056600(int param_1,int param_2,uint param_3)

{
  uint uVar1;
  
  uVar1 = 0xe1000000;
  if (param_2 != 0) {
    uVar1 = 0xe1000200;
  }
  param_3 = param_3 & 0x9ff;
  if (param_1 != 0) {
    param_3 = param_3 | 0x400;
  }
  return uVar1 | param_3;
}



uint FUN_80056620(uint param_1,uint param_2)

{
  uint uVar1;
  uint uVar2;
  
  uVar1 = 0;
  if ((-1 < (short)param_1) &&
     (uVar1 = DAT_8006621c - 1, (int)(short)param_1 <= (short)DAT_8006621c + -1)) {
    uVar1 = param_1;
  }
  if ((short)param_2 < 0) {
    uVar2 = 0;
  }
  else {
    uVar2 = param_2 & 0x3ff;
    if ((int)(short)param_2 <= (short)DAT_8006621e + -1) goto LAB_800566a0;
    uVar2 = DAT_8006621e - 1;
  }
  uVar2 = uVar2 & 0x3ff;
LAB_800566a0:
  return uVar2 << 10 | uVar1 & 0x3ff | 0xe3000000;
}



undefined4 FUN_800567ec(void)

{
  return *(undefined4 *)PTR_GPU_REG1_80066320;
}



int FUN_80056804(int param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  
  *(uint *)PTR_DMA_DPCR_8006633c = *(uint *)PTR_DMA_DPCR_8006633c | 0x8000000;
  *(undefined4 *)PTR_DMA_OTC_CHCR_80066338 = 0;
  *(int *)PTR_DMA_OTC_MADR_80066330 = param_1 + param_2 * 4 + -4;
  *(int *)PTR_DMA_OTC_BCR_80066334 = param_2;
  *(undefined4 *)PTR_DMA_OTC_CHCR_80066338 = 0x11000002;
  FUN_80057880();
  uVar1 = *(uint *)PTR_DMA_OTC_CHCR_80066338;
  while( true ) {
    if ((uVar1 & 0x1000000) == 0) {
      return param_2;
    }
    iVar2 = FUN_800578b4();
    if (iVar2 != 0) break;
    uVar1 = *(uint *)PTR_DMA_OTC_CHCR_80066338;
  }
  return -1;
}



undefined4 FUN_800568e4(undefined4 *param_1,uint param_2)

{
  ushort uVar1;
  uint uVar2;
  
  if ((short)*(ushort *)(param_1 + 1) < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = DAT_8006621c - 1;
    if ((int)(short)*(ushort *)(param_1 + 1) <= DAT_8006621c + -1) {
      uVar1 = *(ushort *)(param_1 + 1);
    }
  }
  *(ushort *)(param_1 + 1) = uVar1;
  if ((short)*(ushort *)((int)param_1 + 6) < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = DAT_8006621e - 1;
    if ((int)(short)*(ushort *)((int)param_1 + 6) <= DAT_8006621e + -1) {
      uVar1 = *(ushort *)((int)param_1 + 6);
    }
  }
  *(ushort *)((int)param_1 + 6) = uVar1;
  if (((*(ushort *)param_1 & 0x3f) == 0) && ((*(ushort *)(param_1 + 1) & 0x3f) == 0)) {
    DAT_8006b7f0 = 0x5ffffff;
    DAT_8006b7f4 = 0xe6000000;
    DAT_8006b7fc = param_2 & 0xffffff | 0x2000000;
    DAT_8006b7f8 = *(uint *)PTR_GPU_REG1_80066320 & 0x7ff | (param_2 >> 0x1f) << 10 | 0xe1000000;
    DAT_8006b800 = *param_1;
    DAT_8006b804 = param_1[1];
  }
  else {
    DAT_8006b7f0 = 0x806b818;
    DAT_8006b808 = param_2 & 0xffffff | 0x60000000;
    DAT_8006b800 = 0xe6000000;
    DAT_8006b7f4 = 0xe3000000;
    DAT_8006b7f8 = 0xe4ffffff;
    DAT_8006b7fc = 0xe5000000;
    DAT_8006b804 = *(uint *)PTR_GPU_REG1_80066320 & 0x7ff | (param_2 >> 0x1f) << 10 | 0xe1000000;
    DAT_8006b80c = *param_1;
    DAT_8006b810 = param_1[1];
    DAT_8006b818 = 0x3ffffff;
    uVar2 = FUN_80057090(3);
    DAT_8006b81c = uVar2 | 0xe3000000;
    uVar2 = FUN_80057090(4);
    DAT_8006b820 = uVar2 | 0xe4000000;
    uVar2 = FUN_80057090(5);
    DAT_8006b824 = uVar2 | 0xe5000000;
  }
  FUN_80057048(&DAT_8006b7f0);
  return 0;
}



// WARNING: Removing unreachable block (ram,0x80056c80)

undefined4 FUN_80056b14(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  
  FUN_80057880();
  if (*(short *)(param_1 + 1) < 0) {
    sVar5 = 0;
  }
  else {
    sVar5 = *(short *)(param_1 + 1);
    if (DAT_8006621c < *(short *)(param_1 + 1)) {
      sVar5 = DAT_8006621c;
    }
  }
  sVar6 = *(short *)((int)param_1 + 6);
  *(short *)(param_1 + 1) = sVar5;
  if (*(short *)((int)param_1 + 6) < 0) {
    sVar5 = 0;
  }
  else {
    sVar5 = DAT_8006621e;
    if (*(short *)((int)param_1 + 6) <= DAT_8006621e) goto LAB_80056bbc;
  }
  sVar6 = sVar5;
LAB_80056bbc:
  *(short *)((int)param_1 + 6) = sVar6;
  iVar4 = (int)*(short *)(param_1 + 1) * (int)sVar6 + 1;
  iVar7 = iVar4 - (iVar4 >> 0x1f) >> 5;
  if (iVar4 / 2 < 1) {
    uVar1 = 0xffffffff;
  }
  else {
    iVar4 = iVar4 / 2 + iVar7 * -0x10;
    uVar2 = *(uint *)PTR_GPU_REG1_80066320;
    while ((uVar2 & 0x4000000) == 0) {
      iVar3 = FUN_800578b4();
      if (iVar3 != 0) {
        return 0xffffffff;
      }
      uVar2 = *(uint *)PTR_GPU_REG1_80066320;
    }
    *(undefined4 *)PTR_GPU_REG1_80066320 = 0x4000000;
    *(undefined4 *)PTR_GPU_REG0_8006631c = 0x1000000;
    *(undefined4 *)PTR_GPU_REG0_8006631c = 0xa0000000;
    *(undefined4 *)PTR_GPU_REG0_8006631c = *param_1;
    *(undefined4 *)PTR_GPU_REG0_8006631c = param_1[1];
    while (iVar4 = iVar4 + -1, iVar4 != -1) {
      uVar1 = *param_2;
      param_2 = param_2 + 1;
      *(undefined4 *)PTR_GPU_REG0_8006631c = uVar1;
    }
    if (iVar7 != 0) {
      *(undefined4 *)PTR_GPU_REG1_80066320 = 0x4000002;
      *(undefined4 **)PTR_DMA_GPU_MADR_80066324 = param_2;
      *(uint *)PTR_DMA_GPU_BCR_80066328 = iVar7 << 0x10 | 0x10;
      *(undefined4 *)PTR_DMA_GPU_CHCR_8006632c = 0x1000201;
    }
    uVar1 = 0;
  }
  return uVar1;
}



void FUN_80056fd0(uint param_1)

{
  *(uint *)PTR_GPU_REG1_80066320 = param_1;
  (&DAT_8006b838)[param_1 >> 0x18] = (char)param_1;
  return;
}



undefined FUN_80056ff4(int param_1)

{
  return (&DAT_8006b838)[param_1];
}



undefined4 FUN_80057008(undefined4 *param_1,int param_2)

{
  undefined4 uVar1;
  int iVar2;
  
  iVar2 = param_2 + -1;
  *(undefined4 *)PTR_GPU_REG1_80066320 = 0x4000000;
  if (param_2 != 0) {
    do {
      uVar1 = *param_1;
      param_1 = param_1 + 1;
      iVar2 = iVar2 + -1;
      *(undefined4 *)PTR_GPU_REG0_8006631c = uVar1;
    } while (iVar2 != -1);
  }
  return 0;
}



void FUN_80057048(undefined4 param_1)

{
  *(undefined4 *)PTR_GPU_REG1_80066320 = 0x4000002;
  *(undefined4 *)PTR_DMA_GPU_MADR_80066324 = param_1;
  *(undefined4 *)PTR_DMA_GPU_BCR_80066328 = 0;
  *(undefined4 *)PTR_DMA_GPU_CHCR_8006632c = 0x1000401;
  return;
}



uint FUN_80057090(uint param_1)

{
  *(uint *)PTR_GPU_REG1_80066320 = param_1 | 0x10000000;
  return *(uint *)PTR_GPU_REG0_8006631c & 0xffffff;
}



void FUN_800570c0(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  FUN_800570e4(param_1,param_2,0,param_3);
  return;
}



uint FUN_800570e4(code *param_1,undefined4 *param_2,int param_3,undefined4 param_4)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  undefined4 uVar4;
  int iVar5;
  
  FUN_80057880();
  while( true ) {
    if ((DAT_80066340 + 1 & 0x3f) != DAT_80066344) {
      DAT_80066348 = FUN_800549d8(0);
      DAT_80066220 = 1;
      if ((DAT_80066219 == '\0') ||
         (((DAT_80066340 == DAT_80066344 && ((*(uint *)PTR_DMA_GPU_CHCR_8006632c & 0x1000000) == 0))
          && (DAT_80066224 == 0)))) {
        do {
        } while ((*(uint *)PTR_GPU_REG1_80066320 & 0x4000000) == 0);
        (*param_1)(param_2,param_4);
        FUN_800549d8(DAT_80066348);
        uVar1 = 0;
      }
      else {
        FUN_80054904(2,FUN_80057394);
        iVar5 = 0;
        if (param_3 == 0) {
          *(undefined4 **)(&DAT_8006b944 + DAT_80066340 * 0x60) = param_2;
        }
        else {
          while( true ) {
            iVar2 = param_3;
            if (param_3 < 0) {
              iVar2 = param_3 + 3;
            }
            iVar3 = iVar5 * 4;
            if (iVar2 >> 2 <= iVar5) break;
            uVar4 = *param_2;
            param_2 = param_2 + 1;
            iVar5 = iVar5 + 1;
            *(undefined4 *)(&DAT_8006b94c + iVar3 + DAT_80066340 * 0x60) = uVar4;
          }
          *(undefined **)(&DAT_8006b944 + DAT_80066340 * 0x60) = &DAT_8006b94c + DAT_80066340 * 0x60
          ;
        }
        *(undefined4 *)(&DAT_8006b948 + DAT_80066340 * 0x60) = param_4;
        *(code **)(&DAT_8006b940 + DAT_80066340 * 0x60) = param_1;
        DAT_80066340 = DAT_80066340 + 1 & 0x3f;
        FUN_800549d8(DAT_80066348);
        FUN_80057394();
        uVar1 = DAT_80066340 - DAT_80066344 & 0x3f;
      }
      return uVar1;
    }
    iVar5 = FUN_800578b4();
    if (iVar5 != 0) break;
    FUN_80057394();
  }
  return 0xffffffff;
}



uint FUN_80057394(void)

{
  uint uVar1;
  
  uVar1 = 1;
  if ((*(uint *)PTR_DMA_GPU_CHCR_8006632c & 0x1000000) == 0) {
    DAT_8006634c = FUN_800549d8(0);
    if (DAT_80066340 != DAT_80066344) {
      uVar1 = *(uint *)PTR_DMA_GPU_CHCR_8006632c;
      while ((uVar1 & 0x1000000) == 0) {
        if (((DAT_80066344 + 1 & 0x3f) == DAT_80066340) && (DAT_80066224 == (code *)0x0)) {
          FUN_80054904(2,0);
        }
        uVar1 = *(uint *)PTR_GPU_REG1_80066320;
        while ((uVar1 & 0x4000000) == 0) {
          uVar1 = *(uint *)PTR_GPU_REG1_80066320;
        }
        (**(code **)(&DAT_8006b940 + DAT_80066344 * 0x60))
                  (*(undefined4 *)(&DAT_8006b944 + DAT_80066344 * 0x60),
                   *(undefined4 *)(&DAT_8006b948 + DAT_80066344 * 0x60));
        DAT_80066344 = DAT_80066344 + 1 & 0x3f;
        if (DAT_80066340 == DAT_80066344) break;
        uVar1 = *(uint *)PTR_DMA_GPU_CHCR_8006632c;
      }
    }
    FUN_800549d8(DAT_8006634c);
    if ((((DAT_80066340 == DAT_80066344) && ((*(uint *)PTR_DMA_GPU_CHCR_8006632c & 0x1000000) == 0))
        && (DAT_80066220 != 0)) && (DAT_80066224 != (code *)0x0)) {
      DAT_80066220 = 0;
      (*DAT_80066224)();
    }
    uVar1 = DAT_80066340 - DAT_80066344 & 0x3f;
  }
  return uVar1;
}



undefined4 FUN_800575f4(uint param_1)

{
  undefined4 uVar1;
  uint uVar2;
  
  DAT_80066350 = FUN_800549d8(0);
  DAT_80066344 = 0;
  DAT_80066340 = 0;
  uVar2 = param_1 & 7;
  if (uVar2 == 1) {
LAB_800576c4:
    *(undefined4 *)PTR_DMA_GPU_CHCR_8006632c = 0x401;
    *(uint *)PTR_DMA_DPCR_8006633c = *(uint *)PTR_DMA_DPCR_8006633c | 0x800;
    *(undefined4 *)PTR_GPU_REG1_80066320 = 0x2000000;
    *(undefined4 *)PTR_GPU_REG1_80066320 = 0x1000000;
  }
  else {
    if (uVar2 < 2) {
      if (uVar2 != 0) goto LAB_80057710;
    }
    else {
      if (uVar2 == 3) goto LAB_800576c4;
      if (uVar2 != 5) goto LAB_80057710;
    }
    *(undefined4 *)PTR_DMA_GPU_CHCR_8006632c = 0x401;
    *(uint *)PTR_DMA_DPCR_8006633c = *(uint *)PTR_DMA_DPCR_8006633c | 0x800;
    *(undefined4 *)PTR_GPU_REG1_80066320 = 0;
    FUN_80057ac0(&DAT_8006b838,0,0x100);
    FUN_80057ac0(&DAT_8006b940,0,0x1800);
  }
LAB_80057710:
  FUN_800549d8(DAT_80066350);
  uVar1 = 0;
  if ((param_1 & 7) == 0) {
    uVar1 = FUN_800579f8(param_1);
  }
  return uVar1;
}



uint FUN_80057744(int param_1)

{
  int iVar1;
  uint uVar2;
  
  if (param_1 == 0) {
    FUN_80057880();
    do {
      if (DAT_80066340 == DAT_80066344) {
        while (((*(uint *)PTR_DMA_GPU_CHCR_8006632c & 0x1000000) != 0 ||
               ((*(uint *)PTR_GPU_REG1_80066320 & 0x4000000) == 0))) {
          iVar1 = FUN_800578b4();
          if (iVar1 != 0) {
            return 0xffffffff;
          }
        }
        return 0;
      }
      FUN_80057394();
      iVar1 = FUN_800578b4();
    } while (iVar1 == 0);
    return 0xffffffff;
  }
  uVar2 = DAT_80066340 - DAT_80066344 & 0x3f;
  if (uVar2 != 0) {
    FUN_80057394();
  }
  if (((*(uint *)PTR_DMA_GPU_CHCR_8006632c & 0x1000000) == 0) &&
     ((*(uint *)PTR_GPU_REG1_80066320 & 0x4000000) != 0)) {
    return uVar2;
  }
  if (uVar2 != 0) {
    return uVar2;
  }
  return 1;
}



void FUN_80057880(void)

{
  int iVar1;
  
  iVar1 = VSync(-1);
  DAT_80066354 = iVar1 + 0xf0;
  DAT_80066358 = 0;
  return;
}



undefined4 FUN_800578b4(void)

{
  bool bVar1;
  int iVar2;
  undefined4 uVar3;
  
  iVar2 = VSync(-1);
  if ((DAT_80066354 < iVar2) ||
     (iVar2 = DAT_80066358 + 1, bVar1 = 0xf0000 < DAT_80066358, DAT_80066358 = iVar2, bVar1)) {
    printf("GPU timeout:que=%d,stat=%08x,chcr=%08x,madr=%08x\n",DAT_80066340 - DAT_80066344 & 0x3f,
           *(undefined4 *)PTR_GPU_REG1_80066320,*(undefined4 *)PTR_DMA_GPU_CHCR_8006632c,
           *(undefined4 *)PTR_DMA_GPU_MADR_80066324);
    DAT_80066350 = FUN_800549d8(0);
    DAT_80066344 = 0;
    DAT_80066340 = 0;
    *(undefined4 *)PTR_DMA_GPU_CHCR_8006632c = 0x401;
    *(uint *)PTR_DMA_DPCR_8006633c = *(uint *)PTR_DMA_DPCR_8006633c | 0x800;
    *(undefined4 *)PTR_GPU_REG1_80066320 = 0x2000000;
    *(undefined4 *)PTR_GPU_REG1_80066320 = 0x1000000;
    FUN_800549d8(DAT_80066350);
    uVar3 = 0xffffffff;
  }
  else {
    uVar3 = 0;
  }
  return uVar3;
}



undefined8 FUN_800579f8(uint param_1)

{
  undefined *puVar1;
  undefined4 uVar2;
  undefined *puVar3;
  
  *(undefined4 *)PTR_GPU_REG1_80066320 = 0x10000007;
  puVar1 = PTR_GPU_REG1_80066320;
  puVar3 = (undefined *)0xe1000000;
  if ((*(uint *)PTR_GPU_REG0_8006631c & 0xffffff) == 2) {
    if ((param_1 & 8) == 0) {
      uVar2 = 1;
    }
    else {
      uVar2 = 2;
      *(undefined4 *)PTR_GPU_REG1_80066320 = 0x9000001;
      puVar3 = puVar1;
    }
  }
  else {
    *(uint *)PTR_GPU_REG0_8006631c = *(uint *)PTR_GPU_REG1_80066320 & 0x3fff | 0xe1001000;
    uVar2 = 0;
    puVar3 = *(undefined **)PTR_GPU_REG0_8006631c;
  }
  return CONCAT44(puVar3,uVar2);
}



void FUN_80057a98(void)

{
  FUN_80054904(2,FUN_80057394);
  return;
}



void FUN_80057ac0(undefined *param_1,undefined param_2,int param_3)

{
  int iVar1;
  
  iVar1 = param_3 + -1;
  if (param_3 != 0) {
    do {
      *param_1 = param_2;
      iVar1 = iVar1 + -1;
      param_1 = param_1 + 1;
    } while (iVar1 != -1);
  }
  return;
}



// Possible REG13.OBJ/SetGeomScreen

void FUN_80057ae8(undefined4 param_1)

{
  gte_ldH(param_1);
  return;
}



// Possible REG12.OBJ/SetGeomOffset

void FUN_80057af8(int param_1,int param_2)

{
  gte_ldOFX(param_1 << 0x10);
  gte_ldOFY(param_2 << 0x10);
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void InitGeom(void)

{
  undefined4 unaff_retaddr;
  
  DAT_80066368 = unaff_retaddr;
  _patch_gte();
  setCopReg(0,Status,Status | 0x40000000,0);
  gte_ldZSF3(0x155);
  gte_ldZSF4(0x100);
  gte_ldH(1000);
  gte_ldDQA(0xffffef9e);
  gte_ldDQB(0x1400000);
  gte_ldOFX(0);
  gte_ldOFY(0);
  return;
}



void FUN_80057bdc(char param_1,undefined4 param_2)

{
  int iVar1;
  undefined4 uVar2;
  undefined auStack_20 [16];
  
  DAT_800663ac = param_2;
  if (param_1 == '\x01') {
    if (0 < DAT_8006638c) {
      if (DAT_80066388 == 0x200) {
        if ((DAT_800663bc & 1) == 0) {
          FUN_80058c14(auStack_20,3);
        }
        else {
          CdDataCallback((func *)0x0);
          FUN_80058c34(auStack_20,3);
          FUN_80058c78(0);
          CdDataCallback(FUN_80057e50);
        }
        iVar1 = FUN_80058d9c(auStack_20);
        if (iVar1 != DAT_80066398) {
          puts("CdRead: sector error\n");
          DAT_8006638c = -1;
        }
      }
      if ((DAT_800663bc & 1) == 0) {
        FUN_80058c14(DAT_80066380,DAT_80066388);
        DAT_80066380 = DAT_80066380 + DAT_80066388 * 4;
        DAT_8006638c = DAT_8006638c + -1;
        DAT_80066398 = DAT_80066398 + 1;
      }
      else {
        FUN_80058c34(DAT_80066380,DAT_80066388);
      }
    }
  }
  else {
    DAT_8006638c = -1;
  }
  DAT_80066390 = VSync(-1);
  if (DAT_8006638c < 0) {
    FUN_80057f20(1);
  }
  iVar1 = VSync(-1);
  if (DAT_80066394 + 0x4b0 < iVar1) {
    DAT_8006638c = -1;
  }
  if ((DAT_8006638c == 0) || (iVar1 = VSync(-1), DAT_80066394 + 0x4b0 < iVar1)) {
    FUN_80058844(DAT_800663a4);
    if ((DAT_800663bc & 1) != 0) {
      CdDataCallback(DAT_800663a8);
    }
    FUN_80058830(&LAB_80057ba8);
    FUN_80058994(9,0);
    DAT_8006639c = 1;
    if (DAT_800663b8 != (code *)0x0) {
      uVar2 = 5;
      if (DAT_8006638c == 0) {
        uVar2 = 2;
      }
      (*DAT_800663b8)(uVar2,param_2);
    }
  }
  return;
}



void FUN_80057e50(void)

{
  DAT_80066380 = DAT_80066380 + DAT_80066388 * 4;
  DAT_8006638c = DAT_8006638c + -1;
  DAT_80066398 = DAT_80066398 + 1;
  if (DAT_8006638c == 0) {
    FUN_80058844(DAT_800663a4);
    if ((DAT_800663bc & 1) != 0) {
      CdDataCallback(DAT_800663a8);
    }
    FUN_80058830(&LAB_80057ba8);
    FUN_80058994(9,0);
    DAT_8006639c = 1;
    if (DAT_800663b8 != (code *)0x0) {
      (*DAT_800663b8)(2,DAT_800663ac);
    }
  }
  return;
}



undefined4 FUN_80057f20(int param_1)

{
  uint uVar1;
  u_char *param;
  int iVar2;
  undefined4 uVar3;
  uint uVar4;
  u_char local_18 [8];
  
  FUN_80058830(0);
  FUN_80058844(0);
  if ((DAT_800663bc & 1) != 0) {
    CdDataCallback((func *)0x0);
  }
  uVar1 = CdStatus();
  if ((uVar1 & 0x10) != 0) {
    uVar1 = VSync(-1);
    if ((uVar1 & 0x3f) == 0) {
      puts("CdRead: Shell open...\n");
    }
    FUN_80058994(1,0);
    DAT_80066394 = VSync(-1);
    DAT_8006638c = 0xffffffff;
    return 0xffffffff;
  }
  if (param_1 != 0) {
    puts("CdRead: retry...\n");
    CdControl('\t',(u_char *)0x0,(u_char *)0x0);
    param = (u_char *)FUN_800587e4();
    iVar2 = CdControl('\x02',param,(u_char *)0x0);
    if (iVar2 == 0) {
      DAT_8006638c = 0xffffffff;
      return 0xffffffff;
    }
  }
  FUN_800587f0();
  local_18[0] = (u_char)DAT_80066384;
  uVar4 = DAT_80066384 & 0xff;
  uVar1 = FUN_800587c4();
  if (((uVar4 != uVar1) || (param_1 != 0)) &&
     (iVar2 = CdControl('\x0e',local_18,(u_char *)0x0), iVar2 == 0)) {
    DAT_8006638c = 0xffffffff;
    return 0xffffffff;
  }
  uVar3 = FUN_800587e4();
  DAT_80066398 = FUN_80058d9c(uVar3);
  FUN_80058844(FUN_80057bdc);
  if ((DAT_800663bc & 1) != 0) {
    CdDataCallback(FUN_80057e50);
  }
  DAT_80066380 = DAT_8006637c;
  FUN_80058994(6,0);
  DAT_8006638c = DAT_80066378;
  DAT_80066390 = VSync(-1);
  return DAT_8006638c;
}



int CdRead(int sectors,u_long *buf,int mode)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  
  if (DAT_8006639c != 0) {
    iVar1 = VSync(-1);
    do {
      if (DAT_8006639c == 0) goto LAB_80058184;
      iVar2 = VSync(-1);
    } while ((uint)(iVar2 - iVar1) < 0x79);
    FUN_80058830(DAT_800663a0);
    DAT_8006639c = 0;
  }
LAB_80058184:
  if ((mode & 0x30U) == 0) {
    DAT_80066388 = 0x200;
  }
  else if ((mode & 0x30U) == 0x20) {
    DAT_80066388 = 0x249;
  }
  else {
    DAT_80066388 = 0x246;
  }
  DAT_80066384 = mode | 0x20;
  DAT_80066378 = sectors;
  DAT_8006637c = buf;
  DAT_800663a0 = FUN_80058830(0);
  DAT_800663a4 = FUN_80058844(0);
  if ((DAT_800663bc & 1) != 0) {
    DAT_800663a8 = CdDataCallback((func *)0x0);
  }
  DAT_80066394 = VSync(-1);
  uVar3 = CdStatus();
  if ((uVar3 & 0xe0) != 0) {
    CdControlB('\t',(u_char *)0x0,(u_char *)0x0);
  }
  iVar1 = FUN_80057f20(0);
  return (uint)(0 < iVar1);
}



CdlCB CdReadCallback(CdlCB func)

{
  CdlCB pCVar1;
  
  pCVar1 = DAT_800663b8;
  DAT_800663b8 = func;
  return pCVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdInit(void)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 4;
  do {
    iVar1 = EVENT_OBJ_90();
    if (iVar1 == 1) {
      DAT_80066700 = EVENT_OBJ_CC;
      DAT_80066704 = EVENT_OBJ_F4;
      DAT_800663b8 = EVENT_OBJ_11C;
      DAT_800663bc = 0;
      iVar2 = EVENT_OBJ_80();
      return iVar2;
    }
    iVar2 = iVar2 + -1;
  } while (iVar2 != -1);
  printf("CdInit: Init failed\n");
  return 0;
}



void EVENT_OBJ_80(void)

{
  return;
}



undefined4 EVENT_OBJ_90(void)

{
  int iVar1;
  undefined4 uVar2;
  
  iVar1 = FUN_8005d150();
  if (iVar1 == 0) {
    FUN_8005d060();
    uVar2 = EVENT_OBJ_BC();
    return uVar2;
  }
  return 0;
}



void EVENT_OBJ_BC(void)

{
  return;
}



void EVENT_OBJ_CC(void)

{
  DeliverEvent(0xf0000003,0x20);
  return;
}



void EVENT_OBJ_F4(void)

{
  DeliverEvent(0xf0000003,0x40);
  return;
}



void EVENT_OBJ_11C(void)

{
  DeliverEvent(0xf0000003,0x40);
  return;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_80058408(void)

{
  FUN_8005b278();
  return;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_80058428(void)

{
  FUN_8005b344();
  return;
}



undefined FUN_80058448(void)

{
  byte bVar1;
  int iVar2;
  
  iVar2 = (*DAT_80066674)();
  if ((((*(char *)(iVar2 + 0x37) != '\0') || (*(char *)(iVar2 + 0x38) != '\0')) ||
      ((iVar2 != *(int *)(iVar2 + 0x10) && (*(char *)(iVar2 + 0x39) != '\0')))) ||
     (**(char **)(iVar2 + 0x30) != '\0')) {
    bVar1 = *(byte *)(iVar2 + 0x49);
    if (bVar1 == 3) {
      return 1;
    }
    if (bVar1 < 4) {
      if (bVar1 == 2) {
        return 1;
      }
    }
    else if (bVar1 == 6) {
      return 4;
    }
  }
  return *(undefined *)(iVar2 + 0x49);
}



uint FUN_80058514(undefined4 param_1,int param_2,int param_3)

{
  int *piVar1;
  uint uVar2;
  
  piVar1 = (int *)(*DAT_80066674)();
  if (param_2 == 3) {
    uVar2 = (uint)*(byte *)(piVar1 + 0x39);
  }
  else if (param_2 < 4) {
    if (param_2 == 1) {
      uVar2 = (uint)*(byte *)(piVar1 + 0x3a);
    }
    else {
      uVar2 = 0;
      if (param_2 == 2) {
        uVar2 = (uint)*(ushort *)((int)piVar1 + 0xe6);
      }
    }
  }
  else if (param_2 == 4) {
    if (param_3 < 0) {
      uVar2 = (uint)*(byte *)((int)piVar1 + 0xe3);
    }
    else if (param_3 < (int)(uint)*(byte *)((int)piVar1 + 0xe3)) {
      uVar2 = (uint)*(ushort *)(param_3 * 2 + *piVar1);
    }
    else {
      uVar2 = 0;
    }
  }
  else {
    uVar2 = 0;
    if (param_2 == 100) {
      uVar2 = piVar1[0x13];
    }
  }
  return uVar2;
}



undefined FUN_8005860c(undefined4 param_1,int param_2,undefined4 param_3)

{
  undefined uVar1;
  int iVar2;
  undefined *puVar3;
  
  iVar2 = (*DAT_80066674)();
  if (param_2 < 0) {
    uVar1 = *(undefined *)(iVar2 + 0xe9);
  }
  else {
    if (param_2 < (int)(uint)*(byte *)(iVar2 + 0xe9)) {
      puVar3 = (undefined *)(*(int *)(iVar2 + 4) + param_2 * 5);
      switch(param_3) {
      case 1:
        return *puVar3;
      case 2:
        return puVar3[1];
      case 3:
        return puVar3[2];
      case 4:
        return puVar3[3];
      case 5:
        return puVar3[4];
      }
    }
    uVar1 = 0;
  }
  return uVar1;
}



void FUN_800586e0(undefined4 param_1,undefined4 param_2)

{
  undefined4 uVar1;
  
  uVar1 = (*DAT_80066674)();
  FUN_8005e024(uVar1,param_2);
  return;
}



void FUN_80058718(undefined4 param_1,undefined param_2,undefined param_3)

{
  undefined4 uVar1;
  
  uVar1 = (*DAT_80066674)();
  FUN_8005e170(uVar1,param_2,param_3);
  return;
}



void FUN_80058760(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  undefined4 uVar1;
  
  uVar1 = (*DAT_80066674)();
  FUN_8005d778(uVar1,param_2,param_3);
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdStatus(void)

{
  return (uint)DAT_8006670c;
}



undefined FUN_800587c4(void)

{
  return DAT_8006671c;
}



undefined FUN_800587d4(void)

{
  return DAT_8006671d;
}



undefined1 * FUN_800587e4(void)

{
  return &DAT_80066718;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_800587f0(void)

{
  FUN_8005cf8c();
  return;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

int CdSync(int mode,u_char *result)

{
  int iVar1;
  
  iVar1 = FUN_8005c900();
  return iVar1;
}



undefined4 FUN_80058830(undefined4 param_1)

{
  undefined4 uVar1;
  
  uVar1 = DAT_80066700;
  DAT_80066700 = param_1;
  return uVar1;
}



undefined4 FUN_80058844(undefined4 param_1)

{
  undefined4 uVar1;
  
  uVar1 = DAT_80066704;
  DAT_80066704 = param_1;
  return uVar1;
}



int CdControl(u_char com,u_char *param,u_char *result)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  
  uVar1 = DAT_80066700;
  iVar3 = 3;
  while( true ) {
    DAT_80066700 = 0;
    if ((com != 1) && ((DAT_8006670c & 0x10) != 0)) {
      FUN_8005cb80(1,0,0,0);
    }
    if ((((param == (u_char *)0x0) || (*(int *)(&DAT_800663c8 + (uint)com * 4) == 0)) ||
        (iVar2 = FUN_8005cb80(2,param,result,0), iVar2 == 0)) &&
       (DAT_80066700 = uVar1, iVar2 = FUN_8005cb80(com,param,result,0), iVar2 == 0)) break;
    iVar3 = iVar3 + -1;
    if (iVar3 == -1) {
      DAT_80066700 = uVar1;
      return 0;
    }
  }
  return 1;
}



undefined4 FUN_80058994(byte param_1,int param_2)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  
  uVar1 = DAT_80066700;
  iVar3 = 3;
  while( true ) {
    DAT_80066700 = 0;
    if ((param_1 != 1) && ((DAT_8006670c & 0x10) != 0)) {
      FUN_8005cb80(1,0,0,0);
    }
    if ((((param_2 == 0) || (*(int *)(&DAT_800663c8 + (uint)param_1 * 4) == 0)) ||
        (iVar2 = FUN_8005cb80(2,param_2,0,0), iVar2 == 0)) &&
       (DAT_80066700 = uVar1, iVar2 = FUN_8005cb80(param_1,param_2,0,1), iVar2 == 0)) break;
    iVar3 = iVar3 + -1;
    if (iVar3 == -1) {
      DAT_80066700 = uVar1;
      return 0;
    }
  }
  return 1;
}



int CdControlB(u_char com,u_char *param,u_char *result)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  
  uVar1 = DAT_80066700;
  iVar5 = 3;
  do {
    DAT_80066700 = 0;
    if ((com != 1) && ((DAT_8006670c & 0x10) != 0)) {
      FUN_8005cb80(1,0,0,0);
    }
    if (((param == (u_char *)0x0) || (*(int *)(&DAT_800663c8 + (uint)com * 4) == 0)) ||
       (iVar2 = FUN_8005cb80(2,param,result,0), iVar2 == 0)) {
      DAT_80066700 = uVar1;
      iVar2 = FUN_8005cb80(com,param,result,0);
      iVar3 = 0;
      if (iVar2 == 0) break;
    }
    iVar5 = iVar5 + -1;
    iVar3 = -1;
    DAT_80066700 = uVar1;
  } while (iVar5 != -1);
  if (iVar3 == 0) {
    iVar5 = FUN_8005c900(0,result);
    uVar4 = (uint)(iVar5 == 2);
  }
  else {
    uVar4 = 0;
  }
  return uVar4;
}



bool FUN_80058c14(void)

{
  int iVar1;
  
  iVar1 = FUN_8005d498();
  return iVar1 == 0;
}



bool FUN_80058c34(void)

{
  int iVar1;
  
  iVar1 = FUN_8005d598();
  return iVar1 == 0;
}



_func_130 * CdDataCallback(func *func)

{
  _func_130 *p_Var1;
  
  p_Var1 = (_func_130 *)FUN_80054904(3,func);
  return p_Var1;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit

void FUN_80058c78(void)

{
  FUN_8005d330();
  return;
}



CdlLOC * CdIntToPos(int i,CdlLOC *p)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = (i + 0x96) / 0x4b;
  iVar2 = (i + 0x96) % 0x4b;
  iVar1 = iVar3 / 0x3c;
  iVar3 = iVar3 % 0x3c;
  p->sector = (char)iVar2 + (char)(iVar2 / 10) * '\x06';
  p->second = (char)iVar3 + (char)(iVar3 / 10) * '\x06';
  p->minute = (char)iVar1 + (char)(iVar1 / 10) * '\x06';
  return p;
}



int FUN_80058d9c(byte *param_1)

{
  return (((uint)(*param_1 >> 4) * 10 + (*param_1 & 0xf)) * 0x3c +
         (uint)(param_1[1] >> 4) * 10 + (param_1[1] & 0xf)) * 0x4b +
         (uint)(param_1[2] >> 4) * 10 + (param_1[2] & 0xf) + -0x96;
}



DRAWENV * SetDefDrawEnv(DRAWENV *env,int x,int y,int w,int h)

{
  int iVar1;
  DRAWENV *pDVar2;
  
  iVar1 = FUN_8005c238();
  (env->clip).x = (short)x;
  (env->clip).y = (short)y;
  (env->clip).w = (short)w;
  (env->tw).x = 0;
  (env->tw).y = 0;
  (env->tw).w = 0;
  (env->tw).h = 0;
  env->r0 = '\0';
  env->g0 = '\0';
  env->b0 = '\0';
  env->dtd = '\x01';
  (env->clip).h = (short)h;
  if (iVar1 != 0) {
    pDVar2 = (DRAWENV *)E03_OBJ_78();
    return pDVar2;
  }
  env->dfe = h < 0x101;
  env->ofs[0] = (short)x;
  env->ofs[1] = (short)y;
  env->tpage = 10;
  env->isbg = '\0';
  return env;
}



void E03_OBJ_78(void)

{
  undefined in_v0;
  int unaff_s1;
  undefined2 unaff_s3;
  undefined2 unaff_s4;
  
  *(undefined *)(unaff_s1 + 0x17) = in_v0;
  *(undefined2 *)(unaff_s1 + 8) = unaff_s3;
  *(undefined2 *)(unaff_s1 + 10) = unaff_s4;
  *(undefined2 *)(unaff_s1 + 0x14) = 10;
  *(undefined *)(unaff_s1 + 0x18) = 0;
  return;
}



int VSync(int mode)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  
  do {
  } while (*(int *)PTR_TMR_HRETRACE_VAL_80066454 != *(int *)PTR_TMR_HRETRACE_VAL_80066454);
  uVar1 = *(int *)PTR_TMR_HRETRACE_VAL_80066454 - DAT_80066458;
  if (mode < 0) {
    iVar2 = VSYNC_OBJ_164();
    return iVar2;
  }
  if (mode != 1) {
    if (0 < mode) {
      iVar2 = VSYNC_OBJ_A4();
      return iVar2;
    }
    iVar2 = 0;
    if (0 < mode) {
      iVar2 = mode + -1;
    }
    VSYNC_OBJ_178(DAT_8006645c,iVar2);
    uVar3 = *(uint *)PTR_GPU_REG1_80066450;
    VSYNC_OBJ_178(DAT_80066618 + 1,1);
    if (((uVar3 & 0x400000) != 0) && (-1 < (int)(uVar3 ^ *(uint *)PTR_GPU_REG1_80066450))) {
      do {
      } while (((uVar3 ^ *(uint *)PTR_GPU_REG1_80066450) & 0x80000000) == 0);
    }
    DAT_8006645c = DAT_80066618;
    do {
      DAT_80066458 = *(int *)PTR_TMR_HRETRACE_VAL_80066454;
    } while (DAT_80066458 != *(int *)PTR_TMR_HRETRACE_VAL_80066454);
  }
  return uVar1 & 0xffff;
}



void VSYNC_OBJ_A4(void)

{
  uint uVar1;
  
  VSYNC_OBJ_178();
  uVar1 = *(uint *)PTR_GPU_REG1_80066450;
  VSYNC_OBJ_178(DAT_80066618 + 1,1);
  if (((uVar1 & 0x400000) != 0) && (-1 < (int)(uVar1 ^ *(uint *)PTR_GPU_REG1_80066450))) {
    do {
    } while (((uVar1 ^ *(uint *)PTR_GPU_REG1_80066450) & 0x80000000) == 0);
  }
  DAT_8006645c = DAT_80066618;
  do {
    DAT_80066458 = *(int *)PTR_TMR_HRETRACE_VAL_80066454;
  } while (*(int *)PTR_TMR_HRETRACE_VAL_80066454 != *(int *)PTR_TMR_HRETRACE_VAL_80066454);
  return;
}



void VSYNC_OBJ_164(void)

{
  return;
}



void VSYNC_OBJ_178(int param_1,int param_2)

{
  param_2 = param_2 << 0xf;
  do {
    if (param_1 <= DAT_80066618) {
      return;
    }
    param_2 = param_2 + -1;
  } while (param_2 != -1);
  puts("VSync: timeout\n");
  ChangeClearPAD(0);
  ChangeClearRCnt(3,0);
  VSYNC_OBJ_200();
  return;
}



void VSYNC_OBJ_200(void)

{
  return;
}



DISPENV * SetDefDispEnv(DISPENV *env,int x,int y,int w,int h)

{
  (env->disp).x = (short)x;
  (env->disp).y = (short)y;
  (env->disp).w = (short)w;
  (env->screen).x = 0;
  (env->screen).y = 0;
  (env->screen).w = 0;
  (env->screen).h = 0;
  env->isrgb24 = '\0';
  env->isinter = '\0';
  env->pad1 = '\0';
  env->pad0 = '\0';
  (env->disp).h = (short)h;
  return env;
}



void SpuSetCommonAttr(SpuCommonAttr *attr)

{
  short sVar1;
  bool bVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  uint uVar6;
  
  uVar4 = 0;
  uVar6 = attr->mask;
  bVar2 = uVar6 == 0;
  uVar5 = 0;
  if (bVar2) {
S_SCA_OBJ_2C:
    switch((attr->mvolmode).left) {
    default:
S_SCA_OBJ_90:
      uVar4 = (attr->mvol).left;
      uVar3 = 0;
      break;
    case 1:
      uVar3 = 0x8000;
      break;
    case 2:
      uVar3 = 0x9000;
      break;
    case 3:
      uVar3 = 0xa000;
      break;
    case 4:
      uVar3 = 0xb000;
      break;
    case 5:
      uVar3 = 0xc000;
      break;
    case 6:
      uVar3 = 0xd000;
      break;
    case 7:
      uVar3 = 0xe000;
    }
    if (uVar3 != 0) {
      sVar1 = (attr->mvol).left;
      uVar4 = 0x7f;
      if ((sVar1 < 0x80) && (uVar4 = 0, -1 < sVar1)) {
        uVar4 = (attr->mvol).left;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = uVar4 & 0x7fff | uVar3;
  }
  else if ((uVar6 & 1) != 0) {
    if ((uVar6 & 4) != 0) goto S_SCA_OBJ_2C;
    goto S_SCA_OBJ_90;
  }
  if (bVar2) {
S_SCA_OBJ_EC:
    switch((attr->mvolmode).right) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar4 = 0x8000;
      break;
    case 2:
      uVar4 = 0x9000;
      break;
    case 3:
      uVar4 = 0xa000;
      break;
    case 4:
      uVar4 = 0xb000;
      break;
    case 5:
      uVar4 = 0xc000;
      break;
    case 6:
      uVar4 = 0xd000;
      break;
    case 7:
      uVar4 = 0xe000;
    }
  }
  else {
    if ((uVar6 & 2) == 0) goto S_SCA_OBJ_194;
    if ((uVar6 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    uVar5 = (attr->mvol).right;
    uVar4 = 0;
  }
  if (uVar4 != 0) {
    sVar1 = (attr->mvol).right;
    uVar5 = 0x7f;
    if ((sVar1 < 0x80) && (uVar5 = 0, -1 < sVar1)) {
      uVar5 = (attr->mvol).right;
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = uVar5 & 0x7fff | uVar4;
S_SCA_OBJ_194:
  if ((bVar2) || ((uVar6 & 0x40) != 0)) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = (attr->cd).volume.left;
  }
  if ((bVar2) || ((uVar6 & 0x80) != 0)) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = (attr->cd).volume.right;
  }
  if ((bVar2) || ((uVar6 & 0x400) != 0)) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = (attr->ext).volume.left;
  }
  if ((bVar2) || ((uVar6 & 0x800) != 0)) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = (attr->ext).volume.right;
  }
  if ((bVar2) || ((uVar6 & 0x100) != 0)) {
    if ((attr->cd).reverb == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((bVar2) || ((uVar6 & 0x200) != 0)) {
    if ((attr->cd).mix == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((bVar2) || ((uVar6 & 0x1000) != 0)) {
    if ((attr->ext).reverb == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((bVar2) || ((uVar6 & 0x2000) != 0)) {
    if ((attr->ext).mix == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_58(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 4) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 4))) {
    uVar1 = *(ushort *)(param_1 + 4);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = uVar1 & 0x7fff | 0x8000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_194;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_EC:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (in_t0 = 0, -1 < *(short *)(param_1 + 6))) {
      in_t0 = *(ushort *)(param_1 + 6);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_194:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_60(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 4) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 4))) {
    uVar1 = *(ushort *)(param_1 + 4);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = uVar1 & 0x7fff | 0x9000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_194;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_EC:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (in_t0 = 0, -1 < *(short *)(param_1 + 6))) {
      in_t0 = *(ushort *)(param_1 + 6);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_194:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_68(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 4) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 4))) {
    uVar1 = *(ushort *)(param_1 + 4);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = uVar1 & 0x7fff | 0xa000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_194;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_EC:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (in_t0 = 0, -1 < *(short *)(param_1 + 6))) {
      in_t0 = *(ushort *)(param_1 + 6);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_194:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_70(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 4) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 4))) {
    uVar1 = *(ushort *)(param_1 + 4);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = uVar1 & 0x7fff | 0xb000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_194;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_EC:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (in_t0 = 0, -1 < *(short *)(param_1 + 6))) {
      in_t0 = *(ushort *)(param_1 + 6);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_194:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_78(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 4) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 4))) {
    uVar1 = *(ushort *)(param_1 + 4);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = uVar1 & 0x7fff | 0xc000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_194;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_EC:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (in_t0 = 0, -1 < *(short *)(param_1 + 6))) {
      in_t0 = *(ushort *)(param_1 + 6);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_194:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_80(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 4) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 4))) {
    uVar1 = *(ushort *)(param_1 + 4);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = uVar1 & 0x7fff | 0xd000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_194;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_EC:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (in_t0 = 0, -1 < *(short *)(param_1 + 6))) {
      in_t0 = *(ushort *)(param_1 + 6);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_194:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_88(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 4) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 4))) {
    uVar1 = *(ushort *)(param_1 + 4);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = uVar1 & 0x7fff | 0xe000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_194;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_EC:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (in_t0 = 0, -1 < *(short *)(param_1 + 6))) {
      in_t0 = *(ushort *)(param_1 + 6);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_194:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x800591cc)
// WARNING: Removing unreachable block (ram,0x800591e0)
// WARNING: Removing unreachable block (ram,0x800591e8)
// WARNING: Removing unreachable block (ram,0x800591ec)

void S_SCA_OBJ_90(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = *(ushort *)(param_1 + 4) & 0x7fff;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_194;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_EC:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (in_t0 = 0, -1 < *(short *)(param_1 + 6))) {
      in_t0 = *(ushort *)(param_1 + 6);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_194:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_98(int param_1,int param_2,ushort param_3)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  if (param_2 != 0) {
    param_3 = 0x7f;
    if ((*(short *)(param_1 + 4) < 0x80) && (param_3 = 0, -1 < *(short *)(param_1 + 4))) {
      param_3 = *(ushort *)(param_1 + 4);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = param_3 & 0x7fff | (ushort)param_2;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_194;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_EC;
S_SCA_OBJ_150:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_EC:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_150;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (in_t0 = 0, -1 < *(short *)(param_1 + 6))) {
      in_t0 = *(ushort *)(param_1 + 6);
    }
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_194:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_118(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 6) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 6))) {
    uVar1 = *(ushort *)(param_1 + 6);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = uVar1 & 0x7fff | 0x8000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_120(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 6) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 6))) {
    uVar1 = *(ushort *)(param_1 + 6);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = uVar1 & 0x7fff | 0x9000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_128(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 6) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 6))) {
    uVar1 = *(ushort *)(param_1 + 6);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = uVar1 & 0x7fff | 0xa000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_130(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 6) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 6))) {
    uVar1 = *(ushort *)(param_1 + 6);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = uVar1 & 0x7fff | 0xb000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_138(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 6) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 6))) {
    uVar1 = *(ushort *)(param_1 + 6);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = uVar1 & 0x7fff | 0xc000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_140(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 6) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 6))) {
    uVar1 = *(ushort *)(param_1 + 6);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = uVar1 & 0x7fff | 0xd000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_148(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = 0x7f;
  if ((*(short *)(param_1 + 6) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 6))) {
    uVar1 = *(ushort *)(param_1 + 6);
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = uVar1 & 0x7fff | 0xe000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8005928c)
// WARNING: Removing unreachable block (ram,0x800592a0)
// WARNING: Removing unreachable block (ram,0x800592a8)
// WARNING: Removing unreachable block (ram,0x800592ac)

void S_SCA_OBJ_150(int param_1)

{
  uint in_t1;
  int in_t2;
  
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = *(ushort *)(param_1 + 6) & 0x7fff;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_158(int param_1,int param_2)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = in_t0 & 0x7fff;
  if (param_2 != 0) {
    uVar1 = 0x7f;
    if ((*(short *)(param_1 + 6) < 0x80) && (uVar1 = 0, -1 < *(short *)(param_1 + 6))) {
      uVar1 = *(ushort *)(param_1 + 6);
    }
    uVar1 = uVar1 & 0x7fff;
  }
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x182) = uVar1 | (ushort)param_2;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_274();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_274(int param_1)

{
  undefined2 in_v0;
  int in_v1;
  uint in_t1;
  int in_t2;
  
  *(undefined2 *)(in_v1 + 0x1aa) = in_v0;
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2C8();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_2C8(int param_1)

{
  undefined2 in_v0;
  int in_v1;
  uint in_t1;
  int in_t2;
  
  *(undefined2 *)(in_v1 + 0x1aa) = in_v0;
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_31C();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_31C(int param_1)

{
  undefined2 in_v0;
  int in_v1;
  uint in_t1;
  int in_t2;
  
  *(undefined2 *)(in_v1 + 0x1aa) = in_v0;
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_370();
      return;
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_370(void)

{
  undefined2 in_v0;
  int in_v1;
  
  *(undefined2 *)(in_v1 + 0x1aa) = in_v0;
  return;
}



int sprintf(char *buffer,char *fmt,...)

{
  char cVar1;
  char *pcVar2;
  void *pvVar3;
  int *piVar4;
  char *pcVar5;
  int *piVar6;
  uchar *puVar7;
  int iVar8;
  int *in_a2;
  undefined4 in_a3;
  uint uVar9;
  int iVar10;
  char *local_res4;
  int *local_res8;
  undefined4 local_resc;
  byte local_39;
  undefined4 local_38;
  int *local_34;
  int *local_30;
  int **local_28;
  
  local_28 = &local_res8;
  iVar10 = 0;
  cVar1 = *fmt;
  local_res8 = in_a2;
  local_resc = in_a3;
  while (iVar8 = (int)cVar1, iVar8 != 0) {
    if (iVar8 != 0x25) {
SPRINTF_OBJ_794:
      buffer[iVar10] = (char)iVar8;
      iVar10 = SPRINTF_OBJ_82C();
      return iVar10;
    }
    local_38 = DAT_80066468;
    local_34 = (int *)DAT_8006646c;
    local_30 = (int *)DAT_80066470;
    iVar8 = (int)fmt[1];
    if (iVar8 == 0x2d) {
      local_38 = DAT_80066468 | 1;
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    if (iVar8 == 0x2b) {
      local_38 = DAT_80066468 | 2;
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    if (iVar8 == 0x20) {
      local_38._2_2_ = (undefined2)(DAT_80066468 >> 0x10);
      local_38._0_1_ = (byte)DAT_80066468;
      local_38._0_2_ = CONCAT11(fmt[1],(byte)local_38);
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    if (iVar8 == 0x23) {
      local_38 = DAT_80066468 | 4;
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    if (iVar8 == 0x30) {
      local_38 = DAT_80066468 | 8;
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    if (iVar8 == 0x2a) {
      piVar4 = *local_28;
      local_28 = local_28 + 1;
      local_34 = piVar4;
      if ((int)piVar4 < 0) {
        local_34 = (int *)-(int)piVar4;
        local_38 = DAT_80066468 | 1;
      }
      iVar10 = SPRINTF_OBJ_1BC(piVar4,(int)fmt[2]);
      return iVar10;
    }
    while (local_res4 = fmt + 1, pcVar2 = local_res4, iVar8 - 0x30U < 10) {
      local_34 = (int *)((int)local_34 * 10 + -0x30 + iVar8);
      iVar8 = (int)fmt[2];
      fmt = local_res4;
    }
    pcVar5 = (char *)0x23;
    if (iVar8 == 0x2e) {
      iVar8 = (int)fmt[2];
      pcVar5 = fmt + 2;
      if (iVar8 == 0x2a) {
        local_30 = *local_28;
        local_28 = local_28 + 1;
        iVar10 = SPRINTF_OBJ_258(local_res4,(int)fmt[3]);
        return iVar10;
      }
      while (local_res4 = pcVar5, iVar8 - 0x30U < 10) {
        local_30 = (int *)((int)local_30 * 10 + -0x30 + iVar8);
        pcVar5 = local_res4 + 1;
        iVar8 = (int)local_res4[1];
      }
      pcVar5 = pcVar2;
      if (-1 < (int)local_30) {
        local_38 = DAT_80066468 | 0x10;
      }
    }
    piVar4 = &local_38;
    if ((local_38 & 1) != 0) {
      local_38 = local_38 & 0xfffffff7;
    }
    switch(iVar8) {
    case 0x4c:
      local_38 = local_38 | 0x80;
      iVar10 = SPRINTF_OBJ_29C(pcVar5,(int)local_res4[1]);
      return iVar10;
    default:
      if (iVar8 == 0x25) goto SPRINTF_OBJ_794;
      goto SPRINTF_OBJ_84C;
    case 99:
      local_28 = local_28 + 1;
      iVar10 = SPRINTF_OBJ_7A0();
      return iVar10;
    case 100:
    case 0x69:
      piVar6 = *local_28;
      if ((local_38 >> 5 & 1) != 0) {
        piVar6 = (int *)(int)(short)piVar6;
      }
      if ((int)piVar6 < 0) {
        local_38._0_2_ = CONCAT11(0x2d,(byte)local_38);
        local_28 = local_28 + 1;
        iVar10 = SPRINTF_OBJ_390(-(int)piVar6);
        return iVar10;
      }
      if ((local_38 >> 1 & 1) != 0) {
        local_38._0_2_ = CONCAT11(0x2b,(byte)local_38);
        local_28 = local_28 + 1;
        iVar10 = SPRINTF_OBJ_390();
        return iVar10;
      }
      goto code_r0x8005983c;
    case 0x68:
      iVar10 = SPRINTF_OBJ_2E4();
      return iVar10;
    case 0x6c:
      iVar10 = SPRINTF_OBJ_2E4();
      return iVar10;
    case 0x6e:
      piVar4 = *local_28;
      local_28 = local_28 + 1;
      if ((local_38 >> 5 & 1) != 0) {
        *(short *)piVar4 = (short)iVar10;
        iVar10 = SPRINTF_OBJ_82C();
        return iVar10;
      }
      *piVar4 = iVar10;
      iVar10 = SPRINTF_OBJ_82C();
      return iVar10;
    case 0x6f:
      piVar6 = *local_28;
      local_28 = local_28 + 1;
      if ((local_38 >> 5 & 1) != 0) {
        piVar6 = (int *)((uint)piVar6 & 0xffff);
      }
      if ((local_38 >> 4 & 1) == 0) {
        if ((local_38 >> 3 & 1) != 0) {
          local_30 = local_34;
        }
        if ((int)local_30 < 1) {
          local_30 = (int *)0x1;
        }
      }
      uVar9 = 0;
      for (; piVar6 != (int *)0x0; piVar6 = (int *)((uint)piVar6 >> 3)) {
        piVar4 = (int *)((int)piVar4 + -1);
        *(byte *)piVar4 = ((byte)piVar6 & 7) + 0x30;
        uVar9 = uVar9 + 1;
      }
      if ((((local_38 >> 2 & 1) != 0) && (uVar9 != 0)) && (*(byte *)piVar4 != 0x30)) {
        piVar4 = (int *)((int)piVar4 + -1);
        *(byte *)piVar4 = 0x30;
        uVar9 = uVar9 + 1;
      }
      if ((int)uVar9 < (int)local_30) {
        do {
          piVar4 = (int *)((int)piVar4 + -1);
          *(byte *)piVar4 = 0x30;
          uVar9 = uVar9 + 1;
        } while ((int)uVar9 < (int)local_30);
        iVar10 = SPRINTF_OBJ_7A0();
        return iVar10;
      }
      break;
    case 0x70:
      local_30 = (int *)0x8;
      local_38 = local_38 | 0x50;
    case 0x58:
      iVar10 = SPRINTF_OBJ_5A4();
      return iVar10;
    case 0x73:
      piVar4 = *local_28;
      local_28 = local_28 + 1;
      if ((local_38 >> 2 & 1) == 0) {
        if ((local_38 >> 4 & 1) == 0) {
          strlen((char *)piVar4);
          iVar10 = SPRINTF_OBJ_7A0();
          return iVar10;
        }
        pvVar3 = memchr((uchar *)piVar4,'\0',(int)local_30);
        uVar9 = (int)pvVar3 - (int)piVar4;
        if (pvVar3 == (void *)0x0) {
          iVar10 = SPRINTF_OBJ_7A0();
          return iVar10;
        }
      }
      else {
        uVar9 = (uint)*(byte *)piVar4;
        piVar4 = (int *)((int)piVar4 + 1);
        if (((local_38 >> 4 & 1) != 0) && ((int)local_30 < (int)uVar9)) {
          iVar10 = SPRINTF_OBJ_7A0();
          return iVar10;
        }
      }
      break;
    case 0x75:
      piVar6 = *local_28;
      if ((local_38 >> 5 & 1) != 0) {
        piVar6 = (int *)((uint)piVar6 & 0xffff);
      }
      local_38._0_2_ = (ushort)(byte)local_38;
code_r0x8005983c:
      local_28 = local_28 + 1;
      if ((local_38 >> 4 & 1) == 0) {
        if (((local_38 >> 3 & 1) != 0) && (local_30 = local_34, local_38._1_1_ != 0)) {
          local_30 = (int *)((int)local_34 + -1);
        }
        if ((int)local_30 < 1) {
          local_30 = (int *)0x1;
        }
      }
      uVar9 = 0;
      while (piVar6 != (int *)0x0) {
        piVar4 = (int *)((int)piVar4 + -1);
        uVar9 = uVar9 + 1;
        *(byte *)piVar4 = (char)piVar6 + (char)(int *)((uint)piVar6 / 10) * -10 + 0x30;
        piVar6 = (int *)((uint)piVar6 / 10);
      }
      for (; (int)uVar9 < (int)local_30; uVar9 = uVar9 + 1) {
        piVar4 = (int *)((int)piVar4 + -1);
        *(byte *)piVar4 = 0x30;
      }
      if (local_38._1_1_ != 0) {
        *(byte *)((int)piVar4 + -1) = local_38._1_1_;
        iVar10 = SPRINTF_OBJ_7A0();
        return iVar10;
      }
      break;
    case 0x78:
      piVar6 = *local_28;
      local_28 = local_28 + 1;
      if ((local_38 >> 5 & 1) != 0) {
        piVar6 = (int *)((uint)piVar6 & 0xffff);
      }
      if ((local_38 >> 4 & 1) == 0) {
        if (((local_38 >> 3 & 1) != 0) && (local_30 = local_34, (local_38 >> 2 & 1) != 0)) {
          local_30 = (int *)((int)local_34 + -2);
        }
        if ((int)local_30 < 1) {
          local_30 = (int *)0x1;
        }
      }
      uVar9 = 0;
      for (; piVar6 != (int *)0x0; piVar6 = (int *)((uint)piVar6 >> 4)) {
        piVar4 = (int *)((int)piVar4 + -1);
        uVar9 = uVar9 + 1;
        *(char *)piVar4 = "0123456789abcdef"[(uint)piVar6 & 0xf];
      }
      for (; (int)uVar9 < (int)local_30; uVar9 = uVar9 + 1) {
        piVar4 = (int *)((int)piVar4 + -1);
        *(byte *)piVar4 = 0x30;
      }
      if ((local_38 >> 2 & 1) != 0) {
        *(byte *)((int)piVar4 + -1) = (byte)iVar8;
        *(byte *)((int)piVar4 + -2) = 0x30;
        iVar10 = SPRINTF_OBJ_7A0();
        return iVar10;
      }
    }
    puVar7 = (uchar *)(buffer + iVar10);
    if (((int)uVar9 < (int)local_34) && ((local_38 & 1) == 0)) {
      do {
        buffer[iVar10] = ' ';
        local_34 = (int *)((int)local_34 + -1);
        iVar10 = iVar10 + 1;
      } while ((int)uVar9 < (int)local_34);
      puVar7 = (uchar *)(buffer + iVar10);
    }
    memmove(puVar7,(uchar *)piVar4,uVar9);
    iVar10 = iVar10 + uVar9;
    for (; (int)uVar9 < (int)local_34; uVar9 = uVar9 + 1) {
      buffer[iVar10] = ' ';
      iVar10 = iVar10 + 1;
    }
    fmt = local_res4 + 1;
    cVar1 = local_res4[1];
  }
SPRINTF_OBJ_84C:
  buffer[iVar10] = '\0';
  return iVar10;
}



int SPRINTF_OBJ_90(int param_1)

{
  void *pvVar1;
  int in_v1;
  int *piVar2;
  uchar *puVar3;
  int iVar4;
  uint uVar5;
  int *piVar6;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int in_stack_0000024c;
  int iVar8;
  int iVar9;
  
  do {
    iVar4 = (int)*(char *)(in_stack_0000024c + 1);
    if (iVar4 == unaff_s5) {
      iVar4 = SPRINTF_OBJ_90();
      return iVar4;
    }
    if (iVar4 == unaff_s6) {
      iVar4 = SPRINTF_OBJ_90();
      return iVar4;
    }
    if (iVar4 == unaff_s4) {
      iVar4 = SPRINTF_OBJ_90();
      return iVar4;
    }
    if (iVar4 == param_1) {
      iVar4 = SPRINTF_OBJ_90();
      return iVar4;
    }
    if (iVar4 == in_v1) {
      iVar4 = SPRINTF_OBJ_90();
      return iVar4;
    }
    if (iVar4 == 0x2a) {
      iVar4 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 2));
      return iVar4;
    }
    while (iVar8 = in_stack_0000024c + 1, iVar4 - 0x30U < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + iVar4;
      iVar4 = (int)*(char *)(in_stack_0000024c + 2);
      in_stack_0000024c = iVar8;
    }
    iVar9 = iVar8;
    if (iVar4 == 0x2e) {
      iVar4 = (int)*(char *)(in_stack_0000024c + 2);
      iVar9 = in_stack_0000024c + 2;
      if (iVar4 == 0x2a) {
        iVar4 = SPRINTF_OBJ_258(iVar8,(int)*(char *)(in_stack_0000024c + 3));
        return iVar4;
      }
      while (iVar4 - 0x30U < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + iVar4;
        iVar4 = (int)*(char *)(iVar9 + 1);
        iVar9 = iVar9 + 1;
      }
      param_1 = iVar8;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = in_stack_00000210 | 0x10;
      }
    }
    piVar6 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(iVar4) {
    case 0x4c:
      iVar4 = SPRINTF_OBJ_29C(param_1,(int)*(char *)(iVar9 + 1));
      return iVar4;
    default:
      if (iVar4 != 0x25) goto SPRINTF_OBJ_84C;
      goto SPRINTF_OBJ_794;
    case 99:
      iVar4 = SPRINTF_OBJ_7A0();
      return iVar4;
    case 100:
    case 0x69:
      piVar2 = *in_stack_00000220;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar2 = (int *)(int)(short)piVar2;
      }
      if ((int)piVar2 < 0) {
        iVar4 = SPRINTF_OBJ_390(-(int)piVar2);
        return iVar4;
      }
      if ((in_stack_00000210 >> 1 & 1) != 0) {
        iVar4 = SPRINTF_OBJ_390();
        return iVar4;
      }
      goto code_r0x8005983c;
    case 0x68:
      iVar4 = SPRINTF_OBJ_2E4();
      return iVar4;
    case 0x6c:
      iVar4 = SPRINTF_OBJ_2E4();
      return iVar4;
    case 0x6e:
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar4 = SPRINTF_OBJ_82C();
        return iVar4;
      }
      **in_stack_00000220 = unaff_s2;
      iVar4 = SPRINTF_OBJ_82C();
      return iVar4;
    case 0x6f:
      piVar2 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar2 = (int *)((uint)piVar2 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if ((in_stack_00000210 >> 3 & 1) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar5 = 0;
      for (; piVar2 != (int *)0x0; piVar2 = (int *)((uint)piVar2 >> 3)) {
        piVar6 = (int *)((int)piVar6 + -1);
        *(byte *)piVar6 = ((byte)piVar2 & 7) + 0x30;
        uVar5 = uVar5 + 1;
      }
      if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar5 != 0)) && (*(byte *)piVar6 != 0x30)) {
        piVar6 = (int *)((int)piVar6 + -1);
        *(byte *)piVar6 = 0x30;
        uVar5 = uVar5 + 1;
      }
      if ((int)uVar5 < in_stack_00000218) {
        do {
          piVar6 = (int *)((int)piVar6 + -1);
          *(byte *)piVar6 = 0x30;
          uVar5 = uVar5 + 1;
        } while ((int)uVar5 < in_stack_00000218);
        iVar4 = SPRINTF_OBJ_7A0();
        return iVar4;
      }
      break;
    case 0x70:
    case 0x58:
      iVar4 = SPRINTF_OBJ_5A4();
      return iVar4;
    case 0x73:
      piVar6 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 2 & 1) == 0) {
        if ((in_stack_00000210 >> 4 & 1) == 0) {
          strlen((char *)piVar6);
          iVar4 = SPRINTF_OBJ_7A0();
          return iVar4;
        }
        pvVar1 = memchr((uchar *)piVar6,'\0',in_stack_00000218);
        uVar5 = (int)pvVar1 - (int)piVar6;
        if (pvVar1 == (void *)0x0) {
          iVar4 = SPRINTF_OBJ_7A0();
          return iVar4;
        }
      }
      else {
        uVar5 = (uint)*(byte *)piVar6;
        piVar6 = (int *)((int)piVar6 + 1);
        if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar5)) {
          iVar4 = SPRINTF_OBJ_7A0();
          return iVar4;
        }
      }
      break;
    case 0x75:
      piVar2 = *in_stack_00000220;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar2 = (int *)((uint)piVar2 & 0xffff);
      }
      in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x8005983c:
      in_stack_00000220 = in_stack_00000220 + 1;
      bVar7 = (byte)(in_stack_00000210 >> 8);
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if (((in_stack_00000210 >> 3 & 1) != 0) &&
           (in_stack_00000218 = in_stack_00000214, bVar7 != 0)) {
          in_stack_00000218 = in_stack_00000214 + -1;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar5 = 0;
      while (piVar2 != (int *)0x0) {
        piVar6 = (int *)((int)piVar6 + -1);
        uVar5 = uVar5 + 1;
        *(byte *)piVar6 = (char)piVar2 + (char)(int *)((uint)piVar2 / 10) * -10 + 0x30;
        piVar2 = (int *)((uint)piVar2 / 10);
      }
      for (; (int)uVar5 < in_stack_00000218; uVar5 = uVar5 + 1) {
        piVar6 = (int *)((int)piVar6 + -1);
        *(byte *)piVar6 = 0x30;
      }
      if (bVar7 != 0) {
        *(byte *)((int)piVar6 + -1) = bVar7;
        iVar4 = SPRINTF_OBJ_7A0();
        return iVar4;
      }
      break;
    case 0x78:
      piVar2 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar2 = (int *)((uint)piVar2 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if (((in_stack_00000210 >> 3 & 1) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar5 = 0;
      for (; piVar2 != (int *)0x0; piVar2 = (int *)((uint)piVar2 >> 4)) {
        piVar6 = (int *)((int)piVar6 + -1);
        uVar5 = uVar5 + 1;
        *(char *)piVar6 = "0123456789abcdef"[(uint)piVar2 & 0xf];
      }
      for (; (int)uVar5 < in_stack_00000218; uVar5 = uVar5 + 1) {
        piVar6 = (int *)((int)piVar6 + -1);
        *(byte *)piVar6 = 0x30;
      }
      if ((in_stack_00000210 >> 2 & 1) != 0) {
        *(byte *)((int)piVar6 + -1) = (byte)iVar4;
        *(byte *)((int)piVar6 + -2) = 0x30;
        iVar4 = SPRINTF_OBJ_7A0();
        return iVar4;
      }
    }
    puVar3 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar5 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      do {
        *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar5 < in_stack_00000214);
      puVar3 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar3,(uchar *)piVar6,uVar5);
    unaff_s2 = unaff_s2 + uVar5;
    for (; (int)uVar5 < in_stack_00000214; uVar5 = uVar5 + 1) {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      unaff_s2 = unaff_s2 + 1;
    }
    in_stack_0000024c = iVar9 + 1;
    iVar4 = (int)*(char *)(iVar9 + 1);
    if (iVar4 == 0) {
SPRINTF_OBJ_84C:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (iVar4 != 0x25) {
SPRINTF_OBJ_794:
      *(char *)(unaff_s3 + unaff_s2) = (char)iVar4;
      iVar4 = SPRINTF_OBJ_82C();
      return iVar4;
    }
    param_1 = 0x23;
    in_v1 = 0x30;
    in_stack_00000210 = DAT_80066468;
    in_stack_00000214 = DAT_8006646c;
    in_stack_00000218 = DAT_80066470;
  } while( true );
}



int SPRINTF_OBJ_1BC(int param_1,int param_2)

{
  int in_v0;
  void *pvVar1;
  int *piVar2;
  uchar *puVar3;
  uint uVar4;
  int *piVar5;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar6;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int in_stack_0000024c;
  int iVar7;
  int iVar8;
  
  do {
    iVar7 = in_stack_0000024c;
    if (param_2 == in_v0) {
      param_2 = (int)*(char *)(in_stack_0000024c + 1);
      iVar8 = in_stack_0000024c;
      if (param_2 == 0x2a) {
        iVar7 = SPRINTF_OBJ_258(in_stack_0000024c,(int)*(char *)(in_stack_0000024c + 2));
        return iVar7;
      }
      while (iVar7 = iVar8 + 1, param_2 - 0x30U < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
        param_2 = (int)*(char *)(iVar8 + 2);
        iVar8 = iVar7;
      }
      param_1 = in_stack_0000024c;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = in_stack_00000210 | 0x10;
      }
    }
    piVar5 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(param_2) {
    case 0x4c:
      iVar7 = SPRINTF_OBJ_29C(param_1,(int)*(char *)(iVar7 + 1));
      return iVar7;
    default:
      if (param_2 != 0x25) goto SPRINTF_OBJ_84C;
      goto SPRINTF_OBJ_794;
    case 99:
      iVar7 = SPRINTF_OBJ_7A0();
      return iVar7;
    case 100:
    case 0x69:
      piVar2 = *in_stack_00000220;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar2 = (int *)(int)(short)piVar2;
      }
      if ((int)piVar2 < 0) {
        iVar7 = SPRINTF_OBJ_390(-(int)piVar2);
        return iVar7;
      }
      if ((in_stack_00000210 >> 1 & 1) != 0) {
        iVar7 = SPRINTF_OBJ_390();
        return iVar7;
      }
      goto code_r0x8005983c;
    case 0x68:
      iVar7 = SPRINTF_OBJ_2E4();
      return iVar7;
    case 0x6c:
      iVar7 = SPRINTF_OBJ_2E4();
      return iVar7;
    case 0x6e:
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar7 = SPRINTF_OBJ_82C();
        return iVar7;
      }
      **in_stack_00000220 = unaff_s2;
      iVar7 = SPRINTF_OBJ_82C();
      return iVar7;
    case 0x6f:
      piVar2 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar2 = (int *)((uint)piVar2 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if ((in_stack_00000210 >> 3 & 1) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar4 = 0;
      for (; piVar2 != (int *)0x0; piVar2 = (int *)((uint)piVar2 >> 3)) {
        piVar5 = (int *)((int)piVar5 + -1);
        *(byte *)piVar5 = ((byte)piVar2 & 7) + 0x30;
        uVar4 = uVar4 + 1;
      }
      if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar4 != 0)) && (*(byte *)piVar5 != 0x30)) {
        piVar5 = (int *)((int)piVar5 + -1);
        *(byte *)piVar5 = 0x30;
        uVar4 = uVar4 + 1;
      }
      if ((int)uVar4 < in_stack_00000218) {
        do {
          piVar5 = (int *)((int)piVar5 + -1);
          *(byte *)piVar5 = 0x30;
          uVar4 = uVar4 + 1;
        } while ((int)uVar4 < in_stack_00000218);
        iVar7 = SPRINTF_OBJ_7A0();
        return iVar7;
      }
      break;
    case 0x70:
    case 0x58:
      iVar7 = SPRINTF_OBJ_5A4();
      return iVar7;
    case 0x73:
      piVar5 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 2 & 1) == 0) {
        if ((in_stack_00000210 >> 4 & 1) == 0) {
          strlen((char *)piVar5);
          iVar7 = SPRINTF_OBJ_7A0();
          return iVar7;
        }
        pvVar1 = memchr((uchar *)piVar5,'\0',in_stack_00000218);
        uVar4 = (int)pvVar1 - (int)piVar5;
        if (pvVar1 == (void *)0x0) {
          iVar7 = SPRINTF_OBJ_7A0();
          return iVar7;
        }
      }
      else {
        uVar4 = (uint)*(byte *)piVar5;
        piVar5 = (int *)((int)piVar5 + 1);
        if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar4)) {
          iVar7 = SPRINTF_OBJ_7A0();
          return iVar7;
        }
      }
      break;
    case 0x75:
      piVar2 = *in_stack_00000220;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar2 = (int *)((uint)piVar2 & 0xffff);
      }
      in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x8005983c:
      in_stack_00000220 = in_stack_00000220 + 1;
      bVar6 = (byte)(in_stack_00000210 >> 8);
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if (((in_stack_00000210 >> 3 & 1) != 0) &&
           (in_stack_00000218 = in_stack_00000214, bVar6 != 0)) {
          in_stack_00000218 = in_stack_00000214 + -1;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar4 = 0;
      while (piVar2 != (int *)0x0) {
        piVar5 = (int *)((int)piVar5 + -1);
        uVar4 = uVar4 + 1;
        *(byte *)piVar5 = (char)piVar2 + (char)(int *)((uint)piVar2 / 10) * -10 + 0x30;
        piVar2 = (int *)((uint)piVar2 / 10);
      }
      for (; (int)uVar4 < in_stack_00000218; uVar4 = uVar4 + 1) {
        piVar5 = (int *)((int)piVar5 + -1);
        *(byte *)piVar5 = 0x30;
      }
      if (bVar6 != 0) {
        *(byte *)((int)piVar5 + -1) = bVar6;
        iVar7 = SPRINTF_OBJ_7A0();
        return iVar7;
      }
      break;
    case 0x78:
      piVar2 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar2 = (int *)((uint)piVar2 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if (((in_stack_00000210 >> 3 & 1) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar4 = 0;
      for (; piVar2 != (int *)0x0; piVar2 = (int *)((uint)piVar2 >> 4)) {
        piVar5 = (int *)((int)piVar5 + -1);
        uVar4 = uVar4 + 1;
        *(char *)piVar5 = "0123456789abcdef"[(uint)piVar2 & 0xf];
      }
      for (; (int)uVar4 < in_stack_00000218; uVar4 = uVar4 + 1) {
        piVar5 = (int *)((int)piVar5 + -1);
        *(byte *)piVar5 = 0x30;
      }
      if ((in_stack_00000210 >> 2 & 1) != 0) {
        *(byte *)((int)piVar5 + -1) = (byte)param_2;
        *(byte *)((int)piVar5 + -2) = 0x30;
        iVar7 = SPRINTF_OBJ_7A0();
        return iVar7;
      }
    }
    puVar3 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar4 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      do {
        *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar4 < in_stack_00000214);
      puVar3 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar3,(uchar *)piVar5,uVar4);
    unaff_s2 = unaff_s2 + uVar4;
    for (; (int)uVar4 < in_stack_00000214; uVar4 = uVar4 + 1) {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      unaff_s2 = unaff_s2 + 1;
    }
    param_2 = (int)*(char *)(iVar7 + 1);
    if (param_2 == 0) {
SPRINTF_OBJ_84C:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (param_2 != 0x25) {
SPRINTF_OBJ_794:
      *(char *)(unaff_s3 + unaff_s2) = (char)param_2;
      iVar7 = SPRINTF_OBJ_82C();
      return iVar7;
    }
    param_1 = 0x23;
    param_2 = (int)*(char *)(iVar7 + 2);
    if (param_2 == unaff_s5) {
      iVar7 = SPRINTF_OBJ_90();
      return iVar7;
    }
    if (param_2 == unaff_s6) {
      iVar7 = SPRINTF_OBJ_90();
      return iVar7;
    }
    if (param_2 == unaff_s4) {
      iVar7 = SPRINTF_OBJ_90();
      return iVar7;
    }
    if (param_2 == 0x23) {
      iVar7 = SPRINTF_OBJ_90();
      return iVar7;
    }
    if (param_2 == 0x30) {
      iVar7 = SPRINTF_OBJ_90();
      return iVar7;
    }
    in_stack_00000214 = DAT_8006646c;
    in_stack_0000024c = iVar7 + 2;
    if (param_2 == 0x2a) {
      iVar7 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(iVar7 + 3));
      return iVar7;
    }
    while (in_v0 = 0x2e, in_stack_00000210 = DAT_80066468, in_stack_00000218 = DAT_80066470,
          param_2 - 0x30U < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
      param_2 = (int)*(char *)(in_stack_0000024c + 1);
      in_stack_0000024c = in_stack_0000024c + 1;
    }
  } while( true );
}



int SPRINTF_OBJ_258(int param_1,int param_2)

{
  void *pvVar1;
  int iVar2;
  int *piVar3;
  uchar *puVar4;
  uint uVar5;
  int *piVar6;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int in_stack_0000024c;
  
  do {
    iVar2 = param_1;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = in_stack_00000210 | 0x10;
    }
    do {
      piVar6 = (int *)&stack0x00000210;
      if ((in_stack_00000210 & 1) != 0) {
        in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
      }
      switch(param_2) {
      case 0x4c:
        iVar2 = SPRINTF_OBJ_29C(iVar2,(int)*(char *)(in_stack_0000024c + 1));
        return iVar2;
      default:
        if (param_2 != 0x25) goto SPRINTF_OBJ_84C;
        goto SPRINTF_OBJ_794;
      case 99:
        iVar2 = SPRINTF_OBJ_7A0();
        return iVar2;
      case 100:
      case 0x69:
        piVar3 = *in_stack_00000220;
        if ((in_stack_00000210 >> 5 & 1) != 0) {
          piVar3 = (int *)(int)(short)piVar3;
        }
        if ((int)piVar3 < 0) {
          iVar2 = SPRINTF_OBJ_390(-(int)piVar3);
          return iVar2;
        }
        if ((in_stack_00000210 >> 1 & 1) != 0) {
          iVar2 = SPRINTF_OBJ_390();
          return iVar2;
        }
        goto code_r0x8005983c;
      case 0x68:
        iVar2 = SPRINTF_OBJ_2E4();
        return iVar2;
      case 0x6c:
        iVar2 = SPRINTF_OBJ_2E4();
        return iVar2;
      case 0x6e:
        if ((in_stack_00000210 >> 5 & 1) != 0) {
          *(short *)*in_stack_00000220 = (short)unaff_s2;
          iVar2 = SPRINTF_OBJ_82C();
          return iVar2;
        }
        **in_stack_00000220 = unaff_s2;
        iVar2 = SPRINTF_OBJ_82C();
        return iVar2;
      case 0x6f:
        piVar3 = *in_stack_00000220;
        in_stack_00000220 = in_stack_00000220 + 1;
        if ((in_stack_00000210 >> 5 & 1) != 0) {
          piVar3 = (int *)((uint)piVar3 & 0xffff);
        }
        if ((in_stack_00000210 >> 4 & 1) == 0) {
          if ((in_stack_00000210 >> 3 & 1) != 0) {
            in_stack_00000218 = in_stack_00000214;
          }
          if (in_stack_00000218 < 1) {
            in_stack_00000218 = 1;
          }
        }
        uVar5 = 0;
        for (; piVar3 != (int *)0x0; piVar3 = (int *)((uint)piVar3 >> 3)) {
          piVar6 = (int *)((int)piVar6 + -1);
          *(byte *)piVar6 = ((byte)piVar3 & 7) + 0x30;
          uVar5 = uVar5 + 1;
        }
        if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar5 != 0)) && (*(byte *)piVar6 != 0x30)) {
          piVar6 = (int *)((int)piVar6 + -1);
          *(byte *)piVar6 = 0x30;
          uVar5 = uVar5 + 1;
        }
        if ((int)uVar5 < in_stack_00000218) {
          do {
            piVar6 = (int *)((int)piVar6 + -1);
            *(byte *)piVar6 = 0x30;
            uVar5 = uVar5 + 1;
          } while ((int)uVar5 < in_stack_00000218);
          iVar2 = SPRINTF_OBJ_7A0();
          return iVar2;
        }
        break;
      case 0x70:
      case 0x58:
        iVar2 = SPRINTF_OBJ_5A4();
        return iVar2;
      case 0x73:
        piVar6 = *in_stack_00000220;
        in_stack_00000220 = in_stack_00000220 + 1;
        if ((in_stack_00000210 >> 2 & 1) == 0) {
          if ((in_stack_00000210 >> 4 & 1) == 0) {
            strlen((char *)piVar6);
            iVar2 = SPRINTF_OBJ_7A0();
            return iVar2;
          }
          pvVar1 = memchr((uchar *)piVar6,'\0',in_stack_00000218);
          uVar5 = (int)pvVar1 - (int)piVar6;
          if (pvVar1 == (void *)0x0) {
            iVar2 = SPRINTF_OBJ_7A0();
            return iVar2;
          }
        }
        else {
          uVar5 = (uint)*(byte *)piVar6;
          piVar6 = (int *)((int)piVar6 + 1);
          if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar5)) {
            iVar2 = SPRINTF_OBJ_7A0();
            return iVar2;
          }
        }
        break;
      case 0x75:
        piVar3 = *in_stack_00000220;
        if ((in_stack_00000210 >> 5 & 1) != 0) {
          piVar3 = (int *)((uint)piVar3 & 0xffff);
        }
        in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x8005983c:
        in_stack_00000220 = in_stack_00000220 + 1;
        bVar7 = (byte)(in_stack_00000210 >> 8);
        if ((in_stack_00000210 >> 4 & 1) == 0) {
          if (((in_stack_00000210 >> 3 & 1) != 0) &&
             (in_stack_00000218 = in_stack_00000214, bVar7 != 0)) {
            in_stack_00000218 = in_stack_00000214 + -1;
          }
          if (in_stack_00000218 < 1) {
            in_stack_00000218 = 1;
          }
        }
        uVar5 = 0;
        while (piVar3 != (int *)0x0) {
          piVar6 = (int *)((int)piVar6 + -1);
          uVar5 = uVar5 + 1;
          *(byte *)piVar6 = (char)piVar3 + (char)(int *)((uint)piVar3 / 10) * -10 + 0x30;
          piVar3 = (int *)((uint)piVar3 / 10);
        }
        for (; (int)uVar5 < in_stack_00000218; uVar5 = uVar5 + 1) {
          piVar6 = (int *)((int)piVar6 + -1);
          *(byte *)piVar6 = 0x30;
        }
        if (bVar7 != 0) {
          *(byte *)((int)piVar6 + -1) = bVar7;
          iVar2 = SPRINTF_OBJ_7A0();
          return iVar2;
        }
        break;
      case 0x78:
        piVar3 = *in_stack_00000220;
        in_stack_00000220 = in_stack_00000220 + 1;
        if ((in_stack_00000210 >> 5 & 1) != 0) {
          piVar3 = (int *)((uint)piVar3 & 0xffff);
        }
        if ((in_stack_00000210 >> 4 & 1) == 0) {
          if (((in_stack_00000210 >> 3 & 1) != 0) &&
             (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
            in_stack_00000218 = in_stack_00000214 + -2;
          }
          if (in_stack_00000218 < 1) {
            in_stack_00000218 = 1;
          }
        }
        uVar5 = 0;
        for (; piVar3 != (int *)0x0; piVar3 = (int *)((uint)piVar3 >> 4)) {
          piVar6 = (int *)((int)piVar6 + -1);
          uVar5 = uVar5 + 1;
          *(char *)piVar6 = "0123456789abcdef"[(uint)piVar3 & 0xf];
        }
        for (; (int)uVar5 < in_stack_00000218; uVar5 = uVar5 + 1) {
          piVar6 = (int *)((int)piVar6 + -1);
          *(byte *)piVar6 = 0x30;
        }
        if ((in_stack_00000210 >> 2 & 1) != 0) {
          *(byte *)((int)piVar6 + -1) = (byte)param_2;
          *(byte *)((int)piVar6 + -2) = 0x30;
          iVar2 = SPRINTF_OBJ_7A0();
          return iVar2;
        }
      }
      puVar4 = (uchar *)(unaff_s3 + unaff_s2);
      if (((int)uVar5 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
        do {
          *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
          in_stack_00000214 = in_stack_00000214 + -1;
          unaff_s2 = unaff_s2 + 1;
        } while ((int)uVar5 < in_stack_00000214);
        puVar4 = (uchar *)(unaff_s3 + unaff_s2);
      }
      memmove(puVar4,(uchar *)piVar6,uVar5);
      unaff_s2 = unaff_s2 + uVar5;
      for (; (int)uVar5 < in_stack_00000214; uVar5 = uVar5 + 1) {
        *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
        unaff_s2 = unaff_s2 + 1;
      }
      param_2 = (int)*(char *)(in_stack_0000024c + 1);
      if (param_2 == 0) {
SPRINTF_OBJ_84C:
        *(undefined *)(unaff_s3 + unaff_s2) = 0;
        return unaff_s2;
      }
      if (param_2 != 0x25) {
SPRINTF_OBJ_794:
        *(char *)(unaff_s3 + unaff_s2) = (char)param_2;
        iVar2 = SPRINTF_OBJ_82C();
        return iVar2;
      }
      iVar2 = 0x23;
      param_2 = (int)*(char *)(in_stack_0000024c + 2);
      if (param_2 == unaff_s5) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      if (param_2 == unaff_s6) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      if (param_2 == unaff_s4) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      if (param_2 == 0x23) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      if (param_2 == 0x30) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      in_stack_00000214 = DAT_8006646c;
      param_1 = in_stack_0000024c + 2;
      if (param_2 == 0x2a) {
        iVar2 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
        return iVar2;
      }
      while (param_2 - 0x30U < 10) {
        in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
        param_2 = (int)*(char *)(param_1 + 1);
        param_1 = param_1 + 1;
      }
      in_stack_00000210 = DAT_80066468;
      in_stack_00000218 = DAT_80066470;
      in_stack_0000024c = param_1;
    } while (param_2 != 0x2e);
    param_2 = (int)*(char *)(param_1 + 1);
    iVar2 = param_1;
    if (param_2 == 0x2a) {
      iVar2 = SPRINTF_OBJ_258(param_1,(int)*(char *)(param_1 + 2));
      return iVar2;
    }
    while (in_stack_0000024c = iVar2 + 1, param_2 - 0x30U < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
      param_2 = (int)*(char *)(iVar2 + 2);
      iVar2 = in_stack_0000024c;
    }
  } while( true );
}



int SPRINTF_OBJ_29C(int param_1,int param_2)

{
  void *pvVar1;
  int iVar2;
  int in_v1;
  int *piVar3;
  uchar *puVar4;
  uint uVar5;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar6;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int iVar7;
  int in_stack_0000024c;
  
  do {
    switch(in_v1) {
    case 0:
      iVar2 = SPRINTF_OBJ_29C(param_1,(int)*(char *)(in_stack_0000024c + 1));
      return iVar2;
    default:
      if (param_2 == 0x25) goto SPRINTF_OBJ_794;
      goto SPRINTF_OBJ_84C;
    case 0x17:
      *(byte *)((int)unaff_s1 + -1) = *(byte *)in_stack_00000220;
      iVar2 = SPRINTF_OBJ_7A0();
      return iVar2;
    case 0x18:
    case 0x1d:
      piVar3 = *in_stack_00000220;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar3 = (int *)(int)(short)piVar3;
      }
      if ((int)piVar3 < 0) {
        iVar2 = SPRINTF_OBJ_390(-(int)piVar3);
        return iVar2;
      }
      if ((in_stack_00000210 >> 1 & 1) != 0) {
        iVar2 = SPRINTF_OBJ_390();
        return iVar2;
      }
      goto code_r0x8005983c;
    case 0x1c:
      iVar2 = SPRINTF_OBJ_2E4();
      return iVar2;
    case 0x20:
      iVar2 = SPRINTF_OBJ_2E4();
      return iVar2;
    case 0x22:
      if ((in_stack_00000210 >> 5 & 1) == 0) {
        **in_stack_00000220 = unaff_s2;
        iVar2 = SPRINTF_OBJ_82C();
        return iVar2;
      }
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar2 = SPRINTF_OBJ_82C();
      return iVar2;
    case 0x23:
      piVar3 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar3 = (int *)((uint)piVar3 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if ((in_stack_00000210 >> 3 & 1) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar5 = 0;
      for (; piVar3 != (int *)0x0; piVar3 = (int *)((uint)piVar3 >> 3)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = ((byte)piVar3 & 7) + 0x30;
        uVar5 = uVar5 + 1;
      }
      if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar5 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar5 = uVar5 + 1;
      }
      if ((int)uVar5 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar5 = uVar5 + 1;
        } while ((int)uVar5 < in_stack_00000218);
        iVar2 = SPRINTF_OBJ_7A0();
        return iVar2;
      }
      break;
    case 0x24:
    case 0xc:
      iVar2 = SPRINTF_OBJ_5A4();
      return iVar2;
    case 0x27:
      unaff_s1 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 2 & 1) == 0) {
        if ((in_stack_00000210 >> 4 & 1) == 0) {
          strlen((char *)unaff_s1);
          iVar2 = SPRINTF_OBJ_7A0();
          return iVar2;
        }
        pvVar1 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
        uVar5 = (int)pvVar1 - (int)unaff_s1;
        if (pvVar1 == (void *)0x0) {
          iVar2 = SPRINTF_OBJ_7A0();
          return iVar2;
        }
      }
      else {
        uVar5 = (uint)*(byte *)unaff_s1;
        unaff_s1 = (int *)((int)unaff_s1 + 1);
        if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar5)) {
          iVar2 = SPRINTF_OBJ_7A0();
          return iVar2;
        }
      }
      break;
    case 0x29:
      piVar3 = *in_stack_00000220;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar3 = (int *)((uint)piVar3 & 0xffff);
      }
      in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x8005983c:
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if (((in_stack_00000210 >> 3 & 1) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (char)(in_stack_00000210 >> 8) != '\0')) {
          in_stack_00000218 = in_stack_00000214 + -1;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar5 = 0;
      while (piVar3 != (int *)0x0) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar5 = uVar5 + 1;
        *(byte *)unaff_s1 = (char)piVar3 + (char)(int *)((uint)piVar3 / 10) * -10 + 0x30;
        piVar3 = (int *)((uint)piVar3 / 10);
      }
      if ((int)uVar5 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar5 = uVar5 + 1;
        } while ((int)uVar5 < in_stack_00000218);
      }
      bVar6 = (byte)(in_stack_00000210 >> 8);
      if (bVar6 != 0) {
        *(byte *)((int)unaff_s1 + -1) = bVar6;
        iVar2 = SPRINTF_OBJ_7A0();
        return iVar2;
      }
      break;
    case 0x2c:
      piVar3 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar3 = (int *)((uint)piVar3 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if (((in_stack_00000210 >> 3 & 1) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar5 = 0;
      for (; piVar3 != (int *)0x0; piVar3 = (int *)((uint)piVar3 >> 4)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar5 = uVar5 + 1;
        *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar3 & 0xf];
      }
      if ((int)uVar5 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar5 = uVar5 + 1;
        } while ((int)uVar5 < in_stack_00000218);
      }
      if ((in_stack_00000210 >> 2 & 1) != 0) {
        *(byte *)((int)unaff_s1 + -1) = (byte)param_2;
        *(byte *)((int)unaff_s1 + -2) = 0x30;
        iVar2 = SPRINTF_OBJ_7A0();
        return iVar2;
      }
    }
    puVar4 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar5 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      do {
        *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar5 < in_stack_00000214);
      puVar4 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar4,(uchar *)unaff_s1,uVar5);
    unaff_s2 = unaff_s2 + uVar5;
    for (; (int)uVar5 < in_stack_00000214; uVar5 = uVar5 + 1) {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      unaff_s2 = unaff_s2 + 1;
    }
    param_2 = (int)*(char *)(in_stack_0000024c + 1);
    if (param_2 == 0) {
SPRINTF_OBJ_84C:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (param_2 != 0x25) {
SPRINTF_OBJ_794:
      *(char *)(unaff_s3 + unaff_s2) = (char)param_2;
      iVar2 = SPRINTF_OBJ_82C();
      return iVar2;
    }
    param_2 = (int)*(char *)(in_stack_0000024c + 2);
    if (param_2 == unaff_s5) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    if (param_2 == unaff_s6) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    if (param_2 == unaff_s4) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    if (param_2 == 0x23) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    if (param_2 == 0x30) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    in_stack_00000214 = DAT_8006646c;
    iVar2 = in_stack_0000024c + 2;
    if (param_2 == 0x2a) {
      iVar2 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
      return iVar2;
    }
    while (param_2 - 0x30U < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
      param_2 = (int)*(char *)(iVar2 + 1);
      iVar2 = iVar2 + 1;
    }
    param_1 = 0x23;
    in_stack_00000210 = DAT_80066468;
    in_stack_00000218 = DAT_80066470;
    in_stack_0000024c = iVar2;
    if (param_2 == 0x2e) {
      param_2 = (int)*(char *)(iVar2 + 1);
      iVar7 = iVar2;
      if (param_2 == 0x2a) {
        iVar2 = SPRINTF_OBJ_258(iVar2,(int)*(char *)(iVar2 + 2));
        return iVar2;
      }
      while (in_stack_0000024c = iVar7 + 1, param_2 - 0x30U < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
        param_2 = (int)*(char *)(iVar7 + 2);
        iVar7 = in_stack_0000024c;
      }
      param_1 = iVar2;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = DAT_80066468 | 0x10;
      }
    }
    unaff_s1 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    in_v1 = param_2 + -0x4c;
  } while( true );
}



void SPRINTF_OBJ_2C0(void)

{
  SPRINTF_OBJ_2E4();
  return;
}



void SPRINTF_OBJ_2CC(void)

{
  SPRINTF_OBJ_2E4();
  return;
}



void SPRINTF_OBJ_2D8(undefined4 param_1)

{
  int in_stack_0000024c;
  
  SPRINTF_OBJ_29C(param_1,(int)*(char *)(in_stack_0000024c + 1));
  return;
}



void SPRINTF_OBJ_2E4(undefined4 param_1)

{
  int in_stack_0000024c;
  
  SPRINTF_OBJ_29C(param_1,(int)*(char *)(in_stack_0000024c + 1));
  return;
}



int SPRINTF_OBJ_304(void)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int iVar8;
  int in_stack_0000024c;
  
code_r0x800597b0:
  piVar4 = *in_stack_00000220;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)(int)(short)piVar4;
  }
  if ((int)piVar4 < 0) {
    iVar1 = SPRINTF_OBJ_390(-(int)piVar4);
    return iVar1;
  }
  if ((in_stack_00000210 >> 1 & 1) != 0) {
    iVar1 = SPRINTF_OBJ_390();
    return iVar1;
  }
code_r0x8005983c:
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (char)(in_stack_00000210 >> 8) != '\0')) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  while (piVar4 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar6 = uVar6 + 1;
    *(byte *)unaff_s1 = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
    piVar4 = (int *)((uint)piVar4 / 10);
  }
  if ((int)uVar6 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar6 = uVar6 + 1;
    } while ((int)uVar6 < in_stack_00000218);
  }
  bVar7 = (byte)(in_stack_00000210 >> 8);
  if (bVar7 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar7;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
  do {
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      do {
        *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar6 < in_stack_00000214);
      puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar5,(uchar *)unaff_s1,uVar6);
    unaff_s2 = unaff_s2 + uVar6;
    for (; (int)uVar6 < in_stack_00000214; uVar6 = uVar6 + 1) {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      unaff_s2 = unaff_s2 + 1;
    }
    iVar1 = (int)*(char *)(in_stack_0000024c + 1);
    if (iVar1 == 0) {
SPRINTF_OBJ_84C:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (iVar1 != 0x25) {
SPRINTF_OBJ_794:
      *(char *)(unaff_s3 + unaff_s2) = (char)iVar1;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    }
    iVar1 = (int)*(char *)(in_stack_0000024c + 2);
    if (iVar1 == unaff_s5) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == unaff_s6) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == unaff_s4) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == 0x23) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == 0x30) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    in_stack_00000214 = DAT_8006646c;
    iVar8 = in_stack_0000024c + 2;
    if (iVar1 == 0x2a) {
      iVar1 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
      return iVar1;
    }
    while (iVar1 - 0x30U < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + iVar1;
      iVar1 = (int)*(char *)(iVar8 + 1);
      iVar8 = iVar8 + 1;
    }
    iVar3 = 0x23;
    in_stack_00000210 = DAT_80066468;
    in_stack_00000218 = DAT_80066470;
    in_stack_0000024c = iVar8;
    if (iVar1 == 0x2e) {
      iVar1 = (int)*(char *)(iVar8 + 1);
      iVar3 = iVar8;
      if (iVar1 == 0x2a) {
        iVar1 = SPRINTF_OBJ_258(iVar8,(int)*(char *)(iVar8 + 2));
        return iVar1;
      }
      while (in_stack_0000024c = iVar3 + 1, iVar1 - 0x30U < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + iVar1;
        iVar1 = (int)*(char *)(iVar3 + 2);
        iVar3 = in_stack_0000024c;
      }
      iVar3 = iVar8;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = DAT_80066468 | 0x10;
      }
    }
    unaff_s1 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(iVar1) {
    case 0x4c:
      iVar1 = SPRINTF_OBJ_29C(iVar3,(int)*(char *)(in_stack_0000024c + 1));
      return iVar1;
    default:
      if (iVar1 != 0x25) goto SPRINTF_OBJ_84C;
      goto SPRINTF_OBJ_794;
    case 99:
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    case 100:
    case 0x69:
      goto code_r0x800597b0;
    case 0x68:
      iVar1 = SPRINTF_OBJ_2E4();
      return iVar1;
    case 0x6c:
      iVar1 = SPRINTF_OBJ_2E4();
      return iVar1;
    case 0x6e:
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar1 = SPRINTF_OBJ_82C();
        return iVar1;
      }
      **in_stack_00000220 = unaff_s2;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    case 0x6f:
      piVar4 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if ((in_stack_00000210 >> 3 & 1) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = ((byte)piVar4 & 7) + 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar6 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((int)uVar6 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar6 = uVar6 + 1;
        } while ((int)uVar6 < in_stack_00000218);
        iVar1 = SPRINTF_OBJ_7A0();
        return iVar1;
      }
      break;
    case 0x70:
    case 0x58:
      iVar1 = SPRINTF_OBJ_5A4();
      return iVar1;
    case 0x73:
      unaff_s1 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 2 & 1) == 0) {
        if ((in_stack_00000210 >> 4 & 1) == 0) {
          strlen((char *)unaff_s1);
          iVar1 = SPRINTF_OBJ_7A0();
          return iVar1;
        }
        pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
        uVar6 = (int)pvVar2 - (int)unaff_s1;
        if (pvVar2 == (void *)0x0) {
          iVar1 = SPRINTF_OBJ_7A0();
          return iVar1;
        }
      }
      else {
        uVar6 = (uint)*(byte *)unaff_s1;
        unaff_s1 = (int *)((int)unaff_s1 + 1);
        if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar6)) {
          iVar1 = SPRINTF_OBJ_7A0();
          return iVar1;
        }
      }
      break;
    case 0x75:
      goto SPRINTF_OBJ_35C;
    case 0x78:
      piVar4 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if (((in_stack_00000210 >> 3 & 1) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar6 = uVar6 + 1;
        *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar4 & 0xf];
      }
      for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
      }
      if ((in_stack_00000210 >> 2 & 1) != 0) {
        *(byte *)((int)unaff_s1 + -1) = (byte)iVar1;
        *(byte *)((int)unaff_s1 + -2) = 0x30;
        iVar1 = SPRINTF_OBJ_7A0();
        return iVar1;
      }
    }
  } while( true );
SPRINTF_OBJ_35C:
  piVar4 = *in_stack_00000220;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)((uint)piVar4 & 0xffff);
  }
  in_stack_00000210 = in_stack_00000210 & 0xff;
  goto code_r0x8005983c;
}



int SPRINTF_OBJ_35C(void)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int iVar8;
  int in_stack_0000024c;
  
code_r0x80059808:
  piVar4 = *in_stack_00000220;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)((uint)piVar4 & 0xffff);
  }
  in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x8005983c:
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (char)(in_stack_00000210 >> 8) != '\0')) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  while (piVar4 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar6 = uVar6 + 1;
    *(byte *)unaff_s1 = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
    piVar4 = (int *)((uint)piVar4 / 10);
  }
  if ((int)uVar6 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar6 = uVar6 + 1;
    } while ((int)uVar6 < in_stack_00000218);
  }
  bVar7 = (byte)(in_stack_00000210 >> 8);
  if (bVar7 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar7;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
  do {
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      do {
        *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar6 < in_stack_00000214);
      puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar5,(uchar *)unaff_s1,uVar6);
    unaff_s2 = unaff_s2 + uVar6;
    for (; (int)uVar6 < in_stack_00000214; uVar6 = uVar6 + 1) {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      unaff_s2 = unaff_s2 + 1;
    }
    iVar1 = (int)*(char *)(in_stack_0000024c + 1);
    if (iVar1 == 0) {
SPRINTF_OBJ_84C:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (iVar1 != 0x25) {
SPRINTF_OBJ_794:
      *(char *)(unaff_s3 + unaff_s2) = (char)iVar1;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    }
    iVar1 = (int)*(char *)(in_stack_0000024c + 2);
    if (iVar1 == unaff_s5) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == unaff_s6) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == unaff_s4) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == 0x23) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == 0x30) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    in_stack_00000214 = DAT_8006646c;
    iVar8 = in_stack_0000024c + 2;
    if (iVar1 == 0x2a) {
      iVar1 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
      return iVar1;
    }
    while (iVar1 - 0x30U < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + iVar1;
      iVar1 = (int)*(char *)(iVar8 + 1);
      iVar8 = iVar8 + 1;
    }
    iVar3 = 0x23;
    in_stack_00000210 = DAT_80066468;
    in_stack_00000218 = DAT_80066470;
    in_stack_0000024c = iVar8;
    if (iVar1 == 0x2e) {
      iVar1 = (int)*(char *)(iVar8 + 1);
      iVar3 = iVar8;
      if (iVar1 == 0x2a) {
        iVar1 = SPRINTF_OBJ_258(iVar8,(int)*(char *)(iVar8 + 2));
        return iVar1;
      }
      while (in_stack_0000024c = iVar3 + 1, iVar1 - 0x30U < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + iVar1;
        iVar1 = (int)*(char *)(iVar3 + 2);
        iVar3 = in_stack_0000024c;
      }
      iVar3 = iVar8;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = DAT_80066468 | 0x10;
      }
    }
    unaff_s1 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(iVar1) {
    case 0x4c:
      iVar1 = SPRINTF_OBJ_29C(iVar3,(int)*(char *)(in_stack_0000024c + 1));
      return iVar1;
    default:
      if (iVar1 != 0x25) goto SPRINTF_OBJ_84C;
      goto SPRINTF_OBJ_794;
    case 99:
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    case 100:
    case 0x69:
      goto SPRINTF_OBJ_304;
    case 0x68:
      iVar1 = SPRINTF_OBJ_2E4();
      return iVar1;
    case 0x6c:
      iVar1 = SPRINTF_OBJ_2E4();
      return iVar1;
    case 0x6e:
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar1 = SPRINTF_OBJ_82C();
        return iVar1;
      }
      **in_stack_00000220 = unaff_s2;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    case 0x6f:
      piVar4 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if ((in_stack_00000210 >> 3 & 1) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = ((byte)piVar4 & 7) + 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar6 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((int)uVar6 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar6 = uVar6 + 1;
        } while ((int)uVar6 < in_stack_00000218);
        iVar1 = SPRINTF_OBJ_7A0();
        return iVar1;
      }
      break;
    case 0x70:
    case 0x58:
      iVar1 = SPRINTF_OBJ_5A4();
      return iVar1;
    case 0x73:
      unaff_s1 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 2 & 1) == 0) {
        if ((in_stack_00000210 >> 4 & 1) == 0) {
          strlen((char *)unaff_s1);
          iVar1 = SPRINTF_OBJ_7A0();
          return iVar1;
        }
        pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
        uVar6 = (int)pvVar2 - (int)unaff_s1;
        if (pvVar2 == (void *)0x0) {
          iVar1 = SPRINTF_OBJ_7A0();
          return iVar1;
        }
      }
      else {
        uVar6 = (uint)*(byte *)unaff_s1;
        unaff_s1 = (int *)((int)unaff_s1 + 1);
        if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar6)) {
          iVar1 = SPRINTF_OBJ_7A0();
          return iVar1;
        }
      }
      break;
    case 0x75:
      goto code_r0x80059808;
    case 0x78:
      piVar4 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if (((in_stack_00000210 >> 3 & 1) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar6 = uVar6 + 1;
        *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar4 & 0xf];
      }
      for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
      }
      if ((in_stack_00000210 >> 2 & 1) != 0) {
        *(byte *)((int)unaff_s1 + -1) = (byte)iVar1;
        *(byte *)((int)unaff_s1 + -2) = 0x30;
        iVar1 = SPRINTF_OBJ_7A0();
        return iVar1;
      }
    }
  } while( true );
SPRINTF_OBJ_304:
  piVar4 = *in_stack_00000220;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)(int)(short)piVar4;
  }
  if ((int)piVar4 < 0) {
    iVar1 = SPRINTF_OBJ_390(-(int)piVar4);
    return iVar1;
  }
  if ((in_stack_00000210 >> 1 & 1) != 0) {
    iVar1 = SPRINTF_OBJ_390();
    return iVar1;
  }
  goto code_r0x8005983c;
}



int SPRINTF_OBJ_390(int *param_1)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int iVar8;
  int in_stack_0000024c;
  
code_r0x8005983c:
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (char)(in_stack_00000210 >> 8) != '\0')) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  while (param_1 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar6 = uVar6 + 1;
    *(byte *)unaff_s1 = (char)param_1 + (char)(int *)((uint)param_1 / 10) * -10 + 0x30;
    param_1 = (int *)((uint)param_1 / 10);
  }
  if ((int)uVar6 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar6 = uVar6 + 1;
    } while ((int)uVar6 < in_stack_00000218);
  }
  bVar7 = (byte)(in_stack_00000210 >> 8);
  if (bVar7 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar7;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
  do {
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      do {
        *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar6 < in_stack_00000214);
      puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar5,(uchar *)unaff_s1,uVar6);
    unaff_s2 = unaff_s2 + uVar6;
    for (; (int)uVar6 < in_stack_00000214; uVar6 = uVar6 + 1) {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      unaff_s2 = unaff_s2 + 1;
    }
    iVar1 = (int)*(char *)(in_stack_0000024c + 1);
    if (iVar1 == 0) {
SPRINTF_OBJ_84C:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (iVar1 != 0x25) {
SPRINTF_OBJ_794:
      *(char *)(unaff_s3 + unaff_s2) = (char)iVar1;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    }
    iVar1 = (int)*(char *)(in_stack_0000024c + 2);
    if (iVar1 == unaff_s5) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == unaff_s6) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == unaff_s4) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == 0x23) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (iVar1 == 0x30) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    in_stack_00000214 = DAT_8006646c;
    iVar8 = in_stack_0000024c + 2;
    if (iVar1 == 0x2a) {
      iVar1 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
      return iVar1;
    }
    while (iVar1 - 0x30U < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + iVar1;
      iVar1 = (int)*(char *)(iVar8 + 1);
      iVar8 = iVar8 + 1;
    }
    iVar3 = 0x23;
    in_stack_00000210 = DAT_80066468;
    in_stack_00000218 = DAT_80066470;
    in_stack_0000024c = iVar8;
    if (iVar1 == 0x2e) {
      iVar1 = (int)*(char *)(iVar8 + 1);
      iVar3 = iVar8;
      if (iVar1 == 0x2a) {
        iVar1 = SPRINTF_OBJ_258(iVar8,(int)*(char *)(iVar8 + 2));
        return iVar1;
      }
      while (in_stack_0000024c = iVar3 + 1, iVar1 - 0x30U < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + iVar1;
        iVar1 = (int)*(char *)(iVar3 + 2);
        iVar3 = in_stack_0000024c;
      }
      iVar3 = iVar8;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = DAT_80066468 | 0x10;
      }
    }
    unaff_s1 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(iVar1) {
    case 0x4c:
      iVar1 = SPRINTF_OBJ_29C(iVar3,(int)*(char *)(in_stack_0000024c + 1));
      return iVar1;
    default:
      if (iVar1 != 0x25) goto SPRINTF_OBJ_84C;
      goto SPRINTF_OBJ_794;
    case 99:
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    case 100:
    case 0x69:
      goto SPRINTF_OBJ_304;
    case 0x68:
      iVar1 = SPRINTF_OBJ_2E4();
      return iVar1;
    case 0x6c:
      iVar1 = SPRINTF_OBJ_2E4();
      return iVar1;
    case 0x6e:
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar1 = SPRINTF_OBJ_82C();
        return iVar1;
      }
      **in_stack_00000220 = unaff_s2;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    case 0x6f:
      piVar4 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if ((in_stack_00000210 >> 3 & 1) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = ((byte)piVar4 & 7) + 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar6 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((int)uVar6 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar6 = uVar6 + 1;
        } while ((int)uVar6 < in_stack_00000218);
        iVar1 = SPRINTF_OBJ_7A0();
        return iVar1;
      }
      break;
    case 0x70:
    case 0x58:
      iVar1 = SPRINTF_OBJ_5A4();
      return iVar1;
    case 0x73:
      unaff_s1 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 2 & 1) == 0) {
        if ((in_stack_00000210 >> 4 & 1) == 0) {
          strlen((char *)unaff_s1);
          iVar1 = SPRINTF_OBJ_7A0();
          return iVar1;
        }
        pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
        uVar6 = (int)pvVar2 - (int)unaff_s1;
        if (pvVar2 == (void *)0x0) {
          iVar1 = SPRINTF_OBJ_7A0();
          return iVar1;
        }
      }
      else {
        uVar6 = (uint)*(byte *)unaff_s1;
        unaff_s1 = (int *)((int)unaff_s1 + 1);
        if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar6)) {
          iVar1 = SPRINTF_OBJ_7A0();
          return iVar1;
        }
      }
      break;
    case 0x75:
      param_1 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        param_1 = (int *)((uint)param_1 & 0xffff);
      }
      in_stack_00000210 = in_stack_00000210 & 0xff;
      goto code_r0x8005983c;
    case 0x78:
      piVar4 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 >> 5 & 1) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        if (((in_stack_00000210 >> 3 & 1) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar6 = uVar6 + 1;
        *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar4 & 0xf];
      }
      for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
      }
      if ((in_stack_00000210 >> 2 & 1) != 0) {
        *(byte *)((int)unaff_s1 + -1) = (byte)iVar1;
        *(byte *)((int)unaff_s1 + -2) = 0x30;
        iVar1 = SPRINTF_OBJ_7A0();
        return iVar1;
      }
    }
  } while( true );
SPRINTF_OBJ_304:
  param_1 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    param_1 = (int *)(int)(short)param_1;
  }
  if ((int)param_1 < 0) {
    iVar1 = SPRINTF_OBJ_390(-(int)param_1);
    return iVar1;
  }
  if ((in_stack_00000210 >> 1 & 1) != 0) {
    iVar1 = SPRINTF_OBJ_390();
    return iVar1;
  }
  goto code_r0x8005983c;
}



int SPRINTF_OBJ_47C(void)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int iVar8;
  int in_stack_0000024c;
  
code_r0x80059928:
  piVar4 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)((uint)piVar4 & 0xffff);
  }
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if ((in_stack_00000210 >> 3 & 1) != 0) {
      in_stack_00000218 = in_stack_00000214;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = ((byte)piVar4 & 7) + 0x30;
    uVar6 = uVar6 + 1;
  }
  if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar6 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
    uVar6 = uVar6 + 1;
  }
  if ((int)uVar6 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar6 = uVar6 + 1;
    } while ((int)uVar6 < in_stack_00000218);
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
code_r0x80059c4c:
  puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    do {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar6 < in_stack_00000214);
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar5,(uchar *)unaff_s1,uVar6);
  unaff_s2 = unaff_s2 + uVar6;
  for (; (int)uVar6 < in_stack_00000214; uVar6 = uVar6 + 1) {
    *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
    unaff_s2 = unaff_s2 + 1;
  }
  iVar1 = (int)*(char *)(in_stack_0000024c + 1);
  if (iVar1 == 0) {
SPRINTF_OBJ_84C:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (iVar1 != 0x25) {
SPRINTF_OBJ_794:
    *(char *)(unaff_s3 + unaff_s2) = (char)iVar1;
    iVar1 = SPRINTF_OBJ_82C();
    return iVar1;
  }
  iVar1 = (int)*(char *)(in_stack_0000024c + 2);
  if (iVar1 == unaff_s5) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (iVar1 == unaff_s6) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (iVar1 == unaff_s4) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (iVar1 == 0x23) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (iVar1 == 0x30) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  in_stack_00000214 = DAT_8006646c;
  iVar8 = in_stack_0000024c + 2;
  if (iVar1 == 0x2a) {
    iVar1 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
    return iVar1;
  }
  while (iVar1 - 0x30U < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + iVar1;
    iVar1 = (int)*(char *)(iVar8 + 1);
    iVar8 = iVar8 + 1;
  }
  iVar3 = 0x23;
  in_stack_00000210 = DAT_80066468;
  in_stack_00000218 = DAT_80066470;
  in_stack_0000024c = iVar8;
  if (iVar1 == 0x2e) {
    iVar1 = (int)*(char *)(iVar8 + 1);
    iVar3 = iVar8;
    if (iVar1 == 0x2a) {
      iVar1 = SPRINTF_OBJ_258(iVar8,(int)*(char *)(iVar8 + 2));
      return iVar1;
    }
    while (in_stack_0000024c = iVar3 + 1, iVar1 - 0x30U < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + iVar1;
      iVar1 = (int)*(char *)(iVar3 + 2);
      iVar3 = in_stack_0000024c;
    }
    iVar3 = iVar8;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = DAT_80066468 | 0x10;
    }
  }
  unaff_s1 = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(iVar1) {
  case 0x4c:
    iVar1 = SPRINTF_OBJ_29C(iVar3,(int)*(char *)(in_stack_0000024c + 1));
    return iVar1;
  default:
    if (iVar1 != 0x25) goto SPRINTF_OBJ_84C;
    goto SPRINTF_OBJ_794;
  case 99:
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  case 100:
  case 0x69:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)(int)(short)piVar4;
    }
    if ((int)piVar4 < 0) {
      iVar1 = SPRINTF_OBJ_390(-(int)piVar4);
      return iVar1;
    }
    if ((in_stack_00000210 >> 1 & 1) != 0) {
      iVar1 = SPRINTF_OBJ_390();
      return iVar1;
    }
    break;
  case 0x68:
    iVar1 = SPRINTF_OBJ_2E4();
    return iVar1;
  case 0x6c:
    iVar1 = SPRINTF_OBJ_2E4();
    return iVar1;
  case 0x6e:
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    }
    **in_stack_00000220 = unaff_s2;
    iVar1 = SPRINTF_OBJ_82C();
    return iVar1;
  case 0x6f:
    goto code_r0x80059928;
  case 0x70:
  case 0x58:
    iVar1 = SPRINTF_OBJ_5A4();
    return iVar1;
  case 0x73:
    unaff_s1 = *in_stack_00000220;
    in_stack_00000220 = in_stack_00000220 + 1;
    if ((in_stack_00000210 >> 2 & 1) == 0) {
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        strlen((char *)unaff_s1);
        iVar1 = SPRINTF_OBJ_7A0();
        return iVar1;
      }
      pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
      uVar6 = (int)pvVar2 - (int)unaff_s1;
      if (pvVar2 == (void *)0x0) {
        iVar1 = SPRINTF_OBJ_7A0();
        return iVar1;
      }
    }
    else {
      uVar6 = (uint)*(byte *)unaff_s1;
      unaff_s1 = (int *)((int)unaff_s1 + 1);
      if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar6)) {
        iVar1 = SPRINTF_OBJ_7A0();
        return iVar1;
      }
    }
    goto code_r0x80059c4c;
  case 0x75:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)((uint)piVar4 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto SPRINTF_OBJ_59C;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  bVar7 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) && (in_stack_00000218 = in_stack_00000214, bVar7 != 0))
    {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  while (piVar4 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar6 = uVar6 + 1;
    *(byte *)unaff_s1 = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
    piVar4 = (int *)((uint)piVar4 / 10);
  }
  for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  if (bVar7 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar7;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
  goto code_r0x80059c4c;
SPRINTF_OBJ_59C:
  piVar4 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)((uint)piVar4 & 0xffff);
  }
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
      in_stack_00000218 = in_stack_00000214 + -2;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar6 = uVar6 + 1;
    *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar4 & 0xf];
  }
  for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  if ((in_stack_00000210 >> 2 & 1) != 0) {
    *(byte *)((int)unaff_s1 + -1) = (byte)iVar1;
    *(byte *)((int)unaff_s1 + -2) = 0x30;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
  goto code_r0x80059c4c;
}



void SPRINTF_OBJ_57C(void)

{
  SPRINTF_OBJ_5A4();
  return;
}



void SPRINTF_OBJ_590(void)

{
  SPRINTF_OBJ_5A4();
  return;
}



int SPRINTF_OBJ_59C(undefined4 param_1,int param_2)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int in_stack_0000024c;
  
code_r0x80059a48:
  piVar4 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)((uint)piVar4 & 0xffff);
  }
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
      in_stack_00000218 = in_stack_00000214 + -2;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar6 = uVar6 + 1;
    *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar4 & 0xf];
  }
  if ((int)uVar6 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar6 = uVar6 + 1;
    } while ((int)uVar6 < in_stack_00000218);
  }
  if ((in_stack_00000210 >> 2 & 1) != 0) {
    *(byte *)((int)unaff_s1 + -1) = (byte)param_2;
    *(byte *)((int)unaff_s1 + -2) = 0x30;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
code_r0x80059c4c:
  puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    do {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar6 < in_stack_00000214);
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar5,(uchar *)unaff_s1,uVar6);
  unaff_s2 = unaff_s2 + uVar6;
  for (; (int)uVar6 < in_stack_00000214; uVar6 = uVar6 + 1) {
    *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
    unaff_s2 = unaff_s2 + 1;
  }
  param_2 = (int)*(char *)(in_stack_0000024c + 1);
  if (param_2 == 0) {
SPRINTF_OBJ_84C:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (param_2 != 0x25) {
SPRINTF_OBJ_794:
    *(char *)(unaff_s3 + unaff_s2) = (char)param_2;
    iVar1 = SPRINTF_OBJ_82C();
    return iVar1;
  }
  param_2 = (int)*(char *)(in_stack_0000024c + 2);
  if (param_2 == unaff_s5) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == unaff_s6) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == unaff_s4) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == 0x23) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == 0x30) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  in_stack_00000214 = DAT_8006646c;
  iVar1 = in_stack_0000024c + 2;
  if (param_2 == 0x2a) {
    iVar1 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
    return iVar1;
  }
  while (param_2 - 0x30U < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
    param_2 = (int)*(char *)(iVar1 + 1);
    iVar1 = iVar1 + 1;
  }
  iVar3 = 0x23;
  in_stack_00000210 = DAT_80066468;
  in_stack_00000218 = DAT_80066470;
  in_stack_0000024c = iVar1;
  if (param_2 == 0x2e) {
    param_2 = (int)*(char *)(iVar1 + 1);
    iVar3 = iVar1;
    if (param_2 == 0x2a) {
      iVar1 = SPRINTF_OBJ_258(iVar1,(int)*(char *)(iVar1 + 2));
      return iVar1;
    }
    while (in_stack_0000024c = iVar3 + 1, param_2 - 0x30U < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
      param_2 = (int)*(char *)(iVar3 + 2);
      iVar3 = in_stack_0000024c;
    }
    iVar3 = iVar1;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = DAT_80066468 | 0x10;
    }
  }
  unaff_s1 = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(param_2) {
  case 0x4c:
    iVar1 = SPRINTF_OBJ_29C(iVar3,(int)*(char *)(in_stack_0000024c + 1));
    return iVar1;
  default:
    if (param_2 != 0x25) goto SPRINTF_OBJ_84C;
    goto SPRINTF_OBJ_794;
  case 99:
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  case 100:
  case 0x69:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)(int)(short)piVar4;
    }
    if ((int)piVar4 < 0) {
      iVar1 = SPRINTF_OBJ_390(-(int)piVar4);
      return iVar1;
    }
    if ((in_stack_00000210 >> 1 & 1) != 0) {
      iVar1 = SPRINTF_OBJ_390();
      return iVar1;
    }
    break;
  case 0x68:
    iVar1 = SPRINTF_OBJ_2E4();
    return iVar1;
  case 0x6c:
    iVar1 = SPRINTF_OBJ_2E4();
    return iVar1;
  case 0x6e:
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    }
    **in_stack_00000220 = unaff_s2;
    iVar1 = SPRINTF_OBJ_82C();
    return iVar1;
  case 0x6f:
    piVar4 = *in_stack_00000220;
    in_stack_00000220 = in_stack_00000220 + 1;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)((uint)piVar4 & 0xffff);
    }
    if ((in_stack_00000210 >> 4 & 1) == 0) {
      if ((in_stack_00000210 >> 3 & 1) != 0) {
        in_stack_00000218 = in_stack_00000214;
      }
      if (in_stack_00000218 < 1) {
        in_stack_00000218 = 1;
      }
    }
    uVar6 = 0;
    for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = ((byte)piVar4 & 7) + 0x30;
      uVar6 = uVar6 + 1;
    }
    if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar6 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar6 = uVar6 + 1;
    }
    if ((int)uVar6 < in_stack_00000218) {
      do {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar6 = uVar6 + 1;
      } while ((int)uVar6 < in_stack_00000218);
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
    goto code_r0x80059c4c;
  case 0x70:
  case 0x58:
    iVar1 = SPRINTF_OBJ_5A4();
    return iVar1;
  case 0x73:
    goto SPRINTF_OBJ_6C8;
  case 0x75:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)((uint)piVar4 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto code_r0x80059a48;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  bVar7 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) && (in_stack_00000218 = in_stack_00000214, bVar7 != 0))
    {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  while (piVar4 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar6 = uVar6 + 1;
    *(byte *)unaff_s1 = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
    piVar4 = (int *)((uint)piVar4 / 10);
  }
  for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  if (bVar7 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar7;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
  goto code_r0x80059c4c;
SPRINTF_OBJ_6C8:
  unaff_s1 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 2 & 1) == 0) {
    if ((in_stack_00000210 >> 4 & 1) == 0) {
      strlen((char *)unaff_s1);
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
    pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
    uVar6 = (int)pvVar2 - (int)unaff_s1;
    if (pvVar2 == (void *)0x0) {
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
  }
  else {
    uVar6 = (uint)*(byte *)unaff_s1;
    unaff_s1 = (int *)((int)unaff_s1 + 1);
    if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar6)) {
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
  }
  goto code_r0x80059c4c;
}



int SPRINTF_OBJ_5A4(undefined4 param_1,int param_2,undefined4 param_3,char *param_4)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int in_stack_0000024c;
  
code_r0x80059a50:
  piVar4 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)((uint)piVar4 & 0xffff);
  }
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
      in_stack_00000218 = in_stack_00000214 + -2;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar6 = uVar6 + 1;
    *(char *)unaff_s1 = param_4[(uint)piVar4 & 0xf];
  }
  if ((int)uVar6 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar6 = uVar6 + 1;
    } while ((int)uVar6 < in_stack_00000218);
  }
  if ((in_stack_00000210 >> 2 & 1) != 0) {
    *(byte *)((int)unaff_s1 + -1) = (byte)param_2;
    *(byte *)((int)unaff_s1 + -2) = 0x30;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
code_r0x80059c4c:
  puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    do {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar6 < in_stack_00000214);
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar5,(uchar *)unaff_s1,uVar6);
  unaff_s2 = unaff_s2 + uVar6;
  for (; (int)uVar6 < in_stack_00000214; uVar6 = uVar6 + 1) {
    *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
    unaff_s2 = unaff_s2 + 1;
  }
  param_2 = (int)*(char *)(in_stack_0000024c + 1);
  if (param_2 == 0) {
SPRINTF_OBJ_84C:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (param_2 != 0x25) {
SPRINTF_OBJ_794:
    *(char *)(unaff_s3 + unaff_s2) = (char)param_2;
    iVar1 = SPRINTF_OBJ_82C();
    return iVar1;
  }
  param_2 = (int)*(char *)(in_stack_0000024c + 2);
  if (param_2 == unaff_s5) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == unaff_s6) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == unaff_s4) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == 0x23) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == 0x30) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  in_stack_00000214 = DAT_8006646c;
  iVar1 = in_stack_0000024c + 2;
  if (param_2 == 0x2a) {
    iVar1 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
    return iVar1;
  }
  while (param_2 - 0x30U < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
    param_2 = (int)*(char *)(iVar1 + 1);
    iVar1 = iVar1 + 1;
  }
  iVar3 = 0x23;
  in_stack_00000210 = DAT_80066468;
  in_stack_00000218 = DAT_80066470;
  in_stack_0000024c = iVar1;
  if (param_2 == 0x2e) {
    param_2 = (int)*(char *)(iVar1 + 1);
    iVar3 = iVar1;
    if (param_2 == 0x2a) {
      iVar1 = SPRINTF_OBJ_258(iVar1,(int)*(char *)(iVar1 + 2));
      return iVar1;
    }
    while (in_stack_0000024c = iVar3 + 1, param_2 - 0x30U < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
      param_2 = (int)*(char *)(iVar3 + 2);
      iVar3 = in_stack_0000024c;
    }
    iVar3 = iVar1;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = DAT_80066468 | 0x10;
    }
  }
  unaff_s1 = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(param_2) {
  case 0x4c:
    iVar1 = SPRINTF_OBJ_29C(iVar3,(int)*(char *)(in_stack_0000024c + 1));
    return iVar1;
  default:
    if (param_2 != 0x25) goto SPRINTF_OBJ_84C;
    goto SPRINTF_OBJ_794;
  case 99:
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  case 100:
  case 0x69:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)(int)(short)piVar4;
    }
    if ((int)piVar4 < 0) {
      iVar1 = SPRINTF_OBJ_390(-(int)piVar4);
      return iVar1;
    }
    if ((in_stack_00000210 >> 1 & 1) != 0) {
      iVar1 = SPRINTF_OBJ_390();
      return iVar1;
    }
    break;
  case 0x68:
    iVar1 = SPRINTF_OBJ_2E4();
    return iVar1;
  case 0x6c:
    iVar1 = SPRINTF_OBJ_2E4();
    return iVar1;
  case 0x6e:
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    }
    **in_stack_00000220 = unaff_s2;
    iVar1 = SPRINTF_OBJ_82C();
    return iVar1;
  case 0x6f:
    piVar4 = *in_stack_00000220;
    in_stack_00000220 = in_stack_00000220 + 1;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)((uint)piVar4 & 0xffff);
    }
    if ((in_stack_00000210 >> 4 & 1) == 0) {
      if ((in_stack_00000210 >> 3 & 1) != 0) {
        in_stack_00000218 = in_stack_00000214;
      }
      if (in_stack_00000218 < 1) {
        in_stack_00000218 = 1;
      }
    }
    uVar6 = 0;
    for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = ((byte)piVar4 & 7) + 0x30;
      uVar6 = uVar6 + 1;
    }
    if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar6 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar6 = uVar6 + 1;
    }
    if ((int)uVar6 < in_stack_00000218) {
      do {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar6 = uVar6 + 1;
      } while ((int)uVar6 < in_stack_00000218);
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
    goto code_r0x80059c4c;
  case 0x70:
  case 0x58:
    iVar1 = SPRINTF_OBJ_5A4();
    return iVar1;
  case 0x73:
    goto SPRINTF_OBJ_6C8;
  case 0x75:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)((uint)piVar4 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto SPRINTF_OBJ_59C;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  bVar7 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) && (in_stack_00000218 = in_stack_00000214, bVar7 != 0))
    {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  while (piVar4 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar6 = uVar6 + 1;
    *(byte *)unaff_s1 = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
    piVar4 = (int *)((uint)piVar4 / 10);
  }
  for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  if (bVar7 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar7;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
  goto code_r0x80059c4c;
SPRINTF_OBJ_59C:
  param_4 = "0123456789abcdef";
  goto code_r0x80059a50;
SPRINTF_OBJ_6C8:
  unaff_s1 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 2 & 1) == 0) {
    if ((in_stack_00000210 >> 4 & 1) == 0) {
      strlen((char *)unaff_s1);
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
    pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
    uVar6 = (int)pvVar2 - (int)unaff_s1;
    if (pvVar2 == (void *)0x0) {
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
  }
  else {
    uVar6 = (uint)*(byte *)unaff_s1;
    unaff_s1 = (int *)((int)unaff_s1 + 1);
    if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar6)) {
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
  }
  goto code_r0x80059c4c;
}



void SPRINTF_OBJ_6A8(void)

{
  int unaff_s1;
  undefined *in_stack_00000220;
  
  *(undefined *)(unaff_s1 + -1) = *in_stack_00000220;
  SPRINTF_OBJ_7A0();
  return;
}



int SPRINTF_OBJ_6C8(void)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *piVar7;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar8;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int iVar9;
  int in_stack_0000024c;
  
code_r0x80059b74:
  piVar7 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 2 & 1) == 0) {
    if ((in_stack_00000210 >> 4 & 1) == 0) {
      strlen((char *)piVar7);
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
    pvVar2 = memchr((uchar *)piVar7,'\0',in_stack_00000218);
    uVar6 = (int)pvVar2 - (int)piVar7;
    if (pvVar2 == (void *)0x0) {
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
  }
  else {
    uVar6 = (uint)*(byte *)piVar7;
    piVar7 = (int *)((int)piVar7 + 1);
    if (((in_stack_00000210 >> 4 & 1) != 0) && (in_stack_00000218 < (int)uVar6)) {
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
  }
code_r0x80059c4c:
  puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    do {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar6 < in_stack_00000214);
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar5,(uchar *)piVar7,uVar6);
  unaff_s2 = unaff_s2 + uVar6;
  for (; (int)uVar6 < in_stack_00000214; uVar6 = uVar6 + 1) {
    *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
    unaff_s2 = unaff_s2 + 1;
  }
  iVar1 = (int)*(char *)(in_stack_0000024c + 1);
  if (iVar1 == 0) {
SPRINTF_OBJ_84C:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (iVar1 != 0x25) {
SPRINTF_OBJ_794:
    *(char *)(unaff_s3 + unaff_s2) = (char)iVar1;
    iVar1 = SPRINTF_OBJ_82C();
    return iVar1;
  }
  iVar1 = (int)*(char *)(in_stack_0000024c + 2);
  if (iVar1 == unaff_s5) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (iVar1 == unaff_s6) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (iVar1 == unaff_s4) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (iVar1 == 0x23) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (iVar1 == 0x30) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  in_stack_00000214 = DAT_8006646c;
  iVar9 = in_stack_0000024c + 2;
  if (iVar1 == 0x2a) {
    iVar1 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
    return iVar1;
  }
  while (iVar1 - 0x30U < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + iVar1;
    iVar1 = (int)*(char *)(iVar9 + 1);
    iVar9 = iVar9 + 1;
  }
  iVar3 = 0x23;
  in_stack_00000210 = DAT_80066468;
  in_stack_00000218 = DAT_80066470;
  in_stack_0000024c = iVar9;
  if (iVar1 == 0x2e) {
    iVar1 = (int)*(char *)(iVar9 + 1);
    iVar3 = iVar9;
    if (iVar1 == 0x2a) {
      iVar1 = SPRINTF_OBJ_258(iVar9,(int)*(char *)(iVar9 + 2));
      return iVar1;
    }
    while (in_stack_0000024c = iVar3 + 1, iVar1 - 0x30U < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + iVar1;
      iVar1 = (int)*(char *)(iVar3 + 2);
      iVar3 = in_stack_0000024c;
    }
    iVar3 = iVar9;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = DAT_80066468 | 0x10;
    }
  }
  piVar7 = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(iVar1) {
  case 0x4c:
    iVar1 = SPRINTF_OBJ_29C(iVar3,(int)*(char *)(in_stack_0000024c + 1));
    return iVar1;
  default:
    if (iVar1 != 0x25) goto SPRINTF_OBJ_84C;
    goto SPRINTF_OBJ_794;
  case 99:
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  case 100:
  case 0x69:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)(int)(short)piVar4;
    }
    if ((int)piVar4 < 0) {
      iVar1 = SPRINTF_OBJ_390(-(int)piVar4);
      return iVar1;
    }
    if ((in_stack_00000210 >> 1 & 1) != 0) {
      iVar1 = SPRINTF_OBJ_390();
      return iVar1;
    }
    break;
  case 0x68:
    iVar1 = SPRINTF_OBJ_2E4();
    return iVar1;
  case 0x6c:
    iVar1 = SPRINTF_OBJ_2E4();
    return iVar1;
  case 0x6e:
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar1 = SPRINTF_OBJ_82C();
      return iVar1;
    }
    **in_stack_00000220 = unaff_s2;
    iVar1 = SPRINTF_OBJ_82C();
    return iVar1;
  case 0x6f:
    piVar4 = *in_stack_00000220;
    in_stack_00000220 = in_stack_00000220 + 1;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)((uint)piVar4 & 0xffff);
    }
    if ((in_stack_00000210 >> 4 & 1) == 0) {
      if ((in_stack_00000210 >> 3 & 1) != 0) {
        in_stack_00000218 = in_stack_00000214;
      }
      if (in_stack_00000218 < 1) {
        in_stack_00000218 = 1;
      }
    }
    uVar6 = 0;
    for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
      piVar7 = (int *)((int)piVar7 + -1);
      *(byte *)piVar7 = ((byte)piVar4 & 7) + 0x30;
      uVar6 = uVar6 + 1;
    }
    if ((((in_stack_00000210 >> 2 & 1) != 0) && (uVar6 != 0)) && (*(byte *)piVar7 != 0x30)) {
      piVar7 = (int *)((int)piVar7 + -1);
      *(byte *)piVar7 = 0x30;
      uVar6 = uVar6 + 1;
    }
    if ((int)uVar6 < in_stack_00000218) {
      do {
        piVar7 = (int *)((int)piVar7 + -1);
        *(byte *)piVar7 = 0x30;
        uVar6 = uVar6 + 1;
      } while ((int)uVar6 < in_stack_00000218);
      iVar1 = SPRINTF_OBJ_7A0();
      return iVar1;
    }
    goto code_r0x80059c4c;
  case 0x70:
  case 0x58:
    iVar1 = SPRINTF_OBJ_5A4();
    return iVar1;
  case 0x73:
    goto code_r0x80059b74;
  case 0x75:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)((uint)piVar4 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto SPRINTF_OBJ_59C;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  bVar8 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) && (in_stack_00000218 = in_stack_00000214, bVar8 != 0))
    {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  while (piVar4 != (int *)0x0) {
    piVar7 = (int *)((int)piVar7 + -1);
    uVar6 = uVar6 + 1;
    *(byte *)piVar7 = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
    piVar4 = (int *)((uint)piVar4 / 10);
  }
  for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
    piVar7 = (int *)((int)piVar7 + -1);
    *(byte *)piVar7 = 0x30;
  }
  if (bVar8 != 0) {
    *(byte *)((int)piVar7 + -1) = bVar8;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
  goto code_r0x80059c4c;
SPRINTF_OBJ_59C:
  piVar4 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)((uint)piVar4 & 0xffff);
  }
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
      in_stack_00000218 = in_stack_00000214 + -2;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar6 = 0;
  for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
    piVar7 = (int *)((int)piVar7 + -1);
    uVar6 = uVar6 + 1;
    *(char *)piVar7 = "0123456789abcdef"[(uint)piVar4 & 0xf];
  }
  for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
    piVar7 = (int *)((int)piVar7 + -1);
    *(byte *)piVar7 = 0x30;
  }
  if ((in_stack_00000210 >> 2 & 1) != 0) {
    *(byte *)((int)piVar7 + -1) = (byte)iVar1;
    *(byte *)((int)piVar7 + -2) = 0x30;
    iVar1 = SPRINTF_OBJ_7A0();
    return iVar1;
  }
  goto code_r0x80059c4c;
}



void SPRINTF_OBJ_754(void)

{
  undefined4 unaff_s2;
  uint in_stack_00000210;
  undefined4 *in_stack_00000220;
  
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    *(short *)(undefined4 *)*in_stack_00000220 = (short)unaff_s2;
    SPRINTF_OBJ_82C();
    return;
  }
  *(undefined4 *)*in_stack_00000220 = unaff_s2;
  SPRINTF_OBJ_82C();
  return;
}



void SPRINTF_OBJ_788(undefined4 param_1,int param_2)

{
  int unaff_s2;
  int unaff_s3;
  
  if (param_2 == 0x25) {
    *(undefined *)(unaff_s3 + unaff_s2) = 0x25;
    SPRINTF_OBJ_82C();
    return;
  }
  *(undefined *)(unaff_s3 + unaff_s2) = 0;
  return;
}



int SPRINTF_OBJ_7A0(void)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  int *piVar4;
  uchar *puVar5;
  int iVar6;
  uint unaff_s0;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int **in_stack_00000220;
  int iVar8;
  int in_stack_0000024c;
  
code_r0x80059c4c:
  puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)unaff_s0 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    do {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)unaff_s0 < in_stack_00000214);
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar5,(uchar *)unaff_s1,unaff_s0);
  unaff_s2 = unaff_s2 + unaff_s0;
  for (; (int)unaff_s0 < in_stack_00000214; unaff_s0 = unaff_s0 + 1) {
    *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
    unaff_s2 = unaff_s2 + 1;
  }
  iVar6 = (int)*(char *)(in_stack_0000024c + 1);
  if (iVar6 == 0) {
SPRINTF_OBJ_84C:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (iVar6 != 0x25) {
SPRINTF_OBJ_794:
    *(char *)(unaff_s3 + unaff_s2) = (char)iVar6;
    iVar6 = SPRINTF_OBJ_82C();
    return iVar6;
  }
  iVar6 = (int)*(char *)(in_stack_0000024c + 2);
  if (iVar6 == unaff_s5) {
    iVar6 = SPRINTF_OBJ_90();
    return iVar6;
  }
  if (iVar6 == unaff_s6) {
    iVar6 = SPRINTF_OBJ_90();
    return iVar6;
  }
  if (iVar6 == unaff_s4) {
    iVar6 = SPRINTF_OBJ_90();
    return iVar6;
  }
  if (iVar6 == 0x23) {
    iVar6 = SPRINTF_OBJ_90();
    return iVar6;
  }
  if (iVar6 == 0x30) {
    iVar6 = SPRINTF_OBJ_90();
    return iVar6;
  }
  in_stack_00000214 = DAT_8006646c;
  iVar8 = in_stack_0000024c + 2;
  if (iVar6 == 0x2a) {
    iVar6 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
    return iVar6;
  }
  while (iVar6 - 0x30U < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + iVar6;
    iVar6 = (int)*(char *)(iVar8 + 1);
    iVar8 = iVar8 + 1;
  }
  iVar3 = 0x23;
  in_stack_00000210 = DAT_80066468;
  iVar1 = DAT_80066470;
  in_stack_0000024c = iVar8;
  if (iVar6 == 0x2e) {
    iVar6 = (int)*(char *)(iVar8 + 1);
    iVar3 = iVar8;
    if (iVar6 == 0x2a) {
      iVar6 = SPRINTF_OBJ_258(iVar8,(int)*(char *)(iVar8 + 2));
      return iVar6;
    }
    while (in_stack_0000024c = iVar3 + 1, iVar6 - 0x30U < 10) {
      iVar1 = iVar1 * 10 + -0x30 + iVar6;
      iVar6 = (int)*(char *)(iVar3 + 2);
      iVar3 = in_stack_0000024c;
    }
    iVar3 = iVar8;
    if (-1 < iVar1) {
      in_stack_00000210 = DAT_80066468 | 0x10;
    }
  }
  unaff_s1 = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(iVar6) {
  case 0x4c:
    iVar6 = SPRINTF_OBJ_29C(iVar3,(int)*(char *)(in_stack_0000024c + 1));
    return iVar6;
  default:
    if (iVar6 != 0x25) goto SPRINTF_OBJ_84C;
    goto SPRINTF_OBJ_794;
  case 99:
    iVar6 = SPRINTF_OBJ_7A0();
    return iVar6;
  case 100:
  case 0x69:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)(int)(short)piVar4;
    }
    if ((int)piVar4 < 0) {
      iVar6 = SPRINTF_OBJ_390(-(int)piVar4);
      return iVar6;
    }
    if ((in_stack_00000210 >> 1 & 1) != 0) {
      iVar6 = SPRINTF_OBJ_390();
      return iVar6;
    }
    break;
  case 0x68:
    iVar6 = SPRINTF_OBJ_2E4();
    return iVar6;
  case 0x6c:
    iVar6 = SPRINTF_OBJ_2E4();
    return iVar6;
  case 0x6e:
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar6 = SPRINTF_OBJ_82C();
      return iVar6;
    }
    **in_stack_00000220 = unaff_s2;
    iVar6 = SPRINTF_OBJ_82C();
    return iVar6;
  case 0x6f:
    piVar4 = *in_stack_00000220;
    in_stack_00000220 = in_stack_00000220 + 1;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)((uint)piVar4 & 0xffff);
    }
    if ((in_stack_00000210 >> 4 & 1) == 0) {
      if ((in_stack_00000210 >> 3 & 1) != 0) {
        iVar1 = in_stack_00000214;
      }
      if (iVar1 < 1) {
        iVar1 = 1;
      }
    }
    unaff_s0 = 0;
    for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = ((byte)piVar4 & 7) + 0x30;
      unaff_s0 = unaff_s0 + 1;
    }
    if ((((in_stack_00000210 >> 2 & 1) != 0) && (unaff_s0 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      unaff_s0 = unaff_s0 + 1;
    }
    if ((int)unaff_s0 < iVar1) {
      do {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        unaff_s0 = unaff_s0 + 1;
      } while ((int)unaff_s0 < iVar1);
      iVar6 = SPRINTF_OBJ_7A0();
      return iVar6;
    }
    goto code_r0x80059c4c;
  case 0x70:
  case 0x58:
    iVar6 = SPRINTF_OBJ_5A4();
    return iVar6;
  case 0x73:
    unaff_s1 = *in_stack_00000220;
    in_stack_00000220 = in_stack_00000220 + 1;
    if ((in_stack_00000210 >> 2 & 1) == 0) {
      if ((in_stack_00000210 >> 4 & 1) == 0) {
        strlen((char *)unaff_s1);
        iVar6 = SPRINTF_OBJ_7A0();
        return iVar6;
      }
      pvVar2 = memchr((uchar *)unaff_s1,'\0',iVar1);
      unaff_s0 = (int)pvVar2 - (int)unaff_s1;
      if (pvVar2 == (void *)0x0) {
        iVar6 = SPRINTF_OBJ_7A0();
        return iVar6;
      }
    }
    else {
      unaff_s0 = (uint)*(byte *)unaff_s1;
      unaff_s1 = (int *)((int)unaff_s1 + 1);
      if (((in_stack_00000210 >> 4 & 1) != 0) && (iVar1 < (int)unaff_s0)) {
        iVar6 = SPRINTF_OBJ_7A0();
        return iVar6;
      }
    }
    goto code_r0x80059c4c;
  case 0x75:
    piVar4 = *in_stack_00000220;
    if ((in_stack_00000210 >> 5 & 1) != 0) {
      piVar4 = (int *)((uint)piVar4 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto SPRINTF_OBJ_59C;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  bVar7 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) && (iVar1 = in_stack_00000214, bVar7 != 0)) {
      iVar1 = in_stack_00000214 + -1;
    }
    if (iVar1 < 1) {
      iVar1 = 1;
    }
  }
  unaff_s0 = 0;
  while (piVar4 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    unaff_s0 = unaff_s0 + 1;
    *(byte *)unaff_s1 = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
    piVar4 = (int *)((uint)piVar4 / 10);
  }
  for (; (int)unaff_s0 < iVar1; unaff_s0 = unaff_s0 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  if (bVar7 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar7;
    iVar6 = SPRINTF_OBJ_7A0();
    return iVar6;
  }
  goto code_r0x80059c4c;
SPRINTF_OBJ_59C:
  piVar4 = *in_stack_00000220;
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 >> 5 & 1) != 0) {
    piVar4 = (int *)((uint)piVar4 & 0xffff);
  }
  if ((in_stack_00000210 >> 4 & 1) == 0) {
    if (((in_stack_00000210 >> 3 & 1) != 0) &&
       (iVar1 = in_stack_00000214, (in_stack_00000210 >> 2 & 1) != 0)) {
      iVar1 = in_stack_00000214 + -2;
    }
    if (iVar1 < 1) {
      iVar1 = 1;
    }
  }
  unaff_s0 = 0;
  for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    unaff_s0 = unaff_s0 + 1;
    *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar4 & 0xf];
  }
  for (; (int)unaff_s0 < iVar1; unaff_s0 = unaff_s0 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  if ((in_stack_00000210 >> 2 & 1) != 0) {
    *(byte *)((int)unaff_s1 + -1) = (byte)iVar6;
    *(byte *)((int)unaff_s1 + -2) = 0x30;
    iVar6 = SPRINTF_OBJ_7A0();
    return iVar6;
  }
  goto code_r0x80059c4c;
}



int SPRINTF_OBJ_82C(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  void *pvVar4;
  int iVar5;
  int *piVar6;
  uchar *puVar7;
  int iVar8;
  uint uVar9;
  int *piVar10;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int unaff_s5;
  int unaff_s6;
  byte bVar11;
  int **in_stack_00000220;
  int iVar12;
  int in_stack_0000024c;
  
  while (iVar8 = (int)*(char *)(in_stack_0000024c + 1), iVar8 != 0) {
    if (iVar8 != 0x25) {
SPRINTF_OBJ_794:
      *(char *)(unaff_s3 + unaff_s2) = (char)iVar8;
      iVar8 = SPRINTF_OBJ_82C();
      return iVar8;
    }
    iVar8 = (int)*(char *)(in_stack_0000024c + 2);
    if (iVar8 == unaff_s5) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    if (iVar8 == unaff_s6) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    if (iVar8 == unaff_s4) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    if (iVar8 == 0x23) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    if (iVar8 == 0x30) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    iVar1 = DAT_8006646c;
    iVar12 = in_stack_0000024c + 2;
    if (iVar8 == 0x2a) {
      iVar8 = SPRINTF_OBJ_1BC(*in_stack_00000220,(int)*(char *)(in_stack_0000024c + 3));
      return iVar8;
    }
    while (iVar8 - 0x30U < 10) {
      iVar1 = iVar1 * 10 + -0x30 + iVar8;
      iVar8 = (int)*(char *)(iVar12 + 1);
      iVar12 = iVar12 + 1;
    }
    iVar5 = 0x23;
    uVar3 = DAT_80066468;
    iVar2 = DAT_80066470;
    in_stack_0000024c = iVar12;
    if (iVar8 == 0x2e) {
      iVar8 = (int)*(char *)(iVar12 + 1);
      iVar5 = iVar12;
      if (iVar8 == 0x2a) {
        iVar8 = SPRINTF_OBJ_258(iVar12,(int)*(char *)(iVar12 + 2));
        return iVar8;
      }
      while (in_stack_0000024c = iVar5 + 1, iVar8 - 0x30U < 10) {
        iVar2 = iVar2 * 10 + -0x30 + iVar8;
        iVar8 = (int)*(char *)(iVar5 + 2);
        iVar5 = in_stack_0000024c;
      }
      iVar5 = iVar12;
      if (-1 < iVar2) {
        uVar3 = DAT_80066468 | 0x10;
      }
    }
    piVar10 = (int *)&stack0x00000210;
    if ((uVar3 & 1) != 0) {
      uVar3 = uVar3 & 0xfffffff7;
    }
    switch(iVar8) {
    case 0x4c:
      iVar8 = SPRINTF_OBJ_29C(iVar5,(int)*(char *)(in_stack_0000024c + 1));
      return iVar8;
    default:
      if (iVar8 == 0x25) goto SPRINTF_OBJ_794;
      goto SPRINTF_OBJ_84C;
    case 99:
      iVar8 = SPRINTF_OBJ_7A0();
      return iVar8;
    case 100:
    case 0x69:
      piVar6 = *in_stack_00000220;
      if ((uVar3 >> 5 & 1) != 0) {
        piVar6 = (int *)(int)(short)piVar6;
      }
      if ((int)piVar6 < 0) {
        iVar8 = SPRINTF_OBJ_390(-(int)piVar6);
        return iVar8;
      }
      if ((uVar3 >> 1 & 1) != 0) {
        iVar8 = SPRINTF_OBJ_390();
        return iVar8;
      }
      goto code_r0x8005983c;
    case 0x68:
      iVar8 = SPRINTF_OBJ_2E4();
      return iVar8;
    case 0x6c:
      iVar8 = SPRINTF_OBJ_2E4();
      return iVar8;
    case 0x6e:
      if ((uVar3 >> 5 & 1) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar8 = SPRINTF_OBJ_82C();
        return iVar8;
      }
      **in_stack_00000220 = unaff_s2;
      iVar8 = SPRINTF_OBJ_82C();
      return iVar8;
    case 0x6f:
      piVar6 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((uVar3 >> 5 & 1) != 0) {
        piVar6 = (int *)((uint)piVar6 & 0xffff);
      }
      if ((uVar3 >> 4 & 1) == 0) {
        if ((uVar3 >> 3 & 1) != 0) {
          iVar2 = iVar1;
        }
        if (iVar2 < 1) {
          iVar2 = 1;
        }
      }
      uVar9 = 0;
      for (; piVar6 != (int *)0x0; piVar6 = (int *)((uint)piVar6 >> 3)) {
        piVar10 = (int *)((int)piVar10 + -1);
        *(byte *)piVar10 = ((byte)piVar6 & 7) + 0x30;
        uVar9 = uVar9 + 1;
      }
      if ((((uVar3 >> 2 & 1) != 0) && (uVar9 != 0)) && (*(byte *)piVar10 != 0x30)) {
        piVar10 = (int *)((int)piVar10 + -1);
        *(byte *)piVar10 = 0x30;
        uVar9 = uVar9 + 1;
      }
      if ((int)uVar9 < iVar2) {
        do {
          piVar10 = (int *)((int)piVar10 + -1);
          *(byte *)piVar10 = 0x30;
          uVar9 = uVar9 + 1;
        } while ((int)uVar9 < iVar2);
        iVar8 = SPRINTF_OBJ_7A0();
        return iVar8;
      }
      break;
    case 0x70:
    case 0x58:
      iVar8 = SPRINTF_OBJ_5A4();
      return iVar8;
    case 0x73:
      piVar10 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((uVar3 >> 2 & 1) == 0) {
        if ((uVar3 >> 4 & 1) == 0) {
          strlen((char *)piVar10);
          iVar8 = SPRINTF_OBJ_7A0();
          return iVar8;
        }
        pvVar4 = memchr((uchar *)piVar10,'\0',iVar2);
        uVar9 = (int)pvVar4 - (int)piVar10;
        if (pvVar4 == (void *)0x0) {
          iVar8 = SPRINTF_OBJ_7A0();
          return iVar8;
        }
      }
      else {
        uVar9 = (uint)*(byte *)piVar10;
        piVar10 = (int *)((int)piVar10 + 1);
        if (((uVar3 >> 4 & 1) != 0) && (iVar2 < (int)uVar9)) {
          iVar8 = SPRINTF_OBJ_7A0();
          return iVar8;
        }
      }
      break;
    case 0x75:
      piVar6 = *in_stack_00000220;
      if ((uVar3 >> 5 & 1) != 0) {
        piVar6 = (int *)((uint)piVar6 & 0xffff);
      }
      uVar3 = uVar3 & 0xff;
code_r0x8005983c:
      in_stack_00000220 = in_stack_00000220 + 1;
      bVar11 = (byte)(uVar3 >> 8);
      if ((uVar3 >> 4 & 1) == 0) {
        if (((uVar3 >> 3 & 1) != 0) && (iVar2 = iVar1, bVar11 != 0)) {
          iVar2 = iVar1 + -1;
        }
        if (iVar2 < 1) {
          iVar2 = 1;
        }
      }
      uVar9 = 0;
      while (piVar6 != (int *)0x0) {
        piVar10 = (int *)((int)piVar10 + -1);
        uVar9 = uVar9 + 1;
        *(byte *)piVar10 = (char)piVar6 + (char)(int *)((uint)piVar6 / 10) * -10 + 0x30;
        piVar6 = (int *)((uint)piVar6 / 10);
      }
      for (; (int)uVar9 < iVar2; uVar9 = uVar9 + 1) {
        piVar10 = (int *)((int)piVar10 + -1);
        *(byte *)piVar10 = 0x30;
      }
      if (bVar11 != 0) {
        *(byte *)((int)piVar10 + -1) = bVar11;
        iVar8 = SPRINTF_OBJ_7A0();
        return iVar8;
      }
      break;
    case 0x78:
      piVar6 = *in_stack_00000220;
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((uVar3 >> 5 & 1) != 0) {
        piVar6 = (int *)((uint)piVar6 & 0xffff);
      }
      if ((uVar3 >> 4 & 1) == 0) {
        if (((uVar3 >> 3 & 1) != 0) && (iVar2 = iVar1, (uVar3 >> 2 & 1) != 0)) {
          iVar2 = iVar1 + -2;
        }
        if (iVar2 < 1) {
          iVar2 = 1;
        }
      }
      uVar9 = 0;
      for (; piVar6 != (int *)0x0; piVar6 = (int *)((uint)piVar6 >> 4)) {
        piVar10 = (int *)((int)piVar10 + -1);
        uVar9 = uVar9 + 1;
        *(char *)piVar10 = "0123456789abcdef"[(uint)piVar6 & 0xf];
      }
      for (; (int)uVar9 < iVar2; uVar9 = uVar9 + 1) {
        piVar10 = (int *)((int)piVar10 + -1);
        *(byte *)piVar10 = 0x30;
      }
      if ((uVar3 >> 2 & 1) != 0) {
        *(byte *)((int)piVar10 + -1) = (byte)iVar8;
        *(byte *)((int)piVar10 + -2) = 0x30;
        iVar8 = SPRINTF_OBJ_7A0();
        return iVar8;
      }
    }
    puVar7 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar9 < iVar1) && ((uVar3 & 1) == 0)) {
      do {
        *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
        iVar1 = iVar1 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar9 < iVar1);
      puVar7 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar7,(uchar *)piVar10,uVar9);
    unaff_s2 = unaff_s2 + uVar9;
    for (; (int)uVar9 < iVar1; uVar9 = uVar9 + 1) {
      *(char *)(unaff_s3 + unaff_s2) = (char)unaff_s4;
      unaff_s2 = unaff_s2 + 1;
    }
  }
SPRINTF_OBJ_84C:
  *(undefined *)(unaff_s3 + unaff_s2) = 0;
  return unaff_s2;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int rand(void)

{
  rng_seed = rng_seed * 0x41c64e6d + 0x3039;
  return rng_seed >> 0x10 & 0x7fff;
}



// Possible GS_101.OBJ/GsSetNearClip
// Possible GS_102.OBJ/GsSetFarClip
// Possible GS_124.OBJ/GsSetWorkBase

void srand(uint param_1)

{
  rng_seed = param_1;
  return;
}



MATRIX * MulMatrix0(MATRIX *m0,MATRIX *m1,MATRIX *m2)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  
  gte_ldR11R12(*(undefined4 *)m0->m);
  gte_ldR13R21(*(undefined4 *)(m0->m + 2));
  gte_ldR22R23(*(undefined4 *)(m0->m[1] + 1));
  gte_ldR31R32(*(undefined4 *)m0->m[2]);
  gte_ldR33(*(undefined4 *)(m0->m[2] + 2));
  gte_ldVXY0((uint)(ushort)m1->m[0] | *(uint *)(m1->m + 2) & 0xffff0000);
  gte_ldVZ0(*(undefined4 *)m1->m[2]);
  gte_rtv0_b();
  uVar1 = gte_stIR1();
  iVar2 = gte_stIR2();
  uVar3 = gte_stIR3();
  gte_ldVXY0((uint)(ushort)m1->m[1] | *(int *)(m1->m[1] + 1) << 0x10);
  gte_ldVZ0((int)m1->m[2][1]);
  gte_rtv0_b();
  iVar4 = gte_stIR1();
  uVar5 = gte_stIR2();
  iVar6 = gte_stIR3();
  gte_ldVXY0((uint)(ushort)m1->m[2] | *(uint *)(m1->m[1] + 1) & 0xffff0000);
  gte_ldVZ0(*(undefined4 *)(m1->m[2] + 2));
  gte_rtv0_b();
  *(uint *)m2->m = iVar4 << 0x10 | uVar1 & 0xffff;
  *(uint *)m2->m[2] = iVar6 << 0x10 | uVar3 & 0xffff;
  uVar1 = gte_stIR1();
  iVar4 = gte_stIR2();
  *(uint *)(m2->m + 2) = uVar1 & 0xffff | iVar2 << 0x10;
  *(uint *)(m2->m[1] + 1) = iVar4 << 0x10 | uVar5 & 0xffff;
  gte_stIR3();
  return m2;
}



MATRIX * ScaleMatrix(MATRIX *m,VECTOR *v)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar2 = v->vx;
  iVar3 = v->vy;
  iVar4 = v->vz;
  iVar1 = *(int *)m->m;
  *(uint *)m->m = (short)iVar1 * iVar2 >> 0xc & 0xffffU | ((iVar1 >> 0x10) * iVar3 >> 0xc) << 0x10;
  iVar1 = *(int *)(m->m + 2);
  *(uint *)(m->m + 2) =
       (short)iVar1 * iVar4 >> 0xc & 0xffffU | ((iVar1 >> 0x10) * iVar2 >> 0xc) << 0x10;
  iVar1 = *(int *)(m->m[1] + 1);
  *(uint *)(m->m[1] + 1) =
       (short)iVar1 * iVar3 >> 0xc & 0xffffU | ((iVar1 >> 0x10) * iVar4 >> 0xc) << 0x10;
  iVar1 = *(int *)m->m[2];
  *(uint *)m->m[2] =
       (short)iVar1 * iVar2 >> 0xc & 0xffffU | ((iVar1 >> 0x10) * iVar3 >> 0xc) << 0x10;
  *(int *)(m->m[2] + 2) = (short)*(undefined4 *)(m->m[2] + 2) * iVar4 >> 0xc;
  return m;
}



ulong SpuSetTransferStartAddr(ulong addr)

{
  ulong uVar1;
  
  if (addr - 0x1010 < 0x7efe9) {
    DAT_80066a30 = FUN_8005ec10(0xffffffff);
    uVar1 = S_STSA_OBJ_4C();
    return uVar1;
  }
  return 0;
}



void S_STSA_OBJ_4C(void)

{
  return;
}



void SetDrawMode(DR_MODE *p,int dfe,int dtd,int tpage,RECT *tw)

{
  uint uVar1;
  uint uVar2;
  
  uVar2 = 0xe1000000;
  *(undefined *)((int)&p->tag + 3) = 2;
  if (dtd != 0) {
    uVar2 = 0xe1000200;
  }
  uVar1 = tpage & 0x9ff;
  if (dfe != 0) {
    uVar1 = uVar1 | 0x400;
  }
  p->code[0] = uVar2 | uVar1;
  if (tw != (RECT *)0x0) {
    p->code[1] = (uint)(*(byte *)&tw->y >> 3) << 0xf |
                 (uint)(*(byte *)&tw->x >> 3) << 10 | 0xe2000000 | (-(int)tw->h & 0xf8U) << 2 |
                 (int)(-(int)tw->w & 0xffU) >> 3;
    P41_OBJ_8C();
    return;
  }
  p->code[1] = 0;
  return;
}



void P41_OBJ_8C(void)

{
  return;
}



// Possible STRLEN.OBJ/strlen

int strlen(char *param_1)

{
  char cVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = 0;
  iVar2 = 0;
  if (param_1 != (char *)0x0) {
    while (iVar3 = iVar2, cVar1 = *param_1, param_1 = param_1 + 1, cVar1 != '\0') {
      iVar2 = iVar3 + 1;
    }
  }
  return iVar3;
}



// Possible S_W.OBJ/SpuWrite

ulong SpuRead(uchar *addr,ulong size)

{
  if (0x7eff0 < size) {
    size = 0x7eff0;
  }
  FUN_8005eb68(addr,size);
  if (DAT_80066a50 == 0) {
    DAT_80066a4c = 0;
  }
  return size;
}



long SpuIsTransferCompleted(long flag)

{
  bool bVar1;
  long lVar2;
  
  if ((DAT_80066a88 != 1) && (DAT_80066a4c != 1)) {
    lVar2 = TestEvent(DAT_80066a80);
    if (flag == 1) {
      bVar1 = lVar2 == 0;
      lVar2 = 1;
      if (bVar1) {
        do {
          lVar2 = TestEvent(DAT_80066a80);
        } while (lVar2 == 0);
        lVar2 = S_ITC_OBJ_88();
        return lVar2;
      }
    }
    else if (lVar2 != 1) {
      return lVar2;
    }
    DAT_80066a4c = lVar2;
    return lVar2;
  }
  lVar2 = S_ITC_OBJ_90();
  return lVar2;
}



void S_ITC_OBJ_88(void)

{
  undefined4 in_v0;
  
  DAT_80066a4c = in_v0;
  return;
}



void S_ITC_OBJ_90(void)

{
  return;
}



long SpuSetTransferMode(long mode)

{
  long lVar1;
  
  if ((mode != 0) && (mode == 1)) {
    lVar1 = S_STM_OBJ_1C();
    return lVar1;
  }
  DAT_80066a88 = mode;
  DAT_80066a34 = 0;
  return 0;
}



void S_STM_OBJ_1C(undefined4 param_1)

{
  undefined4 in_v0;
  
  DAT_80066a88 = param_1;
  DAT_80066a34 = in_v0;
  return;
}



void SpuSetKey(long on_off,ulong voice_bit)

{
  undefined *puVar1;
  ushort uVar2;
  uint uVar3;
  ushort uVar4;
  
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
  uVar3 = voice_bit & 0xffffff;
  uVar2 = (ushort)uVar3;
  uVar4 = (ushort)(uVar3 >> 0x10);
  if (on_off == 0) {
    if ((DAT_80066ae4 & 1) == 0) {
      *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x18c) = uVar2;
      *(ushort *)(puVar1 + 0x18e) = uVar4;
      DAT_80066a84 = DAT_80066a84 & ~uVar3;
    }
    else {
      DAT_80066ab0 = DAT_80066ab0 | 1;
      DAT_80066aac = DAT_80066aac & ~uVar3;
      if ((DAT_8006d1c8 & uVar3) != 0) {
        DAT_8006d1c8 = DAT_8006d1c8 & (ushort)~uVar3;
      }
      DAT_8006d1cc = uVar2;
      DAT_8006d1ce = uVar4;
      if (((uint)DAT_8006d1ca & uVar3 >> 0x10) != 0) {
        DAT_8006d1ca = DAT_8006d1ca & ~uVar4;
        S_SK_OBJ_1B4();
        return;
      }
    }
  }
  else if (on_off == 1) {
    if ((DAT_80066ae4 & 1) == 0) {
      *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x188) = uVar2;
      *(ushort *)(puVar1 + 0x18a) = uVar4;
      S_SK_OBJ_1AC();
      return;
    }
    DAT_80066ab0 = DAT_80066ab0 | 1;
    DAT_80066aac = DAT_80066aac | uVar3;
    if ((DAT_8006d1cc & uVar3) != 0) {
      DAT_8006d1cc = DAT_8006d1cc & ~uVar2;
    }
    DAT_8006d1c8 = uVar2;
    DAT_8006d1ca = uVar4;
    if (((uint)DAT_8006d1ce & uVar3 >> 0x10) != 0) {
      DAT_8006d1ce = DAT_8006d1ce & ~uVar4;
      S_SK_OBJ_1B4();
      return;
    }
  }
  return;
}



void S_SK_OBJ_1AC(void)

{
  undefined4 in_v0;
  
  DAT_80066a84 = in_v0;
  return;
}



void S_SK_OBJ_1B4(void)

{
  return;
}



void FUN_8005a3fc(undefined *param_1)

{
  uint uVar1;
  
  uVar1 = 0;
  do {
    if ((DAT_80066a84 & 1 << (uVar1 & 0x1f)) == 0) {
      if (*(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar1 * 0x10 + 0xc) == 0) {
        *param_1 = 0;
      }
      else {
        *param_1 = 2;
      }
    }
    else if (*(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar1 * 0x10 + 0xc) == 0) {
      *param_1 = 3;
    }
    else {
      *param_1 = 1;
    }
    uVar1 = uVar1 + 1;
    param_1 = param_1 + 1;
  } while ((int)uVar1 < 0x18);
  return;
}



// Possible UT_ROFF.OBJ/SsUtReverbOff
// Possible S_I.OBJ/SpuInit

void FUN_8005a488(void)

{
  _SpuInit();
  return;
}



void SpuSetVoiceAttr(SpuVoiceAttr *arg)

{
  short sVar1;
  bool bVar2;
  undefined2 uVar3;
  int iVar4;
  ushort uVar5;
  ushort uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  ushort *puVar11;
  
  uVar10 = 0;
  uVar9 = arg->mask;
  puVar11 = &DAT_80066ab4;
  bVar2 = uVar9 == 0;
  do {
    if ((arg->voice & 1 << (uVar10 & 0x1f)) != 0) {
      if ((bVar2) || ((uVar9 & 0x10) != 0)) {
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 4) = arg->pitch;
      }
      if ((bVar2) || ((uVar9 & 0x40) != 0)) {
        *puVar11 = arg->sample_note;
      }
      if ((bVar2) || ((uVar9 & 0x20) != 0)) {
        uVar3 = FUN_8005f0f4(*puVar11 >> 8,*puVar11 & 0xff,arg->note >> 8,arg->note & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 4) = uVar3;
      }
      if ((bVar2) || ((uVar9 & 1) != 0)) {
        uVar6 = 0;
        uVar5 = (arg->volume).left & 0x7fff;
        if ((bVar2) || ((uVar9 & 4) != 0)) {
          switch((int)(((ushort)(arg->volmode).left - 1) * 0x10000) >> 0x10) {
          case 0:
            uVar6 = 0x8000;
            break;
          case 1:
            uVar6 = 0x9000;
            break;
          case 2:
            uVar6 = 0xa000;
            break;
          case 3:
            uVar6 = 0xb000;
            break;
          case 4:
            uVar6 = 0xc000;
            break;
          case 5:
            uVar6 = 0xd000;
            break;
          case 6:
            uVar6 = 0xe000;
          }
        }
        if (uVar6 != 0) {
          sVar1 = (arg->volume).left;
          if (0x7f < sVar1) {
            S_SVA_OBJ_1A0(uVar6,0x7f);
            return;
          }
          if (sVar1 < 0) {
            uVar5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10) = uVar5 | uVar6;
      }
      if ((bVar2) || ((uVar9 & 2) != 0)) {
        uVar6 = 0;
        uVar5 = (arg->volume).right & 0x7fff;
        if ((bVar2) || ((uVar9 & 8) != 0)) {
          switch((int)(((ushort)(arg->volmode).right - 1) * 0x10000) >> 0x10) {
          case 0:
            uVar6 = 0x8000;
            break;
          case 1:
            uVar6 = 0x9000;
            break;
          case 2:
            uVar6 = 0xa000;
            break;
          case 3:
            uVar6 = 0xb000;
            break;
          case 4:
            uVar6 = 0xc000;
            break;
          case 5:
            uVar6 = 0xd000;
            break;
          case 6:
            uVar6 = 0xe000;
          }
        }
        if (uVar6 != 0) {
          sVar1 = (arg->volume).right;
          if (0x7f < sVar1) {
            S_SVA_OBJ_280(uVar6,0x7f);
            return;
          }
          if (sVar1 < 0) {
            uVar5 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 2) = uVar5 | uVar6;
      }
      if ((bVar2) || ((uVar9 & 0x80) != 0)) {
        FUN_8005ec10(uVar10 << 3 | 3,arg->addr);
      }
      if ((bVar2) || ((uVar9 & 0x10000) != 0)) {
        FUN_8005ec10(uVar10 << 3 | 7,arg->loop_addr);
      }
      if ((bVar2) || ((uVar9 & 0x20000) != 0)) {
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 8) = arg->adsr1;
      }
      if ((bVar2) || ((uVar9 & 0x40000) != 0)) {
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 10) = arg->adsr2;
      }
      if ((bVar2) || ((uVar9 & 0x800) != 0)) {
        uVar7 = (uint)arg->ar;
        if (0x7f < uVar7) {
          uVar7 = 0x7f;
        }
        uVar8 = 0;
        if (((bVar2) || ((uVar9 & 0x100) != 0)) && (arg->a_mode == 5)) {
          uVar8 = 0x80;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 8) & 0xff |
             (ushort)((uVar7 | uVar8) << 8);
      }
      if ((bVar2) || ((uVar9 & 0x1000) != 0)) {
        uVar7 = (uint)arg->dr;
        if (0xf < uVar7) {
          uVar7 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 8) & 0xff0f |
             (ushort)(uVar7 << 4);
      }
      if ((bVar2) || ((uVar9 & 0x2000) != 0)) {
        uVar7 = (uint)arg->sr;
        if (0x7f < uVar7) {
          uVar7 = 0x7f;
        }
        uVar8 = 0x100;
        if ((bVar2) || ((uVar9 & 0x200) != 0)) {
          iVar4 = arg->s_mode;
          if (iVar4 == 5) {
            S_SVA_OBJ_480();
            return;
          }
          if (iVar4 < 6) {
            if (iVar4 == 1) {
              S_SVA_OBJ_480();
              return;
            }
            S_SVA_OBJ_480();
            return;
          }
          if (iVar4 != 7) {
            S_SVA_OBJ_480();
            return;
          }
          uVar8 = 0x300;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 10) & 0x3f |
             (ushort)((uVar7 | uVar8) << 6);
      }
      if ((bVar2) || ((uVar9 & 0x4000) != 0)) {
        uVar6 = arg->rr;
        if (0x1f < uVar6) {
          uVar6 = 0x1f;
        }
        uVar5 = 0;
        if ((((bVar2) || ((uVar9 & 0x400) != 0)) && (arg->r_mode != 3)) && (arg->r_mode == 7)) {
          uVar5 = 0x20;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 10) & 0xffc0 |
             uVar6 | uVar5;
      }
      if ((bVar2) || ((uVar9 & 0x8000) != 0)) {
        uVar6 = arg->sl;
        if (0xf < uVar6) {
          uVar6 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + uVar10 * 0x10 + 8) & 0xfff0 | uVar6;
      }
    }
    uVar10 = uVar10 + 1;
    puVar11 = puVar11 + 1;
    if (0x17 < (int)uVar10) {
      S_SVA_OBJ_5C0();
      return;
    }
  } while( true );
}



void S_SVA_OBJ_13C(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a5e4:
  uVar3 = 0x8000;
  goto S_SVA_OBJ_170;
  do {
    switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
    case 0:
      goto code_r0x8005a5e4;
    case 1:
      uVar3 = 0x9000;
    default:
S_SVA_OBJ_170:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)(unaff_s0 + 2)) {
            S_SVA_OBJ_1A0(uVar3,0x7f);
            return;
          }
          if (*(short *)(unaff_s0 + 2) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
              switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)((int)unaff_s0 + 10)) {
                S_SVA_OBJ_280(uVar3,0x7f);
                return;
              }
              if (*(short *)((int)unaff_s0 + 10) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = uVar2 | uVar3;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 1) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 4) == 0));
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_144(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a5ec:
  uVar3 = 0x9000;
  goto S_SVA_OBJ_170;
  do {
    switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_170:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)(unaff_s0 + 2)) {
            S_SVA_OBJ_1A0(uVar3,0x7f);
            return;
          }
          if (*(short *)(unaff_s0 + 2) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
              switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)((int)unaff_s0 + 10)) {
                S_SVA_OBJ_280(uVar3,0x7f);
                return;
              }
              if (*(short *)((int)unaff_s0 + 10) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = uVar2 | uVar3;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 1) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 4) == 0));
      break;
    case 1:
      goto code_r0x8005a5ec;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_14C(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a5f4:
  uVar3 = 0xa000;
  goto S_SVA_OBJ_170;
  do {
    switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_170:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)(unaff_s0 + 2)) {
            S_SVA_OBJ_1A0(uVar3,0x7f);
            return;
          }
          if (*(short *)(unaff_s0 + 2) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
              switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)((int)unaff_s0 + 10)) {
                S_SVA_OBJ_280(uVar3,0x7f);
                return;
              }
              if (*(short *)((int)unaff_s0 + 10) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = uVar2 | uVar3;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 1) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 4) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      goto code_r0x8005a5f4;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_154(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a5fc:
  uVar3 = 0xb000;
  goto S_SVA_OBJ_170;
  do {
    switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_170:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)(unaff_s0 + 2)) {
            S_SVA_OBJ_1A0(uVar3,0x7f);
            return;
          }
          if (*(short *)(unaff_s0 + 2) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
              switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)((int)unaff_s0 + 10)) {
                S_SVA_OBJ_280(uVar3,0x7f);
                return;
              }
              if (*(short *)((int)unaff_s0 + 10) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = uVar2 | uVar3;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 1) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 4) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      goto code_r0x8005a5fc;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_15C(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a604:
  uVar3 = 0xc000;
  goto S_SVA_OBJ_170;
  do {
    switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_170:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)(unaff_s0 + 2)) {
            S_SVA_OBJ_1A0(uVar3,0x7f);
            return;
          }
          if (*(short *)(unaff_s0 + 2) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
              switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)((int)unaff_s0 + 10)) {
                S_SVA_OBJ_280(uVar3,0x7f);
                return;
              }
              if (*(short *)((int)unaff_s0 + 10) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = uVar2 | uVar3;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 1) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 4) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      goto code_r0x8005a604;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_164(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a60c:
  uVar3 = 0xd000;
  goto S_SVA_OBJ_170;
  do {
    switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_170:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)(unaff_s0 + 2)) {
            S_SVA_OBJ_1A0(uVar3,0x7f);
            return;
          }
          if (*(short *)(unaff_s0 + 2) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
              switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)((int)unaff_s0 + 10)) {
                S_SVA_OBJ_280(uVar3,0x7f);
                return;
              }
              if (*(short *)((int)unaff_s0 + 10) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = uVar2 | uVar3;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 1) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 4) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      goto code_r0x8005a60c;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_16C(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a614:
  uVar3 = 0xe000;
  goto S_SVA_OBJ_170;
  do {
    switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_170:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)(unaff_s0 + 2)) {
            S_SVA_OBJ_1A0(uVar3,0x7f);
            return;
          }
          if (*(short *)(unaff_s0 + 2) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
              switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)((int)unaff_s0 + 10)) {
                S_SVA_OBJ_280(uVar3,0x7f);
                return;
              }
              if (*(short *)((int)unaff_s0 + 10) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = uVar2 | uVar3;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 1) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 4) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      goto code_r0x8005a614;
    }
  } while( true );
}



void S_SVA_OBJ_170(int param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
  do {
    if (param_1 != 0) {
      if (0x7f < *(short *)(unaff_s0 + 2)) {
        S_SVA_OBJ_1A0(param_1,0x7f);
        return;
      }
      if (*(short *)(unaff_s0 + 2) < 0) {
        param_2 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2) = param_2 | (ushort)param_1;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
        uVar3 = 0;
        uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
        if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
          switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
          case 0:
            uVar3 = 0x8000;
            break;
          case 1:
            uVar3 = 0x9000;
            break;
          case 2:
            uVar3 = 0xa000;
            break;
          case 3:
            uVar3 = 0xb000;
            break;
          case 4:
            uVar3 = 0xc000;
            break;
          case 5:
            uVar3 = 0xd000;
            break;
          case 6:
            uVar3 = 0xe000;
          }
        }
        if (uVar3 != 0) {
          if (0x7f < *(short *)((int)unaff_s0 + 10)) {
            S_SVA_OBJ_280(uVar3,0x7f);
            return;
          }
          if (*(short *)((int)unaff_s0 + 10) < 0) {
            uVar2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = uVar2 | uVar3;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(undefined2 *)(unaff_s0 + 0xf);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        uVar5 = 0;
        if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
          uVar5 = 0x80;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
             (ushort)((uVar4 | uVar5) << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
             (ushort)(uVar4 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        uVar5 = 0x100;
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
          uVar5 = unaff_s0[10];
          if (uVar5 == 5) {
            S_SVA_OBJ_480();
            return;
          }
          if ((int)uVar5 < 6) {
            if (uVar5 == 1) {
              S_SVA_OBJ_480();
              return;
            }
            S_SVA_OBJ_480();
            return;
          }
          if (uVar5 != 7) {
            S_SVA_OBJ_480();
            return;
          }
          uVar5 = 0x300;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
             (ushort)((uVar4 | uVar5) << 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
        uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar3) {
          uVar3 = 0x1f;
        }
        uVar2 = 0;
        if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
           (unaff_s0[0xb] == 7)) {
          uVar2 = 0x20;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
             uVar3 | uVar2;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar3 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        unaff_s5 = unaff_s5 + 1;
        if (0x17 < (int)unaff_s4) {
          S_SVA_OBJ_5C0();
          return;
        }
      } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
             *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        *unaff_s5 = *(ushort *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,*(ushort *)((int)unaff_s0 + 0x16) >> 8,
                             *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
      }
    } while ((unaff_s2 == 0) && ((unaff_s1 & 1) == 0));
    param_1 = 0;
    param_2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
    if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
      switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
      case 0:
        param_1 = 0x8000;
        break;
      case 1:
        param_1 = 0x9000;
        break;
      case 2:
        param_1 = 0xa000;
        break;
      case 3:
        param_1 = 0xb000;
        break;
      case 4:
        param_1 = 0xc000;
        break;
      case 5:
        param_1 = 0xd000;
        break;
      case 6:
        param_1 = 0xe000;
      }
    }
  } while( true );
}



void S_SVA_OBJ_1A0(ushort param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
  do {
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2) = param_2 | param_1;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
        uVar3 = 0;
        uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
        if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
          switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
          case 0:
            uVar3 = 0x8000;
            break;
          case 1:
            uVar3 = 0x9000;
            break;
          case 2:
            uVar3 = 0xa000;
            break;
          case 3:
            uVar3 = 0xb000;
            break;
          case 4:
            uVar3 = 0xc000;
            break;
          case 5:
            uVar3 = 0xd000;
            break;
          case 6:
            uVar3 = 0xe000;
          }
        }
        if (uVar3 != 0) {
          if (0x7f < *(short *)((int)unaff_s0 + 10)) {
            S_SVA_OBJ_280(uVar3,0x7f);
            return;
          }
          if (*(short *)((int)unaff_s0 + 10) < 0) {
            uVar2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = uVar2 | uVar3;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(undefined2 *)(unaff_s0 + 0xf);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        uVar5 = 0;
        if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
          uVar5 = 0x80;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
             (ushort)((uVar4 | uVar5) << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
             (ushort)(uVar4 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        uVar5 = 0x100;
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
          uVar5 = unaff_s0[10];
          if (uVar5 == 5) {
            S_SVA_OBJ_480();
            return;
          }
          if ((int)uVar5 < 6) {
            if (uVar5 == 1) {
              S_SVA_OBJ_480();
              return;
            }
            S_SVA_OBJ_480();
            return;
          }
          if (uVar5 != 7) {
            S_SVA_OBJ_480();
            return;
          }
          uVar5 = 0x300;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
             (ushort)((uVar4 | uVar5) << 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
        uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar3) {
          uVar3 = 0x1f;
        }
        uVar2 = 0;
        if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
           (unaff_s0[0xb] == 7)) {
          uVar2 = 0x20;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
             uVar3 | uVar2;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar3 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        unaff_s5 = unaff_s5 + 1;
        if (0x17 < (int)unaff_s4) {
          S_SVA_OBJ_5C0();
          return;
        }
      } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
             *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        *unaff_s5 = *(ushort *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,*(ushort *)((int)unaff_s0 + 0x16) >> 8,
                             *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
      }
    } while ((unaff_s2 == 0) && ((unaff_s1 & 1) == 0));
    param_1 = 0;
    param_2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
    if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
      switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
      case 0:
        param_1 = 0x8000;
        break;
      case 1:
        param_1 = 0x9000;
        break;
      case 2:
        param_1 = 0xa000;
        break;
      case 3:
        param_1 = 0xb000;
        break;
      case 4:
        param_1 = 0xc000;
        break;
      case 5:
        param_1 = 0xd000;
        break;
      case 6:
        param_1 = 0xe000;
      }
    }
    if (param_1 != 0) {
      if (0x7f < *(short *)(unaff_s0 + 2)) {
        S_SVA_OBJ_1A0(param_1,0x7f);
        return;
      }
      if (*(short *)(unaff_s0 + 2) < 0) {
        param_2 = 0;
      }
    }
  } while( true );
}



void S_SVA_OBJ_21C(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a6c4:
  uVar3 = 0x8000;
  goto S_SVA_OBJ_250;
  do {
    switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
    case 0:
      goto code_r0x8005a6c4;
    case 1:
      uVar3 = 0x9000;
    default:
S_SVA_OBJ_250:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)((int)unaff_s0 + 10)) {
            S_SVA_OBJ_280(uVar3,0x7f);
            return;
          }
          if (*(short *)((int)unaff_s0 + 10) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
              switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)(unaff_s0 + 2)) {
                S_SVA_OBJ_1A0(uVar3,0x7f);
                return;
              }
              if (*(short *)(unaff_s0 + 2) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 2) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 8) == 0));
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_224(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a6cc:
  uVar3 = 0x9000;
  goto S_SVA_OBJ_250;
  do {
    switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_250:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)((int)unaff_s0 + 10)) {
            S_SVA_OBJ_280(uVar3,0x7f);
            return;
          }
          if (*(short *)((int)unaff_s0 + 10) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
              switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)(unaff_s0 + 2)) {
                S_SVA_OBJ_1A0(uVar3,0x7f);
                return;
              }
              if (*(short *)(unaff_s0 + 2) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 2) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 8) == 0));
      break;
    case 1:
      goto code_r0x8005a6cc;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_22C(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a6d4:
  uVar3 = 0xa000;
  goto S_SVA_OBJ_250;
  do {
    switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_250:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)((int)unaff_s0 + 10)) {
            S_SVA_OBJ_280(uVar3,0x7f);
            return;
          }
          if (*(short *)((int)unaff_s0 + 10) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
              switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)(unaff_s0 + 2)) {
                S_SVA_OBJ_1A0(uVar3,0x7f);
                return;
              }
              if (*(short *)(unaff_s0 + 2) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 2) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 8) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      goto code_r0x8005a6d4;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_234(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a6dc:
  uVar3 = 0xb000;
  goto S_SVA_OBJ_250;
  do {
    switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_250:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)((int)unaff_s0 + 10)) {
            S_SVA_OBJ_280(uVar3,0x7f);
            return;
          }
          if (*(short *)((int)unaff_s0 + 10) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
              switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)(unaff_s0 + 2)) {
                S_SVA_OBJ_1A0(uVar3,0x7f);
                return;
              }
              if (*(short *)(unaff_s0 + 2) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 2) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 8) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      goto code_r0x8005a6dc;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_23C(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a6e4:
  uVar3 = 0xc000;
  goto S_SVA_OBJ_250;
  do {
    switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_250:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)((int)unaff_s0 + 10)) {
            S_SVA_OBJ_280(uVar3,0x7f);
            return;
          }
          if (*(short *)((int)unaff_s0 + 10) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
              switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)(unaff_s0 + 2)) {
                S_SVA_OBJ_1A0(uVar3,0x7f);
                return;
              }
              if (*(short *)(unaff_s0 + 2) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 2) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 8) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      goto code_r0x8005a6e4;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_244(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a6ec:
  uVar3 = 0xd000;
  goto S_SVA_OBJ_250;
  do {
    switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_250:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)((int)unaff_s0 + 10)) {
            S_SVA_OBJ_280(uVar3,0x7f);
            return;
          }
          if (*(short *)((int)unaff_s0 + 10) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
              switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)(unaff_s0 + 2)) {
                S_SVA_OBJ_1A0(uVar3,0x7f);
                return;
              }
              if (*(short *)(unaff_s0 + 2) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 2) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 8) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      goto code_r0x8005a6ec;
    case 6:
      uVar3 = 0xe000;
      break;
    }
  } while( true );
}



void S_SVA_OBJ_24C(undefined4 param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
code_r0x8005a6f4:
  uVar3 = 0xe000;
  goto S_SVA_OBJ_250;
  do {
    switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
    case 0:
      uVar3 = 0x8000;
    default:
S_SVA_OBJ_250:
      do {
        if (uVar3 != 0) {
          if (0x7f < *(short *)((int)unaff_s0 + 10)) {
            S_SVA_OBJ_280(uVar3,0x7f);
            return;
          }
          if (*(short *)((int)unaff_s0 + 10) < 0) {
            param_2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = param_2 | uVar3;
        do {
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
            FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
            FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(undefined2 *)((int)unaff_s0 + 0x3a);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(undefined2 *)(unaff_s0 + 0xf);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0;
            if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
              uVar5 = 0x80;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
                 (ushort)((uVar4 | uVar5) << 8);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
            uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
            if (0xf < uVar4) {
              uVar4 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
                 (ushort)(uVar4 << 4);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
            uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
            if (0x7f < uVar4) {
              uVar4 = 0x7f;
            }
            uVar5 = 0x100;
            if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
              uVar5 = unaff_s0[10];
              if (uVar5 == 5) {
                S_SVA_OBJ_480();
                return;
              }
              if ((int)uVar5 < 6) {
                if (uVar5 == 1) {
                  S_SVA_OBJ_480();
                  return;
                }
                S_SVA_OBJ_480();
                return;
              }
              if (uVar5 != 7) {
                S_SVA_OBJ_480();
                return;
              }
              uVar5 = 0x300;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
                 (ushort)((uVar4 | uVar5) << 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
            uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
            if (0x1f < uVar3) {
              uVar3 = 0x1f;
            }
            uVar2 = 0;
            if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
               (unaff_s0[0xb] == 7)) {
              uVar2 = 0x20;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
                 uVar3 | uVar2;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
            uVar3 = *(ushort *)(unaff_s0 + 0xe);
            if (0xf < uVar3) {
              uVar3 = 0xf;
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
                 *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
          }
          do {
            unaff_s4 = unaff_s4 + 1;
            unaff_s5 = unaff_s5 + 1;
            if (0x17 < (int)unaff_s4) {
              S_SVA_OBJ_5C0();
              return;
            }
          } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
          unaff_s3 = unaff_s4 * 8;
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
                 *(undefined2 *)(unaff_s0 + 5);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
            *unaff_s5 = *(ushort *)(unaff_s0 + 6);
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
            uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                                 *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                 *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
            *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
          }
          if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
            uVar3 = 0;
            uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
            if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
              switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
              case 0:
                uVar3 = 0x8000;
                break;
              case 1:
                uVar3 = 0x9000;
                break;
              case 2:
                uVar3 = 0xa000;
                break;
              case 3:
                uVar3 = 0xb000;
                break;
              case 4:
                uVar3 = 0xc000;
                break;
              case 5:
                uVar3 = 0xd000;
                break;
              case 6:
                uVar3 = 0xe000;
              }
            }
            if (uVar3 != 0) {
              if (0x7f < *(short *)(unaff_s0 + 2)) {
                S_SVA_OBJ_1A0(uVar3,0x7f);
                return;
              }
              if (*(short *)(unaff_s0 + 2) < 0) {
                uVar2 = 0;
              }
            }
            *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
          }
        } while ((unaff_s2 == 0) && ((unaff_s1 & 2) == 0));
        uVar3 = 0;
        param_2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
      } while ((unaff_s2 == 0) && ((unaff_s1 & 8) == 0));
      break;
    case 1:
      uVar3 = 0x9000;
      break;
    case 2:
      uVar3 = 0xa000;
      break;
    case 3:
      uVar3 = 0xb000;
      break;
    case 4:
      uVar3 = 0xc000;
      break;
    case 5:
      uVar3 = 0xd000;
      break;
    case 6:
      goto code_r0x8005a6f4;
    }
  } while( true );
}



void S_SVA_OBJ_250(int param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
  do {
    if (param_1 != 0) {
      if (0x7f < *(short *)((int)unaff_s0 + 10)) {
        S_SVA_OBJ_280(param_1,0x7f);
        return;
      }
      if (*(short *)((int)unaff_s0 + 10) < 0) {
        param_2 = 0;
      }
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = param_2 | (ushort)param_1;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(undefined2 *)(unaff_s0 + 0xf);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        uVar5 = 0;
        if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
          uVar5 = 0x80;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
             (ushort)((uVar4 | uVar5) << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
             (ushort)(uVar4 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        uVar5 = 0x100;
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
          uVar5 = unaff_s0[10];
          if (uVar5 == 5) {
            S_SVA_OBJ_480();
            return;
          }
          if ((int)uVar5 < 6) {
            if (uVar5 == 1) {
              S_SVA_OBJ_480();
              return;
            }
            S_SVA_OBJ_480();
            return;
          }
          if (uVar5 != 7) {
            S_SVA_OBJ_480();
            return;
          }
          uVar5 = 0x300;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
             (ushort)((uVar4 | uVar5) << 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
        uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar3) {
          uVar3 = 0x1f;
        }
        uVar2 = 0;
        if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
           (unaff_s0[0xb] == 7)) {
          uVar2 = 0x20;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
             uVar3 | uVar2;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar3 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        unaff_s5 = unaff_s5 + 1;
        if (0x17 < (int)unaff_s4) {
          S_SVA_OBJ_5C0();
          return;
        }
      } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
             *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        *unaff_s5 = *(ushort *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,*(ushort *)((int)unaff_s0 + 0x16) >> 8,
                             *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
        uVar3 = 0;
        uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
        if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
          switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
          case 0:
            uVar3 = 0x8000;
            break;
          case 1:
            uVar3 = 0x9000;
            break;
          case 2:
            uVar3 = 0xa000;
            break;
          case 3:
            uVar3 = 0xb000;
            break;
          case 4:
            uVar3 = 0xc000;
            break;
          case 5:
            uVar3 = 0xd000;
            break;
          case 6:
            uVar3 = 0xe000;
          }
        }
        if (uVar3 != 0) {
          if (0x7f < *(short *)(unaff_s0 + 2)) {
            S_SVA_OBJ_1A0(uVar3,0x7f);
            return;
          }
          if (*(short *)(unaff_s0 + 2) < 0) {
            uVar2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
      }
    } while ((unaff_s2 == 0) && ((unaff_s1 & 2) == 0));
    param_1 = 0;
    param_2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
    if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
      switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
      case 0:
        param_1 = 0x8000;
        break;
      case 1:
        param_1 = 0x9000;
        break;
      case 2:
        param_1 = 0xa000;
        break;
      case 3:
        param_1 = 0xb000;
        break;
      case 4:
        param_1 = 0xc000;
        break;
      case 5:
        param_1 = 0xd000;
        break;
      case 6:
        param_1 = 0xe000;
      }
    }
  } while( true );
}



void S_SVA_OBJ_280(ushort param_1,ushort param_2)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
  do {
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 2) = param_2 | param_1;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(undefined2 *)(unaff_s0 + 0xf);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        uVar5 = 0;
        if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
          uVar5 = 0x80;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff |
             (ushort)((uVar4 | uVar5) << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xff0f |
             (ushort)(uVar4 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x2000) != 0)) {
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        uVar5 = 0x100;
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x200) != 0)) {
          uVar5 = unaff_s0[10];
          if (uVar5 == 5) {
            S_SVA_OBJ_480();
            return;
          }
          if ((int)uVar5 < 6) {
            if (uVar5 == 1) {
              S_SVA_OBJ_480();
              return;
            }
            S_SVA_OBJ_480();
            return;
          }
          if (uVar5 != 7) {
            S_SVA_OBJ_480();
            return;
          }
          uVar5 = 0x300;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
             (ushort)((uVar4 | uVar5) << 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
        uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar3) {
          uVar3 = 0x1f;
        }
        uVar2 = 0;
        if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
           (unaff_s0[0xb] == 7)) {
          uVar2 = 0x20;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
             uVar3 | uVar2;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar3 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
             *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        unaff_s5 = unaff_s5 + 1;
        if (0x17 < (int)unaff_s4) {
          S_SVA_OBJ_5C0();
          return;
        }
      } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
             *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        *unaff_s5 = *(ushort *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,*(ushort *)((int)unaff_s0 + 0x16) >> 8,
                             *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
        uVar3 = 0;
        uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
        if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
          switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
          case 0:
            uVar3 = 0x8000;
            break;
          case 1:
            uVar3 = 0x9000;
            break;
          case 2:
            uVar3 = 0xa000;
            break;
          case 3:
            uVar3 = 0xb000;
            break;
          case 4:
            uVar3 = 0xc000;
            break;
          case 5:
            uVar3 = 0xd000;
            break;
          case 6:
            uVar3 = 0xe000;
          }
        }
        if (uVar3 != 0) {
          if (0x7f < *(short *)(unaff_s0 + 2)) {
            S_SVA_OBJ_1A0(uVar3,0x7f);
            return;
          }
          if (*(short *)(unaff_s0 + 2) < 0) {
            uVar2 = 0;
          }
        }
        *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
      }
    } while ((unaff_s2 == 0) && ((unaff_s1 & 2) == 0));
    param_1 = 0;
    param_2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
    if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
      switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
      case 0:
        param_1 = 0x8000;
        break;
      case 1:
        param_1 = 0x9000;
        break;
      case 2:
        param_1 = 0xa000;
        break;
      case 3:
        param_1 = 0xb000;
        break;
      case 4:
        param_1 = 0xc000;
        break;
      case 5:
        param_1 = 0xd000;
        break;
      case 6:
        param_1 = 0xe000;
      }
    }
    if (param_1 != 0) {
      if (0x7f < *(short *)((int)unaff_s0 + 10)) {
        S_SVA_OBJ_280(param_1,0x7f);
        return;
      }
      if (*(short *)((int)unaff_s0 + 10) < 0) {
        param_2 = 0;
      }
    }
  } while( true );
}



void S_SVA_OBJ_480(undefined4 param_1,uint param_2,uint param_3)

{
  undefined2 uVar1;
  ushort uVar2;
  ushort uVar3;
  uint uVar4;
  uint uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  ushort *unaff_s5;
  
  while( true ) {
    do {
      *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
           *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0x3f |
           (ushort)((param_2 | param_3) << 6);
      do {
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x4000) != 0)) {
          uVar3 = *(ushort *)((int)unaff_s0 + 0x36);
          if (0x1f < uVar3) {
            uVar3 = 0x1f;
          }
          uVar2 = 0;
          if ((((unaff_s2 != 0) || ((unaff_s1 & 0x400) != 0)) && (unaff_s0[0xb] != 3)) &&
             (unaff_s0[0xb] == 7)) {
            uVar2 = 0x20;
          }
          *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) =
               *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 10) & 0xffc0 |
               uVar3 | uVar2;
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
          uVar3 = *(ushort *)(unaff_s0 + 0xe);
          if (0xf < uVar3) {
            uVar3 = 0xf;
          }
          *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) =
               *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s3 * 2 + 8) & 0xfff0 | uVar3;
        }
        do {
          unaff_s4 = unaff_s4 + 1;
          unaff_s5 = unaff_s5 + 1;
          if (0x17 < (int)unaff_s4) {
            S_SVA_OBJ_5C0();
            return;
          }
        } while ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0);
        unaff_s3 = unaff_s4 * 8;
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
          *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) =
               *(undefined2 *)(unaff_s0 + 5);
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
          *unaff_s5 = *(ushort *)(unaff_s0 + 6);
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
          uVar1 = FUN_8005f0f4(*unaff_s5 >> 8,*unaff_s5 & 0xff,
                               *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                               *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
          *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 4) = uVar1;
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 1) != 0)) {
          uVar3 = 0;
          uVar2 = *(ushort *)(unaff_s0 + 2) & 0x7fff;
          if ((unaff_s2 != 0) || ((unaff_s1 & 4) != 0)) {
            switch((int)((*(ushort *)(unaff_s0 + 3) - 1) * 0x10000) >> 0x10) {
            case 0:
              uVar3 = 0x8000;
              break;
            case 1:
              uVar3 = 0x9000;
              break;
            case 2:
              uVar3 = 0xa000;
              break;
            case 3:
              uVar3 = 0xb000;
              break;
            case 4:
              uVar3 = 0xc000;
              break;
            case 5:
              uVar3 = 0xd000;
              break;
            case 6:
              uVar3 = 0xe000;
            }
          }
          if (uVar3 != 0) {
            if (0x7f < *(short *)(unaff_s0 + 2)) {
              S_SVA_OBJ_1A0(uVar3,0x7f);
              return;
            }
            if (*(short *)(unaff_s0 + 2) < 0) {
              uVar2 = 0;
            }
          }
          *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10) = uVar2 | uVar3;
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 2) != 0)) {
          uVar3 = 0;
          uVar2 = *(ushort *)((int)unaff_s0 + 10) & 0x7fff;
          if ((unaff_s2 != 0) || ((unaff_s1 & 8) != 0)) {
            switch((int)((*(ushort *)((int)unaff_s0 + 0xe) - 1) * 0x10000) >> 0x10) {
            case 0:
              uVar3 = 0x8000;
              break;
            case 1:
              uVar3 = 0x9000;
              break;
            case 2:
              uVar3 = 0xa000;
              break;
            case 3:
              uVar3 = 0xb000;
              break;
            case 4:
              uVar3 = 0xc000;
              break;
            case 5:
              uVar3 = 0xd000;
              break;
            case 6:
              uVar3 = 0xe000;
            }
          }
          if (uVar3 != 0) {
            if (0x7f < *(short *)((int)unaff_s0 + 10)) {
              S_SVA_OBJ_280(uVar3,0x7f);
              return;
            }
            if (*(short *)((int)unaff_s0 + 10) < 0) {
              uVar2 = 0;
            }
          }
          *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 2) = uVar2 | uVar3;
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
          FUN_8005ec10(unaff_s3 | 3,unaff_s0[7]);
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
          FUN_8005ec10(unaff_s3 | 7,unaff_s0[8]);
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
          *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 8) =
               *(undefined2 *)((int)unaff_s0 + 0x3a);
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
          *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 10) =
               *(undefined2 *)(unaff_s0 + 0xf);
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x800) != 0)) {
          uVar4 = (uint)*(ushort *)(unaff_s0 + 0xc);
          if (0x7f < uVar4) {
            uVar4 = 0x7f;
          }
          uVar5 = 0;
          if (((unaff_s2 != 0) || ((unaff_s1 & 0x100) != 0)) && (unaff_s0[9] == 5)) {
            uVar5 = 0x80;
          }
          *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 8) =
               *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 8) & 0xff |
               (ushort)((uVar4 | uVar5) << 8);
        }
        if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
          uVar4 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
          if (0xf < uVar4) {
            uVar4 = 0xf;
          }
          *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 8) =
               *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + unaff_s4 * 0x10 + 8) & 0xff0f |
               (ushort)(uVar4 << 4);
        }
      } while ((unaff_s2 == 0) && ((unaff_s1 & 0x2000) == 0));
      param_2 = (uint)*(ushort *)(unaff_s0 + 0xd);
      if (0x7f < param_2) {
        param_2 = 0x7f;
      }
      param_3 = 0x100;
    } while ((unaff_s2 == 0) && ((unaff_s1 & 0x200) == 0));
    uVar4 = unaff_s0[10];
    if (uVar4 == 5) {
      S_SVA_OBJ_480();
      return;
    }
    if ((int)uVar4 < 6) {
      if (uVar4 == 1) {
        S_SVA_OBJ_480();
        return;
      }
      S_SVA_OBJ_480();
      return;
    }
    if (uVar4 != 7) break;
    param_3 = 0x300;
  }
  S_SVA_OBJ_480();
  return;
}



void S_SVA_OBJ_5C0(void)

{
  int param_5;
  
  for (; param_5 < 2; param_5 = param_5 + 1) {
  }
  return;
}



// Possible S_R.OBJ/SpuRead
// Possible S_W.OBJ/SpuWrite

uint FUN_8005aaa8(undefined4 param_1,uint param_2)

{
  if (0x7eff0 < param_2) {
    param_2 = 0x7eff0;
  }
  FUN_8005eae4(param_1,param_2);
  if (DAT_80066a50 == 0) {
    DAT_80066a4c = 0;
  }
  return param_2;
}



long LoadExec(char *param_1,ulong param_2,ulong param_3)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&LAB_000000a0)();
  return lVar1;
}



int printf(char *fmt,...)

{
  int iVar1;
  undefined4 in_a1;
  undefined4 in_a2;
  undefined4 in_a3;
  undefined4 local_res4;
  undefined4 local_res8;
  undefined4 local_resc;
  
  local_res4 = in_a1;
  local_res8 = in_a2;
  local_resc = in_a3;
  iVar1 = prnt(1,fmt,&local_res4);
  return iVar1;
}



// Possible C114.OBJ/_96_remove

void FUN_8005ab60(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _96_init(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



char * strcpy(char *param_1,char *param_2)

{
  char cVar1;
  char *pcVar2;
  char *pcVar3;
  char *pcVar4;
  
  pcVar2 = (char *)0x0;
  if ((param_1 != (char *)0x0) && (param_2 != (char *)0x0)) {
    cVar1 = *param_2;
    pcVar4 = param_2 + 1;
    pcVar3 = param_1 + 1;
    *param_1 = cVar1;
    while (pcVar2 = param_1, cVar1 != '\0') {
      cVar1 = *pcVar4;
      pcVar4 = pcVar4 + 1;
      *pcVar3 = cVar1;
      pcVar3 = pcVar3 + 1;
    }
  }
  return pcVar2;
}



void InitHeap(ulong *param_1,ulong param_2)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



undefined4 FUN_8005abe8(undefined4 *param_1)

{
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  
  *param_1 = unaff_retaddr;
  param_1[0xb] = &DAT_80066d38;
  param_1[1] = register0x00000074;
  param_1[2] = unaff_s8;
  param_1[3] = unaff_s0;
  param_1[4] = unaff_s1;
  param_1[5] = unaff_s2;
  param_1[6] = unaff_s3;
  param_1[7] = unaff_s4;
  param_1[8] = unaff_s5;
  param_1[9] = unaff_s6;
  param_1[10] = unaff_s7;
  return 0;
}



void HookEntryInt(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



code * startIntrVSync(void)

{
  *(undefined4 *)PTR_TMR_HRETRACE_MODE_8006661c = 0x100;
  DAT_80066618 = 0;
  INTR_VB_OBJ_F0(0x800665f8,8);
  FUN_800548d4(0,INTR_VB_OBJ_58);
  return INTR_VB_OBJ_C4;
}



void INTR_VB_OBJ_58(void)

{
  code **ppcVar1;
  int iVar2;
  
  iVar2 = 0;
  ppcVar1 = (code **)(squareRootLookup + 0xc0);
  DAT_80066618 = DAT_80066618 + 1;
  do {
    if (*ppcVar1 != (code *)0x0) {
      (**ppcVar1)();
    }
    iVar2 = iVar2 + 1;
    ppcVar1 = ppcVar1 + 1;
  } while (iVar2 < 8);
  return;
}



void INTR_VB_OBJ_C4(int param_1,int param_2)

{
  if (param_2 != *(int *)(squareRootLookup + param_1 * 2 + 0xc0)) {
    *(int *)(squareRootLookup + param_1 * 2 + 0xc0) = param_2;
  }
  return;
}



void INTR_VB_OBJ_F0(undefined4 *param_1,int param_2)

{
  int iVar1;
  
  iVar1 = param_2 + -1;
  if (param_2 != 0) {
    do {
      *param_1 = 0;
      iVar1 = iVar1 + -1;
      param_1 = param_1 + 1;
    } while (iVar1 != -1);
  }
  return;
}



code * startIntrDMA(void)

{
  INTR_DMA_OBJ_278(&DAT_8006662c,8);
  *(undefined4 *)PTR_DMA_DICR_80066628 = 0;
  FUN_800548d4(3,INTR_DMA_OBJ_4C);
  return INTR_DMA_OBJ_1CC;
}



void INTR_DMA_OBJ_4C(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  code **ppcVar4;
  
  uVar3 = *(uint *)PTR_DMA_DICR_80066628 >> 0x18 & 0x7f;
  if (uVar3 != 0) {
    do {
      ppcVar4 = (code **)&DAT_8006662c;
      for (iVar1 = 0; (uVar3 != 0 && (iVar1 < 7)); iVar1 = iVar1 + 1) {
        if ((uVar3 & 1) != 0) {
          *(uint *)PTR_DMA_DICR_80066628 =
               *(uint *)PTR_DMA_DICR_80066628 & (1 << (iVar1 + 0x18U & 0x1f) | 0xffffffU);
          if (*ppcVar4 != (code *)0x0) {
            (**ppcVar4)();
          }
        }
        ppcVar4 = ppcVar4 + 1;
        uVar3 = uVar3 >> 1;
      }
      uVar3 = *(uint *)PTR_DMA_DICR_80066628 >> 0x18 & 0x7f;
    } while (uVar3 != 0);
  }
  if (((*(uint *)PTR_DMA_DICR_80066628 & 0xff000000) == 0x80000000) ||
     ((*(uint *)PTR_DMA_DICR_80066628 & 0x8000) != 0)) {
    printf("DMA bus error: code=%08x\n",*(undefined4 *)PTR_DMA_DICR_80066628);
    iVar1 = 0;
    do {
      iVar2 = iVar1 + 1;
      printf("MADR[%d]=%08x\n",iVar1,*(undefined4 *)(PTR_DMA_MDEC_IN_MADR_8006664c + iVar1 * 0x10));
      iVar1 = iVar2;
    } while (iVar2 < 7);
  }
  return;
}



int INTR_DMA_OBJ_1CC(int param_1,int param_2)

{
  undefined *puVar1;
  int *piVar2;
  int iVar3;
  
  puVar1 = PTR_DMA_DICR_80066628;
  piVar2 = &DAT_8006662c + param_1;
  iVar3 = *piVar2;
  if (param_2 != iVar3) {
    if (param_2 != 0) {
      *piVar2 = param_2;
      *(uint *)puVar1 = *(uint *)puVar1 & 0xffffff | 1 << (param_1 + 0x10U & 0x1f) | 0x800000U;
      iVar3 = INTR_DMA_OBJ_270();
      return iVar3;
    }
    *piVar2 = 0;
    *(uint *)puVar1 = (*(uint *)puVar1 & 0xffffff | 0x800000) & ~(1 << (param_1 + 0x10U & 0x1f));
  }
  return iVar3;
}



void INTR_DMA_OBJ_270(void)

{
  return;
}



void INTR_DMA_OBJ_278(undefined4 *param_1,int param_2)

{
  int iVar1;
  
  iVar1 = param_2 + -1;
  if (param_2 != 0) {
    do {
      *param_1 = 0;
      iVar1 = iVar1 + -1;
      param_1 = param_1 + 1;
    } while (iVar1 != -1);
  }
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible A37.OBJ/ExitCriticalSection

void ExitCriticalSection(void)

{
  syscall(0);
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void ReturnFromException(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void ChangeClearPAD(long param_1)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void ChangeClearRCnt(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000c0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible A36.OBJ/EnterCriticalSection

int EnterCriticalSection(void)

{
  int in_v0;
  
  syscall(0);
  return in_v0;
}



void ResetEntryInt(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void FUN_8005b054(void)

{
  DAT_8006d158 = FUN_8005b0e8;
  DAT_8006d15c = FUN_8005b080;
  DAT_8006d154 = 0;
  DAT_8006d160 = 0;
  return;
}



undefined4 FUN_8005b080(void)

{
  undefined4 uVar1;
  
  uVar1 = 0;
  if (((*(uint *)(PTR_I_STAT_800666c0 + 4) & 1) != 0) &&
     (uVar1 = 0, (*(uint *)PTR_I_STAT_800666c0 & 1) != 0)) {
    if (DAT_80066688 != (code *)0x0) {
      (*DAT_80066688)();
    }
    uVar1 = 1;
  }
  return uVar1;
}



undefined4 FUN_8005b0e8(void)

{
  int iVar1;
  
  if ((*(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 10) & 2) == 0) {
    DAT_800666c8 = 1;
    if ((DAT_800666b0 != 0) && (DAT_8006d164 < 0x96)) {
      DAT_8006d164 = DAT_8006d164 + 1;
    }
    if ((DAT_800666b4 == 0) && (DAT_8006d168 < 0x96)) {
      DAT_8006d168 = DAT_8006d168 + 1;
    }
    if ((DAT_80066698 != 0) && (DAT_800666b0 <= DAT_800666b4)) {
      DAT_800666a4 = 0;
      DAT_800666a0 = DAT_800666b0;
      iVar1 = FUN_8005b388(DAT_80066694 + DAT_800666b0 * 0xf0);
      if (iVar1 == 0) {
        (*DAT_80066660)(0xffff);
      }
      DAT_800666a8 = 0;
      if (DAT_800666a0 <= DAT_800666b4) {
        do {
          FUN_8005b6bc(DAT_80066694 + DAT_800666a0 * 0xf0);
        } while (DAT_800666a0 <= DAT_800666b4);
      }
      *(undefined2 *)(PTR_JOY_MCD_DATA_800666c4 + 0xe) = 0x88;
    }
  }
  else {
    *(undefined2 *)(PTR_JOY_MCD_DATA_800666c4 + 10) = 0;
  }
  return 0;
}



void FUN_8005b278(void)

{
  undefined *puVar1;
  
  DAT_80066698 = 0;
  EnterCriticalSection();
  SysDeqIntRP(2,&DAT_8006d154);
  SysEnqIntRP(2,&DAT_8006d154);
  puVar1 = PTR_I_STAT_800666c0;
  *(undefined4 *)PTR_I_STAT_800666c0 = 0xfffffffe;
  *(uint *)(puVar1 + 4) = *(uint *)(puVar1 + 4) | 1;
  ChangeClearRCnt(3,0);
  ExitCriticalSection();
  (*DAT_80066664)(DAT_80066694);
  (*DAT_80066664)(DAT_80066694 + 0xf0);
  DAT_8006d168 = 0;
  DAT_8006d164 = 0;
  DAT_80066698 = 1;
  return;
}



void FUN_8005b344(void)

{
  EnterCriticalSection();
  ChangeClearRCnt(3,1);
  SysDeqIntRP(2,&DAT_8006d154);
  ExitCriticalSection();
  return;
}



undefined4 FUN_8005b388(int param_1)

{
  code *pcVar1;
  undefined *puVar2;
  int iVar3;
  undefined2 uVar4;
  undefined4 uVar5;
  
  puVar2 = PTR_JOY_MCD_DATA_800666c4;
  *(undefined2 *)(PTR_JOY_MCD_DATA_800666c4 + 10) = 0x40;
  *(undefined2 *)(puVar2 + 10) = 0;
  *(undefined2 *)(puVar2 + 8) = 0xd;
  *(undefined2 *)(puVar2 + 0xe) = 0x88;
  uVar5 = 0x91;
  if (*(char *)(param_1 + 0xe8) == '\b') {
    uVar5 = 0x50;
  }
  setRC2wait(uVar5);
  uVar4 = 0x1003;
  if (DAT_800666a0 != 0) {
    uVar4 = 0x3003;
  }
  iVar3 = DAT_800666a0 * 4;
  *(undefined2 *)(PTR_JOY_MCD_DATA_800666c4 + 10) = uVar4;
  iVar3 = *(int *)(&DAT_800666b8 + iVar3);
  pcVar1 = DAT_80066680;
  if (-1 < iVar3) {
    while (DAT_80066680 = pcVar1, 0 < iVar3) {
      iVar3 = *(int *)(&DAT_800666b8 + DAT_800666a0 * 4) + -1;
      *(int *)(&DAT_800666b8 + DAT_800666a0 * 4) = iVar3;
      (*DAT_80066680)(*(int *)(param_1 + 0xc) + iVar3 * 0xf0);
      pcVar1 = DAT_80066680;
      iVar3 = *(int *)(&DAT_800666b8 + DAT_800666a0 * 4);
    }
    if (*(int *)(&DAT_800666b8 + DAT_800666a0 * 4) == 0) {
      *(int *)(&DAT_800666b8 + DAT_800666a0 * 4) = -1;
      (*pcVar1)(param_1);
      (*DAT_80066684)(param_1);
    }
  }
  puVar2 = PTR_JOY_MCD_DATA_800666c4;
  if ((*(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 4) & 0x200) != 0) {
    *(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 10) = *(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 10) | 0x10
    ;
    if ((*(ushort *)(puVar2 + 4) & 0x200) != 0) {
      do {
        iVar3 = chkRC2wait();
      } while (iVar3 == 0);
      *PTR_JOY_MCD_DATA_800666c4 = 1;
      setRC2wait(2000);
      iVar3 = FUN_8005bc34();
      if (iVar3 == 0) {
        return 0;
      }
      FUN_8005bcc4();
      setRC2wait(0x1ae);
      do {
        if ((*(uint *)PTR_I_STAT_800666c0 & 0x80) != 0) {
          *PTR_JOY_MCD_DATA_800666c4 = 0x42;
          setRC2wait();
          iVar3 = FUN_8005bc34();
          if (iVar3 == 0) {
            return 0;
          }
          FUN_8005bcc4();
          setRC2wait(0x1ae);
          do {
            if ((*(uint *)PTR_I_STAT_800666c0 & 0x80) != 0) {
              *PTR_JOY_MCD_DATA_800666c4 = 1;
              setRC2wait();
              iVar3 = FUN_8005bc34();
              if (iVar3 == 0) {
                return 0;
              }
              FUN_8005bcc4();
              return 0;
            }
            iVar3 = chkRC2wait(0x3c);
          } while (iVar3 == 0);
          return 0;
        }
        iVar3 = chkRC2wait(0x3c);
      } while (iVar3 == 0);
      return 0;
    }
    *(undefined4 *)PTR_I_STAT_800666c0 = 0xffffff7f;
  }
  if (*(char *)(param_1 + 0x50) == '\0') {
    return 1;
  }
  if (*(char *)(param_1 + 0x37) != '\0') {
    return 0;
  }
  return 1;
}



void FUN_8005b6bc(int param_1)

{
  code **ppcVar1;
  int iVar2;
  
  ppcVar1 = (code **)(&PTR_PADIF_OBJ_0_80066c28 + DAT_800666a4);
  DAT_800666a4 = DAT_800666a4 + 1;
  iVar2 = (**ppcVar1)();
  if (iVar2 < 0) {
    (*DAT_80066660)();
  }
  else {
    if ((DAT_800666a4 != 0) && ((DAT_800666a4 != 3 || (**(char **)(param_1 + 0x3c) != -0x80)))) {
      setRC2wait(0x3c);
      iVar2 = FUN_8005bc34();
      if (iVar2 == 0) {
        (*DAT_80066660)(0xfffffffd);
      }
    }
    if (4 < DAT_800666a4) {
      DAT_800666a4 = DAT_800666a4 + -1;
    }
  }
  return;
}



uint FUN_8005b7ac(int param_1,int param_2)

{
  byte bVar1;
  ushort uVar2;
  byte bVar3;
  undefined *puVar4;
  int iVar5;
  uint uVar6;
  short sVar7;
  
  puVar4 = PTR_I_STAT_800666c0;
  bVar3 = (byte)param_2;
  if (param_2 < 0) {
    bVar1 = *PTR_JOY_MCD_DATA_800666c4;
    *(undefined *)(param_1 + 0x44) = 0xff;
    *(undefined *)(param_1 + 0x45) = 1;
    **(byte **)(param_1 + 0x40) = ~bVar3;
    uVar2 = *(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 4);
    while ((uVar2 & 1) == 0) {
      uVar2 = *(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 4);
    }
    do {
      iVar5 = chkRC2wait();
    } while (iVar5 == 0);
    *PTR_JOY_MCD_DATA_800666c4 = ~bVar3;
  }
  else {
    sVar7 = 0x88;
    if (((int)(uint)**(byte **)(param_1 + 0x3c) >> 4 == 8) && (8 < *(byte *)(param_1 + 0x44))) {
      sVar7 = 0x22;
    }
    DAT_8006d210 = (uint)(ushort)TMR_SYSCLOCK_VAL;
    uVar2 = *(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 4);
    DAT_8006d20c = 0x1ae;
    while ((uVar2 & 2) == 0) {
      uVar2 = *(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 4);
    }
    bVar1 = *PTR_JOY_MCD_DATA_800666c4;
    *(short *)(PTR_JOY_MCD_DATA_800666c4 + 0xe) = sVar7;
    uVar6 = *(uint *)puVar4;
    while ((uVar6 & 0x80) == 0) {
      iVar5 = chkRC2wait();
      if (iVar5 != 0) {
        return 0xffffffec;
      }
      uVar6 = *(uint *)PTR_I_STAT_800666c0;
    }
    *PTR_JOY_MCD_DATA_800666c4 = bVar3;
    puVar4 = PTR_JOY_MCD_DATA_800666c4;
    if (sVar7 == 0x22) {
      *(undefined4 *)PTR_I_STAT_800666c0 = 0xffffff7f;
      *(ushort *)(puVar4 + 10) = *(ushort *)(puVar4 + 10) | 0x10;
    }
    *(char *)(param_1 + 0x45) = *(char *)(param_1 + 0x45) + '\x01';
    *(byte *)(*(int *)(param_1 + 0x3c) + (uint)*(byte *)(param_1 + 0x44)) = bVar1;
    *(char *)(param_1 + 0x44) = *(char *)(param_1 + 0x44) + '\x01';
  }
  return (uint)bVar1;
}



uint FUN_8005b9bc(int param_1,undefined param_2)

{
  byte bVar1;
  undefined *puVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  undefined2 uVar6;
  
  uVar6 = 0x88;
  if (((int)(uint)**(byte **)(param_1 + 0x3c) >> 4 == 8) && (8 < *(byte *)(param_1 + 0x44))) {
    uVar6 = 0x22;
  }
  do {
  } while ((*(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 4) & 2) == 0);
  setRC2wait(400);
  bVar1 = *PTR_JOY_MCD_DATA_800666c4;
  uVar3 = (uint)bVar1;
  if ((*(char *)(param_1 + 0x44) == '\0') && ((int)uVar3 >> 4 == 8)) {
    *(undefined2 *)(PTR_JOY_MCD_DATA_800666c4 + 0xe) = 0x22;
  }
  else {
    *(undefined2 *)(PTR_JOY_MCD_DATA_800666c4 + 0xe) = uVar6;
  }
  uVar4 = *(uint *)PTR_I_STAT_800666c0;
  while( true ) {
    if ((uVar4 & 0x80) != 0) {
      if ((*(char *)(param_1 + 0xe8) != '\b') && (DAT_800666a4 == 2)) {
        setRC2wait(0x3c);
        do {
          iVar5 = chkRC2wait();
        } while (iVar5 == 0);
      }
      *PTR_JOY_MCD_DATA_800666c4 = param_2;
      puVar2 = PTR_JOY_MCD_DATA_800666c4;
      if ((DAT_800666a4 == 3) && (uVar3 == 0x80)) {
        *(undefined4 *)PTR_I_STAT_800666c0 = 0xffffff7f;
        *(ushort *)(puVar2 + 10) = *(ushort *)(puVar2 + 10) | 0x10;
      }
      *(char *)(param_1 + 0x45) = *(char *)(param_1 + 0x45) + '\x01';
      if (*(char *)(param_1 + 0x44) != -1) {
        *(byte *)(*(int *)(param_1 + 0x3c) + (uint)*(byte *)(param_1 + 0x44)) = bVar1;
      }
      *(char *)(param_1 + 0x44) = *(char *)(param_1 + 0x44) + '\x01';
      return uVar3;
    }
    uVar4 = (uint)(ushort)TMR_SYSCLOCK_VAL;
    if (uVar4 < DAT_8006d210) {
      if ((ushort)TMR_SYSCLOCK_MAX == 0) {
        uVar4 = uVar4 + 0x10000;
      }
      else {
        uVar4 = (ushort)TMR_SYSCLOCK_MAX + uVar4;
      }
    }
    uVar4 = uVar4 - DAT_8006d210;
    if (((ushort)TMR_SYSCLOCK_MODE & 0x200) == 0) {
      uVar4 = uVar4 >> 3;
    }
    if (DAT_8006d20c <= uVar4) break;
    uVar4 = *(uint *)PTR_I_STAT_800666c0;
  }
  return 0xfffffffe;
}



undefined4 FUN_8005bc34(void)

{
  ushort uVar1;
  undefined *puVar2;
  int iVar3;
  
  puVar2 = PTR_JOY_MCD_DATA_800666c4;
  *(undefined4 *)PTR_I_STAT_800666c0 = 0xffffff7f;
  uVar1 = *(ushort *)(puVar2 + 4);
  while( true ) {
    if ((uVar1 & 0x80) == 0) {
      *(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 10) =
           *(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 10) | 0x10;
      return 1;
    }
    iVar3 = chkRC2wait();
    if (iVar3 != 0) break;
    uVar1 = *(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 4);
  }
  return 0;
}



void FUN_8005bcc4(void)

{
  do {
  } while ((*(ushort *)(PTR_JOY_MCD_DATA_800666c4 + 4) & 2) == 0);
  return;
}



void _padInitDirSeq(void)

{
  DAT_80066678 = PADSEQD_OBJ_34;
  DAT_8006667c = PADSEQD_OBJ_488;
  DAT_80066680 = PADSEQD_OBJ_144;
  return;
}



undefined4 PADSEQD_OBJ_34(int param_1)

{
  byte bVar1;
  undefined4 uVar2;
  
  if (**(char **)(param_1 + 0x3c) == -0xd) {
    if ((*(char *)(param_1 + 0xe8) == '\0') || (*(char *)(param_1 + 0x46) == -1))
    goto PADSEQD_OBJ_F8;
    if (*(char *)(param_1 + 0x49) == '\x02') {
      (*DAT_80066664)(param_1);
    }
  }
  bVar1 = *(byte *)(param_1 + 0x46);
  if (bVar1 == 1) {
    FUN_8005e2bc(param_1,1);
    uVar2 = PADSEQD_OBJ_134();
    return uVar2;
  }
  if (bVar1 < 2) {
    if (bVar1 != 0) {
      uVar2 = PADSEQD_OBJ_108();
      return uVar2;
    }
  }
  else {
    if (bVar1 == 0xfe) {
PADSEQD_OBJ_F8:
      FUN_8005e2bc(param_1,0);
      uVar2 = PADSEQD_OBJ_134();
      return uVar2;
    }
    if (bVar1 != 0xff) {
      uVar2 = PADSEQD_OBJ_108();
      return uVar2;
    }
  }
  return 0;
}



undefined4 PADSEQD_OBJ_108(void)

{
  undefined4 uVar1;
  int unaff_s0;
  
  if (*(code **)(unaff_s0 + 0x14) != (code *)0x0) {
    (**(code **)(unaff_s0 + 0x14))();
    uVar1 = PADSEQD_OBJ_134();
    return uVar1;
  }
  FUN_8005d784();
  return 0;
}



void PADSEQD_OBJ_134(void)

{
  return;
}



void PADSEQD_OBJ_144(int param_1)

{
  char cVar1;
  byte bVar2;
  int iVar3;
  
  bVar2 = **(byte **)(param_1 + 0x3c) >> 4;
  if ((**(byte **)(param_1 + 0x3c) & 0xf0) == 0) {
    **(undefined **)(param_1 + 0x30) = 0xff;
    *(undefined *)(*(int *)(param_1 + 0x30) + 1) = 0;
    *(undefined *)(param_1 + 0xe8) = 0;
    *(undefined *)(param_1 + 0x35) = 0;
    (*DAT_80066664)();
    PADSEQD_OBJ_398();
    return;
  }
  cVar1 = *(char *)(param_1 + 0xe8);
  *(byte *)(param_1 + 0xe8) = bVar2;
  if (bVar2 == 0xf) {
    *(char *)(param_1 + 0xe8) = cVar1;
    PADSEQD_OBJ_224();
    return;
  }
  **(undefined **)(param_1 + 0x30) = 0;
  iVar3 = 2;
  *(undefined *)(*(int *)(param_1 + 0x30) + 1) = **(undefined **)(param_1 + 0x3c);
  *(undefined *)(param_1 + 0x35) = *(undefined *)(param_1 + 0x44);
  if (2 < *(byte *)(param_1 + 0x44)) {
    do {
      *(undefined *)(*(int *)(param_1 + 0x30) + iVar3) =
           *(undefined *)(*(int *)(param_1 + 0x3c) + iVar3);
      iVar3 = iVar3 + 1;
    } while (iVar3 < (int)(uint)*(byte *)(param_1 + 0x44));
  }
  if (((*(char *)(*(int *)(param_1 + 0x3c) + 1) == '\0') &&
      (((*(char *)(param_1 + 0x46) != '\x01' || (*(int *)(param_1 + 0x14) != 0)) &&
       (*(char *)(param_1 + 0x50) == '\0')))) || (*(char *)(param_1 + 0xe8) != cVar1)) {
    (*DAT_80066664)(param_1);
  }
  cVar1 = *(char *)(param_1 + 0x46);
  *(undefined *)(param_1 + 0x4a) = 0;
  if ((cVar1 == -1) || ((cVar1 != '\0' && (*(char *)(param_1 + 0x37) == '\0')))) {
    return;
  }
  if (((byte)(cVar1 - 2U) < 0xfc) && (**(char **)(param_1 + 0x3c) != -0xd)) {
    (*DAT_80066664)(param_1);
    PADSEQD_OBJ_398();
    return;
  }
  bVar2 = *(byte *)(param_1 + 0x46);
  if (bVar2 == 1) {
    *(undefined *)(param_1 + 0x47) = 0;
    *(char *)(param_1 + 0x46) = *(char *)(param_1 + 0x46) + '\x01';
    PADSEQD_OBJ_398();
    return;
  }
  if (bVar2 < 2) {
    if (bVar2 != 0) {
      PADSEQD_OBJ_360();
      return;
    }
    *(undefined *)(param_1 + 0x49) = 1;
    PADSEQD_OBJ_34C();
    return;
  }
  if (bVar2 != 0xfe) {
    PADSEQD_OBJ_360();
    return;
  }
  *(undefined *)(param_1 + 0x46) = 0xff;
  PADSEQD_OBJ_398();
  return;
}



void PADSEQD_OBJ_224(undefined4 param_1,uint param_2)

{
  char cVar1;
  byte bVar2;
  int unaff_s0;
  
  if (((*(char *)(*(int *)(unaff_s0 + 0x3c) + 1) == '\0') &&
      (((*(char *)(unaff_s0 + 0x46) != '\x01' || (*(int *)(unaff_s0 + 0x14) != 0)) &&
       (*(char *)(unaff_s0 + 0x50) == '\0')))) || (*(byte *)(unaff_s0 + 0xe8) != param_2)) {
    (*DAT_80066664)();
  }
  cVar1 = *(char *)(unaff_s0 + 0x46);
  *(undefined *)(unaff_s0 + 0x4a) = 0;
  if ((cVar1 == -1) || ((cVar1 != '\0' && (*(char *)(unaff_s0 + 0x37) == '\0')))) {
    return;
  }
  if (((byte)(cVar1 - 2U) < 0xfc) && (**(char **)(unaff_s0 + 0x3c) != -0xd)) {
    (*DAT_80066664)();
    PADSEQD_OBJ_398();
    return;
  }
  bVar2 = *(byte *)(unaff_s0 + 0x46);
  if (bVar2 == 1) {
    *(undefined *)(unaff_s0 + 0x47) = 0;
    *(char *)(unaff_s0 + 0x46) = *(char *)(unaff_s0 + 0x46) + '\x01';
    PADSEQD_OBJ_398();
    return;
  }
  if (bVar2 < 2) {
    if (bVar2 != 0) {
      PADSEQD_OBJ_360();
      return;
    }
    *(undefined *)(unaff_s0 + 0x49) = 1;
    PADSEQD_OBJ_34C();
    return;
  }
  if (bVar2 != 0xfe) {
    PADSEQD_OBJ_360();
    return;
  }
  *(undefined *)(unaff_s0 + 0x46) = 0xff;
  PADSEQD_OBJ_398();
  return;
}



void PADSEQD_OBJ_34C(void)

{
  char in_v0;
  int unaff_s0;
  
  *(char *)(unaff_s0 + 0x46) = in_v0 + '\x01';
  PADSEQD_OBJ_398();
  return;
}



void PADSEQD_OBJ_360(void)

{
  char cVar1;
  int unaff_s0;
  
  if (*(code **)(unaff_s0 + 0x18) != (code *)0x0) {
    (**(code **)(unaff_s0 + 0x18))();
    PADSEQD_OBJ_388();
    return;
  }
  cVar1 = FUN_8005d808();
  *(char *)(unaff_s0 + 0x46) = *(char *)(unaff_s0 + 0x46) + cVar1;
  return;
}



void PADSEQD_OBJ_388(void)

{
  char in_v0;
  int unaff_s0;
  
  *(char *)(unaff_s0 + 0x46) = *(char *)(unaff_s0 + 0x46) + in_v0;
  return;
}



void PADSEQD_OBJ_398(void)

{
  return;
}



void _dirFailAuto(int param_1)

{
  byte bVar1;
  
  *(int *)(param_1 + 0x4c) = *(int *)(param_1 + 0x4c) + 1;
  if (*(char *)(param_1 + 0x46) == '\0') {
PADSEQD_OBJ_440:
    if (**(char **)(param_1 + 0x3c) != -0xd) {
      **(undefined **)(param_1 + 0x30) = 0xff;
      *(undefined *)(*(int *)(param_1 + 0x30) + 1) = 0;
      *(undefined *)(param_1 + 0xe8) = 0;
      *(undefined *)(param_1 + 0x35) = 0;
    }
    return;
  }
  if (*(char *)(param_1 + 0x46) == '\x01') {
    bVar1 = *(byte *)(param_1 + 0x4a);
    if (10 < bVar1) {
      *(undefined *)(param_1 + 0x49) = 2;
      *(undefined *)(param_1 + 0x46) = 0xff;
      PADSEQD_OBJ_478();
      return;
    }
  }
  else {
    bVar1 = *(byte *)(param_1 + 0x4a);
    if (10 < bVar1) {
      if (*(char *)(param_1 + 0x49) != '\0') {
        (*DAT_80066664)(param_1);
      }
      goto PADSEQD_OBJ_440;
    }
  }
  *(byte *)(param_1 + 0x4a) = bVar1 + 1;
  PADSEQD_OBJ_478();
  return;
}



void PADSEQD_OBJ_478(void)

{
  return;
}



undefined4 PADSEQD_OBJ_488(int param_1)

{
  undefined4 uVar1;
  
  if ((*(short *)(param_1 + 0xe6) == 0) || (uVar1 = 0, *(char *)(param_1 + 0x46) != -1)) {
    uVar1 = 1;
  }
  return uVar1;
}



void * bzero(uchar *param_1,int param_2)

{
  void *pvVar1;
  uchar *puVar2;
  uchar *puVar3;
  
  puVar2 = (uchar *)0x0;
  if (param_1 != (uchar *)0x0) {
    puVar3 = param_1;
    if (param_2 < 1) {
      pvVar1 = (void *)BZERO_OBJ_28();
      return pvVar1;
    }
    do {
      *puVar3 = '\0';
      param_2 = param_2 + -1;
      puVar3 = puVar3 + 1;
      puVar2 = param_1;
    } while (0 < param_2);
  }
  return puVar2;
}



void BZERO_OBJ_28(void)

{
  return;
}



void GPU_cw(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



void * memcpy(uchar *param_1,uchar *param_2,int param_3)

{
  uchar uVar1;
  uchar *puVar2;
  uchar *puVar3;
  
  puVar2 = (uchar *)0x0;
  if ((param_1 != (uchar *)0x0) && (puVar2 = param_1, puVar3 = param_1, 0 < param_3)) {
    do {
      uVar1 = *param_2;
      param_2 = param_2 + 1;
      param_3 = param_3 + -1;
      *puVar3 = uVar1;
      puVar3 = puVar3 + 1;
    } while (0 < param_3);
  }
  return puVar2;
}



// Possible GS_125.OBJ/GsGetWorkBase

undefined4 FUN_8005c238(void)

{
  return DAT_800666d8;
}



void _patch_gte(void)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  int *piVar4;
  int iVar5;
  undefined4 unaff_retaddr;
  
  DAT_8006d174 = unaff_retaddr;
  EnterCriticalSection();
  iVar1 = (*(code *)&SUB_000000b0)();
  piVar2 = (int *)(*(int *)(iVar1 + 0x18) + 0x28);
  piVar3 = &PATCHGTE_OBJ_AC;
  piVar4 = piVar2;
  do {
    iVar1 = *piVar3;
    iVar5 = *piVar4;
    piVar3 = piVar3 + 1;
    piVar4 = piVar4 + 1;
    if (iVar1 != iVar5) goto PATCHGTE_OBJ_88;
  } while (piVar3 != &PATCHGTE_OBJ_C4);
  piVar4 = &PATCHGTE_OBJ_C4;
  do {
    *piVar2 = *piVar4;
    piVar4 = piVar4 + 1;
    piVar2 = piVar2 + 1;
  } while (piVar4 != (int *)PATCHGTE_OBJ_DC);
PATCHGTE_OBJ_88:
  FlushCache();
  ExitCriticalSection();
  return;
}



void PATCHGTE_OBJ_DC(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _bu_init(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



void puts(char *param_1)

{
  char cVar1;
  
  if (param_1 == (char *)0x0) {
    PUTS_OBJ_28();
    return;
  }
  while( true ) {
    cVar1 = *param_1;
    param_1 = param_1 + 1;
    if (cVar1 == '\0') break;
    FUN_8005ff94((int)cVar1);
  }
  FUN_80060090();
  return;
}



void PUTS_OBJ_28(void)

{
  char cVar1;
  char *unaff_s0;
  
  while( true ) {
    cVar1 = *unaff_s0;
    unaff_s0 = unaff_s0 + 1;
    if (cVar1 == '\0') break;
    FUN_8005ff94((int)cVar1);
  }
  FUN_80060090();
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 FUN_8005c3a4(void)

{
  byte bVar1;
  undefined4 uVar2;
  byte *pbVar3;
  byte *pbVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  byte local_20;
  byte local_18 [8];
  
  *PTR_CDROM_REG0_800669c4 = 1;
  local_20 = *PTR_CDROM_REG3_800669d0 & 7;
  uVar7 = 0;
  if (local_20 == 0) {
LAB_8005c8e8:
    uVar2 = 0;
  }
  else {
    while (iVar5 = 0, local_20 != (*PTR_CDROM_REG3_800669d0 & 7)) {
      local_20 = *PTR_CDROM_REG3_800669d0 & 7;
    }
    do {
      pbVar3 = local_18 + iVar5;
      iVar6 = iVar5;
      if ((*PTR_CDROM_REG0_800669c4 & 0x20) == 0) break;
      iVar5 = iVar5 + 1;
      *pbVar3 = *PTR_CDROM_REG1_800669c8;
      iVar6 = iVar5;
    } while (iVar5 < 8);
    for (; iVar5 < 8; iVar5 = iVar5 + 1) {
      local_18[iVar5] = 0;
    }
    *PTR_CDROM_REG0_800669c4 = 1;
    *PTR_CDROM_REG3_800669d0 = 7;
    *PTR_CDROM_REG2_800669cc = 7;
    if ((local_20 != 3) || (*(int *)(&DAT_800668c4 + (uint)DAT_8006671d * 4) != 0)) {
      if (((_DAT_8006670c & 0x10) == 0) && ((local_18[0] & 0x10) != 0)) {
        DAT_80066714 = DAT_80066714 + 1;
      }
      _DAT_8006670c = (uint)local_18[0];
      DAT_80066710 = (uint)local_18[1];
      uVar7 = _DAT_8006670c & 0x1d;
    }
    if (((local_20 == 5) && (0 < DAT_80066708)) && (printf("DiskError: "), 0 < DAT_80066708)) {
      printf("com=%s,code=(%02x:%02x)\n",(&PTR_s_CdlSync_80066724)[DAT_8006671d],_DAT_8006670c,
             DAT_80066710);
    }
    switch(local_20) {
    case 1:
      if ((uVar7 != 0) && (iVar6 == 1)) {
        uVar7 = 0;
      }
      DAT_800669dd = 1;
      if (uVar7 != 0) {
        DAT_800669dd = 5;
      }
      pbVar3 = &DAT_8006d18c;
      pbVar4 = local_18;
      iVar5 = 7;
      do {
        bVar1 = *pbVar4;
        pbVar4 = pbVar4 + 1;
        iVar5 = iVar5 + -1;
        *pbVar3 = bVar1;
        pbVar3 = pbVar3 + 1;
      } while (iVar5 != -1);
      *PTR_CDROM_REG0_800669c4 = 0;
      uVar2 = 4;
      *PTR_CDROM_REG3_800669d0 = 0;
      break;
    case 2:
      DAT_800669dc = 2;
      if (uVar7 != 0) {
        DAT_800669dc = 5;
      }
      pbVar3 = &DAT_8006d184;
      pbVar4 = local_18;
      iVar5 = 7;
      do {
        bVar1 = *pbVar4;
        pbVar4 = pbVar4 + 1;
        iVar5 = iVar5 + -1;
        *pbVar3 = bVar1;
        pbVar3 = pbVar3 + 1;
      } while (iVar5 != -1);
      uVar2 = 2;
      break;
    case 3:
      if (uVar7 == 0) {
        if (*(int *)(&DAT_800667c4 + (uint)DAT_8006671d * 4) == 0) {
          DAT_800669dc = 2;
          pbVar3 = &DAT_8006d184;
          pbVar4 = local_18;
          iVar5 = 7;
          do {
            bVar1 = *pbVar4;
            pbVar4 = pbVar4 + 1;
            iVar5 = iVar5 + -1;
            *pbVar3 = bVar1;
            pbVar3 = pbVar3 + 1;
          } while (iVar5 != -1);
          uVar2 = 2;
        }
        else {
          DAT_800669dc = 3;
          pbVar3 = &DAT_8006d184;
          pbVar4 = local_18;
          iVar5 = 7;
          do {
            bVar1 = *pbVar4;
            pbVar4 = pbVar4 + 1;
            iVar5 = iVar5 + -1;
            *pbVar3 = bVar1;
            pbVar3 = pbVar3 + 1;
          } while (iVar5 != -1);
          uVar2 = 1;
        }
      }
      else {
        DAT_800669dc = 5;
        pbVar3 = &DAT_8006d184;
        pbVar4 = local_18;
        iVar5 = 7;
        do {
          bVar1 = *pbVar4;
          pbVar4 = pbVar4 + 1;
          iVar5 = iVar5 + -1;
          *pbVar3 = bVar1;
          pbVar3 = pbVar3 + 1;
        } while (iVar5 != -1);
        uVar2 = 2;
      }
      break;
    case 4:
      pbVar3 = &DAT_8006d194;
      DAT_800669de = 4;
      pbVar4 = local_18;
      DAT_800669dd = 4;
      iVar5 = 7;
      do {
        bVar1 = *pbVar4;
        pbVar4 = pbVar4 + 1;
        iVar5 = iVar5 + -1;
        *pbVar3 = bVar1;
        pbVar3 = pbVar3 + 1;
      } while (iVar5 != -1);
      pbVar3 = &DAT_8006d18c;
      pbVar4 = local_18;
      iVar5 = 7;
      do {
        bVar1 = *pbVar4;
        pbVar4 = pbVar4 + 1;
        iVar5 = iVar5 + -1;
        *pbVar3 = bVar1;
        pbVar3 = pbVar3 + 1;
      } while (iVar5 != -1);
      uVar2 = 4;
      break;
    case 5:
      pbVar3 = &DAT_8006d184;
      DAT_800669dd = 5;
      pbVar4 = local_18;
      DAT_800669dc = 5;
      iVar5 = 7;
      do {
        bVar1 = *pbVar4;
        pbVar4 = pbVar4 + 1;
        iVar5 = iVar5 + -1;
        *pbVar3 = bVar1;
        pbVar3 = pbVar3 + 1;
      } while (iVar5 != -1);
      pbVar3 = &DAT_8006d18c;
      pbVar4 = local_18;
      iVar5 = 7;
      do {
        bVar1 = *pbVar4;
        pbVar4 = pbVar4 + 1;
        iVar5 = iVar5 + -1;
        *pbVar3 = bVar1;
        pbVar3 = pbVar3 + 1;
      } while (iVar5 != -1);
      uVar2 = 6;
      break;
    default:
      puts("CDROM: unknown intr");
      printf("(%d)\n",(uint)local_20);
      goto LAB_8005c8e8;
    }
  }
  return uVar2;
}



uint FUN_8005c900(int param_1,undefined *param_2)

{
  byte bVar1;
  undefined uVar2;
  bool bVar3;
  int iVar4;
  uint uVar5;
  undefined1 *puVar6;
  
  iVar4 = VSync(-1);
  DAT_8006d19c = iVar4 + 0x3c0;
  DAT_8006d1a0 = 0;
  DAT_8006d1a4 = "CD_sync";
  while( true ) {
    iVar4 = VSync(-1);
    if ((DAT_8006d19c < iVar4) ||
       (iVar4 = DAT_8006d1a0 + 1, bVar3 = 0x3c0000 < DAT_8006d1a0, DAT_8006d1a0 = iVar4, bVar3)) {
      puts("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_8006d1a4,(&PTR_s_CdlSync_80066724)[DAT_8006671d],
             (&PTR_s_NoIntr_800667a4)[DAT_800669dc],(&PTR_s_NoIntr_800667a4)[DAT_800669dd]);
      FUN_8005cf8c();
      iVar4 = -1;
    }
    else {
      iVar4 = 0;
    }
    if (iVar4 != 0) {
      return 0xffffffff;
    }
    iVar4 = FUN_800549c8();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_800669c4;
      while( true ) {
        uVar5 = FUN_8005c3a4();
        if (uVar5 == 0) break;
        if (((uVar5 & 4) != 0) && (DAT_80066704 != (code *)0x0)) {
          (*DAT_80066704)(DAT_800669dd,&DAT_8006d18c);
        }
        if (((uVar5 & 2) != 0) && (DAT_80066700 != (code *)0x0)) {
          (*DAT_80066700)(DAT_800669dc,&DAT_8006d184);
        }
      }
      *PTR_CDROM_REG0_800669c4 = bVar1 & 3;
    }
    uVar5 = (uint)DAT_800669dc;
    if ((uVar5 == 2) || (uVar5 == 5)) break;
    if (param_1 != 0) {
      return 0;
    }
  }
  DAT_800669dc = 2;
  puVar6 = &DAT_8006d184;
  iVar4 = 7;
  if (param_2 == (undefined *)0x0) {
    DAT_800669dc = 2;
    return uVar5;
  }
  do {
    uVar2 = *puVar6;
    puVar6 = puVar6 + 1;
    iVar4 = iVar4 + -1;
    *param_2 = uVar2;
    param_2 = param_2 + 1;
  } while (iVar4 != -1);
  return uVar5;
}



undefined4 FUN_8005cb80(byte param_1,undefined *param_2,undefined *param_3,int param_4)

{
  byte bVar1;
  undefined uVar2;
  bool bVar3;
  undefined4 uVar4;
  undefined *puVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  undefined1 *puVar9;
  
  if (1 < DAT_80066708) {
    printf("%s...\n",(&PTR_s_CdlSync_80066724)[param_1]);
  }
  if ((*(int *)(&DAT_80066944 + (uint)param_1 * 4) == 0) || (param_2 != (undefined *)0x0)) {
    FUN_8005c900(0,0);
    if (param_1 == 2) {
      iVar7 = 0;
      puVar5 = param_2;
      do {
        (&DAT_80066718)[iVar7] = *puVar5;
        iVar7 = iVar7 + 1;
        puVar5 = param_2 + iVar7;
      } while (iVar7 < 4);
    }
    if (param_1 == 0xe) {
      DAT_8006671c = *param_2;
    }
    iVar7 = (uint)param_1 * 4;
    DAT_800669dc = 0;
    if (*(int *)(&DAT_80066844 + iVar7) != 0) {
      DAT_800669dd = 0;
    }
    *PTR_CDROM_REG0_800669c4 = 0;
    iVar8 = 0;
    puVar5 = param_2;
    if (0 < *(int *)(&DAT_80066944 + iVar7)) {
      do {
        *PTR_CDROM_REG2_800669cc = *puVar5;
        iVar8 = iVar8 + 1;
        puVar5 = param_2 + iVar8;
      } while (iVar8 < *(int *)(&DAT_80066944 + iVar7));
    }
    DAT_8006671d = param_1;
    *PTR_CDROM_REG1_800669c8 = param_1;
    uVar4 = 0;
    if (param_4 == 0) {
      iVar7 = VSync(-1);
      DAT_8006d19c = iVar7 + 0x3c0;
      DAT_8006d1a0 = 0;
      DAT_8006d1a4 = "CD_cw";
      while (DAT_800669dc == 0) {
        iVar7 = VSync(-1);
        if ((DAT_8006d19c < iVar7) ||
           (iVar7 = DAT_8006d1a0 + 1, bVar3 = 0x3c0000 < DAT_8006d1a0, DAT_8006d1a0 = iVar7, bVar3))
        {
          puts("CD timeout: ");
          printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_8006d1a4,(&PTR_s_CdlSync_80066724)[DAT_8006671d],
                 (&PTR_s_NoIntr_800667a4)[DAT_800669dc],(&PTR_s_NoIntr_800667a4)[DAT_800669dd]);
          FUN_8005cf8c();
          iVar7 = -1;
        }
        else {
          iVar7 = 0;
        }
        if (iVar7 != 0) {
          return 0xffffffff;
        }
        iVar7 = FUN_800549c8();
        if (iVar7 != 0) {
          bVar1 = *PTR_CDROM_REG0_800669c4;
          while( true ) {
            uVar6 = FUN_8005c3a4();
            if (uVar6 == 0) break;
            if (((uVar6 & 4) != 0) && (DAT_80066704 != (code *)0x0)) {
              (*DAT_80066704)(DAT_800669dd,&DAT_8006d18c);
            }
            if (((uVar6 & 2) != 0) && (DAT_80066700 != (code *)0x0)) {
              (*DAT_80066700)(DAT_800669dc,&DAT_8006d184);
            }
          }
          *PTR_CDROM_REG0_800669c4 = bVar1 & 3;
        }
      }
      puVar9 = &DAT_8006d184;
      iVar7 = 7;
      if (param_3 != (undefined *)0x0) {
        do {
          uVar2 = *puVar9;
          puVar9 = puVar9 + 1;
          iVar7 = iVar7 + -1;
          *param_3 = uVar2;
          param_3 = param_3 + 1;
        } while (iVar7 != -1);
      }
      uVar4 = 0;
      if (DAT_800669dc == 5) {
        uVar4 = 0xffffffff;
      }
    }
  }
  else {
    uVar4 = 0xfffffffe;
    if (0 < DAT_80066708) {
      printf("%s: no param\n",(&PTR_s_CdlSync_80066724)[param_1]);
      uVar4 = 0xfffffffe;
    }
  }
  return uVar4;
}



void FUN_8005cf8c(void)

{
  byte bVar1;
  
  *PTR_CDROM_REG0_800669c4 = 1;
  bVar1 = *PTR_CDROM_REG3_800669d0;
  while ((bVar1 & 7) != 0) {
    *PTR_CDROM_REG0_800669c4 = 1;
    *PTR_CDROM_REG3_800669d0 = 7;
    *PTR_CDROM_REG2_800669cc = 7;
    bVar1 = *PTR_CDROM_REG3_800669d0;
  }
  DAT_800669de = 0;
  DAT_800669dd = 0;
  DAT_800669dc = 2;
  *PTR_CDROM_REG0_800669c4 = 0;
  *PTR_CDROM_REG3_800669d0 = 0;
  *(undefined4 *)PTR_COMMON_DELAY_800669d4 = 0x1325;
  return;
}



undefined4 FUN_8005d060(void)

{
  undefined *puVar1;
  
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_800669d8;
  if ((*(short *)(PTR_VOICE_00_LEFT_RIGHT_800669d8 + 0x1b8) == 0) &&
     (*(short *)(PTR_VOICE_00_LEFT_RIGHT_800669d8 + 0x1ba) == 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800669d8 + 0x180) = 0x3fff;
    *(undefined2 *)(puVar1 + 0x182) = 0x3fff;
  }
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_800669d8;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_800669d8 + 0x1b0) = 0x3fff;
  *(undefined2 *)(puVar1 + 0x1b2) = 0x3fff;
  *(undefined2 *)(puVar1 + 0x1aa) = 0xc001;
  *PTR_CDROM_REG0_800669c4 = 2;
  *PTR_CDROM_REG2_800669cc = 0x80;
  *PTR_CDROM_REG3_800669d0 = 0;
  *PTR_CDROM_REG0_800669c4 = 3;
  *PTR_CDROM_REG1_800669c8 = 0x80;
  *PTR_CDROM_REG2_800669cc = 0;
  *PTR_CDROM_REG3_800669d0 = 0x20;
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 FUN_8005d150(void)

{
  byte bVar1;
  int iVar2;
  undefined4 uVar3;
  
  puts("CD_init:");
  printf("addr=%08x\n",&PTR_DAT_800669e0);
  DAT_8006671d = 0;
  DAT_8006671c = 0;
  DAT_80066704 = 0;
  DAT_80066700 = 0;
  DAT_80066710 = 0;
  _DAT_8006670c = 0;
  FUN_800548a4();
  FUN_800548d4(2,FUN_8005d690);
  *PTR_CDROM_REG0_800669c4 = 1;
  bVar1 = *PTR_CDROM_REG3_800669d0;
  while ((bVar1 & 7) != 0) {
    *PTR_CDROM_REG0_800669c4 = 1;
    *PTR_CDROM_REG3_800669d0 = 7;
    *PTR_CDROM_REG2_800669cc = 7;
    bVar1 = *PTR_CDROM_REG3_800669d0;
  }
  DAT_800669de = 0;
  DAT_800669dd = 0;
  DAT_800669dc = 2;
  *PTR_CDROM_REG0_800669c4 = 0;
  *PTR_CDROM_REG3_800669d0 = 0;
  *(undefined4 *)PTR_COMMON_DELAY_800669d4 = 0x1325;
  FUN_8005cb80(1,0,0,0);
  if ((_DAT_8006670c & 0x10) != 0) {
    FUN_8005cb80(1,0,0,0);
  }
  iVar2 = FUN_8005cb80(10,0,0,0);
  uVar3 = 0xffffffff;
  if (iVar2 == 0) {
    iVar2 = FUN_8005cb80(0xc,0,0,0);
    if (iVar2 == 0) {
      iVar2 = FUN_8005c900(0,0);
      uVar3 = 0xffffffff;
      if (iVar2 == 2) {
        uVar3 = 0;
      }
    }
    else {
      uVar3 = 0xffffffff;
    }
  }
  return uVar3;
}



undefined4 FUN_8005d330(int param_1)

{
  bool bVar1;
  int iVar2;
  undefined4 uVar3;
  
  iVar2 = VSync(-1);
  DAT_8006d19c = iVar2 + 0x3c0;
  DAT_8006d1a0 = 0;
  DAT_8006d1a4 = "CD_datasync";
  do {
    iVar2 = VSync(-1);
    if ((DAT_8006d19c < iVar2) ||
       (iVar2 = DAT_8006d1a0 + 1, bVar1 = 0x3c0000 < DAT_8006d1a0, DAT_8006d1a0 = iVar2, bVar1)) {
      puts("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_8006d1a4,(&PTR_s_CdlSync_80066724)[DAT_8006671d],
             (&PTR_s_NoIntr_800667a4)[DAT_800669dc],(&PTR_s_NoIntr_800667a4)[DAT_800669dd]);
      FUN_8005cf8c();
      iVar2 = -1;
    }
    else {
      iVar2 = 0;
    }
    uVar3 = 0xffffffff;
  } while (((iVar2 == 0) && (uVar3 = 0, (*(uint *)PTR_DMA_CDROM_CHCR_80066a08 & 0x1000000) != 0)) &&
          (uVar3 = 1, param_1 == 0));
  return uVar3;
}



undefined4 FUN_8005d498(undefined4 param_1,uint param_2)

{
  uint uVar1;
  
  *PTR_CDROM_REG0_800669c4 = 0;
  *PTR_CDROM_REG3_800669d0 = 0x80;
  *(undefined4 *)PTR_CDROM_DELAY_800669f8 = 0x20943;
  *(undefined4 *)PTR_COMMON_DELAY_800669d4 = 0x1323;
  *(uint *)PTR_DMA_DPCR_800669fc = *(uint *)PTR_DMA_DPCR_800669fc | 0x8000;
  *(undefined4 *)PTR_DMA_CDROM_MADR_80066a00 = param_1;
  *(uint *)PTR_DMA_CDROM_BCR_80066a04 = param_2 | 0x10000;
  do {
  } while ((*PTR_CDROM_REG0_800669c4 & 0x40) == 0);
  *(undefined4 *)PTR_DMA_CDROM_CHCR_80066a08 = 0x11000000;
  uVar1 = *(uint *)PTR_DMA_CDROM_CHCR_80066a08;
  while ((uVar1 & 0x1000000) != 0) {
    uVar1 = *(uint *)PTR_DMA_CDROM_CHCR_80066a08;
  }
  *(undefined4 *)PTR_COMMON_DELAY_800669d4 = 0x1325;
  return 0;
}



undefined4 FUN_8005d598(undefined4 param_1,uint param_2)

{
  byte bVar1;
  
  *PTR_CDROM_REG0_800669c4 = 0;
  *PTR_CDROM_REG3_800669d0 = 0x80;
  *(undefined4 *)PTR_CDROM_DELAY_800669f8 = 0x21020843;
  *(undefined4 *)PTR_COMMON_DELAY_800669d4 = 0x1325;
  *(uint *)PTR_DMA_DPCR_800669fc = *(uint *)PTR_DMA_DPCR_800669fc | 0x8000;
  *(undefined4 *)PTR_DMA_CDROM_MADR_80066a00 = param_1;
  *(uint *)PTR_DMA_CDROM_BCR_80066a04 = param_2 | 0x10000;
  bVar1 = *PTR_CDROM_REG0_800669c4;
  while ((bVar1 & 0x40) == 0) {
    bVar1 = *PTR_CDROM_REG0_800669c4;
  }
  *(undefined4 *)PTR_DMA_CDROM_CHCR_80066a08 = 0x11400100;
  return 0;
}



void FUN_8005d684(undefined4 param_1)

{
  DAT_800669a8 = param_1;
  return;
}



void FUN_8005d690(void)

{
  byte bVar1;
  uint uVar2;
  
  bVar1 = *PTR_CDROM_REG0_800669c4;
  while( true ) {
    uVar2 = FUN_8005c3a4();
    if (uVar2 == 0) break;
    if (((uVar2 & 4) != 0) && (DAT_80066704 != (code *)0x0)) {
      (*DAT_80066704)(DAT_800669dd,&DAT_8006d18c);
    }
    if (((uVar2 & 2) != 0) && (DAT_80066700 != (code *)0x0)) {
      (*DAT_80066700)(DAT_800669dc,&DAT_8006d184);
    }
  }
  *PTR_CDROM_REG0_800669c4 = bVar1 & 3;
  return;
}



void DeliverEvent(ulong param_1,ulong param_2)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void FUN_8005d778(int param_1,undefined4 param_2,undefined param_3)

{
  *(undefined4 *)(param_1 + 0x28) = param_2;
  *(undefined *)(param_1 + 0x34) = param_3;
  return;
}



void FUN_8005d784(int param_1)

{
  byte bVar1;
  
  bVar1 = *(byte *)(param_1 + 0x46);
  if (bVar1 == 3) {
    FUN_8005e2f0(param_1,*(undefined *)(param_1 + 0xe4));
  }
  else if (bVar1 < 4) {
    if (bVar1 == 2) {
      FUN_8005e2dc();
    }
  }
  else if (bVar1 == 4) {
    FUN_8005e330(param_1,*(undefined *)(param_1 + 0x47));
  }
  return;
}



undefined4 FUN_8005d808(int param_1)

{
  byte bVar1;
  undefined uVar2;
  byte bVar3;
  short sVar4;
  int iVar5;
  
  bVar1 = *(byte *)(param_1 + 0x46);
  if (bVar1 == 3) {
    iVar5 = *(int *)(param_1 + 0x3c);
    if (*(char *)(iVar5 + 2) != '\0') {
      return 0;
    }
    if (*(char *)(iVar5 + 3) != '\0') {
      return 0;
    }
    sVar4 = (ushort)*(byte *)(iVar5 + 5) + (ushort)*(byte *)(iVar5 + 4) * 0x100;
    *(short *)(param_1 + 0xe6) = sVar4;
    if (*(short *)(param_1 + 0xee) == sVar4) {
      *(undefined2 *)(param_1 + 0xee) = 0xffff;
      *(undefined *)(param_1 + 0xeb) = 0;
      *(undefined *)(param_1 + 0x47) = 0;
      return 1;
    }
    *(short *)(param_1 + 0xee) = sVar4;
  }
  else if (bVar1 < 4) {
    if (bVar1 != 2) {
      return 1;
    }
    iVar5 = *(int *)(param_1 + 0x3c);
    if (*(char *)(iVar5 + 7) != '\0') {
      return 0;
    }
    if ((((*(char *)(param_1 + 0xe3) == *(char *)(iVar5 + 3)) &&
         (*(char *)(param_1 + 0xe4) == *(char *)(iVar5 + 4))) &&
        (*(char *)(param_1 + 0xe9) == *(char *)(iVar5 + 5))) &&
       (*(char *)(param_1 + 0xea) == *(char *)(iVar5 + 6))) {
      *(undefined2 *)(param_1 + 0xee) = 0;
    }
    else {
      *(undefined2 *)(param_1 + 0xee) = 0xffff;
    }
    *(undefined *)(param_1 + 0xe3) = *(undefined *)(*(int *)(param_1 + 0x3c) + 3);
    uVar2 = *(undefined *)(*(int *)(param_1 + 0x3c) + 4);
    *(undefined2 *)(param_1 + 0xe6) = 0;
    *(undefined *)(param_1 + 0xe4) = uVar2;
    *(undefined *)(param_1 + 0xe9) = *(undefined *)(*(int *)(param_1 + 0x3c) + 5);
    uVar2 = *(undefined *)(*(int *)(param_1 + 0x3c) + 6);
    *(undefined2 *)(param_1 + 0xec) = 0;
    *(undefined *)(param_1 + 0xea) = uVar2;
    if (*(short *)(param_1 + 0xee) == 0) {
      *(undefined *)(param_1 + 0xeb) = 0;
      return 1;
    }
  }
  else {
    if (bVar1 != 4) {
      return 1;
    }
    iVar5 = *(int *)(param_1 + 0x3c);
    if (*(char *)(iVar5 + 2) != '\0') {
      return 0;
    }
    if (*(char *)(iVar5 + 3) != '\0') {
      return 0;
    }
    bVar1 = *(byte *)(iVar5 + 4);
    bVar3 = *(char *)(param_1 + 0x47) + 1;
    *(byte *)(param_1 + 0x47) = bVar3;
    *(ushort *)(param_1 + 0xec) = *(short *)(param_1 + 0xec) + 8 + (bVar1 + 3 & 0x1fc);
    if (*(byte *)(param_1 + 0xea) <= bVar3) {
      iVar5 = FUN_8005da78(param_1);
      if (iVar5 < 0x81) {
        if (*(short *)(param_1 + 0xee) != *(short *)(param_1 + 0xec)) {
          *(short *)(param_1 + 0xee) = *(short *)(param_1 + 0xec);
          *(undefined *)(param_1 + 0x47) = 0;
          *(undefined2 *)(param_1 + 0xec) = 0;
          return 0;
        }
        *(undefined2 *)(param_1 + 0xee) = 0;
        *(undefined *)(param_1 + 0xeb) = 0;
        *(undefined *)(param_1 + 0x46) = 0xff;
        FUN_8005dab0(param_1,param_1 + 99);
        *(undefined *)(param_1 + 0x46) = 2;
      }
      else {
        (*DAT_80066664)(param_1);
        *(undefined *)(param_1 + 0x46) = 0xfe;
        *(undefined *)(param_1 + 0x49) = 2;
      }
    }
  }
  return 0;
}



int FUN_8005da78(int param_1)

{
  return ((int)(*(byte *)(param_1 + 0xe3) + 1) >> 1) * 4 +
         ((uint)*(byte *)(param_1 + 0xe9) * 5 + 3 & 0xffc) + 4 + (uint)*(ushort *)(param_1 + 0xec);
}



undefined4 FUN_8005dab0(int *param_1,int param_2)

{
  int iVar1;
  
  if (param_2 != 0) {
    if (param_1[1] != 0) {
      return 0;
    }
    iVar1 = (*DAT_8006667c)();
    if (iVar1 == 0) {
      *(undefined *)((int)param_1 + 0x49) = 4;
      *(undefined *)((int)param_1 + 0x46) = 1;
      param_1[5] = (int)FUN_8005db84;
      param_1[6] = (int)&LAB_8005dc2c;
      iVar1 = (param_2 + 3 >> 2) * 4;
      *param_1 = iVar1;
      *(undefined *)((int)param_1 + 0x47) = 0;
      iVar1 = iVar1 + ((int)(*(byte *)((int)param_1 + 0xe3) + 1) >> 1) * 4;
      param_1[1] = iVar1;
      param_1[2] = iVar1 + ((uint)*(byte *)((int)param_1 + 0xe9) * 5 + 3 & 0xffc);
      return 1;
    }
  }
  return 0;
}



void FUN_8005db84(int param_1)

{
  byte bVar1;
  
  bVar1 = *(byte *)(param_1 + 0x46);
  if (bVar1 == 3) {
    FUN_8005e310(param_1,*(undefined *)(param_1 + 0x47));
  }
  else if (bVar1 < 4) {
    if (bVar1 == 2) {
      FUN_8005e2f0(param_1,*(undefined *)(param_1 + 0x47));
    }
  }
  else if (bVar1 == 4) {
    if (*(char *)(param_1 + 0x48) == '\0') {
      FUN_8005e330(param_1,*(undefined *)(param_1 + 0x47));
    }
    else {
      FUN_8005e350();
    }
  }
  return;
}



bool FUN_8005e024(int param_1,undefined4 param_2)

{
  int iVar1;
  
  iVar1 = (*DAT_8006667c)();
  if (iVar1 == 0) {
    *(undefined *)(param_1 + 0x46) = 1;
    *(undefined **)(param_1 + 0x14) = &LAB_8005e08c;
    *(undefined4 *)(param_1 + 0x20) = param_2;
    *(undefined **)(param_1 + 0x18) = &LAB_8005e0a8;
  }
  return iVar1 == 0;
}



bool FUN_8005e170(int param_1,char param_2,undefined param_3)

{
  int iVar1;
  
  iVar1 = (*DAT_8006667c)();
  if (iVar1 == 0) {
    *(undefined *)(param_1 + 0x46) = 1;
    *(undefined **)(param_1 + 0x14) = &LAB_8005e208;
    *(undefined **)(param_1 + 0x18) = &LAB_8005e25c;
    *(char *)(param_1 + 0x51) = param_2;
    *(undefined *)(param_1 + 0x52) = param_3;
    *(bool *)(param_1 + 0x53) = param_2 == *(char *)(param_1 + 0xe4);
  }
  return iVar1 == 0;
}



void FUN_8005e2bc(int param_1,undefined param_2)

{
  *(undefined *)(param_1 + 0x37) = 0x43;
  *(int *)(param_1 + 0x2c) = param_1 + 0x24;
  *(undefined *)(param_1 + 0x24) = param_2;
  *(undefined *)(param_1 + 0x36) = 1;
  return;
}



void FUN_8005e2dc(int param_1)

{
  *(undefined *)(param_1 + 0x37) = 0x45;
  *(undefined4 *)(param_1 + 0x2c) = 0;
  *(undefined *)(param_1 + 0x36) = 0;
  return;
}



void FUN_8005e2f0(int param_1,undefined param_2)

{
  *(undefined *)(param_1 + 0x37) = 0x4c;
  *(int *)(param_1 + 0x2c) = param_1 + 0x24;
  *(undefined *)(param_1 + 0x24) = param_2;
  *(undefined *)(param_1 + 0x36) = 1;
  return;
}



void FUN_8005e310(int param_1,undefined param_2)

{
  *(undefined *)(param_1 + 0x37) = 0x46;
  *(int *)(param_1 + 0x2c) = param_1 + 0x24;
  *(undefined *)(param_1 + 0x24) = param_2;
  *(undefined *)(param_1 + 0x36) = 1;
  return;
}



void FUN_8005e330(int param_1,undefined param_2)

{
  *(undefined *)(param_1 + 0x37) = 0x47;
  *(int *)(param_1 + 0x2c) = param_1 + 0x24;
  *(undefined *)(param_1 + 0x24) = param_2;
  *(undefined *)(param_1 + 0x36) = 1;
  return;
}



void FUN_8005e350(int param_1)

{
  *(undefined *)(param_1 + 0x37) = 0x4b;
  *(undefined4 *)(param_1 + 0x2c) = 0;
  *(undefined *)(param_1 + 0x36) = 0;
  return;
}



undefined4 FUN_8005e368(int param_1)

{
  undefined *puVar1;
  uint uVar2;
  int iVar3;
  undefined2 *puVar4;
  
  *(uint *)PTR_DMA_DPCR_80066a28 = *(uint *)PTR_DMA_DPCR_80066a28 | 0xb0000;
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
  DAT_80066a34 = 0;
  DAT_80066a38 = 0;
  DAT_80066a30 = 0;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = 0;
  *(undefined2 *)(puVar1 + 0x182) = 0;
  *(undefined2 *)(puVar1 + 0x1aa) = 0;
  FUN_8005ed5c();
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x180) = 0;
  *(undefined2 *)(puVar1 + 0x182) = 0;
  if ((*(ushort *)(puVar1 + 0x1ae) & 0x7ff) != 0) {
    uVar2 = 1;
    do {
      if (0xf00 < uVar2) {
        printf("SPU:T/O [%s]\n","wait (reset)");
        break;
      }
      uVar2 = uVar2 + 1;
    } while ((*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1ae) & 0x7ff) != 0);
  }
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
  iVar3 = 0;
  puVar4 = &DAT_8006d1c8;
  DAT_80066a3c = 2;
  DAT_80066a40 = 3;
  DAT_80066a44 = 8;
  DAT_80066a48 = 7;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1ac) = 4;
  *(undefined2 *)(puVar1 + 0x184) = 0;
  *(undefined2 *)(puVar1 + 0x186) = 0;
  *(undefined2 *)(puVar1 + 0x18c) = 0xffff;
  *(undefined2 *)(puVar1 + 0x18e) = 0xffff;
  *(undefined2 *)(puVar1 + 0x198) = 0;
  *(undefined2 *)(puVar1 + 0x19a) = 0;
  do {
    *puVar4 = 0;
    puVar1 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
    iVar3 = iVar3 + 1;
    puVar4 = puVar4 + 1;
  } while (iVar3 < 10);
  if (param_1 == 0) {
    DAT_80066a30 = 0x200;
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 400) = 0;
    *(undefined2 *)(puVar1 + 0x192) = 0;
    *(undefined2 *)(puVar1 + 0x194) = 0;
    *(undefined2 *)(puVar1 + 0x196) = 0;
    *(undefined2 *)(puVar1 + 0x1b0) = 0;
    *(undefined2 *)(puVar1 + 0x1b2) = 0;
    *(undefined2 *)(puVar1 + 0x1b4) = 0;
    *(undefined2 *)(puVar1 + 0x1b6) = 0;
    FUN_8005e5e8(&DAT_80066a58,0x10);
    iVar3 = 0;
    puVar4 = (undefined2 *)PTR_VOICE_00_LEFT_RIGHT_80066a18;
    do {
      *puVar4 = 0;
      puVar4[1] = 0;
      puVar4[2] = 0x3fff;
      puVar4[3] = 0x200;
      puVar4[4] = 0;
      puVar4[5] = 0;
      puVar1 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
      iVar3 = iVar3 + 1;
      puVar4 = puVar4 + 8;
    } while (iVar3 < 0x18);
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x188) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18a) = 0xff;
    FUN_8005ed5c();
    FUN_8005ed5c();
    FUN_8005ed5c();
    FUN_8005ed5c();
    puVar1 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x18c) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18e) = 0xff;
    FUN_8005ed5c();
    FUN_8005ed5c();
    FUN_8005ed5c();
    FUN_8005ed5c();
  }
  DAT_80066a4c = 1;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) = 0xc000;
  DAT_80066a50 = 0;
  DAT_80066a54 = 0;
  return 0;
}



void FUN_8005e5e8(undefined2 *param_1,uint param_2)

{
  ushort uVar1;
  undefined2 uVar2;
  bool bVar3;
  undefined *puVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  
  uVar1 = *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1ae);
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1a6) = DAT_80066a30;
  FUN_8005ed5c();
  bVar3 = param_2 < 0x41;
  if (param_2 != 0) {
    do {
      puVar4 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
      uVar7 = 0x40;
      if (bVar3) {
        uVar7 = param_2;
      }
      iVar5 = 0;
      if (0 < (int)uVar7) {
        do {
          uVar2 = *param_1;
          param_1 = param_1 + 1;
          iVar5 = iVar5 + 2;
          *(undefined2 *)(puVar4 + 0x1a8) = uVar2;
        } while (iVar5 < (int)uVar7);
      }
      *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
           *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) & 0xffcf | 0x10;
      FUN_8005ed5c();
      if ((*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1ae) & 0x400) != 0) {
        uVar6 = 1;
        do {
          if (0xf00 < uVar6) {
            printf("SPU:T/O [%s]\n","wait (wrdy H -> L)");
            break;
          }
          uVar6 = uVar6 + 1;
        } while ((*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1ae) & 0x400) != 0);
      }
      param_2 = param_2 - uVar7;
      FUN_8005ed5c();
      FUN_8005ed5c();
      bVar3 = param_2 < 0x41;
    } while (param_2 != 0);
  }
  puVar4 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
       *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) & 0xffcf;
  if ((*(ushort *)(puVar4 + 0x1ae) & 0x7ff) != (uVar1 & 0x7ff)) {
    uVar7 = 1;
    do {
      if (0xf00 < uVar7) {
        printf("SPU:T/O [%s]\n","wait (dmaf clear/W)");
        return;
      }
      uVar7 = uVar7 + 1;
    } while ((*(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1ae) & 0x7ff) != (uVar1 & 0x7ff));
  }
  return;
}



void FUN_8005e7a8(void)

{
  undefined *puVar1;
  uint uVar2;
  
  if (DAT_80066a68 == 0) {
    FUN_8005ed5c();
  }
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_80066a18;
  *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
       *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) & 0xffcf;
  if ((*(ushort *)(puVar1 + 0x1aa) & 0x30) != 0) {
    uVar2 = 1;
    do {
      if (0xf00 < uVar2) break;
      uVar2 = uVar2 + 1;
    } while ((*(ushort *)(puVar1 + 0x1aa) & 0x30) != 0);
  }
  if (DAT_80066a50 == (code *)0x0) {
    DeliverEvent(0xf0000009,0x20);
  }
  else {
    (*DAT_80066a50)();
  }
  return;
}



undefined4 FUN_8005e864(int param_1,uint param_2,uint param_3)

{
  ushort uVar1;
  uint uVar2;
  ushort uVar3;
  undefined4 uVar4;
  
  if (param_1 == 1) {
    DAT_80066a68 = 0;
    if (*(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1a6) != DAT_80066a30) {
      uVar2 = 1;
      do {
        if (0xf00 < uVar2) {
          DAT_80066a68 = 0;
          return 0xfffffffe;
        }
        uVar2 = uVar2 + 1;
      } while (*(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1a6) != DAT_80066a30);
    }
    *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
         *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) & 0xffcf | 0x20;
  }
  else if (param_1 < 2) {
    if (param_1 == 0) {
      DAT_80066a68 = 1;
      if (*(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1a6) != DAT_80066a30) {
        uVar2 = 1;
        do {
          if (0xf00 < uVar2) {
            DAT_80066a68 = 1;
            return 0xfffffffe;
          }
          uVar2 = uVar2 + 1;
        } while (*(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1a6) != DAT_80066a30);
      }
      *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) =
           *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa) | 0x30;
    }
  }
  else if (param_1 == 2) {
    DAT_80066a30 = (short)(param_2 >> (DAT_80066a40 & 0x1f));
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1a6) = DAT_80066a30;
  }
  else if (param_1 == 3) {
    uVar3 = 0x20;
    if (DAT_80066a68 == 1) {
      uVar3 = 0x30;
    }
    uVar2 = 1;
    uVar1 = *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa);
    while ((uVar1 & 0x30) != uVar3) {
      if (0xf00 < uVar2) {
        return 0xfffffffe;
      }
      uVar2 = uVar2 + 1;
      uVar1 = *(ushort *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + 0x1aa);
    }
    if (DAT_80066a68 == 1) {
      FUN_8005ed34();
    }
    else {
      FUN_8005ed0c();
    }
    DAT_80066a70 = (param_3 >> 6) + (uint)((param_3 & 0x3f) != 0);
    DAT_80066a6c = param_2;
    *(uint *)PTR_DMA_SPU_MADR_80066a1c = param_2;
    *(uint *)PTR_DMA_SPU_BCR_80066a20 = DAT_80066a70 << 0x10 | 0x10;
    uVar4 = 0x1000201;
    if (DAT_80066a68 == 1) {
      uVar4 = 0x1000200;
    }
    *(undefined4 *)PTR_DMA_SPU_CHCR_80066a24 = uVar4;
  }
  return 0;
}



undefined4 FUN_8005eae4(undefined4 param_1,undefined4 param_2)

{
  if (DAT_80066a34 == 0) {
    FUN_8005e864(2,(uint)DAT_80066a30 << (DAT_80066a40 & 0x1f));
    FUN_8005e864(1);
    FUN_8005e864(3,param_1,param_2);
  }
  else {
    FUN_8005e5e8(param_1,param_2);
  }
  return param_2;
}



undefined4 FUN_8005eb68(undefined4 param_1,undefined4 param_2)

{
  FUN_8005e864(2,(uint)DAT_80066a30 << (DAT_80066a40 & 0x1f));
  FUN_8005e864(0);
  FUN_8005e864(3,param_1,param_2);
  return param_2;
}



void FUN_8005ebcc(int param_1,uint param_2,int param_3)

{
  if (param_3 == 0) {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + param_1 * 2) = (short)param_2;
  }
  else {
    *(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + param_1 * 2) =
         (short)(param_2 >> (DAT_80066a40 & 0x1f));
  }
  return;
}



uint FUN_8005ec10(int param_1,uint param_2)

{
  uint uVar1;
  
  if (DAT_80066a3c != 0) {
    if (DAT_80066a44 == 0) {
      trap(0x1c00);
    }
    if (param_2 % DAT_80066a44 != 0) {
      param_2 = param_2 + DAT_80066a44 & ~DAT_80066a48;
    }
  }
  uVar1 = param_2 >> (DAT_80066a40 & 0x1f);
  if (param_1 != -2) {
    if (param_1 == -1) {
      param_2 = uVar1 & 0xffff;
    }
    else {
      *(short *)(PTR_VOICE_00_LEFT_RIGHT_80066a18 + param_1 * 2) = (short)uVar1;
    }
  }
  return param_2;
}



void FUN_8005ecb4(int param_1)

{
  uint uVar1;
  uint uVar2;
  
  *(uint *)PTR_DMA_DPCR_80066a28 = *(uint *)PTR_DMA_DPCR_80066a28 & 0xfff8ffff;
  if (param_1 == 0) {
    uVar1 = *(uint *)PTR_DMA_DPCR_80066a28;
    uVar2 = 0x50000;
  }
  else {
    uVar1 = *(uint *)PTR_DMA_DPCR_80066a28;
    uVar2 = 0x30000;
  }
  *(uint *)PTR_DMA_DPCR_80066a28 = uVar1 | uVar2;
  return;
}



void FUN_8005ed0c(void)

{
  *(uint *)PTR_SPU_DELAY_80066a2c = *(uint *)PTR_SPU_DELAY_80066a2c & 0xf0ffffff | 0x20000000;
  return;
}



void FUN_8005ed34(void)

{
  *(uint *)PTR_SPU_DELAY_80066a2c = *(uint *)PTR_SPU_DELAY_80066a2c & 0xf0ffffff | 0x22000000;
  return;
}



void FUN_8005ed5c(void)

{
  int local_8;
  
  for (local_8 = 0; local_8 < 0x3c; local_8 = local_8 + 1) {
  }
  return;
}



void * memchr(uchar *param_1,uchar param_2,int param_3)

{
  void *pvVar1;
  
  if ((param_1 != (uchar *)0x0) && (0 < param_3)) {
    pvVar1 = (void *)MEMCHR_OBJ_20(param_1,param_2,param_3 + -1);
    return pvVar1;
  }
  return (void *)0x0;
}



undefined4 MEMCHR_OBJ_20(char *param_1,char param_2,int param_3)

{
  char cVar1;
  undefined4 uVar2;
  
  if (-1 < param_3) {
    do {
      cVar1 = *param_1;
      param_1 = param_1 + 1;
      if (cVar1 == param_2) {
        uVar2 = MEMCHR_OBJ_48();
        return uVar2;
      }
      param_3 = param_3 + -1;
    } while (-1 < param_3);
  }
  return 0;
}



void MEMCHR_OBJ_48(void)

{
  return;
}



void * memmove(uchar *param_1,uchar *param_2,int param_3)

{
  bool bVar1;
  uchar uVar2;
  void *pvVar3;
  int iVar4;
  
  if (param_1 < param_2) {
    iVar4 = param_3 + -1;
    if (0 < param_3) {
      do {
        uVar2 = *param_2;
        param_2 = param_2 + 1;
        *param_1 = uVar2;
        bVar1 = 0 < iVar4;
        param_1 = param_1 + 1;
        iVar4 = iVar4 + -1;
      } while (bVar1);
    }
  }
  else {
    iVar4 = param_3 + -1;
    if (0 < param_3) {
      do {
        bVar1 = 0 < iVar4;
        param_1[iVar4] = param_2[iVar4];
        iVar4 = iVar4 + -1;
      } while (bVar1);
      pvVar3 = (void *)MEMMOVE_OBJ_64();
      return pvVar3;
    }
  }
  return param_1;
}



void MEMMOVE_OBJ_64(void)

{
  return;
}



char * strcat(char *param_1,char *param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  char *pcVar4;
  
  if ((param_1 != (char *)0x0) && (param_2 != (char *)0x0)) {
    iVar2 = strlen(param_1);
    iVar3 = strlen(param_2);
    if (param_1 + iVar2 != param_2 + iVar3) {
      cVar1 = *param_1;
      pcVar4 = param_1 + 1;
      while (cVar1 != '\0') {
        cVar1 = *pcVar4;
        pcVar4 = pcVar4 + 1;
      }
      pcVar4 = pcVar4 + -1;
      do {
        cVar1 = *param_2;
        param_2 = param_2 + 1;
        *pcVar4 = cVar1;
        pcVar4 = pcVar4 + 1;
      } while (cVar1 != '\0');
      pcVar4 = (char *)STRCAT_OBJ_8C();
      return pcVar4;
    }
  }
  return (char *)0x0;
}



void STRCAT_OBJ_8C(void)

{
  return;
}



long open(char *param_1,ulong param_2)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



long close(long param_1)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



long lseek(long param_1,long param_2,long param_3)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



long read(long param_1,void *param_2,long param_3)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



long write(long param_1,void *param_2,long param_3)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _SpuInit(void)

{
  undefined2 *puVar1;
  int iVar2;
  int in_a0;
  
  FUN_800548a4();
  FUN_8005e368();
  if (in_a0 == 0) {
    iVar2 = 0x17;
    puVar1 = &DAT_80066ae2;
    do {
      *puVar1 = 0xc000;
      iVar2 = iVar2 + -1;
      puVar1 = puVar1 + -1;
    } while (-1 < iVar2);
  }
  SpuStart();
  DAT_80066a8c = 0;
  DAT_80066a90 = 0;
  DAT_80066a9c = 0;
  DAT_80066aa0 = 0;
  DAT_80066aa2 = 0;
  DAT_80066aa4 = 0;
  DAT_80066aa8 = 0;
  DAT_80066a94 = DAT_80066c68;
  FUN_8005ebcc(0xd1,DAT_80066c68,0);
  DAT_80066c98 = 0;
  DAT_80066c9c = 0;
  DAT_80066ca0 = 0;
  DAT_80066a88 = 0;
  DAT_80066a34 = 0;
  DAT_80066a84 = 0;
  DAT_80066ab0 = 0;
  DAT_80066aac = 0;
  DAT_80066ae4 = 0;
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void SpuStart(void)

{
  if (DAT_80066ae8 == 0) {
    DAT_80066ae8 = 1;
    EnterCriticalSection();
    FUN_800600fc(FUN_8005e7a8);
    DAT_80066a80 = OpenEvent(0xf0000009,0x20,0x2000,(func *)0x0);
    EnableEvent(DAT_80066a80);
    ExitCriticalSection();
  }
  return;
}



long TestEvent(long param_1)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



uint FUN_8005f0f4(int param_1,int param_2,int param_3,int param_4)

{
  short sVar1;
  int iVar2;
  uint uVar3;
  short sVar4;
  
  iVar2 = (int)(((param_3 + ((param_4 + param_2 & 0xffffU) >> 7)) - param_1) * 0x10000) >> 0x10;
  sVar1 = (short)(iVar2 / 0xc);
  sVar4 = sVar1 + -2;
  iVar2 = iVar2 % 0xc;
  if (iVar2 * 0x10000 < 0) {
    iVar2 = iVar2 + 0xc;
    sVar4 = sVar1 + -3;
  }
  if (sVar4 < 0) {
    uVar3 = -(int)sVar4;
    uVar3 = (uint)(((int)((uint)*(ushort *)(&DAT_80066af8 + ((iVar2 << 0x10) >> 0xf)) *
                         (uint)*(ushort *)((int)&PTR_DAT_80066b10 + (param_4 + param_2 & 0x7fU) * 2)
                         ) >> 0x10) + (1 << (uVar3 - 1 & 0x1f))) >> (uVar3 & 0x1f);
  }
  else {
    uVar3 = 0x3fff;
  }
  return uVar3 & 0xffff;
}



void prnt(undefined4 param_1,byte *param_2,int **param_3)

{
  byte bVar1;
  uchar uVar2;
  bool bVar3;
  bool bVar4;
  bool bVar5;
  bool bVar6;
  void *pvVar7;
  int *piVar8;
  uint uVar9;
  int *piVar10;
  int **ppiVar11;
  uchar **ppuVar12;
  char *pcVar13;
  uint uVar14;
  int *piVar15;
  undefined *puVar16;
  byte *pbVar17;
  int iVar18;
  undefined auStack_78 [16];
  undefined local_68;
  undefined local_42 [2];
  uchar *local_40;
  int *local_3c;
  int local_38;
  int *local_34;
  char *local_30;
  
  if (param_2 == (byte *)0x0) {
    PRNT_OBJ_664();
    return;
  }
  local_30 = "0123456789abcdef";
  local_40 = (uchar *)0x0;
  do {
    uVar9 = (uint)*param_2;
    if (uVar9 == 0) {
PRNT_OBJ_630:
      FUN_80060090();
      PRNT_OBJ_664();
      return;
    }
    uVar14 = 0;
    bVar3 = false;
    bVar6 = false;
    bVar5 = false;
    bVar4 = false;
    if (uVar9 == 0x25) {
      piVar15 = (int *)0xffffffff;
      iVar18 = 0;
      local_3c = (int *)0x0;
      local_38 = 0;
      local_34 = (int *)0x0;
      uVar9 = 0x25;
      pbVar17 = param_2;
code_r0x8005f240:
      param_2 = pbVar17 + 1;
      ppiVar11 = param_3;
      switch(*param_2) {
      case 0:
        goto PRNT_OBJ_630;
      default:
        uVar9 = (uint)(char)*param_2;
        local_40 = local_40 + 1;
        break;
      case 0x20:
        pbVar17 = param_2;
        if (iVar18 == 0) {
          PRNT_OBJ_7C();
          return;
        }
        goto code_r0x8005f240;
      case 0x23:
        bVar6 = true;
        pbVar17 = param_2;
        goto code_r0x8005f240;
      case 0x2a:
        ppiVar11 = param_3 + 1;
        local_34 = *param_3;
        param_3 = ppiVar11;
        pbVar17 = param_2;
        if (-1 < (int)local_34) goto code_r0x8005f240;
        local_34 = (int *)-(int)local_34;
      case 0x2d:
        uVar14 = uVar14 | 0x10;
        param_3 = ppiVar11;
        pbVar17 = param_2;
        goto code_r0x8005f240;
      case 0x2b:
        iVar18 = 0x2b;
        pbVar17 = param_2;
        goto code_r0x8005f240;
      case 0x2e:
        pbVar17 = pbVar17 + 2;
        bVar1 = *pbVar17;
        if (bVar1 == 0x2a) {
          PRNT_OBJ_168();
          return;
        }
        piVar15 = (int *)0x0;
        while ((bVar1 < 0x80 && (uVar9 = (uint)*pbVar17, ((&DAT_80066ca9)[uVar9] & 4) != 0))) {
          pbVar17 = pbVar17 + 1;
          bVar1 = *pbVar17;
          piVar15 = (int *)((int)piVar15 * 10 + -0x30 + uVar9);
        }
        pbVar17 = pbVar17 + -1;
        if ((int)piVar15 < 0) {
          PRNT_OBJ_7C();
          return;
        }
        goto code_r0x8005f240;
      case 0x30:
        uVar14 = uVar14 | 0x20;
        pbVar17 = param_2;
        goto code_r0x8005f240;
      case 0x31:
      case 0x32:
      case 0x33:
      case 0x34:
      case 0x35:
      case 0x36:
      case 0x37:
      case 0x38:
      case 0x39:
        local_34 = (int *)0x0;
        goto PRNT_OBJ_184;
      case 0x44:
        bVar4 = true;
      case 100:
      case 0x69:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_244();
          return;
        }
        piVar8 = *param_3;
        uVar9 = 10;
        if ((int)piVar8 < 0) {
          PRNT_OBJ_3CC();
          return;
        }
        goto code_r0x8005f590;
      case 0x4c:
        pbVar17 = param_2;
        goto code_r0x8005f240;
      case 0x4f:
        bVar4 = true;
      case 0x6f:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_3CC(uVar9,8);
          return;
        }
        PRNT_OBJ_3C8(uVar9,8);
        return;
      case 0x55:
        bVar4 = true;
      case 0x75:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_3CC(uVar9,10);
          return;
        }
        PRNT_OBJ_3C8(uVar9,10);
        return;
      case 0x58:
        local_30 = "0123456789ABCDEF";
      case 0x78:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_3B4(uVar9,0x10);
          return;
        }
        piVar8 = *param_3;
        uVar9 = 0x10;
        iVar18 = 0;
        if ((bVar6) && (piVar8 != (int *)0x0)) {
          bVar3 = true;
          iVar18 = 0;
        }
code_r0x8005f590:
        local_3c = piVar15;
        if (-1 < (int)piVar15) {
          uVar14 = uVar14 & 0xffffffdf;
        }
        pcVar13 = (char *)&local_40;
        if ((piVar8 != (int *)0x0) || (puVar16 = auStack_78 + -(int)pcVar13, piVar15 != (int *)0x0))
        goto PRNT_OBJ_3F4;
        goto PRNT_OBJ_468;
      case 99:
        local_68 = *(undefined *)param_3;
        PRNT_OBJ_46C();
        return;
      case 0x68:
        bVar5 = true;
        pbVar17 = param_2;
        goto code_r0x8005f240;
      case 0x6c:
        goto PRNT_OBJ_1EC;
      case 0x6e:
        if ((!bVar4) && (bVar5)) {
          *(undefined2 *)*param_3 = local_40._0_2_;
          PRNT_OBJ_65C();
          return;
        }
        **param_3 = (int)local_40;
        PRNT_OBJ_65C();
        return;
      case 0x70:
        PRNT_OBJ_3C8(uVar9,0x10);
        return;
      case 0x73:
        pcVar13 = (char *)*param_3;
        if ((uchar **)pcVar13 == (uchar **)0x0) {
          pcVar13 = "(null)";
        }
        if ((int)piVar15 < 0) {
          puVar16 = (undefined *)strlen(pcVar13);
          iVar18 = 0;
        }
        else {
          pvVar7 = memchr((uchar *)pcVar13,'\0',(int)piVar15);
          puVar16 = (undefined *)((int)pvVar7 - (int)pcVar13);
          if ((pvVar7 == (void *)0x0) || (iVar18 = 0, (int)piVar15 < (int)puVar16)) {
            PRNT_OBJ_334();
            return;
          }
        }
        goto code_r0x8005f630;
      }
    }
    FUN_8005ff94(uVar9);
    param_2 = param_2 + 1;
  } while( true );
PRNT_OBJ_1EC:
  bVar4 = true;
  pbVar17 = param_2;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*param_2] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *param_2;
    param_2 = param_2 + 1;
    local_34 = (int *)((int)local_34 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *param_2) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    ppuVar12 = (uchar **)pcVar13;
    piVar15 = (int *)((uint)piVar8 / uVar9);
    if (uVar9 == 0) {
      trap(0x1c00);
    }
    uVar2 = local_30[(uint)piVar8 % uVar9];
    pcVar13 = (char *)((int)ppuVar12 + -1);
    *pcVar13 = uVar2;
    piVar8 = piVar15;
  } while (piVar15 != (int *)0x0);
  local_30 = "0123456789abcdef";
  if (bVar6) {
    puVar16 = auStack_78 + -(int)pcVar13;
    if ((uVar9 != 8) || (puVar16 = auStack_78 + -(int)pcVar13, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar13 = (char *)((int)ppuVar12 + -2);
    *pcVar13 = '0';
  }
  puVar16 = auStack_78 + -(int)pcVar13;
PRNT_OBJ_468:
  puVar16 = puVar16 + 0x38;
code_r0x8005f630:
  piVar15 = (int *)(puVar16 + local_38);
  if (iVar18 != 0) {
    piVar15 = (int *)((int)piVar15 + 1);
  }
  if (bVar3) {
    piVar15 = (int *)((int)piVar15 + 2);
  }
  piVar8 = local_3c;
  if ((int)local_3c < (int)piVar15) {
    piVar8 = piVar15;
  }
  if (((uVar14 == 0) && (local_34 != (int *)0x0)) && (piVar10 = piVar8, (int)piVar8 < (int)local_34)
     ) {
    do {
      FUN_8005ff94(0x20);
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)local_34);
  }
  if (iVar18 != 0) {
    FUN_8005ff94();
  }
  if (bVar3) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*param_2);
  }
  if ((uVar14 == 0x20) && (piVar10 = piVar8, (int)piVar8 < (int)local_34)) {
    do {
      FUN_8005ff94(0x30);
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)local_34);
  }
  if ((int)piVar15 < (int)local_3c) {
    do {
      FUN_8005ff94(0x30);
      piVar15 = (int *)((int)piVar15 + 1);
    } while ((int)piVar15 < (int)local_3c);
  }
  if ((-1 < (int)(puVar16 + -1)) && (FUN_8005ff94((int)*pcVar13), -1 < (int)(puVar16 + -2))) {
    PRNT_OBJ_58C();
    return;
  }
  while (local_38 = local_38 + -1, -1 < local_38) {
    FUN_8005ff94(0x30);
  }
  if (((uVar14 & 0x10) != 0) && (piVar15 = piVar8, (int)piVar8 < (int)local_34)) {
    do {
      FUN_8005ff94(0x20);
      piVar15 = (int *)((int)piVar15 + 1);
    } while ((int)piVar15 < (int)local_34);
  }
  piVar15 = local_34;
  if ((int)local_34 < (int)piVar8) {
    piVar15 = piVar8;
  }
  local_40 = local_40 + (int)piVar15;
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_50(void)

{
  byte bVar1;
  uchar uVar2;
  bool bVar3;
  bool bVar4;
  bool bVar5;
  bool bVar6;
  void *pvVar7;
  int *piVar8;
  uint uVar9;
  int **unaff_s1;
  int **ppiVar10;
  char *pcVar11;
  uint uVar12;
  int *piVar13;
  int iVar14;
  byte *unaff_s7;
  byte *pbVar15;
  int iVar16;
  int *piVar17;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *param_11;
  int param_12;
  int *param_13;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
  do {
    uVar9 = (uint)*unaff_s7;
    if (uVar9 == 0) {
PRNT_OBJ_630:
      FUN_80060090();
      PRNT_OBJ_664();
      return;
    }
    uVar12 = 0;
    bVar3 = false;
    bVar6 = false;
    bVar5 = false;
    bVar4 = false;
    if (uVar9 == 0x25) {
      piVar13 = (int *)0xffffffff;
      iVar16 = 0;
      param_11 = (int *)0x0;
      param_12 = 0;
      param_13 = (int *)0x0;
      uVar9 = 0x25;
      pbVar15 = unaff_s7;
code_r0x8005f240:
      unaff_s7 = pbVar15 + 1;
      ppiVar10 = unaff_s1;
      switch(*unaff_s7) {
      case 0:
        goto PRNT_OBJ_630;
      default:
        uVar9 = (uint)(char)*unaff_s7;
        _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
        break;
      case 0x20:
        pbVar15 = unaff_s7;
        if (iVar16 == 0) {
          PRNT_OBJ_7C();
          return;
        }
        goto code_r0x8005f240;
      case 0x23:
        bVar6 = true;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x2a:
        ppiVar10 = unaff_s1 + 1;
        param_13 = *unaff_s1;
        unaff_s1 = ppiVar10;
        pbVar15 = unaff_s7;
        if (-1 < (int)param_13) goto code_r0x8005f240;
        param_13 = (int *)-(int)param_13;
      case 0x2d:
        uVar12 = uVar12 | 0x10;
        unaff_s1 = ppiVar10;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x2b:
        iVar16 = 0x2b;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x2e:
        pbVar15 = pbVar15 + 2;
        bVar1 = *pbVar15;
        if (bVar1 == 0x2a) {
          PRNT_OBJ_168();
          return;
        }
        piVar13 = (int *)0x0;
        while ((bVar1 < 0x80 && (uVar9 = (uint)*pbVar15, ((&DAT_80066ca9)[uVar9] & 4) != 0))) {
          pbVar15 = pbVar15 + 1;
          bVar1 = *pbVar15;
          piVar13 = (int *)((int)piVar13 * 10 + -0x30 + uVar9);
        }
        pbVar15 = pbVar15 + -1;
        if ((int)piVar13 < 0) {
          PRNT_OBJ_7C();
          return;
        }
        goto code_r0x8005f240;
      case 0x30:
        uVar12 = uVar12 | 0x20;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x31:
      case 0x32:
      case 0x33:
      case 0x34:
      case 0x35:
      case 0x36:
      case 0x37:
      case 0x38:
      case 0x39:
        param_13 = (int *)0x0;
        goto PRNT_OBJ_184;
      case 0x44:
        bVar4 = true;
      case 100:
      case 0x69:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_244();
          return;
        }
        piVar8 = *unaff_s1;
        uVar9 = 10;
        if ((int)piVar8 < 0) {
          PRNT_OBJ_3CC();
          return;
        }
        goto code_r0x8005f590;
      case 0x4c:
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x4f:
        bVar4 = true;
      case 0x6f:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_3CC(uVar9,8);
          return;
        }
        PRNT_OBJ_3C8(uVar9,8);
        return;
      case 0x55:
        bVar4 = true;
      case 0x75:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_3CC(uVar9,10);
          return;
        }
        PRNT_OBJ_3C8(uVar9,10);
        return;
      case 0x58:
        in_stack_00000048 = "0123456789ABCDEF";
      case 0x78:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_3B4(uVar9,0x10);
          return;
        }
        piVar8 = *unaff_s1;
        uVar9 = 0x10;
        iVar16 = 0;
        if ((bVar6) && (piVar8 != (int *)0x0)) {
          bVar3 = true;
          iVar16 = 0;
        }
code_r0x8005f590:
        param_11 = piVar13;
        if (-1 < (int)piVar13) {
          uVar12 = uVar12 & 0xffffffdf;
        }
        pcVar11 = (char *)&stack0x00000038;
        if ((piVar8 != (int *)0x0) ||
           (iVar14 = (int)auStackX_0 - (int)pcVar11, piVar13 != (int *)0x0)) goto PRNT_OBJ_3F4;
        goto PRNT_OBJ_468;
      case 99:
        PRNT_OBJ_46C();
        return;
      case 0x68:
        bVar5 = true;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x6c:
        goto PRNT_OBJ_1EC;
      case 0x6e:
        if ((!bVar4) && (bVar5)) {
          *(undefined2 *)*unaff_s1 = uStack00000038;
          PRNT_OBJ_65C();
          return;
        }
        **unaff_s1 = (int)_uStack00000038;
        PRNT_OBJ_65C();
        return;
      case 0x70:
        PRNT_OBJ_3C8(uVar9,0x10);
        return;
      case 0x73:
        pcVar11 = (char *)*unaff_s1;
        if ((int *)pcVar11 == (int *)0x0) {
          pcVar11 = "(null)";
        }
        if ((int)piVar13 < 0) {
          iVar14 = strlen(pcVar11);
          iVar16 = 0;
        }
        else {
          pvVar7 = memchr((uchar *)pcVar11,'\0',(int)piVar13);
          iVar14 = (int)pvVar7 - (int)pcVar11;
          if ((pvVar7 == (void *)0x0) || (iVar16 = 0, (int)piVar13 < iVar14)) {
            PRNT_OBJ_334();
            return;
          }
        }
        goto code_r0x8005f630;
      }
    }
    FUN_8005ff94(uVar9);
    unaff_s7 = unaff_s7 + 1;
  } while( true );
PRNT_OBJ_1EC:
  bVar4 = true;
  pbVar15 = unaff_s7;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    param_13 = (int *)((int)param_13 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar13 = (int *)pcVar11;
    piVar17 = (int *)((uint)piVar8 / uVar9);
    if (uVar9 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar8 % uVar9];
    pcVar11 = (char *)((int)piVar13 + -1);
    *pcVar11 = uVar2;
    piVar8 = piVar17;
  } while (piVar17 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if (bVar6) {
    iVar14 = (int)auStackX_0 - (int)pcVar11;
    if ((uVar9 != 8) || (iVar14 = (int)auStackX_0 - (int)pcVar11, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar11 = (char *)((int)piVar13 + -2);
    *pcVar11 = '0';
  }
  iVar14 = (int)auStackX_0 - (int)pcVar11;
PRNT_OBJ_468:
  iVar14 = iVar14 + 0x38;
code_r0x8005f630:
  piVar13 = (int *)(iVar14 + param_12);
  if (iVar16 != 0) {
    piVar13 = (int *)((int)piVar13 + 1);
  }
  if (bVar3) {
    piVar13 = (int *)((int)piVar13 + 2);
  }
  piVar8 = param_11;
  if ((int)param_11 < (int)piVar13) {
    piVar8 = piVar13;
  }
  if (((uVar12 == 0) && (param_13 != (int *)0x0)) && (piVar17 = piVar8, (int)piVar8 < (int)param_13)
     ) {
    do {
      FUN_8005ff94(0x20);
      piVar17 = (int *)((int)piVar17 + 1);
    } while ((int)piVar17 < (int)param_13);
  }
  if (iVar16 != 0) {
    FUN_8005ff94();
  }
  if (bVar3) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if ((uVar12 == 0x20) && (piVar17 = piVar8, (int)piVar8 < (int)param_13)) {
    do {
      FUN_8005ff94(0x30);
      piVar17 = (int *)((int)piVar17 + 1);
    } while ((int)piVar17 < (int)param_13);
  }
  if ((int)piVar13 < (int)param_11) {
    do {
      FUN_8005ff94(0x30);
      piVar13 = (int *)((int)piVar13 + 1);
    } while ((int)piVar13 < (int)param_11);
  }
  if ((-1 < iVar14 + -1) && (FUN_8005ff94((int)*pcVar11), -1 < iVar14 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (param_12 = param_12 + -1, -1 < param_12) {
    FUN_8005ff94(0x30);
  }
  if (((uVar12 & 0x10) != 0) && (piVar13 = piVar8, (int)piVar8 < (int)param_13)) {
    do {
      FUN_8005ff94(0x20);
      piVar13 = (int *)((int)piVar13 + 1);
    } while ((int)piVar13 < (int)param_13);
  }
  piVar13 = param_13;
  if ((int)param_13 < (int)piVar8) {
    piVar13 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar13);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_7C(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int **unaff_s1;
  int **ppiVar6;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *unaff_s7;
  byte *pbVar10;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f240:
  do {
    pbVar10 = unaff_s7 + 1;
    ppiVar6 = unaff_s1;
    switch(*pbVar10) {
    case 0:
PRNT_OBJ_630:
      FUN_80060090();
      PRNT_OBJ_664();
      return;
    default:
      uVar5 = (uint)(char)*pbVar10;
      _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
      do {
        FUN_8005ff94(uVar5);
        pbVar10 = pbVar10 + 1;
        uVar5 = (uint)*pbVar10;
        if (uVar5 == 0) goto PRNT_OBJ_630;
        unaff_s3 = 0;
      } while (uVar5 != 0x25);
      unaff_s4 = (int *)0xffffffff;
      unaff_s8 = 0;
      in_stack_0000003c = (int *)0x0;
      in_stack_00000040 = 0;
      in_stack_00000044 = (int *)0x0;
      param_1 = 0x25;
      unaff_s7 = pbVar10;
      break;
    case 0x20:
      unaff_s7 = pbVar10;
      if (unaff_s8 == 0) {
        PRNT_OBJ_7C();
        return;
      }
      break;
    case 0x23:
      unaff_s3 = unaff_s3 | 8;
      unaff_s7 = pbVar10;
      break;
    case 0x2a:
      ppiVar6 = unaff_s1 + 1;
      in_stack_00000044 = *unaff_s1;
      unaff_s1 = ppiVar6;
      unaff_s7 = pbVar10;
      if (-1 < (int)in_stack_00000044) break;
      in_stack_00000044 = (int *)-(int)in_stack_00000044;
    case 0x2d:
      unaff_s3 = unaff_s3 | 0x10;
      unaff_s1 = ppiVar6;
      unaff_s7 = pbVar10;
      break;
    case 0x2b:
      unaff_s8 = 0x2b;
      unaff_s7 = pbVar10;
      break;
    case 0x2e:
      goto PRNT_OBJ_F0;
    case 0x30:
      unaff_s3 = unaff_s3 | 0x20;
      unaff_s7 = pbVar10;
      break;
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
      in_stack_00000044 = (int *)0x0;
      goto PRNT_OBJ_184;
    case 0x44:
      unaff_s3 = unaff_s3 | 1;
    case 100:
    case 0x69:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_244();
        return;
      }
      piVar4 = *unaff_s1;
      uVar5 = 10;
      if ((int)piVar4 < 0) {
        PRNT_OBJ_3CC();
        return;
      }
      goto code_r0x8005f590;
    case 0x4c:
      unaff_s7 = pbVar10;
      break;
    case 0x4f:
      unaff_s3 = unaff_s3 | 1;
    case 0x6f:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3CC(param_1,8);
        return;
      }
      PRNT_OBJ_3C8(param_1,8);
      return;
    case 0x55:
      unaff_s3 = unaff_s3 | 1;
    case 0x75:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3CC(param_1,10);
        return;
      }
      PRNT_OBJ_3C8(param_1,10);
      return;
    case 0x58:
      in_stack_00000048 = "0123456789ABCDEF";
    case 0x78:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3B4(param_1,0x10);
        return;
      }
      piVar4 = *unaff_s1;
      uVar5 = 0x10;
      unaff_s8 = 0;
      if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
        unaff_s3 = unaff_s3 | 0x40;
        unaff_s8 = 0;
      }
code_r0x8005f590:
      in_stack_0000003c = unaff_s4;
      if (-1 < (int)unaff_s4) {
        unaff_s3 = unaff_s3 & 0xffffffdf;
      }
      pcVar7 = (char *)&stack0x00000038;
      if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
      goto PRNT_OBJ_3F4;
      goto PRNT_OBJ_468;
    case 99:
      PRNT_OBJ_46C();
      return;
    case 0x68:
      unaff_s3 = unaff_s3 | 4;
      unaff_s7 = pbVar10;
      break;
    case 0x6c:
      unaff_s3 = unaff_s3 | 1;
      unaff_s7 = pbVar10;
      break;
    case 0x6e:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        *(undefined2 *)*unaff_s1 = uStack00000038;
        PRNT_OBJ_65C();
        return;
      }
      **unaff_s1 = (int)_uStack00000038;
      PRNT_OBJ_65C();
      return;
    case 0x70:
      PRNT_OBJ_3C8(param_1,0x10);
      return;
    case 0x73:
      pcVar7 = (char *)*unaff_s1;
      if ((int *)pcVar7 == (int *)0x0) {
        pcVar7 = "(null)";
      }
      if ((int)unaff_s4 < 0) {
        iVar9 = strlen(pcVar7);
        unaff_s8 = 0;
      }
      else {
        pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
        iVar9 = (int)pvVar3 - (int)pcVar7;
        if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar9)) {
          PRNT_OBJ_334();
          return;
        }
      }
      goto code_r0x8005f630;
    }
  } while( true );
PRNT_OBJ_F0:
  pbVar10 = unaff_s7 + 2;
  bVar1 = *pbVar10;
  if (bVar1 == 0x2a) {
    PRNT_OBJ_168();
    return;
  }
  unaff_s4 = (int *)0x0;
  while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
    pbVar10 = pbVar10 + 1;
    bVar1 = *pbVar10;
    unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
  }
  unaff_s7 = pbVar10 + -1;
  if ((int)unaff_s4 < 0) {
    PRNT_OBJ_7C();
    return;
  }
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*pbVar10] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *pbVar10;
    pbVar10 = pbVar10 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *pbVar10) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*pbVar10);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_AC(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int **unaff_s1;
  int **ppiVar6;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *unaff_s7;
  byte *pbVar10;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f270:
  pbVar10 = unaff_s7;
  if (unaff_s8 == 0) {
    PRNT_OBJ_7C();
    return;
  }
code_r0x8005f240:
  unaff_s7 = pbVar10 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_630:
    FUN_80060090();
    PRNT_OBJ_664();
    return;
  default:
    uVar5 = (uint)(char)*unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      FUN_8005ff94(uVar5);
      unaff_s7 = unaff_s7 + 1;
      uVar5 = (uint)*unaff_s7;
      if (uVar5 == 0) goto PRNT_OBJ_630;
      unaff_s3 = 0;
    } while (uVar5 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_0000003c = (int *)0x0;
    in_stack_00000040 = 0;
    in_stack_00000044 = (int *)0x0;
    param_1 = 0x25;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x20:
    goto code_r0x8005f270;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000044 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
    in_stack_00000044 = (int *)-(int)in_stack_00000044;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2e:
    pbVar10 = pbVar10 + 2;
    bVar1 = *pbVar10;
    if (bVar1 == 0x2a) {
      PRNT_OBJ_168();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
      pbVar10 = pbVar10 + 1;
      bVar1 = *pbVar10;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar10 = pbVar10 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000044 = (int *)0x0;
    goto PRNT_OBJ_184;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_244();
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar4 < 0) {
      PRNT_OBJ_3CC();
      return;
    }
    goto code_r0x8005f590;
  case 0x4c:
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,8);
      return;
    }
    PRNT_OBJ_3C8(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,10);
      return;
    }
    PRNT_OBJ_3C8(param_1,10);
    return;
  case 0x58:
    in_stack_00000048 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3B4(param_1,0x10);
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 0x10;
    unaff_s8 = 0;
    if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
      unaff_s3 = unaff_s3 | 0x40;
      unaff_s8 = 0;
    }
code_r0x8005f590:
    in_stack_0000003c = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    pcVar7 = (char *)&stack0x00000038;
    if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3F4;
    goto PRNT_OBJ_468;
  case 99:
    PRNT_OBJ_46C();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_65C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_65C();
    return;
  case 0x70:
    PRNT_OBJ_3C8(param_1,0x10);
    return;
  case 0x73:
    pcVar7 = (char *)*unaff_s1;
    if ((int *)pcVar7 == (int *)0x0) {
      pcVar7 = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar9 = strlen(pcVar7);
      unaff_s8 = 0;
    }
    else {
      pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
      iVar9 = (int)pvVar3 - (int)pcVar7;
      if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar9)) {
        PRNT_OBJ_334();
        return;
      }
    }
    goto code_r0x8005f630;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar10 = unaff_s7;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_BC(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int **unaff_s1;
  int **ppiVar6;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *unaff_s7;
  byte *pbVar10;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f280:
  unaff_s3 = unaff_s3 | 8;
  pbVar10 = unaff_s7;
code_r0x8005f240:
  unaff_s7 = pbVar10 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_630:
    FUN_80060090();
    PRNT_OBJ_664();
    return;
  default:
    uVar5 = (uint)(char)*unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      FUN_8005ff94(uVar5);
      unaff_s7 = unaff_s7 + 1;
      uVar5 = (uint)*unaff_s7;
      if (uVar5 == 0) goto PRNT_OBJ_630;
      unaff_s3 = 0;
    } while (uVar5 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_0000003c = (int *)0x0;
    in_stack_00000040 = 0;
    in_stack_00000044 = (int *)0x0;
    param_1 = 0x25;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x20:
    pbVar10 = unaff_s7;
    if (unaff_s8 == 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x23:
    goto code_r0x8005f280;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000044 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
    in_stack_00000044 = (int *)-(int)in_stack_00000044;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2e:
    pbVar10 = pbVar10 + 2;
    bVar1 = *pbVar10;
    if (bVar1 == 0x2a) {
      PRNT_OBJ_168();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
      pbVar10 = pbVar10 + 1;
      bVar1 = *pbVar10;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar10 = pbVar10 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000044 = (int *)0x0;
    goto PRNT_OBJ_184;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_244();
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar4 < 0) {
      PRNT_OBJ_3CC();
      return;
    }
    goto code_r0x8005f590;
  case 0x4c:
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,8);
      return;
    }
    PRNT_OBJ_3C8(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,10);
      return;
    }
    PRNT_OBJ_3C8(param_1,10);
    return;
  case 0x58:
    in_stack_00000048 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3B4(param_1,0x10);
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 0x10;
    unaff_s8 = 0;
    if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
      unaff_s3 = unaff_s3 | 0x40;
      unaff_s8 = 0;
    }
code_r0x8005f590:
    in_stack_0000003c = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    pcVar7 = (char *)&stack0x00000038;
    if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3F4;
    goto PRNT_OBJ_468;
  case 99:
    PRNT_OBJ_46C();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_65C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_65C();
    return;
  case 0x70:
    PRNT_OBJ_3C8(param_1,0x10);
    return;
  case 0x73:
    pcVar7 = (char *)*unaff_s1;
    if ((int *)pcVar7 == (int *)0x0) {
      pcVar7 = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar9 = strlen(pcVar7);
      unaff_s8 = 0;
    }
    else {
      pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
      iVar9 = (int)pvVar3 - (int)pcVar7;
      if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar9)) {
        PRNT_OBJ_334();
        return;
      }
    }
    goto code_r0x8005f630;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar10 = unaff_s7;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_C4(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int *unaff_s1;
  int *piVar7;
  undefined4 *puVar8;
  char *pcVar9;
  uint unaff_s3;
  int unaff_s4;
  int iVar10;
  int iVar11;
  int iVar12;
  byte *unaff_s7;
  byte *pbVar13;
  int unaff_s8;
  uint uVar14;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int in_stack_0000003c;
  int in_stack_00000040;
  int param_11;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f288:
  piVar7 = unaff_s1;
  param_11 = *piVar7;
  pbVar13 = unaff_s7;
  if (-1 < param_11) goto code_r0x8005f240;
  param_11 = -param_11;
PRNT_OBJ_E0:
  unaff_s3 = unaff_s3 | 0x10;
  pbVar13 = unaff_s7;
code_r0x8005f240:
  unaff_s7 = pbVar13 + 1;
  unaff_s1 = piVar7 + 1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_630:
    FUN_80060090();
    PRNT_OBJ_664();
    return;
  default:
    uVar4 = (uint)(char)*unaff_s7;
    _uStack00000038 = _uStack00000038 + 1;
    do {
      FUN_8005ff94(uVar4);
      unaff_s7 = unaff_s7 + 1;
      uVar4 = (uint)*unaff_s7;
      if (uVar4 == 0) goto PRNT_OBJ_630;
      unaff_s3 = 0;
    } while (uVar4 != 0x25);
    unaff_s4 = -1;
    unaff_s8 = 0;
    in_stack_0000003c = 0;
    in_stack_00000040 = 0;
    param_11 = 0;
    param_1 = 0x25;
    pbVar13 = unaff_s7;
    goto code_r0x8005f240;
  case 0x20:
    pbVar13 = unaff_s7;
    if (unaff_s8 == 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar13 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2a:
    goto code_r0x8005f288;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar13 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2d:
    goto PRNT_OBJ_E0;
  case 0x2e:
    pbVar13 = pbVar13 + 2;
    bVar1 = *pbVar13;
    if (bVar1 == 0x2a) {
      PRNT_OBJ_168();
      return;
    }
    unaff_s4 = 0;
    while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar13, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
      pbVar13 = pbVar13 + 1;
      bVar1 = *pbVar13;
      unaff_s4 = unaff_s4 * 10 + -0x30 + param_1;
    }
    pbVar13 = pbVar13 + -1;
    if (unaff_s4 < 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar13 = unaff_s7;
    goto code_r0x8005f240;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    param_11 = 0;
    goto PRNT_OBJ_184;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_244();
      return;
    }
    uVar4 = piVar7[1];
    uVar5 = 10;
    if ((int)uVar4 < 0) {
      PRNT_OBJ_3CC();
      return;
    }
    break;
  case 0x4c:
    pbVar13 = unaff_s7;
    goto code_r0x8005f240;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,8);
      return;
    }
    PRNT_OBJ_3C8(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,10);
      return;
    }
    PRNT_OBJ_3C8(param_1,10);
    return;
  case 0x58:
    in_stack_00000048 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3B4(param_1,0x10);
      return;
    }
    uVar4 = piVar7[1];
    uVar5 = 0x10;
    unaff_s8 = 0;
    if (((unaff_s3 & 8) != 0) && (uVar4 != 0)) {
      unaff_s3 = unaff_s3 | 0x40;
      unaff_s8 = 0;
    }
    break;
  case 99:
    PRNT_OBJ_46C();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    pbVar13 = unaff_s7;
    goto code_r0x8005f240;
  case 0x6c:
    goto PRNT_OBJ_1EC;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)piVar7[1] = uStack00000038;
      PRNT_OBJ_65C();
      return;
    }
    *(int *)piVar7[1] = _uStack00000038;
    PRNT_OBJ_65C();
    return;
  case 0x70:
    PRNT_OBJ_3C8(param_1,0x10);
    return;
  case 0x73:
    pcVar9 = (char *)piVar7[1];
    if ((undefined4 *)pcVar9 == (undefined4 *)0x0) {
      pcVar9 = "(null)";
    }
    if (unaff_s4 < 0) {
      iVar12 = strlen(pcVar9);
      unaff_s8 = 0;
    }
    else {
      pvVar3 = memchr((uchar *)pcVar9,'\0',unaff_s4);
      iVar12 = (int)pvVar3 - (int)pcVar9;
      if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, unaff_s4 < iVar12)) {
        PRNT_OBJ_334();
        return;
      }
    }
    goto code_r0x8005f630;
  }
  in_stack_0000003c = unaff_s4;
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  pcVar9 = (char *)&stack0x00000038;
  if ((uVar4 != 0) || (iVar12 = (int)auStackX_0 - (int)pcVar9, unaff_s4 != 0)) goto PRNT_OBJ_3F4;
  goto PRNT_OBJ_468;
PRNT_OBJ_1EC:
  unaff_s3 = unaff_s3 | 1;
  pbVar13 = unaff_s7;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    param_11 = param_11 * 10 + -0x30 + (uint)bVar1;
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    puVar8 = (undefined4 *)pcVar9;
    uVar14 = uVar4 / uVar5;
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[uVar4 % uVar5];
    pcVar9 = (char *)((int)puVar8 + -1);
    *pcVar9 = uVar2;
    uVar4 = uVar14;
  } while (uVar14 != 0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar12 = (int)auStackX_0 - (int)pcVar9;
    if ((uVar5 != 8) || (iVar12 = (int)auStackX_0 - (int)pcVar9, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar9 = (char *)((int)puVar8 + -2);
    *pcVar9 = '0';
  }
  iVar12 = (int)auStackX_0 - (int)pcVar9;
PRNT_OBJ_468:
  iVar12 = iVar12 + 0x38;
code_r0x8005f630:
  iVar10 = iVar12 + in_stack_00000040;
  if (unaff_s8 != 0) {
    iVar10 = iVar10 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar10 = iVar10 + 2;
  }
  iVar11 = in_stack_0000003c;
  if (in_stack_0000003c < iVar10) {
    iVar11 = iVar10;
  }
  if ((((unaff_s3 & 0x30) == 0) && (param_11 != 0)) && (iVar6 = iVar11, iVar11 < param_11)) {
    do {
      FUN_8005ff94(0x20);
      iVar6 = iVar6 + 1;
    } while (iVar6 < param_11);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (iVar6 = iVar11, iVar11 < param_11)) {
    do {
      FUN_8005ff94(0x30);
      iVar6 = iVar6 + 1;
    } while (iVar6 < param_11);
  }
  if (iVar10 < in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      iVar10 = iVar10 + 1;
    } while (iVar10 < in_stack_0000003c);
  }
  if ((-1 < iVar12 + -1) && (FUN_8005ff94((int)*pcVar9), -1 < iVar12 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (iVar12 = iVar11, iVar11 < param_11)) {
    do {
      FUN_8005ff94(0x20);
      iVar12 = iVar12 + 1;
    } while (iVar12 < param_11);
  }
  iVar12 = param_11;
  if (param_11 < iVar11) {
    iVar12 = iVar11;
  }
  _uStack00000038 = _uStack00000038 + iVar12;
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_E0(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *unaff_s7;
  byte *pbVar10;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f2a4:
  unaff_s3 = unaff_s3 | 0x10;
  ppiVar6 = unaff_s1;
  pbVar10 = unaff_s7;
code_r0x8005f240:
  do {
    unaff_s7 = pbVar10 + 1;
    unaff_s1 = ppiVar6;
    switch(*unaff_s7) {
    case 0:
PRNT_OBJ_630:
      FUN_80060090();
      PRNT_OBJ_664();
      return;
    default:
      uVar5 = (uint)(char)*unaff_s7;
      _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
      do {
        FUN_8005ff94(uVar5);
        unaff_s7 = unaff_s7 + 1;
        uVar5 = (uint)*unaff_s7;
        if (uVar5 == 0) goto PRNT_OBJ_630;
        unaff_s3 = 0;
      } while (uVar5 != 0x25);
      unaff_s4 = (int *)0xffffffff;
      unaff_s8 = 0;
      in_stack_0000003c = (int *)0x0;
      in_stack_00000040 = 0;
      in_stack_00000044 = (int *)0x0;
      param_1 = 0x25;
      pbVar10 = unaff_s7;
      break;
    case 0x20:
      pbVar10 = unaff_s7;
      if (unaff_s8 == 0) {
        PRNT_OBJ_7C();
        return;
      }
      break;
    case 0x23:
      unaff_s3 = unaff_s3 | 8;
      pbVar10 = unaff_s7;
      break;
    case 0x2a:
      goto PRNT_OBJ_C4;
    case 0x2b:
      unaff_s8 = 0x2b;
      pbVar10 = unaff_s7;
      break;
    case 0x2d:
      goto code_r0x8005f2a4;
    case 0x2e:
      pbVar10 = pbVar10 + 2;
      bVar1 = *pbVar10;
      if (bVar1 == 0x2a) {
        PRNT_OBJ_168();
        return;
      }
      unaff_s4 = (int *)0x0;
      while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
        pbVar10 = pbVar10 + 1;
        bVar1 = *pbVar10;
        unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
      }
      pbVar10 = pbVar10 + -1;
      if ((int)unaff_s4 < 0) {
        PRNT_OBJ_7C();
        return;
      }
      break;
    case 0x30:
      unaff_s3 = unaff_s3 | 0x20;
      pbVar10 = unaff_s7;
      break;
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
      in_stack_00000044 = (int *)0x0;
      goto PRNT_OBJ_184;
    case 0x44:
      unaff_s3 = unaff_s3 | 1;
    case 100:
    case 0x69:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_244();
        return;
      }
      piVar4 = *ppiVar6;
      uVar5 = 10;
      if ((int)piVar4 < 0) {
        PRNT_OBJ_3CC();
        return;
      }
code_r0x8005f590:
      in_stack_0000003c = unaff_s4;
      if (-1 < (int)unaff_s4) {
        unaff_s3 = unaff_s3 & 0xffffffdf;
      }
      pcVar7 = (char *)&stack0x00000038;
      if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
      goto PRNT_OBJ_3F4;
      goto PRNT_OBJ_468;
    case 0x4c:
      pbVar10 = unaff_s7;
      break;
    case 0x4f:
      unaff_s3 = unaff_s3 | 1;
    case 0x6f:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3CC(param_1,8);
        return;
      }
      PRNT_OBJ_3C8(param_1,8);
      return;
    case 0x55:
      unaff_s3 = unaff_s3 | 1;
    case 0x75:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3CC(param_1,10);
        return;
      }
      PRNT_OBJ_3C8(param_1,10);
      return;
    case 0x58:
      in_stack_00000048 = "0123456789ABCDEF";
    case 0x78:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3B4(param_1,0x10);
        return;
      }
      piVar4 = *ppiVar6;
      uVar5 = 0x10;
      unaff_s8 = 0;
      if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
        unaff_s3 = unaff_s3 | 0x40;
        unaff_s8 = 0;
      }
      goto code_r0x8005f590;
    case 99:
      PRNT_OBJ_46C();
      return;
    case 0x68:
      unaff_s3 = unaff_s3 | 4;
      pbVar10 = unaff_s7;
      break;
    case 0x6c:
      unaff_s3 = unaff_s3 | 1;
      pbVar10 = unaff_s7;
      break;
    case 0x6e:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        *(undefined2 *)*ppiVar6 = uStack00000038;
        PRNT_OBJ_65C();
        return;
      }
      **ppiVar6 = (int)_uStack00000038;
      PRNT_OBJ_65C();
      return;
    case 0x70:
      PRNT_OBJ_3C8(param_1,0x10);
      return;
    case 0x73:
      pcVar7 = (char *)*ppiVar6;
      if ((int *)pcVar7 == (int *)0x0) {
        pcVar7 = "(null)";
      }
      if ((int)unaff_s4 < 0) {
        iVar9 = strlen(pcVar7);
        unaff_s8 = 0;
      }
      else {
        pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
        iVar9 = (int)pvVar3 - (int)pcVar7;
        if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar9)) {
          PRNT_OBJ_334();
          return;
        }
      }
      goto code_r0x8005f630;
    }
  } while( true );
PRNT_OBJ_C4:
  unaff_s1 = ppiVar6 + 1;
  in_stack_00000044 = *ppiVar6;
  ppiVar6 = unaff_s1;
  pbVar10 = unaff_s7;
  if ((int)in_stack_00000044 < 0) goto code_r0x8005f29c;
  goto code_r0x8005f240;
code_r0x8005f29c:
  in_stack_00000044 = (int *)-(int)in_stack_00000044;
  goto code_r0x8005f2a4;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_E8(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *unaff_s7;
  byte *pbVar10;
  int iVar11;
  int *piVar12;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f2ac:
  iVar11 = 0x2b;
  pbVar10 = unaff_s7;
code_r0x8005f240:
  unaff_s7 = pbVar10 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_630:
    FUN_80060090();
    PRNT_OBJ_664();
    return;
  default:
    uVar5 = (uint)(char)*unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      FUN_8005ff94(uVar5);
      unaff_s7 = unaff_s7 + 1;
      uVar5 = (uint)*unaff_s7;
      if (uVar5 == 0) goto PRNT_OBJ_630;
      unaff_s3 = 0;
    } while (uVar5 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    iVar11 = 0;
    in_stack_0000003c = (int *)0x0;
    in_stack_00000040 = 0;
    in_stack_00000044 = (int *)0x0;
    param_1 = 0x25;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x20:
    pbVar10 = unaff_s7;
    if (iVar11 == 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000044 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
    in_stack_00000044 = (int *)-(int)in_stack_00000044;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2b:
    goto code_r0x8005f2ac;
  case 0x2e:
    pbVar10 = pbVar10 + 2;
    bVar1 = *pbVar10;
    if (bVar1 == 0x2a) {
      PRNT_OBJ_168();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
      pbVar10 = pbVar10 + 1;
      bVar1 = *pbVar10;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar10 = pbVar10 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000044 = (int *)0x0;
    goto PRNT_OBJ_184;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_244();
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar4 < 0) {
      PRNT_OBJ_3CC();
      return;
    }
    goto code_r0x8005f590;
  case 0x4c:
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,8);
      return;
    }
    PRNT_OBJ_3C8(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,10);
      return;
    }
    PRNT_OBJ_3C8(param_1,10);
    return;
  case 0x58:
    in_stack_00000048 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3B4(param_1,0x10);
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 0x10;
    iVar11 = 0;
    if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
      unaff_s3 = unaff_s3 | 0x40;
      iVar11 = 0;
    }
code_r0x8005f590:
    in_stack_0000003c = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    pcVar7 = (char *)&stack0x00000038;
    if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3F4;
    goto PRNT_OBJ_468;
  case 99:
    PRNT_OBJ_46C();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_65C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_65C();
    return;
  case 0x70:
    PRNT_OBJ_3C8(param_1,0x10);
    return;
  case 0x73:
    pcVar7 = (char *)*unaff_s1;
    if ((int *)pcVar7 == (int *)0x0) {
      pcVar7 = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar9 = strlen(pcVar7);
      iVar11 = 0;
    }
    else {
      pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
      iVar9 = (int)pvVar3 - (int)pcVar7;
      if ((pvVar3 == (void *)0x0) || (iVar11 = 0, (int)unaff_s4 < iVar9)) {
        PRNT_OBJ_334();
        return;
      }
    }
    goto code_r0x8005f630;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar10 = unaff_s7;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar12 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar12;
  } while (piVar12 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (iVar11 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar12 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar12 = (int *)((int)piVar12 + 1);
    } while ((int)piVar12 < (int)in_stack_00000044);
  }
  if (iVar11 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar12 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar12 = (int *)((int)piVar12 + 1);
    } while ((int)piVar12 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_F0(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int *piVar6;
  int **ppiVar7;
  int **unaff_s1;
  char *pcVar8;
  uint unaff_s3;
  int iVar9;
  byte *unaff_s7;
  byte *pbVar10;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f2b4:
  pbVar10 = unaff_s7 + 1;
  bVar1 = *pbVar10;
  if (bVar1 == 0x2a) {
    PRNT_OBJ_168();
    return;
  }
  piVar6 = (int *)0x0;
  while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
    pbVar10 = pbVar10 + 1;
    bVar1 = *pbVar10;
    piVar6 = (int *)((int)piVar6 * 10 + -0x30 + param_1);
  }
  unaff_s7 = pbVar10 + -1;
  if ((int)piVar6 < 0) {
    PRNT_OBJ_7C();
    return;
  }
code_r0x8005f240:
  unaff_s7 = unaff_s7 + 1;
  ppiVar7 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_630:
    FUN_80060090();
    PRNT_OBJ_664();
    return;
  default:
    uVar5 = (uint)(char)*unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      FUN_8005ff94(uVar5);
      unaff_s7 = unaff_s7 + 1;
      uVar5 = (uint)*unaff_s7;
      if (uVar5 == 0) goto PRNT_OBJ_630;
      unaff_s3 = 0;
    } while (uVar5 != 0x25);
    piVar6 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_0000003c = (int *)0x0;
    in_stack_00000040 = 0;
    in_stack_00000044 = (int *)0x0;
    param_1 = 0x25;
    goto code_r0x8005f240;
  case 0x20:
    if (unaff_s8 == 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    goto code_r0x8005f240;
  case 0x2a:
    ppiVar7 = unaff_s1 + 1;
    in_stack_00000044 = *unaff_s1;
    unaff_s1 = ppiVar7;
    if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
    in_stack_00000044 = (int *)-(int)in_stack_00000044;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar7;
    goto code_r0x8005f240;
  case 0x2b:
    unaff_s8 = 0x2b;
    goto code_r0x8005f240;
  case 0x2e:
    goto code_r0x8005f2b4;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    goto code_r0x8005f240;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000044 = (int *)0x0;
    goto PRNT_OBJ_184;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_244();
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar4 < 0) {
      PRNT_OBJ_3CC();
      return;
    }
    goto code_r0x8005f590;
  case 0x4c:
    goto code_r0x8005f240;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,8);
      return;
    }
    PRNT_OBJ_3C8(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,10);
      return;
    }
    PRNT_OBJ_3C8(param_1,10);
    return;
  case 0x58:
    in_stack_00000048 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3B4(param_1,0x10);
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 0x10;
    unaff_s8 = 0;
    if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
      unaff_s3 = unaff_s3 | 0x40;
      unaff_s8 = 0;
    }
code_r0x8005f590:
    in_stack_0000003c = piVar6;
    if (-1 < (int)piVar6) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    pcVar8 = (char *)&stack0x00000038;
    if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar8, piVar6 != (int *)0x0))
    goto PRNT_OBJ_3F4;
    goto PRNT_OBJ_468;
  case 99:
    PRNT_OBJ_46C();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    goto code_r0x8005f240;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_65C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_65C();
    return;
  case 0x70:
    PRNT_OBJ_3C8(param_1,0x10);
    return;
  case 0x73:
    pcVar8 = (char *)*unaff_s1;
    if ((int *)pcVar8 == (int *)0x0) {
      pcVar8 = "(null)";
    }
    if ((int)piVar6 < 0) {
      iVar9 = strlen(pcVar8);
      unaff_s8 = 0;
    }
    else {
      pvVar3 = memchr((uchar *)pcVar8,'\0',(int)piVar6);
      iVar9 = (int)pvVar3 - (int)pcVar8;
      if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)piVar6 < iVar9)) {
        PRNT_OBJ_334();
        return;
      }
    }
    goto code_r0x8005f630;
  }
  unaff_s3 = unaff_s3 | 1;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar6 = (int *)pcVar8;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar8 = (char *)((int)piVar6 + -1);
    *pcVar8 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar8;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar8, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar8 = (char *)((int)piVar6 + -2);
    *pcVar8 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar8;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar6 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar6 = (int *)((int)piVar6 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar6 = (int *)((int)piVar6 + 2);
  }
  piVar4 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar6) {
    piVar4 = piVar6;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar4, (int)piVar4 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar4, (int)piVar4 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar6 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar6 = (int *)((int)piVar6 + 1);
    } while ((int)piVar6 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar8), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar6 = piVar4, (int)piVar4 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar6 = (int *)((int)piVar6 + 1);
    } while ((int)piVar6 < (int)in_stack_00000044);
  }
  piVar6 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar4) {
    piVar6 = piVar4;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar6);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_168(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int *unaff_s0;
  int **ppiVar6;
  int **unaff_s1;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *pbVar10;
  byte *unaff_s7;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
  do {
    if ((int)unaff_s0 < 0) {
      PRNT_OBJ_7C();
      return;
    }
code_r0x8005f240:
    pbVar10 = unaff_s7 + 1;
    ppiVar6 = unaff_s1;
    switch(*pbVar10) {
    case 0:
PRNT_OBJ_630:
      FUN_80060090();
      PRNT_OBJ_664();
      return;
    default:
      uVar5 = (uint)(char)*pbVar10;
      _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
      do {
        FUN_8005ff94(uVar5);
        pbVar10 = pbVar10 + 1;
        uVar5 = (uint)*pbVar10;
        if (uVar5 == 0) goto PRNT_OBJ_630;
        unaff_s3 = 0;
      } while (uVar5 != 0x25);
      unaff_s4 = (int *)0xffffffff;
      unaff_s8 = 0;
      in_stack_0000003c = (int *)0x0;
      in_stack_00000040 = 0;
      in_stack_00000044 = (int *)0x0;
      param_1 = 0x25;
      unaff_s7 = pbVar10;
      goto code_r0x8005f240;
    case 0x20:
      unaff_s7 = pbVar10;
      if (unaff_s8 == 0) {
        PRNT_OBJ_7C();
        return;
      }
      goto code_r0x8005f240;
    case 0x23:
      unaff_s3 = unaff_s3 | 8;
      unaff_s7 = pbVar10;
      goto code_r0x8005f240;
    case 0x2a:
      ppiVar6 = unaff_s1 + 1;
      in_stack_00000044 = *unaff_s1;
      unaff_s1 = ppiVar6;
      unaff_s7 = pbVar10;
      if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
      in_stack_00000044 = (int *)-(int)in_stack_00000044;
    case 0x2d:
      unaff_s3 = unaff_s3 | 0x10;
      unaff_s1 = ppiVar6;
      unaff_s7 = pbVar10;
      goto code_r0x8005f240;
    case 0x2b:
      unaff_s8 = 0x2b;
      unaff_s7 = pbVar10;
      goto code_r0x8005f240;
    case 0x2e:
      pbVar10 = unaff_s7 + 2;
      bVar1 = *pbVar10;
      if (bVar1 == 0x2a) {
        PRNT_OBJ_168();
        return;
      }
      unaff_s0 = (int *)0x0;
      while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
        pbVar10 = pbVar10 + 1;
        bVar1 = *pbVar10;
        unaff_s0 = (int *)((int)unaff_s0 * 10 + -0x30 + param_1);
      }
      unaff_s7 = pbVar10 + -1;
      unaff_s4 = unaff_s0;
      break;
    case 0x30:
      unaff_s3 = unaff_s3 | 0x20;
      unaff_s7 = pbVar10;
      goto code_r0x8005f240;
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
      in_stack_00000044 = (int *)0x0;
      goto PRNT_OBJ_184;
    case 0x44:
      unaff_s3 = unaff_s3 | 1;
    case 100:
    case 0x69:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_244();
        return;
      }
      piVar4 = *unaff_s1;
      uVar5 = 10;
      if ((int)piVar4 < 0) {
        PRNT_OBJ_3CC();
        return;
      }
      goto code_r0x8005f590;
    case 0x4c:
      unaff_s7 = pbVar10;
      goto code_r0x8005f240;
    case 0x4f:
      unaff_s3 = unaff_s3 | 1;
    case 0x6f:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3CC(param_1,8);
        return;
      }
      PRNT_OBJ_3C8(param_1,8);
      return;
    case 0x55:
      unaff_s3 = unaff_s3 | 1;
    case 0x75:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3CC(param_1,10);
        return;
      }
      PRNT_OBJ_3C8(param_1,10);
      return;
    case 0x58:
      in_stack_00000048 = "0123456789ABCDEF";
    case 0x78:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3B4(param_1,0x10);
        return;
      }
      piVar4 = *unaff_s1;
      uVar5 = 0x10;
      unaff_s8 = 0;
      if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
        unaff_s3 = unaff_s3 | 0x40;
        unaff_s8 = 0;
      }
code_r0x8005f590:
      in_stack_0000003c = unaff_s4;
      if (-1 < (int)unaff_s4) {
        unaff_s3 = unaff_s3 & 0xffffffdf;
      }
      pcVar7 = (char *)&stack0x00000038;
      if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
      goto PRNT_OBJ_3F4;
      goto PRNT_OBJ_468;
    case 99:
      PRNT_OBJ_46C();
      return;
    case 0x68:
      unaff_s3 = unaff_s3 | 4;
      unaff_s7 = pbVar10;
      goto code_r0x8005f240;
    case 0x6c:
      goto PRNT_OBJ_1EC;
    case 0x6e:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        *(undefined2 *)*unaff_s1 = uStack00000038;
        PRNT_OBJ_65C();
        return;
      }
      **unaff_s1 = (int)_uStack00000038;
      PRNT_OBJ_65C();
      return;
    case 0x70:
      PRNT_OBJ_3C8(param_1,0x10);
      return;
    case 0x73:
      pcVar7 = (char *)*unaff_s1;
      if ((int *)pcVar7 == (int *)0x0) {
        pcVar7 = "(null)";
      }
      if ((int)unaff_s4 < 0) {
        iVar9 = strlen(pcVar7);
        unaff_s8 = 0;
      }
      else {
        pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
        iVar9 = (int)pvVar3 - (int)pcVar7;
        if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar9)) {
          PRNT_OBJ_334();
          return;
        }
      }
      goto code_r0x8005f630;
    }
  } while( true );
PRNT_OBJ_1EC:
  unaff_s3 = unaff_s3 | 1;
  unaff_s7 = pbVar10;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*pbVar10] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *pbVar10;
    pbVar10 = pbVar10 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *pbVar10) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*pbVar10);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_178(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *pbVar10;
  byte *unaff_s7;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f33c:
  unaff_s3 = unaff_s3 | 0x20;
  pbVar10 = unaff_s7;
code_r0x8005f240:
  unaff_s7 = pbVar10 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_630:
    FUN_80060090();
    PRNT_OBJ_664();
    return;
  default:
    uVar5 = (uint)(char)*unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      FUN_8005ff94(uVar5);
      unaff_s7 = unaff_s7 + 1;
      uVar5 = (uint)*unaff_s7;
      if (uVar5 == 0) goto PRNT_OBJ_630;
      unaff_s3 = 0;
    } while (uVar5 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_0000003c = (int *)0x0;
    in_stack_00000040 = 0;
    in_stack_00000044 = (int *)0x0;
    param_1 = 0x25;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x20:
    pbVar10 = unaff_s7;
    if (unaff_s8 == 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000044 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
    in_stack_00000044 = (int *)-(int)in_stack_00000044;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2e:
    pbVar10 = pbVar10 + 2;
    bVar1 = *pbVar10;
    if (bVar1 == 0x2a) {
      PRNT_OBJ_168();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
      pbVar10 = pbVar10 + 1;
      bVar1 = *pbVar10;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar10 = pbVar10 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x30:
    goto code_r0x8005f33c;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000044 = (int *)0x0;
    goto PRNT_OBJ_184;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_244();
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar4 < 0) {
      PRNT_OBJ_3CC();
      return;
    }
    goto code_r0x8005f590;
  case 0x4c:
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,8);
      return;
    }
    PRNT_OBJ_3C8(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,10);
      return;
    }
    PRNT_OBJ_3C8(param_1,10);
    return;
  case 0x58:
    in_stack_00000048 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3B4(param_1,0x10);
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 0x10;
    unaff_s8 = 0;
    if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
      unaff_s3 = unaff_s3 | 0x40;
      unaff_s8 = 0;
    }
code_r0x8005f590:
    in_stack_0000003c = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    pcVar7 = (char *)&stack0x00000038;
    if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3F4;
    goto PRNT_OBJ_468;
  case 99:
    PRNT_OBJ_46C();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_65C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_65C();
    return;
  case 0x70:
    PRNT_OBJ_3C8(param_1,0x10);
    return;
  case 0x73:
    pcVar7 = (char *)*unaff_s1;
    if ((int *)pcVar7 == (int *)0x0) {
      pcVar7 = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar9 = strlen(pcVar7);
      unaff_s8 = 0;
    }
    else {
      pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
      iVar9 = (int)pvVar3 - (int)pcVar7;
      if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar9)) {
        PRNT_OBJ_334();
        return;
      }
    }
    goto code_r0x8005f630;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar10 = unaff_s7;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_180(void)

{
  byte bVar1;
  byte *unaff_s7;
  int param_11;
  
  param_11 = 0;
  do {
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    param_11 = param_11 * 10 + -0x30 + (uint)bVar1;
    if (0x7f < *unaff_s7) break;
  } while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0);
  PRNT_OBJ_7C();
  return;
}



void PRNT_OBJ_1DC(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *pbVar10;
  byte *unaff_s7;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f240:
  do {
    pbVar10 = unaff_s7;
    unaff_s7 = pbVar10 + 1;
    ppiVar6 = unaff_s1;
    switch(*unaff_s7) {
    case 0:
PRNT_OBJ_630:
      FUN_80060090();
      PRNT_OBJ_664();
      return;
    default:
      uVar5 = (uint)(char)*unaff_s7;
      _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
      do {
        FUN_8005ff94(uVar5);
        unaff_s7 = unaff_s7 + 1;
        uVar5 = (uint)*unaff_s7;
        if (uVar5 == 0) goto PRNT_OBJ_630;
        unaff_s3 = 0;
      } while (uVar5 != 0x25);
      unaff_s4 = (int *)0xffffffff;
      unaff_s8 = 0;
      in_stack_0000003c = (int *)0x0;
      in_stack_00000040 = 0;
      in_stack_00000044 = (int *)0x0;
      param_1 = 0x25;
      break;
    case 0x20:
      if (unaff_s8 == 0) {
        PRNT_OBJ_7C();
        return;
      }
      break;
    case 0x23:
      unaff_s3 = unaff_s3 | 8;
      break;
    case 0x2a:
      ppiVar6 = unaff_s1 + 1;
      in_stack_00000044 = *unaff_s1;
      unaff_s1 = ppiVar6;
      if (-1 < (int)in_stack_00000044) break;
      in_stack_00000044 = (int *)-(int)in_stack_00000044;
    case 0x2d:
      unaff_s3 = unaff_s3 | 0x10;
      unaff_s1 = ppiVar6;
      break;
    case 0x2b:
      unaff_s8 = 0x2b;
      break;
    case 0x2e:
      pbVar10 = pbVar10 + 2;
      bVar1 = *pbVar10;
      if (bVar1 == 0x2a) {
        PRNT_OBJ_168();
        return;
      }
      unaff_s4 = (int *)0x0;
      while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
        pbVar10 = pbVar10 + 1;
        bVar1 = *pbVar10;
        unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
      }
      unaff_s7 = pbVar10 + -1;
      if ((int)unaff_s4 < 0) {
        PRNT_OBJ_7C();
        return;
      }
      break;
    case 0x30:
      unaff_s3 = unaff_s3 | 0x20;
      break;
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
      in_stack_00000044 = (int *)0x0;
      goto PRNT_OBJ_184;
    case 0x44:
      unaff_s3 = unaff_s3 | 1;
    case 100:
    case 0x69:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_244();
        return;
      }
      piVar4 = *unaff_s1;
      uVar5 = 10;
      if ((int)piVar4 < 0) {
        PRNT_OBJ_3CC();
        return;
      }
code_r0x8005f590:
      in_stack_0000003c = unaff_s4;
      if (-1 < (int)unaff_s4) {
        unaff_s3 = unaff_s3 & 0xffffffdf;
      }
      pcVar7 = (char *)&stack0x00000038;
      if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
      goto PRNT_OBJ_3F4;
      goto PRNT_OBJ_468;
    case 0x4f:
      unaff_s3 = unaff_s3 | 1;
    case 0x6f:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3CC(param_1,8);
        return;
      }
      PRNT_OBJ_3C8(param_1,8);
      return;
    case 0x55:
      unaff_s3 = unaff_s3 | 1;
    case 0x75:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3CC(param_1,10);
        return;
      }
      PRNT_OBJ_3C8(param_1,10);
      return;
    case 0x58:
      in_stack_00000048 = "0123456789ABCDEF";
    case 0x78:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3B4(param_1,0x10);
        return;
      }
      piVar4 = *unaff_s1;
      uVar5 = 0x10;
      unaff_s8 = 0;
      if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
        unaff_s3 = unaff_s3 | 0x40;
        unaff_s8 = 0;
      }
      goto code_r0x8005f590;
    case 99:
      PRNT_OBJ_46C();
      return;
    case 0x68:
      unaff_s3 = unaff_s3 | 4;
      break;
    case 0x6c:
      goto PRNT_OBJ_1EC;
    case 0x6e:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        *(undefined2 *)*unaff_s1 = uStack00000038;
        PRNT_OBJ_65C();
        return;
      }
      **unaff_s1 = (int)_uStack00000038;
      PRNT_OBJ_65C();
      return;
    case 0x70:
      PRNT_OBJ_3C8(param_1,0x10);
      return;
    case 0x73:
      pcVar7 = (char *)*unaff_s1;
      if ((int *)pcVar7 == (int *)0x0) {
        pcVar7 = "(null)";
      }
      if ((int)unaff_s4 < 0) {
        iVar9 = strlen(pcVar7);
        unaff_s8 = 0;
      }
      else {
        pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
        iVar9 = (int)pvVar3 - (int)pcVar7;
        if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar9)) {
          PRNT_OBJ_334();
          return;
        }
      }
      goto code_r0x8005f630;
    }
  } while( true );
PRNT_OBJ_1EC:
  unaff_s3 = unaff_s3 | 1;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_1E4(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *pbVar10;
  byte *unaff_s7;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f3a8:
  unaff_s3 = unaff_s3 | 4;
  pbVar10 = unaff_s7;
code_r0x8005f240:
  unaff_s7 = pbVar10 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_630:
    FUN_80060090();
    PRNT_OBJ_664();
    return;
  default:
    uVar5 = (uint)(char)*unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      FUN_8005ff94(uVar5);
      unaff_s7 = unaff_s7 + 1;
      uVar5 = (uint)*unaff_s7;
      if (uVar5 == 0) goto PRNT_OBJ_630;
      unaff_s3 = 0;
    } while (uVar5 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_0000003c = (int *)0x0;
    in_stack_00000040 = 0;
    in_stack_00000044 = (int *)0x0;
    param_1 = 0x25;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x20:
    pbVar10 = unaff_s7;
    if (unaff_s8 == 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000044 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
    in_stack_00000044 = (int *)-(int)in_stack_00000044;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2e:
    pbVar10 = pbVar10 + 2;
    bVar1 = *pbVar10;
    if (bVar1 == 0x2a) {
      PRNT_OBJ_168();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
      pbVar10 = pbVar10 + 1;
      bVar1 = *pbVar10;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar10 = pbVar10 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000044 = (int *)0x0;
    goto PRNT_OBJ_184;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_244();
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar4 < 0) {
      PRNT_OBJ_3CC();
      return;
    }
    goto code_r0x8005f590;
  case 0x4c:
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,8);
      return;
    }
    PRNT_OBJ_3C8(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,10);
      return;
    }
    PRNT_OBJ_3C8(param_1,10);
    return;
  case 0x58:
    in_stack_00000048 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3B4(param_1,0x10);
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 0x10;
    unaff_s8 = 0;
    if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
      unaff_s3 = unaff_s3 | 0x40;
      unaff_s8 = 0;
    }
code_r0x8005f590:
    in_stack_0000003c = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    pcVar7 = (char *)&stack0x00000038;
    if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3F4;
    goto PRNT_OBJ_468;
  case 99:
    PRNT_OBJ_46C();
    return;
  case 0x68:
    goto code_r0x8005f3a8;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_65C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_65C();
    return;
  case 0x70:
    PRNT_OBJ_3C8(param_1,0x10);
    return;
  case 0x73:
    pcVar7 = (char *)*unaff_s1;
    if ((int *)pcVar7 == (int *)0x0) {
      pcVar7 = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar9 = strlen(pcVar7);
      unaff_s8 = 0;
    }
    else {
      pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
      iVar9 = (int)pvVar3 - (int)pcVar7;
      if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar9)) {
        PRNT_OBJ_334();
        return;
      }
    }
    goto code_r0x8005f630;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar10 = unaff_s7;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_1EC(uint param_1)

{
  byte bVar1;
  uchar uVar2;
  void *pvVar3;
  int *piVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *pcVar7;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar8;
  int iVar9;
  byte *pbVar10;
  byte *unaff_s7;
  int unaff_s8;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f3b0:
  unaff_s3 = unaff_s3 | 1;
  pbVar10 = unaff_s7;
code_r0x8005f240:
  unaff_s7 = pbVar10 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_630:
    FUN_80060090();
    PRNT_OBJ_664();
    return;
  default:
    uVar5 = (uint)(char)*unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      FUN_8005ff94(uVar5);
      unaff_s7 = unaff_s7 + 1;
      uVar5 = (uint)*unaff_s7;
      if (uVar5 == 0) goto PRNT_OBJ_630;
      unaff_s3 = 0;
    } while (uVar5 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_0000003c = (int *)0x0;
    in_stack_00000040 = 0;
    in_stack_00000044 = (int *)0x0;
    param_1 = 0x25;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x20:
    pbVar10 = unaff_s7;
    if (unaff_s8 == 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000044 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
    in_stack_00000044 = (int *)-(int)in_stack_00000044;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2e:
    pbVar10 = pbVar10 + 2;
    bVar1 = *pbVar10;
    if (bVar1 == 0x2a) {
      PRNT_OBJ_168();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar1 < 0x80 && (param_1 = (uint)*pbVar10, ((&DAT_80066ca9)[param_1] & 4) != 0))) {
      pbVar10 = pbVar10 + 1;
      bVar1 = *pbVar10;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar10 = pbVar10 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000044 = (int *)0x0;
    goto PRNT_OBJ_184;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_244();
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar4 < 0) {
      PRNT_OBJ_3CC();
      return;
    }
    goto code_r0x8005f590;
  case 0x4c:
    pbVar10 = unaff_s7;
    goto code_r0x8005f240;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,8);
      return;
    }
    PRNT_OBJ_3C8(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3CC(param_1,10);
      return;
    }
    PRNT_OBJ_3C8(param_1,10);
    return;
  case 0x58:
    in_stack_00000048 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3B4(param_1,0x10);
      return;
    }
    piVar4 = *unaff_s1;
    uVar5 = 0x10;
    unaff_s8 = 0;
    if (((unaff_s3 & 8) != 0) && (piVar4 != (int *)0x0)) {
      unaff_s3 = unaff_s3 | 0x40;
      unaff_s8 = 0;
    }
code_r0x8005f590:
    in_stack_0000003c = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    pcVar7 = (char *)&stack0x00000038;
    if ((piVar4 != (int *)0x0) || (iVar9 = (int)auStackX_0 - (int)pcVar7, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3F4;
    goto PRNT_OBJ_468;
  case 99:
    PRNT_OBJ_46C();
    return;
  case 0x68:
    break;
  case 0x6c:
    goto code_r0x8005f3b0;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_65C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_65C();
    return;
  case 0x70:
    PRNT_OBJ_3C8(param_1,0x10);
    return;
  case 0x73:
    pcVar7 = (char *)*unaff_s1;
    if ((int *)pcVar7 == (int *)0x0) {
      pcVar7 = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar9 = strlen(pcVar7);
      unaff_s8 = 0;
    }
    else {
      pvVar3 = memchr((uchar *)pcVar7,'\0',(int)unaff_s4);
      iVar9 = (int)pvVar3 - (int)pcVar7;
      if ((pvVar3 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar9)) {
        PRNT_OBJ_334();
        return;
      }
    }
    goto code_r0x8005f630;
  }
  unaff_s3 = unaff_s3 | 4;
  pbVar10 = unaff_s7;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar8 = (int *)pcVar7;
    piVar11 = (int *)((uint)piVar4 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar4 % uVar5];
    pcVar7 = (char *)((int)piVar8 + -1);
    *pcVar7 = uVar2;
    piVar4 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar9 = (int)auStackX_0 - (int)pcVar7;
    if ((uVar5 != 8) || (iVar9 = (int)auStackX_0 - (int)pcVar7, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar7 = (char *)((int)piVar8 + -2);
    *pcVar7 = '0';
  }
  iVar9 = (int)auStackX_0 - (int)pcVar7;
PRNT_OBJ_468:
  iVar9 = iVar9 + 0x38;
code_r0x8005f630:
  piVar4 = (int *)(iVar9 + in_stack_00000040);
  if (unaff_s8 != 0) {
    piVar4 = (int *)((int)piVar4 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar4 = (int *)((int)piVar4 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar4) {
    piVar8 = piVar4;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000044);
  }
  if ((int)piVar4 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar9 + -1) && (FUN_8005ff94((int)*pcVar7), -1 < iVar9 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar4 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar4 = (int *)((int)piVar4 + 1);
    } while ((int)piVar4 < (int)in_stack_00000044);
  }
  piVar4 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar4 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar4);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_1F4(void)

{
  undefined *unaff_s1;
  undefined uStack00000010;
  
  uStack00000010 = *unaff_s1;
  PRNT_OBJ_46C();
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f5c4)
// WARNING: Removing unreachable block (ram,0x8005f60c)
// WARNING: Removing unreachable block (ram,0x8005f620)
// WARNING: Removing unreachable block (ram,0x8005f3e4)
// WARNING: Removing unreachable block (ram,0x8005f3ec)

void PRNT_OBJ_210(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint *unaff_s1;
  undefined4 *puVar4;
  uint unaff_s3;
  int unaff_s4;
  int iVar5;
  int iVar6;
  char *unaff_s7;
  int unaff_s8;
  uint uVar7;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000040;
  int in_stack_00000044;
  int in_stack_00000048;
  undefined auStack_38 [56];
  
  uVar3 = *unaff_s1;
  if ((int)uVar3 < 0) {
    PRNT_OBJ_3CC();
    return;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar4 = &stack0x00000038;
  if ((uVar3 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar4, unaff_s4 != 0)) {
    do {
      uVar7 = uVar3 / 10;
      puVar4 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar4 = *(char *)(in_stack_00000048 + uVar3 % 10);
      uVar3 = uVar7;
    } while (uVar7 != 0);
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
  }
  iVar5 = iVar2 + 0x38 + in_stack_00000040;
  if (unaff_s8 != 0) {
    iVar5 = iVar5 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar5 = iVar5 + 2;
  }
  iVar6 = unaff_s4;
  if (unaff_s4 < iVar5) {
    iVar6 = iVar5;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar6, in_stack_00000044 != 0)) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar1 = iVar6;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  for (; iVar5 < unaff_s4; iVar5 = iVar5 + 1) {
    FUN_8005ff94(0x30);
  }
  if ((-1 < iVar2 + 0x37) && (FUN_8005ff94((int)*(char *)puVar4), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  iVar2 = iVar6;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (in_stack_00000044 < iVar6) {
    in_stack_00000044 = iVar6;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000044;
  PRNT_OBJ_65C();
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f5c4)
// WARNING: Removing unreachable block (ram,0x8005f60c)
// WARNING: Removing unreachable block (ram,0x8005f620)

void PRNT_OBJ_214(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint *unaff_s1;
  undefined4 *puVar4;
  uint unaff_s3;
  int unaff_s4;
  int iVar5;
  int iVar6;
  char *unaff_s7;
  int unaff_s8;
  uint uVar7;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000040;
  int in_stack_00000044;
  int in_stack_00000048;
  undefined auStack_38 [56];
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_244();
    return;
  }
  uVar3 = *unaff_s1;
  if ((int)uVar3 < 0) {
    PRNT_OBJ_3CC();
    return;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar4 = &stack0x00000038;
  if ((uVar3 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar4, unaff_s4 != 0)) {
    do {
      uVar7 = uVar3 / 10;
      puVar4 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar4 = *(char *)(in_stack_00000048 + uVar3 % 10);
      uVar3 = uVar7;
    } while (uVar7 != 0);
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
  }
  iVar5 = iVar2 + 0x38 + in_stack_00000040;
  if (unaff_s8 != 0) {
    iVar5 = iVar5 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar5 = iVar5 + 2;
  }
  iVar6 = unaff_s4;
  if (unaff_s4 < iVar5) {
    iVar6 = iVar5;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar6, in_stack_00000044 != 0)) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar1 = iVar6;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  for (; iVar5 < unaff_s4; iVar5 = iVar5 + 1) {
    FUN_8005ff94(0x30);
  }
  if ((-1 < iVar2 + 0x37) && (FUN_8005ff94((int)*(char *)puVar4), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  iVar2 = iVar6;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (in_stack_00000044 < iVar6) {
    in_stack_00000044 = iVar6;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000044;
  PRNT_OBJ_65C();
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f5c4)
// WARNING: Removing unreachable block (ram,0x8005f60c)
// WARNING: Removing unreachable block (ram,0x8005f620)

void PRNT_OBJ_244(void)

{
  int iVar1;
  int iVar2;
  uint in_v1;
  undefined4 *puVar3;
  uint unaff_s3;
  int unaff_s4;
  int iVar4;
  int iVar5;
  char *unaff_s7;
  int unaff_s8;
  uint uVar6;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000040;
  int in_stack_00000044;
  int in_stack_00000048;
  undefined auStack_38 [56];
  
  if ((int)in_v1 < 0) {
    PRNT_OBJ_3CC();
    return;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar3 = &stack0x00000038;
  if ((in_v1 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar3, unaff_s4 != 0)) {
    do {
      uVar6 = in_v1 / 10;
      puVar3 = (undefined4 *)((int)puVar3 + -1);
      *(char *)puVar3 = *(char *)(in_stack_00000048 + in_v1 % 10);
      in_v1 = uVar6;
    } while (uVar6 != 0);
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar3;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar3;
    }
  }
  iVar4 = iVar2 + 0x38 + in_stack_00000040;
  if (unaff_s8 != 0) {
    iVar4 = iVar4 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar4 = iVar4 + 2;
  }
  iVar5 = unaff_s4;
  if (unaff_s4 < iVar4) {
    iVar5 = iVar4;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar5, in_stack_00000044 != 0)) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar1 = iVar5;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  for (; iVar4 < unaff_s4; iVar4 = iVar4 + 1) {
    FUN_8005ff94(0x30);
  }
  if ((-1 < iVar2 + 0x37) && (FUN_8005ff94((int)*(char *)puVar3), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  iVar2 = iVar5;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (in_stack_00000044 < iVar5) {
    in_stack_00000044 = iVar5;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000044;
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_258(void)

{
  undefined4 *unaff_s1;
  uint unaff_s3;
  undefined2 param_11;
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    *(undefined2 *)*unaff_s1 = param_11;
    PRNT_OBJ_65C();
    return;
  }
  *(undefined4 *)*unaff_s1 = _param_11;
  PRNT_OBJ_65C();
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f468)
// WARNING: Removing unreachable block (ram,0x8005f470)

void PRNT_OBJ_294(undefined4 param_1)

{
  PRNT_OBJ_3C8(param_1,8);
  return;
}



void PRNT_OBJ_298(undefined4 param_1)

{
  uint unaff_s3;
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_3CC(param_1,8);
    return;
  }
  PRNT_OBJ_3C8(param_1,8);
  return;
}



void PRNT_OBJ_2CC(undefined4 param_1)

{
  PRNT_OBJ_3C8(param_1,0x10);
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f63c)
// WARNING: Removing unreachable block (ram,0x8005f6ac)

void PRNT_OBJ_2DC(void)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  uchar **unaff_s1;
  char *pcVar4;
  uint unaff_s3;
  int unaff_s4;
  int iVar5;
  int iVar6;
  char *unaff_s7;
  int in_stack_0000003c;
  int in_stack_00000040;
  int in_stack_00000044;
  
  pcVar4 = (char *)*unaff_s1;
  if ((uchar *)pcVar4 == (uchar *)0x0) {
    pcVar4 = "(null)";
  }
  if (unaff_s4 < 0) {
    iVar6 = strlen(pcVar4);
  }
  else {
    pvVar2 = memchr((uchar *)pcVar4,'\0',unaff_s4);
    iVar6 = (int)pvVar2 - (int)pcVar4;
    if ((pvVar2 == (void *)0x0) || (unaff_s4 < iVar6)) {
      PRNT_OBJ_334();
      return;
    }
  }
  iVar5 = iVar6 + in_stack_00000040;
  if ((unaff_s3 & 0x40) != 0) {
    iVar5 = iVar5 + 2;
  }
  iVar3 = in_stack_0000003c;
  if (in_stack_0000003c < iVar5) {
    iVar3 = iVar5;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar3, in_stack_00000044 != 0)) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar1 = iVar3;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  for (; iVar5 < in_stack_0000003c; iVar5 = iVar5 + 1) {
    FUN_8005ff94(0x30);
  }
  if ((-1 < iVar6 + -1) && (FUN_8005ff94((int)*pcVar4), -1 < iVar6 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar3 < in_stack_00000044; iVar3 = iVar3 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  PRNT_OBJ_65C();
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f63c)
// WARNING: Removing unreachable block (ram,0x8005f6ac)

void PRNT_OBJ_334(void)

{
  int iVar1;
  int iVar2;
  char *unaff_s2;
  uint unaff_s3;
  int iVar3;
  int unaff_s6;
  char *unaff_s7;
  int in_stack_0000003c;
  int in_stack_00000040;
  int in_stack_00000044;
  
  iVar3 = unaff_s6 + in_stack_00000040;
  if ((unaff_s3 & 0x40) != 0) {
    iVar3 = iVar3 + 2;
  }
  iVar2 = in_stack_0000003c;
  if (in_stack_0000003c < iVar3) {
    iVar2 = iVar3;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar2, in_stack_00000044 != 0)) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar1 = iVar2;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  for (; iVar3 < in_stack_0000003c; iVar3 = iVar3 + 1) {
    FUN_8005ff94(0x30);
  }
  if ((-1 < unaff_s6 + -1) && (FUN_8005ff94((int)*unaff_s2), -1 < unaff_s6 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  PRNT_OBJ_65C();
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f510)
// WARNING: Removing unreachable block (ram,0x8005f518)

void PRNT_OBJ_33C(undefined4 param_1)

{
  PRNT_OBJ_3C8(param_1,10);
  return;
}



void PRNT_OBJ_340(undefined4 param_1)

{
  uint unaff_s3;
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_3CC(param_1,10);
    return;
  }
  PRNT_OBJ_3C8(param_1,10);
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f63c)
// WARNING: Removing unreachable block (ram,0x8005f5c4)
// WARNING: Removing unreachable block (ram,0x8005f60c)
// WARNING: Removing unreachable block (ram,0x8005f620)
// WARNING: Removing unreachable block (ram,0x8005f6ac)

void PRNT_OBJ_374(undefined4 param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint *unaff_s1;
  undefined4 *puVar4;
  uint unaff_s3;
  int unaff_s4;
  int iVar5;
  int iVar6;
  char *unaff_s7;
  uint uVar7;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000040;
  int in_stack_00000044;
  char *param_11;
  undefined auStack_38 [56];
  
  param_11 = "0123456789ABCDEF";
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_3B4(param_1,0x10);
    return;
  }
  uVar3 = *unaff_s1;
  if (((unaff_s3 & 8) != 0) && (uVar3 != 0)) {
    unaff_s3 = unaff_s3 | 0x40;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar4 = &stack0x00000038;
  if ((uVar3 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar4, unaff_s4 != 0)) {
    do {
      uVar7 = uVar3 / 0x10;
      puVar4 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar4 = "0123456789ABCDEF"[uVar3 % 0x10];
      uVar3 = uVar7;
    } while (uVar7 != 0);
    param_11 = "0123456789abcdef";
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
  }
  iVar5 = iVar2 + 0x38 + in_stack_00000040;
  if ((unaff_s3 & 0x40) != 0) {
    iVar5 = iVar5 + 2;
  }
  iVar6 = unaff_s4;
  if (unaff_s4 < iVar5) {
    iVar6 = iVar5;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar6, in_stack_00000044 != 0)) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar1 = iVar6;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  for (; iVar5 < unaff_s4; iVar5 = iVar5 + 1) {
    FUN_8005ff94(0x30);
  }
  if ((-1 < iVar2 + 0x37) && (FUN_8005ff94((int)*(char *)puVar4), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  iVar2 = iVar6;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (in_stack_00000044 < iVar6) {
    in_stack_00000044 = iVar6;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000044;
  PRNT_OBJ_65C();
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f63c)
// WARNING: Removing unreachable block (ram,0x8005f5c4)
// WARNING: Removing unreachable block (ram,0x8005f60c)
// WARNING: Removing unreachable block (ram,0x8005f620)
// WARNING: Removing unreachable block (ram,0x8005f6ac)

void PRNT_OBJ_380(undefined4 param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint *unaff_s1;
  undefined4 *puVar4;
  uint unaff_s3;
  int unaff_s4;
  int iVar5;
  int iVar6;
  char *unaff_s7;
  uint uVar7;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000040;
  int in_stack_00000044;
  int in_stack_00000048;
  undefined auStack_38 [56];
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_3B4(param_1,0x10);
    return;
  }
  uVar3 = *unaff_s1;
  if (((unaff_s3 & 8) != 0) && (uVar3 != 0)) {
    unaff_s3 = unaff_s3 | 0x40;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar4 = &stack0x00000038;
  if ((uVar3 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar4, unaff_s4 != 0)) {
    do {
      uVar7 = uVar3 / 0x10;
      puVar4 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar4 = *(char *)(in_stack_00000048 + uVar3 % 0x10);
      uVar3 = uVar7;
    } while (uVar7 != 0);
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
  }
  iVar5 = iVar2 + 0x38 + in_stack_00000040;
  if ((unaff_s3 & 0x40) != 0) {
    iVar5 = iVar5 + 2;
  }
  iVar6 = unaff_s4;
  if (unaff_s4 < iVar5) {
    iVar6 = iVar5;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar6, in_stack_00000044 != 0)) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar1 = iVar6;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000044; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  for (; iVar5 < unaff_s4; iVar5 = iVar5 + 1) {
    FUN_8005ff94(0x30);
  }
  if ((-1 < iVar2 + 0x37) && (FUN_8005ff94((int)*(char *)puVar4), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  iVar2 = iVar6;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (in_stack_00000044 < iVar6) {
    in_stack_00000044 = iVar6;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000044;
  PRNT_OBJ_65C();
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f63c)
// WARNING: Removing unreachable block (ram,0x8005f6ac)

void PRNT_OBJ_3B4(undefined4 param_1,uint param_2)

{
  char cVar1;
  int iVar2;
  int in_v0;
  int iVar3;
  uint in_v1;
  undefined4 *puVar4;
  undefined4 *puVar5;
  uint unaff_s3;
  int unaff_s4;
  int iVar6;
  int iVar7;
  char *unaff_s7;
  uint uVar8;
  undefined auStackX_0 [16];
  int in_stack_00000038;
  int in_stack_00000040;
  int in_stack_00000044;
  int in_stack_00000048;
  undefined auStack_38 [56];
  
  if ((in_v0 != 0) && (in_v1 != 0)) {
    unaff_s3 = unaff_s3 | 0x40;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar5 = &stack0x00000038;
  if ((in_v1 != 0) || (iVar3 = (int)auStackX_0 - (int)puVar5, unaff_s4 != 0)) {
    do {
      puVar4 = puVar5;
      uVar8 = in_v1 / param_2;
      if (param_2 == 0) {
        trap(0x1c00);
      }
      cVar1 = *(char *)(in_stack_00000048 + in_v1 % param_2);
      puVar5 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar5 = cVar1;
      in_v1 = uVar8;
    } while (uVar8 != 0);
    if ((unaff_s3 & 8) != 0) {
      iVar3 = (int)auStackX_0 - (int)puVar5;
      if ((param_2 != 8) || (iVar3 = (int)auStackX_0 - (int)puVar5, cVar1 == '0'))
      goto PRNT_OBJ_468;
      puVar5 = (undefined4 *)((int)puVar4 + -2);
      *(char *)puVar5 = '0';
    }
    iVar3 = (int)auStackX_0 - (int)puVar5;
  }
PRNT_OBJ_468:
  iVar6 = iVar3 + 0x38 + in_stack_00000040;
  if ((unaff_s3 & 0x40) != 0) {
    iVar6 = iVar6 + 2;
  }
  iVar7 = unaff_s4;
  if (unaff_s4 < iVar6) {
    iVar7 = iVar6;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar2 = iVar7, in_stack_00000044 != 0)) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar2 = iVar7;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  if (iVar6 < unaff_s4) {
    do {
      FUN_8005ff94(0x30);
      iVar6 = iVar6 + 1;
    } while (iVar6 < unaff_s4);
  }
  if ((-1 < iVar3 + 0x37) && (FUN_8005ff94((int)*(char *)puVar5), -1 < iVar3 + 0x36)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  iVar3 = iVar7;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar3 < in_stack_00000044; iVar3 = iVar3 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (in_stack_00000044 < iVar7) {
    in_stack_00000044 = iVar7;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000044;
  PRNT_OBJ_65C();
  return;
}



// WARNING: Removing unreachable block (ram,0x8005f63c)
// WARNING: Removing unreachable block (ram,0x8005f6ac)

void PRNT_OBJ_3C8(undefined4 param_1,uint param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  uint in_v1;
  undefined4 *puVar4;
  undefined4 *puVar5;
  uint unaff_s3;
  int unaff_s4;
  int iVar6;
  int iVar7;
  char *unaff_s7;
  uint uVar8;
  undefined auStackX_0 [16];
  int in_stack_00000038;
  int in_stack_00000040;
  int in_stack_00000044;
  int in_stack_00000048;
  undefined auStack_38 [56];
  
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar5 = &stack0x00000038;
  if ((in_v1 != 0) || (iVar3 = (int)auStackX_0 - (int)puVar5, unaff_s4 != 0)) {
    do {
      puVar4 = puVar5;
      uVar8 = in_v1 / param_2;
      if (param_2 == 0) {
        trap(0x1c00);
      }
      cVar1 = *(char *)(in_stack_00000048 + in_v1 % param_2);
      puVar5 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar5 = cVar1;
      in_v1 = uVar8;
    } while (uVar8 != 0);
    if ((unaff_s3 & 8) != 0) {
      iVar3 = (int)auStackX_0 - (int)puVar5;
      if ((param_2 != 8) || (iVar3 = (int)auStackX_0 - (int)puVar5, cVar1 == '0'))
      goto PRNT_OBJ_468;
      puVar5 = (undefined4 *)((int)puVar4 + -2);
      *(char *)puVar5 = '0';
    }
    iVar3 = (int)auStackX_0 - (int)puVar5;
  }
PRNT_OBJ_468:
  iVar6 = iVar3 + 0x38 + in_stack_00000040;
  if ((unaff_s3 & 0x40) != 0) {
    iVar6 = iVar6 + 2;
  }
  iVar7 = unaff_s4;
  if (unaff_s4 < iVar6) {
    iVar7 = iVar6;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar2 = iVar7, in_stack_00000044 != 0)) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar2 = iVar7;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  if (iVar6 < unaff_s4) {
    do {
      FUN_8005ff94(0x30);
      iVar6 = iVar6 + 1;
    } while (iVar6 < unaff_s4);
  }
  if ((-1 < iVar3 + 0x37) && (FUN_8005ff94((int)*(char *)puVar5), -1 < iVar3 + 0x36)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  iVar3 = iVar7;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar3 < in_stack_00000044; iVar3 = iVar3 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (in_stack_00000044 < iVar7) {
    in_stack_00000044 = iVar7;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000044;
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_3CC(undefined4 param_1,uint param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  uint in_v1;
  undefined4 *puVar4;
  undefined4 *puVar5;
  uint unaff_s3;
  int unaff_s4;
  int iVar6;
  int iVar7;
  char *unaff_s7;
  int unaff_s8;
  uint uVar8;
  undefined auStackX_0 [16];
  int in_stack_00000038;
  int in_stack_00000040;
  int in_stack_00000044;
  int param_14;
  undefined auStack_38 [56];
  
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar5 = &stack0x00000038;
  if ((in_v1 != 0) || (iVar3 = (int)auStackX_0 - (int)puVar5, unaff_s4 != 0)) {
    do {
      puVar4 = puVar5;
      uVar8 = in_v1 / param_2;
      if (param_2 == 0) {
        trap(0x1c00);
      }
      cVar1 = *(char *)(param_14 + in_v1 % param_2);
      puVar5 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar5 = cVar1;
      in_v1 = uVar8;
    } while (uVar8 != 0);
    if ((unaff_s3 & 8) != 0) {
      iVar3 = (int)auStackX_0 - (int)puVar5;
      if ((param_2 != 8) || (iVar3 = (int)auStackX_0 - (int)puVar5, cVar1 == '0'))
      goto PRNT_OBJ_468;
      puVar5 = (undefined4 *)((int)puVar4 + -2);
      *(char *)puVar5 = '0';
    }
    iVar3 = (int)auStackX_0 - (int)puVar5;
  }
PRNT_OBJ_468:
  iVar6 = iVar3 + 0x38 + in_stack_00000040;
  if (unaff_s8 != 0) {
    iVar6 = iVar6 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar6 = iVar6 + 2;
  }
  iVar7 = unaff_s4;
  if (unaff_s4 < iVar6) {
    iVar7 = iVar6;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar2 = iVar7, in_stack_00000044 != 0)) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar2 = iVar7;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar2 < in_stack_00000044; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  if (iVar6 < unaff_s4) {
    do {
      FUN_8005ff94(0x30);
      iVar6 = iVar6 + 1;
    } while (iVar6 < unaff_s4);
  }
  if ((-1 < iVar3 + 0x37) && (FUN_8005ff94((int)*(char *)puVar5), -1 < iVar3 + 0x36)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  iVar3 = iVar7;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar3 < in_stack_00000044; iVar3 = iVar3 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (in_stack_00000044 < iVar7) {
    in_stack_00000044 = iVar7;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000044;
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_46C(void)

{
  int iVar1;
  int iVar2;
  char *unaff_s2;
  uint unaff_s3;
  int iVar3;
  int unaff_s6;
  char *unaff_s7;
  int unaff_s8;
  int param_11;
  int param_12;
  int param_13;
  
  iVar3 = unaff_s6 + param_12;
  if (unaff_s8 != 0) {
    iVar3 = iVar3 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar3 = iVar3 + 2;
  }
  iVar2 = param_11;
  if (param_11 < iVar3) {
    iVar2 = iVar3;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar2, param_13 != 0)) {
    for (; iVar1 < param_13; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  if (unaff_s8 != 0) {
    FUN_8005ff94();
  }
  if ((unaff_s3 & 0x40) != 0) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)*unaff_s7);
  }
  iVar1 = iVar2;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < param_13; iVar1 = iVar1 + 1) {
      FUN_8005ff94(0x30);
    }
  }
  for (; iVar3 < param_11; iVar3 = iVar3 + 1) {
    FUN_8005ff94(0x30);
  }
  if ((-1 < unaff_s6 + -1) && (FUN_8005ff94((int)*unaff_s2), -1 < unaff_s6 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (param_12 = param_12 + -1, -1 < param_12) {
    FUN_8005ff94(0x30);
  }
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < param_13; iVar2 = iVar2 + 1) {
      FUN_8005ff94(0x20);
    }
  }
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_58C(void)

{
  int unaff_s0;
  char *unaff_s2;
  uint unaff_s3;
  int unaff_s5;
  int param_12;
  int param_13;
  
  FUN_8005ff94((int)*unaff_s2);
  if (-1 < unaff_s0 + -1) {
    PRNT_OBJ_58C();
    return;
  }
  while (param_12 = param_12 + -1, -1 < param_12) {
    FUN_8005ff94(0x30);
  }
  if (((unaff_s3 & 0x10) != 0) && (unaff_s5 < param_13)) {
    do {
      FUN_8005ff94(0x20);
      unaff_s5 = unaff_s5 + 1;
    } while (unaff_s5 < param_13);
  }
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_630(void)

{
  FUN_80060090();
  PRNT_OBJ_664();
  return;
}



void PRNT_OBJ_644(void)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  bool bVar4;
  bool bVar5;
  bool bVar6;
  void *pvVar7;
  int *piVar8;
  uint uVar9;
  int **ppiVar10;
  int **unaff_s1;
  char *pcVar11;
  uint uVar12;
  int *piVar13;
  int iVar14;
  byte *pbVar15;
  byte *unaff_s7;
  int iVar16;
  int *piVar17;
  undefined auStackX_0 [16];
  undefined2 param_11;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
code_r0x8005f808:
  uVar9 = (uint)(char)*unaff_s7;
  _param_11 = _param_11 + 1;
  do {
    FUN_8005ff94(uVar9);
    unaff_s7 = unaff_s7 + 1;
    uVar9 = (uint)*unaff_s7;
    if (uVar9 == 0) goto PRNT_OBJ_630;
    uVar12 = 0;
    bVar3 = false;
    bVar6 = false;
    bVar5 = false;
    bVar4 = false;
  } while (uVar9 != 0x25);
  piVar13 = (int *)0xffffffff;
  iVar16 = 0;
  in_stack_0000003c = (int *)0x0;
  in_stack_00000040 = 0;
  in_stack_00000044 = (int *)0x0;
  uVar9 = 0x25;
  pbVar15 = unaff_s7;
code_r0x8005f240:
  unaff_s7 = pbVar15 + 1;
  ppiVar10 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
    goto PRNT_OBJ_630;
  case 0x20:
    pbVar15 = unaff_s7;
    if (iVar16 == 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x23:
    bVar6 = true;
    pbVar15 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2a:
    ppiVar10 = unaff_s1 + 1;
    in_stack_00000044 = *unaff_s1;
    unaff_s1 = ppiVar10;
    pbVar15 = unaff_s7;
    if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
    in_stack_00000044 = (int *)-(int)in_stack_00000044;
  case 0x2d:
    uVar12 = uVar12 | 0x10;
    unaff_s1 = ppiVar10;
    pbVar15 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2b:
    iVar16 = 0x2b;
    pbVar15 = unaff_s7;
    goto code_r0x8005f240;
  case 0x2e:
    pbVar15 = pbVar15 + 2;
    bVar1 = *pbVar15;
    if (bVar1 == 0x2a) {
      PRNT_OBJ_168();
      return;
    }
    piVar13 = (int *)0x0;
    while ((bVar1 < 0x80 && (uVar9 = (uint)*pbVar15, ((&DAT_80066ca9)[uVar9] & 4) != 0))) {
      pbVar15 = pbVar15 + 1;
      bVar1 = *pbVar15;
      piVar13 = (int *)((int)piVar13 * 10 + -0x30 + uVar9);
    }
    pbVar15 = pbVar15 + -1;
    if ((int)piVar13 < 0) {
      PRNT_OBJ_7C();
      return;
    }
    goto code_r0x8005f240;
  case 0x30:
    uVar12 = uVar12 | 0x20;
    pbVar15 = unaff_s7;
    goto code_r0x8005f240;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000044 = (int *)0x0;
    goto PRNT_OBJ_184;
  case 0x44:
    bVar4 = true;
  case 100:
  case 0x69:
    if ((!bVar4) && (bVar5)) {
      PRNT_OBJ_244();
      return;
    }
    piVar8 = *unaff_s1;
    uVar9 = 10;
    if ((int)piVar8 < 0) {
      PRNT_OBJ_3CC();
      return;
    }
    goto code_r0x8005f590;
  case 0x4c:
    pbVar15 = unaff_s7;
    goto code_r0x8005f240;
  case 0x4f:
    bVar4 = true;
  case 0x6f:
    if ((!bVar4) && (bVar5)) {
      PRNT_OBJ_3CC(uVar9,8);
      return;
    }
    PRNT_OBJ_3C8(uVar9,8);
    return;
  case 0x55:
    bVar4 = true;
  case 0x75:
    if ((!bVar4) && (bVar5)) {
      PRNT_OBJ_3CC(uVar9,10);
      return;
    }
    PRNT_OBJ_3C8(uVar9,10);
    return;
  case 0x58:
    in_stack_00000048 = "0123456789ABCDEF";
  case 0x78:
    if ((!bVar4) && (bVar5)) {
      PRNT_OBJ_3B4(uVar9,0x10);
      return;
    }
    piVar8 = *unaff_s1;
    uVar9 = 0x10;
    iVar16 = 0;
    if ((bVar6) && (piVar8 != (int *)0x0)) {
      bVar3 = true;
      iVar16 = 0;
    }
code_r0x8005f590:
    in_stack_0000003c = piVar13;
    if (-1 < (int)piVar13) {
      uVar12 = uVar12 & 0xffffffdf;
    }
    pcVar11 = (char *)&stack0x00000038;
    if ((piVar8 != (int *)0x0) || (iVar14 = (int)auStackX_0 - (int)pcVar11, piVar13 != (int *)0x0))
    goto PRNT_OBJ_3F4;
    goto PRNT_OBJ_468;
  case 99:
    PRNT_OBJ_46C();
    return;
  case 0x68:
    bVar5 = true;
    pbVar15 = unaff_s7;
    goto code_r0x8005f240;
  case 0x6c:
    goto PRNT_OBJ_1EC;
  case 0x6e:
    if ((!bVar4) && (bVar5)) {
      *(undefined2 *)*unaff_s1 = param_11;
      PRNT_OBJ_65C();
      return;
    }
    **unaff_s1 = _param_11;
    PRNT_OBJ_65C();
    return;
  case 0x70:
    PRNT_OBJ_3C8(uVar9,0x10);
    return;
  case 0x73:
    pcVar11 = (char *)*unaff_s1;
    if ((int *)pcVar11 == (int *)0x0) {
      pcVar11 = "(null)";
    }
    if ((int)piVar13 < 0) {
      iVar14 = strlen(pcVar11);
      iVar16 = 0;
    }
    else {
      pvVar7 = memchr((uchar *)pcVar11,'\0',(int)piVar13);
      iVar14 = (int)pvVar7 - (int)pcVar11;
      if ((pvVar7 == (void *)0x0) || (iVar16 = 0, (int)piVar13 < iVar14)) {
        PRNT_OBJ_334();
        return;
      }
    }
    goto code_r0x8005f630;
  }
  goto code_r0x8005f808;
PRNT_OBJ_1EC:
  bVar4 = true;
  pbVar15 = unaff_s7;
  goto code_r0x8005f240;
PRNT_OBJ_630:
  FUN_80060090();
  PRNT_OBJ_664();
  return;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar13 = (int *)pcVar11;
    piVar17 = (int *)((uint)piVar8 / uVar9);
    if (uVar9 == 0) {
      trap(0x1c00);
    }
    cVar2 = in_stack_00000048[(uint)piVar8 % uVar9];
    pcVar11 = (char *)((int)piVar13 + -1);
    *pcVar11 = cVar2;
    piVar8 = piVar17;
  } while (piVar17 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if (bVar6) {
    iVar14 = (int)auStackX_0 - (int)pcVar11;
    if ((uVar9 != 8) || (iVar14 = (int)auStackX_0 - (int)pcVar11, cVar2 == '0')) goto PRNT_OBJ_468;
    pcVar11 = (char *)((int)piVar13 + -2);
    *pcVar11 = '0';
  }
  iVar14 = (int)auStackX_0 - (int)pcVar11;
PRNT_OBJ_468:
  iVar14 = iVar14 + 0x38;
code_r0x8005f630:
  piVar13 = (int *)(iVar14 + in_stack_00000040);
  if (iVar16 != 0) {
    piVar13 = (int *)((int)piVar13 + 1);
  }
  if (bVar3) {
    piVar13 = (int *)((int)piVar13 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar13) {
    piVar8 = piVar13;
  }
  if (((uVar12 == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar17 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar17 = (int *)((int)piVar17 + 1);
    } while ((int)piVar17 < (int)in_stack_00000044);
  }
  if (iVar16 != 0) {
    FUN_8005ff94();
  }
  if (bVar3) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if ((uVar12 == 0x20) && (piVar17 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar17 = (int *)((int)piVar17 + 1);
    } while ((int)piVar17 < (int)in_stack_00000044);
  }
  if ((int)piVar13 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar13 = (int *)((int)piVar13 + 1);
    } while ((int)piVar13 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar14 + -1) && (FUN_8005ff94((int)*pcVar11), -1 < iVar14 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((uVar12 & 0x10) != 0) && (piVar13 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar13 = (int *)((int)piVar13 + 1);
    } while ((int)piVar13 < (int)in_stack_00000044);
  }
  piVar13 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar13 = piVar8;
  }
  _param_11 = _param_11 + (int)piVar13;
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_65C(void)

{
  byte bVar1;
  uchar uVar2;
  bool bVar3;
  bool bVar4;
  bool bVar5;
  bool bVar6;
  void *pvVar7;
  int *piVar8;
  uint uVar9;
  int **ppiVar10;
  int **unaff_s1;
  char *pcVar11;
  uint uVar12;
  int *piVar13;
  int iVar14;
  byte *pbVar15;
  byte *unaff_s7;
  int iVar16;
  int *piVar17;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_0000003c;
  int in_stack_00000040;
  int *in_stack_00000044;
  char *in_stack_00000048;
  undefined auStack_38 [56];
  
  do {
    unaff_s7 = unaff_s7 + 1;
    uVar9 = (uint)*unaff_s7;
    if (uVar9 == 0) {
PRNT_OBJ_630:
      FUN_80060090();
      PRNT_OBJ_664();
      return;
    }
    uVar12 = 0;
    bVar3 = false;
    bVar6 = false;
    bVar5 = false;
    bVar4 = false;
    if (uVar9 == 0x25) {
      piVar13 = (int *)0xffffffff;
      iVar16 = 0;
      in_stack_0000003c = (int *)0x0;
      in_stack_00000040 = 0;
      in_stack_00000044 = (int *)0x0;
      uVar9 = 0x25;
      pbVar15 = unaff_s7;
code_r0x8005f240:
      unaff_s7 = pbVar15 + 1;
      ppiVar10 = unaff_s1;
      switch(*unaff_s7) {
      case 0:
        goto PRNT_OBJ_630;
      default:
        uVar9 = (uint)(char)*unaff_s7;
        _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
        break;
      case 0x20:
        pbVar15 = unaff_s7;
        if (iVar16 == 0) {
          PRNT_OBJ_7C();
          return;
        }
        goto code_r0x8005f240;
      case 0x23:
        bVar6 = true;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x2a:
        ppiVar10 = unaff_s1 + 1;
        in_stack_00000044 = *unaff_s1;
        unaff_s1 = ppiVar10;
        pbVar15 = unaff_s7;
        if (-1 < (int)in_stack_00000044) goto code_r0x8005f240;
        in_stack_00000044 = (int *)-(int)in_stack_00000044;
      case 0x2d:
        uVar12 = uVar12 | 0x10;
        unaff_s1 = ppiVar10;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x2b:
        iVar16 = 0x2b;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x2e:
        pbVar15 = pbVar15 + 2;
        bVar1 = *pbVar15;
        if (bVar1 == 0x2a) {
          PRNT_OBJ_168();
          return;
        }
        piVar13 = (int *)0x0;
        while ((bVar1 < 0x80 && (uVar9 = (uint)*pbVar15, ((&DAT_80066ca9)[uVar9] & 4) != 0))) {
          pbVar15 = pbVar15 + 1;
          bVar1 = *pbVar15;
          piVar13 = (int *)((int)piVar13 * 10 + -0x30 + uVar9);
        }
        pbVar15 = pbVar15 + -1;
        if ((int)piVar13 < 0) {
          PRNT_OBJ_7C();
          return;
        }
        goto code_r0x8005f240;
      case 0x30:
        uVar12 = uVar12 | 0x20;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x31:
      case 0x32:
      case 0x33:
      case 0x34:
      case 0x35:
      case 0x36:
      case 0x37:
      case 0x38:
      case 0x39:
        in_stack_00000044 = (int *)0x0;
        goto PRNT_OBJ_184;
      case 0x44:
        bVar4 = true;
      case 100:
      case 0x69:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_244();
          return;
        }
        piVar8 = *unaff_s1;
        uVar9 = 10;
        if ((int)piVar8 < 0) {
          PRNT_OBJ_3CC();
          return;
        }
        goto code_r0x8005f590;
      case 0x4c:
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x4f:
        bVar4 = true;
      case 0x6f:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_3CC(uVar9,8);
          return;
        }
        PRNT_OBJ_3C8(uVar9,8);
        return;
      case 0x55:
        bVar4 = true;
      case 0x75:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_3CC(uVar9,10);
          return;
        }
        PRNT_OBJ_3C8(uVar9,10);
        return;
      case 0x58:
        in_stack_00000048 = "0123456789ABCDEF";
      case 0x78:
        if ((!bVar4) && (bVar5)) {
          PRNT_OBJ_3B4(uVar9,0x10);
          return;
        }
        piVar8 = *unaff_s1;
        uVar9 = 0x10;
        iVar16 = 0;
        if ((bVar6) && (piVar8 != (int *)0x0)) {
          bVar3 = true;
          iVar16 = 0;
        }
code_r0x8005f590:
        in_stack_0000003c = piVar13;
        if (-1 < (int)piVar13) {
          uVar12 = uVar12 & 0xffffffdf;
        }
        pcVar11 = (char *)&stack0x00000038;
        if ((piVar8 != (int *)0x0) ||
           (iVar14 = (int)auStackX_0 - (int)pcVar11, piVar13 != (int *)0x0)) goto PRNT_OBJ_3F4;
        goto PRNT_OBJ_468;
      case 99:
        PRNT_OBJ_46C();
        return;
      case 0x68:
        bVar5 = true;
        pbVar15 = unaff_s7;
        goto code_r0x8005f240;
      case 0x6c:
        goto PRNT_OBJ_1EC;
      case 0x6e:
        if ((!bVar4) && (bVar5)) {
          *(undefined2 *)*unaff_s1 = uStack00000038;
          PRNT_OBJ_65C();
          return;
        }
        **unaff_s1 = (int)_uStack00000038;
        PRNT_OBJ_65C();
        return;
      case 0x70:
        PRNT_OBJ_3C8(uVar9,0x10);
        return;
      case 0x73:
        pcVar11 = (char *)*unaff_s1;
        if ((int *)pcVar11 == (int *)0x0) {
          pcVar11 = "(null)";
        }
        if ((int)piVar13 < 0) {
          iVar14 = strlen(pcVar11);
          iVar16 = 0;
        }
        else {
          pvVar7 = memchr((uchar *)pcVar11,'\0',(int)piVar13);
          iVar14 = (int)pvVar7 - (int)pcVar11;
          if ((pvVar7 == (void *)0x0) || (iVar16 = 0, (int)piVar13 < iVar14)) {
            PRNT_OBJ_334();
            return;
          }
        }
        goto code_r0x8005f630;
      }
    }
    FUN_8005ff94(uVar9);
  } while( true );
PRNT_OBJ_1EC:
  bVar4 = true;
  pbVar15 = unaff_s7;
  goto code_r0x8005f240;
  while (((&DAT_80066ca9)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_184:
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000044 = (int *)((int)in_stack_00000044 * 10 + -0x30 + (uint)bVar1);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_7C();
  return;
PRNT_OBJ_3F4:
  do {
    piVar13 = (int *)pcVar11;
    piVar17 = (int *)((uint)piVar8 / uVar9);
    if (uVar9 == 0) {
      trap(0x1c00);
    }
    uVar2 = in_stack_00000048[(uint)piVar8 % uVar9];
    pcVar11 = (char *)((int)piVar13 + -1);
    *pcVar11 = uVar2;
    piVar8 = piVar17;
  } while (piVar17 != (int *)0x0);
  in_stack_00000048 = "0123456789abcdef";
  if (bVar6) {
    iVar14 = (int)auStackX_0 - (int)pcVar11;
    if ((uVar9 != 8) || (iVar14 = (int)auStackX_0 - (int)pcVar11, uVar2 == '0')) goto PRNT_OBJ_468;
    pcVar11 = (char *)((int)piVar13 + -2);
    *pcVar11 = '0';
  }
  iVar14 = (int)auStackX_0 - (int)pcVar11;
PRNT_OBJ_468:
  iVar14 = iVar14 + 0x38;
code_r0x8005f630:
  piVar13 = (int *)(iVar14 + in_stack_00000040);
  if (iVar16 != 0) {
    piVar13 = (int *)((int)piVar13 + 1);
  }
  if (bVar3) {
    piVar13 = (int *)((int)piVar13 + 2);
  }
  piVar8 = in_stack_0000003c;
  if ((int)in_stack_0000003c < (int)piVar13) {
    piVar8 = piVar13;
  }
  if (((uVar12 == 0) && (in_stack_00000044 != (int *)0x0)) &&
     (piVar17 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar17 = (int *)((int)piVar17 + 1);
    } while ((int)piVar17 < (int)in_stack_00000044);
  }
  if (iVar16 != 0) {
    FUN_8005ff94();
  }
  if (bVar3) {
    FUN_8005ff94(0x30);
    FUN_8005ff94((int)(char)*unaff_s7);
  }
  if ((uVar12 == 0x20) && (piVar17 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x30);
      piVar17 = (int *)((int)piVar17 + 1);
    } while ((int)piVar17 < (int)in_stack_00000044);
  }
  if ((int)piVar13 < (int)in_stack_0000003c) {
    do {
      FUN_8005ff94(0x30);
      piVar13 = (int *)((int)piVar13 + 1);
    } while ((int)piVar13 < (int)in_stack_0000003c);
  }
  if ((-1 < iVar14 + -1) && (FUN_8005ff94((int)*pcVar11), -1 < iVar14 + -2)) {
    PRNT_OBJ_58C();
    return;
  }
  while (in_stack_00000040 = in_stack_00000040 + -1, -1 < in_stack_00000040) {
    FUN_8005ff94(0x30);
  }
  if (((uVar12 & 0x10) != 0) && (piVar13 = piVar8, (int)piVar8 < (int)in_stack_00000044)) {
    do {
      FUN_8005ff94(0x20);
      piVar13 = (int *)((int)piVar13 + 1);
    } while ((int)piVar13 < (int)in_stack_00000044);
  }
  piVar13 = in_stack_00000044;
  if ((int)in_stack_00000044 < (int)piVar8) {
    piVar13 = piVar8;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar13);
  PRNT_OBJ_65C();
  return;
}



void PRNT_OBJ_664(void)

{
  return;
}



void SysDeqIntRP(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000c0)();
  return;
}



void SysEnqIntRP(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000c0)();
  return;
}



void setRC2wait(undefined4 param_1)

{
  DAT_8006d20c = param_1;
  DAT_8006d210 = (uint)(ushort)TMR_SYSCLOCK_VAL;
  return;
}



uint chkRC2wait(void)

{
  uint uVar1;
  
  uVar1 = (uint)(ushort)TMR_SYSCLOCK_VAL;
  if (uVar1 < DAT_8006d210) {
    if ((ushort)TMR_SYSCLOCK_MAX != 0) {
      uVar1 = WAITRC2_OBJ_68(uVar1 + (ushort)TMR_SYSCLOCK_MAX);
      return uVar1;
    }
    uVar1 = uVar1 + 0x10000;
  }
  if (((ushort)TMR_SYSCLOCK_MODE & 0x200) == 0) {
    uVar1 = WAITRC2_OBJ_B4();
    return uVar1;
  }
  return uVar1 - DAT_8006d210 < DAT_8006d20c ^ 1;
}



uint WAITRC2_OBJ_68(int param_1)

{
  uint uVar1;
  
  if (((ushort)TMR_SYSCLOCK_MODE & 0x200) == 0) {
    uVar1 = WAITRC2_OBJ_B4();
    return uVar1;
  }
  return (uint)(param_1 - DAT_8006d210) < DAT_8006d20c ^ 1;
}



bool WAITRC2_OBJ_B4(void)

{
  uint in_v0;
  uint in_v1;
  
  return in_v1 <= in_v0;
}



void PADIF_OBJ_0(int param_1)

{
  DAT_80066c20 = (*DAT_80066678)();
  **(undefined **)(param_1 + 0x3c) = 0;
  FUN_8005b7ac(param_1,0xfffffffe);
  return;
}



void PADIF_OBJ_48(int param_1)

{
  if ((DAT_800666a0 == DAT_800666b0) && (DAT_8006669c != 0)) {
    (*DAT_80066690)();
    (*DAT_8006668c)();
  }
  if (DAT_80066c20 != 0) {
    (*DAT_80066678)(*(undefined4 *)(param_1 + 0xc));
    (*DAT_80066678)(*(int *)(param_1 + 0xc) + 0xf0);
  }
  if (*(char *)(param_1 + 0x37) == '\0') {
    PADIF_OBJ_108(param_1,0x42);
    return;
  }
  FUN_8005b9bc(param_1,*(undefined *)(param_1 + 0x37));
  return;
}



void PADIF_OBJ_108(void)

{
  FUN_8005b9bc();
  return;
}



uint PADIF_OBJ_120(int param_1)

{
  uint uVar1;
  uint uVar2;
  undefined4 uVar3;
  
  if (DAT_80066c20 != 0) {
    (*DAT_80066678)(*(int *)(param_1 + 0xc) + 0x1e0);
    (*DAT_80066678)(*(int *)(param_1 + 0xc) + 0x2d0);
  }
  uVar3 = 0;
  if (*(char *)(param_1 + 0x37) == '\0') {
    uVar3 = DAT_800666ac;
  }
  uVar1 = FUN_8005b9bc(param_1,uVar3);
  if (-1 < (int)uVar1) {
    uVar2 = uVar1 & 0xf;
    DAT_80066c18 = uVar2 << 1;
    uVar1 = 0;
    if (uVar2 == 0) {
      DAT_80066c18 = 0x20;
      uVar1 = 0;
    }
  }
  return uVar1;
}



int PADIF_OBJ_1CC(int param_1)

{
  undefined uVar1;
  int iVar2;
  int iVar3;
  
  DAT_80066c24 = 0;
  if ((DAT_800666ac != 0) && (**(byte **)(param_1 + 0x3c) >> 4 == 8)) {
    DAT_80066c24 = (uint)(*(char *)(param_1 + 0x37) == '\0');
  }
  if (DAT_80066c24 == 0) {
    (*DAT_8006666c)(param_1);
  }
  uVar1 = (*DAT_80066668)(param_1,DAT_80066c24);
  iVar2 = FUN_8005b9bc(param_1,uVar1);
  iVar3 = iVar2;
  if (((iVar2 != 0x5a) && (iVar2 != 0)) && (iVar3 = -4, iVar2 < 0)) {
    iVar3 = iVar2;
  }
  return iVar3;
}



int PADIF_OBJ_290(int param_1)

{
  byte bVar1;
  bool bVar2;
  undefined uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int *piVar8;
  
  if (DAT_80066c24 != 0) {
    (*DAT_8006666c)();
  }
  iVar5 = DAT_80066c24;
  iVar6 = -1;
  if (DAT_80066c24 != 0) {
    iVar7 = -0xf0;
    do {
      DAT_80066c18 = DAT_80066c18 + -1;
      if (DAT_80066c18 < 1) break;
      if (-1 < iVar6) {
        (*DAT_8006666c)(*(int *)(param_1 + 0xc) + iVar7);
      }
      uVar3 = (*DAT_80066668)(param_1,1);
      iVar4 = FUN_8005b9bc(param_1,uVar3);
      if (iVar4 < 0) {
        return iVar4;
      }
      setRC2wait(0x3c);
      iVar4 = FUN_8005bc34();
      iVar6 = iVar6 + 1;
      if (iVar4 == 0) goto PADIF_OBJ_4F0;
      iVar7 = iVar7 + 0xf0;
    } while (iVar6 < 4);
  }
  iVar6 = 0;
  bVar2 = DAT_800666a0 == 0;
  if (1 < DAT_80066c18) {
    piVar8 = (int *)(&DAT_800666b8 + (uint)bVar2 * 4);
    do {
      iVar7 = *piVar8;
      if (iVar7 < 0) break;
      if (0 < iVar7) {
        iVar6 = *(int *)((uint)bVar2 * 0xf0 + DAT_80066694 + 0xc) + iVar7 * 0xf0 + -0xf0;
        (*DAT_80066680)(iVar6);
      }
      iVar7 = *piVar8;
      if (iVar7 == 3) {
        (*DAT_80066680)(iVar6 + -0xf0);
        iVar5 = PADIF_OBJ_4A8();
        return iVar5;
      }
      if (iVar7 < 4) {
        if ((iVar7 < 2) && (-1 < iVar7)) {
          iVar5 = PADIF_OBJ_46C();
          return iVar5;
        }
      }
      else if (iVar7 == 4) {
        *piVar8 = 3;
        iVar5 = PADIF_OBJ_4B0(param_1);
        return iVar5;
      }
      uVar3 = (*DAT_80066668)(param_1,iVar5);
      iVar7 = FUN_8005b7ac(param_1,uVar3);
      if (iVar7 < 0) {
        return iVar7;
      }
      setRC2wait(0x3c);
      iVar7 = FUN_8005bc34();
      if (iVar7 == 0) {
PADIF_OBJ_4F0:
        iVar5 = PADIF_OBJ_600();
        return iVar5;
      }
      DAT_80066c18 = DAT_80066c18 + -1;
    } while (1 < DAT_80066c18);
  }
  while( true ) {
    DAT_80066c18 = DAT_80066c18 + -1;
    if (DAT_80066c18 < 1) {
      FUN_8005bcc4();
      bVar1 = *(byte *)(param_1 + 0x44);
      *(byte *)(param_1 + 0x44) = bVar1 + 1;
      *(undefined *)((uint)bVar1 + *(int *)(param_1 + 0x3c)) = *PTR_JOY_MCD_DATA_80066c1c;
      (*DAT_80066660)(0);
      return 0;
    }
    uVar3 = (*DAT_80066668)(param_1,iVar5);
    iVar6 = FUN_8005b7ac(param_1,uVar3);
    if (iVar6 < 0) break;
    if (*(short *)(PTR_JOY_MCD_DATA_80066c1c + 0xe) != 0x22) {
      setRC2wait(0x3c);
      iVar6 = FUN_8005bc34();
      if (iVar6 == 0) {
        return -3;
      }
    }
  }
  return iVar6;
}



int PADIF_OBJ_46C(void)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int unaff_s1;
  int *unaff_s2;
  int unaff_s3;
  int unaff_s5;
  
  iVar4 = DAT_80066694 + unaff_s3;
  (*DAT_80066680)(iVar4);
  (*DAT_80066684)(iVar4);
  *unaff_s2 = -1;
  while( true ) {
    (*DAT_80066668)();
    iVar2 = FUN_8005b7ac();
    if (iVar2 < 0) {
      return iVar2;
    }
    setRC2wait(0x3c);
    iVar2 = FUN_8005bc34();
    if (iVar2 == 0) {
      iVar4 = PADIF_OBJ_600();
      return iVar4;
    }
    iVar2 = DAT_80066c18 + -1;
    if ((iVar2 < 2) || (iVar3 = *unaff_s2, iVar3 < 0)) {
      DAT_80066c18 = DAT_80066c18 + -2;
      while( true ) {
        if (DAT_80066c18 < 1) {
          FUN_8005bcc4();
          bVar1 = *(byte *)(unaff_s1 + 0x44);
          *(byte *)(unaff_s1 + 0x44) = bVar1 + 1;
          *(undefined *)((uint)bVar1 + *(int *)(unaff_s1 + 0x3c)) = *PTR_JOY_MCD_DATA_80066c1c;
          (*DAT_80066660)(0);
          return 0;
        }
        (*DAT_80066668)();
        iVar4 = FUN_8005b7ac();
        if (iVar4 < 0) break;
        if (*(short *)(PTR_JOY_MCD_DATA_80066c1c + 0xe) != 0x22) {
          setRC2wait(0x3c);
          iVar4 = FUN_8005bc34();
          if (iVar4 == 0) {
            return -3;
          }
        }
        DAT_80066c18 = DAT_80066c18 + -1;
      }
      return iVar4;
    }
    DAT_80066c18 = iVar2;
    if (0 < iVar3) {
      iVar4 = *(int *)(unaff_s3 + DAT_80066694 + 0xc) + iVar3 * 0xf0 + -0xf0;
      (*DAT_80066680)(iVar4);
    }
    iVar2 = *unaff_s2;
    if (iVar2 == unaff_s5) break;
    if (iVar2 < 4) {
      if ((iVar2 < 2) && (-1 < iVar2)) {
        iVar4 = PADIF_OBJ_46C();
        return iVar4;
      }
    }
    else if (iVar2 == 4) {
      *unaff_s2 = unaff_s5;
      iVar4 = PADIF_OBJ_4B0();
      return iVar4;
    }
  }
  (*DAT_80066680)(iVar4 + -0xf0);
  iVar4 = PADIF_OBJ_4A8();
  return iVar4;
}



int PADIF_OBJ_4A8(void)

{
  byte bVar1;
  int in_v0;
  int iVar2;
  int iVar3;
  int unaff_s0;
  int unaff_s1;
  int *unaff_s2;
  int unaff_s3;
  int unaff_s5;
  
  *unaff_s2 = in_v0;
  while( true ) {
    (*DAT_80066668)();
    iVar2 = FUN_8005b7ac();
    if (iVar2 < 0) {
      return iVar2;
    }
    setRC2wait(0x3c);
    iVar2 = FUN_8005bc34();
    if (iVar2 == 0) {
      iVar2 = PADIF_OBJ_600();
      return iVar2;
    }
    iVar2 = DAT_80066c18 + -1;
    if ((iVar2 < 2) || (iVar3 = *unaff_s2, iVar3 < 0)) {
      DAT_80066c18 = DAT_80066c18 + -2;
      while( true ) {
        if (DAT_80066c18 < 1) {
          FUN_8005bcc4();
          bVar1 = *(byte *)(unaff_s1 + 0x44);
          *(byte *)(unaff_s1 + 0x44) = bVar1 + 1;
          *(undefined *)((uint)bVar1 + *(int *)(unaff_s1 + 0x3c)) = *PTR_JOY_MCD_DATA_80066c1c;
          (*DAT_80066660)(0);
          return 0;
        }
        (*DAT_80066668)();
        iVar2 = FUN_8005b7ac();
        if (iVar2 < 0) break;
        if (*(short *)(PTR_JOY_MCD_DATA_80066c1c + 0xe) != 0x22) {
          setRC2wait(0x3c);
          iVar2 = FUN_8005bc34();
          if (iVar2 == 0) {
            return -3;
          }
        }
        DAT_80066c18 = DAT_80066c18 + -1;
      }
      return iVar2;
    }
    DAT_80066c18 = iVar2;
    if (0 < iVar3) {
      unaff_s0 = *(int *)(unaff_s3 + DAT_80066694 + 0xc) + iVar3 * 0xf0 + -0xf0;
      (*DAT_80066680)(unaff_s0);
    }
    iVar2 = *unaff_s2;
    if (iVar2 == unaff_s5) break;
    if (iVar2 < 4) {
      if ((iVar2 < 2) && (-1 < iVar2)) {
        iVar2 = PADIF_OBJ_46C();
        return iVar2;
      }
    }
    else if (iVar2 == 4) {
      *unaff_s2 = unaff_s5;
      iVar2 = PADIF_OBJ_4B0();
      return iVar2;
    }
  }
  (*DAT_80066680)(unaff_s0 + -0xf0);
  iVar2 = PADIF_OBJ_4A8();
  return iVar2;
}



int PADIF_OBJ_4B0(void)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  int unaff_s0;
  int unaff_s1;
  int *unaff_s2;
  int unaff_s3;
  int unaff_s5;
  
  while( true ) {
    (*DAT_80066668)();
    iVar2 = FUN_8005b7ac();
    if (iVar2 < 0) {
      return iVar2;
    }
    setRC2wait(0x3c);
    iVar2 = FUN_8005bc34();
    if (iVar2 == 0) {
      iVar2 = PADIF_OBJ_600();
      return iVar2;
    }
    iVar2 = DAT_80066c18 + -1;
    if ((iVar2 < 2) || (iVar3 = *unaff_s2, iVar3 < 0)) {
      DAT_80066c18 = DAT_80066c18 + -2;
      while( true ) {
        if (DAT_80066c18 < 1) {
          FUN_8005bcc4();
          bVar1 = *(byte *)(unaff_s1 + 0x44);
          *(byte *)(unaff_s1 + 0x44) = bVar1 + 1;
          *(undefined *)((uint)bVar1 + *(int *)(unaff_s1 + 0x3c)) = *PTR_JOY_MCD_DATA_80066c1c;
          (*DAT_80066660)(0);
          return 0;
        }
        (*DAT_80066668)();
        iVar2 = FUN_8005b7ac();
        if (iVar2 < 0) break;
        if (*(short *)(PTR_JOY_MCD_DATA_80066c1c + 0xe) != 0x22) {
          setRC2wait(0x3c);
          iVar2 = FUN_8005bc34();
          if (iVar2 == 0) {
            return -3;
          }
        }
        DAT_80066c18 = DAT_80066c18 + -1;
      }
      return iVar2;
    }
    DAT_80066c18 = iVar2;
    if (0 < iVar3) {
      unaff_s0 = *(int *)(unaff_s3 + DAT_80066694 + 0xc) + iVar3 * 0xf0 + -0xf0;
      (*DAT_80066680)(unaff_s0);
    }
    iVar2 = *unaff_s2;
    if (iVar2 == unaff_s5) break;
    if (iVar2 < 4) {
      if ((iVar2 < 2) && (-1 < iVar2)) {
        iVar2 = PADIF_OBJ_46C();
        return iVar2;
      }
    }
    else if (iVar2 == 4) {
      *unaff_s2 = unaff_s5;
      iVar2 = PADIF_OBJ_4B0();
      return iVar2;
    }
  }
  (*DAT_80066680)(unaff_s0 + -0xf0);
  iVar2 = PADIF_OBJ_4A8();
  return iVar2;
}



void PADIF_OBJ_600(void)

{
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void FlushCache(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



// Possible GS_125.OBJ/GsGetWorkBase

undefined4 FUN_8005ff84(void)

{
  return DAT_80066c48;
}



void FUN_8005ff94(byte param_1)

{
  if (param_1 == 9) {
    do {
      FUN_8005ff94(0x20);
    } while ((DAT_80066c58 & 7) != 0);
  }
  else {
    if (param_1 == 10) {
      FUN_8005ff94(0xd);
      DAT_80066c58 = 0;
    }
    else if (((int)(char)(&DAT_80066ca9)[param_1] & 0x97U) != 0) {
      DAT_80066c58 = DAT_80066c58 + 1;
    }
    if (0x1f < DAT_80066c5c) {
      write(1,&DAT_8006d224,DAT_80066c5c);
      DAT_80066c5c = 0;
    }
    (&DAT_8006d224)[DAT_80066c5c] = param_1;
    DAT_80066c5c = DAT_80066c5c + 1;
  }
  return;
}



void FUN_80060090(void)

{
  if (0 < DAT_80066c5c) {
    write(1,&DAT_8006d224,DAT_80066c5c);
    DAT_80066c5c = 0;
  }
  return;
}



long OpenEvent(ulong param_1,long param_2,long param_3,func *func)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



long EnableEvent(long param_1)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



long CloseEvent(long param_1)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



// Possible S_DCB.OBJ/_SpuDataCallback

void FUN_800600fc(undefined4 param_1)

{
  FUN_80054904(4,param_1);
  return;
}



void FUN_OVR0SummerForest__8006d8b0(int param_1)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  int *piVar7;
  Vec3 local_b8;
  int local_a8;
  uint local_a4;
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int local_90;
  uint local_8c;
  undefined4 local_88;
  Vec3 local_80;
  Vec3 local_70;
  Vec3 local_60;
  Vec3 local_50;
  Vec3 local_40;
  int local_30;
  int local_2c;
  Vec3 local_28;
  
  DAT_80066f38 = inputStates + param_1 + 1;
  switch(Spyro.state) {
  case Whirlwind:
    iVar4 = Spyro.position.z - Spyro.field82_0x14c;
    if (iVar4 < 0x400) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x80;
      if (0x12c0 < Spyro.trueVelocity.z) {
        Spyro.trueVelocity.z = 0x12c0;
      }
      Spyro.rotation.Yaw = (iVar4 * iVar4 >> 0xb) + Spyro.field83_0x150;
      VectorCopy(&local_b8,(Vec3 *)(Spyro.field153_0x218 + 0xc));
      VectorSubtract(&local_b8,&local_b8,&Spyro.position);
      local_b8.z = 0;
      iVar4 = VectorLength(&local_b8,0);
      if (0x400 < iVar4) {
        uVar5 = 0x400;
        goto LAB_OVR0SummerForest__8006dc54;
      }
    }
    else {
      iVar3 = Spyro.field84_0x154 - Spyro.position.z;
      if (Spyro.position.z - Spyro.field84_0x154 < -0x400) {
        if (Spyro.airVelocityFlag == NORMAL) {
          Spyro.airVelocityFlag = FALLING;
          Spyro.field83_0x150 = Spyro.field83_0x150 + 0x200;
        }
        Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x80;
        if (0x12c0 < Spyro.trueVelocity.z) {
          Spyro.trueVelocity.z = 0x12c0;
        }
        iVar3 = Spyro.field85_0x158 * (iVar4 + -0x400);
        if (Spyro.field86_0x15c == 0) {
          trap(0x1c00);
        }
        if ((Spyro.field86_0x15c == -1) && (iVar3 == -0x80000000)) {
          trap(0x1800);
        }
        Spyro.rotation.Yaw =
             Spyro.field83_0x150 + iVar3 / Spyro.field86_0x15c + ((iVar4 + -0x400) * 0x400 >> 10) &
             0xfff;
        VectorCopy(&local_b8,(Vec3 *)(Spyro.field153_0x218 + 0xc));
        VectorSubtract(&local_b8,&local_b8,&Spyro.position);
        local_b8.z = 0;
        iVar4 = VectorLength(&local_b8,0);
        if (0x400 < iVar4) {
          uVar5 = 0x400;
LAB_OVR0SummerForest__8006dc54:
          VectorScale(&local_b8,iVar4,uVar5);
        }
      }
      else {
        Spyro.trueVelocity.z = iVar3 * 0x12c0 >> 10;
        bVar1 = *(byte *)(Spyro.field153_0x218 + 0x46);
        local_b8.x = (Spyro.field87_0x160 + 0x400) * (int)cosineLookupTable[bVar1] >> 0xc;
        local_b8.y = (Spyro.field87_0x160 + 0x400) *
                     (int)sineLookupTable[*(byte *)(Spyro.field153_0x218 + 0x46)] >> 0xc;
        VectorAdd(&local_b8,&local_b8,(Vec3 *)(Spyro.field153_0x218 + 0xc));
        Spyro.rotation.Yaw = (uint)bVar1 * 0x10 - (iVar3 * iVar3 >> 0xb);
        VectorSubtract(&local_b8,&local_b8,&Spyro.position);
        local_b8.z = 0;
        iVar4 = VectorLength(&local_b8,0);
        if (0x800 < iVar4) {
          uVar5 = 0x800;
          goto LAB_OVR0SummerForest__8006dc54;
        }
      }
    }
    Spyro.trueVelocity.x = local_b8.x;
    Spyro.trueVelocity.y = local_b8.y;
    break;
  case IdleLook:
  case IdleSit:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    if (cameraState != Look) {
      FUN_8002b36c(0x1200);
      FUN_8002bc68();
      FUN_8002bb24(0x5a,0x10);
    }
    break;
  case UnderwaterSwim:
    FUN_8002b694(&local_a8,0x8006a144,0);
    if (Spyro.airVelocityFlag == FALLING) {
      local_a4 = (0x200 - Spyro.rotation.Pitch) + Spyro.field82_0x14c * -0x10 & 0xfff;
      if (0x800 < local_a4) {
        local_a4 = local_a4 - 0x1000;
      }
      Spyro.field82_0x14c = Spyro.field82_0x14c + 1;
      local_a4 = (int)(local_a4 << 7) >> 8;
      if (0x14 < Spyro.field82_0x14c) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    iVar4 = local_a8 * 0x14 >> 7;
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar4 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + ((int)(local_a4 * -0xf) >> 7) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    if (((DAT_80066f38->current & Cross) == None) && (Spyro.airVelocityFlag != FALLING)) {
      Spyro.maybeHorizontalSpeed = 0;
    }
    else {
      Spyro.maybeHorizontalSpeed = 0xe00;
    }
    if (Spyro.airVelocityFlag == PEAK) {
      FUN_8002bd70(0xc0,0xc0);
      if (Spyro.maybeHorizontalSpeedDecay < 0xe01) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    else {
      FUN_8002bd70(0xc0,0x30);
    }
    iVar3 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar4 * iVar3 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    uVar2 = rand();
    if (((uVar2 & 0x1f) == 0) && (DAT_800670fc != (code *)0x0)) {
      piVar7 = &local_a0;
      local_a0 = 0x220;
      local_9c = 0;
      local_98 = 0x40;
LAB_OVR0SummerForest__8006e14c:
      (*DAT_800670fc)(1,0x2c,piVar7,0);
    }
    goto LAB_OVR0SummerForest__8006e154;
  case UnderwaterIdle:
    if (cameraState != Look) {
      FUN_8002b694(&local_a0,0x8006a144,0);
      iVar4 = local_a0 * 0x14 >> 7;
      Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar4 & 0xfff;
      Spyro.rotation.Pitch = Spyro.rotation.Pitch + (local_9c * -0xf >> 7) & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
      }
      if (Spyro.rotation.Pitch < -800) {
        Spyro.rotation.Pitch = -800;
      }
      if (800 < Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = 800;
      }
      iVar3 = cosineLookup(Spyro.rotation.Pitch);
      Spyro.field84_0x154 =
           Spyro.field84_0x154 +
           (((iVar4 * iVar3 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
           ((Spyro.rotation.Roll << 6) >> 6));
      Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Roll) {
        Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
      }
      if (Spyro.rotation.Roll < -0x300) {
        Spyro.rotation.Roll = -0x300;
      }
      if (0x300 < Spyro.rotation.Roll) {
        Spyro.rotation.Roll = 0x300;
      }
    }
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    uVar2 = rand();
    if (((uVar2 & 0x1f) == 0) && (DAT_800670fc != (code *)0x0)) {
      piVar7 = &local_90;
      local_90 = 0x220;
      local_8c = 0;
      local_88 = 0x40;
      goto LAB_OVR0SummerForest__8006e14c;
    }
LAB_OVR0SummerForest__8006e154:
    Spyro.field87_0x160 = Spyro.field87_0x160 + 1;
    break;
  case UnderwaterCharge:
    FUN_8002b694(&local_90,0x8006a144,0);
    if (Spyro.airVelocityFlag == FALLING) {
      local_8c = (0x200 - Spyro.rotation.Pitch) + Spyro.field82_0x14c * -0x10 & 0xfff;
      if (0x800 < local_8c) {
        local_8c = local_8c - 0x1000;
      }
      Spyro.field82_0x14c = Spyro.field82_0x14c + 1;
      local_8c = (int)(local_8c * 0x60) >> 8;
      if (0xc < Spyro.field82_0x14c) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    iVar4 = local_90 * 0x14 >> 7;
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar4 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + ((int)(local_8c * -0xf) >> 7) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    Spyro.maybeHorizontalSpeed = 0x1c00;
    FUN_8002bd70(0x240,0x30);
    iVar3 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar4 * iVar3 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    if ((DAT_800670fc != (code *)0x0) && (2000 < Spyro.field49_0xbc)) {
      local_80.x = -400;
      uVar2 = rand();
      local_80.y = 0x40 - (uVar2 & 0x7f);
      local_80.z = -300;
      (*DAT_800670fc)(1,0x2c,&local_80,0);
    }
    break;
  case WaterSwim:
  case WaterIdle:
    if (Spyro.airVelocityFlag != FALLING) {
      if (cameraState == Look) {
        Spyro.maybeHorizontalSpeedDecay = 0;
      }
      else {
        FUN_8002b36c(0x980);
        iVar4 = FUN_8002bb24(0x5a,0x10);
        if (iVar4 < 0) {
          iVar4 = -iVar4;
        }
        if (0x200 < iVar4) {
          Spyro.maybeHorizontalSpeed = 0;
        }
        uVar5 = 0xc0;
        if (Spyro.maybeHorizontalSpeedDecay < 0xc81) {
          uVar6 = 0x40;
        }
        else {
          uVar5 = 0;
          uVar6 = 0xc0;
        }
        FUN_8002bd70(uVar5,uVar6);
      }
      if (Spyro.maybeHorizontalSpeedDecay == 0) {
        VectorClear(&Spyro.field42_0x88);
        VectorClear(&Spyro.trueVelocity);
      }
      else {
        FUN_8002bdbc();
        FUN_8002c038();
        Spyro.trueVelocity.z = 0;
      }
      if ((DAT_800670fc != (code *)0x0) && (Spyro.field17_0x28 < 0)) {
        if ((Spyro.maybeHorizontalSpeedDecay < 0x401) ||
           ((1 < param_1 || ((DAT_80067008 & 1) == 0)))) {
          if ((Spyro.maybeHorizontalSpeedDecay < 0x201) &&
             (((param_1 == 0 && ((DAT_80067008 & 7) == 0)) && (uVar2 = rand(), (uVar2 & 3) == 0))))
          {
            local_50.x = 0x80;
            local_50.y = 0;
            local_50.z = 0;
            MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_50,&local_50);
            VectorAdd(&local_50,&local_50,&Spyro.position);
            local_50.z = -Spyro.field17_0x28;
            (*DAT_800670fc)(1,0x2b,&local_50,1);
          }
        }
        else {
          VectorCopy(&local_80,&Spyro.position);
          local_70.y = 0x40;
          local_70.z = 0;
          local_70.x = Spyro.maybeHorizontalSpeedDecay >> 5;
          if (param_1 != 0) {
            local_70.y = -0x40;
          }
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_70,&local_60);
          VectorAdd(&local_80,&local_80,&local_60);
          local_70.x = 0;
          local_80.z = -Spyro.field17_0x28;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_70,&local_70);
          VectorShiftRight(&local_70,3);
          (*DAT_800670fc)(1,0x2a,&local_80,&local_70);
          uVar2 = rand();
          if ((uVar2 & 0x1f) == 0) {
            (*DAT_800670fc)(1,0x29,&local_80,0);
          }
        }
      }
      Spyro.field82_0x14c =
           Spyro.field82_0x14c - (Spyro.field83_0x150 * 2 + Spyro.field82_0x14c * 0x14 >> 8);
      Spyro.field83_0x150 = Spyro.field83_0x150 + Spyro.field82_0x14c;
      if (0x5900 < Spyro.field83_0x150) {
        Spyro.field83_0x150 = 0x5900;
      }
      if (-0x5901 < Spyro.field83_0x150) {
        return;
      }
      Spyro.field83_0x150 = -0x5900;
      return;
    }
    goto LAB_OVR0SummerForest__8006e864;
  case ClimbIdle:
    if (cameraState == Look) {
      Spyro.maybeHorizontalSpeed = 0;
    }
    else {
      FUN_8002b4e4(&local_60,0);
      local_40.x = 0;
      local_60.x = local_60.x * 0x480 >> 7;
      local_60.y = local_60.y * 0x600 >> 7;
      local_40.y = -local_60.x;
      local_40.z = local_60.y;
      iVar3 = VectorLength(&local_40,0);
      iVar4 = local_40.z;
      if (local_40.z < 0) {
        iVar4 = -local_40.z;
      }
      if (iVar4 < iVar3) {
        local_40.z = 0;
        iVar4 = FUN_8002d328(0 < local_40.y);
        if (iVar4 == 0) {
          local_40.y = 0;
        }
      }
      else {
        local_40.y = 0;
        local_40.x = 0;
        if (local_40.z < 1) {
          uVar5 = 3;
        }
        else {
          uVar5 = 2;
        }
        iVar4 = FUN_8002d328(uVar5);
        if (iVar4 == 0) {
          local_40.z = 0;
        }
      }
      Spyro.maybeHorizontalSpeed = VectorLength(&local_40,1);
    }
LAB_OVR0SummerForest__8006e864:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    break;
  case ClimbVertical:
  case ClimbRight:
  case ClimbLeft:
    FUN_8002b4e4(&local_30,0);
    local_28.x = 0;
    local_30 = local_30 * 0x480 >> 7;
    local_2c = local_2c * 0x600 >> 7;
    local_28.y = -local_30;
    local_28.z = local_2c;
    iVar3 = VectorLength(&local_28,0);
    iVar4 = local_28.z;
    if (local_28.z < 0) {
      iVar4 = -local_28.z;
    }
    if (iVar4 < iVar3) {
      local_28.z = 0;
      iVar4 = FUN_8002d328(0 < local_28.y);
      if (iVar4 == 0) {
        local_28.y = 0;
      }
    }
    else {
      local_28.y = 0;
      local_28.x = 0;
      if (local_28.z < 1) {
        uVar5 = 3;
      }
      else {
        uVar5 = 2;
      }
      iVar4 = FUN_8002d328(uVar5);
      if (iVar4 == 0) {
        local_28.z = 0;
      }
    }
    Spyro.maybeHorizontalSpeed = VectorLength(&local_28,1);
    Spyro.maybeTargetYaw = Atan2(local_30,local_2c,1);
    if (0x800 < Spyro.maybeTargetYaw) {
      Spyro.maybeTargetYaw = Spyro.maybeTargetYaw + -0x1000;
    }
    local_28.x = local_28.x + 0x400;
    MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_28,&local_28);
    VectorSubtract(&local_28,&local_28,&Spyro.trueVelocity);
    iVar4 = VectorLength(&local_28,0);
    if (0x180 < iVar4) {
      VectorScale(&local_28,iVar4,0x180);
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_28);
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
  }
  return;
}



void FUN_OVR0SummerForest__8006ea3c(void)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  
  switch(Spyro.state) {
  case Whirlwind:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    break;
  case IdleLook:
  case IdleSit:
    iVar2 = FUN_8002d9c4();
    if (iVar2 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    FUN_8002cc88();
    break;
  default:
    goto switchD_OVR0SummerForest__8006ea70_caseD_14;
  case UnderwaterSwim:
  case UnderwaterIdle:
    FUN_8002c0f4();
    FUN_8002cc88();
    iVar2 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field169_0x264);
    if (iVar2 != 0) {
      if ((int)(&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] < 200) {
        (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] =
             (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] + -200;
      }
      (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] =
           (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] | 0x10;
    }
    break;
  case UnderwaterCharge:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_80032b94();
    iVar2 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field169_0x264);
    if (iVar2 == 0) {
      Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 6),0,4);
      if (-1 < Spyro.field169_0x264) {
        FUN_80050c64(Spyro.field169_0x264,0x157c);
        FUN_80050cf4(Spyro.field169_0x264,400);
      }
      Spyro.field170_0x268 = (int)*(byte *)(audioBank + 6);
    }
    iVar2 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field169_0x264);
    if (iVar2 != 0) {
      if ((int)(&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] < 0x13e8) {
        (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] =
             (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] + 200;
      }
      (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] =
           (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] | 0x10;
    }
    break;
  case WaterSwim:
  case WaterIdle:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002bfbc();
    if (Spyro.field63_0x108 == '\0') {
      return;
    }
    iVar2 = FUN_800398b0(Spyro.position.x,Spyro.position.y);
    Spyro.position.z =
         (Spyro.field172_0x270 - (-iVar2 - Spyro.field57_0xfc)) - (Spyro.field83_0x150 >> 6);
    Spyro.field17_0x28 = -iVar2 - Spyro.field57_0xfc;
    return;
  case ClimbIdle:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_8002d0f8();
    break;
  case ClimbVertical:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_8002d0f8();
    iVar2 = Spyro.physicsVelocity.z * 4;
    if (iVar2 < 0) {
      iVar2 = Spyro.physicsVelocity.z * -4;
    }
    Spyro.field17_0x28 = 0;
    uVar3 = ((iVar2 + 0x300) / 0x600) * 0x10;
    bVar1 = (int)uVar3 < 0x41;
    if ((int)uVar3 < 0x10) {
      uVar3 = 0x10;
LAB_OVR0SummerForest__8006ee70:
      bVar1 = uVar3 < 0x41;
    }
    goto LAB_OVR0SummerForest__8006ee74;
  case ClimbRight:
  case ClimbLeft:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_8002d0f8();
    Spyro.field17_0x28 = 0;
    iVar2 = VectorLength(&Spyro.physicsVelocity,0);
    uVar3 = ((iVar2 * 4 + 0x300) / 0x600) * 0x10;
    bVar1 = (int)uVar3 < 0x41;
    if ((int)uVar3 < 8) {
      uVar3 = 8;
      goto LAB_OVR0SummerForest__8006ee70;
    }
LAB_OVR0SummerForest__8006ee74:
    if (!bVar1) {
      uVar3 = 0x40;
    }
    FUN_8002e3f8(uVar3);
    goto switchD_OVR0SummerForest__8006ea70_caseD_14;
  }
  Spyro.field17_0x28 = 0;
switchD_OVR0SummerForest__8006ea70_caseD_14:
  return;
}



void FUN_OVR0SummerForest__8006ee9c(void)

{
  int iVar1;
  
  if (0x34 < Spyro.currentAnimationState) {
    return;
  }
  if (Spyro.currentAnimationState < 0x33) {
    if (Spyro.currentAnimationState == 0x2b) {
      if (Spyro.currentAnimationFrame != 1) {
        return;
      }
      PlayAudio(*(undefined *)(audioBank + 10),0,0);
      Spyro.field174_0x278 = (uint)Spyro.currentAnimationFrame;
      return;
    }
    if (Spyro.currentAnimationState != 0x32) {
      return;
    }
    if ((Spyro.currentAnimationFrame != 3) && (Spyro.currentAnimationFrame != 10)) {
      return;
    }
    iVar1 = PlayAudio(*(undefined *)(audioBank + 0x11),0,0);
    Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
    if (iVar1 < 0) {
      return;
    }
    if (Spyro.field174_0x278 != 10) {
      return;
    }
  }
  else {
    if ((Spyro.currentAnimationFrame != 1) && (Spyro.currentAnimationFrame != 3)) {
      return;
    }
    iVar1 = PlayAudio(*(undefined *)(audioBank + 0x11),0,0);
    Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
    if (iVar1 < 0) {
      return;
    }
    if (Spyro.field174_0x278 != 1) {
      return;
    }
    FUN_80050cf4(iVar1,0xc00);
  }
  FUN_80050c64(iVar1,0x1200);
  return;
}



void FUN_OVR0SummerForest__8006f008(int param_1)

{
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case Whirlwind:
    FUN_8002db8c(0);
    break;
  case IdleLook:
  case IdleSit:
  case WaterSwim:
  case WaterIdle:
    FUN_8002db8c(0x8006a0c4);
    break;
  case ClimbIdle:
  case ClimbVertical:
  case ClimbRight:
  case ClimbLeft:
    FUN_8002e00c(0x8006a0d0);
  }
  return;
}



void FUN_OVR0SummerForest__8006f0a0(int param_1)

{
  undefined4 uVar1;
  undefined4 uVar2;
  int *piVar3;
  Vec3 VStack_40;
  Vec3 VStack_30;
  Vec3 VStack_20;
  
  switch(param_1) {
  case 0x12:
    piVar3 = *(int **)Spyro.field153_0x218;
    Spyro.maybeSubstate = Whirlwind;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field118_0x1bc = '\0';
    VectorClear(&Spyro.trueVelocity);
    Spyro.field83_0x150 = Spyro.rotation.Yaw;
    Spyro.field82_0x14c = Spyro.position.z;
    Spyro.field84_0x154 = *(int *)(Spyro.field153_0x218 + 0x14) + *piVar3;
    Spyro.field86_0x15c = (Spyro.field84_0x154 - Spyro.position.z) + -0x800;
    Spyro.field85_0x158 =
         ((uint)*(byte *)(Spyro.field153_0x218 + 0x46) * 0x10 - Spyro.rotation.Yaw) -
         ((Spyro.field86_0x15c * 0x400 >> 10) + 0x400) & 0xfff;
    if (0x800 < (uint)Spyro.field85_0x158) {
      Spyro.field85_0x158 = Spyro.field85_0x158 - 0x1000;
    }
    Spyro.field87_0x160 = piVar3[1];
    break;
  case 0x13:
  case 0x26:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
    uVar1 = 1;
    if (param_1 == 0x25) {
      uVar1 = 5;
      uVar2 = 8;
    }
    else {
      uVar2 = 3;
    }
    Spyro.field82_0x14c = randomRangeGen(uVar1,uVar2);
    Spyro.field83_0x150 = 0;
    if (DAT_800670b4 != (code *)0x0) {
      if (param_1 == 0x25) {
        uVar1 = 0x1f1;
      }
      else {
        uVar1 = 0x1db;
        if (param_1 != 0x27) {
          Spyro.field83_0x150 = 0;
          return;
        }
      }
      (*DAT_800670b4)(uVar1,0);
    }
    break;
  case 0x28:
  case 0x29:
    if ((Spyro.maybeSubstate + ~Swim < 2) || (Spyro.maybeSubstate == Hurt)) {
      if (Spyro.state == UnderwaterCharge) {
        Spyro.airVelocityFlag = PEAK;
        goto LAB_OVR0SummerForest__8006f3fc;
      }
    }
    else {
      if (DAT_800670fc != (code *)0x0) {
        VectorCopy(&VStack_40,&Spyro.position);
        if ((Spyro.maybeSubstate == Swim) && (Spyro.field17_0x28 < 0)) {
          VStack_40.z = -Spyro.field17_0x28;
          (*DAT_800670fc)(6,0x2e,&VStack_40,0);
          uVar1 = 4;
          uVar2 = 0x29;
LAB_OVR0SummerForest__8006f328:
          (*DAT_800670fc)(uVar1,uVar2,&VStack_40,0);
        }
        else if (Spyro.maybeSubstate == Charge) {
          VStack_40.z = VStack_40.z + 0x400;
          VStack_40.z = RaycastDown(&VStack_40,0x800);
          if ((VStack_40.z != 0) && (uVar1 = 6, isOnWaterSurface != 0)) {
            uVar2 = 0x2e;
            goto LAB_OVR0SummerForest__8006f328;
          }
        }
      }
      Spyro.rotation.Pitch = Spyro.rotation.Pitch & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
      }
      if (0 < Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = 0;
      }
      if (param_1 == 0x28) {
        Spyro.airVelocityFlag = FALLING;
      }
      VectorClear((Vec3 *)&Spyro.field84_0x154);
      Spyro.field82_0x14c = 0;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      PlayAudio(*(undefined *)(audioBank + 8),0,0);
LAB_OVR0SummerForest__8006f3fc:
      Spyro.field87_0x160 = 0;
    }
    Spyro.maybeSubstate = UnderwaterSwim;
    break;
  case 0x2a:
    if (1 < Spyro.maybeSubstate + ~Swim) {
      if (DAT_800670fc != (code *)0x0) {
        VectorCopy(&VStack_30,&Spyro.position);
        if ((Spyro.maybeSubstate == Swim) && (Spyro.field17_0x28 < 0)) {
          VStack_30.z = -Spyro.field17_0x28;
          (*DAT_800670fc)(6,0x2e,&VStack_30,0);
          uVar1 = 4;
          uVar2 = 0x29;
LAB_OVR0SummerForest__8006f4f4:
          (*DAT_800670fc)(uVar1,uVar2,&VStack_30,0);
        }
        else if (Spyro.maybeSubstate == Charge) {
          VStack_30.z = VStack_30.z + 0x400;
          VStack_30.z = RaycastDown(&VStack_30,0x800);
          if ((VStack_30.z != 0) && (uVar1 = 6, isOnWaterSurface != 0)) {
            uVar2 = 0x2e;
            goto LAB_OVR0SummerForest__8006f4f4;
          }
        }
      }
      if (Spyro.state == HeadBash) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch + -0x400;
      }
      Spyro.rotation.Pitch = Spyro.rotation.Pitch & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
      }
      if (0 < Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = 0;
      }
      Spyro.airVelocityFlag = FALLING;
      VectorClear((Vec3 *)&Spyro.field84_0x154);
      Spyro.field82_0x14c = 0;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      PlayAudio(*(undefined *)(audioBank + 8),0,0);
    }
    Spyro.maybeSubstate = UnderwaterCharge;
    Spyro.field77_0x138 = 0x20000;
    break;
  case 0x2b:
  case 0x2c:
    if (Spyro.maybeSubstate != Swim) {
      PlayAudio(*(undefined *)(audioBank + 7),0,0);
      Spyro.field82_0x14c = -Spyro.trueVelocity.z >> 2;
      if (Spyro.maybeSubstate != Death) {
        Spyro.field83_0x150 = 0x5900;
        Spyro.maybeSubstate = Swim;
      }
      Spyro.airVelocityFlag = NORMAL;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      Spyro.field119_0x1bd = '\x01';
      VectorCopy(&VStack_20,&Spyro.position);
      VStack_20.z = VStack_20.z + 0x400;
      VStack_20.z = RaycastDown(&VStack_20,0x800);
      if (((VStack_20.z != 0) && (isOnWaterSurface != 0)) && (DAT_800670fc != (code *)0x0)) {
        (*DAT_800670fc)(10,0x29,&VStack_20,0);
        (*DAT_800670fc)(6,0x2e,&VStack_20,0);
      }
    }
    break;
  case 0x2f:
  case 0x32:
  case 0x33:
  case 0x34:
    if (Spyro.maybeSubstate != Climb) {
      Spyro.maybeSubstate = Climb;
      Spyro.airVelocityFlag = NORMAL;
      VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
      Spyro.field118_0x1bc = '\x01';
    }
  }
  return;
}



void FUN_OVR0SummerForest__8006f774(void)

{
  CollisionType CVar1;
  InputFlags IVar2;
  int iVar3;
  SpyroState SVar4;
  
  switch(Spyro.state) {
  case Whirlwind:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    iVar3 = Vec2OctagonalDistanceApproximation((Vec2 *)&Spyro,(Vec2 *)(Spyro.field153_0x218 + 0xc));
    SVar4 = Glide;
    if (iVar3 <= Spyro.field87_0x160) {
      return;
    }
    break;
  case IdleLook:
  case IdleSit:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    SVar4 = Jump;
    if ((inputStates[0].pressed & Cross) == None) {
      CVar1 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar1 == Ice) {
        SVar4 = Ice;
joined_r0x8006fd08:
        if (DAT_8006839d != '\0') {
          return;
        }
      }
      else {
        SVar4 = Flop;
        if (((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) &&
           (SVar4 = Charge, (inputStates[0].current & Square) == None)) {
          iVar3 = Spyro.maybeTurnSpeed;
          if (Spyro.maybeTurnSpeed < 0) {
            iVar3 = -Spyro.maybeTurnSpeed;
          }
          if (iVar3 < 0x11) {
            if (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
                 (TriggerLeft|TriggerRight)) || (SVar4 = Walk, Spyro.maybeHorizontalSpeed == 0)) {
              if ((cameraState == Look) || (Spyro.field162_0x240 != 0)) {
                if (Spyro.state == Idle) {
                  return;
                }
                SetSpyroState(Idle);
                if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
                  Spyro.currentAnimationState = Spyro.nextAnimationState;
                  Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
                }
                Spyro.nextAnimationState = (byte)Spyro.state;
                Spyro.nextAnimationFrame = 0;
                Spyro.field11_0x1c = 0x71;
                Spyro.field136_0x1ec = Spyro.state;
                Spyro.field137_0x1f0 = 0;
                return;
              }
              SVar4 = IdleLedge;
              if (Spyro.ledgeDetected == '\0') {
                FUN_80032c34();
                return;
              }
            }
          }
          else {
            SVar4 = Walk;
          }
        }
      }
    }
    break;
  default:
    goto switchD_OVR0SummerForest__8006f7a8_caseD_14;
  case UnderwaterSwim:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((((inputStates[0].current & Square) == None) ||
        (SVar4 = UnderwaterCharge, Spyro.airVelocityFlag == FALLING)) &&
       (SVar4 = UnderwaterIdle, Spyro.maybeHorizontalSpeedDecay != 0)) {
      return;
    }
    break;
  case UnderwaterIdle:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].current & Square) == None) {
      IVar2 = inputStates[0].current & Cross;
      if (cameraState == Look) {
        return;
      }
      SVar4 = UnderwaterSwim;
joined_r0x8006fd6c:
      if (IVar2 == None) {
        return;
      }
    }
    else {
      SVar4 = UnderwaterCharge;
    }
    break;
  case UnderwaterCharge:
    iVar3 = FUN_8002b228();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].current & Square) != None) {
      return;
    }
    SVar4 = UnderwaterSwim;
    if (Spyro.airVelocityFlag == FALLING) {
      return;
    }
    break;
  case WaterSwim:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) == None) || (SVar4 = Jump, Spyro.field35_0x5c < 9)) {
      if (Spyro.field63_0x108 == '\0') {
        SVar4 = Flop;
        goto LAB_OVR0SummerForest__8006fb7c;
      }
      if ((((inputStates[0].pressed & Square) != None) && (8 < Spyro.field35_0x5c)) &&
         (globalProgressFlags.swim.isPayed != 0)) {
        iVar3 = FUN_8003ee3c(&Spyro,0x400,1,0);
        SVar4 = UnderwaterSwim;
        if (iVar3 == 0) break;
      }
    }
    else {
LAB_OVR0SummerForest__8006fb7c:
      SetSpyroState(SVar4);
    }
    SVar4 = WaterIdle;
    if (DAT_8006839d == '\0') {
      return;
    }
    break;
  case WaterIdle:
    if (Spyro.airVelocityFlag == FALLING) {
      if (DAT_8006abf8 != '\0') {
        return;
      }
      if (((inputStates[0].pressed & (Triangle|Cross|Start)) == None) && (Spyro.field35_0x5c < 0x3d)
         ) {
        return;
      }
      if (DAT_80066f8c != (code *)0x0) {
        (*DAT_80066f8c)();
        return;
      }
      OnDeath();
      return;
    }
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) == None) || (SVar4 = Jump, Spyro.field35_0x5c < 9)) {
      if (Spyro.field63_0x108 != '\0') {
        if ((((inputStates[0].pressed & Square) != None) && (8 < Spyro.field35_0x5c)) &&
           (globalProgressFlags.swim.isPayed != 0)) {
          iVar3 = FUN_8003ee3c(&Spyro,0x400,1,0);
          SVar4 = UnderwaterSwim;
          if (iVar3 == 0) break;
        }
        if (cameraState == Look) {
          return;
        }
        SVar4 = WaterSwim;
        goto joined_r0x8006fd08;
      }
      SVar4 = Flop;
    }
    break;
  case ClimbIdle:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) == None) {
      SVar4 = ClimbVertical;
      IVar2 = Spyro.maybeHorizontalSpeed;
      goto joined_r0x8006fd6c;
    }
joined_r0x8006fe64:
    SVar4 = Jump;
    if ((inputStates[0].current & DPadDown) != None) {
      SetSpyroState(Flop);
      Spyro.airVelocityFlag = WATER_EXIT;
      return;
    }
    break;
  case ClimbVertical:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto joined_r0x8006fe64;
    SVar4 = ClimbIdle;
    if (Spyro.maybeHorizontalSpeed != 0) {
      iVar3 = Spyro.physicsVelocity.z;
      if (Spyro.physicsVelocity.z < 0) {
        iVar3 = -Spyro.physicsVelocity.z;
      }
      if (Spyro.field49_0xbc <= iVar3) {
        return;
      }
      iVar3 = Spyro.maybeTargetYaw;
      if (Spyro.maybeTargetYaw < 0) {
        iVar3 = -Spyro.maybeTargetYaw;
      }
      SVar4 = ClimbLeft;
      if (iVar3 < 0x400) {
        SVar4 = ClimbRight;
      }
    }
    break;
  case ClimbRight:
  case ClimbLeft:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto joined_r0x8006fe64;
    SVar4 = ClimbIdle;
    if (Spyro.maybeHorizontalSpeed != 0) {
      iVar3 = Spyro.physicsVelocity.z;
      if (Spyro.physicsVelocity.z < 0) {
        iVar3 = -Spyro.physicsVelocity.z;
      }
      SVar4 = ClimbVertical;
      if (iVar3 < Spyro.field49_0xbc) {
        return;
      }
    }
  }
  SetSpyroState(SVar4);
switchD_OVR0SummerForest__8006f7a8_caseD_14:
  return;
}



void FUN_OVR0SummerForest__8006fee0(void)

{
  int iVar1;
  int iVar2;
  
  iVar2 = DAT_80067fbc + 2 >> 2;
  if (4 < iVar2) {
    iVar2 = 4;
  }
  if (cameraState == ChaseSwim) {
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,(Orbit *)&DAT_800615d8,DAT_80067ef0);
      Orbit_80067f14.Latitude = -Spyro.rotation.Pitch;
      iVar1 = Orbit_80067f14.Latitude - Orbit_80067f00.Latitude >> 2;
      Orbit_80067f14.Pitch = iVar1;
      if (0xc0 < iVar1) {
        Orbit_80067f14.Pitch = 0xc0;
      }
      if (iVar1 < -0xc0) {
        Orbit_80067f14.Pitch = -0xc0;
      }
      iVar1 = Orbit_80067f14.Pitch;
      if (Orbit_80067f14.Pitch < 0) {
        iVar1 = -Orbit_80067f14.Pitch;
      }
      if (iVar1 < 9) {
        Orbit_80067f14.Pitch = 0;
      }
      Orbit_80067f14.Yaw = -Spyro.rotation.Roll >> 2;
      InputRotateCamera(0x180);
      FUN_8001f0bc();
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar2 * 0x14 + -0x7ff9e8d4),0);
    if (cameraOrbitAcceleration_Scale.Longitude < 0x80) {
      cameraOrbitAcceleration_Scale.Longitude = 0x80;
    }
    if (cameraOrbitAcceleration_Scale.Latitude < 0x60) {
      cameraOrbitAcceleration_Scale.Latitude = 0x60;
    }
    if (cameraOrbitAcceleration_Scale.Yaw < 0x40) {
      cameraOrbitAcceleration_Scale.Yaw = 0x40;
    }
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar2 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
  }
  else if (cameraState == WhirlwindAlign) {
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80061560,DAT_80067ef0);
      InputRotateCamera(0x400);
      if (currentLoadedLevel == MYSTIC_MARSH) {
        Orbit_80067f14.Radius = 0x600;
      }
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = (uint)*(byte *)(Spyro.field153_0x218 + 0x46) << 4;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar2 * 0x14 + -0x7ff9e8d4),0);
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar2 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
    if (((DAT_80067edc & 2) == 0) && (cameraOrbitAcceleration_Scale.Longitude < 0x4c)) {
      cameraOrbitAcceleration_Scale.Longitude = 0x4c;
    }
  }
  return;
}



void FUN_OVR0SummerForest__8007022c(void)

{
  FUN_8001db58();
  UpdateCameraOrbitPhysics();
  return;
}



void FUN_OVR0SummerForest__80070254(int param_1)

{
  if ((param_1 == 4) || (param_1 == 0x17)) {
    INT_80067ed4 = 0;
    DAT_80067fc4 = 0;
    DAT_80067fc5 = 0;
    DAT_80067fc6 = 1;
    DAT_80067fc9 = 0;
    DAT_80067ee0 = 0;
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
    FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
    OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
  }
  return;
}



void FUN_OVR0SummerForest__80070324(void)

{
  CameraState CVar1;
  
  CVar1 = DAT_80067fec;
  if (cameraState == ChaseSwim) {
    if (((DAT_80067fec != Align) ||
        (((inputStates[0].current & Triangle) != None &&
         (CVar1 = Look, Spyro.field123_0x1c1 != '\0')))) ||
       (((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) != None &&
        ((((inputStates[0].current & (TriggerRight|BumperRight)) != None &&
          ((inputStates[0].current & (TriggerLeft|BumperLeft)) != None)) &&
         (CVar1 = QuickAlign, Spyro.field162_0x240 == 0)))))) goto LAB_OVR0SummerForest__8007043c;
  }
  else {
    if (cameraState != WhirlwindAlign) {
      return;
    }
    if (DAT_80067fec != Align) goto LAB_OVR0SummerForest__8007043c;
  }
  CVar1 = cameraStateLookup[Spyro.state];
  if (CVar1 == cameraState) {
    return;
  }
  if (CVar1 == Align) {
    CVar1 = Passive;
  }
LAB_OVR0SummerForest__8007043c:
  SetCameraState(CVar1);
  return;
}


/*
Unable to decompile 'FUN_OVR0SummerForest__80070480'
Cause: Exception while decompiling OVR0SummerForest::80070480: process: timeout

*/


Vec3 ** OVR0SummerForest_maybeSpawnNewMoby(int param_1,int param_2)

{
  undefined2 uVar1;
  Object *pOVar2;
  char cVar3;
  undefined uVar4;
  short sVar5;
  Vec3 **ppVVar6;
  uint uVar7;
  int iVar8;
  undefined4 uVar9;
  undefined4 *puVar10;
  uint uVar11;
  int iVar12;
  Object *pOVar13;
  Spyro *pSVar14;
  int *piVar15;
  Vec3 *pVVar16;
  Vec3 *pVVar17;
  Vec3 local_90;
  Mat33 MStack_80;
  undefined local_60;
  char local_5f;
  undefined local_5e;
  Mat33 MStack_58;
  undefined local_38;
  byte local_37;
  byte local_36;
  Vec3 VStack_30;
  
  ppVVar6 = (Vec3 **)FUN_80041290();
  if (ppVVar6 == (Vec3 **)0x0) {
    return (Vec3 **)0x0;
  }
  pVVar16 = *ppVVar6;
  MEMSET((int *)ppVVar6,0,0x58);
  *ppVVar6 = pVVar16;
  MEMSET(&pVVar16->x,0,0x18);
  *(short *)((int)ppVVar6 + 0x36) = (short)param_1;
  if ((param_2 == 0) || (uVar11 = (param_2 - (int)Objects) * -0x45d1745d >> 3, 0xff < uVar11)) {
    *(undefined *)((int)ppVVar6 + 0x3a) = 0xff;
  }
  else {
    *(char *)((int)ppVVar6 + 0x3a) = (char)uVar11;
  }
  FUN_800375c8(ppVVar6);
  if (param_1 < 0x134) {
    if (0x131 < param_1) {
LAB_OVR0SummerForest__8007c180:
      pVVar16 = *ppVVar6;
      *(undefined *)(ppVVar6 + 0x13) = 0x20;
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      uVar11 = rand();
      uVar7 = rand();
      uVar7 = uVar7 & 0x7ff;
      iVar12 = cosineLookup(uVar7);
      iVar8 = cosineLookup(uVar11 & 0xfff);
      *(short *)&pVVar16->x =
           (short)(char)(iVar12 * iVar8 * (uint)*(byte *)(param_2 + 0x49) >> 0x18);
      iVar12 = cosineLookup(uVar7);
      iVar8 = sineLookup(uVar11 & 0xfff);
      *(short *)((int)&pVVar16->x + 2) =
           (short)(char)(iVar12 * iVar8 * (uint)*(byte *)(param_2 + 0x49) >> 0x18);
      iVar12 = sineLookup(uVar7);
      *(short *)&pVVar16->y = (short)((int)(iVar12 * (uint)*(byte *)(param_2 + 0x49)) >> 0xc);
      if (((*(uint *)(param_2 + 0x18) & 0x20000) != 0) &&
         ((Spyro.maybeSubstate == Charge || (Spyro.maybeSubstate == UnderwaterCharge)))) {
        *(short *)&pVVar16->x = *(short *)&pVVar16->x + (short)(Spyro.trueVelocity.x >> 6);
        *(short *)((int)&pVVar16->x + 2) =
             *(short *)((int)&pVVar16->x + 2) + (short)(Spyro.trueVelocity.y >> 6);
      }
      if ((*(byte *)(param_2 + 0x51) != 0) && ((*(uint *)(param_2 + 0x18) & 0x100000) != 0)) {
        *(short *)&pVVar16->x =
             *(short *)&pVVar16->x +
             (short)(cosineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
        *(short *)((int)&pVVar16->x + 2) =
             *(short *)((int)&pVVar16->x + 2) +
             (short)(sineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
        sVar5 = randomRangeGen(0x28,0x46);
        *(short *)&pVVar16->y = *(short *)&pVVar16->y + sVar5;
      }
      ppVVar6[3] = (Vec3 *)(&ppVVar6[3]->x + *(short *)&pVVar16->x);
      ppVVar6[4] = (Vec3 *)(&ppVVar6[4]->x + *(short *)((int)&pVVar16->x + 2));
      ppVVar6[5] = (Vec3 *)(&ppVVar6[5]->x + *(short *)&pVVar16->y);
      iVar12 = rand();
      *(char *)((int)ppVVar6 + 0x45) = (char)iVar12;
      iVar12 = rand();
      *(char *)((int)ppVVar6 + 0x46) = (char)iVar12;
      iVar12 = rand();
      *(ushort *)((int)&pVVar16->y + 2) = ((ushort)iVar12 & 0x1f) - 0x10;
      iVar12 = rand();
      *(ushort *)&pVVar16->z = ((ushort)iVar12 & 0x1f) - 0x10;
      iVar12 = rand();
      *(ushort *)((int)&pVVar16->z + 2) = ((ushort)iVar12 & 0x1f) - 0x10;
      pVVar16[1].y = *(int *)(param_2 + 0x14) + -0x40;
      iVar12 = randomRangeGen(0x32,0x50);
      pVVar16[1].x = iVar12;
      return ppVVar6;
    }
    if (param_1 == 0x81) {
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      uVar11 = (uint)(ushort)VectorShort_80067ec8.Z;
      *(undefined *)((int)ppVVar6 + 0x4f) = 0x40;
      ppVVar6[0x15] = (Vec3 *)0x3f005080;
      *(char *)((int)ppVVar6 + 0x46) = (char)((int)(uVar11 << 0x10) >> 0x14) + -0x80;
      return ppVVar6;
    }
    if (param_1 < 0x82) {
      if (param_1 == 0x10) {
LAB_OVR0SummerForest__8007bed8:
        pVVar16 = *ppVVar6;
        if (*(short *)((int)ppVVar6 + 0x36) == 0x10) {
          iVar12 = 10;
          if (lives < 4) {
            iVar12 = 7;
          }
          else if (lives < 7) {
            iVar12 = 9;
          }
          fodderCountTillNextLifeButterfly = fodderCountTillNextLifeButterfly + 1;
          if (iVar12 <= fodderCountTillNextLifeButterfly) {
            fodderCountTillNextLifeButterfly = 0;
            *(undefined2 *)((int)ppVVar6 + 0x36) = 0xd3;
          }
        }
        FUN_80041438(ppVVar6);
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x2a].z;
        VectorCopy(pVVar16,(Vec3 *)(ppVVar6 + 3));
        ppVVar6[7] = (Vec3 *)0xffffffff;
        *(undefined *)((int)ppVVar6 + 0x47) = 2;
        *(undefined2 *)((int)&pVVar16[1].x + 2) = 0x708;
        *(undefined *)((int)&pVVar16[1].y + 1) = 0;
        iVar12 = rand();
        *(byte *)((int)&pVVar16[1].y + 2) = (byte)iVar12 & 0xfc;
        return ppVVar6;
      }
      if (param_1 < 0x11) {
        if (param_1 == 1) {
          FUN_80041438(ppVVar6);
          *(undefined *)(ppVVar6 + 0x13) = 0x18;
          *(undefined *)((int)ppVVar6 + 0x4a) = 0x40;
          goto LAB_OVR0SummerForest__8007c170;
        }
      }
      else {
        if (param_1 == 0x6d) goto LAB_OVR0SummerForest__8007bfa0;
        if (param_1 == 0x78) {
          pVVar16 = *ppVVar6;
          FUN_80041438(ppVVar6);
          *(undefined *)((int)ppVVar6 + 0x49) = 0;
          *(undefined2 *)&pVVar16->x = 0;
          *(undefined2 *)&pVVar16->z = 0;
          *(undefined2 *)((int)&pVVar16->y + 2) = 0;
          *(undefined2 *)&pVVar16->y = 0;
          *(undefined *)((int)&pVVar16[1].x + 1) = 0x78;
          pVVar16[1].y = 0;
          pVVar16[1].z = 0;
          if (param_2 == 0) {
            uVar11 = Spyro.angleAsByte.yaw - 0x80 & 0xff;
            local_90.x = cosineLookupTable[uVar11] * 0x7d >> 9;
            local_90.z = 1000;
            local_90.y = sineLookupTable[uVar11] * 0x7d >> 9;
            VectorAdd((Vec3 *)(ppVVar6 + 3),&Spyro.position,&local_90);
          }
          else {
            VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          }
          *(undefined *)((int)&pVVar16->x + 2) = 0xff;
          return ppVVar6;
        }
      }
    }
    else if (param_1 < 0xdc) {
      if (0xd6 < param_1) {
LAB_OVR0SummerForest__8007bfa0:
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        *(undefined *)((int)ppVVar6 + 0x49) = 3;
        if (*(short *)((int)ppVVar6 + 0x36) == 0xd6) {
          *(undefined *)(ppVVar6 + 0x15) = 1;
          return ppVVar6;
        }
        *(undefined *)(ppVVar6 + 0x15) = 2;
        return ppVVar6;
      }
      if (param_1 == 0xaa) {
        *(undefined *)((int)ppVVar6 + 0x41) = 0;
        *(undefined *)(ppVVar6 + 0x10) = 0;
        *(undefined *)((int)ppVVar6 + 0x3e) = 0;
        *(undefined *)((int)ppVVar6 + 0x3f) = 0;
        if (param_2 != 0) {
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        }
        *(undefined *)((int)ppVVar6 + 0x4f) = 0x18;
        *(undefined *)(ppVVar6 + 0x13) = 0x28;
        goto LAB_OVR0SummerForest__8007ca80;
      }
      if (param_1 == 0xd3) goto LAB_OVR0SummerForest__8007bed8;
    }
    else if (param_1 == 0x104) {
      FUN_80041438(ppVVar6);
      *(undefined *)(ppVVar6 + 0x15) = 2;
      if (param_2 != 0) {
        (*ppVVar6)->x = param_2;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        *(undefined *)((int)ppVVar6 + 0x4a) = 10;
        *(undefined *)(ppVVar6 + 0x13) = 8;
        ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x55].y;
        return ppVVar6;
      }
LAB_OVR0SummerForest__8007c170:
      ppVVar6[7] = (Vec3 *)0xffffffff;
      return ppVVar6;
    }
  }
  else {
    if (param_1 == 0x1e3) {
      pVVar16 = *ppVVar6;
      FUN_80041438(ppVVar6);
      *(undefined *)(ppVVar6 + 0x13) = 0x40;
      *(undefined *)((int)ppVVar6 + 0x4e) = 0x40;
      if (param_2 != 0) {
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        *(undefined *)((int)&pVVar16->y + 3) = 0x30;
        *(undefined *)((int)ppVVar6 + 0x4f) = 0x7f;
        *(char *)(ppVVar6 + 0x15) = (char)((int)((uint)*(byte *)((int)&pVVar16->y + 3) * 3) >> 1);
        uVar4 = *(undefined *)((int)&pVVar16->y + 3);
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
        *(undefined *)((int)ppVVar6 + 0x55) = uVar4;
        return ppVVar6;
      }
      local_90.x = 0x1b8;
      local_90.y = 0;
      local_90.z = 0;
      if (cameraState == Look) {
        pVVar17 = (Vec3 *)(ppVVar6 + 3);
        VectorCopy(pVVar17,&cameraPosition);
        local_60 = 0;
        local_5f = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
        local_5e = (undefined)((ushort)VectorShort_80067ec8.Z >> 4);
        BuildRotationMatrix(&local_60,&MStack_80,(Mat33 *)0x0);
        MatrixMultVector(&MStack_80,&local_90,&local_90);
        VectorAdd(pVVar17,pVVar17,&local_90);
        VectorAdd(pVVar17,pVVar17,&local_90);
        pSVar14 = (Spyro *)&local_90;
      }
      else {
        VectorCopy((Vec3 *)(ppVVar6 + 3),&cameraPosition);
        local_38 = 0;
        local_37 = Spyro.angleAsByte.roll;
        if ((Spyro.airTime == 0) && (0xf8 < (byte)(Spyro.angleAsByte.roll - 4))) {
          local_37 = 0;
        }
        local_36 = Spyro.angleAsByte.yaw;
        BuildRotationMatrix(&local_38,&MStack_58,(Mat33 *)0x0);
        MatrixMultVector(&MStack_58,&local_90,&local_90);
        ppVVar6[3] = (Vec3 *)0x1f4;
        ppVVar6[4] = (Vec3 *)0x0;
        ppVVar6[5] = (Vec3 *)0x0;
        MatrixMultVector(&MStack_58,(Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3));
        pSVar14 = &Spyro;
      }
      VectorAdd((Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3),&pSVar14->position);
      iVar12 = VectorLength(&local_90,0);
      uVar4 = Atan2(iVar12,local_90.z,0);
      *(undefined *)((int)ppVVar6 + 0x45) = uVar4;
      uVar4 = Atan2(local_90.x,local_90.y,0);
      *(undefined *)((int)ppVVar6 + 0x46) = uVar4;
      pOVar2 = DAT_800670bc;
      pOVar13 = Objects;
      *(short *)&pVVar16->x = (short)local_90.x;
      *(short *)((int)&pVVar16->x + 2) = (short)local_90.y;
      *(short *)&pVVar16->y = (short)local_90.z;
      for (; (pOVar13 < pOVar2 && (pOVar13->type != 0x407)); pOVar13 = pOVar13 + 1) {
      }
      if (pOVar13 != (Object *)0x0) {
        piVar15 = (int *)pOVar13->data;
        iVar12 = *piVar15;
        *piVar15 = iVar12 + 0x144;
        if (0x797 < iVar12 + 0x144) {
          *piVar15 = 0;
        }
        puVar10 = (undefined4 *)((int)piVar15 + *piVar15 + 0xc);
        pVVar16->z = (int)puVar10;
        *puVar10 = 0;
        MemCopy(&pVVar16[1].y,piVar15 + 1,8);
      }
      *(undefined *)((int)&pVVar16->y + 3) = 0x6e;
LAB_OVR0SummerForest__8007c950:
      *(undefined *)((int)ppVVar6 + 0x4b) = 1;
      FUN_80050648(ppVVar6,0,0);
      return ppVVar6;
    }
    if (param_1 < 0x1e4) {
      if (param_1 == 0x146) {
        pVVar16 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        *(undefined2 *)&pVVar16->x = 0x10;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
        *(undefined *)(ppVVar6 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        sVar5 = *(short *)(param_2 + 0x36);
        if ((sVar5 == 0x198) || (sVar5 == 0x2c2)) {
          *(undefined *)((int)&pVVar16->x + 2) = 1;
          *(undefined *)((int)&pVVar16->x + 3) = 1;
          uVar4 = 0x7f;
        }
        else {
          if (sVar5 == 0x270) {
            *(undefined *)((int)&pVVar16->x + 2) = 2;
            *(undefined *)(ppVVar6 + 0x15) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x55) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x56) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
          }
          else {
            *(undefined *)((int)&pVVar16->x + 2) = 0;
          }
          uVar4 = 0x60;
          *(undefined *)((int)&pVVar16->x + 3) = 0;
        }
        *(undefined *)((int)ppVVar6 + 0x4f) = uVar4;
        *(undefined *)((int)ppVVar6 + 0x47) = 0xfe;
        uVar9 = Vec2OctagonalDistanceApproximation((Vec2 *)(ppVVar6 + 3),(Vec2 *)&cameraPosition);
        cVar3 = Atan2(uVar9,cameraPosition.z - (int)ppVVar6[5],0);
        *(char *)((int)ppVVar6 + 0x45) = cVar3 + -0x40;
        uVar4 = Atan2(cameraPosition.x - (int)ppVVar6[3],cameraPosition.y - (int)ppVVar6[4],0);
        *(undefined *)((int)ppVVar6 + 0x46) = uVar4;
        return ppVVar6;
      }
      if (param_1 < 0x147) {
        if (param_1 == 0x136) goto LAB_OVR0SummerForest__8007c180;
      }
      else {
        if (param_1 == 0x1e1) {
LAB_OVR0SummerForest__8007ca08:
          pVVar16 = *ppVVar6;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          FUN_80041438(ppVVar6);
          pVVar16->x = 0x18;
          *(undefined *)((int)ppVVar6 + 0x57) = 0x30;
          *(undefined *)(ppVVar6 + 0x15) = 0;
          *(undefined *)((int)ppVVar6 + 0x55) = 0;
          *(undefined *)((int)ppVVar6 + 0x56) = 0;
          *(undefined *)((int)ppVVar6 + 0x4f) = 100;
          *(undefined *)((int)ppVVar6 + 0x47) = 0;
          iVar12 = rand();
          *(char *)((int)ppVVar6 + 0x45) = (char)iVar12;
          iVar12 = rand();
          *(char *)((int)ppVVar6 + 0x46) = (char)iVar12;
          return ppVVar6;
        }
        if (param_1 == 0x1e2) {
          pVVar16 = *ppVVar6;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          FUN_80041438(ppVVar6);
          pVVar16->x = 0x10;
          *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
          *(undefined *)(ppVVar6 + 0x15) = 0x80;
          *(undefined *)((int)ppVVar6 + 0x55) = 0x40;
          *(undefined *)((int)ppVVar6 + 0x56) = 0;
          iVar12 = rand();
          *(char *)((int)ppVVar6 + 0x45) = (char)iVar12;
          iVar12 = rand();
          *(char *)((int)ppVVar6 + 0x46) = (char)iVar12;
          uVar4 = 0x46;
          goto LAB_OVR0SummerForest__8007c9f8;
        }
      }
    }
    else {
      if (param_1 == 0x211) {
        pVVar16 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        pVVar16->x = 0x10;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
        *(undefined *)(ppVVar6 + 0x15) = 0x40;
        *(undefined *)((int)ppVVar6 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x56) = 0x80;
        iVar12 = rand();
        *(char *)((int)ppVVar6 + 0x45) = (char)iVar12;
        iVar12 = rand();
        *(char *)((int)ppVVar6 + 0x46) = (char)iVar12;
        uVar4 = 0x50;
LAB_OVR0SummerForest__8007c9f8:
        *(undefined *)((int)ppVVar6 + 0x4f) = uVar4;
        *(undefined *)((int)ppVVar6 + 0x47) = 4;
        return ppVVar6;
      }
      if (param_1 < 0x212) {
        if (param_1 == 0x1f8) {
          pVVar16 = *ppVVar6;
          FUN_80041438(ppVVar6);
          if (param_2 != 0) {
            VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
            *(undefined2 *)&pVVar16[1].x = 0x30;
            *(undefined *)((int)ppVVar6 + 0x4f) = 0x7f;
            *(char *)(ppVVar6 + 0x15) = (char)*(undefined2 *)&pVVar16[1].x;
            *(char *)((int)ppVVar6 + 0x55) = (char)*(undefined2 *)&pVVar16[1].x;
            uVar1 = *(undefined2 *)&pVVar16[1].x;
            *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
            *(char *)((int)ppVVar6 + 0x56) = (char)uVar1;
            return ppVVar6;
          }
          pVVar17 = (Vec3 *)(ppVVar6 + 3);
          FUN_80032a90(pVVar17);
          pVVar16->x = 400;
          pVVar16->y = 0;
          pVVar16->z = 0;
          if (cameraState == Look) {
            VectorCopy(&VStack_30,pVVar16);
            VectorCopy(pVVar17,&cameraPosition);
            local_38 = 0;
            local_37 = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
            local_36 = (byte)((ushort)VectorShort_80067ec8.Z >> 4);
            BuildRotationMatrix(&local_38,&MStack_80,(Mat33 *)0x0);
            MatrixMultVector(&MStack_80,&VStack_30,&VStack_30);
            VectorAdd(pVVar17,pVVar17,&VStack_30);
            VectorAdd(pVVar17,pVVar17,&VStack_30);
            VectorAdd(pVVar17,pVVar17,&VStack_30);
            *(byte *)((int)&pVVar16[1].y + 1) = local_37;
            *(byte *)((int)&pVVar16[1].y + 2) = local_36;
          }
          else {
            MatrixMultVector(&Spyro.unkMatrix,pVVar16,pVVar16);
            iVar12 = VectorLength(pVVar16,0);
            cVar3 = Atan2(iVar12,pVVar16->z,0);
            iVar12 = pVVar16->x;
            iVar8 = pVVar16->y;
            *(char *)((int)&pVVar16[1].y + 1) = cVar3 + '\x05';
            uVar4 = Atan2(iVar12,iVar8,0);
            *(undefined *)((int)&pVVar16[1].y + 2) = uVar4;
          }
          *(undefined2 *)&pVVar16[1].x = 0xb4;
          goto LAB_OVR0SummerForest__8007c950;
        }
      }
      else {
        if (param_1 == 0x21d) goto LAB_OVR0SummerForest__8007ca08;
        if (param_1 == 0x238) goto LAB_OVR0SummerForest__8007c180;
      }
    }
  }
  if (param_2 == 0) {
    pSVar14 = &Spyro;
  }
  else {
    pSVar14 = (Spyro *)(param_2 + 0xc);
  }
  VectorCopy((Vec3 *)(ppVVar6 + 3),&pSVar14->position);
LAB_OVR0SummerForest__8007ca80:
  FUN_80041438(ppVVar6);
  return ppVVar6;
}



undefined * FUN_OVR0SummerForest__8007cab8(int param_1)

{
  char cVar1;
  bool bVar2;
  byte bVar3;
  short sVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  short sVar10;
  short sVar11;
  char cVar12;
  uint uVar13;
  char *pcVar14;
  undefined *puVar15;
  VectorShort *pVVar16;
  int iVar17;
  undefined *puVar18;
  Vec3 local_98;
  Vec3 local_88;
  undefined4 local_78;
  undefined4 local_74;
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  
  cVar12 = DAT_80066f18[1];
  local_60 = param_1 << 1;
  puVar15 = DAT_80066f18;
  if (cVar12 != -1) {
    iVar17 = param_1 * 4;
    pcVar14 = DAT_80066f18 + 1;
    puVar18 = DAT_80066f18 + 0x18;
    pVVar16 = (VectorShort *)(DAT_80066f18 + 4);
    do {
      if (cVar12 == -2) goto LAB_OVR0SummerForest__8007e0a8;
      cVar12 = (char)param_1;
      switch(*puVar15) {
      case 0:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[9] = pcVar14[9] + (char)local_60;
        pcVar14[0xb] = pcVar14[0xb] + cVar12 * -4;
        bVar3 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        pcVar14[0xc] = pcVar14[0xc] + cVar12 * -4;
        bVar2 = ((uint)bVar3 + param_1 & 0xff) < 0x20;
        pcVar14[0xd] = pcVar14[0xd] + cVar12 * -4;
        goto LAB_OVR0SummerForest__8007d97c;
      case 1:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        pcVar14[9] = pcVar14[9] + (char)iVar17;
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[0xc] = pcVar14[0xc] + cVar12 * -4;
        pcVar14[0xb] = pcVar14[0xb] + cVar12 * -4;
        bVar3 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        bVar2 = ((uint)bVar3 + param_1 & 0xff) < 0x18;
        pcVar14[0xd] = pcVar14[0xd] + cVar12 * -4;
        goto LAB_OVR0SummerForest__8007d97c;
      case 2:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[9] = pcVar14[9] + (char)local_60;
        if ((int)(uint)(byte)pcVar14[0xb] < iVar17) {
          pcVar14[0xb] = '\0';
        }
        else {
          pcVar14[0xb] = pcVar14[0xb] + cVar12 * -4;
        }
        if ((int)(uint)(byte)pcVar14[0xc] < iVar17) {
          pcVar14[0xc] = '\0';
        }
        else {
          pcVar14[0xc] = pcVar14[0xc] + cVar12 * -4;
        }
        if ((int)(uint)(byte)pcVar14[0xd] < iVar17) {
          pcVar14[0xd] = '\0';
        }
        else {
          pcVar14[0xd] = pcVar14[0xd] + cVar12 * -4;
        }
        bVar3 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        bVar2 = ((uint)bVar3 + param_1 & 0xff) < 0x20;
        goto LAB_OVR0SummerForest__8007d97c;
      case 4:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((short)(ushort)(byte)(cVar12 + 1U) < *(short *)(pcVar14 + 0x17)) {
          pcVar14[9] = pcVar14[9] + '\x04';
        }
        sVar10 = *(short *)(pcVar14 + 7);
        *(short *)(pcVar14 + 7) = sVar10 + *(short *)(pcVar14 + 0x1b);
        pcVar14[10] = pcVar14[10] + pcVar14[0x19];
        if (*(short *)(pcVar14 + 0x1d) < (short)(sVar10 + *(short *)(pcVar14 + 0x1b))) {
          cVar12 = pcVar14[9];
          pcVar14[9] = cVar12 - 4U;
          bVar2 = (byte)(cVar12 - 4U) < 9;
LAB_OVR0SummerForest__8007e094:
          if (bVar2) goto LAB_OVR0SummerForest__8007e09c;
        }
        break;
      case 6:
        VectorCopy(&local_98,*(Vec3 **)(pcVar14 + 0x17));
        iVar7 = (uint)(byte)pcVar14[1] << 6;
        iVar6 = local_98.z + *(short *)(pcVar14 + 0x1d) * 0x40;
        iVar8 = iVar7;
        if (*(short *)(pcVar14 + 0x1b) < iVar7) {
          iVar8 = (int)*(short *)(pcVar14 + 0x1b);
        }
        iVar5 = cosineLookup(iVar7);
        local_98.x = local_98.x + (iVar8 * iVar5 >> 0xc);
        iVar7 = sineLookup(iVar7);
        local_98.y = local_98.y + (iVar8 * iVar7 >> 0xc);
        local_98.z = *(short *)(pcVar14 + 7) * 4 + 0x40;
        if (iVar6 < local_98.z) goto LAB_OVR0SummerForest__8007e09c;
        VecIntToShort(pVVar16,&local_98);
        pcVar14[1] = pcVar14[1] + '\x01';
        break;
      case 9:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        bVar3 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        bVar2 = ((uint)bVar3 + param_1 & 0xff) < 0x20;
        pcVar14[9] = pcVar14[9] + (char)local_60;
        goto LAB_OVR0SummerForest__8007d97c;
      case 10:
        if (((Spyro.state == Drowning) && (Spyro.health < 0)) ||
           ((Spyro.field168_0x260 != 0 || (Spyro.iframeTimer == 0))))
        goto LAB_OVR0SummerForest__8007e09c;
        VectorCopy(&local_88,&Spyro.position);
        iVar8 = cosineLookup((int)*(short *)(pcVar14 + 0x17));
        local_88.x = local_88.x + (iVar8 >> 4);
        iVar8 = sineLookup((int)*(short *)(pcVar14 + 0x17));
        local_88.y = local_88.y + (iVar8 >> 4);
        local_88.z = local_88.z + 0x100;
        VecIntToShort(pVVar16,&local_88);
        sVar10 = *(short *)(pcVar14 + 0x17);
        *(short *)(pcVar14 + 0x17) = sVar10 + 0x40;
        iVar8 = cosineLookup((int)(short)(sVar10 + 0x40) - (int)VectorShort_80067ec8.Z & 0xfff);
        if (iVar8 < 0) {
          iVar8 = -iVar8;
        }
        pcVar14[9] = (char)(iVar8 / 0xaa);
        break;
      case 0xb:
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x15) = *(short *)(pcVar14 + 0x15) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        VectorShortAdd(pVVar16,pVVar16,puVar15 + 0x12);
        pcVar14[9] = pcVar14[9] + (char)local_60;
        pcVar14[0xb] = pcVar14[0xb] + -4;
        cVar12 = pcVar14[0xd];
        pcVar14[10] = pcVar14[10] + (char)iVar17;
        pcVar14[0xd] = cVar12 + -4;
        pcVar14[0xc] = pcVar14[0xc] + -4;
        if ((char)(cVar12 + -4) == '\0') goto LAB_OVR0SummerForest__8007e09c;
        goto LAB_OVR0SummerForest__8007d984;
      case 0xc:
        pcVar14[10] = pcVar14[10] + '\b';
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (pcVar14[0xb] != '\0') {
          pcVar14[0xb] = pcVar14[0xb] + -8;
        }
        if (pcVar14[0xc] != '\0') {
          pcVar14[0xc] = pcVar14[0xc] + -8;
        }
        if (pcVar14[0xd] != '\0') {
          pcVar14[0xd] = pcVar14[0xd] + -8;
        }
        uVar9 = *(uint *)(pcVar14 + 0xb);
        goto joined_r0x8007d8a0;
      case 0xd:
        if ((0x1b < (byte)pcVar14[1]) || (pcVar14[2] == '\0')) goto LAB_OVR0SummerForest__8007e09c;
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        uVar9 = (uint)(byte)pcVar14[1];
        pcVar14[9] = pcVar14[9] + (char)local_60;
        if (uVar9 < 0xd) {
          if (uVar9 < 5) {
            pcVar14[0xb] = -0x80;
            pcVar14[0xc] = -0x80;
            iVar8 = (uint)(byte)pcVar14[1] * -0x20 + 0x80;
            if (iVar8 < 0) {
              iVar8 = 0;
            }
            pcVar14[0xd] = (char)iVar8;
          }
          else {
            pcVar14[0xb] = -0x80;
            pcVar14[0xd] = '\0';
            pcVar14[0xc] = (pcVar14[1] + -4) * -8 + -0x80;
          }
        }
        else {
          iVar8 = (uVar9 - 0xc) * -8 + 0x80;
          if (iVar8 < 0) {
            iVar8 = 0;
          }
          pcVar14[0xb] = (char)iVar8;
          iVar8 = ((byte)pcVar14[1] - 0xc) * -4 + 0x40;
          if (iVar8 < 0) {
            iVar8 = 0;
          }
          pcVar14[0xc] = (char)iVar8;
          pcVar14[0xd] = '\0';
        }
        pcVar14[1] = pcVar14[1] + cVar12;
        break;
      case 0x21:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        iVar8 = (uint)(byte)pcVar14[0xb] - local_60;
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[9] = pcVar14[9] + (char)local_60;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        bVar3 = pcVar14[1];
        cVar12 = (char)iVar8;
        pcVar14[0xb] = cVar12;
        pcVar14[0xc] = cVar12;
        pcVar14[0xd] = cVar12;
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        if (((0x1f < ((uint)bVar3 + param_1 & 0xff)) || (pcVar14[2] == '\0')) || (iVar8 == 0))
        goto LAB_OVR0SummerForest__8007e09c;
        break;
      case 0x27:
        if (*(short *)(pcVar14 + 0x17) < 1) {
          sVar10 = 1;
        }
        else {
          sVar10 = -1;
        }
        *(short *)(pcVar14 + 0x17) = *(short *)(pcVar14 + 0x17) + sVar10;
        if (*(short *)(pcVar14 + 0x19) < 1) {
          sVar10 = 1;
        }
        else {
          sVar10 = -1;
        }
        *(short *)(pcVar14 + 0x19) = *(short *)(pcVar14 + 0x19) + sVar10;
        sVar10 = *(short *)(pcVar14 + 0x1b);
        *(short *)(pcVar14 + 0x1b) = sVar10 + 1;
        if (0x18 < (short)(sVar10 + 1)) {
          *(undefined2 *)(pcVar14 + 0x1b) = 0x18;
        }
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        *(short *)(pcVar14 + 3) =
             *(short *)(pcVar14 + 3) + (cosineLookupTable[((byte)pcVar14[1] & 0x1f) * 8] >> 9);
        *(short *)(pcVar14 + 5) =
             *(short *)(pcVar14 + 5) + (sineLookupTable[((byte)pcVar14[1] & 0x1f) * 8] >> 9);
        if ((pcVar14[10] == '\0') || ((DAT_80067008 & 1) != 0)) {
          pcVar14[9] = pcVar14[9] + '\x01';
        }
        iVar8 = AdvanceTimer(puVar15 + 2,1);
        if (iVar8 != 0) goto LAB_OVR0SummerForest__8007e09c;
        if (pcVar14[10] == '\0') goto LAB_OVR0SummerForest__8007d984;
        break;
      case 0x29:
        uVar9 = (uint)(byte)pcVar14[0x1d];
        bVar3 = pcVar14[1] + 1;
        pcVar14[1] = bVar3;
        if (uVar9 < bVar3) {
          if (pcVar14[0x1e] != '\0') {
LAB_OVR0SummerForest__8007d778:
            (*DAT_800670fc)(1,0x2b,pVVar16,0);
          }
          goto LAB_OVR0SummerForest__8007e09c;
        }
        iVar8 = ((int)*(short *)(pcVar14 + 0x17) - (int)*(short *)(pcVar14 + 0x11)) * (uint)bVar3;
        if (uVar9 == 0) {
          trap(0x1c00);
        }
        if ((uVar9 == 0xffffffff) && (iVar8 == -0x80000000)) {
          trap(0x1800);
        }
        iVar7 = ((int)*(short *)(pcVar14 + 0x19) - (int)*(short *)(pcVar14 + 0x13)) *
                (uint)(byte)pcVar14[1];
        uVar13 = (uint)(byte)pcVar14[0x1d];
        if (uVar13 == 0) {
          trap(0x1c00);
        }
        if ((uVar13 == 0xffffffff) && (iVar7 == -0x80000000)) {
          trap(0x1800);
        }
        sVar10 = *(short *)(pcVar14 + 0x15);
        *(short *)(pcVar14 + 0x15) = *(short *)(pcVar14 + 0x15) + -2;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + sVar10;
        iVar6 = clock * 8;
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 0x11) + (short)(iVar8 / (int)uVar9);
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 0x13) + (short)(iVar7 / (int)uVar13);
        pcVar14[9] = (char)(cosineLookupTable[iVar6 + (uint)(byte)pcVar14[0x1c] & 0xff] >> 10) +
                     '\n';
        pcVar14[10] = (char)(sineLookupTable[clock * 8 + (uint)(byte)pcVar14[0x1c] & 0xff] >> 0xb) +
                      '\x06';
        break;
      case 0x2a:
        bVar3 = pcVar14[1];
        pcVar14[1] = bVar3 + 1;
        if ((0xf < bVar3) || (pcVar14[2] == '\0')) goto LAB_OVR0SummerForest__8007e09c;
        pcVar14[9] = pcVar14[9] + '\x02';
        pcVar14[0xb] = pcVar14[0xb] + -6;
        pcVar14[0xc] = pcVar14[0xc] + -6;
        pcVar14[0xd] = pcVar14[0xd] + -6;
        *(int *)(pcVar14 + 0x17) = *(int *)(pcVar14 + 0x17) + (int)*(short *)(pcVar14 + 0x11);
        *(int *)(pcVar14 + 0x1b) = *(int *)(pcVar14 + 0x1b) + (int)*(short *)(pcVar14 + 0x13);
        *(short *)(pcVar14 + 3) = (short)(*(int *)(pcVar14 + 0x17) >> 2);
        *(short *)(pcVar14 + 5) = (short)(*(int *)(pcVar14 + 0x1b) >> 2);
        break;
      case 0x2b:
        if (((byte)pcVar14[0xb] < 4) || (pcVar14[2] == '\0')) goto LAB_OVR0SummerForest__8007e09c;
        cVar12 = '\x03';
        if (*(short *)(pcVar14 + 0x17) != 0) {
          cVar12 = '\x02';
        }
        cVar1 = pcVar14[9];
        pcVar14[9] = cVar1 + '\x01';
        if (*(short *)(pcVar14 + 0x17) != 0) {
          pcVar14[9] = cVar1 + '\x02';
        }
        pcVar14[0xb] = pcVar14[0xb] - cVar12;
        pcVar14[0xd] = pcVar14[0xd] - cVar12;
        pcVar14[0xc] = pcVar14[0xc] - cVar12;
        break;
      case 0x2c:
        *(short *)(pcVar14 + 0x17) = *(short *)(pcVar14 + 0x17) + *(short *)(pcVar14 + 0x11);
        *(short *)(pcVar14 + 0x19) = *(short *)(pcVar14 + 0x19) + *(short *)(pcVar14 + 0x13);
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + *(short *)(pcVar14 + 0x15);
        *(short *)(pcVar14 + 3) =
             *(short *)(pcVar14 + 0x17) +
             (short)(char)((ushort)cosineLookupTable[(byte)pcVar14[0x1b]] >> 8);
        sVar10 = sineLookupTable[(byte)pcVar14[0x1b]];
        pcVar14[0x1b] = pcVar14[0x1b] + pcVar14[0x1c];
        uVar9 = DAT_80067008 & 3;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 0x19) + (short)(char)((ushort)sVar10 >> 8);
        if (uVar9 == 0) {
          if (*(short *)(pcVar14 + 0x15) < 9) {
            *(short *)(pcVar14 + 0x15) = *(short *)(pcVar14 + 0x15) + 1;
          }
          if ((byte)pcVar14[9] < 0x14) {
            pcVar14[9] = pcVar14[9] + 1;
          }
        }
        if (*(short *)(pcVar14 + 7) < *(short *)(pcVar14 + 0x1d)) {
          if (pcVar14[1] != '\0') goto LAB_OVR0SummerForest__8007d984;
        }
        else if (pcVar14[0x10] == '\x03') goto LAB_OVR0SummerForest__8007d778;
        goto LAB_OVR0SummerForest__8007e09c;
      case 0x2e:
        bVar3 = pcVar14[1];
        pcVar14[1] = bVar3 + 1;
        if ((0xf < bVar3) || (pcVar14[2] == '\0')) goto LAB_OVR0SummerForest__8007e09c;
        pcVar14[9] = pcVar14[9] + '\x03';
        pcVar14[0xb] = pcVar14[0xb] + -8;
        pcVar14[0xc] = pcVar14[0xc] + -8;
        pcVar14[0xd] = pcVar14[0xd] + -8;
        break;
      case 0x3b:
        pcVar14[10] = pcVar14[10] + '\b';
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if ((DAT_80067008 & 1) != 0) {
          *(short *)(pcVar14 + 0x19) = *(short *)(pcVar14 + 0x19) + 1;
        }
        if (pcVar14[0xb] != '\0') {
          pcVar14[0xb] = pcVar14[0xb] + -4;
        }
        if (pcVar14[0xc] != '\0') {
          pcVar14[0xc] = pcVar14[0xc] + -4;
        }
        if (pcVar14[0xd] != '\0') {
          pcVar14[0xd] = pcVar14[0xd] + -4;
        }
        uVar9 = *(uint *)(pcVar14 + 0xb);
joined_r0x8007d8a0:
        if ((uVar9 & 0xffffff) == 0) goto LAB_OVR0SummerForest__8007e09c;
        goto LAB_OVR0SummerForest__8007d984;
      case 0x42:
        iVar8 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar14[1] & 1U) != 0) {
              *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + *(short *)(pcVar14 + 0xf);
              *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + *(short *)(pcVar14 + 0x11);
              *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + *(short *)(pcVar14 + 0x13);
              if ((pcVar14[1] & 2U) != 0) {
                iVar7 = rand();
                *(ushort *)(pcVar14 + 0xf) = *(short *)(pcVar14 + 0xf) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar14 + 0x11) = *(short *)(pcVar14 + 0x11) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar14 + 0x13) = *(short *)(pcVar14 + 0x13) + -1 + ((ushort)iVar7 & 2);
              }
            }
            iVar8 = iVar8 + 1;
            pcVar14[1] = pcVar14[1] + '\x01';
          } while (iVar8 < param_1);
        }
        bVar2 = (byte)pcVar14[1] < 0x18;
LAB_OVR0SummerForest__8007d97c:
        if (bVar2) {
LAB_OVR0SummerForest__8007d984:
          if (pcVar14[2] != '\0') break;
        }
LAB_OVR0SummerForest__8007e09c:
        FUN_80041d20(puVar15);
        break;
      case 0x46:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((0x1f < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR0SummerForest__8007e09c;
        local_78._0_2_ = (short)((int)*(short *)(pcVar14 + 9) - (int)*(short *)(pcVar14 + 3) >> 1);
        local_78._2_2_ = (short)((int)*(short *)(pcVar14 + 0xb) - (int)*(short *)(pcVar14 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar14 + 0xd) - (int)*(short *)(pcVar14 + 7) >> 1);
        local_74 = CONCAT22(local_74._2_2_,sVar10);
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + (short)local_78;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + local_78._2_2_;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + sVar10;
        iVar8 = rand();
        local_78._0_2_ = (short)local_78 + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        sVar10 = local_78._2_2_ + -1 + ((ushort)iVar8 & 2);
        local_78 = CONCAT22(sVar10,(short)local_78);
        if ((pcVar14[1] & 1U) != 0) {
          local_74 = CONCAT22(local_74._2_2_,(short)local_74 + -1);
        }
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + (short)local_78;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + sVar10;
        cVar12 = pcVar14[0xf];
        pcVar14[0xf] = cVar12 - 3U;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + (short)local_74;
        if ((byte)(cVar12 - 3U) < 0x80) {
          pcVar14[0xf] = -0x80;
        }
        cVar12 = pcVar14[0x10];
        pcVar14[0x10] = cVar12 - 4U;
        if ((byte)(cVar12 - 4U) < 0x60) {
          pcVar14[0x10] = '`';
        }
        cVar12 = pcVar14[0x13];
        pcVar14[0x11] = '\0';
        pcVar14[0x13] = cVar12 - 3U;
        if ((byte)(cVar12 - 3U) < 0xc0) {
          pcVar14[0x13] = -0x40;
        }
        cVar12 = pcVar14[0x14];
        pcVar14[0x14] = cVar12 - 4U;
        if ((byte)(cVar12 - 4U) < 0x80) {
          pcVar14[0x14] = -0x80;
        }
        cVar12 = pcVar14[0x15];
        pcVar14[0x15] = cVar12 - 6U;
        if ((byte)(cVar12 - 6U) < 0x20) {
          pcVar14[0x15] = ' ';
        }
        break;
      case 0x47:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((0x1f < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR0SummerForest__8007e09c;
        local_70 = (int)*(short *)(pcVar14 + 9) - (int)*(short *)(pcVar14 + 3);
        local_6c = (int)*(short *)(pcVar14 + 0xb) - (int)*(short *)(pcVar14 + 5);
        local_68 = (int)*(short *)(pcVar14 + 0xd) - (int)*(short *)(pcVar14 + 7);
        uVar9 = rand();
        local_70 = local_70 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_6c = local_6c + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_68 = local_68 + -1 + (uVar9 & 2);
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + (short)local_70;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + (short)local_6c;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + (short)local_68;
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 9) - (short)local_70;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 0xb) - (short)local_6c;
        pcVar14[0x13] = pcVar14[0x13] + -2;
        pcVar14[0x15] = pcVar14[0x15] + -4;
        pcVar14[0x14] = pcVar14[0x14] + -2;
        pcVar14[0x10] = pcVar14[0x10] + -3;
        pcVar14[0xf] = pcVar14[0xf] + -3;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 0xd) - (short)local_68;
        pcVar14[0x11] = pcVar14[0x11] + -3;
        break;
      case 0x48:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((0x37 < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR0SummerForest__8007e09c;
        local_78 = (int)*(short *)(pcVar14 + 3) - (int)*(short *)(pcVar14 + 9) >> 1;
        local_74 = (int)*(short *)(pcVar14 + 5) - (int)*(short *)(pcVar14 + 0xb) >> 1;
        local_70 = (int)*(short *)(pcVar14 + 7) - (int)*(short *)(pcVar14 + 0xd) >> 1;
        uVar9 = rand();
        local_78 = local_78 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_74 = local_74 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_70 = local_70 + -1 + (uVar9 & 2);
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + (short)local_78;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + (short)local_74;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + (short)local_70;
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 3) + (short)local_78 * -2;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 5) + (short)local_74 * -2;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 7) + (short)local_70 * -2;
        break;
      case 0x4e:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((0x27 < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR0SummerForest__8007e09c;
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + *(short *)(pcVar14 + 0xf);
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + *(short *)(pcVar14 + 0x11);
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + *(short *)(pcVar14 + 0x13);
        iVar8 = rand();
        *(ushort *)(pcVar14 + 0xf) = *(short *)(pcVar14 + 0xf) + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        *(ushort *)(pcVar14 + 0x11) = *(short *)(pcVar14 + 0x11) + -1 + ((ushort)iVar8 & 2);
        uVar9 = rand();
        iVar8 = (*(ushort *)(pcVar14 + 0x13) - 1) + (uVar9 & 2);
        *(short *)(pcVar14 + 0x13) = (short)iVar8;
        if (2 < iVar8 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar14 + 0x13) = 2;
        }
        if (*(short *)(pcVar14 + 0x13) < -4) {
          *(undefined2 *)(pcVar14 + 0x13) = 0xfffc;
        }
        pcVar14[0xb] = pcVar14[0xb] + -2;
        pcVar14[0xd] = pcVar14[0xd] + -1;
        pcVar14[0xc] = pcVar14[0xc] + -2;
        break;
      case 0x4f:
        sVar11 = (short)((int)*(short *)(pcVar14 + 9) - (int)*(short *)(pcVar14 + 3) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar14 + 0xb) - (int)*(short *)(pcVar14 + 5) >> 1);
        local_78 = CONCAT22(sVar10,sVar11);
        sVar4 = (short)((int)*(short *)(pcVar14 + 0xd) - (int)*(short *)(pcVar14 + 7) >> 1);
        local_74 = CONCAT22(local_74._2_2_,sVar4);
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + sVar11;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + sVar10;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + sVar4;
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + sVar11;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + sVar10;
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + sVar4;
        if ((0x17 < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR0SummerForest__8007e09c;
        pcVar14[0xf] = pcVar14[0xf] + -3;
        pcVar14[0x13] = pcVar14[0x13] + -3;
        pcVar14[0x10] = pcVar14[0x10] + -4;
        pcVar14[0x14] = pcVar14[0x14] + -4;
        if (5 < (byte)pcVar14[0x15]) {
          pcVar14[0x15] = pcVar14[0x15] - 6;
        }
        break;
      case 0x52:
        sVar10 = *(short *)(pcVar14 + 0xd) + 0x30;
        *(short *)(pcVar14 + 0xd) = sVar10;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + 0x30;
        if (-1 < sVar10) {
          bVar2 = *(int *)(pcVar14 + 0x17) < (int)sVar10;
          goto LAB_OVR0SummerForest__8007e094;
        }
        goto LAB_OVR0SummerForest__8007e09c;
      }
LAB_OVR0SummerForest__8007e0a8:
      pcVar14 = pcVar14 + 0x20;
      puVar18 = puVar18 + 0x20;
      pVVar16 = (VectorShort *)&pVVar16[5].Y;
      cVar12 = *pcVar14;
      puVar15 = puVar15 + 0x20;
    } while (cVar12 != -1);
  }
  return puVar15;
}



undefined *
FUN_OVR0SummerForest__8007e100(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  byte bVar1;
  undefined uVar2;
  char cVar3;
  uint uVar4;
  undefined4 uVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  Vec3 *from;
  int *piVar9;
  undefined *puVar10;
  undefined uVar11;
  Vec3 local_140;
  Vec3 local_130;
  Vec3 local_120;
  Vec3 local_110;
  Vec3 local_100;
  Vec3 local_f0;
  Vec3 local_e0;
  Vec3 VStack_d0;
  Vec3 VStack_c0;
  Vec3 VStack_b0;
  Vec3 local_a0;
  undefined local_90;
  undefined local_8f;
  undefined local_8e;
  Mat33 MStack_88;
  Vec3 local_68;
  Vec3 local_58;
  int local_48;
  int local_40;
  int local_30;
  
  puVar10 = (undefined *)0x0;
  local_40 = 0;
  if (0 < param_1) {
    local_30 = 0;
    local_48 = param_1;
    do {
      uVar2 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar10 + 0x18),param_4);
        *(undefined2 *)(puVar10 + 0x1e) = 0;
        puVar10[10] = 0x18;
        iVar6 = rand();
        puVar10[0xb] = (char)iVar6;
        uVar2 = 4;
        goto LAB_OVR0SummerForest__8007f09c;
      case 1:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar10 + 0x18),param_4);
        *(undefined2 *)(puVar10 + 0x1e) = 0;
        puVar10[10] = 0x10;
        iVar6 = rand();
        puVar10[0xb] = (char)iVar6;
        puVar10[0xc] = 0x60;
        puVar10[0xd] = 0x60;
        puVar10[0xe] = 0x60;
        uVar2 = 4;
        puVar10[0xf] = 0x2e;
        goto LAB_OVR0SummerForest__8007f0ac;
      case 2:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        uVar7 = rand();
        local_140.x = (uVar7 & 0x3f) - 0x20;
        uVar7 = rand();
        local_140.y = (uVar7 & 0x3f) - 0x20;
        local_140.z = 0x10;
        VecIntToShort((VectorShort *)(puVar10 + 0x18),&local_140);
        *(undefined2 *)(puVar10 + 0x1e) = 0;
        puVar10[10] = 0x20;
        iVar6 = rand();
        puVar10[0xb] = (char)iVar6;
        puVar10[0xc] = 0x80;
        puVar10[0xd] = 0x80;
        puVar10[0xe] = 0x80;
        puVar10[0xf] = 0x2e;
        puVar10[0x11] = 2;
        puVar10[0x10] = 0;
        break;
      case 4:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        puVar10[10] = 8;
        iVar6 = rand();
        puVar10[0xb] = (char)iVar6;
        puVar10[0xc] = 0x80;
        puVar10[0xd] = 0x80;
        puVar10[0xe] = 0x80;
        puVar10[0xf] = 0x2e;
        puVar10[0x11] = 2;
        puVar10[0x10] = 0;
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x18) = ((ushort)iVar6 & 3) + 4;
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x1a) = ((ushort)iVar6 & 3) + 2;
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x1c) = ((ushort)iVar6 & 7) + 3;
        *(short *)(puVar10 + 0x1e) = (short)((int)param_4 >> 2);
        break;
      case 6:
        piVar9 = (int *)param_3->x;
        puVar10 = (undefined *)FUN_80041c50(3);
        *puVar10 = uVar2;
        iVar6 = rand();
        puVar10[2] = (byte)iVar6 & 0xf;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3 + 1);
        iVar6 = rand();
        *(ushort *)(puVar10 + 4) = *(short *)(puVar10 + 4) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(Vec3 **)(puVar10 + 0x18) = param_3 + 1;
        *(ushort *)(puVar10 + 6) = *(short *)(puVar10 + 6) + -0x3f + ((ushort)iVar6 & 0x7e);
        *(short *)(puVar10 + 0x1c) = (short)piVar9[1];
        iVar6 = *piVar9;
        puVar10[10] = 0x20;
        puVar10[0xb] = 0x14;
        puVar10[0xc] = 0x80;
        puVar10[0xd] = 0x80;
        puVar10[0xe] = 0x80;
        puVar10[0xf] = 0x2c;
        puVar10[0x11] = 0;
        puVar10[0x10] = 0;
        *(short *)(puVar10 + 0x1e) = (short)(iVar6 >> 6);
        break;
      case 9:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        VectorCopy(&local_130,&Spyro.position);
        uVar7 = rand();
        local_130.x = local_130.x + -0x3f + (uVar7 & 0x7e);
        uVar7 = rand();
        local_130.y = local_130.y + -0x3f + (uVar7 & 0x7e);
        VecIntToShort((VectorShort *)(puVar10 + 4),&local_130);
        VectorCopy(&local_130,&Spyro.physicsVelocity);
        VectorShiftRight(&local_130,6);
        VecIntToShort((VectorShort *)(puVar10 + 0x18),&local_130);
        *(undefined2 *)(puVar10 + 0x1e) = 0;
        puVar10[10] = 0x18;
        iVar6 = rand();
        puVar10[0xb] = (char)iVar6;
        uVar2 = 4;
        puVar10[0xc] = 0x80;
        puVar10[0xd] = 0x80;
        puVar10[0xe] = 0x80;
        puVar10[0xf] = 0x2e;
        goto LAB_OVR0SummerForest__8007f0ac;
      case 10:
        puVar10 = (undefined *)FUN_80041c50(3);
        *puVar10 = uVar2;
        iVar6 = rand();
        puVar10[2] = (byte)iVar6 & 0x1f;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),&Spyro.position);
        puVar10[10] = 0x18;
        puVar10[0xb] = 0xf;
        puVar10[0xc] = (&DAT_80064654)[local_30];
        puVar10[0xd] = (&DAT_80064655)[local_30];
        uVar2 = (&DAT_80064656)[local_30];
        puVar10[0xf] = 0x2c;
        puVar10[0x11] = 4;
        puVar10[0x10] = 0;
        puVar10[0xe] = uVar2;
        *(short *)(puVar10 + 0x18) = (short)(((local_48 - local_40) * 0x1000) / 5);
        break;
      case 0xc:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        iVar6 = local_40 * 0xc;
        puVar10[3] = 1;
        puVar10[0x11] = 4;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar6),&local_120);
        VectorAdd(&local_120,&local_120,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar7 = rand();
          local_120.x = (local_120.x + 0x100) - (uVar7 & 0x1ff);
          uVar7 = rand();
          local_120.y = (local_120.y + 0x100) - (uVar7 & 0x1ff);
          uVar7 = rand();
          local_120.z = (local_120.z + 0x100) - (uVar7 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar7 = rand();
          local_120.x = (local_120.x + 0x80) - (uVar7 & 0xff);
          uVar7 = rand();
          local_120.y = (local_120.y + 0x80) - (uVar7 & 0xff);
          uVar7 = rand();
          local_120.z = (local_120.z + 0x80) - (uVar7 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar10 + 4),&local_120);
        *(undefined4 *)(puVar10 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar8 = rand();
        puVar10[10] = ((byte)iVar8 & 7) + 0x20;
        iVar8 = rand();
        puVar10[0xb] = (char)iVar8;
        puVar10[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar10 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar6));
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x18) = (*(short *)(puVar10 + 0x18) >> 2) + -4 + ((ushort)iVar6 & 7);
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x1a) = (*(short *)(puVar10 + 0x1a) >> 2) + -4 + ((ushort)iVar6 & 7);
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x1c) = (*(short *)(puVar10 + 0x1c) >> 2) + -4 + ((ushort)iVar6 & 7);
        break;
      case 0xd:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar10 + 0x18),param_4);
        *(undefined2 *)(puVar10 + 0x1e) = 0;
        puVar10[10] = 0x18;
        iVar6 = rand();
        puVar10[0xc] = 0xff;
        puVar10[0xb] = (char)iVar6;
        uVar2 = 4;
        puVar10[0xd] = 0xff;
        puVar10[0xe] = 0;
        puVar10[0xf] = 0x2e;
        goto LAB_OVR0SummerForest__8007f0ac;
      case 0x21:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_100,&Spyro.physicsVelocity);
          VectorShiftRight(&local_100,6);
          VectorCopy(&local_110,&Spyro.position);
          local_110.z = local_110.z + -0x164;
          uVar7 = rand();
          local_110.x = (local_110.x + 0x80) - (uVar7 & 0xff);
          uVar7 = rand();
          uVar11 = 0x30;
          local_110.y = (local_110.y + 0x80) - (uVar7 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_110.x = 0x164;
          local_110.y = 0;
          local_110.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_110,&local_110);
          VectorAdd(&local_110,&local_110,&Spyro.position);
          uVar11 = 0x40;
          uVar7 = rand();
          local_100.x = -(uVar7 & 7);
          uVar7 = rand();
          local_100.y = ((int)((uint)(ushort)cosineLookupTable[local_40 * 0x20] << 0x10) >> 0x17) -
                        ((uVar7 & 0xf) - 8);
          local_100.z = (int)((uint)(ushort)sineLookupTable[local_40 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_100,&local_100);
        }
        else {
          iVar6 = 5;
          if (param_4 == (Vec3 *)0x2) {
            iVar8 = local_40 << 5;
            iVar6 = 6;
            uVar11 = 0x30;
          }
          else {
            uVar11 = 0x40;
            iVar8 = local_40 * 0x20 + 0x10;
          }
          VectorCopy(&local_110,&Spyro.position);
          local_110.x = local_110.x + ((int)cosineLookupTable[iVar8] >> iVar6);
          local_110.z = local_110.z + -0x164;
          local_110.y = local_110.y + ((int)sineLookupTable[iVar8] >> iVar6);
          local_100.x = (int)cosineLookupTable[iVar8] >> iVar6 + 1;
          local_100.z = 0;
          local_100.y = (int)sineLookupTable[iVar8] >> iVar6 + 1;
        }
        VecIntToShort((VectorShort *)(puVar10 + 4),&local_110);
        VecIntToShort((VectorShort *)(puVar10 + 0x18),&local_100);
        *(undefined2 *)(puVar10 + 0x1e) = 0;
        puVar10[10] = 0x10;
        iVar6 = rand();
        puVar10[0xb] = (char)iVar6;
        uVar2 = 4;
        puVar10[0xc] = uVar11;
        puVar10[0xd] = uVar11;
        puVar10[0xe] = uVar11;
        goto LAB_OVR0SummerForest__8007f0a8;
      case 0x27:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar10 + 0x18),param_4);
        puVar10[0xb] = 0;
        puVar10[0xc] = 0x80;
        puVar10[0xd] = 0x80;
        puVar10[0xe] = 0x80;
        puVar10[0xf] = 0x2e;
        puVar10[0x11] = 4;
        puVar10[0x10] = 0;
        uVar2 = randomRangeGen(10,0x18);
        puVar10[10] = uVar2;
        uVar2 = randomRangeGen(0x28,0x46);
        puVar10[2] = uVar2;
        break;
      case 0x29:
        VectorCopy(&local_f0,param_3);
        uVar7 = rand();
        local_f0.x = (local_f0.x + 0x80) - (uVar7 & 0xff);
        uVar7 = rand();
        local_f0.y = (local_f0.y + 0x80) - (uVar7 & 0xff);
        uVar7 = rand();
        uVar4 = rand();
        iVar6 = (uVar4 & 0x3ff) + 0x200;
        VectorCopy(&local_e0,&local_f0);
        from = param_4;
        if (param_4 == (Vec3 *)0x0) {
          from = &Spyro.trueVelocity;
        }
        VectorCopy(&VStack_d0,from);
        VectorShiftRight(&VStack_d0,1);
        if (local_48 == 1) {
          VectorMultByN(&VStack_d0,&VStack_d0,3);
        }
        VStack_d0.z = 0;
        VectorAdd(&local_e0,&local_e0,&VStack_d0);
        local_e0.x = local_e0.x + (cosineLookupTable[uVar7 & 0xff] * iVar6 >> 0xc);
        local_e0.z = local_e0.z + 0x200;
        local_e0.y = local_e0.y + (sineLookupTable[uVar7 & 0xff] * iVar6 >> 0xc);
        local_e0.z = RaycastDown(&local_e0,0x400);
        if (local_e0.z != 0) {
          puVar10 = (undefined *)FUN_80041c50(3);
          puVar10[3] = 1;
          puVar10[10] = 10;
          *puVar10 = uVar2;
          puVar10[2] = 0;
          puVar10[0xb] = 6;
          puVar10[0xc] = (char)(DAT_80067408 >> 4);
          puVar10[0xd] = (char)(DAT_8006740c >> 4);
          iVar6 = DAT_80067410;
          puVar10[0xf] = 0x2e;
          puVar10[0x11] = 2;
          puVar10[0x10] = 0;
          puVar10[0xe] = (char)(iVar6 >> 4);
          VecIntToShort((VectorShort *)(puVar10 + 4),&local_f0);
          VecIntToShort((VectorShort *)(puVar10 + 0x12),&local_f0);
          VecIntToShort((VectorShort *)(puVar10 + 0x18),&local_e0);
          uVar7 = rand();
          uVar4 = rand();
          iVar6 = (uVar7 & 0xe) + (uVar4 & 6) + 0x14;
          *(short *)(puVar10 + 0x16) = (short)iVar6;
          puVar10[0x1e] = 0;
          while ((0 < iVar6 || (local_e0.z < local_f0.z))) {
            local_f0.z = local_f0.z + iVar6 * 4;
            iVar6 = iVar6 + -2;
            puVar10[0x1e] = puVar10[0x1e] + '\x01';
          }
          iVar6 = rand();
          puVar10[0x1d] = (char)iVar6;
          puVar10[0x1f] = (char)isOnWaterSurface;
        }
        break;
      case 0x2a:
        puVar10 = (undefined *)FUN_80041c50(4);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        *(int *)(puVar10 + 0x18) = param_3->x;
        *(int *)(puVar10 + 0x1c) = param_3->y;
        *(short *)(puVar10 + 0x12) = (short)param_4->x;
        *(short *)(puVar10 + 0x14) = (short)param_4->y;
        iVar6 = rand();
        puVar10[10] = ((byte)iVar6 & 7) + 3;
        bVar1 = Spyro.angleAsByte.yaw;
        puVar10[0xc] = 0x6c;
        puVar10[0xd] = 0x6c;
        puVar10[0xe] = 0x6c;
        puVar10[0xf] = 0x2e;
        puVar10[0x11] = 0;
        puVar10[0x10] = 0;
        puVar10[0xb] = bVar1 + 0x20;
        break;
      case 0x2b:
        puVar10 = (undefined *)FUN_80041c50(4);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          CopyVectorShort((VectorShort *)(puVar10 + 4),(VectorShort *)param_3);
          iVar6 = rand();
          puVar10[10] = ((byte)iVar6 & 7) + 2;
          uVar2 = 0x60;
        }
        else {
          VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
          if (param_4 == (Vec3 *)0x2) {
            iVar6 = rand();
            *(ushort *)(puVar10 + 4) = (*(short *)(puVar10 + 4) + 0x20) - ((ushort)iVar6 & 0x7f);
            iVar6 = rand();
            *(ushort *)(puVar10 + 6) = (*(short *)(puVar10 + 6) + 0x20) - ((ushort)iVar6 & 0x7f);
          }
          iVar6 = rand();
          puVar10[10] = ((byte)iVar6 & 7) + 0x10;
          uVar2 = 0x40;
        }
        bVar1 = Spyro.angleAsByte.yaw;
        puVar10[0xc] = uVar2;
        puVar10[0xd] = uVar2;
        puVar10[0xe] = uVar2;
        puVar10[0xf] = 0x2e;
        puVar10[0x11] = 0;
        puVar10[0x10] = 0;
        *(short *)(puVar10 + 0x18) = (short)param_4;
        puVar10[0xb] = bVar1;
        break;
      case 0x2c:
        MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,param_3,&VStack_c0);
        VectorAdd(&VStack_c0,&VStack_c0,&Spyro.position);
        iVar6 = FUN_8003ce38(&Spyro.position,&VStack_c0,2,0,0);
        if (iVar6 == 0) {
          puVar10 = (undefined *)FUN_80041c50(2);
          *puVar10 = uVar2;
          puVar10[3] = 1;
          VecIntToShort((VectorShort *)(puVar10 + 4),&VStack_c0);
          VecIntToShort((VectorShort *)(puVar10 + 0x18),&VStack_c0);
          *(short *)(puVar10 + 0x12) = (short)(Spyro.trueVelocity.x >> 9);
          *(short *)(puVar10 + 0x14) = (short)(Spyro.trueVelocity.y >> 9);
          iVar6 = rand();
          *(ushort *)(puVar10 + 0x16) = ((ushort)iVar6 & 3) + 4;
          puVar10[0xb] = 0;
          puVar10[0xc] = 0x80;
          puVar10[0xd] = 0x80;
          puVar10[0xe] = 0x80;
          puVar10[0xf] = 0x2e;
          puVar10[0x11] = 2;
          puVar10[0x10] = 0;
          iVar6 = rand();
          puVar10[10] = ((byte)iVar6 & 7) + 6;
          iVar6 = rand();
          puVar10[0x1c] = (char)iVar6;
          iVar6 = rand();
          puVar10[0x1d] = '\x10' - ((byte)iVar6 & 0x1f);
          iVar6 = rand();
          puVar10[2] = ((byte)iVar6 & 0x1f) + 0x40;
          VectorCopy(&VStack_b0,&VStack_c0);
          VStack_b0.z = VStack_b0.z + 0xc00;
          iVar6 = FUN_8003ce38(&VStack_c0,&VStack_b0,2,0,0);
          if (iVar6 == 0) {
            *(short *)(puVar10 + 0x1e) = (short)(VStack_b0.z >> 2);
          }
          else {
            *(short *)(puVar10 + 0x1e) = (short)(Vec3_8006ab70.z >> 2);
            if (isOnWaterSurface != 0) {
              puVar10[0x11] = 3;
            }
          }
        }
        break;
      case 0x2e:
        puVar10 = (undefined *)FUN_80041c50(2);
        *puVar10 = uVar2;
        puVar10[2] = 0;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        iVar6 = rand();
        *(ushort *)(puVar10 + 4) = (*(short *)(puVar10 + 4) + 0x40) - ((ushort)iVar6 & 0x7f);
        iVar6 = rand();
        *(ushort *)(puVar10 + 6) = (*(short *)(puVar10 + 6) + 0x40) - ((ushort)iVar6 & 0x7f);
        if (param_4 == (Vec3 *)0x0) {
          iVar6 = rand();
          cVar3 = ((byte)iVar6 & 0xf) + 0x14;
        }
        else {
          iVar6 = rand();
          cVar3 = (char)param_4 + ((byte)iVar6 & 0xf);
        }
        puVar10[10] = cVar3;
        iVar6 = rand();
        puVar10[0xb] = (char)iVar6;
        uVar2 = 2;
LAB_OVR0SummerForest__8007f09c:
        puVar10[0xc] = 0x80;
        puVar10[0xd] = 0x80;
        puVar10[0xe] = 0x80;
LAB_OVR0SummerForest__8007f0a8:
        puVar10[0xf] = 0x2e;
LAB_OVR0SummerForest__8007f0ac:
        puVar10[0x11] = uVar2;
        puVar10[0x10] = 0;
        break;
      case 0x3b:
        puVar10 = (undefined *)FUN_80041c50(5);
        puVar10[3] = 1;
        *puVar10 = uVar2;
        puVar10[0x11] = 0x10;
        puVar10[1] = puVar10[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        iVar6 = rand();
        *(ushort *)(puVar10 + 4) = (*(short *)(puVar10 + 4) + 0x10) - ((ushort)iVar6 & 0x1f);
        iVar6 = rand();
        *(ushort *)(puVar10 + 6) = (*(short *)(puVar10 + 6) + 8) - ((ushort)iVar6 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar5 = 0x2e0080c0;
        }
        else {
          uVar5 = 0x2e00c000;
        }
        *(undefined4 *)(puVar10 + 0xc) = uVar5;
        iVar6 = rand();
        puVar10[10] = ((byte)iVar6 & 0xf) + 0x14;
        iVar6 = rand();
        puVar10[0xb] = (char)iVar6;
        puVar10[0x10] = 0;
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x18) = ((ushort)iVar6 & 7) - 4;
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x1a) = -2 - ((ushort)iVar6 & 7);
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x1c) = ((ushort)iVar6 & 0xf) - 8;
        break;
      case 0x42:
        puVar10 = (undefined *)FUN_80041c50(0);
        *puVar10 = uVar2;
        iVar6 = rand();
        puVar10[2] = (byte)iVar6 & 0xf;
        puVar10[3] = 1;
        iVar6 = rand();
        *(ushort *)(puVar10 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        *(ushort *)(puVar10 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        iVar8 = param_3->z;
        *(undefined2 *)(puVar10 + 0x10) = 0;
        *(undefined2 *)(puVar10 + 0x12) = 0;
        *(undefined2 *)(puVar10 + 0x14) = 0;
        puVar10[10] = 2;
        *(ushort *)(puVar10 + 8) = (short)(iVar8 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar10[0xc] = 0xff;
LAB_OVR0SummerForest__8007f2bc:
          puVar10[0xd] = 0xff;
          puVar10[0xe] = 0;
          goto switchD_OVR0SummerForest__8007f280_caseD_8;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar10[0xc] = 0xff;
          puVar10[0xd] = 0;
          puVar10[0xe] = 0;
          break;
        case 1:
          puVar10[0xc] = 0xff;
          puVar10[0xd] = 0xff;
          puVar10[0xe] = 0;
          break;
        case 2:
          puVar10[0xc] = 0;
          goto LAB_OVR0SummerForest__8007f2bc;
        case 3:
          puVar10[0xc] = 0;
          puVar10[0xd] = 0xff;
          puVar10[0xe] = 0xff;
          break;
        case 4:
          puVar10[0xc] = 0;
          puVar10[0xd] = 0;
          goto LAB_OVR0SummerForest__8007f324;
        case 5:
          puVar10[0xc] = 0xff;
          puVar10[0xd] = 0;
          goto LAB_OVR0SummerForest__8007f324;
        case 6:
          puVar10[0xc] = 0xff;
          puVar10[0xd] = 0x80;
          puVar10[0xe] = 0;
          break;
        case 7:
          puVar10[0xc] = 0;
          puVar10[0xd] = 0x80;
LAB_OVR0SummerForest__8007f324:
          puVar10[0xe] = 0xff;
        }
switchD_OVR0SummerForest__8007f280_caseD_8:
        puVar10[0xf] = 0x40;
        break;
      case 0x46:
        puVar10 = (undefined *)FUN_80041c50(1);
        *puVar10 = uVar2;
        iVar6 = rand();
        puVar10[2] = (byte)iVar6 & 0xf;
        puVar10[3] = 1;
        local_90 = 0;
        iVar6 = rand();
        local_8f = (undefined)iVar6;
        iVar6 = rand();
        local_8e = (undefined)iVar6;
        BuildRotationMatrix(&local_90,&MStack_88,(Mat33 *)0x0);
        local_a0.y = 0;
        local_a0.z = 0;
        local_a0.x = (int)param_4;
        MatrixMultVector(&MStack_88,&local_a0,&local_a0);
        *(short *)(puVar10 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar10 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar10 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar10 + 10) = *(short *)(puVar10 + 4) + (short)local_a0.x * 2;
        *(short *)(puVar10 + 0xc) = *(short *)(puVar10 + 6) + (short)local_a0.y * 2;
        puVar10[0x17] = 2;
        puVar10[0x10] = 0xe0;
        puVar10[0x11] = 0xc0;
        puVar10[0x13] = 0x50;
        puVar10[0x12] = 0;
        puVar10[0x14] = 0xff;
        puVar10[0x15] = 0xff;
        puVar10[0x16] = 0x80;
        *(short *)(puVar10 + 0xe) = *(short *)(puVar10 + 8) + (short)local_a0.z * 2;
        break;
      case 0x47:
        puVar10 = (undefined *)FUN_80041c50(1);
        *puVar10 = uVar2;
        iVar6 = rand();
        puVar10[2] = (byte)iVar6 & 7;
        puVar10[3] = 1;
        uVar7 = rand();
        local_68.x = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_68.y = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_68.z = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar10 + 4) = (short)(param_3->x >> 2) + (short)local_68.x * 4;
        *(short *)(puVar10 + 6) = (short)(param_3->y >> 2) + (short)local_68.y * 4;
        *(short *)(puVar10 + 8) = (short)(param_3->z >> 2) + (short)local_68.z * 4;
        *(short *)(puVar10 + 10) = *(short *)(puVar10 + 4) + (short)local_68.x;
        *(short *)(puVar10 + 0xc) = *(short *)(puVar10 + 6) + (short)local_68.y;
        puVar10[0x17] = 2;
        puVar10[0x10] = 0xe0;
        puVar10[0x11] = 0xe0;
        puVar10[0x14] = 0xff;
        puVar10[0x12] = 0x60;
        puVar10[0x15] = 0xff;
        puVar10[0x16] = 0xff;
        puVar10[0x13] = 0x50;
        *(short *)(puVar10 + 0xe) = *(short *)(puVar10 + 8) + (short)local_68.z;
        break;
      case 0x4e:
        puVar10 = (undefined *)FUN_80041c50(0);
        *puVar10 = uVar2;
        iVar6 = rand();
        puVar10[2] = (byte)iVar6 & 0x1f;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 4),param_3);
        iVar6 = rand();
        *(ushort *)(puVar10 + 4) = *(short *)(puVar10 + 4) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar10 + 6) = *(short *)(puVar10 + 6) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar10 + 8) = *(short *)(puVar10 + 8) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x10) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x12) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar10 + 0x14) = -((ushort)iVar6 & 1);
        iVar6 = rand();
        puVar10[0xc] = (byte)iVar6 | 0x80;
        uVar7 = rand();
        uVar7 = (uVar7 & 0x7f) + 0x60;
        puVar10[0xd] = (char)uVar7;
        if ((byte)puVar10[0xc] < uVar7) {
          puVar10[0xd] = puVar10[0xc];
        }
        iVar6 = rand();
        puVar10[0xe] = ((byte)iVar6 & 0x3f) + 0x40;
        puVar10[0xf] = 0x40;
        puVar10[10] = 2;
        break;
      case 0x4f:
        puVar10 = (undefined *)FUN_80041c50(1);
        *puVar10 = uVar2;
        iVar6 = rand();
        puVar10[2] = (byte)iVar6 & 0xf;
        puVar10[3] = 1;
        VecIntToShort((VectorShort *)(puVar10 + 10),param_3);
        VectorAdd(&local_68,param_3,param_4);
        uVar7 = rand();
        local_68.x = local_68.x + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_68.y = local_68.y + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_68.z = local_68.z + -0x40 + (uVar7 & 0x7f);
        VecIntToShort((VectorShort *)(puVar10 + 4),&local_68);
        puVar10[0x17] = 2;
        iVar6 = rand();
        puVar10[0x10] = (byte)iVar6 | 0xc0;
        iVar6 = rand();
        puVar10[0x11] = ((byte)iVar6 & 0x3f) + 0xa0;
        puVar10[0x12] = 0;
        iVar6 = rand();
        puVar10[0x14] = (byte)iVar6 | 0xe0;
        iVar6 = rand();
        puVar10[0x15] = (byte)iVar6 | 0xe0;
        puVar10[0x16] = 0x80;
        puVar10[0x13] = 0x50;
        break;
      case 0x52:
        piVar9 = (int *)param_3->x;
        puVar10 = (undefined *)FUN_80041c50(1);
        *puVar10 = uVar2;
        iVar6 = rand();
        puVar10[2] = (byte)iVar6 & 0xf;
        puVar10[3] = 1;
        uVar7 = rand();
        iVar6 = randomRangeGen(piVar9[1] >> 1);
        local_58.x = cosineLookupTable[uVar7 & 0xff] * iVar6 >> 0xc;
        local_58.z = 0;
        local_58.y = sineLookupTable[uVar7 & 0xff] * iVar6 >> 0xc;
        VectorAdd(&local_58,&local_58,param_3 + 1);
        VecIntToShort((VectorShort *)(puVar10 + 4),&local_58);
        *(undefined2 *)(puVar10 + 10) = *(undefined2 *)(puVar10 + 4);
        *(undefined2 *)(puVar10 + 0xc) = *(undefined2 *)(puVar10 + 6);
        *(short *)(puVar10 + 0xe) = *(short *)(puVar10 + 8) + 0x60;
        iVar6 = param_3[1].z;
        iVar8 = *piVar9;
        puVar10[0x10] = 0x70;
        puVar10[0x11] = 0x70;
        puVar10[0x12] = 0xe0;
        puVar10[0x14] = 0xe0;
        puVar10[0x15] = 0xe0;
        puVar10[0x16] = 0xff;
        puVar10[0x13] = 0x50;
        puVar10[0x17] = 0;
        *(int *)(puVar10 + 0x18) = iVar6 + iVar8 >> 2;
      }
      local_30 = local_30 + 4;
      local_40 = local_40 + 1;
    } while (local_40 < local_48);
  }
  return puVar10;
}



void FUN_OVR10SkelosBadlands__8006e3a0(void)

{
  int iVar1;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar1 = FUN_8002d9c4();
    if (iVar1 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    goto LAB_OVR10SkelosBadlands__8006e410;
  default:
    goto switchD_OVR10SkelosBadlands__8006e3d0_caseD_14;
  case HurtBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    break;
  case HurtPitchSpin:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    break;
  case New_Name_(1):
  case Spit:
    FUN_8002c0f4();
LAB_OVR10SkelosBadlands__8006e410:
    FUN_8002cc88();
    break;
  case DeathBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    Spyro.color.Alpha = 0xff;
    Spyro.field17_0x28 = 0;
    Spyro.color.Blue = 0x20;
    Spyro.color.Green = 0x20;
    Spyro.color.Red = 0x20;
    goto switchD_OVR10SkelosBadlands__8006e3d0_caseD_14;
  }
  Spyro.field17_0x28 = 0;
switchD_OVR10SkelosBadlands__8006e3d0_caseD_14:
  return;
}



void FUN_OVR10SkelosBadlands__8006e4ec(void)

{
  if ((Spyro.currentAnimationState == 0x3a) && (Spyro.currentAnimationFrame == 0xd)) {
    PlayAudio(*(undefined *)(audioBank + 0xd),0,0);
    Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
  }
  return;
}



void FUN_OVR10SkelosBadlands__8006e550(int param_1)

{
  undefined4 uVar1;
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case IdleLook:
  case HurtPitchSpin:
  case IdleSit:
  case New_Name_(1):
  case Spit:
  case DeathBurn:
    uVar1 = 0x8006a0c4;
    break;
  default:
    goto switchD_OVR10SkelosBadlands__8006e598_caseD_14;
  case HurtBurn:
    uVar1 = 0;
  }
  FUN_8002db8c(uVar1);
switchD_OVR10SkelosBadlands__8006e598_caseD_14:
  return;
}



void FUN_OVR10SkelosBadlands__8006e5cc(int param_1)

{
  Substate SVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  
  SVar1 = Spyro.maybeSubstate;
  switch(param_1) {
  case 0x13:
  case 0x26:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
    uVar2 = 1;
    if (param_1 == 0x25) {
      uVar2 = 5;
      uVar3 = 8;
    }
    else {
      uVar3 = 3;
    }
    Spyro.field82_0x14c = randomRangeGen(uVar2,uVar3);
    Spyro.field83_0x150 = 0;
    if (DAT_800670b4 != (code *)0x0) {
      if (param_1 == 0x25) {
        uVar2 = 0x1f1;
      }
      else {
        uVar2 = 0x1db;
        if (param_1 != 0x27) {
          Spyro.field83_0x150 = 0;
          return;
        }
      }
      (*DAT_800670b4)(uVar2,0);
    }
    break;
  case 0x1c:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = SVar1;
    VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.trueVelocity.z = 0xdc0;
    Spyro.field118_0x1bc = '\0';
    DAT_8006838c = 0xf;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    goto LAB_OVR10SkelosBadlands__8006e810;
  case 0x1d:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.trueVelocity.x = Spyro.field154_0x21c.x << 6;
    Spyro.trueVelocity.y = Spyro.field154_0x21c.y << 6;
    Spyro.field82_0x14c = SVar1;
    Spyro.trueVelocity.z = Spyro.field154_0x21c.z << 6;
    if (Spyro.field154_0x21c.z == 0) {
      Spyro.trueVelocity.z = Spyro.physicsVelocity.z;
    }
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    DAT_8006838c = 0xf;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    break;
  case 0x35:
  case 0x36:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
    break;
  case 0x3a:
    Spyro.maybeSubstate = Death;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    if (param_1 != 0x3a) {
      Spyro.field118_0x1bc = '\x01';
      return;
    }
LAB_OVR10SkelosBadlands__8006e810:
    PlayAudio(*(undefined *)(audioBank + 0xc),0,0);
  }
  return;
}



void FUN_OVR10SkelosBadlands__8006e868(void)

{
  CollisionType CVar1;
  int iVar2;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) {
      SetSpyroState(Jump);
      return;
    }
    CVar1 = GetCollisiontType(Spyro.field72_0x114);
    if (CVar1 == Ice) {
      if (DAT_8006839d != '\0') {
        return;
      }
      SetSpyroState(Ice);
      return;
    }
    if ((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) {
      if ((inputStates[0].current & Square) != None) {
        SetSpyroState(Charge);
        return;
      }
      iVar2 = Spyro.maybeTurnSpeed;
      if (Spyro.maybeTurnSpeed < 0) {
        iVar2 = -Spyro.maybeTurnSpeed;
      }
      if ((iVar2 < 0x11) &&
         (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
           (TriggerLeft|TriggerRight) || (Spyro.maybeHorizontalSpeed == 0)))) {
        if ((cameraState != Look) && (Spyro.field162_0x240 == 0)) {
          if (Spyro.ledgeDetected != '\0') {
            SetSpyroState(IdleLedge);
            return;
          }
          FUN_80032c34();
          return;
        }
        if (Spyro.state == Idle) {
          return;
        }
        SetSpyroState(Idle);
        if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
          Spyro.currentAnimationState = Spyro.nextAnimationState;
          Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
        }
        Spyro.nextAnimationState = (byte)Spyro.state;
        Spyro.nextAnimationFrame = 0;
        Spyro.field11_0x1c = 0x71;
        Spyro.field136_0x1ec = Spyro.state;
        Spyro.field137_0x1f0 = 0;
        return;
      }
LAB_OVR10SkelosBadlands__8006ec88:
      SetSpyroState(Walk);
      return;
    }
    break;
  default:
    goto switchD_OVR10SkelosBadlands__8006e89c_caseD_14;
  case HurtBurn:
    if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
      Spyro.field120_0x1be = '\x01';
    }
    if ((((Spyro.airTime == 0) && (0xf < Spyro.field35_0x5c)) && (Spyro.field55_0xec < 0x17)) &&
       (Spyro.field53_0xd4.x * Spyro.trueVelocity.x + Spyro.field53_0xd4.y * Spyro.trueVelocity.y +
        Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)) {
      if (Spyro.maybeHorizontalSpeed != 0) {
        if (0xf00 < Spyro.maybeHorizontalSpeedDecay) {
          SetSpyroState(Run);
          return;
        }
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          SetSpyroState(StartRun);
          return;
        }
        goto LAB_OVR10SkelosBadlands__8006ec88;
      }
      if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
        SetSpyroState(Stop);
        return;
      }
      goto LAB_OVR10SkelosBadlands__8006ecc0;
    }
    if (((inputStates[0].current & Square) != None) && (Spyro.airVelocityFlag == FALLING)) {
      SetSpyroState(ChargeAir);
      return;
    }
    if ((Spyro.field119_0x1bd != '\0') && (Spyro.field120_0x1be != '\0')) {
      if (Spyro.airVelocityFlag != FALLING) {
        return;
      }
      SetSpyroState(Glide);
      return;
    }
    if (Spyro.airVelocityFlag != FALLING) {
      return;
    }
    if ((-0x1901 < Spyro.physicsVelocity.z) && (Spyro.field35_0x5c < 0x5b)) {
      return;
    }
    break;
  case HurtPitchSpin:
    if (Spyro.field35_0x5c < 0x19) {
      return;
    }
    if (Spyro.health < 0) {
      SetSpyroState(DeathPirouette);
      return;
    }
    if (Spyro.field82_0x14c == 10) {
      SetSpyroState(WaterIdle);
      return;
    }
    if (Spyro.field82_0x14c - 0xbU < 2) {
      SetSpyroState(UnderwaterIdle);
      return;
    }
    if (Spyro.airTime == 0) goto LAB_OVR10SkelosBadlands__8006ecc0;
    break;
  case New_Name_(1):
  case Spit:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
LAB_OVR10SkelosBadlands__8006ecc0:
    SetSpyroState(Idle);
    return;
  case DeathBurn:
    if (0x88 < Spyro.field35_0x5c) {
      if ((inSpeedwayFlag < 0) || (DAT_80066f8c == (code *)0x0)) {
        OnDeath();
      }
      else {
        (*DAT_80066f8c)();
      }
    }
    goto switchD_OVR10SkelosBadlands__8006e89c_caseD_14;
  }
  SetSpyroState(Flop);
switchD_OVR10SkelosBadlands__8006e89c_caseD_14:
  return;
}



void FUN_OVR10SkelosBadlands__8006ee20(void)

{
  FUN_8001db58();
  UpdateCameraOrbitPhysics();
  return;
}



void FUN_OVR10SkelosBadlands__8006ee58(void)

{
  HUDElement *hudElement;
  undefined4 value;
  
  if (DAT_80066f30 == 0) {
    hudExtra2.field1_0x1 = 0;
    UpdateHUDElement(&hudExtra2,DAT_80067084);
    hudElement = &hudExtra1;
    value = riptoHPClone_;
    if (hudExtra2.displayState == Hidden) {
      UpdateHUDElement(&hudExtra1,riptoHPClone_);
      return;
    }
  }
  else {
    hudExtra1.field1_0x1 = 0;
    UpdateHUDElement(&hudExtra1,riptoHPClone_);
    if (hudExtra1.displayState == Hidden) {
      hudExtra2.field1_0x1 = 3;
      UpdateHUDElement(&hudExtra2,DAT_80067084);
      return;
    }
    hudElement = &hudExtra2;
    value = DAT_80067084;
  }
  InitHudElement(hudElement,value);
  return;
}



void FUN_OVR10SkelosBadlands__8006ef34(void)

{
  int iVar1;
  HUDElement *pHVar2;
  undefined *puVar3;
  
  pHVar2 = &hudExtra1;
  if (hudExtra1.displayState == Hidden) {
    pHVar2 = &hudExtra2;
    puVar3 = &DAT_80063618 + (DAT_80067008 & 0xe) * 2;
  }
  else {
    iVar1 = ((int)DAT_80067008 >> 1) % 0xc;
    if (iVar1 < 7) {
      puVar3 = &DAT_800635f8 + iVar1 * 4;
    }
    else {
      pHVar2 = &hudExtra1;
      puVar3 = (undefined *)((uint)(&DAT_800635f8 + (0xc - iVar1) * 4) ^ 0x80000000);
    }
  }
  RenderBLProgressCounter(pHVar2,puVar3,0x168,0xec,8);
  maybeDrawMap();
  return;
}


/*
Unable to decompile 'FUN_OVR10SkelosBadlands__8006f040'
Cause: Exception while decompiling OVR10SkelosBadlands::8006f040: process: timeout

*/


undefined *
FUN_OVR10SkelosBadlands__800851c8(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  short sVar1;
  undefined uVar2;
  undefined2 uVar3;
  undefined4 uVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  undefined *puVar8;
  Vec3 local_e0;
  Vec3 local_d0;
  Vec3 local_c0;
  Vec3 local_b0;
  Vec3 local_a0;
  Vec3 local_90;
  undefined local_80;
  undefined local_7f;
  undefined local_7e;
  Mat33 MStack_78;
  Vec3 local_58;
  int local_48;
  int local_40;
  int local_30;
  
  puVar8 = (undefined *)0x0;
  local_40 = 0;
  if (0 < param_1) {
    local_30 = 0;
    local_48 = param_1;
    do {
      uVar2 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xe] = 0x80;
        goto LAB_OVR10SkelosBadlands__80085d70;
      case 1:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x10;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        uVar2 = 0x60;
        puVar8[0xc] = 0x60;
        puVar8[0xd] = 0x60;
        goto LAB_OVR10SkelosBadlands__80085d6c;
      case 2:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        uVar6 = rand();
        local_e0.x = (uVar6 & 0x3f) - 0x20;
        uVar6 = rand();
        local_e0.y = (uVar6 & 0x3f) - 0x20;
        local_e0.z = 0x10;
        VecIntToShort((VectorShort *)(puVar8 + 0x18),&local_e0);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x20;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xe] = 0x80;
        goto LAB_OVR10SkelosBadlands__800859b0;
      case 3:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xd] = 0x40;
        puVar8[0xc] = 0x80;
        goto LAB_OVR10SkelosBadlands__800859ac;
      case 4:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        puVar8[10] = 8;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xe] = 0x80;
        puVar8[0xf] = 0x2e;
        puVar8[0x11] = 2;
        puVar8[0x10] = 0;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x18) = ((ushort)iVar5 & 3) + 4;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1a) = ((ushort)iVar5 & 3) + 2;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1c) = ((ushort)iVar5 & 7) + 3;
        *(short *)(puVar8 + 0x1e) = (short)((int)param_4 >> 2);
        break;
      case 9:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VectorCopy(&local_d0,&Spyro.position);
        uVar6 = rand();
        local_d0.x = local_d0.x + -0x3f + (uVar6 & 0x7e);
        uVar6 = rand();
        local_d0.y = local_d0.y + -0x3f + (uVar6 & 0x7e);
        VecIntToShort((VectorShort *)(puVar8 + 4),&local_d0);
        VectorCopy(&local_d0,&Spyro.physicsVelocity);
        VectorShiftRight(&local_d0,6);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),&local_d0);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xe] = 0x80;
        goto LAB_OVR10SkelosBadlands__80085c08;
      case 10:
        puVar8 = (undefined *)FUN_80041c50(3);
        *puVar8 = uVar2;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0x1f;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),&Spyro.position);
        puVar8[10] = 0x18;
        puVar8[0xb] = 0xf;
        puVar8[0xc] = (&DAT_80064654)[local_30];
        puVar8[0xd] = (&DAT_80064655)[local_30];
        uVar2 = (&DAT_80064656)[local_30];
        puVar8[0xf] = 0x2c;
        puVar8[0x11] = 4;
        puVar8[0x10] = 0;
        puVar8[0xe] = uVar2;
        *(short *)(puVar8 + 0x18) = (short)(((local_48 - local_40) * 0x1000) / 5);
        break;
      case 0xc:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[0x11] = 4;
        iVar5 = local_40 * 0xc;
        puVar8[3] = 1;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar5),&local_c0);
        VectorAdd(&local_c0,&local_c0,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar6 = rand();
          local_c0.x = (local_c0.x + 0x100) - (uVar6 & 0x1ff);
          uVar6 = rand();
          local_c0.y = (local_c0.y + 0x100) - (uVar6 & 0x1ff);
          uVar6 = rand();
          local_c0.z = (local_c0.z + 0x100) - (uVar6 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar6 = rand();
          local_c0.x = (local_c0.x + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          local_c0.y = (local_c0.y + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          local_c0.z = (local_c0.z + 0x80) - (uVar6 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar8 + 4),&local_c0);
        *(undefined4 *)(puVar8 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar7 = rand();
        puVar8[10] = ((byte)iVar7 & 7) + 0x20;
        iVar7 = rand();
        puVar8[0xb] = (char)iVar7;
        puVar8[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar8 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar5));
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x18) = (*(short *)(puVar8 + 0x18) >> 2) + -4 + ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1a) = (*(short *)(puVar8 + 0x1a) >> 2) + -4 + ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1c) = (*(short *)(puVar8 + 0x1c) >> 2) + -4 + ((ushort)iVar5 & 7);
        break;
      case 0xd:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = 0xff;
        puVar8[0xd] = 0xff;
        puVar8[0xe] = 0;
        goto LAB_OVR10SkelosBadlands__80085d70;
      case 0x11:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_3 + 1);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = (char)param_4->x;
        puVar8[0xd] = (char)param_4->y;
        iVar5 = param_4->z;
        puVar8[0xf] = 0x2e;
        puVar8[0x11] = 4;
        puVar8[0x10] = 0;
        puVar8[0xe] = (char)iVar5;
        break;
      case 0x1f:
        uVar6 = rand();
        puVar8 = (undefined *)FUN_80041c50(3);
        *puVar8 = uVar2;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        *(short *)(puVar8 + 0x18) = cosineLookupTable[uVar6 & 0xff] >> 10;
        sVar1 = sineLookupTable[uVar6 & 0xff];
        *(undefined2 *)(puVar8 + 0x1c) = 6;
        *(short *)(puVar8 + 0x1a) = sVar1 >> 10;
        uVar6 = rand();
        iVar5 = (uVar6 & 0xf) + 0x20;
        puVar8[0xb] = (char)((uint)(iVar5 * 5) >> 3);
        puVar8[10] = (char)iVar5;
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xe] = 0x80;
        puVar8[0xf] = 0x2c;
        goto LAB_OVR10SkelosBadlands__80085d74;
      case 0x20:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x1a;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = 0xff;
        puVar8[0xd] = 0xff;
LAB_OVR10SkelosBadlands__800859ac:
        puVar8[0xe] = 0;
LAB_OVR10SkelosBadlands__800859b0:
        puVar8[0xf] = 0x2e;
        puVar8[0x11] = 2;
        puVar8[0x10] = 0;
        break;
      case 0x21:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_a0,&Spyro.physicsVelocity);
          VectorShiftRight(&local_a0,6);
          VectorCopy(&local_b0,&Spyro.position);
          local_b0.z = local_b0.z + -0x164;
          uVar6 = rand();
          local_b0.x = (local_b0.x + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          uVar2 = 0x30;
          local_b0.y = (local_b0.y + 0x80) - (uVar6 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_b0.x = 0x164;
          local_b0.y = 0;
          local_b0.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_b0,&local_b0);
          VectorAdd(&local_b0,&local_b0,&Spyro.position);
          uVar2 = 0x40;
          uVar6 = rand();
          local_a0.x = -(uVar6 & 7);
          uVar6 = rand();
          local_a0.y = ((int)((uint)(ushort)cosineLookupTable[local_40 * 0x20] << 0x10) >> 0x17) -
                       ((uVar6 & 0xf) - 8);
          local_a0.z = (int)((uint)(ushort)sineLookupTable[local_40 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_a0,&local_a0);
        }
        else {
          iVar5 = 5;
          if (param_4 == (Vec3 *)0x2) {
            iVar7 = local_40 << 5;
            iVar5 = 6;
            uVar2 = 0x30;
          }
          else {
            uVar2 = 0x40;
            iVar7 = local_40 * 0x20 + 0x10;
          }
          VectorCopy(&local_b0,&Spyro.position);
          local_b0.x = local_b0.x + ((int)cosineLookupTable[iVar7] >> iVar5);
          local_b0.z = local_b0.z + -0x164;
          local_b0.y = local_b0.y + ((int)sineLookupTable[iVar7] >> iVar5);
          local_a0.x = (int)cosineLookupTable[iVar7] >> iVar5 + 1;
          local_a0.z = 0;
          local_a0.y = (int)sineLookupTable[iVar7] >> iVar5 + 1;
        }
        VecIntToShort((VectorShort *)(puVar8 + 4),&local_b0);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),&local_a0);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x10;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = uVar2;
        puVar8[0xd] = uVar2;
        puVar8[0xe] = uVar2;
LAB_OVR10SkelosBadlands__80085c08:
        puVar8[0xf] = 0x2e;
        puVar8[0x11] = 4;
        puVar8[0x10] = 0;
        break;
      case 0x23:
        puVar8 = (undefined *)FUN_80041c50(2);
        puVar8[2] = 0x3c;
        *puVar8 = uVar2;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        uVar2 = 0x50;
        puVar8[0xc] = 0x50;
        puVar8[0xd] = 0x50;
        goto LAB_OVR10SkelosBadlands__80085d6c;
      case 0x26:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        uVar3 = RandomRangeGen(3,7);
        *(undefined2 *)(puVar8 + 0x1e) = uVar3;
        *(undefined2 *)(puVar8 + 0x18) = 0;
        puVar8[10] = 0x20;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        uVar2 = randomRangeGen(0x60,0x80);
        puVar8[0xc] = uVar2;
        uVar2 = randomRangeGen(0x60,0x80);
        puVar8[0xd] = uVar2;
        uVar2 = randomRangeGen(0x60,0x80);
        goto LAB_OVR10SkelosBadlands__80085d6c;
      case 0x28:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar2;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x10;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xd] = 0x48;
        uVar2 = 0x30;
        puVar8[0xc] = 0x80;
LAB_OVR10SkelosBadlands__80085d6c:
        puVar8[0xe] = uVar2;
LAB_OVR10SkelosBadlands__80085d70:
        puVar8[0xf] = 0x2e;
LAB_OVR10SkelosBadlands__80085d74:
        puVar8[0x11] = 4;
        puVar8[0x10] = 0;
        break;
      case 0x3b:
        puVar8 = (undefined *)FUN_80041c50(5);
        puVar8[3] = 1;
        *puVar8 = uVar2;
        puVar8[0x11] = 0x10;
        puVar8[1] = puVar8[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = (*(short *)(puVar8 + 4) + 0x10) - ((ushort)iVar5 & 0x1f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = (*(short *)(puVar8 + 6) + 8) - ((ushort)iVar5 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar4 = 0x2e0080c0;
        }
        else {
          uVar4 = 0x2e00c000;
        }
        *(undefined4 *)(puVar8 + 0xc) = uVar4;
        iVar5 = rand();
        puVar8[10] = ((byte)iVar5 & 0xf) + 0x14;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0x10] = 0;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x18) = ((ushort)iVar5 & 7) - 4;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1a) = -2 - ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1c) = ((ushort)iVar5 & 0xf) - 8;
        break;
      case 0x42:
        puVar8 = (undefined *)FUN_80041c50(0);
        *puVar8 = uVar2;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        iVar7 = param_3->z;
        *(undefined2 *)(puVar8 + 0x10) = 0;
        *(undefined2 *)(puVar8 + 0x12) = 0;
        *(undefined2 *)(puVar8 + 0x14) = 0;
        puVar8[10] = 2;
        *(ushort *)(puVar8 + 8) = (short)(iVar7 >> 2) + ((ushort)iVar5 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar8[0xc] = 0xff;
          goto LAB_OVR10SkelosBadlands__80085f64;
        }
        uVar6 = rand();
        switch(uVar6 & 7) {
        case 0:
          puVar8[0xc] = 0xff;
          puVar8[0xd] = 0;
          puVar8[0xe] = 0;
          break;
        case 1:
          puVar8[0xc] = 0xff;
          goto LAB_OVR10SkelosBadlands__80085f64;
        case 2:
          puVar8[0xc] = 0;
LAB_OVR10SkelosBadlands__80085f64:
          puVar8[0xd] = 0xff;
          puVar8[0xe] = 0;
          break;
        case 3:
          puVar8[0xc] = 0;
          puVar8[0xd] = 0xff;
          goto LAB_OVR10SkelosBadlands__80085fac;
        case 4:
          puVar8[0xc] = 0;
          puVar8[0xd] = 0;
          goto LAB_OVR10SkelosBadlands__80085fac;
        case 5:
          puVar8[0xc] = 0xff;
          puVar8[0xd] = 0;
          goto LAB_OVR10SkelosBadlands__80085fac;
        case 6:
          puVar8[0xc] = 0xff;
          puVar8[0xd] = 0x80;
          puVar8[0xe] = 0;
          break;
        case 7:
          puVar8[0xc] = 0;
          puVar8[0xd] = 0x80;
LAB_OVR10SkelosBadlands__80085fac:
          puVar8[0xe] = 0xff;
        }
        puVar8[0xf] = 0x40;
        break;
      case 0x46:
        puVar8 = (undefined *)FUN_80041c50(1);
        *puVar8 = uVar2;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        local_80 = 0;
        iVar5 = rand();
        local_7f = (undefined)iVar5;
        iVar5 = rand();
        local_7e = (undefined)iVar5;
        BuildRotationMatrix(&local_80,&MStack_78,(Mat33 *)0x0);
        local_90.y = 0;
        local_90.z = 0;
        local_90.x = (int)param_4;
        MatrixMultVector(&MStack_78,&local_90,&local_90);
        *(short *)(puVar8 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar8 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar8 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar8 + 10) = *(short *)(puVar8 + 4) + (short)local_90.x * 2;
        *(short *)(puVar8 + 0xc) = *(short *)(puVar8 + 6) + (short)local_90.y * 2;
        puVar8[0x17] = 2;
        puVar8[0x10] = 0xe0;
        puVar8[0x11] = 0xc0;
        puVar8[0x13] = 0x50;
        puVar8[0x12] = 0;
        puVar8[0x14] = 0xff;
        puVar8[0x15] = 0xff;
        puVar8[0x16] = 0x80;
        *(short *)(puVar8 + 0xe) = *(short *)(puVar8 + 8) + (short)local_90.z * 2;
        break;
      case 0x47:
        puVar8 = (undefined *)FUN_80041c50(1);
        *puVar8 = uVar2;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 7;
        puVar8[3] = 1;
        uVar6 = rand();
        local_58.x = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_58.y = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_58.z = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar8 + 4) = (short)(param_3->x >> 2) + (short)local_58.x * 4;
        *(short *)(puVar8 + 6) = (short)(param_3->y >> 2) + (short)local_58.y * 4;
        *(short *)(puVar8 + 8) = (short)(param_3->z >> 2) + (short)local_58.z * 4;
        *(short *)(puVar8 + 10) = *(short *)(puVar8 + 4) + (short)local_58.x;
        *(short *)(puVar8 + 0xc) = *(short *)(puVar8 + 6) + (short)local_58.y;
        puVar8[0x17] = 2;
        puVar8[0x10] = 0xe0;
        puVar8[0x11] = 0xe0;
        puVar8[0x12] = 0x60;
        puVar8[0x14] = 0xff;
        puVar8[0x15] = 0xff;
        puVar8[0x16] = 0xff;
        puVar8[0x13] = 0x50;
        *(short *)(puVar8 + 0xe) = *(short *)(puVar8 + 8) + (short)local_58.z;
        break;
      case 0x4a:
        puVar8 = (undefined *)FUN_80041c50(0);
        *puVar8 = uVar2;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x10),param_4);
        iVar5 = rand();
        puVar8[0xc] = (byte)iVar5 | 0xc0;
        iVar5 = rand();
        puVar8[0xd] = ((byte)iVar5 & 0x3f) + 0x80;
        puVar8[0xe] = 0;
        puVar8[0xf] = 0x40;
        puVar8[10] = 4;
        break;
      case 0x4e:
        puVar8 = (undefined *)FUN_80041c50(0);
        *puVar8 = uVar2;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0x1f;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = *(short *)(puVar8 + 4) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = *(short *)(puVar8 + 6) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 8) = *(short *)(puVar8 + 8) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x10) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x12) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x14) = -((ushort)iVar5 & 1);
        iVar5 = rand();
        puVar8[0xc] = (byte)iVar5 | 0x80;
        uVar6 = rand();
        uVar6 = (uVar6 & 0x7f) + 0x60;
        puVar8[0xd] = (char)uVar6;
        if ((byte)puVar8[0xc] < uVar6) {
          puVar8[0xd] = puVar8[0xc];
        }
        iVar5 = rand();
        puVar8[0xe] = ((byte)iVar5 & 0x3f) + 0x40;
        puVar8[0xf] = 0x40;
        puVar8[10] = 2;
        break;
      case 0x4f:
        puVar8 = (undefined *)FUN_80041c50(1);
        *puVar8 = uVar2;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 10),param_3);
        VectorAdd(&local_58,param_3,param_4);
        uVar6 = rand();
        local_58.x = local_58.x + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_58.y = local_58.y + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_58.z = local_58.z + -0x40 + (uVar6 & 0x7f);
        VecIntToShort((VectorShort *)(puVar8 + 4),&local_58);
        puVar8[0x17] = 2;
        iVar5 = rand();
        puVar8[0x10] = (byte)iVar5 | 0xc0;
        iVar5 = rand();
        puVar8[0x11] = ((byte)iVar5 & 0x3f) + 0xa0;
        puVar8[0x12] = 0;
        iVar5 = rand();
        puVar8[0x14] = (byte)iVar5 | 0xe0;
        iVar5 = rand();
        puVar8[0x15] = (byte)iVar5 | 0xe0;
        puVar8[0x16] = 0x80;
        puVar8[0x13] = 0x50;
      }
      local_30 = local_30 + 4;
      local_40 = local_40 + 1;
    } while (local_40 < local_48);
  }
  return puVar8;
}



void FUN_OVR11CrystalGlacier__8006ee00(void)

{
  int iVar1;
  CollisionType CVar2;
  SpyroState newSpyroState;
  
  switch(Spyro.state) {
  case Whirlwind:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    iVar1 = Vec2OctagonalDistanceApproximation((Vec2 *)&Spyro,(Vec2 *)(Spyro.field153_0x218 + 0xc));
    newSpyroState = Glide;
    if (iVar1 <= Spyro.field87_0x160) {
      return;
    }
    break;
  case IdleLook:
  case IdleSit:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    newSpyroState = Jump;
    if ((inputStates[0].pressed & Cross) == None) {
      CVar2 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar2 == Ice) {
        newSpyroState = Ice;
        if (DAT_8006839d != '\0') {
          return;
        }
      }
      else {
        newSpyroState = Flop;
        if (((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) &&
           (newSpyroState = Charge, (inputStates[0].current & Square) == None)) {
          iVar1 = Spyro.maybeTurnSpeed;
          if (Spyro.maybeTurnSpeed < 0) {
            iVar1 = -Spyro.maybeTurnSpeed;
          }
          if (iVar1 < 0x11) {
            if (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
                 (TriggerLeft|TriggerRight)) ||
               (newSpyroState = Walk, Spyro.maybeHorizontalSpeed == 0)) {
              if ((cameraState == Look) || (Spyro.field162_0x240 != 0)) {
                if (Spyro.state == Idle) {
                  return;
                }
                SetSpyroState(Idle);
                if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
                  Spyro.currentAnimationState = Spyro.nextAnimationState;
                  Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
                }
                Spyro.nextAnimationState = (byte)Spyro.state;
                Spyro.nextAnimationFrame = 0;
                Spyro.field11_0x1c = 0x71;
                Spyro.field136_0x1ec = Spyro.state;
                Spyro.field137_0x1f0 = 0;
                return;
              }
              newSpyroState = IdleLedge;
              if (Spyro.ledgeDetected == '\0') {
                FUN_80032c34();
                return;
              }
            }
          }
          else {
            newSpyroState = Walk;
          }
        }
      }
    }
    break;
  case Catapult:
    if (Spyro.field35_0x5c < 0x21) {
      return;
    }
    if (Spyro.airTime == 0) {
      SetSpyroState(Stop);
      Spyro.airVelocityFlag = FALLING;
      return;
    }
    newSpyroState = Flop;
    if (Spyro.field51_0xc4 != 0) {
      return;
    }
    break;
  default:
    goto switchD_OVR11CrystalGlacier__8006ee38_caseD_15;
  case HurtPitchSpin:
    if (Spyro.field35_0x5c < 0x19) {
      return;
    }
    if (Spyro.health < 0) {
      newSpyroState = DeathPirouette;
    }
    else if (Spyro.field82_0x14c == 10) {
      newSpyroState = WaterIdle;
    }
    else if (Spyro.field82_0x14c - 0xbU < 2) {
      newSpyroState = UnderwaterIdle;
    }
    else {
      newSpyroState = Idle;
      if (Spyro.airTime != 0) {
        newSpyroState = Flop;
      }
    }
    break;
  case Drowning:
    if ((inputStates[0].pressed & Cross) != None) {
      Spyro.field120_0x1be = '\x01';
    }
    if (Spyro.health < 0) {
      if (Spyro.field82_0x14c < 0x9000) {
        return;
      }
      Spyro.field169_0x264 = -1;
      OnDeath();
      return;
    }
    if (0x3c < Spyro.field35_0x5c) {
      Spyro.health = -1;
      return;
    }
    if (Spyro.field35_0x5c < 0x10) {
      return;
    }
    if (Spyro.field120_0x1be == '\0') {
      return;
    }
    newSpyroState = Jump;
    if (-1 < Spyro.field169_0x264) {
      iVar1 = FUN_80050b20(Spyro.field170_0x268);
      if (iVar1 != 0) {
        FUN_80050a40(Spyro.field169_0x264);
      }
      Spyro.field169_0x264 = -1;
      newSpyroState = Jump;
    }
    break;
  case Superfly:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if ((((iVar1 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
            (newSpyroState = Glide, Spyro.powerFlightTime != 0)) &&
           (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if (((0x3ff < iVar1) &&
              (newSpyroState = SuperflyAscending, Spyro.airVelocityFlag == NORMAL)) &&
             ((Spyro.rotation.Pitch < 0x16d &&
              (newSpyroState = SuperflyDescending, -0x16d < Spyro.rotation.Pitch)))) {
            return;
          }
        }
      }
    }
    break;
  case SuperflyAscending:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if (((iVar1 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
           ((newSpyroState = Glide, Spyro.powerFlightTime != 0 &&
            (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)))) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if (0x3ff < iVar1) {
            if (0xff < Spyro.rotation.Pitch) {
              return;
            }
            newSpyroState = Superfly;
            if (Spyro.airVelocityFlag != NORMAL) {
              return;
            }
          }
        }
      }
    }
    break;
  case SuperflyDescending:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if ((((iVar1 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
            (newSpyroState = Glide, Spyro.powerFlightTime != 0)) &&
           (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if (((0x3ff < iVar1) &&
              (newSpyroState = SuperflyAscending, Spyro.airVelocityFlag == NORMAL)) &&
             (newSpyroState = Superfly, Spyro.rotation.Pitch < -0xff)) {
            return;
          }
        }
      }
    }
  }
  SetSpyroState(newSpyroState);
switchD_OVR11CrystalGlacier__8006ee38_caseD_15:
  return;
}



undefined *
FUN_OVR11CrystalGlacier__80082d98(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  short sVar1;
  byte bVar2;
  undefined uVar3;
  undefined2 uVar4;
  uint uVar5;
  uint uVar6;
  undefined4 uVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  int iVar11;
  int *piVar12;
  VectorShort *pVVar13;
  undefined *puVar14;
  Vec3 local_128;
  Vec3 local_118;
  Vec3 local_108;
  Vec3 local_f8;
  uint local_e8;
  uint local_e4;
  int local_e0;
  Vec3 VStack_d8;
  VectorShort VStack_c8;
  Vec3 local_c0;
  Vec3 local_b0;
  Vec3 local_a0;
  undefined local_90;
  undefined local_8f;
  undefined local_8e;
  Mat33 MStack_88;
  Vec3 local_68;
  Vec3 local_58;
  int local_48;
  int local_40;
  int local_30;
  
  puVar14 = (undefined *)0x0;
  local_40 = 0;
  if (0 < param_1) {
    local_30 = 0;
    local_48 = param_1;
    do {
      uVar3 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar14 + 0x18),param_4);
        *(undefined2 *)(puVar14 + 0x1e) = 0;
        puVar14[10] = 0x18;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0xc] = 0x80;
        puVar14[0xd] = 0x80;
        puVar14[0xe] = 0x80;
        goto LAB_OVR11CrystalGlacier__80083ebc;
      case 1:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar14 + 0x18),param_4);
        *(undefined2 *)(puVar14 + 0x1e) = 0;
        puVar14[10] = 0x10;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        uVar3 = 0x60;
        puVar14[0xc] = 0x60;
        puVar14[0xd] = 0x60;
        goto LAB_OVR11CrystalGlacier__80083eb8;
      case 2:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        uVar9 = rand();
        local_128.x = (uVar9 & 0x3f) - 0x20;
        uVar9 = rand();
        local_128.y = (uVar9 & 0x3f) - 0x20;
        local_128.z = 0x10;
        VecIntToShort((VectorShort *)(puVar14 + 0x18),&local_128);
        *(undefined2 *)(puVar14 + 0x1e) = 0;
        puVar14[10] = 0x20;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0xc] = 0x80;
        puVar14[0xd] = 0x80;
        puVar14[0xe] = 0x80;
        puVar14[0xf] = 0x2e;
        goto LAB_OVR11CrystalGlacier__80082fc4;
      case 3:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar14 + 0x18),param_4);
        *(undefined2 *)(puVar14 + 0x1e) = 0;
        puVar14[10] = 0x18;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0xd] = 0x40;
        puVar14[0xc] = 0x80;
        puVar14[0xe] = 0;
        puVar14[0xf] = 0x2e;
LAB_OVR11CrystalGlacier__80082fc4:
        puVar14[0x11] = 2;
        puVar14[0x10] = 0;
        break;
      case 4:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        puVar14[10] = 8;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0xc] = 0x80;
        puVar14[0xd] = 0x80;
        puVar14[0xe] = 0x80;
        puVar14[0xf] = 0x2e;
        puVar14[0x11] = 2;
        puVar14[0x10] = 0;
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x18) = ((ushort)iVar8 & 3) + 4;
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x1a) = ((ushort)iVar8 & 3) + 2;
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x1c) = ((ushort)iVar8 & 7) + 3;
        *(short *)(puVar14 + 0x1e) = (short)((int)param_4 >> 2);
        break;
      case 5:
        puVar14 = (undefined *)FUN_80041c50(3);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 7;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        iVar8 = rand();
        *(ushort *)(puVar14 + 4) = *(short *)(puVar14 + 4) + -0x1f + ((ushort)iVar8 & 0x3e);
        iVar8 = rand();
        *(ushort *)(puVar14 + 6) = *(short *)(puVar14 + 6) + -0x1f + ((ushort)iVar8 & 0x3e);
        iVar8 = rand();
        *(undefined2 *)(puVar14 + 0x18) = 0;
        *(undefined2 *)(puVar14 + 0x1a) = 0;
        *(undefined2 *)(puVar14 + 0x1c) = 0;
        *(ushort *)(puVar14 + 8) = *(short *)(puVar14 + 8) + -0x1f + ((ushort)iVar8 & 0x3e);
        iVar8 = rand();
        puVar14[10] = ((byte)iVar8 & 7) + 0xc;
        iVar8 = rand();
        puVar14[0xb] = ((byte)iVar8 & 7) + 10;
        puVar14[0xc] = 0x80;
        puVar14[0xd] = 0x80;
        puVar14[0xe] = 0x80;
        puVar14[0xf] = 0x2c;
        goto LAB_OVR11CrystalGlacier__80083ec0;
      case 6:
        piVar12 = (int *)param_3->x;
        puVar14 = (undefined *)FUN_80041c50(3);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 0xf;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3 + 1);
        iVar8 = rand();
        *(ushort *)(puVar14 + 4) = *(short *)(puVar14 + 4) + -0x3f + ((ushort)iVar8 & 0x7e);
        iVar8 = rand();
        *(Vec3 **)(puVar14 + 0x18) = param_3 + 1;
        *(ushort *)(puVar14 + 6) = *(short *)(puVar14 + 6) + -0x3f + ((ushort)iVar8 & 0x7e);
        *(short *)(puVar14 + 0x1c) = (short)piVar12[1];
        iVar8 = *piVar12;
        puVar14[10] = 0x20;
        puVar14[0xb] = 0x14;
        puVar14[0xc] = 0x80;
        puVar14[0xd] = 0x80;
        puVar14[0xe] = 0x80;
        puVar14[0xf] = 0x2c;
        puVar14[0x11] = 0;
        puVar14[0x10] = 0;
        *(short *)(puVar14 + 0x1e) = (short)(iVar8 >> 6);
        break;
      case 9:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VectorCopy(&local_118,&Spyro.position);
        uVar9 = rand();
        local_118.x = local_118.x + -0x3f + (uVar9 & 0x7e);
        uVar9 = rand();
        local_118.y = local_118.y + -0x3f + (uVar9 & 0x7e);
        VecIntToShort((VectorShort *)(puVar14 + 4),&local_118);
        VectorCopy(&local_118,&Spyro.physicsVelocity);
        VectorShiftRight(&local_118,6);
        VecIntToShort((VectorShort *)(puVar14 + 0x18),&local_118);
        *(undefined2 *)(puVar14 + 0x1e) = 0;
        puVar14[10] = 0x18;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0xc] = 0x80;
        puVar14[0xd] = 0x80;
        puVar14[0xe] = 0x80;
        goto LAB_OVR11CrystalGlacier__80083ebc;
      case 10:
        puVar14 = (undefined *)FUN_80041c50(3);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 0x1f;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),&Spyro.position);
        puVar14[10] = 0x18;
        puVar14[0xb] = 0xf;
        puVar14[0xc] = (&DAT_80064654)[local_30];
        puVar14[0xd] = (&DAT_80064655)[local_30];
        uVar3 = (&DAT_80064656)[local_30];
        puVar14[0xf] = 0x2c;
        puVar14[0x11] = 4;
        puVar14[0x10] = 0;
        puVar14[0xe] = uVar3;
        *(short *)(puVar14 + 0x18) = (short)(((local_48 - local_40) * 0x1000) / 5);
        break;
      case 0xc:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[0x11] = 4;
        iVar8 = local_40 * 0xc;
        puVar14[3] = 1;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar8),&local_108);
        VectorAdd(&local_108,&local_108,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar9 = rand();
          local_108.x = (local_108.x + 0x100) - (uVar9 & 0x1ff);
          uVar9 = rand();
          local_108.y = (local_108.y + 0x100) - (uVar9 & 0x1ff);
          uVar9 = rand();
          local_108.z = (local_108.z + 0x100) - (uVar9 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar9 = rand();
          local_108.x = (local_108.x + 0x80) - (uVar9 & 0xff);
          uVar9 = rand();
          local_108.y = (local_108.y + 0x80) - (uVar9 & 0xff);
          uVar9 = rand();
          local_108.z = (local_108.z + 0x80) - (uVar9 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar14 + 4),&local_108);
        *(undefined4 *)(puVar14 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar11 = rand();
        puVar14[10] = ((byte)iVar11 & 7) + 0x20;
        iVar11 = rand();
        puVar14[0xb] = (char)iVar11;
        puVar14[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar14 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar8));
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x18) = (*(short *)(puVar14 + 0x18) >> 2) + -4 + ((ushort)iVar8 & 7);
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x1a) = (*(short *)(puVar14 + 0x1a) >> 2) + -4 + ((ushort)iVar8 & 7);
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x1c) = (*(short *)(puVar14 + 0x1c) >> 2) + -4 + ((ushort)iVar8 & 7);
        break;
      case 0xd:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar14 + 0x18),param_4);
        *(undefined2 *)(puVar14 + 0x1e) = 0;
        puVar14[10] = 0x18;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0xc] = 0xff;
        puVar14[0xd] = 0xff;
        puVar14[0xe] = 0;
        puVar14[0xf] = 0x2e;
        puVar14[0x11] = 4;
        puVar14[0x10] = 0;
        break;
      case 0xe:
        uVar9 = rand();
        if ((uVar9 & 1) == 0) {
          uVar9 = rand();
          uVar9 = uVar9 & 0xfff;
        }
        else {
          uVar9 = rand();
          uVar9 = (int)VectorShort_80067ec8.Z - ((uVar9 & 0x3ff) - 0x200);
        }
        uVar5 = rand();
        uVar5 = uVar5 & 0x3fff;
        iVar8 = cosineLookup(uVar9);
        uVar6 = rand();
        local_f8.x = (cameraPosition.x + Spyro.physicsVelocity.x * 2 + ((int)(iVar8 * uVar5) >> 0xc)
                     ) - ((uVar6 & 0x7ff) - 0x400);
        iVar8 = sineLookup(uVar9);
        uVar9 = rand();
        local_f8.z = cameraPosition.z + 0x4000;
        local_f8.y = (cameraPosition.y + Spyro.physicsVelocity.y * 2 + ((int)(iVar8 * uVar5) >> 0xc)
                     ) - ((uVar9 & 0x7ff) - 0x400);
        if ((0 < local_f8.x) && (0 < local_f8.y)) {
          iVar8 = FUN_8003ee3c(&local_f8,0x60c0,2,0);
          if (param_3 == (Vec3 *)0x0) {
            local_f8.z = (int)uVar5 >> 2;
            if (((VectorShort_80067ec8.Y & 0xfffU) < 0x400) ||
               (local_f8.z = (int)uVar5 >> 1, 0xf00 < (VectorShort_80067ec8.Y & 0xfffU))) {
              local_f8.z = local_f8.z + 0x800;
              goto LAB_OVR11CrystalGlacier__800836f4;
            }
            local_f8.z = cameraPosition.z + 0x2000;
          }
          else {
            uVar9 = rand();
            local_f8.z = (uVar9 & 0x1fff) - 0x800;
LAB_OVR11CrystalGlacier__800836f4:
            local_f8.z = cameraPosition.z + local_f8.z;
          }
          if ((iVar8 + 0x400 <= local_f8.z) && ((iVar8 == 0 || (0 < Vec3_8006ab88.z)))) {
            puVar14 = (undefined *)FUN_80041c50(3);
            *puVar14 = uVar3;
            puVar14[2] = 0;
            puVar14[3] = 1;
            if (iVar8 == 0) {
              iVar8 = local_f8.z + -0x4000;
              if (iVar8 < 0x400) {
                iVar8 = 0x400;
              }
            }
            else {
              iVar11 = Vec3_8006ab88.x;
              if (Vec3_8006ab88.x < 0) {
                iVar11 = -Vec3_8006ab88.x;
              }
              iVar10 = Vec3_8006ab88.y;
              if (Vec3_8006ab88.y < 0) {
                iVar10 = -Vec3_8006ab88.y;
              }
              if (iVar11 + iVar10 < Vec3_8006ab88.z) {
                puVar14[2] = 1;
              }
            }
            pVVar13 = (VectorShort *)(puVar14 + 4);
            local_e8 = rand();
            local_e8 = local_e8 & 3;
            local_e4 = rand();
            local_e4 = local_e4 & 3;
            uVar9 = rand();
            local_e0 = (uVar9 & 7) + 10;
            iVar11 = local_f8.z - iVar8 >> 2;
            if (local_e0 == 0) {
              trap(0x1c00);
            }
            if ((local_e0 == -1) && (iVar11 == -0x80000000)) {
              trap(0x1800);
            }
            *(short *)(puVar14 + 0x1c) = (short)(iVar11 / local_e0);
            local_f8.z = iVar8;
            VecIntToShort(pVVar13,&local_f8);
            VectorMultByN(&VStack_d8,&local_e8,(int)*(short *)(puVar14 + 0x1c));
            VecIntToShort2(&VStack_c8,&VStack_d8);
            VectorShortAdd(pVVar13,pVVar13,&VStack_c8);
            *(undefined2 *)(puVar14 + 0x18) = *(undefined2 *)(puVar14 + 4);
            *(undefined2 *)(puVar14 + 0x1a) = *(undefined2 *)(puVar14 + 6);
            iVar8 = rand();
            puVar14[0x1e] = (char)iVar8;
            iVar8 = rand();
            puVar14[0x1f] = ((byte)iVar8 & 3) + 1;
            *(short *)(puVar14 + 0x12) = -(short)local_e8;
            *(short *)(puVar14 + 0x14) = -(short)local_e4;
            *(short *)(puVar14 + 0x16) = -(short)local_e0;
            iVar8 = rand();
            puVar14[10] = ((byte)iVar8 & 7) + 0x14;
            iVar8 = rand();
            puVar14[0xb] = ((byte)iVar8 & 7) + 0xc;
            puVar14[0xc] = 0x80;
            puVar14[0xd] = 0x80;
            puVar14[0xe] = 0x80;
            puVar14[0xf] = 0x2c;
            puVar14[0x11] = 0;
            puVar14[0x10] = 0;
          }
        }
        break;
      case 0xf:
        puVar14 = (undefined *)FUN_80041c50(3);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 7;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        uVar4 = RandomRangeGen(0,0x23);
        *(undefined2 *)(puVar14 + 0x18) = uVar4;
        uVar4 = RandomRangeGen(0,0x23);
        *(undefined2 *)(puVar14 + 0x1a) = uVar4;
        uVar4 = randomRangeGen(0xffffffec,0x23);
        *(undefined2 *)(puVar14 + 0x1c) = uVar4;
        puVar14[10] = 0x19;
        puVar14[0xb] = 0xc;
        puVar14[10] = 0x26;
        puVar14[0xf] = 0x2c;
        puVar14[0xc] = 0x80;
        puVar14[0xd] = 0x80;
        puVar14[0xe] = 0x80;
        puVar14[0x11] = 4;
        puVar14[0x10] = 0;
        *(short *)(puVar14 + 4) = *(short *)(puVar14 + 4) + *(short *)(puVar14 + 0x18);
        *(short *)(puVar14 + 6) = *(short *)(puVar14 + 6) + *(short *)(puVar14 + 0x1a);
        *(short *)(puVar14 + 8) = *(short *)(puVar14 + 8) + *(short *)(puVar14 + 0x1c);
        break;
      case 0x11:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar14 + 0x18),param_3 + 1);
        *(undefined2 *)(puVar14 + 0x1e) = 0;
        puVar14[10] = 0x18;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0xc] = (char)param_4->x;
        puVar14[0xd] = (char)param_4->y;
        iVar8 = param_4->z;
        puVar14[0xf] = 0x2e;
        puVar14[0x11] = 4;
        puVar14[0x10] = 0;
        puVar14[0xe] = (char)iVar8;
        break;
      case 0x12:
        puVar14 = (undefined *)FUN_80041c50(4);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        CopyVectorShort((VectorShort *)(puVar14 + 4),(VectorShort *)param_3);
        iVar8 = rand();
        puVar14[10] = ((byte)iVar8 & 6) + 0xe;
        bVar2 = Spyro.angleAsByte.yaw;
        puVar14[0xc] = 0x20;
        puVar14[0xd] = 0x20;
        puVar14[0xe] = 0x40;
        puVar14[0xf] = 0x2e;
        puVar14[0x11] = 2;
        puVar14[0x10] = 0;
        puVar14[0xb] = bVar2;
        break;
      case 0x1f:
        uVar9 = rand();
        puVar14 = (undefined *)FUN_80041c50(3);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 0xf;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        *(short *)(puVar14 + 0x18) = cosineLookupTable[uVar9 & 0xff] >> 10;
        sVar1 = sineLookupTable[uVar9 & 0xff];
        *(undefined2 *)(puVar14 + 0x1c) = 6;
        *(short *)(puVar14 + 0x1a) = sVar1 >> 10;
        uVar9 = rand();
        iVar8 = (uVar9 & 0xf) + 0x20;
        puVar14[0xb] = (char)((uint)(iVar8 * 5) >> 3);
        puVar14[10] = (char)iVar8;
        puVar14[0xc] = 0x80;
        puVar14[0xd] = 0x80;
        puVar14[0xe] = 0x80;
        puVar14[0xf] = 0x2c;
        goto LAB_OVR11CrystalGlacier__80083ec0;
      case 0x21:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_b0,&Spyro.physicsVelocity);
          VectorShiftRight(&local_b0,6);
          VectorCopy(&local_c0,&Spyro.position);
          local_c0.z = local_c0.z + -0x164;
          uVar9 = rand();
          local_c0.x = (local_c0.x + 0x80) - (uVar9 & 0xff);
          uVar9 = rand();
          uVar3 = 0x30;
          local_c0.y = (local_c0.y + 0x80) - (uVar9 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_c0.x = 0x164;
          local_c0.y = 0;
          local_c0.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_c0,&local_c0);
          VectorAdd(&local_c0,&local_c0,&Spyro.position);
          uVar3 = 0x40;
          uVar9 = rand();
          local_b0.x = -(uVar9 & 7);
          uVar9 = rand();
          local_b0.y = ((int)((uint)(ushort)cosineLookupTable[local_40 * 0x20] << 0x10) >> 0x17) -
                       ((uVar9 & 0xf) - 8);
          local_b0.z = (int)((uint)(ushort)sineLookupTable[local_40 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_b0,&local_b0);
        }
        else {
          iVar8 = 5;
          if (param_4 == (Vec3 *)0x2) {
            iVar11 = local_40 << 5;
            iVar8 = 6;
            uVar3 = 0x30;
          }
          else {
            uVar3 = 0x40;
            iVar11 = local_40 * 0x20 + 0x10;
          }
          VectorCopy(&local_c0,&Spyro.position);
          local_c0.x = local_c0.x + ((int)cosineLookupTable[iVar11] >> iVar8);
          local_c0.z = local_c0.z + -0x164;
          local_c0.y = local_c0.y + ((int)sineLookupTable[iVar11] >> iVar8);
          local_b0.x = (int)cosineLookupTable[iVar11] >> iVar8 + 1;
          local_b0.z = 0;
          local_b0.y = (int)sineLookupTable[iVar11] >> iVar8 + 1;
        }
        VecIntToShort((VectorShort *)(puVar14 + 4),&local_c0);
        VecIntToShort((VectorShort *)(puVar14 + 0x18),&local_b0);
        *(undefined2 *)(puVar14 + 0x1e) = 0;
        puVar14[10] = 0x10;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0xc] = uVar3;
        puVar14[0xd] = uVar3;
        puVar14[0xe] = uVar3;
        goto LAB_OVR11CrystalGlacier__80083ebc;
      case 0x26:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar14 + 0x18),param_4);
        uVar4 = RandomRangeGen(3,7);
        *(undefined2 *)(puVar14 + 0x1e) = uVar4;
        *(undefined2 *)(puVar14 + 0x18) = 0;
        puVar14[10] = 0x20;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        uVar3 = randomRangeGen(0x60,0x80);
        puVar14[0xc] = uVar3;
        uVar3 = randomRangeGen(0x60,0x80);
        puVar14[0xd] = uVar3;
        uVar3 = randomRangeGen(0x60,0x80);
        goto LAB_OVR11CrystalGlacier__80083eb8;
      case 0x28:
        puVar14 = (undefined *)FUN_80041c50(2);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar14 + 0x18),param_4);
        *(undefined2 *)(puVar14 + 0x1e) = 0;
        puVar14[10] = 0x10;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0xd] = 0x48;
        uVar3 = 0x30;
        puVar14[0xc] = 0x80;
LAB_OVR11CrystalGlacier__80083eb8:
        puVar14[0xe] = uVar3;
LAB_OVR11CrystalGlacier__80083ebc:
        puVar14[0xf] = 0x2e;
LAB_OVR11CrystalGlacier__80083ec0:
        puVar14[0x11] = 4;
        puVar14[0x10] = 0;
        break;
      case 0x3b:
        puVar14 = (undefined *)FUN_80041c50(5);
        puVar14[3] = 1;
        *puVar14 = uVar3;
        puVar14[0x11] = 0x10;
        puVar14[1] = puVar14[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        iVar8 = rand();
        *(ushort *)(puVar14 + 4) = (*(short *)(puVar14 + 4) + 0x10) - ((ushort)iVar8 & 0x1f);
        iVar8 = rand();
        *(ushort *)(puVar14 + 6) = (*(short *)(puVar14 + 6) + 8) - ((ushort)iVar8 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar7 = 0x2e0080c0;
        }
        else {
          uVar7 = 0x2e00c000;
        }
        *(undefined4 *)(puVar14 + 0xc) = uVar7;
        iVar8 = rand();
        puVar14[10] = ((byte)iVar8 & 0xf) + 0x14;
        iVar8 = rand();
        puVar14[0xb] = (char)iVar8;
        puVar14[0x10] = 0;
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x18) = ((ushort)iVar8 & 7) - 4;
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x1a) = -2 - ((ushort)iVar8 & 7);
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x1c) = ((ushort)iVar8 & 0xf) - 8;
        break;
      case 0x41:
        puVar14 = (undefined *)FUN_80041c50(1);
        *puVar14 = uVar3;
        puVar14[2] = 0;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar14 + 10),param_4);
        puVar14[0x14] = 0xc0;
        puVar14[0x15] = 0xc0;
        puVar14[0x16] = 0xc0;
        puVar14[0x13] = 0x50;
        puVar14[0x17] = 0;
        puVar14[0x10] = 0x80;
        puVar14[0x11] = 0x80;
        puVar14[0x12] = 0x80;
        *(short *)(puVar14 + 10) = *(short *)(puVar14 + 10) + *(short *)(puVar14 + 4);
        *(short *)(puVar14 + 0xe) = *(short *)(puVar14 + 0xe) + *(short *)(puVar14 + 8);
        iVar8 = *(short *)(puVar14 + 0xe) + -0x80;
        *(short *)(puVar14 + 0xc) = *(short *)(puVar14 + 0xc) + *(short *)(puVar14 + 6);
        goto LAB_OVR11CrystalGlacier__80084728;
      case 0x42:
        puVar14 = (undefined *)FUN_80041c50(0);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 0xf;
        puVar14[3] = 1;
        iVar8 = rand();
        *(ushort *)(puVar14 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar8 & 0xf) + -8;
        iVar8 = rand();
        *(ushort *)(puVar14 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar8 & 0xf) + -8;
        iVar8 = rand();
        iVar11 = param_3->z;
        *(undefined2 *)(puVar14 + 0x10) = 0;
        *(undefined2 *)(puVar14 + 0x12) = 0;
        *(undefined2 *)(puVar14 + 0x14) = 0;
        puVar14[10] = 2;
        *(ushort *)(puVar14 + 8) = (short)(iVar11 >> 2) + ((ushort)iVar8 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar14[0xc] = 0xff;
          goto LAB_OVR11CrystalGlacier__80084148;
        }
        uVar9 = rand();
        switch(uVar9 & 7) {
        case 0:
          puVar14[0xc] = 0xff;
          puVar14[0xd] = 0;
          puVar14[0xe] = 0;
          break;
        case 1:
          puVar14[0xc] = 0xff;
          goto LAB_OVR11CrystalGlacier__80084148;
        case 2:
          puVar14[0xc] = 0;
LAB_OVR11CrystalGlacier__80084148:
          puVar14[0xd] = 0xff;
          puVar14[0xe] = 0;
          break;
        case 3:
          puVar14[0xc] = 0;
          puVar14[0xd] = 0xff;
          goto LAB_OVR11CrystalGlacier__80084190;
        case 4:
          puVar14[0xc] = 0;
          puVar14[0xd] = 0;
          goto LAB_OVR11CrystalGlacier__80084190;
        case 5:
          puVar14[0xc] = 0xff;
          puVar14[0xd] = 0;
          goto LAB_OVR11CrystalGlacier__80084190;
        case 6:
          puVar14[0xc] = 0xff;
          puVar14[0xd] = 0x80;
          puVar14[0xe] = 0;
          break;
        case 7:
          puVar14[0xc] = 0;
          puVar14[0xd] = 0x80;
LAB_OVR11CrystalGlacier__80084190:
          puVar14[0xe] = 0xff;
        }
        puVar14[0xf] = 0x40;
        break;
      case 0x46:
        puVar14 = (undefined *)FUN_80041c50(1);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 0xf;
        puVar14[3] = 1;
        local_90 = 0;
        iVar8 = rand();
        local_8f = (undefined)iVar8;
        iVar8 = rand();
        local_8e = (undefined)iVar8;
        BuildRotationMatrix(&local_90,&MStack_88,(Mat33 *)0x0);
        local_a0.y = 0;
        local_a0.z = 0;
        local_a0.x = (int)param_4;
        MatrixMultVector(&MStack_88,&local_a0,&local_a0);
        *(short *)(puVar14 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar14 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar14 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar14 + 10) = *(short *)(puVar14 + 4) + (short)local_a0.x * 2;
        *(short *)(puVar14 + 0xc) = *(short *)(puVar14 + 6) + (short)local_a0.y * 2;
        puVar14[0x17] = 2;
        puVar14[0x10] = 0xe0;
        puVar14[0x11] = 0xc0;
        puVar14[0x13] = 0x50;
        puVar14[0x12] = 0;
        puVar14[0x14] = 0xff;
        puVar14[0x15] = 0xff;
        puVar14[0x16] = 0x80;
        *(short *)(puVar14 + 0xe) = *(short *)(puVar14 + 8) + (short)local_a0.z * 2;
        break;
      case 0x47:
        puVar14 = (undefined *)FUN_80041c50(1);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 7;
        puVar14[3] = 1;
        uVar9 = rand();
        local_68.x = (int)(((uVar9 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar9 = rand();
        local_68.y = (int)(((uVar9 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar9 = rand();
        local_68.z = (int)(((uVar9 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar14 + 4) = (short)(param_3->x >> 2) + (short)local_68.x * 4;
        *(short *)(puVar14 + 6) = (short)(param_3->y >> 2) + (short)local_68.y * 4;
        *(short *)(puVar14 + 8) = (short)(param_3->z >> 2) + (short)local_68.z * 4;
        *(short *)(puVar14 + 10) = *(short *)(puVar14 + 4) + (short)local_68.x;
        *(short *)(puVar14 + 0xc) = *(short *)(puVar14 + 6) + (short)local_68.y;
        puVar14[0x17] = 2;
        puVar14[0x10] = 0xe0;
        puVar14[0x11] = 0xe0;
        puVar14[0x12] = 0x60;
        puVar14[0x14] = 0xff;
        puVar14[0x15] = 0xff;
        puVar14[0x16] = 0xff;
        puVar14[0x13] = 0x50;
        *(short *)(puVar14 + 0xe) = *(short *)(puVar14 + 8) + (short)local_68.z;
        break;
      case 0x4a:
        puVar14 = (undefined *)FUN_80041c50(0);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 0xf;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar14 + 0x10),param_4);
        iVar8 = rand();
        puVar14[0xc] = (byte)iVar8 | 0xc0;
        iVar8 = rand();
        puVar14[0xd] = ((byte)iVar8 & 0x3f) + 0x80;
        puVar14[0xe] = 0;
        puVar14[0xf] = 0x40;
        puVar14[10] = 4;
        break;
      case 0x4e:
        puVar14 = (undefined *)FUN_80041c50(0);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 0x1f;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 4),param_3);
        iVar8 = rand();
        *(ushort *)(puVar14 + 4) = *(short *)(puVar14 + 4) + -0x20 + ((ushort)iVar8 & 0x3f);
        iVar8 = rand();
        *(ushort *)(puVar14 + 6) = *(short *)(puVar14 + 6) + -0x20 + ((ushort)iVar8 & 0x3f);
        iVar8 = rand();
        *(ushort *)(puVar14 + 8) = *(short *)(puVar14 + 8) + -0x20 + ((ushort)iVar8 & 0x3f);
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x10) = ((ushort)iVar8 & 2) - 1;
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x12) = ((ushort)iVar8 & 2) - 1;
        iVar8 = rand();
        *(ushort *)(puVar14 + 0x14) = -((ushort)iVar8 & 1);
        iVar8 = rand();
        puVar14[0xc] = (byte)iVar8 | 0x80;
        uVar9 = rand();
        uVar9 = (uVar9 & 0x7f) + 0x60;
        puVar14[0xd] = (char)uVar9;
        if ((byte)puVar14[0xc] < uVar9) {
          puVar14[0xd] = puVar14[0xc];
        }
        iVar8 = rand();
        puVar14[0xe] = ((byte)iVar8 & 0x3f) + 0x40;
        puVar14[0xf] = 0x40;
        puVar14[10] = 2;
        break;
      case 0x4f:
        puVar14 = (undefined *)FUN_80041c50(1);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 0xf;
        puVar14[3] = 1;
        VecIntToShort((VectorShort *)(puVar14 + 10),param_3);
        VectorAdd(&local_68,param_3,param_4);
        uVar9 = rand();
        local_68.x = local_68.x + -0x20 + (uVar9 & 0x3f);
        uVar9 = rand();
        local_68.y = local_68.y + -0x20 + (uVar9 & 0x3f);
        uVar9 = rand();
        local_68.z = local_68.z + -0x40 + (uVar9 & 0x7f);
        VecIntToShort((VectorShort *)(puVar14 + 4),&local_68);
        puVar14[0x17] = 2;
        iVar8 = rand();
        puVar14[0x10] = (byte)iVar8 | 0xc0;
        iVar8 = rand();
        puVar14[0x11] = ((byte)iVar8 & 0x3f) + 0xa0;
        puVar14[0x12] = 0;
        iVar8 = rand();
        puVar14[0x14] = (byte)iVar8 | 0xe0;
        iVar8 = rand();
        puVar14[0x15] = (byte)iVar8 | 0xe0;
        puVar14[0x16] = 0x80;
        puVar14[0x13] = 0x50;
        break;
      case 0x52:
        piVar12 = (int *)param_3->x;
        puVar14 = (undefined *)FUN_80041c50(1);
        *puVar14 = uVar3;
        iVar8 = rand();
        puVar14[2] = (byte)iVar8 & 0xf;
        puVar14[3] = 1;
        uVar9 = rand();
        iVar8 = randomRangeGen(piVar12[1] >> 1);
        local_58.x = cosineLookupTable[uVar9 & 0xff] * iVar8 >> 0xc;
        local_58.z = 0;
        local_58.y = sineLookupTable[uVar9 & 0xff] * iVar8 >> 0xc;
        VectorAdd(&local_58,&local_58,param_3 + 1);
        VecIntToShort((VectorShort *)(puVar14 + 4),&local_58);
        *(undefined2 *)(puVar14 + 10) = *(undefined2 *)(puVar14 + 4);
        *(undefined2 *)(puVar14 + 0xc) = *(undefined2 *)(puVar14 + 6);
        *(short *)(puVar14 + 0xe) = *(short *)(puVar14 + 8) + 0x60;
        iVar8 = param_3[1].z;
        iVar11 = *piVar12;
        puVar14[0x10] = 0x70;
        puVar14[0x11] = 0x70;
        puVar14[0x12] = 0xe0;
        puVar14[0x14] = 0xe0;
        puVar14[0x15] = 0xe0;
        puVar14[0x16] = 0xff;
        puVar14[0x13] = 0x50;
        puVar14[0x17] = 0;
        iVar8 = iVar8 + iVar11 >> 2;
LAB_OVR11CrystalGlacier__80084728:
        *(int *)(puVar14 + 0x18) = iVar8;
      }
      local_30 = local_30 + 4;
      local_40 = local_40 + 1;
    } while (local_40 < local_48);
  }
  return puVar14;
}



void FUN_OVR14MetroSpeedway__80070a34(void)

{
  uint uVar1;
  undefined4 uVar2;
  int iVar3;
  
  DAT_80067008 = DAT_80067008 + 1;
  if (pauseSubMenuId == 0) {
    menuAnimation = menuAnimation + 1;
    if (9 < menuAnimation) {
      menuAnimation = 0;
      menuState = menuState + Paused;
      if (100 < (int)menuState) {
        menuState = 100;
      }
      if (menuState == BetweenHomeworldAndWorld) {
        if (DAT_80069898 + DAT_8006989c + DAT_800698a0 + DAT_800698a4 == 0x20) {
          uVar2 = 0;
        }
        else {
LAB_OVR14MetroSpeedway__80070b38:
          uVar2 = 1;
        }
      }
      else {
        if (4 < (int)menuState) goto LAB_OVR14MetroSpeedway__80070b44;
        if ((&inSpeedwayFlag)[menuState] != 8) goto LAB_OVR14MetroSpeedway__80070b38;
        uVar2 = 0;
      }
      FUN_800506ac(0,uVar2,0);
    }
LAB_OVR14MetroSpeedway__80070b44:
    if (6 < (int)menuState) {
      if (DAT_80069898 + DAT_8006989c + DAT_800698a0 + DAT_800698a4 == 0x20) {
        if ((inputStates[0].pressed & (Cross|Start)) == None) {
          return;
        }
        DAT_800698ac = DAT_800698b0;
        menuAnimation = 0;
        menuState = Pausing;
        pauseSubMenuId = 1;
        return;
      }
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None) {
        pauseMenuCurrentItem = 1 - pauseMenuCurrentItem;
        PlayAudio(*(undefined *)(audioBank + 0x17),0,0);
      }
      if ((inputStates[0].pressed & (Cross|Start)) == None) {
        return;
      }
      if (pauseMenuCurrentItem == 0) {
LAB_OVR14MetroSpeedway__80071104:
        (*DAT_80066f80)(1);
        return;
      }
      uVar1 = 0;
      if (0 < gemCollectedPhysicalCount) {
        iVar3 = 0;
        do {
          (&DAT_80068218)[uVar1 & 0x1f] =
               (&DAT_80061a80)[uVar1 + ((iVar3 >> 1) - ((int)uVar1 >> 0x1f)) * -0xc];
          uVar1 = uVar1 + 1;
          iVar3 = (int)uVar1 / 6 + ((int)uVar1 >> 0x1f);
        } while ((int)uVar1 < gemCollectedPhysicalCount);
      }
LAB_OVR14MetroSpeedway__80071194:
      (*DAT_80066f80)(0);
      FUN_80019928(0xffffffff);
                    // WARNING: Read-only address (ram,0x8006989c) is written
      return;
    }
    if (99 < (int)menuState) {
      return;
    }
    if ((inputStates[0].pressed & (Triangle|Cross|Start)) == None) {
      return;
    }
    if (DAT_80069898 + DAT_8006989c + DAT_800698a0 + DAT_800698a4 == 0x20) {
      uVar2 = 0;
      goto LAB_OVR14MetroSpeedway__80070fe8;
    }
  }
  else {
    if (pauseSubMenuId != 1) {
      if (pauseSubMenuId != 2) {
        return;
      }
      menuAnimation = menuAnimation + 1;
      if (9 < menuAnimation) {
        menuAnimation = 0;
        menuState = menuState + Paused;
        if (100 < (int)menuState) {
          menuState = 100;
        }
        if (menuState + ~Pausing < 2) {
          FUN_800506ac(0,0,0);
        }
      }
      if ((int)menuState < 4) {
        return;
      }
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None) {
        pauseMenuCurrentItem = 1 - pauseMenuCurrentItem;
        PlayAudio(*(undefined *)(audioBank + 0x17),0,0);
      }
      if ((inputStates[0].pressed & (Cross|Start)) == None) {
        return;
      }
      if (pauseMenuCurrentItem == 0) goto LAB_OVR14MetroSpeedway__80071104;
      uVar1 = 0;
      if (0 < gemCollectedPhysicalCount) {
        iVar3 = 0;
        do {
          (&DAT_80068218)[uVar1 & 0x1f] =
               (&DAT_80061a80)[uVar1 + ((iVar3 >> 1) - ((int)uVar1 >> 0x1f)) * -0xc];
          uVar1 = uVar1 + 1;
          iVar3 = (int)uVar1 / 6 + ((int)uVar1 >> 0x1f);
        } while ((int)uVar1 < gemCollectedPhysicalCount);
      }
      goto LAB_OVR14MetroSpeedway__80071194;
    }
    menuAnimation = menuAnimation + 1;
    if (9 < menuAnimation) {
      menuAnimation = 0;
      menuState = menuState + Paused;
      if (100 < (int)menuState) {
        menuState = 100;
      }
      if (menuState + ~Pausing < 2) {
        uVar2 = 0;
      }
      else {
        if (menuState != BetweenMenuAndHomeworld) goto LAB_OVR14MetroSpeedway__80070e1c;
        if (DAT_800698ac < (&oceanBestTime)[inSpeedwayFlag * 0x16]) {
          uVar2 = 0;
        }
        else {
          uVar2 = 1;
        }
      }
      FUN_800506ac(0,uVar2,0);
    }
LAB_OVR14MetroSpeedway__80070e1c:
    if (4 < (int)menuState) {
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None) {
        pauseMenuCurrentItem = 1 - pauseMenuCurrentItem;
        PlayAudio(*(undefined *)(audioBank + 0x17),0,0);
      }
      if ((inputStates[0].pressed & (Cross|Start)) == None) {
        return;
      }
      if (DAT_800698ac < (&oceanBestTime)[inSpeedwayFlag * 0x16]) {
        (&oceanBestTime)[inSpeedwayFlag * 0x16] = DAT_800698ac;
      }
      if (pauseMenuCurrentItem == 0) goto LAB_OVR14MetroSpeedway__80071104;
      uVar1 = 0;
      if (0 < gemCollectedPhysicalCount) {
        iVar3 = 0;
        do {
          (&DAT_80068218)[uVar1 & 0x1f] =
               (&DAT_80061a80)[uVar1 + ((iVar3 >> 1) - ((int)uVar1 >> 0x1f)) * -0xc];
          uVar1 = uVar1 + 1;
          iVar3 = (int)uVar1 / 6 + ((int)uVar1 >> 0x1f);
        } while ((int)uVar1 < gemCollectedPhysicalCount);
      }
      goto LAB_OVR14MetroSpeedway__80071194;
    }
    if (99 < (int)menuState) {
      return;
    }
    if ((inputStates[0].pressed & (Triangle|Cross|Start)) == None) {
      return;
    }
    if (DAT_800698ac < (&oceanBestTime)[inSpeedwayFlag * 0x16]) {
      uVar2 = 0;
      goto LAB_OVR14MetroSpeedway__80070fe8;
    }
  }
  uVar2 = 1;
LAB_OVR14MetroSpeedway__80070fe8:
  menuState = 100;
  menuAnimation = 0;
  FUN_800506ac(0,uVar2,0);
  return;
}



void FUN_OVR14MetroSpeedway__8007278c(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  while ((&INT_80061920)[inSpeedwayFlag * 0x16 + iVar2] != (int)*(short *)(param_1 + 0x36)) {
    iVar2 = iVar2 + 1;
    if (3 < iVar2) {
      return;
    }
  }
  (&DAT_80069898)[iVar2] = (&DAT_80069898)[iVar2] + 1;
  if ((&DAT_80061960)[inSpeedwayFlag * 0x16] != 0) {
    DAT_800698a8 = iVar2;
    return;
  }
  DAT_800698ac = DAT_800698ac + (&DAT_80061940)[inSpeedwayFlag * 0x16 + iVar2];
  DAT_800698a8 = iVar2;
  PlayAudio(*(undefined *)(audioBank + 0x1b),0,1);
  if (param_2 == 0) {
    return;
  }
  iVar1 = (&DAT_80061940)[inSpeedwayFlag * 0x16 + iVar2];
  iVar2 = (*DAT_800670b4)(0x1d,param_1);
  if (iVar2 == 0) {
    return;
  }
  *(char *)(iVar2 + 0x3c) = (char)(iVar1 / 0x3c) + -1;
  *(undefined *)(iVar2 + 0x48) = 1;
  return;
}



undefined * FUN_OVR14MetroSpeedway__80079ff8(int param_1)

{
  char cVar1;
  bool bVar2;
  char cVar3;
  char cVar4;
  byte bVar5;
  short sVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  short sVar11;
  short sVar12;
  char cVar13;
  uint uVar14;
  char *pcVar15;
  undefined *puVar16;
  VectorShort *pVVar17;
  undefined *puVar18;
  Vec3 local_68;
  undefined4 local_58;
  undefined4 local_54;
  int local_50;
  int local_4c;
  int local_48;
  
  cVar13 = DAT_80066f18[1];
  puVar16 = DAT_80066f18;
  if (cVar13 != -1) {
    cVar4 = (char)param_1;
    cVar3 = cVar4 * '\x02';
    pcVar15 = DAT_80066f18 + 1;
    puVar18 = DAT_80066f18 + 0x18;
    pVVar17 = (VectorShort *)(DAT_80066f18 + 4);
    do {
      if (cVar13 == -2) goto LAB_OVR14MetroSpeedway__8007b144;
      switch(*puVar16) {
      case 0:
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        pcVar15[9] = pcVar15[9] + cVar3;
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        pcVar15[0xc] = pcVar15[0xc] + cVar4 * -4;
        pcVar15[0xb] = pcVar15[0xb] + cVar4 * -4;
        bVar5 = pcVar15[1];
        pcVar15[1] = (char)((uint)bVar5 + param_1);
        bVar2 = ((uint)bVar5 + param_1 & 0xff) < 0x20;
        pcVar15[0xd] = pcVar15[0xd] + cVar4 * -4;
        goto LAB_OVR14MetroSpeedway__8007aa4c;
      case 1:
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        pcVar15[9] = pcVar15[9] + cVar4 * '\x04';
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        pcVar15[0xc] = pcVar15[0xc] + cVar4 * -4;
        pcVar15[0xb] = pcVar15[0xb] + cVar4 * -4;
        bVar5 = pcVar15[1];
        pcVar15[1] = (char)((uint)bVar5 + param_1);
        bVar2 = ((uint)bVar5 + param_1 & 0xff) < 0x18;
        pcVar15[0xd] = pcVar15[0xd] + cVar4 * -4;
        goto LAB_OVR14MetroSpeedway__8007aa4c;
      case 9:
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        bVar5 = pcVar15[1];
        pcVar15[1] = (char)((uint)bVar5 + param_1);
        bVar2 = ((uint)bVar5 + param_1 & 0xff) < 0x20;
        pcVar15[9] = pcVar15[9] + cVar3;
        goto LAB_OVR14MetroSpeedway__8007aa4c;
      case 10:
        if (((Spyro.state != Drowning) || (-1 < Spyro.health)) &&
           ((Spyro.field168_0x260 == 0 && (Spyro.iframeTimer != 0)))) {
          VectorCopy(&local_68,&Spyro.position);
          iVar9 = cosineLookup((int)*(short *)(pcVar15 + 0x17));
          local_68.x = local_68.x + (iVar9 >> 4);
          iVar9 = sineLookup((int)*(short *)(pcVar15 + 0x17));
          local_68.y = local_68.y + (iVar9 >> 4);
          local_68.z = local_68.z + 0x100;
          VecIntToShort(pVVar17,&local_68);
          sVar11 = *(short *)(pcVar15 + 0x17);
          *(short *)(pcVar15 + 0x17) = sVar11 + 0x40;
          iVar9 = cosineLookup((int)(short)(sVar11 + 0x40) - (int)VectorShort_80067ec8.Z & 0xfff);
          if (iVar9 < 0) {
            iVar9 = -iVar9;
          }
          pcVar15[9] = (char)(iVar9 / 0xaa);
          break;
        }
        goto LAB_OVR14MetroSpeedway__8007b0ec;
      case 0xb:
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x15) = *(short *)(pcVar15 + 0x15) + 1;
        }
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        VectorShortAdd(pVVar17,pVVar17,puVar16 + 0x12);
        pcVar15[9] = pcVar15[9] + cVar3;
        pcVar15[0xb] = pcVar15[0xb] + -4;
        cVar13 = pcVar15[0xd];
        pcVar15[10] = pcVar15[10] + cVar4 * '\x04';
        pcVar15[0xd] = cVar13 + -4;
        pcVar15[0xc] = pcVar15[0xc] + -4;
        if ((char)(cVar13 + -4) == '\0') goto LAB_OVR14MetroSpeedway__8007b0ec;
        goto LAB_OVR14MetroSpeedway__8007aa54;
      case 0xc:
        pcVar15[10] = pcVar15[10] + '\b';
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (pcVar15[0xb] != '\0') {
          pcVar15[0xb] = pcVar15[0xb] + -8;
        }
        if (pcVar15[0xc] != '\0') {
          pcVar15[0xc] = pcVar15[0xc] + -8;
        }
        if (pcVar15[0xd] != '\0') {
          pcVar15[0xd] = pcVar15[0xd] + -8;
        }
        uVar10 = *(uint *)(pcVar15 + 0xb);
        goto joined_r0x8007a970;
      case 0xd:
        if ((0x1b < (byte)pcVar15[1]) || (pcVar15[2] == '\0'))
        goto LAB_OVR14MetroSpeedway__8007b0ec;
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        uVar10 = (uint)(byte)pcVar15[1];
        pcVar15[9] = pcVar15[9] + cVar3;
        if (uVar10 < 0xd) {
          if (uVar10 < 5) {
            pcVar15[0xb] = -0x80;
            pcVar15[0xc] = -0x80;
            iVar9 = (uint)(byte)pcVar15[1] * -0x20 + 0x80;
            if (iVar9 < 0) {
              iVar9 = 0;
            }
            pcVar15[0xd] = (char)iVar9;
          }
          else {
            pcVar15[0xb] = -0x80;
            pcVar15[0xd] = '\0';
            pcVar15[0xc] = (pcVar15[1] + -4) * -8 + -0x80;
          }
        }
        else {
          iVar9 = (uVar10 - 0xc) * -8 + 0x80;
          if (iVar9 < 0) {
            iVar9 = 0;
          }
          pcVar15[0xb] = (char)iVar9;
          iVar9 = ((byte)pcVar15[1] - 0xc) * -4 + 0x40;
          if (iVar9 < 0) {
            iVar9 = 0;
          }
          pcVar15[0xc] = (char)iVar9;
          pcVar15[0xd] = '\0';
        }
        pcVar15[1] = pcVar15[1] + cVar4;
        break;
      case 0x21:
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        iVar9 = (uint)(byte)pcVar15[0xb] + param_1 * -2;
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        pcVar15[9] = pcVar15[9] + cVar3;
        if (iVar9 < 0) {
          iVar9 = 0;
        }
        bVar5 = pcVar15[1];
        cVar13 = (char)iVar9;
        pcVar15[0xb] = cVar13;
        pcVar15[0xc] = cVar13;
        pcVar15[0xd] = cVar13;
        pcVar15[1] = (char)((uint)bVar5 + param_1);
        if (((0x1f < ((uint)bVar5 + param_1 & 0xff)) || (pcVar15[2] == '\0')) || (iVar9 == 0))
        goto LAB_OVR14MetroSpeedway__8007b0ec;
        break;
      case 0x29:
        uVar10 = (uint)(byte)pcVar15[0x1d];
        bVar5 = pcVar15[1] + 1;
        pcVar15[1] = bVar5;
        if (uVar10 < bVar5) {
          if (pcVar15[0x1e] != '\0') {
            (*DAT_800670fc)(1,0x2b,pVVar17,0);
          }
          goto LAB_OVR14MetroSpeedway__8007b0ec;
        }
        iVar9 = ((int)*(short *)(pcVar15 + 0x17) - (int)*(short *)(pcVar15 + 0x11)) * (uint)bVar5;
        if (uVar10 == 0) {
          trap(0x1c00);
        }
        if ((uVar10 == 0xffffffff) && (iVar9 == -0x80000000)) {
          trap(0x1800);
        }
        iVar8 = ((int)*(short *)(pcVar15 + 0x19) - (int)*(short *)(pcVar15 + 0x13)) *
                (uint)(byte)pcVar15[1];
        uVar14 = (uint)(byte)pcVar15[0x1d];
        if (uVar14 == 0) {
          trap(0x1c00);
        }
        if ((uVar14 == 0xffffffff) && (iVar8 == -0x80000000)) {
          trap(0x1800);
        }
        sVar11 = *(short *)(pcVar15 + 0x15);
        *(short *)(pcVar15 + 0x15) = *(short *)(pcVar15 + 0x15) + -2;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + sVar11;
        iVar7 = clock * 8;
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 0x11) + (short)(iVar9 / (int)uVar10);
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 0x13) + (short)(iVar8 / (int)uVar14);
        pcVar15[9] = (char)(cosineLookupTable[iVar7 + (uint)(byte)pcVar15[0x1c] & 0xff] >> 10) +
                     '\n';
        pcVar15[10] = (char)(sineLookupTable[clock * 8 + (uint)(byte)pcVar15[0x1c] & 0xff] >> 0xb) +
                      '\x06';
        break;
      case 0x2a:
        bVar5 = pcVar15[1];
        pcVar15[1] = bVar5 + 1;
        if ((0xf < bVar5) || (pcVar15[2] == '\0')) goto LAB_OVR14MetroSpeedway__8007b0ec;
        pcVar15[9] = pcVar15[9] + '\x02';
        pcVar15[0xb] = pcVar15[0xb] + -6;
        pcVar15[0xc] = pcVar15[0xc] + -6;
        pcVar15[0xd] = pcVar15[0xd] + -6;
        *(int *)(pcVar15 + 0x17) = *(int *)(pcVar15 + 0x17) + (int)*(short *)(pcVar15 + 0x11);
        *(int *)(pcVar15 + 0x1b) = *(int *)(pcVar15 + 0x1b) + (int)*(short *)(pcVar15 + 0x13);
        *(short *)(pcVar15 + 3) = (short)(*(int *)(pcVar15 + 0x17) >> 2);
        *(short *)(pcVar15 + 5) = (short)(*(int *)(pcVar15 + 0x1b) >> 2);
        break;
      case 0x2b:
        if (((byte)pcVar15[0xb] < 4) || (pcVar15[2] == '\0')) goto LAB_OVR14MetroSpeedway__8007b0ec;
        cVar13 = '\x03';
        if (*(short *)(pcVar15 + 0x17) != 0) {
          cVar13 = '\x02';
        }
        cVar1 = pcVar15[9];
        pcVar15[9] = cVar1 + '\x01';
        if (*(short *)(pcVar15 + 0x17) != 0) {
          pcVar15[9] = cVar1 + '\x02';
        }
        pcVar15[0xb] = pcVar15[0xb] - cVar13;
        pcVar15[0xd] = pcVar15[0xd] - cVar13;
        pcVar15[0xc] = pcVar15[0xc] - cVar13;
        break;
      case 0x2e:
        bVar5 = pcVar15[1];
        pcVar15[1] = bVar5 + 1;
        if ((0xf < bVar5) || (pcVar15[2] == '\0')) goto LAB_OVR14MetroSpeedway__8007b0ec;
        pcVar15[9] = pcVar15[9] + '\x03';
        pcVar15[0xb] = pcVar15[0xb] + -8;
        pcVar15[0xc] = pcVar15[0xc] + -8;
        pcVar15[0xd] = pcVar15[0xd] + -8;
        break;
      case 0x3b:
        pcVar15[10] = pcVar15[10] + '\b';
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if ((DAT_80067008 & 1) != 0) {
          *(short *)(pcVar15 + 0x19) = *(short *)(pcVar15 + 0x19) + 1;
        }
        if (pcVar15[0xb] != '\0') {
          pcVar15[0xb] = pcVar15[0xb] + -4;
        }
        if (pcVar15[0xc] != '\0') {
          pcVar15[0xc] = pcVar15[0xc] + -4;
        }
        if (pcVar15[0xd] != '\0') {
          pcVar15[0xd] = pcVar15[0xd] + -4;
        }
        uVar10 = *(uint *)(pcVar15 + 0xb);
joined_r0x8007a970:
        if ((uVar10 & 0xffffff) != 0) goto LAB_OVR14MetroSpeedway__8007aa54;
        goto LAB_OVR14MetroSpeedway__8007b0ec;
      case 0x42:
        iVar9 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar15[1] & 1U) != 0) {
              *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + *(short *)(pcVar15 + 0xf);
              *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + *(short *)(pcVar15 + 0x11);
              *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + *(short *)(pcVar15 + 0x13);
              if ((pcVar15[1] & 2U) != 0) {
                iVar8 = rand();
                *(ushort *)(pcVar15 + 0xf) = *(short *)(pcVar15 + 0xf) + -1 + ((ushort)iVar8 & 2);
                iVar8 = rand();
                *(ushort *)(pcVar15 + 0x11) = *(short *)(pcVar15 + 0x11) + -1 + ((ushort)iVar8 & 2);
                iVar8 = rand();
                *(ushort *)(pcVar15 + 0x13) = *(short *)(pcVar15 + 0x13) + -1 + ((ushort)iVar8 & 2);
              }
            }
            iVar9 = iVar9 + 1;
            pcVar15[1] = pcVar15[1] + '\x01';
          } while (iVar9 < param_1);
        }
        bVar2 = (byte)pcVar15[1] < 0x18;
LAB_OVR14MetroSpeedway__8007aa4c:
        if (bVar2) {
LAB_OVR14MetroSpeedway__8007aa54:
          if (pcVar15[2] != '\0') break;
        }
LAB_OVR14MetroSpeedway__8007b0ec:
        FUN_80041d20(puVar16);
        break;
      case 0x46:
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        if ((0x1f < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR14MetroSpeedway__8007b0ec;
        local_58._0_2_ = (short)((int)*(short *)(pcVar15 + 9) - (int)*(short *)(pcVar15 + 3) >> 1);
        local_58._2_2_ = (short)((int)*(short *)(pcVar15 + 0xb) - (int)*(short *)(pcVar15 + 5) >> 1)
        ;
        sVar11 = (short)((int)*(short *)(pcVar15 + 0xd) - (int)*(short *)(pcVar15 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar11);
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + (short)local_58;
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + local_58._2_2_;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + sVar11;
        iVar9 = rand();
        local_58._0_2_ = (short)local_58 + -1 + ((ushort)iVar9 & 2);
        iVar9 = rand();
        sVar11 = local_58._2_2_ + -1 + ((ushort)iVar9 & 2);
        local_58 = CONCAT22(sVar11,(short)local_58);
        if ((pcVar15[1] & 1U) != 0) {
          local_54 = CONCAT22(local_54._2_2_,(short)local_54 + -1);
        }
        *(short *)(pcVar15 + 9) = *(short *)(pcVar15 + 9) + (short)local_58;
        *(short *)(pcVar15 + 0xb) = *(short *)(pcVar15 + 0xb) + sVar11;
        cVar13 = pcVar15[0xf];
        pcVar15[0xf] = cVar13 - 3U;
        *(short *)(pcVar15 + 0xd) = *(short *)(pcVar15 + 0xd) + (short)local_54;
        if ((byte)(cVar13 - 3U) < 0x80) {
          pcVar15[0xf] = -0x80;
        }
        cVar13 = pcVar15[0x10];
        pcVar15[0x10] = cVar13 - 4U;
        if ((byte)(cVar13 - 4U) < 0x60) {
          pcVar15[0x10] = '`';
        }
        cVar13 = pcVar15[0x13];
        pcVar15[0x11] = '\0';
        pcVar15[0x13] = cVar13 - 3U;
        if ((byte)(cVar13 - 3U) < 0xc0) {
          pcVar15[0x13] = -0x40;
        }
        cVar13 = pcVar15[0x14];
        pcVar15[0x14] = cVar13 - 4U;
        if ((byte)(cVar13 - 4U) < 0x80) {
          pcVar15[0x14] = -0x80;
        }
        cVar13 = pcVar15[0x15];
        pcVar15[0x15] = cVar13 - 6U;
        if ((byte)(cVar13 - 6U) < 0x20) {
          pcVar15[0x15] = ' ';
        }
        break;
      case 0x47:
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        if ((0x1f < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR14MetroSpeedway__8007b0ec;
        local_50 = (int)*(short *)(pcVar15 + 9) - (int)*(short *)(pcVar15 + 3);
        local_4c = (int)*(short *)(pcVar15 + 0xb) - (int)*(short *)(pcVar15 + 5);
        local_48 = (int)*(short *)(pcVar15 + 0xd) - (int)*(short *)(pcVar15 + 7);
        uVar10 = rand();
        local_50 = local_50 + -1 + (uVar10 & 2);
        uVar10 = rand();
        local_4c = local_4c + -1 + (uVar10 & 2);
        uVar10 = rand();
        local_48 = local_48 + -1 + (uVar10 & 2);
        *(short *)(pcVar15 + 9) = *(short *)(pcVar15 + 9) + (short)local_50;
        *(short *)(pcVar15 + 0xb) = *(short *)(pcVar15 + 0xb) + (short)local_4c;
        *(short *)(pcVar15 + 0xd) = *(short *)(pcVar15 + 0xd) + (short)local_48;
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 9) - (short)local_50;
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 0xb) - (short)local_4c;
        pcVar15[0x13] = pcVar15[0x13] + -2;
        pcVar15[0x15] = pcVar15[0x15] + -4;
        pcVar15[0x14] = pcVar15[0x14] + -2;
        pcVar15[0x10] = pcVar15[0x10] + -3;
        pcVar15[0xf] = pcVar15[0xf] + -3;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 0xd) - (short)local_48;
        pcVar15[0x11] = pcVar15[0x11] + -3;
        break;
      case 0x48:
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        if ((0x37 < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR14MetroSpeedway__8007b0ec;
        local_58 = (int)*(short *)(pcVar15 + 3) - (int)*(short *)(pcVar15 + 9) >> 1;
        local_54 = (int)*(short *)(pcVar15 + 5) - (int)*(short *)(pcVar15 + 0xb) >> 1;
        local_50 = (int)*(short *)(pcVar15 + 7) - (int)*(short *)(pcVar15 + 0xd) >> 1;
        uVar10 = rand();
        local_58 = local_58 + -2 + (uVar10 & 4);
        uVar10 = rand();
        local_54 = local_54 + -2 + (uVar10 & 4);
        uVar10 = rand();
        local_50 = local_50 + -1 + (uVar10 & 2);
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + (short)local_58;
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + (short)local_54;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + (short)local_50;
        *(short *)(pcVar15 + 9) = *(short *)(pcVar15 + 3) + (short)local_58 * -2;
        *(short *)(pcVar15 + 0xb) = *(short *)(pcVar15 + 5) + (short)local_54 * -2;
        *(short *)(pcVar15 + 0xd) = *(short *)(pcVar15 + 7) + (short)local_50 * -2;
        break;
      case 0x4e:
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        if ((0x27 < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR14MetroSpeedway__8007b0ec;
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + *(short *)(pcVar15 + 0xf);
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + *(short *)(pcVar15 + 0x11);
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + *(short *)(pcVar15 + 0x13);
        iVar9 = rand();
        *(ushort *)(pcVar15 + 0xf) = *(short *)(pcVar15 + 0xf) + -1 + ((ushort)iVar9 & 2);
        iVar9 = rand();
        *(ushort *)(pcVar15 + 0x11) = *(short *)(pcVar15 + 0x11) + -1 + ((ushort)iVar9 & 2);
        uVar10 = rand();
        iVar9 = (*(ushort *)(pcVar15 + 0x13) - 1) + (uVar10 & 2);
        *(short *)(pcVar15 + 0x13) = (short)iVar9;
        if (2 < iVar9 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar15 + 0x13) = 2;
        }
        if (*(short *)(pcVar15 + 0x13) < -4) {
          *(undefined2 *)(pcVar15 + 0x13) = 0xfffc;
        }
        pcVar15[0xb] = pcVar15[0xb] + -2;
        pcVar15[0xd] = pcVar15[0xd] + -1;
        pcVar15[0xc] = pcVar15[0xc] + -2;
        break;
      case 0x4f:
        sVar12 = (short)((int)*(short *)(pcVar15 + 9) - (int)*(short *)(pcVar15 + 3) >> 1);
        sVar11 = (short)((int)*(short *)(pcVar15 + 0xb) - (int)*(short *)(pcVar15 + 5) >> 1);
        local_58 = CONCAT22(sVar11,sVar12);
        sVar6 = (short)((int)*(short *)(pcVar15 + 0xd) - (int)*(short *)(pcVar15 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar6);
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + sVar12;
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + sVar11;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + sVar6;
        *(short *)(pcVar15 + 9) = *(short *)(pcVar15 + 9) + sVar12;
        *(short *)(pcVar15 + 0xb) = *(short *)(pcVar15 + 0xb) + sVar11;
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        *(short *)(pcVar15 + 0xd) = *(short *)(pcVar15 + 0xd) + sVar6;
        if ((0x17 < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR14MetroSpeedway__8007b0ec;
        pcVar15[0xf] = pcVar15[0xf] + -3;
        pcVar15[0x13] = pcVar15[0x13] + -3;
        pcVar15[0x10] = pcVar15[0x10] + -4;
        pcVar15[0x14] = pcVar15[0x14] + -4;
        if (5 < (byte)pcVar15[0x15]) {
          pcVar15[0x15] = pcVar15[0x15] - 6;
        }
      }
LAB_OVR14MetroSpeedway__8007b144:
      pcVar15 = pcVar15 + 0x20;
      puVar18 = puVar18 + 0x20;
      pVVar17 = (VectorShort *)&pVVar17[5].Y;
      cVar13 = *pcVar15;
      puVar16 = puVar16 + 0x20;
    } while (cVar13 != -1);
  }
  return puVar16;
}



undefined *
FUN_OVR14MetroSpeedway__8007b194(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  byte bVar1;
  char cVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  Vec3 *from;
  undefined *puVar8;
  undefined uVar9;
  undefined uVar10;
  Vec3 VStack_108;
  Vec3 VStack_f8;
  Vec3 VStack_e8;
  Vec3 VStack_d8;
  Vec3 VStack_c8;
  Vec3 VStack_b8;
  Vec3 VStack_a8;
  Vec3 VStack_98;
  undefined uStack_88;
  undefined uStack_87;
  undefined uStack_86;
  Mat33 MStack_80;
  Vec3 VStack_60;
  int iStack_50;
  int iStack_48;
  Vec3 *pVStack_40;
  int iStack_30;
  
  puVar8 = (undefined *)0x0;
  iStack_48 = 0;
  if (0 < param_1) {
    pVStack_40 = &VStack_f8;
    iStack_30 = 0;
    iStack_50 = param_1;
    do {
      uVar10 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xb] = (char)iVar5;
        uVar10 = 4;
        puVar8[0xe] = 0x80;
        puVar8[0xf] = 0x2e;
        goto LAB_OVR14MetroSpeedway__8007bd58;
      case 1:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x10;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = 0x60;
        puVar8[0xd] = 0x60;
        puVar8[0xe] = 0x60;
        uVar10 = 4;
        goto LAB_OVR14MetroSpeedway__8007bd54;
      case 9:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VectorCopy(&VStack_108,&Spyro.position);
        uVar6 = rand();
        VStack_108.x = VStack_108.x + -0x3f + (uVar6 & 0x7e);
        uVar6 = rand();
        VStack_108.y = VStack_108.y + -0x3f + (uVar6 & 0x7e);
        VecIntToShort((VectorShort *)(puVar8 + 4),&VStack_108);
        VectorCopy(&VStack_108,&Spyro.physicsVelocity);
        VectorShiftRight(&VStack_108,6);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),&VStack_108);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xb] = (char)iVar5;
        uVar10 = 4;
        goto LAB_OVR14MetroSpeedway__8007bd50;
      case 10:
        puVar8 = (undefined *)FUN_80041c50(3);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0x1f;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),&Spyro.position);
        puVar8[10] = 0x18;
        puVar8[0xb] = 0xf;
        puVar8[0xc] = (&DAT_80064654)[iStack_30];
        puVar8[0xd] = (&DAT_80064655)[iStack_30];
        uVar10 = (&DAT_80064656)[iStack_30];
        puVar8[0xf] = 0x2c;
        puVar8[0x11] = 4;
        puVar8[0x10] = 0;
        puVar8[0xe] = uVar10;
        *(short *)(puVar8 + 0x18) = (short)(((iStack_50 - iStack_48) * 0x1000) / 5);
        break;
      case 0xc:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        iVar5 = iStack_48 * 0xc;
        puVar8[3] = 1;
        puVar8[0x11] = 4;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar5),pVStack_40);
        VectorAdd(pVStack_40,pVStack_40,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar6 = rand();
          VStack_f8.x = (VStack_f8.x + 0x100) - (uVar6 & 0x1ff);
          uVar6 = rand();
          VStack_f8.y = (VStack_f8.y + 0x100) - (uVar6 & 0x1ff);
          uVar6 = rand();
          VStack_f8.z = (VStack_f8.z + 0x100) - (uVar6 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar6 = rand();
          VStack_f8.x = (VStack_f8.x + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          VStack_f8.y = (VStack_f8.y + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          VStack_f8.z = (VStack_f8.z + 0x80) - (uVar6 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar8 + 4),pVStack_40);
        *(undefined4 *)(puVar8 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar7 = rand();
        puVar8[10] = ((byte)iVar7 & 7) + 0x20;
        iVar7 = rand();
        puVar8[0xb] = (char)iVar7;
        puVar8[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar8 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar5));
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x18) = (*(short *)(puVar8 + 0x18) >> 2) + -4 + ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1a) = (*(short *)(puVar8 + 0x1a) >> 2) + -4 + ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1c) = (*(short *)(puVar8 + 0x1c) >> 2) + -4 + ((ushort)iVar5 & 7);
        break;
      case 0xd:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        uVar10 = 4;
        puVar8[0xc] = 0xff;
        puVar8[0xd] = 0xff;
        puVar8[0xe] = 0;
        goto LAB_OVR14MetroSpeedway__8007bd54;
      case 0x21:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&VStack_d8,&Spyro.physicsVelocity);
          VectorShiftRight(&VStack_d8,6);
          VectorCopy(&VStack_e8,&Spyro.position);
          VStack_e8.z = VStack_e8.z + -0x164;
          uVar6 = rand();
          VStack_e8.x = (VStack_e8.x + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          uVar9 = 0x30;
          VStack_e8.y = (VStack_e8.y + 0x80) - (uVar6 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          VStack_e8.x = 0x164;
          VStack_e8.y = 0;
          VStack_e8.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&VStack_e8,&VStack_e8);
          VectorAdd(&VStack_e8,&VStack_e8,&Spyro.position);
          uVar9 = 0x40;
          uVar6 = rand();
          VStack_d8.x = -(uVar6 & 7);
          uVar6 = rand();
          VStack_d8.y = ((int)((uint)(ushort)cosineLookupTable[iStack_48 * 0x20] << 0x10) >> 0x17) -
                        ((uVar6 & 0xf) - 8);
          VStack_d8.z = (int)((uint)(ushort)sineLookupTable[iStack_48 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&VStack_d8,&VStack_d8);
        }
        else {
          iVar5 = 5;
          if (param_4 == (Vec3 *)0x2) {
            iVar7 = iStack_48 << 5;
            iVar5 = 6;
            uVar9 = 0x30;
          }
          else {
            uVar9 = 0x40;
            iVar7 = iStack_48 * 0x20 + 0x10;
          }
          VectorCopy(&VStack_e8,&Spyro.position);
          VStack_e8.x = VStack_e8.x + ((int)cosineLookupTable[iVar7] >> iVar5);
          VStack_e8.z = VStack_e8.z + -0x164;
          VStack_e8.y = VStack_e8.y + ((int)sineLookupTable[iVar7] >> iVar5);
          VStack_d8.x = (int)cosineLookupTable[iVar7] >> iVar5 + 1;
          VStack_d8.z = 0;
          VStack_d8.y = (int)sineLookupTable[iVar7] >> iVar5 + 1;
        }
        VecIntToShort((VectorShort *)(puVar8 + 4),&VStack_e8);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),&VStack_d8);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x10;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        uVar10 = 4;
        puVar8[0xc] = uVar9;
        puVar8[0xd] = uVar9;
        puVar8[0xe] = uVar9;
        puVar8[0xf] = 0x2e;
        goto LAB_OVR14MetroSpeedway__8007bd58;
      case 0x29:
        VectorCopy(&VStack_c8,param_3);
        uVar6 = rand();
        VStack_c8.x = (VStack_c8.x + 0x80) - (uVar6 & 0xff);
        uVar6 = rand();
        VStack_c8.y = (VStack_c8.y + 0x80) - (uVar6 & 0xff);
        uVar6 = rand();
        uVar3 = rand();
        iVar5 = (uVar3 & 0x3ff) + 0x200;
        VectorCopy(&VStack_b8,&VStack_c8);
        from = param_4;
        if (param_4 == (Vec3 *)0x0) {
          from = &Spyro.trueVelocity;
        }
        VectorCopy(&VStack_a8,from);
        VectorShiftRight(&VStack_a8,1);
        if (iStack_50 == 1) {
          VectorMultByN(&VStack_a8,&VStack_a8,3);
        }
        VStack_a8.z = 0;
        VectorAdd(&VStack_b8,&VStack_b8,&VStack_a8);
        VStack_b8.x = VStack_b8.x + (cosineLookupTable[uVar6 & 0xff] * iVar5 >> 0xc);
        VStack_b8.z = VStack_b8.z + 0x200;
        VStack_b8.y = VStack_b8.y + (sineLookupTable[uVar6 & 0xff] * iVar5 >> 0xc);
        VStack_b8.z = RaycastDown(&VStack_b8,0x400);
        if (VStack_b8.z != 0) {
          puVar8 = (undefined *)FUN_80041c50(3);
          puVar8[3] = 1;
          puVar8[10] = 10;
          *puVar8 = uVar10;
          puVar8[2] = 0;
          puVar8[0xb] = 6;
          puVar8[0xc] = (char)(DAT_80067408 >> 4);
          puVar8[0xd] = (char)(DAT_8006740c >> 4);
          iVar5 = DAT_80067410;
          puVar8[0xf] = 0x2e;
          puVar8[0x11] = 2;
          puVar8[0x10] = 0;
          puVar8[0xe] = (char)(iVar5 >> 4);
          VecIntToShort((VectorShort *)(puVar8 + 4),&VStack_c8);
          VecIntToShort((VectorShort *)(puVar8 + 0x12),&VStack_c8);
          VecIntToShort((VectorShort *)(puVar8 + 0x18),&VStack_b8);
          uVar6 = rand();
          uVar3 = rand();
          iVar5 = (uVar6 & 0xe) + (uVar3 & 6) + 0x14;
          *(short *)(puVar8 + 0x16) = (short)iVar5;
          puVar8[0x1e] = 0;
          while ((0 < iVar5 || (VStack_b8.z < VStack_c8.z))) {
            VStack_c8.z = VStack_c8.z + iVar5 * 4;
            iVar5 = iVar5 + -2;
            puVar8[0x1e] = puVar8[0x1e] + '\x01';
          }
          iVar5 = rand();
          puVar8[0x1d] = (char)iVar5;
          puVar8[0x1f] = (char)isOnWaterSurface;
        }
        break;
      case 0x2a:
        puVar8 = (undefined *)FUN_80041c50(4);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        *(int *)(puVar8 + 0x18) = param_3->x;
        *(int *)(puVar8 + 0x1c) = param_3->y;
        *(short *)(puVar8 + 0x12) = (short)param_4->x;
        *(short *)(puVar8 + 0x14) = (short)param_4->y;
        iVar5 = rand();
        puVar8[10] = ((byte)iVar5 & 7) + 3;
        bVar1 = Spyro.angleAsByte.yaw;
        puVar8[0xc] = 0x6c;
        puVar8[0xd] = 0x6c;
        puVar8[0xe] = 0x6c;
        puVar8[0xf] = 0x2e;
        puVar8[0x11] = 0;
        puVar8[0x10] = 0;
        puVar8[0xb] = bVar1 + 0x20;
        break;
      case 0x2b:
        puVar8 = (undefined *)FUN_80041c50(4);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          CopyVectorShort((VectorShort *)(puVar8 + 4),(VectorShort *)param_3);
          iVar5 = rand();
          puVar8[10] = ((byte)iVar5 & 7) + 2;
          uVar10 = 0x60;
        }
        else {
          VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
          if (param_4 == (Vec3 *)0x2) {
            iVar5 = rand();
            *(ushort *)(puVar8 + 4) = (*(short *)(puVar8 + 4) + 0x20) - ((ushort)iVar5 & 0x7f);
            iVar5 = rand();
            *(ushort *)(puVar8 + 6) = (*(short *)(puVar8 + 6) + 0x20) - ((ushort)iVar5 & 0x7f);
          }
          iVar5 = rand();
          puVar8[10] = ((byte)iVar5 & 7) + 0x10;
          uVar10 = 0x40;
        }
        bVar1 = Spyro.angleAsByte.yaw;
        puVar8[0xc] = uVar10;
        puVar8[0xd] = uVar10;
        puVar8[0xe] = uVar10;
        puVar8[0xf] = 0x2e;
        puVar8[0x11] = 0;
        puVar8[0x10] = 0;
        *(short *)(puVar8 + 0x18) = (short)param_4;
        puVar8[0xb] = bVar1;
        break;
      case 0x2e:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = (*(short *)(puVar8 + 4) + 0x40) - ((ushort)iVar5 & 0x7f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = (*(short *)(puVar8 + 6) + 0x40) - ((ushort)iVar5 & 0x7f);
        if (param_4 == (Vec3 *)0x0) {
          iVar5 = rand();
          cVar2 = ((byte)iVar5 & 0xf) + 0x14;
        }
        else {
          iVar5 = rand();
          cVar2 = (char)param_4 + ((byte)iVar5 & 0xf);
        }
        puVar8[10] = cVar2;
        iVar5 = rand();
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xb] = (char)iVar5;
        uVar10 = 2;
LAB_OVR14MetroSpeedway__8007bd50:
        puVar8[0xe] = 0x80;
LAB_OVR14MetroSpeedway__8007bd54:
        puVar8[0xf] = 0x2e;
LAB_OVR14MetroSpeedway__8007bd58:
        puVar8[0x11] = uVar10;
        puVar8[0x10] = 0;
        break;
      case 0x3b:
        puVar8 = (undefined *)FUN_80041c50(5);
        puVar8[3] = 1;
        *puVar8 = uVar10;
        puVar8[0x11] = 0x10;
        puVar8[1] = puVar8[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = (*(short *)(puVar8 + 4) + 0x10) - ((ushort)iVar5 & 0x1f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = (*(short *)(puVar8 + 6) + 8) - ((ushort)iVar5 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar4 = 0x2e0080c0;
        }
        else {
          uVar4 = 0x2e00c000;
        }
        *(undefined4 *)(puVar8 + 0xc) = uVar4;
        iVar5 = rand();
        puVar8[10] = ((byte)iVar5 & 0xf) + 0x14;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0x10] = 0;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x18) = ((ushort)iVar5 & 7) - 4;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1a) = -2 - ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1c) = ((ushort)iVar5 & 0xf) - 8;
        break;
      case 0x42:
        puVar8 = (undefined *)FUN_80041c50(0);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        iVar7 = param_3->z;
        *(undefined2 *)(puVar8 + 0x10) = 0;
        *(undefined2 *)(puVar8 + 0x12) = 0;
        *(undefined2 *)(puVar8 + 0x14) = 0;
        puVar8[10] = 2;
        *(ushort *)(puVar8 + 8) = (short)(iVar7 >> 2) + ((ushort)iVar5 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar8[0xc] = 0xff;
          goto LAB_OVR14MetroSpeedway__8007bf48;
        }
        uVar6 = rand();
        switch(uVar6 & 7) {
        case 0:
          puVar8[0xc] = 0xff;
          puVar8[0xd] = 0;
          puVar8[0xe] = 0;
          break;
        case 1:
          puVar8[0xc] = 0xff;
          goto LAB_OVR14MetroSpeedway__8007bf48;
        case 2:
          puVar8[0xc] = 0;
LAB_OVR14MetroSpeedway__8007bf48:
          puVar8[0xd] = 0xff;
          puVar8[0xe] = 0;
          break;
        case 3:
          puVar8[0xc] = 0;
          puVar8[0xd] = 0xff;
          goto LAB_OVR14MetroSpeedway__8007bf98;
        case 4:
          puVar8[0xc] = 0;
          puVar8[0xd] = 0;
          goto LAB_OVR14MetroSpeedway__8007bf98;
        case 5:
          puVar8[0xc] = 0xff;
          puVar8[0xd] = 0;
          goto LAB_OVR14MetroSpeedway__8007bf98;
        case 6:
          puVar8[0xc] = 0xff;
          puVar8[0xd] = 0x80;
          puVar8[0xe] = 0;
          break;
        case 7:
          puVar8[0xc] = 0;
          puVar8[0xd] = 0x80;
LAB_OVR14MetroSpeedway__8007bf98:
          puVar8[0xe] = 0xff;
        }
        puVar8[0xf] = 0x40;
        break;
      case 0x46:
        puVar8 = (undefined *)FUN_80041c50(1);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        uStack_88 = 0;
        iVar5 = rand();
        uStack_87 = (undefined)iVar5;
        iVar5 = rand();
        uStack_86 = (undefined)iVar5;
        BuildRotationMatrix(&uStack_88,&MStack_80,(Mat33 *)0x0);
        VStack_98.y = 0;
        VStack_98.z = 0;
        VStack_98.x = (int)param_4;
        MatrixMultVector(&MStack_80,&VStack_98,&VStack_98);
        *(short *)(puVar8 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar8 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar8 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar8 + 10) = *(short *)(puVar8 + 4) + (short)VStack_98.x * 2;
        *(short *)(puVar8 + 0xc) = *(short *)(puVar8 + 6) + (short)VStack_98.y * 2;
        puVar8[0x17] = 2;
        puVar8[0x10] = 0xe0;
        puVar8[0x11] = 0xc0;
        puVar8[0x13] = 0x50;
        puVar8[0x12] = 0;
        puVar8[0x14] = 0xff;
        puVar8[0x15] = 0xff;
        puVar8[0x16] = 0x80;
        *(short *)(puVar8 + 0xe) = *(short *)(puVar8 + 8) + (short)VStack_98.z * 2;
        break;
      case 0x47:
        puVar8 = (undefined *)FUN_80041c50(1);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 7;
        puVar8[3] = 1;
        uVar6 = rand();
        VStack_60.x = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        VStack_60.y = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        VStack_60.z = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar8 + 4) = (short)(param_3->x >> 2) + (short)VStack_60.x * 4;
        *(short *)(puVar8 + 6) = (short)(param_3->y >> 2) + (short)VStack_60.y * 4;
        *(short *)(puVar8 + 8) = (short)(param_3->z >> 2) + (short)VStack_60.z * 4;
        *(short *)(puVar8 + 10) = *(short *)(puVar8 + 4) + (short)VStack_60.x;
        *(short *)(puVar8 + 0xc) = *(short *)(puVar8 + 6) + (short)VStack_60.y;
        puVar8[0x17] = 2;
        puVar8[0x10] = 0xe0;
        puVar8[0x11] = 0xe0;
        puVar8[0x12] = 0x60;
        puVar8[0x14] = 0xff;
        puVar8[0x15] = 0xff;
        puVar8[0x16] = 0xff;
        puVar8[0x13] = 0x50;
        *(short *)(puVar8 + 0xe) = *(short *)(puVar8 + 8) + (short)VStack_60.z;
        break;
      case 0x4e:
        puVar8 = (undefined *)FUN_80041c50(0);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0x1f;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = *(short *)(puVar8 + 4) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = *(short *)(puVar8 + 6) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 8) = *(short *)(puVar8 + 8) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x10) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x12) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x14) = -((ushort)iVar5 & 1);
        iVar5 = rand();
        puVar8[0xc] = (byte)iVar5 | 0x80;
        uVar6 = rand();
        uVar6 = (uVar6 & 0x7f) + 0x60;
        puVar8[0xd] = (char)uVar6;
        if ((byte)puVar8[0xc] < uVar6) {
          puVar8[0xd] = puVar8[0xc];
        }
        iVar5 = rand();
        puVar8[0xe] = ((byte)iVar5 & 0x3f) + 0x40;
        puVar8[0xf] = 0x40;
        puVar8[10] = 2;
        break;
      case 0x4f:
        puVar8 = (undefined *)FUN_80041c50(1);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 10),param_3);
        VectorAdd(&VStack_60,param_3,param_4);
        uVar6 = rand();
        VStack_60.x = VStack_60.x + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        VStack_60.y = VStack_60.y + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        VStack_60.z = VStack_60.z + -0x40 + (uVar6 & 0x7f);
        VecIntToShort((VectorShort *)(puVar8 + 4),&VStack_60);
        puVar8[0x17] = 2;
        iVar5 = rand();
        puVar8[0x10] = (byte)iVar5 | 0xc0;
        iVar5 = rand();
        puVar8[0x11] = ((byte)iVar5 & 0x3f) + 0xa0;
        puVar8[0x12] = 0;
        iVar5 = rand();
        puVar8[0x14] = (byte)iVar5 | 0xe0;
        iVar5 = rand();
        puVar8[0x15] = (byte)iVar5 | 0xe0;
        puVar8[0x16] = 0x80;
        puVar8[0x13] = 0x50;
      }
      iStack_30 = iStack_30 + 4;
      iStack_48 = iStack_48 + 1;
    } while (iStack_48 < iStack_50);
  }
  return puVar8;
}



void FUN_OVR16ShadyOasis__8006e2a8(int param_1)

{
  byte bVar1;
  int iVar2;
  undefined4 uVar3;
  Vec3 *vector;
  int iVar4;
  Vec3 local_30;
  Vec3 VStack_20;
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case Whirlwind:
    iVar2 = Spyro.position.z - Spyro.field82_0x14c;
    if (iVar2 < 0x400) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x80;
      if (0x12c0 < Spyro.trueVelocity.z) {
        Spyro.trueVelocity.z = 0x12c0;
      }
      Spyro.rotation.Yaw = (iVar2 * iVar2 >> 0xb) + Spyro.field83_0x150;
      VectorCopy(&local_30,(Vec3 *)(Spyro.field153_0x218 + 0xc));
      VectorSubtract(&local_30,&local_30,&Spyro.position);
      local_30.z = 0;
      iVar2 = VectorLength(&local_30,0);
      if (0x400 < iVar2) {
        uVar3 = 0x400;
        goto LAB_OVR16ShadyOasis__8006e63c;
      }
    }
    else {
      iVar4 = Spyro.field84_0x154 - Spyro.position.z;
      if (Spyro.position.z - Spyro.field84_0x154 < -0x400) {
        if (Spyro.airVelocityFlag == NORMAL) {
          Spyro.airVelocityFlag = FALLING;
          Spyro.field83_0x150 = Spyro.field83_0x150 + 0x200;
        }
        Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x80;
        if (0x12c0 < Spyro.trueVelocity.z) {
          Spyro.trueVelocity.z = 0x12c0;
        }
        iVar4 = Spyro.field85_0x158 * (iVar2 + -0x400);
        if (Spyro.field86_0x15c == 0) {
          trap(0x1c00);
        }
        if ((Spyro.field86_0x15c == -1) && (iVar4 == -0x80000000)) {
          trap(0x1800);
        }
        Spyro.rotation.Yaw =
             Spyro.field83_0x150 + iVar4 / Spyro.field86_0x15c + ((iVar2 + -0x400) * 0x400 >> 10) &
             0xfff;
        VectorCopy(&local_30,(Vec3 *)(Spyro.field153_0x218 + 0xc));
        VectorSubtract(&local_30,&local_30,&Spyro.position);
        local_30.z = 0;
        iVar2 = VectorLength(&local_30,0);
        if (0x400 < iVar2) {
          uVar3 = 0x400;
LAB_OVR16ShadyOasis__8006e63c:
          VectorScale(&local_30,iVar2,uVar3);
        }
      }
      else {
        Spyro.trueVelocity.z = iVar4 * 0x12c0 >> 10;
        bVar1 = *(byte *)(Spyro.field153_0x218 + 0x46);
        local_30.x = (Spyro.field87_0x160 + 0x400) * (int)cosineLookupTable[bVar1] >> 0xc;
        local_30.y = (Spyro.field87_0x160 + 0x400) *
                     (int)sineLookupTable[*(byte *)(Spyro.field153_0x218 + 0x46)] >> 0xc;
        VectorAdd(&local_30,&local_30,(Vec3 *)(Spyro.field153_0x218 + 0xc));
        Spyro.rotation.Yaw = (uint)bVar1 * 0x10 - (iVar4 * iVar4 >> 0xb);
        VectorSubtract(&local_30,&local_30,&Spyro.position);
        local_30.z = 0;
        iVar2 = VectorLength(&local_30,0);
        if (0x800 < iVar2) {
          uVar3 = 0x800;
          goto LAB_OVR16ShadyOasis__8006e63c;
        }
      }
    }
    Spyro.trueVelocity.x = local_30.x;
    Spyro.trueVelocity.y = local_30.y;
    break;
  case IdleLook:
  case IdleSit:
  case New_Name_(1):
  case Spit:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    if (cameraState != Look) {
      FUN_8002b36c(0x1200);
      FUN_8002bc68();
      FUN_8002bb24(0x5a,0x10);
    }
    break;
  case HurtPitchSpin:
    vector = &VStack_20;
    VectorClear(vector);
    VectorSubtract(vector,vector,&Spyro.trueVelocity);
    if (Spyro.airTime == 0) {
      iVar2 = VectorLength(vector,1);
      if (0x100 < iVar2) {
        VectorScale(vector,iVar2,0x100);
      }
      VectorAdd(&Spyro.trueVelocity,&Spyro.trueVelocity,vector);
      vector = &Spyro.field56_0xf0;
    }
    else {
      VStack_20.z = 0;
      iVar2 = VectorLength(vector,0);
      if (0x40 < iVar2) {
        VectorScale(vector,iVar2,0x40);
      }
      VStack_20.z = -0xc0;
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,vector);
    VectorCopy(&Spyro.trueVelocity,&Spyro.trueVelocity);
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    break;
  case Drowning:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
  }
  return;
}



void FUN_OVR16ShadyOasis__8006e78c(void)

{
  int iVar1;
  Vec3 VStack_18;
  
  switch(Spyro.state) {
  case Whirlwind:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    Spyro.field17_0x28 = 0;
    break;
  case IdleLook:
  case IdleSit:
    iVar1 = FUN_8002d9c4();
    if (iVar1 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    goto LAB_OVR16ShadyOasis__8006e7fc;
  case HurtPitchSpin:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    Spyro.field17_0x28 = 0;
    break;
  case Drowning:
    Spyro.position.z = Spyro.position.z + (Spyro.field82_0x14c >> 6);
    Spyro.field82_0x14c = Spyro.field82_0x14c + deltaTime * 0x200;
    if (Spyro.health < 0) {
      if (0x9000 < Spyro.field82_0x14c) {
        Spyro.field82_0x14c = 0x9000;
      }
    }
    else if (0x2580 < Spyro.field82_0x14c) {
      Spyro.field82_0x14c = 0x2580;
    }
    FUN_8002c0f4();
    FUN_8002cc88();
    VectorCopy(&VStack_18,&Spyro.position);
    VStack_18.z = VStack_18.z + 0x400;
    Spyro.field17_0x28 = RaycastDown(&VStack_18,0xc00);
    Spyro.position.z = Spyro.position.z - (Spyro.field82_0x14c >> 6);
    break;
  case New_Name_(1):
  case Spit:
    FUN_8002c0f4();
LAB_OVR16ShadyOasis__8006e7fc:
    FUN_8002cc88();
    Spyro.field17_0x28 = 0;
  }
  return;
}



void FUN_OVR16ShadyOasis__8006e954(int param_1)

{
  undefined4 uVar1;
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case Whirlwind:
    uVar1 = 0;
    break;
  case IdleLook:
  case HurtPitchSpin:
  case Drowning:
  case IdleSit:
  case New_Name_(1):
  case Spit:
    uVar1 = 0x8006a0c4;
    break;
  default:
    goto switchD_OVR16ShadyOasis__8006e99c_caseD_14;
  }
  FUN_8002db8c(uVar1);
switchD_OVR16ShadyOasis__8006e99c_caseD_14:
  return;
}



void FUN_OVR16ShadyOasis__8006e9d0(int param_1)

{
  Substate SVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  int *piVar4;
  
  SVar1 = Spyro.maybeSubstate;
  switch(param_1) {
  case 0x12:
    piVar4 = *(int **)Spyro.field153_0x218;
    Spyro.maybeSubstate = Whirlwind;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field118_0x1bc = '\0';
    VectorClear(&Spyro.trueVelocity);
    Spyro.field83_0x150 = Spyro.rotation.Yaw;
    Spyro.field82_0x14c = Spyro.position.z;
    Spyro.field84_0x154 = *(int *)(Spyro.field153_0x218 + 0x14) + *piVar4;
    Spyro.field86_0x15c = (Spyro.field84_0x154 - Spyro.position.z) + -0x800;
    Spyro.field85_0x158 =
         ((uint)*(byte *)(Spyro.field153_0x218 + 0x46) * 0x10 - Spyro.rotation.Yaw) -
         ((Spyro.field86_0x15c * 0x400 >> 10) + 0x400) & 0xfff;
    if (0x800 < (uint)Spyro.field85_0x158) {
      Spyro.field85_0x158 = Spyro.field85_0x158 - 0x1000;
    }
    Spyro.field87_0x160 = piVar4[1];
    break;
  case 0x13:
  case 0x26:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
    uVar2 = 1;
    if (param_1 == 0x25) {
      uVar2 = 5;
      uVar3 = 8;
    }
    else {
      uVar3 = 3;
    }
    Spyro.field82_0x14c = randomRangeGen(uVar2,uVar3);
    Spyro.field83_0x150 = 0;
    if (DAT_800670b4 != (code *)0x0) {
      if (param_1 == 0x25) {
        uVar2 = 0x1f1;
      }
      else {
        uVar2 = 0x1db;
        if (param_1 != 0x27) {
          Spyro.field83_0x150 = 0;
          return;
        }
      }
      (*DAT_800670b4)(uVar2,0);
    }
    break;
  case 0x1d:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.trueVelocity.x = Spyro.field154_0x21c.x << 6;
    Spyro.trueVelocity.y = Spyro.field154_0x21c.y << 6;
    Spyro.field82_0x14c = SVar1;
    Spyro.trueVelocity.z = Spyro.field154_0x21c.z << 6;
    if (Spyro.field154_0x21c.z == 0) {
      Spyro.trueVelocity.z = Spyro.physicsVelocity.z;
    }
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    DAT_8006838c = 0xf;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    break;
  case 0x1e:
    Spyro.maybeSubstate = Hurt;
    Spyro.field118_0x1bc = '\x01';
    DAT_8006838c = 0xf;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = 0;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 0xe),0,0);
    Spyro.field170_0x268 = (int)*(byte *)(audioBank + 0xe);
    break;
  case 0x35:
  case 0x36:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
  }
  return;
}



void FUN_OVR16ShadyOasis__8006ed04(void)

{
  CollisionType CVar1;
  int iVar2;
  SpyroState newSpyroState;
  
  switch(Spyro.state) {
  case Whirlwind:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
    iVar2 = Vec2OctagonalDistanceApproximation((Vec2 *)&Spyro,(Vec2 *)(Spyro.field153_0x218 + 0xc));
    newSpyroState = Glide;
    if (iVar2 <= Spyro.field87_0x160) {
      return;
    }
    break;
  case IdleLook:
  case IdleSit:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
    newSpyroState = Jump;
    if ((inputStates[0].pressed & Cross) == None) {
      CVar1 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar1 == Ice) {
        newSpyroState = Ice;
        if (DAT_8006839d != '\0') {
          return;
        }
      }
      else {
        newSpyroState = Flop;
        if (((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) &&
           (newSpyroState = Charge, (inputStates[0].current & Square) == None)) {
          iVar2 = Spyro.maybeTurnSpeed;
          if (Spyro.maybeTurnSpeed < 0) {
            iVar2 = -Spyro.maybeTurnSpeed;
          }
          if (iVar2 < 0x11) {
            if (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
                 (TriggerLeft|TriggerRight)) ||
               (newSpyroState = Walk, Spyro.maybeHorizontalSpeed == 0)) {
              if ((cameraState == Look) || (Spyro.field162_0x240 != 0)) {
                if (Spyro.state == Idle) {
                  return;
                }
                SetSpyroState(Idle);
                if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
                  Spyro.currentAnimationState = Spyro.nextAnimationState;
                  Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
                }
                Spyro.nextAnimationState = (byte)Spyro.state;
                Spyro.nextAnimationFrame = 0;
                Spyro.field11_0x1c = 0x71;
                Spyro.field136_0x1ec = Spyro.state;
                Spyro.field137_0x1f0 = 0;
                return;
              }
              newSpyroState = IdleLedge;
              if (Spyro.ledgeDetected == '\0') {
                FUN_80032c34();
                return;
              }
            }
          }
          else {
            newSpyroState = Walk;
          }
        }
      }
    }
    break;
  default:
    goto switchD_OVR16ShadyOasis__8006ed38_caseD_14;
  case HurtPitchSpin:
    if (Spyro.field35_0x5c < 0x19) {
      return;
    }
    if (Spyro.health < 0) {
      newSpyroState = DeathPirouette;
    }
    else if (Spyro.field82_0x14c == 10) {
      newSpyroState = WaterIdle;
    }
    else if (Spyro.field82_0x14c - 0xbU < 2) {
      newSpyroState = UnderwaterIdle;
    }
    else {
      newSpyroState = Idle;
      if (Spyro.airTime != 0) {
        newSpyroState = Flop;
      }
    }
    break;
  case Drowning:
    if ((inputStates[0].pressed & Cross) != None) {
      Spyro.field120_0x1be = '\x01';
    }
    if (Spyro.health < 0) {
      if (Spyro.field82_0x14c < 0x9000) {
        return;
      }
      Spyro.field169_0x264 = -1;
      OnDeath();
      return;
    }
    if (0x3c < Spyro.field35_0x5c) {
      Spyro.health = -1;
      return;
    }
    if (Spyro.field35_0x5c < 0x10) {
      return;
    }
    if (Spyro.field120_0x1be == '\0') {
      return;
    }
    newSpyroState = Jump;
    if (-1 < Spyro.field169_0x264) {
      iVar2 = FUN_80050b20(Spyro.field170_0x268);
      if (iVar2 != 0) {
        FUN_80050a40(Spyro.field169_0x264);
      }
      Spyro.field169_0x264 = -1;
      newSpyroState = Jump;
    }
    break;
  case New_Name_(1):
  case Spit:
    iVar2 = maybeTakeDamage();
    newSpyroState = Idle;
    if (iVar2 != 0) {
      return;
    }
  }
  SetSpyroState(newSpyroState);
switchD_OVR16ShadyOasis__8006ed38_caseD_14:
  return;
}



void FUN_OVR16ShadyOasis__8006f108(void)

{
  int iVar1;
  Orbit *outputOrbit;
  int iVar2;
  Orbit *inputOrbit;
  int iVar3;
  Vec3 local_20;
  
  iVar3 = DAT_80067fbc + 2 >> 2;
  if (4 < iVar3) {
    iVar3 = 4;
  }
  if (cameraState == New_Name_(3)) {
    InputRotateCamera(0x400);
    DAT_80067fc6 = cameraRotateInput != 0;
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_800616a0,DAT_80067ef0);
    }
    else {
      cameraRotateInput = 0;
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar3 * 0x14 + -0x7ff9e8d4),0);
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar3 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
    inputOrbit = &Orbit_80061858;
    outputOrbit = &Orbit_80067f8c;
  }
  else {
    if ((int)cameraState < 0x16) {
      if (cameraState != BossLock) {
        return;
      }
      VectorCopy(&Vec3_80067ee4,&Spyro.position);
      VectorSubtract(&local_20,(Vec3 *)(DAT_80067ff0 + 0xc),&Spyro.position);
      DAT_80067ef0 = Atan2(local_20.x,local_20.y,1);
      if (DAT_80067fb8 == 0) {
        OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80061628,DAT_80067ef0);
        InputRotateCamera(0x400);
        if ((currentLoadedLevel == RIPTOS_ARENA) && (Objects[1].data[6] == '\x03')) {
          iVar1 = VectorLength(&local_20,0);
          iVar2 = iVar1 + -0x800;
          if (iVar1 < 0x4800) {
            if (iVar2 < 0) {
              iVar2 = 0;
            }
            Orbit_80067f14.Latitude =
                 Orbit_80061628.Latitude +
                 ((0x30 - Orbit_80061628.Latitude) * (0x4000 - iVar2) >> 0xe) & 0xfff;
            Orbit_80067f14.Pitch =
                 Orbit_80061628.Pitch + ((-0xa0 - Orbit_80061628.Pitch) * (0x4000 - iVar2) >> 0xe) &
                 0xfff;
          }
        }
      }
      OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar3 * 0x14 + -0x7ff9e8d4),0);
      OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar3 * 0x14 + -0x7ff9e848),0);
      OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
      OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
      return;
    }
    if (cameraState != WhirlwindAlign) {
      return;
    }
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80061560,DAT_80067ef0);
      InputRotateCamera(0x400);
      if (currentLoadedLevel == MYSTIC_MARSH) {
        Orbit_80067f14.Radius = 0x600;
      }
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = (uint)*(byte *)(Spyro.field153_0x218 + 0x46) << 4;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar3 * 0x14 + -0x7ff9e8d4),0);
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar3 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    outputOrbit = &Orbit_80067fa0;
    inputOrbit = &Orbit_80061844;
  }
  OrbitRotateLongitude(outputOrbit,inputOrbit,0);
  if (((DAT_80067edc & 2) == 0) && (cameraOrbitAcceleration_Scale.Longitude < 0x4c)) {
    cameraOrbitAcceleration_Scale.Longitude = 0x4c;
  }
  return;
}



void FUN_OVR16ShadyOasis__8006f570(int param_1)

{
  if (param_1 != 0x15) {
    if (0x15 < param_1) {
      if (param_1 != 0x17) {
        return;
      }
      DAT_80067fc5 = 0;
      goto LAB_OVR16ShadyOasis__8006f614;
    }
    if (param_1 != 0xd) {
      return;
    }
  }
  DAT_80067fc5 = 1;
LAB_OVR16ShadyOasis__8006f614:
  DAT_80067fc4 = 0;
  INT_80067ed4 = 0;
  DAT_80067fc6 = 1;
  DAT_80067fc9 = 0;
  DAT_80067ee0 = 0;
  VectorCopy(&Vec3_80067ee4,&Spyro.position);
  DAT_80067ef0 = Spyro.rotation.Yaw;
  FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
  FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
  OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
  return;
}



void FUN_OVR16ShadyOasis__8006f800(void)

{
  if (DAT_80066f30 == 1) {
    hudExtra1.field1_0x1 = 3;
  }
  UpdateHUDElement(&hudExtra1,riptoHPClone_);
  hudExtra2.field1_0x1 = 3;
  UpdateHUDElement(&hudExtra2,DAT_80067084);
  return;
}



void FUN_OVR16ShadyOasis__8006f870(void)

{
  HUDElement *pHVar1;
  undefined *puVar2;
  undefined4 uVar3;
  int iVar4;
  
  if (DAT_80066f30 == 2) {
    puVar2 = &DAT_800635f8 + (uint)(byte)(&DAT_800634a8)[(DAT_80067008 >> 1) % 0xe] * 4;
    uVar3 = 0x150;
    if (DAT_80067088 < 10) {
      uVar3 = 0x168;
    }
    pHVar1 = &hudExtra2;
    iVar4 = DAT_80067088;
  }
  else {
    pHVar1 = &hudExtra1;
    if (hudExtra1.displayState == Hidden) goto LAB_OVR16ShadyOasis__8006f98c;
    uVar3 = 0x168;
    iVar4 = 3;
    puVar2 = &DAT_80063618 + (uint)(byte)(&DAT_8006349c)[(DAT_80067008 >> 1) % 0xc] * 4;
  }
  RenderBLProgressCounter(pHVar1,puVar2,uVar3,0xec,iVar4);
LAB_OVR16ShadyOasis__8006f98c:
  maybeDrawMap();
  return;
}


/*
Unable to decompile 'FUN_OVR16ShadyOasis__80081394'
Cause: Exception while decompiling OVR16ShadyOasis::80081394: process: timeout

*/


Vec3 ** FUN_OVR16ShadyOasis__80082eb0(int param_1,int param_2)

{
  Object *pOVar1;
  char cVar2;
  undefined uVar3;
  undefined2 uVar4;
  short sVar5;
  Vec3 **ppVVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  undefined4 uVar11;
  undefined4 *puVar12;
  uint uVar13;
  int iVar14;
  Object *pOVar15;
  undefined4 uVar16;
  Spyro *pSVar17;
  int *piVar18;
  Vec3 *pVVar19;
  Vec3 *to;
  Vec3 local_88;
  Mat33 MStack_78;
  undefined local_58;
  char local_57;
  undefined local_56;
  Mat33 MStack_50;
  undefined local_30;
  byte local_2f;
  byte local_2e;
  
  ppVVar6 = (Vec3 **)FUN_80041290();
  if (ppVVar6 == (Vec3 **)0x0) {
    return (Vec3 **)0x0;
  }
  pVVar19 = *ppVVar6;
  MEMSET((int *)ppVVar6,0,0x58);
  *ppVVar6 = pVVar19;
  MEMSET(&pVVar19->x,0,0x18);
  *(short *)((int)ppVVar6 + 0x36) = (short)param_1;
  if ((param_2 == 0) || (uVar13 = (param_2 - (int)Objects) * -0x45d1745d >> 3, 0xff < uVar13)) {
    *(undefined *)((int)ppVVar6 + 0x3a) = 0xff;
  }
  else {
    *(char *)((int)ppVVar6 + 0x3a) = (char)uVar13;
  }
  FUN_800375c8(ppVVar6);
  if (param_1 < 0x136) {
    if (0x131 < param_1) {
LAB_OVR16ShadyOasis__80083504:
      pVVar19 = *ppVVar6;
      *(undefined *)(ppVVar6 + 0x13) = 0x20;
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      uVar13 = rand();
      uVar9 = rand();
      uVar9 = uVar9 & 0x7ff;
      iVar14 = cosineLookup(uVar9);
      iVar10 = cosineLookup(uVar13 & 0xfff);
      *(short *)&pVVar19->x =
           (short)(char)(iVar14 * iVar10 * (uint)*(byte *)(param_2 + 0x49) >> 0x18);
      iVar14 = cosineLookup(uVar9);
      iVar10 = sineLookup(uVar13 & 0xfff);
      *(short *)((int)&pVVar19->x + 2) =
           (short)(char)(iVar14 * iVar10 * (uint)*(byte *)(param_2 + 0x49) >> 0x18);
      iVar14 = sineLookup(uVar9);
      *(short *)&pVVar19->y = (short)((int)(iVar14 * (uint)*(byte *)(param_2 + 0x49)) >> 0xc);
      if (((*(uint *)(param_2 + 0x18) & 0x20000) != 0) &&
         ((Spyro.maybeSubstate == Charge || (Spyro.maybeSubstate == UnderwaterCharge)))) {
        *(short *)&pVVar19->x = *(short *)&pVVar19->x + (short)(Spyro.trueVelocity.x >> 6);
        *(short *)((int)&pVVar19->x + 2) =
             *(short *)((int)&pVVar19->x + 2) + (short)(Spyro.trueVelocity.y >> 6);
      }
      if ((*(byte *)(param_2 + 0x51) != 0) && ((*(uint *)(param_2 + 0x18) & 0x100000) != 0)) {
        *(short *)&pVVar19->x =
             *(short *)&pVVar19->x +
             (short)(cosineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
        *(short *)((int)&pVVar19->x + 2) =
             *(short *)((int)&pVVar19->x + 2) +
             (short)(sineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
        sVar5 = randomRangeGen(0x28,0x46);
        *(short *)&pVVar19->y = *(short *)&pVVar19->y + sVar5;
      }
      ppVVar6[3] = (Vec3 *)(&ppVVar6[3]->x + *(short *)&pVVar19->x);
      ppVVar6[4] = (Vec3 *)(&ppVVar6[4]->x + *(short *)((int)&pVVar19->x + 2));
      ppVVar6[5] = (Vec3 *)(&ppVVar6[5]->x + *(short *)&pVVar19->y);
      iVar14 = rand();
      *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
      iVar14 = rand();
      *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
      iVar14 = rand();
      *(ushort *)((int)&pVVar19->y + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
      iVar14 = rand();
      *(ushort *)&pVVar19->z = ((ushort)iVar14 & 0x1f) - 0x10;
      iVar14 = rand();
      *(ushort *)((int)&pVVar19->z + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
      pVVar19[1].y = *(int *)(param_2 + 0x14) + -0x40;
      iVar14 = randomRangeGen(0x32,0x50);
      pVVar19[1].x = iVar14;
      return ppVVar6;
    }
    if (param_1 == 0x81) {
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      uVar13 = (uint)(ushort)VectorShort_80067ec8.Z;
      *(undefined *)((int)ppVVar6 + 0x4f) = 0x40;
      ppVVar6[0x15] = (Vec3 *)0x3f005080;
      *(char *)((int)ppVVar6 + 0x46) = (char)((int)(uVar13 << 0x10) >> 0x14) + -0x80;
      return ppVVar6;
    }
    if (param_1 < 0x82) {
      if (param_1 == 0x10) {
LAB_OVR16ShadyOasis__800830c8:
        pVVar19 = *ppVVar6;
        if (*(short *)((int)ppVVar6 + 0x36) == 0x10) {
          iVar14 = 10;
          if (lives < 4) {
            iVar14 = 7;
          }
          else if (lives < 7) {
            iVar14 = 9;
          }
          fodderCountTillNextLifeButterfly = fodderCountTillNextLifeButterfly + 1;
          if (iVar14 <= fodderCountTillNextLifeButterfly) {
            fodderCountTillNextLifeButterfly = 0;
            *(undefined2 *)((int)ppVVar6 + 0x36) = 0xd3;
          }
        }
        FUN_80041438(ppVVar6);
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x2a].z;
        VectorCopy(pVVar19,(Vec3 *)(ppVVar6 + 3));
        ppVVar6[7] = (Vec3 *)0xffffffff;
        *(undefined *)((int)ppVVar6 + 0x47) = 2;
        *(undefined2 *)((int)&pVVar19[1].x + 2) = 0x708;
        *(undefined *)((int)&pVVar19[1].y + 1) = 0;
        iVar14 = rand();
        *(byte *)((int)&pVVar19[1].y + 2) = (byte)iVar14 & 0xfc;
        return ppVVar6;
      }
      if (param_1 < 0x11) {
        if (param_1 == 1) {
          FUN_80041438(ppVVar6);
          *(undefined *)(ppVVar6 + 0x13) = 0x18;
          *(undefined *)((int)ppVVar6 + 0x4a) = 0x40;
          goto LAB_OVR16ShadyOasis__800834f4;
        }
      }
      else if (param_1 == 0x78) {
        pVVar19 = *ppVVar6;
        FUN_80041438(ppVVar6);
        *(undefined *)((int)ppVVar6 + 0x49) = 0;
        *(undefined2 *)&pVVar19->x = 0;
        *(undefined2 *)&pVVar19->z = 0;
        *(undefined2 *)((int)&pVVar19->y + 2) = 0;
        *(undefined2 *)&pVVar19->y = 0;
        *(undefined *)((int)&pVVar19[1].x + 1) = 0x78;
        pVVar19[1].y = 0;
        pVVar19[1].z = 0;
        if (param_2 == 0) {
          uVar13 = Spyro.angleAsByte.yaw - 0x80 & 0xff;
          local_88.x = cosineLookupTable[uVar13] * 0x7d >> 9;
          local_88.z = 1000;
          local_88.y = sineLookupTable[uVar13] * 0x7d >> 9;
          VectorAdd((Vec3 *)(ppVVar6 + 3),&Spyro.position,&local_88);
        }
        else {
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        }
        *(undefined *)((int)&pVVar19->x + 2) = 0xff;
        return ppVVar6;
      }
    }
    else {
      if (param_1 == 0xdd) {
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        *(undefined *)((int)ppVVar6 + 0x49) = 3;
        if (*(short *)((int)ppVVar6 + 0x36) == 0xd6) {
          *(undefined *)(ppVVar6 + 0x15) = 1;
          return ppVVar6;
        }
        *(undefined *)(ppVVar6 + 0x15) = 2;
        return ppVVar6;
      }
      if (param_1 < 0xde) {
        if (param_1 == 0xd3) goto LAB_OVR16ShadyOasis__800830c8;
      }
      else if (param_1 == 0x104) {
        FUN_80041438(ppVVar6);
        *(undefined *)(ppVVar6 + 0x15) = 2;
        if (param_2 != 0) {
          (*ppVVar6)->x = param_2;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          *(undefined *)((int)ppVVar6 + 0x4a) = 10;
          *(undefined *)(ppVVar6 + 0x13) = 8;
          ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x55].y;
          return ppVVar6;
        }
LAB_OVR16ShadyOasis__800834f4:
        ppVVar6[7] = (Vec3 *)0xffffffff;
        return ppVVar6;
      }
    }
  }
  else {
    if (param_1 == 0x1e2) {
      pVVar19 = *ppVVar6;
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      pVVar19->x = 0x10;
      *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
      *(undefined *)(ppVVar6 + 0x15) = 0x80;
      *(undefined *)((int)ppVVar6 + 0x55) = 0x40;
      *(undefined *)((int)ppVVar6 + 0x56) = 0;
      iVar14 = rand();
      *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
      iVar14 = rand();
      *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
      *(undefined *)((int)ppVVar6 + 0x4f) = 0x46;
      *(undefined *)((int)ppVVar6 + 0x47) = 4;
      return ppVVar6;
    }
    if (param_1 < 0x1e3) {
      if (param_1 == 0x18a) {
        pVVar19 = *ppVVar6;
        *(undefined *)(ppVVar6 + 0x13) = 0x20;
        *(undefined *)((int)ppVVar6 + 0x4e) = 0x20;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        if (*(short *)(param_2 + 0x36) == 0x197) {
          uVar11 = randomRangeGen(100,0x3ff);
          uVar13 = rand();
          iVar14 = randomRangeGen(0x78,0xaa);
          iVar10 = randomRangeGen(0x96,0xbe);
        }
        else {
          uVar11 = randomRangeGen(0,0x3ff);
          uVar13 = rand();
          iVar14 = 100;
          iVar10 = 100;
        }
        iVar7 = cosineLookup(uVar11);
        iVar8 = cosineLookup(uVar13 & 0xfff);
        *(short *)&pVVar19->x = (short)((iVar7 >> 6) * iVar8 * iVar14 >> 0x12);
        iVar7 = cosineLookup(uVar11);
        iVar8 = sineLookup(uVar13 & 0xfff);
        *(short *)((int)&pVVar19->x + 2) = (short)((iVar7 >> 6) * iVar8 * iVar14 >> 0x12);
        iVar14 = sineLookup(uVar11);
        *(short *)&pVVar19->y = (short)(iVar14 * iVar10 >> 0xc);
        iVar14 = rand();
        *(char *)(ppVVar6 + 0x11) = (char)iVar14;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
        ppVVar6[3] = (Vec3 *)((int)&ppVVar6[3]->x + *(short *)&pVVar19->x * 2);
        ppVVar6[4] = (Vec3 *)((int)&ppVVar6[4]->x + *(short *)((int)&pVVar19->x + 2) * 2);
        ppVVar6[5] = (Vec3 *)((int)&ppVVar6[5]->x + *(short *)&pVVar19->y * 2);
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->y + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
        iVar14 = rand();
        *(ushort *)&pVVar19->z = ((ushort)iVar14 & 0x1f) - 0x10;
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->z + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
        uVar11 = 0x5a;
        if (*(short *)(param_2 + 0x36) == 0x197) {
          uVar11 = 0x3c;
          uVar16 = 100;
        }
        else {
          uVar16 = 0x96;
        }
        uVar4 = randomRangeGen(uVar11,uVar16);
        *(undefined2 *)&pVVar19[1].x = uVar4;
        *(undefined2 *)((int)&pVVar19[1].x + 2) = 1;
        *(undefined2 *)((int)&pVVar19[1].y + 2) = 0;
        return ppVVar6;
      }
      if (param_1 < 0x18b) {
        if (param_1 == 0x146) {
          pVVar19 = *ppVVar6;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          FUN_80041438(ppVVar6);
          *(undefined2 *)&pVVar19->x = 0x10;
          *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
          *(undefined *)(ppVVar6 + 0x15) = 0x80;
          *(undefined *)((int)ppVVar6 + 0x55) = 0x80;
          *(undefined *)((int)ppVVar6 + 0x56) = 0;
          sVar5 = *(short *)(param_2 + 0x36);
          if ((sVar5 == 0x198) || (sVar5 == 0x2c2)) {
            *(undefined *)((int)&pVVar19->x + 2) = 1;
            *(undefined *)((int)&pVVar19->x + 3) = 1;
            uVar3 = 0x7f;
          }
          else {
            if (sVar5 == 0x270) {
              *(undefined *)((int)&pVVar19->x + 2) = 2;
              *(undefined *)(ppVVar6 + 0x15) = 0xe0;
              *(undefined *)((int)ppVVar6 + 0x55) = 0xe0;
              *(undefined *)((int)ppVVar6 + 0x56) = 0xe0;
              *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
            }
            else {
              *(undefined *)((int)&pVVar19->x + 2) = 0;
            }
            uVar3 = 0x60;
            *(undefined *)((int)&pVVar19->x + 3) = 0;
          }
          *(undefined *)((int)ppVVar6 + 0x4f) = uVar3;
          *(undefined *)((int)ppVVar6 + 0x47) = 0xfe;
          uVar11 = Vec2OctagonalDistanceApproximation((Vec2 *)(ppVVar6 + 3),(Vec2 *)&cameraPosition)
          ;
          cVar2 = Atan2(uVar11,cameraPosition.z - (int)ppVVar6[5],0);
          *(char *)((int)ppVVar6 + 0x45) = cVar2 + -0x40;
          uVar3 = Atan2(cameraPosition.x - (int)ppVVar6[3],cameraPosition.y - (int)ppVVar6[4],0);
          *(undefined *)((int)ppVVar6 + 0x46) = uVar3;
          return ppVVar6;
        }
      }
      else if ((param_1 == 0x18e) || (param_1 == 0x1de)) goto code_r0x80083058;
    }
    else {
      if (param_1 == 0x1f6) {
code_r0x80083058:
        pVVar19 = *ppVVar6;
        *(undefined *)(ppVVar6 + 0x13) = 0x20;
        *(undefined *)((int)ppVVar6 + 0x49) = 3;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        *(undefined *)((int)ppVVar6 + 0x46) = *(undefined *)(param_2 + 0x46);
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->y + 2) = ((ushort)iVar14 & 2) - 1;
        iVar14 = rand();
        *(ushort *)&pVVar19->z = ((ushort)iVar14 & 2) - 1;
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->z + 2) = ((ushort)iVar14 & 2) - 1;
        pVVar19[1].y = *(int *)(param_2 + 0x14) + -0x40;
        uVar13 = rand();
        pVVar19[1].x = 0x20 - (uVar13 & 0xf);
        return ppVVar6;
      }
      if (param_1 < 0x1f7) {
        if (param_1 == 0x1e3) {
          pVVar19 = *ppVVar6;
          FUN_80041438(ppVVar6);
          *(undefined *)(ppVVar6 + 0x13) = 0x40;
          *(undefined *)((int)ppVVar6 + 0x4e) = 0x40;
          if (param_2 == 0) {
            local_88.x = 0x1b8;
            local_88.y = 0;
            local_88.z = 0;
            if (cameraState == Look) {
              to = (Vec3 *)(ppVVar6 + 3);
              VectorCopy(to,&cameraPosition);
              local_58 = 0;
              local_57 = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
              local_56 = (undefined)((ushort)VectorShort_80067ec8.Z >> 4);
              BuildRotationMatrix(&local_58,&MStack_78,(Mat33 *)0x0);
              MatrixMultVector(&MStack_78,&local_88,&local_88);
              VectorAdd(to,to,&local_88);
              VectorAdd(to,to,&local_88);
              pSVar17 = (Spyro *)&local_88;
            }
            else {
              VectorCopy((Vec3 *)(ppVVar6 + 3),&cameraPosition);
              local_30 = 0;
              local_2f = Spyro.angleAsByte.roll;
              if ((Spyro.airTime == 0) && (0xf8 < (byte)(Spyro.angleAsByte.roll - 4))) {
                local_2f = 0;
              }
              local_2e = Spyro.angleAsByte.yaw;
              BuildRotationMatrix(&local_30,&MStack_50,(Mat33 *)0x0);
              MatrixMultVector(&MStack_50,&local_88,&local_88);
              ppVVar6[3] = (Vec3 *)0x1f4;
              ppVVar6[4] = (Vec3 *)0x0;
              ppVVar6[5] = (Vec3 *)0x0;
              MatrixMultVector(&MStack_50,(Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3));
              pSVar17 = &Spyro;
            }
            VectorAdd((Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3),&pSVar17->position);
            iVar14 = VectorLength(&local_88,0);
            uVar3 = Atan2(iVar14,local_88.z,0);
            *(undefined *)((int)ppVVar6 + 0x45) = uVar3;
            uVar3 = Atan2(local_88.x,local_88.y,0);
            *(undefined *)((int)ppVVar6 + 0x46) = uVar3;
            pOVar1 = DAT_800670bc;
            pOVar15 = Objects;
            *(short *)&pVVar19->x = (short)local_88.x;
            *(short *)((int)&pVVar19->x + 2) = (short)local_88.y;
            *(short *)&pVVar19->y = (short)local_88.z;
            for (; (pOVar15 < pOVar1 && (pOVar15->type != 0x407)); pOVar15 = pOVar15 + 1) {
            }
            if (pOVar15 != (Object *)0x0) {
              piVar18 = (int *)pOVar15->data;
              iVar14 = *piVar18;
              *piVar18 = iVar14 + 0x144;
              if (0x797 < iVar14 + 0x144) {
                *piVar18 = 0;
              }
              puVar12 = (undefined4 *)((int)piVar18 + *piVar18 + 0xc);
              pVVar19->z = (int)puVar12;
              *puVar12 = 0;
              MemCopy(&pVVar19[1].y,piVar18 + 1,8);
            }
            *(undefined *)((int)&pVVar19->y + 3) = 0x6e;
            *(undefined *)((int)ppVVar6 + 0x4b) = 1;
            FUN_80050648(ppVVar6,0,0);
            return ppVVar6;
          }
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          *(undefined *)((int)&pVVar19->y + 3) = 0x30;
          *(undefined *)((int)ppVVar6 + 0x4f) = 0x7f;
          *(char *)(ppVVar6 + 0x15) = (char)((int)((uint)*(byte *)((int)&pVVar19->y + 3) * 3) >> 1);
          uVar3 = *(undefined *)((int)&pVVar19->y + 3);
          *(undefined *)((int)ppVVar6 + 0x56) = 0;
          *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
          *(undefined *)((int)ppVVar6 + 0x55) = uVar3;
          return ppVVar6;
        }
      }
      else {
        if (param_1 == 0x21d) {
          pVVar19 = *ppVVar6;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          FUN_80041438(ppVVar6);
          pVVar19->x = 0x18;
          *(undefined *)((int)ppVVar6 + 0x57) = 0x30;
          *(undefined *)(ppVVar6 + 0x15) = 0;
          *(undefined *)((int)ppVVar6 + 0x55) = 0;
          *(undefined *)((int)ppVVar6 + 0x56) = 0;
          *(undefined *)((int)ppVVar6 + 0x4f) = 100;
          *(undefined *)((int)ppVVar6 + 0x47) = 0;
          iVar14 = rand();
          *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
          iVar14 = rand();
          *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
          return ppVVar6;
        }
        if (param_1 == 0x238) goto LAB_OVR16ShadyOasis__80083504;
      }
    }
  }
  pSVar17 = (Spyro *)(param_2 + 0xc);
  if (param_2 == 0) {
    pSVar17 = &Spyro;
  }
  VectorCopy((Vec3 *)(ppVVar6 + 3),&pSVar17->position);
  FUN_80041438(ppVVar6);
  return ppVVar6;
}



undefined * FUN_OVR16ShadyOasis__80083cd8(int param_1)

{
  byte bVar1;
  bool bVar2;
  char cVar3;
  short sVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  short sVar9;
  char cVar10;
  short sVar11;
  Vec3 *to;
  Object *pOVar12;
  char *pcVar13;
  undefined *puVar14;
  int iVar15;
  VectorShort *pVVar16;
  int iVar17;
  undefined *puVar18;
  Vec3 local_80;
  Vec3 local_70;
  Vec3 local_60;
  undefined4 local_50;
  undefined4 local_4c;
  int local_48;
  int local_44;
  int local_40;
  int local_38;
  
  cVar10 = DAT_80066f18[1];
  local_38 = param_1 << 1;
  puVar14 = DAT_80066f18;
  if (cVar10 != -1) {
    iVar17 = param_1 * 4;
    pcVar13 = DAT_80066f18 + 1;
    puVar18 = DAT_80066f18 + 0x18;
    pVVar16 = (VectorShort *)(DAT_80066f18 + 4);
    do {
      if (cVar10 == -2) goto LAB_OVR16ShadyOasis__80085150;
      cVar10 = (char)param_1;
      cVar3 = (char)iVar17;
      switch(*puVar14) {
      case 0:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + (char)local_38;
        pcVar13[0xb] = pcVar13[0xb] + cVar10 * -4;
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        pcVar13[0xc] = pcVar13[0xc] + cVar10 * -4;
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar13[0xd] = pcVar13[0xd] + cVar10 * -4;
        goto LAB_OVR16ShadyOasis__800849bc;
      case 1:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        pcVar13[9] = pcVar13[9] + cVar3;
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[0xc] = pcVar13[0xc] + cVar10 * -4;
        pcVar13[0xb] = pcVar13[0xb] + cVar10 * -4;
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar13[0xd] = pcVar13[0xd] + cVar10 * -4;
        goto LAB_OVR16ShadyOasis__800849bc;
      case 2:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + (char)local_38;
        if ((int)(uint)(byte)pcVar13[0xb] < iVar17) {
          pcVar13[0xb] = '\0';
        }
        else {
          pcVar13[0xb] = pcVar13[0xb] + cVar10 * -4;
        }
        if ((int)(uint)(byte)pcVar13[0xc] < iVar17) {
          pcVar13[0xc] = '\0';
        }
        else {
          pcVar13[0xc] = pcVar13[0xc] + cVar10 * -4;
        }
        if ((int)(uint)(byte)pcVar13[0xd] < iVar17) {
          pcVar13[0xd] = '\0';
        }
        else {
          pcVar13[0xd] = pcVar13[0xd] + cVar10 * -4;
        }
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_OVR16ShadyOasis__800849bc;
      case 3:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        cVar10 = pcVar13[0xd];
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + '\x03';
        if (pcVar13[0xb] == cVar10) {
          pcVar13[0xd] = cVar10 + -4;
          pcVar13[0xc] = pcVar13[0xc] + -4;
        }
        else {
          pcVar13[0xd] = cVar10 + '\x04';
        }
        cVar10 = pcVar13[0xb];
        pcVar13[0xb] = cVar10 + -4;
        if ((char)(cVar10 + -4) == '\0') goto LAB_OVR16ShadyOasis__80085144;
        goto LAB_OVR16ShadyOasis__800849c4;
      case 4:
        cVar10 = pcVar13[1];
        pcVar13[1] = cVar10 + 1U;
        if ((short)(ushort)(byte)(cVar10 + 1U) < *(short *)(pcVar13 + 0x17)) {
          pcVar13[9] = pcVar13[9] + '\x04';
        }
        sVar9 = *(short *)(pcVar13 + 7);
        *(short *)(pcVar13 + 7) = sVar9 + *(short *)(pcVar13 + 0x1b);
        pcVar13[10] = pcVar13[10] + pcVar13[0x19];
        if (*(short *)(pcVar13 + 0x1d) < (short)(sVar9 + *(short *)(pcVar13 + 0x1b))) {
          cVar10 = pcVar13[9];
          pcVar13[9] = cVar10 - 4U;
          bVar2 = (byte)(cVar10 - 4U) < 9;
LAB_OVR16ShadyOasis__8008513c:
          if (bVar2) goto LAB_OVR16ShadyOasis__80085144;
        }
        break;
      case 6:
        VectorCopy(&local_80,*(Vec3 **)(pcVar13 + 0x17));
        iVar6 = (uint)(byte)pcVar13[1] << 6;
        iVar15 = local_80.z + *(short *)(pcVar13 + 0x1d) * 0x40;
        iVar7 = iVar6;
        if (*(short *)(pcVar13 + 0x1b) < iVar6) {
          iVar7 = (int)*(short *)(pcVar13 + 0x1b);
        }
        iVar5 = cosineLookup(iVar6);
        local_80.x = local_80.x + (iVar7 * iVar5 >> 0xc);
        iVar6 = sineLookup(iVar6);
        local_80.y = local_80.y + (iVar7 * iVar6 >> 0xc);
        local_80.z = *(short *)(pcVar13 + 7) * 4 + 0x40;
        if (iVar15 < local_80.z) goto LAB_OVR16ShadyOasis__80085144;
        VecIntToShort(pVVar16,&local_80);
        pcVar13[1] = pcVar13[1] + '\x01';
        break;
      case 9:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar13[9] = pcVar13[9] + (char)local_38;
        goto LAB_OVR16ShadyOasis__800849bc;
      case 10:
        if (((Spyro.state == Drowning) && (Spyro.health < 0)) ||
           ((Spyro.field168_0x260 != 0 || (to = &local_70, Spyro.iframeTimer == 0))))
        goto LAB_OVR16ShadyOasis__80085144;
        VectorCopy(to,&Spyro.position);
        iVar7 = cosineLookup((int)*(short *)(pcVar13 + 0x17));
        local_70.x = local_70.x + (iVar7 >> 4);
        iVar7 = sineLookup((int)*(short *)(pcVar13 + 0x17));
        local_70.y = local_70.y + (iVar7 >> 4);
        local_70.z = local_70.z + 0x100;
LAB_OVR16ShadyOasis__800847ec:
        VecIntToShort(pVVar16,to);
        sVar9 = *(short *)(pcVar13 + 0x17);
        *(short *)(pcVar13 + 0x17) = sVar9 + 0x40;
        iVar7 = cosineLookup((int)(short)(sVar9 + 0x40) - (int)VectorShort_80067ec8.Z & 0xfff);
        if (iVar7 < 0) {
          iVar7 = -iVar7;
        }
        pcVar13[9] = (char)(iVar7 / 0xaa);
        break;
      case 0xb:
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x15) = *(short *)(pcVar13 + 0x15) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        VectorShortAdd(pVVar16,pVVar16,puVar14 + 0x12);
        pcVar13[9] = pcVar13[9] + (char)local_38;
        pcVar13[0xb] = pcVar13[0xb] + -4;
        cVar10 = pcVar13[0xd];
        pcVar13[10] = pcVar13[10] + cVar3;
        pcVar13[0xd] = cVar10 + -4;
        pcVar13[0xc] = pcVar13[0xc] + -4;
        if ((char)(cVar10 + -4) != '\0') goto LAB_OVR16ShadyOasis__800849c4;
        goto LAB_OVR16ShadyOasis__80085144;
      case 0xc:
        pcVar13[10] = pcVar13[10] + '\b';
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (pcVar13[0xb] != '\0') {
          pcVar13[0xb] = pcVar13[0xb] + -8;
        }
        if (pcVar13[0xc] != '\0') {
          pcVar13[0xc] = pcVar13[0xc] + -8;
        }
        if (pcVar13[0xd] != '\0') {
          pcVar13[0xd] = pcVar13[0xd] + -8;
        }
        uVar8 = *(uint *)(pcVar13 + 0xb);
        goto joined_r0x800848e0;
      case 0xd:
        if ((0x1b < (byte)pcVar13[1]) || (pcVar13[2] == '\0')) goto LAB_OVR16ShadyOasis__80085144;
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        uVar8 = (uint)(byte)pcVar13[1];
        pcVar13[9] = pcVar13[9] + (char)local_38;
        if (uVar8 < 0xd) {
          if (uVar8 < 5) {
            pcVar13[0xb] = -0x80;
            pcVar13[0xc] = -0x80;
            iVar7 = (uint)(byte)pcVar13[1] * -0x20 + 0x80;
            if (iVar7 < 0) {
              iVar7 = 0;
            }
            pcVar13[0xd] = (char)iVar7;
          }
          else {
            pcVar13[0xb] = -0x80;
            pcVar13[0xd] = '\0';
            pcVar13[0xc] = (pcVar13[1] + -4) * -8 + -0x80;
          }
        }
        else {
          iVar7 = (uVar8 - 0xc) * -8 + 0x80;
          if (iVar7 < 0) {
            iVar7 = 0;
          }
          pcVar13[0xb] = (char)iVar7;
          iVar7 = ((byte)pcVar13[1] - 0xc) * -4 + 0x40;
          if (iVar7 < 0) {
            iVar7 = 0;
          }
          pcVar13[0xc] = (char)iVar7;
          pcVar13[0xd] = '\0';
        }
        pcVar13[1] = pcVar13[1] + cVar10;
        break;
      case 0x11:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + (char)local_38;
        if (8 < (byte)pcVar13[1]) {
          pcVar13[0xb] = pcVar13[0xb] + -0x20;
        }
        cVar10 = pcVar13[1];
        pcVar13[1] = cVar10 + 1U;
        bVar2 = (byte)(cVar10 + 1U) < 0xc;
        pcVar13[0xc] = pcVar13[0xc] + -8;
        pcVar13[0xd] = pcVar13[0xd] + -4;
        goto LAB_OVR16ShadyOasis__800849bc;
      case 0x21:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar13[0xb] - local_38;
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + (char)local_38;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        bVar1 = pcVar13[1];
        cVar10 = (char)iVar7;
        pcVar13[0xb] = cVar10;
        pcVar13[0xc] = cVar10;
        pcVar13[0xd] = cVar10;
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        if (((0x1f < ((uint)bVar1 + param_1 & 0xff)) || (pcVar13[2] == '\0')) || (iVar7 == 0))
        goto LAB_OVR16ShadyOasis__80085144;
        break;
      case 0x28:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        if (((uint)bVar1 + param_1 & 0xff) < 0x1e) {
          if ((byte)pcVar13[9] < 100) {
            pcVar13[9] = pcVar13[9] + cVar3;
          }
        }
        else {
          if (4 < (byte)pcVar13[9]) {
            pcVar13[9] = pcVar13[9] - cVar10;
          }
          *(short *)(pcVar13 + 0x17) = (short)(*(short *)(pcVar13 + 0x17) * 7 >> 3);
          *(short *)(pcVar13 + 0x19) = (short)(*(short *)(pcVar13 + 0x19) * 7 >> 3);
          *(short *)(pcVar13 + 0x1b) = (short)(*(short *)(pcVar13 + 0x1b) * 7 >> 3);
        }
        if ((byte)pcVar13[0xd] < 0xb) {
          if (1 < (byte)pcVar13[0xb]) {
            pcVar13[0xb] = pcVar13[0xb] - 1;
          }
          if (1 < (byte)pcVar13[0xc]) {
            pcVar13[0xc] = pcVar13[0xc] - 1;
          }
          if (1 < (byte)pcVar13[0xd]) {
            pcVar13[0xd] = pcVar13[0xd] - 1;
          }
        }
        else {
          cVar10 = (char)local_38;
          pcVar13[0xb] = pcVar13[0xb] - cVar10;
          pcVar13[0xd] = pcVar13[0xd] - cVar10;
          pcVar13[0xc] = pcVar13[0xc] - cVar10;
        }
        if ((0x3b < (byte)pcVar13[1]) && (uVar8 = rand(), (uVar8 & 0xf) == 7)) {
          pcVar13[1] = '\0';
          pcVar13[0xb] = '`';
          pcVar13[0xc] = '`';
          pcVar13[0xd] = '`';
          *puVar14 = 1;
        }
        bVar2 = (byte)pcVar13[1] < 0x79;
        goto LAB_OVR16ShadyOasis__800849bc;
      case 0x2f:
        pOVar12 = *(Object **)(pcVar13 + 0x1b);
        if (((pOVar12->state & 0x80) == 0) && (iVar7 = AdvanceTimer(puVar14 + 2,1), iVar7 == 0)) {
          FUN_80041538(pOVar12,4);
          to = &local_60;
          FUN_80041730(pOVar12,0,to);
          iVar7 = cosineLookup((int)*(short *)(pcVar13 + 0x17));
          local_60.x = local_60.x + (iVar7 >> 4);
          iVar7 = sineLookup((int)*(short *)(pcVar13 + 0x17));
          local_60.y = local_60.y + (iVar7 >> 4);
          local_60.z = local_60.z + 0x100;
          goto LAB_OVR16ShadyOasis__800847ec;
        }
        goto LAB_OVR16ShadyOasis__80085144;
      case 0x3b:
        pcVar13[10] = pcVar13[10] + '\b';
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if ((DAT_80067008 & 1) != 0) {
          *(short *)(pcVar13 + 0x19) = *(short *)(pcVar13 + 0x19) + 1;
        }
        if (pcVar13[0xb] != '\0') {
          pcVar13[0xb] = pcVar13[0xb] + -4;
        }
        if (pcVar13[0xc] != '\0') {
          pcVar13[0xc] = pcVar13[0xc] + -4;
        }
        if (pcVar13[0xd] != '\0') {
          pcVar13[0xd] = pcVar13[0xd] + -4;
        }
        uVar8 = *(uint *)(pcVar13 + 0xb);
joined_r0x800848e0:
        if ((uVar8 & 0xffffff) == 0) goto LAB_OVR16ShadyOasis__80085144;
        goto LAB_OVR16ShadyOasis__800849c4;
      case 0x42:
        iVar7 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar13[1] & 1U) != 0) {
              *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + *(short *)(pcVar13 + 0xf);
              *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + *(short *)(pcVar13 + 0x11);
              *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + *(short *)(pcVar13 + 0x13);
              if ((pcVar13[1] & 2U) != 0) {
                iVar6 = rand();
                *(ushort *)(pcVar13 + 0xf) = *(short *)(pcVar13 + 0xf) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar13 + 0x11) = *(short *)(pcVar13 + 0x11) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar13 + 0x13) = *(short *)(pcVar13 + 0x13) + -1 + ((ushort)iVar6 & 2);
              }
            }
            iVar7 = iVar7 + 1;
            pcVar13[1] = pcVar13[1] + '\x01';
          } while (iVar7 < param_1);
        }
        bVar2 = (byte)pcVar13[1] < 0x18;
LAB_OVR16ShadyOasis__800849bc:
        if (bVar2) {
LAB_OVR16ShadyOasis__800849c4:
          if (pcVar13[2] != '\0') break;
        }
LAB_OVR16ShadyOasis__80085144:
        FUN_80041d20(puVar14);
        break;
      case 0x46:
        cVar10 = pcVar13[1];
        pcVar13[1] = cVar10 + 1U;
        if ((0x1f < (byte)(cVar10 + 1U)) || (pcVar13[2] == '\0'))
        goto LAB_OVR16ShadyOasis__80085144;
        local_50._0_2_ = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        local_50._2_2_ = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_4c = CONCAT22(local_4c._2_2_,sVar9);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + (short)local_50;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + local_50._2_2_;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar9;
        iVar7 = rand();
        local_50._0_2_ = (short)local_50 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_50._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_50 = CONCAT22(sVar9,(short)local_50);
        if ((pcVar13[1] & 1U) != 0) {
          local_4c = CONCAT22(local_4c._2_2_,(short)local_4c + -1);
        }
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + (short)local_50;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar9;
        cVar10 = pcVar13[0xf];
        pcVar13[0xf] = cVar10 - 3U;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + (short)local_4c;
        if ((byte)(cVar10 - 3U) < 0x80) {
          pcVar13[0xf] = -0x80;
        }
        cVar10 = pcVar13[0x10];
        pcVar13[0x10] = cVar10 - 4U;
        if ((byte)(cVar10 - 4U) < 0x60) {
          pcVar13[0x10] = '`';
        }
        cVar10 = pcVar13[0x13];
        pcVar13[0x11] = '\0';
        pcVar13[0x13] = cVar10 - 3U;
        if ((byte)(cVar10 - 3U) < 0xc0) {
          pcVar13[0x13] = -0x40;
        }
        cVar10 = pcVar13[0x14];
        pcVar13[0x14] = cVar10 - 4U;
        if ((byte)(cVar10 - 4U) < 0x80) {
          pcVar13[0x14] = -0x80;
        }
        cVar10 = pcVar13[0x15];
        pcVar13[0x15] = cVar10 - 6U;
        if ((byte)(cVar10 - 6U) < 0x20) {
          pcVar13[0x15] = ' ';
        }
        break;
      case 0x47:
        cVar10 = pcVar13[1];
        pcVar13[1] = cVar10 + 1U;
        if ((0x1f < (byte)(cVar10 + 1U)) || (pcVar13[2] == '\0'))
        goto LAB_OVR16ShadyOasis__80085144;
        local_48 = (int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3);
        local_44 = (int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5);
        local_40 = (int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7);
        uVar8 = rand();
        local_48 = local_48 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_44 = local_44 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_40 = local_40 + -1 + (uVar8 & 2);
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + (short)local_48;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + (short)local_44;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + (short)local_40;
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 9) - (short)local_48;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 0xb) - (short)local_44;
        pcVar13[0x13] = pcVar13[0x13] + -2;
        pcVar13[0x15] = pcVar13[0x15] + -4;
        pcVar13[0x14] = pcVar13[0x14] + -2;
        pcVar13[0x10] = pcVar13[0x10] + -3;
        pcVar13[0xf] = pcVar13[0xf] + -3;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 0xd) - (short)local_40;
        pcVar13[0x11] = pcVar13[0x11] + -3;
        break;
      case 0x48:
        cVar10 = pcVar13[1];
        pcVar13[1] = cVar10 + 1U;
        if ((0x37 < (byte)(cVar10 + 1U)) || (pcVar13[2] == '\0'))
        goto LAB_OVR16ShadyOasis__80085144;
        local_50 = (int)*(short *)(pcVar13 + 3) - (int)*(short *)(pcVar13 + 9) >> 1;
        local_4c = (int)*(short *)(pcVar13 + 5) - (int)*(short *)(pcVar13 + 0xb) >> 1;
        local_48 = (int)*(short *)(pcVar13 + 7) - (int)*(short *)(pcVar13 + 0xd) >> 1;
        uVar8 = rand();
        local_50 = local_50 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_4c = local_4c + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_48 = local_48 + -1 + (uVar8 & 2);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + (short)local_50;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + (short)local_4c;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + (short)local_48;
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 3) + (short)local_50 * -2;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 5) + (short)local_4c * -2;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 7) + (short)local_48 * -2;
        break;
      case 0x4a:
        cVar10 = pcVar13[1];
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + *(short *)(pcVar13 + 0xf);
        pcVar13[1] = cVar10 + 1U;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + *(short *)(pcVar13 + 0x11);
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + *(short *)(pcVar13 + 0x13);
        pcVar13[0xc] = pcVar13[0xc] + -0xf;
        if ((pcVar13[2] == '\0') || (0x10 < (byte)(cVar10 + 1U)))
        goto LAB_OVR16ShadyOasis__80085144;
        break;
      case 0x4e:
        cVar10 = pcVar13[1];
        pcVar13[1] = cVar10 + 1U;
        if ((0x27 < (byte)(cVar10 + 1U)) || (pcVar13[2] == '\0'))
        goto LAB_OVR16ShadyOasis__80085144;
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + *(short *)(pcVar13 + 0xf);
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + *(short *)(pcVar13 + 0x11);
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + *(short *)(pcVar13 + 0x13);
        iVar7 = rand();
        *(ushort *)(pcVar13 + 0xf) = *(short *)(pcVar13 + 0xf) + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        *(ushort *)(pcVar13 + 0x11) = *(short *)(pcVar13 + 0x11) + -1 + ((ushort)iVar7 & 2);
        uVar8 = rand();
        iVar7 = (*(ushort *)(pcVar13 + 0x13) - 1) + (uVar8 & 2);
        *(short *)(pcVar13 + 0x13) = (short)iVar7;
        if (2 < iVar7 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar13 + 0x13) = 2;
        }
        if (*(short *)(pcVar13 + 0x13) < -4) {
          *(undefined2 *)(pcVar13 + 0x13) = 0xfffc;
        }
        pcVar13[0xb] = pcVar13[0xb] + -2;
        pcVar13[0xd] = pcVar13[0xd] + -1;
        pcVar13[0xc] = pcVar13[0xc] + -2;
        break;
      case 0x4f:
        sVar11 = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1);
        local_50 = CONCAT22(sVar9,sVar11);
        sVar4 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_4c = CONCAT22(local_4c._2_2_,sVar4);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + sVar11;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + sVar9;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar4;
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + sVar11;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar9;
        cVar10 = pcVar13[1];
        pcVar13[1] = cVar10 + 1U;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + sVar4;
        if ((0x17 < (byte)(cVar10 + 1U)) || (pcVar13[2] == '\0'))
        goto LAB_OVR16ShadyOasis__80085144;
        pcVar13[0xf] = pcVar13[0xf] + -3;
        pcVar13[0x13] = pcVar13[0x13] + -3;
        pcVar13[0x10] = pcVar13[0x10] + -4;
        pcVar13[0x14] = pcVar13[0x14] + -4;
        if (5 < (byte)pcVar13[0x15]) {
          pcVar13[0x15] = pcVar13[0x15] - 6;
        }
        break;
      case 0x52:
        sVar9 = *(short *)(pcVar13 + 0xd) + 0x30;
        *(short *)(pcVar13 + 0xd) = sVar9;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + 0x30;
        if (-1 < sVar9) {
          bVar2 = *(int *)(pcVar13 + 0x17) < (int)sVar9;
          goto LAB_OVR16ShadyOasis__8008513c;
        }
        goto LAB_OVR16ShadyOasis__80085144;
      }
LAB_OVR16ShadyOasis__80085150:
      pcVar13 = pcVar13 + 0x20;
      puVar18 = puVar18 + 0x20;
      pVVar16 = (VectorShort *)&pVVar16[5].Y;
      cVar10 = *pcVar13;
      puVar14 = puVar14 + 0x20;
    } while (cVar10 != -1);
  }
  return puVar14;
}



undefined *
FUN_OVR16ShadyOasis__800851a8(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int *piVar5;
  undefined *puVar6;
  undefined uVar7;
  int iVar8;
  Vec3 local_e8;
  Vec3 local_d8;
  Vec3 local_c8;
  Vec3 local_b8;
  Vec3 local_a8;
  Vec3 local_98;
  undefined local_88;
  undefined local_87;
  undefined local_86;
  Mat33 MStack_80;
  Vec3 local_60;
  Vec3 local_50;
  int local_40;
  int local_38;
  
  puVar6 = (undefined *)0x0;
  local_38 = 0;
  local_40 = param_1;
  if (0 < param_1) {
    do {
      uVar7 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar6 + 0x18),param_4);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x18;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0xc] = 0x80;
        puVar6[0xd] = 0x80;
        puVar6[0xe] = 0x80;
        goto LAB_OVR16ShadyOasis__80085bfc;
      case 1:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar6 + 0x18),param_4);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x10;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        uVar7 = 0x60;
        puVar6[0xc] = 0x60;
        puVar6[0xd] = 0x60;
        goto LAB_OVR16ShadyOasis__80085bf8;
      case 2:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        uVar3 = rand();
        local_e8.x = (uVar3 & 0x3f) - 0x20;
        uVar3 = rand();
        local_e8.y = (uVar3 & 0x3f) - 0x20;
        local_e8.z = 0x10;
        VecIntToShort((VectorShort *)(puVar6 + 0x18),&local_e8);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x20;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0xc] = 0x80;
        puVar6[0xd] = 0x80;
        puVar6[0xe] = 0x80;
        goto LAB_OVR16ShadyOasis__800853c8;
      case 3:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar6 + 0x18),param_4);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x18;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0xd] = 0x40;
        puVar6[0xc] = 0x80;
        puVar6[0xe] = 0;
LAB_OVR16ShadyOasis__800853c8:
        puVar6[0xf] = 0x2e;
        puVar6[0x11] = 2;
        puVar6[0x10] = 0;
        break;
      case 4:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        puVar6[10] = 8;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0xc] = 0x80;
        puVar6[0xd] = 0x80;
        puVar6[0xe] = 0x80;
        puVar6[0xf] = 0x2e;
        puVar6[0x11] = 2;
        puVar6[0x10] = 0;
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x18) = ((ushort)iVar2 & 3) + 4;
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x1a) = ((ushort)iVar2 & 3) + 2;
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x1c) = ((ushort)iVar2 & 7) + 3;
        *(short *)(puVar6 + 0x1e) = (short)((int)param_4 >> 2);
        break;
      case 6:
        piVar5 = (int *)param_3->x;
        puVar6 = (undefined *)FUN_80041c50(3);
        *puVar6 = uVar7;
        iVar2 = rand();
        puVar6[2] = (byte)iVar2 & 0xf;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3 + 1);
        iVar2 = rand();
        *(ushort *)(puVar6 + 4) = *(short *)(puVar6 + 4) + -0x3f + ((ushort)iVar2 & 0x7e);
        iVar2 = rand();
        *(Vec3 **)(puVar6 + 0x18) = param_3 + 1;
        *(ushort *)(puVar6 + 6) = *(short *)(puVar6 + 6) + -0x3f + ((ushort)iVar2 & 0x7e);
        *(short *)(puVar6 + 0x1c) = (short)piVar5[1];
        iVar2 = *piVar5;
        puVar6[10] = 0x20;
        puVar6[0xb] = 0x14;
        puVar6[0xc] = 0x80;
        puVar6[0xd] = 0x80;
        puVar6[0xe] = 0x80;
        puVar6[0xf] = 0x2c;
        puVar6[0x11] = 0;
        puVar6[0x10] = 0;
        *(short *)(puVar6 + 0x1e) = (short)(iVar2 >> 6);
        break;
      case 9:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        VectorCopy(&local_d8,&Spyro.position);
        uVar3 = rand();
        local_d8.x = local_d8.x + -0x3f + (uVar3 & 0x7e);
        uVar3 = rand();
        local_d8.y = local_d8.y + -0x3f + (uVar3 & 0x7e);
        VecIntToShort((VectorShort *)(puVar6 + 4),&local_d8);
        VectorCopy(&local_d8,&Spyro.physicsVelocity);
        VectorShiftRight(&local_d8,6);
        VecIntToShort((VectorShort *)(puVar6 + 0x18),&local_d8);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x18;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0xc] = 0x80;
        puVar6[0xd] = 0x80;
        puVar6[0xe] = 0x80;
        goto LAB_OVR16ShadyOasis__800858bc;
      case 10:
        puVar6 = (undefined *)FUN_80041c50(3);
        *puVar6 = uVar7;
        iVar2 = rand();
        puVar6[2] = (byte)iVar2 & 0x1f;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),&Spyro.position);
        puVar6[10] = 0x18;
        puVar6[0xb] = 0xf;
        iVar2 = local_38 * 4;
        iVar4 = (local_40 - local_38) * 0x1000;
        iVar8 = (int)((ulonglong)((longlong)iVar4 * 0x66666667) >> 0x20);
        puVar6[0xc] = (&DAT_80064654)[iVar2];
        puVar6[0xd] = (&DAT_80064655)[iVar2];
        uVar7 = (&DAT_80064656)[iVar2];
        puVar6[0xf] = 0x2c;
        puVar6[0x11] = 4;
        puVar6[0x10] = 0;
        puVar6[0xe] = uVar7;
        goto LAB_OVR16ShadyOasis__80085cc4;
      case 0xc:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[0x11] = 4;
        iVar2 = local_38 * 0xc;
        puVar6[3] = 1;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar2),&local_c8);
        VectorAdd(&local_c8,&local_c8,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar3 = rand();
          local_c8.x = (local_c8.x + 0x100) - (uVar3 & 0x1ff);
          uVar3 = rand();
          local_c8.y = (local_c8.y + 0x100) - (uVar3 & 0x1ff);
          uVar3 = rand();
          local_c8.z = (local_c8.z + 0x100) - (uVar3 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar3 = rand();
          local_c8.x = (local_c8.x + 0x80) - (uVar3 & 0xff);
          uVar3 = rand();
          local_c8.y = (local_c8.y + 0x80) - (uVar3 & 0xff);
          uVar3 = rand();
          local_c8.z = (local_c8.z + 0x80) - (uVar3 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar6 + 4),&local_c8);
        *(undefined4 *)(puVar6 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar4 = rand();
        puVar6[10] = ((byte)iVar4 & 7) + 0x20;
        iVar4 = rand();
        puVar6[0xb] = (char)iVar4;
        puVar6[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar6 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar2));
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x18) = (*(short *)(puVar6 + 0x18) >> 2) + -4 + ((ushort)iVar2 & 7);
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x1a) = (*(short *)(puVar6 + 0x1a) >> 2) + -4 + ((ushort)iVar2 & 7);
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x1c) = (*(short *)(puVar6 + 0x1c) >> 2) + -4 + ((ushort)iVar2 & 7);
        break;
      case 0xd:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar6 + 0x18),param_4);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x18;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0xc] = 0xff;
        puVar6[0xd] = 0xff;
        puVar6[0xe] = 0;
LAB_OVR16ShadyOasis__800858bc:
        puVar6[0xf] = 0x2e;
        puVar6[0x11] = 4;
        puVar6[0x10] = 0;
        break;
      case 0x11:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar6 + 0x18),param_3 + 1);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x18;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0xc] = (char)param_4->x;
        puVar6[0xd] = (char)param_4->y;
        iVar2 = param_4->z;
        puVar6[0xf] = 0x2e;
        puVar6[0x11] = 4;
        puVar6[0x10] = 0;
        puVar6[0xe] = (char)iVar2;
        break;
      case 0x21:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_a8,&Spyro.physicsVelocity);
          VectorShiftRight(&local_a8,6);
          VectorCopy(&local_b8,&Spyro.position);
          local_b8.z = local_b8.z + -0x164;
          uVar3 = rand();
          local_b8.x = (local_b8.x + 0x80) - (uVar3 & 0xff);
          uVar3 = rand();
          uVar7 = 0x30;
          local_b8.y = (local_b8.y + 0x80) - (uVar3 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_b8.x = 0x164;
          local_b8.y = 0;
          local_b8.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_b8,&local_b8);
          VectorAdd(&local_b8,&local_b8,&Spyro.position);
          uVar7 = 0x40;
          uVar3 = rand();
          local_a8.x = -(uVar3 & 7);
          uVar3 = rand();
          local_a8.y = ((int)((uint)(ushort)cosineLookupTable[local_38 * 0x20] << 0x10) >> 0x17) -
                       ((uVar3 & 0xf) - 8);
          local_a8.z = (int)((uint)(ushort)sineLookupTable[local_38 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_a8,&local_a8);
        }
        else {
          iVar2 = 5;
          if (param_4 == (Vec3 *)0x2) {
            iVar4 = local_38 << 5;
            iVar2 = 6;
            uVar7 = 0x30;
          }
          else {
            uVar7 = 0x40;
            iVar4 = local_38 * 0x20 + 0x10;
          }
          VectorCopy(&local_b8,&Spyro.position);
          local_b8.x = local_b8.x + ((int)cosineLookupTable[iVar4] >> iVar2);
          local_b8.z = local_b8.z + -0x164;
          local_b8.y = local_b8.y + ((int)sineLookupTable[iVar4] >> iVar2);
          local_a8.x = (int)cosineLookupTable[iVar4] >> iVar2 + 1;
          local_a8.z = 0;
          local_a8.y = (int)sineLookupTable[iVar4] >> iVar2 + 1;
        }
        VecIntToShort((VectorShort *)(puVar6 + 4),&local_b8);
        VecIntToShort((VectorShort *)(puVar6 + 0x18),&local_a8);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x10;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0xc] = uVar7;
        puVar6[0xd] = uVar7;
        puVar6[0xe] = uVar7;
        goto LAB_OVR16ShadyOasis__80085bfc;
      case 0x28:
        puVar6 = (undefined *)FUN_80041c50(2);
        *puVar6 = uVar7;
        puVar6[2] = 0;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar6 + 0x18),param_4);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x10;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0xd] = 0x48;
        uVar7 = 0x30;
        puVar6[0xc] = 0x80;
LAB_OVR16ShadyOasis__80085bf8:
        puVar6[0xe] = uVar7;
LAB_OVR16ShadyOasis__80085bfc:
        puVar6[0xf] = 0x2e;
        puVar6[0x11] = 4;
        puVar6[0x10] = 0;
        break;
      case 0x2f:
        puVar6 = (undefined *)FUN_80041c50(3);
        *puVar6 = uVar7;
        puVar6[2] = (char)param_4;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3 + 1);
        puVar6[10] = 0x18;
        puVar6[0xb] = 0xf;
        *(short *)(puVar6 + 8) = *(short *)(puVar6 + 8) + 0x700;
        iVar2 = local_38 * 4;
        iVar4 = (local_40 - local_38) * 0x1000;
        iVar8 = (int)((ulonglong)((longlong)iVar4 * 0x66666667) >> 0x20);
        puVar6[0xc] = (&DAT_80064654)[iVar2];
        puVar6[0xd] = (&DAT_80064655)[iVar2];
        uVar7 = (&DAT_80064656)[iVar2];
        puVar6[0xf] = 0x2c;
        puVar6[0x11] = 4;
        puVar6[0x10] = 0;
        *(Vec3 **)(puVar6 + 0x1c) = param_3;
        puVar6[0xe] = uVar7;
LAB_OVR16ShadyOasis__80085cc4:
        *(short *)(puVar6 + 0x18) = (short)(iVar8 >> 1) - (short)(iVar4 >> 0x1f);
        break;
      case 0x3b:
        puVar6 = (undefined *)FUN_80041c50(5);
        puVar6[3] = 1;
        *puVar6 = uVar7;
        puVar6[0x11] = 0x10;
        puVar6[1] = puVar6[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        iVar2 = rand();
        *(ushort *)(puVar6 + 4) = (*(short *)(puVar6 + 4) + 0x10) - ((ushort)iVar2 & 0x1f);
        iVar2 = rand();
        *(ushort *)(puVar6 + 6) = (*(short *)(puVar6 + 6) + 8) - ((ushort)iVar2 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar1 = 0x2e0080c0;
        }
        else {
          uVar1 = 0x2e00c000;
        }
        *(undefined4 *)(puVar6 + 0xc) = uVar1;
        iVar2 = rand();
        puVar6[10] = ((byte)iVar2 & 0xf) + 0x14;
        iVar2 = rand();
        puVar6[0xb] = (char)iVar2;
        puVar6[0x10] = 0;
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x18) = ((ushort)iVar2 & 7) - 4;
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x1a) = -2 - ((ushort)iVar2 & 7);
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x1c) = ((ushort)iVar2 & 0xf) - 8;
        break;
      case 0x42:
        puVar6 = (undefined *)FUN_80041c50(0);
        *puVar6 = uVar7;
        iVar2 = rand();
        puVar6[2] = (byte)iVar2 & 0xf;
        puVar6[3] = 1;
        iVar2 = rand();
        *(ushort *)(puVar6 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar2 & 0xf) + -8;
        iVar2 = rand();
        *(ushort *)(puVar6 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar2 & 0xf) + -8;
        iVar2 = rand();
        iVar4 = param_3->z;
        *(undefined2 *)(puVar6 + 0x10) = 0;
        *(undefined2 *)(puVar6 + 0x12) = 0;
        *(undefined2 *)(puVar6 + 0x14) = 0;
        puVar6[10] = 2;
        *(ushort *)(puVar6 + 8) = (short)(iVar4 >> 2) + ((ushort)iVar2 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar6[0xc] = 0xff;
          goto LAB_OVR16ShadyOasis__80085eb4;
        }
        uVar3 = rand();
        switch(uVar3 & 7) {
        case 0:
          puVar6[0xc] = 0xff;
          puVar6[0xd] = 0;
          puVar6[0xe] = 0;
          break;
        case 1:
          puVar6[0xc] = 0xff;
          goto LAB_OVR16ShadyOasis__80085eb4;
        case 2:
          puVar6[0xc] = 0;
LAB_OVR16ShadyOasis__80085eb4:
          puVar6[0xd] = 0xff;
          puVar6[0xe] = 0;
          break;
        case 3:
          puVar6[0xc] = 0;
          puVar6[0xd] = 0xff;
          goto LAB_OVR16ShadyOasis__80085efc;
        case 4:
          puVar6[0xc] = 0;
          puVar6[0xd] = 0;
          goto LAB_OVR16ShadyOasis__80085efc;
        case 5:
          puVar6[0xc] = 0xff;
          puVar6[0xd] = 0;
          goto LAB_OVR16ShadyOasis__80085efc;
        case 6:
          puVar6[0xc] = 0xff;
          puVar6[0xd] = 0x80;
          puVar6[0xe] = 0;
          break;
        case 7:
          puVar6[0xc] = 0;
          puVar6[0xd] = 0x80;
LAB_OVR16ShadyOasis__80085efc:
          puVar6[0xe] = 0xff;
        }
        puVar6[0xf] = 0x40;
        break;
      case 0x46:
        puVar6 = (undefined *)FUN_80041c50(1);
        *puVar6 = uVar7;
        iVar2 = rand();
        puVar6[2] = (byte)iVar2 & 0xf;
        puVar6[3] = 1;
        local_88 = 0;
        iVar2 = rand();
        local_87 = (undefined)iVar2;
        iVar2 = rand();
        local_86 = (undefined)iVar2;
        BuildRotationMatrix(&local_88,&MStack_80,(Mat33 *)0x0);
        local_98.y = 0;
        local_98.z = 0;
        local_98.x = (int)param_4;
        MatrixMultVector(&MStack_80,&local_98,&local_98);
        *(short *)(puVar6 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar6 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar6 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar6 + 10) = *(short *)(puVar6 + 4) + (short)local_98.x * 2;
        *(short *)(puVar6 + 0xc) = *(short *)(puVar6 + 6) + (short)local_98.y * 2;
        puVar6[0x17] = 2;
        puVar6[0x10] = 0xe0;
        puVar6[0x11] = 0xc0;
        puVar6[0x13] = 0x50;
        puVar6[0x12] = 0;
        puVar6[0x14] = 0xff;
        puVar6[0x15] = 0xff;
        puVar6[0x16] = 0x80;
        *(short *)(puVar6 + 0xe) = *(short *)(puVar6 + 8) + (short)local_98.z * 2;
        break;
      case 0x47:
        puVar6 = (undefined *)FUN_80041c50(1);
        *puVar6 = uVar7;
        iVar2 = rand();
        puVar6[2] = (byte)iVar2 & 7;
        puVar6[3] = 1;
        uVar3 = rand();
        local_60.x = (int)(((uVar3 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar3 = rand();
        local_60.y = (int)(((uVar3 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar3 = rand();
        local_60.z = (int)(((uVar3 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar6 + 4) = (short)(param_3->x >> 2) + (short)local_60.x * 4;
        *(short *)(puVar6 + 6) = (short)(param_3->y >> 2) + (short)local_60.y * 4;
        *(short *)(puVar6 + 8) = (short)(param_3->z >> 2) + (short)local_60.z * 4;
        *(short *)(puVar6 + 10) = *(short *)(puVar6 + 4) + (short)local_60.x;
        *(short *)(puVar6 + 0xc) = *(short *)(puVar6 + 6) + (short)local_60.y;
        puVar6[0x17] = 2;
        puVar6[0x10] = 0xe0;
        puVar6[0x11] = 0xe0;
        puVar6[0x12] = 0x60;
        puVar6[0x14] = 0xff;
        puVar6[0x15] = 0xff;
        puVar6[0x16] = 0xff;
        puVar6[0x13] = 0x50;
        *(short *)(puVar6 + 0xe) = *(short *)(puVar6 + 8) + (short)local_60.z;
        break;
      case 0x4a:
        puVar6 = (undefined *)FUN_80041c50(0);
        *puVar6 = uVar7;
        iVar2 = rand();
        puVar6[2] = (byte)iVar2 & 0xf;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar6 + 0x10),param_4);
        iVar2 = rand();
        puVar6[0xc] = (byte)iVar2 | 0xc0;
        iVar2 = rand();
        puVar6[0xd] = ((byte)iVar2 & 0x3f) + 0x80;
        puVar6[0xe] = 0;
        puVar6[0xf] = 0x40;
        puVar6[10] = 4;
        break;
      case 0x4e:
        puVar6 = (undefined *)FUN_80041c50(0);
        *puVar6 = uVar7;
        iVar2 = rand();
        puVar6[2] = (byte)iVar2 & 0x1f;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 4),param_3);
        iVar2 = rand();
        *(ushort *)(puVar6 + 4) = *(short *)(puVar6 + 4) + -0x20 + ((ushort)iVar2 & 0x3f);
        iVar2 = rand();
        *(ushort *)(puVar6 + 6) = *(short *)(puVar6 + 6) + -0x20 + ((ushort)iVar2 & 0x3f);
        iVar2 = rand();
        *(ushort *)(puVar6 + 8) = *(short *)(puVar6 + 8) + -0x20 + ((ushort)iVar2 & 0x3f);
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x10) = ((ushort)iVar2 & 2) - 1;
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x12) = ((ushort)iVar2 & 2) - 1;
        iVar2 = rand();
        *(ushort *)(puVar6 + 0x14) = -((ushort)iVar2 & 1);
        iVar2 = rand();
        puVar6[0xc] = (byte)iVar2 | 0x80;
        uVar3 = rand();
        uVar3 = (uVar3 & 0x7f) + 0x60;
        puVar6[0xd] = (char)uVar3;
        if ((byte)puVar6[0xc] < uVar3) {
          puVar6[0xd] = puVar6[0xc];
        }
        iVar2 = rand();
        puVar6[0xe] = ((byte)iVar2 & 0x3f) + 0x40;
        puVar6[0xf] = 0x40;
        puVar6[10] = 2;
        break;
      case 0x4f:
        puVar6 = (undefined *)FUN_80041c50(1);
        *puVar6 = uVar7;
        iVar2 = rand();
        puVar6[2] = (byte)iVar2 & 0xf;
        puVar6[3] = 1;
        VecIntToShort((VectorShort *)(puVar6 + 10),param_3);
        VectorAdd(&local_60,param_3,param_4);
        uVar3 = rand();
        local_60.x = local_60.x + -0x20 + (uVar3 & 0x3f);
        uVar3 = rand();
        local_60.y = local_60.y + -0x20 + (uVar3 & 0x3f);
        uVar3 = rand();
        local_60.z = local_60.z + -0x40 + (uVar3 & 0x7f);
        VecIntToShort((VectorShort *)(puVar6 + 4),&local_60);
        puVar6[0x17] = 2;
        iVar2 = rand();
        puVar6[0x10] = (byte)iVar2 | 0xc0;
        iVar2 = rand();
        puVar6[0x11] = ((byte)iVar2 & 0x3f) + 0xa0;
        puVar6[0x12] = 0;
        iVar2 = rand();
        puVar6[0x14] = (byte)iVar2 | 0xe0;
        iVar2 = rand();
        puVar6[0x15] = (byte)iVar2 | 0xe0;
        puVar6[0x16] = 0x80;
        puVar6[0x13] = 0x50;
        break;
      case 0x52:
        piVar5 = (int *)param_3->x;
        puVar6 = (undefined *)FUN_80041c50(1);
        *puVar6 = uVar7;
        iVar2 = rand();
        puVar6[2] = (byte)iVar2 & 0xf;
        puVar6[3] = 1;
        uVar3 = rand();
        iVar2 = randomRangeGen(piVar5[1] >> 1);
        local_50.x = cosineLookupTable[uVar3 & 0xff] * iVar2 >> 0xc;
        local_50.z = 0;
        local_50.y = sineLookupTable[uVar3 & 0xff] * iVar2 >> 0xc;
        VectorAdd(&local_50,&local_50,param_3 + 1);
        VecIntToShort((VectorShort *)(puVar6 + 4),&local_50);
        *(undefined2 *)(puVar6 + 10) = *(undefined2 *)(puVar6 + 4);
        *(undefined2 *)(puVar6 + 0xc) = *(undefined2 *)(puVar6 + 6);
        *(short *)(puVar6 + 0xe) = *(short *)(puVar6 + 8) + 0x60;
        iVar2 = param_3[1].z;
        iVar4 = *piVar5;
        puVar6[0x10] = 0x70;
        puVar6[0x11] = 0x70;
        puVar6[0x12] = 0xe0;
        puVar6[0x14] = 0xe0;
        puVar6[0x15] = 0xe0;
        puVar6[0x16] = 0xff;
        puVar6[0x13] = 0x50;
        puVar6[0x17] = 0;
        *(int *)(puVar6 + 0x18) = iVar2 + iVar4 >> 2;
      }
      local_38 = local_38 + 1;
    } while (local_38 < local_40);
  }
  return puVar6;
}



void FUN_OVR18FractureHills__8006dc48(int param_1)

{
  byte bVar1;
  bool bVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  undefined4 uVar6;
  Vec3 *vector;
  Vec3 local_90;
  Vec3 VStack_80;
  int local_70 [2];
  Vec3 local_68;
  Vec3 local_58;
  Vec3 local_48;
  int local_38;
  undefined4 local_34;
  undefined4 local_30;
  Vec3 local_28;
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  param_1 = Spyro.field35_0x5c + param_1;
  switch(Spyro.state) {
  case Whirlwind:
    iVar5 = Spyro.position.z - Spyro.field82_0x14c;
    if (iVar5 < 0x400) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x80;
      if (0x12c0 < Spyro.trueVelocity.z) {
        Spyro.trueVelocity.z = 0x12c0;
      }
      Spyro.rotation.Yaw = (iVar5 * iVar5 >> 0xb) + Spyro.field83_0x150;
      VectorCopy(&local_90,(Vec3 *)(Spyro.field153_0x218 + 0xc));
      VectorSubtract(&local_90,&local_90,&Spyro.position);
      local_90.z = 0;
      iVar5 = VectorLength(&local_90,0);
      if (0x400 < iVar5) {
        uVar6 = 0x400;
        goto LAB_OVR18FractureHills__8006dff0;
      }
    }
    else {
      iVar4 = Spyro.field84_0x154 - Spyro.position.z;
      if (Spyro.position.z - Spyro.field84_0x154 < -0x400) {
        if (Spyro.airVelocityFlag == NORMAL) {
          Spyro.airVelocityFlag = FALLING;
          Spyro.field83_0x150 = Spyro.field83_0x150 + 0x200;
        }
        Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x80;
        if (0x12c0 < Spyro.trueVelocity.z) {
          Spyro.trueVelocity.z = 0x12c0;
        }
        iVar4 = Spyro.field85_0x158 * (iVar5 + -0x400);
        if (Spyro.field86_0x15c == 0) {
          trap(0x1c00);
        }
        if ((Spyro.field86_0x15c == -1) && (iVar4 == -0x80000000)) {
          trap(0x1800);
        }
        Spyro.rotation.Yaw =
             Spyro.field83_0x150 + iVar4 / Spyro.field86_0x15c + ((iVar5 + -0x400) * 0x400 >> 10) &
             0xfff;
        VectorCopy(&local_90,(Vec3 *)(Spyro.field153_0x218 + 0xc));
        VectorSubtract(&local_90,&local_90,&Spyro.position);
        local_90.z = 0;
        iVar5 = VectorLength(&local_90,0);
        if (0x400 < iVar5) {
          uVar6 = 0x400;
LAB_OVR18FractureHills__8006dff0:
          VectorScale(&local_90,iVar5,uVar6);
        }
      }
      else {
        Spyro.trueVelocity.z = iVar4 * 0x12c0 >> 10;
        bVar1 = *(byte *)(Spyro.field153_0x218 + 0x46);
        local_90.x = (Spyro.field87_0x160 + 0x400) * (int)cosineLookupTable[bVar1] >> 0xc;
        local_90.y = (Spyro.field87_0x160 + 0x400) *
                     (int)sineLookupTable[*(byte *)(Spyro.field153_0x218 + 0x46)] >> 0xc;
        VectorAdd(&local_90,&local_90,(Vec3 *)(Spyro.field153_0x218 + 0xc));
        Spyro.rotation.Yaw = (uint)bVar1 * 0x10 - (iVar4 * iVar4 >> 0xb);
        VectorSubtract(&local_90,&local_90,&Spyro.position);
        local_90.z = 0;
        iVar5 = VectorLength(&local_90,0);
        if (0x800 < iVar5) {
          uVar6 = 0x800;
          goto LAB_OVR18FractureHills__8006dff0;
        }
      }
    }
    Spyro.trueVelocity.x = local_90.x;
    Spyro.trueVelocity.y = local_90.y;
    break;
  case IdleLook:
  case IdleSit:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    if (cameraState != Look) {
      FUN_8002b36c(0x1200);
      FUN_8002bc68();
      FUN_8002bb24(0x5a,0x10);
    }
    break;
  case SuperchargeAscending:
    FUN_8002b4e4(local_70,1);
    Spyro.maybeTurnSpeed = local_70[0] >> 1;
    if (Spyro.maybeTurnSpeed < -0x19) {
      Spyro.maybeTurnSpeed = -0x19;
    }
    if (0x19 < Spyro.maybeTurnSpeed) {
      Spyro.maybeTurnSpeed = 0x19;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    FUN_8002bd70(0x240,0x180);
    iVar5 = cosineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.x = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    iVar5 = sineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.z = Spyro.trueVelocity.z;
    Spyro.field42_0x88.y = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    FUN_8002c038();
    Spyro.field82_0x14c = Spyro.field82_0x14c + 0xc;
    if (0xc0 < Spyro.field82_0x14c) {
      Spyro.field82_0x14c = 0xc0;
    }
    Spyro.trueVelocity.z = Spyro.trueVelocity.z - Spyro.field82_0x14c;
    goto LAB_OVR18FractureHills__8006e220;
  case HurtSquash:
    if (Spyro.airTime == 0) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0x600;
      if (Spyro.trueVelocity.z < -0x2300) {
        Spyro.trueVelocity.z = -0x2300;
      }
      VectorCopy(&Spyro.field42_0x88,&Spyro.trueVelocity);
    }
    break;
  case HurtBurn:
    FUN_8002b36c(0xc80);
    FUN_8002bb24(0x28,8);
    FUN_8002bd70(0x140,0xc0);
    iVar5 = cosineLookup(Spyro.maybeTargetYaw);
    local_68.x = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    iVar5 = sineLookup(Spyro.maybeTargetYaw);
    local_68.y = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    VectorSubtract(&local_68,&local_68,&Spyro.trueVelocity);
    local_68.z = 0;
    iVar5 = VectorLength(&local_68,0);
    if (0x280 < iVar5) {
      VectorScale(&local_68,iVar5,0x280);
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_68);
    FUN_8002c038();
    if (param_1 < 0xd) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x17;
    }
    else {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
    }
    iVar5 = 0;
    if (DAT_800670fc != (code *)0x0) {
      do {
        uVar3 = rand();
        if (param_1 * 5 < (int)(uVar3 & 0xff)) {
          iVar4 = RandomRangeGen(0,0xc);
          uVar3 = Spyro.angleAsByte.yaw + 0x80 + iVar4 & 0xff;
          local_58.x = cosineLookupTable[uVar3] * 5 >> 10;
          local_58.z = 0xe;
          local_48.x = -300;
          local_48.y = 0;
          local_48.z = -200;
          local_58.y = sineLookupTable[uVar3] * 5 >> 10;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&local_48);
          iVar4 = RandomRangeGen(0,0x50);
          local_48.x = local_48.x + iVar4;
          iVar4 = RandomRangeGen(0,0x50);
          local_48.y = local_48.y + iVar4;
          iVar4 = RandomRangeGen(0,0x50);
          local_48.z = local_48.z + iVar4;
          VectorAdd(&local_48,&local_48,&Spyro.position);
          iVar4 = (*DAT_800670fc)(1,0xd,&local_48,&local_58);
          *(undefined *)(iVar4 + 2) = 8;
          *(undefined *)(iVar4 + 10) = 0x20;
        }
        iVar5 = iVar5 + 1;
      } while (iVar5 < 2);
    }
    break;
  case HurtPitchSpin:
    vector = &VStack_80;
    VectorClear(vector);
    VectorSubtract(vector,vector,&Spyro.trueVelocity);
    if (Spyro.airTime == 0) {
      iVar5 = VectorLength(vector,1);
      if (0x100 < iVar5) {
        VectorScale(vector,iVar5,0x100);
      }
      VectorAdd(&Spyro.trueVelocity,&Spyro.trueVelocity,vector);
      vector = &Spyro.field56_0xf0;
    }
    else {
      VStack_80.z = 0;
      iVar5 = VectorLength(vector,0);
      if (0x40 < iVar5) {
        VectorScale(vector,iVar5,0x40);
      }
      VStack_80.z = -0xc0;
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,vector);
    VectorCopy(&Spyro.trueVelocity,&Spyro.trueVelocity);
LAB_OVR18FractureHills__8006e220:
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    break;
  case DeathSquash:
  case DeathBurn:
    if (Spyro.airTime == 0) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      VectorClear(&local_58);
      VectorSubtract(&local_58,&local_58,&Spyro.trueVelocity);
      local_58.z = 0;
      iVar5 = VectorLength(&local_58,0);
      if (0x40 < iVar5) {
        VectorScale(&local_58,iVar5,0x40);
      }
      local_58.z = -0xc0;
      VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_58);
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    }
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    if (((Spyro.state == DeathBurn) && (DAT_800670fc != (code *)0x0)) && ((DAT_80067008 & 1) != 0))
    {
      local_38 = 0;
      local_34 = 0;
      local_30 = 0xe;
      VectorCopy(&local_28,&Spyro.position);
      iVar5 = RandomRangeGen(0,300);
      local_28.x = local_28.x + iVar5;
      iVar5 = RandomRangeGen(0,300);
      local_28.y = local_28.y + iVar5;
      iVar5 = RandomRangeGen(0,300);
      local_28.z = local_28.z + iVar5;
      iVar5 = (*DAT_800670fc)(1,0xd,&local_28,&local_38);
      *(undefined *)(iVar5 + 2) = 6;
      *(undefined *)(iVar5 + 10) = 0x20;
    }
    break;
  case Supercharge:
    FUN_8002b4e4(&local_38,1);
    iVar5 = local_38 * 0x23 >> 7;
    if (iVar5 == 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    else if (iVar5 < 0) {
      if (0 < Spyro.maybeTurnSpeed) {
        Spyro.maybeTurnSpeed = 0;
      }
    }
    else if (Spyro.maybeTurnSpeed < 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    if (Spyro.maybeTurnSpeed < iVar5) {
      bVar2 = iVar5 < Spyro.maybeTurnSpeed + 8;
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + 8;
    }
    else {
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + -8;
      bVar2 = Spyro.maybeTurnSpeed < iVar5;
    }
    if (bVar2) {
      Spyro.maybeTurnSpeed = iVar5;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    if (0x800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch + -0x1000;
    }
    if (Spyro.rotation.Pitch < 0) {
      iVar5 = DAT_8006019c - DAT_80060198;
LAB_OVR18FractureHills__8006e7dc:
      Spyro.maybeHorizontalSpeed = DAT_8006019c + (Spyro.rotation.Pitch * iVar5) / 0x160;
    }
    else {
      if (0 < Spyro.rotation.Pitch) {
        iVar5 = DAT_800601a0 - DAT_8006019c;
        goto LAB_OVR18FractureHills__8006e7dc;
      }
      Spyro.maybeHorizontalSpeed = DAT_8006019c;
    }
    FUN_8002bd70(0x240,0x180);
    FUN_8002bdbc();
    if ((Spyro.ledgeDetected == '\0') && (Spyro.airTime == 0)) {
      VectorAdd(&Spyro.trueVelocity,&Spyro.field42_0x88,&Spyro.field56_0xf0);
    }
    else {
      Spyro.trueVelocity.z = Spyro.physicsVelocity.z + -0xc0;
    }
  }
  return;
}



void FUN_OVR18FractureHills__8006e8ac(void)

{
  int iVar1;
  
  switch(Spyro.state) {
  case Whirlwind:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    break;
  case IdleLook:
  case IdleSit:
    iVar1 = FUN_8002d9c4();
    if (iVar1 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    goto LAB_OVR18FractureHills__8006e91c;
  default:
    goto switchD_OVR18FractureHills__8006e8dc_caseD_14;
  case SuperchargeAscending:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_80032b94();
    if ((Spyro.maybeSubstate == Supercharge) && (DAT_800670fc != (code *)0x0)) {
      (*DAT_800670fc)(1,9,0,0);
    }
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    else if ((Spyro.airVelocityFlag == NORMAL) && ((inputStates[0].current & Cross) == None)) {
      Spyro.airVelocityFlag = PEAK;
    }
    break;
  case HurtSquash:
  case HurtPitchSpin:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    break;
  case HurtBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    break;
  case DeathSquash:
    FUN_8002c0f4();
LAB_OVR18FractureHills__8006e91c:
    FUN_8002cc88();
    break;
  case DeathBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    Spyro.color.Red = 0x20;
    Spyro.color.Green = 0x20;
    Spyro.color.Blue = 0x20;
    Spyro.color.Alpha = 0xff;
    Spyro.field17_0x28 = 0;
    return;
  case Supercharge:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    FUN_80032b94();
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(1,9,0,0);
    }
    DAT_80068398 = 0x78;
    Spyro.field17_0x28 = 0;
    DAT_80068394 = 4;
    if ((currGameState == Normal) &&
       (iVar1 = FUN_80050b20(*(undefined *)(audioBank + 0x1a),Spyro.field169_0x264), iVar1 == 0)) {
      Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 0x1a),0,4);
      Spyro.field170_0x268 = (int)*(byte *)(audioBank + 0x1a);
    }
    goto switchD_OVR18FractureHills__8006e8dc_caseD_14;
  }
  Spyro.field17_0x28 = 0;
switchD_OVR18FractureHills__8006e8dc_caseD_14:
  return;
}



void FUN_OVR1Glimmer__8006db88(int param_1)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  Vec3 *to;
  Vec3 *from;
  uint uVar6;
  Vec3 local_88;
  Vec3 VStack_78;
  int local_68;
  int local_64;
  undefined local_60 [12];
  int local_54;
  int local_50;
  int local_48;
  int local_44;
  Vec3 local_40;
  int local_30;
  int local_2c;
  Vec3 local_28;
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case Whirlwind:
    iVar3 = Spyro.position.z - Spyro.field82_0x14c;
    if (iVar3 < 0x400) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x80;
      if (0x12c0 < Spyro.trueVelocity.z) {
        Spyro.trueVelocity.z = 0x12c0;
      }
      Spyro.rotation.Yaw = (iVar3 * iVar3 >> 0xb) + Spyro.field83_0x150;
      VectorCopy(&local_88,(Vec3 *)(Spyro.field153_0x218 + 0xc));
      VectorSubtract(&local_88,&local_88,&Spyro.position);
      local_88.z = 0;
      iVar3 = VectorLength(&local_88,0);
      if (0x400 < iVar3) {
        uVar5 = 0x400;
        goto LAB_OVR1Glimmer__8006df24;
      }
    }
    else {
      iVar2 = Spyro.field84_0x154 - Spyro.position.z;
      if (Spyro.position.z - Spyro.field84_0x154 < -0x400) {
        if (Spyro.airVelocityFlag == NORMAL) {
          Spyro.airVelocityFlag = FALLING;
          Spyro.field83_0x150 = Spyro.field83_0x150 + 0x200;
        }
        Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x80;
        if (0x12c0 < Spyro.trueVelocity.z) {
          Spyro.trueVelocity.z = 0x12c0;
        }
        iVar2 = Spyro.field85_0x158 * (iVar3 + -0x400);
        if (Spyro.field86_0x15c == 0) {
          trap(0x1c00);
        }
        if ((Spyro.field86_0x15c == -1) && (iVar2 == -0x80000000)) {
          trap(0x1800);
        }
        Spyro.rotation.Yaw =
             Spyro.field83_0x150 + iVar2 / Spyro.field86_0x15c + ((iVar3 + -0x400) * 0x400 >> 10) &
             0xfff;
        VectorCopy(&local_88,(Vec3 *)(Spyro.field153_0x218 + 0xc));
        VectorSubtract(&local_88,&local_88,&Spyro.position);
        local_88.z = 0;
        iVar3 = VectorLength(&local_88,0);
        if (0x400 < iVar3) {
          uVar5 = 0x400;
LAB_OVR1Glimmer__8006df24:
          VectorScale(&local_88,iVar3,uVar5);
        }
      }
      else {
        Spyro.trueVelocity.z = iVar2 * 0x12c0 >> 10;
        bVar1 = *(byte *)(Spyro.field153_0x218 + 0x46);
        local_88.x = (Spyro.field87_0x160 + 0x400) * (int)cosineLookupTable[bVar1] >> 0xc;
        local_88.y = (Spyro.field87_0x160 + 0x400) *
                     (int)sineLookupTable[*(byte *)(Spyro.field153_0x218 + 0x46)] >> 0xc;
        VectorAdd(&local_88,&local_88,(Vec3 *)(Spyro.field153_0x218 + 0xc));
        Spyro.rotation.Yaw = (uint)bVar1 * 0x10 - (iVar2 * iVar2 >> 0xb);
        VectorSubtract(&local_88,&local_88,&Spyro.position);
        local_88.z = 0;
        iVar3 = VectorLength(&local_88,0);
        if (0x800 < iVar3) {
          uVar5 = 0x800;
          goto LAB_OVR1Glimmer__8006df24;
        }
      }
    }
    Spyro.trueVelocity.x = local_88.x;
    Spyro.trueVelocity.y = local_88.y;
    break;
  case IdleLook:
  case IdleSit:
  case New_Name_(1):
  case Spit:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    if (cameraState != Look) {
      FUN_8002b36c(0x1200);
      FUN_8002bc68();
      FUN_8002bb24(0x5a,0x10);
    }
    break;
  case HurtSquash:
    if (Spyro.airTime == 0) goto LAB_OVR1Glimmer__8006e870;
    Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0x600;
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    to = &Spyro.field42_0x88;
    from = &Spyro.trueVelocity;
    goto LAB_OVR1Glimmer__8006ea20;
  case DeathSquash:
    if (Spyro.airTime == 0) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      VectorClear(&VStack_78);
      VectorSubtract(&VStack_78,&VStack_78,&Spyro.trueVelocity);
      VStack_78.z = 0;
      iVar3 = VectorLength(&VStack_78,0);
      if (0x40 < iVar3) {
        VectorScale(&VStack_78,iVar3,0x40);
      }
      VStack_78.z = -0xc0;
      VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&VStack_78);
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    }
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    if (((Spyro.state == DeathBurn) && (DAT_800670fc != (code *)0x0)) && ((DAT_80067008 & 1) != 0))
    {
      local_68 = 0;
      local_64 = 0;
      local_60._0_4_ = 0xe;
      VectorCopy((Vec3 *)(local_60 + 8),&Spyro.position);
      iVar3 = RandomRangeGen(0,300);
      local_60._8_4_ = local_60._8_4_ + iVar3;
      iVar3 = RandomRangeGen(0,300);
      local_54 = local_54 + iVar3;
      iVar3 = RandomRangeGen(0,300);
      local_50 = local_50 + iVar3;
      iVar3 = (*DAT_800670fc)(1,0xd,(Vec3 *)(local_60 + 8),&local_68);
      *(undefined *)(iVar3 + 2) = 6;
      *(undefined *)(iVar3 + 10) = 0x20;
    }
    break;
  case Superfly:
  case SuperflyAscending:
  case SuperflyDescending:
    FUN_8002b694(&local_68,0x8006a144,0);
    uVar6 = local_64 * -0x14 >> 7;
    local_60._8_4_ = (Spyro.trueVelocity.z >> 3) + -0x400;
    iVar3 = local_68 * 0x14 >> 7;
    if ((int)local_60._8_4_ < 0) {
      local_60._0_4_ = Spyro.trueVelocity.x >> 3;
      local_60._4_4_ = Spyro.trueVelocity.y >> 3;
      VectorAdd((Vec3 *)local_60,(Vec3 *)local_60,&Spyro.position);
      iVar2 = FUN_8001f618(&Spyro,(Vec3 *)local_60,2);
      if (iVar2 == 0) {
        local_64 = Spyro.position.z - Vec3_8006ab70.z >> 3;
        if (10 < local_64) {
          local_64 = 10;
        }
        uVar6 = uVar6 + local_64;
      }
    }
    iVar2 = Spyro.superflySpeed;
    if ((currentLoadedLevel == OCEAN_SPEEDWAY) && (DAT_8006abf8 != '\0')) {
      iVar2 = 53000;
    }
    if (iVar2 - Spyro.position.z < 0x1000) {
      uVar4 = ((iVar2 - Spyro.position.z) * 800 >> 0xc) - Spyro.rotation.Pitch & 0xfff;
      if (0x800 < uVar4) {
        uVar4 = uVar4 - 0x1000;
      }
      if ((int)uVar4 < (int)uVar6) {
        uVar6 = uVar4;
      }
    }
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar3 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + uVar6 & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    if (inSpeedwayFlag < 0) {
      if (Spyro.rotation.Pitch < 0) {
        iVar2 = DAT_80060184 - DAT_80060180;
LAB_OVR1Glimmer__8006e390:
        Spyro.maybeHorizontalSpeed = DAT_80060184 + (Spyro.rotation.Pitch * iVar2) / 800;
      }
      else {
        if (0 < Spyro.rotation.Pitch) {
          iVar2 = DAT_80060188 - DAT_80060184;
          goto LAB_OVR1Glimmer__8006e390;
        }
        Spyro.maybeHorizontalSpeed = DAT_80060184;
      }
      Spyro.field82_0x14c =
           Spyro.field82_0x14c +
           (((Spyro.maybeHorizontalSpeed - Spyro.maybeHorizontalSpeedDecay) - Spyro.field82_0x14c) *
            0x40 >> 6);
      Spyro.maybeHorizontalSpeedDecay = Spyro.maybeHorizontalSpeedDecay + (Spyro.field82_0x14c >> 6)
      ;
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
      if (0x4b00 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x4b00;
      }
    }
    else {
      if ((currentLoadedLevel == OCEAN_SPEEDWAY) && (DAT_8006abf8 != '\0')) {
        if (53000 - Spyro.position.z < 0) {
          Spyro.maybeHorizontalSpeedDecay = 0x800;
        }
        else {
          iVar2 = maybeSquareRoot();
          Spyro.maybeHorizontalSpeedDecay = iVar2 * 0x40 + 0x800;
        }
      }
      else if (Spyro.superflySpeed - Spyro.position.z < 0) {
        iVar2 = maybeSquareRoot(-(Spyro.superflySpeed - Spyro.position.z));
        Spyro.maybeHorizontalSpeedDecay = iVar2 * -0x80 + 0x1040;
      }
      else {
        iVar2 = maybeSquareRoot();
        Spyro.maybeHorizontalSpeedDecay = iVar2 * 0x40 + 0x1040;
      }
      if (0x5900 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x5900;
      }
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
    }
    iVar2 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar3 * iVar2 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    if (Spyro.airVelocityFlag == NORMAL) {
      if ((((*(uint *)(DAT_80066f38 + 4) & 0x40) != 0) &&
          (Spyro.position.z < Spyro.superflySpeed + -0x200)) && (Spyro.state == Superfly)) {
        Spyro.airVelocityFlag = FALLING;
        Spyro.field87_0x160 = 0;
      }
    }
    else if (Spyro.position.z < Spyro.superflySpeed) {
      if (Spyro.airVelocityFlag == FALLING) {
        Spyro.field87_0x160 = Spyro.field87_0x160 + 0x200;
        if (0x17ff < Spyro.field87_0x160) {
          Spyro.field87_0x160 = 0x1800;
          Spyro.airVelocityFlag = PEAK;
        }
      }
      else {
        Spyro.field87_0x160 = Spyro.field87_0x160 + -0x100;
        if (Spyro.field87_0x160 < 1) {
          Spyro.field87_0x160 = 0;
          Spyro.airVelocityFlag = NORMAL;
        }
      }
      Spyro.field42_0x88.z = Spyro.field42_0x88.z + Spyro.field87_0x160;
    }
    else {
      Spyro.airVelocityFlag = NORMAL;
    }
    FUN_8002c038();
    break;
  case ClimbIdle:
    if (cameraState == Look) {
      Spyro.maybeHorizontalSpeed = 0;
    }
    else {
      FUN_8002b4e4(&local_48,0);
      local_40.x = 0;
      local_48 = local_48 * 0x480 >> 7;
      local_44 = local_44 * 0x600 >> 7;
      local_40.y = -local_48;
      local_40.z = local_44;
      iVar2 = VectorLength(&local_40,0);
      iVar3 = local_40.z;
      if (local_40.z < 0) {
        iVar3 = -local_40.z;
      }
      if (iVar3 < iVar2) {
        local_40.z = 0;
        iVar3 = FUN_8002d328(0 < local_40.y);
        if (iVar3 == 0) {
          local_40.y = 0;
        }
      }
      else {
        local_40.y = 0;
        local_40.x = 0;
        if (local_40.z < 1) {
          uVar5 = 3;
        }
        else {
          uVar5 = 2;
        }
        iVar3 = FUN_8002d328(uVar5);
        if (iVar3 == 0) {
          local_40.z = 0;
        }
      }
      Spyro.maybeHorizontalSpeed = VectorLength(&local_40,1);
    }
LAB_OVR1Glimmer__8006e870:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    break;
  case ClimbVertical:
  case ClimbRight:
  case ClimbLeft:
    FUN_8002b4e4(&local_30,0);
    local_28.x = 0;
    local_30 = local_30 * 0x480 >> 7;
    local_2c = local_2c * 0x600 >> 7;
    local_28.y = -local_30;
    local_28.z = local_2c;
    iVar2 = VectorLength(&local_28,0);
    iVar3 = local_28.z;
    if (local_28.z < 0) {
      iVar3 = -local_28.z;
    }
    if (iVar3 < iVar2) {
      local_28.z = 0;
      iVar3 = FUN_8002d328(0 < local_28.y);
      if (iVar3 == 0) {
        local_28.y = 0;
      }
    }
    else {
      local_28.y = 0;
      local_28.x = 0;
      if (local_28.z < 1) {
        uVar5 = 3;
      }
      else {
        uVar5 = 2;
      }
      iVar3 = FUN_8002d328(uVar5);
      if (iVar3 == 0) {
        local_28.z = 0;
      }
    }
    Spyro.maybeHorizontalSpeed = VectorLength(&local_28,1);
    Spyro.maybeTargetYaw = Atan2(local_30,local_2c,1);
    if (0x800 < Spyro.maybeTargetYaw) {
      Spyro.maybeTargetYaw = Spyro.maybeTargetYaw + -0x1000;
    }
    local_28.x = local_28.x + 0x400;
    MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_28,&local_28);
    to = &Spyro.trueVelocity;
    VectorSubtract(&local_28,&local_28,&Spyro.trueVelocity);
    iVar3 = VectorLength(&local_28,0);
    if (0x180 < iVar3) {
      VectorScale(&local_28,iVar3,0x180);
    }
    from = &Spyro.field42_0x88;
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_28);
LAB_OVR1Glimmer__8006ea20:
    VectorCopy(to,from);
  }
  return;
}



void FUN_OVR1Glimmer__8006ea48(void)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  
  switch(Spyro.state) {
  case Whirlwind:
  case Superfly:
  case SuperflyAscending:
  case SuperflyDescending:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    Spyro.field17_0x28 = 0;
    break;
  case IdleLook:
  case IdleSit:
    iVar2 = FUN_8002d9c4();
    if (iVar2 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    goto LAB_OVR1Glimmer__8006eab8;
  case HurtSquash:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    Spyro.field17_0x28 = 0;
    break;
  case DeathSquash:
  case New_Name_(1):
  case Spit:
    FUN_8002c0f4();
LAB_OVR1Glimmer__8006eab8:
    FUN_8002cc88();
    Spyro.field17_0x28 = 0;
    break;
  case ClimbIdle:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_8002d0f8();
    Spyro.field17_0x28 = 0;
    break;
  case ClimbVertical:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_8002d0f8();
    iVar2 = Spyro.physicsVelocity.z * 4;
    if (iVar2 < 0) {
      iVar2 = Spyro.physicsVelocity.z * -4;
    }
    Spyro.field17_0x28 = 0;
    uVar3 = ((iVar2 + 0x300) / 0x600) * 0x10;
    bVar1 = (int)uVar3 < 0x41;
    if ((int)uVar3 < 0x10) {
      uVar3 = 0x10;
LAB_OVR1Glimmer__8006ec38:
      bVar1 = uVar3 < 0x41;
    }
    goto LAB_OVR1Glimmer__8006ec3c;
  case ClimbRight:
  case ClimbLeft:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_8002d0f8();
    Spyro.field17_0x28 = 0;
    iVar2 = VectorLength(&Spyro.physicsVelocity,0);
    uVar3 = ((iVar2 * 4 + 0x300) / 0x600) * 0x10;
    bVar1 = (int)uVar3 < 0x41;
    if ((int)uVar3 < 8) {
      uVar3 = 8;
      goto LAB_OVR1Glimmer__8006ec38;
    }
LAB_OVR1Glimmer__8006ec3c:
    if (!bVar1) {
      uVar3 = 0x40;
    }
    FUN_8002e3f8(uVar3);
  }
  return;
}



void FUN_OVR1Glimmer__8006f1d0(void)

{
  CollisionType CVar1;
  AirVelocityFlags AVar2;
  int iVar3;
  SpyroState newSpyroState;
  
  switch(Spyro.state) {
  case Whirlwind:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    iVar3 = Vec2OctagonalDistanceApproximation((Vec2 *)&Spyro,(Vec2 *)(Spyro.field153_0x218 + 0xc));
    newSpyroState = Glide;
    if (iVar3 <= Spyro.field87_0x160) {
      return;
    }
    break;
  case IdleLook:
  case IdleSit:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    newSpyroState = Jump;
    if ((inputStates[0].pressed & Cross) == None) {
      CVar1 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar1 == Ice) {
        newSpyroState = Ice;
        if (DAT_8006839d != '\0') {
          return;
        }
      }
      else {
        newSpyroState = Flop;
        if (((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) &&
           (newSpyroState = Charge, (inputStates[0].current & Square) == None)) {
          iVar3 = Spyro.maybeTurnSpeed;
          if (Spyro.maybeTurnSpeed < 0) {
            iVar3 = -Spyro.maybeTurnSpeed;
          }
          if (iVar3 < 0x11) {
            if (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
                 (TriggerLeft|TriggerRight)) ||
               (newSpyroState = Walk, Spyro.maybeHorizontalSpeed == 0)) {
              if ((cameraState == Look) || (Spyro.field162_0x240 != 0)) {
                if (Spyro.state == Idle) {
                  return;
                }
                SetSpyroState(Idle);
                if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
                  Spyro.currentAnimationState = Spyro.nextAnimationState;
                  Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
                }
                Spyro.nextAnimationState = (byte)Spyro.state;
                Spyro.nextAnimationFrame = 0;
                Spyro.field11_0x1c = 0x71;
                Spyro.field136_0x1ec = Spyro.state;
                Spyro.field137_0x1f0 = 0;
                return;
              }
              newSpyroState = IdleLedge;
              if (Spyro.ledgeDetected == '\0') {
                FUN_80032c34();
                return;
              }
            }
          }
          else {
            newSpyroState = Walk;
          }
        }
      }
    }
    break;
  default:
    goto switchD_OVR1Glimmer__8006f208_caseD_14;
  case HurtSquash:
    if ((Spyro.takingDamageRelated & 0x10U) != 0) {
      return;
    }
    if (Spyro.field35_0x5c < 0x19) {
      return;
    }
    if (Spyro.health < 0) {
      newSpyroState = DeathSquash;
    }
    else {
      PlayAudio(*(undefined *)(audioBank + 0xf),0,0);
      if (Spyro.field82_0x14c == 10) {
        newSpyroState = WaterIdle;
      }
      else if (Spyro.field82_0x14c - 0xbU < 2) {
        newSpyroState = UnderwaterIdle;
      }
      else {
        newSpyroState = Idle;
        if (Spyro.airTime != 0) {
          newSpyroState = Flop;
        }
      }
    }
    break;
  case DeathSquash:
    if (Spyro.field35_0x5c < 0x7d) {
      return;
    }
    OnDeath();
    return;
  case Superfly:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar3 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if ((((iVar3 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
            (newSpyroState = Glide, Spyro.powerFlightTime != 0)) &&
           (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)) {
          iVar3 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if (((0x3ff < iVar3) &&
              (newSpyroState = SuperflyAscending, Spyro.airVelocityFlag == NORMAL)) &&
             ((Spyro.rotation.Pitch < 0x16d &&
              (newSpyroState = SuperflyDescending, -0x16d < Spyro.rotation.Pitch)))) {
            return;
          }
        }
      }
    }
    break;
  case SuperflyAscending:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar3 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if (((iVar3 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
           ((newSpyroState = Glide, Spyro.powerFlightTime != 0 &&
            (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)))) {
          iVar3 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if (0x3ff < iVar3) {
            if (0xff < Spyro.rotation.Pitch) {
              return;
            }
            newSpyroState = Superfly;
            AVar2 = Spyro.airVelocityFlag;
            goto joined_r0x8006f3ec;
          }
        }
      }
    }
    break;
  case SuperflyDescending:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar3 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if ((((iVar3 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
            (newSpyroState = Glide, Spyro.powerFlightTime != 0)) &&
           (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)) {
          iVar3 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if (((0x3ff < iVar3) &&
              (newSpyroState = SuperflyAscending, Spyro.airVelocityFlag == NORMAL)) &&
             (newSpyroState = Superfly, Spyro.rotation.Pitch < -0xff)) {
            return;
          }
        }
      }
    }
    break;
  case ClimbIdle:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) == None) {
      newSpyroState = ClimbVertical;
      if (Spyro.maybeHorizontalSpeed == 0) {
        return;
      }
    }
    else {
joined_r0x8006fa90:
      newSpyroState = Jump;
      if ((inputStates[0].current & DPadDown) != None) {
        SetSpyroState(Flop);
        Spyro.airVelocityFlag = WATER_EXIT;
        return;
      }
    }
    break;
  case ClimbVertical:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto joined_r0x8006fa90;
    newSpyroState = ClimbIdle;
    if (Spyro.maybeHorizontalSpeed != 0) {
      iVar3 = Spyro.physicsVelocity.z;
      if (Spyro.physicsVelocity.z < 0) {
        iVar3 = -Spyro.physicsVelocity.z;
      }
      if (Spyro.field49_0xbc <= iVar3) {
        return;
      }
      iVar3 = Spyro.maybeTargetYaw;
      if (Spyro.maybeTargetYaw < 0) {
        iVar3 = -Spyro.maybeTargetYaw;
      }
      newSpyroState = ClimbLeft;
      if (iVar3 < 0x400) {
        newSpyroState = ClimbRight;
      }
    }
    break;
  case ClimbRight:
  case ClimbLeft:
    iVar3 = maybeTakeDamage();
    if (iVar3 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) goto joined_r0x8006fa90;
    newSpyroState = ClimbIdle;
    if (Spyro.maybeHorizontalSpeed != 0) {
      iVar3 = Spyro.physicsVelocity.z;
      if (Spyro.physicsVelocity.z < 0) {
        iVar3 = -Spyro.physicsVelocity.z;
      }
      newSpyroState = ClimbVertical;
      if (iVar3 < Spyro.field49_0xbc) {
        return;
      }
    }
    break;
  case New_Name_(1):
  case Spit:
    AVar2 = maybeTakeDamage();
    newSpyroState = Idle;
joined_r0x8006f3ec:
    if (AVar2 != NORMAL) {
      return;
    }
  }
  SetSpyroState(newSpyroState);
switchD_OVR1Glimmer__8006f208_caseD_14:
  return;
}



void switchD_OVR20GulpsOverlook::8006db4c::caseD_13(void)

{
  VectorClear(&Spyro.field42_0x88);
  VectorClear(&Spyro.trueVelocity);
  if (cameraState != Look) {
    FUN_8002b36c(0x1200);
    FUN_8002bc68();
    FUN_8002bb24(0x5a,0x10);
  }
  return;
}



void switchD_OVR20GulpsOverlook::8006db4c::caseD_1c(void)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int unaff_s2;
  int param_5;
  int param_6;
  int param_7;
  int param_9;
  int param_10;
  undefined4 param_11;
  int param_12;
  int param_13;
  int param_14;
  
  FUN_8002b36c(0xc80);
  FUN_8002bb24(0x28,8);
  FUN_8002bd70(0x140,0xc0);
  iVar1 = cosineLookup(Spyro.maybeTargetYaw);
  param_5 = Spyro.maybeHorizontalSpeedDecay * iVar1 >> 0xc;
  iVar1 = sineLookup(Spyro.maybeTargetYaw);
  param_6 = Spyro.maybeHorizontalSpeedDecay * iVar1 >> 0xc;
  VectorSubtract((Vec3 *)&stack0x00000010,(Vec3 *)&stack0x00000010,&Spyro.trueVelocity);
  param_7 = 0;
  iVar1 = VectorLength((Vec3 *)&stack0x00000010,0);
  if (0x280 < iVar1) {
    VectorScale((Vec3 *)&stack0x00000010,iVar1,0x280);
  }
  VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,(Vec3 *)&stack0x00000010);
  FUN_8002c038();
  if (unaff_s2 < 0xd) {
    Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x17;
  }
  else {
    Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
  }
  iVar1 = 0;
  if (DAT_800670fc != (code *)0x0) {
    do {
      uVar2 = rand();
      if (unaff_s2 * 5 < (int)(uVar2 & 0xff)) {
        iVar3 = RandomRangeGen(0,0xc);
        uVar2 = Spyro.angleAsByte.yaw + 0x80 + iVar3 & 0xff;
        param_9 = cosineLookupTable[uVar2] * 5 >> 10;
        param_11 = 0xe;
        param_12 = -300;
        param_13 = 0;
        param_14 = -200;
        param_10 = sineLookupTable[uVar2] * 5 >> 10;
        MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,(Vec3 *)&stack0x00000030,
                         (Vec3 *)&stack0x00000030);
        iVar3 = RandomRangeGen(0,0x50);
        param_12 = param_12 + iVar3;
        iVar3 = RandomRangeGen(0,0x50);
        param_13 = param_13 + iVar3;
        iVar3 = RandomRangeGen(0,0x50);
        param_14 = param_14 + iVar3;
        VectorAdd((Vec3 *)&stack0x00000030,(Vec3 *)&stack0x00000030,&Spyro.position);
        iVar3 = (*DAT_800670fc)(1,0xd,(Vec3 *)&stack0x00000030,&stack0x00000020);
        *(undefined *)(iVar3 + 2) = 8;
        *(undefined *)(iVar3 + 10) = 0x20;
      }
      iVar1 = iVar1 + 1;
    } while (iVar1 < 2);
  }
  return;
}



void switchD_OVR20GulpsOverlook::8006db4c::caseD_20(void)

{
  int iVar1;
  int param_11;
  undefined4 param_12;
  undefined4 param_13;
  undefined4 param_14;
  int param_15;
  int param_16;
  int param_17;
  
  if (Spyro.airTime == 0) {
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
  }
  else {
    VectorClear((Vec3 *)&stack0x00000020);
    VectorSubtract((Vec3 *)&stack0x00000020,(Vec3 *)&stack0x00000020,&Spyro.trueVelocity);
    param_11 = 0;
    iVar1 = VectorLength((Vec3 *)&stack0x00000020,0);
    if (0x40 < iVar1) {
      VectorScale((Vec3 *)&stack0x00000020,iVar1,0x40);
    }
    param_11 = -0xc0;
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,(Vec3 *)&stack0x00000020);
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
  }
  if (Spyro.trueVelocity.z < -0x2300) {
    Spyro.trueVelocity.z = -0x2300;
  }
  if (((Spyro.state == DeathBurn) && (DAT_800670fc != (code *)0x0)) && ((DAT_80067008 & 1) != 0)) {
    param_12 = 0;
    param_13 = 0;
    param_14 = 0xe;
    VectorCopy((Vec3 *)&stack0x00000050,&Spyro.position);
    iVar1 = RandomRangeGen(0,300);
    param_15 = param_15 + iVar1;
    iVar1 = RandomRangeGen(0,300);
    param_16 = param_16 + iVar1;
    iVar1 = RandomRangeGen(0,300);
    param_17 = param_17 + iVar1;
    iVar1 = (*DAT_800670fc)(1,0xd,(Vec3 *)&stack0x00000050,&stack0x00000040);
    *(undefined *)(iVar1 + 2) = 6;
    *(undefined *)(iVar1 + 10) = 0x20;
  }
  return;
}



void FUN_OVR20GulpsOverlook__8006e020(void)

{
  int iVar1;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar1 = FUN_8002d9c4();
    if (iVar1 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    goto LAB_OVR20GulpsOverlook__8006e090;
  default:
    goto switchD_OVR20GulpsOverlook__8006e050_caseD_14;
  case HurtSquash:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    break;
  case HurtBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    break;
  case DeathSquash:
  case New_Name_(1):
  case Spit:
    FUN_8002c0f4();
LAB_OVR20GulpsOverlook__8006e090:
    FUN_8002cc88();
    break;
  case DeathBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    Spyro.color.Alpha = 0xff;
    Spyro.field17_0x28 = 0;
    Spyro.color.Blue = 0x20;
    Spyro.color.Green = 0x20;
    Spyro.color.Red = 0x20;
    goto switchD_OVR20GulpsOverlook__8006e050_caseD_14;
  }
  Spyro.field17_0x28 = 0;
switchD_OVR20GulpsOverlook__8006e050_caseD_14:
  return;
}



void FUN_OVR20GulpsOverlook__8006e16c(void)

{
  if (((Spyro.currentAnimationState != 0x20) && (Spyro.currentAnimationState == 0x3a)) &&
     (Spyro.currentAnimationFrame == 0xd)) {
    PlayAudio(*(undefined *)(audioBank + 0xd),0,0);
    Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
  }
  return;
}



void FUN_OVR20GulpsOverlook__8006e1dc(int param_1)

{
  undefined4 uVar1;
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case IdleLook:
  case HurtSquash:
  case DeathSquash:
  case IdleSit:
  case New_Name_(1):
  case Spit:
  case DeathBurn:
    uVar1 = 0x8006a0c4;
    break;
  default:
    goto switchD_OVR20GulpsOverlook__8006e224_caseD_14;
  case HurtBurn:
    uVar1 = 0;
  }
  FUN_8002db8c(uVar1);
switchD_OVR20GulpsOverlook__8006e224_caseD_14:
  return;
}



void FUN_OVR20GulpsOverlook__8006e258(int param_1)

{
  undefined uVar1;
  Substate SVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  
  SVar2 = Spyro.maybeSubstate;
  switch(param_1) {
  case 0x13:
  case 0x26:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
    uVar3 = 1;
    if (param_1 == 0x25) {
      uVar3 = 5;
      uVar4 = 8;
    }
    else {
      uVar4 = 3;
    }
    Spyro.field82_0x14c = randomRangeGen(uVar3,uVar4);
    Spyro.field83_0x150 = 0;
    if (DAT_800670b4 != (code *)0x0) {
      if (param_1 == 0x25) {
        uVar3 = 0x1f1;
      }
      else {
        uVar3 = 0x1db;
        if (param_1 != 0x27) {
          Spyro.field83_0x150 = 0;
          return;
        }
      }
      (*DAT_800670b4)(uVar3,0);
    }
    break;
  case 0x1a:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = SVar2;
    VectorClear(&Spyro.trueVelocity);
    Spyro.field118_0x1bc = '\x01';
    DAT_8006838c = 0xf;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    uVar1 = *(undefined *)(audioBank + 9);
    goto LAB_OVR20GulpsOverlook__8006e478;
  case 0x1c:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = SVar2;
    VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.trueVelocity.z = 0xdc0;
    Spyro.field118_0x1bc = '\0';
    DAT_8006838c = 0xf;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    goto LAB_OVR20GulpsOverlook__8006e468;
  case 0x20:
  case 0x3a:
    Spyro.maybeSubstate = Death;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    if (param_1 != 0x3a) {
      Spyro.field118_0x1bc = '\x01';
      return;
    }
LAB_OVR20GulpsOverlook__8006e468:
    uVar1 = *(undefined *)(audioBank + 0xc);
LAB_OVR20GulpsOverlook__8006e478:
    PlayAudio(uVar1,0,0);
    break;
  case 0x35:
  case 0x36:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
  }
  return;
}



void switchD_OVR20GulpsOverlook::8006e288::caseD_20(void)

{
  int unaff_s0;
  
  Spyro.maybeSubstate = Death;
  Spyro.airVelocityFlag = NORMAL;
  FUN_8002db08(0xc00);
  Spyro.field118_0x1bc = '\x01';
  if (unaff_s0 == 0x3a) {
    PlayAudio(*(undefined *)(audioBank + 0xc),0,0);
  }
  return;
}



void switchD_OVR20GulpsOverlook::8006e288::caseD_35(void)

{
  Spyro.maybeSubstate = Idle;
  Spyro.airVelocityFlag = NORMAL;
  FUN_8002e2bc();
  Spyro.field118_0x1bc = '\x01';
  return;
}



void FUN_OVR20GulpsOverlook__8006e4c0(void)

{
  CollisionType CVar1;
  int iVar2;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
    if ((inputStates[0].pressed & Cross) != None) {
      SetSpyroState(Jump);
      return;
    }
    CVar1 = GetCollisiontType(Spyro.field72_0x114);
    if (CVar1 == Ice) {
      if (DAT_8006839d != '\0') {
        return;
      }
      SetSpyroState(Ice);
      return;
    }
    if ((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) {
      if ((inputStates[0].current & Square) != None) {
        SetSpyroState(Charge);
        return;
      }
      iVar2 = Spyro.maybeTurnSpeed;
      if (Spyro.maybeTurnSpeed < 0) {
        iVar2 = -Spyro.maybeTurnSpeed;
      }
      if ((iVar2 < 0x11) &&
         (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
           (TriggerLeft|TriggerRight) || (Spyro.maybeHorizontalSpeed == 0)))) {
        if ((cameraState != Look) && (Spyro.field162_0x240 == 0)) {
          if (Spyro.ledgeDetected != '\0') {
            SetSpyroState(IdleLedge);
            return;
          }
          FUN_80032c34();
          return;
        }
        if (Spyro.state == Idle) {
          return;
        }
        SetSpyroState(Idle);
        if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
          Spyro.currentAnimationState = Spyro.nextAnimationState;
          Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
        }
        Spyro.nextAnimationState = (byte)Spyro.state;
        Spyro.nextAnimationFrame = 0;
        Spyro.field11_0x1c = 0x71;
        Spyro.field136_0x1ec = Spyro.state;
        Spyro.field137_0x1f0 = 0;
        return;
      }
LAB_OVR20GulpsOverlook__8006e910:
      SetSpyroState(Walk);
      return;
    }
    break;
  default:
    goto switchD_OVR20GulpsOverlook__8006e4f4_caseD_14;
  case HurtSquash:
    if ((Spyro.takingDamageRelated & 0x10U) != 0) {
      return;
    }
    if (Spyro.field35_0x5c < 0x19) {
      return;
    }
    if (Spyro.health < 0) {
      SetSpyroState(DeathSquash);
      return;
    }
    PlayAudio(*(undefined *)(audioBank + 0xf),0,0);
    if (Spyro.field82_0x14c == 10) {
      SetSpyroState(WaterIdle);
      return;
    }
    if (Spyro.field82_0x14c - 0xbU < 2) {
      SetSpyroState(UnderwaterIdle);
      return;
    }
    if (Spyro.airTime == 0) goto LAB_OVR20GulpsOverlook__8006e948;
    break;
  case HurtBurn:
    if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
      Spyro.field120_0x1be = '\x01';
    }
    if ((((Spyro.airTime == 0) && (0xf < Spyro.field35_0x5c)) && (Spyro.field55_0xec < 0x17)) &&
       (Spyro.field53_0xd4.x * Spyro.trueVelocity.x + Spyro.field53_0xd4.y * Spyro.trueVelocity.y +
        Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)) {
      if (Spyro.maybeHorizontalSpeed != 0) {
        if (0xf00 < Spyro.maybeHorizontalSpeedDecay) {
          SetSpyroState(Run);
          return;
        }
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          SetSpyroState(StartRun);
          return;
        }
        goto LAB_OVR20GulpsOverlook__8006e910;
      }
      if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
        SetSpyroState(Stop);
        return;
      }
      goto LAB_OVR20GulpsOverlook__8006e948;
    }
    if (((inputStates[0].current & Square) != None) && (Spyro.airVelocityFlag == FALLING)) {
      SetSpyroState(ChargeAir);
      return;
    }
    if ((Spyro.field119_0x1bd != '\0') && (Spyro.field120_0x1be != '\0')) {
      if (Spyro.airVelocityFlag != FALLING) {
        return;
      }
      SetSpyroState(Glide);
      return;
    }
    if (Spyro.airVelocityFlag != FALLING) {
      return;
    }
    if ((-0x1901 < Spyro.physicsVelocity.z) && (Spyro.field35_0x5c < 0x5b)) {
      return;
    }
    break;
  case DeathSquash:
    if (Spyro.field35_0x5c < 0x7d) {
      return;
    }
    goto LAB_OVR20GulpsOverlook__8006eaa4;
  case New_Name_(1):
  case Spit:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
LAB_OVR20GulpsOverlook__8006e948:
    SetSpyroState(Idle);
    return;
  case DeathBurn:
    if (Spyro.field35_0x5c < 0x89) {
      return;
    }
    if ((-1 < inSpeedwayFlag) && (DAT_80066f8c != (code *)0x0)) {
      (*DAT_80066f8c)();
      return;
    }
LAB_OVR20GulpsOverlook__8006eaa4:
    OnDeath();
    goto switchD_OVR20GulpsOverlook__8006e4f4_caseD_14;
  }
  SetSpyroState(Flop);
switchD_OVR20GulpsOverlook__8006e4f4_caseD_14:
  return;
}



void switchD_OVR20GulpsOverlook::8006e4f4::caseD_13(void)

{
  int iVar1;
  CollisionType CVar2;
  
  iVar1 = maybeTakeDamage();
  if (iVar1 == 0) {
    if ((inputStates[0].pressed & Cross) == None) {
      CVar2 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar2 == Ice) {
        if (DAT_8006839d == '\0') {
          SetSpyroState(Ice);
        }
      }
      else if ((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) {
        if ((inputStates[0].current & Square) == None) {
          iVar1 = Spyro.maybeTurnSpeed;
          if (Spyro.maybeTurnSpeed < 0) {
            iVar1 = -Spyro.maybeTurnSpeed;
          }
          if ((iVar1 < 0x11) &&
             (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
               (TriggerLeft|TriggerRight) || (Spyro.maybeHorizontalSpeed == 0)))) {
            if ((cameraState == Look) || (Spyro.field162_0x240 != 0)) {
              if (Spyro.state != Idle) {
                SetSpyroState(Idle);
                if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
                  Spyro.currentAnimationState = Spyro.nextAnimationState;
                  Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
                }
                Spyro.nextAnimationFrame = 0;
                Spyro.field11_0x1c = 0x71;
                Spyro.field137_0x1f0 = 0;
                Spyro.nextAnimationState = (byte)Spyro.state;
                Spyro.field136_0x1ec = Spyro.state;
              }
            }
            else if (Spyro.ledgeDetected == '\0') {
              FUN_80032c34();
            }
            else {
              SetSpyroState(IdleLedge);
            }
          }
          else {
            SetSpyroState(Walk);
          }
        }
        else {
          SetSpyroState(Charge);
        }
      }
      else {
        SetSpyroState(Flop);
      }
    }
    else {
      SetSpyroState(Jump);
    }
  }
  return;
}



void switchD_OVR20GulpsOverlook::8006e4f4::SetPostDamageState(void)

{
  if (((Spyro.takingDamageRelated & 0x10U) == 0) && (0x18 < Spyro.field35_0x5c)) {
    if (Spyro.health < 0) {
      SetSpyroState(DeathSquash);
    }
    else {
      PlayAudio(*(undefined *)(audioBank + 0xf),0,0);
      if (Spyro.field82_0x14c == 10) {
        SetSpyroState(WaterIdle);
      }
      else if (Spyro.field82_0x14c - 0xbU < 2) {
        SetSpyroState(UnderwaterIdle);
      }
      else if (Spyro.airTime == 0) {
        SetSpyroState(Idle);
      }
      else {
        SetSpyroState(Flop);
      }
    }
  }
  return;
}



void switchD_OVR20GulpsOverlook::8006e4f4::caseD_1c(void)

{
  if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
    Spyro.field120_0x1be = '\x01';
  }
  if ((((Spyro.airTime == 0) && (0xf < Spyro.field35_0x5c)) && (Spyro.field55_0xec < 0x17)) &&
     (Spyro.field53_0xd4.x * Spyro.trueVelocity.x + Spyro.field53_0xd4.y * Spyro.trueVelocity.y +
      Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)) {
    if (Spyro.maybeHorizontalSpeed == 0) {
      if (Spyro.maybeHorizontalSpeedDecay < 0x780) {
        SetSpyroState(Idle);
      }
      else {
        SetSpyroState(Stop);
      }
    }
    else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
      if (Spyro.maybeHorizontalSpeedDecay < 0x781) {
        SetSpyroState(Walk);
      }
      else {
        SetSpyroState(StartRun);
      }
    }
    else {
      SetSpyroState(Run);
    }
  }
  else if (((inputStates[0].current & Square) == None) || (Spyro.airVelocityFlag != FALLING)) {
    if ((Spyro.field119_0x1bd == '\0') || (Spyro.field120_0x1be == '\0')) {
      if ((Spyro.airVelocityFlag == FALLING) &&
         ((Spyro.physicsVelocity.z < -0x1900 || (0x5a < Spyro.field35_0x5c)))) {
        SetSpyroState(Flop);
      }
    }
    else if (Spyro.airVelocityFlag == FALLING) {
      SetSpyroState(Glide);
    }
  }
  else {
    SetSpyroState(ChargeAir);
  }
  return;
}



void FUN_OVR20GulpsOverlook__8006eac0(void)

{
  int iVar1;
  Orbit *outputOrbit;
  int iVar2;
  Orbit *inputOrbit;
  int iVar3;
  Vec3 local_48;
  Vec3 local_38;
  Vec3 VStack_28;
  
  iVar3 = DAT_80067fbc + 2 >> 2;
  if (4 < iVar3) {
    iVar3 = 4;
  }
  if (cameraState == BossLock) {
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    VectorSubtract(&local_48,&DAT_80067ff0->position,&Spyro.position);
    DAT_80067ef0 = Atan2(local_48.x,local_48.y,1);
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80061628,DAT_80067ef0);
      InputRotateCamera(0x400);
      if ((currentLoadedLevel == RIPTOS_ARENA) && (Objects[1].data[6] == '\x03')) {
        iVar1 = VectorLength(&local_48,0);
        iVar2 = iVar1 + -0x800;
        if (iVar1 < 0x4800) {
          if (iVar2 < 0) {
            iVar2 = 0;
          }
          Orbit_80067f14.Latitude =
               Orbit_80061628.Latitude +
               ((0x30 - Orbit_80061628.Latitude) * (0x4000 - iVar2) >> 0xe) & 0xfff;
          Orbit_80067f14.Pitch =
               Orbit_80061628.Pitch + ((-0xa0 - Orbit_80061628.Pitch) * (0x4000 - iVar2) >> 0xe) &
               0xfff;
        }
      }
    }
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar3 * 0x14 + -0x7ff9e8d4),0);
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar3 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    inputOrbit = &Orbit_80061844;
    outputOrbit = &Orbit_80067fa0;
  }
  else {
    if (cameraState != New_Name_(2)) {
      return;
    }
    FUN_80041730(DAT_80067ff0,0,&local_38);
    FUN_80041730(DAT_80067ff0,1,&VStack_28);
    VectorAdd(&local_38,&local_38,&VStack_28);
    VectorShiftRight(&local_38,1);
    VectorSubtract(&local_38,&local_38,&cameraPosition);
    iVar1 = VectorLength(&local_38,0);
    iVar1 = Atan2(iVar1,local_38.z,1);
    Orbit_80067f14.Pitch = -Orbit_80067f14.Latitude - iVar1 & 0xfff;
    if (0x800 < (uint)Orbit_80067f14.Pitch) {
      Orbit_80067f14.Pitch = Orbit_80067f14.Pitch - 0x1000;
    }
    iVar1 = Atan2(local_38.x,local_38.y,1);
    Orbit_80067f14.Yaw = (iVar1 - Orbit_80067f14.Longitude) + 0x800U & 0xfff;
    if (0x800 < (uint)Orbit_80067f14.Yaw) {
      Orbit_80067f14.Yaw = Orbit_80067f14.Yaw - 0x1000;
    }
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar3 * 0x14 + -0x7ff9e8d4),0);
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar3 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
    outputOrbit = &Orbit_80067f8c;
    inputOrbit = &Orbit_80061858;
  }
  OrbitRotateLongitude(outputOrbit,inputOrbit,0);
  return;
}



void FUN_OVR20GulpsOverlook__8006ee24(void)

{
  FUN_8001db58();
  UpdateCameraOrbitPhysics();
  return;
}



void FUN_OVR20GulpsOverlook__8006ee4c(int param_1)

{
  Orbit *outputOrbit;
  
  if (param_1 == 0xd) {
    INT_80067ed4 = 0;
    DAT_80067fc4 = 0;
    DAT_80067fc5 = 1;
    DAT_80067fc6 = 1;
    DAT_80067fc9 = 0;
    DAT_80067ee0 = 0;
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
    FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
    outputOrbit = &cameraOrbitPosition;
  }
  else {
    if (param_1 != 0x14) {
      return;
    }
    INT_80067ed4 = 0;
    DAT_80067fc4 = 1;
    DAT_80067fc5 = 1;
    DAT_80067fc6 = 1;
    DAT_80067fc9 = 0;
    DAT_80067ee0 = 0;
    DAT_80067ef0 = 0;
    FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Vec3_80067ee4);
    FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
    OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
    outputOrbit = &Orbit_80067f14;
  }
  OrbitRotateLongitude(outputOrbit,&Orbit_80067f00,0);
  return;
}



void FUN_OVR20GulpsOverlook__8006ef9c(void)

{
  CameraState CVar1;
  
  if (cameraState == BossLock) {
    if ((((inputStates[0].current & Triangle) == None) ||
        (CVar1 = Look, Spyro.field123_0x1c1 == '\0')) &&
       (((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) == None ||
        ((((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
          ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)) ||
         (CVar1 = QuickAlign, Spyro.field162_0x240 != 0)))))) {
      if (DAT_80067fec == Align) {
        CVar1 = cameraStateLookup[Spyro.state];
      }
      else {
        CVar1 = DAT_80067fec;
        if (DAT_80067fec == BossLock) {
          return;
        }
      }
    }
  }
  else {
    if (cameraState != New_Name_(2)) {
      return;
    }
    if (DAT_80067fec == Align) {
      CVar1 = cameraStateLookup[Spyro.state];
    }
    else {
      CVar1 = DAT_80067fec;
      if (DAT_80067fec == New_Name_(2)) {
        return;
      }
    }
  }
  SetCameraState(CVar1);
  return;
}



void FUN_OVR20GulpsOverlook__8006f0f0(void)

{
  uint uVar1;
  int local_20;
  undefined4 local_1c;
  undefined4 local_18;
  
  uVar1 = hudExtra1.displayNumber;
  hudExtra1.field1_0x1 = 3;
  UpdateHUDElement(&hudExtra1,riptoHPClone_);
  if (hudExtra1.displayNumber == uVar1 - 1) {
    local_20 = hudExtra1.displayNumber * 0xb0 + -0x740;
    local_1c = 0x2c4;
    local_18 = 0xc00;
    (*DAT_800670fc)(0x10,0x3b,&local_20,0);
  }
  return;
}



void FUN_OVR20GulpsOverlook__8006f198(void)

{
  short sVar1;
  short sVar2;
  uint uVar3;
  uint *puVar4;
  int iVar5;
  int iVar6;
  
  if (hudExtra1.displayState != Hidden) {
    if (DAT_80067008 == (DAT_80067008 / 3) * 3) {
      if (DAT_800670f4 == '\0') {
        uVar3 = rand();
        if ((uVar3 & 0xf) == 0) {
          DAT_800670f4 = '\x01';
        }
      }
      else {
        DAT_800670f4 = '\0';
      }
    }
    if (DAT_800670f4 == '\0') {
      iVar6 = 0;
    }
    else {
      iVar6 = DAT_80067008 % 3 + 1;
      if (2 < iVar6) {
        iVar6 = 4 - iVar6;
      }
    }
    SetTPage(0x58);
    sVar1 = FUN_80052498(&hudExtra1,0,0xec);
    RenderSprite((SpriteInfo *)&DAT_80063660,0x26,sVar1 + 0xc6,0x15);
    sVar1 = FUN_80052498(&hudExtra1,0,0xec);
    RenderSprite((SpriteInfo *)(iVar6 * 4 + -0x7ff9c970),0x26,sVar1 + 0xc9,0x12);
    iVar6 = 0;
    sVar1 = 0x28;
    do {
      iVar5 = 0xe;
      if (iVar6 == 0) {
        iVar5 = 0xd;
      }
      else if (iVar6 == 9) {
        iVar5 = 0xf;
      }
      if ((int)hudExtra1.displayNumber <= iVar6) {
        iVar5 = iVar5 + -4;
      }
      sVar2 = FUN_80052498(&hudExtra1,0,0xec);
      puVar4 = RenderSprite((SpriteInfo *)(&DAT_800635f8 + iVar5 * 4),sVar1,sVar2 + 0xec,7);
      if ((int)hudExtra1.displayNumber <= iVar6) {
        *(undefined2 *)((int)puVar4 + 0xe) = 0x5960;
      }
      iVar6 = iVar6 + 1;
      sVar1 = sVar1 + 0x14;
    } while (iVar6 < 10);
  }
  return;
}


/*
Unable to decompile 'FUN_OVR20GulpsOverlook__8006f3b0'
Cause: Exception while decompiling OVR20GulpsOverlook::8006f3b0: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80070a34'
Cause: Exception while decompiling OVR20GulpsOverlook::80070a34: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80070a80'
Cause: Exception while decompiling OVR20GulpsOverlook::80070a80: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80070a94'
Cause: Exception while decompiling OVR20GulpsOverlook::80070a94: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80070aa8'
Cause: Exception while decompiling OVR20GulpsOverlook::80070aa8: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80070abc'
Cause: Exception while decompiling OVR20GulpsOverlook::80070abc: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80070af0'
Cause: Exception while decompiling OVR20GulpsOverlook::80070af0: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80070b70'
Cause: Exception while decompiling OVR20GulpsOverlook::80070b70: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80070d78'
Cause: Exception while decompiling OVR20GulpsOverlook::80070d78: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80071e00'
Cause: Exception while decompiling OVR20GulpsOverlook::80071e00: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80076158'
Cause: Exception while decompiling OVR20GulpsOverlook::80076158: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__800764ec'
Cause: Exception while decompiling OVR20GulpsOverlook::800764ec: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__800765e4'
Cause: Exception while decompiling OVR20GulpsOverlook::800765e4: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__800767e4'
Cause: Exception while decompiling OVR20GulpsOverlook::800767e4: process: timeout

*/

/*
Unable to decompile 'FUN_OVR20GulpsOverlook__80076b70'
Cause: Exception while decompiling OVR20GulpsOverlook::80076b70: process: timeout

*/


Vec3 ** FUN_OVR20GulpsOverlook__8007a9a0(int param_1,int param_2)

{
  Object *pOVar1;
  char cVar2;
  undefined uVar3;
  undefined2 uVar4;
  short sVar5;
  Vec3 **ppVVar6;
  undefined4 uVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  undefined4 *puVar12;
  uint uVar13;
  int iVar14;
  Object *pOVar15;
  undefined4 uVar16;
  Spyro *pSVar17;
  int *piVar18;
  Vec3 *pVVar19;
  Vec3 *to;
  Vec3 local_90;
  Mat33 MStack_80;
  undefined local_60;
  char local_5f;
  undefined local_5e;
  Mat33 MStack_58;
  undefined local_38;
  byte local_37;
  byte local_36;
  
  ppVVar6 = (Vec3 **)FUN_80041290();
  if (ppVVar6 == (Vec3 **)0x0) {
    return (Vec3 **)0x0;
  }
  pVVar19 = *ppVVar6;
  MEMSET((int *)ppVVar6,0,0x58);
  *ppVVar6 = pVVar19;
  MEMSET(&pVVar19->x,0,0x18);
  *(short *)((int)ppVVar6 + 0x36) = (short)param_1;
  if ((param_2 == 0) || (uVar13 = (param_2 - (int)Objects) * -0x45d1745d >> 3, 0xff < uVar13)) {
    *(undefined *)((int)ppVVar6 + 0x3a) = 0xff;
  }
  else {
    *(char *)((int)ppVVar6 + 0x3a) = (char)uVar13;
  }
  FUN_800375c8(ppVVar6);
  if (param_1 == 0x1ae) {
    pVVar19 = *ppVVar6;
    *(undefined *)(ppVVar6 + 0x13) = 0x40;
    *(undefined *)((int)ppVVar6 + 0x4e) = 0x40;
    VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
    FUN_80041438(ppVVar6);
    uVar13 = rand();
    uVar7 = randomRangeGen(300,0x5dc);
    iVar14 = cosineLookup(uVar7);
    iVar8 = cosineLookup(uVar13 & 0xfff);
    *(short *)&pVVar19->x = (short)((iVar14 >> 6) * iVar8 * 300 >> 0x12);
    iVar14 = cosineLookup(uVar7);
    iVar8 = sineLookup(uVar13 & 0xfff);
    *(short *)((int)&pVVar19->x + 2) = (short)((iVar14 >> 6) * iVar8 * 300 >> 0x12);
    iVar14 = sineLookup(uVar7);
    *(short *)&pVVar19->y = (short)(iVar14 * 200 >> 0xc);
    ppVVar6[3] = (Vec3 *)((int)&ppVVar6[3]->x + *(short *)&pVVar19->x * 2);
    ppVVar6[4] = (Vec3 *)((int)&ppVVar6[4]->x + *(short *)((int)&pVVar19->x + 2) * 2);
    ppVVar6[5] = (Vec3 *)((int)&ppVVar6[5]->x + *(short *)&pVVar19->y * 2);
    iVar14 = rand();
    *(ushort *)((int)&pVVar19->y + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
    iVar14 = rand();
    *(ushort *)&pVVar19->z = ((ushort)iVar14 & 0x1f) - 0x10;
    iVar14 = rand();
    *(ushort *)((int)&pVVar19->z + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
    iVar14 = randomRangeGen(0x50,0x78);
    pVVar19[1].x = iVar14;
    return ppVVar6;
  }
  if (param_1 < 0x1af) {
    if (param_1 == 0xd3) {
LAB_OVR20GulpsOverlook__8007ab7c:
      pVVar19 = *ppVVar6;
      if (*(short *)((int)ppVVar6 + 0x36) == 0x10) {
        iVar14 = 10;
        if (lives < 4) {
          iVar14 = 7;
        }
        else if (lives < 7) {
          iVar14 = 9;
        }
        fodderCountTillNextLifeButterfly = fodderCountTillNextLifeButterfly + 1;
        if (iVar14 <= fodderCountTillNextLifeButterfly) {
          fodderCountTillNextLifeButterfly = 0;
          *(undefined2 *)((int)ppVVar6 + 0x36) = 0xd3;
        }
      }
      FUN_80041438(ppVVar6);
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x2a].z;
      VectorCopy(pVVar19,(Vec3 *)(ppVVar6 + 3));
      ppVVar6[7] = (Vec3 *)0xffffffff;
      *(undefined *)((int)ppVVar6 + 0x47) = 2;
      *(undefined2 *)((int)&pVVar19[1].x + 2) = 0x708;
      *(undefined *)((int)&pVVar19[1].y + 1) = 0;
      iVar14 = rand();
      *(byte *)((int)&pVVar19[1].y + 2) = (byte)iVar14 & 0xfc;
      return ppVVar6;
    }
    if (param_1 < 0xd4) {
      if (param_1 == 0x29) {
        pVVar19 = *ppVVar6;
        *(undefined *)(ppVVar6 + 0x13) = 0x20;
        *(undefined *)((int)ppVVar6 + 0x4e) = 0x20;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        if (*(short *)(param_2 + 0x36) == 0x197) {
          uVar7 = randomRangeGen(100,0x3ff);
          uVar13 = rand();
          iVar14 = randomRangeGen(0x78,0xaa);
          iVar8 = randomRangeGen(0x96,0xbe);
        }
        else {
          uVar7 = randomRangeGen(0,0x3ff);
          uVar13 = rand();
          iVar14 = 100;
          iVar8 = 100;
        }
        iVar9 = cosineLookup(uVar7);
        iVar10 = cosineLookup(uVar13 & 0xfff);
        *(short *)&pVVar19->x = (short)((iVar9 >> 6) * iVar10 * iVar14 >> 0x12);
        iVar9 = cosineLookup(uVar7);
        iVar10 = sineLookup(uVar13 & 0xfff);
        *(short *)((int)&pVVar19->x + 2) = (short)((iVar9 >> 6) * iVar10 * iVar14 >> 0x12);
        iVar14 = sineLookup(uVar7);
        *(short *)&pVVar19->y = (short)(iVar14 * iVar8 >> 0xc);
        iVar14 = rand();
        *(char *)(ppVVar6 + 0x11) = (char)iVar14;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
        ppVVar6[3] = (Vec3 *)((int)&ppVVar6[3]->x + *(short *)&pVVar19->x * 2);
        ppVVar6[4] = (Vec3 *)((int)&ppVVar6[4]->x + *(short *)((int)&pVVar19->x + 2) * 2);
        ppVVar6[5] = (Vec3 *)((int)&ppVVar6[5]->x + *(short *)&pVVar19->y * 2);
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->y + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
        iVar14 = rand();
        *(ushort *)&pVVar19->z = ((ushort)iVar14 & 0x1f) - 0x10;
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->z + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
        uVar7 = 0x5a;
        if (*(short *)(param_2 + 0x36) == 0x197) {
          uVar7 = 0x3c;
          uVar16 = 100;
        }
        else {
          uVar16 = 0x96;
        }
        uVar4 = randomRangeGen(uVar7,uVar16);
        *(undefined2 *)&pVVar19[1].x = uVar4;
        *(undefined2 *)((int)&pVVar19[1].x + 2) = 1;
        *(undefined2 *)((int)&pVVar19[1].y + 2) = 0;
        return ppVVar6;
      }
      if (param_1 < 0x2a) {
        if (param_1 == 0x10) goto LAB_OVR20GulpsOverlook__8007ab7c;
      }
      else if (param_1 == 0x78) {
        pVVar19 = *ppVVar6;
        FUN_80041438(ppVVar6);
        *(undefined *)((int)ppVVar6 + 0x49) = 0;
        *(undefined2 *)&pVVar19->x = 0;
        *(undefined2 *)&pVVar19->z = 0;
        *(undefined2 *)((int)&pVVar19->y + 2) = 0;
        *(undefined2 *)&pVVar19->y = 0;
        *(undefined *)((int)&pVVar19[1].x + 1) = 0x78;
        pVVar19[1].y = 0;
        pVVar19[1].z = 0;
        if (param_2 == 0) {
          uVar13 = Spyro.angleAsByte.yaw - 0x80 & 0xff;
          local_90.x = cosineLookupTable[uVar13] * 0x7d >> 9;
          local_90.z = 1000;
          local_90.y = sineLookupTable[uVar13] * 0x7d >> 9;
          VectorAdd((Vec3 *)(ppVVar6 + 3),&Spyro.position,&local_90);
        }
        else {
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        }
        *(undefined *)((int)&pVVar19->x + 2) = 0xff;
        return ppVVar6;
      }
    }
    else {
      if (param_1 == 0x146) {
        pVVar19 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        *(undefined2 *)&pVVar19->x = 0x10;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
        *(undefined *)(ppVVar6 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        sVar5 = *(short *)(param_2 + 0x36);
        if ((sVar5 == 0x198) || (sVar5 == 0x2c2)) {
          *(undefined *)((int)&pVVar19->x + 2) = 1;
          *(undefined *)((int)&pVVar19->x + 3) = 1;
          uVar3 = 0x7f;
        }
        else {
          if (sVar5 == 0x270) {
            *(undefined *)((int)&pVVar19->x + 2) = 2;
            *(undefined *)(ppVVar6 + 0x15) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x55) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x56) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
          }
          else {
            *(undefined *)((int)&pVVar19->x + 2) = 0;
          }
          uVar3 = 0x60;
          *(undefined *)((int)&pVVar19->x + 3) = 0;
        }
        *(undefined *)((int)ppVVar6 + 0x4f) = uVar3;
        *(undefined *)((int)ppVVar6 + 0x47) = 0xfe;
        uVar7 = Vec2OctagonalDistanceApproximation((Vec2 *)(ppVVar6 + 3),(Vec2 *)&cameraPosition);
        cVar2 = Atan2(uVar7,cameraPosition.z - (int)ppVVar6[5],0);
        *(char *)((int)ppVVar6 + 0x45) = cVar2 + -0x40;
        uVar3 = Atan2(cameraPosition.x - (int)ppVVar6[3],cameraPosition.y - (int)ppVVar6[4],0);
        *(undefined *)((int)ppVVar6 + 0x46) = uVar3;
        return ppVVar6;
      }
      if (param_1 < 0x147) {
        if (param_1 == 0x104) {
          FUN_80041438(ppVVar6);
          *(undefined *)(ppVVar6 + 0x15) = 2;
          if (param_2 != 0) {
            (*ppVVar6)->x = param_2;
            VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
            *(undefined *)((int)ppVVar6 + 0x4a) = 10;
            *(undefined *)(ppVVar6 + 0x13) = 8;
            ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x55].y;
            return ppVVar6;
          }
          ppVVar6[7] = (Vec3 *)0xffffffff;
          return ppVVar6;
        }
      }
      else if (param_1 == 0x197) {
        pSVar17 = (Spyro *)(param_2 + 0xc);
        (*ppVVar6)[1].z = -1;
        goto LAB_OVR20GulpsOverlook__8007bae4;
      }
    }
  }
  else {
    if (param_1 == 0x1e1) {
LAB_OVR20GulpsOverlook__8007ba78:
      pVVar19 = *ppVVar6;
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      pVVar19->x = 0x18;
      *(undefined *)((int)ppVVar6 + 0x57) = 0x30;
      *(undefined *)(ppVVar6 + 0x15) = 0;
      *(undefined *)((int)ppVVar6 + 0x55) = 0;
      *(undefined *)((int)ppVVar6 + 0x56) = 0;
      *(undefined *)((int)ppVVar6 + 0x4f) = 100;
      *(undefined *)((int)ppVVar6 + 0x47) = 0;
      iVar14 = rand();
      *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
      iVar14 = rand();
      *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
      return ppVVar6;
    }
    if (param_1 < 0x1e2) {
      if (param_1 == 0x1c0) {
        pVVar19 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        uVar13 = rand();
        uVar7 = randomRangeGen(300,0x800);
        iVar14 = cosineLookup(uVar7);
        iVar8 = cosineLookup(uVar13 & 0xfff);
        *(short *)&pVVar19->x = (short)(iVar14 >> 5) * (short)(iVar8 >> 0xc);
        iVar14 = cosineLookup(uVar7);
        iVar8 = sineLookup(uVar13 & 0xfff);
        *(short *)((int)&pVVar19->x + 2) = (short)(iVar14 >> 5) * (short)(iVar8 >> 0xc);
        iVar14 = sineLookup(uVar7);
        sVar5 = (short)(iVar14 >> 5);
        *(short *)&pVVar19->y = sVar5;
        if (sVar5 < 0x20) {
          *(undefined2 *)&pVVar19->y = 0x20;
        }
        *(short *)&pVVar19->y = *(short *)&pVVar19->y + 0x20;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
        uVar13 = rand();
        if (0x80 < (uVar13 & 0xff)) {
          iVar14 = rand();
          *(byte *)((int)ppVVar6 + 0x45) = ((byte)iVar14 & 0x1c) - 0x10;
          pVVar19[1].y = 1;
          if (0x20 < *(short *)&pVVar19->y) {
            *(undefined2 *)&pVVar19->y = 0x20;
          }
        }
        ppVVar6[3] = (Vec3 *)(&ppVVar6[3]->x + *(short *)&pVVar19->x);
        ppVVar6[4] = (Vec3 *)(&ppVVar6[4]->x + *(short *)((int)&pVVar19->x + 2));
        ppVVar6[5] = (Vec3 *)(&ppVVar6[5]->x + *(short *)&pVVar19->y);
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->y + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
        iVar14 = rand();
        *(ushort *)&pVVar19->z = ((ushort)iVar14 & 0x1f) - 0x10;
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->z + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
        cVar2 = randomRangeGen(0,0x14);
        *(undefined *)((int)&pVVar19[1].x + 1) = 8;
        *(char *)&pVVar19[1].x = '2' - cVar2;
        *(undefined2 *)((int)&pVVar19[1].x + 2) = 4;
        return ppVVar6;
      }
      if (param_1 < 0x1c1) {
        if (param_1 == 0x1bf) {
          pVVar19 = *ppVVar6;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          FUN_80041438(ppVVar6);
          VectorCopy(pVVar19,(Vec3 *)(param_2 + 0xc));
          *(undefined2 *)&pVVar19[1].x = 200;
          *(undefined *)&pVVar19[1].y = 0x46;
          *(undefined *)((int)&pVVar19[1].y + 1) = 3;
          *(undefined *)((int)&pVVar19[1].y + 2) = 0x30;
          return ppVVar6;
        }
      }
      else if (param_1 == 0x1e0) {
        pVVar19 = *ppVVar6;
        *(undefined *)(ppVVar6 + 0x13) = 0x20;
        *(undefined *)((int)ppVVar6 + 0x4e) = 0x20;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        if (*(short *)((int)ppVVar6 + 0x36) == 0x1e0) {
          uVar11 = rand();
          uVar11 = uVar11 & 0xfff;
          uVar13 = rand();
        }
        else {
          uVar11 = randomRangeGen(300,0x834);
          iVar14 = randomRangeGen(0xfffffa24,0x5dc);
          uVar13 = (uint)*(byte *)(param_2 + 0x46) + iVar14;
        }
        iVar14 = 0x78;
        if (*(short *)((int)ppVVar6 + 0x36) == 0x123) {
          iVar14 = 0xb4;
          iVar8 = 0xdc;
        }
        else {
          iVar8 = 0x96;
        }
        iVar9 = cosineLookup(uVar11);
        iVar10 = cosineLookup(uVar13 & 0xfff);
        *(short *)&pVVar19->x = (short)((iVar9 >> 6) * iVar10 * iVar14 >> 0x12);
        iVar9 = cosineLookup(uVar11);
        iVar10 = sineLookup(uVar13 & 0xfff);
        *(short *)((int)&pVVar19->x + 2) = (short)((iVar9 >> 6) * iVar10 * iVar14 >> 0x12);
        iVar14 = sineLookup(uVar11);
        *(short *)&pVVar19->y = (short)(iVar14 * iVar8 >> 0xc);
        if ((*(byte *)(param_2 + 0x51) != 0) && ((*(uint *)(param_2 + 0x18) & 0x100000) != 0)) {
          *(short *)&pVVar19->x =
               *(short *)&pVVar19->x +
               (short)(cosineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
          *(short *)((int)&pVVar19->x + 2) =
               *(short *)((int)&pVVar19->x + 2) +
               (short)(sineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
          sVar5 = randomRangeGen(0x28,0x46);
          *(short *)&pVVar19->y = *(short *)&pVVar19->y + sVar5;
        }
        iVar14 = (int)*(short *)((int)ppVVar6 + 0x36);
        if (iVar14 != 0x98) {
          if (iVar14 != 0x1e0) {
            if ((*(uint *)(param_2 + 0x18) & 0x20000) == 0) {
              *(short *)&pVVar19->x =
                   *(short *)&pVVar19->x +
                   (short)(cosineLookupTable[*(byte *)(param_2 + 0x46)] * 0x23 >> 10);
              iVar8 = (int)sineLookupTable[*(byte *)(param_2 + 0x46)];
              iVar14 = iVar8 * 0x24;
            }
            else {
              *(short *)&pVVar19->x =
                   *(short *)&pVVar19->x +
                   (short)(cosineLookupTable[*(byte *)(param_2 + 0x46)] * 0x37 >> 10);
              iVar8 = (int)sineLookupTable[*(byte *)(param_2 + 0x46)];
              iVar14 = iVar8 * 0x38;
            }
            *(short *)((int)&pVVar19->x + 2) =
                 *(short *)((int)&pVVar19->x + 2) + (short)(iVar14 - iVar8 >> 10);
          }
          iVar14 = (int)*(short *)((int)ppVVar6 + 0x36);
        }
        if ((((iVar14 == 0x3d) || (iVar14 == 0x58)) || (iVar14 == 0x42)) ||
           ((iVar14 - 0x284U & 0xffff) < 2)) {
          *(undefined *)(ppVVar6 + 0x11) = *(undefined *)(param_2 + 0x44);
          *(undefined *)((int)ppVVar6 + 0x45) = *(undefined *)(param_2 + 0x45);
          *(undefined *)((int)ppVVar6 + 0x46) = *(undefined *)(param_2 + 0x46);
        }
        else {
          iVar14 = rand();
          *(char *)(ppVVar6 + 0x11) = (char)iVar14;
          iVar14 = rand();
          *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
          iVar14 = rand();
          *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
          ppVVar6[3] = (Vec3 *)((int)&ppVVar6[3]->x + *(short *)&pVVar19->x * 2);
          ppVVar6[4] = (Vec3 *)((int)&ppVVar6[4]->x + *(short *)((int)&pVVar19->x + 2) * 2);
          ppVVar6[5] = (Vec3 *)((int)&ppVVar6[5]->x + *(short *)&pVVar19->y * 2);
        }
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->y + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
        iVar14 = rand();
        *(ushort *)&pVVar19->z = ((ushort)iVar14 & 0x1f) - 0x10;
        iVar14 = rand();
        *(ushort *)((int)&pVVar19->z + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
        uVar4 = randomRangeGen(0x5a,0x96);
        *(undefined2 *)&pVVar19[1].x = uVar4;
        *(undefined2 *)((int)&pVVar19[1].x + 2) = 1;
        *(undefined2 *)((int)&pVVar19[1].y + 2) = 0;
        return ppVVar6;
      }
    }
    else {
      if (param_1 == 0x1e3) {
        pVVar19 = *ppVVar6;
        FUN_80041438(ppVVar6);
        *(undefined *)(ppVVar6 + 0x13) = 0x40;
        *(undefined *)((int)ppVVar6 + 0x4e) = 0x40;
        if (param_2 != 0) {
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          *(undefined *)((int)&pVVar19->y + 3) = 0x30;
          *(undefined *)((int)ppVVar6 + 0x4f) = 0x7f;
          *(char *)(ppVVar6 + 0x15) = (char)((int)((uint)*(byte *)((int)&pVVar19->y + 3) * 3) >> 1);
          uVar3 = *(undefined *)((int)&pVVar19->y + 3);
          *(undefined *)((int)ppVVar6 + 0x56) = 0;
          *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
          *(undefined *)((int)ppVVar6 + 0x55) = uVar3;
          return ppVVar6;
        }
        local_90.x = 0x1b8;
        local_90.y = 0;
        local_90.z = 0;
        if (cameraState == Look) {
          to = (Vec3 *)(ppVVar6 + 3);
          VectorCopy(to,&cameraPosition);
          local_60 = 0;
          local_5f = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
          local_5e = (undefined)((ushort)VectorShort_80067ec8.Z >> 4);
          BuildRotationMatrix(&local_60,&MStack_80,(Mat33 *)0x0);
          MatrixMultVector(&MStack_80,&local_90,&local_90);
          VectorAdd(to,to,&local_90);
          VectorAdd(to,to,&local_90);
          pSVar17 = (Spyro *)&local_90;
        }
        else {
          VectorCopy((Vec3 *)(ppVVar6 + 3),&cameraPosition);
          local_38 = 0;
          local_37 = Spyro.angleAsByte.roll;
          if ((Spyro.airTime == 0) && (0xf8 < (byte)(Spyro.angleAsByte.roll - 4))) {
            local_37 = 0;
          }
          local_36 = Spyro.angleAsByte.yaw;
          BuildRotationMatrix(&local_38,&MStack_58,(Mat33 *)0x0);
          MatrixMultVector(&MStack_58,&local_90,&local_90);
          ppVVar6[3] = (Vec3 *)0x1f4;
          ppVVar6[4] = (Vec3 *)0x0;
          ppVVar6[5] = (Vec3 *)0x0;
          MatrixMultVector(&MStack_58,(Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3));
          pSVar17 = &Spyro;
        }
        VectorAdd((Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3),&pSVar17->position);
        iVar14 = VectorLength(&local_90,0);
        uVar3 = Atan2(iVar14,local_90.z,0);
        *(undefined *)((int)ppVVar6 + 0x45) = uVar3;
        uVar3 = Atan2(local_90.x,local_90.y,0);
        *(undefined *)((int)ppVVar6 + 0x46) = uVar3;
        pOVar1 = DAT_800670bc;
        pOVar15 = Objects;
        *(short *)&pVVar19->x = (short)local_90.x;
        *(short *)((int)&pVVar19->x + 2) = (short)local_90.y;
        *(short *)&pVVar19->y = (short)local_90.z;
        for (; (pOVar15 < pOVar1 && (pOVar15->type != 0x407)); pOVar15 = pOVar15 + 1) {
        }
        if (pOVar15 != (Object *)0x0) {
          piVar18 = (int *)pOVar15->data;
          iVar14 = *piVar18;
          *piVar18 = iVar14 + 0x144;
          if (0x797 < iVar14 + 0x144) {
            *piVar18 = 0;
          }
          puVar12 = (undefined4 *)((int)piVar18 + *piVar18 + 0xc);
          pVVar19->z = (int)puVar12;
          *puVar12 = 0;
          MemCopy(&pVVar19[1].y,piVar18 + 1,8);
        }
        *(undefined *)((int)&pVVar19->y + 3) = 0x6e;
        *(undefined *)((int)ppVVar6 + 0x4b) = 1;
        FUN_80050648(ppVVar6,0,0);
        return ppVVar6;
      }
      if (param_1 < 0x1e3) {
        pVVar19 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        pVVar19->x = 0x10;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
        *(undefined *)(ppVVar6 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x55) = 0x40;
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
        *(undefined *)((int)ppVVar6 + 0x4f) = 0x46;
        *(undefined *)((int)ppVVar6 + 0x47) = 4;
        return ppVVar6;
      }
      if (param_1 == 0x21d) goto LAB_OVR20GulpsOverlook__8007ba78;
    }
  }
  pSVar17 = (Spyro *)(param_2 + 0xc);
  if (param_2 == 0) {
    pSVar17 = &Spyro;
  }
LAB_OVR20GulpsOverlook__8007bae4:
  VectorCopy((Vec3 *)(ppVVar6 + 3),&pSVar17->position);
  FUN_80041438(ppVVar6);
  return ppVVar6;
}



undefined * FUN_OVR20GulpsOverlook__8007bb28(int param_1)

{
  byte bVar1;
  bool bVar2;
  char cVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  short sVar9;
  char cVar10;
  short sVar11;
  char *pcVar12;
  undefined *puVar13;
  VectorShort *pVVar14;
  undefined *puVar15;
  Vec3 local_58;
  undefined4 local_48;
  undefined4 local_44;
  int local_40;
  int local_3c;
  int local_38;
  
  cVar10 = DAT_80066f18[1];
  puVar13 = DAT_80066f18;
  if (cVar10 != -1) {
    cVar4 = (char)param_1;
    cVar3 = cVar4 * '\x02';
    pcVar12 = DAT_80066f18 + 1;
    puVar15 = DAT_80066f18 + 0x18;
    pVVar14 = (VectorShort *)(DAT_80066f18 + 4);
    do {
      if (cVar10 == -2) goto LAB_OVR20GulpsOverlook__8007c9d0;
      switch(*puVar13) {
      case 0:
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar3;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_OVR20GulpsOverlook__8007c270;
      case 1:
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_OVR20GulpsOverlook__8007c270;
      case 9:
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[9] = pcVar12[9] + cVar3;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_OVR20GulpsOverlook__8007c270;
      case 10:
        if (((Spyro.state != Drowning) || (-1 < Spyro.health)) &&
           ((Spyro.field168_0x260 == 0 && (Spyro.iframeTimer != 0)))) {
          VectorCopy(&local_58,&Spyro.position);
          iVar7 = cosineLookup((int)*(short *)(pcVar12 + 0x17));
          local_58.x = local_58.x + (iVar7 >> 4);
          iVar7 = sineLookup((int)*(short *)(pcVar12 + 0x17));
          local_58.y = local_58.y + (iVar7 >> 4);
          local_58.z = local_58.z + 0x100;
          VecIntToShort(pVVar14,&local_58);
          sVar9 = *(short *)(pcVar12 + 0x17);
          *(short *)(pcVar12 + 0x17) = sVar9 + 0x40;
          iVar7 = cosineLookup((int)(short)(sVar9 + 0x40) - (int)VectorShort_80067ec8.Z & 0xfff);
          if (iVar7 < 0) {
            iVar7 = -iVar7;
          }
          pcVar12[9] = (char)(iVar7 / 0xaa);
          break;
        }
        goto LAB_OVR20GulpsOverlook__8007c978;
      case 0xb:
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x15) = *(short *)(pcVar12 + 0x15) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        VectorShortAdd(pVVar14,pVVar14,puVar13 + 0x12);
        pcVar12[9] = pcVar12[9] + cVar3;
        pcVar12[0xb] = pcVar12[0xb] + -4;
        cVar10 = pcVar12[0xd];
        pcVar12[10] = pcVar12[10] + cVar4 * '\x04';
        pcVar12[0xd] = cVar10 + -4;
        pcVar12[0xc] = pcVar12[0xc] + -4;
        if ((char)(cVar10 + -4) == '\0') goto LAB_OVR20GulpsOverlook__8007c978;
        goto LAB_OVR20GulpsOverlook__8007c278;
      case 0xc:
        pcVar12[10] = pcVar12[10] + '\b';
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -8;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -8;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -8;
        }
        uVar8 = *(uint *)(pcVar12 + 0xb);
        goto joined_r0x8007c194;
      case 0xd:
        if ((0x1b < (byte)pcVar12[1]) || (pcVar12[2] == '\0'))
        goto LAB_OVR20GulpsOverlook__8007c978;
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        uVar8 = (uint)(byte)pcVar12[1];
        pcVar12[9] = pcVar12[9] + cVar3;
        if (uVar8 < 0xd) {
          if (uVar8 < 5) {
            pcVar12[0xb] = -0x80;
            pcVar12[0xc] = -0x80;
            iVar7 = (uint)(byte)pcVar12[1] * -0x20 + 0x80;
            if (iVar7 < 0) {
              iVar7 = 0;
            }
            pcVar12[0xd] = (char)iVar7;
          }
          else {
            pcVar12[0xb] = -0x80;
            pcVar12[0xd] = '\0';
            pcVar12[0xc] = (pcVar12[1] + -4) * -8 + -0x80;
          }
        }
        else {
          iVar7 = (uVar8 - 0xc) * -8 + 0x80;
          if (iVar7 < 0) {
            iVar7 = 0;
          }
          pcVar12[0xb] = (char)iVar7;
          iVar7 = ((byte)pcVar12[1] - 0xc) * -4 + 0x40;
          if (iVar7 < 0) {
            iVar7 = 0;
          }
          pcVar12[0xc] = (char)iVar7;
          pcVar12[0xd] = '\0';
        }
        pcVar12[1] = pcVar12[1] + cVar4;
        break;
      case 0x21:
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar12[0xb] + param_1 * -2;
        pcVar12[9] = pcVar12[9] + cVar3;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        bVar1 = pcVar12[1];
        cVar10 = (char)iVar7;
        pcVar12[0xb] = cVar10;
        pcVar12[0xc] = cVar10;
        pcVar12[0xd] = cVar10;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        if (((0x1f < ((uint)bVar1 + param_1 & 0xff)) || (pcVar12[2] == '\0')) || (iVar7 == 0))
        goto LAB_OVR20GulpsOverlook__8007c978;
        break;
      case 0x3b:
        pcVar12[10] = pcVar12[10] + '\b';
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if ((DAT_80067008 & 1) != 0) {
          *(short *)(pcVar12 + 0x19) = *(short *)(pcVar12 + 0x19) + 1;
        }
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -4;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -4;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -4;
        }
        uVar8 = *(uint *)(pcVar12 + 0xb);
joined_r0x8007c194:
        if ((uVar8 & 0xffffff) != 0) goto LAB_OVR20GulpsOverlook__8007c278;
        goto LAB_OVR20GulpsOverlook__8007c978;
      case 0x42:
        iVar7 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar12[1] & 1U) != 0) {
              *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
              *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
              *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
              if ((pcVar12[1] & 2U) != 0) {
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0x13) = *(short *)(pcVar12 + 0x13) + -1 + ((ushort)iVar6 & 2);
              }
            }
            iVar7 = iVar7 + 1;
            pcVar12[1] = pcVar12[1] + '\x01';
          } while (iVar7 < param_1);
        }
        bVar2 = (byte)pcVar12[1] < 0x18;
LAB_OVR20GulpsOverlook__8007c270:
        if (bVar2) {
LAB_OVR20GulpsOverlook__8007c278:
          if (pcVar12[2] != '\0') break;
        }
LAB_OVR20GulpsOverlook__8007c978:
        FUN_80041d20(puVar13);
        break;
      case 0x46:
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        if ((0x1f < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR20GulpsOverlook__8007c978;
        local_48._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_48._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar9);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_48._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar9;
        iVar7 = rand();
        local_48._0_2_ = (short)local_48 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_48._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_48 = CONCAT22(sVar9,(short)local_48);
        if ((pcVar12[1] & 1U) != 0) {
          local_44 = CONCAT22(local_44._2_2_,(short)local_44 + -1);
        }
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_48;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar9;
        cVar10 = pcVar12[0xf];
        pcVar12[0xf] = cVar10 - 3U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_44;
        if ((byte)(cVar10 - 3U) < 0x80) {
          pcVar12[0xf] = -0x80;
        }
        cVar10 = pcVar12[0x10];
        pcVar12[0x10] = cVar10 - 4U;
        if ((byte)(cVar10 - 4U) < 0x60) {
          pcVar12[0x10] = '`';
        }
        cVar10 = pcVar12[0x13];
        pcVar12[0x11] = '\0';
        pcVar12[0x13] = cVar10 - 3U;
        if ((byte)(cVar10 - 3U) < 0xc0) {
          pcVar12[0x13] = -0x40;
        }
        cVar10 = pcVar12[0x14];
        pcVar12[0x14] = cVar10 - 4U;
        if ((byte)(cVar10 - 4U) < 0x80) {
          pcVar12[0x14] = -0x80;
        }
        cVar10 = pcVar12[0x15];
        pcVar12[0x15] = cVar10 - 6U;
        if ((byte)(cVar10 - 6U) < 0x20) {
          pcVar12[0x15] = ' ';
        }
        break;
      case 0x47:
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        if ((0x1f < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR20GulpsOverlook__8007c978;
        local_40 = (int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3);
        local_3c = (int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5);
        local_38 = (int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7);
        uVar8 = rand();
        local_40 = local_40 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_3c = local_3c + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_38 = local_38 + -1 + (uVar8 & 2);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_40;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + (short)local_3c;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_38;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 9) - (short)local_40;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 0xb) - (short)local_3c;
        pcVar12[0x13] = pcVar12[0x13] + -2;
        pcVar12[0x15] = pcVar12[0x15] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -2;
        pcVar12[0x10] = pcVar12[0x10] + -3;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0xd) - (short)local_38;
        pcVar12[0x11] = pcVar12[0x11] + -3;
        break;
      case 0x48:
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        if ((0x37 < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR20GulpsOverlook__8007c978;
        local_48 = (int)*(short *)(pcVar12 + 3) - (int)*(short *)(pcVar12 + 9) >> 1;
        local_44 = (int)*(short *)(pcVar12 + 5) - (int)*(short *)(pcVar12 + 0xb) >> 1;
        local_40 = (int)*(short *)(pcVar12 + 7) - (int)*(short *)(pcVar12 + 0xd) >> 1;
        uVar8 = rand();
        local_48 = local_48 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_44 = local_44 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_40 = local_40 + -1 + (uVar8 & 2);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + (short)local_44;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)local_40;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 3) + (short)local_48 * -2;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 5) + (short)local_44 * -2;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 7) + (short)local_40 * -2;
        break;
      case 0x4a:
        cVar10 = pcVar12[1];
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        pcVar12[1] = cVar10 + 1U;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        pcVar12[0xc] = pcVar12[0xc] + -0xf;
        if ((pcVar12[2] == '\0') || (0x10 < (byte)(cVar10 + 1U)))
        goto LAB_OVR20GulpsOverlook__8007c978;
        break;
      case 0x4e:
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        if ((0x27 < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR20GulpsOverlook__8007c978;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        iVar7 = rand();
        *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar7 & 2);
        uVar8 = rand();
        iVar7 = (*(ushort *)(pcVar12 + 0x13) - 1) + (uVar8 & 2);
        *(short *)(pcVar12 + 0x13) = (short)iVar7;
        if (2 < iVar7 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar12 + 0x13) = 2;
        }
        if (*(short *)(pcVar12 + 0x13) < -4) {
          *(undefined2 *)(pcVar12 + 0x13) = 0xfffc;
        }
        pcVar12[0xb] = pcVar12[0xb] + -2;
        pcVar12[0xd] = pcVar12[0xd] + -1;
        pcVar12[0xc] = pcVar12[0xc] + -2;
        break;
      case 0x4f:
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        local_48 = CONCAT22(sVar9,sVar11);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar5);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar9;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar5;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar9;
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR20GulpsOverlook__8007c978;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        pcVar12[0x13] = pcVar12[0x13] + -3;
        pcVar12[0x10] = pcVar12[0x10] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -4;
        if (5 < (byte)pcVar12[0x15]) {
          pcVar12[0x15] = pcVar12[0x15] - 6;
        }
      }
LAB_OVR20GulpsOverlook__8007c9d0:
      pcVar12 = pcVar12 + 0x20;
      puVar15 = puVar15 + 0x20;
      pVVar14 = (VectorShort *)&pVVar14[5].Y;
      cVar10 = *pcVar12;
      puVar13 = puVar13 + 0x20;
    } while (cVar10 != -1);
  }
  return puVar13;
}



undefined *
FUN_OVR20GulpsOverlook__8007ca28(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined *puVar5;
  undefined uVar6;
  int iVar7;
  Vec3 local_d0;
  Vec3 local_c0;
  Vec3 local_b0;
  Vec3 local_a0;
  Vec3 local_90;
  undefined local_80;
  undefined local_7f;
  undefined local_7e;
  Mat33 MStack_78;
  Vec3 local_58;
  int local_48;
  Vec3 *local_40;
  int local_30;
  
  iVar7 = 0;
  puVar5 = (undefined *)0x0;
  if (0 < param_1) {
    local_40 = &local_c0;
    local_30 = 0;
    local_48 = param_1;
    do {
      uVar6 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar2 = rand();
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xb] = (char)iVar2;
        puVar5[0xe] = 0x80;
        goto LAB_OVR20GulpsOverlook__8007d13c;
      case 1:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0xc] = 0x60;
        puVar5[0xd] = 0x60;
        puVar5[0xe] = 0x60;
        goto LAB_OVR20GulpsOverlook__8007d13c;
      case 9:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        VectorCopy(&local_d0,&Spyro.position);
        uVar3 = rand();
        local_d0.x = local_d0.x + -0x3f + (uVar3 & 0x7e);
        uVar3 = rand();
        local_d0.y = local_d0.y + -0x3f + (uVar3 & 0x7e);
        VecIntToShort((VectorShort *)(puVar5 + 4),&local_d0);
        VectorCopy(&local_d0,&Spyro.physicsVelocity);
        VectorShiftRight(&local_d0,6);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),&local_d0);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar2 = rand();
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xb] = (char)iVar2;
        puVar5[0xe] = 0x80;
        goto LAB_OVR20GulpsOverlook__8007d13c;
      case 10:
        puVar5 = (undefined *)FUN_80041c50(3);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0x1f;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),&Spyro.position);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_80064654)[local_30];
        puVar5[0xd] = (&DAT_80064655)[local_30];
        uVar6 = (&DAT_80064656)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar6;
        *(short *)(puVar5 + 0x18) = (short)(((local_48 - iVar7) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[3] = 1;
        puVar5[0x11] = 4;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar7 * 0xc),local_40);
        VectorAdd(local_40,local_40,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar3 = rand();
          local_c0.x = (local_c0.x + 0x100) - (uVar3 & 0x1ff);
          uVar3 = rand();
          local_c0.y = (local_c0.y + 0x100) - (uVar3 & 0x1ff);
          uVar3 = rand();
          local_c0.z = (local_c0.z + 0x100) - (uVar3 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar3 = rand();
          local_c0.x = (local_c0.x + 0x80) - (uVar3 & 0xff);
          uVar3 = rand();
          local_c0.y = (local_c0.y + 0x80) - (uVar3 & 0xff);
          uVar3 = rand();
          local_c0.z = (local_c0.z + 0x80) - (uVar3 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar5 + 4),local_40);
        *(undefined4 *)(puVar5 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar2 = rand();
        puVar5[10] = ((byte)iVar2 & 7) + 0x20;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar5 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar7 * 0xc));
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x18) = (*(short *)(puVar5 + 0x18) >> 2) + -4 + ((ushort)iVar2 & 7);
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x1a) = (*(short *)(puVar5 + 0x1a) >> 2) + -4 + ((ushort)iVar2 & 7);
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x1c) = (*(short *)(puVar5 + 0x1c) >> 2) + -4 + ((ushort)iVar2 & 7);
        break;
      case 0xd:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0xc] = 0xff;
        puVar5[0xd] = 0xff;
        puVar5[0xe] = 0;
        goto LAB_OVR20GulpsOverlook__8007d13c;
      case 0x21:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_a0,&Spyro.physicsVelocity);
          VectorShiftRight(&local_a0,6);
          VectorCopy(&local_b0,&Spyro.position);
          local_b0.z = local_b0.z + -0x164;
          uVar3 = rand();
          local_b0.x = (local_b0.x + 0x80) - (uVar3 & 0xff);
          uVar3 = rand();
          uVar6 = 0x30;
          local_b0.y = (local_b0.y + 0x80) - (uVar3 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_b0.x = 0x164;
          local_b0.y = 0;
          local_b0.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_b0,&local_b0);
          VectorAdd(&local_b0,&local_b0,&Spyro.position);
          uVar6 = 0x40;
          uVar3 = rand();
          local_a0.x = -(uVar3 & 7);
          uVar3 = rand();
          local_a0.y = ((int)((uint)(ushort)cosineLookupTable[iVar7 * 0x20] << 0x10) >> 0x17) -
                       ((uVar3 & 0xf) - 8);
          local_a0.z = (int)((uint)(ushort)sineLookupTable[iVar7 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_a0,&local_a0);
        }
        else {
          if (param_4 == (Vec3 *)0x2) {
            iVar4 = iVar7 << 5;
            iVar2 = 6;
            uVar6 = 0x30;
          }
          else {
            iVar4 = iVar7 * 0x20 + 0x10;
            iVar2 = 5;
            uVar6 = 0x40;
          }
          VectorCopy(&local_b0,&Spyro.position);
          local_b0.x = local_b0.x + ((int)cosineLookupTable[iVar4] >> iVar2);
          local_b0.z = local_b0.z + -0x164;
          local_b0.y = local_b0.y + ((int)sineLookupTable[iVar4] >> iVar2);
          local_a0.x = (int)cosineLookupTable[iVar4] >> iVar2 + 1;
          local_a0.z = 0;
          local_a0.y = (int)sineLookupTable[iVar4] >> iVar2 + 1;
        }
        VecIntToShort((VectorShort *)(puVar5 + 4),&local_b0);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),&local_a0);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0xc] = uVar6;
        puVar5[0xd] = uVar6;
        puVar5[0xe] = uVar6;
LAB_OVR20GulpsOverlook__8007d13c:
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x3b:
        puVar5 = (undefined *)FUN_80041c50(5);
        puVar5[3] = 1;
        *puVar5 = uVar6;
        puVar5[0x11] = 0x10;
        puVar5[1] = puVar5[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        iVar2 = rand();
        *(ushort *)(puVar5 + 4) = (*(short *)(puVar5 + 4) + 0x10) - ((ushort)iVar2 & 0x1f);
        iVar2 = rand();
        *(ushort *)(puVar5 + 6) = (*(short *)(puVar5 + 6) + 8) - ((ushort)iVar2 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar1 = 0x2e0080c0;
        }
        else {
          uVar1 = 0x2e00c000;
        }
        *(undefined4 *)(puVar5 + 0xc) = uVar1;
        iVar2 = rand();
        puVar5[10] = ((byte)iVar2 & 0xf) + 0x14;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0x10] = 0;
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x18) = ((ushort)iVar2 & 7) - 4;
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x1a) = -2 - ((ushort)iVar2 & 7);
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x1c) = ((ushort)iVar2 & 0xf) - 8;
        break;
      case 0x42:
        puVar5 = (undefined *)FUN_80041c50(0);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0xf;
        puVar5[3] = 1;
        iVar2 = rand();
        *(ushort *)(puVar5 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar2 & 0xf) + -8;
        iVar2 = rand();
        *(ushort *)(puVar5 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar2 & 0xf) + -8;
        iVar2 = rand();
        iVar4 = param_3->z;
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)(iVar4 >> 2) + ((ushort)iVar2 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_OVR20GulpsOverlook__8007d330;
        }
        uVar3 = rand();
        switch(uVar3 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_OVR20GulpsOverlook__8007d330;
        case 2:
          puVar5[0xc] = 0;
LAB_OVR20GulpsOverlook__8007d330:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_OVR20GulpsOverlook__8007d380;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_OVR20GulpsOverlook__8007d380;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_OVR20GulpsOverlook__8007d380;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_OVR20GulpsOverlook__8007d380:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)FUN_80041c50(1);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0xf;
        puVar5[3] = 1;
        local_80 = 0;
        iVar2 = rand();
        local_7f = (undefined)iVar2;
        iVar2 = rand();
        local_7e = (undefined)iVar2;
        BuildRotationMatrix(&local_80,&MStack_78,(Mat33 *)0x0);
        local_90.y = 0;
        local_90.z = 0;
        local_90.x = (int)param_4;
        MatrixMultVector(&MStack_78,&local_90,&local_90);
        *(short *)(puVar5 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar5 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar5 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_90.x * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_90.y * 2;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_90.z * 2;
        break;
      case 0x47:
        puVar5 = (undefined *)FUN_80041c50(1);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 7;
        puVar5[3] = 1;
        uVar3 = rand();
        local_58.x = (int)(((uVar3 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar3 = rand();
        local_58.y = (int)(((uVar3 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar3 = rand();
        local_58.z = (int)(((uVar3 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)(param_3->x >> 2) + (short)local_58.x * 4;
        *(short *)(puVar5 + 6) = (short)(param_3->y >> 2) + (short)local_58.y * 4;
        *(short *)(puVar5 + 8) = (short)(param_3->z >> 2) + (short)local_58.z * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_58.x;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_58.y;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_58.z;
        break;
      case 0x4a:
        puVar5 = (undefined *)FUN_80041c50(0);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0xf;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar5 + 0x10),param_4);
        iVar2 = rand();
        puVar5[0xc] = (byte)iVar2 | 0xc0;
        iVar2 = rand();
        puVar5[0xd] = ((byte)iVar2 & 0x3f) + 0x80;
        puVar5[0xe] = 0;
        puVar5[0xf] = 0x40;
        puVar5[10] = 4;
        break;
      case 0x4e:
        puVar5 = (undefined *)FUN_80041c50(0);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0x1f;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        iVar2 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar2 & 0x3f);
        iVar2 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar2 & 0x3f);
        iVar2 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar2 & 0x3f);
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar2 & 2) - 1;
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar2 & 2) - 1;
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar2 & 1);
        iVar2 = rand();
        puVar5[0xc] = (byte)iVar2 | 0x80;
        uVar3 = rand();
        uVar3 = (uVar3 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar3;
        if ((byte)puVar5[0xc] < uVar3) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar2 = rand();
        puVar5[0xe] = ((byte)iVar2 & 0x3f) + 0x40;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)FUN_80041c50(1);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0xf;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 10),param_3);
        VectorAdd(&local_58,param_3,param_4);
        uVar3 = rand();
        local_58.x = local_58.x + -0x20 + (uVar3 & 0x3f);
        uVar3 = rand();
        local_58.y = local_58.y + -0x20 + (uVar3 & 0x3f);
        uVar3 = rand();
        local_58.z = local_58.z + -0x40 + (uVar3 & 0x7f);
        VecIntToShort((VectorShort *)(puVar5 + 4),&local_58);
        puVar5[0x17] = 2;
        iVar2 = rand();
        puVar5[0x10] = (byte)iVar2 | 0xc0;
        iVar2 = rand();
        puVar5[0x11] = ((byte)iVar2 & 0x3f) + 0xa0;
        puVar5[0x12] = 0;
        iVar2 = rand();
        puVar5[0x14] = (byte)iVar2 | 0xe0;
        iVar2 = rand();
        puVar5[0x15] = (byte)iVar2 | 0xe0;
        puVar5[0x16] = 0x80;
        puVar5[0x13] = 0x50;
      }
      local_30 = local_30 + 4;
      iVar7 = iVar7 + 1;
    } while (iVar7 < local_48);
  }
  return puVar5;
}


/*
Unable to decompile 'FUN_OVR21WinterTundra__800705c8'
Cause: Exception while decompiling OVR21WinterTundra::800705c8: process: timeout

*/


Vec3 ** FUN_OVR21WinterTundra__80079d68(int param_1,int param_2)

{
  Object *pOVar1;
  char cVar2;
  undefined uVar3;
  undefined2 uVar4;
  short sVar5;
  Vec3 **ppVVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  int iVar10;
  undefined4 uVar11;
  undefined4 *puVar12;
  uint uVar13;
  int iVar14;
  Object *pOVar15;
  Spyro *pSVar16;
  int *piVar17;
  Vec3 *pVVar18;
  Vec3 *pVVar19;
  Vec3 local_a0;
  Mat33 MStack_90;
  undefined local_70;
  char local_6f;
  undefined local_6e;
  Mat33 MStack_68;
  undefined local_48;
  byte local_47;
  byte local_46;
  Vec3 aVStack_40 [2];
  
  ppVVar6 = (Vec3 **)FUN_80041290();
  if (ppVVar6 == (Vec3 **)0x0) {
    return (Vec3 **)0x0;
  }
  pVVar18 = *ppVVar6;
  MEMSET((int *)ppVVar6,0,0x58);
  *ppVVar6 = pVVar18;
  MEMSET(&pVVar18->x,0,0x18);
  *(short *)((int)ppVVar6 + 0x36) = (short)param_1;
  if ((param_2 == 0) || (uVar13 = (param_2 - (int)Objects) * -0x45d1745d >> 3, 0xff < uVar13)) {
    *(undefined *)((int)ppVVar6 + 0x3a) = 0xff;
  }
  else {
    *(char *)((int)ppVVar6 + 0x3a) = (char)uVar13;
  }
  FUN_800375c8(ppVVar6);
  if (param_1 < 0x135) {
    if (0x131 < param_1) {
      pVVar18 = *ppVVar6;
      *(undefined *)(ppVVar6 + 0x13) = 0x20;
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      uVar13 = rand();
      uVar9 = rand();
      uVar9 = uVar9 & 0x7ff;
      iVar14 = cosineLookup(uVar9);
      iVar10 = cosineLookup(uVar13 & 0xfff);
      *(short *)&pVVar18->x =
           (short)(char)(iVar14 * iVar10 * (uint)*(byte *)(param_2 + 0x49) >> 0x18);
      iVar14 = cosineLookup(uVar9);
      iVar10 = sineLookup(uVar13 & 0xfff);
      *(short *)((int)&pVVar18->x + 2) =
           (short)(char)(iVar14 * iVar10 * (uint)*(byte *)(param_2 + 0x49) >> 0x18);
      iVar14 = sineLookup(uVar9);
      *(short *)&pVVar18->y = (short)((int)(iVar14 * (uint)*(byte *)(param_2 + 0x49)) >> 0xc);
      if (((*(uint *)(param_2 + 0x18) & 0x20000) != 0) &&
         ((Spyro.maybeSubstate == Charge || (Spyro.maybeSubstate == UnderwaterCharge)))) {
        *(short *)&pVVar18->x = *(short *)&pVVar18->x + (short)(Spyro.trueVelocity.x >> 6);
        *(short *)((int)&pVVar18->x + 2) =
             *(short *)((int)&pVVar18->x + 2) + (short)(Spyro.trueVelocity.y >> 6);
      }
      if ((*(byte *)(param_2 + 0x51) != 0) && ((*(uint *)(param_2 + 0x18) & 0x100000) != 0)) {
        *(short *)&pVVar18->x =
             *(short *)&pVVar18->x +
             (short)(cosineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
        *(short *)((int)&pVVar18->x + 2) =
             *(short *)((int)&pVVar18->x + 2) +
             (short)(sineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
        sVar5 = randomRangeGen(0x28,0x46);
        *(short *)&pVVar18->y = *(short *)&pVVar18->y + sVar5;
      }
      ppVVar6[3] = (Vec3 *)(&ppVVar6[3]->x + *(short *)&pVVar18->x);
      ppVVar6[4] = (Vec3 *)(&ppVVar6[4]->x + *(short *)((int)&pVVar18->x + 2));
      ppVVar6[5] = (Vec3 *)(&ppVVar6[5]->x + *(short *)&pVVar18->y);
      iVar14 = rand();
      *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
      iVar14 = rand();
      *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
      iVar14 = rand();
      *(ushort *)((int)&pVVar18->y + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
      iVar14 = rand();
      *(ushort *)&pVVar18->z = ((ushort)iVar14 & 0x1f) - 0x10;
      iVar14 = rand();
      *(ushort *)((int)&pVVar18->z + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
      pVVar18[1].y = *(int *)(param_2 + 0x14) + -0x40;
      iVar14 = randomRangeGen(0x32,0x50);
      pVVar18[1].x = iVar14;
      return ppVVar6;
    }
    if (param_1 == 0x81) {
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      uVar13 = (uint)(ushort)VectorShort_80067ec8.Z;
      *(undefined *)((int)ppVVar6 + 0x4f) = 0x40;
      ppVVar6[0x15] = (Vec3 *)0x3f005080;
      *(char *)((int)ppVVar6 + 0x46) = (char)((int)(uVar13 << 0x10) >> 0x14) + -0x80;
      return ppVVar6;
    }
    if (param_1 < 0x82) {
      if (param_1 == 0x10) {
LAB_OVR21WinterTundra__80079f64:
        pVVar18 = *ppVVar6;
        if (*(short *)((int)ppVVar6 + 0x36) == 0x10) {
          iVar14 = 10;
          if (lives < 4) {
            iVar14 = 7;
          }
          else if (lives < 7) {
            iVar14 = 9;
          }
          fodderCountTillNextLifeButterfly = fodderCountTillNextLifeButterfly + 1;
          if (iVar14 <= fodderCountTillNextLifeButterfly) {
            fodderCountTillNextLifeButterfly = 0;
            *(undefined2 *)((int)ppVVar6 + 0x36) = 0xd3;
          }
        }
        FUN_80041438(ppVVar6);
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x2a].z;
        VectorCopy(pVVar18,(Vec3 *)(ppVVar6 + 3));
        ppVVar6[7] = (Vec3 *)0xffffffff;
        *(undefined *)((int)ppVVar6 + 0x47) = 2;
        *(undefined2 *)((int)&pVVar18[1].x + 2) = 0x708;
        *(undefined *)((int)&pVVar18[1].y + 1) = 0;
        iVar14 = rand();
        *(byte *)((int)&pVVar18[1].y + 2) = (byte)iVar14 & 0xfc;
        return ppVVar6;
      }
      if (param_1 < 0x11) {
        if (param_1 == 1) {
          FUN_80041438(ppVVar6);
          *(undefined *)(ppVVar6 + 0x13) = 0x18;
          *(undefined *)((int)ppVVar6 + 0x4a) = 0x40;
LAB_OVR21WinterTundra__8007a588:
          ppVVar6[7] = (Vec3 *)0xffffffff;
          return ppVVar6;
        }
      }
      else if (param_1 == 0x78) {
        pVVar18 = *ppVVar6;
        FUN_80041438(ppVVar6);
        *(undefined *)((int)ppVVar6 + 0x49) = 0;
        *(undefined2 *)&pVVar18->x = 0;
        *(undefined2 *)&pVVar18->z = 0;
        *(undefined2 *)((int)&pVVar18->y + 2) = 0;
        *(undefined2 *)&pVVar18->y = 0;
        *(undefined *)((int)&pVVar18[1].x + 1) = 0x78;
        pVVar18[1].y = 0;
        pVVar18[1].z = 0;
        if (param_2 == 0) {
          uVar13 = Spyro.angleAsByte.yaw - 0x80 & 0xff;
          local_a0.x = cosineLookupTable[uVar13] * 0x7d >> 9;
          local_a0.z = 1000;
          local_a0.y = sineLookupTable[uVar13] * 0x7d >> 9;
          VectorAdd((Vec3 *)(ppVVar6 + 3),&Spyro.position,&local_a0);
        }
        else {
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        }
        *(undefined *)((int)&pVVar18->x + 2) = 0xff;
        return ppVVar6;
      }
    }
    else {
      if (param_1 == 0xd3) goto LAB_OVR21WinterTundra__80079f64;
      if (param_1 < 0xd4) {
        if (param_1 == 0xaa) {
          *(undefined *)((int)ppVVar6 + 0x41) = 0;
          *(undefined *)(ppVVar6 + 0x10) = 0;
          *(undefined *)((int)ppVVar6 + 0x3e) = 0;
          *(undefined *)((int)ppVVar6 + 0x3f) = 0;
          if (param_2 != 0) {
            VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          }
          *(undefined *)((int)ppVVar6 + 0x4f) = 0x18;
          *(undefined *)(ppVVar6 + 0x13) = 0x28;
          goto LAB_OVR21WinterTundra__8007ae94;
        }
      }
      else if (param_1 == 0x104) {
        FUN_80041438(ppVVar6);
        *(undefined *)(ppVVar6 + 0x15) = 2;
        if (param_2 != 0) {
          (*ppVVar6)->x = param_2;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          *(undefined *)((int)ppVVar6 + 0x4a) = 10;
          *(undefined *)(ppVVar6 + 0x13) = 8;
          ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x55].y;
          return ppVVar6;
        }
        goto LAB_OVR21WinterTundra__8007a588;
      }
    }
  }
  else {
    if (param_1 == 0x1e3) {
      pVVar18 = *ppVVar6;
      FUN_80041438(ppVVar6);
      *(undefined *)(ppVVar6 + 0x13) = 0x40;
      *(undefined *)((int)ppVVar6 + 0x4e) = 0x40;
      if (param_2 != 0) {
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        *(undefined *)((int)&pVVar18->y + 3) = 0x30;
        *(undefined *)((int)ppVVar6 + 0x4f) = 0x7f;
        *(char *)(ppVVar6 + 0x15) = (char)((int)((uint)*(byte *)((int)&pVVar18->y + 3) * 3) >> 1);
        uVar3 = *(undefined *)((int)&pVVar18->y + 3);
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
        *(undefined *)((int)ppVVar6 + 0x55) = uVar3;
        return ppVVar6;
      }
      local_a0.x = 0x1b8;
      local_a0.y = 0;
      local_a0.z = 0;
      if (cameraState == Look) {
        pVVar19 = (Vec3 *)(ppVVar6 + 3);
        VectorCopy(pVVar19,&cameraPosition);
        local_70 = 0;
        local_6f = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
        local_6e = (undefined)((ushort)VectorShort_80067ec8.Z >> 4);
        BuildRotationMatrix(&local_70,&MStack_90,(Mat33 *)0x0);
        MatrixMultVector(&MStack_90,&local_a0,&local_a0);
        VectorAdd(pVVar19,pVVar19,&local_a0);
        VectorAdd(pVVar19,pVVar19,&local_a0);
        pSVar16 = (Spyro *)&local_a0;
      }
      else {
        VectorCopy((Vec3 *)(ppVVar6 + 3),&cameraPosition);
        local_48 = 0;
        local_47 = Spyro.angleAsByte.roll;
        if ((Spyro.airTime == 0) && (0xf8 < (byte)(Spyro.angleAsByte.roll - 4))) {
          local_47 = 0;
        }
        local_46 = Spyro.angleAsByte.yaw;
        BuildRotationMatrix(&local_48,&MStack_68,(Mat33 *)0x0);
        MatrixMultVector(&MStack_68,&local_a0,&local_a0);
        ppVVar6[3] = (Vec3 *)0x1f4;
        ppVVar6[4] = (Vec3 *)0x0;
        ppVVar6[5] = (Vec3 *)0x0;
        MatrixMultVector(&MStack_68,(Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3));
        pSVar16 = &Spyro;
      }
      VectorAdd((Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3),&pSVar16->position);
      iVar14 = VectorLength(&local_a0,0);
      uVar3 = Atan2(iVar14,local_a0.z,0);
      *(undefined *)((int)ppVVar6 + 0x45) = uVar3;
      uVar3 = Atan2(local_a0.x,local_a0.y,0);
      *(undefined *)((int)ppVVar6 + 0x46) = uVar3;
      pOVar1 = DAT_800670bc;
      pOVar15 = Objects;
      *(short *)&pVVar18->x = (short)local_a0.x;
      *(short *)((int)&pVVar18->x + 2) = (short)local_a0.y;
      *(short *)&pVVar18->y = (short)local_a0.z;
      for (; (pOVar15 < pOVar1 && (pOVar15->type != 0x407)); pOVar15 = pOVar15 + 1) {
      }
      if (pOVar15 != (Object *)0x0) {
        piVar17 = (int *)pOVar15->data;
        iVar14 = *piVar17;
        *piVar17 = iVar14 + 0x144;
        if (0x797 < iVar14 + 0x144) {
          *piVar17 = 0;
        }
        puVar12 = (undefined4 *)((int)piVar17 + *piVar17 + 0xc);
        pVVar18->z = (int)puVar12;
        *puVar12 = 0;
        MemCopy(&pVVar18[1].y,piVar17 + 1,8);
      }
      *(undefined *)((int)&pVVar18->y + 3) = 0x6e;
LAB_OVR21WinterTundra__8007ad64:
      *(undefined *)((int)ppVVar6 + 0x4b) = 1;
      FUN_80050648(ppVVar6,0,0);
      return ppVVar6;
    }
    if (param_1 < 0x1e4) {
      if (param_1 == 0x1e1) {
LAB_OVR21WinterTundra__8007ae1c:
        pVVar18 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        pVVar18->x = 0x18;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x30;
        *(undefined *)(ppVVar6 + 0x15) = 0;
        *(undefined *)((int)ppVVar6 + 0x55) = 0;
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        *(undefined *)((int)ppVVar6 + 0x4f) = 100;
        *(undefined *)((int)ppVVar6 + 0x47) = 0;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
        return ppVVar6;
      }
      if (0x1e1 < param_1) {
        pVVar18 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        pVVar18->x = 0x10;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
        *(undefined *)(ppVVar6 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x55) = 0x40;
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
        uVar3 = 0x46;
        goto LAB_OVR21WinterTundra__8007ae0c;
      }
      if (param_1 == 0x146) {
        pVVar18 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        *(undefined2 *)&pVVar18->x = 0x10;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
        *(undefined *)(ppVVar6 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        sVar5 = *(short *)(param_2 + 0x36);
        if ((sVar5 == 0x198) || (sVar5 == 0x2c2)) {
          *(undefined *)((int)&pVVar18->x + 2) = 1;
          *(undefined *)((int)&pVVar18->x + 3) = 1;
          uVar3 = 0x7f;
        }
        else {
          if (sVar5 == 0x270) {
            *(undefined *)((int)&pVVar18->x + 2) = 2;
            *(undefined *)(ppVVar6 + 0x15) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x55) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x56) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
          }
          else {
            *(undefined *)((int)&pVVar18->x + 2) = 0;
          }
          uVar3 = 0x60;
          *(undefined *)((int)&pVVar18->x + 3) = 0;
        }
        *(undefined *)((int)ppVVar6 + 0x4f) = uVar3;
        *(undefined *)((int)ppVVar6 + 0x47) = 0xfe;
        uVar11 = Vec2OctagonalDistanceApproximation((Vec2 *)(ppVVar6 + 3),(Vec2 *)&cameraPosition);
        cVar2 = Atan2(uVar11,cameraPosition.z - (int)ppVVar6[5],0);
        *(char *)((int)ppVVar6 + 0x45) = cVar2 + -0x40;
        uVar3 = Atan2(cameraPosition.x - (int)ppVVar6[3],cameraPosition.y - (int)ppVVar6[4],0);
        *(undefined *)((int)ppVVar6 + 0x46) = uVar3;
        return ppVVar6;
      }
    }
    else {
      if (param_1 == 0x211) {
        pVVar18 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        pVVar18->x = 0x10;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
        *(undefined *)(ppVVar6 + 0x15) = 0x40;
        *(undefined *)((int)ppVVar6 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x56) = 0x80;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
        iVar14 = rand();
        *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
        uVar3 = 0x50;
LAB_OVR21WinterTundra__8007ae0c:
        *(undefined *)((int)ppVVar6 + 0x4f) = uVar3;
        *(undefined *)((int)ppVVar6 + 0x47) = 4;
        return ppVVar6;
      }
      if (param_1 < 0x212) {
        if (param_1 == 0x1f8) {
          pVVar18 = *ppVVar6;
          FUN_80041438(ppVVar6);
          if (param_2 != 0) {
            VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
            *(undefined2 *)&pVVar18[1].x = 0x30;
            *(undefined *)((int)ppVVar6 + 0x4f) = 0x7f;
            *(char *)(ppVVar6 + 0x15) = (char)*(undefined2 *)&pVVar18[1].x;
            *(char *)((int)ppVVar6 + 0x55) = (char)*(undefined2 *)&pVVar18[1].x;
            uVar4 = *(undefined2 *)&pVVar18[1].x;
            *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
            *(char *)((int)ppVVar6 + 0x56) = (char)uVar4;
            return ppVVar6;
          }
          pVVar19 = (Vec3 *)(ppVVar6 + 3);
          FUN_80032a90(pVVar19);
          pVVar18->x = 400;
          pVVar18->y = 0;
          pVVar18->z = 0;
          if (cameraState == Look) {
            VectorCopy(aVStack_40,pVVar18);
            VectorCopy(pVVar19,&cameraPosition);
            local_48 = 0;
            local_47 = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
            local_46 = (byte)((ushort)VectorShort_80067ec8.Z >> 4);
            BuildRotationMatrix(&local_48,&MStack_90,(Mat33 *)0x0);
            MatrixMultVector(&MStack_90,aVStack_40,aVStack_40);
            VectorAdd(pVVar19,pVVar19,aVStack_40);
            VectorAdd(pVVar19,pVVar19,aVStack_40);
            VectorAdd(pVVar19,pVVar19,aVStack_40);
            *(byte *)((int)&pVVar18[1].y + 1) = local_47;
            *(byte *)((int)&pVVar18[1].y + 2) = local_46;
          }
          else {
            MatrixMultVector(&Spyro.unkMatrix,pVVar18,pVVar18);
            iVar14 = VectorLength(pVVar18,0);
            cVar2 = Atan2(iVar14,pVVar18->z,0);
            iVar14 = pVVar18->x;
            iVar10 = pVVar18->y;
            *(char *)((int)&pVVar18[1].y + 1) = cVar2 + '\x05';
            uVar3 = Atan2(iVar14,iVar10,0);
            *(undefined *)((int)&pVVar18[1].y + 2) = uVar3;
          }
          *(undefined2 *)&pVVar18[1].x = 0xb4;
          goto LAB_OVR21WinterTundra__8007ad64;
        }
      }
      else {
        if (param_1 == 0x21d) goto LAB_OVR21WinterTundra__8007ae1c;
        if (param_1 == 0x2a9) {
          pVVar18 = *ppVVar6;
          *(undefined *)(ppVVar6 + 0x13) = 0x20;
          *(undefined *)((int)ppVVar6 + 0x4e) = 0x20;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          FUN_80041438(ppVVar6);
          if (*(short *)((int)ppVVar6 + 0x36) == 0x1e0) {
            uVar9 = rand();
            uVar9 = uVar9 & 0xfff;
            uVar13 = rand();
          }
          else {
            uVar9 = randomRangeGen(300,0x834);
            iVar14 = randomRangeGen(0xfffffa24,0x5dc);
            uVar13 = (uint)*(byte *)(param_2 + 0x46) + iVar14;
          }
          iVar14 = 0x78;
          if (*(short *)((int)ppVVar6 + 0x36) == 0x123) {
            iVar14 = 0xb4;
            iVar10 = 0xdc;
          }
          else {
            iVar10 = 0x96;
          }
          iVar7 = cosineLookup(uVar9);
          iVar8 = cosineLookup(uVar13 & 0xfff);
          *(short *)&pVVar18->x = (short)((iVar7 >> 6) * iVar8 * iVar14 >> 0x12);
          iVar7 = cosineLookup(uVar9);
          iVar8 = sineLookup(uVar13 & 0xfff);
          *(short *)((int)&pVVar18->x + 2) = (short)((iVar7 >> 6) * iVar8 * iVar14 >> 0x12);
          iVar14 = sineLookup(uVar9);
          *(short *)&pVVar18->y = (short)(iVar14 * iVar10 >> 0xc);
          if ((*(byte *)(param_2 + 0x51) != 0) && ((*(uint *)(param_2 + 0x18) & 0x100000) != 0)) {
            *(short *)&pVVar18->x =
                 *(short *)&pVVar18->x +
                 (short)(cosineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
            *(short *)((int)&pVVar18->x + 2) =
                 *(short *)((int)&pVVar18->x + 2) +
                 (short)(sineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
            sVar5 = randomRangeGen(0x28,0x46);
            *(short *)&pVVar18->y = *(short *)&pVVar18->y + sVar5;
          }
          iVar14 = (int)*(short *)((int)ppVVar6 + 0x36);
          if (iVar14 != 0x98) {
            if (iVar14 != 0x1e0) {
              if ((*(uint *)(param_2 + 0x18) & 0x20000) == 0) {
                *(short *)&pVVar18->x =
                     *(short *)&pVVar18->x +
                     (short)(cosineLookupTable[*(byte *)(param_2 + 0x46)] * 0x23 >> 10);
                iVar10 = (int)sineLookupTable[*(byte *)(param_2 + 0x46)];
                iVar14 = iVar10 * 0x24;
              }
              else {
                *(short *)&pVVar18->x =
                     *(short *)&pVVar18->x +
                     (short)(cosineLookupTable[*(byte *)(param_2 + 0x46)] * 0x37 >> 10);
                iVar10 = (int)sineLookupTable[*(byte *)(param_2 + 0x46)];
                iVar14 = iVar10 * 0x38;
              }
              *(short *)((int)&pVVar18->x + 2) =
                   *(short *)((int)&pVVar18->x + 2) + (short)(iVar14 - iVar10 >> 10);
            }
            iVar14 = (int)*(short *)((int)ppVVar6 + 0x36);
          }
          if ((((iVar14 == 0x3d) || (iVar14 == 0x58)) || (iVar14 == 0x42)) ||
             ((iVar14 - 0x284U & 0xffff) < 2)) {
            *(undefined *)(ppVVar6 + 0x11) = *(undefined *)(param_2 + 0x44);
            *(undefined *)((int)ppVVar6 + 0x45) = *(undefined *)(param_2 + 0x45);
            *(undefined *)((int)ppVVar6 + 0x46) = *(undefined *)(param_2 + 0x46);
          }
          else {
            iVar14 = rand();
            *(char *)(ppVVar6 + 0x11) = (char)iVar14;
            iVar14 = rand();
            *(char *)((int)ppVVar6 + 0x45) = (char)iVar14;
            iVar14 = rand();
            *(char *)((int)ppVVar6 + 0x46) = (char)iVar14;
            ppVVar6[3] = (Vec3 *)((int)&ppVVar6[3]->x + *(short *)&pVVar18->x * 2);
            ppVVar6[4] = (Vec3 *)((int)&ppVVar6[4]->x + *(short *)((int)&pVVar18->x + 2) * 2);
            ppVVar6[5] = (Vec3 *)((int)&ppVVar6[5]->x + *(short *)&pVVar18->y * 2);
          }
          iVar14 = rand();
          *(ushort *)((int)&pVVar18->y + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
          iVar14 = rand();
          *(ushort *)&pVVar18->z = ((ushort)iVar14 & 0x1f) - 0x10;
          iVar14 = rand();
          *(ushort *)((int)&pVVar18->z + 2) = ((ushort)iVar14 & 0x1f) - 0x10;
          uVar4 = randomRangeGen(0x5a,0x96);
          *(undefined2 *)&pVVar18[1].x = uVar4;
          *(undefined2 *)((int)&pVVar18[1].x + 2) = 1;
          *(undefined2 *)((int)&pVVar18[1].y + 2) = 0;
          return ppVVar6;
        }
      }
    }
  }
  if (param_2 == 0) {
    pSVar16 = &Spyro;
  }
  else {
    pSVar16 = (Spyro *)(param_2 + 0xc);
  }
  VectorCopy((Vec3 *)(ppVVar6 + 3),&pSVar16->position);
LAB_OVR21WinterTundra__8007ae94:
  FUN_80041438(ppVVar6);
  return ppVVar6;
}



undefined * FUN_OVR21WinterTundra__8007aed0(int param_1)

{
  char cVar1;
  bool bVar2;
  byte bVar3;
  short sVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  short sVar10;
  short sVar11;
  char cVar12;
  uint uVar13;
  char *pcVar14;
  undefined *puVar15;
  VectorShort *pVVar16;
  int iVar17;
  undefined *puVar18;
  Vec3 local_88;
  Vec3 local_78;
  undefined4 local_68;
  undefined4 local_64;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  
  cVar12 = DAT_80066f18[1];
  local_50 = param_1 << 1;
  puVar15 = DAT_80066f18;
  if (cVar12 != -1) {
    iVar17 = param_1 * 4;
    pcVar14 = DAT_80066f18 + 1;
    puVar18 = DAT_80066f18 + 0x18;
    pVVar16 = (VectorShort *)(DAT_80066f18 + 4);
    do {
      if (cVar12 == -2) goto LAB_OVR21WinterTundra__8007c394;
      cVar12 = (char)param_1;
      switch(*puVar15) {
      case 0:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[9] = pcVar14[9] + (char)local_50;
        pcVar14[0xb] = pcVar14[0xb] + cVar12 * -4;
        bVar3 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        pcVar14[0xc] = pcVar14[0xc] + cVar12 * -4;
        bVar2 = ((uint)bVar3 + param_1 & 0xff) < 0x20;
        pcVar14[0xd] = pcVar14[0xd] + cVar12 * -4;
        goto LAB_OVR21WinterTundra__8007bc68;
      case 1:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        pcVar14[9] = pcVar14[9] + (char)iVar17;
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[0xc] = pcVar14[0xc] + cVar12 * -4;
        pcVar14[0xb] = pcVar14[0xb] + cVar12 * -4;
        bVar3 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        bVar2 = ((uint)bVar3 + param_1 & 0xff) < 0x18;
        pcVar14[0xd] = pcVar14[0xd] + cVar12 * -4;
        goto LAB_OVR21WinterTundra__8007bc68;
      case 2:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[9] = pcVar14[9] + (char)local_50;
        if ((int)(uint)(byte)pcVar14[0xb] < iVar17) {
          pcVar14[0xb] = '\0';
        }
        else {
          pcVar14[0xb] = pcVar14[0xb] + cVar12 * -4;
        }
        if ((int)(uint)(byte)pcVar14[0xc] < iVar17) {
          pcVar14[0xc] = '\0';
        }
        else {
          pcVar14[0xc] = pcVar14[0xc] + cVar12 * -4;
        }
        if ((int)(uint)(byte)pcVar14[0xd] < iVar17) {
          pcVar14[0xd] = '\0';
        }
        else {
          pcVar14[0xd] = pcVar14[0xd] + cVar12 * -4;
        }
        bVar3 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        bVar2 = ((uint)bVar3 + param_1 & 0xff) < 0x20;
        goto LAB_OVR21WinterTundra__8007bc68;
      case 4:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((short)(ushort)(byte)(cVar12 + 1U) < *(short *)(pcVar14 + 0x17)) {
          pcVar14[9] = pcVar14[9] + '\x04';
        }
        sVar10 = *(short *)(pcVar14 + 7);
        *(short *)(pcVar14 + 7) = sVar10 + *(short *)(pcVar14 + 0x1b);
        pcVar14[10] = pcVar14[10] + pcVar14[0x19];
        if (*(short *)(pcVar14 + 0x1d) < (short)(sVar10 + *(short *)(pcVar14 + 0x1b))) {
          cVar12 = pcVar14[9];
          pcVar14[9] = cVar12 - 4U;
          bVar2 = (byte)(cVar12 - 4U) < 9;
LAB_OVR21WinterTundra__8007c380:
          if (bVar2) goto LAB_OVR21WinterTundra__8007c388;
        }
        break;
      case 6:
        VectorCopy(&local_88,*(Vec3 **)(pcVar14 + 0x17));
        iVar7 = (uint)(byte)pcVar14[1] << 6;
        iVar6 = local_88.z + *(short *)(pcVar14 + 0x1d) * 0x40;
        iVar8 = iVar7;
        if (*(short *)(pcVar14 + 0x1b) < iVar7) {
          iVar8 = (int)*(short *)(pcVar14 + 0x1b);
        }
        iVar5 = cosineLookup(iVar7);
        local_88.x = local_88.x + (iVar8 * iVar5 >> 0xc);
        iVar7 = sineLookup(iVar7);
        local_88.y = local_88.y + (iVar8 * iVar7 >> 0xc);
        local_88.z = *(short *)(pcVar14 + 7) * 4 + 0x40;
        if (iVar6 < local_88.z) goto LAB_OVR21WinterTundra__8007c388;
        VecIntToShort(pVVar16,&local_88);
        pcVar14[1] = pcVar14[1] + '\x01';
        break;
      case 9:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        bVar3 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        bVar2 = ((uint)bVar3 + param_1 & 0xff) < 0x20;
        pcVar14[9] = pcVar14[9] + (char)local_50;
        goto LAB_OVR21WinterTundra__8007bc68;
      case 10:
        if (((Spyro.state == Drowning) && (Spyro.health < 0)) ||
           ((Spyro.field168_0x260 != 0 || (Spyro.iframeTimer == 0))))
        goto LAB_OVR21WinterTundra__8007c388;
        VectorCopy(&local_78,&Spyro.position);
        iVar8 = cosineLookup((int)*(short *)(pcVar14 + 0x17));
        local_78.x = local_78.x + (iVar8 >> 4);
        iVar8 = sineLookup((int)*(short *)(pcVar14 + 0x17));
        local_78.y = local_78.y + (iVar8 >> 4);
        local_78.z = local_78.z + 0x100;
        VecIntToShort(pVVar16,&local_78);
        sVar10 = *(short *)(pcVar14 + 0x17);
        *(short *)(pcVar14 + 0x17) = sVar10 + 0x40;
        iVar8 = cosineLookup((int)(short)(sVar10 + 0x40) - (int)VectorShort_80067ec8.Z & 0xfff);
        if (iVar8 < 0) {
          iVar8 = -iVar8;
        }
        pcVar14[9] = (char)(iVar8 / 0xaa);
        break;
      case 0xb:
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x15) = *(short *)(pcVar14 + 0x15) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        VectorShortAdd(pVVar16,pVVar16,puVar15 + 0x12);
        pcVar14[9] = pcVar14[9] + (char)local_50;
        pcVar14[0xb] = pcVar14[0xb] + -4;
        cVar12 = pcVar14[0xd];
        pcVar14[10] = pcVar14[10] + (char)iVar17;
        pcVar14[0xd] = cVar12 + -4;
        pcVar14[0xc] = pcVar14[0xc] + -4;
        if ((char)(cVar12 + -4) == '\0') goto LAB_OVR21WinterTundra__8007c388;
        goto LAB_OVR21WinterTundra__8007bc70;
      case 0xc:
        pcVar14[10] = pcVar14[10] + '\b';
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (pcVar14[0xb] != '\0') {
          pcVar14[0xb] = pcVar14[0xb] + -8;
        }
        if (pcVar14[0xc] != '\0') {
          pcVar14[0xc] = pcVar14[0xc] + -8;
        }
        if (pcVar14[0xd] != '\0') {
          pcVar14[0xd] = pcVar14[0xd] + -8;
        }
        uVar9 = *(uint *)(pcVar14 + 0xb);
        goto joined_r0x8007bb8c;
      case 0xd:
        if ((0x1b < (byte)pcVar14[1]) || (pcVar14[2] == '\0')) goto LAB_OVR21WinterTundra__8007c388;
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        uVar9 = (uint)(byte)pcVar14[1];
        pcVar14[9] = pcVar14[9] + (char)local_50;
        if (uVar9 < 0xd) {
          if (uVar9 < 5) {
            pcVar14[0xb] = -0x80;
            pcVar14[0xc] = -0x80;
            iVar8 = (uint)(byte)pcVar14[1] * -0x20 + 0x80;
            if (iVar8 < 0) {
              iVar8 = 0;
            }
            pcVar14[0xd] = (char)iVar8;
          }
          else {
            pcVar14[0xb] = -0x80;
            pcVar14[0xd] = '\0';
            pcVar14[0xc] = (pcVar14[1] + -4) * -8 + -0x80;
          }
        }
        else {
          iVar8 = (uVar9 - 0xc) * -8 + 0x80;
          if (iVar8 < 0) {
            iVar8 = 0;
          }
          pcVar14[0xb] = (char)iVar8;
          iVar8 = ((byte)pcVar14[1] - 0xc) * -4 + 0x40;
          if (iVar8 < 0) {
            iVar8 = 0;
          }
          pcVar14[0xc] = (char)iVar8;
          pcVar14[0xd] = '\0';
        }
        pcVar14[1] = pcVar14[1] + cVar12;
        break;
      case 0x21:
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        iVar8 = (uint)(byte)pcVar14[0xb] - local_50;
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[9] = pcVar14[9] + (char)local_50;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        bVar3 = pcVar14[1];
        cVar12 = (char)iVar8;
        pcVar14[0xb] = cVar12;
        pcVar14[0xc] = cVar12;
        pcVar14[0xd] = cVar12;
        pcVar14[1] = (char)((uint)bVar3 + param_1);
        if (((0x1f < ((uint)bVar3 + param_1 & 0xff)) || (pcVar14[2] == '\0')) || (iVar8 == 0))
        goto LAB_OVR21WinterTundra__8007c388;
        break;
      case 0x29:
        uVar9 = (uint)(byte)pcVar14[0x1d];
        bVar3 = pcVar14[1] + 1;
        pcVar14[1] = bVar3;
        if (uVar9 < bVar3) {
          if (pcVar14[0x1e] != '\0') {
LAB_OVR21WinterTundra__8007ba64:
            (*DAT_800670fc)(1,0x2b,pVVar16,0);
          }
          goto LAB_OVR21WinterTundra__8007c388;
        }
        iVar8 = ((int)*(short *)(pcVar14 + 0x17) - (int)*(short *)(pcVar14 + 0x11)) * (uint)bVar3;
        if (uVar9 == 0) {
          trap(0x1c00);
        }
        if ((uVar9 == 0xffffffff) && (iVar8 == -0x80000000)) {
          trap(0x1800);
        }
        iVar7 = ((int)*(short *)(pcVar14 + 0x19) - (int)*(short *)(pcVar14 + 0x13)) *
                (uint)(byte)pcVar14[1];
        uVar13 = (uint)(byte)pcVar14[0x1d];
        if (uVar13 == 0) {
          trap(0x1c00);
        }
        if ((uVar13 == 0xffffffff) && (iVar7 == -0x80000000)) {
          trap(0x1800);
        }
        sVar10 = *(short *)(pcVar14 + 0x15);
        *(short *)(pcVar14 + 0x15) = *(short *)(pcVar14 + 0x15) + -2;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + sVar10;
        iVar6 = clock * 8;
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 0x11) + (short)(iVar8 / (int)uVar9);
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 0x13) + (short)(iVar7 / (int)uVar13);
        pcVar14[9] = (char)(cosineLookupTable[iVar6 + (uint)(byte)pcVar14[0x1c] & 0xff] >> 10) +
                     '\n';
        pcVar14[10] = (char)(sineLookupTable[clock * 8 + (uint)(byte)pcVar14[0x1c] & 0xff] >> 0xb) +
                      '\x06';
        break;
      case 0x2a:
        bVar3 = pcVar14[1];
        pcVar14[1] = bVar3 + 1;
        if ((0xf < bVar3) || (pcVar14[2] == '\0')) goto LAB_OVR21WinterTundra__8007c388;
        pcVar14[9] = pcVar14[9] + '\x02';
        pcVar14[0xb] = pcVar14[0xb] + -6;
        pcVar14[0xc] = pcVar14[0xc] + -6;
        pcVar14[0xd] = pcVar14[0xd] + -6;
        *(int *)(pcVar14 + 0x17) = *(int *)(pcVar14 + 0x17) + (int)*(short *)(pcVar14 + 0x11);
        *(int *)(pcVar14 + 0x1b) = *(int *)(pcVar14 + 0x1b) + (int)*(short *)(pcVar14 + 0x13);
        *(short *)(pcVar14 + 3) = (short)(*(int *)(pcVar14 + 0x17) >> 2);
        *(short *)(pcVar14 + 5) = (short)(*(int *)(pcVar14 + 0x1b) >> 2);
        break;
      case 0x2b:
        if (((byte)pcVar14[0xb] < 4) || (pcVar14[2] == '\0')) goto LAB_OVR21WinterTundra__8007c388;
        cVar12 = '\x03';
        if (*(short *)(pcVar14 + 0x17) != 0) {
          cVar12 = '\x02';
        }
        cVar1 = pcVar14[9];
        pcVar14[9] = cVar1 + '\x01';
        if (*(short *)(pcVar14 + 0x17) != 0) {
          pcVar14[9] = cVar1 + '\x02';
        }
        pcVar14[0xb] = pcVar14[0xb] - cVar12;
        pcVar14[0xd] = pcVar14[0xd] - cVar12;
        pcVar14[0xc] = pcVar14[0xc] - cVar12;
        break;
      case 0x2c:
        *(short *)(pcVar14 + 0x17) = *(short *)(pcVar14 + 0x17) + *(short *)(pcVar14 + 0x11);
        *(short *)(pcVar14 + 0x19) = *(short *)(pcVar14 + 0x19) + *(short *)(pcVar14 + 0x13);
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + *(short *)(pcVar14 + 0x15);
        *(short *)(pcVar14 + 3) =
             *(short *)(pcVar14 + 0x17) +
             (short)(char)((ushort)cosineLookupTable[(byte)pcVar14[0x1b]] >> 8);
        sVar10 = sineLookupTable[(byte)pcVar14[0x1b]];
        pcVar14[0x1b] = pcVar14[0x1b] + pcVar14[0x1c];
        uVar9 = DAT_80067008 & 3;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 0x19) + (short)(char)((ushort)sVar10 >> 8);
        if (uVar9 == 0) {
          if (*(short *)(pcVar14 + 0x15) < 9) {
            *(short *)(pcVar14 + 0x15) = *(short *)(pcVar14 + 0x15) + 1;
          }
          if ((byte)pcVar14[9] < 0x14) {
            pcVar14[9] = pcVar14[9] + 1;
          }
        }
        if (*(short *)(pcVar14 + 7) < *(short *)(pcVar14 + 0x1d)) {
          if (pcVar14[1] != '\0') goto LAB_OVR21WinterTundra__8007bc70;
        }
        else if (pcVar14[0x10] == '\x03') goto LAB_OVR21WinterTundra__8007ba64;
        goto LAB_OVR21WinterTundra__8007c388;
      case 0x2e:
        bVar3 = pcVar14[1];
        pcVar14[1] = bVar3 + 1;
        if ((0xf < bVar3) || (pcVar14[2] == '\0')) goto LAB_OVR21WinterTundra__8007c388;
        pcVar14[9] = pcVar14[9] + '\x03';
        pcVar14[0xb] = pcVar14[0xb] + -8;
        pcVar14[0xc] = pcVar14[0xc] + -8;
        pcVar14[0xd] = pcVar14[0xd] + -8;
        break;
      case 0x3b:
        pcVar14[10] = pcVar14[10] + '\b';
        VectorShortAdd(pVVar16,pVVar16,puVar18);
        if ((DAT_80067008 & 1) != 0) {
          *(short *)(pcVar14 + 0x19) = *(short *)(pcVar14 + 0x19) + 1;
        }
        if (pcVar14[0xb] != '\0') {
          pcVar14[0xb] = pcVar14[0xb] + -4;
        }
        if (pcVar14[0xc] != '\0') {
          pcVar14[0xc] = pcVar14[0xc] + -4;
        }
        if (pcVar14[0xd] != '\0') {
          pcVar14[0xd] = pcVar14[0xd] + -4;
        }
        uVar9 = *(uint *)(pcVar14 + 0xb);
joined_r0x8007bb8c:
        if ((uVar9 & 0xffffff) == 0) goto LAB_OVR21WinterTundra__8007c388;
        goto LAB_OVR21WinterTundra__8007bc70;
      case 0x42:
        iVar8 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar14[1] & 1U) != 0) {
              *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + *(short *)(pcVar14 + 0xf);
              *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + *(short *)(pcVar14 + 0x11);
              *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + *(short *)(pcVar14 + 0x13);
              if ((pcVar14[1] & 2U) != 0) {
                iVar7 = rand();
                *(ushort *)(pcVar14 + 0xf) = *(short *)(pcVar14 + 0xf) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar14 + 0x11) = *(short *)(pcVar14 + 0x11) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar14 + 0x13) = *(short *)(pcVar14 + 0x13) + -1 + ((ushort)iVar7 & 2);
              }
            }
            iVar8 = iVar8 + 1;
            pcVar14[1] = pcVar14[1] + '\x01';
          } while (iVar8 < param_1);
        }
        bVar2 = (byte)pcVar14[1] < 0x18;
LAB_OVR21WinterTundra__8007bc68:
        if (bVar2) {
LAB_OVR21WinterTundra__8007bc70:
          if (pcVar14[2] != '\0') break;
        }
LAB_OVR21WinterTundra__8007c388:
        FUN_80041d20(puVar15);
        break;
      case 0x46:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((0x1f < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR21WinterTundra__8007c388;
        local_68._0_2_ = (short)((int)*(short *)(pcVar14 + 9) - (int)*(short *)(pcVar14 + 3) >> 1);
        local_68._2_2_ = (short)((int)*(short *)(pcVar14 + 0xb) - (int)*(short *)(pcVar14 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar14 + 0xd) - (int)*(short *)(pcVar14 + 7) >> 1);
        local_64 = CONCAT22(local_64._2_2_,sVar10);
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + (short)local_68;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + local_68._2_2_;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + sVar10;
        iVar8 = rand();
        local_68._0_2_ = (short)local_68 + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        sVar10 = local_68._2_2_ + -1 + ((ushort)iVar8 & 2);
        local_68 = CONCAT22(sVar10,(short)local_68);
        if ((pcVar14[1] & 1U) != 0) {
          local_64 = CONCAT22(local_64._2_2_,(short)local_64 + -1);
        }
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + (short)local_68;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + sVar10;
        cVar12 = pcVar14[0xf];
        pcVar14[0xf] = cVar12 - 3U;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + (short)local_64;
        if ((byte)(cVar12 - 3U) < 0x80) {
          pcVar14[0xf] = -0x80;
        }
        cVar12 = pcVar14[0x10];
        pcVar14[0x10] = cVar12 - 4U;
        if ((byte)(cVar12 - 4U) < 0x60) {
          pcVar14[0x10] = '`';
        }
        cVar12 = pcVar14[0x13];
        pcVar14[0x11] = '\0';
        pcVar14[0x13] = cVar12 - 3U;
        if ((byte)(cVar12 - 3U) < 0xc0) {
          pcVar14[0x13] = -0x40;
        }
        cVar12 = pcVar14[0x14];
        pcVar14[0x14] = cVar12 - 4U;
        if ((byte)(cVar12 - 4U) < 0x80) {
          pcVar14[0x14] = -0x80;
        }
        cVar12 = pcVar14[0x15];
        pcVar14[0x15] = cVar12 - 6U;
        if ((byte)(cVar12 - 6U) < 0x20) {
          pcVar14[0x15] = ' ';
        }
        break;
      case 0x47:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((0x1f < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR21WinterTundra__8007c388;
        local_60 = (int)*(short *)(pcVar14 + 9) - (int)*(short *)(pcVar14 + 3);
        local_5c = (int)*(short *)(pcVar14 + 0xb) - (int)*(short *)(pcVar14 + 5);
        local_58 = (int)*(short *)(pcVar14 + 0xd) - (int)*(short *)(pcVar14 + 7);
        uVar9 = rand();
        local_60 = local_60 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_5c = local_5c + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_58 = local_58 + -1 + (uVar9 & 2);
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + (short)local_60;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + (short)local_5c;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + (short)local_58;
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 9) - (short)local_60;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 0xb) - (short)local_5c;
        pcVar14[0x13] = pcVar14[0x13] + -2;
        pcVar14[0x15] = pcVar14[0x15] + -4;
        pcVar14[0x14] = pcVar14[0x14] + -2;
        pcVar14[0x10] = pcVar14[0x10] + -3;
        pcVar14[0xf] = pcVar14[0xf] + -3;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 0xd) - (short)local_58;
        pcVar14[0x11] = pcVar14[0x11] + -3;
        break;
      case 0x48:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((0x37 < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR21WinterTundra__8007c388;
        local_68 = (int)*(short *)(pcVar14 + 3) - (int)*(short *)(pcVar14 + 9) >> 1;
        local_64 = (int)*(short *)(pcVar14 + 5) - (int)*(short *)(pcVar14 + 0xb) >> 1;
        local_60 = (int)*(short *)(pcVar14 + 7) - (int)*(short *)(pcVar14 + 0xd) >> 1;
        uVar9 = rand();
        local_68 = local_68 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_64 = local_64 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_60 = local_60 + -1 + (uVar9 & 2);
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + (short)local_68;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + (short)local_64;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + (short)local_60;
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 3) + (short)local_68 * -2;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 5) + (short)local_64 * -2;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 7) + (short)local_60 * -2;
        break;
      case 0x4e:
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        if ((0x27 < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR21WinterTundra__8007c388;
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + *(short *)(pcVar14 + 0xf);
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + *(short *)(pcVar14 + 0x11);
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + *(short *)(pcVar14 + 0x13);
        iVar8 = rand();
        *(ushort *)(pcVar14 + 0xf) = *(short *)(pcVar14 + 0xf) + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        *(ushort *)(pcVar14 + 0x11) = *(short *)(pcVar14 + 0x11) + -1 + ((ushort)iVar8 & 2);
        uVar9 = rand();
        iVar8 = (*(ushort *)(pcVar14 + 0x13) - 1) + (uVar9 & 2);
        *(short *)(pcVar14 + 0x13) = (short)iVar8;
        if (2 < iVar8 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar14 + 0x13) = 2;
        }
        if (*(short *)(pcVar14 + 0x13) < -4) {
          *(undefined2 *)(pcVar14 + 0x13) = 0xfffc;
        }
        pcVar14[0xb] = pcVar14[0xb] + -2;
        pcVar14[0xd] = pcVar14[0xd] + -1;
        pcVar14[0xc] = pcVar14[0xc] + -2;
        break;
      case 0x4f:
        sVar11 = (short)((int)*(short *)(pcVar14 + 9) - (int)*(short *)(pcVar14 + 3) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar14 + 0xb) - (int)*(short *)(pcVar14 + 5) >> 1);
        local_68 = CONCAT22(sVar10,sVar11);
        sVar4 = (short)((int)*(short *)(pcVar14 + 0xd) - (int)*(short *)(pcVar14 + 7) >> 1);
        local_64 = CONCAT22(local_64._2_2_,sVar4);
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + sVar11;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + sVar10;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + sVar4;
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + sVar11;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + sVar10;
        cVar12 = pcVar14[1];
        pcVar14[1] = cVar12 + 1U;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + sVar4;
        if ((0x17 < (byte)(cVar12 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR21WinterTundra__8007c388;
        pcVar14[0xf] = pcVar14[0xf] + -3;
        pcVar14[0x13] = pcVar14[0x13] + -3;
        pcVar14[0x10] = pcVar14[0x10] + -4;
        pcVar14[0x14] = pcVar14[0x14] + -4;
        if (5 < (byte)pcVar14[0x15]) {
          pcVar14[0x15] = pcVar14[0x15] - 6;
        }
        break;
      case 0x52:
        sVar10 = *(short *)(pcVar14 + 0xd) + 0x30;
        *(short *)(pcVar14 + 0xd) = sVar10;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + 0x30;
        if (-1 < sVar10) {
          bVar2 = *(int *)(pcVar14 + 0x17) < (int)sVar10;
          goto LAB_OVR21WinterTundra__8007c380;
        }
        goto LAB_OVR21WinterTundra__8007c388;
      }
LAB_OVR21WinterTundra__8007c394:
      pcVar14 = pcVar14 + 0x20;
      puVar18 = puVar18 + 0x20;
      pVVar16 = (VectorShort *)&pVVar16[5].Y;
      cVar12 = *pcVar14;
      puVar15 = puVar15 + 0x20;
    } while (cVar12 != -1);
  }
  return puVar15;
}



undefined *
FUN_OVR21WinterTundra__8007c3e8(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  byte bVar1;
  char cVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  Vec3 *from;
  int *piVar8;
  undefined *puVar9;
  undefined uVar10;
  undefined uVar11;
  Vec3 local_140;
  Vec3 local_130;
  Vec3 local_120;
  Vec3 local_110;
  Vec3 local_100;
  Vec3 local_f0;
  Vec3 local_e0;
  Vec3 VStack_d0;
  Vec3 VStack_c0;
  Vec3 VStack_b0;
  Vec3 local_a0;
  undefined local_90;
  undefined local_8f;
  undefined local_8e;
  Mat33 MStack_88;
  Vec3 local_68;
  Vec3 local_58;
  int local_48;
  int local_40;
  int local_30;
  
  puVar9 = (undefined *)0x0;
  local_40 = 0;
  if (0 < param_1) {
    local_30 = 0;
    local_48 = param_1;
    do {
      uVar11 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar9 = (undefined *)FUN_80041c50(2);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar9 + 0x18),param_4);
        *(undefined2 *)(puVar9 + 0x1e) = 0;
        puVar9[10] = 0x18;
        iVar5 = rand();
        puVar9[0xb] = (char)iVar5;
        uVar11 = 4;
        puVar9[0xc] = 0x80;
        puVar9[0xd] = 0x80;
        puVar9[0xe] = 0x80;
        puVar9[0xf] = 0x2e;
        goto LAB_OVR21WinterTundra__8007d318;
      case 1:
        puVar9 = (undefined *)FUN_80041c50(2);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar9 + 0x18),param_4);
        *(undefined2 *)(puVar9 + 0x1e) = 0;
        puVar9[10] = 0x10;
        iVar5 = rand();
        puVar9[0xb] = (char)iVar5;
        puVar9[0xc] = 0x60;
        puVar9[0xd] = 0x60;
        puVar9[0xe] = 0x60;
        uVar11 = 4;
        goto LAB_OVR21WinterTundra__8007d314;
      case 2:
        puVar9 = (undefined *)FUN_80041c50(2);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
        uVar6 = rand();
        local_140.x = (uVar6 & 0x3f) - 0x20;
        uVar6 = rand();
        local_140.y = (uVar6 & 0x3f) - 0x20;
        local_140.z = 0x10;
        VecIntToShort((VectorShort *)(puVar9 + 0x18),&local_140);
        *(undefined2 *)(puVar9 + 0x1e) = 0;
        puVar9[10] = 0x20;
        iVar5 = rand();
        puVar9[0xb] = (char)iVar5;
        puVar9[0xc] = 0x80;
        puVar9[0xd] = 0x80;
        puVar9[0xe] = 0x80;
        puVar9[0xf] = 0x2e;
        puVar9[0x11] = 2;
        puVar9[0x10] = 0;
        break;
      case 4:
        puVar9 = (undefined *)FUN_80041c50(2);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
        puVar9[10] = 8;
        iVar5 = rand();
        puVar9[0xb] = (char)iVar5;
        puVar9[0xc] = 0x80;
        puVar9[0xd] = 0x80;
        puVar9[0xe] = 0x80;
        puVar9[0xf] = 0x2e;
        puVar9[0x11] = 2;
        puVar9[0x10] = 0;
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x18) = ((ushort)iVar5 & 3) + 4;
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x1a) = ((ushort)iVar5 & 3) + 2;
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x1c) = ((ushort)iVar5 & 7) + 3;
        *(short *)(puVar9 + 0x1e) = (short)((int)param_4 >> 2);
        break;
      case 6:
        piVar8 = (int *)param_3->x;
        puVar9 = (undefined *)FUN_80041c50(3);
        *puVar9 = uVar11;
        iVar5 = rand();
        puVar9[2] = (byte)iVar5 & 0xf;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3 + 1);
        iVar5 = rand();
        *(ushort *)(puVar9 + 4) = *(short *)(puVar9 + 4) + -0x3f + ((ushort)iVar5 & 0x7e);
        iVar5 = rand();
        *(Vec3 **)(puVar9 + 0x18) = param_3 + 1;
        *(ushort *)(puVar9 + 6) = *(short *)(puVar9 + 6) + -0x3f + ((ushort)iVar5 & 0x7e);
        *(short *)(puVar9 + 0x1c) = (short)piVar8[1];
        iVar5 = *piVar8;
        puVar9[10] = 0x20;
        puVar9[0xb] = 0x14;
        puVar9[0xc] = 0x80;
        puVar9[0xd] = 0x80;
        puVar9[0xe] = 0x80;
        puVar9[0xf] = 0x2c;
        puVar9[0x11] = 0;
        puVar9[0x10] = 0;
        *(short *)(puVar9 + 0x1e) = (short)(iVar5 >> 6);
        break;
      case 9:
        puVar9 = (undefined *)FUN_80041c50(2);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        VectorCopy(&local_130,&Spyro.position);
        uVar6 = rand();
        local_130.x = local_130.x + -0x3f + (uVar6 & 0x7e);
        uVar6 = rand();
        local_130.y = local_130.y + -0x3f + (uVar6 & 0x7e);
        VecIntToShort((VectorShort *)(puVar9 + 4),&local_130);
        VectorCopy(&local_130,&Spyro.physicsVelocity);
        VectorShiftRight(&local_130,6);
        VecIntToShort((VectorShort *)(puVar9 + 0x18),&local_130);
        *(undefined2 *)(puVar9 + 0x1e) = 0;
        puVar9[10] = 0x18;
        iVar5 = rand();
        puVar9[0xb] = (char)iVar5;
        uVar11 = 4;
        goto LAB_OVR21WinterTundra__8007d308;
      case 10:
        puVar9 = (undefined *)FUN_80041c50(3);
        *puVar9 = uVar11;
        iVar5 = rand();
        puVar9[2] = (byte)iVar5 & 0x1f;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),&Spyro.position);
        puVar9[10] = 0x18;
        puVar9[0xb] = 0xf;
        puVar9[0xc] = (&DAT_80064654)[local_30];
        puVar9[0xd] = (&DAT_80064655)[local_30];
        uVar11 = (&DAT_80064656)[local_30];
        puVar9[0xf] = 0x2c;
        puVar9[0x11] = 4;
        puVar9[0x10] = 0;
        puVar9[0xe] = uVar11;
        *(short *)(puVar9 + 0x18) = (short)(((local_48 - local_40) * 0x1000) / 5);
        break;
      case 0xc:
        puVar9 = (undefined *)FUN_80041c50(2);
        *puVar9 = uVar11;
        iVar5 = local_40 * 0xc;
        puVar9[3] = 1;
        puVar9[0x11] = 4;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar5),&local_120);
        VectorAdd(&local_120,&local_120,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar6 = rand();
          local_120.x = (local_120.x + 0x100) - (uVar6 & 0x1ff);
          uVar6 = rand();
          local_120.y = (local_120.y + 0x100) - (uVar6 & 0x1ff);
          uVar6 = rand();
          local_120.z = (local_120.z + 0x100) - (uVar6 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar6 = rand();
          local_120.x = (local_120.x + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          local_120.y = (local_120.y + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          local_120.z = (local_120.z + 0x80) - (uVar6 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar9 + 4),&local_120);
        *(undefined4 *)(puVar9 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar7 = rand();
        puVar9[10] = ((byte)iVar7 & 7) + 0x20;
        iVar7 = rand();
        puVar9[0xb] = (char)iVar7;
        puVar9[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar9 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar5));
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x18) = (*(short *)(puVar9 + 0x18) >> 2) + -4 + ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x1a) = (*(short *)(puVar9 + 0x1a) >> 2) + -4 + ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x1c) = (*(short *)(puVar9 + 0x1c) >> 2) + -4 + ((ushort)iVar5 & 7);
        break;
      case 0xd:
        puVar9 = (undefined *)FUN_80041c50(2);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar9 + 0x18),param_4);
        *(undefined2 *)(puVar9 + 0x1e) = 0;
        puVar9[10] = 0x18;
        iVar5 = rand();
        puVar9[0xc] = 0xff;
        puVar9[0xb] = (char)iVar5;
        uVar11 = 4;
        puVar9[0xd] = 0xff;
        puVar9[0xe] = 0;
        goto LAB_OVR21WinterTundra__8007d314;
      case 0x21:
        puVar9 = (undefined *)FUN_80041c50(2);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_100,&Spyro.physicsVelocity);
          VectorShiftRight(&local_100,6);
          VectorCopy(&local_110,&Spyro.position);
          local_110.z = local_110.z + -0x164;
          uVar6 = rand();
          local_110.x = (local_110.x + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          uVar10 = 0x30;
          local_110.y = (local_110.y + 0x80) - (uVar6 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_110.x = 0x164;
          local_110.y = 0;
          local_110.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_110,&local_110);
          VectorAdd(&local_110,&local_110,&Spyro.position);
          uVar10 = 0x40;
          uVar6 = rand();
          local_100.x = -(uVar6 & 7);
          uVar6 = rand();
          local_100.y = ((int)((uint)(ushort)cosineLookupTable[local_40 * 0x20] << 0x10) >> 0x17) -
                        ((uVar6 & 0xf) - 8);
          local_100.z = (int)((uint)(ushort)sineLookupTable[local_40 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_100,&local_100);
        }
        else {
          iVar5 = 5;
          if (param_4 == (Vec3 *)0x2) {
            iVar7 = local_40 << 5;
            iVar5 = 6;
            uVar10 = 0x30;
          }
          else {
            uVar10 = 0x40;
            iVar7 = local_40 * 0x20 + 0x10;
          }
          VectorCopy(&local_110,&Spyro.position);
          local_110.x = local_110.x + ((int)cosineLookupTable[iVar7] >> iVar5);
          local_110.z = local_110.z + -0x164;
          local_110.y = local_110.y + ((int)sineLookupTable[iVar7] >> iVar5);
          local_100.x = (int)cosineLookupTable[iVar7] >> iVar5 + 1;
          local_100.z = 0;
          local_100.y = (int)sineLookupTable[iVar7] >> iVar5 + 1;
        }
        VecIntToShort((VectorShort *)(puVar9 + 4),&local_110);
        VecIntToShort((VectorShort *)(puVar9 + 0x18),&local_100);
        *(undefined2 *)(puVar9 + 0x1e) = 0;
        puVar9[10] = 0x10;
        iVar5 = rand();
        puVar9[0xb] = (char)iVar5;
        uVar11 = 4;
        puVar9[0xc] = uVar10;
        puVar9[0xd] = uVar10;
        puVar9[0xe] = uVar10;
        puVar9[0xf] = 0x2e;
        goto LAB_OVR21WinterTundra__8007d318;
      case 0x29:
        VectorCopy(&local_f0,param_3);
        uVar6 = rand();
        local_f0.x = (local_f0.x + 0x80) - (uVar6 & 0xff);
        uVar6 = rand();
        local_f0.y = (local_f0.y + 0x80) - (uVar6 & 0xff);
        uVar6 = rand();
        uVar3 = rand();
        iVar5 = (uVar3 & 0x3ff) + 0x200;
        VectorCopy(&local_e0,&local_f0);
        from = param_4;
        if (param_4 == (Vec3 *)0x0) {
          from = &Spyro.trueVelocity;
        }
        VectorCopy(&VStack_d0,from);
        VectorShiftRight(&VStack_d0,1);
        if (local_48 == 1) {
          VectorMultByN(&VStack_d0,&VStack_d0,3);
        }
        VStack_d0.z = 0;
        VectorAdd(&local_e0,&local_e0,&VStack_d0);
        local_e0.x = local_e0.x + (cosineLookupTable[uVar6 & 0xff] * iVar5 >> 0xc);
        local_e0.z = local_e0.z + 0x200;
        local_e0.y = local_e0.y + (sineLookupTable[uVar6 & 0xff] * iVar5 >> 0xc);
        local_e0.z = RaycastDown(&local_e0,0x400);
        if (local_e0.z != 0) {
          puVar9 = (undefined *)FUN_80041c50(3);
          puVar9[3] = 1;
          puVar9[10] = 10;
          *puVar9 = uVar11;
          puVar9[2] = 0;
          puVar9[0xb] = 6;
          puVar9[0xc] = (char)(DAT_80067408 >> 4);
          puVar9[0xd] = (char)(DAT_8006740c >> 4);
          iVar5 = DAT_80067410;
          puVar9[0xf] = 0x2e;
          puVar9[0x11] = 2;
          puVar9[0x10] = 0;
          puVar9[0xe] = (char)(iVar5 >> 4);
          VecIntToShort((VectorShort *)(puVar9 + 4),&local_f0);
          VecIntToShort((VectorShort *)(puVar9 + 0x12),&local_f0);
          VecIntToShort((VectorShort *)(puVar9 + 0x18),&local_e0);
          uVar6 = rand();
          uVar3 = rand();
          iVar5 = (uVar6 & 0xe) + (uVar3 & 6) + 0x14;
          *(short *)(puVar9 + 0x16) = (short)iVar5;
          puVar9[0x1e] = 0;
          while ((0 < iVar5 || (local_e0.z < local_f0.z))) {
            local_f0.z = local_f0.z + iVar5 * 4;
            iVar5 = iVar5 + -2;
            puVar9[0x1e] = puVar9[0x1e] + '\x01';
          }
          iVar5 = rand();
          puVar9[0x1d] = (char)iVar5;
          puVar9[0x1f] = (char)isOnWaterSurface;
        }
        break;
      case 0x2a:
        puVar9 = (undefined *)FUN_80041c50(4);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
        *(int *)(puVar9 + 0x18) = param_3->x;
        *(int *)(puVar9 + 0x1c) = param_3->y;
        *(short *)(puVar9 + 0x12) = (short)param_4->x;
        *(short *)(puVar9 + 0x14) = (short)param_4->y;
        iVar5 = rand();
        puVar9[10] = ((byte)iVar5 & 7) + 3;
        bVar1 = Spyro.angleAsByte.yaw;
        puVar9[0xc] = 0x6c;
        puVar9[0xd] = 0x6c;
        puVar9[0xe] = 0x6c;
        puVar9[0xf] = 0x2e;
        puVar9[0x11] = 0;
        puVar9[0x10] = 0;
        puVar9[0xb] = bVar1 + 0x20;
        break;
      case 0x2b:
        puVar9 = (undefined *)FUN_80041c50(4);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          CopyVectorShort((VectorShort *)(puVar9 + 4),(VectorShort *)param_3);
          iVar5 = rand();
          puVar9[10] = ((byte)iVar5 & 7) + 2;
          uVar11 = 0x60;
        }
        else {
          VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
          if (param_4 == (Vec3 *)0x2) {
            iVar5 = rand();
            *(ushort *)(puVar9 + 4) = (*(short *)(puVar9 + 4) + 0x20) - ((ushort)iVar5 & 0x7f);
            iVar5 = rand();
            *(ushort *)(puVar9 + 6) = (*(short *)(puVar9 + 6) + 0x20) - ((ushort)iVar5 & 0x7f);
          }
          iVar5 = rand();
          puVar9[10] = ((byte)iVar5 & 7) + 0x10;
          uVar11 = 0x40;
        }
        bVar1 = Spyro.angleAsByte.yaw;
        puVar9[0xc] = uVar11;
        puVar9[0xd] = uVar11;
        puVar9[0xe] = uVar11;
        puVar9[0xf] = 0x2e;
        puVar9[0x11] = 0;
        puVar9[0x10] = 0;
        *(short *)(puVar9 + 0x18) = (short)param_4;
        puVar9[0xb] = bVar1;
        break;
      case 0x2c:
        MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,param_3,&VStack_c0);
        VectorAdd(&VStack_c0,&VStack_c0,&Spyro.position);
        iVar5 = FUN_8003ce38(&Spyro.position,&VStack_c0,2,0,0);
        if (iVar5 == 0) {
          puVar9 = (undefined *)FUN_80041c50(2);
          *puVar9 = uVar11;
          puVar9[3] = 1;
          VecIntToShort((VectorShort *)(puVar9 + 4),&VStack_c0);
          VecIntToShort((VectorShort *)(puVar9 + 0x18),&VStack_c0);
          *(short *)(puVar9 + 0x12) = (short)(Spyro.trueVelocity.x >> 9);
          *(short *)(puVar9 + 0x14) = (short)(Spyro.trueVelocity.y >> 9);
          iVar5 = rand();
          *(ushort *)(puVar9 + 0x16) = ((ushort)iVar5 & 3) + 4;
          puVar9[0xb] = 0;
          puVar9[0xc] = 0x80;
          puVar9[0xd] = 0x80;
          puVar9[0xe] = 0x80;
          puVar9[0xf] = 0x2e;
          puVar9[0x11] = 2;
          puVar9[0x10] = 0;
          iVar5 = rand();
          puVar9[10] = ((byte)iVar5 & 7) + 6;
          iVar5 = rand();
          puVar9[0x1c] = (char)iVar5;
          iVar5 = rand();
          puVar9[0x1d] = '\x10' - ((byte)iVar5 & 0x1f);
          iVar5 = rand();
          puVar9[2] = ((byte)iVar5 & 0x1f) + 0x40;
          VectorCopy(&VStack_b0,&VStack_c0);
          VStack_b0.z = VStack_b0.z + 0xc00;
          iVar5 = FUN_8003ce38(&VStack_c0,&VStack_b0,2,0,0);
          if (iVar5 == 0) {
            *(short *)(puVar9 + 0x1e) = (short)(VStack_b0.z >> 2);
          }
          else {
            *(short *)(puVar9 + 0x1e) = (short)(Vec3_8006ab70.z >> 2);
            if (isOnWaterSurface != 0) {
              puVar9[0x11] = 3;
            }
          }
        }
        break;
      case 0x2e:
        puVar9 = (undefined *)FUN_80041c50(2);
        *puVar9 = uVar11;
        puVar9[2] = 0;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar9 + 4) = (*(short *)(puVar9 + 4) + 0x40) - ((ushort)iVar5 & 0x7f);
        iVar5 = rand();
        *(ushort *)(puVar9 + 6) = (*(short *)(puVar9 + 6) + 0x40) - ((ushort)iVar5 & 0x7f);
        if (param_4 == (Vec3 *)0x0) {
          iVar5 = rand();
          cVar2 = ((byte)iVar5 & 0xf) + 0x14;
        }
        else {
          iVar5 = rand();
          cVar2 = (char)param_4 + ((byte)iVar5 & 0xf);
        }
        puVar9[10] = cVar2;
        iVar5 = rand();
        puVar9[0xb] = (char)iVar5;
        uVar11 = 2;
LAB_OVR21WinterTundra__8007d308:
        puVar9[0xc] = 0x80;
        puVar9[0xd] = 0x80;
        puVar9[0xe] = 0x80;
LAB_OVR21WinterTundra__8007d314:
        puVar9[0xf] = 0x2e;
LAB_OVR21WinterTundra__8007d318:
        puVar9[0x11] = uVar11;
        puVar9[0x10] = 0;
        break;
      case 0x3b:
        puVar9 = (undefined *)FUN_80041c50(5);
        puVar9[3] = 1;
        *puVar9 = uVar11;
        puVar9[0x11] = 0x10;
        puVar9[1] = puVar9[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar9 + 4) = (*(short *)(puVar9 + 4) + 0x10) - ((ushort)iVar5 & 0x1f);
        iVar5 = rand();
        *(ushort *)(puVar9 + 6) = (*(short *)(puVar9 + 6) + 8) - ((ushort)iVar5 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar4 = 0x2e0080c0;
        }
        else {
          uVar4 = 0x2e00c000;
        }
        *(undefined4 *)(puVar9 + 0xc) = uVar4;
        iVar5 = rand();
        puVar9[10] = ((byte)iVar5 & 0xf) + 0x14;
        iVar5 = rand();
        puVar9[0xb] = (char)iVar5;
        puVar9[0x10] = 0;
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x18) = ((ushort)iVar5 & 7) - 4;
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x1a) = -2 - ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x1c) = ((ushort)iVar5 & 0xf) - 8;
        break;
      case 0x42:
        puVar9 = (undefined *)FUN_80041c50(0);
        *puVar9 = uVar11;
        iVar5 = rand();
        puVar9[2] = (byte)iVar5 & 0xf;
        puVar9[3] = 1;
        iVar5 = rand();
        *(ushort *)(puVar9 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        *(ushort *)(puVar9 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        iVar7 = param_3->z;
        *(undefined2 *)(puVar9 + 0x10) = 0;
        *(undefined2 *)(puVar9 + 0x12) = 0;
        *(undefined2 *)(puVar9 + 0x14) = 0;
        puVar9[10] = 2;
        *(ushort *)(puVar9 + 8) = (short)(iVar7 >> 2) + ((ushort)iVar5 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar9[0xc] = 0xff;
LAB_OVR21WinterTundra__8007d528:
          puVar9[0xd] = 0xff;
          puVar9[0xe] = 0;
          goto switchD_OVR21WinterTundra__8007d4ec_caseD_8;
        }
        uVar6 = rand();
        switch(uVar6 & 7) {
        case 0:
          puVar9[0xc] = 0xff;
          puVar9[0xd] = 0;
          puVar9[0xe] = 0;
          break;
        case 1:
          puVar9[0xc] = 0xff;
          puVar9[0xd] = 0xff;
          puVar9[0xe] = 0;
          break;
        case 2:
          puVar9[0xc] = 0;
          goto LAB_OVR21WinterTundra__8007d528;
        case 3:
          puVar9[0xc] = 0;
          puVar9[0xd] = 0xff;
          puVar9[0xe] = 0xff;
          break;
        case 4:
          puVar9[0xc] = 0;
          puVar9[0xd] = 0;
          goto LAB_OVR21WinterTundra__8007d590;
        case 5:
          puVar9[0xc] = 0xff;
          puVar9[0xd] = 0;
          goto LAB_OVR21WinterTundra__8007d590;
        case 6:
          puVar9[0xc] = 0xff;
          puVar9[0xd] = 0x80;
          puVar9[0xe] = 0;
          break;
        case 7:
          puVar9[0xc] = 0;
          puVar9[0xd] = 0x80;
LAB_OVR21WinterTundra__8007d590:
          puVar9[0xe] = 0xff;
        }
switchD_OVR21WinterTundra__8007d4ec_caseD_8:
        puVar9[0xf] = 0x40;
        break;
      case 0x46:
        puVar9 = (undefined *)FUN_80041c50(1);
        *puVar9 = uVar11;
        iVar5 = rand();
        puVar9[2] = (byte)iVar5 & 0xf;
        puVar9[3] = 1;
        local_90 = 0;
        iVar5 = rand();
        local_8f = (undefined)iVar5;
        iVar5 = rand();
        local_8e = (undefined)iVar5;
        BuildRotationMatrix(&local_90,&MStack_88,(Mat33 *)0x0);
        local_a0.y = 0;
        local_a0.z = 0;
        local_a0.x = (int)param_4;
        MatrixMultVector(&MStack_88,&local_a0,&local_a0);
        *(short *)(puVar9 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar9 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar9 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar9 + 10) = *(short *)(puVar9 + 4) + (short)local_a0.x * 2;
        *(short *)(puVar9 + 0xc) = *(short *)(puVar9 + 6) + (short)local_a0.y * 2;
        puVar9[0x17] = 2;
        puVar9[0x10] = 0xe0;
        puVar9[0x11] = 0xc0;
        puVar9[0x13] = 0x50;
        puVar9[0x12] = 0;
        puVar9[0x14] = 0xff;
        puVar9[0x15] = 0xff;
        puVar9[0x16] = 0x80;
        *(short *)(puVar9 + 0xe) = *(short *)(puVar9 + 8) + (short)local_a0.z * 2;
        break;
      case 0x47:
        puVar9 = (undefined *)FUN_80041c50(1);
        *puVar9 = uVar11;
        iVar5 = rand();
        puVar9[2] = (byte)iVar5 & 7;
        puVar9[3] = 1;
        uVar6 = rand();
        local_68.x = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_68.y = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_68.z = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar9 + 4) = (short)(param_3->x >> 2) + (short)local_68.x * 4;
        *(short *)(puVar9 + 6) = (short)(param_3->y >> 2) + (short)local_68.y * 4;
        *(short *)(puVar9 + 8) = (short)(param_3->z >> 2) + (short)local_68.z * 4;
        *(short *)(puVar9 + 10) = *(short *)(puVar9 + 4) + (short)local_68.x;
        *(short *)(puVar9 + 0xc) = *(short *)(puVar9 + 6) + (short)local_68.y;
        puVar9[0x17] = 2;
        puVar9[0x10] = 0xe0;
        puVar9[0x11] = 0xe0;
        puVar9[0x14] = 0xff;
        puVar9[0x12] = 0x60;
        puVar9[0x15] = 0xff;
        puVar9[0x16] = 0xff;
        puVar9[0x13] = 0x50;
        *(short *)(puVar9 + 0xe) = *(short *)(puVar9 + 8) + (short)local_68.z;
        break;
      case 0x4e:
        puVar9 = (undefined *)FUN_80041c50(0);
        *puVar9 = uVar11;
        iVar5 = rand();
        puVar9[2] = (byte)iVar5 & 0x1f;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar9 + 4) = *(short *)(puVar9 + 4) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar9 + 6) = *(short *)(puVar9 + 6) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar9 + 8) = *(short *)(puVar9 + 8) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x10) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x12) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar9 + 0x14) = -((ushort)iVar5 & 1);
        iVar5 = rand();
        puVar9[0xc] = (byte)iVar5 | 0x80;
        uVar6 = rand();
        uVar6 = (uVar6 & 0x7f) + 0x60;
        puVar9[0xd] = (char)uVar6;
        if ((byte)puVar9[0xc] < uVar6) {
          puVar9[0xd] = puVar9[0xc];
        }
        iVar5 = rand();
        puVar9[0xe] = ((byte)iVar5 & 0x3f) + 0x40;
        puVar9[0xf] = 0x40;
        puVar9[10] = 2;
        break;
      case 0x4f:
        puVar9 = (undefined *)FUN_80041c50(1);
        *puVar9 = uVar11;
        iVar5 = rand();
        puVar9[2] = (byte)iVar5 & 0xf;
        puVar9[3] = 1;
        VecIntToShort((VectorShort *)(puVar9 + 10),param_3);
        VectorAdd(&local_68,param_3,param_4);
        uVar6 = rand();
        local_68.x = local_68.x + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_68.y = local_68.y + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_68.z = local_68.z + -0x40 + (uVar6 & 0x7f);
        VecIntToShort((VectorShort *)(puVar9 + 4),&local_68);
        puVar9[0x17] = 2;
        iVar5 = rand();
        puVar9[0x10] = (byte)iVar5 | 0xc0;
        iVar5 = rand();
        puVar9[0x11] = ((byte)iVar5 & 0x3f) + 0xa0;
        puVar9[0x12] = 0;
        iVar5 = rand();
        puVar9[0x14] = (byte)iVar5 | 0xe0;
        iVar5 = rand();
        puVar9[0x15] = (byte)iVar5 | 0xe0;
        puVar9[0x16] = 0x80;
        puVar9[0x13] = 0x50;
        break;
      case 0x52:
        piVar8 = (int *)param_3->x;
        puVar9 = (undefined *)FUN_80041c50(1);
        *puVar9 = uVar11;
        iVar5 = rand();
        puVar9[2] = (byte)iVar5 & 0xf;
        puVar9[3] = 1;
        uVar6 = rand();
        iVar5 = randomRangeGen(piVar8[1] >> 1);
        local_58.x = cosineLookupTable[uVar6 & 0xff] * iVar5 >> 0xc;
        local_58.z = 0;
        local_58.y = sineLookupTable[uVar6 & 0xff] * iVar5 >> 0xc;
        VectorAdd(&local_58,&local_58,param_3 + 1);
        VecIntToShort((VectorShort *)(puVar9 + 4),&local_58);
        *(undefined2 *)(puVar9 + 10) = *(undefined2 *)(puVar9 + 4);
        *(undefined2 *)(puVar9 + 0xc) = *(undefined2 *)(puVar9 + 6);
        *(short *)(puVar9 + 0xe) = *(short *)(puVar9 + 8) + 0x60;
        iVar5 = param_3[1].z;
        iVar7 = *piVar8;
        puVar9[0x10] = 0x70;
        puVar9[0x11] = 0x70;
        puVar9[0x12] = 0xe0;
        puVar9[0x14] = 0xe0;
        puVar9[0x15] = 0xe0;
        puVar9[0x16] = 0xff;
        puVar9[0x13] = 0x50;
        puVar9[0x17] = 0;
        *(int *)(puVar9 + 0x18) = iVar5 + iVar7 >> 2;
      }
      local_30 = local_30 + 4;
      local_40 = local_40 + 1;
    } while (local_40 < local_48);
  }
  return puVar9;
}



void FUN_OVR24CanyonSpeedway__8006d948(int param_1)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  int iVar8;
  int local_b0 [2];
  Vec3 local_a8;
  Vec3 local_98;
  Vec3 local_88;
  int local_78;
  int local_74;
  undefined local_70 [12];
  int local_64;
  int local_60;
  Vec3 VStack_58;
  Vec3 local_48;
  Vec3 local_38;
  Vec3 local_28;
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  iVar8 = Spyro.field35_0x5c + param_1;
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    if (cameraState != Look) {
      FUN_8002b36c(0x1200);
      FUN_8002bc68();
      FUN_8002bb24(0x5a,0x10);
    }
    break;
  case SuperchargeAscending:
    FUN_8002b4e4(local_b0,1);
    Spyro.maybeTurnSpeed = local_b0[0] >> 1;
    if (Spyro.maybeTurnSpeed < -0x19) {
      Spyro.maybeTurnSpeed = -0x19;
    }
    if (0x19 < Spyro.maybeTurnSpeed) {
      Spyro.maybeTurnSpeed = 0x19;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    FUN_8002bd70(0x240,0x180);
    iVar8 = cosineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.x = Spyro.maybeHorizontalSpeedDecay * iVar8 >> 0xc;
    iVar8 = sineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.z = Spyro.trueVelocity.z;
    Spyro.field42_0x88.y = Spyro.maybeHorizontalSpeedDecay * iVar8 >> 0xc;
    FUN_8002c038();
    Spyro.field82_0x14c = Spyro.field82_0x14c + 0xc;
    if (0xc0 < Spyro.field82_0x14c) {
      Spyro.field82_0x14c = 0xc0;
    }
    Spyro.trueVelocity.z = Spyro.trueVelocity.z - Spyro.field82_0x14c;
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    break;
  case HurtBurn:
    FUN_8002b36c(0xc80);
    FUN_8002bb24(0x28,8);
    FUN_8002bd70(0x140,0xc0);
    iVar3 = cosineLookup(Spyro.maybeTargetYaw);
    local_a8.x = Spyro.maybeHorizontalSpeedDecay * iVar3 >> 0xc;
    iVar3 = sineLookup(Spyro.maybeTargetYaw);
    local_a8.y = Spyro.maybeHorizontalSpeedDecay * iVar3 >> 0xc;
    VectorSubtract(&local_a8,&local_a8,&Spyro.trueVelocity);
    local_a8.z = 0;
    iVar3 = VectorLength(&local_a8,0);
    if (0x280 < iVar3) {
      VectorScale(&local_a8,iVar3,0x280);
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_a8);
    FUN_8002c038();
    if (iVar8 < 0xd) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x17;
    }
    else {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
    }
    iVar3 = 0;
    if (DAT_800670fc != (code *)0x0) {
      do {
        uVar4 = rand();
        if (iVar8 * 5 < (int)(uVar4 & 0xff)) {
          iVar2 = RandomRangeGen(0,0xc);
          uVar4 = Spyro.angleAsByte.yaw + 0x80 + iVar2 & 0xff;
          local_98.x = cosineLookupTable[uVar4] * 5 >> 10;
          local_98.z = 0xe;
          local_88.x = -300;
          local_88.y = 0;
          local_88.z = -200;
          local_98.y = sineLookupTable[uVar4] * 5 >> 10;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_88,&local_88);
          iVar2 = RandomRangeGen(0,0x50);
          local_88.x = local_88.x + iVar2;
          iVar2 = RandomRangeGen(0,0x50);
          local_88.y = local_88.y + iVar2;
          iVar2 = RandomRangeGen(0,0x50);
          local_88.z = local_88.z + iVar2;
          VectorAdd(&local_88,&local_88,&Spyro.position);
          iVar2 = (*DAT_800670fc)(1,0xd,&local_88,&local_98);
          *(undefined *)(iVar2 + 2) = 8;
          *(undefined *)(iVar2 + 10) = 0x20;
        }
        iVar3 = iVar3 + 1;
      } while (iVar3 < 2);
    }
    break;
  case Superfly:
  case SuperflyAscending:
  case SuperflyDescending:
    FUN_8002b694(&local_78,0x8006a144,0);
    uVar4 = local_74 * -0x14 >> 7;
    local_70._8_4_ = (Spyro.trueVelocity.z >> 3) + -0x400;
    iVar8 = local_78 * 0x14 >> 7;
    if ((int)local_70._8_4_ < 0) {
      local_70._0_4_ = Spyro.trueVelocity.x >> 3;
      local_70._4_4_ = Spyro.trueVelocity.y >> 3;
      VectorAdd((Vec3 *)local_70,(Vec3 *)local_70,&Spyro.position);
      iVar3 = FUN_8001f618(&Spyro,(Vec3 *)local_70,2);
      if (iVar3 == 0) {
        local_74 = Spyro.position.z - Vec3_8006ab70.z >> 3;
        if (10 < local_74) {
          local_74 = 10;
        }
        uVar4 = uVar4 + local_74;
      }
    }
    iVar3 = Spyro.superflySpeed;
    if ((currentLoadedLevel == OCEAN_SPEEDWAY) && (DAT_8006abf8 != '\0')) {
      iVar3 = 53000;
    }
    if (iVar3 - Spyro.position.z < 0x1000) {
      uVar5 = ((iVar3 - Spyro.position.z) * 800 >> 0xc) - Spyro.rotation.Pitch & 0xfff;
      if (0x800 < uVar5) {
        uVar5 = uVar5 - 0x1000;
      }
      if ((int)uVar5 < (int)uVar4) {
        uVar4 = uVar5;
      }
    }
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar8 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + uVar4 & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    if (inSpeedwayFlag < 0) {
      if (Spyro.rotation.Pitch < 0) {
        iVar3 = DAT_80060184 - DAT_80060180;
LAB_OVR24CanyonSpeedway__8006e1a0:
        Spyro.maybeHorizontalSpeed = DAT_80060184 + (Spyro.rotation.Pitch * iVar3) / 800;
      }
      else {
        if (0 < Spyro.rotation.Pitch) {
          iVar3 = DAT_80060188 - DAT_80060184;
          goto LAB_OVR24CanyonSpeedway__8006e1a0;
        }
        Spyro.maybeHorizontalSpeed = DAT_80060184;
      }
      Spyro.field82_0x14c =
           Spyro.field82_0x14c +
           (((Spyro.maybeHorizontalSpeed - Spyro.maybeHorizontalSpeedDecay) - Spyro.field82_0x14c) *
            0x40 >> 6);
      Spyro.maybeHorizontalSpeedDecay = Spyro.maybeHorizontalSpeedDecay + (Spyro.field82_0x14c >> 6)
      ;
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
      if (0x4b00 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x4b00;
      }
    }
    else {
      if ((currentLoadedLevel == OCEAN_SPEEDWAY) && (DAT_8006abf8 != '\0')) {
        if (53000 - Spyro.position.z < 0) {
          Spyro.maybeHorizontalSpeedDecay = 0x800;
        }
        else {
          iVar3 = maybeSquareRoot();
          Spyro.maybeHorizontalSpeedDecay = iVar3 * 0x40 + 0x800;
        }
      }
      else if (Spyro.superflySpeed - Spyro.position.z < 0) {
        iVar3 = maybeSquareRoot(-(Spyro.superflySpeed - Spyro.position.z));
        Spyro.maybeHorizontalSpeedDecay = iVar3 * -0x80 + 0x1040;
      }
      else {
        iVar3 = maybeSquareRoot();
        Spyro.maybeHorizontalSpeedDecay = iVar3 * 0x40 + 0x1040;
      }
      if (0x5900 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x5900;
      }
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
    }
    iVar3 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar8 * iVar3 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    if (Spyro.airVelocityFlag == NORMAL) {
      if ((((*(uint *)(DAT_80066f38 + 4) & 0x40) != 0) &&
          (Spyro.position.z < Spyro.superflySpeed + -0x200)) && (Spyro.state == Superfly)) {
        Spyro.airVelocityFlag = FALLING;
        Spyro.field87_0x160 = 0;
      }
    }
    else if (Spyro.position.z < Spyro.superflySpeed) {
      if (Spyro.airVelocityFlag == FALLING) {
        Spyro.field87_0x160 = Spyro.field87_0x160 + 0x200;
        if (0x17ff < Spyro.field87_0x160) {
          Spyro.field87_0x160 = 0x1800;
          Spyro.airVelocityFlag = PEAK;
        }
      }
      else {
        Spyro.field87_0x160 = Spyro.field87_0x160 + -0x100;
        if (Spyro.field87_0x160 < 1) {
          Spyro.field87_0x160 = 0;
          Spyro.airVelocityFlag = NORMAL;
        }
      }
      Spyro.field42_0x88.z = Spyro.field42_0x88.z + Spyro.field87_0x160;
    }
    else {
      Spyro.airVelocityFlag = NORMAL;
    }
    FUN_8002c038();
    break;
  case WaterSwim:
  case WaterIdle:
    if (Spyro.airVelocityFlag == FALLING) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      if (cameraState == Look) {
        Spyro.maybeHorizontalSpeedDecay = 0;
      }
      else {
        FUN_8002b36c(0x980);
        iVar8 = FUN_8002bb24(0x5a,0x10);
        if (iVar8 < 0) {
          iVar8 = -iVar8;
        }
        if (0x200 < iVar8) {
          Spyro.maybeHorizontalSpeed = 0;
        }
        uVar6 = 0xc0;
        if (Spyro.maybeHorizontalSpeedDecay < 0xc81) {
          uVar7 = 0x40;
        }
        else {
          uVar6 = 0;
          uVar7 = 0xc0;
        }
        FUN_8002bd70(uVar6,uVar7);
      }
      if (Spyro.maybeHorizontalSpeedDecay == 0) {
        VectorClear(&Spyro.field42_0x88);
        VectorClear(&Spyro.trueVelocity);
      }
      else {
        FUN_8002bdbc();
        FUN_8002c038();
        Spyro.trueVelocity.z = 0;
      }
      if ((DAT_800670fc != (code *)0x0) && (Spyro.field17_0x28 < 0)) {
        if ((Spyro.maybeHorizontalSpeedDecay < 0x401) ||
           ((1 < param_1 || ((DAT_80067008 & 1) == 0)))) {
          if ((Spyro.maybeHorizontalSpeedDecay < 0x201) &&
             (((param_1 == 0 && ((DAT_80067008 & 7) == 0)) && (uVar4 = rand(), (uVar4 & 3) == 0))))
          {
            local_28.x = 0x80;
            local_28.y = 0;
            local_28.z = 0;
            MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_28,&local_28);
            VectorAdd(&local_28,&local_28,&Spyro.position);
            local_28.z = -Spyro.field17_0x28;
            (*DAT_800670fc)(1,0x2b,&local_28,1);
          }
        }
        else {
          VectorCopy(&VStack_58,&Spyro.position);
          local_48.y = 0x40;
          local_48.z = 0;
          local_48.x = Spyro.maybeHorizontalSpeedDecay >> 5;
          if (param_1 != 0) {
            local_48.y = -0x40;
          }
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&local_38);
          VectorAdd(&VStack_58,&VStack_58,&local_38);
          local_48.x = 0;
          VStack_58.z = -Spyro.field17_0x28;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&local_48);
          VectorShiftRight(&local_48,3);
          (*DAT_800670fc)(1,0x2a,&VStack_58,&local_48);
          uVar4 = rand();
          if ((uVar4 & 0x1f) == 0) {
            (*DAT_800670fc)(1,0x29,&VStack_58,0);
          }
        }
      }
      Spyro.field82_0x14c =
           Spyro.field82_0x14c - (Spyro.field83_0x150 * 2 + Spyro.field82_0x14c * 0x14 >> 8);
      Spyro.field83_0x150 = Spyro.field83_0x150 + Spyro.field82_0x14c;
      if (0x5900 < Spyro.field83_0x150) {
        Spyro.field83_0x150 = 0x5900;
      }
      if (Spyro.field83_0x150 < -0x5900) {
        Spyro.field83_0x150 = -0x5900;
      }
    }
    break;
  case DeathBurn:
    if (Spyro.airTime == 0) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      VectorClear(&local_98);
      VectorSubtract(&local_98,&local_98,&Spyro.trueVelocity);
      local_98.z = 0;
      iVar8 = VectorLength(&local_98,0);
      if (0x40 < iVar8) {
        VectorScale(&local_98,iVar8,0x40);
      }
      local_98.z = -0xc0;
      VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_98);
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    }
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    if (((Spyro.state == DeathBurn) && (DAT_800670fc != (code *)0x0)) && ((DAT_80067008 & 1) != 0))
    {
      local_78 = 0;
      local_74 = 0;
      local_70._0_4_ = 0xe;
      VectorCopy((Vec3 *)(local_70 + 8),&Spyro.position);
      iVar8 = RandomRangeGen(0,300);
      local_70._8_4_ = local_70._8_4_ + iVar8;
      iVar8 = RandomRangeGen(0,300);
      local_64 = local_64 + iVar8;
      iVar8 = RandomRangeGen(0,300);
      local_60 = local_60 + iVar8;
      iVar8 = (*DAT_800670fc)(1,0xd,(Vec3 *)(local_70 + 8),&local_78);
      *(undefined *)(iVar8 + 2) = 6;
      *(undefined *)(iVar8 + 10) = 0x20;
    }
    break;
  case Supercharge:
    FUN_8002b4e4(&local_38,1);
    iVar8 = local_38.x * 0x23 >> 7;
    if (iVar8 == 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    else if (iVar8 < 0) {
      if (0 < Spyro.maybeTurnSpeed) {
        Spyro.maybeTurnSpeed = 0;
      }
    }
    else if (Spyro.maybeTurnSpeed < 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    if (Spyro.maybeTurnSpeed < iVar8) {
      bVar1 = iVar8 < Spyro.maybeTurnSpeed + 8;
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + 8;
    }
    else {
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + -8;
      bVar1 = Spyro.maybeTurnSpeed < iVar8;
    }
    if (bVar1) {
      Spyro.maybeTurnSpeed = iVar8;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    if (0x800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch + -0x1000;
    }
    if (Spyro.rotation.Pitch < 0) {
      iVar8 = DAT_8006019c - DAT_80060198;
LAB_OVR24CanyonSpeedway__8006ea28:
      Spyro.maybeHorizontalSpeed = DAT_8006019c + (Spyro.rotation.Pitch * iVar8) / 0x160;
    }
    else {
      if (0 < Spyro.rotation.Pitch) {
        iVar8 = DAT_800601a0 - DAT_8006019c;
        goto LAB_OVR24CanyonSpeedway__8006ea28;
      }
      Spyro.maybeHorizontalSpeed = DAT_8006019c;
    }
    FUN_8002bd70(0x240,0x180);
    FUN_8002bdbc();
    if ((Spyro.ledgeDetected == '\0') && (Spyro.airTime == 0)) {
      VectorAdd(&Spyro.trueVelocity,&Spyro.field42_0x88,&Spyro.field56_0xf0);
    }
    else {
      Spyro.trueVelocity.z = Spyro.physicsVelocity.z + -0xc0;
    }
  }
  return;
}



void FUN_OVR24CanyonSpeedway__8006eafc(void)

{
  int iVar1;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar1 = FUN_8002d9c4();
    if (iVar1 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    FUN_8002cc88();
    break;
  default:
    goto switchD_OVR24CanyonSpeedway__8006eb2c_caseD_14;
  case SuperchargeAscending:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_80032b94();
    if ((Spyro.maybeSubstate == Supercharge) && (DAT_800670fc != (code *)0x0)) {
      (*DAT_800670fc)(1,9,0,0);
    }
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    else if ((Spyro.airVelocityFlag == NORMAL) && ((inputStates[0].current & Cross) == None)) {
      Spyro.airVelocityFlag = PEAK;
    }
    break;
  case HurtBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    break;
  case Superfly:
  case SuperflyAscending:
  case SuperflyDescending:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    break;
  case WaterSwim:
  case WaterIdle:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002bfbc();
    if (Spyro.field63_0x108 == '\0') {
      return;
    }
    iVar1 = FUN_800398b0(Spyro.position.x,Spyro.position.y);
    Spyro.position.z =
         (Spyro.field172_0x270 - (-iVar1 - Spyro.field57_0xfc)) - (Spyro.field83_0x150 >> 6);
    Spyro.field17_0x28 = -iVar1 - Spyro.field57_0xfc;
    return;
  case DeathBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    Spyro.color.Red = 0x20;
    Spyro.color.Green = 0x20;
    Spyro.color.Blue = 0x20;
    Spyro.color.Alpha = 0xff;
    Spyro.field17_0x28 = 0;
    return;
  case Supercharge:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    FUN_80032b94();
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(1,9,0,0);
    }
    DAT_80068398 = 0x78;
    Spyro.field17_0x28 = 0;
    DAT_80068394 = 4;
    if ((currGameState == Normal) &&
       (iVar1 = FUN_80050b20(*(undefined *)(audioBank + 0x1a),Spyro.field169_0x264), iVar1 == 0)) {
      Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 0x1a),0,4);
      Spyro.field170_0x268 = (int)*(byte *)(audioBank + 0x1a);
    }
    goto switchD_OVR24CanyonSpeedway__8006eb2c_caseD_14;
  }
  Spyro.field17_0x28 = 0;
switchD_OVR24CanyonSpeedway__8006eb2c_caseD_14:
  return;
}



void FUN_OVR24CanyonSpeedway__8006ee60(void)

{
  undefined uVar1;
  
  if (Spyro.currentAnimationState == 0x2b) {
    if (Spyro.currentAnimationFrame != 1) {
      return;
    }
    uVar1 = *(undefined *)(audioBank + 10);
  }
  else {
    if (Spyro.currentAnimationState != 0x3a) {
      return;
    }
    if (Spyro.currentAnimationFrame != 0xd) {
      return;
    }
    uVar1 = *(undefined *)(audioBank + 0xd);
  }
  PlayAudio(uVar1,0,0);
  Spyro.field174_0x278 = (uint)Spyro.currentAnimationFrame;
  return;
}



void FUN_OVR24CanyonSpeedway__8006ef04(int param_1)

{
  undefined4 uVar1;
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
  case WaterSwim:
  case WaterIdle:
  case DeathBurn:
  case Supercharge:
    uVar1 = 0x8006a0c4;
    break;
  default:
    goto switchD_OVR24CanyonSpeedway__8006ef4c_caseD_14;
  case SuperchargeAscending:
    FUN_8002ded0(0x8006a084);
    return;
  case HurtBurn:
    uVar1 = 0;
  }
  FUN_8002db8c(uVar1);
switchD_OVR24CanyonSpeedway__8006ef4c_caseD_14:
  return;
}



void FUN_OVR24CanyonSpeedway__8006ef94(int param_1)

{
  undefined uVar1;
  Substate SVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  Vec3 VStack_18;
  
  SVar2 = Spyro.maybeSubstate;
  switch(param_1) {
  case 0x13:
  case 0x26:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
    uVar3 = 1;
    if (param_1 == 0x25) {
      uVar3 = 5;
      uVar4 = 8;
    }
    else {
      uVar4 = 3;
    }
    Spyro.field82_0x14c = randomRangeGen(uVar3,uVar4);
    Spyro.field83_0x150 = 0;
    if (DAT_800670b4 != (code *)0x0) {
      if (param_1 == 0x25) {
        uVar3 = 0x1f1;
      }
      else {
        uVar3 = 0x1db;
        if (param_1 != 0x27) {
          Spyro.field83_0x150 = 0;
          return;
        }
      }
      (*DAT_800670b4)(uVar3,0);
    }
    break;
  case 0x19:
    Spyro.maybeSubstate = Supercharge;
    Spyro.field77_0x138 = 0x60000;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = 0;
    Spyro.field118_0x1bc = '\0';
    Spyro.field119_0x1bd = '\x01';
    uVar1 = *(undefined *)(audioBank + 0x22);
    goto LAB_OVR24CanyonSpeedway__8006f184;
  case 0x1c:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = SVar2;
    VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.trueVelocity.z = 0xdc0;
    Spyro.field118_0x1bc = '\0';
    DAT_8006838c = 0xf;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    goto LAB_OVR24CanyonSpeedway__8006f174;
  case 0x21:
  case 0x22:
  case 0x23:
    if (Spyro.maybeSubstate != Superfly) {
      Spyro.maybeSubstate = Superfly;
      Spyro.airVelocityFlag = NORMAL;
      VectorClear((Vec3 *)&Spyro.field84_0x154);
      Spyro.field87_0x160 = 0;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
      if (0x4b00 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x4b00;
      }
      Spyro.field82_0x14c = 0;
      Spyro.field118_0x1bc = '\0';
      Spyro.field119_0x1bd = '\0';
    }
    break;
  case 0x2b:
  case 0x2c:
    if (Spyro.maybeSubstate != Swim) {
      PlayAudio(*(undefined *)(audioBank + 7),0,0);
      Spyro.field82_0x14c = -Spyro.trueVelocity.z >> 2;
      if (Spyro.maybeSubstate != Death) {
        Spyro.field83_0x150 = 0x5900;
        Spyro.maybeSubstate = Swim;
      }
      Spyro.airVelocityFlag = NORMAL;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      Spyro.field119_0x1bd = '\x01';
      VectorCopy(&VStack_18,&Spyro.position);
      VStack_18.z = VStack_18.z + 0x400;
      VStack_18.z = RaycastDown(&VStack_18,0x800);
      if (((VStack_18.z != 0) && (isOnWaterSurface != 0)) && (DAT_800670fc != (code *)0x0)) {
        (*DAT_800670fc)(10,0x29,&VStack_18,0);
        (*DAT_800670fc)(6,0x2e,&VStack_18,0);
      }
    }
    break;
  case 0x3a:
    Spyro.maybeSubstate = Death;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    if (param_1 != 0x3a) {
      Spyro.field118_0x1bc = '\x01';
      return;
    }
LAB_OVR24CanyonSpeedway__8006f174:
    uVar1 = *(undefined *)(audioBank + 0xc);
LAB_OVR24CanyonSpeedway__8006f184:
    PlayAudio(uVar1,0,0);
    break;
  case 0x3d:
    Spyro.maybeSubstate = Supercharge;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field77_0x138 = 0x60000;
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.maybeHorizontalSpeed = 0x1e80;
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    if (((Spyro.field90_0x16c != 0) || (Spyro.field140_0x1fc != 0)) || (Spyro.field141_0x200 != 6))
    {
      Spyro.field90_0x16c = 0;
      Spyro.field140_0x1fc = 0;
      Spyro.field141_0x200 = 6;
      FUN_80030a14();
    }
  }
  return;
}



void FUN_OVR24CanyonSpeedway__8006f420(void)

{
  int iVar1;
  CollisionType CVar2;
  SpyroState SVar3;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    SVar3 = Jump;
    if ((inputStates[0].pressed & Cross) == None) {
      CVar2 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar2 == Ice) {
        SVar3 = Ice;
joined_r0x8006ffd8:
        if (DAT_8006839d != '\0') {
          return;
        }
      }
      else {
        SVar3 = Flop;
        if (((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) &&
           (SVar3 = Charge, (inputStates[0].current & Square) == None)) {
          iVar1 = Spyro.maybeTurnSpeed;
          if (Spyro.maybeTurnSpeed < 0) {
            iVar1 = -Spyro.maybeTurnSpeed;
          }
          if (iVar1 < 0x11) {
            if (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
                 (TriggerLeft|TriggerRight)) || (SVar3 = Walk, Spyro.maybeHorizontalSpeed == 0)) {
              if ((cameraState == Look) || (Spyro.field162_0x240 != 0)) {
                if (Spyro.state == Idle) {
                  return;
                }
                SetSpyroState(Idle);
                if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
                  Spyro.currentAnimationState = Spyro.nextAnimationState;
                  Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
                }
                Spyro.nextAnimationState = (byte)Spyro.state;
                Spyro.nextAnimationFrame = 0;
                Spyro.field11_0x1c = 0x71;
                Spyro.field136_0x1ec = Spyro.state;
                Spyro.field137_0x1f0 = 0;
                return;
              }
              SVar3 = IdleLedge;
              if (Spyro.ledgeDetected == '\0') {
                FUN_80032c34();
                return;
              }
            }
          }
          else {
            SVar3 = Walk;
          }
        }
      }
    }
    break;
  default:
    goto switchD_OVR24CanyonSpeedway__8006f458_caseD_14;
  case SuperchargeAscending:
    iVar1 = FUN_8002b228();
    if (iVar1 != 0) {
      return;
    }
    if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
      Spyro.field120_0x1be = '\x01';
    }
    if ((((Spyro.field55_0xec < 0x17) ||
         (SVar3 = Bonk,
         -1 < Spyro.trueVelocity.x * Spyro.field53_0xd4.x +
              Spyro.trueVelocity.y * Spyro.field53_0xd4.y)) &&
        ((Spyro.maybeHorizontalSpeedDecay < 0xc81 ||
         (SVar3 = Bonk, Spyro.maybeHorizontalSpeedDecay <= Spyro.field49_0xbc << 1)))) &&
       ((Spyro.airTime != 0 || (SVar3 = Supercharge, Spyro.field35_0x5c < 5)))) {
      if (Spyro.field120_0x1be == '\0') {
        SVar3 = ChargeAir;
      }
      else {
        SVar3 = Glide;
      }
      if (-1 < Spyro.trueVelocity.z) {
        return;
      }
    }
    break;
  case HurtBurn:
    if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
      Spyro.field120_0x1be = '\x01';
    }
    if ((((Spyro.airTime == 0) && (0xf < Spyro.field35_0x5c)) && (Spyro.field55_0xec < 0x17)) &&
       (Spyro.field53_0xd4.x * Spyro.trueVelocity.x + Spyro.field53_0xd4.y * Spyro.trueVelocity.y +
        Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)) {
      if (Spyro.maybeHorizontalSpeed == 0) {
        SVar3 = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          SVar3 = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        SVar3 = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          SVar3 = StartRun;
        }
      }
      else {
        SVar3 = Run;
      }
    }
    else if (((inputStates[0].current & Square) == None) ||
            (SVar3 = ChargeAir, Spyro.airVelocityFlag != FALLING)) {
      if ((Spyro.field119_0x1bd == '\0') || (Spyro.field120_0x1be == '\0')) {
        if (Spyro.airVelocityFlag != FALLING) {
          return;
        }
        SVar3 = Flop;
        if ((-0x1901 < Spyro.physicsVelocity.z) && (Spyro.field35_0x5c < 0x5b)) {
          return;
        }
      }
      else {
        SVar3 = Glide;
        if (Spyro.airVelocityFlag != FALLING) {
          return;
        }
      }
    }
    break;
  case Superfly:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        SVar3 = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          SVar3 = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        SVar3 = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          SVar3 = StartRun;
        }
      }
      else {
        SVar3 = Run;
      }
    }
    else {
      SVar3 = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        SVar3 = ClimbIdle;
        if ((((iVar1 == 0) && (SVar3 = Flop, Spyro.field51_0xc4 != 0)) &&
            (SVar3 = Glide, Spyro.powerFlightTime != 0)) &&
           (SVar3 = Hover, (inputStates[0].pressed & Triangle) == None)) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          SVar3 = Flop;
          if (((0x3ff < iVar1) && (SVar3 = SuperflyAscending, Spyro.airVelocityFlag == NORMAL)) &&
             ((Spyro.rotation.Pitch < 0x16d &&
              (SVar3 = SuperflyDescending, -0x16d < Spyro.rotation.Pitch)))) {
            return;
          }
        }
      }
    }
    break;
  case SuperflyAscending:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        SVar3 = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          SVar3 = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        SVar3 = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          SVar3 = StartRun;
        }
      }
      else {
        SVar3 = Run;
      }
    }
    else {
      SVar3 = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        SVar3 = ClimbIdle;
        if (((iVar1 == 0) && (SVar3 = Flop, Spyro.field51_0xc4 != 0)) &&
           ((SVar3 = Glide, Spyro.powerFlightTime != 0 &&
            (SVar3 = Hover, (inputStates[0].pressed & Triangle) == None)))) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          SVar3 = Flop;
          if (0x3ff < iVar1) {
            if (0xff < Spyro.rotation.Pitch) {
              return;
            }
            SVar3 = Superfly;
            if (Spyro.airVelocityFlag != NORMAL) {
              return;
            }
          }
        }
      }
    }
    break;
  case SuperflyDescending:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        SVar3 = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          SVar3 = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        SVar3 = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          SVar3 = StartRun;
        }
      }
      else {
        SVar3 = Run;
      }
    }
    else {
      SVar3 = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        SVar3 = ClimbIdle;
        if ((((iVar1 == 0) && (SVar3 = Flop, Spyro.field51_0xc4 != 0)) &&
            (SVar3 = Glide, Spyro.powerFlightTime != 0)) &&
           (SVar3 = Hover, (inputStates[0].pressed & Triangle) == None)) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          SVar3 = Flop;
          if (((0x3ff < iVar1) && (SVar3 = SuperflyAscending, Spyro.airVelocityFlag == NORMAL)) &&
             (SVar3 = Superfly, Spyro.rotation.Pitch < -0xff)) {
            return;
          }
        }
      }
    }
    break;
  case WaterSwim:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) == None) || (SVar3 = Jump, Spyro.field35_0x5c < 9)) {
      if (Spyro.field63_0x108 == '\0') {
        SVar3 = Flop;
        goto LAB_OVR24CanyonSpeedway__8006fe64;
      }
      if ((((inputStates[0].pressed & Square) != None) && (8 < Spyro.field35_0x5c)) &&
         (globalProgressFlags.swim.isPayed != 0)) {
        iVar1 = FUN_8003ee3c(&Spyro,0x400,1,0);
        SVar3 = UnderwaterSwim;
        if (iVar1 == 0) break;
      }
    }
    else {
LAB_OVR24CanyonSpeedway__8006fe64:
      SetSpyroState(SVar3);
    }
    SVar3 = WaterIdle;
    if (DAT_8006839d == '\0') {
      return;
    }
    break;
  case WaterIdle:
    if (Spyro.airVelocityFlag == FALLING) {
      if (DAT_8006abf8 != '\0') {
        return;
      }
      if (((inputStates[0].pressed & (Triangle|Cross|Start)) == None) && (Spyro.field35_0x5c < 0x3d)
         ) {
        return;
      }
      goto joined_r0x80070020;
    }
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) == None) || (SVar3 = Jump, Spyro.field35_0x5c < 9)) {
      if (Spyro.field63_0x108 != '\0') {
        if ((((inputStates[0].pressed & Square) != None) && (8 < Spyro.field35_0x5c)) &&
           (globalProgressFlags.swim.isPayed != 0)) {
          iVar1 = FUN_8003ee3c(&Spyro,0x400,1,0);
          SVar3 = UnderwaterSwim;
          if (iVar1 == 0) break;
        }
        if (cameraState == Look) {
          return;
        }
        SVar3 = WaterSwim;
        goto joined_r0x8006ffd8;
      }
      SVar3 = Flop;
    }
    break;
  case DeathBurn:
    if (Spyro.field35_0x5c < 0x89) {
      return;
    }
    if (inSpeedwayFlag < 0) goto LAB_OVR24CanyonSpeedway__80070038;
joined_r0x80070020:
    if (DAT_80066f8c != (code *)0x0) {
      (*DAT_80066f8c)();
      return;
    }
LAB_OVR24CanyonSpeedway__80070038:
    OnDeath();
    return;
  case Supercharge:
    iVar1 = FUN_8002b228();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airVelocityFlag == FALLING) {
      if (3 < Spyro.airTime) {
LAB_OVR24CanyonSpeedway__800700c4:
        SetSpyroState(SuperchargeAscending);
        Spyro.trueVelocity.z = 0xdc0;
        Spyro.airTime = Spyro.airTime + 1;
        return;
      }
      CVar2 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar2 != Ramp) {
        Spyro.airVelocityFlag = NORMAL;
      }
LAB_OVR24CanyonSpeedway__800701dc:
      if (Spyro.maybeHorizontalSpeedDecay < 0xc81) {
        return;
      }
      SVar3 = Bonk;
      if (Spyro.maybeHorizontalSpeedDecay <= Spyro.field49_0xbc << 1) {
        return;
      }
    }
    else {
      if ((inputStates[0].current & Cross) != None) goto LAB_OVR24CanyonSpeedway__800700c4;
      SVar3 = SuperchargeAscending;
      if ((Spyro.airTime < 4) &&
         ((Spyro.field55_0xec < 0x17 ||
          (SVar3 = Flop,
          -1 < Spyro.field53_0xd4.x * Spyro.trueVelocity.x +
               Spyro.field53_0xd4.y * Spyro.trueVelocity.y)))) {
        if ((Spyro.airVelocityFlag == PEAK) && (0xf < Spyro.field35_0x5c)) {
          Spyro.airVelocityFlag = NORMAL;
        }
        if ((((inputStates[0].current & Square) != None) || (-1 < inSpeedwayFlag)) ||
           (SVar3 = Run, Spyro.airVelocityFlag == PEAK)) goto LAB_OVR24CanyonSpeedway__800701dc;
      }
    }
  }
  SetSpyroState(SVar3);
switchD_OVR24CanyonSpeedway__8006f458_caseD_14:
  return;
}



void FUN_OVR24CanyonSpeedway__80070230(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar3 = DAT_80067fbc + 2 >> 2;
  if (4 < iVar3) {
    iVar3 = 4;
  }
  if (cameraState == ChaseFly) {
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_800615c4,DAT_80067ef0);
      Orbit_80067f14.Latitude = -Spyro.rotation.Pitch;
      iVar4 = Orbit_80067f14.Latitude - Orbit_80067f00.Latitude >> 2;
      Orbit_80067f14.Pitch = iVar4;
      if (0xc0 < iVar4) {
        Orbit_80067f14.Pitch = 0xc0;
      }
      if (iVar4 < -0xc0) {
        Orbit_80067f14.Pitch = -0xc0;
      }
      iVar4 = Orbit_80067f14.Pitch;
      if (Orbit_80067f14.Pitch < 0) {
        iVar4 = -Orbit_80067f14.Pitch;
      }
      if (iVar4 < 9) {
        Orbit_80067f14.Pitch = 0;
      }
      Orbit_80067f14.Yaw = -Spyro.rotation.Roll >> 2;
      InputRotateCamera(0xc0);
      FUN_8001f0bc();
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar3 * 0x14 + -0x7ff9e8d4),0);
    if (cameraOrbitAcceleration_Scale.Longitude < 0x100) {
      cameraOrbitAcceleration_Scale.Longitude = 0x100;
    }
    if (cameraOrbitAcceleration_Scale.Latitude < 0x60) {
      cameraOrbitAcceleration_Scale.Latitude = 0x60;
    }
    iVar4 = 0x40;
    if (0x3f < cameraOrbitAcceleration_Scale.Yaw) goto LAB_OVR24CanyonSpeedway__800705a4;
  }
  else {
    if (cameraState != 0x1d) {
      return;
    }
    iVar4 = *DAT_80067ff0;
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80061704,DAT_80067ef0);
      Orbit_80067f14.Latitude = Orbit_80067f14.Latitude - Spyro.rotation.Pitch & 0xfff;
      iVar1 = (Orbit_80067f14.Latitude - Orbit_80067f00.Latitude >> 2) +
              (*(int *)(iVar4 + 0x18) >> 1);
      iVar2 = iVar1;
      if (0xc0 < iVar1) {
        iVar2 = 0xc0;
      }
      if (iVar1 < -0xc0) {
        iVar2 = -0xc0;
      }
      iVar1 = iVar2;
      if (iVar2 < 0) {
        iVar1 = -iVar2;
      }
      if (8 < iVar1) {
        Orbit_80067f14.Pitch = Orbit_80067f14.Pitch + iVar2 & 0xfff;
      }
      Orbit_80067f14.Yaw = *(int *)(iVar4 + 0x1c) >> 1;
      InputRotateCamera(0xc0);
      FUN_8001f0bc();
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar3 * 0x14 + -0x7ff9e8d4),0);
    if (cameraOrbitAcceleration_Scale.Longitude < 0x100) {
      cameraOrbitAcceleration_Scale.Longitude = 0x100;
    }
    if (cameraOrbitAcceleration_Scale.Latitude < 0x60) {
      cameraOrbitAcceleration_Scale.Latitude = 0x60;
    }
    if (cameraOrbitAcceleration_Scale.Pitch < 0x80) {
      cameraOrbitAcceleration_Scale.Pitch = 0x80;
    }
    iVar4 = 0x80;
    if (0x7f < cameraOrbitAcceleration_Scale.Yaw) goto LAB_OVR24CanyonSpeedway__800705a4;
  }
  cameraOrbitAcceleration_Scale.Yaw = iVar4;
LAB_OVR24CanyonSpeedway__800705a4:
  OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar3 * 0x14 + -0x7ff9e848),0);
  OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
  OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
                    // WARNING: Read-only address (ram,0x80067f04) is written
  return;
}



void FUN_OVR24CanyonSpeedway__80070628(int param_1)

{
  if ((param_1 == 3) || (param_1 == 0x1d)) {
    INT_80067ed4 = 0;
    DAT_80067fc4 = 0;
    DAT_80067fc5 = 0;
    DAT_80067fc6 = 1;
    DAT_80067fc9 = 0;
    DAT_80067ee0 = 0;
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
    FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
    OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
  }
  return;
}



void FUN_OVR24CanyonSpeedway__800706f8(void)

{
  CameraState CVar1;
  
  if ((cameraState == ChaseFly) || (cameraState == 0x1d)) {
    CVar1 = DAT_80067fec;
    if (((DAT_80067fec == Align) &&
        (((inputStates[0].current & Triangle) == None ||
         (CVar1 = Look, Spyro.field123_0x1c1 == '\0')))) &&
       (((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) == None ||
        ((((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
          ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)) ||
         (CVar1 = QuickAlign, Spyro.field162_0x240 != 0)))))) {
      CVar1 = cameraStateLookup[Spyro.state];
      if (cameraState == CVar1) {
        return;
      }
      if (CVar1 == Align) {
        CVar1 = Passive;
      }
    }
    SetCameraState(CVar1);
  }
  return;
}



void FUN_OVR24CanyonSpeedway__800707f8(void)

{
  int iVar1;
  char *pcVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  if (DAT_8006abf8 != '\0') {
    UpdateHUDElement(&hudExtra3,riptoHPClone_);
    InitHudElement(&hudExtra1,(&DAT_80069898)[DAT_80067694]);
    InitHudElement(&hudExtra2,0);
    return;
  }
  iVar6 = 0;
  pcVar2 = &DAT_8006769c;
  piVar4 = &DAT_80069898;
  do {
    if (*piVar4 == 8) {
      if (*pcVar2 == '\0') {
        *pcVar2 = '\x01';
        DAT_80067698 = 0;
        goto LAB_OVR24CanyonSpeedway__800708b0;
      }
LAB_OVR24CanyonSpeedway__800708c0:
      hudExtra2.field1_0x1 = 3;
      hudExtra2.displayState = Held;
    }
    else {
LAB_OVR24CanyonSpeedway__800708b0:
      if (*pcVar2 != '\0') goto LAB_OVR24CanyonSpeedway__800708c0;
    }
    pcVar2 = pcVar2 + 1;
    iVar6 = iVar6 + 1;
    piVar4 = piVar4 + 1;
  } while (iVar6 < 4);
  if ((-1 < DAT_80067694) && ((&DAT_8006769c)[DAT_80067694] != '\0')) {
    hudExtra1.field1_0x1 = 3;
    hudExtra2.field1_0x1 = 3;
    iVar6 = DAT_80067698 + deltaTime;
    iVar5 = iVar6 + 0xf;
    if (DAT_80067698 < 0x80) {
      iVar1 = iVar5;
      if (iVar5 < 0) {
        iVar1 = iVar6 + 0x1e;
      }
      iVar3 = DAT_80067698 + 0xf;
      iVar7 = iVar3;
      if (iVar3 < 0) {
        iVar7 = DAT_80067698 + 0x1e;
      }
      if (iVar5 + (iVar1 >> 4) * -0x10 < iVar3 + (iVar7 >> 4) * -0x10) {
        DAT_80067698 = iVar6;
        FUN_800506ac(0,0,1);
        iVar6 = DAT_80067698;
      }
    }
    DAT_80067698 = iVar6;
    if (0xaf < DAT_80067698) {
      if (DAT_800698a8 == DAT_80067694) {
        DAT_800698a8 = -1;
      }
      DAT_80067694 = -1;
      hudExtra1.field1_0x1 = 0;
      hudExtra1.displayState = Hidden;
      DAT_80067698 = 0;
    }
    goto LAB_OVR24CanyonSpeedway__80070a94;
  }
  if ((hudExtra1.displayState == Hidden) || (hudExtra1.displayState == ~Hidden)) {
    if (DAT_800698a8 < 0) goto LAB_OVR24CanyonSpeedway__80070a94;
    DAT_80067694 = DAT_800698a8;
    if ((&DAT_80069898)[DAT_800698a8] == 0) goto LAB_OVR24CanyonSpeedway__80070a7c;
  }
  else {
    if (hudExtra1.displayState != Held) goto LAB_OVR24CanyonSpeedway__80070a94;
    if (DAT_80067694 != DAT_800698a8) {
LAB_OVR24CanyonSpeedway__80070a7c:
      hudExtra1.field1_0x1 = 0;
      goto LAB_OVR24CanyonSpeedway__80070a94;
    }
  }
  hudExtra1.field1_0x1 = 3;
LAB_OVR24CanyonSpeedway__80070a94:
  InitHudElement(&hudExtra3,0);
  UpdateHUDElement(&hudExtra1,(&DAT_80069898)[DAT_80067694]);
  UpdateHUDElement(&hudExtra2,0);
  return;
}



void FUN_OVR24CanyonSpeedway__80070aec(void)

{
  byte bVar1;
  short sVar2;
  uint uVar3;
  uint *puVar4;
  int iVar5;
  SpriteInfo *spriteInfo;
  int iVar6;
  int iVar7;
  undefined4 local_20;
  undefined4 local_1c;
  
  iVar6 = 7;
  if (hudExtra1.displayState != Hidden) {
    iVar7 = 0;
    do {
      iVar5 = (int)DAT_80067008 >> 1;
      if (DAT_80067694 == 0) {
        spriteInfo = (SpriteInfo *)&DAT_800635f8;
        if (iVar6 < (int)hudExtra1.displayNumber) {
          uVar3 = (uint)(byte)(&DAT_800634a8)[(iVar5 + iVar6) % 0xe];
          iVar7 = -1;
          goto LAB_OVR24CanyonSpeedway__80070cac;
        }
      }
      else if (DAT_80067694 == 1) {
        spriteInfo = (SpriteInfo *)&DAT_80063618;
        iVar7 = 3;
        if (iVar6 < (int)hudExtra1.displayNumber) {
          iVar7 = 1;
          uVar3 = iVar5 + iVar6 & 7;
          goto LAB_OVR24CanyonSpeedway__80070cac;
        }
      }
      else if (DAT_80067694 == 2) {
        spriteInfo = (SpriteInfo *)0x80063638;
        if (iVar6 < (int)hudExtra1.displayNumber) {
          uVar3 = (uint)(byte)(&DAT_80063490)[(iVar5 + iVar6) % 10];
          iVar7 = -1;
LAB_OVR24CanyonSpeedway__80070cac:
          spriteInfo = spriteInfo + uVar3;
        }
      }
      else {
        spriteInfo = (SpriteInfo *)0x80063650;
        if (iVar6 < (int)hudExtra1.displayNumber) {
          uVar3 = (uint)(byte)(&DAT_80066df4)[(iVar5 + iVar6) % 6];
          iVar7 = -1;
          goto LAB_OVR24CanyonSpeedway__80070cac;
        }
      }
      (*DAT_80066f58)(&local_20,iVar6);
      if ((DAT_80067698 == 0) || (DAT_80067698 + (7 - iVar6) * -0x10 < 0x40)) {
        if (-1 < iVar7) {
          SetTPage(iVar7 << 5 | 0x18);
        }
        puVar4 = RenderSprite(spriteInfo,(short)local_20,(short)local_1c,1);
        if (DAT_80067694 == 3) {
          *(undefined2 *)((int)puVar4 + 0xe) = 0x5a20;
        }
        if (iVar7 < 0) {
          *(byte *)((int)puVar4 + 7) = *(byte *)((int)puVar4 + 7) & 0xfd;
        }
      }
      iVar6 = iVar6 + -1;
    } while (-1 < iVar6);
  }
  if (hudExtra2.displayState != Hidden) {
    SetTPage(0x38);
    if (DAT_8006769c != '\0') {
      bVar1 = (&DAT_800634a8)[((int)DAT_80067008 >> 1) % 0xe];
      sVar2 = FUN_80052498(&hudExtra2,0xfffffff2,0xec);
      puVar4 = RenderSprite((SpriteInfo *)(&DAT_800635f8 + (uint)bVar1 * 4),0x28,sVar2 + 0xec,1);
      *(byte *)((int)puVar4 + 7) = *(byte *)((int)puVar4 + 7) & 0xfd;
    }
    if (DAT_8006769d != '\0') {
      uVar3 = DAT_80067008 & 0xe;
      sVar2 = FUN_80052498(&hudExtra2,0xfffffff4,0xec);
      RenderSprite((SpriteInfo *)(&DAT_80063618 + uVar3 * 2),0x4c,sVar2 + 0xec,1);
    }
    if (DAT_8006769e != '\0') {
      bVar1 = (&DAT_80063490)[((int)DAT_80067008 >> 1) % 10];
      sVar2 = FUN_80052498(&hudExtra2,0xfffffff6,0xec);
      puVar4 = RenderSprite((SpriteInfo *)((uint)bVar1 * 4 + -0x7ff9c9c8),0x70,sVar2 + 0xec,1);
      *(byte *)((int)puVar4 + 7) = *(byte *)((int)puVar4 + 7) & 0xfd;
    }
    if (DAT_8006769f != '\0') {
      bVar1 = (&DAT_80066df4)[((int)DAT_80067008 >> 1) % 6];
      sVar2 = FUN_80052498(&hudExtra2,0xfffffff8,0xec);
      puVar4 = RenderSprite((SpriteInfo *)((uint)bVar1 * 4 + -0x7ff9c9b0),0x94,sVar2 + 0xec,1);
      *(undefined2 *)((int)puVar4 + 0xe) = 0x5a20;
      *(byte *)((int)puVar4 + 7) = *(byte *)((int)puVar4 + 7) & 0xfd;
    }
  }
  if (hudExtra3.displayState != Hidden) {
    SetTPage(0x38);
    iVar6 = RenderBLProgressCounter
                      (&hudExtra3,&DAT_80063660 + (((int)DAT_80067008 >> 1) % 6) * 4,0x150,0xec,0x19
                      );
    *(undefined2 *)(iVar6 + 0xe) = 0x5c20;
    *(byte *)(iVar6 + 7) = *(byte *)(iVar6 + 7) & 0xfd;
  }
  if (DAT_8006abf8 == '\0') {
    RenderTimer(DAT_800698ac,0x14a,0x18);
  }
  return;
}



void FUN_OVR24CanyonSpeedway__80071078(void)

{
  FUN_80050aac();
  currGameState = Freeze;
  menuAnimation = 0;
  menuState = Pausing;
  pauseMenuCurrentItem = 0;
  pauseSubMenuId = 0;
  FUN_8001f4a4(*DAT_80066f2c,4);
  return;
}



void FUN_OVR24CanyonSpeedway__800710d8(int param_1)

{
  int iVar1;
  int *piVar2;
  int iVar3;
  int *piVar4;
  
  iVar3 = 0;
  iVar1 = 0;
  piVar4 = &DAT_80069898;
  piVar2 = worldGemsCollectedValue + g_currLevelID;
  do {
    if (*piVar4 == 8) {
      iVar3 = iVar3 + 1;
      if ((&DAT_80061950)[inSpeedwayFlag * 0x16 + iVar1] == 0) {
        gemsCollectedNetValue = gemsCollectedNetValue + (&DAT_8006196c)[inSpeedwayFlag * 0x16];
        *piVar2 = *piVar2 + (&DAT_8006196c)[inSpeedwayFlag * 0x16];
        gemCollectedPhysicalCount = gemCollectedPhysicalCount + 0xc;
        (&DAT_80061950)[inSpeedwayFlag * 0x16 + iVar1] = 1;
      }
    }
    iVar1 = iVar1 + 1;
    piVar4 = piVar4 + 1;
  } while (iVar1 < 4);
  if (((&DAT_80061960)[inSpeedwayFlag * 0x16] == 0) && (iVar3 == 4)) {
    gemsCollectedNetValue = gemsCollectedNetValue + (&DAT_8006196c)[inSpeedwayFlag * 0x16];
    worldGemsCollectedValue[g_currLevelID] =
         worldGemsCollectedValue[g_currLevelID] + (&DAT_8006196c)[inSpeedwayFlag * 0x16];
    gemCollectedPhysicalCount = gemCollectedPhysicalCount + 0xc;
    (&DAT_80061960)[inSpeedwayFlag * 0x16] = 1;
  }
  currGameState = Normal;
  if (param_1 != 0) {
    OnDeath();
  }
  return;
}



void FUN_OVR24CanyonSpeedway__800712dc(void)

{
  uint uVar1;
  undefined4 uVar2;
  int iVar3;
  
  DAT_80067008 = DAT_80067008 + 1;
  if (pauseSubMenuId == 0) {
    menuAnimation = menuAnimation + 1;
    if (9 < menuAnimation) {
      menuAnimation = 0;
      menuState = menuState + Paused;
      if (100 < (int)menuState) {
        menuState = 100;
      }
      if (menuState == BetweenHomeworldAndWorld) {
        if (DAT_80069898 + DAT_8006989c + DAT_800698a0 + DAT_800698a4 == 0x20) {
          uVar2 = 0;
        }
        else {
LAB_OVR24CanyonSpeedway__800713e0:
          uVar2 = 1;
        }
      }
      else {
        if (4 < (int)menuState) goto LAB_OVR24CanyonSpeedway__800713ec;
        if ((&inSpeedwayFlag)[menuState] != 8) goto LAB_OVR24CanyonSpeedway__800713e0;
        uVar2 = 0;
      }
      FUN_800506ac(0,uVar2,0);
    }
LAB_OVR24CanyonSpeedway__800713ec:
    if (6 < (int)menuState) {
      if (DAT_80069898 + DAT_8006989c + DAT_800698a0 + DAT_800698a4 == 0x20) {
        if ((inputStates[0].pressed & (Cross|Start)) == None) {
          return;
        }
        DAT_800698ac = DAT_800698b0;
        menuAnimation = 0;
        menuState = Pausing;
        pauseSubMenuId = 1;
        return;
      }
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None) {
        pauseMenuCurrentItem = 1 - pauseMenuCurrentItem;
        PlayAudio(*(undefined *)(audioBank + 0x17),0,0);
      }
      if ((inputStates[0].pressed & (Cross|Start)) == None) {
        return;
      }
      if (pauseMenuCurrentItem == 0) {
LAB_OVR24CanyonSpeedway__800719ac:
        (*DAT_80066f80)(1);
        return;
      }
      uVar1 = 0;
      if (0 < gemCollectedPhysicalCount) {
        iVar3 = 0;
        do {
          (&DAT_80068218)[uVar1 & 0x1f] =
               (&DAT_80061a80)[uVar1 + ((iVar3 >> 1) - ((int)uVar1 >> 0x1f)) * -0xc];
          uVar1 = uVar1 + 1;
          iVar3 = (int)uVar1 / 6 + ((int)uVar1 >> 0x1f);
        } while ((int)uVar1 < gemCollectedPhysicalCount);
      }
LAB_OVR24CanyonSpeedway__80071a3c:
      (*DAT_80066f80)(0);
      FUN_80019928(0xffffffff);
                    // WARNING: Read-only address (ram,0x8006989c) is written
      return;
    }
    if (99 < (int)menuState) {
      return;
    }
    if ((inputStates[0].pressed & (Triangle|Cross|Start)) == None) {
      return;
    }
    if (DAT_80069898 + DAT_8006989c + DAT_800698a0 + DAT_800698a4 == 0x20) {
      uVar2 = 0;
      goto LAB_OVR24CanyonSpeedway__80071890;
    }
  }
  else {
    if (pauseSubMenuId != 1) {
      if (pauseSubMenuId != 2) {
        return;
      }
      menuAnimation = menuAnimation + 1;
      if (9 < menuAnimation) {
        menuAnimation = 0;
        menuState = menuState + Paused;
        if (100 < (int)menuState) {
          menuState = 100;
        }
        if (menuState + ~Pausing < 2) {
          FUN_800506ac(0,0,0);
        }
      }
      if ((int)menuState < 4) {
        return;
      }
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None) {
        pauseMenuCurrentItem = 1 - pauseMenuCurrentItem;
        PlayAudio(*(undefined *)(audioBank + 0x17),0,0);
      }
      if ((inputStates[0].pressed & (Cross|Start)) == None) {
        return;
      }
      if (pauseMenuCurrentItem == 0) goto LAB_OVR24CanyonSpeedway__800719ac;
      uVar1 = 0;
      if (0 < gemCollectedPhysicalCount) {
        iVar3 = 0;
        do {
          (&DAT_80068218)[uVar1 & 0x1f] =
               (&DAT_80061a80)[uVar1 + ((iVar3 >> 1) - ((int)uVar1 >> 0x1f)) * -0xc];
          uVar1 = uVar1 + 1;
          iVar3 = (int)uVar1 / 6 + ((int)uVar1 >> 0x1f);
        } while ((int)uVar1 < gemCollectedPhysicalCount);
      }
      goto LAB_OVR24CanyonSpeedway__80071a3c;
    }
    menuAnimation = menuAnimation + 1;
    if (9 < menuAnimation) {
      menuAnimation = 0;
      menuState = menuState + Paused;
      if (100 < (int)menuState) {
        menuState = 100;
      }
      if (menuState + ~Pausing < 2) {
        uVar2 = 0;
      }
      else {
        if (menuState != BetweenMenuAndHomeworld) goto LAB_OVR24CanyonSpeedway__800716c4;
        if (DAT_800698ac < (&oceanBestTime)[inSpeedwayFlag * 0x16]) {
          uVar2 = 0;
        }
        else {
          uVar2 = 1;
        }
      }
      FUN_800506ac(0,uVar2,0);
    }
LAB_OVR24CanyonSpeedway__800716c4:
    if (4 < (int)menuState) {
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None) {
        pauseMenuCurrentItem = 1 - pauseMenuCurrentItem;
        PlayAudio(*(undefined *)(audioBank + 0x17),0,0);
      }
      if ((inputStates[0].pressed & (Cross|Start)) == None) {
        return;
      }
      if (DAT_800698ac < (&oceanBestTime)[inSpeedwayFlag * 0x16]) {
        (&oceanBestTime)[inSpeedwayFlag * 0x16] = DAT_800698ac;
      }
      if (pauseMenuCurrentItem == 0) goto LAB_OVR24CanyonSpeedway__800719ac;
      uVar1 = 0;
      if (0 < gemCollectedPhysicalCount) {
        iVar3 = 0;
        do {
          (&DAT_80068218)[uVar1 & 0x1f] =
               (&DAT_80061a80)[uVar1 + ((iVar3 >> 1) - ((int)uVar1 >> 0x1f)) * -0xc];
          uVar1 = uVar1 + 1;
          iVar3 = (int)uVar1 / 6 + ((int)uVar1 >> 0x1f);
        } while ((int)uVar1 < gemCollectedPhysicalCount);
      }
      goto LAB_OVR24CanyonSpeedway__80071a3c;
    }
    if (99 < (int)menuState) {
      return;
    }
    if ((inputStates[0].pressed & (Triangle|Cross|Start)) == None) {
      return;
    }
    if (DAT_800698ac < (&oceanBestTime)[inSpeedwayFlag * 0x16]) {
      uVar2 = 0;
      goto LAB_OVR24CanyonSpeedway__80071890;
    }
  }
  uVar2 = 1;
LAB_OVR24CanyonSpeedway__80071890:
  menuState = 100;
  menuAnimation = 0;
  FUN_800506ac(0,uVar2,0);
  return;
}



void FUN_OVR24CanyonSpeedway__80071a6c(int *param_1,int param_2)

{
  int iVar1;
  Vec3 local_30;
  Vec3 local_20;
  
  if (DAT_80067698 == 0) {
    *param_1 = param_2 * 0x22 + 0x1e;
    local_30.y = FUN_80052498(&hudExtra1,param_2 * 2 + -0xe,0x24);
    local_30.y = local_30.y + -0x10;
  }
  else {
    iVar1 = DAT_80067698 + (7 - param_2) * -0x10;
    if (0x40 < iVar1) {
      iVar1 = 0x40;
    }
    if (iVar1 < 0) {
      iVar1 = 0;
    }
    local_30.x = param_2 * 0x22 + 0x1e;
    local_30.y = FUN_80052498(&hudExtra1,param_2 * 2 + -0xe,0xfffffff0);
    local_30.y = local_30.y + -0x10;
    local_30.z = 0;
    local_20.x = DAT_80067694 * 0x22 + 0x1e;
    local_20.y = FUN_80052498(&hudExtra2,DAT_80067694 * 2 + -0xe,0xec);
    local_20.y = local_20.y + 0xec;
    local_20.z = 0;
    VectorSubtract(&local_20,&local_20,&local_30);
    VectorScale(&local_20,0x40,iVar1);
    iVar1 = iVar1 << 1;
    if (0x7f < iVar1) {
      iVar1 = 0x7f;
    }
    *param_1 = local_30.x +
               local_20.x + ((int)((uint)(ushort)sineLookupTable[iVar1] << 0x10) >> 0x16);
    local_30.y = local_30.y + local_20.y;
  }
  param_1[1] = local_30.y;
  return;
}



void FUN_OVR24CanyonSpeedway__80071bf8(void)

{
  byte bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  undefined *puVar5;
  uint *puVar6;
  short sVar7;
  uint uVar8;
  undefined *puVar9;
  short sVar10;
  char *pcVar11;
  char *unaff_s0;
  int iVar12;
  int iVar13;
  SpriteInfo *spriteInfo;
  int iVar14;
  int iVar15;
  undefined2 local_50 [16];
  int local_30;
  
  DAT_80067100 = 0;
  if (pauseSubMenuId != 0) {
    if (pauseSubMenuId == 1) {
      DrawOutlinedBG(0x5a,0x1a6,0x40,0xa4);
      if (0 < (int)menuState) {
        DrawText_Center((&PTR_s_Your_Time_80061b18)[DAT_80067118],0xb0,100,0);
        iVar15 = DAT_800698ac / 0xe10;
        iVar14 = DAT_800698ac / 0x3c + iVar15 * -0x3c;
        iVar13 = ((DAT_800698ac % 0x3c) * 100) / 0x3c;
        if (iVar15 == 0) {
          sprintf((char *)local_50,s__d__02d_OVR24CanyonSpeedway__8006d5f4,iVar14,iVar13);
        }
        else {
          sprintf((char *)local_50,s__d__02d__02d_OVR24CanyonSpeedway__8006d5e4,iVar15,iVar14,iVar13
                 );
        }
        DrawText_Center((char *)local_50,0xb0,0x78,0);
      }
      if (1 < (int)menuState) {
        DrawText_Center((&PTR_s_Best_Time_80061b1c)[DAT_80067118],0x150,100,0);
        iVar15 = (&oceanBestTime)[inSpeedwayFlag * 0x16];
        if (iVar15 == 36000) {
          sprintf((char *)local_50,s_________OVR24CanyonSpeedway__8006d5fc);
        }
        else {
          iVar13 = iVar15 / 0xe10;
          iVar14 = iVar15 / 0x3c + iVar13 * -0x3c;
          iVar15 = ((iVar15 % 0x3c) * 100) / 0x3c;
          if (iVar13 == 0) {
            sprintf((char *)local_50,s__d__02d_OVR24CanyonSpeedway__8006d5f4,iVar14,iVar15);
          }
          else {
            sprintf((char *)local_50,s__d__02d__02d_OVR24CanyonSpeedway__8006d5e4,iVar13,iVar14,
                    iVar15);
          }
        }
        DrawText_Center((char *)local_50,0x150,0x78,0);
      }
      if (2 < (int)menuState) {
        if (DAT_800698ac < (&oceanBestTime)[inSpeedwayFlag * 0x16]) {
          pcVar11 = (&PTR_s_New_Best_Time_80061b20)[DAT_80067118];
        }
        else {
          pcVar11 = (&PTR_s_No_Best_Time_80061b24)[DAT_80067118];
        }
        strcpy((char *)local_50,pcVar11);
        if (DAT_800698ac < (&oceanBestTime)[inSpeedwayFlag * 0x16]) {
          uVar8 = (int)DAT_80067008 >> 4 & 1;
        }
        else {
          uVar8 = 0;
        }
        DrawText_Center((char *)local_50,0x100,0x4c,uVar8);
      }
      uVar8 = 0;
      if ((int)menuState < 5) {
        return;
      }
      if (pauseMenuCurrentItem == 0) {
        uVar8 = (int)DAT_80067008 >> 3 & 1;
      }
      DrawText_Center((&PTR_s_Retry_80061b10)[DAT_80067118],0xb0,0x90,uVar8);
      uVar8 = 0;
      if (pauseMenuCurrentItem == 1) {
        uVar8 = (int)DAT_80067008 >> 3 & 1;
      }
      pcVar11 = (&PTR_s_Quit_80061b14)[DAT_80067118];
      iVar15 = 0x150;
    }
    else {
      if (pauseSubMenuId != 2) {
        DAT_80067100 = 0;
        return;
      }
      DrawOutlinedBG(0x5a,0x1a6,0x40,0xa4);
      DrawShadowedOrangeLine(0x96,0x68,0x16a,0x68);
      DrawShadowedOrangeLine(0x96,0x86,0x16a,0x86);
      puVar5 = primitiveBuffer_next;
      if (0 < (int)menuState) {
        bVar1 = DAT_800698b4[4];
        bVar2 = *DAT_800698b4;
        bVar3 = DAT_800698b4[5];
        bVar4 = DAT_800698b4[1];
        *(undefined4 *)primitiveBuffer_next = 0x9000000;
        puVar5[7] = 0x2c;
        puVar5[4] = 0x80;
        puVar5[5] = 0x80;
        puVar5[6] = 0x80;
        *(undefined2 *)(puVar5 + 8) = 0x14a;
        *(undefined2 *)(puVar5 + 10) = 0x4a;
        *(undefined2 *)(puVar5 + 0x12) = 0x4a;
        *(undefined2 *)(puVar5 + 0x18) = 0x14a;
        sVar10 = ((ushort)bVar1 - (ushort)bVar2) + 0x14a;
        sVar7 = ((ushort)bVar3 - (ushort)bVar4) + 0x4a;
        *(short *)(puVar5 + 0x10) = sVar10;
        *(short *)(puVar5 + 0x1a) = sVar7;
        *(short *)(puVar5 + 0x20) = sVar10;
        *(short *)(puVar5 + 0x22) = sVar7;
        puVar5[0xc] = *DAT_800698b4;
        puVar5[0xd] = DAT_800698b4[1];
        puVar5[0x14] = DAT_800698b4[4];
        puVar5[0x15] = DAT_800698b4[1];
        puVar5[0x1c] = *DAT_800698b4;
        puVar5[0x1d] = DAT_800698b4[5];
        puVar5[0x24] = DAT_800698b4[4];
        puVar5[0x25] = DAT_800698b4[5];
        *(undefined2 *)(puVar5 + 0xe) = *(undefined2 *)(DAT_800698b4 + 2);
        *(undefined2 *)(puVar5 + 0x16) = *(undefined2 *)(DAT_800698b4 + 6);
        PrimitiveBuffer_Insert((uint *)puVar5);
        primitiveBuffer_next = puVar5 + 0x28;
        RenderText((&PTR_s_Secret_Challenge_80061b28)[DAT_80067118],0x96,0x54,0,(TextConfig *)0x0);
      }
      if (1 < (int)menuState) {
        DrawText_Center((&PTR_s_Orb_Awarded_80061b2c)[DAT_80067118],0x100,0x72,0);
      }
      uVar8 = 0;
      if ((int)menuState < 4) {
        return;
      }
      if (pauseMenuCurrentItem == 0) {
        uVar8 = (int)DAT_80067008 >> 3 & 1;
      }
      DrawText_Center((&PTR_s_Retry_80061b10)[DAT_80067118],0xb0,0x90,uVar8);
      uVar8 = 0;
      if (pauseMenuCurrentItem == 1) {
        uVar8 = (int)DAT_80067008 >> 3 & 1;
      }
      pcVar11 = (&PTR_s_Quit_80061b14)[DAT_80067118];
      iVar15 = 0x15a;
    }
    sVar7 = 0x90;
    goto LAB_OVR24CanyonSpeedway__80072ff8;
  }
  DrawOutlinedBG(0x5a,0x1a6,0x16,0xde);
  iVar15 = 0;
  local_30 = 0;
  SetTPage(0x38);
  spriteInfo = (SpriteInfo *)0x0;
  if (DAT_80069898 + DAT_8006989c + DAT_800698a0 + DAT_800698a4 == 0x20) {
    local_30 = 1;
    uVar8 = 0x23;
  }
  else {
    uVar8 = 0x21;
    if (DAT_800698ac < 1) {
      uVar8 = 0x22;
    }
  }
  if (DAT_80067118 == 0) {
    RenderSprite((SpriteInfo *)(&DAT_800635f8 + uVar8 * 4),200,0x1e,8);
  }
  else {
    if (uVar8 == 0x22) {
      unaff_s0 = (&PTR_DAT_80061b00)[DAT_80067118];
    }
    else if (uVar8 < 0x23) {
      if (uVar8 == 0x21) {
        unaff_s0 = (&PTR_DAT_80061afc)[DAT_80067118];
      }
    }
    else if (uVar8 == 0x23) {
      unaff_s0 = (&PTR_DAT_80061af8)[DAT_80067118];
    }
    DrawText_Center(unaff_s0,0x100,0x25,0);
  }
  iVar13 = 0;
  RenderSprite(spriteGemAnimation + (clock >> 2) % 6,0x17c,0x1e,1);
  DrawShadowedOrangeLine(0x6e,0x34,0x192,0x34);
  sVar10 = 0x3e;
  do {
    sVar7 = sVar10;
    iVar14 = -1;
    if (iVar13 < (int)menuState) {
      RenderText((&PTR_s_Rings_80061930)[inSpeedwayFlag * 0x16 + DAT_80067118 * 4 + iVar13],0x9a,
                 sVar7,0,(TextConfig *)0x0);
      sprintf((char *)local_50,&DAT_OVR24CanyonSpeedway__8006d5d8,(&DAT_80069898)[iVar13]);
      RenderText((char *)local_50,0x13a,sVar7,0,(TextConfig *)0x0);
      RenderText(&DAT_OVR24CanyonSpeedway__8006d5dc,0x148,sVar7,0,(TextConfig *)0x0);
      if ((&DAT_80069898)[iVar13] == 8) {
        iVar12 = 0;
        if ((&DAT_80061950)[inSpeedwayFlag * 0x16 + iVar13] == 0) {
          iVar12 = (&DAT_8006196c)[inSpeedwayFlag * 0x16];
          goto LAB_OVR24CanyonSpeedway__80071f54;
        }
        local_50[0] = DAT_OVR24CanyonSpeedway__8006d5e0;
      }
      else {
        iVar12 = 0;
LAB_OVR24CanyonSpeedway__80071f54:
        sprintf((char *)local_50,&DAT_OVR24CanyonSpeedway__8006d5d8,iVar12);
      }
      iVar15 = iVar15 + iVar12;
      DrawText_Right((char *)local_50,0x196,sVar7,0);
      SetTPage(0x38);
      iVar12 = (int)DAT_80067008 >> 1;
      if (currentLoadedLevel == METRO_SPEEDWAY) {
        if (iVar13 == 1) {
          puVar9 = (undefined *)0x80063650;
          puVar5 = (undefined *)((DAT_80067008 & 6) << 1);
        }
        else if (iVar13 < 2) {
          if (iVar13 != 0) goto LAB_OVR24CanyonSpeedway__80072540;
          puVar9 = &DAT_800635f8;
          puVar5 = (undefined *)((uint)(byte)(&DAT_800634a8)[iVar12 % 0xe] << 2);
        }
        else if (iVar13 == 2) {
          puVar9 = &DAT_80063618;
          puVar5 = (undefined *)((uint)(byte)(&DAT_800634a8)[iVar12 % 0xe] << 2);
        }
        else {
          if (iVar13 != 3) goto LAB_OVR24CanyonSpeedway__80072540;
          puVar9 = (undefined *)0x80063638;
          puVar5 = (undefined *)((uint)(byte)(&DAT_80063490)[iVar12 % 10] << 2);
        }
LAB_OVR24CanyonSpeedway__80072538:
        spriteInfo = (SpriteInfo *)(puVar5 + (int)puVar9);
      }
      else {
        if (0x23 < (int)currentLoadedLevel) {
          if (currentLoadedLevel == ICY_SPEEDWAY) {
            if (iVar13 == 1) {
              puVar9 = (undefined *)0x80063638;
              puVar5 = (undefined *)((uint)(byte)(&DAT_80063490)[iVar12 % 10] << 2);
            }
            else if (iVar13 < 2) {
              if (iVar13 != 0) goto LAB_OVR24CanyonSpeedway__80072540;
              puVar9 = &DAT_800635f8;
              puVar5 = (undefined *)((uint)(byte)(&DAT_800634a8)[iVar12 % 0xe] << 2);
            }
            else if (iVar13 == 2) {
              puVar9 = &DAT_80063618;
              puVar5 = (undefined *)((uint)(byte)(&DAT_800634a8)[iVar12 % 0xe] << 2);
            }
            else {
              if (iVar13 != 3) goto LAB_OVR24CanyonSpeedway__80072540;
              bVar1 = (&DAT_80063490)[iVar12 % 10];
LAB_OVR24CanyonSpeedway__8007252c:
              puVar9 = (undefined *)0x80063650;
              puVar5 = (undefined *)((uint)bVar1 << 2);
            }
          }
          else {
            if (currentLoadedLevel != CANYON_SPEEDWAY) goto LAB_OVR24CanyonSpeedway__80072540;
            if (iVar13 != 1) {
              if (iVar13 < 2) {
                if (iVar13 == 0) {
                  puVar9 = &DAT_800635f8;
                  puVar5 = (undefined *)((uint)(byte)(&DAT_800634a8)[iVar12 % 0xe] << 2);
                  goto LAB_OVR24CanyonSpeedway__80072538;
                }
              }
              else {
                if (iVar13 == 2) {
                  puVar9 = (undefined *)0x80063638;
                  puVar5 = (undefined *)((uint)(byte)(&DAT_80063490)[iVar12 % 10] << 2);
                  goto LAB_OVR24CanyonSpeedway__80072538;
                }
                if (iVar13 == 3) {
                  bVar1 = (&DAT_80066df4)[iVar12 % 6];
                  goto LAB_OVR24CanyonSpeedway__8007252c;
                }
              }
              goto LAB_OVR24CanyonSpeedway__80072540;
            }
            iVar14 = 1;
            puVar5 = &DAT_80063618;
            puVar9 = (undefined *)((DAT_80067008 & 0xe) << 1);
          }
          goto LAB_OVR24CanyonSpeedway__80072538;
        }
        if (currentLoadedLevel == OCEAN_SPEEDWAY) {
          if (iVar13 != 1) {
            if (iVar13 < 2) {
              if (iVar13 != 0) goto LAB_OVR24CanyonSpeedway__80072540;
              iVar14 = 1;
              puVar5 = &DAT_800635f8;
              puVar9 = (undefined *)((DAT_80067008 & 0xe) << 1);
            }
            else if (iVar13 == 2) {
              puVar9 = (undefined *)0x80063638;
              puVar5 = (undefined *)((uint)(byte)(&DAT_800634a8)[iVar12 % 0xe] << 2);
            }
            else {
              if (iVar13 != 3) goto LAB_OVR24CanyonSpeedway__80072540;
              puVar9 = (undefined *)0x80063658;
              puVar5 = (undefined *)((uint)(byte)(&DAT_800634a8)[iVar12 % 0xe] << 2);
            }
            goto LAB_OVR24CanyonSpeedway__80072538;
          }
          spriteInfo = (SpriteInfo *)(&DAT_80063618 + (iVar12 % 7) * 4);
        }
      }
LAB_OVR24CanyonSpeedway__80072540:
      puVar6 = RenderSprite(spriteInfo,0x72,sVar7 + -6,1);
      if ((((currentLoadedLevel == METRO_SPEEDWAY) && (iVar13 == 1)) ||
          ((currentLoadedLevel == ICY_SPEEDWAY && (iVar13 == 3)))) ||
         ((currentLoadedLevel == CANYON_SPEEDWAY && (iVar13 == 3)))) {
        *(undefined2 *)((int)puVar6 + 0xe) = 0x5a20;
      }
      if (iVar14 < 0) {
        *(byte *)((int)puVar6 + 7) = *(byte *)((int)puVar6 + 7) & 0xfd;
      }
    }
    iVar13 = iVar13 + 1;
    sVar10 = sVar7 + 0x16;
  } while (iVar13 < 4);
  if (4 < (int)menuState) {
    RenderText((&PTR_s_All_In_One_80061b04)[DAT_80067118],0x9a,sVar10,0,(TextConfig *)0x0);
    if (local_30 == 0) {
      pcVar11 = (&PTR_s_No_80061b84)[DAT_80067118];
    }
    else {
      pcVar11 = (&PTR_s_Yes_80061b80)[DAT_80067118];
    }
    strcpy((char *)local_50,pcVar11);
    DrawText_Center((char *)local_50,0x14d,sVar10,0);
    iVar13 = 0;
    if (local_30 == 0) {
LAB_OVR24CanyonSpeedway__80072700:
      sprintf((char *)local_50,&DAT_OVR24CanyonSpeedway__8006d5d8,iVar13);
    }
    else {
      if ((&DAT_80061960)[inSpeedwayFlag * 0x16] == 0) {
        iVar13 = (&DAT_8006196c)[inSpeedwayFlag * 0x16];
        goto LAB_OVR24CanyonSpeedway__80072700;
      }
      local_50[0] = DAT_OVR24CanyonSpeedway__8006d5e0;
    }
    iVar15 = iVar15 + iVar13;
    DrawText_Right((char *)local_50,0x196,sVar10,0);
  }
  DrawShadowedOrangeLine(0x9a,sVar7 + 0x24,0x196,sVar7 + 0x24);
  RenderText((&PTR_s_Total_80061b08)[DAT_80067118],0x9a,sVar7 + 0x2c,0,(TextConfig *)0x0);
  sprintf((char *)local_50,&DAT_OVR24CanyonSpeedway__8006d5d8,iVar15);
  DrawText_Right((char *)local_50,0x196,sVar7 + 0x2c,0);
  DrawShadowedOrangeLine(0x6e,sVar7 + 0x40,0x192,sVar7 + 0x40);
  sVar7 = sVar7 + 0x4a;
  if ((int)menuState < 7) {
    return;
  }
  iVar15 = 0x100;
  if (DAT_80069898 + DAT_8006989c + DAT_800698a0 + DAT_800698a4 == 0x20) {
    pcVar11 = (&PTR_s_Press_<_To_Continue_80061b0c)[DAT_80067118];
    uVar8 = (int)DAT_80067008 >> 4 & 1;
  }
  else {
    uVar8 = 0;
    if (pauseMenuCurrentItem == 0) {
      uVar8 = (int)DAT_80067008 >> 3 & 1;
    }
    DrawText_Center((&PTR_s_Retry_80061b10)[DAT_80067118],0xb0,sVar7,uVar8);
    uVar8 = 0;
    if (pauseMenuCurrentItem == 1) {
      uVar8 = (int)DAT_80067008 >> 3 & 1;
    }
    pcVar11 = (&PTR_s_Quit_80061b14)[DAT_80067118];
    iVar15 = 0x150;
  }
LAB_OVR24CanyonSpeedway__80072ff8:
  DrawText_Center(pcVar11,iVar15,sVar7,uVar8);
                    // WARNING: Read-only address (ram,0x80067118) is written
                    // WARNING: Read-only address (ram,0x8006989c) is written
  return;
}



void FUN_OVR24CanyonSpeedway__80073034(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  while ((&INT_80061920)[inSpeedwayFlag * 0x16 + iVar2] != (int)*(short *)(param_1 + 0x36)) {
    iVar2 = iVar2 + 1;
    if (3 < iVar2) {
      return;
    }
  }
  (&DAT_80069898)[iVar2] = (&DAT_80069898)[iVar2] + 1;
  if ((&DAT_80061960)[inSpeedwayFlag * 0x16] != 0) {
    DAT_800698a8 = iVar2;
    return;
  }
  DAT_800698ac = DAT_800698ac + (&DAT_80061940)[inSpeedwayFlag * 0x16 + iVar2];
  DAT_800698a8 = iVar2;
  PlayAudio(*(undefined *)(audioBank + 0x1b),0,1);
  if (param_2 == 0) {
    return;
  }
  iVar1 = (&DAT_80061940)[inSpeedwayFlag * 0x16 + iVar2];
  iVar2 = (*DAT_800670b4)(0x1d,param_1);
  if (iVar2 == 0) {
    return;
  }
  *(char *)(iVar2 + 0x3c) = (char)(iVar1 / 0x3c) + -1;
  *(undefined *)(iVar2 + 0x48) = 1;
  return;
}


/*
Unable to decompile 'FUN_OVR24CanyonSpeedway__800731d8'
Cause: Exception while decompiling OVR24CanyonSpeedway::800731d8: process: timeout

*/


Vec3 ** FUN_OVR24CanyonSpeedway__80079e80(int param_1,Object *param_2)

{
  Object *pOVar1;
  char cVar2;
  undefined uVar3;
  short sVar4;
  Vec3 **ppVVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  undefined4 uVar9;
  undefined4 *puVar10;
  uint uVar11;
  Object *pOVar12;
  Spyro *pSVar13;
  int *piVar14;
  Vec3 *pVVar15;
  undefined *puVar16;
  Vec3 *pVVar17;
  Vec3 local_80;
  Mat33 MStack_70;
  undefined local_50;
  char local_4f;
  undefined local_4e;
  Mat33 MStack_48;
  undefined local_28;
  byte local_27;
  byte local_26;
  
  ppVVar5 = (Vec3 **)FUN_80041290();
  if (ppVVar5 == (Vec3 **)0x0) {
    return (Vec3 **)0x0;
  }
  pVVar15 = *ppVVar5;
  MEMSET((int *)ppVVar5,0,0x58);
  *ppVVar5 = pVVar15;
  MEMSET(&pVVar15->x,0,0x18);
  *(short *)((int)ppVVar5 + 0x36) = (short)param_1;
  if ((param_2 == (Object *)0x0) ||
     (uVar11 = ((int)param_2 - (int)Objects) * -0x45d1745d >> 3, 0xff < uVar11)) {
    *(undefined *)((int)ppVVar5 + 0x3a) = 0xff;
  }
  else {
    *(char *)((int)ppVVar5 + 0x3a) = (char)uVar11;
  }
  FUN_800375c8(ppVVar5);
  if (param_1 == 0x127) {
    pVVar15 = *ppVVar5;
    VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
    uVar3 = randomRangeGen(0,0xff);
    *(undefined *)((int)ppVVar5 + 0x46) = uVar3;
    FUN_80041438(ppVVar5);
    uVar11 = randomRangeGen(0x78,0xb4);
    pVVar15->x = uVar11;
    *(char *)((int)ppVVar5 + 0x45) =
         (char)((int)((uint)(ushort)sineLookupTable[(uVar11 & 0x3f) * 4] << 0x10) >> 0x17) + '@';
    return ppVVar5;
  }
  if (param_1 < 0x128) {
    if (param_1 == 0x81) {
      VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
      FUN_80041438(ppVVar5);
      uVar11 = (uint)(ushort)VectorShort_80067ec8.Z;
      *(undefined *)((int)ppVVar5 + 0x4f) = 0x40;
      ppVVar5[0x15] = (Vec3 *)0x3f005080;
      *(char *)((int)ppVVar5 + 0x46) = (char)((int)(uVar11 << 0x10) >> 0x14) + -0x80;
      return ppVVar5;
    }
    if (param_1 < 0x82) {
      if (param_1 == 0x1d) {
        pVVar15 = *ppVVar5;
        VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
        FUN_80041438(ppVVar5);
        *(undefined *)(ppVVar5 + 0x13) = 0x18;
        *(undefined *)((int)ppVVar5 + 0x4a) = 0x40;
        *(undefined *)(ppVVar5 + 0x15) = 2;
        pVVar15[1].x = 0;
        return ppVVar5;
      }
      if (param_1 == 0x78) {
        pVVar15 = *ppVVar5;
        FUN_80041438(ppVVar5);
        *(undefined *)((int)ppVVar5 + 0x49) = 0;
        *(undefined2 *)&pVVar15->x = 0;
        *(undefined2 *)&pVVar15->z = 0;
        *(undefined2 *)((int)&pVVar15->y + 2) = 0;
        *(undefined2 *)&pVVar15->y = 0;
        *(undefined *)((int)&pVVar15[1].x + 1) = 0x78;
        pVVar15[1].y = 0;
        pVVar15[1].z = 0;
        if (param_2 == (Object *)0x0) {
          uVar11 = Spyro.angleAsByte.yaw - 0x80 & 0xff;
          local_80.x = cosineLookupTable[uVar11] * 0x7d >> 9;
          local_80.z = 1000;
          local_80.y = sineLookupTable[uVar11] * 0x7d >> 9;
          VectorAdd((Vec3 *)(ppVVar5 + 3),&Spyro.position,&local_80);
        }
        else {
          VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
        }
        *(undefined *)((int)&pVVar15->x + 2) = 0xff;
        return ppVVar5;
      }
    }
    else {
      if (param_1 == 0xd3) {
        pVVar15 = *ppVVar5;
        if (*(short *)((int)ppVVar5 + 0x36) == 0x10) {
          iVar7 = 10;
          if (lives < 4) {
            iVar7 = 7;
          }
          else if (lives < 7) {
            iVar7 = 9;
          }
          fodderCountTillNextLifeButterfly = fodderCountTillNextLifeButterfly + 1;
          if (iVar7 <= fodderCountTillNextLifeButterfly) {
            fodderCountTillNextLifeButterfly = 0;
            *(undefined2 *)((int)ppVVar5 + 0x36) = 0xd3;
          }
        }
        FUN_80041438(ppVVar5);
        VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
        ppVVar5[5] = (Vec3 *)&ppVVar5[5][0x2a].z;
        VectorCopy(pVVar15,(Vec3 *)(ppVVar5 + 3));
        ppVVar5[7] = (Vec3 *)0xffffffff;
        *(undefined *)((int)ppVVar5 + 0x47) = 2;
        *(undefined2 *)((int)&pVVar15[1].x + 2) = 0x708;
        *(undefined *)((int)&pVVar15[1].y + 1) = 0;
        iVar7 = rand();
        *(byte *)((int)&pVVar15[1].y + 2) = (byte)iVar7 & 0xfc;
        return ppVVar5;
      }
      if (param_1 < 0xd4) {
        if (param_1 == 0x92) {
LAB_OVR24CanyonSpeedway__8007a2f4:
          pVVar15 = *ppVVar5;
          *(undefined *)(ppVVar5 + 0x13) = 0x20;
          VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
          FUN_80041438(ppVVar5);
          uVar11 = rand();
          uVar6 = rand();
          uVar6 = uVar6 & 0x7ff;
          iVar7 = cosineLookup(uVar6);
          iVar8 = cosineLookup(uVar11 & 0xfff);
          *(short *)&pVVar15->x = (short)(char)(iVar7 * iVar8 * (uint)param_2->gemValueId >> 0x18);
          iVar7 = cosineLookup(uVar6);
          iVar8 = sineLookup(uVar11 & 0xfff);
          *(short *)((int)&pVVar15->x + 2) =
               (short)(char)(iVar7 * iVar8 * (uint)param_2->gemValueId >> 0x18);
          iVar7 = sineLookup(uVar6);
          *(short *)&pVVar15->y = (short)((int)(iVar7 * (uint)param_2->gemValueId) >> 0xc);
          if (((param_2->collisionFlagsReceived & 0x20000U) != 0) &&
             ((Spyro.maybeSubstate == Charge || (Spyro.maybeSubstate == UnderwaterCharge)))) {
            *(short *)&pVVar15->x = *(short *)&pVVar15->x + (short)(Spyro.trueVelocity.x >> 6);
            *(short *)((int)&pVVar15->x + 2) =
                 *(short *)((int)&pVVar15->x + 2) + (short)(Spyro.trueVelocity.y >> 6);
          }
          if (((byte)param_2->field_0x51 != 0) &&
             ((param_2->collisionFlagsReceived & 0x100000U) != 0)) {
            *(short *)&pVVar15->x =
                 *(short *)&pVVar15->x +
                 (short)(cosineLookupTable[(byte)param_2->field_0x51] * 0x4b >> 0xb);
            *(short *)((int)&pVVar15->x + 2) =
                 *(short *)((int)&pVVar15->x + 2) +
                 (short)(sineLookupTable[(byte)param_2->field_0x51] * 0x4b >> 0xb);
            sVar4 = randomRangeGen(0x28,0x46);
            *(short *)&pVVar15->y = *(short *)&pVVar15->y + sVar4;
          }
          ppVVar5[3] = (Vec3 *)(&ppVVar5[3]->x + *(short *)&pVVar15->x);
          ppVVar5[4] = (Vec3 *)(&ppVVar5[4]->x + *(short *)((int)&pVVar15->x + 2));
          ppVVar5[5] = (Vec3 *)(&ppVVar5[5]->x + *(short *)&pVVar15->y);
          iVar7 = rand();
          *(char *)((int)ppVVar5 + 0x45) = (char)iVar7;
          iVar7 = rand();
          *(char *)((int)ppVVar5 + 0x46) = (char)iVar7;
          iVar7 = rand();
          *(ushort *)((int)&pVVar15->y + 2) = ((ushort)iVar7 & 0x1f) - 0x10;
          iVar7 = rand();
          *(ushort *)&pVVar15->z = ((ushort)iVar7 & 0x1f) - 0x10;
          iVar7 = rand();
          *(ushort *)((int)&pVVar15->z + 2) = ((ushort)iVar7 & 0x1f) - 0x10;
          pVVar15[1].y = (param_2->position).z + -0x40;
          iVar7 = randomRangeGen(0x32,0x50);
          pVVar15[1].x = iVar7;
          return ppVVar5;
        }
      }
      else if (param_1 == 0x104) {
        FUN_80041438(ppVVar5);
        *(undefined *)(ppVVar5 + 0x15) = 2;
        if (param_2 != (Object *)0x0) {
          (*ppVVar5)->x = (int)param_2;
          VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
          *(undefined *)((int)ppVVar5 + 0x4a) = 10;
          *(undefined *)(ppVVar5 + 0x13) = 8;
          ppVVar5[5] = (Vec3 *)&ppVVar5[5][0x55].y;
          return ppVVar5;
        }
        ppVVar5[7] = (Vec3 *)0xffffffff;
        return ppVVar5;
      }
    }
  }
  else {
    if (param_1 == 0x1e3) {
      pVVar15 = *ppVVar5;
      FUN_80041438(ppVVar5);
      *(undefined *)(ppVVar5 + 0x13) = 0x40;
      *(undefined *)((int)ppVVar5 + 0x4e) = 0x40;
      if (param_2 != (Object *)0x0) {
        VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
        *(undefined *)((int)&pVVar15->y + 3) = 0x30;
        *(undefined *)((int)ppVVar5 + 0x4f) = 0x7f;
        *(char *)(ppVVar5 + 0x15) = (char)((int)((uint)*(byte *)((int)&pVVar15->y + 3) * 3) >> 1);
        uVar3 = *(undefined *)((int)&pVVar15->y + 3);
        *(undefined *)((int)ppVVar5 + 0x56) = 0;
        *(undefined *)((int)ppVVar5 + 0x57) = 0x3f;
        *(undefined *)((int)ppVVar5 + 0x55) = uVar3;
        return ppVVar5;
      }
      local_80.x = 0x1b8;
      local_80.y = 0;
      local_80.z = 0;
      if (cameraState == Look) {
        pVVar17 = (Vec3 *)(ppVVar5 + 3);
        VectorCopy(pVVar17,&cameraPosition);
        local_50 = 0;
        local_4f = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
        local_4e = (undefined)((ushort)VectorShort_80067ec8.Z >> 4);
        BuildRotationMatrix(&local_50,&MStack_70,(Mat33 *)0x0);
        MatrixMultVector(&MStack_70,&local_80,&local_80);
        VectorAdd(pVVar17,pVVar17,&local_80);
        VectorAdd(pVVar17,pVVar17,&local_80);
        pSVar13 = (Spyro *)&local_80;
      }
      else {
        VectorCopy((Vec3 *)(ppVVar5 + 3),&cameraPosition);
        local_28 = 0;
        local_27 = Spyro.angleAsByte.roll;
        if ((Spyro.airTime == 0) && (0xf8 < (byte)(Spyro.angleAsByte.roll - 4))) {
          local_27 = 0;
        }
        local_26 = Spyro.angleAsByte.yaw;
        BuildRotationMatrix(&local_28,&MStack_48,(Mat33 *)0x0);
        MatrixMultVector(&MStack_48,&local_80,&local_80);
        ppVVar5[3] = (Vec3 *)0x1f4;
        ppVVar5[4] = (Vec3 *)0x0;
        ppVVar5[5] = (Vec3 *)0x0;
        MatrixMultVector(&MStack_48,(Vec3 *)(ppVVar5 + 3),(Vec3 *)(ppVVar5 + 3));
        pSVar13 = &Spyro;
      }
      VectorAdd((Vec3 *)(ppVVar5 + 3),(Vec3 *)(ppVVar5 + 3),&pSVar13->position);
      iVar7 = VectorLength(&local_80,0);
      uVar3 = Atan2(iVar7,local_80.z,0);
      *(undefined *)((int)ppVVar5 + 0x45) = uVar3;
      uVar3 = Atan2(local_80.x,local_80.y,0);
      *(undefined *)((int)ppVVar5 + 0x46) = uVar3;
      pOVar1 = DAT_800670bc;
      pOVar12 = Objects;
      *(short *)&pVVar15->x = (short)local_80.x;
      *(short *)((int)&pVVar15->x + 2) = (short)local_80.y;
      *(short *)&pVVar15->y = (short)local_80.z;
      for (; (pOVar12 < pOVar1 && (pOVar12->type != 0x407)); pOVar12 = pOVar12 + 1) {
      }
      if (pOVar12 != (Object *)0x0) {
        piVar14 = (int *)pOVar12->data;
        iVar7 = *piVar14;
        *piVar14 = iVar7 + 0x144;
        if (0x797 < iVar7 + 0x144) {
          *piVar14 = 0;
        }
        puVar10 = (undefined4 *)((int)piVar14 + *piVar14 + 0xc);
        pVVar15->z = (int)puVar10;
        *puVar10 = 0;
        MemCopy(&pVVar15[1].y,piVar14 + 1,8);
      }
      *(undefined *)((int)&pVVar15->y + 3) = 0x6e;
      *(undefined *)((int)ppVVar5 + 0x4b) = 1;
      FUN_80050648(ppVVar5,0,0);
      return ppVVar5;
    }
    if (param_1 < 0x1e4) {
      if (param_1 == 0x146) {
        pVVar15 = *ppVVar5;
        VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
        FUN_80041438(ppVVar5);
        *(undefined2 *)&pVVar15->x = 0x10;
        *(undefined *)((int)ppVVar5 + 0x57) = 0x3b;
        *(undefined *)(ppVVar5 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar5 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar5 + 0x56) = 0;
        sVar4 = param_2->type;
        if ((sVar4 == 0x198) || (sVar4 == 0x2c2)) {
          *(undefined *)((int)&pVVar15->x + 2) = 1;
          *(undefined *)((int)&pVVar15->x + 3) = 1;
          uVar3 = 0x7f;
        }
        else {
          if (sVar4 == 0x270) {
            *(undefined *)((int)&pVVar15->x + 2) = 2;
            *(undefined *)(ppVVar5 + 0x15) = 0xe0;
            *(undefined *)((int)ppVVar5 + 0x55) = 0xe0;
            *(undefined *)((int)ppVVar5 + 0x56) = 0xe0;
            *(undefined *)((int)ppVVar5 + 0x57) = 0x3b;
          }
          else {
            *(undefined *)((int)&pVVar15->x + 2) = 0;
          }
          uVar3 = 0x60;
          *(undefined *)((int)&pVVar15->x + 3) = 0;
        }
        *(undefined *)((int)ppVVar5 + 0x4f) = uVar3;
        *(undefined *)((int)ppVVar5 + 0x47) = 0xfe;
        uVar9 = Vec2OctagonalDistanceApproximation((Vec2 *)(ppVVar5 + 3),(Vec2 *)&cameraPosition);
        cVar2 = Atan2(uVar9,cameraPosition.z - (int)ppVVar5[5],0);
        *(char *)((int)ppVVar5 + 0x45) = cVar2 + -0x40;
        uVar3 = Atan2(cameraPosition.x - (int)ppVVar5[3],cameraPosition.y - (int)ppVVar5[4],0);
        *(undefined *)((int)ppVVar5 + 0x46) = uVar3;
        return ppVVar5;
      }
      if (param_1 == 0x1e2) {
        pVVar15 = *ppVVar5;
        VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
        FUN_80041438(ppVVar5);
        pVVar15->x = 0x10;
        *(undefined *)((int)ppVVar5 + 0x57) = 0x3f;
        *(undefined *)(ppVVar5 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar5 + 0x55) = 0x40;
        *(undefined *)((int)ppVVar5 + 0x56) = 0;
        iVar7 = rand();
        *(char *)((int)ppVVar5 + 0x45) = (char)iVar7;
        iVar7 = rand();
        *(char *)((int)ppVVar5 + 0x46) = (char)iVar7;
        *(undefined *)((int)ppVVar5 + 0x4f) = 0x46;
        *(undefined *)((int)ppVVar5 + 0x47) = 4;
        return ppVVar5;
      }
    }
    else {
      if (param_1 == 0x2ca) {
        pVVar15 = (Vec3 *)(ppVVar5 + 3);
        pVVar17 = *ppVVar5;
        puVar16 = param_2->data;
        FUN_80041730(param_2,(uint)param_2->gemValueId,pVVar15);
        if (*(int *)(puVar16 + 0x38) == 0) {
          *(undefined *)(ppVVar5 + 0x11) = 0;
          uVar9 = Vec2OctagonalDistanceApproximation((Vec2 *)pVVar15,(Vec2 *)(puVar16 + 0x2c));
          uVar3 = Atan2(uVar9,*(int *)(puVar16 + 0x34) - (int)ppVVar5[5],0);
          *(undefined *)((int)ppVVar5 + 0x45) = uVar3;
          cVar2 = Atan2(*(int *)(puVar16 + 0x2c) - (int)ppVVar5[3],
                        *(int *)(puVar16 + 0x30) - (int)ppVVar5[4],0);
          *(byte *)((int)ppVVar5 + 0x46) = cVar2 + '\x02' + param_2->gemValueId * -4;
          pVVar17->z = 0;
        }
        else {
          *(undefined *)(ppVVar5 + 0x11) = 0;
          uVar9 = Vec2OctagonalDistanceApproximation
                            ((Vec2 *)pVVar15,(Vec2 *)(*(int *)(puVar16 + 0x38) + 0xc));
          uVar3 = Atan2(uVar9,*(int *)(*(int *)(puVar16 + 0x38) + 0x14) - (int)ppVVar5[5],0);
          *(undefined *)((int)ppVVar5 + 0x45) = uVar3;
          uVar3 = Atan2(*(int *)(*(int *)(puVar16 + 0x38) + 0xc) - (int)ppVVar5[3],
                        *(int *)(*(int *)(puVar16 + 0x38) + 0x10) - (int)ppVVar5[4],0);
          *(undefined *)((int)ppVVar5 + 0x46) = uVar3;
          pVVar17->z = *(int *)(puVar16 + 0x38);
        }
        FUN_80041438(ppVVar5);
        *(undefined2 *)&pVVar17->x = 10;
        *(undefined2 *)((int)&pVVar17->x + 2) = 0xa0;
        iVar7 = FUN_800502fc(ppVVar5 + 3,0xfffffff4,6,0xe04040);
        pVVar17->y = iVar7;
        return ppVVar5;
      }
      if (param_1 < 0x2cb) {
        if (param_1 == 0x21d) {
          pVVar15 = *ppVVar5;
          VectorCopy((Vec3 *)(ppVVar5 + 3),&param_2->position);
          FUN_80041438(ppVVar5);
          pVVar15->x = 0x18;
          *(undefined *)((int)ppVVar5 + 0x57) = 0x30;
          *(undefined *)(ppVVar5 + 0x15) = 0;
          *(undefined *)((int)ppVVar5 + 0x55) = 0;
          *(undefined *)((int)ppVVar5 + 0x56) = 0;
          *(undefined *)((int)ppVVar5 + 0x4f) = 100;
          *(undefined *)((int)ppVVar5 + 0x47) = 0;
          iVar7 = rand();
          *(char *)((int)ppVVar5 + 0x45) = (char)iVar7;
          iVar7 = rand();
          *(char *)((int)ppVVar5 + 0x46) = (char)iVar7;
          return ppVVar5;
        }
      }
      else if (param_1 == 0x2f2) goto LAB_OVR24CanyonSpeedway__8007a2f4;
    }
  }
  pSVar13 = (Spyro *)&param_2->position;
  if (param_2 == (Object *)0x0) {
    pSVar13 = &Spyro;
  }
  VectorCopy((Vec3 *)(ppVVar5 + 3),&pSVar13->position);
  FUN_80041438(ppVVar5);
  return ppVVar5;
}



undefined * FUN_OVR24CanyonSpeedway__8007ab58(int param_1)

{
  byte bVar1;
  bool bVar2;
  char cVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  short sVar9;
  char cVar10;
  short sVar11;
  char *pcVar12;
  undefined *puVar13;
  VectorShort *pVVar14;
  undefined *puVar15;
  Vec3 local_58;
  undefined4 local_48;
  undefined4 local_44;
  int local_40;
  int local_3c;
  int local_38;
  
  cVar10 = DAT_80066f18[1];
  puVar13 = DAT_80066f18;
  if (cVar10 != -1) {
    cVar4 = (char)param_1;
    cVar3 = cVar4 * '\x02';
    pcVar12 = DAT_80066f18 + 1;
    puVar15 = DAT_80066f18 + 0x18;
    pVVar14 = (VectorShort *)(DAT_80066f18 + 4);
    do {
      if (cVar10 == -2) goto LAB_OVR24CanyonSpeedway__8007b998;
      switch(*puVar13) {
      case 0:
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar3;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_OVR24CanyonSpeedway__8007b2a0;
      case 1:
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_OVR24CanyonSpeedway__8007b2a0;
      case 9:
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[9] = pcVar12[9] + cVar3;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_OVR24CanyonSpeedway__8007b2a0;
      case 10:
        if (((Spyro.state != Drowning) || (-1 < Spyro.health)) &&
           ((Spyro.field168_0x260 == 0 && (Spyro.iframeTimer != 0)))) {
          VectorCopy(&local_58,&Spyro.position);
          iVar7 = cosineLookup((int)*(short *)(pcVar12 + 0x17));
          local_58.x = local_58.x + (iVar7 >> 4);
          iVar7 = sineLookup((int)*(short *)(pcVar12 + 0x17));
          local_58.y = local_58.y + (iVar7 >> 4);
          local_58.z = local_58.z + 0x100;
          VecIntToShort(pVVar14,&local_58);
          sVar9 = *(short *)(pcVar12 + 0x17);
          *(short *)(pcVar12 + 0x17) = sVar9 + 0x40;
          iVar7 = cosineLookup((int)(short)(sVar9 + 0x40) - (int)VectorShort_80067ec8.Z & 0xfff);
          if (iVar7 < 0) {
            iVar7 = -iVar7;
          }
          pcVar12[9] = (char)(iVar7 / 0xaa);
          break;
        }
        goto LAB_OVR24CanyonSpeedway__8007b940;
      case 0xb:
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x15) = *(short *)(pcVar12 + 0x15) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        VectorShortAdd(pVVar14,pVVar14,puVar13 + 0x12);
        pcVar12[9] = pcVar12[9] + cVar3;
        pcVar12[0xb] = pcVar12[0xb] + -4;
        cVar10 = pcVar12[0xd];
        pcVar12[10] = pcVar12[10] + cVar4 * '\x04';
        pcVar12[0xd] = cVar10 + -4;
        pcVar12[0xc] = pcVar12[0xc] + -4;
        if ((char)(cVar10 + -4) == '\0') goto LAB_OVR24CanyonSpeedway__8007b940;
        goto LAB_OVR24CanyonSpeedway__8007b2a8;
      case 0xc:
        pcVar12[10] = pcVar12[10] + '\b';
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -8;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -8;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -8;
        }
        uVar8 = *(uint *)(pcVar12 + 0xb);
        goto joined_r0x8007b1c4;
      case 0xd:
        if ((0x1b < (byte)pcVar12[1]) || (pcVar12[2] == '\0'))
        goto LAB_OVR24CanyonSpeedway__8007b940;
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        uVar8 = (uint)(byte)pcVar12[1];
        pcVar12[9] = pcVar12[9] + cVar3;
        if (uVar8 < 0xd) {
          if (uVar8 < 5) {
            pcVar12[0xb] = -0x80;
            pcVar12[0xc] = -0x80;
            iVar7 = (uint)(byte)pcVar12[1] * -0x20 + 0x80;
            if (iVar7 < 0) {
              iVar7 = 0;
            }
            pcVar12[0xd] = (char)iVar7;
          }
          else {
            pcVar12[0xb] = -0x80;
            pcVar12[0xd] = '\0';
            pcVar12[0xc] = (pcVar12[1] + -4) * -8 + -0x80;
          }
        }
        else {
          iVar7 = (uVar8 - 0xc) * -8 + 0x80;
          if (iVar7 < 0) {
            iVar7 = 0;
          }
          pcVar12[0xb] = (char)iVar7;
          iVar7 = ((byte)pcVar12[1] - 0xc) * -4 + 0x40;
          if (iVar7 < 0) {
            iVar7 = 0;
          }
          pcVar12[0xc] = (char)iVar7;
          pcVar12[0xd] = '\0';
        }
        pcVar12[1] = pcVar12[1] + cVar4;
        break;
      case 0x21:
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar12[0xb] + param_1 * -2;
        pcVar12[9] = pcVar12[9] + cVar3;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        bVar1 = pcVar12[1];
        cVar10 = (char)iVar7;
        pcVar12[0xb] = cVar10;
        pcVar12[0xc] = cVar10;
        pcVar12[0xd] = cVar10;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        if (((0x1f < ((uint)bVar1 + param_1 & 0xff)) || (pcVar12[2] == '\0')) || (iVar7 == 0))
        goto LAB_OVR24CanyonSpeedway__8007b940;
        break;
      case 0x3b:
        pcVar12[10] = pcVar12[10] + '\b';
        VectorShortAdd(pVVar14,pVVar14,puVar15);
        if ((DAT_80067008 & 1) != 0) {
          *(short *)(pcVar12 + 0x19) = *(short *)(pcVar12 + 0x19) + 1;
        }
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -4;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -4;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -4;
        }
        uVar8 = *(uint *)(pcVar12 + 0xb);
joined_r0x8007b1c4:
        if ((uVar8 & 0xffffff) != 0) goto LAB_OVR24CanyonSpeedway__8007b2a8;
        goto LAB_OVR24CanyonSpeedway__8007b940;
      case 0x42:
        iVar7 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar12[1] & 1U) != 0) {
              *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
              *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
              *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
              if ((pcVar12[1] & 2U) != 0) {
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0x13) = *(short *)(pcVar12 + 0x13) + -1 + ((ushort)iVar6 & 2);
              }
            }
            iVar7 = iVar7 + 1;
            pcVar12[1] = pcVar12[1] + '\x01';
          } while (iVar7 < param_1);
        }
        bVar2 = (byte)pcVar12[1] < 0x18;
LAB_OVR24CanyonSpeedway__8007b2a0:
        if (bVar2) {
LAB_OVR24CanyonSpeedway__8007b2a8:
          if (pcVar12[2] != '\0') break;
        }
LAB_OVR24CanyonSpeedway__8007b940:
        FUN_80041d20(puVar13);
        break;
      case 0x46:
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        if ((0x1f < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR24CanyonSpeedway__8007b940;
        local_48._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_48._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar9);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_48._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar9;
        iVar7 = rand();
        local_48._0_2_ = (short)local_48 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_48._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_48 = CONCAT22(sVar9,(short)local_48);
        if ((pcVar12[1] & 1U) != 0) {
          local_44 = CONCAT22(local_44._2_2_,(short)local_44 + -1);
        }
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_48;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar9;
        cVar10 = pcVar12[0xf];
        pcVar12[0xf] = cVar10 - 3U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_44;
        if ((byte)(cVar10 - 3U) < 0x80) {
          pcVar12[0xf] = -0x80;
        }
        cVar10 = pcVar12[0x10];
        pcVar12[0x10] = cVar10 - 4U;
        if ((byte)(cVar10 - 4U) < 0x60) {
          pcVar12[0x10] = '`';
        }
        cVar10 = pcVar12[0x13];
        pcVar12[0x11] = '\0';
        pcVar12[0x13] = cVar10 - 3U;
        if ((byte)(cVar10 - 3U) < 0xc0) {
          pcVar12[0x13] = -0x40;
        }
        cVar10 = pcVar12[0x14];
        pcVar12[0x14] = cVar10 - 4U;
        if ((byte)(cVar10 - 4U) < 0x80) {
          pcVar12[0x14] = -0x80;
        }
        cVar10 = pcVar12[0x15];
        pcVar12[0x15] = cVar10 - 6U;
        if ((byte)(cVar10 - 6U) < 0x20) {
          pcVar12[0x15] = ' ';
        }
        break;
      case 0x47:
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        if ((0x1f < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR24CanyonSpeedway__8007b940;
        local_40 = (int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3);
        local_3c = (int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5);
        local_38 = (int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7);
        uVar8 = rand();
        local_40 = local_40 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_3c = local_3c + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_38 = local_38 + -1 + (uVar8 & 2);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_40;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + (short)local_3c;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_38;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 9) - (short)local_40;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 0xb) - (short)local_3c;
        pcVar12[0x13] = pcVar12[0x13] + -2;
        pcVar12[0x15] = pcVar12[0x15] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -2;
        pcVar12[0x10] = pcVar12[0x10] + -3;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0xd) - (short)local_38;
        pcVar12[0x11] = pcVar12[0x11] + -3;
        break;
      case 0x48:
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        if ((0x37 < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR24CanyonSpeedway__8007b940;
        local_48 = (int)*(short *)(pcVar12 + 3) - (int)*(short *)(pcVar12 + 9) >> 1;
        local_44 = (int)*(short *)(pcVar12 + 5) - (int)*(short *)(pcVar12 + 0xb) >> 1;
        local_40 = (int)*(short *)(pcVar12 + 7) - (int)*(short *)(pcVar12 + 0xd) >> 1;
        uVar8 = rand();
        local_48 = local_48 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_44 = local_44 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_40 = local_40 + -1 + (uVar8 & 2);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + (short)local_44;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)local_40;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 3) + (short)local_48 * -2;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 5) + (short)local_44 * -2;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 7) + (short)local_40 * -2;
        break;
      case 0x4e:
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        if ((0x27 < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR24CanyonSpeedway__8007b940;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        iVar7 = rand();
        *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar7 & 2);
        uVar8 = rand();
        iVar7 = (*(ushort *)(pcVar12 + 0x13) - 1) + (uVar8 & 2);
        *(short *)(pcVar12 + 0x13) = (short)iVar7;
        if (2 < iVar7 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar12 + 0x13) = 2;
        }
        if (*(short *)(pcVar12 + 0x13) < -4) {
          *(undefined2 *)(pcVar12 + 0x13) = 0xfffc;
        }
        pcVar12[0xb] = pcVar12[0xb] + -2;
        pcVar12[0xd] = pcVar12[0xd] + -1;
        pcVar12[0xc] = pcVar12[0xc] + -2;
        break;
      case 0x4f:
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        local_48 = CONCAT22(sVar9,sVar11);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar5);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar9;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar5;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar9;
        cVar10 = pcVar12[1];
        pcVar12[1] = cVar10 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar10 + 1U)) || (pcVar12[2] == '\0'))
        goto LAB_OVR24CanyonSpeedway__8007b940;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        pcVar12[0x13] = pcVar12[0x13] + -3;
        pcVar12[0x10] = pcVar12[0x10] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -4;
        if (5 < (byte)pcVar12[0x15]) {
          pcVar12[0x15] = pcVar12[0x15] - 6;
        }
      }
LAB_OVR24CanyonSpeedway__8007b998:
      pcVar12 = pcVar12 + 0x20;
      puVar15 = puVar15 + 0x20;
      pVVar14 = (VectorShort *)&pVVar14[5].Y;
      cVar10 = *pcVar12;
      puVar13 = puVar13 + 0x20;
    } while (cVar10 != -1);
  }
  return puVar13;
}



undefined *
FUN_OVR24CanyonSpeedway__8007b9f0(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined *puVar5;
  undefined uVar6;
  int iVar7;
  Vec3 local_d0;
  Vec3 local_c0;
  Vec3 local_b0;
  Vec3 local_a0;
  Vec3 local_90;
  undefined local_80;
  undefined local_7f;
  undefined local_7e;
  Mat33 MStack_78;
  Vec3 local_58;
  int local_48;
  Vec3 *local_40;
  int local_30;
  
  iVar7 = 0;
  puVar5 = (undefined *)0x0;
  if (0 < param_1) {
    local_40 = &local_c0;
    local_30 = 0;
    local_48 = param_1;
    do {
      uVar6 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar2 = rand();
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xb] = (char)iVar2;
        puVar5[0xe] = 0x80;
        goto LAB_OVR24CanyonSpeedway__8007c104;
      case 1:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0xc] = 0x60;
        puVar5[0xd] = 0x60;
        puVar5[0xe] = 0x60;
        goto LAB_OVR24CanyonSpeedway__8007c104;
      case 9:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        VectorCopy(&local_d0,&Spyro.position);
        uVar3 = rand();
        local_d0.x = local_d0.x + -0x3f + (uVar3 & 0x7e);
        uVar3 = rand();
        local_d0.y = local_d0.y + -0x3f + (uVar3 & 0x7e);
        VecIntToShort((VectorShort *)(puVar5 + 4),&local_d0);
        VectorCopy(&local_d0,&Spyro.physicsVelocity);
        VectorShiftRight(&local_d0,6);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),&local_d0);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar2 = rand();
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xb] = (char)iVar2;
        puVar5[0xe] = 0x80;
        goto LAB_OVR24CanyonSpeedway__8007c104;
      case 10:
        puVar5 = (undefined *)FUN_80041c50(3);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0x1f;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),&Spyro.position);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_80064654)[local_30];
        puVar5[0xd] = (&DAT_80064655)[local_30];
        uVar6 = (&DAT_80064656)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar6;
        *(short *)(puVar5 + 0x18) = (short)(((local_48 - iVar7) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[3] = 1;
        puVar5[0x11] = 4;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar7 * 0xc),local_40);
        VectorAdd(local_40,local_40,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar3 = rand();
          local_c0.x = (local_c0.x + 0x100) - (uVar3 & 0x1ff);
          uVar3 = rand();
          local_c0.y = (local_c0.y + 0x100) - (uVar3 & 0x1ff);
          uVar3 = rand();
          local_c0.z = (local_c0.z + 0x100) - (uVar3 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar3 = rand();
          local_c0.x = (local_c0.x + 0x80) - (uVar3 & 0xff);
          uVar3 = rand();
          local_c0.y = (local_c0.y + 0x80) - (uVar3 & 0xff);
          uVar3 = rand();
          local_c0.z = (local_c0.z + 0x80) - (uVar3 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar5 + 4),local_40);
        *(undefined4 *)(puVar5 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar2 = rand();
        puVar5[10] = ((byte)iVar2 & 7) + 0x20;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar5 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar7 * 0xc));
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x18) = (*(short *)(puVar5 + 0x18) >> 2) + -4 + ((ushort)iVar2 & 7);
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x1a) = (*(short *)(puVar5 + 0x1a) >> 2) + -4 + ((ushort)iVar2 & 7);
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x1c) = (*(short *)(puVar5 + 0x1c) >> 2) + -4 + ((ushort)iVar2 & 7);
        break;
      case 0xd:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0xc] = 0xff;
        puVar5[0xd] = 0xff;
        puVar5[0xe] = 0;
        goto LAB_OVR24CanyonSpeedway__8007c104;
      case 0x21:
        puVar5 = (undefined *)FUN_80041c50(2);
        *puVar5 = uVar6;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_a0,&Spyro.physicsVelocity);
          VectorShiftRight(&local_a0,6);
          VectorCopy(&local_b0,&Spyro.position);
          local_b0.z = local_b0.z + -0x164;
          uVar3 = rand();
          local_b0.x = (local_b0.x + 0x80) - (uVar3 & 0xff);
          uVar3 = rand();
          uVar6 = 0x30;
          local_b0.y = (local_b0.y + 0x80) - (uVar3 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_b0.x = 0x164;
          local_b0.y = 0;
          local_b0.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_b0,&local_b0);
          VectorAdd(&local_b0,&local_b0,&Spyro.position);
          uVar6 = 0x40;
          uVar3 = rand();
          local_a0.x = -(uVar3 & 7);
          uVar3 = rand();
          local_a0.y = ((int)((uint)(ushort)cosineLookupTable[iVar7 * 0x20] << 0x10) >> 0x17) -
                       ((uVar3 & 0xf) - 8);
          local_a0.z = (int)((uint)(ushort)sineLookupTable[iVar7 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_a0,&local_a0);
        }
        else {
          if (param_4 == (Vec3 *)0x2) {
            iVar4 = iVar7 << 5;
            iVar2 = 6;
            uVar6 = 0x30;
          }
          else {
            iVar4 = iVar7 * 0x20 + 0x10;
            iVar2 = 5;
            uVar6 = 0x40;
          }
          VectorCopy(&local_b0,&Spyro.position);
          local_b0.x = local_b0.x + ((int)cosineLookupTable[iVar4] >> iVar2);
          local_b0.z = local_b0.z + -0x164;
          local_b0.y = local_b0.y + ((int)sineLookupTable[iVar4] >> iVar2);
          local_a0.x = (int)cosineLookupTable[iVar4] >> iVar2 + 1;
          local_a0.z = 0;
          local_a0.y = (int)sineLookupTable[iVar4] >> iVar2 + 1;
        }
        VecIntToShort((VectorShort *)(puVar5 + 4),&local_b0);
        VecIntToShort((VectorShort *)(puVar5 + 0x18),&local_a0);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0xc] = uVar6;
        puVar5[0xd] = uVar6;
        puVar5[0xe] = uVar6;
LAB_OVR24CanyonSpeedway__8007c104:
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x3b:
        puVar5 = (undefined *)FUN_80041c50(5);
        puVar5[3] = 1;
        *puVar5 = uVar6;
        puVar5[0x11] = 0x10;
        puVar5[1] = puVar5[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        iVar2 = rand();
        *(ushort *)(puVar5 + 4) = (*(short *)(puVar5 + 4) + 0x10) - ((ushort)iVar2 & 0x1f);
        iVar2 = rand();
        *(ushort *)(puVar5 + 6) = (*(short *)(puVar5 + 6) + 8) - ((ushort)iVar2 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar1 = 0x2e0080c0;
        }
        else {
          uVar1 = 0x2e00c000;
        }
        *(undefined4 *)(puVar5 + 0xc) = uVar1;
        iVar2 = rand();
        puVar5[10] = ((byte)iVar2 & 0xf) + 0x14;
        iVar2 = rand();
        puVar5[0xb] = (char)iVar2;
        puVar5[0x10] = 0;
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x18) = ((ushort)iVar2 & 7) - 4;
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x1a) = -2 - ((ushort)iVar2 & 7);
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x1c) = ((ushort)iVar2 & 0xf) - 8;
        break;
      case 0x42:
        puVar5 = (undefined *)FUN_80041c50(0);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0xf;
        puVar5[3] = 1;
        iVar2 = rand();
        *(ushort *)(puVar5 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar2 & 0xf) + -8;
        iVar2 = rand();
        *(ushort *)(puVar5 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar2 & 0xf) + -8;
        iVar2 = rand();
        iVar4 = param_3->z;
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)(iVar4 >> 2) + ((ushort)iVar2 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_OVR24CanyonSpeedway__8007c2f8;
        }
        uVar3 = rand();
        switch(uVar3 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_OVR24CanyonSpeedway__8007c2f8;
        case 2:
          puVar5[0xc] = 0;
LAB_OVR24CanyonSpeedway__8007c2f8:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_OVR24CanyonSpeedway__8007c348;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_OVR24CanyonSpeedway__8007c348;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_OVR24CanyonSpeedway__8007c348;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_OVR24CanyonSpeedway__8007c348:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)FUN_80041c50(1);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0xf;
        puVar5[3] = 1;
        local_80 = 0;
        iVar2 = rand();
        local_7f = (undefined)iVar2;
        iVar2 = rand();
        local_7e = (undefined)iVar2;
        BuildRotationMatrix(&local_80,&MStack_78,(Mat33 *)0x0);
        local_90.y = 0;
        local_90.z = 0;
        local_90.x = (int)param_4;
        MatrixMultVector(&MStack_78,&local_90,&local_90);
        *(short *)(puVar5 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar5 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar5 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_90.x * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_90.y * 2;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_90.z * 2;
        break;
      case 0x47:
        puVar5 = (undefined *)FUN_80041c50(1);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 7;
        puVar5[3] = 1;
        uVar3 = rand();
        local_58.x = (int)(((uVar3 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar3 = rand();
        local_58.y = (int)(((uVar3 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar3 = rand();
        local_58.z = (int)(((uVar3 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)(param_3->x >> 2) + (short)local_58.x * 4;
        *(short *)(puVar5 + 6) = (short)(param_3->y >> 2) + (short)local_58.y * 4;
        *(short *)(puVar5 + 8) = (short)(param_3->z >> 2) + (short)local_58.z * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_58.x;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_58.y;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_58.z;
        break;
      case 0x4e:
        puVar5 = (undefined *)FUN_80041c50(0);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0x1f;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 4),param_3);
        iVar2 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar2 & 0x3f);
        iVar2 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar2 & 0x3f);
        iVar2 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar2 & 0x3f);
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar2 & 2) - 1;
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar2 & 2) - 1;
        iVar2 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar2 & 1);
        iVar2 = rand();
        puVar5[0xc] = (byte)iVar2 | 0x80;
        uVar3 = rand();
        uVar3 = (uVar3 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar3;
        if ((byte)puVar5[0xc] < uVar3) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar2 = rand();
        puVar5[0xe] = ((byte)iVar2 & 0x3f) + 0x40;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)FUN_80041c50(1);
        *puVar5 = uVar6;
        iVar2 = rand();
        puVar5[2] = (byte)iVar2 & 0xf;
        puVar5[3] = 1;
        VecIntToShort((VectorShort *)(puVar5 + 10),param_3);
        VectorAdd(&local_58,param_3,param_4);
        uVar3 = rand();
        local_58.x = local_58.x + -0x20 + (uVar3 & 0x3f);
        uVar3 = rand();
        local_58.y = local_58.y + -0x20 + (uVar3 & 0x3f);
        uVar3 = rand();
        local_58.z = local_58.z + -0x40 + (uVar3 & 0x7f);
        VecIntToShort((VectorShort *)(puVar5 + 4),&local_58);
        puVar5[0x17] = 2;
        iVar2 = rand();
        puVar5[0x10] = (byte)iVar2 | 0xc0;
        iVar2 = rand();
        puVar5[0x11] = ((byte)iVar2 & 0x3f) + 0xa0;
        puVar5[0x12] = 0;
        iVar2 = rand();
        puVar5[0x14] = (byte)iVar2 | 0xe0;
        iVar2 = rand();
        puVar5[0x15] = (byte)iVar2 | 0xe0;
        puVar5[0x16] = 0x80;
        puVar5[0x13] = 0x50;
      }
      local_30 = local_30 + 4;
      iVar7 = iVar7 + 1;
    } while (iVar7 < local_48);
  }
  return puVar5;
}



void FUN_OVR27DragonShores__8006db14(int param_1)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  Vec3 *right;
  int *piVar6;
  Vec3 VStack_90;
  int local_80;
  uint local_7c;
  int local_78;
  int local_74;
  undefined4 local_70;
  int local_68;
  uint local_64;
  undefined4 local_60;
  Vec3 local_58;
  Vec3 local_48;
  Vec3 VStack_38;
  Vec3 local_28;
  
  DAT_80066f38 = inputStates + param_1 + 1;
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
  case New_Name_(1):
  case Spit:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    if (cameraState != Look) {
      FUN_8002b36c(0x1200);
      FUN_8002bc68();
      FUN_8002bb24(0x5a,0x10);
    }
    break;
  case HurtPitchSpin:
    VectorClear(&VStack_90);
    VectorSubtract(&VStack_90,&VStack_90,&Spyro.trueVelocity);
    if (Spyro.airTime == 0) {
      iVar2 = VectorLength(&VStack_90,1);
      if (0x100 < iVar2) {
        VectorScale(&VStack_90,iVar2,0x100);
      }
      VectorAdd(&Spyro.trueVelocity,&Spyro.trueVelocity,&VStack_90);
      right = &Spyro.field56_0xf0;
    }
    else {
      VStack_90.z = 0;
      iVar2 = VectorLength(&VStack_90,0);
      if (0x40 < iVar2) {
        VectorScale(&VStack_90,iVar2,0x40);
      }
      VStack_90.z = -0xc0;
      right = &VStack_90;
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,right);
    VectorCopy(&Spyro.trueVelocity,&Spyro.trueVelocity);
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    break;
  case UnderwaterSwim:
    FUN_8002b694(&local_80,0x8006a144,0);
    if (Spyro.airVelocityFlag == FALLING) {
      local_7c = (0x200 - Spyro.rotation.Pitch) + Spyro.field82_0x14c * -0x10 & 0xfff;
      if (0x800 < local_7c) {
        local_7c = local_7c - 0x1000;
      }
      Spyro.field82_0x14c = Spyro.field82_0x14c + 1;
      local_7c = (int)(local_7c << 7) >> 8;
      if (0x14 < Spyro.field82_0x14c) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    iVar2 = local_80 * 0x14 >> 7;
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar2 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + ((int)(local_7c * -0xf) >> 7) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    if (((DAT_80066f38->current & Cross) == None) && (Spyro.airVelocityFlag != FALLING)) {
      Spyro.maybeHorizontalSpeed = 0;
    }
    else {
      Spyro.maybeHorizontalSpeed = 0xe00;
    }
    if (Spyro.airVelocityFlag == PEAK) {
      FUN_8002bd70(0xc0,0xc0);
      if (Spyro.maybeHorizontalSpeedDecay < 0xe01) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    else {
      FUN_8002bd70(0xc0,0x30);
    }
    iVar1 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar2 * iVar1 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    uVar3 = rand();
    if (((uVar3 & 0x1f) == 0) && (DAT_800670fc != (code *)0x0)) {
      piVar6 = &local_78;
      local_78 = 0x220;
      local_74 = 0;
      local_70 = 0x40;
LAB_OVR27DragonShores__8006e190:
      (*DAT_800670fc)(1,0x2c,piVar6,0);
    }
    goto LAB_OVR27DragonShores__8006e198;
  case UnderwaterIdle:
    if (cameraState != Look) {
      FUN_8002b694(&local_78,0x8006a144,0);
      iVar2 = local_78 * 0x14 >> 7;
      Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar2 & 0xfff;
      Spyro.rotation.Pitch = Spyro.rotation.Pitch + (local_74 * -0xf >> 7) & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
      }
      if (Spyro.rotation.Pitch < -800) {
        Spyro.rotation.Pitch = -800;
      }
      if (800 < Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = 800;
      }
      iVar1 = cosineLookup(Spyro.rotation.Pitch);
      Spyro.field84_0x154 =
           Spyro.field84_0x154 +
           (((iVar2 * iVar1 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
           ((Spyro.rotation.Roll << 6) >> 6));
      Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Roll) {
        Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
      }
      if (Spyro.rotation.Roll < -0x300) {
        Spyro.rotation.Roll = -0x300;
      }
      if (0x300 < Spyro.rotation.Roll) {
        Spyro.rotation.Roll = 0x300;
      }
    }
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    uVar3 = rand();
    if (((uVar3 & 0x1f) == 0) && (DAT_800670fc != (code *)0x0)) {
      piVar6 = &local_68;
      local_68 = 0x220;
      local_64 = 0;
      local_60 = 0x40;
      goto LAB_OVR27DragonShores__8006e190;
    }
LAB_OVR27DragonShores__8006e198:
    Spyro.field87_0x160 = Spyro.field87_0x160 + 1;
    break;
  case UnderwaterCharge:
    FUN_8002b694(&local_68,0x8006a144,0);
    if (Spyro.airVelocityFlag == FALLING) {
      local_64 = (0x200 - Spyro.rotation.Pitch) + Spyro.field82_0x14c * -0x10 & 0xfff;
      if (0x800 < local_64) {
        local_64 = local_64 - 0x1000;
      }
      Spyro.field82_0x14c = Spyro.field82_0x14c + 1;
      local_64 = (int)(local_64 * 0x60) >> 8;
      if (0xc < Spyro.field82_0x14c) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    iVar2 = local_68 * 0x14 >> 7;
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar2 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + ((int)(local_64 * -0xf) >> 7) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    Spyro.maybeHorizontalSpeed = 0x1c00;
    FUN_8002bd70(0x240,0x30);
    iVar1 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar2 * iVar1 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    if ((DAT_800670fc != (code *)0x0) && (2000 < Spyro.field49_0xbc)) {
      local_58.x = -400;
      uVar3 = rand();
      local_58.y = 0x40 - (uVar3 & 0x7f);
      local_58.z = -300;
      (*DAT_800670fc)(1,0x2c,&local_58,0);
    }
    break;
  case WaterSwim:
  case WaterIdle:
    if (Spyro.airVelocityFlag == FALLING) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      if (cameraState == Look) {
        Spyro.maybeHorizontalSpeedDecay = 0;
      }
      else {
        FUN_8002b36c(0x980);
        iVar2 = FUN_8002bb24(0x5a,0x10);
        if (iVar2 < 0) {
          iVar2 = -iVar2;
        }
        if (0x200 < iVar2) {
          Spyro.maybeHorizontalSpeed = 0;
        }
        uVar4 = 0xc0;
        if (Spyro.maybeHorizontalSpeedDecay < 0xc81) {
          uVar5 = 0x40;
        }
        else {
          uVar4 = 0;
          uVar5 = 0xc0;
        }
        FUN_8002bd70(uVar4,uVar5);
      }
      if (Spyro.maybeHorizontalSpeedDecay == 0) {
        VectorClear(&Spyro.field42_0x88);
        VectorClear(&Spyro.trueVelocity);
      }
      else {
        FUN_8002bdbc();
        FUN_8002c038();
        Spyro.trueVelocity.z = 0;
      }
      if ((DAT_800670fc != (code *)0x0) && (Spyro.field17_0x28 < 0)) {
        if ((Spyro.maybeHorizontalSpeedDecay < 0x401) ||
           ((1 < param_1 || ((DAT_80067008 & 1) == 0)))) {
          if ((Spyro.maybeHorizontalSpeedDecay < 0x201) &&
             (((param_1 == 0 && ((DAT_80067008 & 7) == 0)) && (uVar3 = rand(), (uVar3 & 3) == 0))))
          {
            local_28.x = 0x80;
            local_28.y = 0;
            local_28.z = 0;
            MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_28,&local_28);
            VectorAdd(&local_28,&local_28,&Spyro.position);
            local_28.z = -Spyro.field17_0x28;
            (*DAT_800670fc)(1,0x2b,&local_28,1);
          }
        }
        else {
          VectorCopy(&local_58,&Spyro.position);
          local_48.y = 0x40;
          local_48.z = 0;
          local_48.x = Spyro.maybeHorizontalSpeedDecay >> 5;
          if (param_1 != 0) {
            local_48.y = -0x40;
          }
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&VStack_38);
          VectorAdd(&local_58,&local_58,&VStack_38);
          local_48.x = 0;
          local_58.z = -Spyro.field17_0x28;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&local_48);
          VectorShiftRight(&local_48,3);
          (*DAT_800670fc)(1,0x2a,&local_58,&local_48);
          uVar3 = rand();
          if ((uVar3 & 0x1f) == 0) {
            (*DAT_800670fc)(1,0x29,&local_58,0);
          }
        }
      }
      Spyro.field82_0x14c =
           Spyro.field82_0x14c - (Spyro.field83_0x150 * 2 + Spyro.field82_0x14c * 0x14 >> 8);
      Spyro.field83_0x150 = Spyro.field83_0x150 + Spyro.field82_0x14c;
      if (0x5900 < Spyro.field83_0x150) {
        Spyro.field83_0x150 = 0x5900;
      }
      if (Spyro.field83_0x150 < -0x5900) {
        Spyro.field83_0x150 = -0x5900;
      }
    }
  }
  return;
}



void FUN_OVR27DragonShores__8006e7d4(void)

{
  int iVar1;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar1 = FUN_8002d9c4();
    if (iVar1 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    goto LAB_OVR27DragonShores__8006e848;
  default:
    goto switchD_OVR27DragonShores__8006e808_caseD_14;
  case HurtPitchSpin:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    break;
  case UnderwaterSwim:
  case UnderwaterIdle:
    FUN_8002c0f4();
    FUN_8002cc88();
    iVar1 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field169_0x264);
    if (iVar1 != 0) {
      if ((int)(&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] < 200) {
        (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] =
             (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] + -200;
      }
      (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] =
           (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] | 0x10;
    }
    break;
  case UnderwaterCharge:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_80032b94();
    iVar1 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field169_0x264);
    if (iVar1 == 0) {
      Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 6),0,4);
      if (-1 < Spyro.field169_0x264) {
        FUN_80050c64(Spyro.field169_0x264,0x157c);
        FUN_80050cf4(Spyro.field169_0x264,400);
      }
      Spyro.field170_0x268 = (int)*(byte *)(audioBank + 6);
    }
    iVar1 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field169_0x264);
    if (iVar1 != 0) {
      if ((int)(&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] < 0x13e8) {
        (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] =
             (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] + 200;
      }
      (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] =
           (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] | 0x10;
    }
    break;
  case WaterSwim:
  case WaterIdle:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002bfbc();
    if (Spyro.field63_0x108 == '\0') {
      return;
    }
    iVar1 = FUN_800398b0(Spyro.position.x,Spyro.position.y);
    Spyro.position.z =
         (Spyro.field172_0x270 - (-iVar1 - Spyro.field57_0xfc)) - (Spyro.field83_0x150 >> 6);
    Spyro.field17_0x28 = -iVar1 - Spyro.field57_0xfc;
    return;
  case New_Name_(1):
  case Spit:
    FUN_8002c0f4();
LAB_OVR27DragonShores__8006e848:
    FUN_8002cc88();
  }
  Spyro.field17_0x28 = 0;
switchD_OVR27DragonShores__8006e808_caseD_14:
  return;
}



void FUN_OVR27DragonShores__8006eb14(void)

{
  if ((Spyro.currentAnimationState == 0x2b) && (Spyro.currentAnimationFrame == 1)) {
    PlayAudio(*(undefined *)(audioBank + 10),0,0);
    Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
  }
  return;
}



void FUN_OVR27DragonShores__8006eb78(int param_1)

{
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case IdleLook:
  case HurtPitchSpin:
  case IdleSit:
  case WaterSwim:
  case WaterIdle:
  case New_Name_(1):
  case Spit:
    FUN_8002db8c(0x8006a0c4);
  }
  return;
}



void FUN_OVR27DragonShores__8006ebe8(int param_1)

{
  Substate SVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  Vec3 VStack_40;
  Vec3 VStack_30;
  Vec3 VStack_20;
  
  SVar1 = Spyro.maybeSubstate;
  switch(param_1) {
  case 0x13:
  case 0x26:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
    uVar2 = 1;
    if (param_1 == 0x25) {
      uVar2 = 5;
      uVar3 = 8;
    }
    else {
      uVar3 = 3;
    }
    Spyro.field82_0x14c = randomRangeGen(uVar2,uVar3);
    Spyro.field83_0x150 = 0;
    if (DAT_800670b4 != (code *)0x0) {
      if (param_1 == 0x25) {
        uVar2 = 0x1f1;
      }
      else {
        uVar2 = 0x1db;
        if (param_1 != 0x27) {
          Spyro.field83_0x150 = 0;
          return;
        }
      }
      (*DAT_800670b4)(uVar2,0);
    }
    break;
  case 0x1d:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.trueVelocity.x = Spyro.field154_0x21c.x << 6;
    Spyro.trueVelocity.y = Spyro.field154_0x21c.y << 6;
    Spyro.field82_0x14c = SVar1;
    Spyro.trueVelocity.z = Spyro.field154_0x21c.z << 6;
    if (Spyro.field154_0x21c.z == 0) {
      Spyro.trueVelocity.z = Spyro.physicsVelocity.z;
    }
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    DAT_8006838c = 0xf;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    break;
  case 0x28:
  case 0x29:
    if ((Spyro.maybeSubstate + ~Swim < 2) || (Spyro.maybeSubstate == Hurt)) {
      if (Spyro.state == UnderwaterCharge) {
        Spyro.airVelocityFlag = PEAK;
        goto LAB_OVR27DragonShores__8006ef18;
      }
    }
    else {
      if (DAT_800670fc != (code *)0x0) {
        VectorCopy(&VStack_40,&Spyro.position);
        if ((Spyro.maybeSubstate == Swim) && (Spyro.field17_0x28 < 0)) {
          VStack_40.z = -Spyro.field17_0x28;
          (*DAT_800670fc)(6,0x2e,&VStack_40,0);
          uVar2 = 4;
          uVar3 = 0x29;
LAB_OVR27DragonShores__8006ee44:
          (*DAT_800670fc)(uVar2,uVar3,&VStack_40,0);
        }
        else if (Spyro.maybeSubstate == Charge) {
          VStack_40.z = VStack_40.z + 0x400;
          VStack_40.z = RaycastDown(&VStack_40,0x800);
          if ((VStack_40.z != 0) && (uVar2 = 6, isOnWaterSurface != 0)) {
            uVar3 = 0x2e;
            goto LAB_OVR27DragonShores__8006ee44;
          }
        }
      }
      Spyro.rotation.Pitch = Spyro.rotation.Pitch & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
      }
      if (0 < Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = 0;
      }
      if (param_1 == 0x28) {
        Spyro.airVelocityFlag = FALLING;
      }
      VectorClear((Vec3 *)&Spyro.field84_0x154);
      Spyro.field82_0x14c = 0;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      PlayAudio(*(undefined *)(audioBank + 8),0,0);
LAB_OVR27DragonShores__8006ef18:
      Spyro.field87_0x160 = 0;
    }
    Spyro.maybeSubstate = UnderwaterSwim;
    break;
  case 0x2a:
    if (1 < Spyro.maybeSubstate + ~Swim) {
      if (DAT_800670fc != (code *)0x0) {
        VectorCopy(&VStack_30,&Spyro.position);
        if ((Spyro.maybeSubstate == Swim) && (Spyro.field17_0x28 < 0)) {
          VStack_30.z = -Spyro.field17_0x28;
          (*DAT_800670fc)(6,0x2e,&VStack_30,0);
          uVar2 = 4;
          uVar3 = 0x29;
LAB_OVR27DragonShores__8006f010:
          (*DAT_800670fc)(uVar2,uVar3,&VStack_30,0);
        }
        else if (Spyro.maybeSubstate == Charge) {
          VStack_30.z = VStack_30.z + 0x400;
          VStack_30.z = RaycastDown(&VStack_30,0x800);
          if ((VStack_30.z != 0) && (uVar2 = 6, isOnWaterSurface != 0)) {
            uVar3 = 0x2e;
            goto LAB_OVR27DragonShores__8006f010;
          }
        }
      }
      if (Spyro.state == HeadBash) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch + -0x400;
      }
      Spyro.rotation.Pitch = Spyro.rotation.Pitch & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
      }
      if (0 < Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = 0;
      }
      Spyro.airVelocityFlag = FALLING;
      VectorClear((Vec3 *)&Spyro.field84_0x154);
      Spyro.field82_0x14c = 0;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      PlayAudio(*(undefined *)(audioBank + 8),0,0);
    }
    Spyro.maybeSubstate = UnderwaterCharge;
    Spyro.field77_0x138 = 0x20000;
    break;
  case 0x2b:
  case 0x2c:
    if (Spyro.maybeSubstate != Swim) {
      PlayAudio(*(undefined *)(audioBank + 7),0,0);
      Spyro.field82_0x14c = -Spyro.trueVelocity.z >> 2;
      if (Spyro.maybeSubstate != Death) {
        Spyro.field83_0x150 = 0x5900;
        Spyro.maybeSubstate = Swim;
      }
      Spyro.airVelocityFlag = NORMAL;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      Spyro.field119_0x1bd = '\x01';
      VectorCopy(&VStack_20,&Spyro.position);
      VStack_20.z = VStack_20.z + 0x400;
      VStack_20.z = RaycastDown(&VStack_20,0x800);
      if (((VStack_20.z != 0) && (isOnWaterSurface != 0)) && (DAT_800670fc != (code *)0x0)) {
        (*DAT_800670fc)(10,0x29,&VStack_20,0);
        (*DAT_800670fc)(6,0x2e,&VStack_20,0);
      }
    }
    break;
  case 0x35:
  case 0x36:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
  }
  return;
}



void FUN_OVR27DragonShores__8006f27c(void)

{
  CollisionType CVar1;
  int iVar2;
  SpyroState SVar3;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
    SVar3 = Jump;
    if ((inputStates[0].pressed & Cross) == None) {
      CVar1 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar1 == Ice) {
        SVar3 = Ice;
joined_r0x8006f860:
        if (DAT_8006839d != '\0') {
          return;
        }
      }
      else {
        SVar3 = Flop;
        if (((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) &&
           (SVar3 = Charge, (inputStates[0].current & Square) == None)) {
          iVar2 = Spyro.maybeTurnSpeed;
          if (Spyro.maybeTurnSpeed < 0) {
            iVar2 = -Spyro.maybeTurnSpeed;
          }
          if (iVar2 < 0x11) {
            if (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
                 (TriggerLeft|TriggerRight)) || (SVar3 = Walk, Spyro.maybeHorizontalSpeed == 0)) {
              if ((cameraState == Look) || (Spyro.field162_0x240 != 0)) {
                if (Spyro.state == Idle) {
                  return;
                }
                SetSpyroState(Idle);
                if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
                  Spyro.currentAnimationState = Spyro.nextAnimationState;
                  Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
                }
                Spyro.nextAnimationState = (byte)Spyro.state;
                Spyro.nextAnimationFrame = 0;
                Spyro.field11_0x1c = 0x71;
                Spyro.field136_0x1ec = Spyro.state;
                Spyro.field137_0x1f0 = 0;
                return;
              }
              SVar3 = IdleLedge;
              if (Spyro.ledgeDetected == '\0') {
                FUN_80032c34();
                return;
              }
            }
          }
          else {
            SVar3 = Walk;
          }
        }
      }
    }
    break;
  default:
    goto switchD_OVR27DragonShores__8006f2b0_caseD_14;
  case HurtPitchSpin:
    if (Spyro.field35_0x5c < 0x19) {
      return;
    }
    if (Spyro.health < 0) {
      SVar3 = DeathPirouette;
    }
    else if (Spyro.field82_0x14c == 10) {
      SVar3 = WaterIdle;
    }
    else if (Spyro.field82_0x14c - 0xbU < 2) {
      SVar3 = UnderwaterIdle;
    }
    else {
      SVar3 = Idle;
      if (Spyro.airTime != 0) {
        SVar3 = Flop;
      }
    }
    break;
  case UnderwaterSwim:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
    if (((inputStates[0].current & Square) == None) ||
       (SVar3 = UnderwaterCharge, Spyro.airVelocityFlag == FALLING)) {
      SVar3 = UnderwaterIdle;
      iVar2 = Spyro.maybeHorizontalSpeedDecay;
      goto joined_r0x8006f494;
    }
    break;
  case UnderwaterIdle:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
    if ((inputStates[0].current & Square) == None) {
      if (cameraState == Look) {
        return;
      }
      SVar3 = UnderwaterSwim;
      if ((inputStates[0].current & Cross) == None) {
        return;
      }
    }
    else {
      SVar3 = UnderwaterCharge;
    }
    break;
  case UnderwaterCharge:
    iVar2 = FUN_8002b228();
    if (iVar2 != 0) {
      return;
    }
    if ((inputStates[0].current & Square) != None) {
      return;
    }
    SVar3 = UnderwaterSwim;
    if (Spyro.airVelocityFlag == FALLING) {
      return;
    }
    break;
  case WaterSwim:
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) == None) || (SVar3 = Jump, Spyro.field35_0x5c < 9)) {
      if (Spyro.field63_0x108 == '\0') {
        SVar3 = Flop;
        goto LAB_OVR27DragonShores__8006f6d4;
      }
      if ((((inputStates[0].pressed & Square) != None) && (8 < Spyro.field35_0x5c)) &&
         (globalProgressFlags.swim.isPayed != 0)) {
        iVar2 = FUN_8003ee3c(&Spyro,0x400,1,0);
        SVar3 = UnderwaterSwim;
        if (iVar2 == 0) break;
      }
    }
    else {
LAB_OVR27DragonShores__8006f6d4:
      SetSpyroState(SVar3);
    }
    SVar3 = WaterIdle;
    if (DAT_8006839d == '\0') {
      return;
    }
    break;
  case WaterIdle:
    if (Spyro.airVelocityFlag == FALLING) {
      if (DAT_8006abf8 != '\0') {
        return;
      }
      if (((inputStates[0].pressed & (Triangle|Cross|Start)) == None) && (Spyro.field35_0x5c < 0x3d)
         ) {
        return;
      }
      if (DAT_80066f8c != (code *)0x0) {
        (*DAT_80066f8c)();
        return;
      }
      OnDeath();
      return;
    }
    iVar2 = maybeTakeDamage();
    if (iVar2 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) == None) || (SVar3 = Jump, Spyro.field35_0x5c < 9)) {
      if (Spyro.field63_0x108 != '\0') {
        if ((((inputStates[0].pressed & Square) != None) && (8 < Spyro.field35_0x5c)) &&
           (globalProgressFlags.swim.isPayed != 0)) {
          iVar2 = FUN_8003ee3c(&Spyro,0x400,1,0);
          SVar3 = UnderwaterSwim;
          if (iVar2 == 0) break;
        }
        if (cameraState == Look) {
          return;
        }
        SVar3 = WaterSwim;
        goto joined_r0x8006f860;
      }
      SVar3 = Flop;
    }
    break;
  case New_Name_(1):
  case Spit:
    iVar2 = maybeTakeDamage();
    SVar3 = Idle;
joined_r0x8006f494:
    if (iVar2 != 0) {
      return;
    }
  }
  SetSpyroState(SVar3);
switchD_OVR27DragonShores__8006f2b0_caseD_14:
  return;
}



void FUN_OVR27DragonShores__8006f884(void)

{
  int iVar1;
  
  menuAnimation = menuAnimation + pauseMenuCurrentItem;
  if (DAT_80069910 == 0) {
    if (menuAnimation == 0) {
      menuAnimation = 0;
      menuState = Paused;
      pauseMenuCurrentItem = 1;
      pauseSubMenuId = 0;
      DAT_80069914 = 1;
      return;
    }
    if ((menuAnimation != 0xc) || (pauseMenuCurrentItem != 1)) {
      if (menuAnimation < 0x18) {
        return;
      }
      iVar1 = FUN_80013690();
      if (iVar1 != 0) {
        menuAnimation = 0x18;
        return;
      }
      FUN_80054318();
      DAT_80069904 = 0x1e;
      FUN_8004de1c(0x1e);
      menuAnimation = 0;
      DAT_80069910 = 1;
      return;
    }
LAB_OVR27DragonShores__8006fa24:
    FUN_80054318();
  }
  else {
    if (DAT_80069910 == 1) {
      if (menuAnimation != (menuAnimation / 0xc) * 0xc) {
        return;
      }
      FUN_80054318();
      iVar1 = FUN_80013690();
      if (iVar1 != 0) {
        return;
      }
      if (pauseMenuCurrentItem == 1) {
        FUN_8004dee8();
        menuAnimation = 0;
        DAT_80069910 = 2;
        DAT_80069918 = 2;
        return;
      }
      FUN_8004dd94();
      DAT_80069910 = 0;
      menuAnimation = 0x17;
    }
    else {
      if (menuAnimation == 0) {
        FUN_80054318();
        menuAnimation = 0x17;
        DAT_80069910 = 1;
        return;
      }
      if ((menuAnimation == 0xc) && (pauseMenuCurrentItem == -1))
      goto LAB_OVR27DragonShores__8006fa24;
      if (menuAnimation != 0x18) {
        return;
      }
      menuState = 9;
      pauseMenuCurrentItem = 0;
    }
    pauseSubMenuId = 0;
  }
  return;
}



void FUN_OVR27DragonShores__8006fa78(void)

{
  if (pauseMenuCurrentItem == 0) {
    menuAnimation = menuAnimation + 1;
    if ((inputStates[0].pressed & Triangle) == None) {
      if ((inputStates[0].pressed & (DPadUp|DPadDown)) == None) {
        if ((inputStates[0].pressed & Cross) != None) {
          FUN_80019230((&DAT_OVR27DragonShores__8006dafd)[DAT_80069900 * 2]);
          currentLoadedLevel =
               (LoadedLevelID)(byte)(&DAT_OVR27DragonShores__8006dafc)[DAT_80069900 * 2];
          pauseMenuCurrentItem = (int)(byte)(&DAT_OVR27DragonShores__8006dafd)[DAT_80069900 * 2];
          loadingStatus = 0;
          DAT_800698bd = 1;
        }
      }
      else {
        FUN_800541d0();
        menuAnimation = 0;
        if ((inputStates[0].pressed & DPadUp) == None) {
          DAT_80069900 = DAT_80069900 + 1;
          if (10 < DAT_80069900) {
            DAT_80069900 = 0;
          }
        }
        else {
          DAT_80069900 = DAT_80069900 + -1;
          if (DAT_80069900 < 0) {
            DAT_80069900 = 10;
          }
        }
      }
    }
    else {
      FUN_80054318();
      menuState = 8;
      DAT_80069910 = 2;
      pauseMenuCurrentItem = -1;
      menuAnimation = 0x17;
    }
  }
  else {
    menuAnimation = menuAnimation + pauseMenuCurrentItem;
    if (menuAnimation == 0) {
      pauseMenuCurrentItem = 0;
      DAT_80069900 = 0;
    }
    else if (menuAnimation == 0x18) {
      pauseMenuCurrentItem = 0;
      DAT_80069900 = 0;
      pauseSubMenuId = pauseSubMenuId + 1;
    }
  }
  return;
}



void FUN_OVR27DragonShores__8006fc3c(void)

{
  uint uVar1;
  
  if (DAT_80069910 == 0) {
    if (menuAnimation < 0x12) {
      DrawGameScreenshot();
      TopLeftPauseMenuBackgroundRelated(0);
      PauseMenuTextRelated(0);
    }
    if (6 < menuAnimation) {
      FUN_8004f26c();
      FUN_8004f348();
    }
    if (0xb < menuAnimation) {
      FUN_8004f3b8(1);
      return;
    }
    DAT_80069924 = primitiveBuffer_next;
    RenderMenuGuidebook(0);
    uVar1 = (uint)(byte)(&DAT_80063870)[menuAnimation % 0xc];
LAB_OVR27DragonShores__8006fe10:
    FUN_8004bf94(DAT_80069924,uVar1);
  }
  else {
    if (DAT_80069910 == 1) {
      FUN_8004f200();
      FUN_8004f26c();
      FUN_8004f2dc();
      FUN_8004f348();
    }
    else {
      if (DAT_80069910 != 2) {
        return;
      }
      FUN_8004f200();
      FUN_8004f26c();
      FUN_OVR27DragonShores__8006fec0();
      FUN_8004f2dc();
      if (0xb < menuAnimation) {
        DAT_80069924 = primitiveBuffer_next;
        FUN_OVR27DragonShores__8006fe64();
        uVar1 = (byte)(&DAT_80063870)[menuAnimation % 0xc] + 0xc0;
        goto LAB_OVR27DragonShores__8006fe10;
      }
    }
    FUN_8004f3b8(0);
  }
  return;
}



void FUN_OVR27DragonShores__8006fe64(void)

{
  FUN_8004f2dc();
  FUN_8004e238(0x2a,0x20,0,0);
  FUN_8004e238(0x4c,0xa8,9,0);
  FUN_8004e238(0x5c,0xc6,6,0);
  return;
}



void FUN_OVR27DragonShores__8006fec0(void)

{
  int iVar1;
  uint uVar2;
  int colorIndex;
  uint uVar3;
  short screenPosY;
  
  FUN_8004f348();
  uVar3 = 0;
  screenPosY = 0x28;
  do {
    uVar2 = 0;
    if ((menuAnimation & 0x1f) < 0x16) {
      uVar2 = (uint)(DAT_80069900 == uVar3);
    }
    colorIndex = uVar2 + 8;
    if ((colorIndex == 8) && ((uVar3 & 1) != 0)) {
      colorIndex = 0xc;
    }
    iVar1 = DAT_80067118 * 0xb + uVar3;
    uVar3 = uVar3 + 1;
    RenderText2((&PTR_s_We_Need_a_Vacation__OVR27DragonShores__8006d5fc_OVR27DragonShores__8006dad0)
                [iVar1],0x114,screenPosY,colorIndex,(int *)0x1);
    screenPosY = screenPosY + 0xf;
  } while ((int)uVar3 < 0xb);
  return;
}



void FUN_OVR27DragonShores__8006ffa8(void)

{
  int iVar1;
  Vec3 VStack_40;
  uint local_30;
  uint local_2c;
  uint local_28;
  uint local_20;
  uint local_1c;
  uint local_18;
  
  iVar1 = DAT_80067fbc + 2 >> 2;
  if (4 < iVar1) {
    iVar1 = 4;
  }
  if (cameraState != AlchemistRelated) {
    if (cameraState != 0x1c) {
      return;
    }
    if (INT_80067ed4 == 1) {
      blackOverlayOpacity = (DAT_80067ed8 + -0x10) * -0x10 + 0x100;
      if (blackOverlayOpacity < 1) {
        blackOverlayOpacity = 0;
        INT_80067ed4 = 2;
      }
      if (0xff < blackOverlayOpacity) {
        blackOverlayOpacity = 0xff;
      }
      DAT_80067100 = 0;
      Vec3_80068064.x = (uint)*(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 1) << 2;
      Vec3_80068064.y = (uint)*(ushort *)((int)DAT_80068028 + DAT_8006802c * 0xc + 6) << 2;
      Vec3_80068064.z = (uint)*(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 2) << 2;
      DAT_80068070 = *(undefined2 *)((int)DAT_80068028 + DAT_8006802c * 0xc + 10);
      DAT_80068072 = *(undefined2 *)(DAT_80068028 + DAT_8006802c * 3 + 3);
      DAT_80068074 = *(undefined2 *)((int)DAT_80068028 + DAT_8006802c * 0xc + 0xe);
      Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10000002;
      return;
    }
    if (INT_80067ed4 < 2) {
      if (INT_80067ed4 != 0) {
        return;
      }
      blackOverlayOpacity = DAT_80067ed8 << 4;
      if (0xff < blackOverlayOpacity) {
        blackOverlayOpacity = 0xff;
      }
      if (DAT_80067ed8 < 0x11) {
        return;
      }
      VectorCopy(&VStack_40,&Spyro.field159_0x22c);
      VStack_40.z = VStack_40.z + 0x200;
      VStack_40.z = RaycastDown(&VStack_40,0x800);
      VectorCopy(&Spyro.position,&VStack_40);
      iVar1 = Spyro.field159_0x22c.z;
      if (VStack_40.z != 0) {
        iVar1 = Spyro.position.z + 0x164;
      }
      Spyro.rotation.Yaw = Spyro.field160_0x238 << 4;
      Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10010480;
      Spyro.position.z = iVar1;
      VectorClear(&Spyro.field154_0x21c);
      VectorCopy(&Vec3_80067ee4,&Spyro.position);
      INT_80067ed4 = 1;
      DAT_80067fb8 = 0;
      DAT_80067fbc = 0;
      DAT_80067fc7 = 0;
      DAT_80067fc9 = 1;
      Vec3_80068064.x = (uint)*(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 1) << 2;
      Vec3_80068064.y = (uint)*(ushort *)((int)DAT_80068028 + DAT_8006802c * 0xc + 6) << 2;
      Vec3_80068064.z = (uint)*(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 2) << 2;
      DAT_80068070 = *(undefined2 *)((int)DAT_80068028 + DAT_8006802c * 0xc + 10);
      DAT_80068072 = *(undefined2 *)(DAT_80068028 + DAT_8006802c * 3 + 3);
      DAT_80068074 = *(undefined2 *)((int)DAT_80068028 + DAT_8006802c * 0xc + 0xe);
      Spyro.field150_0x20c = Spyro.field150_0x20c | 0x10000002;
      return;
    }
    if (INT_80067ed4 == 2) {
      iVar1 = DAT_8006802c * 0xc;
    }
    else {
      if (INT_80067ed4 != 4) {
        return;
      }
      DAT_8006802c = DAT_8006802c + 1;
      if (*DAT_80068028 <= DAT_8006802c) {
        DAT_8006802c = 0;
      }
      if (DAT_80068030 != (int *)0x0) {
        DAT_80068034 = DAT_80068034 + 1;
        if (*DAT_80068030 <= DAT_80068034) {
          DAT_80068034 = 0;
        }
        iVar1 = 8 - DAT_80068054;
        Vec3_80068064.x =
             (int)((uint)*(ushort *)(DAT_80068030 + DAT_80068034 * 3 + 1) * 4 * DAT_80068054 +
                  (uint)*(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 1) * 4 * iVar1) >> 3;
        Vec3_80068064.y =
             (int)((uint)*(ushort *)((int)DAT_80068030 + DAT_80068034 * 0xc + 6) * 4 * DAT_80068054
                  + (uint)*(ushort *)((int)DAT_80068028 + DAT_8006802c * 0xc + 6) * 4 * iVar1) >> 3;
        Vec3_80068064.z =
             (int)((uint)*(ushort *)(DAT_80068030 + DAT_80068034 * 3 + 2) * 4 * DAT_80068054 +
                  (uint)*(ushort *)(DAT_80068028 + DAT_8006802c * 3 + 2) * 4 * iVar1) >> 3;
        local_30 = (int)*(short *)((int)DAT_80068028 + DAT_8006802c * 0xc + 10) - (int)DAT_80068070
                   & 0xfff;
        if (0x800 < local_30) {
          local_30 = local_30 - 0x1000;
        }
        local_2c = (int)*(short *)(DAT_80068028 + DAT_8006802c * 3 + 3) - (int)DAT_80068072 & 0xfff;
        if (0x800 < local_2c) {
          local_2c = local_2c - 0x1000;
        }
        local_28 = (int)*(short *)((int)DAT_80068028 + DAT_8006802c * 0xc + 0xe) - (int)DAT_80068074
                   & 0xfff;
        if (0x800 < local_28) {
          local_28 = local_28 - 0x1000;
        }
        local_20 = (int)*(short *)((int)DAT_80068030 + DAT_80068034 * 0xc + 10) - (int)DAT_80068070
                   & 0xfff;
        if (0x800 < local_20) {
          local_20 = local_20 - 0x1000;
        }
        local_1c = (int)*(short *)(DAT_80068030 + DAT_80068034 * 3 + 3) - (int)DAT_80068072 & 0xfff;
        if (0x800 < local_1c) {
          local_1c = local_1c - 0x1000;
        }
        local_18 = (int)*(short *)((int)DAT_80068030 + DAT_80068034 * 0xc + 0xe) - (int)DAT_80068074
                   & 0xfff;
        if (0x800 < local_18) {
          local_18 = local_18 - 0x1000;
        }
        DAT_80068070 = DAT_80068070 +
                       (short)((int)(local_20 * DAT_80068054 + local_30 * (8 - DAT_80068054)) >> 3);
        DAT_80068072 = DAT_80068072 +
                       (short)((int)(local_1c * DAT_80068054 + local_2c * (8 - DAT_80068054)) >> 3);
        DAT_80068074 = DAT_80068074 +
                       (short)((int)(local_18 * DAT_80068054 + local_28 * (8 - DAT_80068054)) >> 3);
        if (DAT_80068054 + 1 < 8) {
          DAT_80068054 = DAT_80068054 + 1;
          return;
        }
        DAT_80068028 = DAT_80068030;
        DAT_8006802c = DAT_80068034;
        DAT_80068030 = (int *)0x0;
        DAT_80068054 = 0;
        return;
      }
      iVar1 = DAT_8006802c * 0xc;
    }
    Vec3_80068064.x = (uint)*(ushort *)((int)DAT_80068028 + iVar1 + 4) << 2;
    Vec3_80068064.y = (uint)*(ushort *)((int)DAT_80068028 + iVar1 + 6) << 2;
    Vec3_80068064.z = (uint)*(ushort *)((int)DAT_80068028 + iVar1 + 8) << 2;
    DAT_80068070 = *(undefined2 *)((int)DAT_80068028 + iVar1 + 10);
    DAT_80068072 = *(undefined2 *)((int)DAT_80068028 + iVar1 + 0xc);
    DAT_80068074 = *(undefined2 *)((int)DAT_80068028 + iVar1 + 0xe);
    return;
  }
  if (DAT_80067fb8 == 0) {
    OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80067ff4,DAT_80067ef0);
    InputRotateCamera(0x400);
    if (cameraRotateInput != 0) {
      if (INT_80067ed4 != 1) goto LAB_OVR27DragonShores__800700a8;
      INT_80067ed4 = 0;
    }
  }
  if ((INT_80067ed4 == 1) && (cameraStateLookup[Spyro.state] != Align)) {
    INT_80067ed4 = 0;
  }
LAB_OVR27DragonShores__800700a8:
  VectorCopy(&Vec3_80067ee4,&Spyro.position);
  DAT_80067ef0 = Spyro.rotation.Yaw;
  OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar1 * 0x14 + -0x7ff9e8d4),0);
  OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar1 * 0x14 + -0x7ff9e848),0);
  OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
  if ((INT_80067ed4 == 1) && (8 < Orbit_80067fa0.Longitude)) {
    Orbit_80067fa0.Longitude = 8;
  }
  OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
  if (((DAT_80067edc & 2) == 0) && (cameraOrbitAcceleration_Scale.Longitude < 0x4c)) {
    cameraOrbitAcceleration_Scale.Longitude = 0x4c;
  }
  return;
}



void FUN_OVR27DragonShores__80070980(void)

{
  if (cameraState == 0x1c) {
    OrbitClear(&cameraOrbitAcceleration);
  }
  else {
    FUN_8001db58();
  }
  UpdateCameraOrbitPhysics();
  return;
}



void FUN_OVR27DragonShores__800709d0(int param_1)

{
  if (param_1 == 0x11) {
    INT_80067ed4 = 0;
    DAT_80067fc4 = 0;
    DAT_80067fc5 = 0;
    DAT_80067fc6 = 1;
    DAT_80067fc9 = 0;
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
    FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
    OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
  }
  else if (param_1 == 0x1c) {
    INT_80067ed4 = 0;
    DAT_80067fb8 = 0;
    DAT_80067fbc = 0;
    DAT_80067fc4 = 1;
    DAT_80067fc5 = 1;
    DAT_80067fc9 = 0;
    DAT_80067ee0 = 0;
  }
  return;
}



void FUN_OVR27DragonShores__80070ae0(void)

{
  CameraState CVar1;
  
  CVar1 = DAT_80067fec;
  if (cameraState == AlchemistRelated) {
    if (DAT_80067fec == Align) {
      CVar1 = cameraStateLookup[Spyro.state];
    }
    else if (((DAT_80067fec == AlchemistRelated) &&
             (((inputStates[0].current & Triangle) == None ||
              (CVar1 = Look, Spyro.field123_0x1c1 == '\0')))) &&
            (((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) == None
             || ((((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
                  ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)) ||
                 (CVar1 = QuickAlign, Spyro.field162_0x240 != 0)))))) {
      if (cameraStateLookup[Spyro.state] != Align) {
        return;
      }
      if ((DAT_80067edc & 1) == 0) {
        return;
      }
      if (DAT_80067fb8 != 0) {
        return;
      }
      CVar1 = Passive;
      if (INT_80067ed4 == 1) {
        return;
      }
    }
  }
  else {
    if (cameraState != 0x1c) {
      return;
    }
    if (DAT_80067fec == Align) {
      CVar1 = cameraStateLookup[Spyro.state];
    }
    else if (DAT_80067fec == 0x1c) {
      return;
    }
  }
  SetCameraState(CVar1);
  return;
}



void FUN_OVR27DragonShores__80070c84(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  if (DAT_80066f30 - 1U < 4) {
    hudExtra1.field1_0x1 = 3;
    UpdateHUDElement(&hudExtra1,riptoHPClone_);
  }
  else {
    InitHudElement(&hudExtra1,0);
  }
  iVar3 = 0;
  iVar2 = 0;
  iVar1 = 0x4c;
  do {
    if (*(short *)((int)&globalProgressFlags.glacierBridge.isPayed + iVar1) != 0) {
      iVar3 = iVar3 + 1;
    }
    iVar2 = iVar2 + 1;
    iVar1 = iVar1 + 4;
  } while (iVar2 < 10);
  UpdateHUDElement(&hudExtra2,iVar3);
  return;
}



void FUN_OVR27DragonShores__80070d30(void)

{
  byte bVar1;
  int iVar2;
  undefined2 uVar3;
  undefined *puVar4;
  undefined4 uVar5;
  
  SetTPage(0x38);
  iVar2 = DAT_80067008 >> 1;
  if (DAT_80066f30 == 2) {
    iVar2 = RenderBLProgressCounter
                      (&hudExtra1,(uint)(byte)(&DAT_80066df4)[iVar2 % 6] * 4 + -0x7ff9c9b8,0x168,
                       0xec,8);
    uVar3 = 0x5a20;
LAB_OVR27DragonShores__80070f5c:
    *(undefined2 *)(iVar2 + 0xe) = uVar3;
  }
  else {
    if (DAT_80066f30 < 3) {
      if (DAT_80066f30 != 1) goto LAB_OVR27DragonShores__80070f60;
      bVar1 = (&DAT_80066df4)[iVar2 % 6];
      puVar4 = (undefined *)0x80063638;
    }
    else {
      if (DAT_80066f30 != 3) {
        if (DAT_80066f30 != 4) goto LAB_OVR27DragonShores__80070f60;
        uVar5 = 0x32;
        if (DAT_8006abf8 == '\0') {
          uVar5 = 0x19;
        }
        iVar2 = RenderBLProgressCounter
                          (&hudExtra1,(uint)(byte)(&DAT_80063490)[iVar2 % 10] * 4 + -0x7ff9c9a8,
                           0x150,0xec,uVar5);
        uVar3 = 0x5c20;
        goto LAB_OVR27DragonShores__80070f5c;
      }
      bVar1 = (&DAT_800634a8)[iVar2 % 0xe];
      puVar4 = &DAT_80063618;
    }
    RenderBLProgressCounter(&hudExtra1,puVar4 + (uint)bVar1 * 4,0x150,0xec,10);
  }
LAB_OVR27DragonShores__80070f60:
  if (hudExtra2.displayState != Hidden) {
    RenderBLProgressCounter
              (&hudExtra2,&DAT_800635f8 + (uint)(byte)(&DAT_800634a8)[(DAT_80067008 >> 1) % 0xe] * 4
               ,0x30,0xec,10);
  }
  return;
}



Vec3 ** FUN_OVR27DragonShores__8007f9d4(int param_1,Object *param_2)

{
  ushort uVar1;
  Object *pOVar2;
  char cVar3;
  undefined uVar4;
  char cVar5;
  short sVar6;
  Vec3 **ppVVar7;
  uint uVar8;
  int iVar9;
  undefined4 uVar10;
  int iVar11;
  undefined4 *puVar12;
  uint uVar13;
  Object *pOVar14;
  Spyro *pSVar15;
  int *piVar16;
  Vec3 *pVVar17;
  ushort *puVar18;
  Vec3 *pVVar19;
  Vec3 local_80;
  undefined local_70;
  undefined uStack_6f;
  undefined2 uStack_6e;
  int local_6c;
  int local_68;
  undefined local_50;
  char local_4f;
  undefined local_4e;
  Mat33 MStack_48;
  undefined local_28;
  byte local_27;
  byte local_26;
  
  ppVVar7 = (Vec3 **)FUN_80041290();
  if (ppVVar7 == (Vec3 **)0x0) {
    return (Vec3 **)0x0;
  }
  pVVar17 = *ppVVar7;
  MEMSET((int *)ppVVar7,0,0x58);
  *ppVVar7 = pVVar17;
  MEMSET(&pVVar17->x,0,0x18);
  *(short *)((int)ppVVar7 + 0x36) = (short)param_1;
  if ((param_2 == (Object *)0x0) ||
     (uVar13 = ((int)param_2 - (int)Objects) * -0x45d1745d >> 3, 0xff < uVar13)) {
    *(undefined *)((int)ppVVar7 + 0x3a) = 0xff;
  }
  else {
    *(char *)((int)ppVVar7 + 0x3a) = (char)uVar13;
  }
  FUN_800375c8(ppVVar7);
  if (param_1 == 0x1e3) {
    pVVar17 = *ppVVar7;
    FUN_80041438(ppVVar7);
    *(undefined *)(ppVVar7 + 0x13) = 0x40;
    *(undefined *)((int)ppVVar7 + 0x4e) = 0x40;
    if (param_2 == (Object *)0x0) {
      local_80.x = 0x1b8;
      local_80.y = 0;
      local_80.z = 0;
      if (cameraState == Look) {
        pVVar19 = (Vec3 *)(ppVVar7 + 3);
        VectorCopy(pVVar19,&cameraPosition);
        local_50 = 0;
        local_4f = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
        local_4e = (undefined)((ushort)VectorShort_80067ec8.Z >> 4);
        BuildRotationMatrix(&local_50,(Mat33 *)&local_70,(Mat33 *)0x0);
        MatrixMultVector((Mat33 *)&local_70,&local_80,&local_80);
        VectorAdd(pVVar19,pVVar19,&local_80);
        VectorAdd(pVVar19,pVVar19,&local_80);
        pSVar15 = (Spyro *)&local_80;
      }
      else {
        VectorCopy((Vec3 *)(ppVVar7 + 3),&cameraPosition);
        local_28 = 0;
        local_27 = Spyro.angleAsByte.roll;
        if ((Spyro.airTime == 0) && (0xf8 < (byte)(Spyro.angleAsByte.roll - 4))) {
          local_27 = 0;
        }
        local_26 = Spyro.angleAsByte.yaw;
        BuildRotationMatrix(&local_28,&MStack_48,(Mat33 *)0x0);
        MatrixMultVector(&MStack_48,&local_80,&local_80);
        ppVVar7[3] = (Vec3 *)0x1f4;
        ppVVar7[4] = (Vec3 *)0x0;
        ppVVar7[5] = (Vec3 *)0x0;
        MatrixMultVector(&MStack_48,(Vec3 *)(ppVVar7 + 3),(Vec3 *)(ppVVar7 + 3));
        pSVar15 = &Spyro;
      }
      VectorAdd((Vec3 *)(ppVVar7 + 3),(Vec3 *)(ppVVar7 + 3),&pSVar15->position);
      iVar11 = VectorLength(&local_80,0);
      uVar4 = Atan2(iVar11,local_80.z,0);
      *(undefined *)((int)ppVVar7 + 0x45) = uVar4;
      uVar4 = Atan2(local_80.x,local_80.y,0);
      *(undefined *)((int)ppVVar7 + 0x46) = uVar4;
      pOVar2 = DAT_800670bc;
      pOVar14 = Objects;
      *(short *)&pVVar17->x = (short)local_80.x;
      *(short *)((int)&pVVar17->x + 2) = (short)local_80.y;
      *(short *)&pVVar17->y = (short)local_80.z;
      for (; (pOVar14 < pOVar2 && (pOVar14->type != 0x407)); pOVar14 = pOVar14 + 1) {
      }
      if (pOVar14 != (Object *)0x0) {
        piVar16 = (int *)pOVar14->data;
        iVar11 = *piVar16;
        *piVar16 = iVar11 + 0x144;
        if (0x797 < iVar11 + 0x144) {
          *piVar16 = 0;
        }
        puVar12 = (undefined4 *)((int)piVar16 + *piVar16 + 0xc);
        pVVar17->z = (int)puVar12;
        *puVar12 = 0;
        MemCopy(&pVVar17[1].y,piVar16 + 1,8);
      }
      *(undefined *)((int)&pVVar17->y + 3) = 0x6e;
      *(undefined *)((int)ppVVar7 + 0x4b) = 1;
      FUN_80050648(ppVVar7,0,0);
      return ppVVar7;
    }
    VectorCopy((Vec3 *)(ppVVar7 + 3),&param_2->position);
    *(undefined *)((int)&pVVar17->y + 3) = 0x30;
    *(undefined *)((int)ppVVar7 + 0x4f) = 0x7f;
    *(char *)(ppVVar7 + 0x15) = (char)((int)((uint)*(byte *)((int)&pVVar17->y + 3) * 3) >> 1);
    uVar4 = *(undefined *)((int)&pVVar17->y + 3);
    *(undefined *)((int)ppVVar7 + 0x56) = 0;
    *(undefined *)((int)ppVVar7 + 0x57) = 0x3f;
    *(undefined *)((int)ppVVar7 + 0x55) = uVar4;
    return ppVVar7;
  }
  if (param_1 < 0x1e4) {
    if (param_1 == 0x92) {
LAB_OVR27DragonShores__8007fd00:
      pVVar17 = *ppVVar7;
      *(undefined *)(ppVVar7 + 0x13) = 0x20;
      VectorCopy((Vec3 *)(ppVVar7 + 3),&param_2->position);
      FUN_80041438(ppVVar7);
      uVar13 = rand();
      uVar8 = rand();
      uVar8 = uVar8 & 0x7ff;
      iVar11 = cosineLookup(uVar8);
      iVar9 = cosineLookup(uVar13 & 0xfff);
      *(short *)&pVVar17->x = (short)(char)(iVar11 * iVar9 * (uint)param_2->gemValueId >> 0x18);
      iVar11 = cosineLookup(uVar8);
      iVar9 = sineLookup(uVar13 & 0xfff);
      *(short *)((int)&pVVar17->x + 2) =
           (short)(char)(iVar11 * iVar9 * (uint)param_2->gemValueId >> 0x18);
      iVar11 = sineLookup(uVar8);
      *(short *)&pVVar17->y = (short)((int)(iVar11 * (uint)param_2->gemValueId) >> 0xc);
      if (((param_2->collisionFlagsReceived & 0x20000U) != 0) &&
         ((Spyro.maybeSubstate == Charge || (Spyro.maybeSubstate == UnderwaterCharge)))) {
        *(short *)&pVVar17->x = *(short *)&pVVar17->x + (short)(Spyro.trueVelocity.x >> 6);
        *(short *)((int)&pVVar17->x + 2) =
             *(short *)((int)&pVVar17->x + 2) + (short)(Spyro.trueVelocity.y >> 6);
      }
      if (((byte)param_2->field_0x51 != 0) && ((param_2->collisionFlagsReceived & 0x100000U) != 0))
      {
        *(short *)&pVVar17->x =
             *(short *)&pVVar17->x +
             (short)(cosineLookupTable[(byte)param_2->field_0x51] * 0x4b >> 0xb);
        *(short *)((int)&pVVar17->x + 2) =
             *(short *)((int)&pVVar17->x + 2) +
             (short)(sineLookupTable[(byte)param_2->field_0x51] * 0x4b >> 0xb);
        sVar6 = randomRangeGen(0x28,0x46);
        *(short *)&pVVar17->y = *(short *)&pVVar17->y + sVar6;
      }
      ppVVar7[3] = (Vec3 *)(&ppVVar7[3]->x + *(short *)&pVVar17->x);
      ppVVar7[4] = (Vec3 *)(&ppVVar7[4]->x + *(short *)((int)&pVVar17->x + 2));
      ppVVar7[5] = (Vec3 *)(&ppVVar7[5]->x + *(short *)&pVVar17->y);
      iVar11 = rand();
      *(char *)((int)ppVVar7 + 0x45) = (char)iVar11;
      iVar11 = rand();
      *(char *)((int)ppVVar7 + 0x46) = (char)iVar11;
      iVar11 = rand();
      *(ushort *)((int)&pVVar17->y + 2) = ((ushort)iVar11 & 0x1f) - 0x10;
      iVar11 = rand();
      *(ushort *)&pVVar17->z = ((ushort)iVar11 & 0x1f) - 0x10;
      iVar11 = rand();
      *(ushort *)((int)&pVVar17->z + 2) = ((ushort)iVar11 & 0x1f) - 0x10;
      pVVar17[1].y = (param_2->position).z + -0x40;
      iVar11 = randomRangeGen(0x32,0x50);
      pVVar17[1].x = iVar11;
      return ppVVar7;
    }
    if (param_1 < 0x93) {
      if (param_1 == 0x78) {
        pVVar17 = *ppVVar7;
        FUN_80041438(ppVVar7);
        *(undefined *)((int)ppVVar7 + 0x49) = 0;
        *(undefined2 *)&pVVar17->x = 0;
        *(undefined2 *)&pVVar17->z = 0;
        *(undefined2 *)((int)&pVVar17->y + 2) = 0;
        *(undefined2 *)&pVVar17->y = 0;
        *(undefined *)((int)&pVVar17[1].x + 1) = 0x78;
        pVVar17[1].y = 0;
        pVVar17[1].z = 0;
        if (param_2 == (Object *)0x0) {
          uVar13 = Spyro.angleAsByte.yaw - 0x80 & 0xff;
          local_80.x = cosineLookupTable[uVar13] * 0x7d >> 9;
          local_80.z = 1000;
          local_80.y = sineLookupTable[uVar13] * 0x7d >> 9;
          VectorAdd((Vec3 *)(ppVVar7 + 3),&Spyro.position,&local_80);
        }
        else {
          VectorCopy((Vec3 *)(ppVVar7 + 3),&param_2->position);
        }
        *(undefined *)((int)&pVVar17->x + 2) = 0xff;
        return ppVVar7;
      }
      if (param_1 == 0x81) {
        VectorCopy((Vec3 *)(ppVVar7 + 3),&param_2->position);
        FUN_80041438(ppVVar7);
        uVar13 = (uint)(ushort)VectorShort_80067ec8.Z;
        *(undefined *)((int)ppVVar7 + 0x4f) = 0x40;
        ppVVar7[0x15] = (Vec3 *)0x3f005080;
        *(char *)((int)ppVVar7 + 0x46) = (char)((int)(uVar13 << 0x10) >> 0x14) + -0x80;
        return ppVVar7;
      }
    }
    else {
      if (param_1 == 0x146) {
        pVVar17 = *ppVVar7;
        VectorCopy((Vec3 *)(ppVVar7 + 3),&param_2->position);
        FUN_80041438(ppVVar7);
        *(undefined2 *)&pVVar17->x = 0x10;
        *(undefined *)((int)ppVVar7 + 0x57) = 0x3b;
        *(undefined *)(ppVVar7 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar7 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar7 + 0x56) = 0;
        sVar6 = param_2->type;
        if ((sVar6 == 0x198) || (sVar6 == 0x2c2)) {
          *(undefined *)((int)&pVVar17->x + 2) = 1;
          *(undefined *)((int)&pVVar17->x + 3) = 1;
          uVar4 = 0x7f;
        }
        else {
          if (sVar6 == 0x270) {
            *(undefined *)((int)&pVVar17->x + 2) = 2;
            *(undefined *)(ppVVar7 + 0x15) = 0xe0;
            *(undefined *)((int)ppVVar7 + 0x55) = 0xe0;
            *(undefined *)((int)ppVVar7 + 0x56) = 0xe0;
            *(undefined *)((int)ppVVar7 + 0x57) = 0x3b;
          }
          else {
            *(undefined *)((int)&pVVar17->x + 2) = 0;
          }
          uVar4 = 0x60;
          *(undefined *)((int)&pVVar17->x + 3) = 0;
        }
        *(undefined *)((int)ppVVar7 + 0x4f) = uVar4;
        *(undefined *)((int)ppVVar7 + 0x47) = 0xfe;
        uVar10 = Vec2OctagonalDistanceApproximation((Vec2 *)(ppVVar7 + 3),(Vec2 *)&cameraPosition);
        cVar3 = Atan2(uVar10,cameraPosition.z - (int)ppVVar7[5],0);
        *(char *)((int)ppVVar7 + 0x45) = cVar3 + -0x40;
        uVar4 = Atan2(cameraPosition.x - (int)ppVVar7[3],cameraPosition.y - (int)ppVVar7[4],0);
        *(undefined *)((int)ppVVar7 + 0x46) = uVar4;
        return ppVVar7;
      }
      if (param_1 < 0x147) {
        if (param_1 == 0x104) {
          FUN_80041438(ppVVar7);
          *(undefined *)(ppVVar7 + 0x15) = 2;
          if (param_2 != (Object *)0x0) {
            (*ppVVar7)->x = (int)param_2;
            VectorCopy((Vec3 *)(ppVVar7 + 3),&param_2->position);
            *(undefined *)((int)ppVVar7 + 0x4a) = 10;
            *(undefined *)(ppVVar7 + 0x13) = 8;
            ppVVar7[5] = (Vec3 *)&ppVVar7[5][0x55].y;
            return ppVVar7;
          }
          ppVVar7[7] = (Vec3 *)0xffffffff;
          return ppVVar7;
        }
      }
      else if (param_1 == 0x1e2) {
        pVVar17 = *ppVVar7;
        VectorCopy((Vec3 *)(ppVVar7 + 3),&param_2->position);
        FUN_80041438(ppVVar7);
        pVVar17->x = 0x10;
        *(undefined *)((int)ppVVar7 + 0x57) = 0x3f;
        *(undefined *)(ppVVar7 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar7 + 0x55) = 0x40;
        *(undefined *)((int)ppVVar7 + 0x56) = 0;
        iVar11 = rand();
        *(char *)((int)ppVVar7 + 0x45) = (char)iVar11;
        iVar11 = rand();
        *(char *)((int)ppVVar7 + 0x46) = (char)iVar11;
        *(undefined *)((int)ppVVar7 + 0x4f) = 0x46;
        *(undefined *)((int)ppVVar7 + 0x47) = 4;
        return ppVVar7;
      }
    }
  }
  else {
    if (param_1 == 0x295) {
      pVVar19 = *ppVVar7;
      *(undefined *)((int)ppVVar7 + 0x4a) = 0xff;
      *(undefined *)(ppVVar7 + 0x13) = 0x40;
      ppVVar7[7] = (Vec3 *)0xffffffff;
      local_70 = 8;
      uStack_6f = 7;
      uStack_6e._0_1_ = 0;
      uStack_6e._1_1_ = 0;
      local_6c = 0;
      local_68 = 0x200;
      MatrixMultVector(&param_2->maybeMatrix,(Vec3 *)(Mat33 *)&local_70,(Vec3 *)(Mat33 *)&local_70);
      pVVar17 = (Vec3 *)(ppVVar7 + 3);
      VectorAdd(pVVar17,(Vec3 *)(Mat33 *)&local_70,&param_2->position);
      *(byte *)(ppVVar7 + 0x11) = (param_2->eulerRotation).pitch;
      *(byte *)((int)ppVVar7 + 0x45) = (param_2->eulerRotation).roll;
      *(byte *)((int)ppVVar7 + 0x46) = (param_2->eulerRotation).yaw;
      puVar18 = *DAT_800670e0;
      do {
        if ((Objects[*puVar18 & 0x7fff].state & 0x80) == 0) {
          VectorCopy((Vec3 *)(Mat33 *)&local_70,&Objects[*puVar18 & 0x7fff].position);
          local_68 = local_68 + 0x580;
          iVar11 = Vec2OctagonalDistanceApproximation((Vec2 *)pVVar17,(Vec2 *)(Mat33 *)&local_70);
          if (iVar11 < 0x4000) {
            cVar3 = Atan2((int)_local_70 - (int)ppVVar7[3],local_6c - (int)ppVVar7[4],0);
            uVar13 = (uint)(byte)(cVar3 - *(char *)((int)ppVVar7 + 0x46));
            if (0x80 < uVar13) {
              uVar13 = uVar13 - 0x100;
            }
            if ((int)uVar13 < 0) {
              uVar13 = -uVar13;
            }
            if ((int)uVar13 < 8) {
              uVar10 = Vec2OctagonalDistanceApproximation
                                 ((Vec2 *)pVVar17,(Vec2 *)(Mat33 *)&local_70);
              cVar5 = Atan2(uVar10,local_68 - (int)ppVVar7[5],0);
              uVar13 = (uint)(byte)(cVar5 - *(char *)((int)ppVVar7 + 0x45));
              if (0x80 < uVar13) {
                uVar13 = uVar13 - 0x100;
              }
              if ((int)uVar13 < 0) {
                uVar13 = -uVar13;
              }
              if ((int)uVar13 < 8) {
                *(char *)((int)ppVVar7 + 0x45) = cVar5;
                *(char *)((int)ppVVar7 + 0x46) = cVar3;
                goto LAB_OVR27DragonShores__80080638;
              }
            }
          }
        }
        uVar1 = *puVar18;
        puVar18 = puVar18 + 1;
        if ((short)uVar1 < 0) {
LAB_OVR27DragonShores__80080638:
          FUN_80041438(ppVVar7);
          local_70 = 0;
          uStack_6f = 3;
          uStack_6e._0_1_ = 0;
          uStack_6e._1_1_ = 0;
          local_6c = 0;
          local_68 = 0;
          MatrixMultVector((Mat33 *)(ppVVar7 + 8),(Vec3 *)&local_70,pVVar19);
          *(undefined2 *)&pVVar19[1].x = 0x3c;
          return ppVVar7;
        }
      } while( true );
    }
    if (param_1 < 0x296) {
      if (param_1 == 0x21d) {
        pVVar17 = *ppVVar7;
        VectorCopy((Vec3 *)(ppVVar7 + 3),&param_2->position);
        FUN_80041438(ppVVar7);
        pVVar17->x = 0x18;
        *(undefined *)((int)ppVVar7 + 0x57) = 0x30;
        *(undefined *)(ppVVar7 + 0x15) = 0;
        *(undefined *)((int)ppVVar7 + 0x55) = 0;
        *(undefined *)((int)ppVVar7 + 0x56) = 0;
        *(undefined *)((int)ppVVar7 + 0x4f) = 100;
        *(undefined *)((int)ppVVar7 + 0x47) = 0;
        iVar11 = rand();
        *(char *)((int)ppVVar7 + 0x45) = (char)iVar11;
        iVar11 = rand();
        *(char *)((int)ppVVar7 + 0x46) = (char)iVar11;
        return ppVVar7;
      }
      if (param_1 < 0x21e) {
        if (param_1 == 0x213) {
          pVVar17 = *ppVVar7;
          *(undefined *)(ppVVar7 + 0x13) = 0x20;
          *(undefined *)((int)ppVVar7 + 0x49) = 3;
          VectorCopy((Vec3 *)(ppVVar7 + 3),&param_2->position);
          FUN_80041438(ppVVar7);
          *(byte *)((int)ppVVar7 + 0x46) = (param_2->eulerRotation).yaw;
          iVar11 = rand();
          *(ushort *)((int)&pVVar17->y + 2) = ((ushort)iVar11 & 2) - 1;
          iVar11 = rand();
          *(ushort *)&pVVar17->z = ((ushort)iVar11 & 2) - 1;
          iVar11 = rand();
          *(ushort *)((int)&pVVar17->z + 2) = ((ushort)iVar11 & 2) - 1;
          pVVar17[1].y = (param_2->position).z + -0x40;
          uVar13 = rand();
          pVVar17[1].x = 0x20 - (uVar13 & 0xf);
          return ppVVar7;
        }
      }
      else if (param_1 == 0x276) goto LAB_OVR27DragonShores__8007fd00;
    }
    else {
      if (param_1 == 0x2c1) {
        pVVar17 = *ppVVar7;
        *(undefined *)(ppVVar7 + 0x13) = 0x18;
        *(undefined *)((int)ppVVar7 + 0x4a) = 0xff;
        FUN_80041730(param_2,0,(Vec3 *)(ppVVar7 + 3));
        *(byte *)((int)ppVVar7 + 0x46) = (param_2->eulerRotation).yaw;
        FUN_80041438(ppVVar7);
        pVVar17[1].y = (int)param_2;
        *(undefined *)(ppVVar7 + 0x15) = 1;
        return ppVVar7;
      }
      if (param_1 < 0x2c2) {
        if (param_1 == 0x299) {
          pVVar17 = *ppVVar7;
          *(undefined *)(ppVVar7 + 0x13) = 0x18;
          *(undefined *)((int)ppVVar7 + 0x4a) = 0xff;
          FUN_80041730(param_2,0,(Vec3 *)(ppVVar7 + 3));
          *(byte *)((int)ppVVar7 + 0x46) = (param_2->eulerRotation).yaw;
          FUN_80041438(ppVVar7);
          pVVar17[1].y = (int)param_2;
          *(undefined *)(ppVVar7 + 0x12) = 4;
          return ppVVar7;
        }
      }
      else if (param_1 == 0x2d8) {
        pVVar17 = *ppVVar7;
        *(byte *)((int)ppVVar7 + 0x46) =
             (param_2->eulerRotation).yaw +
             (char)((int)((uint)(ushort)cosineLookupTable[(byte)clock] << 0x10) >> 0x16);
        FUN_80041438(ppVVar7);
        pVVar17->x = (int)param_2;
        *(undefined *)(ppVVar7 + 0x15) = 2;
        return ppVVar7;
      }
    }
  }
  pSVar15 = (Spyro *)&param_2->position;
  if (param_2 == (Object *)0x0) {
    pSVar15 = &Spyro;
  }
  VectorCopy((Vec3 *)(ppVVar7 + 3),&pSVar15->position);
  FUN_80041438(ppVVar7);
  return ppVVar7;
}



undefined * FUN_OVR27DragonShores__80080790(int param_1)

{
  char cVar1;
  bool bVar2;
  char cVar3;
  char cVar4;
  byte bVar5;
  short sVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint uVar10;
  short sVar11;
  short sVar12;
  char cVar13;
  uint uVar14;
  char *pcVar15;
  undefined *puVar16;
  VectorShort *pVVar17;
  undefined *puVar18;
  Vec3 local_70;
  undefined4 local_60;
  undefined4 local_5c;
  int local_58;
  int local_54;
  int local_50;
  
  cVar13 = DAT_80066f18[1];
  puVar16 = DAT_80066f18;
  if (cVar13 != -1) {
    cVar4 = (char)param_1;
    cVar3 = cVar4 * '\x02';
    pcVar15 = DAT_80066f18 + 1;
    puVar18 = DAT_80066f18 + 0x18;
    pVVar17 = (VectorShort *)(DAT_80066f18 + 4);
    do {
      if (cVar13 == -2) goto LAB_OVR27DragonShores__80081ad0;
      switch(*puVar16) {
      case 0:
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        pcVar15[9] = pcVar15[9] + cVar3;
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        pcVar15[0xc] = pcVar15[0xc] + cVar4 * -4;
        pcVar15[0xb] = pcVar15[0xb] + cVar4 * -4;
        bVar5 = pcVar15[1];
        pcVar15[1] = (char)((uint)bVar5 + param_1);
        bVar2 = ((uint)bVar5 + param_1 & 0xff) < 0x20;
        pcVar15[0xd] = pcVar15[0xd] + cVar4 * -4;
        goto LAB_OVR27DragonShores__800813d8;
      case 1:
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        pcVar15[9] = pcVar15[9] + cVar4 * '\x04';
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        pcVar15[0xc] = pcVar15[0xc] + cVar4 * -4;
        pcVar15[0xb] = pcVar15[0xb] + cVar4 * -4;
        bVar5 = pcVar15[1];
        pcVar15[1] = (char)((uint)bVar5 + param_1);
        bVar2 = ((uint)bVar5 + param_1 & 0xff) < 0x18;
        pcVar15[0xd] = pcVar15[0xd] + cVar4 * -4;
        goto LAB_OVR27DragonShores__800813d8;
      case 4:
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        if ((short)(ushort)(byte)(cVar13 + 1U) < *(short *)(pcVar15 + 0x17)) {
          pcVar15[9] = pcVar15[9] + '\x04';
        }
        sVar11 = *(short *)(pcVar15 + 7);
        *(short *)(pcVar15 + 7) = sVar11 + *(short *)(pcVar15 + 0x1b);
        pcVar15[10] = pcVar15[10] + pcVar15[0x19];
        if ((*(short *)(pcVar15 + 0x1d) < (short)(sVar11 + *(short *)(pcVar15 + 0x1b))) &&
           (cVar13 = pcVar15[9], pcVar15[9] = cVar13 - 4U, (byte)(cVar13 - 4U) < 9))
        goto LAB_OVR27DragonShores__80081a78;
        break;
      case 9:
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        bVar5 = pcVar15[1];
        pcVar15[1] = (char)((uint)bVar5 + param_1);
        bVar2 = ((uint)bVar5 + param_1 & 0xff) < 0x20;
        pcVar15[9] = pcVar15[9] + cVar3;
        goto LAB_OVR27DragonShores__800813d8;
      case 10:
        if (((Spyro.state == Drowning) && (Spyro.health < 0)) ||
           ((Spyro.field168_0x260 != 0 || (Spyro.iframeTimer == 0))))
        goto LAB_OVR27DragonShores__80081a78;
        VectorCopy(&local_70,&Spyro.position);
        iVar9 = cosineLookup((int)*(short *)(pcVar15 + 0x17));
        local_70.x = local_70.x + (iVar9 >> 4);
        iVar9 = sineLookup((int)*(short *)(pcVar15 + 0x17));
        local_70.y = local_70.y + (iVar9 >> 4);
        local_70.z = local_70.z + 0x100;
        VecIntToShort(pVVar17,&local_70);
        sVar11 = *(short *)(pcVar15 + 0x17);
        *(short *)(pcVar15 + 0x17) = sVar11 + 0x40;
        iVar9 = cosineLookup((int)(short)(sVar11 + 0x40) - (int)VectorShort_80067ec8.Z & 0xfff);
        if (iVar9 < 0) {
          iVar9 = -iVar9;
        }
        pcVar15[9] = (char)(iVar9 / 0xaa);
        break;
      case 0xb:
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x15) = *(short *)(pcVar15 + 0x15) + 1;
        }
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        VectorShortAdd(pVVar17,pVVar17,puVar16 + 0x12);
        pcVar15[9] = pcVar15[9] + cVar3;
        pcVar15[0xb] = pcVar15[0xb] + -4;
        cVar13 = pcVar15[0xd];
        pcVar15[10] = pcVar15[10] + cVar4 * '\x04';
        pcVar15[0xd] = cVar13 + -4;
        pcVar15[0xc] = pcVar15[0xc] + -4;
        if ((char)(cVar13 + -4) == '\0') goto LAB_OVR27DragonShores__80081a78;
        goto LAB_OVR27DragonShores__800813e0;
      case 0xc:
        pcVar15[10] = pcVar15[10] + '\b';
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (pcVar15[0xb] != '\0') {
          pcVar15[0xb] = pcVar15[0xb] + -8;
        }
        if (pcVar15[0xc] != '\0') {
          pcVar15[0xc] = pcVar15[0xc] + -8;
        }
        if (pcVar15[0xd] != '\0') {
          pcVar15[0xd] = pcVar15[0xd] + -8;
        }
        uVar10 = *(uint *)(pcVar15 + 0xb);
        goto joined_r0x800812fc;
      case 0xd:
        if ((0x1b < (byte)pcVar15[1]) || (pcVar15[2] == '\0')) goto LAB_OVR27DragonShores__80081a78;
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        uVar10 = (uint)(byte)pcVar15[1];
        pcVar15[9] = pcVar15[9] + cVar3;
        if (uVar10 < 0xd) {
          if (uVar10 < 5) {
            pcVar15[0xb] = -0x80;
            pcVar15[0xc] = -0x80;
            iVar9 = (uint)(byte)pcVar15[1] * -0x20 + 0x80;
            if (iVar9 < 0) {
              iVar9 = 0;
            }
            pcVar15[0xd] = (char)iVar9;
          }
          else {
            pcVar15[0xb] = -0x80;
            pcVar15[0xd] = '\0';
            pcVar15[0xc] = (pcVar15[1] + -4) * -8 + -0x80;
          }
        }
        else {
          iVar9 = (uVar10 - 0xc) * -8 + 0x80;
          if (iVar9 < 0) {
            iVar9 = 0;
          }
          pcVar15[0xb] = (char)iVar9;
          iVar9 = ((byte)pcVar15[1] - 0xc) * -4 + 0x40;
          if (iVar9 < 0) {
            iVar9 = 0;
          }
          pcVar15[0xc] = (char)iVar9;
          pcVar15[0xd] = '\0';
        }
        pcVar15[1] = pcVar15[1] + cVar4;
        break;
      case 0x21:
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if (*(short *)(pcVar15 + 0x1d) != 0) {
          *(short *)(pcVar15 + 0x1b) = *(short *)(pcVar15 + 0x1b) + 1;
        }
        iVar9 = (uint)(byte)pcVar15[0xb] + param_1 * -2;
        *(short *)(pcVar15 + 0x1d) = 1 - *(short *)(pcVar15 + 0x1d);
        pcVar15[9] = pcVar15[9] + cVar3;
        if (iVar9 < 0) {
          iVar9 = 0;
        }
        bVar5 = pcVar15[1];
        cVar13 = (char)iVar9;
        pcVar15[0xb] = cVar13;
        pcVar15[0xc] = cVar13;
        pcVar15[0xd] = cVar13;
        pcVar15[1] = (char)((uint)bVar5 + param_1);
        if (((0x1f < ((uint)bVar5 + param_1 & 0xff)) || (pcVar15[2] == '\0')) || (iVar9 == 0))
        goto LAB_OVR27DragonShores__80081a78;
        break;
      case 0x29:
        uVar10 = (uint)(byte)pcVar15[0x1d];
        bVar5 = pcVar15[1] + 1;
        pcVar15[1] = bVar5;
        if (uVar10 < bVar5) {
          if (pcVar15[0x1e] != '\0') {
LAB_OVR27DragonShores__8008118c:
            (*DAT_800670fc)(1,0x2b,pVVar17,0);
          }
          goto LAB_OVR27DragonShores__80081a78;
        }
        iVar9 = ((int)*(short *)(pcVar15 + 0x17) - (int)*(short *)(pcVar15 + 0x11)) * (uint)bVar5;
        if (uVar10 == 0) {
          trap(0x1c00);
        }
        if ((uVar10 == 0xffffffff) && (iVar9 == -0x80000000)) {
          trap(0x1800);
        }
        iVar8 = ((int)*(short *)(pcVar15 + 0x19) - (int)*(short *)(pcVar15 + 0x13)) *
                (uint)(byte)pcVar15[1];
        uVar14 = (uint)(byte)pcVar15[0x1d];
        if (uVar14 == 0) {
          trap(0x1c00);
        }
        if ((uVar14 == 0xffffffff) && (iVar8 == -0x80000000)) {
          trap(0x1800);
        }
        sVar11 = *(short *)(pcVar15 + 0x15);
        *(short *)(pcVar15 + 0x15) = *(short *)(pcVar15 + 0x15) + -2;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + sVar11;
        iVar7 = clock * 8;
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 0x11) + (short)(iVar9 / (int)uVar10);
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 0x13) + (short)(iVar8 / (int)uVar14);
        pcVar15[9] = (char)(cosineLookupTable[iVar7 + (uint)(byte)pcVar15[0x1c] & 0xff] >> 10) +
                     '\n';
        pcVar15[10] = (char)(sineLookupTable[clock * 8 + (uint)(byte)pcVar15[0x1c] & 0xff] >> 0xb) +
                      '\x06';
        break;
      case 0x2a:
        bVar5 = pcVar15[1];
        pcVar15[1] = bVar5 + 1;
        if ((0xf < bVar5) || (pcVar15[2] == '\0')) goto LAB_OVR27DragonShores__80081a78;
        pcVar15[9] = pcVar15[9] + '\x02';
        pcVar15[0xb] = pcVar15[0xb] + -6;
        pcVar15[0xc] = pcVar15[0xc] + -6;
        pcVar15[0xd] = pcVar15[0xd] + -6;
        *(int *)(pcVar15 + 0x17) = *(int *)(pcVar15 + 0x17) + (int)*(short *)(pcVar15 + 0x11);
        *(int *)(pcVar15 + 0x1b) = *(int *)(pcVar15 + 0x1b) + (int)*(short *)(pcVar15 + 0x13);
        *(short *)(pcVar15 + 3) = (short)(*(int *)(pcVar15 + 0x17) >> 2);
        *(short *)(pcVar15 + 5) = (short)(*(int *)(pcVar15 + 0x1b) >> 2);
        break;
      case 0x2b:
        if (((byte)pcVar15[0xb] < 4) || (pcVar15[2] == '\0')) goto LAB_OVR27DragonShores__80081a78;
        cVar13 = '\x03';
        if (*(short *)(pcVar15 + 0x17) != 0) {
          cVar13 = '\x02';
        }
        cVar1 = pcVar15[9];
        pcVar15[9] = cVar1 + '\x01';
        if (*(short *)(pcVar15 + 0x17) != 0) {
          pcVar15[9] = cVar1 + '\x02';
        }
        pcVar15[0xb] = pcVar15[0xb] - cVar13;
        pcVar15[0xd] = pcVar15[0xd] - cVar13;
        pcVar15[0xc] = pcVar15[0xc] - cVar13;
        break;
      case 0x2c:
        *(short *)(pcVar15 + 0x17) = *(short *)(pcVar15 + 0x17) + *(short *)(pcVar15 + 0x11);
        *(short *)(pcVar15 + 0x19) = *(short *)(pcVar15 + 0x19) + *(short *)(pcVar15 + 0x13);
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + *(short *)(pcVar15 + 0x15);
        *(short *)(pcVar15 + 3) =
             *(short *)(pcVar15 + 0x17) +
             (short)(char)((ushort)cosineLookupTable[(byte)pcVar15[0x1b]] >> 8);
        sVar11 = sineLookupTable[(byte)pcVar15[0x1b]];
        pcVar15[0x1b] = pcVar15[0x1b] + pcVar15[0x1c];
        uVar10 = DAT_80067008 & 3;
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 0x19) + (short)(char)((ushort)sVar11 >> 8);
        if (uVar10 == 0) {
          if (*(short *)(pcVar15 + 0x15) < 9) {
            *(short *)(pcVar15 + 0x15) = *(short *)(pcVar15 + 0x15) + 1;
          }
          if ((byte)pcVar15[9] < 0x14) {
            pcVar15[9] = pcVar15[9] + 1;
          }
        }
        if (*(short *)(pcVar15 + 7) < *(short *)(pcVar15 + 0x1d)) {
          if (pcVar15[1] != '\0') goto LAB_OVR27DragonShores__800813e0;
        }
        else if (pcVar15[0x10] == '\x03') goto LAB_OVR27DragonShores__8008118c;
        goto LAB_OVR27DragonShores__80081a78;
      case 0x2e:
        bVar5 = pcVar15[1];
        pcVar15[1] = bVar5 + 1;
        if ((0xf < bVar5) || (pcVar15[2] == '\0')) goto LAB_OVR27DragonShores__80081a78;
        pcVar15[9] = pcVar15[9] + '\x03';
        pcVar15[0xb] = pcVar15[0xb] + -8;
        pcVar15[0xc] = pcVar15[0xc] + -8;
        pcVar15[0xd] = pcVar15[0xd] + -8;
        break;
      case 0x31:
        pcVar15[9] = pcVar15[9] + cVar4;
        pcVar15[0xc] = pcVar15[0xc] - cVar4;
        pcVar15[0xb] = pcVar15[0xb] - cVar4;
        bVar5 = pcVar15[1];
        pcVar15[0xd] = pcVar15[0xd] - cVar4;
        pcVar15[1] = (char)((uint)bVar5 + param_1);
        bVar2 = ((uint)bVar5 + param_1 & 0xff) < 0x30;
        goto LAB_OVR27DragonShores__800813d8;
      case 0x3b:
        pcVar15[10] = pcVar15[10] + '\b';
        VectorShortAdd(pVVar17,pVVar17,puVar18);
        if ((DAT_80067008 & 1) != 0) {
          *(short *)(pcVar15 + 0x19) = *(short *)(pcVar15 + 0x19) + 1;
        }
        if (pcVar15[0xb] != '\0') {
          pcVar15[0xb] = pcVar15[0xb] + -4;
        }
        if (pcVar15[0xc] != '\0') {
          pcVar15[0xc] = pcVar15[0xc] + -4;
        }
        if (pcVar15[0xd] != '\0') {
          pcVar15[0xd] = pcVar15[0xd] + -4;
        }
        uVar10 = *(uint *)(pcVar15 + 0xb);
joined_r0x800812fc:
        if ((uVar10 & 0xffffff) != 0) goto LAB_OVR27DragonShores__800813e0;
        goto LAB_OVR27DragonShores__80081a78;
      case 0x42:
        iVar9 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar15[1] & 1U) != 0) {
              *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + *(short *)(pcVar15 + 0xf);
              *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + *(short *)(pcVar15 + 0x11);
              *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + *(short *)(pcVar15 + 0x13);
              if ((pcVar15[1] & 2U) != 0) {
                iVar8 = rand();
                *(ushort *)(pcVar15 + 0xf) = *(short *)(pcVar15 + 0xf) + -1 + ((ushort)iVar8 & 2);
                iVar8 = rand();
                *(ushort *)(pcVar15 + 0x11) = *(short *)(pcVar15 + 0x11) + -1 + ((ushort)iVar8 & 2);
                iVar8 = rand();
                *(ushort *)(pcVar15 + 0x13) = *(short *)(pcVar15 + 0x13) + -1 + ((ushort)iVar8 & 2);
              }
            }
            iVar9 = iVar9 + 1;
            pcVar15[1] = pcVar15[1] + '\x01';
          } while (iVar9 < param_1);
        }
        bVar2 = (byte)pcVar15[1] < 0x18;
LAB_OVR27DragonShores__800813d8:
        if (bVar2) {
LAB_OVR27DragonShores__800813e0:
          if (pcVar15[2] != '\0') break;
        }
LAB_OVR27DragonShores__80081a78:
        FUN_80041d20(puVar16);
        break;
      case 0x46:
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        if ((0x1f < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR27DragonShores__80081a78;
        local_60._0_2_ = (short)((int)*(short *)(pcVar15 + 9) - (int)*(short *)(pcVar15 + 3) >> 1);
        local_60._2_2_ = (short)((int)*(short *)(pcVar15 + 0xb) - (int)*(short *)(pcVar15 + 5) >> 1)
        ;
        sVar11 = (short)((int)*(short *)(pcVar15 + 0xd) - (int)*(short *)(pcVar15 + 7) >> 1);
        local_5c = CONCAT22(local_5c._2_2_,sVar11);
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + (short)local_60;
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + local_60._2_2_;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + sVar11;
        iVar9 = rand();
        local_60._0_2_ = (short)local_60 + -1 + ((ushort)iVar9 & 2);
        iVar9 = rand();
        sVar11 = local_60._2_2_ + -1 + ((ushort)iVar9 & 2);
        local_60 = CONCAT22(sVar11,(short)local_60);
        if ((pcVar15[1] & 1U) != 0) {
          local_5c = CONCAT22(local_5c._2_2_,(short)local_5c + -1);
        }
        *(short *)(pcVar15 + 9) = *(short *)(pcVar15 + 9) + (short)local_60;
        *(short *)(pcVar15 + 0xb) = *(short *)(pcVar15 + 0xb) + sVar11;
        cVar13 = pcVar15[0xf];
        pcVar15[0xf] = cVar13 - 3U;
        *(short *)(pcVar15 + 0xd) = *(short *)(pcVar15 + 0xd) + (short)local_5c;
        if ((byte)(cVar13 - 3U) < 0x80) {
          pcVar15[0xf] = -0x80;
        }
        cVar13 = pcVar15[0x10];
        pcVar15[0x10] = cVar13 - 4U;
        if ((byte)(cVar13 - 4U) < 0x60) {
          pcVar15[0x10] = '`';
        }
        cVar13 = pcVar15[0x13];
        pcVar15[0x11] = '\0';
        pcVar15[0x13] = cVar13 - 3U;
        if ((byte)(cVar13 - 3U) < 0xc0) {
          pcVar15[0x13] = -0x40;
        }
        cVar13 = pcVar15[0x14];
        pcVar15[0x14] = cVar13 - 4U;
        if ((byte)(cVar13 - 4U) < 0x80) {
          pcVar15[0x14] = -0x80;
        }
        cVar13 = pcVar15[0x15];
        pcVar15[0x15] = cVar13 - 6U;
        if ((byte)(cVar13 - 6U) < 0x20) {
          pcVar15[0x15] = ' ';
        }
        break;
      case 0x47:
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        if ((0x1f < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR27DragonShores__80081a78;
        local_58 = (int)*(short *)(pcVar15 + 9) - (int)*(short *)(pcVar15 + 3);
        local_54 = (int)*(short *)(pcVar15 + 0xb) - (int)*(short *)(pcVar15 + 5);
        local_50 = (int)*(short *)(pcVar15 + 0xd) - (int)*(short *)(pcVar15 + 7);
        uVar10 = rand();
        local_58 = local_58 + -1 + (uVar10 & 2);
        uVar10 = rand();
        local_54 = local_54 + -1 + (uVar10 & 2);
        uVar10 = rand();
        local_50 = local_50 + -1 + (uVar10 & 2);
        *(short *)(pcVar15 + 9) = *(short *)(pcVar15 + 9) + (short)local_58;
        *(short *)(pcVar15 + 0xb) = *(short *)(pcVar15 + 0xb) + (short)local_54;
        *(short *)(pcVar15 + 0xd) = *(short *)(pcVar15 + 0xd) + (short)local_50;
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 9) - (short)local_58;
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 0xb) - (short)local_54;
        pcVar15[0x13] = pcVar15[0x13] + -2;
        pcVar15[0x15] = pcVar15[0x15] + -4;
        pcVar15[0x14] = pcVar15[0x14] + -2;
        pcVar15[0x10] = pcVar15[0x10] + -3;
        pcVar15[0xf] = pcVar15[0xf] + -3;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 0xd) - (short)local_50;
        pcVar15[0x11] = pcVar15[0x11] + -3;
        break;
      case 0x48:
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        if ((0x37 < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR27DragonShores__80081a78;
        local_60 = (int)*(short *)(pcVar15 + 3) - (int)*(short *)(pcVar15 + 9) >> 1;
        local_5c = (int)*(short *)(pcVar15 + 5) - (int)*(short *)(pcVar15 + 0xb) >> 1;
        local_58 = (int)*(short *)(pcVar15 + 7) - (int)*(short *)(pcVar15 + 0xd) >> 1;
        uVar10 = rand();
        local_60 = local_60 + -2 + (uVar10 & 4);
        uVar10 = rand();
        local_5c = local_5c + -2 + (uVar10 & 4);
        uVar10 = rand();
        local_58 = local_58 + -1 + (uVar10 & 2);
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + (short)local_60;
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + (short)local_5c;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + (short)local_58;
        *(short *)(pcVar15 + 9) = *(short *)(pcVar15 + 3) + (short)local_60 * -2;
        *(short *)(pcVar15 + 0xb) = *(short *)(pcVar15 + 5) + (short)local_5c * -2;
        *(short *)(pcVar15 + 0xd) = *(short *)(pcVar15 + 7) + (short)local_58 * -2;
        break;
      case 0x4e:
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        if ((0x27 < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR27DragonShores__80081a78;
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + *(short *)(pcVar15 + 0xf);
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + *(short *)(pcVar15 + 0x11);
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + *(short *)(pcVar15 + 0x13);
        iVar9 = rand();
        *(ushort *)(pcVar15 + 0xf) = *(short *)(pcVar15 + 0xf) + -1 + ((ushort)iVar9 & 2);
        iVar9 = rand();
        *(ushort *)(pcVar15 + 0x11) = *(short *)(pcVar15 + 0x11) + -1 + ((ushort)iVar9 & 2);
        uVar10 = rand();
        iVar9 = (*(ushort *)(pcVar15 + 0x13) - 1) + (uVar10 & 2);
        *(short *)(pcVar15 + 0x13) = (short)iVar9;
        if (2 < iVar9 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar15 + 0x13) = 2;
        }
        if (*(short *)(pcVar15 + 0x13) < -4) {
          *(undefined2 *)(pcVar15 + 0x13) = 0xfffc;
        }
        pcVar15[0xb] = pcVar15[0xb] + -2;
        pcVar15[0xd] = pcVar15[0xd] + -1;
        pcVar15[0xc] = pcVar15[0xc] + -2;
        break;
      case 0x4f:
        sVar12 = (short)((int)*(short *)(pcVar15 + 9) - (int)*(short *)(pcVar15 + 3) >> 1);
        sVar11 = (short)((int)*(short *)(pcVar15 + 0xb) - (int)*(short *)(pcVar15 + 5) >> 1);
        local_60 = CONCAT22(sVar11,sVar12);
        sVar6 = (short)((int)*(short *)(pcVar15 + 0xd) - (int)*(short *)(pcVar15 + 7) >> 1);
        local_5c = CONCAT22(local_5c._2_2_,sVar6);
        *(short *)(pcVar15 + 3) = *(short *)(pcVar15 + 3) + sVar12;
        *(short *)(pcVar15 + 5) = *(short *)(pcVar15 + 5) + sVar11;
        *(short *)(pcVar15 + 7) = *(short *)(pcVar15 + 7) + sVar6;
        *(short *)(pcVar15 + 9) = *(short *)(pcVar15 + 9) + sVar12;
        *(short *)(pcVar15 + 0xb) = *(short *)(pcVar15 + 0xb) + sVar11;
        cVar13 = pcVar15[1];
        pcVar15[1] = cVar13 + 1U;
        *(short *)(pcVar15 + 0xd) = *(short *)(pcVar15 + 0xd) + sVar6;
        if ((0x17 < (byte)(cVar13 + 1U)) || (pcVar15[2] == '\0'))
        goto LAB_OVR27DragonShores__80081a78;
        pcVar15[0xf] = pcVar15[0xf] + -3;
        pcVar15[0x13] = pcVar15[0x13] + -3;
        pcVar15[0x10] = pcVar15[0x10] + -4;
        pcVar15[0x14] = pcVar15[0x14] + -4;
        if (5 < (byte)pcVar15[0x15]) {
          pcVar15[0x15] = pcVar15[0x15] - 6;
        }
      }
LAB_OVR27DragonShores__80081ad0:
      pcVar15 = pcVar15 + 0x20;
      puVar18 = puVar18 + 0x20;
      pVVar17 = (VectorShort *)&pVVar17[5].Y;
      cVar13 = *pcVar15;
      puVar16 = puVar16 + 0x20;
    } while (cVar13 != -1);
  }
  return puVar16;
}



undefined *
FUN_OVR27DragonShores__80081b20(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  byte bVar1;
  char cVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  Vec3 *from;
  undefined *puVar8;
  undefined uVar9;
  undefined uVar10;
  Vec3 local_128;
  Vec3 local_118;
  Vec3 local_108;
  Vec3 local_f8;
  Vec3 local_e8;
  Vec3 local_d8;
  Vec3 VStack_c8;
  Vec3 VStack_b8;
  Vec3 VStack_a8;
  Vec3 local_98;
  undefined local_88;
  undefined local_87;
  undefined local_86;
  Mat33 MStack_80;
  Vec3 local_60;
  int local_50;
  int local_48;
  Vec3 *local_40;
  int local_30;
  
  puVar8 = (undefined *)0x0;
  local_48 = 0;
  if (0 < param_1) {
    local_40 = &local_118;
    local_30 = 0;
    local_50 = param_1;
    do {
      uVar10 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xb] = (char)iVar5;
        uVar10 = 4;
        puVar8[0xe] = 0x80;
        puVar8[0xf] = 0x2e;
        goto LAB_OVR27DragonShores__80082988;
      case 1:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x10;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = 0x60;
        puVar8[0xd] = 0x60;
        puVar8[0xe] = 0x60;
        uVar10 = 4;
        goto LAB_OVR27DragonShores__80082984;
      case 4:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        puVar8[10] = 8;
        iVar5 = rand();
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xe] = 0x80;
        puVar8[0xb] = (char)iVar5;
        puVar8[0xf] = 0x2e;
        puVar8[0x11] = 2;
        puVar8[0x10] = 0;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x18) = ((ushort)iVar5 & 3) + 4;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1a) = ((ushort)iVar5 & 3) + 2;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1c) = ((ushort)iVar5 & 7) + 3;
        *(short *)(puVar8 + 0x1e) = (short)((int)param_4 >> 2);
        break;
      case 9:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VectorCopy(&local_128,&Spyro.position);
        uVar6 = rand();
        local_128.x = local_128.x + -0x3f + (uVar6 & 0x7e);
        uVar6 = rand();
        local_128.y = local_128.y + -0x3f + (uVar6 & 0x7e);
        VecIntToShort((VectorShort *)(puVar8 + 4),&local_128);
        VectorCopy(&local_128,&Spyro.physicsVelocity);
        VectorShiftRight(&local_128,6);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),&local_128);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xb] = (char)iVar5;
        uVar10 = 4;
        puVar8[0xe] = 0x80;
        puVar8[0xf] = 0x2e;
        goto LAB_OVR27DragonShores__80082988;
      case 10:
        puVar8 = (undefined *)FUN_80041c50(3);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0x1f;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),&Spyro.position);
        puVar8[10] = 0x18;
        puVar8[0xb] = 0xf;
        puVar8[0xc] = (&DAT_80064654)[local_30];
        puVar8[0xd] = (&DAT_80064655)[local_30];
        uVar10 = (&DAT_80064656)[local_30];
        puVar8[0xf] = 0x2c;
        puVar8[0x11] = 4;
        puVar8[0x10] = 0;
        puVar8[0xe] = uVar10;
        *(short *)(puVar8 + 0x18) = (short)(((local_50 - local_48) * 0x1000) / 5);
        break;
      case 0xc:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        iVar5 = local_48 * 0xc;
        puVar8[3] = 1;
        puVar8[0x11] = 4;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar5),local_40);
        VectorAdd(local_40,local_40,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar6 = rand();
          local_118.x = (local_118.x + 0x100) - (uVar6 & 0x1ff);
          uVar6 = rand();
          local_118.y = (local_118.y + 0x100) - (uVar6 & 0x1ff);
          uVar6 = rand();
          local_118.z = (local_118.z + 0x100) - (uVar6 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar6 = rand();
          local_118.x = (local_118.x + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          local_118.y = (local_118.y + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          local_118.z = (local_118.z + 0x80) - (uVar6 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar8 + 4),local_40);
        *(undefined4 *)(puVar8 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar7 = rand();
        puVar8[10] = ((byte)iVar7 & 7) + 0x20;
        iVar7 = rand();
        puVar8[0xb] = (char)iVar7;
        puVar8[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar8 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar5));
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x18) = (*(short *)(puVar8 + 0x18) >> 2) + -4 + ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1a) = (*(short *)(puVar8 + 0x1a) >> 2) + -4 + ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1c) = (*(short *)(puVar8 + 0x1c) >> 2) + -4 + ((ushort)iVar5 & 7);
        break;
      case 0xd:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),param_4);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x18;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        uVar10 = 4;
        puVar8[0xc] = 0xff;
        puVar8[0xd] = 0xff;
        puVar8[0xe] = 0;
        puVar8[0xf] = 0x2e;
        goto LAB_OVR27DragonShores__80082988;
      case 0x21:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_f8,&Spyro.physicsVelocity);
          VectorShiftRight(&local_f8,6);
          VectorCopy(&local_108,&Spyro.position);
          local_108.z = local_108.z + -0x164;
          uVar6 = rand();
          local_108.x = (local_108.x + 0x80) - (uVar6 & 0xff);
          uVar6 = rand();
          uVar9 = 0x30;
          local_108.y = (local_108.y + 0x80) - (uVar6 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_108.x = 0x164;
          local_108.y = 0;
          local_108.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_108,&local_108);
          VectorAdd(&local_108,&local_108,&Spyro.position);
          uVar9 = 0x40;
          uVar6 = rand();
          local_f8.x = -(uVar6 & 7);
          uVar6 = rand();
          local_f8.y = ((int)((uint)(ushort)cosineLookupTable[local_48 * 0x20] << 0x10) >> 0x17) -
                       ((uVar6 & 0xf) - 8);
          local_f8.z = (int)((uint)(ushort)sineLookupTable[local_48 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_f8,&local_f8);
        }
        else {
          iVar5 = 5;
          if (param_4 == (Vec3 *)0x2) {
            iVar7 = local_48 << 5;
            iVar5 = 6;
            uVar9 = 0x30;
          }
          else {
            uVar9 = 0x40;
            iVar7 = local_48 * 0x20 + 0x10;
          }
          VectorCopy(&local_108,&Spyro.position);
          local_108.x = local_108.x + ((int)cosineLookupTable[iVar7] >> iVar5);
          local_108.z = local_108.z + -0x164;
          local_108.y = local_108.y + ((int)sineLookupTable[iVar7] >> iVar5);
          local_f8.x = (int)cosineLookupTable[iVar7] >> iVar5 + 1;
          local_f8.z = 0;
          local_f8.y = (int)sineLookupTable[iVar7] >> iVar5 + 1;
        }
        VecIntToShort((VectorShort *)(puVar8 + 4),&local_108);
        VecIntToShort((VectorShort *)(puVar8 + 0x18),&local_f8);
        *(undefined2 *)(puVar8 + 0x1e) = 0;
        puVar8[10] = 0x10;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        uVar10 = 4;
        puVar8[0xc] = uVar9;
        puVar8[0xd] = uVar9;
        puVar8[0xe] = uVar9;
        goto LAB_OVR27DragonShores__80082984;
      case 0x29:
        VectorCopy(&local_e8,param_3);
        uVar6 = rand();
        local_e8.x = (local_e8.x + 0x80) - (uVar6 & 0xff);
        uVar6 = rand();
        local_e8.y = (local_e8.y + 0x80) - (uVar6 & 0xff);
        uVar6 = rand();
        uVar3 = rand();
        iVar5 = (uVar3 & 0x3ff) + 0x200;
        VectorCopy(&local_d8,&local_e8);
        from = param_4;
        if (param_4 == (Vec3 *)0x0) {
          from = &Spyro.trueVelocity;
        }
        VectorCopy(&VStack_c8,from);
        VectorShiftRight(&VStack_c8,1);
        if (local_50 == 1) {
          VectorMultByN(&VStack_c8,&VStack_c8,3);
        }
        VStack_c8.z = 0;
        VectorAdd(&local_d8,&local_d8,&VStack_c8);
        local_d8.x = local_d8.x + (cosineLookupTable[uVar6 & 0xff] * iVar5 >> 0xc);
        local_d8.z = local_d8.z + 0x200;
        local_d8.y = local_d8.y + (sineLookupTable[uVar6 & 0xff] * iVar5 >> 0xc);
        local_d8.z = RaycastDown(&local_d8,0x400);
        if (local_d8.z != 0) {
          puVar8 = (undefined *)FUN_80041c50(3);
          puVar8[3] = 1;
          puVar8[10] = 10;
          *puVar8 = uVar10;
          puVar8[2] = 0;
          puVar8[0xb] = 6;
          puVar8[0xc] = (char)(DAT_80067408 >> 4);
          puVar8[0xd] = (char)(DAT_8006740c >> 4);
          iVar5 = DAT_80067410;
          puVar8[0xf] = 0x2e;
          puVar8[0x11] = 2;
          puVar8[0x10] = 0;
          puVar8[0xe] = (char)(iVar5 >> 4);
          VecIntToShort((VectorShort *)(puVar8 + 4),&local_e8);
          VecIntToShort((VectorShort *)(puVar8 + 0x12),&local_e8);
          VecIntToShort((VectorShort *)(puVar8 + 0x18),&local_d8);
          uVar6 = rand();
          uVar3 = rand();
          iVar5 = (uVar6 & 0xe) + (uVar3 & 6) + 0x14;
          *(short *)(puVar8 + 0x16) = (short)iVar5;
          puVar8[0x1e] = 0;
          while ((0 < iVar5 || (local_d8.z < local_e8.z))) {
            local_e8.z = local_e8.z + iVar5 * 4;
            iVar5 = iVar5 + -2;
            puVar8[0x1e] = puVar8[0x1e] + '\x01';
          }
          iVar5 = rand();
          puVar8[0x1d] = (char)iVar5;
          puVar8[0x1f] = (char)isOnWaterSurface;
        }
        break;
      case 0x2a:
        puVar8 = (undefined *)FUN_80041c50(4);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        *(int *)(puVar8 + 0x18) = param_3->x;
        *(int *)(puVar8 + 0x1c) = param_3->y;
        *(short *)(puVar8 + 0x12) = (short)param_4->x;
        *(short *)(puVar8 + 0x14) = (short)param_4->y;
        iVar5 = rand();
        puVar8[10] = ((byte)iVar5 & 7) + 3;
        bVar1 = Spyro.angleAsByte.yaw;
        puVar8[0xc] = 0x6c;
        puVar8[0xd] = 0x6c;
        puVar8[0xe] = 0x6c;
        puVar8[0xf] = 0x2e;
        puVar8[0x11] = 0;
        puVar8[0x10] = 0;
        puVar8[0xb] = bVar1 + 0x20;
        break;
      case 0x2b:
        puVar8 = (undefined *)FUN_80041c50(4);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          CopyVectorShort((VectorShort *)(puVar8 + 4),(VectorShort *)param_3);
          iVar5 = rand();
          puVar8[10] = ((byte)iVar5 & 7) + 2;
          uVar10 = 0x60;
        }
        else {
          VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
          if (param_4 == (Vec3 *)0x2) {
            iVar5 = rand();
            *(ushort *)(puVar8 + 4) = (*(short *)(puVar8 + 4) + 0x20) - ((ushort)iVar5 & 0x7f);
            iVar5 = rand();
            *(ushort *)(puVar8 + 6) = (*(short *)(puVar8 + 6) + 0x20) - ((ushort)iVar5 & 0x7f);
          }
          iVar5 = rand();
          puVar8[10] = ((byte)iVar5 & 7) + 0x10;
          uVar10 = 0x40;
        }
        bVar1 = Spyro.angleAsByte.yaw;
        puVar8[0xc] = uVar10;
        puVar8[0xd] = uVar10;
        puVar8[0xe] = uVar10;
        puVar8[0xf] = 0x2e;
        puVar8[0x11] = 0;
        puVar8[0x10] = 0;
        *(short *)(puVar8 + 0x18) = (short)param_4;
        puVar8[0xb] = bVar1;
        break;
      case 0x2c:
        MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,param_3,&VStack_b8);
        VectorAdd(&VStack_b8,&VStack_b8,&Spyro.position);
        iVar5 = FUN_8003ce38(&Spyro.position,&VStack_b8,2,0,0);
        if (iVar5 == 0) {
          puVar8 = (undefined *)FUN_80041c50(2);
          *puVar8 = uVar10;
          puVar8[3] = 1;
          VecIntToShort((VectorShort *)(puVar8 + 4),&VStack_b8);
          VecIntToShort((VectorShort *)(puVar8 + 0x18),&VStack_b8);
          *(short *)(puVar8 + 0x12) = (short)(Spyro.trueVelocity.x >> 9);
          *(short *)(puVar8 + 0x14) = (short)(Spyro.trueVelocity.y >> 9);
          iVar5 = rand();
          puVar8[0xc] = 0x80;
          puVar8[0xd] = 0x80;
          *(ushort *)(puVar8 + 0x16) = ((ushort)iVar5 & 3) + 4;
          puVar8[0xb] = 0;
          puVar8[0xe] = 0x80;
          puVar8[0xf] = 0x2e;
          puVar8[0x11] = 2;
          puVar8[0x10] = 0;
          iVar5 = rand();
          puVar8[10] = ((byte)iVar5 & 7) + 6;
          iVar5 = rand();
          puVar8[0x1c] = (char)iVar5;
          iVar5 = rand();
          puVar8[0x1d] = '\x10' - ((byte)iVar5 & 0x1f);
          iVar5 = rand();
          puVar8[2] = ((byte)iVar5 & 0x1f) + 0x40;
          VectorCopy(&VStack_a8,&VStack_b8);
          VStack_a8.z = VStack_a8.z + 0xc00;
          iVar5 = FUN_8003ce38(&VStack_b8,&VStack_a8,2,0,0);
          if (iVar5 == 0) {
            *(short *)(puVar8 + 0x1e) = (short)(VStack_a8.z >> 2);
          }
          else {
            *(short *)(puVar8 + 0x1e) = (short)(Vec3_8006ab70.z >> 2);
            if (isOnWaterSurface != 0) {
              puVar8[0x11] = 3;
            }
          }
        }
        break;
      case 0x2e:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = (*(short *)(puVar8 + 4) + 0x40) - ((ushort)iVar5 & 0x7f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = (*(short *)(puVar8 + 6) + 0x40) - ((ushort)iVar5 & 0x7f);
        if (param_4 == (Vec3 *)0x0) {
          iVar5 = rand();
          cVar2 = ((byte)iVar5 & 0xf) + 0x14;
        }
        else {
          iVar5 = rand();
          cVar2 = (char)param_4 + ((byte)iVar5 & 0xf);
        }
        puVar8[10] = cVar2;
        iVar5 = rand();
        puVar8[0xc] = 0x80;
        puVar8[0xd] = 0x80;
        puVar8[0xb] = (char)iVar5;
        uVar10 = 2;
        puVar8[0xe] = 0x80;
        puVar8[0xf] = 0x2e;
        goto LAB_OVR27DragonShores__80082988;
      case 0x31:
        puVar8 = (undefined *)FUN_80041c50(2);
        *puVar8 = uVar10;
        puVar8[2] = 0;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        puVar8[10] = 0x60;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0xc] = 0x40;
        puVar8[0xd] = 0x40;
        puVar8[0xe] = 0x40;
        uVar10 = 2;
LAB_OVR27DragonShores__80082984:
        puVar8[0xf] = 0x2e;
LAB_OVR27DragonShores__80082988:
        puVar8[0x11] = uVar10;
        puVar8[0x10] = 0;
        break;
      case 0x3b:
        puVar8 = (undefined *)FUN_80041c50(5);
        puVar8[3] = 1;
        *puVar8 = uVar10;
        puVar8[0x11] = 0x10;
        puVar8[1] = puVar8[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = (*(short *)(puVar8 + 4) + 0x10) - ((ushort)iVar5 & 0x1f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = (*(short *)(puVar8 + 6) + 8) - ((ushort)iVar5 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar4 = 0x2e0080c0;
        }
        else {
          uVar4 = 0x2e00c000;
        }
        *(undefined4 *)(puVar8 + 0xc) = uVar4;
        iVar5 = rand();
        puVar8[10] = ((byte)iVar5 & 0xf) + 0x14;
        iVar5 = rand();
        puVar8[0xb] = (char)iVar5;
        puVar8[0x10] = 0;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x18) = ((ushort)iVar5 & 7) - 4;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1a) = -2 - ((ushort)iVar5 & 7);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x1c) = ((ushort)iVar5 & 0xf) - 8;
        break;
      case 0x42:
        puVar8 = (undefined *)FUN_80041c50(0);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        iVar7 = param_3->z;
        *(undefined2 *)(puVar8 + 0x10) = 0;
        *(undefined2 *)(puVar8 + 0x12) = 0;
        *(undefined2 *)(puVar8 + 0x14) = 0;
        puVar8[10] = 2;
        *(ushort *)(puVar8 + 8) = (short)(iVar7 >> 2) + ((ushort)iVar5 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar8[0xc] = 0xff;
          goto LAB_OVR27DragonShores__80082b78;
        }
        uVar6 = rand();
        switch(uVar6 & 7) {
        case 0:
          puVar8[0xc] = 0xff;
          puVar8[0xd] = 0;
          puVar8[0xe] = 0;
          break;
        case 1:
          puVar8[0xc] = 0xff;
          goto LAB_OVR27DragonShores__80082b78;
        case 2:
          puVar8[0xc] = 0;
LAB_OVR27DragonShores__80082b78:
          puVar8[0xd] = 0xff;
          puVar8[0xe] = 0;
          break;
        case 3:
          puVar8[0xc] = 0;
          puVar8[0xd] = 0xff;
          goto LAB_OVR27DragonShores__80082bc8;
        case 4:
          puVar8[0xc] = 0;
          puVar8[0xd] = 0;
          goto LAB_OVR27DragonShores__80082bc8;
        case 5:
          puVar8[0xc] = 0xff;
          puVar8[0xd] = 0;
          goto LAB_OVR27DragonShores__80082bc8;
        case 6:
          puVar8[0xc] = 0xff;
          puVar8[0xd] = 0x80;
          puVar8[0xe] = 0;
          break;
        case 7:
          puVar8[0xc] = 0;
          puVar8[0xd] = 0x80;
LAB_OVR27DragonShores__80082bc8:
          puVar8[0xe] = 0xff;
        }
        puVar8[0xf] = 0x40;
        break;
      case 0x46:
        puVar8 = (undefined *)FUN_80041c50(1);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        local_88 = 0;
        iVar5 = rand();
        local_87 = (undefined)iVar5;
        iVar5 = rand();
        local_86 = (undefined)iVar5;
        BuildRotationMatrix(&local_88,&MStack_80,(Mat33 *)0x0);
        local_98.y = 0;
        local_98.z = 0;
        local_98.x = (int)param_4;
        MatrixMultVector(&MStack_80,&local_98,&local_98);
        *(short *)(puVar8 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar8 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar8 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar8 + 10) = *(short *)(puVar8 + 4) + (short)local_98.x * 2;
        *(short *)(puVar8 + 0xc) = *(short *)(puVar8 + 6) + (short)local_98.y * 2;
        puVar8[0x17] = 2;
        puVar8[0x10] = 0xe0;
        puVar8[0x11] = 0xc0;
        puVar8[0x13] = 0x50;
        puVar8[0x12] = 0;
        puVar8[0x14] = 0xff;
        puVar8[0x15] = 0xff;
        puVar8[0x16] = 0x80;
        *(short *)(puVar8 + 0xe) = *(short *)(puVar8 + 8) + (short)local_98.z * 2;
        break;
      case 0x47:
        puVar8 = (undefined *)FUN_80041c50(1);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 7;
        puVar8[3] = 1;
        uVar6 = rand();
        local_60.x = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_60.y = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_60.z = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar8 + 4) = (short)(param_3->x >> 2) + (short)local_60.x * 4;
        *(short *)(puVar8 + 6) = (short)(param_3->y >> 2) + (short)local_60.y * 4;
        *(short *)(puVar8 + 8) = (short)(param_3->z >> 2) + (short)local_60.z * 4;
        *(short *)(puVar8 + 10) = *(short *)(puVar8 + 4) + (short)local_60.x;
        *(short *)(puVar8 + 0xc) = *(short *)(puVar8 + 6) + (short)local_60.y;
        puVar8[0x17] = 2;
        puVar8[0x10] = 0xe0;
        puVar8[0x11] = 0xe0;
        puVar8[0x12] = 0x60;
        puVar8[0x14] = 0xff;
        puVar8[0x15] = 0xff;
        puVar8[0x16] = 0xff;
        puVar8[0x13] = 0x50;
        *(short *)(puVar8 + 0xe) = *(short *)(puVar8 + 8) + (short)local_60.z;
        break;
      case 0x4e:
        puVar8 = (undefined *)FUN_80041c50(0);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0x1f;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar8 + 4) = *(short *)(puVar8 + 4) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 6) = *(short *)(puVar8 + 6) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 8) = *(short *)(puVar8 + 8) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x10) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x12) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar8 + 0x14) = -((ushort)iVar5 & 1);
        iVar5 = rand();
        puVar8[0xc] = (byte)iVar5 | 0x80;
        uVar6 = rand();
        uVar6 = (uVar6 & 0x7f) + 0x60;
        puVar8[0xd] = (char)uVar6;
        if ((byte)puVar8[0xc] < uVar6) {
          puVar8[0xd] = puVar8[0xc];
        }
        iVar5 = rand();
        puVar8[0xe] = ((byte)iVar5 & 0x3f) + 0x40;
        puVar8[0xf] = 0x40;
        puVar8[10] = 2;
        break;
      case 0x4f:
        puVar8 = (undefined *)FUN_80041c50(1);
        *puVar8 = uVar10;
        iVar5 = rand();
        puVar8[2] = (byte)iVar5 & 0xf;
        puVar8[3] = 1;
        VecIntToShort((VectorShort *)(puVar8 + 10),param_3);
        VectorAdd(&local_60,param_3,param_4);
        uVar6 = rand();
        local_60.x = local_60.x + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_60.y = local_60.y + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_60.z = local_60.z + -0x40 + (uVar6 & 0x7f);
        VecIntToShort((VectorShort *)(puVar8 + 4),&local_60);
        puVar8[0x17] = 2;
        iVar5 = rand();
        puVar8[0x10] = (byte)iVar5 | 0xc0;
        iVar5 = rand();
        puVar8[0x11] = ((byte)iVar5 & 0x3f) + 0xa0;
        puVar8[0x12] = 0;
        iVar5 = rand();
        puVar8[0x14] = (byte)iVar5 | 0xe0;
        iVar5 = rand();
        puVar8[0x15] = (byte)iVar5 | 0xe0;
        puVar8[0x16] = 0x80;
        puVar8[0x13] = 0x50;
      }
      local_30 = local_30 + 4;
      local_48 = local_48 + 1;
    } while (local_48 < local_50);
  }
  return puVar8;
}



void FUN_OVR28RiptosArena__8006d264(int param_1)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  Vec3 VStack_88;
  int aiStack_78 [2];
  Vec3 VStack_70;
  Vec3 VStack_60;
  Vec3 VStack_50;
  int iStack_40;
  int iStack_3c;
  undefined auStack_38 [12];
  int iStack_2c;
  int iStack_28;
  int aiStack_20 [2];
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  param_1 = Spyro.field35_0x5c + param_1;
  switch(Spyro.state) {
  case Electrified:
    if (Spyro.airVelocityFlag != FALLING) {
      if (0x12 < param_1) {
        Spyro.field42_0x88.x = Spyro.trueVelocity.x * 0xe0;
        Spyro.field42_0x88.y = Spyro.trueVelocity.y * 0xe0;
        Spyro.field42_0x88.z = Spyro.trueVelocity.z * 0xe0;
        VectorShiftRight(&Spyro.field42_0x88,8);
      }
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
      goto LAB_OVR28RiptosArena__8006e280;
    }
    FUN_8002b36c(0xc80);
    FUN_8002bb24(0x28,8);
    FUN_8002bd70(0x140,0xc0);
    iVar4 = cosineLookup(Spyro.maybeTargetYaw);
    VStack_88.x = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    iVar4 = sineLookup(Spyro.maybeTargetYaw);
    VStack_88.y = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    VectorSubtract(&VStack_88,&VStack_88,&Spyro.trueVelocity);
    VStack_88.z = 0;
    iVar4 = VectorLength(&VStack_88,0);
    if (0x280 < iVar4) {
      VectorScale(&VStack_88,iVar4,0x280);
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&VStack_88);
    FUN_8002c038();
    iVar4 = Spyro.trueVelocity.z;
    if (param_1 < 0xd) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x17;
      return;
    }
    goto LAB_OVR28RiptosArena__8006eea4;
  case SuperchargeAscending:
    FUN_8002b4e4(aiStack_78,1,(int)cRamffffff5c,(int)cRamffffcb48);
    Spyro.maybeTurnSpeed = aiStack_78[0] >> 1;
    if (Spyro.maybeTurnSpeed < -0x19) {
      Spyro.maybeTurnSpeed = -0x19;
    }
    if (0x19 < Spyro.maybeTurnSpeed) {
      Spyro.maybeTurnSpeed = 0x19;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    FUN_8002bd70(0x240,0x180);
    iVar4 = cosineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.x = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    iVar4 = sineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.z = Spyro.trueVelocity.z;
    Spyro.field42_0x88.y = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    FUN_8002c038();
    Spyro.field82_0x14c = Spyro.field82_0x14c + 0xc;
    if (0xc0 < Spyro.field82_0x14c) {
      Spyro.field82_0x14c = 0xc0;
    }
    Spyro.trueVelocity.z = Spyro.trueVelocity.z - Spyro.field82_0x14c;
LAB_OVR28RiptosArena__8006e280:
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    break;
  case HurtBurn:
    FUN_8002b36c(0xc80);
    FUN_8002bb24(0x28,8);
    FUN_8002bd70(0x140,0xc0);
    iVar4 = cosineLookup(Spyro.maybeTargetYaw);
    VStack_70.x = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    iVar4 = sineLookup(Spyro.maybeTargetYaw);
    VStack_70.y = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    VectorSubtract(&VStack_70,&VStack_70,&Spyro.trueVelocity);
    VStack_70.z = 0;
    iVar4 = VectorLength(&VStack_70,0);
    if (0x280 < iVar4) {
      VectorScale(&VStack_70,iVar4,0x280);
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&VStack_70);
    FUN_8002c038();
    if (param_1 < 0xd) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x17;
    }
    else {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
    }
    iVar4 = 0;
    if (DAT_800670fc != (code *)0x0) {
      do {
        uVar5 = rand();
        if (param_1 * 5 < (int)(uVar5 & 0xff)) {
          iVar2 = RandomRangeGen(0,0xc);
          uVar5 = Spyro.angleAsByte.yaw + 0x80 + iVar2 & 0xff;
          VStack_60.x = cosineLookupTable[uVar5] * 5 >> 10;
          VStack_60.z = 0xe;
          VStack_50.x = -300;
          VStack_50.y = 0;
          VStack_50.z = -200;
          VStack_60.y = sineLookupTable[uVar5] * 5 >> 10;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&VStack_50,&VStack_50);
          iVar2 = RandomRangeGen(0,0x50);
          VStack_50.x = VStack_50.x + iVar2;
          iVar2 = RandomRangeGen(0,0x50);
          VStack_50.y = VStack_50.y + iVar2;
          iVar2 = RandomRangeGen(0,0x50);
          VStack_50.z = VStack_50.z + iVar2;
          VectorAdd(&VStack_50,&VStack_50,&Spyro.position);
          iVar2 = (*DAT_800670fc)(1,0xd,&VStack_50,&VStack_60);
          *(undefined *)(iVar2 + 2) = 8;
          *(undefined *)(iVar2 + 10) = 0x20;
        }
        iVar4 = iVar4 + 1;
      } while (iVar4 < 2);
    }
    break;
  case Superfly:
  case SuperflyAscending:
  case SuperflyDescending:
    FUN_8002b694(&iStack_40,0x8006a144,0);
    uVar5 = iStack_3c * -0x14 >> 7;
    auStack_38._8_4_ = (Spyro.trueVelocity.z >> 3) + -0x400;
    iVar4 = iStack_40 * 0x14 >> 7;
    if ((int)auStack_38._8_4_ < 0) {
      auStack_38._0_4_ = Spyro.trueVelocity.x >> 3;
      auStack_38._4_4_ = Spyro.trueVelocity.y >> 3;
      VectorAdd((Vec3 *)auStack_38,(Vec3 *)auStack_38,&Spyro.position);
      iVar2 = FUN_8001f618(&Spyro,(Vec3 *)auStack_38,2);
      if (iVar2 == 0) {
        iStack_3c = Spyro.position.z - Vec3_8006ab70.z >> 3;
        if (10 < iStack_3c) {
          iStack_3c = 10;
        }
        uVar5 = uVar5 + iStack_3c;
      }
    }
    iVar2 = Spyro.superflySpeed;
    if ((currentLoadedLevel == OCEAN_SPEEDWAY) && (DAT_8006abf8 != '\0')) {
      iVar2 = 53000;
    }
    if (iVar2 - Spyro.position.z < 0x1000) {
      uVar3 = ((iVar2 - Spyro.position.z) * 800 >> 0xc) - Spyro.rotation.Pitch & 0xfff;
      if (0x800 < uVar3) {
        uVar3 = uVar3 - 0x1000;
      }
      if ((int)uVar3 < (int)uVar5) {
        uVar5 = uVar3;
      }
    }
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar4 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + uVar5 & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    if (inSpeedwayFlag < 0) {
      if (Spyro.rotation.Pitch < 0) {
        iVar2 = DAT_80060184 - DAT_80060180;
LAB_OVR28RiptosArena__8006e8f8:
        Spyro.maybeHorizontalSpeed = DAT_80060184 + (Spyro.rotation.Pitch * iVar2) / 800;
      }
      else {
        if (0 < Spyro.rotation.Pitch) {
          iVar2 = DAT_80060188 - DAT_80060184;
          goto LAB_OVR28RiptosArena__8006e8f8;
        }
        Spyro.maybeHorizontalSpeed = DAT_80060184;
      }
      Spyro.field82_0x14c =
           Spyro.field82_0x14c +
           (((Spyro.maybeHorizontalSpeed - Spyro.maybeHorizontalSpeedDecay) - Spyro.field82_0x14c) *
            0x40 >> 6);
      Spyro.maybeHorizontalSpeedDecay = Spyro.maybeHorizontalSpeedDecay + (Spyro.field82_0x14c >> 6)
      ;
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
      if (0x4b00 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x4b00;
      }
    }
    else {
      if ((currentLoadedLevel == OCEAN_SPEEDWAY) && (DAT_8006abf8 != '\0')) {
        if (53000 - Spyro.position.z < 0) {
          Spyro.maybeHorizontalSpeedDecay = 0x800;
        }
        else {
          iVar2 = maybeSquareRoot();
          Spyro.maybeHorizontalSpeedDecay = iVar2 * 0x40 + 0x800;
        }
      }
      else if (Spyro.superflySpeed - Spyro.position.z < 0) {
        iVar2 = maybeSquareRoot(-(Spyro.superflySpeed - Spyro.position.z));
        Spyro.maybeHorizontalSpeedDecay = iVar2 * -0x80 + 0x1040;
      }
      else {
        iVar2 = maybeSquareRoot();
        Spyro.maybeHorizontalSpeedDecay = iVar2 * 0x40 + 0x1040;
      }
      if (0x5900 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x5900;
      }
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
    }
    iVar2 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar4 * iVar2 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    if (Spyro.airVelocityFlag == NORMAL) {
      if ((((*(uint *)(DAT_80066f38 + 4) & 0x40) != 0) &&
          (Spyro.position.z < Spyro.superflySpeed + -0x200)) && (Spyro.state == Superfly)) {
        Spyro.airVelocityFlag = FALLING;
        Spyro.field87_0x160 = 0;
      }
    }
    else if (Spyro.position.z < Spyro.superflySpeed) {
      if (Spyro.airVelocityFlag == FALLING) {
        Spyro.field87_0x160 = Spyro.field87_0x160 + 0x200;
        if (0x17ff < Spyro.field87_0x160) {
          Spyro.field87_0x160 = 0x1800;
          Spyro.airVelocityFlag = PEAK;
        }
      }
      else {
        Spyro.field87_0x160 = Spyro.field87_0x160 + -0x100;
        if (Spyro.field87_0x160 < 1) {
          Spyro.field87_0x160 = 0;
          Spyro.airVelocityFlag = NORMAL;
        }
      }
      Spyro.field42_0x88.z = Spyro.field42_0x88.z + Spyro.field87_0x160;
    }
    else {
      Spyro.airVelocityFlag = NORMAL;
    }
    FUN_8002c038();
    break;
  case DeathBurn:
    if (Spyro.airTime == 0) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      VectorClear(&VStack_60);
      VectorSubtract(&VStack_60,&VStack_60,&Spyro.trueVelocity);
      VStack_60.z = 0;
      iVar4 = VectorLength(&VStack_60,0);
      if (0x40 < iVar4) {
        VectorScale(&VStack_60,iVar4,0x40);
      }
      VStack_60.z = -0xc0;
      VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&VStack_60);
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    }
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    if (((Spyro.state == DeathBurn) && (DAT_800670fc != (code *)0x0)) && ((DAT_80067008 & 1) != 0))
    {
      iStack_40 = 0;
      iStack_3c = 0;
      auStack_38._0_4_ = 0xe;
      VectorCopy((Vec3 *)(auStack_38 + 8),&Spyro.position);
      iVar4 = RandomRangeGen(0,300);
      auStack_38._8_4_ = auStack_38._8_4_ + iVar4;
      iVar4 = RandomRangeGen(0,300);
      iStack_2c = iStack_2c + iVar4;
      iVar4 = RandomRangeGen(0,300);
      iStack_28 = iStack_28 + iVar4;
      iVar4 = (*DAT_800670fc)(1,0xd,(Vec3 *)(auStack_38 + 8),&iStack_40);
      *(undefined *)(iVar4 + 2) = 6;
      *(undefined *)(iVar4 + 10) = 0x20;
    }
    break;
  case Supercharge:
    FUN_8002b4e4(aiStack_20,1,(int)cRamffffff5c,(int)cRamffffcb48);
    iVar4 = aiStack_20[0] * 0x23 >> 7;
    if (iVar4 == 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    else if (iVar4 < 0) {
      if (0 < Spyro.maybeTurnSpeed) {
        Spyro.maybeTurnSpeed = 0;
      }
    }
    else if (Spyro.maybeTurnSpeed < 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    if (Spyro.maybeTurnSpeed < iVar4) {
      bVar1 = iVar4 < Spyro.maybeTurnSpeed + 8;
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + 8;
    }
    else {
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + -8;
      bVar1 = Spyro.maybeTurnSpeed < iVar4;
    }
    if (bVar1) {
      Spyro.maybeTurnSpeed = iVar4;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    if (0x800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch + -0x1000;
    }
    if (Spyro.rotation.Pitch < 0) {
      iVar4 = DAT_8006019c - DAT_80060198;
LAB_OVR28RiptosArena__8006ee10:
      Spyro.maybeHorizontalSpeed = DAT_8006019c + (Spyro.rotation.Pitch * iVar4) / 0x160;
    }
    else {
      if (0 < Spyro.rotation.Pitch) {
        iVar4 = DAT_800601a0 - DAT_8006019c;
        goto LAB_OVR28RiptosArena__8006ee10;
      }
      Spyro.maybeHorizontalSpeed = DAT_8006019c;
    }
    FUN_8002bd70(0x240,0x180);
    FUN_8002bdbc();
    iVar4 = Spyro.physicsVelocity.z;
    if ((Spyro.ledgeDetected == '\0') && (Spyro.airTime == 0)) {
      VectorAdd(&Spyro.trueVelocity,&Spyro.field42_0x88,&Spyro.field56_0xf0);
      return;
    }
LAB_OVR28RiptosArena__8006eea4:
    Spyro.trueVelocity.z = iVar4 + -0xc0;
  }
  return;
}



void FUN_OVR28RiptosArena__8006df58(int param_1)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  Vec3 local_88;
  int local_78 [2];
  Vec3 local_70;
  Vec3 local_60;
  Vec3 local_50;
  int local_40;
  int local_3c;
  undefined local_38 [12];
  int local_2c;
  int local_28;
  int local_20 [2];
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  param_1 = Spyro.field35_0x5c + param_1;
  switch(Spyro.state) {
  case Electrified:
    if (Spyro.airVelocityFlag != FALLING) {
      if (0x12 < param_1) {
        Spyro.field42_0x88.x = Spyro.trueVelocity.x * 0xe0;
        Spyro.field42_0x88.y = Spyro.trueVelocity.y * 0xe0;
        Spyro.field42_0x88.z = Spyro.trueVelocity.z * 0xe0;
        VectorShiftRight(&Spyro.field42_0x88,8);
      }
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
      goto LAB_OVR28RiptosArena__8006e280;
    }
    FUN_8002b36c(0xc80);
    FUN_8002bb24(0x28,8);
    FUN_8002bd70(0x140,0xc0);
    iVar4 = cosineLookup(Spyro.maybeTargetYaw);
    local_88.x = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    iVar4 = sineLookup(Spyro.maybeTargetYaw);
    local_88.y = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    VectorSubtract(&local_88,&local_88,&Spyro.trueVelocity);
    local_88.z = 0;
    iVar4 = VectorLength(&local_88,0);
    if (0x280 < iVar4) {
      VectorScale(&local_88,iVar4,0x280);
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_88);
    FUN_8002c038();
    iVar4 = Spyro.trueVelocity.z;
    if (param_1 < 0xd) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x17;
      return;
    }
    goto LAB_OVR28RiptosArena__8006eea4;
  case SuperchargeAscending:
    FUN_8002b4e4(local_78,1);
    Spyro.maybeTurnSpeed = local_78[0] >> 1;
    if (Spyro.maybeTurnSpeed < -0x19) {
      Spyro.maybeTurnSpeed = -0x19;
    }
    if (0x19 < Spyro.maybeTurnSpeed) {
      Spyro.maybeTurnSpeed = 0x19;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    FUN_8002bd70(0x240,0x180);
    iVar4 = cosineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.x = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    iVar4 = sineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.z = Spyro.trueVelocity.z;
    Spyro.field42_0x88.y = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    FUN_8002c038();
    Spyro.field82_0x14c = Spyro.field82_0x14c + 0xc;
    if (0xc0 < Spyro.field82_0x14c) {
      Spyro.field82_0x14c = 0xc0;
    }
    Spyro.trueVelocity.z = Spyro.trueVelocity.z - Spyro.field82_0x14c;
LAB_OVR28RiptosArena__8006e280:
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    break;
  case HurtBurn:
    FUN_8002b36c(0xc80);
    FUN_8002bb24(0x28,8);
    FUN_8002bd70(0x140,0xc0);
    iVar4 = cosineLookup(Spyro.maybeTargetYaw);
    local_70.x = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    iVar4 = sineLookup(Spyro.maybeTargetYaw);
    local_70.y = Spyro.maybeHorizontalSpeedDecay * iVar4 >> 0xc;
    VectorSubtract(&local_70,&local_70,&Spyro.trueVelocity);
    local_70.z = 0;
    iVar4 = VectorLength(&local_70,0);
    if (0x280 < iVar4) {
      VectorScale(&local_70,iVar4,0x280);
    }
    VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_70);
    FUN_8002c038();
    if (param_1 < 0xd) {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + 0x17;
    }
    else {
      Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
    }
    iVar4 = 0;
    if (DAT_800670fc != (code *)0x0) {
      do {
        uVar5 = rand();
        if (param_1 * 5 < (int)(uVar5 & 0xff)) {
          iVar2 = RandomRangeGen(0,0xc);
          uVar5 = Spyro.angleAsByte.yaw + 0x80 + iVar2 & 0xff;
          local_60.x = cosineLookupTable[uVar5] * 5 >> 10;
          local_60.z = 0xe;
          local_50.x = -300;
          local_50.y = 0;
          local_50.z = -200;
          local_60.y = sineLookupTable[uVar5] * 5 >> 10;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_50,&local_50);
          iVar2 = RandomRangeGen(0,0x50);
          local_50.x = local_50.x + iVar2;
          iVar2 = RandomRangeGen(0,0x50);
          local_50.y = local_50.y + iVar2;
          iVar2 = RandomRangeGen(0,0x50);
          local_50.z = local_50.z + iVar2;
          VectorAdd(&local_50,&local_50,&Spyro.position);
          iVar2 = (*DAT_800670fc)(1,0xd,&local_50,&local_60);
          *(undefined *)(iVar2 + 2) = 8;
          *(undefined *)(iVar2 + 10) = 0x20;
        }
        iVar4 = iVar4 + 1;
      } while (iVar4 < 2);
    }
    break;
  case Superfly:
  case SuperflyAscending:
  case SuperflyDescending:
    FUN_8002b694(&local_40,0x8006a144,0);
    uVar5 = local_3c * -0x14 >> 7;
    local_38._8_4_ = (Spyro.trueVelocity.z >> 3) + -0x400;
    iVar4 = local_40 * 0x14 >> 7;
    if ((int)local_38._8_4_ < 0) {
      local_38._0_4_ = Spyro.trueVelocity.x >> 3;
      local_38._4_4_ = Spyro.trueVelocity.y >> 3;
      VectorAdd((Vec3 *)local_38,(Vec3 *)local_38,&Spyro.position);
      iVar2 = FUN_8001f618(&Spyro,(Vec3 *)local_38,2);
      if (iVar2 == 0) {
        local_3c = Spyro.position.z - Vec3_8006ab70.z >> 3;
        if (10 < local_3c) {
          local_3c = 10;
        }
        uVar5 = uVar5 + local_3c;
      }
    }
    iVar2 = Spyro.superflySpeed;
    if ((currentLoadedLevel == OCEAN_SPEEDWAY) && (DAT_8006abf8 != '\0')) {
      iVar2 = 53000;
    }
    if (iVar2 - Spyro.position.z < 0x1000) {
      uVar3 = ((iVar2 - Spyro.position.z) * 800 >> 0xc) - Spyro.rotation.Pitch & 0xfff;
      if (0x800 < uVar3) {
        uVar3 = uVar3 - 0x1000;
      }
      if ((int)uVar3 < (int)uVar5) {
        uVar5 = uVar3;
      }
    }
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar4 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + uVar5 & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    if (inSpeedwayFlag < 0) {
      if (Spyro.rotation.Pitch < 0) {
        iVar2 = DAT_80060184 - DAT_80060180;
LAB_OVR28RiptosArena__8006e8f8:
        Spyro.maybeHorizontalSpeed = DAT_80060184 + (Spyro.rotation.Pitch * iVar2) / 800;
      }
      else {
        if (0 < Spyro.rotation.Pitch) {
          iVar2 = DAT_80060188 - DAT_80060184;
          goto LAB_OVR28RiptosArena__8006e8f8;
        }
        Spyro.maybeHorizontalSpeed = DAT_80060184;
      }
      Spyro.field82_0x14c =
           Spyro.field82_0x14c +
           (((Spyro.maybeHorizontalSpeed - Spyro.maybeHorizontalSpeedDecay) - Spyro.field82_0x14c) *
            0x40 >> 6);
      Spyro.maybeHorizontalSpeedDecay = Spyro.maybeHorizontalSpeedDecay + (Spyro.field82_0x14c >> 6)
      ;
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
      if (0x4b00 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x4b00;
      }
    }
    else {
      if ((currentLoadedLevel == OCEAN_SPEEDWAY) && (DAT_8006abf8 != '\0')) {
        if (53000 - Spyro.position.z < 0) {
          Spyro.maybeHorizontalSpeedDecay = 0x800;
        }
        else {
          iVar2 = maybeSquareRoot();
          Spyro.maybeHorizontalSpeedDecay = iVar2 * 0x40 + 0x800;
        }
      }
      else if (Spyro.superflySpeed - Spyro.position.z < 0) {
        iVar2 = maybeSquareRoot(-(Spyro.superflySpeed - Spyro.position.z));
        Spyro.maybeHorizontalSpeedDecay = iVar2 * -0x80 + 0x1040;
      }
      else {
        iVar2 = maybeSquareRoot();
        Spyro.maybeHorizontalSpeedDecay = iVar2 * 0x40 + 0x1040;
      }
      if (0x5900 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x5900;
      }
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
    }
    iVar2 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar4 * iVar2 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    if (Spyro.airVelocityFlag == NORMAL) {
      if ((((*(uint *)(DAT_80066f38 + 4) & 0x40) != 0) &&
          (Spyro.position.z < Spyro.superflySpeed + -0x200)) && (Spyro.state == Superfly)) {
        Spyro.airVelocityFlag = FALLING;
        Spyro.field87_0x160 = 0;
      }
    }
    else if (Spyro.position.z < Spyro.superflySpeed) {
      if (Spyro.airVelocityFlag == FALLING) {
        Spyro.field87_0x160 = Spyro.field87_0x160 + 0x200;
        if (0x17ff < Spyro.field87_0x160) {
          Spyro.field87_0x160 = 0x1800;
          Spyro.airVelocityFlag = PEAK;
        }
      }
      else {
        Spyro.field87_0x160 = Spyro.field87_0x160 + -0x100;
        if (Spyro.field87_0x160 < 1) {
          Spyro.field87_0x160 = 0;
          Spyro.airVelocityFlag = NORMAL;
        }
      }
      Spyro.field42_0x88.z = Spyro.field42_0x88.z + Spyro.field87_0x160;
    }
    else {
      Spyro.airVelocityFlag = NORMAL;
    }
    FUN_8002c038();
    break;
  case DeathBurn:
    if (Spyro.airTime == 0) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      VectorClear(&local_60);
      VectorSubtract(&local_60,&local_60,&Spyro.trueVelocity);
      local_60.z = 0;
      iVar4 = VectorLength(&local_60,0);
      if (0x40 < iVar4) {
        VectorScale(&local_60,iVar4,0x40);
      }
      local_60.z = -0xc0;
      VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&local_60);
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    }
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    if (((Spyro.state == DeathBurn) && (DAT_800670fc != (code *)0x0)) && ((DAT_80067008 & 1) != 0))
    {
      local_40 = 0;
      local_3c = 0;
      local_38._0_4_ = 0xe;
      VectorCopy((Vec3 *)(local_38 + 8),&Spyro.position);
      iVar4 = RandomRangeGen(0,300);
      local_38._8_4_ = local_38._8_4_ + iVar4;
      iVar4 = RandomRangeGen(0,300);
      local_2c = local_2c + iVar4;
      iVar4 = RandomRangeGen(0,300);
      local_28 = local_28 + iVar4;
      iVar4 = (*DAT_800670fc)(1,0xd,(Vec3 *)(local_38 + 8),&local_40);
      *(undefined *)(iVar4 + 2) = 6;
      *(undefined *)(iVar4 + 10) = 0x20;
    }
    break;
  case Supercharge:
    FUN_8002b4e4(local_20,1);
    iVar4 = local_20[0] * 0x23 >> 7;
    if (iVar4 == 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    else if (iVar4 < 0) {
      if (0 < Spyro.maybeTurnSpeed) {
        Spyro.maybeTurnSpeed = 0;
      }
    }
    else if (Spyro.maybeTurnSpeed < 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    if (Spyro.maybeTurnSpeed < iVar4) {
      bVar1 = iVar4 < Spyro.maybeTurnSpeed + 8;
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + 8;
    }
    else {
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + -8;
      bVar1 = Spyro.maybeTurnSpeed < iVar4;
    }
    if (bVar1) {
      Spyro.maybeTurnSpeed = iVar4;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    if (0x800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch + -0x1000;
    }
    if (Spyro.rotation.Pitch < 0) {
      iVar4 = DAT_8006019c - DAT_80060198;
LAB_OVR28RiptosArena__8006ee10:
      Spyro.maybeHorizontalSpeed = DAT_8006019c + (Spyro.rotation.Pitch * iVar4) / 0x160;
    }
    else {
      if (0 < Spyro.rotation.Pitch) {
        iVar4 = DAT_800601a0 - DAT_8006019c;
        goto LAB_OVR28RiptosArena__8006ee10;
      }
      Spyro.maybeHorizontalSpeed = DAT_8006019c;
    }
    FUN_8002bd70(0x240,0x180);
    FUN_8002bdbc();
    iVar4 = Spyro.physicsVelocity.z;
    if ((Spyro.ledgeDetected == '\0') && (Spyro.airTime == 0)) {
      VectorAdd(&Spyro.trueVelocity,&Spyro.field42_0x88,&Spyro.field56_0xf0);
      return;
    }
LAB_OVR28RiptosArena__8006eea4:
    Spyro.trueVelocity.z = iVar4 + -0xc0;
  }
  return;
}



void FUN_OVR28RiptosArena__8006eee0(void)

{
  int iVar1;
  
  switch(Spyro.state) {
  case Electrified:
    FUN_8002c0f4();
    FUN_8002cc88();
    if (Spyro.airVelocityFlag == FALLING) {
      FUN_8002be04();
    }
    else {
      FUN_8002db08(0xc00);
    }
    if (Spyro.nextAnimationFrame < 10) {
      Spyro.color.Alpha = 0xff;
      if ((Spyro.nextAnimationFrame & 1) == 0) {
        Spyro.color.Blue = 0x40;
        Spyro.color.Green = 0x40;
        Spyro.color.Red = 0x40;
      }
      else {
        Spyro.color.Blue = 0xff;
        Spyro.color.Green = 0xff;
        Spyro.color.Red = 0xff;
      }
    }
    break;
  default:
    goto switchD_OVR28RiptosArena__8006ef10_caseD_9;
  case SuperchargeAscending:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_80032b94();
    if ((Spyro.maybeSubstate == Supercharge) && (DAT_800670fc != (code *)0x0)) {
      (*DAT_800670fc)(1,9,0,0);
    }
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    else if ((Spyro.airVelocityFlag == NORMAL) && ((inputStates[0].current & Cross) == None)) {
      Spyro.airVelocityFlag = PEAK;
    }
    break;
  case HurtBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    break;
  case Superfly:
  case SuperflyAscending:
  case SuperflyDescending:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    break;
  case DeathBurn:
    FUN_8002c0f4();
    FUN_8002cc88();
    Spyro.color.Red = 0x20;
    Spyro.color.Green = 0x20;
    Spyro.color.Blue = 0x20;
    Spyro.color.Alpha = 0xff;
    Spyro.field17_0x28 = 0;
    return;
  case Supercharge:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    FUN_80032b94();
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(1,9,0,0);
    }
    DAT_80068398 = 0x78;
    Spyro.field17_0x28 = 0;
    DAT_80068394 = 4;
    if ((currGameState == Normal) &&
       (iVar1 = FUN_80050b20(*(undefined *)(audioBank + 0x1a),Spyro.field169_0x264), iVar1 == 0)) {
      Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 0x1a),0,4);
      Spyro.field170_0x268 = (int)*(byte *)(audioBank + 0x1a);
    }
    goto switchD_OVR28RiptosArena__8006ef10_caseD_9;
  }
  Spyro.field17_0x28 = 0;
switchD_OVR28RiptosArena__8006ef10_caseD_9:
  return;
}



void FUN_OVR28RiptosArena__8006f22c(void)

{
  if ((Spyro.currentAnimationState == 0x3a) && (Spyro.currentAnimationFrame == 0xd)) {
    PlayAudio(*(undefined *)(audioBank + 0xd),0,0);
    Spyro.field174_0x278 = (int)Spyro.currentAnimationFrame;
  }
  return;
}



void FUN_OVR28RiptosArena__8006f290(int param_1)

{
  undefined4 uVar1;
  
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case Electrified:
    uVar1 = 0;
    if (Spyro.airVelocityFlag != FALLING) goto switchD_OVR28RiptosArena__8006f2d8_caseD_3a;
    break;
  default:
    goto switchD_OVR28RiptosArena__8006f2d8_caseD_9;
  case SuperchargeAscending:
    FUN_8002ded0(0x8006a084);
    return;
  case HurtBurn:
    uVar1 = 0;
    break;
  case DeathBurn:
  case Supercharge:
switchD_OVR28RiptosArena__8006f2d8_caseD_3a:
    uVar1 = 0x8006a0c4;
  }
  FUN_8002db8c(uVar1);
switchD_OVR28RiptosArena__8006f2d8_caseD_9:
  return;
}



void switchD_OVR28RiptosArena::8006f2d8::caseD_19(void)

{
  FUN_8002ded0(0x8006a084);
  return;
}



void FUN_OVR28RiptosArena__8006f340(int param_1)

{
  undefined uVar1;
  Substate SVar2;
  CollisionType CVar3;
  
  SVar2 = Spyro.maybeSubstate;
  switch(param_1) {
  case 8:
    CVar3 = GetCollisiontType(Spyro.field72_0x114);
    Spyro.field82_0x14c = Spyro.maybeSubstate;
    if (CVar3 == Electric) {
      Spyro.maybeSubstate = Hurt;
      Spyro.airVelocityFlag = FALLING;
      VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.trueVelocity.z = 0xdc0;
      Spyro.field118_0x1bc = '\0';
    }
    else {
      Spyro.maybeSubstate = Hurt;
      Spyro.airVelocityFlag = NORMAL;
      if ((Spyro.field150_0x20c & 0x400U) == 0) {
        if (Spyro.field173_0x274 < 0) {
          VectorClear(&Spyro.trueVelocity);
        }
        else {
          Spyro.trueVelocity.x = (int)cosineLookupTable[Spyro.field173_0x274] >> 1;
          Spyro.trueVelocity.z = 0;
          Spyro.trueVelocity.y = (int)sineLookupTable[Spyro.field173_0x274] >> 1;
        }
      }
      else {
        VectorCopy(&Spyro.trueVelocity,&Spyro.field154_0x21c);
        VectorShiftUp(&Spyro.trueVelocity,6);
      }
      VectorCopy(&Spyro.field42_0x88,&Spyro.trueVelocity);
      FUN_8002db08(0xc00);
      Spyro.field118_0x1bc = '\x01';
    }
    DAT_80068390 = 0x2d;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    break;
  case 0x19:
    Spyro.maybeSubstate = Supercharge;
    Spyro.field77_0x138 = 0x60000;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = 0;
    Spyro.field118_0x1bc = '\0';
    Spyro.field119_0x1bd = '\x01';
    uVar1 = *(undefined *)(audioBank + 0x22);
    goto LAB_OVR28RiptosArena__8006f630;
  case 0x1c:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = SVar2;
    VectorCopy(&Spyro.trueVelocity,&Spyro.physicsVelocity);
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.trueVelocity.z = 0xdc0;
    Spyro.field118_0x1bc = '\0';
    DAT_8006838c = 0xf;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    goto LAB_OVR28RiptosArena__8006f620;
  case 0x21:
  case 0x22:
  case 0x23:
    if (Spyro.maybeSubstate != Superfly) {
      Spyro.maybeSubstate = Superfly;
      Spyro.airVelocityFlag = NORMAL;
      VectorClear((Vec3 *)&Spyro.field84_0x154);
      Spyro.field87_0x160 = 0;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      if (Spyro.maybeHorizontalSpeedDecay < 0x800) {
        Spyro.maybeHorizontalSpeedDecay = 0x800;
      }
      if (0x4b00 < Spyro.maybeHorizontalSpeedDecay) {
        Spyro.maybeHorizontalSpeedDecay = 0x4b00;
      }
      Spyro.field82_0x14c = 0;
      Spyro.field118_0x1bc = '\0';
      Spyro.field119_0x1bd = '\0';
    }
    break;
  case 0x3a:
    Spyro.maybeSubstate = Death;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    if (param_1 != 0x3a) {
      Spyro.field118_0x1bc = '\x01';
      return;
    }
LAB_OVR28RiptosArena__8006f620:
    uVar1 = *(undefined *)(audioBank + 0xc);
LAB_OVR28RiptosArena__8006f630:
    PlayAudio(uVar1,0,0);
    break;
  case 0x3d:
    Spyro.maybeSubstate = Supercharge;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field77_0x138 = 0x60000;
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.maybeHorizontalSpeed = 0x1e80;
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    if (((Spyro.field90_0x16c != 0) || (Spyro.field140_0x1fc != 0)) || (Spyro.field141_0x200 != 6))
    {
      Spyro.field90_0x16c = 0;
      Spyro.field140_0x1fc = 0;
      Spyro.field141_0x200 = 6;
      FUN_80030a14();
    }
  }
  return;
}



void FUN_OVR28RiptosArena__8006f7a4(void)

{
  int iVar1;
  CollisionType CVar2;
  SpyroState newSpyroState;
  
  switch(Spyro.state) {
  case Electrified:
    if (Spyro.airVelocityFlag == FALLING) {
      if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
        Spyro.field120_0x1be = '\x01';
      }
      if ((((Spyro.airTime == 0) && (0xf < Spyro.field35_0x5c)) && (Spyro.field55_0xec < 0x17)) &&
         (Spyro.field53_0xd4.x * Spyro.trueVelocity.x + Spyro.field53_0xd4.y * Spyro.trueVelocity.y
          + Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)) {
        if (Spyro.maybeHorizontalSpeed == 0) {
          newSpyroState = Idle;
          if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
            newSpyroState = Stop;
          }
        }
        else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
          newSpyroState = Walk;
          if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
            newSpyroState = StartRun;
          }
        }
        else {
          newSpyroState = Run;
        }
      }
      else if ((((inputStates[0].current & Square) == None) || (-1 < Spyro.physicsVelocity.z)) ||
              (newSpyroState = ChargeAir, Spyro.field35_0x5c < 5)) {
        if ((Spyro.field119_0x1bd != '\0') && (Spyro.field120_0x1be != '\0')) {
          if (-1 < Spyro.physicsVelocity.z) {
            return;
          }
          newSpyroState = Glide;
          if (4 < Spyro.field35_0x5c) break;
        }
        if (-1 < Spyro.physicsVelocity.z) {
          return;
        }
        if (Spyro.field35_0x5c < 5) {
          return;
        }
        if ((-0x1901 < Spyro.physicsVelocity.z) && (Spyro.field35_0x5c < 0x5b)) {
          return;
        }
        newSpyroState = Flop;
      }
    }
    else {
      if ((Spyro.takingDamageRelated & 0x20U) != 0) {
        return;
      }
      if (Spyro.field35_0x5c < 0x19) {
        return;
      }
      if (Spyro.health < 0) {
        newSpyroState = DeathPirouette;
      }
      else if (Spyro.field82_0x14c == 10) {
        newSpyroState = WaterIdle;
      }
      else if (Spyro.field82_0x14c - 0xbU < 2) {
        newSpyroState = UnderwaterIdle;
      }
      else {
        newSpyroState = Idle;
        if (Spyro.airTime != 0) {
          newSpyroState = Flop;
        }
      }
    }
    break;
  default:
    goto switchD_OVR28RiptosArena__8006f7dc_caseD_9;
  case SuperchargeAscending:
    iVar1 = FUN_8002b228();
    if (iVar1 != 0) {
      return;
    }
    if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
      Spyro.field120_0x1be = '\x01';
    }
    if ((((Spyro.field55_0xec < 0x17) ||
         (newSpyroState = Bonk,
         -1 < Spyro.trueVelocity.x * Spyro.field53_0xd4.x +
              Spyro.trueVelocity.y * Spyro.field53_0xd4.y)) &&
        ((Spyro.maybeHorizontalSpeedDecay < 0xc81 ||
         (newSpyroState = Bonk, Spyro.maybeHorizontalSpeedDecay <= Spyro.field49_0xbc << 1)))) &&
       ((Spyro.airTime != 0 || (newSpyroState = Supercharge, Spyro.field35_0x5c < 5)))) {
      if (Spyro.field120_0x1be == '\0') {
        newSpyroState = ChargeAir;
      }
      else {
        newSpyroState = Glide;
      }
      if (-1 < Spyro.trueVelocity.z) {
        return;
      }
    }
    break;
  case HurtBurn:
    if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
      Spyro.field120_0x1be = '\x01';
    }
    if (((Spyro.airTime == 0) && (0xf < Spyro.field35_0x5c)) &&
       ((Spyro.field55_0xec < 0x17 &&
        (Spyro.field53_0xd4.x * Spyro.trueVelocity.x + Spyro.field53_0xd4.y * Spyro.trueVelocity.y +
         Spyro.field53_0xd4.z * Spyro.trueVelocity.z < 0)))) {
      if (Spyro.maybeHorizontalSpeed == 0) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else if (((inputStates[0].current & Square) == None) ||
            (newSpyroState = ChargeAir, Spyro.airVelocityFlag != FALLING)) {
      if ((Spyro.field119_0x1bd == '\0') || (Spyro.field120_0x1be == '\0')) {
        if (Spyro.airVelocityFlag != FALLING) {
          return;
        }
        newSpyroState = Flop;
        if ((-0x1901 < Spyro.physicsVelocity.z) && (Spyro.field35_0x5c < 0x5b)) {
          return;
        }
      }
      else {
        newSpyroState = Glide;
        if (Spyro.airVelocityFlag != FALLING) {
          return;
        }
      }
    }
    break;
  case Superfly:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if (((iVar1 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
           ((newSpyroState = Glide, Spyro.powerFlightTime != 0 &&
            (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)))) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if ((((0x3ff < iVar1) &&
               (newSpyroState = SuperflyAscending, Spyro.airVelocityFlag == NORMAL)) &&
              (Spyro.rotation.Pitch < 0x16d)) &&
             (newSpyroState = SuperflyDescending, -0x16d < Spyro.rotation.Pitch)) {
            return;
          }
        }
      }
    }
    break;
  case SuperflyAscending:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if (((iVar1 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
           ((newSpyroState = Glide, Spyro.powerFlightTime != 0 &&
            (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)))) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if (0x3ff < iVar1) {
            if (0xff < Spyro.rotation.Pitch) {
              return;
            }
            newSpyroState = Superfly;
            if (Spyro.airVelocityFlag != NORMAL) {
              return;
            }
          }
        }
      }
    }
    break;
  case SuperflyDescending:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if (((iVar1 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
           ((newSpyroState = Glide, Spyro.powerFlightTime != 0 &&
            (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)))) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if (((0x3ff < iVar1) &&
              (newSpyroState = SuperflyAscending, Spyro.airVelocityFlag == NORMAL)) &&
             (newSpyroState = Superfly, Spyro.rotation.Pitch < -0xff)) {
            return;
          }
        }
      }
    }
    break;
  case DeathBurn:
    if (Spyro.field35_0x5c < 0x89) {
      return;
    }
    if ((-1 < inSpeedwayFlag) && (DAT_80066f8c != (code *)0x0)) {
      (*DAT_80066f8c)();
      return;
    }
    OnDeath();
    return;
  case Supercharge:
    iVar1 = FUN_8002b228();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airVelocityFlag == FALLING) {
      if (3 < Spyro.airTime) {
LAB_OVR28RiptosArena__800702f8:
        SetSpyroState(SuperchargeAscending);
        Spyro.trueVelocity.z = 0xdc0;
        Spyro.airTime = Spyro.airTime + 1;
        return;
      }
      CVar2 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar2 != Ramp) {
        Spyro.airVelocityFlag = NORMAL;
      }
LAB_OVR28RiptosArena__80070410:
      if (Spyro.maybeHorizontalSpeedDecay < 0xc81) {
        return;
      }
      newSpyroState = Bonk;
      if (Spyro.maybeHorizontalSpeedDecay <= Spyro.field49_0xbc << 1) {
        return;
      }
    }
    else {
      if ((inputStates[0].current & Cross) != None) goto LAB_OVR28RiptosArena__800702f8;
      newSpyroState = SuperchargeAscending;
      if ((Spyro.airTime < 4) &&
         ((Spyro.field55_0xec < 0x17 ||
          (newSpyroState = Flop,
          -1 < Spyro.field53_0xd4.x * Spyro.trueVelocity.x +
               Spyro.field53_0xd4.y * Spyro.trueVelocity.y)))) {
        if ((Spyro.airVelocityFlag == PEAK) && (0xf < Spyro.field35_0x5c)) {
          Spyro.airVelocityFlag = NORMAL;
        }
        if ((((inputStates[0].current & Square) != None) || (-1 < inSpeedwayFlag)) ||
           (newSpyroState = Run, Spyro.airVelocityFlag == PEAK))
        goto LAB_OVR28RiptosArena__80070410;
      }
    }
  }
  SetSpyroState(newSpyroState);
switchD_OVR28RiptosArena__8006f7dc_caseD_9:
  return;
}



void switchD_OVR28RiptosArena::8006f7dc::caseD_19(void)

{
  int iVar1;
  SpyroState newSpyroState;
  
  iVar1 = FUN_8002b228();
  if (iVar1 == 0) {
    if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
      Spyro.field120_0x1be = '\x01';
    }
    if ((((Spyro.field55_0xec < 0x17) ||
         (newSpyroState = Bonk,
         -1 < Spyro.trueVelocity.x * Spyro.field53_0xd4.x +
              Spyro.trueVelocity.y * Spyro.field53_0xd4.y)) &&
        ((Spyro.maybeHorizontalSpeedDecay < 0xc81 ||
         (newSpyroState = Bonk, Spyro.maybeHorizontalSpeedDecay <= Spyro.field49_0xbc << 1)))) &&
       ((Spyro.airTime != 0 || (newSpyroState = Supercharge, Spyro.field35_0x5c < 5)))) {
      if (Spyro.field120_0x1be == '\0') {
        newSpyroState = ChargeAir;
      }
      else {
        newSpyroState = Glide;
      }
      if (-1 < Spyro.trueVelocity.z) {
        return;
      }
    }
    SetSpyroState(newSpyroState);
  }
  return;
}



void switchD_OVR28RiptosArena::8006f7dc::caseD_21(void)

{
  int iVar1;
  SpyroState newSpyroState;
  
  iVar1 = maybeTakeDamage();
  if (iVar1 == 0) {
    if (Spyro.airTime == 0) {
      if (0x16 < Spyro.field55_0xec) {
        SetSpyroState(Flop);
      }
      if (Spyro.maybeHorizontalSpeed < 1) {
        newSpyroState = Idle;
        if (0x77f < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = Stop;
        }
      }
      else if (Spyro.maybeHorizontalSpeedDecay < 0xf01) {
        newSpyroState = Walk;
        if (0x780 < Spyro.maybeHorizontalSpeedDecay) {
          newSpyroState = StartRun;
        }
      }
      else {
        newSpyroState = Run;
      }
    }
    else {
      newSpyroState = ChargeAir;
      if ((inputStates[0].pressed & Square) == None) {
        iVar1 = FUN_8002d328(4);
        newSpyroState = ClimbIdle;
        if ((((iVar1 == 0) && (newSpyroState = Flop, Spyro.field51_0xc4 != 0)) &&
            (newSpyroState = Glide, Spyro.powerFlightTime != 0)) &&
           (newSpyroState = Hover, (inputStates[0].pressed & Triangle) == None)) {
          iVar1 = VectorLength(&Spyro.physicsVelocity,1);
          newSpyroState = Flop;
          if (((0x3ff < iVar1) &&
              (newSpyroState = SuperflyAscending, Spyro.airVelocityFlag == NORMAL)) &&
             ((Spyro.rotation.Pitch < 0x16d &&
              (newSpyroState = SuperflyDescending, -0x16d < Spyro.rotation.Pitch)))) {
            return;
          }
        }
      }
    }
    SetSpyroState(newSpyroState);
  }
  return;
}



void switchD_OVR28RiptosArena::8006f7dc::caseD_3a(void)

{
  if (0x88 < Spyro.field35_0x5c) {
    if ((inSpeedwayFlag < 0) || (DAT_80066f8c == (code *)0x0)) {
      OnDeath();
    }
    else {
      (*DAT_80066f8c)();
    }
  }
  return;
}



void FUN_OVR28RiptosArena__80070468(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  Vec3 local_28;
  
  iVar3 = DAT_80067fbc + 2 >> 2;
  if (4 < iVar3) {
    iVar3 = 4;
  }
  if (cameraState == ChaseFly) {
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_800615c4,DAT_80067ef0);
      Orbit_80067f14.Latitude = -Spyro.rotation.Pitch;
      iVar1 = Orbit_80067f14.Latitude - Orbit_80067f00.Latitude >> 2;
      Orbit_80067f14.Pitch = iVar1;
      if (0xc0 < iVar1) {
        Orbit_80067f14.Pitch = 0xc0;
      }
      if (iVar1 < -0xc0) {
        Orbit_80067f14.Pitch = -0xc0;
      }
      iVar1 = Orbit_80067f14.Pitch;
      if (Orbit_80067f14.Pitch < 0) {
        iVar1 = -Orbit_80067f14.Pitch;
      }
      if (iVar1 < 9) {
        Orbit_80067f14.Pitch = 0;
      }
      Orbit_80067f14.Yaw = -Spyro.rotation.Roll >> 2;
      InputRotateCamera(0xc0);
      FUN_8001f0bc();
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = Spyro.rotation.Yaw;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar3 * 0x14 + -0x7ff9e8d4),0);
    if (cameraOrbitAcceleration_Scale.Longitude < 0x100) {
      cameraOrbitAcceleration_Scale.Longitude = 0x100;
    }
    if (cameraOrbitAcceleration_Scale.Latitude < 0x60) {
      cameraOrbitAcceleration_Scale.Latitude = 0x60;
    }
    if (cameraOrbitAcceleration_Scale.Yaw < 0x40) {
      cameraOrbitAcceleration_Scale.Yaw = 0x40;
    }
  }
  else {
    if (cameraState != BossLock) {
      return;
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    VectorSubtract(&local_28,(Vec3 *)(DAT_80067ff0 + 0xc),&Spyro.position);
    DAT_80067ef0 = Atan2(local_28.x,local_28.y,1);
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80061628,DAT_80067ef0);
      InputRotateCamera(0x400);
      if ((currentLoadedLevel == RIPTOS_ARENA) && (Objects[1].data[6] == '\x03')) {
        iVar1 = VectorLength(&local_28,0);
        iVar2 = iVar1 + -0x800;
        if (iVar1 < 0x4800) {
          if (iVar2 < 0) {
            iVar2 = 0;
          }
          Orbit_80067f14.Latitude =
               Orbit_80061628.Latitude +
               ((0x30 - Orbit_80061628.Latitude) * (0x4000 - iVar2) >> 0xe) & 0xfff;
          Orbit_80067f14.Pitch =
               Orbit_80061628.Pitch + ((-0xa0 - Orbit_80061628.Pitch) * (0x4000 - iVar2) >> 0xe) &
               0xfff;
        }
      }
    }
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar3 * 0x14 + -0x7ff9e8d4),0);
  }
  OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar3 * 0x14 + -0x7ff9e848),0);
  OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
  OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
                    // WARNING: Read-only address (ram,0x80067f04) is written
  return;
}



void FUN_OVR28RiptosArena__800707f8(void)

{
  FUN_8001db58();
  UpdateCameraOrbitPhysics();
  return;
}



void FUN_OVR28RiptosArena__80070820(int param_1)

{
  if (param_1 == 3) {
    DAT_80067fc5 = 0;
  }
  else {
    if (param_1 != 0xd) {
      return;
    }
    DAT_80067fc5 = 1;
  }
  DAT_80067fc4 = 0;
  INT_80067ed4 = 0;
  DAT_80067fc6 = 1;
  DAT_80067fc9 = 0;
  DAT_80067ee0 = 0;
  VectorCopy(&Vec3_80067ee4,&Spyro.position);
  DAT_80067ef0 = Spyro.rotation.Yaw;
  FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
  FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
  OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
  return;
}



void FUN_OVR28RiptosArena__80070928(void)

{
  CameraState CVar1;
  
  if (cameraState == ChaseFly) {
    CVar1 = DAT_80067fec;
    if (((DAT_80067fec == Align) &&
        (((inputStates[0].current & Triangle) == None ||
         (CVar1 = Look, Spyro.field123_0x1c1 == '\0')))) &&
       (((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) == None ||
        ((((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
          ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)) ||
         (CVar1 = QuickAlign, Spyro.field162_0x240 != 0)))))) {
      CVar1 = cameraStateLookup[Spyro.state];
      if (CVar1 == ChaseFly) {
        return;
      }
      if (CVar1 == Align) {
        CVar1 = Passive;
      }
    }
  }
  else {
    if (cameraState != BossLock) {
      return;
    }
    if ((((inputStates[0].current & Triangle) == None) ||
        (CVar1 = Look, Spyro.field123_0x1c1 == '\0')) &&
       ((((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) == None ||
         (((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
          ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)))) ||
        (CVar1 = QuickAlign, Spyro.field162_0x240 != 0)))) {
      if (DAT_80067fec == Align) {
        CVar1 = cameraStateLookup[Spyro.state];
      }
      else {
        CVar1 = DAT_80067fec;
        if (DAT_80067fec == BossLock) {
          return;
        }
      }
    }
  }
  SetCameraState(CVar1);
  return;
}



void FUN_OVR28RiptosArena__80070af8(void)

{
  hudExtra1.field1_0x1 = 3;
  UpdateHUDElement(&hudExtra1,riptoHPClone_);
  return;
}



void FUN_OVR28RiptosArena__80070b30(void)

{
  bool bVar1;
  undefined *ptrPrimitive;
  short sVar2;
  short sVar3;
  uint uVar4;
  uint *puVar5;
  int iVar6;
  int iVar7;
  undefined4 *puVar8;
  ushort left;
  uint unaff_s5;
  undefined *puVar9;
  uint unaff_s7;
  undefined4 local_30;
  undefined4 local_2c;
  
  if (hudExtra1.displayState != Hidden) {
    puVar9 = Objects[2].data;
    iVar6 = *(int *)(puVar9 + 0x84);
    if (iVar6 == 1) {
      unaff_s7 = 0xa000;
    }
    else if (iVar6 < 2) {
      if (iVar6 == 0) {
        unaff_s7 = 0xa0;
      }
    }
    else if (iVar6 == 2) {
      unaff_s7 = 0xa00000;
    }
    iVar6 = *(int *)(puVar9 + 0x80);
    if (iVar6 == 1) {
      unaff_s5 = 0xa000;
    }
    else if (iVar6 < 2) {
      if (iVar6 == 0) {
        unaff_s5 = 0xa0;
      }
    }
    else if (iVar6 == 2) {
      unaff_s5 = 0xa00000;
    }
    if ((hudExtra1.displayState == Appearing) ||
       (left = 0x28, hudExtra1.displayState == Disappearing)) {
      iVar7 = (int)hudExtra1.displayTime;
      iVar6 = iVar7;
      if (iVar7 < 0) {
        iVar6 = 0;
      }
      if (0x2f < iVar7) {
        iVar6 = 0x2f;
      }
      if (hudExtra1.displayState == Appearing) {
        left = (ushort)(byte)(&DAT_80063430)[iVar6 >> 1];
      }
      else {
        left = (ushort)(byte)(&DAT_80063448)[iVar6 >> 1];
      }
    }
    SetTPage(0x18);
    DrawDarkTransparentRect(left,left + 0xc,0x48,0xa4);
    ptrPrimitive = primitiveBuffer_next;
    *(undefined4 *)(primitiveBuffer_next + 4) = 0x2820c0c0;
    iVar6 = (riptoHPClone_ * 0x58) / riptoMaxHP;
    if (riptoMaxHP == 0) {
      trap(0x1c00);
    }
    if ((riptoMaxHP == -1) && (riptoHPClone_ * 0x58 == -0x80000000)) {
      trap(0x1800);
    }
    *(ushort *)(ptrPrimitive + 8) = left + 2;
    *(ushort *)(ptrPrimitive + 0x10) = left + 2;
    *(undefined4 *)ptrPrimitive = 0x5000000;
    *(ushort *)(ptrPrimitive + 0xc) = left + 10;
    *(ushort *)(ptrPrimitive + 0x14) = left + 10;
    *(undefined2 *)(ptrPrimitive + 0x12) = 0xa2;
    *(undefined2 *)(ptrPrimitive + 0x16) = 0xa2;
    sVar2 = 0xa2 - (short)iVar6;
    *(short *)(ptrPrimitive + 10) = sVar2;
    *(short *)(ptrPrimitive + 0xe) = sVar2;
    PrimitiveBuffer_Insert((uint *)ptrPrimitive);
    primitiveBuffer_next = ptrPrimitive + 0x18;
    if ((byte)puVar9[6] < 4) {
      DAT_80067690 = DAT_80067690 + -1;
      if (DAT_80067690 < 1) {
        uVar4 = rand();
        DAT_80067690 = (uVar4 & 0x3f) + 0x24;
      }
      iVar6 = 1;
      if ((DAT_80067690 < 6) && (iVar6 = DAT_80067690, 3 < DAT_80067690)) {
        iVar6 = 7 - DAT_80067690;
      }
      sVar2 = FUN_80052498(&hudExtra1,0,0xec);
      RenderSprite(&HUDSpyroHeadStaticInfo,0x1ae,sVar2 + 0xcf,9);
      sVar2 = FUN_80052498(&hudExtra1,0,0xec);
      RenderSprite(HUDSpyroHeadBlinkAnimInfo + iVar6,(byte)(&DAT_800634e8)[iVar6] + 0x1ae,
                   sVar2 + (byte)(&DAT_800634f4)[iVar6] + 0xcf,10);
      if ((byte)puVar9[6] < 4) {
        iVar6 = 0;
        sVar2 = 0x164;
        do {
          sVar3 = FUN_80052498(&hudExtra1,0,0xec);
          RenderSprite(&SpriteInfo_8006368c,sVar2,sVar3 + 0xec,0x13);
          sVar3 = FUN_80052498(&hudExtra1,0,0xec);
          puVar5 = RenderSprite(&SpriteInfo_80063688,sVar2,sVar3 + 0xec,0x13);
          if (iVar6 < DAT_80067084) {
            local_30 = unaff_s5;
            if (2 < DAT_80067084) {
              puVar8 = &local_30;
              do {
                uVar4 = (uint)*(byte *)puVar8;
                bVar1 = uVar4 < 0x100;
                if (uVar4 != 0) {
                  uVar4 = uVar4 + (*(short *)((int)cosineLookupTable +
                                             (DAT_80067008 * 0x24 & 0x1fcU)) * 0x2d >> 0xb);
                  bVar1 = (int)uVar4 < 0x100;
                }
                if (!bVar1) {
                  uVar4 = 0xff;
                }
                if ((int)uVar4 < 0) {
                  uVar4 = 0;
                }
                *(byte *)puVar8 = (byte)uVar4;
                puVar8 = (undefined4 *)((int)puVar8 + 1);
              } while ((int)puVar8 < (int)&local_30 + 3);
            }
            uVar4 = local_30 | 0x64000000;
          }
          else {
            uVar4 = 0x64303030;
          }
          puVar5[1] = uVar4;
          iVar6 = iVar6 + 1;
          sVar2 = sVar2 + 0x28;
        } while (iVar6 < 3);
      }
    }
    if (DAT_80067088 < 3) {
      if (DAT_80067008 == (DAT_80067008 / 5) * 5) {
        if (DAT_800670f4 == '\0') {
          uVar4 = rand();
          if ((uVar4 & 0xf) == 0) {
            DAT_800670f4 = '\x01';
          }
        }
        else {
          DAT_800670f4 = '\0';
        }
      }
      if (DAT_800670f4 == '\0') {
        iVar6 = 0;
      }
      else {
        iVar6 = DAT_80067008 % 5 + 1;
        if (3 < iVar6) {
          iVar6 = 6 - iVar6;
        }
      }
      sVar2 = FUN_80052498(&hudExtra1,0,0xec);
      RenderSprite((SpriteInfo *)(iVar6 * 4 + -0x7ff9c970),0x20,sVar2 + 0xce,0x12);
    }
    else {
      sVar2 = FUN_80052498(&hudExtra1,0,0xec);
      puVar5 = RenderSprite((SpriteInfo *)&DAT_800636a0,0x20,sVar2 + 0xce,0x12);
      *(undefined2 *)((int)puVar5 + 0xe) = 0x5c20;
    }
    iVar6 = 0;
    if ((byte)puVar9[6] < 4) {
      sVar2 = 0x28;
      do {
        sVar3 = FUN_80052498(&hudExtra1,0,0xec);
        RenderSprite(&SpriteInfo_8006368c,sVar2,sVar3 + 0xec,0x13);
        sVar3 = FUN_80052498(&hudExtra1,0,0xec);
        puVar5 = RenderSprite(&SpriteInfo_80063688,sVar2,sVar3 + 0xec,0x13);
        if (iVar6 < DAT_80067088) {
          local_2c = unaff_s7;
          if (2 < DAT_80067088) {
            puVar8 = &local_2c;
            do {
              uVar4 = (uint)*(byte *)puVar8;
              bVar1 = uVar4 < 0x100;
              if (uVar4 != 0) {
                uVar4 = uVar4 + (*(short *)((int)cosineLookupTable + (DAT_80067008 * 0x24 & 0x1fcU))
                                 * 0x2d >> 0xb);
                bVar1 = (int)uVar4 < 0x100;
              }
              if (!bVar1) {
                uVar4 = 0xff;
              }
              if ((int)uVar4 < 0) {
                uVar4 = 0;
              }
              *(byte *)puVar8 = (byte)uVar4;
              puVar8 = (undefined4 *)((int)puVar8 + 1);
            } while ((int)puVar8 < (int)&local_2c + 3);
          }
          uVar4 = local_2c | 0x64000000;
        }
        else {
          uVar4 = 0x64303030;
        }
        puVar5[1] = uVar4;
        iVar6 = iVar6 + 1;
        sVar2 = sVar2 + 0x28;
      } while (iVar6 < 3);
    }
  }
  return;
}


/*
Unable to decompile 'FUN_OVR28RiptosArena__80071258'
Cause: Exception while decompiling OVR28RiptosArena::80071258: process: timeout

*/

/*
Unable to decompile 'FUN_OVR28RiptosArena__8007c808'
Cause: Exception while decompiling OVR28RiptosArena::8007c808: process: timeout

*/

/*
Unable to decompile 'FUN_OVR28RiptosArena__8007f76c'
Cause: Exception while decompiling OVR28RiptosArena::8007f76c: process: timeout

*/


Vec3 ** FUN_OVR28RiptosArena__800881b0(int param_1,int **param_2)

{
  byte bVar1;
  short sVar2;
  bool bVar3;
  Object *pOVar4;
  char cVar5;
  undefined uVar6;
  undefined2 uVar7;
  Vec3 **ppVVar8;
  undefined4 uVar9;
  int iVar10;
  undefined4 *puVar11;
  int iVar12;
  uint uVar13;
  Object *pOVar14;
  int iVar15;
  Spyro *pSVar16;
  int *piVar17;
  Vec3 *pVVar18;
  Vec3 *pVVar19;
  undefined *puVar20;
  int iVar21;
  Vec3 local_c8;
  undefined local_b8 [16];
  undefined local_a8 [8];
  undefined2 local_a0;
  undefined local_98;
  char local_97;
  undefined local_96;
  Mat33 MStack_90;
  undefined local_70;
  byte local_6f;
  byte local_6e;
  Vec3 local_68 [5];
  
  ppVVar8 = (Vec3 **)FUN_80041290();
  if (ppVVar8 == (Vec3 **)0x0) {
    return (Vec3 **)0x0;
  }
  pVVar18 = *ppVVar8;
  MEMSET((int *)ppVVar8,0,0x58);
  *ppVVar8 = pVVar18;
  MEMSET(&pVVar18->x,0,0x18);
  *(short *)((int)ppVVar8 + 0x36) = (short)param_1;
  if ((param_2 == (int **)0x0) ||
     (uVar13 = ((int)param_2 - (int)Objects) * -0x45d1745d >> 3, 0xff < uVar13)) {
    *(undefined *)((int)ppVVar8 + 0x3a) = 0xff;
  }
  else {
    *(char *)((int)ppVVar8 + 0x3a) = (char)uVar13;
  }
  FUN_800375c8(ppVVar8);
  if (param_1 == 0x21d) {
LAB_OVR28RiptosArena__80088c28:
    pVVar18 = *ppVVar8;
    VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
    FUN_80041438(ppVVar8);
    pVVar18->x = 0x18;
    *(undefined *)((int)ppVVar8 + 0x57) = 0x30;
    *(undefined *)(ppVVar8 + 0x15) = 0;
    *(undefined *)((int)ppVVar8 + 0x55) = 0;
    *(undefined *)((int)ppVVar8 + 0x56) = 0;
    *(undefined *)((int)ppVVar8 + 0x4f) = 100;
    *(undefined *)((int)ppVVar8 + 0x47) = 0;
    iVar15 = rand();
    *(char *)((int)ppVVar8 + 0x45) = (char)iVar15;
    iVar15 = rand();
    *(char *)((int)ppVVar8 + 0x46) = (char)iVar15;
    return ppVVar8;
  }
  if (param_1 < 0x21e) {
    if (param_1 == 0xd3) {
LAB_OVR28RiptosArena__800883c0:
      pVVar18 = *ppVVar8;
      if (*(short *)((int)ppVVar8 + 0x36) == 0x10) {
        iVar15 = 10;
        if (lives < 4) {
          iVar15 = 7;
        }
        else if (lives < 7) {
          iVar15 = 9;
        }
        if ((lives < 3) && (9 < riptoPhase1DeathCounter)) {
          if (lives == 1) {
            iVar15 = 3;
          }
          else if (lives < 2) {
            if (lives == 0) {
              iVar15 = 2;
            }
          }
          else if (lives == 2) {
            iVar15 = 5;
          }
        }
        fodderCountTillNextLifeButterfly = fodderCountTillNextLifeButterfly + 1;
        if (iVar15 <= fodderCountTillNextLifeButterfly) {
          fodderCountTillNextLifeButterfly = 0;
          *(undefined2 *)((int)ppVVar8 + 0x36) = 0xd3;
        }
      }
      FUN_80041438(ppVVar8);
      VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
      ppVVar8[5] = (Vec3 *)&ppVVar8[5][0x2a].z;
      VectorCopy(pVVar18,(Vec3 *)(ppVVar8 + 3));
      ppVVar8[7] = (Vec3 *)0xffffffff;
      *(undefined *)((int)ppVVar8 + 0x47) = 2;
      *(undefined2 *)((int)&pVVar18[1].x + 2) = 0x708;
      *(undefined *)((int)&pVVar18[1].y + 1) = 0;
      iVar15 = rand();
      *(byte *)((int)&pVVar18[1].y + 2) = (byte)iVar15 & 0xfc;
      return ppVVar8;
    }
    if (param_1 < 0xd4) {
      if (param_1 == 0x78) {
        pVVar18 = *ppVVar8;
        FUN_80041438(ppVVar8);
        *(undefined *)((int)ppVVar8 + 0x49) = 0;
        *(undefined2 *)&pVVar18->x = 0;
        *(undefined2 *)&pVVar18->z = 0;
        *(undefined2 *)((int)&pVVar18->y + 2) = 0;
        *(undefined2 *)&pVVar18->y = 0;
        *(undefined *)((int)&pVVar18[1].x + 1) = 0x78;
        pVVar18[1].y = 0;
        pVVar18[1].z = 0;
        if (param_2 == (int **)0x0) {
          uVar13 = Spyro.angleAsByte.yaw - 0x80 & 0xff;
          local_c8.x = cosineLookupTable[uVar13] * 0x7d >> 9;
          local_c8.z = 1000;
          local_c8.y = sineLookupTable[uVar13] * 0x7d >> 9;
          VectorAdd((Vec3 *)(ppVVar8 + 3),&Spyro.position,&local_c8);
        }
        else {
          VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
        }
        *(undefined *)((int)&pVVar18->x + 2) = 0xff;
        return ppVVar8;
      }
      if (param_1 < 0x79) {
        if (param_1 == 0x10) goto LAB_OVR28RiptosArena__800883c0;
      }
      else {
        if (param_1 == 0x9a) goto LAB_OVR28RiptosArena__80088c28;
        if (param_1 == 0x9e) {
          pVVar18 = *ppVVar8;
          *(undefined *)(ppVVar8 + 0x13) = 0x20;
          *(undefined *)((int)ppVVar8 + 0x4e) = 0x20;
          VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
          FUN_80041438(ppVVar8);
          uVar9 = randomRangeGen(300,0x834);
          uVar13 = rand();
          iVar15 = cosineLookup(uVar9);
          iVar10 = cosineLookup(uVar13 & 0xfff);
          *(short *)&pVVar18->x = (short)((iVar15 >> 6) * iVar10 * 0x96 >> 0x12);
          iVar15 = cosineLookup(uVar9);
          iVar10 = sineLookup(uVar13 & 0xfff);
          *(short *)((int)&pVVar18->x + 2) = (short)((iVar15 >> 6) * iVar10 * 0x96 >> 0x12);
          iVar15 = sineLookup(uVar9);
          *(short *)&pVVar18->y = (short)(iVar15 * 0xb4 >> 0xc);
          iVar15 = rand();
          *(char *)(ppVVar8 + 0x11) = (char)iVar15;
          iVar15 = rand();
          *(char *)((int)ppVVar8 + 0x45) = (char)iVar15;
          iVar15 = rand();
          *(char *)((int)ppVVar8 + 0x46) = (char)iVar15;
          ppVVar8[3] = (Vec3 *)(&ppVVar8[3]->x + *(short *)&pVVar18->x);
          ppVVar8[4] = (Vec3 *)(&ppVVar8[4]->x + *(short *)((int)&pVVar18->x + 2));
          ppVVar8[5] = (Vec3 *)((int)&ppVVar8[5]->x + *(short *)&pVVar18->y * 2);
          iVar15 = rand();
          *(ushort *)((int)&pVVar18->y + 2) = ((ushort)iVar15 & 0x1f) - 0x10;
          iVar15 = rand();
          *(ushort *)&pVVar18->z = ((ushort)iVar15 & 0x1f) - 0x10;
          iVar15 = rand();
          *(ushort *)((int)&pVVar18->z + 2) = ((ushort)iVar15 & 0x1f) - 0x10;
          uVar7 = randomRangeGen(0x5a,0x96);
          *(undefined2 *)&pVVar18[1].x = uVar7;
          *(undefined2 *)((int)&pVVar18[1].x + 2) = 1;
          *(undefined2 *)((int)&pVVar18[1].y + 2) = 0;
          return ppVVar8;
        }
      }
    }
    else {
      if (param_1 == 0x146) {
        pVVar18 = *ppVVar8;
        VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
        FUN_80041438(ppVVar8);
        *(undefined2 *)&pVVar18->x = 0x10;
        *(undefined *)((int)ppVVar8 + 0x57) = 0x3b;
        *(undefined *)(ppVVar8 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar8 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar8 + 0x56) = 0;
        sVar2 = *(short *)((int)param_2 + 0x36);
        if ((sVar2 == 0x198) || (sVar2 == 0x2c2)) {
          *(undefined *)((int)&pVVar18->x + 2) = 1;
          *(undefined *)((int)&pVVar18->x + 3) = 1;
          uVar6 = 0x7f;
        }
        else {
          if (sVar2 == 0x270) {
            *(undefined *)((int)&pVVar18->x + 2) = 2;
            *(undefined *)(ppVVar8 + 0x15) = 0xe0;
            *(undefined *)((int)ppVVar8 + 0x55) = 0xe0;
            *(undefined *)((int)ppVVar8 + 0x56) = 0xe0;
            *(undefined *)((int)ppVVar8 + 0x57) = 0x3b;
          }
          else {
            *(undefined *)((int)&pVVar18->x + 2) = 0;
          }
          uVar6 = 0x60;
          *(undefined *)((int)&pVVar18->x + 3) = 0;
        }
        *(undefined *)((int)ppVVar8 + 0x4f) = uVar6;
        *(undefined *)((int)ppVVar8 + 0x47) = 0xfe;
        uVar9 = Vec2OctagonalDistanceApproximation((Vec2 *)(ppVVar8 + 3),(Vec2 *)&cameraPosition);
        cVar5 = Atan2(uVar9,cameraPosition.z - (int)ppVVar8[5],0);
        *(char *)((int)ppVVar8 + 0x45) = cVar5 + -0x40;
        uVar6 = Atan2(cameraPosition.x - (int)ppVVar8[3],cameraPosition.y - (int)ppVVar8[4],0);
        *(undefined *)((int)ppVVar8 + 0x46) = uVar6;
        return ppVVar8;
      }
      if (param_1 < 0x147) {
        if (param_1 == 0x104) {
          FUN_80041438(ppVVar8);
          *(undefined *)(ppVVar8 + 0x15) = 2;
          if (param_2 != (int **)0x0) {
            (*ppVVar8)->x = (int)param_2;
            VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
            *(undefined *)((int)ppVVar8 + 0x4a) = 10;
            *(undefined *)(ppVVar8 + 0x13) = 8;
            ppVVar8[5] = (Vec3 *)&ppVVar8[5][0x55].y;
            return ppVVar8;
          }
          ppVVar8[7] = (Vec3 *)0xffffffff;
          return ppVVar8;
        }
      }
      else {
        if (param_1 == 0x1e2) {
          pVVar18 = *ppVVar8;
          VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
          FUN_80041438(ppVVar8);
          pVVar18->x = 0x10;
          *(undefined *)((int)ppVVar8 + 0x57) = 0x3f;
          *(undefined *)(ppVVar8 + 0x15) = 0x80;
          *(undefined *)((int)ppVVar8 + 0x55) = 0x40;
          *(undefined *)((int)ppVVar8 + 0x56) = 0;
          iVar15 = rand();
          *(char *)((int)ppVVar8 + 0x45) = (char)iVar15;
          iVar15 = rand();
          *(char *)((int)ppVVar8 + 0x46) = (char)iVar15;
          *(undefined *)((int)ppVVar8 + 0x4f) = 0x46;
          *(undefined *)((int)ppVVar8 + 0x47) = 4;
          return ppVVar8;
        }
        if (param_1 == 0x1e3) {
          pVVar18 = *ppVVar8;
          FUN_80041438(ppVVar8);
          *(undefined *)(ppVVar8 + 0x13) = 0x40;
          *(undefined *)((int)ppVVar8 + 0x4e) = 0x40;
          if (param_2 == (int **)0x0) {
            local_c8.x = 0x1b8;
            local_c8.y = 0;
            local_c8.z = 0;
            if (cameraState == Look) {
              pVVar19 = (Vec3 *)(ppVVar8 + 3);
              VectorCopy(pVVar19,&cameraPosition);
              local_98 = 0;
              local_97 = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
              local_96 = (undefined)((ushort)VectorShort_80067ec8.Z >> 4);
              BuildRotationMatrix(&local_98,(Mat33 *)local_b8,(Mat33 *)0x0);
              MatrixMultVector((Mat33 *)local_b8,&local_c8,&local_c8);
              VectorAdd(pVVar19,pVVar19,&local_c8);
              VectorAdd(pVVar19,pVVar19,&local_c8);
              pSVar16 = (Spyro *)&local_c8;
            }
            else {
              VectorCopy((Vec3 *)(ppVVar8 + 3),&cameraPosition);
              local_70 = 0;
              local_6f = Spyro.angleAsByte.roll;
              if ((Spyro.airTime == 0) && (0xf8 < (byte)(Spyro.angleAsByte.roll - 4))) {
                local_6f = 0;
              }
              local_6e = Spyro.angleAsByte.yaw;
              BuildRotationMatrix(&local_70,&MStack_90,(Mat33 *)0x0);
              MatrixMultVector(&MStack_90,&local_c8,&local_c8);
              ppVVar8[3] = (Vec3 *)0x1f4;
              ppVVar8[4] = (Vec3 *)0x0;
              ppVVar8[5] = (Vec3 *)0x0;
              MatrixMultVector(&MStack_90,(Vec3 *)(ppVVar8 + 3),(Vec3 *)(ppVVar8 + 3));
              pSVar16 = &Spyro;
            }
            VectorAdd((Vec3 *)(ppVVar8 + 3),(Vec3 *)(ppVVar8 + 3),&pSVar16->position);
            iVar15 = VectorLength(&local_c8,0);
            uVar6 = Atan2(iVar15,local_c8.z,0);
            *(undefined *)((int)ppVVar8 + 0x45) = uVar6;
            uVar6 = Atan2(local_c8.x,local_c8.y,0);
            *(undefined *)((int)ppVVar8 + 0x46) = uVar6;
            pOVar4 = DAT_800670bc;
            pOVar14 = Objects;
            *(short *)&pVVar18->x = (short)local_c8.x;
            *(short *)((int)&pVVar18->x + 2) = (short)local_c8.y;
            *(short *)&pVVar18->y = (short)local_c8.z;
            for (; (pOVar14 < pOVar4 && (pOVar14->type != 0x407)); pOVar14 = pOVar14 + 1) {
            }
            if (pOVar14 != (Object *)0x0) {
              piVar17 = (int *)pOVar14->data;
              iVar15 = *piVar17;
              *piVar17 = iVar15 + 0x144;
              if (0x797 < iVar15 + 0x144) {
                *piVar17 = 0;
              }
              puVar11 = (undefined4 *)((int)piVar17 + *piVar17 + 0xc);
              pVVar18->z = (int)puVar11;
              *puVar11 = 0;
              MemCopy(&pVVar18[1].y,piVar17 + 1,8);
            }
            *(undefined *)((int)&pVVar18->y + 3) = 0x6e;
            *(undefined *)((int)ppVVar8 + 0x4b) = 1;
            FUN_80050648(ppVVar8,0,0);
            return ppVVar8;
          }
          VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
          *(undefined *)((int)&pVVar18->y + 3) = 0x30;
          *(undefined *)((int)ppVVar8 + 0x4f) = 0x7f;
          *(char *)(ppVVar8 + 0x15) = (char)((int)((uint)*(byte *)((int)&pVVar18->y + 3) * 3) >> 1);
          uVar6 = *(undefined *)((int)&pVVar18->y + 3);
          *(undefined *)((int)ppVVar8 + 0x56) = 0;
          *(undefined *)((int)ppVVar8 + 0x57) = 0x3f;
          *(undefined *)((int)ppVVar8 + 0x55) = uVar6;
          return ppVVar8;
        }
      }
    }
  }
  else {
    if (param_1 == 0x2b9) {
      pVVar18 = *ppVVar8;
      iVar15 = randomRangeGen(0,100);
      pOVar14 = Objects;
      pVVar18[1].y = (int)(Objects + 2);
      puVar20 = pOVar14[2].data;
      FUN_80041438(ppVVar8);
      if (param_2 != (int **)0x0) {
        VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
      }
      if ((byte)puVar20[6] < 3) {
        if (iVar15 < 0xf) {
LAB_OVR28RiptosArena__800892e8:
          pVVar18[1].z = 2;
          goto LAB_OVR28RiptosArena__80089308;
        }
        if (0x31 < iVar15) {
          pVVar18[1].z = 0;
          goto LAB_OVR28RiptosArena__80089308;
        }
      }
      else {
        if (iVar15 < 0x21) goto LAB_OVR28RiptosArena__800892e8;
        if (0x42 < iVar15) {
          pVVar18[1].z = 0;
          goto LAB_OVR28RiptosArena__80089308;
        }
      }
      pVVar18[1].z = 1;
LAB_OVR28RiptosArena__80089308:
      *(undefined2 *)(ppVVar8 + 0xe) = 200;
      *(undefined *)(ppVVar8 + 0x13) = 0x50;
      *(undefined *)((int)ppVVar8 + 0x4e) = 0x50;
      return ppVVar8;
    }
    if (param_1 < 0x2ba) {
      if (param_1 == 0x26a) {
        pVVar18 = *ppVVar8;
        VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
        *(undefined *)((int)ppVVar8 + 0x45) = 0x40;
        *(undefined *)(ppVVar8 + 0x13) = 0x3c;
        *(undefined *)((int)ppVVar8 + 0x4e) = 0x3c;
        *(undefined *)((int)ppVVar8 + 0x4a) = 0xff;
        *(undefined *)((int)ppVVar8 + 0x46) = 0;
        *(undefined *)(ppVVar8 + 0x11) = 0;
        *(undefined *)((int)ppVVar8 + 0x4f) = 0x20;
        FUN_80041438(ppVVar8);
        pVVar18->x = 0x10;
        return ppVVar8;
      }
      if (param_1 < 0x26b) {
        if (param_1 == 0x262) goto LAB_OVR28RiptosArena__80088c28;
      }
      else {
        if (param_1 == 0x2a1) {
          pVVar18 = *ppVVar8;
          VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
          uVar6 = randomRangeGen(0,0xff);
          *(undefined *)((int)ppVVar8 + 0x46) = uVar6;
          FUN_80041438(ppVVar8);
          uVar13 = randomRangeGen(0x78,0xb4);
          pVVar18->x = uVar13;
          *(char *)((int)ppVVar8 + 0x45) =
               (char)((int)((uint)(ushort)sineLookupTable[(uVar13 & 0x3f) * 4] << 0x10) >> 0x17) +
               '@';
          return ppVVar8;
        }
        if (param_1 == 0x2b7) {
LAB_OVR28RiptosArena__80088ccc:
          pVVar18 = *ppVVar8;
          puVar20 = Objects[2].data;
          VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
          ppVVar8[5] = (Vec3 *)&ppVVar8[5][0x42].z;
          FUN_80041438(ppVVar8);
          *(undefined *)((int)ppVVar8 + 0x4a) = 0xff;
          iVar10 = Vec2OctagonalDistanceApproximation((Vec2 *)(Vec3 *)(ppVVar8 + 3),(Vec2 *)&Spyro);
          iVar15 = iVar10 / 400 + 4;
          if (puVar20[6] == '\x03') {
            iVar15 = iVar10 / 300;
          }
          iVar21 = 500;
          if (iVar10 < 7000) {
            uVar9 = Atan2((int)ppVVar8[3] - Spyro.position.x,(int)ppVVar8[4] - Spyro.position.y,0);
            iVar12 = maybeAngularDistance256(Spyro.angleAsByte.yaw,uVar9);
            if ((0x30 < iVar12) && ((byte)puVar20[6] < 3)) {
              iVar15 = iVar15 >> 1;
            }
          }
          iVar12 = 0;
          bVar1 = riptoPhase2DeathCounter;
          if ((byte)puVar20[6] < 3) {
            bVar1 = riptoPhase1DeathCounter;
          }
          bVar3 = true;
          if (2 < bVar1) {
            iVar12 = bVar1 - 2;
            bVar3 = iVar12 < 0xb;
          }
          if (!bVar3) {
            iVar12 = 10;
          }
          if (iVar12 != 0) {
            iVar15 = iVar15 * (iVar12 * -0x14 + 0x100) >> 8;
          }
          if (puVar20[6] == '\x04') {
            iVar21 = 0x177;
            iVar15 = iVar10 / 500;
          }
          *(short *)((int)&pVVar18->z + 2) = (short)iVar21;
          VectorCopy((Vec3 *)local_b8,&Spyro.physicsVelocity);
          local_b8._0_4_ = local_b8._0_4_ * iVar15;
          local_b8._4_4_ = local_b8._4_4_ * iVar15;
          local_b8._8_4_ = local_b8._8_4_ * iVar15;
          VectorShiftRight((Vec3 *)local_b8,6);
          VectorAdd((Vec3 *)local_b8,(Vec3 *)local_b8,&Spyro.position);
          pVVar19 = (Vec3 *)(local_b8 + 0x10);
          VectorSubtract(pVVar19,(Vec3 *)local_b8,(Vec3 *)(ppVVar8 + 3));
          iVar15 = VectorLength(pVVar19,1);
          VectorScale(pVVar19,iVar15,iVar21);
          *(undefined2 *)&pVVar18->x = local_a8._0_2_;
          sVar2 = *(short *)&pVVar18->x;
          *(undefined2 *)((int)&pVVar18->x + 2) = local_a8._4_2_;
          uVar6 = Atan2((int)sVar2,(int)(short)local_a8._4_2_,0);
          *(undefined *)((int)ppVVar8 + 0x46) = uVar6;
          if (2 < (byte)puVar20[6]) {
            local_68[0].x = (int)*(short *)&pVVar18->x;
            *(undefined2 *)&pVVar18->y = local_a0;
            local_68[0].y = (int)*(short *)((int)&pVVar18->x + 2);
            local_68[0].z = (int)*(short *)&pVVar18->y;
            iVar15 = VectorLength(local_68,0);
            uVar6 = Atan2(iVar15,local_68[0].z,0);
            *(undefined *)((int)ppVVar8 + 0x45) = uVar6;
          }
          if (*(short *)((int)ppVVar8 + 0x36) == 0x2eb) {
            iVar15 = Vec2OctagonalDistanceApproximation
                               ((Vec2 *)(Vec3 *)(ppVVar8 + 3),(Vec2 *)&Spyro);
            iVar10 = maybeNegativeAngularDistance256
                               (*(undefined *)((int)param_2 + 0x46),
                                *(undefined *)(*(int *)(puVar20 + 0x48) + 0x46));
            uVar9 = 0xffffffff;
            if (iVar10 < 0) {
              uVar9 = 1;
            }
            *(undefined4 *)(puVar20 + 0x54) = uVar9;
            uVar13 = (uint)*(byte *)((int)ppVVar8 + 0x46) +
                     (iVar15 / 900) * *(int *)(puVar20 + 0x54);
            *(char *)((int)ppVVar8 + 0x46) = (char)uVar13;
            *(short *)((int)&pVVar18[1].z + 2) = (short)((uVar13 & 0xff) << 4);
            *(ushort *)&pVVar18[1].z = (ushort)*(byte *)((int)ppVVar8 + 0x45) << 4;
            *(short *)&pVVar18->x =
                 (short)(((int)cosineLookupTable[*(byte *)((int)ppVVar8 + 0x46)] *
                          (int)*(short *)((int)&pVVar18->z + 2) >> 0xc) *
                         (int)cosineLookupTable[*(byte *)((int)ppVVar8 + 0x45)] >> 0xc);
            *(short *)((int)&pVVar18->x + 2) =
                 (short)(((int)sineLookupTable[*(byte *)((int)ppVVar8 + 0x46)] *
                          (int)*(short *)((int)&pVVar18->z + 2) >> 0xc) *
                         (int)cosineLookupTable[*(byte *)((int)ppVVar8 + 0x45)] >> 0xc);
            *(short *)&pVVar18->y =
                 (short)((int)sineLookupTable[*(byte *)((int)ppVVar8 + 0x45)] *
                         (int)*(short *)((int)&pVVar18->z + 2) >> 0xc);
          }
          iVar15 = maybeAngularDistance256
                             (*(undefined *)((int)ppVVar8 + 0x46),
                              *(undefined *)((int)param_2 + 0x46));
          if (0x18 < iVar15) {
            iVar15 = maybeNegativeAngularDistance256
                               (*(undefined *)((int)param_2 + 0x46),
                                *(undefined *)((int)ppVVar8 + 0x46));
            if (0x18 < iVar15) {
              iVar15 = 0x18;
            }
            if (iVar15 < -0x18) {
              iVar15 = -0x18;
            }
            uVar13 = (uint)*(byte *)((int)param_2 + 0x46) + iVar15;
            *(char *)((int)ppVVar8 + 0x46) = (char)uVar13;
            *(short *)&pVVar18->x = (short)(cosineLookupTable[uVar13 & 0xff] * iVar21 >> 0xc);
            *(short *)((int)&pVVar18->x + 2) =
                 (short)(sineLookupTable[*(byte *)((int)ppVVar8 + 0x46)] * iVar21 >> 0xc);
          }
          ppVVar8[3] = (Vec3 *)((int)&ppVVar8[3]->x + (int)*(short *)&pVVar18->x);
          ppVVar8[4] = (Vec3 *)((int)&ppVVar8[4]->x + (int)*(short *)((int)&pVVar18->x + 2));
          *(undefined *)((int)&pVVar18->z + 1) = 5;
          uVar13 = rand();
          if ((uVar13 & 1) != 0) {
            *(char *)((int)&pVVar18->z + 1) = -*(char *)((int)&pVVar18->z + 1);
          }
          sVar2 = *(short *)(puVar20 + 0x6a);
          *(short *)(puVar20 + 0x6a) = sVar2 + 3000;
          if (8999 < (short)(sVar2 + 3000)) {
            *(undefined2 *)(puVar20 + 0x6a) = 0;
          }
          pVVar18[1].x = (int)(puVar20 + *(short *)(puVar20 + 0x6a) + 0xb8);
          piVar17 = (int *)pVVar18[1].x;
          *(undefined2 *)((int)&pVVar18->y + 2) = 0xffff;
          MEMSET(piVar17,0,3000);
          return ppVVar8;
        }
      }
    }
    else {
      if (param_1 == 0x2c9) {
        piVar17 = *param_2;
        pVVar18 = *ppVVar8;
        *(undefined *)(ppVVar8 + 0x13) = 0x30;
        *(undefined *)((int)ppVVar8 + 0x4a) = 0xff;
        VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
        *(undefined2 *)(ppVVar8 + 0xe) = 0xc0;
        *(undefined *)(ppVVar8 + 0x12) = 10;
        ppVVar8[7] = (Vec3 *)((uint)ppVVar8[7] | 0x80000000);
        iVar15 = *piVar17;
        iVar15 = Atan2((int)ppVVar8[3] - *(int *)(iVar15 + 0xc),
                       (int)ppVVar8[4] - *(int *)(iVar15 + 0x10),0);
        iVar10 = randomRangeGen(2000,5000);
        pVVar18->x = cosineLookupTable[iVar15] * iVar10 >> 0xc;
        pVVar18->y = sineLookupTable[iVar15] * iVar10 >> 0xc;
        VectorAdd(pVVar18,pVVar18,(Vec3 *)(*piVar17 + 0xc));
        *(undefined *)((int)ppVVar8 + 0x46) = *(undefined *)((int)param_2 + 0x46);
        goto LAB_OVR28RiptosArena__8008968c;
      }
      if (param_1 < 0x2ca) {
        if (param_1 == 0x2c2) {
          *(undefined *)((int)ppVVar8 + 0x45) = 0;
          *(undefined *)(ppVVar8 + 0x13) = 0x50;
          pVVar18 = *ppVVar8;
          if (cameraState == Look) {
            FUN_80032a90(ppVVar8 + 3);
          }
          else {
            ppVVar8[3] = (Vec3 *)(cosineLookupTable[Spyro.angleAsByte.yaw] * 0x4b >> 9);
            sVar2 = sineLookupTable[Spyro.angleAsByte.yaw];
            ppVVar8[5] = (Vec3 *)0xc8;
            ppVVar8[4] = (Vec3 *)(sVar2 * 0x4b >> 9);
            VectorAdd((Vec3 *)(ppVVar8 + 3),(Vec3 *)(ppVVar8 + 3),&Spyro.position);
          }
          FUN_80041438(ppVVar8);
          *(byte *)((int)ppVVar8 + 0x46) = Spyro.angleAsByte.yaw + Spyro.anotherByteAngle.yaw;
          if (cameraState == Look) {
            *(char *)((int)ppVVar8 + 0x45) =
                 '\x10' - (char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
          }
          else {
            *(undefined *)((int)ppVVar8 + 0x45) = 0x10;
          }
          pVVar18->x = (cosineLookupTable[*(byte *)((int)ppVVar8 + 0x46)] * 300 >> 0xc) *
                       (int)cosineLookupTable[*(byte *)((int)ppVVar8 + 0x45)] >> 0xc;
          pVVar18->y = (sineLookupTable[*(byte *)((int)ppVVar8 + 0x46)] * 300 >> 0xc) *
                       (int)cosineLookupTable[*(byte *)((int)ppVVar8 + 0x45)] >> 0xc;
          sVar2 = sineLookupTable[*(byte *)((int)ppVVar8 + 0x45)];
          *(undefined2 *)((int)&pVVar18[1].x + 2) = 300;
          pVVar18->z = sVar2 * 300 >> 0xc;
          return ppVVar8;
        }
      }
      else {
        if (param_1 == 0x2d2) {
          piVar17 = *param_2;
          pVVar18 = *ppVVar8;
          VectorCopy((Vec3 *)(ppVVar8 + 3),(Vec3 *)(param_2 + 3));
          FUN_80041438(ppVVar8);
          *(undefined *)((int)ppVVar8 + 0x4a) = 0xff;
          *(undefined *)((int)ppVVar8 + 0x41) = 0;
          *(undefined *)(ppVVar8 + 0x13) = 0;
          *(undefined *)((int)ppVVar8 + 0x4d) = 0;
          *(undefined *)((int)ppVVar8 + 0x46) = *(undefined *)((int)param_2 + 0x46);
          ppVVar8[5] = (Vec3 *)&ppVVar8[5][0x29].z;
          iVar15 = piVar17[0x27];
          piVar17[0x27] = iVar15 + 2000;
          if (3999 < iVar15 + 2000) {
            piVar17[0x27] = 0;
          }
          iVar15 = (int)piVar17 + piVar17[0x27] + 0x23e0;
          pVVar18->y = iVar15;
          MemFill(iVar15,0,2000);
          pVVar18->x = 700;
          pVVar18[1].y = (int)param_2;
          return ppVVar8;
        }
        if (param_1 == 0x2eb) goto LAB_OVR28RiptosArena__80088ccc;
      }
    }
  }
  if (param_2 == (int **)0x0) {
    pSVar16 = &Spyro;
  }
  else {
    pSVar16 = (Spyro *)(param_2 + 3);
  }
  VectorCopy((Vec3 *)(ppVVar8 + 3),&pSVar16->position);
LAB_OVR28RiptosArena__8008968c:
  FUN_80041438(ppVVar8);
  return ppVVar8;
}



undefined * FUN_OVR28RiptosArena__800896d0(int param_1)

{
  byte bVar1;
  byte bVar2;
  bool bVar3;
  char cVar4;
  char cVar5;
  char cVar6;
  char cVar7;
  short sVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  short sVar12;
  short sVar13;
  char *pcVar14;
  undefined *puVar15;
  VectorShort *pVVar16;
  undefined *puVar17;
  Vec3 local_78;
  undefined4 local_68;
  undefined4 local_64;
  int local_60;
  int local_5c;
  int local_58;
  
  cVar7 = DAT_80066f18[1];
  puVar15 = DAT_80066f18;
  if (cVar7 != -1) {
    cVar6 = (char)param_1;
    cVar4 = cVar6 * '\x02';
    cVar5 = cVar6 * '\x04';
    pcVar14 = DAT_80066f18 + 1;
    puVar17 = DAT_80066f18 + 0x18;
    pVVar16 = (VectorShort *)(DAT_80066f18 + 4);
    do {
      if (cVar7 == -2) goto LAB_OVR28RiptosArena__8008aae8;
      switch(*puVar15) {
      case 0:
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        pcVar14[9] = pcVar14[9] + cVar4;
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[0xc] = pcVar14[0xc] + cVar6 * -4;
        pcVar14[0xb] = pcVar14[0xb] + cVar6 * -4;
        bVar2 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar2 + param_1);
        bVar3 = ((uint)bVar2 + param_1 & 0xff) < 0x20;
        pcVar14[0xd] = pcVar14[0xd] + cVar6 * -4;
        goto LAB_OVR28RiptosArena__8008a3f4;
      case 1:
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        pcVar14[9] = pcVar14[9] + cVar5;
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        pcVar14[0xc] = pcVar14[0xc] + cVar6 * -4;
        pcVar14[0xb] = pcVar14[0xb] + cVar6 * -4;
        bVar2 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar2 + param_1);
        bVar3 = ((uint)bVar2 + param_1 & 0xff) < 0x18;
        pcVar14[0xd] = pcVar14[0xd] + cVar6 * -4;
        goto LAB_OVR28RiptosArena__8008a3f4;
      case 9:
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        bVar2 = pcVar14[1];
        pcVar14[9] = pcVar14[9] + cVar4;
        pcVar14[1] = (char)((uint)bVar2 + param_1);
        bVar3 = ((uint)bVar2 + param_1 & 0xff) < 0x20;
        goto LAB_OVR28RiptosArena__8008a3f4;
      case 10:
        if (((Spyro.state == Drowning) && (Spyro.health < 0)) ||
           ((Spyro.field168_0x260 != 0 || (Spyro.iframeTimer == 0))))
        goto LAB_OVR28RiptosArena__8008aa90;
        VectorCopy(&local_78,&Spyro.position);
        iVar10 = cosineLookup((int)*(short *)(pcVar14 + 0x17));
        local_78.x = local_78.x + (iVar10 >> 4);
        iVar10 = sineLookup((int)*(short *)(pcVar14 + 0x17));
        local_78.y = local_78.y + (iVar10 >> 4);
        local_78.z = local_78.z + 0x100;
        VecIntToShort(pVVar16,&local_78);
        sVar12 = *(short *)(pcVar14 + 0x17);
        *(short *)(pcVar14 + 0x17) = sVar12 + 0x40;
        iVar10 = cosineLookup((int)(short)(sVar12 + 0x40) - (int)VectorShort_80067ec8.Z & 0xfff);
        if (iVar10 < 0) {
          iVar10 = -iVar10;
        }
        pcVar14[9] = (char)(iVar10 / 0xaa);
        break;
      case 0xb:
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x15) = *(short *)(pcVar14 + 0x15) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        VectorShortAdd(pVVar16,pVVar16,puVar15 + 0x12);
        pcVar14[9] = pcVar14[9] + cVar4;
        pcVar14[0xb] = pcVar14[0xb] + -4;
        cVar7 = pcVar14[0xd];
        pcVar14[10] = pcVar14[10] + cVar5;
        pcVar14[0xd] = cVar7 + -4;
        pcVar14[0xc] = pcVar14[0xc] + -4;
        if ((char)(cVar7 + -4) == '\0') goto LAB_OVR28RiptosArena__8008aa90;
        goto LAB_OVR28RiptosArena__8008a3fc;
      case 0xc:
        pcVar14[10] = pcVar14[10] + '\b';
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        if (pcVar14[0xb] != '\0') {
          pcVar14[0xb] = pcVar14[0xb] + -8;
        }
        if (pcVar14[0xc] != '\0') {
          pcVar14[0xc] = pcVar14[0xc] + -8;
        }
        if (pcVar14[0xd] != '\0') {
          pcVar14[0xd] = pcVar14[0xd] + -8;
        }
        uVar11 = *(uint *)(pcVar14 + 0xb);
        goto joined_r0x8008a318;
      case 0xd:
        if ((0x1b < (byte)pcVar14[1]) || (pcVar14[2] == '\0')) goto LAB_OVR28RiptosArena__8008aa90;
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        uVar11 = (uint)(byte)pcVar14[1];
        pcVar14[9] = pcVar14[9] + cVar4;
        if (0xc < uVar11) {
          iVar10 = (uVar11 - 0xc) * -8 + 0x80;
          if (iVar10 < 0) {
            iVar10 = 0;
          }
          pcVar14[0xb] = (char)iVar10;
          iVar10 = ((byte)pcVar14[1] - 0xc) * -4 + 0x40;
          if (iVar10 < 0) {
            iVar10 = 0;
          }
          pcVar14[0xc] = (char)iVar10;
          goto LAB_OVR28RiptosArena__8008a270;
        }
        if (uVar11 < 5) {
          pcVar14[0xb] = -0x80;
          iVar10 = (uint)(byte)pcVar14[1] * -0x20 + 0x80;
          pcVar14[0xc] = -0x80;
          if (iVar10 < 0) {
            iVar10 = 0;
          }
          pcVar14[0xd] = (char)iVar10;
        }
        else {
          pcVar14[0xb] = -0x80;
          pcVar14[0xd] = '\0';
          pcVar14[0xc] = (pcVar14[1] + -4) * -8 + -0x80;
        }
LAB_OVR28RiptosArena__8008a274:
        pcVar14[1] = pcVar14[1] + cVar6;
        break;
      case 0x14:
        if ((DAT_80067008 & 1) != 0) {
          if (*(short *)(pcVar14 + 0x17) < 1) {
            sVar12 = 1;
          }
          else {
            sVar12 = -1;
          }
          *(short *)(pcVar14 + 0x17) = *(short *)(pcVar14 + 0x17) + sVar12;
          if (*(short *)(pcVar14 + 0x19) < 1) {
            sVar12 = 1;
          }
          else {
            sVar12 = -1;
          }
          *(short *)(pcVar14 + 0x19) = *(short *)(pcVar14 + 0x19) + sVar12;
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + -1;
        }
        if (*(short *)(pcVar14 + 0x1b) < 0x10) {
          *(undefined2 *)(pcVar14 + 0x1b) = 0x10;
        }
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        bVar2 = pcVar14[1];
        uVar11 = (uint)bVar2 + param_1;
        pcVar14[1] = (char)uVar11;
        if (0x80 < (uVar11 & 0xff)) {
          FUN_80041d20(puVar15);
          goto switchD_OVR28RiptosArena__80089768_caseD_15;
        }
        bVar1 = pcVar14[9];
        pcVar14[9] = (char)((uint)bVar1 + param_1);
        if (0x80 < ((uint)bVar1 + param_1 & 0xff)) {
          pcVar14[9] = -0x80;
        }
        if ((byte)pcVar14[1] < 0x41) {
          iVar9 = (uint)(byte)pcVar14[1] * -4 + 0x100;
          iVar10 = iVar9;
          if (0xff < iVar9) {
            iVar10 = 0xff;
          }
          if (iVar9 < 0x20) {
            iVar10 = 0x20;
          }
        }
        else {
          if (bVar2 < 0x41) {
            (*DAT_800670fc)(1,0x15,puVar15,0);
          }
          iVar10 = ((byte)pcVar14[1] - 0x40) * -4 + 0x100;
          if (0xff < iVar10) {
            iVar10 = 0xff;
          }
          if (iVar10 < 0) {
            iVar10 = 0;
          }
          pcVar14[0xb] = (char)iVar10;
          iVar10 = iVar10 >> 1;
          if ((int)(uint)(byte)pcVar14[0xc] <= iVar10) break;
        }
        pcVar14[0xc] = (char)iVar10;
        break;
      case 0x15:
switchD_OVR28RiptosArena__80089768_caseD_15:
        if ((DAT_80067008 & 1) != 0) {
          if (*(short *)(pcVar14 + 0x17) < 1) {
            sVar12 = 1;
          }
          else {
            sVar12 = -1;
          }
          *(short *)(pcVar14 + 0x17) = *(short *)(pcVar14 + 0x17) + sVar12;
          if (*(short *)(pcVar14 + 0x19) < 1) {
            sVar12 = 1;
          }
          else {
            sVar12 = -1;
          }
          *(short *)(pcVar14 + 0x19) = *(short *)(pcVar14 + 0x19) + sVar12;
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + -1;
        }
        if (*(short *)(pcVar14 + 0x1b) < 0x10) {
          *(undefined2 *)(pcVar14 + 0x1b) = 0x10;
        }
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        bVar2 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar2 + param_1);
        if (((uint)bVar2 + param_1 & 0xff) < 0x61) {
          bVar2 = pcVar14[9];
          pcVar14[9] = (char)((uint)bVar2 + param_1);
          if (0x80 < ((uint)bVar2 + param_1 & 0xff)) {
            pcVar14[9] = -0x80;
          }
          uVar11 = (uint)(byte)pcVar14[1];
          iVar10 = uVar11 << 1;
          if (0x1f < uVar11) {
            iVar10 = 0x60 - uVar11;
          }
          if (0 < iVar10) {
            cVar7 = (char)iVar10;
            pcVar14[0xb] = cVar7;
            pcVar14[0xc] = cVar7;
            pcVar14[0xd] = cVar7;
            break;
          }
        }
        goto LAB_OVR28RiptosArena__8008aa90;
      case 0x21:
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        iVar10 = (uint)(byte)pcVar14[0xb] + param_1 * -2;
        pcVar14[9] = pcVar14[9] + cVar4;
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        if (iVar10 < 0) {
          iVar10 = 0;
        }
        bVar2 = pcVar14[1];
        cVar7 = (char)iVar10;
        pcVar14[0xb] = cVar7;
        pcVar14[0xc] = cVar7;
        pcVar14[0xd] = cVar7;
        pcVar14[1] = (char)((uint)bVar2 + param_1);
        if (((0x1f < ((uint)bVar2 + param_1 & 0xff)) || (pcVar14[2] == '\0')) || (iVar10 == 0))
        goto LAB_OVR28RiptosArena__8008aa90;
        break;
      case 0x26:
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        cVar7 = pcVar14[0x17];
        pcVar14[10] = pcVar14[10] + pcVar14[0x1d];
        *(short *)(pcVar14 + 0x17) = 1 - *(short *)(pcVar14 + 0x17);
        pcVar14[9] = pcVar14[9] - cVar7;
        cVar7 = (char)(param_1 >> 1);
        pcVar14[0xc] = pcVar14[0xc] - cVar7;
        pcVar14[0xb] = pcVar14[0xb] - cVar7;
        bVar2 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar2 + param_1);
        bVar3 = ((uint)bVar2 + param_1 & 0xff) < 0x5a;
        pcVar14[0xd] = pcVar14[0xd] - cVar7;
        goto LAB_OVR28RiptosArena__8008a3f4;
      case 0x28:
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        if (*(short *)(pcVar14 + 0x1d) != 0) {
          *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
        }
        bVar2 = pcVar14[1];
        pcVar14[1] = (char)((uint)bVar2 + param_1);
        *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
        if (((uint)bVar2 + param_1 & 0xff) < 0x1e) {
          if ((byte)pcVar14[9] < 100) {
            pcVar14[9] = pcVar14[9] + cVar5;
          }
        }
        else {
          if (4 < (byte)pcVar14[9]) {
            pcVar14[9] = pcVar14[9] - cVar6;
          }
          *(short *)(pcVar14 + 0x17) = (short)(*(short *)(pcVar14 + 0x17) * 7 >> 3);
          *(short *)(pcVar14 + 0x19) = (short)(*(short *)(pcVar14 + 0x19) * 7 >> 3);
          *(short *)(pcVar14 + 0x1b) = (short)(*(short *)(pcVar14 + 0x1b) * 7 >> 3);
        }
        if ((byte)pcVar14[0xd] < 0xb) {
          if (1 < (byte)pcVar14[0xb]) {
            pcVar14[0xb] = pcVar14[0xb] - 1;
          }
          if (1 < (byte)pcVar14[0xc]) {
            pcVar14[0xc] = pcVar14[0xc] - 1;
          }
          if (1 < (byte)pcVar14[0xd]) {
            pcVar14[0xd] = pcVar14[0xd] - 1;
          }
        }
        else {
          pcVar14[0xb] = pcVar14[0xb] + cVar6 * -2;
          pcVar14[0xd] = pcVar14[0xd] + cVar6 * -2;
          pcVar14[0xc] = pcVar14[0xc] + cVar6 * -2;
        }
        if ((0x3b < (byte)pcVar14[1]) && (uVar11 = rand(), (uVar11 & 0xf) == 7)) {
          pcVar14[1] = '\0';
          pcVar14[0xb] = '`';
          pcVar14[0xc] = '`';
          pcVar14[0xd] = '`';
          *puVar15 = 1;
        }
        bVar3 = (byte)pcVar14[1] < 0x79;
        goto LAB_OVR28RiptosArena__8008a3f4;
      case 0x32:
        if (pcVar14[1] != '\0') {
          iVar10 = (uint)(byte)pcVar14[9] + deltaTime * -7;
          if (iVar10 < 0) {
            iVar10 = 0;
          }
          pcVar14[9] = (char)iVar10;
          iVar10 = AdvanceTimer(puVar15 + 2,1);
          if (iVar10 != 0) goto LAB_OVR28RiptosArena__8008aa90;
        }
        break;
      case 0x3a:
        if ((byte)pcVar14[1] < 0x1c) {
          VectorShortAdd(pVVar16,pVVar16,puVar17);
          if (*(short *)(pcVar14 + 0x1d) != 0) {
            *(short *)(pcVar14 + 0x1b) = *(short *)(pcVar14 + 0x1b) + 1;
          }
          uVar11 = (uint)(byte)pcVar14[1];
          *(short *)(pcVar14 + 0x1d) = 1 - *(short *)(pcVar14 + 0x1d);
          pcVar14[9] = pcVar14[9] + cVar4;
          if (uVar11 < 0xd) {
            if (uVar11 < 5) goto LAB_OVR28RiptosArena__8008a274;
            pcVar14[0xb] = (pcVar14[1] - 4U) * -8 + -0x80;
            pcVar14[0xc] = -0x80;
          }
          else {
            iVar10 = (uVar11 - 0xc) * -4 + 0x40;
            if (iVar10 < 0) {
              iVar10 = 0;
            }
            pcVar14[0xb] = (char)iVar10;
            iVar10 = ((byte)pcVar14[1] - 0xc) * -8 + 0x80;
            if (iVar10 < 0) {
              iVar10 = 0;
            }
            pcVar14[0xc] = (char)iVar10;
          }
LAB_OVR28RiptosArena__8008a270:
          pcVar14[0xd] = '\0';
          goto LAB_OVR28RiptosArena__8008a274;
        }
        goto LAB_OVR28RiptosArena__8008aa90;
      case 0x3b:
        pcVar14[10] = pcVar14[10] + '\b';
        VectorShortAdd(pVVar16,pVVar16,puVar17);
        if ((DAT_80067008 & 1) != 0) {
          *(short *)(pcVar14 + 0x19) = *(short *)(pcVar14 + 0x19) + 1;
        }
        if (pcVar14[0xb] != '\0') {
          pcVar14[0xb] = pcVar14[0xb] + -4;
        }
        if (pcVar14[0xc] != '\0') {
          pcVar14[0xc] = pcVar14[0xc] + -4;
        }
        if (pcVar14[0xd] != '\0') {
          pcVar14[0xd] = pcVar14[0xd] + -4;
        }
        uVar11 = *(uint *)(pcVar14 + 0xb);
joined_r0x8008a318:
        if ((uVar11 & 0xffffff) == 0) goto LAB_OVR28RiptosArena__8008aa90;
        goto LAB_OVR28RiptosArena__8008a3fc;
      case 0x42:
        iVar10 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar14[1] & 1U) != 0) {
              *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + *(short *)(pcVar14 + 0xf);
              *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + *(short *)(pcVar14 + 0x11);
              *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + *(short *)(pcVar14 + 0x13);
              if ((pcVar14[1] & 2U) != 0) {
                iVar9 = rand();
                *(ushort *)(pcVar14 + 0xf) = *(short *)(pcVar14 + 0xf) + -1 + ((ushort)iVar9 & 2);
                iVar9 = rand();
                *(ushort *)(pcVar14 + 0x11) = *(short *)(pcVar14 + 0x11) + -1 + ((ushort)iVar9 & 2);
                iVar9 = rand();
                *(ushort *)(pcVar14 + 0x13) = *(short *)(pcVar14 + 0x13) + -1 + ((ushort)iVar9 & 2);
              }
            }
            iVar10 = iVar10 + 1;
            pcVar14[1] = pcVar14[1] + '\x01';
          } while (iVar10 < param_1);
        }
        bVar3 = (byte)pcVar14[1] < 0x18;
LAB_OVR28RiptosArena__8008a3f4:
        if (bVar3) {
LAB_OVR28RiptosArena__8008a3fc:
          if (pcVar14[2] != '\0') break;
        }
LAB_OVR28RiptosArena__8008aa90:
        FUN_80041d20(puVar15);
        break;
      case 0x46:
        cVar7 = pcVar14[1];
        pcVar14[1] = cVar7 + 1U;
        if ((0x1f < (byte)(cVar7 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR28RiptosArena__8008aa90;
        local_68._0_2_ = (short)((int)*(short *)(pcVar14 + 9) - (int)*(short *)(pcVar14 + 3) >> 1);
        local_68._2_2_ = (short)((int)*(short *)(pcVar14 + 0xb) - (int)*(short *)(pcVar14 + 5) >> 1)
        ;
        sVar12 = (short)((int)*(short *)(pcVar14 + 0xd) - (int)*(short *)(pcVar14 + 7) >> 1);
        local_64 = CONCAT22(local_64._2_2_,sVar12);
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + (short)local_68;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + local_68._2_2_;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + sVar12;
        iVar10 = rand();
        local_68._0_2_ = (short)local_68 + -1 + ((ushort)iVar10 & 2);
        iVar10 = rand();
        sVar12 = local_68._2_2_ + -1 + ((ushort)iVar10 & 2);
        local_68 = CONCAT22(sVar12,(short)local_68);
        if ((pcVar14[1] & 1U) != 0) {
          local_64 = CONCAT22(local_64._2_2_,(short)local_64 + -1);
        }
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + (short)local_68;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + sVar12;
        cVar7 = pcVar14[0xf];
        pcVar14[0xf] = cVar7 - 3U;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + (short)local_64;
        if ((byte)(cVar7 - 3U) < 0x80) {
          pcVar14[0xf] = -0x80;
        }
        cVar7 = pcVar14[0x10];
        pcVar14[0x10] = cVar7 - 4U;
        if ((byte)(cVar7 - 4U) < 0x60) {
          pcVar14[0x10] = '`';
        }
        cVar7 = pcVar14[0x13];
        pcVar14[0x11] = '\0';
        pcVar14[0x13] = cVar7 - 3U;
        if ((byte)(cVar7 - 3U) < 0xc0) {
          pcVar14[0x13] = -0x40;
        }
        cVar7 = pcVar14[0x14];
        pcVar14[0x14] = cVar7 - 4U;
        if ((byte)(cVar7 - 4U) < 0x80) {
          pcVar14[0x14] = -0x80;
        }
        cVar7 = pcVar14[0x15];
        pcVar14[0x15] = cVar7 - 6U;
        if ((byte)(cVar7 - 6U) < 0x20) {
          pcVar14[0x15] = ' ';
        }
        break;
      case 0x47:
        cVar7 = pcVar14[1];
        pcVar14[1] = cVar7 + 1U;
        if ((0x1f < (byte)(cVar7 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR28RiptosArena__8008aa90;
        local_60 = (int)*(short *)(pcVar14 + 9) - (int)*(short *)(pcVar14 + 3);
        local_5c = (int)*(short *)(pcVar14 + 0xb) - (int)*(short *)(pcVar14 + 5);
        local_58 = (int)*(short *)(pcVar14 + 0xd) - (int)*(short *)(pcVar14 + 7);
        uVar11 = rand();
        local_60 = local_60 + -1 + (uVar11 & 2);
        uVar11 = rand();
        local_5c = local_5c + -1 + (uVar11 & 2);
        uVar11 = rand();
        local_58 = local_58 + -1 + (uVar11 & 2);
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + (short)local_60;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + (short)local_5c;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + (short)local_58;
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 9) - (short)local_60;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 0xb) - (short)local_5c;
        pcVar14[0x13] = pcVar14[0x13] + -2;
        pcVar14[0x15] = pcVar14[0x15] + -4;
        pcVar14[0x14] = pcVar14[0x14] + -2;
        pcVar14[0x10] = pcVar14[0x10] + -3;
        pcVar14[0xf] = pcVar14[0xf] + -3;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 0xd) - (short)local_58;
        pcVar14[0x11] = pcVar14[0x11] + -3;
        break;
      case 0x48:
        cVar7 = pcVar14[1];
        pcVar14[1] = cVar7 + 1U;
        if ((0x37 < (byte)(cVar7 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR28RiptosArena__8008aa90;
        local_68 = (int)*(short *)(pcVar14 + 3) - (int)*(short *)(pcVar14 + 9) >> 1;
        local_64 = (int)*(short *)(pcVar14 + 5) - (int)*(short *)(pcVar14 + 0xb) >> 1;
        local_60 = (int)*(short *)(pcVar14 + 7) - (int)*(short *)(pcVar14 + 0xd) >> 1;
        uVar11 = rand();
        local_68 = local_68 + -2 + (uVar11 & 4);
        uVar11 = rand();
        local_64 = local_64 + -2 + (uVar11 & 4);
        uVar11 = rand();
        local_60 = local_60 + -1 + (uVar11 & 2);
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + (short)local_68;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + (short)local_64;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + (short)local_60;
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 3) + (short)local_68 * -2;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 5) + (short)local_64 * -2;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 7) + (short)local_60 * -2;
        break;
      case 0x4e:
        cVar7 = pcVar14[1];
        pcVar14[1] = cVar7 + 1U;
        if ((0x27 < (byte)(cVar7 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR28RiptosArena__8008aa90;
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + *(short *)(pcVar14 + 0xf);
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + *(short *)(pcVar14 + 0x11);
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + *(short *)(pcVar14 + 0x13);
        iVar10 = rand();
        *(ushort *)(pcVar14 + 0xf) = *(short *)(pcVar14 + 0xf) + -1 + ((ushort)iVar10 & 2);
        iVar10 = rand();
        *(ushort *)(pcVar14 + 0x11) = *(short *)(pcVar14 + 0x11) + -1 + ((ushort)iVar10 & 2);
        uVar11 = rand();
        iVar10 = (*(ushort *)(pcVar14 + 0x13) - 1) + (uVar11 & 2);
        *(short *)(pcVar14 + 0x13) = (short)iVar10;
        if (2 < iVar10 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar14 + 0x13) = 2;
        }
        if (*(short *)(pcVar14 + 0x13) < -4) {
          *(undefined2 *)(pcVar14 + 0x13) = 0xfffc;
        }
        pcVar14[0xb] = pcVar14[0xb] + -2;
        pcVar14[0xd] = pcVar14[0xd] + -1;
        pcVar14[0xc] = pcVar14[0xc] + -2;
        break;
      case 0x4f:
        sVar13 = (short)((int)*(short *)(pcVar14 + 9) - (int)*(short *)(pcVar14 + 3) >> 1);
        sVar12 = (short)((int)*(short *)(pcVar14 + 0xb) - (int)*(short *)(pcVar14 + 5) >> 1);
        local_68 = CONCAT22(sVar12,sVar13);
        sVar8 = (short)((int)*(short *)(pcVar14 + 0xd) - (int)*(short *)(pcVar14 + 7) >> 1);
        local_64 = CONCAT22(local_64._2_2_,sVar8);
        *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + sVar13;
        *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + sVar12;
        *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + sVar8;
        *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + sVar13;
        *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + sVar12;
        cVar7 = pcVar14[1];
        pcVar14[1] = cVar7 + 1U;
        *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + sVar8;
        if ((0x17 < (byte)(cVar7 + 1U)) || (pcVar14[2] == '\0'))
        goto LAB_OVR28RiptosArena__8008aa90;
        pcVar14[0xf] = pcVar14[0xf] + -3;
        pcVar14[0x13] = pcVar14[0x13] + -3;
        pcVar14[0x10] = pcVar14[0x10] + -4;
        pcVar14[0x14] = pcVar14[0x14] + -4;
        if (5 < (byte)pcVar14[0x15]) {
          pcVar14[0x15] = pcVar14[0x15] - 6;
        }
      }
LAB_OVR28RiptosArena__8008aae8:
      pcVar14 = pcVar14 + 0x20;
      puVar17 = puVar17 + 0x20;
      pVVar16 = (VectorShort *)&pVVar16[5].Y;
      cVar7 = *pcVar14;
      puVar15 = puVar15 + 0x20;
    } while (cVar7 != -1);
  }
  return puVar15;
}



undefined *
FUN_OVR28RiptosArena__8008ab40(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  undefined uVar1;
  undefined2 uVar2;
  undefined4 uVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  undefined *puVar7;
  int iVar8;
  Vec3 local_d0;
  Vec3 local_c0;
  Vec3 local_b0;
  Vec3 local_a0;
  Vec3 local_90;
  undefined local_80;
  undefined local_7f;
  undefined local_7e;
  Mat33 MStack_78;
  Vec3 local_58;
  int local_48;
  Vec3 *local_40;
  int local_30;
  
  iVar8 = 0;
  puVar7 = (undefined *)0x0;
  if (0 < param_1) {
    local_40 = &local_c0;
    local_30 = 0;
    local_48 = param_1;
    do {
      uVar1 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),param_4);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x18;
        iVar4 = rand();
        puVar7[0xc] = 0x80;
        puVar7[0xd] = 0x80;
        puVar7[0xe] = 0x80;
        puVar7[0xf] = 0x2e;
        puVar7[0xb] = (char)iVar4;
        goto LAB_OVR28RiptosArena__8008b51c;
      case 1:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),param_4);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x10;
        iVar4 = rand();
        puVar7[0xb] = (char)iVar4;
        puVar7[0xf] = 0x2e;
        puVar7[0xc] = 0x60;
        puVar7[0xd] = 0x60;
        puVar7[0xe] = 0x60;
        goto LAB_OVR28RiptosArena__8008b51c;
      case 9:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        VectorCopy(&local_d0,&Spyro.position);
        uVar5 = rand();
        local_d0.x = local_d0.x + -0x3f + (uVar5 & 0x7e);
        uVar5 = rand();
        local_d0.y = local_d0.y + -0x3f + (uVar5 & 0x7e);
        VecIntToShort((VectorShort *)(puVar7 + 4),&local_d0);
        VectorCopy(&local_d0,&Spyro.physicsVelocity);
        VectorShiftRight(&local_d0,6);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),&local_d0);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x18;
        iVar4 = rand();
        puVar7[0xc] = 0x80;
        puVar7[0xd] = 0x80;
        puVar7[0xe] = 0x80;
        puVar7[0xf] = 0x2e;
        puVar7[0xb] = (char)iVar4;
        goto LAB_OVR28RiptosArena__8008b51c;
      case 10:
        puVar7 = (undefined *)FUN_80041c50(3);
        *puVar7 = uVar1;
        iVar4 = rand();
        puVar7[2] = (byte)iVar4 & 0x1f;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 4),&Spyro.position);
        puVar7[10] = 0x18;
        puVar7[0xb] = 0xf;
        puVar7[0xc] = (&DAT_80064654)[local_30];
        puVar7[0xd] = (&DAT_80064655)[local_30];
        uVar1 = (&DAT_80064656)[local_30];
        puVar7[0xf] = 0x2c;
        puVar7[0x11] = 4;
        puVar7[0x10] = 0;
        puVar7[0xe] = uVar1;
        *(short *)(puVar7 + 0x18) = (short)(((local_48 - iVar8) * 0x1000) / 5);
        break;
      case 0xc:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[3] = 1;
        puVar7[0x11] = 4;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar8 * 0xc),local_40);
        VectorAdd(local_40,local_40,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar5 = rand();
          local_c0.x = (local_c0.x + 0x100) - (uVar5 & 0x1ff);
          uVar5 = rand();
          local_c0.y = (local_c0.y + 0x100) - (uVar5 & 0x1ff);
          uVar5 = rand();
          local_c0.z = (local_c0.z + 0x100) - (uVar5 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar5 = rand();
          local_c0.x = (local_c0.x + 0x80) - (uVar5 & 0xff);
          uVar5 = rand();
          local_c0.y = (local_c0.y + 0x80) - (uVar5 & 0xff);
          uVar5 = rand();
          local_c0.z = (local_c0.z + 0x80) - (uVar5 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar7 + 4),local_40);
        *(undefined4 *)(puVar7 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar4 = rand();
        puVar7[10] = ((byte)iVar4 & 7) + 0x20;
        iVar4 = rand();
        puVar7[0xb] = (char)iVar4;
        puVar7[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar7 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar8 * 0xc));
        iVar4 = rand();
        *(ushort *)(puVar7 + 0x18) = (*(short *)(puVar7 + 0x18) >> 2) + -4 + ((ushort)iVar4 & 7);
        iVar4 = rand();
        *(ushort *)(puVar7 + 0x1a) = (*(short *)(puVar7 + 0x1a) >> 2) + -4 + ((ushort)iVar4 & 7);
        iVar4 = rand();
        *(ushort *)(puVar7 + 0x1c) = (*(short *)(puVar7 + 0x1c) >> 2) + -4 + ((ushort)iVar4 & 7);
        break;
      case 0xd:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),param_4);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x18;
        iVar4 = rand();
        puVar7[0xf] = 0x2e;
        puVar7[0xb] = (char)iVar4;
        puVar7[0xc] = 0xff;
        goto LAB_OVR28RiptosArena__8008b514;
      case 0x14:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),param_4);
        puVar7[10] = 0x40;
        iVar4 = rand();
        puVar7[0xf] = 0x2e;
        puVar7[0xb] = (char)iVar4;
        puVar7[0xc] = 0xff;
        goto LAB_OVR28RiptosArena__8008b514;
      case 0x15:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        *(undefined2 *)(puVar7 + 4) = *(undefined2 *)&param_3->y;
        *(undefined2 *)(puVar7 + 6) = *(undefined2 *)((int)&param_3->y + 2);
        *(undefined2 *)(puVar7 + 8) = *(undefined2 *)&param_3->z;
        *(int *)(puVar7 + 0x18) = param_3[2].x;
        *(int *)(puVar7 + 0x1c) = param_3[2].y;
        puVar7[10] = *(undefined *)((int)&param_3->z + 2);
        uVar1 = *(undefined *)((int)&param_3->z + 3);
        puVar7[0xc] = 0;
        puVar7[0xd] = 0;
        puVar7[0xe] = 0;
        puVar7[0xf] = 0x2e;
        puVar7[0x11] = 0;
        puVar7[0x10] = 0;
        puVar7[0xb] = uVar1;
        break;
      case 0x21:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_a0,&Spyro.physicsVelocity);
          VectorShiftRight(&local_a0,6);
          VectorCopy(&local_b0,&Spyro.position);
          local_b0.z = local_b0.z + -0x164;
          uVar5 = rand();
          local_b0.x = (local_b0.x + 0x80) - (uVar5 & 0xff);
          uVar5 = rand();
          uVar1 = 0x30;
          local_b0.y = (local_b0.y + 0x80) - (uVar5 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_b0.x = 0x164;
          local_b0.y = 0;
          local_b0.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_b0,&local_b0);
          VectorAdd(&local_b0,&local_b0,&Spyro.position);
          uVar1 = 0x40;
          uVar5 = rand();
          local_a0.x = -(uVar5 & 7);
          uVar5 = rand();
          local_a0.y = ((int)((uint)(ushort)cosineLookupTable[iVar8 * 0x20] << 0x10) >> 0x17) -
                       ((uVar5 & 0xf) - 8);
          local_a0.z = (int)((uint)(ushort)sineLookupTable[iVar8 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_a0,&local_a0);
        }
        else {
          if (param_4 == (Vec3 *)0x2) {
            iVar6 = iVar8 << 5;
            iVar4 = 6;
            uVar1 = 0x30;
          }
          else {
            iVar6 = iVar8 * 0x20 + 0x10;
            iVar4 = 5;
            uVar1 = 0x40;
          }
          VectorCopy(&local_b0,&Spyro.position);
          local_b0.x = local_b0.x + ((int)cosineLookupTable[iVar6] >> iVar4);
          local_b0.z = local_b0.z + -0x164;
          local_b0.y = local_b0.y + ((int)sineLookupTable[iVar6] >> iVar4);
          local_a0.x = (int)cosineLookupTable[iVar6] >> iVar4 + 1;
          local_a0.z = 0;
          local_a0.y = (int)sineLookupTable[iVar6] >> iVar4 + 1;
        }
        VecIntToShort((VectorShort *)(puVar7 + 4),&local_b0);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),&local_a0);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x10;
        iVar4 = rand();
        puVar7[0xf] = 0x2e;
        puVar7[0xb] = (char)iVar4;
        puVar7[0xc] = uVar1;
        puVar7[0xd] = uVar1;
        puVar7[0xe] = uVar1;
        goto LAB_OVR28RiptosArena__8008b51c;
      case 0x26:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),param_4);
        uVar2 = RandomRangeGen(3,7);
        *(undefined2 *)(puVar7 + 0x1e) = uVar2;
        *(undefined2 *)(puVar7 + 0x18) = 0;
        puVar7[10] = 0x20;
        iVar4 = rand();
        puVar7[0xb] = (char)iVar4;
        uVar1 = randomRangeGen(0x60,0x80);
        puVar7[0xc] = uVar1;
        uVar1 = randomRangeGen(0x60,0x80);
        puVar7[0xd] = uVar1;
        uVar1 = randomRangeGen(0x60,0x80);
        puVar7[0xf] = 0x2e;
        puVar7[0xe] = uVar1;
        goto LAB_OVR28RiptosArena__8008b51c;
      case 0x28:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),param_4);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x10;
        iVar4 = rand();
        puVar7[0xb] = (char)iVar4;
        puVar7[0xd] = 0x48;
        puVar7[0xc] = 0x80;
        puVar7[0xf] = 0x2e;
        puVar7[0xe] = 0x30;
        goto LAB_OVR28RiptosArena__8008b51c;
      case 0x32:
        puVar7 = (undefined *)FUN_80041c50(4);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        puVar7[1] = puVar7[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        puVar7[0xc] = 0x80;
        puVar7[0xd] = 0x80;
        puVar7[0xe] = 0x80;
        puVar7[10] = 0x14;
        puVar7[0xb] = 0;
        puVar7[0xf] = 0x2e;
        puVar7[0x11] = 2;
        puVar7[0x10] = 0;
        break;
      case 0x3a:
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = uVar1;
        puVar7[2] = 0;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),param_4);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x18;
        iVar4 = rand();
        puVar7[0xc] = 0x80;
        puVar7[0xf] = 0x2e;
        puVar7[0xb] = (char)iVar4;
LAB_OVR28RiptosArena__8008b514:
        puVar7[0xd] = 0xff;
        puVar7[0xe] = 0;
LAB_OVR28RiptosArena__8008b51c:
        puVar7[0x11] = 4;
        puVar7[0x10] = 0;
        break;
      case 0x3b:
        puVar7 = (undefined *)FUN_80041c50(5);
        puVar7[3] = 1;
        *puVar7 = uVar1;
        puVar7[0x11] = 0x10;
        puVar7[1] = puVar7[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        iVar4 = rand();
        *(ushort *)(puVar7 + 4) = (*(short *)(puVar7 + 4) + 0x10) - ((ushort)iVar4 & 0x1f);
        iVar4 = rand();
        *(ushort *)(puVar7 + 6) = (*(short *)(puVar7 + 6) + 8) - ((ushort)iVar4 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar3 = 0x2e0080c0;
        }
        else {
          uVar3 = 0x2e00c000;
        }
        *(undefined4 *)(puVar7 + 0xc) = uVar3;
        iVar4 = rand();
        puVar7[10] = ((byte)iVar4 & 0xf) + 0x14;
        iVar4 = rand();
        puVar7[0xb] = (char)iVar4;
        puVar7[0x10] = 0;
        iVar4 = rand();
        *(ushort *)(puVar7 + 0x18) = ((ushort)iVar4 & 7) - 4;
        iVar4 = rand();
        *(ushort *)(puVar7 + 0x1a) = -2 - ((ushort)iVar4 & 7);
        iVar4 = rand();
        *(ushort *)(puVar7 + 0x1c) = ((ushort)iVar4 & 0xf) - 8;
        break;
      case 0x42:
        puVar7 = (undefined *)FUN_80041c50(0);
        *puVar7 = uVar1;
        iVar4 = rand();
        puVar7[2] = (byte)iVar4 & 0xf;
        puVar7[3] = 1;
        iVar4 = rand();
        *(ushort *)(puVar7 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar4 & 0xf) + -8;
        iVar4 = rand();
        *(ushort *)(puVar7 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar4 & 0xf) + -8;
        iVar4 = rand();
        iVar6 = param_3->z;
        *(undefined2 *)(puVar7 + 0x10) = 0;
        *(undefined2 *)(puVar7 + 0x12) = 0;
        *(undefined2 *)(puVar7 + 0x14) = 0;
        puVar7[10] = 2;
        *(ushort *)(puVar7 + 8) = (short)(iVar6 >> 2) + ((ushort)iVar4 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar7[0xc] = 0xff;
          goto LAB_OVR28RiptosArena__8008b70c;
        }
        uVar5 = rand();
        switch(uVar5 & 7) {
        case 0:
          puVar7[0xc] = 0xff;
          puVar7[0xd] = 0;
          puVar7[0xe] = 0;
          break;
        case 1:
          puVar7[0xc] = 0xff;
          goto LAB_OVR28RiptosArena__8008b70c;
        case 2:
          puVar7[0xc] = 0;
LAB_OVR28RiptosArena__8008b70c:
          puVar7[0xd] = 0xff;
          puVar7[0xe] = 0;
          break;
        case 3:
          puVar7[0xc] = 0;
          puVar7[0xd] = 0xff;
          goto LAB_OVR28RiptosArena__8008b75c;
        case 4:
          puVar7[0xc] = 0;
          puVar7[0xd] = 0;
          goto LAB_OVR28RiptosArena__8008b75c;
        case 5:
          puVar7[0xc] = 0xff;
          puVar7[0xd] = 0;
          goto LAB_OVR28RiptosArena__8008b75c;
        case 6:
          puVar7[0xc] = 0xff;
          puVar7[0xd] = 0x80;
          puVar7[0xe] = 0;
          break;
        case 7:
          puVar7[0xc] = 0;
          puVar7[0xd] = 0x80;
LAB_OVR28RiptosArena__8008b75c:
          puVar7[0xe] = 0xff;
        }
        puVar7[0xf] = 0x40;
        break;
      case 0x46:
        puVar7 = (undefined *)FUN_80041c50(1);
        *puVar7 = uVar1;
        iVar4 = rand();
        puVar7[2] = (byte)iVar4 & 0xf;
        puVar7[3] = 1;
        local_80 = 0;
        iVar4 = rand();
        local_7f = (undefined)iVar4;
        iVar4 = rand();
        local_7e = (undefined)iVar4;
        BuildRotationMatrix(&local_80,&MStack_78,(Mat33 *)0x0);
        local_90.y = 0;
        local_90.z = 0;
        local_90.x = (int)param_4;
        MatrixMultVector(&MStack_78,&local_90,&local_90);
        *(short *)(puVar7 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar7 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar7 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar7 + 10) = *(short *)(puVar7 + 4) + (short)local_90.x * 2;
        *(short *)(puVar7 + 0xc) = *(short *)(puVar7 + 6) + (short)local_90.y * 2;
        puVar7[0x17] = 2;
        puVar7[0x10] = 0xe0;
        puVar7[0x11] = 0xc0;
        puVar7[0x13] = 0x50;
        puVar7[0x12] = 0;
        puVar7[0x14] = 0xff;
        puVar7[0x15] = 0xff;
        puVar7[0x16] = 0x80;
        *(short *)(puVar7 + 0xe) = *(short *)(puVar7 + 8) + (short)local_90.z * 2;
        break;
      case 0x47:
        puVar7 = (undefined *)FUN_80041c50(1);
        *puVar7 = uVar1;
        iVar4 = rand();
        puVar7[2] = (byte)iVar4 & 7;
        puVar7[3] = 1;
        uVar5 = rand();
        local_58.x = (int)(((uVar5 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar5 = rand();
        local_58.y = (int)(((uVar5 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar5 = rand();
        local_58.z = (int)(((uVar5 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar7 + 4) = (short)(param_3->x >> 2) + (short)local_58.x * 4;
        *(short *)(puVar7 + 6) = (short)(param_3->y >> 2) + (short)local_58.y * 4;
        *(short *)(puVar7 + 8) = (short)(param_3->z >> 2) + (short)local_58.z * 4;
        *(short *)(puVar7 + 10) = *(short *)(puVar7 + 4) + (short)local_58.x;
        *(short *)(puVar7 + 0xc) = *(short *)(puVar7 + 6) + (short)local_58.y;
        puVar7[0x17] = 2;
        puVar7[0x10] = 0xe0;
        puVar7[0x11] = 0xe0;
        puVar7[0x12] = 0x60;
        puVar7[0x14] = 0xff;
        puVar7[0x15] = 0xff;
        puVar7[0x16] = 0xff;
        puVar7[0x13] = 0x50;
        *(short *)(puVar7 + 0xe) = *(short *)(puVar7 + 8) + (short)local_58.z;
        break;
      case 0x4e:
        puVar7 = (undefined *)FUN_80041c50(0);
        *puVar7 = uVar1;
        iVar4 = rand();
        puVar7[2] = (byte)iVar4 & 0x1f;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 4),param_3);
        iVar4 = rand();
        *(ushort *)(puVar7 + 4) = *(short *)(puVar7 + 4) + -0x20 + ((ushort)iVar4 & 0x3f);
        iVar4 = rand();
        *(ushort *)(puVar7 + 6) = *(short *)(puVar7 + 6) + -0x20 + ((ushort)iVar4 & 0x3f);
        iVar4 = rand();
        *(ushort *)(puVar7 + 8) = *(short *)(puVar7 + 8) + -0x20 + ((ushort)iVar4 & 0x3f);
        iVar4 = rand();
        *(ushort *)(puVar7 + 0x10) = ((ushort)iVar4 & 2) - 1;
        iVar4 = rand();
        *(ushort *)(puVar7 + 0x12) = ((ushort)iVar4 & 2) - 1;
        iVar4 = rand();
        *(ushort *)(puVar7 + 0x14) = -((ushort)iVar4 & 1);
        iVar4 = rand();
        puVar7[0xc] = (byte)iVar4 | 0x80;
        uVar5 = rand();
        uVar5 = (uVar5 & 0x7f) + 0x60;
        puVar7[0xd] = (char)uVar5;
        if ((byte)puVar7[0xc] < uVar5) {
          puVar7[0xd] = puVar7[0xc];
        }
        iVar4 = rand();
        puVar7[0xe] = ((byte)iVar4 & 0x3f) + 0x40;
        puVar7[0xf] = 0x40;
        puVar7[10] = 2;
        break;
      case 0x4f:
        puVar7 = (undefined *)FUN_80041c50(1);
        *puVar7 = uVar1;
        iVar4 = rand();
        puVar7[2] = (byte)iVar4 & 0xf;
        puVar7[3] = 1;
        VecIntToShort((VectorShort *)(puVar7 + 10),param_3);
        VectorAdd(&local_58,param_3,param_4);
        uVar5 = rand();
        local_58.x = local_58.x + -0x20 + (uVar5 & 0x3f);
        uVar5 = rand();
        local_58.y = local_58.y + -0x20 + (uVar5 & 0x3f);
        uVar5 = rand();
        local_58.z = local_58.z + -0x40 + (uVar5 & 0x7f);
        VecIntToShort((VectorShort *)(puVar7 + 4),&local_58);
        puVar7[0x17] = 2;
        iVar4 = rand();
        puVar7[0x10] = (byte)iVar4 | 0xc0;
        iVar4 = rand();
        puVar7[0x11] = ((byte)iVar4 & 0x3f) + 0xa0;
        puVar7[0x12] = 0;
        iVar4 = rand();
        puVar7[0x14] = (byte)iVar4 | 0xe0;
        iVar4 = rand();
        puVar7[0x15] = (byte)iVar4 | 0xe0;
        puVar7[0x16] = 0x80;
        puVar7[0x13] = 0x50;
      }
      local_30 = local_30 + 4;
      iVar8 = iVar8 + 1;
    } while (iVar8 < local_48);
  }
  return puVar7;
}



void FUN_OVR2IdolSprings__8006dca8(int param_1)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  undefined4 uVar6;
  int *piVar7;
  Vec3 *to;
  int local_90 [2];
  Vec3 VStack_88;
  int local_78;
  uint local_74;
  int local_70;
  int local_6c;
  undefined local_68 [8];
  Vec3 local_60;
  undefined4 local_54;
  undefined4 local_50;
  Vec3 local_48;
  Vec3 local_38;
  Vec3 local_28;
  
  DAT_80066f38 = inputStates + param_1 + 1;
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    if (cameraState != Look) {
      FUN_8002b36c(0x1200);
      FUN_8002bc68();
      FUN_8002bb24(0x5a,0x10);
    }
    break;
  case SuperchargeAscending:
    FUN_8002b4e4(local_90,1);
    Spyro.maybeTurnSpeed = local_90[0] >> 1;
    if (Spyro.maybeTurnSpeed < -0x19) {
      Spyro.maybeTurnSpeed = -0x19;
    }
    if (0x19 < Spyro.maybeTurnSpeed) {
      Spyro.maybeTurnSpeed = 0x19;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    FUN_8002bd70(0x240,0x180);
    iVar5 = cosineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.x = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    iVar5 = sineLookup(Spyro.rotation.Yaw);
    Spyro.field42_0x88.z = Spyro.trueVelocity.z;
    Spyro.field42_0x88.y = Spyro.maybeHorizontalSpeedDecay * iVar5 >> 0xc;
    FUN_8002c038();
    Spyro.field82_0x14c = Spyro.field82_0x14c + 0xc;
    if (0xc0 < Spyro.field82_0x14c) {
      Spyro.field82_0x14c = 0xc0;
    }
    Spyro.trueVelocity.z = Spyro.trueVelocity.z - Spyro.field82_0x14c;
    goto LAB_OVR2IdolSprings__8006eba8;
  case UnderwaterSwim:
    FUN_8002b694(&local_78,0x8006a144,0);
    if (Spyro.airVelocityFlag == FALLING) {
      local_74 = (0x200 - Spyro.rotation.Pitch) + Spyro.field82_0x14c * -0x10 & 0xfff;
      if (0x800 < local_74) {
        local_74 = local_74 - 0x1000;
      }
      Spyro.field82_0x14c = Spyro.field82_0x14c + 1;
      local_74 = (int)(local_74 << 7) >> 8;
      if (0x14 < Spyro.field82_0x14c) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    iVar5 = local_78 * 0x14 >> 7;
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar5 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + ((int)(local_74 * -0xf) >> 7) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    if (((DAT_80066f38->current & Cross) == None) && (Spyro.airVelocityFlag != FALLING)) {
      Spyro.maybeHorizontalSpeed = 0;
    }
    else {
      Spyro.maybeHorizontalSpeed = 0xe00;
    }
    if (Spyro.airVelocityFlag == PEAK) {
      FUN_8002bd70(0xc0,0xc0);
      if (Spyro.maybeHorizontalSpeedDecay < 0xe01) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    else {
      FUN_8002bd70(0xc0,0x30);
    }
    iVar2 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar5 * iVar2 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    uVar3 = rand();
    if (((uVar3 & 0x1f) == 0) && (DAT_800670fc != (code *)0x0)) {
      piVar7 = &local_70;
      local_70 = 0x220;
      local_6c = 0;
      local_68._0_4_ = 0x40;
LAB_OVR2IdolSprings__8006e4f0:
      (*DAT_800670fc)(1,0x2c,piVar7,0);
    }
    goto LAB_OVR2IdolSprings__8006e4f8;
  case UnderwaterIdle:
    if (cameraState != Look) {
      FUN_8002b694(&local_70,0x8006a144,0);
      iVar5 = local_70 * 0x14 >> 7;
      Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar5 & 0xfff;
      Spyro.rotation.Pitch = Spyro.rotation.Pitch + (local_6c * -0xf >> 7) & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
      }
      if (Spyro.rotation.Pitch < -800) {
        Spyro.rotation.Pitch = -800;
      }
      if (800 < Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = 800;
      }
      iVar2 = cosineLookup(Spyro.rotation.Pitch);
      Spyro.field84_0x154 =
           Spyro.field84_0x154 +
           (((iVar5 * iVar2 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
           ((Spyro.rotation.Roll << 6) >> 6));
      Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Roll) {
        Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
      }
      if (Spyro.rotation.Roll < -0x300) {
        Spyro.rotation.Roll = -0x300;
      }
      if (0x300 < Spyro.rotation.Roll) {
        Spyro.rotation.Roll = 0x300;
      }
    }
    VectorClear(&Spyro.field42_0x88);
    VectorClear(&Spyro.trueVelocity);
    uVar3 = rand();
    if (((uVar3 & 0x1f) == 0) && (DAT_800670fc != (code *)0x0)) {
      piVar7 = &local_60.z;
      local_60.z = 0x220;
      local_54 = 0;
      local_50 = 0x40;
      goto LAB_OVR2IdolSprings__8006e4f0;
    }
LAB_OVR2IdolSprings__8006e4f8:
    Spyro.field87_0x160 = Spyro.field87_0x160 + 1;
    break;
  case UnderwaterCharge:
    FUN_8002b694(local_68,0x8006a144,0);
    if (Spyro.airVelocityFlag == FALLING) {
      local_68._4_4_ = (0x200 - Spyro.rotation.Pitch) + Spyro.field82_0x14c * -0x10 & 0xfff;
      if (0x800 < (uint)local_68._4_4_) {
        local_68._4_4_ = local_68._4_4_ - 0x1000;
      }
      Spyro.field82_0x14c = Spyro.field82_0x14c + 1;
      local_68._4_4_ = local_68._4_4_ * 0x60 >> 8;
      if (0xc < Spyro.field82_0x14c) {
        Spyro.airVelocityFlag = NORMAL;
      }
    }
    iVar5 = local_68._0_4_ * 0x14 >> 7;
    Spyro.rotation.Yaw = Spyro.rotation.Yaw + iVar5 & 0xfff;
    Spyro.rotation.Pitch = Spyro.rotation.Pitch + (local_68._4_4_ * -0xf >> 7) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
    }
    if (Spyro.rotation.Pitch < -800) {
      Spyro.rotation.Pitch = -800;
    }
    if (800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = 800;
    }
    Spyro.maybeHorizontalSpeed = 0x1c00;
    FUN_8002bd70(0x240,0x30);
    iVar2 = cosineLookup(Spyro.rotation.Pitch);
    Spyro.field84_0x154 =
         Spyro.field84_0x154 +
         (((iVar5 * iVar2 * -0x20 >> 0xc) - ((Spyro.field84_0x154 << 4) >> 6)) -
         ((Spyro.rotation.Roll << 6) >> 6));
    Spyro.rotation.Roll = Spyro.rotation.Roll + (Spyro.field84_0x154 >> 6) & 0xfff;
    if (0x800 < (uint)Spyro.rotation.Roll) {
      Spyro.rotation.Roll = Spyro.rotation.Roll - 0x1000;
    }
    if (Spyro.rotation.Roll < -0x300) {
      Spyro.rotation.Roll = -0x300;
    }
    if (0x300 < Spyro.rotation.Roll) {
      Spyro.rotation.Roll = 0x300;
    }
    FUN_8002bdbc();
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    if ((DAT_800670fc != (code *)0x0) && (2000 < Spyro.field49_0xbc)) {
      local_60.x = -400;
      uVar3 = rand();
      local_60.y = 0x40 - (uVar3 & 0x7f);
      local_60.z = -300;
      (*DAT_800670fc)(1,0x2c,local_68 + 8,0);
    }
    break;
  case WaterSwim:
  case WaterIdle:
    if (Spyro.airVelocityFlag == FALLING) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      if (cameraState == Look) {
        Spyro.maybeHorizontalSpeedDecay = 0;
      }
      else {
        FUN_8002b36c(0x980);
        iVar5 = FUN_8002bb24(0x5a,0x10);
        if (iVar5 < 0) {
          iVar5 = -iVar5;
        }
        if (0x200 < iVar5) {
          Spyro.maybeHorizontalSpeed = 0;
        }
        uVar4 = 0xc0;
        if (Spyro.maybeHorizontalSpeedDecay < 0xc81) {
          uVar6 = 0x40;
        }
        else {
          uVar4 = 0;
          uVar6 = 0xc0;
        }
        FUN_8002bd70(uVar4,uVar6);
      }
      if (Spyro.maybeHorizontalSpeedDecay == 0) {
        VectorClear(&Spyro.field42_0x88);
        VectorClear(&Spyro.trueVelocity);
      }
      else {
        FUN_8002bdbc();
        FUN_8002c038();
        Spyro.trueVelocity.z = 0;
      }
      if ((DAT_800670fc != (code *)0x0) && (Spyro.field17_0x28 < 0)) {
        if ((Spyro.maybeHorizontalSpeedDecay < 0x401) ||
           ((1 < param_1 || (to = (Vec3 *)(local_68 + 8), (DAT_80067008 & 1) == 0)))) {
          if ((Spyro.maybeHorizontalSpeedDecay < 0x201) &&
             (((param_1 == 0 && ((DAT_80067008 & 7) == 0)) && (uVar3 = rand(), (uVar3 & 3) == 0))))
          {
            local_28.x = 0x80;
            local_28.y = 0;
            local_28.z = 0;
            MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_28,&local_28);
            VectorAdd(&local_28,&local_28,&Spyro.position);
            local_28.z = -Spyro.field17_0x28;
            (*DAT_800670fc)(1,0x2b,&local_28,1);
          }
        }
        else {
          VectorCopy(to,&Spyro.position);
          local_48.y = 0x40;
          local_48.z = 0;
          local_48.x = Spyro.maybeHorizontalSpeedDecay >> 5;
          if (param_1 != 0) {
            local_48.y = -0x40;
          }
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&local_38);
          VectorAdd(to,to,&local_38);
          local_48.x = 0;
          local_60.z = -Spyro.field17_0x28;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_48,&local_48);
          VectorShiftRight(&local_48,3);
          (*DAT_800670fc)(1,0x2a,to,&local_48);
          uVar3 = rand();
          if ((uVar3 & 0x1f) == 0) {
            (*DAT_800670fc)(1,0x29,to,0);
          }
        }
      }
      Spyro.field82_0x14c =
           Spyro.field82_0x14c - (Spyro.field83_0x150 * 2 + Spyro.field82_0x14c * 0x14 >> 8);
      Spyro.field83_0x150 = Spyro.field83_0x150 + Spyro.field82_0x14c;
      if (0x5900 < Spyro.field83_0x150) {
        Spyro.field83_0x150 = 0x5900;
      }
      if (Spyro.field83_0x150 < -0x5900) {
        Spyro.field83_0x150 = -0x5900;
      }
    }
    break;
  case HurtYawSpin:
    if (0x12 < Spyro.field35_0x5c + param_1) {
      Spyro.field42_0x88.x = Spyro.trueVelocity.x * 0xe0;
      Spyro.field42_0x88.y = Spyro.trueVelocity.y * 0xe0;
      Spyro.field42_0x88.z = Spyro.trueVelocity.z * 0xe0;
      VectorShiftRight(&Spyro.field42_0x88,8);
    }
    VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    Spyro.trueVelocity.z = Spyro.trueVelocity.z + -0xc0;
LAB_OVR2IdolSprings__8006eba8:
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    break;
  case 0x3b:
    if (Spyro.airTime == 0) {
      VectorClear(&Spyro.field42_0x88);
      VectorClear(&Spyro.trueVelocity);
    }
    else {
      VectorClear(&VStack_88);
      VectorSubtract(&VStack_88,&VStack_88,&Spyro.trueVelocity);
      VStack_88.z = 0;
      iVar5 = VectorLength(&VStack_88,0);
      if (0x40 < iVar5) {
        VectorScale(&VStack_88,iVar5,0x40);
      }
      VStack_88.z = -0xc0;
      VectorAdd(&Spyro.field42_0x88,&Spyro.trueVelocity,&VStack_88);
      VectorCopy(&Spyro.trueVelocity,&Spyro.field42_0x88);
    }
    if (Spyro.trueVelocity.z < -0x2300) {
      Spyro.trueVelocity.z = -0x2300;
    }
    if (((Spyro.state == DeathBurn) && (DAT_800670fc != (code *)0x0)) && ((DAT_80067008 & 1) != 0))
    {
      local_78 = 0;
      local_74 = 0;
      local_70 = 0xe;
      VectorCopy((Vec3 *)local_68,&Spyro.position);
      iVar5 = RandomRangeGen(0,300);
      local_68._0_4_ = local_68._0_4_ + iVar5;
      iVar5 = RandomRangeGen(0,300);
      local_68._4_4_ = local_68._4_4_ + iVar5;
      iVar5 = RandomRangeGen(0,300);
      local_60.x = local_60.x + iVar5;
      iVar5 = (*DAT_800670fc)(1,0xd,(Vec3 *)local_68,&local_78);
      *(undefined *)(iVar5 + 2) = 6;
      *(undefined *)(iVar5 + 10) = 0x20;
    }
    break;
  case Supercharge:
    FUN_8002b4e4(&local_38,1);
    iVar5 = local_38.x * 0x23 >> 7;
    if (iVar5 == 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    else if (iVar5 < 0) {
      if (0 < Spyro.maybeTurnSpeed) {
        Spyro.maybeTurnSpeed = 0;
      }
    }
    else if (Spyro.maybeTurnSpeed < 0) {
      Spyro.maybeTurnSpeed = 0;
    }
    if (Spyro.maybeTurnSpeed < iVar5) {
      bVar1 = iVar5 < Spyro.maybeTurnSpeed + 8;
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + 8;
    }
    else {
      Spyro.maybeTurnSpeed = Spyro.maybeTurnSpeed + -8;
      bVar1 = Spyro.maybeTurnSpeed < iVar5;
    }
    if (bVar1) {
      Spyro.maybeTurnSpeed = iVar5;
    }
    FUN_8002b9a0(Spyro.maybeTurnSpeed);
    if (0x800 < Spyro.rotation.Pitch) {
      Spyro.rotation.Pitch = Spyro.rotation.Pitch + -0x1000;
    }
    if (Spyro.rotation.Pitch < 0) {
      iVar5 = DAT_8006019c - DAT_80060198;
LAB_OVR2IdolSprings__8006ed0c:
      Spyro.maybeHorizontalSpeed = DAT_8006019c + (Spyro.rotation.Pitch * iVar5) / 0x160;
    }
    else {
      if (0 < Spyro.rotation.Pitch) {
        iVar5 = DAT_800601a0 - DAT_8006019c;
        goto LAB_OVR2IdolSprings__8006ed0c;
      }
      Spyro.maybeHorizontalSpeed = DAT_8006019c;
    }
    FUN_8002bd70(0x240,0x180);
    FUN_8002bdbc();
    if ((Spyro.ledgeDetected == '\0') && (Spyro.airTime == 0)) {
      VectorAdd(&Spyro.trueVelocity,&Spyro.field42_0x88,&Spyro.field56_0xf0);
    }
    else {
      Spyro.trueVelocity.z = Spyro.physicsVelocity.z + -0xc0;
    }
  }
  return;
}



void FUN_OVR2IdolSprings__8006ede0(void)

{
  int iVar1;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar1 = FUN_8002d9c4();
    if (iVar1 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    goto LAB_OVR2IdolSprings__8006f1d0;
  default:
    goto switchD_OVR2IdolSprings__8006ee14_caseD_14;
  case SuperchargeAscending:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    FUN_80032b94();
    if ((Spyro.maybeSubstate == Supercharge) && (DAT_800670fc != (code *)0x0)) {
      (*DAT_800670fc)(1,9,0,0);
    }
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = FALLING;
    }
    else if ((Spyro.airVelocityFlag == NORMAL) && ((inputStates[0].current & Cross) == None)) {
      Spyro.airVelocityFlag = PEAK;
    }
    break;
  case UnderwaterSwim:
  case UnderwaterIdle:
    FUN_8002c0f4();
    FUN_8002cc88();
    iVar1 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field169_0x264);
    if (iVar1 != 0) {
      if ((int)(&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] < 200) {
        (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] =
             (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] + -200;
      }
      (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] =
           (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] | 0x10;
    }
    break;
  case UnderwaterCharge:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_80032b94();
    iVar1 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field169_0x264);
    if (iVar1 == 0) {
      Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 6),0,4);
      if (-1 < Spyro.field169_0x264) {
        FUN_80050c64(Spyro.field169_0x264,0x157c);
        FUN_80050cf4(Spyro.field169_0x264,400);
      }
      Spyro.field170_0x268 = (int)*(byte *)(audioBank + 6);
    }
    iVar1 = FUN_80050b20(*(undefined *)(audioBank + 6),Spyro.field169_0x264);
    if (iVar1 != 0) {
      if ((int)(&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] < 0x13e8) {
        (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] =
             (&DAT_80069a1c)[Spyro.field169_0x264 * 0xb] + 200;
      }
      (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] =
           (&DAT_80069a12)[Spyro.field169_0x264 * 0x2c] | 0x10;
    }
    break;
  case WaterSwim:
  case WaterIdle:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002bfbc();
    if (Spyro.field63_0x108 == '\0') {
      return;
    }
    iVar1 = FUN_800398b0(Spyro.position.x,Spyro.position.y);
    Spyro.position.z =
         (Spyro.field172_0x270 - (-iVar1 - Spyro.field57_0xfc)) - (Spyro.field83_0x150 >> 6);
    Spyro.field17_0x28 = -iVar1 - Spyro.field57_0xfc;
    return;
  case HurtYawSpin:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    break;
  case 0x3b:
    FUN_8002c0f4();
LAB_OVR2IdolSprings__8006f1d0:
    FUN_8002cc88();
    break;
  case Supercharge:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    FUN_80032b94();
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(1,9,0,0);
    }
    DAT_80068398 = 0x78;
    Spyro.field17_0x28 = 0;
    DAT_80068394 = 4;
    if ((currGameState == Normal) &&
       (iVar1 = FUN_80050b20(*(undefined *)(audioBank + 0x1a),Spyro.field169_0x264), iVar1 == 0)) {
      Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 0x1a),0,4);
      Spyro.field170_0x268 = (int)*(byte *)(audioBank + 0x1a);
    }
    goto switchD_OVR2IdolSprings__8006ee14_caseD_14;
  }
  Spyro.field17_0x28 = 0;
switchD_OVR2IdolSprings__8006ee14_caseD_14:
  return;
}



void FUN_OVR2IdolSprings__8006f2c0(void)

{
  undefined uVar1;
  
  if (Spyro.currentAnimationState == 0x2b) {
    if (Spyro.currentAnimationFrame != 1) {
      return;
    }
    uVar1 = *(undefined *)(audioBank + 10);
  }
  else {
    if (Spyro.currentAnimationState != 0x3b) {
      return;
    }
    if (Spyro.currentAnimationFrame != 0x15) {
      return;
    }
    uVar1 = *(undefined *)(audioBank + 0xd);
  }
  PlayAudio(uVar1,0,0);
  Spyro.field174_0x278 = (uint)Spyro.currentAnimationFrame;
  return;
}



void FUN_OVR2IdolSprings__8006f364(int param_1)

{
  DAT_80066f38 = param_1 * 0x10 + -0x7ff97c50;
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
  case WaterSwim:
  case WaterIdle:
  case HurtYawSpin:
  case 0x3b:
  case Supercharge:
    FUN_8002db8c(0x8006a0c4);
    break;
  case SuperchargeAscending:
    FUN_8002ded0(0x8006a084);
  }
  return;
}



void FUN_OVR2IdolSprings__8006f3ec(SpyroState param_1)

{
  Substate SVar1;
  undefined uVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  Vec3 VStack_40;
  Vec3 VStack_30;
  Vec3 VStack_20;
  
  SVar1 = Spyro.maybeSubstate;
  switch(param_1) {
  case IdleLook:
  case IdleSit:
    Spyro.maybeSubstate = Idle;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002e2bc();
    Spyro.field118_0x1bc = '\x01';
    uVar3 = 1;
    if (param_1 == 0x25) {
      uVar3 = 5;
      uVar4 = 8;
    }
    else {
      uVar4 = 3;
    }
    Spyro.field82_0x14c = randomRangeGen(uVar3,uVar4);
    Spyro.field83_0x150 = 0;
    if (DAT_800670b4 != (code *)0x0) {
      if (param_1 == 0x25) {
        uVar3 = 0x1f1;
      }
      else {
        uVar3 = 0x1db;
        if (param_1 != 0x27) {
          Spyro.field83_0x150 = 0;
          return;
        }
      }
      (*DAT_800670b4)(uVar3,0);
    }
    break;
  case SuperchargeAscending:
    Spyro.maybeSubstate = Supercharge;
    Spyro.field77_0x138 = 0x60000;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = 0;
    Spyro.field118_0x1bc = '\0';
    Spyro.field119_0x1bd = '\x01';
    uVar2 = *(undefined *)(audioBank + 0x22);
    goto LAB_OVR2IdolSprings__8006fb48;
  case UnderwaterSwim:
  case UnderwaterIdle:
    if ((Spyro.maybeSubstate + ~Swim < 2) || (Spyro.maybeSubstate == Hurt)) {
      if (Spyro.state == UnderwaterCharge) {
        Spyro.airVelocityFlag = PEAK;
        goto LAB_OVR2IdolSprings__8006f704;
      }
    }
    else {
      if (DAT_800670fc != (code *)0x0) {
        VectorCopy(&VStack_40,&Spyro.position);
        if ((Spyro.maybeSubstate == Swim) && (Spyro.field17_0x28 < 0)) {
          VStack_40.z = -Spyro.field17_0x28;
          (*DAT_800670fc)(6,0x2e,&VStack_40,0);
          uVar3 = 4;
          uVar4 = 0x29;
LAB_OVR2IdolSprings__8006f630:
          (*DAT_800670fc)(uVar3,uVar4,&VStack_40,0);
        }
        else if (Spyro.maybeSubstate == Charge) {
          VStack_40.z = VStack_40.z + 0x400;
          VStack_40.z = RaycastDown(&VStack_40,0x800);
          if ((VStack_40.z != 0) && (uVar3 = 6, isOnWaterSurface != 0)) {
            uVar4 = 0x2e;
            goto LAB_OVR2IdolSprings__8006f630;
          }
        }
      }
      Spyro.rotation.Pitch = Spyro.rotation.Pitch & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
      }
      if (0 < Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = 0;
      }
      if (param_1 == UnderwaterSwim) {
        Spyro.airVelocityFlag = FALLING;
      }
      VectorClear((Vec3 *)&Spyro.field84_0x154);
      Spyro.field82_0x14c = 0;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      PlayAudio(*(undefined *)(audioBank + 8),0,0);
LAB_OVR2IdolSprings__8006f704:
      Spyro.field87_0x160 = 0;
    }
    Spyro.maybeSubstate = UnderwaterSwim;
    break;
  case UnderwaterCharge:
    if (1 < Spyro.maybeSubstate + ~Swim) {
      if (DAT_800670fc != (code *)0x0) {
        VectorCopy(&VStack_30,&Spyro.position);
        if ((Spyro.maybeSubstate == Swim) && (Spyro.field17_0x28 < 0)) {
          VStack_30.z = -Spyro.field17_0x28;
          (*DAT_800670fc)(6,0x2e,&VStack_30,0);
          uVar3 = 4;
          uVar4 = 0x29;
LAB_OVR2IdolSprings__8006f7fc:
          (*DAT_800670fc)(uVar3,uVar4,&VStack_30,0);
        }
        else if (Spyro.maybeSubstate == Charge) {
          VStack_30.z = VStack_30.z + 0x400;
          VStack_30.z = RaycastDown(&VStack_30,0x800);
          if ((VStack_30.z != 0) && (uVar3 = 6, isOnWaterSurface != 0)) {
            uVar4 = 0x2e;
            goto LAB_OVR2IdolSprings__8006f7fc;
          }
        }
      }
      if (Spyro.state == HeadBash) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch + -0x400;
      }
      Spyro.rotation.Pitch = Spyro.rotation.Pitch & 0xfff;
      if (0x800 < (uint)Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = Spyro.rotation.Pitch - 0x1000;
      }
      if (0 < Spyro.rotation.Pitch) {
        Spyro.rotation.Pitch = 0;
      }
      Spyro.airVelocityFlag = FALLING;
      VectorClear((Vec3 *)&Spyro.field84_0x154);
      Spyro.field82_0x14c = 0;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      PlayAudio(*(undefined *)(audioBank + 8),0,0);
    }
    Spyro.maybeSubstate = UnderwaterCharge;
    Spyro.field77_0x138 = 0x20000;
    break;
  case WaterSwim:
  case WaterIdle:
    if (Spyro.maybeSubstate != Swim) {
      PlayAudio(*(undefined *)(audioBank + 7),0,0);
      Spyro.field82_0x14c = -Spyro.trueVelocity.z >> 2;
      if (Spyro.maybeSubstate != Death) {
        Spyro.field83_0x150 = 0x5900;
        Spyro.maybeSubstate = Swim;
      }
      Spyro.airVelocityFlag = NORMAL;
      Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
      Spyro.field118_0x1bc = '\x01';
      Spyro.field119_0x1bd = '\x01';
      VectorCopy(&VStack_20,&Spyro.position);
      VStack_20.z = VStack_20.z + 0x400;
      VStack_20.z = RaycastDown(&VStack_20,0x800);
      if (((VStack_20.z != 0) && (isOnWaterSurface != 0)) && (DAT_800670fc != (code *)0x0)) {
        (*DAT_800670fc)(10,0x29,&VStack_20,0);
        (*DAT_800670fc)(6,0x2e,&VStack_20,0);
      }
    }
    break;
  case HurtYawSpin:
    Spyro.maybeSubstate = Hurt;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field82_0x14c = SVar1;
    if ((Spyro.field150_0x20c & 0x400U) == 0) {
      if (Spyro.field173_0x274 < 0) {
        VectorClear(&Spyro.trueVelocity);
      }
      else {
        Spyro.trueVelocity.x = (int)cosineLookupTable[Spyro.field173_0x274] >> 1;
        Spyro.trueVelocity.z = 0;
        Spyro.trueVelocity.y = (int)sineLookupTable[Spyro.field173_0x274] >> 1;
      }
    }
    else {
      VectorCopy(&Spyro.trueVelocity,&Spyro.field154_0x21c);
      VectorShiftUp(&Spyro.trueVelocity,6);
    }
    VectorCopy(&Spyro.field42_0x88,&Spyro.trueVelocity);
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    DAT_8006838c = 0xf;
    if (DAT_800670fc != (code *)0x0) {
      (*DAT_800670fc)(5,10,0,0);
    }
    uVar2 = *(undefined *)(audioBank + 0x13);
    goto LAB_OVR2IdolSprings__8006fb48;
  case 0x3b:
    Spyro.maybeSubstate = Death;
    Spyro.airVelocityFlag = NORMAL;
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    if (param_1 != DeathBurn) {
      Spyro.field118_0x1bc = '\x01';
      return;
    }
    uVar2 = *(undefined *)(audioBank + 0xc);
LAB_OVR2IdolSprings__8006fb48:
    PlayAudio(uVar2,0,0);
    break;
  case Supercharge:
    Spyro.maybeSubstate = Supercharge;
    Spyro.airVelocityFlag = NORMAL;
    Spyro.field77_0x138 = 0x60000;
    Spyro.maybeHorizontalSpeedDecay = VectorLength(&Spyro.physicsVelocity,0);
    Spyro.maybeHorizontalSpeed = 0x1e80;
    FUN_8002db08(0xc00);
    Spyro.field118_0x1bc = '\x01';
    if (((Spyro.field90_0x16c != 0) || (Spyro.field140_0x1fc != 0)) || (Spyro.field141_0x200 != 6))
    {
      Spyro.field90_0x16c = 0;
      Spyro.field140_0x1fc = 0;
      Spyro.field141_0x200 = 6;
      FUN_80030a14();
    }
  }
  return;
}



void FUN_OVR2IdolSprings__8006fc20(void)

{
  int iVar1;
  CollisionType CVar2;
  SpyroState SVar3;
  
  switch(Spyro.state) {
  case IdleLook:
  case IdleSit:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    SVar3 = Jump;
    if ((inputStates[0].pressed & Cross) == None) {
      CVar2 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar2 == Ice) {
        SVar3 = Ice;
joined_r0x800702a8:
        if (DAT_8006839d != '\0') {
          return;
        }
      }
      else {
        SVar3 = Flop;
        if (((Spyro.airTime < 4) && (Spyro.field55_0xec < 0x17)) &&
           (SVar3 = Charge, (inputStates[0].current & Square) == None)) {
          iVar1 = Spyro.maybeTurnSpeed;
          if (Spyro.maybeTurnSpeed < 0) {
            iVar1 = -Spyro.maybeTurnSpeed;
          }
          if (iVar1 < 0x11) {
            if (((inputStates[0].current & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) ==
                 (TriggerLeft|TriggerRight)) || (SVar3 = Walk, Spyro.maybeHorizontalSpeed == 0)) {
              if ((cameraState == Look) || (Spyro.field162_0x240 != 0)) {
                if (Spyro.state == Idle) {
                  return;
                }
                SetSpyroState(Idle);
                if (0x5f < (byte)(&DAT_80062868)[Spyro.field11_0x1c]) {
                  Spyro.currentAnimationState = Spyro.nextAnimationState;
                  Spyro.currentAnimationFrame = Spyro.nextAnimationFrame;
                }
                Spyro.nextAnimationState = (byte)Spyro.state;
                Spyro.nextAnimationFrame = 0;
                Spyro.field11_0x1c = 0x71;
                Spyro.field136_0x1ec = Spyro.state;
                Spyro.field137_0x1f0 = 0;
                return;
              }
              SVar3 = IdleLedge;
              if (Spyro.ledgeDetected == '\0') {
                FUN_80032c34();
                return;
              }
            }
          }
          else {
            SVar3 = Walk;
          }
        }
      }
    }
    break;
  default:
    goto switchD_OVR2IdolSprings__8006fc54_caseD_14;
  case SuperchargeAscending:
    iVar1 = FUN_8002b228();
    if (iVar1 != 0) {
      return;
    }
    if ((Spyro.field119_0x1bd != '\0') && ((inputStates[0].pressed & Cross) != None)) {
      Spyro.field120_0x1be = '\x01';
    }
    if (((Spyro.field55_0xec < 0x17) ||
        (SVar3 = Bonk,
        -1 < Spyro.trueVelocity.x * Spyro.field53_0xd4.x +
             Spyro.trueVelocity.y * Spyro.field53_0xd4.y)) &&
       (((Spyro.maybeHorizontalSpeedDecay < 0xc81 ||
         (SVar3 = Bonk, Spyro.maybeHorizontalSpeedDecay <= Spyro.field49_0xbc << 1)) &&
        ((Spyro.airTime != 0 || (SVar3 = Supercharge, Spyro.field35_0x5c < 5)))))) {
      if (Spyro.field120_0x1be == '\0') {
        SVar3 = ChargeAir;
      }
      else {
        SVar3 = Glide;
      }
      if (-1 < Spyro.trueVelocity.z) {
        return;
      }
    }
    break;
  case UnderwaterSwim:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if ((((inputStates[0].current & Square) == None) ||
        (SVar3 = UnderwaterCharge, Spyro.airVelocityFlag == FALLING)) &&
       (SVar3 = UnderwaterIdle, Spyro.maybeHorizontalSpeedDecay != 0)) {
      return;
    }
    break;
  case UnderwaterIdle:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if ((inputStates[0].current & Square) == None) {
      if (cameraState == Look) {
        return;
      }
      SVar3 = UnderwaterSwim;
      if ((inputStates[0].current & Cross) == None) {
        return;
      }
    }
    else {
      SVar3 = UnderwaterCharge;
    }
    break;
  case UnderwaterCharge:
    iVar1 = FUN_8002b228();
    if (iVar1 != 0) {
      return;
    }
    if ((inputStates[0].current & Square) != None) {
      return;
    }
    SVar3 = UnderwaterSwim;
    if (Spyro.airVelocityFlag == FALLING) {
      return;
    }
    break;
  case WaterSwim:
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) == None) || (SVar3 = Jump, Spyro.field35_0x5c < 9)) {
      if (Spyro.field63_0x108 == '\0') {
        SVar3 = Flop;
        goto LAB_OVR2IdolSprings__8007012c;
      }
      if ((((inputStates[0].pressed & Square) != None) && (8 < Spyro.field35_0x5c)) &&
         (globalProgressFlags.swim.isPayed != 0)) {
        iVar1 = FUN_8003ee3c(&Spyro,0x400,1,0);
        SVar3 = UnderwaterSwim;
        if (iVar1 == 0) break;
      }
    }
    else {
LAB_OVR2IdolSprings__8007012c:
      SetSpyroState(SVar3);
    }
    SVar3 = WaterIdle;
    if (DAT_8006839d == '\0') {
      return;
    }
    break;
  case WaterIdle:
    if (Spyro.airVelocityFlag == FALLING) {
      if (DAT_8006abf8 != '\0') {
        return;
      }
      if (((inputStates[0].pressed & (Triangle|Cross|Start)) == None) && (Spyro.field35_0x5c < 0x3d)
         ) {
        return;
      }
      if (DAT_80066f8c != (code *)0x0) {
        (*DAT_80066f8c)();
        return;
      }
      goto LAB_OVR2IdolSprings__80070350;
    }
    iVar1 = maybeTakeDamage();
    if (iVar1 != 0) {
      return;
    }
    if (((inputStates[0].pressed & Cross) == None) || (SVar3 = Jump, Spyro.field35_0x5c < 9)) {
      if (Spyro.field63_0x108 != '\0') {
        if ((((inputStates[0].pressed & Square) != None) && (8 < Spyro.field35_0x5c)) &&
           (globalProgressFlags.swim.isPayed != 0)) {
          iVar1 = FUN_8003ee3c(&Spyro,0x400,1,0);
          SVar3 = UnderwaterSwim;
          if (iVar1 == 0) break;
        }
        if (cameraState == Look) {
          return;
        }
        SVar3 = WaterSwim;
        goto joined_r0x800702a8;
      }
      SVar3 = Flop;
    }
    break;
  case HurtYawSpin:
    if (Spyro.field35_0x5c < 0x19) {
      return;
    }
    if (Spyro.health < 0) {
      SVar3 = DeathPirouette;
    }
    else if (Spyro.field82_0x14c == 10) {
      SVar3 = WaterIdle;
    }
    else if (Spyro.field82_0x14c - 0xbU < 2) {
      SVar3 = UnderwaterIdle;
    }
    else {
      SVar3 = Idle;
      if (Spyro.airTime != 0) {
        SVar3 = Flop;
      }
    }
    break;
  case 0x3b:
    if (Spyro.field35_0x5c < 99) {
      return;
    }
LAB_OVR2IdolSprings__80070350:
    OnDeath();
    return;
  case Supercharge:
    iVar1 = FUN_8002b228();
    if (iVar1 != 0) {
      return;
    }
    if (Spyro.airVelocityFlag == FALLING) {
      if (3 < Spyro.airTime) {
LAB_OVR2IdolSprings__800703dc:
        SetSpyroState(SuperchargeAscending);
        Spyro.trueVelocity.z = 0xdc0;
        Spyro.airTime = Spyro.airTime + 1;
        return;
      }
      CVar2 = GetCollisiontType(Spyro.field72_0x114);
      if (CVar2 != Ramp) {
        Spyro.airVelocityFlag = NORMAL;
      }
LAB_OVR2IdolSprings__800704f4:
      if (Spyro.maybeHorizontalSpeedDecay < 0xc81) {
        return;
      }
      SVar3 = Bonk;
      if (Spyro.maybeHorizontalSpeedDecay <= Spyro.field49_0xbc << 1) {
        return;
      }
    }
    else {
      if ((inputStates[0].current & Cross) != None) goto LAB_OVR2IdolSprings__800703dc;
      SVar3 = SuperchargeAscending;
      if ((Spyro.airTime < 4) &&
         ((Spyro.field55_0xec < 0x17 ||
          (SVar3 = Flop,
          -1 < Spyro.field53_0xd4.x * Spyro.trueVelocity.x +
               Spyro.field53_0xd4.y * Spyro.trueVelocity.y)))) {
        if ((Spyro.airVelocityFlag == PEAK) && (0xf < Spyro.field35_0x5c)) {
          Spyro.airVelocityFlag = NORMAL;
        }
        if ((((inputStates[0].current & Square) != None) || (-1 < inSpeedwayFlag)) ||
           (SVar3 = Run, Spyro.airVelocityFlag == PEAK)) goto LAB_OVR2IdolSprings__800704f4;
      }
    }
  }
  SetSpyroState(SVar3);
switchD_OVR2IdolSprings__8006fc54_caseD_14:
  return;
}



void FUN_OVR2IdolSprings__80070548(void)

{
  int iVar1;
  int iVar2;
  
  iVar2 = DAT_80067fbc + 2 >> 2;
  if (4 < iVar2) {
    iVar2 = 4;
  }
  if (cameraState != AlchemistRelated) {
    if ((int)cameraState < 0x12) {
      if (cameraState != ChaseSwim) {
        return;
      }
      if (DAT_80067fb8 == 0) {
        OrbitRotateLongitude(&Orbit_80067f14,(Orbit *)&DAT_800615d8,DAT_80067ef0);
        Orbit_80067f14.Latitude = -Spyro.rotation.Pitch;
        iVar1 = Orbit_80067f14.Latitude - Orbit_80067f00.Latitude >> 2;
        Orbit_80067f14.Pitch = iVar1;
        if (0xc0 < iVar1) {
          Orbit_80067f14.Pitch = 0xc0;
        }
        if (iVar1 < -0xc0) {
          Orbit_80067f14.Pitch = -0xc0;
        }
        iVar1 = Orbit_80067f14.Pitch;
        if (Orbit_80067f14.Pitch < 0) {
          iVar1 = -Orbit_80067f14.Pitch;
        }
        if (iVar1 < 9) {
          Orbit_80067f14.Pitch = 0;
        }
        Orbit_80067f14.Yaw = -Spyro.rotation.Roll >> 2;
        InputRotateCamera(0x180);
        FUN_8001f0bc();
      }
      VectorCopy(&Vec3_80067ee4,&Spyro.position);
      DAT_80067ef0 = Spyro.rotation.Yaw;
      OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar2 * 0x14 + -0x7ff9e8d4),0);
      if (cameraOrbitAcceleration_Scale.Longitude < 0x80) {
        cameraOrbitAcceleration_Scale.Longitude = 0x80;
      }
      if (cameraOrbitAcceleration_Scale.Latitude < 0x60) {
        cameraOrbitAcceleration_Scale.Latitude = 0x60;
      }
      if (cameraOrbitAcceleration_Scale.Yaw < 0x40) {
        cameraOrbitAcceleration_Scale.Yaw = 0x40;
      }
      OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar2 * 0x14 + -0x7ff9e848),0);
      OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
      OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
      return;
    }
    if (cameraState != 0x1a) {
      return;
    }
    if (DAT_80067fb8 == 0) {
      OrbitRotateLongitude(&Orbit_80067f14,&Orbit_800616f0,DAT_80067ef0);
    }
    VectorCopy(&Vec3_80067ee4,&Spyro.position);
    DAT_80067ef0 = (uint)*(byte *)(DAT_80067ff0 + 0x46) << 4;
    OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar2 * 0x14 + -0x7ff9e8d4),0);
    OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar2 * 0x14 + -0x7ff9e848),0);
    OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
    OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
    if ((DAT_80067edc & 2) != 0) {
      return;
    }
    if (0x4b < cameraOrbitAcceleration_Scale.Longitude) {
      return;
    }
    cameraOrbitAcceleration_Scale.Longitude = 0x4c;
    return;
  }
  if (DAT_80067fb8 == 0) {
    OrbitRotateLongitude(&Orbit_80067f14,&Orbit_80067ff4,DAT_80067ef0);
    InputRotateCamera(0x400);
    if (cameraRotateInput != 0) {
      if (INT_80067ed4 != 1) goto LAB_OVR2IdolSprings__8007081c;
      INT_80067ed4 = 0;
    }
  }
  if ((INT_80067ed4 == 1) && (cameraStateLookup[Spyro.state] != Align)) {
    INT_80067ed4 = 0;
  }
LAB_OVR2IdolSprings__8007081c:
  VectorCopy(&Vec3_80067ee4,&Spyro.position);
  DAT_80067ef0 = Spyro.rotation.Yaw;
  OrbitRotateLongitude(&cameraOrbitAcceleration_Scale,(Orbit *)(iVar2 * 0x14 + -0x7ff9e8d4),0);
  OrbitRotateLongitude(&cameraOrbitDrag,(Orbit *)(iVar2 * 0x14 + -0x7ff9e848),0);
  OrbitRotateLongitude(&Orbit_80067fa0,&Orbit_80061844,0);
  if ((INT_80067ed4 == 1) && (8 < Orbit_80067fa0.Longitude)) {
    Orbit_80067fa0.Longitude = 8;
  }
  OrbitRotateLongitude(&Orbit_80067f8c,&Orbit_80061858,0);
  if (((DAT_80067edc & 2) == 0) && (cameraOrbitAcceleration_Scale.Longitude < 0x4c)) {
    cameraOrbitAcceleration_Scale.Longitude = 0x4c;
  }
                    // WARNING: Read-only address (ram,0x80067f04) is written
  return;
}



void FUN_OVR2IdolSprings__80070a20(void)

{
  FUN_8001db58();
  UpdateCameraOrbitPhysics();
  return;
}



void FUN_OVR2IdolSprings__80070a48(int param_1)

{
  if (param_1 == 0x11) {
    DAT_80067fc5 = 0;
  }
  else if (param_1 < 0x12) {
    if (param_1 != 4) {
      return;
    }
    DAT_80067fc5 = 0;
    DAT_80067ee0 = 0;
  }
  else {
    if (param_1 != 0x1a) {
      return;
    }
    DAT_80067fc5 = 1;
  }
  DAT_80067fc9 = 0;
  DAT_80067fc6 = 1;
  DAT_80067fc4 = 0;
  INT_80067ed4 = 0;
  VectorCopy(&Vec3_80067ee4,&Spyro.position);
  DAT_80067ef0 = Spyro.rotation.Yaw;
  FUN_8001ee18(&Orbit_80067f00,&cameraPosition,&Spyro);
  FUN_8001efa8(&Orbit_80067f00,&Orbit_80067f00);
  OrbitRotateLongitude(&cameraOrbitPosition,&Orbit_80067f00,0);
  return;
}



void FUN_OVR2IdolSprings__80070bac(void)

{
  CameraState CVar1;
  
  CVar1 = DAT_80067fec;
  if (cameraState == AlchemistRelated) {
    if (DAT_80067fec == Align) {
      CVar1 = cameraStateLookup[Spyro.state];
    }
    else if (((DAT_80067fec == AlchemistRelated) &&
             (((inputStates[0].current & Triangle) == None ||
              (CVar1 = Look, Spyro.field123_0x1c1 == '\0')))) &&
            (((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) == None
             || ((((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
                  ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)) ||
                 (CVar1 = QuickAlign, Spyro.field162_0x240 != 0)))))) {
      if (cameraStateLookup[Spyro.state] != Align) {
        return;
      }
      if ((DAT_80067edc & 1) == 0) {
        return;
      }
      if (DAT_80067fb8 != 0) {
        return;
      }
      CVar1 = Passive;
      if (INT_80067ed4 == 1) {
        return;
      }
    }
  }
  else if ((int)cameraState < 0x12) {
    if (cameraState != ChaseSwim) {
      return;
    }
    if (((DAT_80067fec == Align) &&
        (((inputStates[0].current & Triangle) == None ||
         (CVar1 = Look, Spyro.field123_0x1c1 == '\0')))) &&
       (((inputStates[0].pressed & (TriggerLeft|TriggerRight|BumperLeft|BumperRight)) == None ||
        ((((inputStates[0].current & (TriggerRight|BumperRight)) == None ||
          ((inputStates[0].current & (TriggerLeft|BumperLeft)) == None)) ||
         (CVar1 = QuickAlign, Spyro.field162_0x240 != 0)))))) {
      CVar1 = cameraStateLookup[Spyro.state];
      if (CVar1 == ChaseSwim) {
        return;
      }
      if (CVar1 == Align) {
        CVar1 = Passive;
      }
    }
  }
  else {
    if (cameraState != 0x1a) {
      return;
    }
    if (((inputStates[0].current & Triangle) == None) ||
       (CVar1 = Look, Spyro.field123_0x1c1 == '\0')) {
      if (DAT_80067fec == Align) {
        CVar1 = cameraStateLookup[Spyro.state];
      }
      else {
        CVar1 = DAT_80067fec;
        if (DAT_80067fec == 0x1a) {
          return;
        }
      }
    }
  }
  SetCameraState(CVar1);
  return;
}



void FUN_OVR2IdolSprings__80070e78(void)

{
  HUDElement *pHVar1;
  undefined4 uVar2;
  
  if (DAT_80066f30 == 1) {
    hudExtra2.field1_0x1 = 0;
    UpdateHUDElement(&hudExtra2,DAT_80067084);
    if (hudExtra2.displayState != Hidden) {
      InitHudElement(&hudExtra1,riptoHPClone_);
      return;
    }
    hudExtra1.field1_0x1 = 3;
    pHVar1 = &hudExtra1;
    uVar2 = riptoHPClone_;
  }
  else if (DAT_80066f30 == 2) {
    hudExtra1.field1_0x1 = 0;
    UpdateHUDElement(&hudExtra1,riptoHPClone_);
    if (hudExtra1.displayState != Hidden) {
      InitHudElement(&hudExtra2,DAT_80067084);
      return;
    }
    hudExtra2.field1_0x1 = 3;
    pHVar1 = &hudExtra2;
    uVar2 = DAT_80067084;
  }
  else {
    hudExtra1.field1_0x1 = 0;
    hudExtra2.field1_0x1 = 0;
    UpdateHUDElement(&hudExtra1,riptoHPClone_);
    pHVar1 = &hudExtra2;
    uVar2 = DAT_80067084;
  }
  UpdateHUDElement(pHVar1,uVar2);
  return;
}



void FUN_OVR2IdolSprings__80070fa4(void)

{
  int iVar1;
  HUDElement *pHVar2;
  undefined *puVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  
  pHVar2 = &hudExtra1;
  if (hudExtra1.displayState == Hidden) {
    pHVar2 = &hudExtra2;
    uVar4 = 0x168;
    uVar5 = 6;
    puVar3 = &DAT_80063618 + (DAT_80067008 & 0xe) * 2;
  }
  else {
    iVar1 = ((int)DAT_80067008 >> 1) % 10;
    if (5 < iVar1) {
      iVar1 = 10 - iVar1;
    }
    uVar5 = 10;
    puVar3 = &DAT_800635f8 + iVar1 * 4;
    uVar4 = 0x150;
  }
  RenderBLProgressCounter(pHVar2,puVar3,uVar4,0xec,uVar5);
  maybeDrawMap();
  return;
}


/*
Unable to decompile 'FUN_OVR2IdolSprings__80071080'
Cause: Exception while decompiling OVR2IdolSprings::80071080: process: timeout

*/


Vec3 ** FUN_OVR2IdolSprings__80083760(int param_1,int param_2)

{
  undefined2 uVar1;
  Object *pOVar2;
  char cVar3;
  undefined uVar4;
  short sVar5;
  Vec3 **ppVVar6;
  uint uVar7;
  int iVar8;
  undefined4 uVar9;
  undefined4 *puVar10;
  uint uVar11;
  int iVar12;
  Object *pOVar13;
  Spyro *pSVar14;
  int *piVar15;
  Vec3 *pVVar16;
  Vec3 *pVVar17;
  Vec3 local_90;
  Mat33 MStack_80;
  undefined local_60;
  char local_5f;
  undefined local_5e;
  Mat33 MStack_58;
  undefined local_38;
  byte local_37;
  byte local_36;
  Vec3 VStack_30;
  
  ppVVar6 = (Vec3 **)FUN_80041290();
  if (ppVVar6 == (Vec3 **)0x0) {
    return (Vec3 **)0x0;
  }
  pVVar16 = *ppVVar6;
  MEMSET((int *)ppVVar6,0,0x58);
  *ppVVar6 = pVVar16;
  MEMSET(&pVVar16->x,0,0x18);
  *(short *)((int)ppVVar6 + 0x36) = (short)param_1;
  if ((param_2 == 0) || (uVar11 = (param_2 - (int)Objects) * -0x45d1745d >> 3, 0xff < uVar11)) {
    *(undefined *)((int)ppVVar6 + 0x3a) = 0xff;
  }
  else {
    *(char *)((int)ppVVar6 + 0x3a) = (char)uVar11;
  }
  FUN_800375c8(ppVVar6);
  if (param_1 < 0x135) {
    if (0x131 < param_1) {
LAB_OVR2IdolSprings__80083c20:
      pVVar16 = *ppVVar6;
      *(undefined *)(ppVVar6 + 0x13) = 0x20;
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      uVar11 = rand();
      uVar7 = rand();
      uVar7 = uVar7 & 0x7ff;
      iVar12 = cosineLookup(uVar7);
      iVar8 = cosineLookup(uVar11 & 0xfff);
      *(short *)&pVVar16->x =
           (short)(char)(iVar12 * iVar8 * (uint)*(byte *)(param_2 + 0x49) >> 0x18);
      iVar12 = cosineLookup(uVar7);
      iVar8 = sineLookup(uVar11 & 0xfff);
      *(short *)((int)&pVVar16->x + 2) =
           (short)(char)(iVar12 * iVar8 * (uint)*(byte *)(param_2 + 0x49) >> 0x18);
      iVar12 = sineLookup(uVar7);
      *(short *)&pVVar16->y = (short)((int)(iVar12 * (uint)*(byte *)(param_2 + 0x49)) >> 0xc);
      if (((*(uint *)(param_2 + 0x18) & 0x20000) != 0) &&
         ((Spyro.maybeSubstate == Charge || (Spyro.maybeSubstate == UnderwaterCharge)))) {
        *(short *)&pVVar16->x = *(short *)&pVVar16->x + (short)(Spyro.trueVelocity.x >> 6);
        *(short *)((int)&pVVar16->x + 2) =
             *(short *)((int)&pVVar16->x + 2) + (short)(Spyro.trueVelocity.y >> 6);
      }
      if ((*(byte *)(param_2 + 0x51) != 0) && ((*(uint *)(param_2 + 0x18) & 0x100000) != 0)) {
        *(short *)&pVVar16->x =
             *(short *)&pVVar16->x +
             (short)(cosineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
        *(short *)((int)&pVVar16->x + 2) =
             *(short *)((int)&pVVar16->x + 2) +
             (short)(sineLookupTable[*(byte *)(param_2 + 0x51)] * 0x4b >> 0xb);
        sVar5 = randomRangeGen(0x28,0x46);
        *(short *)&pVVar16->y = *(short *)&pVVar16->y + sVar5;
      }
      ppVVar6[3] = (Vec3 *)(&ppVVar6[3]->x + *(short *)&pVVar16->x);
      ppVVar6[4] = (Vec3 *)(&ppVVar6[4]->x + *(short *)((int)&pVVar16->x + 2));
      ppVVar6[5] = (Vec3 *)(&ppVVar6[5]->x + *(short *)&pVVar16->y);
      iVar12 = rand();
      *(char *)((int)ppVVar6 + 0x45) = (char)iVar12;
      iVar12 = rand();
      *(char *)((int)ppVVar6 + 0x46) = (char)iVar12;
      iVar12 = rand();
      *(ushort *)((int)&pVVar16->y + 2) = ((ushort)iVar12 & 0x1f) - 0x10;
      iVar12 = rand();
      *(ushort *)&pVVar16->z = ((ushort)iVar12 & 0x1f) - 0x10;
      iVar12 = rand();
      *(ushort *)((int)&pVVar16->z + 2) = ((ushort)iVar12 & 0x1f) - 0x10;
      pVVar16[1].y = *(int *)(param_2 + 0x14) + -0x40;
      iVar12 = randomRangeGen(0x32,0x50);
      pVVar16[1].x = iVar12;
      return ppVVar6;
    }
    if (param_1 == 0x81) {
      VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
      FUN_80041438(ppVVar6);
      uVar11 = (uint)(ushort)VectorShort_80067ec8.Z;
      *(undefined *)((int)ppVVar6 + 0x4f) = 0x40;
      ppVVar6[0x15] = (Vec3 *)0x3f005080;
      *(char *)((int)ppVVar6 + 0x46) = (char)((int)(uVar11 << 0x10) >> 0x14) + -0x80;
      return ppVVar6;
    }
    if (param_1 < 0x82) {
      if (param_1 == 0x10) {
LAB_OVR2IdolSprings__80083974:
        pVVar16 = *ppVVar6;
        if (*(short *)((int)ppVVar6 + 0x36) == 0x10) {
          iVar12 = 10;
          if (lives < 4) {
            iVar12 = 7;
          }
          else if (lives < 7) {
            iVar12 = 9;
          }
          fodderCountTillNextLifeButterfly = fodderCountTillNextLifeButterfly + 1;
          if (iVar12 <= fodderCountTillNextLifeButterfly) {
            fodderCountTillNextLifeButterfly = 0;
            *(undefined2 *)((int)ppVVar6 + 0x36) = 0xd3;
          }
        }
        FUN_80041438(ppVVar6);
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x2a].z;
        VectorCopy(pVVar16,(Vec3 *)(ppVVar6 + 3));
        ppVVar6[7] = (Vec3 *)0xffffffff;
        *(undefined *)((int)ppVVar6 + 0x47) = 2;
        *(undefined2 *)((int)&pVVar16[1].x + 2) = 0x708;
        *(undefined *)((int)&pVVar16[1].y + 1) = 0;
        iVar12 = rand();
        *(byte *)((int)&pVVar16[1].y + 2) = (byte)iVar12 & 0xfc;
        return ppVVar6;
      }
      if (param_1 < 0x11) {
        if (param_1 == 1) {
          FUN_80041438(ppVVar6);
          *(undefined *)(ppVVar6 + 0x13) = 0x18;
          *(undefined *)((int)ppVVar6 + 0x4a) = 0x40;
LAB_OVR2IdolSprings__80083c10:
          ppVVar6[7] = (Vec3 *)0xffffffff;
          return ppVVar6;
        }
      }
      else if (param_1 == 0x78) {
        pVVar16 = *ppVVar6;
        FUN_80041438(ppVVar6);
        *(undefined *)((int)ppVVar6 + 0x49) = 0;
        *(undefined2 *)&pVVar16->x = 0;
        *(undefined2 *)&pVVar16->z = 0;
        *(undefined2 *)((int)&pVVar16->y + 2) = 0;
        *(undefined2 *)&pVVar16->y = 0;
        *(undefined *)((int)&pVVar16[1].x + 1) = 0x78;
        pVVar16[1].y = 0;
        pVVar16[1].z = 0;
        if (param_2 == 0) {
          uVar11 = Spyro.angleAsByte.yaw - 0x80 & 0xff;
          local_90.x = cosineLookupTable[uVar11] * 0x7d >> 9;
          local_90.z = 1000;
          local_90.y = sineLookupTable[uVar11] * 0x7d >> 9;
          VectorAdd((Vec3 *)(ppVVar6 + 3),&Spyro.position,&local_90);
        }
        else {
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        }
        *(undefined *)((int)&pVVar16->x + 2) = 0xff;
        return ppVVar6;
      }
    }
    else {
      if (param_1 == 0xd3) goto LAB_OVR2IdolSprings__80083974;
      if (param_1 < 0xd4) {
        if (param_1 == 0xaa) {
          *(undefined *)((int)ppVVar6 + 0x41) = 0;
          *(undefined *)(ppVVar6 + 0x10) = 0;
          *(undefined *)((int)ppVVar6 + 0x3e) = 0;
          *(undefined *)((int)ppVVar6 + 0x3f) = 0;
          if (param_2 != 0) {
            VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          }
          *(undefined *)((int)ppVVar6 + 0x4f) = 0x18;
          *(undefined *)(ppVVar6 + 0x13) = 0x28;
          goto LAB_OVR2IdolSprings__80084520;
        }
      }
      else {
        if (param_1 == 0xd9) {
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          FUN_80041438(ppVVar6);
          *(undefined *)((int)ppVVar6 + 0x49) = 3;
          if (*(short *)((int)ppVVar6 + 0x36) == 0xd6) {
            *(undefined *)(ppVVar6 + 0x15) = 1;
            return ppVVar6;
          }
          *(undefined *)(ppVVar6 + 0x15) = 2;
          return ppVVar6;
        }
        if (param_1 == 0x104) {
          FUN_80041438(ppVVar6);
          *(undefined *)(ppVVar6 + 0x15) = 2;
          if (param_2 != 0) {
            (*ppVVar6)->x = param_2;
            VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
            *(undefined *)((int)ppVVar6 + 0x4a) = 10;
            *(undefined *)(ppVVar6 + 0x13) = 8;
            ppVVar6[5] = (Vec3 *)&ppVVar6[5][0x55].y;
            return ppVVar6;
          }
          goto LAB_OVR2IdolSprings__80083c10;
        }
      }
    }
  }
  else {
    if (param_1 == 0x1e3) {
      pVVar16 = *ppVVar6;
      FUN_80041438(ppVVar6);
      *(undefined *)(ppVVar6 + 0x13) = 0x40;
      *(undefined *)((int)ppVVar6 + 0x4e) = 0x40;
      if (param_2 != 0) {
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        *(undefined *)((int)&pVVar16->y + 3) = 0x30;
        *(undefined *)((int)ppVVar6 + 0x4f) = 0x7f;
        *(char *)(ppVVar6 + 0x15) = (char)((int)((uint)*(byte *)((int)&pVVar16->y + 3) * 3) >> 1);
        uVar4 = *(undefined *)((int)&pVVar16->y + 3);
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
        *(undefined *)((int)ppVVar6 + 0x55) = uVar4;
        return ppVVar6;
      }
      local_90.x = 0x1b8;
      local_90.y = 0;
      local_90.z = 0;
      if (cameraState == Look) {
        pVVar17 = (Vec3 *)(ppVVar6 + 3);
        VectorCopy(pVVar17,&cameraPosition);
        local_60 = 0;
        local_5f = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
        local_5e = (undefined)((ushort)VectorShort_80067ec8.Z >> 4);
        BuildRotationMatrix(&local_60,&MStack_80,(Mat33 *)0x0);
        MatrixMultVector(&MStack_80,&local_90,&local_90);
        VectorAdd(pVVar17,pVVar17,&local_90);
        VectorAdd(pVVar17,pVVar17,&local_90);
        pSVar14 = (Spyro *)&local_90;
      }
      else {
        VectorCopy((Vec3 *)(ppVVar6 + 3),&cameraPosition);
        local_38 = 0;
        local_37 = Spyro.angleAsByte.roll;
        if ((Spyro.airTime == 0) && (0xf8 < (byte)(Spyro.angleAsByte.roll - 4))) {
          local_37 = 0;
        }
        local_36 = Spyro.angleAsByte.yaw;
        BuildRotationMatrix(&local_38,&MStack_58,(Mat33 *)0x0);
        MatrixMultVector(&MStack_58,&local_90,&local_90);
        ppVVar6[3] = (Vec3 *)0x1f4;
        ppVVar6[4] = (Vec3 *)0x0;
        ppVVar6[5] = (Vec3 *)0x0;
        MatrixMultVector(&MStack_58,(Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3));
        pSVar14 = &Spyro;
      }
      VectorAdd((Vec3 *)(ppVVar6 + 3),(Vec3 *)(ppVVar6 + 3),&pSVar14->position);
      iVar12 = VectorLength(&local_90,0);
      uVar4 = Atan2(iVar12,local_90.z,0);
      *(undefined *)((int)ppVVar6 + 0x45) = uVar4;
      uVar4 = Atan2(local_90.x,local_90.y,0);
      *(undefined *)((int)ppVVar6 + 0x46) = uVar4;
      pOVar2 = DAT_800670bc;
      pOVar13 = Objects;
      *(short *)&pVVar16->x = (short)local_90.x;
      *(short *)((int)&pVVar16->x + 2) = (short)local_90.y;
      *(short *)&pVVar16->y = (short)local_90.z;
      for (; (pOVar13 < pOVar2 && (pOVar13->type != 0x407)); pOVar13 = pOVar13 + 1) {
      }
      if (pOVar13 != (Object *)0x0) {
        piVar15 = (int *)pOVar13->data;
        iVar12 = *piVar15;
        *piVar15 = iVar12 + 0x144;
        if (0x797 < iVar12 + 0x144) {
          *piVar15 = 0;
        }
        puVar10 = (undefined4 *)((int)piVar15 + *piVar15 + 0xc);
        pVVar16->z = (int)puVar10;
        *puVar10 = 0;
        MemCopy(&pVVar16[1].y,piVar15 + 1,8);
      }
      *(undefined *)((int)&pVVar16->y + 3) = 0x6e;
LAB_OVR2IdolSprings__800843f0:
      *(undefined *)((int)ppVVar6 + 0x4b) = 1;
      FUN_80050648(ppVVar6,0,0);
      return ppVVar6;
    }
    if (param_1 < 0x1e4) {
      if (param_1 == 0x146) {
        pVVar16 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        *(undefined2 *)&pVVar16->x = 0x10;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
        *(undefined *)(ppVVar6 + 0x15) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x56) = 0;
        sVar5 = *(short *)(param_2 + 0x36);
        if ((sVar5 == 0x198) || (sVar5 == 0x2c2)) {
          *(undefined *)((int)&pVVar16->x + 2) = 1;
          *(undefined *)((int)&pVVar16->x + 3) = 1;
          uVar4 = 0x7f;
        }
        else {
          if (sVar5 == 0x270) {
            *(undefined *)((int)&pVVar16->x + 2) = 2;
            *(undefined *)(ppVVar6 + 0x15) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x55) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x56) = 0xe0;
            *(undefined *)((int)ppVVar6 + 0x57) = 0x3b;
          }
          else {
            *(undefined *)((int)&pVVar16->x + 2) = 0;
          }
          uVar4 = 0x60;
          *(undefined *)((int)&pVVar16->x + 3) = 0;
        }
        *(undefined *)((int)ppVVar6 + 0x4f) = uVar4;
        *(undefined *)((int)ppVVar6 + 0x47) = 0xfe;
        uVar9 = Vec2OctagonalDistanceApproximation((Vec2 *)(ppVVar6 + 3),(Vec2 *)&cameraPosition);
        cVar3 = Atan2(uVar9,cameraPosition.z - (int)ppVVar6[5],0);
        *(char *)((int)ppVVar6 + 0x45) = cVar3 + -0x40;
        uVar4 = Atan2(cameraPosition.x - (int)ppVVar6[3],cameraPosition.y - (int)ppVVar6[4],0);
        *(undefined *)((int)ppVVar6 + 0x46) = uVar4;
        return ppVVar6;
      }
      if (param_1 < 0x147) {
        if (param_1 == 0x136) goto LAB_OVR2IdolSprings__80083c20;
      }
      else {
        if (param_1 == 0x1e1) {
LAB_OVR2IdolSprings__800844a8:
          pVVar16 = *ppVVar6;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          FUN_80041438(ppVVar6);
          pVVar16->x = 0x18;
          *(undefined *)((int)ppVVar6 + 0x57) = 0x30;
          *(undefined *)(ppVVar6 + 0x15) = 0;
          *(undefined *)((int)ppVVar6 + 0x55) = 0;
          *(undefined *)((int)ppVVar6 + 0x56) = 0;
          *(undefined *)((int)ppVVar6 + 0x4f) = 100;
          *(undefined *)((int)ppVVar6 + 0x47) = 0;
          iVar12 = rand();
          *(char *)((int)ppVVar6 + 0x45) = (char)iVar12;
          iVar12 = rand();
          *(char *)((int)ppVVar6 + 0x46) = (char)iVar12;
          return ppVVar6;
        }
        if (param_1 == 0x1e2) {
          pVVar16 = *ppVVar6;
          VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
          FUN_80041438(ppVVar6);
          pVVar16->x = 0x10;
          *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
          *(undefined *)(ppVVar6 + 0x15) = 0x80;
          *(undefined *)((int)ppVVar6 + 0x55) = 0x40;
          *(undefined *)((int)ppVVar6 + 0x56) = 0;
          iVar12 = rand();
          *(char *)((int)ppVVar6 + 0x45) = (char)iVar12;
          iVar12 = rand();
          *(char *)((int)ppVVar6 + 0x46) = (char)iVar12;
          uVar4 = 0x46;
          goto LAB_OVR2IdolSprings__80084498;
        }
      }
    }
    else {
      if (param_1 == 0x211) {
        pVVar16 = *ppVVar6;
        VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
        FUN_80041438(ppVVar6);
        pVVar16->x = 0x10;
        *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
        *(undefined *)(ppVVar6 + 0x15) = 0x40;
        *(undefined *)((int)ppVVar6 + 0x55) = 0x80;
        *(undefined *)((int)ppVVar6 + 0x56) = 0x80;
        iVar12 = rand();
        *(char *)((int)ppVVar6 + 0x45) = (char)iVar12;
        iVar12 = rand();
        *(char *)((int)ppVVar6 + 0x46) = (char)iVar12;
        uVar4 = 0x50;
LAB_OVR2IdolSprings__80084498:
        *(undefined *)((int)ppVVar6 + 0x4f) = uVar4;
        *(undefined *)((int)ppVVar6 + 0x47) = 4;
        return ppVVar6;
      }
      if (param_1 < 0x212) {
        if (param_1 == 0x1f8) {
          pVVar16 = *ppVVar6;
          FUN_80041438(ppVVar6);
          if (param_2 != 0) {
            VectorCopy((Vec3 *)(ppVVar6 + 3),(Vec3 *)(param_2 + 0xc));
            *(undefined2 *)&pVVar16[1].x = 0x30;
            *(undefined *)((int)ppVVar6 + 0x4f) = 0x7f;
            *(char *)(ppVVar6 + 0x15) = (char)*(undefined2 *)&pVVar16[1].x;
            *(char *)((int)ppVVar6 + 0x55) = (char)*(undefined2 *)&pVVar16[1].x;
            uVar1 = *(undefined2 *)&pVVar16[1].x;
            *(undefined *)((int)ppVVar6 + 0x57) = 0x3f;
            *(char *)((int)ppVVar6 + 0x56) = (char)uVar1;
            return ppVVar6;
          }
          pVVar17 = (Vec3 *)(ppVVar6 + 3);
          FUN_80032a90(pVVar17);
          pVVar16->x = 400;
          pVVar16->y = 0;
          pVVar16->z = 0;
          if (cameraState == Look) {
            VectorCopy(&VStack_30,pVVar16);
            VectorCopy(pVVar17,&cameraPosition);
            local_38 = 0;
            local_37 = -(char)((int)((uint)(ushort)VectorShort_80067ec8.Y << 0x10) >> 0x14);
            local_36 = (byte)((ushort)VectorShort_80067ec8.Z >> 4);
            BuildRotationMatrix(&local_38,&MStack_80,(Mat33 *)0x0);
            MatrixMultVector(&MStack_80,&VStack_30,&VStack_30);
            VectorAdd(pVVar17,pVVar17,&VStack_30);
            VectorAdd(pVVar17,pVVar17,&VStack_30);
            VectorAdd(pVVar17,pVVar17,&VStack_30);
            *(byte *)((int)&pVVar16[1].y + 1) = local_37;
            *(byte *)((int)&pVVar16[1].y + 2) = local_36;
          }
          else {
            MatrixMultVector(&Spyro.unkMatrix,pVVar16,pVVar16);
            iVar12 = VectorLength(pVVar16,0);
            cVar3 = Atan2(iVar12,pVVar16->z,0);
            iVar12 = pVVar16->x;
            iVar8 = pVVar16->y;
            *(char *)((int)&pVVar16[1].y + 1) = cVar3 + '\x05';
            uVar4 = Atan2(iVar12,iVar8,0);
            *(undefined *)((int)&pVVar16[1].y + 2) = uVar4;
          }
          *(undefined2 *)&pVVar16[1].x = 0xb4;
          goto LAB_OVR2IdolSprings__800843f0;
        }
      }
      else {
        if (param_1 == 0x21d) goto LAB_OVR2IdolSprings__800844a8;
        if (param_1 == 0x238) goto LAB_OVR2IdolSprings__80083c20;
      }
    }
  }
  if (param_2 == 0) {
    pSVar14 = &Spyro;
  }
  else {
    pSVar14 = (Spyro *)(param_2 + 0xc);
  }
  VectorCopy((Vec3 *)(ppVVar6 + 3),&pSVar14->position);
LAB_OVR2IdolSprings__80084520:
  FUN_80041438(ppVVar6);
  return ppVVar6;
}



undefined * FUN_OVR2IdolSprings__80084558(int param_1)

{
  char cVar1;
  bool bVar2;
  char cVar3;
  short sVar4;
  char cVar5;
  byte bVar6;
  short sVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  char cVar12;
  short sVar13;
  short sVar14;
  uint uVar15;
  char *pcVar16;
  undefined *puVar17;
  VectorShort *pVVar18;
  undefined *puVar19;
  int iVar20;
  Vec3 local_a0;
  undefined4 local_90;
  undefined4 local_8c;
  int local_88;
  int local_84;
  int local_80;
  
  cVar12 = DAT_80066f18[1];
  puVar17 = DAT_80066f18;
  if (cVar12 != -1) {
    cVar5 = (char)param_1;
    cVar3 = cVar5 * '\x02';
    iVar20 = param_1 * 4;
    pcVar16 = DAT_80066f18 + 1;
    puVar19 = DAT_80066f18 + 0x18;
    pVVar18 = (VectorShort *)(DAT_80066f18 + 4);
    do {
      if (cVar12 == -2) goto LAB_OVR2IdolSprings__800860a0;
      cVar12 = (char)iVar20;
      switch(*puVar17) {
      case 0:
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x1b) = *(short *)(pcVar16 + 0x1b) + 1;
        }
        pcVar16[9] = pcVar16[9] + cVar3;
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        pcVar16[0xc] = pcVar16[0xc] + cVar5 * -4;
        pcVar16[0xb] = pcVar16[0xb] + cVar5 * -4;
        bVar6 = pcVar16[1];
        pcVar16[1] = (char)((uint)bVar6 + param_1);
        bVar2 = ((uint)bVar6 + param_1 & 0xff) < 0x20;
        pcVar16[0xd] = pcVar16[0xd] + cVar5 * -4;
        goto LAB_OVR2IdolSprings__80085944;
      case 1:
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x1b) = *(short *)(pcVar16 + 0x1b) + 1;
        }
        pcVar16[9] = pcVar16[9] + cVar12;
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        pcVar16[0xc] = pcVar16[0xc] + cVar5 * -4;
        pcVar16[0xb] = pcVar16[0xb] + cVar5 * -4;
        bVar6 = pcVar16[1];
        pcVar16[1] = (char)((uint)bVar6 + param_1);
        bVar2 = ((uint)bVar6 + param_1 & 0xff) < 0x18;
        pcVar16[0xd] = pcVar16[0xd] + cVar5 * -4;
        goto LAB_OVR2IdolSprings__80085944;
      case 2:
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x1b) = *(short *)(pcVar16 + 0x1b) + 1;
        }
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        pcVar16[9] = pcVar16[9] + cVar3;
        if ((int)(uint)(byte)pcVar16[0xb] < iVar20) {
          pcVar16[0xb] = '\0';
        }
        else {
          pcVar16[0xb] = pcVar16[0xb] + cVar5 * -4;
        }
        if ((int)(uint)(byte)pcVar16[0xc] < iVar20) {
          pcVar16[0xc] = '\0';
        }
        else {
          pcVar16[0xc] = pcVar16[0xc] + cVar5 * -4;
        }
        if ((int)(uint)(byte)pcVar16[0xd] < iVar20) {
          pcVar16[0xd] = '\0';
        }
        else {
          pcVar16[0xd] = pcVar16[0xd] + cVar5 * -4;
        }
        bVar6 = pcVar16[1];
        pcVar16[1] = (char)((uint)bVar6 + param_1);
        bVar2 = ((uint)bVar6 + param_1 & 0xff) < 0x20;
        goto LAB_OVR2IdolSprings__80085944;
      case 3:
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x1b) = *(short *)(pcVar16 + 0x1b) + 1;
        }
        cVar12 = pcVar16[0xd];
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        pcVar16[9] = pcVar16[9] + '\x03';
        if (pcVar16[0xb] == cVar12) {
          pcVar16[0xd] = cVar12 + -4;
          pcVar16[0xc] = pcVar16[0xc] + -4;
        }
        else {
          pcVar16[0xd] = cVar12 + '\x04';
        }
        cVar12 = pcVar16[0xb] + -4;
        pcVar16[0xb] = cVar12;
        goto joined_r0x8008555c;
      case 4:
        cVar12 = pcVar16[1];
        pcVar16[1] = cVar12 + 1U;
        if ((short)(ushort)(byte)(cVar12 + 1U) < *(short *)(pcVar16 + 0x17)) {
          pcVar16[9] = pcVar16[9] + '\x04';
        }
        sVar13 = *(short *)(pcVar16 + 7);
        *(short *)(pcVar16 + 7) = sVar13 + *(short *)(pcVar16 + 0x1b);
        pcVar16[10] = pcVar16[10] + pcVar16[0x19];
        if (((short)(sVar13 + *(short *)(pcVar16 + 0x1b)) <= *(short *)(pcVar16 + 0x1d)) ||
           (cVar12 = pcVar16[9], pcVar16[9] = cVar12 - 4U, 8 < (byte)(cVar12 - 4U))) break;
        goto LAB_OVR2IdolSprings__80086048;
      case 9:
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x1b) = *(short *)(pcVar16 + 0x1b) + 1;
        }
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        bVar6 = pcVar16[1];
        pcVar16[9] = pcVar16[9] + cVar3;
        pcVar16[1] = (char)((uint)bVar6 + param_1);
        bVar2 = ((uint)bVar6 + param_1 & 0xff) < 0x20;
        goto LAB_OVR2IdolSprings__80085944;
      case 10:
        if ((((Spyro.state == Drowning) && (Spyro.health < 0)) || (Spyro.field168_0x260 != 0)) ||
           (Spyro.iframeTimer == 0)) goto LAB_OVR2IdolSprings__80086048;
        VectorCopy(&local_a0,&Spyro.position);
        iVar10 = cosineLookup((int)*(short *)(pcVar16 + 0x17));
        local_a0.x = local_a0.x + (iVar10 >> 4);
        iVar10 = sineLookup((int)*(short *)(pcVar16 + 0x17));
        local_a0.y = local_a0.y + (iVar10 >> 4);
        local_a0.z = local_a0.z + 0x100;
        VecIntToShort(pVVar18,&local_a0);
        sVar13 = *(short *)(pcVar16 + 0x17);
        *(short *)(pcVar16 + 0x17) = sVar13 + 0x40;
        iVar10 = cosineLookup((int)(short)(sVar13 + 0x40) - (int)VectorShort_80067ec8.Z & 0xfff);
        if (iVar10 < 0) {
          iVar10 = -iVar10;
        }
        pcVar16[9] = (char)(iVar10 / 0xaa);
        break;
      case 0xb:
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x15) = *(short *)(pcVar16 + 0x15) + 1;
        }
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        VectorShortAdd(pVVar18,pVVar18,puVar17 + 0x12);
        pcVar16[9] = pcVar16[9] + cVar3;
        pcVar16[0xb] = pcVar16[0xb] + -4;
        pcVar16[10] = pcVar16[10] + cVar12;
        cVar12 = pcVar16[0xd] + -4;
        pcVar16[0xd] = cVar12;
        pcVar16[0xc] = pcVar16[0xc] + -4;
        goto joined_r0x8008555c;
      case 0xc:
        pcVar16[10] = pcVar16[10] + '\b';
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (pcVar16[0xb] != '\0') {
          pcVar16[0xb] = pcVar16[0xb] + -8;
        }
        if (pcVar16[0xc] != '\0') {
          pcVar16[0xc] = pcVar16[0xc] + -8;
        }
        if (pcVar16[0xd] != '\0') {
          pcVar16[0xd] = pcVar16[0xd] + -8;
        }
        uVar11 = *(uint *)(pcVar16 + 0xb);
        goto joined_r0x80085708;
      case 0xd:
        if ((0x1b < (byte)pcVar16[1]) || (pcVar16[2] == '\0')) goto LAB_OVR2IdolSprings__80086048;
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x1b) = *(short *)(pcVar16 + 0x1b) + 1;
        }
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        uVar11 = (uint)(byte)pcVar16[1];
        pcVar16[9] = pcVar16[9] + cVar3;
        if (uVar11 < 0xd) {
          if (uVar11 < 5) {
            pcVar16[0xb] = -0x80;
            iVar10 = (uint)(byte)pcVar16[1] * -0x20 + 0x80;
            pcVar16[0xc] = -0x80;
            if (iVar10 < 0) {
              iVar10 = 0;
            }
            pcVar16[0xd] = (char)iVar10;
          }
          else {
            pcVar16[0xb] = -0x80;
            pcVar16[0xd] = '\0';
            pcVar16[0xc] = (pcVar16[1] + -4) * -8 + -0x80;
          }
        }
        else {
          iVar10 = (uVar11 - 0xc) * -8 + 0x80;
          if (iVar10 < 0) {
            iVar10 = 0;
          }
          pcVar16[0xb] = (char)iVar10;
          iVar10 = ((byte)pcVar16[1] - 0xc) * -4 + 0x40;
          if (iVar10 < 0) {
            iVar10 = 0;
          }
          pcVar16[0xc] = (char)iVar10;
          pcVar16[0xd] = '\0';
        }
        pcVar16[1] = pcVar16[1] + cVar5;
        break;
      case 0x20:
        if (0x2b < (byte)pcVar16[1]) goto LAB_OVR2IdolSprings__80086048;
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x1b) = *(short *)(pcVar16 + 0x1b) + 1;
        }
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        uVar11 = (uint)(byte)pcVar16[1];
        pcVar16[9] = pcVar16[9] + cVar3;
        if (uVar11 < 0xf) {
          if (uVar11 < 5) {
            pcVar16[0xb] = -0x80;
            iVar10 = (uint)(byte)pcVar16[1] * -0x20 + 0x80;
            pcVar16[0xc] = -0x80;
            if (iVar10 < 0) {
              iVar10 = 0;
            }
            pcVar16[0xd] = (char)iVar10;
          }
          else {
            pcVar16[0xb] = -0x80;
            pcVar16[0xd] = '\0';
            pcVar16[0xc] = (pcVar16[1] + -4) * -8 + -0x80;
          }
        }
        else {
          iVar10 = (uVar11 - 0xc) * -8 + 0x80;
          if (iVar10 < 0) {
            iVar10 = 0;
          }
          pcVar16[0xb] = (char)iVar10;
          iVar10 = ((byte)pcVar16[1] - 0xc) * -4 + 0x40;
          if (iVar10 < 0) {
            iVar10 = 0;
          }
          pcVar16[0xc] = (char)iVar10;
          pcVar16[0xd] = '\0';
        }
        if ((byte)pcVar16[1] < 4) {
          iVar10 = (uint)*(ushort *)(pcVar16 + 3) * 4 - Spyro.position.x;
          if (iVar10 < 0) {
            iVar10 = -iVar10;
          }
          iVar9 = (uint)*(ushort *)(pcVar16 + 5) * 4 - Spyro.position.y;
          if (iVar9 < 0) {
            iVar9 = -iVar9;
          }
          iVar8 = (uint)*(ushort *)(pcVar16 + 7) * 4 - Spyro.position.z;
          if (iVar8 < 0) {
            iVar8 = -iVar8;
          }
          if ((iVar9 + iVar10 >> 1 < 200) && (iVar8 < 500)) {
            Spyro.field154_0x21c.x = 0;
            Spyro.field154_0x21c.y = 0;
            Spyro.field154_0x21c.z = 0x28;
            Spyro.takingDamageRelated = Spyro.takingDamageRelated | 0xe;
          }
        }
        pcVar16[1] = pcVar16[1] + cVar3;
        break;
      case 0x21:
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x1b) = *(short *)(pcVar16 + 0x1b) + 1;
        }
        iVar10 = (uint)(byte)pcVar16[0xb] + param_1 * -2;
        pcVar16[9] = pcVar16[9] + cVar3;
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        if (iVar10 < 0) {
          iVar10 = 0;
        }
        bVar6 = pcVar16[1];
        cVar12 = (char)iVar10;
        pcVar16[0xb] = cVar12;
        pcVar16[0xc] = cVar12;
        pcVar16[0xd] = cVar12;
        pcVar16[1] = (char)((uint)bVar6 + param_1);
        if (((0x1f < ((uint)bVar6 + param_1 & 0xff)) || (pcVar16[2] == '\0')) || (iVar10 == 0))
        goto LAB_OVR2IdolSprings__80086048;
        break;
      case 0x27:
        if (*(short *)(pcVar16 + 0x17) < 1) {
          sVar13 = 1;
        }
        else {
          sVar13 = -1;
        }
        *(short *)(pcVar16 + 0x17) = *(short *)(pcVar16 + 0x17) + sVar13;
        if (*(short *)(pcVar16 + 0x19) < 1) {
          sVar13 = 1;
        }
        else {
          sVar13 = -1;
        }
        *(short *)(pcVar16 + 0x19) = *(short *)(pcVar16 + 0x19) + sVar13;
        sVar13 = *(short *)(pcVar16 + 0x1b);
        *(short *)(pcVar16 + 0x1b) = sVar13 + 1;
        if (0x18 < (short)(sVar13 + 1)) {
          *(undefined2 *)(pcVar16 + 0x1b) = 0x18;
        }
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        *(short *)(pcVar16 + 3) =
             *(short *)(pcVar16 + 3) + (cosineLookupTable[((byte)pcVar16[1] & 0x1f) * 8] >> 9);
        *(short *)(pcVar16 + 5) =
             *(short *)(pcVar16 + 5) + (sineLookupTable[((byte)pcVar16[1] & 0x1f) * 8] >> 9);
        if ((pcVar16[10] == '\0') || ((DAT_80067008 & 1) != 0)) {
          pcVar16[9] = pcVar16[9] + '\x01';
        }
        iVar10 = AdvanceTimer(puVar17 + 2,1);
        if (iVar10 != 0) goto LAB_OVR2IdolSprings__80086048;
        if (pcVar16[10] != '\0') break;
        goto LAB_OVR2IdolSprings__8008594c;
      case 0x28:
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if (*(short *)(pcVar16 + 0x1d) != 0) {
          *(short *)(pcVar16 + 0x1b) = *(short *)(pcVar16 + 0x1b) + 1;
        }
        bVar6 = pcVar16[1];
        pcVar16[1] = (char)((uint)bVar6 + param_1);
        *(short *)(pcVar16 + 0x1d) = 1 - *(short *)(pcVar16 + 0x1d);
        if (((uint)bVar6 + param_1 & 0xff) < 0x1e) {
          if ((byte)pcVar16[9] < 100) {
            pcVar16[9] = pcVar16[9] + cVar12;
          }
        }
        else {
          if (4 < (byte)pcVar16[9]) {
            pcVar16[9] = pcVar16[9] - cVar5;
          }
          *(short *)(pcVar16 + 0x17) = (short)(*(short *)(pcVar16 + 0x17) * 7 >> 3);
          *(short *)(pcVar16 + 0x19) = (short)(*(short *)(pcVar16 + 0x19) * 7 >> 3);
          *(short *)(pcVar16 + 0x1b) = (short)(*(short *)(pcVar16 + 0x1b) * 7 >> 3);
        }
        if ((byte)pcVar16[0xd] < 0xb) {
          if (1 < (byte)pcVar16[0xb]) {
            pcVar16[0xb] = pcVar16[0xb] - 1;
          }
          if (1 < (byte)pcVar16[0xc]) {
            pcVar16[0xc] = pcVar16[0xc] - 1;
          }
          if (1 < (byte)pcVar16[0xd]) {
            pcVar16[0xd] = pcVar16[0xd] - 1;
          }
        }
        else {
          pcVar16[0xb] = pcVar16[0xb] + cVar5 * -2;
          pcVar16[0xd] = pcVar16[0xd] + cVar5 * -2;
          pcVar16[0xc] = pcVar16[0xc] + cVar5 * -2;
        }
        if ((0x3b < (byte)pcVar16[1]) && (uVar11 = rand(), (uVar11 & 0xf) == 7)) {
          pcVar16[1] = '\0';
          pcVar16[0xb] = '`';
          pcVar16[0xc] = '`';
          pcVar16[0xd] = '`';
          *puVar17 = 1;
        }
        bVar2 = (byte)pcVar16[1] < 0x79;
        goto LAB_OVR2IdolSprings__80085944;
      case 0x29:
        uVar11 = (uint)(byte)pcVar16[0x1d];
        bVar6 = pcVar16[1] + 1;
        pcVar16[1] = bVar6;
        if (uVar11 < bVar6) {
          if (pcVar16[0x1e] != '\0') {
LAB_OVR2IdolSprings__80085530:
            (*DAT_800670fc)(1,0x2b,pVVar18,0);
          }
          goto LAB_OVR2IdolSprings__80086048;
        }
        iVar10 = ((int)*(short *)(pcVar16 + 0x17) - (int)*(short *)(pcVar16 + 0x11)) * (uint)bVar6;
        if (uVar11 == 0) {
          trap(0x1c00);
        }
        if ((uVar11 == 0xffffffff) && (iVar10 == -0x80000000)) {
          trap(0x1800);
        }
        iVar9 = ((int)*(short *)(pcVar16 + 0x19) - (int)*(short *)(pcVar16 + 0x13)) *
                (uint)(byte)pcVar16[1];
        uVar15 = (uint)(byte)pcVar16[0x1d];
        if (uVar15 == 0) {
          trap(0x1c00);
        }
        if ((uVar15 == 0xffffffff) && (iVar9 == -0x80000000)) {
          trap(0x1800);
        }
        sVar13 = *(short *)(pcVar16 + 0x15);
        *(short *)(pcVar16 + 0x15) = *(short *)(pcVar16 + 0x15) + -2;
        *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 7) + sVar13;
        iVar8 = clock * 8;
        *(short *)(pcVar16 + 3) = *(short *)(pcVar16 + 0x11) + (short)(iVar10 / (int)uVar11);
        *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 0x13) + (short)(iVar9 / (int)uVar15);
        pcVar16[9] = (char)(cosineLookupTable[iVar8 + (uint)(byte)pcVar16[0x1c] & 0xff] >> 10) +
                     '\n';
        pcVar16[10] = (char)(sineLookupTable[clock * 8 + (uint)(byte)pcVar16[0x1c] & 0xff] >> 0xb) +
                      '\x06';
        break;
      case 0x2a:
        bVar6 = pcVar16[1];
        pcVar16[1] = bVar6 + 1;
        if ((0xf < bVar6) || (pcVar16[2] == '\0')) goto LAB_OVR2IdolSprings__80086048;
        pcVar16[9] = pcVar16[9] + '\x02';
        pcVar16[0xb] = pcVar16[0xb] + -6;
        pcVar16[0xc] = pcVar16[0xc] + -6;
        pcVar16[0xd] = pcVar16[0xd] + -6;
        *(int *)(pcVar16 + 0x17) = *(int *)(pcVar16 + 0x17) + (int)*(short *)(pcVar16 + 0x11);
        *(int *)(pcVar16 + 0x1b) = *(int *)(pcVar16 + 0x1b) + (int)*(short *)(pcVar16 + 0x13);
        *(short *)(pcVar16 + 3) = (short)(*(int *)(pcVar16 + 0x17) >> 2);
        *(short *)(pcVar16 + 5) = (short)(*(int *)(pcVar16 + 0x1b) >> 2);
        break;
      case 0x2b:
        if (((byte)pcVar16[0xb] < 4) || (pcVar16[2] == '\0')) goto LAB_OVR2IdolSprings__80086048;
        cVar12 = '\x03';
        if (*(short *)(pcVar16 + 0x17) != 0) {
          cVar12 = '\x02';
        }
        cVar1 = pcVar16[9];
        pcVar16[9] = cVar1 + '\x01';
        if (*(short *)(pcVar16 + 0x17) != 0) {
          pcVar16[9] = cVar1 + '\x02';
        }
        pcVar16[0xb] = pcVar16[0xb] - cVar12;
        pcVar16[0xd] = pcVar16[0xd] - cVar12;
        pcVar16[0xc] = pcVar16[0xc] - cVar12;
        break;
      case 0x2c:
        *(short *)(pcVar16 + 0x17) = *(short *)(pcVar16 + 0x17) + *(short *)(pcVar16 + 0x11);
        *(short *)(pcVar16 + 0x19) = *(short *)(pcVar16 + 0x19) + *(short *)(pcVar16 + 0x13);
        *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 7) + *(short *)(pcVar16 + 0x15);
        *(short *)(pcVar16 + 3) =
             *(short *)(pcVar16 + 0x17) +
             (short)(char)((ushort)cosineLookupTable[(byte)pcVar16[0x1b]] >> 8);
        sVar13 = sineLookupTable[(byte)pcVar16[0x1b]];
        pcVar16[0x1b] = pcVar16[0x1b] + pcVar16[0x1c];
        uVar11 = DAT_80067008 & 3;
        *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 0x19) + (short)(char)((ushort)sVar13 >> 8);
        if (uVar11 == 0) {
          if (*(short *)(pcVar16 + 0x15) < 9) {
            *(short *)(pcVar16 + 0x15) = *(short *)(pcVar16 + 0x15) + 1;
          }
          if ((byte)pcVar16[9] < 0x14) {
            pcVar16[9] = pcVar16[9] + 1;
          }
        }
        if (*(short *)(pcVar16 + 0x1d) <= *(short *)(pcVar16 + 7)) {
          if (pcVar16[0x10] == '\x03') goto LAB_OVR2IdolSprings__80085530;
          goto LAB_OVR2IdolSprings__80086048;
        }
        cVar12 = pcVar16[1];
joined_r0x8008555c:
        if (cVar12 != '\0') goto LAB_OVR2IdolSprings__8008594c;
        goto LAB_OVR2IdolSprings__80086048;
      case 0x2e:
        bVar6 = pcVar16[1];
        pcVar16[1] = bVar6 + 1;
        if ((0xf < bVar6) || (pcVar16[2] == '\0')) goto LAB_OVR2IdolSprings__80086048;
        pcVar16[9] = pcVar16[9] + '\x03';
        pcVar16[0xb] = pcVar16[0xb] + -8;
        pcVar16[0xc] = pcVar16[0xc] + -8;
        pcVar16[0xd] = pcVar16[0xd] + -8;
        break;
      case 0x30:
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        sVar13 = *(short *)(pcVar16 + 0x17);
        if (sVar13 < 1) {
          if (sVar13 < 0) {
            sVar7 = 1;
            goto LAB_OVR2IdolSprings__800855fc;
          }
        }
        else {
          sVar7 = -1;
LAB_OVR2IdolSprings__800855fc:
          *(short *)(pcVar16 + 0x17) = sVar13 + sVar7;
        }
        sVar13 = *(short *)(pcVar16 + 0x19);
        if (sVar13 < 1) {
          sVar7 = 1;
          if (sVar13 < 0) goto LAB_OVR2IdolSprings__80085620;
        }
        else {
          sVar7 = -1;
LAB_OVR2IdolSprings__80085620:
          *(short *)(pcVar16 + 0x19) = sVar13 + sVar7;
        }
        pcVar16[10] = pcVar16[10] + pcVar16[0x1d];
        iVar10 = (uint)(byte)pcVar16[0xd] - deltaTime;
        if (iVar10 < 1) goto LAB_OVR2IdolSprings__80086048;
        bVar6 = pcVar16[1];
        cVar12 = (char)(iVar10 >> 1);
        pcVar16[0xb] = cVar12;
        pcVar16[0xc] = cVar12;
        pcVar16[0xd] = (char)iVar10;
        pcVar16[1] = (char)((uint)bVar6 + param_1);
        bVar2 = ((uint)bVar6 + param_1 & 0xff) < 0x40;
        goto LAB_OVR2IdolSprings__80085944;
      case 0x3b:
        pcVar16[10] = pcVar16[10] + '\b';
        VectorShortAdd(pVVar18,pVVar18,puVar19);
        if ((DAT_80067008 & 1) != 0) {
          *(short *)(pcVar16 + 0x19) = *(short *)(pcVar16 + 0x19) + 1;
        }
        if (pcVar16[0xb] != '\0') {
          pcVar16[0xb] = pcVar16[0xb] + -4;
        }
        if (pcVar16[0xc] != '\0') {
          pcVar16[0xc] = pcVar16[0xc] + -4;
        }
        if (pcVar16[0xd] != '\0') {
          pcVar16[0xd] = pcVar16[0xd] + -4;
        }
        uVar11 = *(uint *)(pcVar16 + 0xb);
joined_r0x80085708:
        if ((uVar11 & 0xffffff) != 0) goto LAB_OVR2IdolSprings__8008594c;
        goto LAB_OVR2IdolSprings__80086048;
      case 0x41:
        sVar14 = *(short *)(pcVar16 + 9) - *(short *)(pcVar16 + 3);
        sVar13 = *(short *)(pcVar16 + 0xb) - *(short *)(pcVar16 + 5);
        local_90 = CONCAT22(sVar13,sVar14);
        sVar7 = *(short *)(pcVar16 + 0xd) - *(short *)(pcVar16 + 7);
        local_8c = CONCAT22(local_8c._2_2_,sVar7);
        *(short *)(pcVar16 + 3) = *(short *)(pcVar16 + 3) + sVar14;
        *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 5) + sVar13;
        *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 7) + sVar7;
        if ((pcVar16[1] & 3U) == 0) {
          if (sVar14 < 1) {
            if (sVar14 < 0) {
              sVar4 = 1;
              goto LAB_OVR2IdolSprings__800857b8;
            }
          }
          else {
            sVar4 = -1;
LAB_OVR2IdolSprings__800857b8:
            local_90 = CONCAT22(sVar13,sVar14 + sVar4);
          }
          if (local_90._2_2_ < 1) {
            sVar13 = 1;
            if (-1 < local_90) goto LAB_OVR2IdolSprings__800857e0;
          }
          else {
            sVar13 = -1;
          }
          local_90 = CONCAT22(local_90._2_2_ + sVar13,(short)local_90);
        }
LAB_OVR2IdolSprings__800857e0:
        *(short *)(pcVar16 + 9) = *(short *)(pcVar16 + 9) + (short)local_90;
        sVar13 = *(short *)(pcVar16 + 0xd);
        *(short *)(pcVar16 + 0xb) = *(short *)(pcVar16 + 0xb) + local_90._2_2_;
        *(short *)(pcVar16 + 0xd) = sVar13 + sVar7;
        if ((pcVar16[1] & 3U) == 0) {
          *(short *)(pcVar16 + 0xd) = sVar13 + sVar7 + -1;
        }
        cVar12 = pcVar16[1];
        pcVar16[1] = cVar12 + 1U;
        if (((0x59 < (byte)(cVar12 + 1U)) || (pcVar16[2] == '\0')) ||
           ((int)*(short *)(pcVar16 + 0xd) < *(int *)(pcVar16 + 0x17)))
        goto LAB_OVR2IdolSprings__80086048;
        break;
      case 0x42:
        iVar10 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar16[1] & 1U) != 0) {
              *(short *)(pcVar16 + 3) = *(short *)(pcVar16 + 3) + *(short *)(pcVar16 + 0xf);
              *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 5) + *(short *)(pcVar16 + 0x11);
              *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 7) + *(short *)(pcVar16 + 0x13);
              if ((pcVar16[1] & 2U) != 0) {
                iVar9 = rand();
                *(ushort *)(pcVar16 + 0xf) = *(short *)(pcVar16 + 0xf) + -1 + ((ushort)iVar9 & 2);
                iVar9 = rand();
                *(ushort *)(pcVar16 + 0x11) = *(short *)(pcVar16 + 0x11) + -1 + ((ushort)iVar9 & 2);
                iVar9 = rand();
                *(ushort *)(pcVar16 + 0x13) = *(short *)(pcVar16 + 0x13) + -1 + ((ushort)iVar9 & 2);
              }
            }
            iVar10 = iVar10 + 1;
            pcVar16[1] = pcVar16[1] + '\x01';
          } while (iVar10 < param_1);
        }
        bVar2 = (byte)pcVar16[1] < 0x18;
LAB_OVR2IdolSprings__80085944:
        if (bVar2) {
LAB_OVR2IdolSprings__8008594c:
          if (pcVar16[2] != '\0') break;
        }
LAB_OVR2IdolSprings__80086048:
        FUN_80041d20(puVar17);
        break;
      case 0x46:
        cVar12 = pcVar16[1];
        pcVar16[1] = cVar12 + 1U;
        if ((0x1f < (byte)(cVar12 + 1U)) || (pcVar16[2] == '\0'))
        goto LAB_OVR2IdolSprings__80086048;
        local_90._0_2_ = (short)((int)*(short *)(pcVar16 + 9) - (int)*(short *)(pcVar16 + 3) >> 1);
        local_90._2_2_ = (short)((int)*(short *)(pcVar16 + 0xb) - (int)*(short *)(pcVar16 + 5) >> 1)
        ;
        sVar13 = (short)((int)*(short *)(pcVar16 + 0xd) - (int)*(short *)(pcVar16 + 7) >> 1);
        local_8c = CONCAT22(local_8c._2_2_,sVar13);
        *(short *)(pcVar16 + 3) = *(short *)(pcVar16 + 3) + (short)local_90;
        *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 5) + local_90._2_2_;
        *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 7) + sVar13;
        iVar10 = rand();
        local_90._0_2_ = (short)local_90 + -1 + ((ushort)iVar10 & 2);
        iVar10 = rand();
        sVar13 = local_90._2_2_ + -1 + ((ushort)iVar10 & 2);
        local_90 = CONCAT22(sVar13,(short)local_90);
        if ((pcVar16[1] & 1U) != 0) {
          local_8c = CONCAT22(local_8c._2_2_,(short)local_8c + -1);
        }
        *(short *)(pcVar16 + 9) = *(short *)(pcVar16 + 9) + (short)local_90;
        *(short *)(pcVar16 + 0xb) = *(short *)(pcVar16 + 0xb) + sVar13;
        cVar12 = pcVar16[0xf];
        pcVar16[0xf] = cVar12 - 3U;
        *(short *)(pcVar16 + 0xd) = *(short *)(pcVar16 + 0xd) + (short)local_8c;
        if ((byte)(cVar12 - 3U) < 0x80) {
          pcVar16[0xf] = -0x80;
        }
        cVar12 = pcVar16[0x10];
        pcVar16[0x10] = cVar12 - 4U;
        if ((byte)(cVar12 - 4U) < 0x60) {
          pcVar16[0x10] = '`';
        }
        cVar12 = pcVar16[0x13];
        pcVar16[0x11] = '\0';
        pcVar16[0x13] = cVar12 - 3U;
        if ((byte)(cVar12 - 3U) < 0xc0) {
          pcVar16[0x13] = -0x40;
        }
        cVar12 = pcVar16[0x14];
        pcVar16[0x14] = cVar12 - 4U;
        if ((byte)(cVar12 - 4U) < 0x80) {
          pcVar16[0x14] = -0x80;
        }
        cVar12 = pcVar16[0x15];
        pcVar16[0x15] = cVar12 - 6U;
        if ((byte)(cVar12 - 6U) < 0x20) {
          pcVar16[0x15] = ' ';
        }
        break;
      case 0x47:
        cVar12 = pcVar16[1];
        pcVar16[1] = cVar12 + 1U;
        if ((0x1f < (byte)(cVar12 + 1U)) || (pcVar16[2] == '\0'))
        goto LAB_OVR2IdolSprings__80086048;
        local_88 = (int)*(short *)(pcVar16 + 9) - (int)*(short *)(pcVar16 + 3);
        local_84 = (int)*(short *)(pcVar16 + 0xb) - (int)*(short *)(pcVar16 + 5);
        local_80 = (int)*(short *)(pcVar16 + 0xd) - (int)*(short *)(pcVar16 + 7);
        uVar11 = rand();
        local_88 = local_88 + -1 + (uVar11 & 2);
        uVar11 = rand();
        local_84 = local_84 + -1 + (uVar11 & 2);
        uVar11 = rand();
        local_80 = local_80 + -1 + (uVar11 & 2);
        *(short *)(pcVar16 + 9) = *(short *)(pcVar16 + 9) + (short)local_88;
        *(short *)(pcVar16 + 0xb) = *(short *)(pcVar16 + 0xb) + (short)local_84;
        *(short *)(pcVar16 + 0xd) = *(short *)(pcVar16 + 0xd) + (short)local_80;
        *(short *)(pcVar16 + 3) = *(short *)(pcVar16 + 9) - (short)local_88;
        *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 0xb) - (short)local_84;
        pcVar16[0x13] = pcVar16[0x13] + -2;
        pcVar16[0x15] = pcVar16[0x15] + -4;
        pcVar16[0x14] = pcVar16[0x14] + -2;
        pcVar16[0x10] = pcVar16[0x10] + -3;
        pcVar16[0xf] = pcVar16[0xf] + -3;
        *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 0xd) - (short)local_80;
        pcVar16[0x11] = pcVar16[0x11] + -3;
        break;
      case 0x48:
        cVar12 = pcVar16[1];
        pcVar16[1] = cVar12 + 1U;
        if ((0x37 < (byte)(cVar12 + 1U)) || (pcVar16[2] == '\0'))
        goto LAB_OVR2IdolSprings__80086048;
        local_90 = (int)*(short *)(pcVar16 + 3) - (int)*(short *)(pcVar16 + 9) >> 1;
        local_8c = (int)*(short *)(pcVar16 + 5) - (int)*(short *)(pcVar16 + 0xb) >> 1;
        local_88 = (int)*(short *)(pcVar16 + 7) - (int)*(short *)(pcVar16 + 0xd) >> 1;
        uVar11 = rand();
        local_90 = local_90 + -2 + (uVar11 & 4);
        uVar11 = rand();
        local_8c = local_8c + -2 + (uVar11 & 4);
        uVar11 = rand();
        local_88 = local_88 + -1 + (uVar11 & 2);
        *(short *)(pcVar16 + 3) = *(short *)(pcVar16 + 3) + (short)local_90;
        *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 5) + (short)local_8c;
        *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 7) + (short)local_88;
        *(short *)(pcVar16 + 9) = *(short *)(pcVar16 + 3) + (short)local_90 * -2;
        *(short *)(pcVar16 + 0xb) = *(short *)(pcVar16 + 5) + (short)local_8c * -2;
        *(short *)(pcVar16 + 0xd) = *(short *)(pcVar16 + 7) + (short)local_88 * -2;
        break;
      case 0x4a:
        cVar12 = pcVar16[1];
        *(short *)(pcVar16 + 3) = *(short *)(pcVar16 + 3) + *(short *)(pcVar16 + 0xf);
        pcVar16[1] = cVar12 + 1U;
        *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 5) + *(short *)(pcVar16 + 0x11);
        *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 7) + *(short *)(pcVar16 + 0x13);
        pcVar16[0xc] = pcVar16[0xc] + -0xf;
        if ((pcVar16[2] == '\0') || (0x10 < (byte)(cVar12 + 1U)))
        goto LAB_OVR2IdolSprings__80086048;
        break;
      case 0x4e:
        cVar12 = pcVar16[1];
        pcVar16[1] = cVar12 + 1U;
        if ((0x27 < (byte)(cVar12 + 1U)) || (pcVar16[2] == '\0'))
        goto LAB_OVR2IdolSprings__80086048;
        *(short *)(pcVar16 + 3) = *(short *)(pcVar16 + 3) + *(short *)(pcVar16 + 0xf);
        *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 5) + *(short *)(pcVar16 + 0x11);
        *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 7) + *(short *)(pcVar16 + 0x13);
        iVar10 = rand();
        *(ushort *)(pcVar16 + 0xf) = *(short *)(pcVar16 + 0xf) + -1 + ((ushort)iVar10 & 2);
        iVar10 = rand();
        *(ushort *)(pcVar16 + 0x11) = *(short *)(pcVar16 + 0x11) + -1 + ((ushort)iVar10 & 2);
        uVar11 = rand();
        iVar10 = (*(ushort *)(pcVar16 + 0x13) - 1) + (uVar11 & 2);
        *(short *)(pcVar16 + 0x13) = (short)iVar10;
        if (2 < iVar10 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar16 + 0x13) = 2;
        }
        if (*(short *)(pcVar16 + 0x13) < -4) {
          *(undefined2 *)(pcVar16 + 0x13) = 0xfffc;
        }
        pcVar16[0xb] = pcVar16[0xb] + -2;
        pcVar16[0xd] = pcVar16[0xd] + -1;
        pcVar16[0xc] = pcVar16[0xc] + -2;
        break;
      case 0x4f:
        sVar14 = (short)((int)*(short *)(pcVar16 + 9) - (int)*(short *)(pcVar16 + 3) >> 1);
        sVar13 = (short)((int)*(short *)(pcVar16 + 0xb) - (int)*(short *)(pcVar16 + 5) >> 1);
        local_90 = CONCAT22(sVar13,sVar14);
        sVar7 = (short)((int)*(short *)(pcVar16 + 0xd) - (int)*(short *)(pcVar16 + 7) >> 1);
        local_8c = CONCAT22(local_8c._2_2_,sVar7);
        *(short *)(pcVar16 + 3) = *(short *)(pcVar16 + 3) + sVar14;
        *(short *)(pcVar16 + 5) = *(short *)(pcVar16 + 5) + sVar13;
        *(short *)(pcVar16 + 7) = *(short *)(pcVar16 + 7) + sVar7;
        *(short *)(pcVar16 + 9) = *(short *)(pcVar16 + 9) + sVar14;
        *(short *)(pcVar16 + 0xb) = *(short *)(pcVar16 + 0xb) + sVar13;
        cVar12 = pcVar16[1];
        pcVar16[1] = cVar12 + 1U;
        *(short *)(pcVar16 + 0xd) = *(short *)(pcVar16 + 0xd) + sVar7;
        if ((0x17 < (byte)(cVar12 + 1U)) || (pcVar16[2] == '\0'))
        goto LAB_OVR2IdolSprings__80086048;
        pcVar16[0xf] = pcVar16[0xf] + -3;
        pcVar16[0x13] = pcVar16[0x13] + -3;
        pcVar16[0x10] = pcVar16[0x10] + -4;
        pcVar16[0x14] = pcVar16[0x14] + -4;
        if (5 < (byte)pcVar16[0x15]) {
          pcVar16[0x15] = pcVar16[0x15] - 6;
        }
      }
LAB_OVR2IdolSprings__800860a0:
      pcVar16 = pcVar16 + 0x20;
      puVar19 = puVar19 + 0x20;
      pVVar18 = (VectorShort *)&pVVar18[5].Y;
      cVar12 = *pcVar16;
      puVar17 = puVar17 + 0x20;
    } while (cVar12 != -1);
  }
  return puVar17;
}



undefined *
FUN_OVR2IdolSprings__800860f8(int param_1,undefined4 param_2,Vec3 *param_3,Vec3 *param_4)

{
  short sVar1;
  byte bVar2;
  undefined uVar3;
  char cVar4;
  uint uVar5;
  undefined4 uVar6;
  int iVar7;
  uint uVar8;
  int iVar9;
  Vec3 *from;
  undefined uVar10;
  undefined *puVar11;
  Vec3 local_130;
  Vec3 local_120;
  Vec3 local_110;
  Vec3 local_100;
  Vec3 local_f0;
  Vec3 local_e0;
  Vec3 local_d0;
  Vec3 VStack_c0;
  Vec3 VStack_b0;
  Vec3 VStack_a0;
  Vec3 local_90;
  undefined local_80;
  undefined local_7f;
  undefined local_7e;
  Mat33 MStack_78;
  Vec3 local_58;
  int local_48;
  int local_40;
  int local_30;
  
  puVar11 = (undefined *)0x0;
  local_40 = 0;
  if (0 < param_1) {
    local_30 = 0;
    local_48 = param_1;
    do {
      uVar3 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar11 + 0x18),param_4);
        *(undefined2 *)(puVar11 + 0x1e) = 0;
        puVar11[10] = 0x18;
        iVar7 = rand();
        uVar10 = 4;
        puVar11[0xb] = (char)iVar7;
        puVar11[0xc] = 0x80;
        puVar11[0xd] = 0x80;
        puVar11[0xe] = 0x80;
        goto LAB_OVR2IdolSprings__80086b04;
      case 1:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar11 + 0x18),param_4);
        *(undefined2 *)(puVar11 + 0x1e) = 0;
        puVar11[10] = 0x10;
        iVar7 = rand();
        puVar11[0xb] = (char)iVar7;
        uVar3 = 0x60;
        puVar11[0xc] = 0x60;
        puVar11[0xd] = 0x60;
        goto LAB_OVR2IdolSprings__80086b00;
      case 2:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        uVar8 = rand();
        local_130.x = (uVar8 & 0x3f) - 0x20;
        uVar8 = rand();
        local_130.y = (uVar8 & 0x3f) - 0x20;
        local_130.z = 0x10;
        VecIntToShort((VectorShort *)(puVar11 + 0x18),&local_130);
        *(undefined2 *)(puVar11 + 0x1e) = 0;
        puVar11[10] = 0x20;
        iVar7 = rand();
        uVar10 = 2;
        puVar11[0xb] = (char)iVar7;
        puVar11[0xc] = 0x80;
        puVar11[0xd] = 0x80;
        puVar11[0xe] = 0x80;
        goto LAB_OVR2IdolSprings__80086b04;
      case 3:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar11 + 0x18),param_4);
        *(undefined2 *)(puVar11 + 0x1e) = 0;
        puVar11[10] = 0x18;
        iVar7 = rand();
        puVar11[0xb] = (char)iVar7;
        puVar11[0xd] = 0x40;
        uVar3 = 2;
        puVar11[0xc] = 0x80;
        puVar11[0xe] = 0;
        puVar11[0xf] = 0x2e;
        goto LAB_OVR2IdolSprings__8008728c;
      case 4:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        puVar11[10] = 8;
        iVar7 = rand();
        puVar11[0xb] = (char)iVar7;
        puVar11[0xc] = 0x80;
        puVar11[0xd] = 0x80;
        puVar11[0xe] = 0x80;
        puVar11[0xf] = 0x2e;
        puVar11[0x11] = 2;
        puVar11[0x10] = 0;
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x18) = ((ushort)iVar7 & 3) + 4;
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x1a) = ((ushort)iVar7 & 3) + 2;
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x1c) = ((ushort)iVar7 & 7) + 3;
        *(short *)(puVar11 + 0x1e) = (short)((int)param_4 >> 2);
        break;
      case 9:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VectorCopy(&local_120,&Spyro.position);
        uVar8 = rand();
        local_120.x = local_120.x + -0x3f + (uVar8 & 0x7e);
        uVar8 = rand();
        local_120.y = local_120.y + -0x3f + (uVar8 & 0x7e);
        VecIntToShort((VectorShort *)(puVar11 + 4),&local_120);
        VectorCopy(&local_120,&Spyro.physicsVelocity);
        VectorShiftRight(&local_120,6);
        VecIntToShort((VectorShort *)(puVar11 + 0x18),&local_120);
        *(undefined2 *)(puVar11 + 0x1e) = 0;
        puVar11[10] = 0x18;
        iVar7 = rand();
        uVar10 = 4;
        puVar11[0xb] = (char)iVar7;
        puVar11[0xc] = 0x80;
        puVar11[0xd] = 0x80;
        puVar11[0xe] = 0x80;
        goto LAB_OVR2IdolSprings__80086b04;
      case 10:
        puVar11 = (undefined *)FUN_80041c50(3);
        *puVar11 = uVar3;
        iVar7 = rand();
        puVar11[2] = (byte)iVar7 & 0x1f;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),&Spyro.position);
        puVar11[10] = 0x18;
        puVar11[0xb] = 0xf;
        puVar11[0xc] = (&DAT_80064654)[local_30];
        puVar11[0xd] = (&DAT_80064655)[local_30];
        uVar3 = (&DAT_80064656)[local_30];
        puVar11[0xf] = 0x2c;
        puVar11[0x11] = 4;
        puVar11[0x10] = 0;
        puVar11[0xe] = uVar3;
        *(short *)(puVar11 + 0x18) = (short)(((local_48 - local_40) * 0x1000) / 5);
        break;
      case 0xc:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[0x11] = 4;
        iVar7 = local_40 * 0xc;
        puVar11[3] = 1;
        MatrixMultVector((Mat33 *)&param_3[2].z,(Vec3 *)(&DAT_800644f0 + iVar7),&local_110);
        VectorAdd(&local_110,&local_110,param_3 + 1);
        if (param_4 == (Vec3 *)&DAT_00000005) {
          uVar8 = rand();
          local_110.x = (local_110.x + 0x100) - (uVar8 & 0x1ff);
          uVar8 = rand();
          local_110.y = (local_110.y + 0x100) - (uVar8 & 0x1ff);
          uVar8 = rand();
          local_110.z = (local_110.z + 0x100) - (uVar8 & 0x1ff);
        }
        if (param_4 == (Vec3 *)0x6) {
          uVar8 = rand();
          local_110.x = (local_110.x + 0x80) - (uVar8 & 0xff);
          uVar8 = rand();
          local_110.y = (local_110.y + 0x80) - (uVar8 & 0xff);
          uVar8 = rand();
          local_110.z = (local_110.z + 0x80) - (uVar8 & 0xff);
        }
        VecIntToShort((VectorShort *)(puVar11 + 4),&local_110);
        *(undefined4 *)(puVar11 + 0xc) = *(undefined4 *)(&DAT_800644d0 + (int)param_4 * 4);
        iVar9 = rand();
        puVar11[10] = ((byte)iVar9 & 7) + 0x20;
        iVar9 = rand();
        puVar11[0xb] = (char)iVar9;
        puVar11[0x10] = 0;
        VecIntToShort((VectorShort *)(puVar11 + 0x18),(Vec3 *)(&DAT_800644f0 + iVar7));
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x18) = (*(short *)(puVar11 + 0x18) >> 2) + -4 + ((ushort)iVar7 & 7);
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x1a) = (*(short *)(puVar11 + 0x1a) >> 2) + -4 + ((ushort)iVar7 & 7);
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x1c) = (*(short *)(puVar11 + 0x1c) >> 2) + -4 + ((ushort)iVar7 & 7);
        break;
      case 0xd:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar11 + 0x18),param_4);
        *(undefined2 *)(puVar11 + 0x1e) = 0;
        puVar11[10] = 0x18;
        iVar7 = rand();
        puVar11[0xc] = 0xff;
        puVar11[0xd] = 0xff;
        puVar11[0xb] = (char)iVar7;
        puVar11[0xe] = 0;
        puVar11[0xf] = 0x2e;
        puVar11[0x11] = 4;
        puVar11[0x10] = 0;
        break;
      case 0x20:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar11 + 0x18),param_4);
        *(undefined2 *)(puVar11 + 0x1e) = 0;
        puVar11[10] = 0x1a;
        iVar7 = rand();
        puVar11[0xc] = 0xff;
        puVar11[0xb] = (char)iVar7;
        uVar3 = 2;
        puVar11[0xd] = 0xff;
        puVar11[0xe] = 0;
        goto LAB_OVR2IdolSprings__80087288;
      case 0x21:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          VectorCopy(&local_f0,&Spyro.physicsVelocity);
          VectorShiftRight(&local_f0,6);
          VectorCopy(&local_100,&Spyro.position);
          local_100.z = local_100.z + -0x164;
          uVar8 = rand();
          local_100.x = (local_100.x + 0x80) - (uVar8 & 0xff);
          uVar8 = rand();
          uVar3 = 0x30;
          local_100.y = (local_100.y + 0x80) - (uVar8 & 0xff);
        }
        else if (param_4 == (Vec3 *)0x1) {
          local_100.x = 0x164;
          local_100.y = 0;
          local_100.z = 0;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_100,&local_100);
          VectorAdd(&local_100,&local_100,&Spyro.position);
          uVar3 = 0x40;
          uVar8 = rand();
          local_f0.x = -(uVar8 & 7);
          uVar8 = rand();
          local_f0.y = ((int)((uint)(ushort)cosineLookupTable[local_40 * 0x20] << 0x10) >> 0x17) -
                       ((uVar8 & 0xf) - 8);
          local_f0.z = (int)((uint)(ushort)sineLookupTable[local_40 * 0x20] << 0x10) >> 0x17;
          MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,&local_f0,&local_f0);
        }
        else {
          iVar7 = 5;
          if (param_4 == (Vec3 *)0x2) {
            iVar9 = local_40 << 5;
            iVar7 = 6;
            uVar3 = 0x30;
          }
          else {
            uVar3 = 0x40;
            iVar9 = local_40 * 0x20 + 0x10;
          }
          VectorCopy(&local_100,&Spyro.position);
          local_100.x = local_100.x + ((int)cosineLookupTable[iVar9] >> iVar7);
          local_100.z = local_100.z + -0x164;
          local_100.y = local_100.y + ((int)sineLookupTable[iVar9] >> iVar7);
          local_f0.x = (int)cosineLookupTable[iVar9] >> iVar7 + 1;
          local_f0.z = 0;
          local_f0.y = (int)sineLookupTable[iVar9] >> iVar7 + 1;
        }
        VecIntToShort((VectorShort *)(puVar11 + 4),&local_100);
        VecIntToShort((VectorShort *)(puVar11 + 0x18),&local_f0);
        *(undefined2 *)(puVar11 + 0x1e) = 0;
        puVar11[10] = 0x10;
        iVar7 = rand();
        uVar10 = 4;
        puVar11[0xb] = (char)iVar7;
        puVar11[0xc] = uVar3;
        puVar11[0xd] = uVar3;
        puVar11[0xe] = uVar3;
        goto LAB_OVR2IdolSprings__80086b04;
      case 0x27:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar11 + 0x18),param_4);
        puVar11[0xb] = 0;
        puVar11[0xc] = 0x80;
        puVar11[0xd] = 0x80;
        puVar11[0xe] = 0x80;
        puVar11[0xf] = 0x2e;
        puVar11[0x11] = 4;
        puVar11[0x10] = 0;
        uVar3 = randomRangeGen(10,0x18);
        puVar11[10] = uVar3;
        uVar3 = randomRangeGen(0x28,0x46);
        puVar11[2] = uVar3;
        break;
      case 0x28:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar11 + 0x18),param_4);
        *(undefined2 *)(puVar11 + 0x1e) = 0;
        puVar11[10] = 0x10;
        iVar7 = rand();
        puVar11[0xb] = (char)iVar7;
        puVar11[0xd] = 0x48;
        uVar3 = 0x30;
        puVar11[0xc] = 0x80;
LAB_OVR2IdolSprings__80086b00:
        uVar10 = 4;
        puVar11[0xe] = uVar3;
LAB_OVR2IdolSprings__80086b04:
        puVar11[0xf] = 0x2e;
        puVar11[0x11] = uVar10;
        puVar11[0x10] = 0;
        break;
      case 0x29:
        VectorCopy(&local_e0,param_3);
        uVar8 = rand();
        local_e0.x = (local_e0.x + 0x80) - (uVar8 & 0xff);
        uVar8 = rand();
        local_e0.y = (local_e0.y + 0x80) - (uVar8 & 0xff);
        uVar8 = rand();
        uVar5 = rand();
        iVar7 = (uVar5 & 0x3ff) + 0x200;
        VectorCopy(&local_d0,&local_e0);
        from = param_4;
        if (param_4 == (Vec3 *)0x0) {
          from = &Spyro.trueVelocity;
        }
        VectorCopy(&VStack_c0,from);
        VectorShiftRight(&VStack_c0,1);
        if (local_48 == 1) {
          VectorMultByN(&VStack_c0,&VStack_c0,3);
        }
        VStack_c0.z = 0;
        VectorAdd(&local_d0,&local_d0,&VStack_c0);
        local_d0.x = local_d0.x + (cosineLookupTable[uVar8 & 0xff] * iVar7 >> 0xc);
        local_d0.z = local_d0.z + 0x200;
        local_d0.y = local_d0.y + (sineLookupTable[uVar8 & 0xff] * iVar7 >> 0xc);
        local_d0.z = RaycastDown(&local_d0,0x400);
        if (local_d0.z != 0) {
          puVar11 = (undefined *)FUN_80041c50(3);
          puVar11[3] = 1;
          puVar11[10] = 10;
          *puVar11 = uVar3;
          puVar11[2] = 0;
          puVar11[0xb] = 6;
          puVar11[0xc] = (char)(DAT_80067408 >> 4);
          puVar11[0xd] = (char)(DAT_8006740c >> 4);
          iVar7 = DAT_80067410;
          puVar11[0xf] = 0x2e;
          puVar11[0x11] = 2;
          puVar11[0x10] = 0;
          puVar11[0xe] = (char)(iVar7 >> 4);
          VecIntToShort((VectorShort *)(puVar11 + 4),&local_e0);
          VecIntToShort((VectorShort *)(puVar11 + 0x12),&local_e0);
          VecIntToShort((VectorShort *)(puVar11 + 0x18),&local_d0);
          uVar8 = rand();
          uVar5 = rand();
          iVar7 = (uVar8 & 0xe) + (uVar5 & 6) + 0x14;
          *(short *)(puVar11 + 0x16) = (short)iVar7;
          puVar11[0x1e] = 0;
          while ((0 < iVar7 || (local_d0.z < local_e0.z))) {
            local_e0.z = local_e0.z + iVar7 * 4;
            iVar7 = iVar7 + -2;
            puVar11[0x1e] = puVar11[0x1e] + '\x01';
          }
          iVar7 = rand();
          puVar11[0x1d] = (char)iVar7;
          puVar11[0x1f] = (char)isOnWaterSurface;
        }
        break;
      case 0x2a:
        puVar11 = (undefined *)FUN_80041c50(4);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        *(int *)(puVar11 + 0x18) = param_3->x;
        *(int *)(puVar11 + 0x1c) = param_3->y;
        *(short *)(puVar11 + 0x12) = (short)param_4->x;
        *(short *)(puVar11 + 0x14) = (short)param_4->y;
        iVar7 = rand();
        puVar11[10] = ((byte)iVar7 & 7) + 3;
        bVar2 = Spyro.angleAsByte.yaw;
        puVar11[0xc] = 0x6c;
        puVar11[0xd] = 0x6c;
        puVar11[0xe] = 0x6c;
        puVar11[0xf] = 0x2e;
        puVar11[0x11] = 0;
        puVar11[0x10] = 0;
        puVar11[0xb] = bVar2 + 0x20;
        break;
      case 0x2b:
        puVar11 = (undefined *)FUN_80041c50(4);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        if (param_4 == (Vec3 *)0x0) {
          CopyVectorShort((VectorShort *)(puVar11 + 4),(VectorShort *)param_3);
          iVar7 = rand();
          puVar11[10] = ((byte)iVar7 & 7) + 2;
          uVar3 = 0x60;
        }
        else {
          VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
          if (param_4 == (Vec3 *)0x2) {
            iVar7 = rand();
            *(ushort *)(puVar11 + 4) = (*(short *)(puVar11 + 4) + 0x20) - ((ushort)iVar7 & 0x7f);
            iVar7 = rand();
            *(ushort *)(puVar11 + 6) = (*(short *)(puVar11 + 6) + 0x20) - ((ushort)iVar7 & 0x7f);
          }
          iVar7 = rand();
          puVar11[10] = ((byte)iVar7 & 7) + 0x10;
          uVar3 = 0x40;
        }
        bVar2 = Spyro.angleAsByte.yaw;
        puVar11[0xc] = uVar3;
        puVar11[0xd] = uVar3;
        puVar11[0xe] = uVar3;
        puVar11[0xf] = 0x2e;
        puVar11[0x11] = 0;
        puVar11[0x10] = 0;
        *(short *)(puVar11 + 0x18) = (short)param_4;
        puVar11[0xb] = bVar2;
        break;
      case 0x2c:
        MatrixMultVector(&Spyro.groundedGlidingMovementMatrix,param_3,&VStack_b0);
        VectorAdd(&VStack_b0,&VStack_b0,&Spyro.position);
        iVar7 = FUN_8003ce38(&Spyro.position,&VStack_b0,2,0,0);
        if (iVar7 == 0) {
          puVar11 = (undefined *)FUN_80041c50(2);
          *puVar11 = uVar3;
          puVar11[3] = 1;
          VecIntToShort((VectorShort *)(puVar11 + 4),&VStack_b0);
          VecIntToShort((VectorShort *)(puVar11 + 0x18),&VStack_b0);
          *(short *)(puVar11 + 0x12) = (short)(Spyro.trueVelocity.x >> 9);
          *(short *)(puVar11 + 0x14) = (short)(Spyro.trueVelocity.y >> 9);
          iVar7 = rand();
          *(ushort *)(puVar11 + 0x16) = ((ushort)iVar7 & 3) + 4;
          puVar11[0xb] = 0;
          puVar11[0xc] = 0x80;
          puVar11[0xd] = 0x80;
          puVar11[0xe] = 0x80;
          puVar11[0xf] = 0x2e;
          puVar11[0x11] = 2;
          puVar11[0x10] = 0;
          iVar7 = rand();
          puVar11[10] = ((byte)iVar7 & 7) + 6;
          iVar7 = rand();
          puVar11[0x1c] = (char)iVar7;
          iVar7 = rand();
          puVar11[0x1d] = '\x10' - ((byte)iVar7 & 0x1f);
          iVar7 = rand();
          puVar11[2] = ((byte)iVar7 & 0x1f) + 0x40;
          VectorCopy(&VStack_a0,&VStack_b0);
          VStack_a0.z = VStack_a0.z + 0xc00;
          iVar7 = FUN_8003ce38(&VStack_b0,&VStack_a0,2,0,0);
          if (iVar7 == 0) {
            *(short *)(puVar11 + 0x1e) = (short)(VStack_a0.z >> 2);
          }
          else {
            *(short *)(puVar11 + 0x1e) = (short)(Vec3_8006ab70.z >> 2);
            if (isOnWaterSurface != 0) {
              puVar11[0x11] = 3;
            }
          }
        }
        break;
      case 0x2e:
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        iVar7 = rand();
        *(ushort *)(puVar11 + 4) = (*(short *)(puVar11 + 4) + 0x40) - ((ushort)iVar7 & 0x7f);
        iVar7 = rand();
        *(ushort *)(puVar11 + 6) = (*(short *)(puVar11 + 6) + 0x40) - ((ushort)iVar7 & 0x7f);
        if (param_4 == (Vec3 *)0x0) {
          iVar7 = rand();
          cVar4 = ((byte)iVar7 & 0xf) + 0x14;
        }
        else {
          iVar7 = rand();
          cVar4 = (char)param_4 + ((byte)iVar7 & 0xf);
        }
        puVar11[10] = cVar4;
        iVar7 = rand();
        puVar11[0xb] = (char)iVar7;
        uVar3 = 2;
        puVar11[0xc] = 0x80;
        puVar11[0xd] = 0x80;
        puVar11[0xe] = 0x80;
        puVar11[0xf] = 0x2e;
        goto LAB_OVR2IdolSprings__8008728c;
      case 0x30:
        iVar7 = Vec2OctagonalDistanceApproximation((Vec2 *)param_3,(Vec2 *)&cameraPosition);
        puVar11 = (undefined *)FUN_80041c50(2);
        *puVar11 = uVar3;
        iVar9 = rand();
        puVar11[2] = (byte)iVar9 & 0xf;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        uVar8 = rand();
        *(short *)(puVar11 + 4) =
             *(short *)(puVar11 + 4) + (short)((int)(((uVar8 & 0xfff) - 0x7ff) * 300) >> 0xc);
        uVar8 = rand();
        *(short *)(puVar11 + 6) =
             *(short *)(puVar11 + 6) + (short)((int)(((uVar8 & 0xfff) - 0x7ff) * 300) >> 0xc);
        uVar8 = rand();
        param_4 = (Vec3 *)((int)param_4 + ((uVar8 & 0x1e) - 0xf) & 0xff);
        *(short *)(puVar11 + 0x18) = (short)(cosineLookupTable[(int)param_4] * 7 >> 0xb);
        sVar1 = sineLookupTable[(int)param_4];
        *(undefined2 *)(puVar11 + 0x1c) = 8;
        *(short *)(puVar11 + 0x1a) = (short)(sVar1 * 7 >> 0xb);
        iVar9 = rand();
        *(ushort *)(puVar11 + 0x1e) = ((ushort)iVar9 & 2) - 1;
        puVar11[10] = 0x78;
        iVar9 = rand();
        puVar11[0xb] = (char)iVar9;
        if (iVar7 < 0x6001) {
          iVar7 = 0x40;
        }
        else {
          iVar7 = 0x8000 - iVar7 >> 7;
        }
        uVar3 = (undefined)(iVar7 >> 1);
        puVar11[0xc] = uVar3;
        puVar11[0xd] = uVar3;
        uVar3 = 0xc;
        puVar11[0xe] = (char)iVar7;
LAB_OVR2IdolSprings__80087288:
        puVar11[0xf] = 0x2e;
LAB_OVR2IdolSprings__8008728c:
        puVar11[0x11] = uVar3;
        puVar11[0x10] = 0;
        break;
      case 0x3b:
        puVar11 = (undefined *)FUN_80041c50(5);
        puVar11[3] = 1;
        *puVar11 = uVar3;
        puVar11[0x11] = 0x10;
        puVar11[1] = puVar11[1] | 0x10;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        iVar7 = rand();
        *(ushort *)(puVar11 + 4) = (*(short *)(puVar11 + 4) + 0x10) - ((ushort)iVar7 & 0x1f);
        iVar7 = rand();
        *(ushort *)(puVar11 + 6) = (*(short *)(puVar11 + 6) + 8) - ((ushort)iVar7 & 0xf);
        if (param_4 == (Vec3 *)0x0) {
          uVar6 = 0x2e0080c0;
        }
        else {
          uVar6 = 0x2e00c000;
        }
        *(undefined4 *)(puVar11 + 0xc) = uVar6;
        iVar7 = rand();
        puVar11[10] = ((byte)iVar7 & 0xf) + 0x14;
        iVar7 = rand();
        puVar11[0xb] = (char)iVar7;
        puVar11[0x10] = 0;
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x18) = ((ushort)iVar7 & 7) - 4;
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x1a) = -2 - ((ushort)iVar7 & 7);
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x1c) = ((ushort)iVar7 & 0xf) - 8;
        break;
      case 0x41:
        puVar11 = (undefined *)FUN_80041c50(1);
        *puVar11 = uVar3;
        puVar11[2] = 0;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar11 + 10),param_4);
        puVar11[0x14] = 0xc0;
        puVar11[0x15] = 0xc0;
        puVar11[0x16] = 0xc0;
        puVar11[0x13] = 0x50;
        puVar11[0x17] = 0;
        puVar11[0x10] = 0x80;
        puVar11[0x11] = 0x80;
        puVar11[0x12] = 0x80;
        *(short *)(puVar11 + 10) = *(short *)(puVar11 + 10) + *(short *)(puVar11 + 4);
        *(short *)(puVar11 + 0xe) = *(short *)(puVar11 + 0xe) + *(short *)(puVar11 + 8);
        *(short *)(puVar11 + 0xc) = *(short *)(puVar11 + 0xc) + *(short *)(puVar11 + 6);
        *(int *)(puVar11 + 0x18) = *(short *)(puVar11 + 0xe) + -0x80;
        break;
      case 0x42:
        puVar11 = (undefined *)FUN_80041c50(0);
        *puVar11 = uVar3;
        iVar7 = rand();
        puVar11[2] = (byte)iVar7 & 0xf;
        puVar11[3] = 1;
        iVar7 = rand();
        *(ushort *)(puVar11 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar7 & 0xf) + -8;
        iVar7 = rand();
        *(ushort *)(puVar11 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar7 & 0xf) + -8;
        iVar7 = rand();
        iVar9 = param_3->z;
        *(undefined2 *)(puVar11 + 0x10) = 0;
        *(undefined2 *)(puVar11 + 0x12) = 0;
        *(undefined2 *)(puVar11 + 0x14) = 0;
        puVar11[10] = 2;
        *(ushort *)(puVar11 + 8) = (short)(iVar9 >> 2) + ((ushort)iVar7 & 0xf) + -8;
        if ((param_4 == (Vec3 *)0x1) || ((param_4 == (Vec3 *)0x0 && (2 < Spyro.health)))) {
          puVar11[0xc] = 0xff;
LAB_OVR2IdolSprings__80087538:
          puVar11[0xd] = 0xff;
          puVar11[0xe] = 0;
          goto switchD_OVR2IdolSprings__800874fc_caseD_8;
        }
        uVar8 = rand();
        switch(uVar8 & 7) {
        case 0:
          puVar11[0xc] = 0xff;
          puVar11[0xd] = 0;
          puVar11[0xe] = 0;
          break;
        case 1:
          puVar11[0xc] = 0xff;
          puVar11[0xd] = 0xff;
          puVar11[0xe] = 0;
          break;
        case 2:
          puVar11[0xc] = 0;
          goto LAB_OVR2IdolSprings__80087538;
        case 3:
          puVar11[0xc] = 0;
          puVar11[0xd] = 0xff;
          puVar11[0xe] = 0xff;
          break;
        case 4:
          puVar11[0xc] = 0;
          puVar11[0xd] = 0;
          goto LAB_OVR2IdolSprings__800875a0;
        case 5:
          puVar11[0xc] = 0xff;
          puVar11[0xd] = 0;
          goto LAB_OVR2IdolSprings__800875a0;
        case 6:
          puVar11[0xc] = 0xff;
          puVar11[0xd] = 0x80;
          puVar11[0xe] = 0;
          break;
        case 7:
          puVar11[0xc] = 0;
          puVar11[0xd] = 0x80;
LAB_OVR2IdolSprings__800875a0:
          puVar11[0xe] = 0xff;
        }
switchD_OVR2IdolSprings__800874fc_caseD_8:
        puVar11[0xf] = 0x40;
        break;
      case 0x46:
        puVar11 = (undefined *)FUN_80041c50(1);
        *puVar11 = uVar3;
        iVar7 = rand();
        puVar11[2] = (byte)iVar7 & 0xf;
        puVar11[3] = 1;
        local_80 = 0;
        iVar7 = rand();
        local_7f = (undefined)iVar7;
        iVar7 = rand();
        local_7e = (undefined)iVar7;
        BuildRotationMatrix(&local_80,&MStack_78,(Mat33 *)0x0);
        local_90.y = 0;
        local_90.z = 0;
        local_90.x = (int)param_4;
        MatrixMultVector(&MStack_78,&local_90,&local_90);
        *(short *)(puVar11 + 4) = (short)(param_3->x >> 2);
        *(short *)(puVar11 + 6) = (short)(param_3->y >> 2);
        *(short *)(puVar11 + 8) = (short)(param_3->z >> 2);
        *(short *)(puVar11 + 10) = *(short *)(puVar11 + 4) + (short)local_90.x * 2;
        *(short *)(puVar11 + 0xc) = *(short *)(puVar11 + 6) + (short)local_90.y * 2;
        puVar11[0x17] = 2;
        puVar11[0x10] = 0xe0;
        puVar11[0x11] = 0xc0;
        puVar11[0x13] = 0x50;
        puVar11[0x12] = 0;
        puVar11[0x14] = 0xff;
        puVar11[0x15] = 0xff;
        puVar11[0x16] = 0x80;
        *(short *)(puVar11 + 0xe) = *(short *)(puVar11 + 8) + (short)local_90.z * 2;
        break;
      case 0x47:
        puVar11 = (undefined *)FUN_80041c50(1);
        *puVar11 = uVar3;
        iVar7 = rand();
        puVar11[2] = (byte)iVar7 & 7;
        puVar11[3] = 1;
        uVar8 = rand();
        local_58.x = (int)(((uVar8 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar8 = rand();
        local_58.y = (int)(((uVar8 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar8 = rand();
        local_58.z = (int)(((uVar8 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar11 + 4) = (short)(param_3->x >> 2) + (short)local_58.x * 4;
        *(short *)(puVar11 + 6) = (short)(param_3->y >> 2) + (short)local_58.y * 4;
        *(short *)(puVar11 + 8) = (short)(param_3->z >> 2) + (short)local_58.z * 4;
        *(short *)(puVar11 + 10) = *(short *)(puVar11 + 4) + (short)local_58.x;
        *(short *)(puVar11 + 0xc) = *(short *)(puVar11 + 6) + (short)local_58.y;
        puVar11[0x17] = 2;
        puVar11[0x10] = 0xe0;
        puVar11[0x11] = 0xe0;
        puVar11[0x14] = 0xff;
        puVar11[0x12] = 0x60;
        puVar11[0x15] = 0xff;
        puVar11[0x16] = 0xff;
        puVar11[0x13] = 0x50;
        *(short *)(puVar11 + 0xe) = *(short *)(puVar11 + 8) + (short)local_58.z;
        break;
      case 0x4a:
        puVar11 = (undefined *)FUN_80041c50(0);
        *puVar11 = uVar3;
        iVar7 = rand();
        puVar11[2] = (byte)iVar7 & 0xf;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        VecIntToShort((VectorShort *)(puVar11 + 0x10),param_4);
        iVar7 = rand();
        puVar11[0xc] = (byte)iVar7 | 0xc0;
        iVar7 = rand();
        puVar11[0xd] = ((byte)iVar7 & 0x3f) + 0x80;
        puVar11[0xe] = 0;
        puVar11[0xf] = 0x40;
        puVar11[10] = 4;
        break;
      case 0x4e:
        puVar11 = (undefined *)FUN_80041c50(0);
        *puVar11 = uVar3;
        iVar7 = rand();
        puVar11[2] = (byte)iVar7 & 0x1f;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 4),param_3);
        iVar7 = rand();
        *(ushort *)(puVar11 + 4) = *(short *)(puVar11 + 4) + -0x20 + ((ushort)iVar7 & 0x3f);
        iVar7 = rand();
        *(ushort *)(puVar11 + 6) = *(short *)(puVar11 + 6) + -0x20 + ((ushort)iVar7 & 0x3f);
        iVar7 = rand();
        *(ushort *)(puVar11 + 8) = *(short *)(puVar11 + 8) + -0x20 + ((ushort)iVar7 & 0x3f);
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x10) = ((ushort)iVar7 & 2) - 1;
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x12) = ((ushort)iVar7 & 2) - 1;
        iVar7 = rand();
        *(ushort *)(puVar11 + 0x14) = -((ushort)iVar7 & 1);
        iVar7 = rand();
        puVar11[0xc] = (byte)iVar7 | 0x80;
        uVar8 = rand();
        uVar8 = (uVar8 & 0x7f) + 0x60;
        puVar11[0xd] = (char)uVar8;
        if ((byte)puVar11[0xc] < uVar8) {
          puVar11[0xd] = puVar11[0xc];
        }
        iVar7 = rand();
        puVar11[0xe] = ((byte)iVar7 & 0x3f) + 0x40;
        puVar11[0xf] = 0x40;
        puVar11[10] = 2;
        break;
      case 0x4f:
        puVar11 = (undefined *)FUN_80041c50(1);
        *puVar11 = uVar3;
        iVar7 = rand();
        puVar11[2] = (byte)iVar7 & 0xf;
        puVar11[3] = 1;
        VecIntToShort((VectorShort *)(puVar11 + 10),param_3);
        VectorAdd(&local_58,param_3,param_4);
        uVar8 = rand();
        local_58.x = local_58.x + -0x20 + (uVar8 & 0x3f);
        uVar8 = rand();
        local_58.y = local_58.y + -0x20 + (uVar8 & 0x3f);
        uVar8 = rand();
        local_58.z = local_58.z + -0x40 + (uVar8 & 0x7f);
        VecIntToShort((VectorShort *)(puVar11 + 4),&local_58);
        puVar11[0x17] = 2;
        iVar7 = rand();
        puVar11[0x10] = (byte)iVar7 | 0xc0;
        iVar7 = rand();
        puVar11[0x11] = ((byte)iVar7 & 0x3f) + 0xa0;
        puVar11[0x12] = 0;
        iVar7 = rand();
        puVar11[0x14] = (byte)iVar7 | 0xe0;
        iVar7 = rand();
        puVar11[0x15] = (byte)iVar7 | 0xe0;
        puVar11[0x16] = 0x80;
        puVar11[0x13] = 0x50;
      }
      local_30 = local_30 + 4;
      local_40 = local_40 + 1;
    } while (local_40 < local_48);
  }
  return puVar11;
}



void FUN_OVR3Colossus__8006ebd0(void)

{
  CollisionType CVar1;
  int iVar2;
  
  switch(Spyro.state) {
  case Ice:
    FUN_8002d9c4();
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    goto LAB_OVR3Colossus__8006ecb0;
  default:
    goto switchD_OVR3Colossus__8006ec00_caseD_a;
  case Whirlwind:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    break;
  case IdleLook:
    iVar2 = FUN_8002d9c4();
    if (iVar2 == 0) {
      FUN_8002d7f8();
    }
    FUN_8002c0f4();
    Spyro.field51_0xc4 = 0;
    goto LAB_OVR3Colossus__8006ec40;
  case HurtSquash:
  case HurtPitchSpin:
    FUN_8002c0f4();
    FUN_8002cc88();
LAB_OVR3Colossus__8006ecb0:
    FUN_8002db08(0xc00);
    break;
  case Spring:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002be04();
    if ((Spyro.physicsVelocity.z < 0) && (3 < Spyro.field35_0x5c)) {
      Spyro.airVelocityFlag = 4;
    }
    break;
  case DeathSquash:
  case New_Name_(1):
  case Spit:
    FUN_8002c0f4();
LAB_OVR3Colossus__8006ec40:
    FUN_8002cc88();
    break;
  case Slide:
    FUN_8002c0f4();
    FUN_8002cc88();
    FUN_8002db08(0xc00);
    CVar1 = GetCollisiontType(Spyro.field72_0x114);
    if (CVar1 == Slip) {
      Spyro.field82_0x14c = 0;
    }
    else {
      Spyro.field82_0x14c = Spyro.field82_0x14c + deltaTime;
    }
    Spyro.field17_0x28 = 0;
    iVar2 = FUN_80050b20(*(undefined *)(audioBank + 0x1f),Spyro.field169_0x264);
    if (iVar2 == 0) {
      Spyro.field169_0x264 = PlayAudio(*(undefined *)(audioBank + 0x1f),0,4);
      Spyro.field170_0x268 = (int)*(byte *)(audioBank + 0x1f);
    }
    goto switchD_OVR3Colossus__8006ec00_caseD_a;
  }
  Spyro.field17_0x28 = 0;
switchD_OVR3Colossus__8006ec00_caseD_a:
  return;
}



void FUN_OVRCredits__8006d298(int param_1,undefined param_2,undefined param_3,undefined param_4)

{
  undefined *puVar1;
  
  puVar1 = primitiveBuffer_next;
  SetDrawMode((DR_MODE *)primitiveBuffer_next,1,0,param_1 << 5,(RECT *)0x0);
  FUN_8001b354(puVar1,8);
  *(undefined4 *)(puVar1 + 0xc) = 0x5000000;
  puVar1[0x13] = 0x2a;
  *(undefined2 *)(puVar1 + 0x16) = 0xc;
  *(undefined2 *)(puVar1 + 0x1a) = 0xc;
  *(undefined2 *)(puVar1 + 0x14) = 0;
  *(undefined2 *)(puVar1 + 0x18) = 0x200;
  *(undefined2 *)(puVar1 + 0x1c) = 0;
  *(undefined2 *)(puVar1 + 0x1e) = 0xe4;
  *(undefined2 *)(puVar1 + 0x20) = 0x200;
  *(undefined2 *)(puVar1 + 0x22) = 0xe4;
  puVar1[0x10] = param_2;
  puVar1[0x11] = param_3;
  puVar1[0x12] = param_4;
  FUN_8001b354(puVar1 + 0xc,8);
  primitiveBuffer_next = puVar1 + 0x24;
  return;
}



int * FUN_OVRCredits__8006d368(int *param_1)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  
  DAT_800673f8 = param_1[1];
  DAT_800673f4 = param_1 + 2;
  param_1 = (int *)((int)param_1 + *param_1);
  piVar3 = param_1 + 1;
  DAT_800670d4 = param_1 + 2;
  DAT_80067124 = (*piVar3 + -4) / 0x1c;
  DAT_800673d8 = *(int *)((int)piVar3 + *piVar3);
  piVar3 = (int *)((int)piVar3 + *piVar3) + 1;
  iVar1 = 0;
  DAT_800673d4 = piVar3;
  if (0 < DAT_800673d8) {
    do {
      iVar1 = iVar1 + 1;
      *piVar3 = (int)param_1 + *piVar3 + 4;
      piVar3 = piVar3 + 1;
    } while (iVar1 < DAT_800673d8);
  }
  DAT_800673dc = (int *)((int)param_1 + *param_1);
  iVar1 = *DAT_800673dc;
  DAT_800673e0 = (int *)((int)DAT_800673dc + *DAT_800673dc);
  if (8 < iVar1) {
    DAT_800673dc = DAT_800673dc + 1;
  }
  DAT_800673e4 = (uint)(8 < iVar1);
  piVar3 = (int *)((int)DAT_800673e0 + *DAT_800673e0);
  if (*DAT_800673e0 < 9) {
    *DAT_800673e0 = -1;
  }
  else {
    DAT_800673e0 = DAT_800673e0 + 1;
  }
  DAT_800681c4 = piVar3 + 1;
  clearColor.Red = *(byte *)(piVar3 + 1);
  clearColor.Green = *(byte *)((int)piVar3 + 5);
  clearColor.Blue = *(byte *)((int)piVar3 + 6);
  piVar2 = piVar3 + 3;
  DAT_800681b8 = piVar3[2];
  iVar1 = 0;
  DAT_800681bc = piVar2;
  if (0 < DAT_800681b8) {
    do {
      iVar1 = iVar1 + 1;
      *piVar2 = (int)DAT_800681c4 + *piVar2;
      piVar2 = piVar2 + 1;
    } while (iVar1 < DAT_800681b8);
  }
  piVar3 = (int *)((int)piVar3 + *piVar3);
  if (((int)DAT_8006707c % 10 & 0xffffU) == 0) {
    FUN_8001d5fc(piVar3 + 1,1);
    piVar3 = (int *)((int)piVar3 + *piVar3);
    PlayAudio(0,0,4);
  }
  return piVar3;
}



void FUN_OVRCredits__8006d5ec(ModelSet *param_1,int param_2,ModelSet *param_3)

{
  int iVar1;
  ModelSet *pMVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  
  if (param_1 < param_3) {
    iVar6 = 0;
    if (param_1->modelCount < 0) {
      iVar5 = 8;
      pMVar2 = param_1;
      do {
        if ((pMVar2->field2_0x8 != 0) && ((ModelSet *)((int)&param_1->modelCount + iVar5) < param_3)
           ) {
          pMVar2->field2_0x8 = (int)&param_1->modelCount + pMVar2->field2_0x8;
        }
        iVar5 = iVar5 + 4;
        iVar6 = iVar6 + 1;
        pMVar2 = (ModelSet *)&pMVar2->field1_0x4;
      } while (iVar6 < 2);
      if (&param_1->defaultModel < param_3) {
        param_1->defaultModel = (uint *)((int)&param_1->modelCount + (int)param_1->defaultModel);
      }
      iVar6 = param_1->modelCount;
      iVar5 = 0;
      param_1->modelCount = -iVar6;
      if (iVar6 < 0) {
        iVar6 = 0x14;
        pMVar2 = param_1;
        do {
          if ((ModelSet *)((int)&param_1->modelCount + iVar6) < param_3) {
            pMVar2->models = pMVar2->models + (int)&param_1->modelCount;
          }
          puVar3 = pMVar2->models;
          if ((ModelSet *)(puVar3 + 8) < param_3) {
            *(short *)(puVar3 + 8) =
                 *(short *)(puVar3 + 8) + ((short)param_1->defaultModel - (short)puVar3);
            puVar3 = pMVar2->models;
            *(short *)(puVar3 + 10) =
                 *(short *)(puVar3 + 10) + ((short)param_1->defaultModel - (short)puVar3);
            puVar3 = pMVar2->models;
          }
          if ((ModelSet *)(puVar3 + 0xc) < param_3) {
            *(short *)(puVar3 + 0xc) =
                 *(short *)(puVar3 + 0xc) + ((short)param_1->defaultModel - (short)puVar3);
            puVar3 = pMVar2->models;
            *(short *)(puVar3 + 0xe) =
                 *(short *)(puVar3 + 0xe) + ((short)param_1->defaultModel - (short)puVar3);
          }
          pMVar2 = (ModelSet *)&pMVar2->field1_0x4;
          iVar5 = iVar5 + 1;
          iVar6 = iVar6 + 4;
        } while (iVar5 < param_1->modelCount);
      }
      param_1 = (ModelSet *)((uint)param_1 & 0x7fffffff);
    }
    else {
      iVar5 = 0x14;
      pMVar2 = param_1;
      do {
        if ((pMVar2->models != (undefined *)0x0) &&
           ((ModelSet *)((int)&param_1->modelCount + iVar5) < param_3)) {
          pMVar2->models = pMVar2->models + (int)&param_1->modelCount;
        }
        iVar5 = iVar5 + 4;
        iVar6 = iVar6 + 1;
        pMVar2 = (ModelSet *)&pMVar2->field1_0x4;
      } while (iVar6 < 8);
      if (&param_1[2].field1_0x4 < param_3) {
        param_1[2].field1_0x4 = (int)&param_1->modelCount + param_1[2].field1_0x4;
      }
      if (&param_1[2].field2_0x8 < param_3) {
        param_1[2].field2_0x8 = (int)&param_1->modelCount + param_1[2].field2_0x8;
      }
      iVar6 = 0;
      if (0 < param_1->modelCount) {
        iVar5 = 0x3c;
        pMVar2 = param_1;
        do {
          if ((ModelSet *)((int)&param_1->modelCount + iVar5) < param_3) {
            pMVar2[2].field3_0xc = (int)&param_1->modelCount + pMVar2[2].field3_0xc;
          }
          iVar4 = pMVar2[2].field3_0xc;
          if ((ModelSet *)(iVar4 + 0xc) < param_3) {
            *(int *)(iVar4 + 0xc) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0xc);
            iVar4 = pMVar2[2].field3_0xc;
          }
          if ((ModelSet *)(iVar4 + 0x10) < param_3) {
            *(int *)(iVar4 + 0x10) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x10);
          }
          iVar4 = pMVar2[2].field3_0xc;
          if ((ModelSet *)(iVar4 + 0x14) < param_3) {
            *(int *)(iVar4 + 0x14) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x14);
            iVar4 = pMVar2[2].field3_0xc;
          }
          if (((ModelSet *)(iVar4 + 0x18) < param_3) && (*(int *)(iVar4 + 0x18) != 0)) {
            *(int *)(iVar4 + 0x18) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x18);
          }
          iVar4 = pMVar2[2].field3_0xc;
          if ((ModelSet *)(iVar4 + 0x1c) < param_3) {
            if (*(int *)(iVar4 + 0x1c) == 0) {
              iVar1 = *(int *)(iVar4 + 0x14);
            }
            else {
              iVar1 = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x1c);
            }
            *(int *)(iVar4 + 0x1c) = iVar1;
          }
          iVar4 = pMVar2[2].field3_0xc;
          if ((ModelSet *)(iVar4 + 0x20) < param_3) {
            *(int *)(iVar4 + 0x20) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x20);
          }
          pMVar2 = (ModelSet *)&pMVar2->field1_0x4;
          iVar6 = iVar6 + 1;
          iVar5 = iVar5 + 4;
        } while (iVar6 < param_1->modelCount);
      }
    }
    objectModels[param_2] = param_1;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8006e4dc)
// WARNING: Removing unreachable block (ram,0x8006e4ec)
// WARNING: Removing unreachable block (ram,0x8006e4f4)
// WARNING: Removing unreachable block (ram,0x8006e518)
// WARNING: Removing unreachable block (ram,0x8006e528)
// WARNING: Removing unreachable block (ram,0x8006e530)

void FUN_OVRCredits__8006d96c(void)

{
  int *piVar1;
  short *psVar2;
  char *pcVar3;
  char *pcVar4;
  byte bVar5;
  char cVar6;
  bool bVar7;
  bool bVar8;
  undefined *puVar9;
  undefined uVar10;
  short sVar11;
  long lVar12;
  uint uVar13;
  short sVar14;
  int iVar15;
  int *piVar16;
  int iVar17;
  int iVar18;
  undefined *puVar19;
  byte **ppbVar20;
  short sVar21;
  int iVar22;
  int iVar23;
  int iVar24;
  byte *pbVar25;
  int iVar26;
  RECT local_90;
  int local_88;
  int local_84;
  undefined4 local_80;
  int local_78;
  undefined4 local_74;
  undefined4 local_70;
  int local_60;
  
  if (DAT_80066ee8 == -1) {
    Spyro.field168_0x260 = 1;
    DrawSync(0);
    DAT_80067170 = 0x2c000;
    doubleFrameBuffer[1].field2_0x70 = (uint *)(DAT_8006b2a4 + -0x2c000);
    doubleFrameBuffer[0].field2_0x70 = (uint *)(DAT_8006b2a4 + -0x58000);
                    // WARNING (jumptable): Read-only address (ram,0x80069998) is written
                    // WARNING: Read-only address (ram,0x80069998) is written
                    // WARNING (jumptable): Read-only address (ram,0x80069a0c) is written
                    // WARNING: Read-only address (ram,0x80069a0c) is written
    iVar15 = 0;
    DAT_8006b29c = doubleFrameBuffer[0].field2_0x70;
    DAT_8006b2a0 = doubleFrameBuffer[1].field2_0x70;
    if (DAT_80067184 == (undefined *)0x0) {
      iVar17 = 0;
      DAT_80066fb8 = &DAT_OVRCredits__8006f018;
      DAT_80066f74 = 0;
      do {
        iVar17 = iVar17 + 1;
        DAT_80066fb8[iVar15 + 4] = 0;
        iVar15 = iVar15 + 0x1c;
      } while (iVar17 < 100);
      DAT_80066ef8 = &DAT_8006fb08;
      Objects = (Object *)&DAT_80071818;
      DAT_8006b290 = &DAT_80075418;
      DAT_80067184 = &DAT_8007a418;
      DAT_8006b288 = &DAT_8007a418;
      DAT_8006b28c = (u_long *)&DAT_8007a418;
    }
    FUN_80013810(DAT_800682d8,DAT_8006b28c,0x800,*(undefined4 *)(&DAT_80067cb0 + DAT_8006707c * 8));
    MemCopy(&DAT_8006b0a4,DAT_8006b28c,0x1c0);
    FUN_80013810(DAT_800682d8,DAT_8006b28c,0x60000,
                 DAT_8006b0a4 + *(int *)(&DAT_80067cb0 + DAT_8006707c * 8));
    local_90.x = 0x200;
    local_90.w = 0x200;
    local_90.y = 0;
    local_90.h = 0x180;
    LoadImage(&local_90,DAT_8006b28c);
    FUN_80013810(DAT_800682d8,DAT_8006b28c,DAT_8006b0a8 + -0x60000,
                 DAT_8006b0a4 + *(int *)(&DAT_80067cb0 + DAT_8006707c * 8) + 0x60000);
    SpuSetTransferStartAddr(0x1010);
    FUN_8005aaa8(DAT_8006b28c,0x7eff0);
    do {
      lVar12 = SpuIsTransferCompleted(0);
    } while (lVar12 == 0);
    FUN_80013810(DAT_800682d8,DAT_8006b28c,DAT_8006b0b0,
                 DAT_8006b0ac + *(int *)(&DAT_80067cb0 + DAT_8006707c * 8));
    DAT_8006b294 = (int *)FUN_OVRCredits__8006d368(DAT_8006b28c);
    DAT_80066fa8 = 0;
    FUN_80013810(DAT_800682d8,DAT_8006b290,DAT_8006b0b8,
                 DAT_8006b0b4 + *(int *)(&DAT_80067cb0 + DAT_8006707c * 8));
    FUN_OVRCredits__8006d5ec(DAT_8006b290,(int)DAT_8006b1e4,0x80800000);
    FUN_80013810(DAT_800682d8,DAT_8006b294,DAT_8006b0c0,
                 DAT_8006b0bc + *(int *)(&DAT_80067cb0 + DAT_8006707c * 8));
    piVar1 = DAT_80066ef8;
    DAT_80067080 = DAT_8006b294;
    DAT_80067180 = (int *)((int)DAT_8006b294 + DAT_8006b294[1] + 4);
    iVar17 = DAT_80067180[1];
    DAT_80066f0c = (short)DAT_80067180[2];
    MemCopy(DAT_80066ef8,DAT_80067180 + 3,*DAT_80067180 + -0xc);
    iVar15 = (int)DAT_80066f0c;
    iVar18 = 0;
    piVar16 = DAT_80066ef8;
    if (0 < iVar15) {
      do {
        iVar18 = iVar18 + 1;
        *piVar16 = (int)piVar1 + *piVar16 + iVar17 + -0xc;
        piVar16 = piVar16 + 3;
      } while (iVar18 < iVar15);
    }
    DAT_80066ee8 = 0;
    DAT_8006707c = DAT_8006707c + 1;
  }
  sVar11 = DAT_80066ee8;
  if ((DAT_80067080 != (int *)0x0) && (-1 < DAT_80066ee8)) {
    piVar1 = DAT_80067080 + 2;
    iVar15 = *DAT_80067080 + deltaTime;
    *DAT_80067080 = iVar15;
    if (iVar15 < *piVar1 * 2) {
      if ((iVar15 < 0x20) || (iVar15 = *piVar1 * 2 - iVar15, iVar15 < 0x20)) {
        blackOverlayOpacity = 0x10 - (iVar15 >> 1);
      }
      else {
        blackOverlayOpacity = 0;
      }
      if (0xf < blackOverlayOpacity) {
        blackOverlayOpacity = 0xf;
      }
      if (blackOverlayOpacity < 0) {
        blackOverlayOpacity = 0;
      }
      cameraPosition.x = (uint)*(ushort *)(DAT_80067080 + (*DAT_80067080 >> 1) * 3 + 4) << 2;
      cameraPosition.y =
           (uint)*(ushort *)((int)DAT_80067080 + (*DAT_80067080 >> 1) * 0xc + 0x12) << 2;
      cameraPosition.z = (uint)*(ushort *)(DAT_80067080 + (*DAT_80067080 >> 1) * 3 + 5) << 2;
      VectorShort_80067ec8.X = *(short *)((int)DAT_80067080 + (*DAT_80067080 >> 1) * 0xc + 0x16);
      VectorShort_80067ec8.Y = *(short *)(DAT_80067080 + (*DAT_80067080 >> 1) * 3 + 6);
      VectorShort_80067ec8.Z = *(short *)((int)DAT_80067080 + (*DAT_80067080 >> 1) * 0xc + 0x1a);
    }
    else {
      DAT_80066ee8 = sVar11 + 1;
    }
  }
  if ((inputStates[0].pressed & (Triangle|Start)) != None) {
    DAT_80066f34 = 1;
  }
  if ((DAT_80066f34 != 0) || ((DAT_80066f74 == 0 && (DAT_80066f0c <= DAT_800670ec)))) {
    uVar13 = (uint)DAT_80067128;
    DAT_80067128 = (ushort)(uVar13 + deltaTime);
    blackOverlayOpacity = (int)((uVar13 + deltaTime) * 0x10000) >> 0x10;
    if (0xf < blackOverlayOpacity) {
      blackOverlayOpacity = 0xf;
    }
    if (blackOverlayOpacity == 0xf) {
      DAT_80066ee8 = 99;
    }
  }
  if ((0 < DAT_80066f74) || ((0 < DAT_80066f0c && (DAT_800670ec < DAT_80066f0c)))) {
    iVar15 = (int)DAT_800670ec;
    local_60 = (int)DAT_800670e8;
    bVar8 = true;
    if (iVar15 <= local_60) {
      iVar17 = iVar15 * 0xc;
      do {
        iVar26 = -1;
        iVar18 = AdvanceTimer((int)DAT_80066ef8 + iVar17 + 6,2);
        if (((iVar18 != 0) &&
            (psVar2 = (short *)((int)DAT_80066ef8 + iVar17 + 8),
            *(undefined2 *)((int)DAT_80066ef8 + iVar17 + 10) = 2, *psVar2 == 0)) &&
           (iVar15 == DAT_800670ec)) {
          DAT_800670ec = DAT_800670ec + 1;
        }
        if (*(short *)((int)DAT_80066ef8 + 10) == 0) {
          iVar26 = 0;
        }
        else {
          iVar18 = AdvanceTimer((int)DAT_80066ef8 + iVar17 + 8,2);
          if (((iVar18 != 0) && (*(short *)((int)DAT_80066ef8 + iVar17 + 0x16) == 0)) &&
             (iVar15 < DAT_80066f0c + -1)) {
            iVar26 = iVar15 + 1;
          }
        }
        if (iVar26 != -1) {
          iVar18 = 0;
          ppbVar20 = (byte **)(DAT_80066ef8 + iVar26 * 3);
          *(undefined2 *)((int)ppbVar20 + 10) = 1;
          if (DAT_800670e8 < iVar26) {
            DAT_800670e8 = (short)iVar26;
          }
          if (DAT_80066f0c < DAT_800670e8) {
            DAT_800670e8 = DAT_80066f0c;
          }
          local_88 = 0x100;
          local_84 = (int)*(short *)(ppbVar20 + 1);
          local_80 = 0xdac;
          local_78 = 0xe;
          local_74 = 1;
          local_70 = 0x1194;
          pbVar25 = *ppbVar20;
          bVar5 = *pbVar25;
          puVar9 = DAT_80066fb8;
          while (DAT_80066fb8 = puVar9, bVar5 != 0) {
                    // WARNING: Read-only address (ram,0x80069998) is written
                    // WARNING: Read-only address (ram,0x80069a0c) is written
                    // WARNING: Read-only address (ram,0x8006b0a4) is written
                    // WARNING: Read-only address (ram,0x8006b0a8) is written
                    // WARNING: Read-only address (ram,0x8006b0ac) is written
                    // WARNING: Read-only address (ram,0x8006b0b0) is written
                    // WARNING: Read-only address (ram,0x8006b0b4) is written
                    // WARNING: Read-only address (ram,0x8006b0b8) is written
                    // WARNING: Read-only address (ram,0x8006b0bc) is written
                    // WARNING: Read-only address (ram,0x8006b0c0) is written
                    // WARNING: Read-only address (ram,0x8006b1e4) is written
            if (bVar5 == 0x20) {
              iVar24 = local_78 * 3;
              bVar8 = true;
              if (iVar24 < 0) {
                iVar24 = iVar24 + 3;
              }
              local_88 = local_88 + (iVar24 >> 2);
            }
            else {
              if (iVar18 < DAT_80066f74) {
                puVar19 = puVar9 + iVar18 * 0x1c;
                iVar24 = iVar18;
                do {
                  if (puVar19[4] == '\0') break;
                  iVar24 = iVar24 + 1;
                  puVar19 = puVar19 + 0x1c;
                } while (iVar24 < DAT_80066f74);
                iVar23 = iVar24;
                if (DAT_80066f74 <= iVar24) goto LAB_OVRCredits__8006e280;
              }
              else {
LAB_OVRCredits__8006e280:
                iVar23 = (int)DAT_80066f74;
                DAT_80066f74 = DAT_80066f74 + 1;
                iVar24 = iVar18;
              }
              if (*pbVar25 - 0x41 < 0x1a) {
                bVar8 = true;
              }
              if (*pbVar25 - 0x61 < 0x1a) {
                bVar8 = false;
              }
              puVar9[iVar23 * 0x1c + 4] = 1;
              bVar7 = 100 < DAT_80066f74;
              *(short *)(puVar9 + iVar23 * 0x1c + 0x18) = (short)iVar26;
              if (bVar7) {
                printf(s_Too_many_moby_tags__OVRCredits__8006d268);
                FUN_8001c2e8();
              }
              *(short *)(puVar9 + iVar23 * 0x1c + 0x12) = (short)local_88;
              *(short *)(puVar9 + iVar23 * 0x1c + 0x14) = (short)local_84;
              *(short *)(puVar9 + iVar23 * 0x1c + 0x16) = (short)local_80;
              if (!bVar8) {
                *(short *)(puVar9 + iVar23 * 0x1c + 0x14) =
                     *(short *)(puVar9 + iVar23 * 0x1c + 0x14) + (short)local_74;
                *(short *)(puVar9 + iVar23 * 0x1c + 0x16) = (short)local_70;
              }
              bVar5 = *pbVar25;
              uVar13 = (uint)bVar5;
              sVar11 = bVar5 - 0x16;
              if (((9 < uVar13 - 0x30) && (sVar11 = bVar5 - 0x41, 0x19 < uVar13 - 0x41)) &&
                 (sVar11 = bVar5 - 0x61, 0x19 < uVar13 - 0x61)) {
                if (uVar13 == 0x21) {
                  sVar11 = 0x24;
                }
                else if (uVar13 == 0x2c) {
                  sVar11 = 0x25;
                }
                else if (uVar13 == 0x2e) {
                  sVar11 = 0x26;
                }
                else if (uVar13 == 0x2d) {
                  sVar11 = 0x27;
                }
                else {
                  sVar11 = 0x27;
                  if (uVar13 == 0x3a) {
                    sVar11 = 0x28;
                  }
                }
              }
              *(short *)(puVar9 + iVar23 * 0x1c + 0x1a) = sVar11;
              if (bVar8) {
                local_88 = local_88 + 0x10;
              }
              else {
                local_88 = local_88 + local_78;
              }
              bVar8 = *pbVar25 - 0x30 < 10;
              iVar18 = iVar24;
            }
            pbVar25 = pbVar25 + 1;
            puVar9 = DAT_80066fb8;
            bVar5 = *pbVar25;
          }
                    // WARNING: Read-only address (ram,0x80069998) is written
                    // WARNING: Read-only address (ram,0x80069a0c) is written
                    // WARNING: Read-only address (ram,0x8006b0a4) is written
                    // WARNING: Read-only address (ram,0x8006b0a8) is written
                    // WARNING: Read-only address (ram,0x8006b0ac) is written
                    // WARNING: Read-only address (ram,0x8006b0b0) is written
                    // WARNING: Read-only address (ram,0x8006b0b4) is written
                    // WARNING: Read-only address (ram,0x8006b0b8) is written
                    // WARNING: Read-only address (ram,0x8006b0bc) is written
                    // WARNING: Read-only address (ram,0x8006b0c0) is written
                    // WARNING: Read-only address (ram,0x8006b1e4) is written
          iVar24 = 0;
          iVar18 = local_88 + -0x100;
          if (0 < DAT_80066f74) {
            iVar23 = 0;
            do {
              puVar9 = DAT_80066fb8;
              if (*(short *)(DAT_80066fb8 + iVar23 + 0x18) == iVar26) {
                iVar22 = (uint)*(ushort *)(DAT_80066fb8 + iVar23 + 0x12) - (iVar18 >> 1);
                sVar11 = (short)((*(short *)(DAT_80066fb8 + iVar23 + 0x16) * -2) / 0x1e);
                sVar21 = (short)iVar22;
                *(short *)(DAT_80066fb8 + iVar23 + 0x12) = sVar21;
                sVar14 = (short)((((iVar22 * 0x10000 >> 0x10) + -0x100) * -3) / 0x1e);
                *(short *)(puVar9 + iVar23 + 0xc) = sVar14;
                *(short *)(puVar9 + iVar23 + 0x10) = sVar11;
                *(short *)(puVar9 + iVar23 + 0x12) = sVar21 + sVar14 * -0x1e;
                *(short *)(puVar9 + iVar23 + 0x16) =
                     *(short *)(puVar9 + iVar23 + 0x16) + sVar11 * -0x1e;
                uVar10 = RandomRangeGen(4,0xf);
                DAT_80066fb8[iVar23 + 8] = uVar10;
                uVar10 = RandomRangeGen(4,0xf);
                DAT_80066fb8[iVar23 + 9] = uVar10;
                uVar10 = RandomRangeGen(4,0xf);
                DAT_80066fb8[iVar23 + 10] = uVar10;
                DAT_80066fb8[iVar23 + 5] = DAT_80066fb8[iVar23 + 8] * -0x1e;
                DAT_80066fb8[iVar23 + 6] = DAT_80066fb8[iVar23 + 9] * -0x1e;
                DAT_80066fb8[iVar23 + 7] = DAT_80066fb8[iVar23 + 10] * -0x1e;
                DAT_80066fb8[iVar23 + 0xb] = 0x1e;
              }
              iVar24 = iVar24 + 1;
              iVar23 = iVar23 + 0x1c;
            } while (iVar24 < DAT_80066f74);
          }
        }
        iVar15 = iVar15 + 1;
        iVar17 = iVar17 + 0xc;
      } while (iVar15 <= local_60);
    }
    iVar15 = 0;
    if (0 < DAT_80066f74) {
      iVar17 = 0;
      do {
        if (*(short *)((int)DAT_80066ef8 + *(short *)(DAT_80066fb8 + iVar17 + 0x18) * 0xc + 10) == 2
           ) {
          if (DAT_80066fb8[iVar17 + 4] == '\x02') {
            DAT_80066fb8[iVar17 + 4] = 3;
          }
          else if (DAT_80066fb8[iVar17 + 4] == '\x04') {
            DAT_80066fb8[iVar17 + 4] = 0;
          }
        }
        iVar15 = iVar15 + 1;
        iVar17 = iVar17 + 0x1c;
      } while (iVar15 < DAT_80066f74);
    }
    iVar15 = 0;
    if (0 < DAT_80066f74) {
      iVar17 = 0;
      do {
        puVar9 = DAT_80066fb8;
        if (DAT_80066fb8[iVar17 + 4] == '\x01') {
          pcVar3 = DAT_80066fb8 + iVar17 + 5;
          pcVar4 = DAT_80066fb8 + iVar17 + 8;
          *(short *)(DAT_80066fb8 + iVar17 + 0x12) =
               *(short *)(DAT_80066fb8 + iVar17 + 0x12) + *(short *)(DAT_80066fb8 + iVar17 + 0xc);
          puVar9[iVar17 + 5] = *pcVar3 + *pcVar4;
          puVar19 = DAT_80066fb8;
          *(short *)(puVar9 + iVar17 + 0x16) =
               *(short *)(puVar9 + iVar17 + 0x16) + *(short *)(puVar9 + iVar17 + 0x10);
          puVar19[iVar17 + 6] = puVar19[iVar17 + 6] + puVar19[iVar17 + 9];
          DAT_80066fb8[iVar17 + 7] = DAT_80066fb8[iVar17 + 7] + DAT_80066fb8[iVar17 + 10];
          cVar6 = DAT_80066fb8[iVar17 + 0xb];
          DAT_80066fb8[iVar17 + 0xb] = cVar6 + -1;
          if ((char)(cVar6 + -1) == '\0') {
            DAT_80066fb8[iVar17 + 4] = 2;
            puVar9 = DAT_80066fb8;
            *(short *)(DAT_80066fb8 + iVar17 + 0xc) =
                 (short)((uint)((*(short *)(DAT_80066fb8 + iVar17 + 0x12) + -0x100) * 0x19) >> 8);
            iVar26 = (int)*(short *)(puVar9 + iVar17 + 0x12);
            iVar18 = 0x100 - iVar26;
            if (iVar18 < 0) {
              iVar18 = iVar26 + -0x100;
            }
            *(short *)(puVar9 + iVar17 + 0x10) = (short)((uint)(iVar18 * 0xf) >> 6);
            sVar11 = randomRangeGen(0x60,0xc0);
            *(short *)(DAT_80066fb8 + iVar17 + 0xe) = -sVar11;
            uVar10 = RandomRangeGen(4,9);
            DAT_80066fb8[iVar17 + 8] = uVar10;
            uVar10 = RandomRangeGen(4,9);
            DAT_80066fb8[iVar17 + 9] = uVar10;
            uVar10 = RandomRangeGen(4,9);
            DAT_80066fb8[iVar17 + 10] = uVar10;
          }
        }
        else if (DAT_80066fb8[iVar17 + 4] == '\x03') {
          psVar2 = (short *)(DAT_80066fb8 + iVar17 + 0xe);
          cVar6 = DAT_80066fb8[iVar17 + 8];
          *(short *)(DAT_80066fb8 + iVar17 + 0x12) =
               *(short *)(DAT_80066fb8 + iVar17 + 0x12) + *(short *)(DAT_80066fb8 + iVar17 + 0xc);
          *(short *)(puVar9 + iVar17 + 0x14) = *(short *)(puVar9 + iVar17 + 0x14) + (*psVar2 >> 4);
          *(short *)(puVar9 + iVar17 + 0x16) =
               *(short *)(puVar9 + iVar17 + 0x16) + *(short *)(puVar9 + iVar17 + 0x10);
          puVar9[iVar17 + 5] = puVar9[iVar17 + 5] + cVar6;
          puVar19 = DAT_80066fb8;
          *(short *)(puVar9 + iVar17 + 0xe) = *(short *)(puVar9 + iVar17 + 0xe) + 0xe;
          puVar19[iVar17 + 6] = puVar19[iVar17 + 6] + puVar19[iVar17 + 9];
          DAT_80066fb8[iVar17 + 7] = DAT_80066fb8[iVar17 + 7] + DAT_80066fb8[iVar17 + 10];
          if (0x140 < *(short *)(DAT_80066fb8 + iVar17 + 0xe)) {
            *(undefined2 *)(DAT_80066fb8 + iVar17 + 0xe) = 0x140;
          }
          if (0x118 < *(short *)(DAT_80066fb8 + iVar17 + 0x14)) {
            DAT_80066fb8[iVar17 + 4] = 4;
          }
        }
        iVar15 = iVar15 + 1;
        iVar17 = iVar17 + 0x1c;
      } while (iVar15 < DAT_80066f74);
    }
    if (0 < DAT_80066f74) {
      cVar6 = DAT_80066fb8[DAT_80066f74 * 0x1c + -0x18];
      while (cVar6 == '\0') {
        DAT_80066f74 = DAT_80066f74 + -1;
        if (DAT_80066f74 < 1) break;
        cVar6 = DAT_80066fb8[DAT_80066f74 * 0x1c + -0x18];
      }
    }
  }
  uVar13 = (uint)DAT_80066ee8;
  if (uVar13 != 0xffffffff) {
    if (0 < (int)uVar13) {
      if (DAT_800682e8 != 0) {
        return;
      }
      iVar15 = CdSync(1,(u_char *)0x0);
      if (iVar15 != 2) {
        return;
      }
      uVar13 = (uint)DAT_80066ee8;
    }
    if (uVar13 < 5) {
                    // WARNING: Could not recover jumptable at 0x8006eaf0. Too many branches
                    // WARNING: Treating indirect jump as call
      (*(code *)(&PTR_LAB_OVRCredits__8006eaf8_OVRCredits__8006d280)[uVar13])();
      return;
    }
  }
                    // WARNING: Read-only address (ram,0x80069998) is written
                    // WARNING: Read-only address (ram,0x80069a0c) is written
                    // WARNING: Read-only address (ram,0x8006b0a4) is written
                    // WARNING: Read-only address (ram,0x8006b0a8) is written
                    // WARNING: Read-only address (ram,0x8006b0ac) is written
                    // WARNING: Read-only address (ram,0x8006b0b0) is written
                    // WARNING: Read-only address (ram,0x8006b0b4) is written
                    // WARNING: Read-only address (ram,0x8006b0b8) is written
                    // WARNING: Read-only address (ram,0x8006b0bc) is written
                    // WARNING: Read-only address (ram,0x8006b0c0) is written
                    // WARNING: Read-only address (ram,0x8006b1e4) is written
  return;
}



void FUN_OVRCredits__8006ee18(void)

{
  undefined2 uVar1;
  int iVar2;
  byte *pbVar3;
  int iVar4;
  Object *pOVar5;
  int iVar6;
  
  if (DAT_80066ee8 == -1) {
    ClearDoubleBuffer();
  }
  else {
                    // WARNING: Read-only address (ram,0x80069941) is written
    doubleFrameBuffer[0].drawEnvironment.r0 = clearColor.Red;
                    // WARNING: Read-only address (ram,0x80069942) is written
    doubleFrameBuffer[0].drawEnvironment.g0 = clearColor.Green;
                    // WARNING: Read-only address (ram,0x80069943) is written
    doubleFrameBuffer[0].drawEnvironment.b0 = clearColor.Blue;
                    // WARNING: Read-only address (ram,0x800699b5) is written
    doubleFrameBuffer[1].drawEnvironment.r0 = clearColor.Red;
                    // WARNING: Read-only address (ram,0x800699b6) is written
    doubleFrameBuffer[1].drawEnvironment.g0 = clearColor.Green;
                    // WARNING: Read-only address (ram,0x800699b7) is written
    doubleFrameBuffer[1].drawEnvironment.b0 = clearColor.Blue;
    iVar4 = 0;
    pOVar5 = Objects;
    if (0 < DAT_80066f74) {
      iVar6 = 0;
      pbVar3 = &(Objects->eulerRotation).pad;
      do {
        iVar2 = DAT_80066fb8 + iVar6;
        if ((*(byte *)(iVar2 + 4) - 1 < 2) || (*(byte *)(iVar2 + 4) == 3)) {
          MEMSET((int *)pOVar5,0,0x58);
          *(int *)(pbVar3 + -0x3b) = (int)*(short *)(iVar2 + 0x12);
          *(int *)(pbVar3 + -0x37) = (int)*(short *)(iVar2 + 0x14);
          *(int *)(pbVar3 + -0x33) = (int)*(short *)(iVar2 + 0x16);
          ((AngleByte *)(pbVar3 + -3))->pitch = *(byte *)(iVar2 + 5);
          pbVar3[-2] = *(byte *)(iVar2 + 6);
          pbVar3[-1] = *(byte *)(iVar2 + 7);
          pOVar5 = pOVar5 + 1;
          pbVar3[-0xb] = (char)*(undefined2 *)(iVar2 + 0x1a);
          uVar1 = *(undefined2 *)(iVar2 + 0x1a);
          *(undefined2 *)(pbVar3 + -0x11) = 0x2a6;
          pbVar3[0xd] = 2;
          pbVar3[5] = 0xff;
          pbVar3[7] = 0x20;
          *pbVar3 = 0x7f;
          pbVar3[-10] = (char)uVar1;
          pbVar3 = pbVar3 + 0x58;
        }
        iVar4 = iVar4 + 1;
        iVar6 = iVar6 + 0x1c;
      } while (iVar4 < DAT_80066f74);
    }
    pOVar5->state = 0xff;
    if (blackOverlayOpacity != 0) {
      iVar4 = blackOverlayOpacity << 4;
      FUN_OVRCredits__8006d298(2,iVar4,iVar4,iVar4);
    }
    RenderObjects();
    DAT_80067400 = 0x11000;
    FUN_80023bb4();
    RenderSkyboxes();
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__8006d960(void)

{
  DAT_800670b4 = (undefined *)0x0;
  ptrUpdateWorld = (undefined *)0x0;
  DAT_800670fc = (undefined *)0x0;
  ptrUpdateParticles = (undefined *)0x0;
  DAT_80067154 = (undefined *)0x0;
  DAT_80067158 = (undefined *)0x0;
  DAT_80066f80 = (undefined *)0x0;
  DAT_80066f84 = (undefined *)0x0;
  DAT_80066f58 = 0;
  DAT_80066f88 = 0;
  DAT_80067078 = (undefined **)0x0;
  DAT_80067074 = 0;
  DAT_80066fc4 = 0;
  DAT_80067070 = 0;
  DAT_800670a8 = 0;
  DAT_80067010 = 0;
  DAT_8006709c = (undefined *)0x0;
  DAT_80067040 = (undefined *)0x0;
  DAT_800670ac = (undefined *)0x0;
  DAT_80067014 = (undefined *)0x0;
  DAT_8006b288 = (undefined4 *)&DAT_OVRTitleScreenAndLoading__8006d264;
  switch(currentLoadedLevel) {
  case SUMMER_FOREST:
    DAT_8006b288 = (undefined4 *)&DAT_OVRTitleScreenAndLoading__8007f8bc;
    DAT_800670b4 = (undefined *)0x8007bcb8;
    ptrUpdateWorld = (undefined *)0x80070480;
    DAT_800670fc = (undefined *)0x8007e100;
    ptrUpdateParticles = (undefined *)0x8007cab8;
    DAT_80067154 = (undefined *)0x80070458;
    DAT_80067158 = (undefined *)0x80070460;
    DAT_80067078 = &PTR_caseD_16_OVRTitleScreenAndLoading__8006d8b0;
    DAT_80067074 = 0x8006ea3c;
    DAT_80066fc4 = 0x8006ee9c;
    DAT_80067070 = 0x8006f008;
    DAT_800670a8 = 0x8006f0a0;
    DAT_80067010 = 0x8006f774;
    DAT_8006709c = (undefined *)0x8006fee0;
    DAT_80067040 = (undefined *)0x8007022c;
    DAT_800670ac = (undefined *)0x80070254;
    DAT_80067014 = (undefined *)0x80070324;
    break;
  case GLIMMER:
    DAT_8006b288 = (undefined4 *)&DAT_80081430;
    DAT_800670b4 = (undefined *)0x8007e1f8;
    ptrUpdateWorld = (undefined *)0x800703a8;
    DAT_800670fc = &DAT_80080290;
    ptrUpdateParticles = (undefined *)0x8007efd8;
    DAT_80067154 = (undefined *)0x80070078;
    DAT_80067158 = (undefined *)0x800702a8;
    DAT_80067078 = (undefined **)0x8006db88;
    DAT_80067074 = 0x8006ea48;
    DAT_80066fc4 = 0x8006ec60;
    DAT_80067070 = 0x8006ed80;
    DAT_800670a8 = 0x8006ee18;
    DAT_80067010 = 0x8006f1d0;
    DAT_8006709c = (undefined *)0x8006fb10;
    DAT_80067040 = (undefined *)0x8006fe50;
    DAT_800670ac = (undefined *)0x8006fe78;
    DAT_80067014 = (undefined *)0x8006ff48;
    break;
  case IDOL_SPRINGS:
    DAT_8006b288 = (undefined4 *)&DAT_80087aa4;
    DAT_800670b4 = &DAT_80083760;
    ptrUpdateWorld = (undefined *)0x80071080;
    DAT_800670fc = &DAT_800860f8;
    ptrUpdateParticles = &DAT_80084558;
    DAT_80067154 = (undefined *)0x80070e78;
    DAT_80067158 = (undefined *)0x80070fa4;
    DAT_80067078 = (undefined **)0x8006dca8;
    DAT_80067074 = 0x8006ede0;
    DAT_80066fc4 = 0x8006f2c0;
    DAT_80067070 = 0x8006f364;
    DAT_800670a8 = 0x8006f3ec;
    DAT_80067010 = 0x8006fc20;
    DAT_8006709c = &LAB_OVRTitleScreenAndLoading__80070548;
    DAT_80067040 = (undefined *)0x80070a20;
    DAT_800670ac = (undefined *)0x80070a48;
    DAT_80067014 = (undefined *)0x80070bac;
    break;
  case COLOSSUS:
    DAT_8006b288 = (undefined4 *)&DAT_80086e18;
    DAT_800670b4 = &DAT_80083c20;
    ptrUpdateWorld = (undefined *)0x800703e8;
    DAT_800670fc = &DAT_80085bb0;
    ptrUpdateParticles = &DAT_800847d0;
    DAT_80067154 = (undefined *)0x8006ff98;
    DAT_80067158 = (undefined *)0x80070118;
    DAT_80067078 = (undefined **)0x8006e018;
    DAT_80067074 = 0x8006ebd0;
    DAT_80066fc4 = 0x8006ede8;
    DAT_80067070 = 0x8006ee70;
    DAT_800670a8 = 0x8006eeec;
    DAT_80067010 = 0x8006f3dc;
    DAT_8006709c = (undefined *)0x8006faa0;
    DAT_80067040 = (undefined *)0x8006fe1c;
    DAT_800670ac = (undefined *)0x8006fe44;
    DAT_80067014 = (undefined *)0x8006ff14;
    break;
  case HURRICOS:
    DAT_8006b288 = (undefined4 *)&DAT_800832b4;
    DAT_800670b4 = &DAT_8007fad8;
    ptrUpdateWorld = (undefined *)0x8006f7a8;
    DAT_800670fc = &DAT_80081e10;
    ptrUpdateParticles = &DAT_80080a60;
    DAT_80067154 = (undefined *)0x8006f620;
    DAT_80067158 = (undefined *)0x8006f710;
    DAT_80067078 = (undefined **)0x8006daa8;
    DAT_80067074 = 0x8006e498;
    DAT_80066fc4 = 0x8006e708;
    DAT_80067070 = 0x8006e710;
    DAT_800670a8 = 0x8006e7a0;
    DAT_80067010 = 0x8006ec40;
    DAT_8006709c = (undefined *)0x8006f338;
    DAT_80067040 = (undefined *)0x8006f4bc;
    DAT_800670ac = (undefined *)0x8006f4e4;
    DAT_80067014 = (undefined *)0x8006f5a8;
    break;
  case AQUARIA_TOWERS:
    DAT_8006b288 = (undefined4 *)&DAT_80084778;
    DAT_800670b4 = &DAT_80080468;
    ptrUpdateWorld = &LAB_OVRTitleScreenAndLoading__800707c8;
    DAT_800670fc = &DAT_80083198;
    ptrUpdateParticles = &DAT_80081b90;
    DAT_80067154 = &LAB_OVRTitleScreenAndLoading__80070790;
    DAT_80067158 = &LAB_OVRTitleScreenAndLoading__80070798;
    DAT_80067078 = (undefined **)0x8006dbd0;
    DAT_80067074 = 0x8006ec1c;
    DAT_80066fc4 = 0x8006efe4;
    DAT_80067070 = 0x8006f048;
    DAT_800670a8 = 0x8006f0d0;
    DAT_80067010 = 0x8006f9a0;
    DAT_8006709c = (undefined *)0x80070258;
    DAT_80067040 = &LAB_OVRTitleScreenAndLoading__80070598;
    DAT_800670ac = &LAB_OVRTitleScreenAndLoading__800705c0;
    DAT_80067014 = &LAB_OVRTitleScreenAndLoading__80070690;
    break;
  case SUNNY_BEACH:
    DAT_8006b288 = (undefined4 *)&DAT_80084258;
    DAT_800670b4 = &DAT_8007ffe0;
    ptrUpdateWorld = (undefined *)0x80071408;
    DAT_800670fc = &DAT_80082b38;
    ptrUpdateParticles = &DAT_80081438;
    DAT_80067154 = (undefined *)0x80071318;
    DAT_80067158 = (undefined *)0x8007134c;
    DAT_80067078 = (undefined **)0x8006dcb0;
    DAT_80067074 = 0x8006ef88;
    DAT_80066fc4 = 0x8006f4a0;
    DAT_80067070 = 0x8006f608;
    DAT_800670a8 = 0x8006f6b8;
    DAT_80067010 = 0x8007004c;
    DAT_8006709c = (undefined *)0x80070b68;
    DAT_80067040 = (undefined *)0x80071064;
    DAT_800670ac = (undefined *)0x8007108c;
    DAT_80067014 = (undefined *)0x800711cc;
    break;
  case OCEAN_SPEEDWAY:
    DAT_8006b288 = (undefined4 *)0x8007cc28;
    DAT_800670b4 = (undefined *)0x80079d30;
    ptrUpdateWorld = (undefined *)0x80072890;
    DAT_800670fc = (undefined *)0x8007b9a0;
    ptrUpdateParticles = (undefined *)0x8007a800;
    DAT_80067154 = (undefined *)0x8006ff58;
    DAT_80067158 = (undefined *)0x8007024c;
    DAT_80066f8c = &LAB_OVRTitleScreenAndLoading__80070730;
    DAT_80066f80 = &LAB_OVRTitleScreenAndLoading__80070790;
    DAT_80066f84 = &LAB_OVRTitleScreenAndLoading__80070994;
    DAT_80066f58 = 0x80071124;
    DAT_80066f88 = 0x800712b0;
    DAT_80066f1c = 0x800726ec;
    DAT_80067078 = (undefined **)0x8006d990;
    DAT_80067074 = 0x8006e7a4;
    DAT_80066fc4 = 0x8006ea6c;
    DAT_80067070 = 0x8006ead0;
    DAT_800670a8 = 0x8006eb58;
    DAT_80067010 = 0x8006ef64;
    DAT_8006709c = (undefined *)0x8006fb70;
    DAT_80067040 = (undefined *)0x8006fd78;
    DAT_800670ac = (undefined *)0x8006fda0;
    DAT_80067014 = (undefined *)0x8006fe64;
    break;
  case CRUSHS_DUNGEON:
    DAT_8006b288 = (undefined4 *)0x80079c50;
    DAT_800670b4 = (undefined *)0x800773a8;
    ptrUpdateWorld = (undefined *)0x800700a0;
    DAT_800670fc = (undefined *)0x80078e08;
    ptrUpdateParticles = (undefined *)0x80077f20;
    DAT_80067154 = (undefined *)0x8006fdd8;
    DAT_80067158 = (undefined *)0x8006fe80;
    DAT_80067078 = (undefined **)0x8006da20;
    DAT_80067074 = 0x8006e714;
    DAT_80066fc4 = 0x8006e8f8;
    DAT_80067070 = 0x8006e968;
    DAT_800670a8 = 0x8006ea04;
    DAT_80067010 = 0x8006ede0;
    DAT_8006709c = (undefined *)0x8006f7a8;
    DAT_80067040 = (undefined *)0x8006fb0c;
    DAT_800670ac = (undefined *)0x8006fb34;
    DAT_80067014 = (undefined *)0x8006fc84;
    break;
  case AUTUMN_PLAINS:
    DAT_8006b288 = &DAT_OVRTitleScreenAndLoading__8007f03c;
    DAT_800670b4 = (undefined *)0x8007b028;
    ptrUpdateWorld = &LAB_OVRTitleScreenAndLoading__800704e8;
    DAT_800670fc = (undefined *)0x8007d880;
    ptrUpdateParticles = (undefined *)0x8007c238;
    DAT_80067154 = (undefined *)0x800704c0;
    DAT_80067158 = (undefined *)0x800704c8;
    DAT_80067078 = &PTR_caseD_1_OVRTitleScreenAndLoading__8006d898;
    DAT_80067074 = 0x8006e9d4;
    DAT_80066fc4 = 0x8006edfc;
    DAT_80067070 = 0x8006ef68;
    DAT_800670a8 = 0x8006f000;
    DAT_80067010 = 0x8006f644;
    DAT_8006709c = (undefined *)0x8006fbd8;
    DAT_80067040 = (undefined *)0x800700dc;
    DAT_800670ac = (undefined *)0x80070104;
    DAT_80067014 = (undefined *)0x8007023c;
    break;
  case SKELOS_BADLANDS:
    DAT_8006b288 = (undefined4 *)&DAT_800864a0;
    DAT_800670b4 = &DAT_80082cc0;
    ptrUpdateWorld = (undefined *)0x8006f040;
    DAT_800670fc = &DAT_800851c8;
    ptrUpdateParticles = &DAT_80083b98;
    DAT_80067154 = (undefined *)0x8006ee58;
    DAT_80067158 = (undefined *)0x8006ef34;
    DAT_80067078 = (undefined **)0x8006dde0;
    DAT_80067074 = 0x8006e3a0;
    DAT_80066fc4 = 0x8006e4ec;
    DAT_80067070 = 0x8006e550;
    DAT_800670a8 = 0x8006e5cc;
    DAT_80067010 = 0x8006e868;
    DAT_8006709c = (undefined *)0x8006ee18;
    DAT_80067040 = (undefined *)0x8006ee20;
    DAT_800670ac = (undefined *)0x8006ee48;
    DAT_80067014 = (undefined *)0x8006ee50;
    break;
  case CRYSTAL_GLACIER:
    DAT_8006b288 = (undefined4 *)&DAT_80084788;
    DAT_800670b4 = &DAT_800805a0;
    ptrUpdateWorld = (undefined *)0x8006fe98;
    DAT_800670fc = &DAT_80082d98;
    ptrUpdateParticles = &DAT_800813c8;
    DAT_80067154 = (undefined *)0x8006fda0;
    DAT_80067158 = (undefined *)0x8006fdf8;
    DAT_80067078 = (undefined **)0x8006dba8;
    DAT_80067074 = 0x8006e76c;
    DAT_80066fc4 = 0x8006e91c;
    DAT_80067070 = 0x8006e980;
    DAT_800670a8 = 0x8006e9fc;
    DAT_80067010 = 0x8006ee00;
    DAT_8006709c = (undefined *)0x8006f678;
    DAT_80067040 = (undefined *)0x8006fad0;
    DAT_800670ac = (undefined *)0x8006faf8;
    DAT_80067014 = (undefined *)0x8006fc18;
    break;
  case BREEZE_HARBOR:
    DAT_8006b288 = (undefined4 *)&DAT_800869d0;
    DAT_800670b4 = &DAT_800820e0;
    ptrUpdateWorld = (undefined *)0x800713a0;
    DAT_800670fc = &DAT_80085160;
    ptrUpdateParticles = &DAT_800839d8;
    DAT_80067154 = (undefined *)0x800711d0;
    DAT_80067158 = (undefined *)0x80071288;
    DAT_80067078 = (undefined **)0x8006dac0;
    DAT_80067074 = 0x8006f068;
    DAT_80066fc4 = 0x8006f4a8;
    DAT_80067070 = 0x8006f594;
    DAT_800670a8 = 0x8006f610;
    DAT_80067010 = 0x8006ff2c;
    DAT_8006709c = (undefined *)0x80070ab8;
    DAT_80067040 = (undefined *)0x80070ea4;
    DAT_800670ac = (undefined *)0x80070ecc;
    DAT_80067014 = (undefined *)0x80071038;
    break;
  case ZEPHYR:
    DAT_8006b288 = (undefined4 *)&DAT_80084a58;
    DAT_800670b4 = &DAT_80080b20;
    ptrUpdateWorld = (undefined *)0x8006f8e0;
    DAT_800670fc = &DAT_80083818;
    ptrUpdateParticles = &DAT_80082508;
    DAT_80067154 = (undefined *)0x8006f7d8;
    DAT_80067158 = (undefined *)0x8006f808;
    DAT_80067078 = (undefined **)0x8006db40;
    DAT_80067074 = 0x8006e4fc;
    DAT_80066fc4 = 0x8006e6fc;
    DAT_80067070 = 0x8006e874;
    DAT_800670a8 = 0x8006e90c;
    DAT_80067010 = 0x8006ed80;
    DAT_8006709c = (undefined *)0x8006f348;
    DAT_80067040 = (undefined *)0x8006f58c;
    DAT_800670ac = (undefined *)0x8006f5b4;
    DAT_80067014 = (undefined *)0x8006f700;
    break;
  case METRO_SPEEDWAY:
    DAT_8006b288 = (undefined4 *)0x8007c420;
    DAT_800670b4 = (undefined *)0x80079400;
    ptrUpdateWorld = (undefined *)0x80072930;
    DAT_800670fc = (undefined *)0x8007b198;
    ptrUpdateParticles = (undefined *)0x80079ff8;
    DAT_80067154 = (undefined *)0x8006ff30;
    DAT_80067158 = (undefined *)0x80070224;
    DAT_80066f8c = &LAB_OVRTitleScreenAndLoading__800707d0;
    DAT_80066f80 = &LAB_OVRTitleScreenAndLoading__80070830;
    DAT_80066f84 = (undefined *)0x80070a34;
    DAT_80066f58 = 0x800711c4;
    DAT_80066f88 = 0x80071350;
    DAT_80066f1c = 0x8007278c;
    DAT_80067078 = (undefined **)0x8006d968;
    DAT_80067074 = 0x8006e77c;
    DAT_80066fc4 = 0x8006ea44;
    DAT_80067070 = 0x8006eaa8;
    DAT_800670a8 = 0x8006eb30;
    DAT_80067010 = 0x8006ef3c;
    DAT_8006709c = (undefined *)0x8006fb48;
    DAT_80067040 = (undefined *)0x8006fd50;
    DAT_800670ac = (undefined *)0x8006fd78;
    DAT_80067014 = (undefined *)0x8006fe3c;
    break;
  case SCORCH:
    DAT_8006b288 = (undefined4 *)&DAT_800821e0;
    DAT_800670b4 = (undefined *)0x8007e998;
    ptrUpdateWorld = (undefined *)0x8006f640;
    DAT_800670fc = &DAT_80080ea0;
    ptrUpdateParticles = &DAT_OVRTitleScreenAndLoading__8007f9d0;
    DAT_80067154 = (undefined *)0x8006f458;
    DAT_80067158 = (undefined *)0x8006f56c;
    DAT_80067078 = (undefined **)0x8006dcb8;
    DAT_80067074 = 0x8006e2fc;
    DAT_80066fc4 = 0x8006e588;
    DAT_80067070 = 0x8006e590;
    DAT_800670a8 = 0x8006e60c;
    DAT_80067010 = 0x8006e9f4;
    DAT_8006709c = (undefined *)0x8006ee38;
    DAT_80067040 = (undefined *)0x8006f1c4;
    DAT_800670ac = (undefined *)0x8006f1ec;
    DAT_80067014 = (undefined *)0x8006f2fc;
    break;
  case SHADY_OASIS:
    DAT_8006b288 = (undefined4 *)&DAT_800864e8;
    DAT_800670b4 = &DAT_80082eb0;
    ptrUpdateWorld = (undefined *)0x8006f9a8;
    DAT_800670fc = &DAT_800851a8;
    ptrUpdateParticles = &DAT_80083cd8;
    DAT_80067154 = (undefined *)0x8006f800;
    DAT_80067158 = (undefined *)0x8006f870;
    DAT_80067078 = (undefined **)0x8006e2a8;
    DAT_80067074 = 0x8006e78c;
    DAT_80066fc4 = 0x8006e94c;
    DAT_80067070 = 0x8006e954;
    DAT_800670a8 = 0x8006e9d0;
    DAT_80067010 = 0x8006ed04;
    DAT_8006709c = (undefined *)0x8006f108;
    DAT_80067040 = (undefined *)0x8006f548;
    DAT_800670ac = (undefined *)0x8006f570;
    DAT_80067014 = (undefined *)0x8006f68c;
    break;
  case MAGMA_CONE:
    DAT_8006b288 = (undefined4 *)&DAT_80083b40;
    DAT_800670b4 = &DAT_8007fee0;
    ptrUpdateWorld = (undefined *)0x80071088;
    DAT_800670fc = &DAT_800826d0;
    ptrUpdateParticles = &DAT_80080e78;
    DAT_80067154 = (undefined *)0x80070ca0;
    DAT_80067158 = (undefined *)0x80070db0;
    DAT_80067078 = (undefined **)0x8006dbc8;
    DAT_80067074 = 0x8006edec;
    DAT_80066fc4 = 0x8006f088;
    DAT_80067070 = 0x8006f1f0;
    DAT_800670a8 = 0x8006f288;
    DAT_80067010 = 0x8006f788;
    DAT_8006709c = (undefined *)0x80070368;
    DAT_80067040 = &LAB_OVRTitleScreenAndLoading__800708ac;
    DAT_800670ac = (undefined *)0x800708d4;
    DAT_80067014 = (undefined *)0x80070ab0;
    break;
  case FRACTURE_HILLS:
    DAT_8006b288 = (undefined4 *)&DAT_80084830;
    DAT_800670b4 = &DAT_80080480;
    ptrUpdateWorld = (undefined *)0x800703b0;
    DAT_800670fc = &DAT_80083440;
    ptrUpdateParticles = &DAT_80081c68;
    DAT_80067154 = (undefined *)0x800702d8;
    DAT_80067158 = (undefined *)0x8007030c;
    DAT_80067078 = (undefined **)0x8006dc48;
    DAT_80067074 = 0x8006e8ac;
    DAT_80066fc4 = 0x8006ebb8;
    DAT_80067070 = 0x8006ec28;
    DAT_800670a8 = 0x8006ecb8;
    DAT_80067010 = 0x8006f190;
    DAT_8006709c = (undefined *)0x8006fac0;
    DAT_80067040 = (undefined *)0x8006fef0;
    DAT_800670ac = (undefined *)0x8006ff18;
    DAT_80067014 = (undefined *)0x80070050;
    break;
  case ICY_SPEEDWAY:
    DAT_8006b288 = (undefined4 *)0x8007ca40;
    DAT_800670b4 = (undefined *)0x80079860;
    ptrUpdateWorld = (undefined *)0x80072c18;
    DAT_800670fc = (undefined *)0x8007b7b8;
    ptrUpdateParticles = (undefined *)0x8007a618;
    DAT_80067154 = (undefined *)0x80070248;
    DAT_80067158 = &LAB_OVRTitleScreenAndLoading__8007053c;
    DAT_80066f8c = (undefined *)0x80070ab8;
    DAT_80066f80 = (undefined *)0x80070b18;
    DAT_80066f84 = (undefined *)0x80070d1c;
    DAT_80066f58 = 0x800714ac;
    DAT_80066f88 = 0x80071638;
    DAT_80066f1c = 0x80072a74;
    DAT_80067078 = (undefined **)
                   (s_libmcrd__event_overflow_OVRTitleScreenAndLoading__8006d920 + 0x10);
    DAT_80067074 = 0x8006e850;
    DAT_80066fc4 = 0x8006ec40;
    DAT_80067070 = 0x8006eca4;
    DAT_800670a8 = 0x8006ed2c;
    DAT_80067010 = 0x8006f180;
    DAT_8006709c = (undefined *)0x8006fd90;
    DAT_80067040 = (undefined *)0x80070050;
    DAT_800670ac = (undefined *)0x80070078;
    DAT_80067014 = (undefined *)0x80070148;
    break;
  case GULPS_OVERLOOK:
    DAT_8006b288 = (undefined4 *)0x8007d87c;
    DAT_800670b4 = (undefined *)0x8007a9a0;
    ptrUpdateWorld = (undefined *)0x8006f3b0;
    DAT_800670fc = (undefined *)0x8007ca28;
    ptrUpdateParticles = (undefined *)0x8007bb28;
    DAT_80067154 = (undefined *)0x8006f0f0;
    DAT_80067158 = (undefined *)0x8006f198;
    DAT_80067078 = (undefined **)0x8006dae8;
    DAT_80067074 = 0x8006e020;
    DAT_80066fc4 = 0x8006e16c;
    DAT_80067070 = 0x8006e1dc;
    DAT_800670a8 = 0x8006e258;
    DAT_80067010 = 0x8006e4c0;
    DAT_8006709c = (undefined *)0x8006eac0;
    DAT_80067040 = (undefined *)0x8006ee24;
    DAT_800670ac = (undefined *)0x8006ee4c;
    DAT_80067014 = (undefined *)0x8006ef9c;
    break;
  case WINTER_TUNDRA:
    DAT_8006b288 = (undefined4 *)0x8007db28;
    DAT_800670b4 = (undefined *)0x80079d68;
    ptrUpdateWorld = (undefined *)0x800705c8;
    DAT_800670fc = (undefined *)0x8007c3e8;
    ptrUpdateParticles = (undefined *)0x8007aed0;
    DAT_80067154 = &LAB_OVRTitleScreenAndLoading__800705a0;
    DAT_80067158 = &LAB_OVRTitleScreenAndLoading__800705a8;
    DAT_80067078 = &PTR_caseD_1_OVRTitleScreenAndLoading__8006d898;
    DAT_80067074 = 0x8006ead8;
    DAT_80066fc4 = 0x8006ee50;
    DAT_80067070 = 0x8006ef30;
    DAT_800670a8 = 0x8006efac;
    DAT_80067010 = 0x8006f748;
    DAT_8006709c = (undefined *)0x8006fe18;
    DAT_80067040 = (undefined *)0x80070308;
    DAT_800670ac = (undefined *)0x80070330;
    DAT_80067014 = (undefined *)0x80070408;
    break;
  case MYSTIC_MARSH:
    DAT_8006b288 = (undefined4 *)&DAT_800861e4;
    DAT_800670b4 = &DAT_80081ca8;
    ptrUpdateWorld = (undefined *)0x80071238;
    DAT_800670fc = &DAT_800847f0;
    ptrUpdateParticles = &DAT_80082dc0;
    DAT_80067154 = (undefined *)0x80071128;
    DAT_80067158 = (undefined *)0x80071194;
    DAT_80067078 = (undefined **)0x8006da48;
    DAT_80067074 = 0x8006ee04;
    DAT_80066fc4 = 0x8006f288;
    DAT_80067070 = 0x8006f2f8;
    DAT_800670a8 = 0x8006f374;
    DAT_80067010 = 0x8006fdd4;
    DAT_8006709c = &LAB_OVRTitleScreenAndLoading__80070838;
    DAT_80067040 = (undefined *)0x80070d7c;
    DAT_800670ac = (undefined *)0x80070da4;
    DAT_80067014 = (undefined *)0x80070ecc;
    break;
  case CLOUD_TEMPLES:
    DAT_8006b288 = (undefined4 *)&DAT_80082680;
    DAT_800670b4 = (undefined *)0x8007eb90;
    ptrUpdateWorld = (undefined *)0x8006e8a8;
    DAT_800670fc = &DAT_80081258;
    ptrUpdateParticles = &DAT_8007fc80;
    DAT_80067154 = (undefined *)0x8006e7d0;
    DAT_80067158 = (undefined *)0x8006e800;
    DAT_80067078 = (undefined **)
                   (s_Access_Denied____file_already_op_OVRTitleScreenAndLoading__8006d78c + 4);
    DAT_80067074 = 0x8006dc68;
    DAT_80066fc4 = 0x8006dd18;
    DAT_80067070 = 0x8006dd20;
    DAT_800670a8 = 0x8006dda0;
    DAT_80067010 = 0x8006dfb8;
    DAT_8006709c = (undefined *)0x8006e0f8;
    DAT_80067040 = (undefined *)0x8006e524;
    DAT_800670ac = (undefined *)0x8006e54c;
    DAT_80067014 = (undefined *)0x8006e66c;
    break;
  case CANYON_SPEEDWAY:
    DAT_8006b288 = (undefined4 *)0x8007c7d0;
    DAT_800670b4 = (undefined *)0x80079e80;
    ptrUpdateWorld = (undefined *)0x800731d8;
    DAT_800670fc = (undefined *)0x8007b9f0;
    ptrUpdateParticles = (undefined *)0x8007ab58;
    DAT_80067154 = &LAB_OVRTitleScreenAndLoading__800707f8;
    DAT_80067158 = (undefined *)0x80070aec;
    DAT_80066f8c = (undefined *)0x80071078;
    DAT_80066f80 = (undefined *)0x800710d8;
    DAT_80066f84 = (undefined *)0x800712dc;
    DAT_80066f58 = 0x80071a6c;
    DAT_80066f88 = 0x80071bf8;
    DAT_80066f1c = 0x80073034;
    DAT_80067078 = (undefined **)(s_card_read_error_OVRTitleScreenAndLoading__8006d940 + 8);
    DAT_80067074 = 0x8006eafc;
    DAT_80066fc4 = 0x8006ee60;
    DAT_80067070 = 0x8006ef04;
    DAT_800670a8 = 0x8006ef94;
    DAT_80067010 = 0x8006f420;
    DAT_8006709c = (undefined *)0x80070230;
    DAT_80067040 = &LAB_OVRTitleScreenAndLoading__80070600;
    DAT_800670ac = &LAB_OVRTitleScreenAndLoading__80070628;
    DAT_80067014 = &LAB_OVRTitleScreenAndLoading__800706f8;
    break;
  case ROBOTICA_FARMS:
    DAT_8006b288 = (undefined4 *)&DAT_80081198;
    DAT_800670b4 = (undefined *)0x8007dc98;
    ptrUpdateWorld = (undefined *)0x800700b0;
    DAT_800670fc = &DAT_8007ff80;
    ptrUpdateParticles = (undefined *)0x8007ebe8;
    DAT_80067154 = (undefined *)0x8006ffb0;
    DAT_80067158 = (undefined *)0x8007000c;
    DAT_80067078 = (undefined **)0x8006dd70;
    DAT_80067074 = 0x8006e918;
    DAT_80066fc4 = 0x8006ec30;
    DAT_80067070 = 0x8006ec38;
    DAT_800670a8 = 0x8006ece8;
    DAT_80067010 = 0x8006f304;
    DAT_8006709c = (undefined *)0x8006fcc8;
    DAT_80067040 = (undefined *)0x8006fe4c;
    DAT_800670ac = (undefined *)0x8006fe74;
    DAT_80067014 = (undefined *)0x8006ff38;
    break;
  case METROPOLIS:
    DAT_8006b288 = (undefined4 *)&DAT_80084650;
    DAT_800670b4 = &DAT_80081548;
    ptrUpdateWorld = (undefined *)0x80071a60;
    DAT_800670fc = &DAT_80083570;
    ptrUpdateParticles = &DAT_80082250;
    DAT_80067154 = (undefined *)0x800717b8;
    DAT_80067158 = (undefined *)0x80071838;
    DAT_80067078 = (undefined **)0x8006dfd0;
    DAT_80067074 = 0x8006f288;
    DAT_80066fc4 = 0x8006f5f4;
    DAT_80067070 = 0x8006f7c4;
    DAT_800670a8 = 0x8006f874;
    DAT_80067010 = 0x8006fdd8;
    DAT_8006709c = (undefined *)0x80070b78;
    DAT_80067040 = (undefined *)0x800713c4;
    DAT_800670ac = (undefined *)0x800713ec;
    DAT_80067014 = (undefined *)0x800715f0;
    break;
  case DRAGON_SHORES:
    DAT_8006b288 = (undefined4 *)&DAT_80083050;
    DAT_800670b4 = &DAT_OVRTitleScreenAndLoading__8007f9d4;
    ptrUpdateWorld = (undefined *)0x80070ff0;
    DAT_800670fc = &DAT_80081b20;
    ptrUpdateParticles = &DAT_80080790;
    DAT_80067154 = (undefined *)0x80070c84;
    DAT_80067158 = (undefined *)0x80070d30;
    DAT_80067078 = (undefined **)0x8006db14;
    DAT_80067074 = 0x8006e7d4;
    DAT_80066fc4 = 0x8006eb14;
    DAT_80067070 = 0x8006eb78;
    DAT_800670a8 = 0x8006ebe8;
    DAT_80067010 = 0x8006f27c;
    DAT_8006709c = (undefined *)0x8006ffa8;
    DAT_80067040 = (undefined *)0x80070980;
    DAT_800670ac = &LAB_OVRTitleScreenAndLoading__800709d0;
    DAT_80067014 = (undefined *)0x80070ae0;
    break;
  case RIPTOS_ARENA:
    DAT_8006b288 = (undefined4 *)&DAT_8008bbe4;
    DAT_800670b4 = &DAT_800881b0;
    ptrUpdateWorld = (undefined *)0x80071258;
    DAT_800670fc = &DAT_8008ab40;
    ptrUpdateParticles = &DAT_800896d0;
    DAT_80067154 = (undefined *)0x80070af8;
    DAT_80067158 = (undefined *)0x80070b30;
    DAT_80067078 = (undefined **)0x8006df58;
    DAT_80067074 = 0x8006eee0;
    DAT_80066fc4 = 0x8006f22c;
    DAT_80067070 = 0x8006f290;
    DAT_800670a8 = 0x8006f340;
    DAT_80067010 = 0x8006f7a4;
    DAT_8006709c = (undefined *)0x80070468;
    DAT_80067040 = &LAB_OVRTitleScreenAndLoading__800707f8;
    DAT_800670ac = &LAB_OVRTitleScreenAndLoading__80070820;
    DAT_80067014 = &LAB_OVRTitleScreenAndLoading__80070928;
  }
  return;
}



int FUN_OVRTitleScreenAndLoading__8006fa98(int *param_1)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  CollisionType **ppCVar4;
  Vec3 *from;
  int *piVar5;
  
  DAT_800673f8 = param_1[1];
  DAT_800673f4 = param_1 + 2;
  param_1 = (int *)((int)param_1 + *param_1);
  piVar3 = param_1 + 1;
  DAT_800670d4 = param_1 + 2;
  DAT_80067124 = (*piVar3 + -4) / 0x1c;
  DAT_800673d8 = *(int *)((int)piVar3 + *piVar3);
  piVar3 = (int *)((int)piVar3 + *piVar3) + 1;
  iVar1 = 0;
  DAT_800673d4 = piVar3;
  if (0 < DAT_800673d8) {
    do {
      iVar1 = iVar1 + 1;
      *piVar3 = (int)param_1 + *piVar3 + 4;
      piVar3 = piVar3 + 1;
    } while (iVar1 < DAT_800673d8);
  }
  DAT_800673dc = (int *)((int)param_1 + *param_1);
  iVar1 = *DAT_800673dc;
  DAT_800673e0 = (int *)((int)DAT_800673dc + *DAT_800673dc);
  if (8 < iVar1) {
    DAT_80067400 = 0x2c000;
    DAT_800673dc = DAT_800673dc + 1;
  }
  else {
    DAT_80067400 = 0x18000;
  }
  DAT_800673e4 = (uint)(8 < iVar1);
  piVar3 = (int *)((int)DAT_800673e0 + *DAT_800673e0);
  if (*DAT_800673e0 < 9) {
    *DAT_800673e0 = -1;
  }
  else {
    DAT_800673e0 = DAT_800673e0 + 1;
  }
  DAT_800673ec = piVar3[1];
  ppCVar4 = (CollisionType **)(piVar3 + 2);
  iVar1 = 0;
  collisionTypes = ppCVar4;
  if (0 < DAT_800673ec) {
    do {
      iVar1 = iVar1 + 1;
      *ppCVar4 = (CollisionType *)((int)piVar3 + (int)(*ppCVar4 + 1));
      ppCVar4 = ppCVar4 + 1;
    } while (iVar1 < DAT_800673ec);
  }
  piVar3 = (int *)((int)piVar3 + *piVar3);
  DAT_800673f0 = piVar3 + 1;
  from = (Vec3 *)((int)piVar3 + *piVar3);
  VectorCopy((Vec3 *)&DAT_80067408,from);
  piVar3 = &from[1].y;
  TerrainCollisionData = (TerrainCollision *)piVar3;
  from[2].y = (int)piVar3 + from[2].y;
  TerrainCollisionData->field4_0x10 = TerrainCollisionData->field4_0x10 + (int)piVar3;
  TerrainCollisionData->triangles =
       (Triangle *)((int)&(TerrainCollisionData->triangles->v1).x + (int)piVar3);
  TerrainCollisionData->collisionFlags = TerrainCollisionData->collisionFlags + (int)piVar3;
  TerrainCollisionData->field7_0x1c = TerrainCollisionData->field7_0x1c + (int)piVar3;
  TerrainCollisionData->field8_0x20 = TerrainCollisionData->field8_0x20 + (int)piVar3;
  piVar5 = (int *)((int)&from[1].x + from[1].x);
  DAT_800681c4 = piVar5 + 1;
  piVar5 = (int *)((int)piVar5 + *piVar5);
  iVar1 = piVar5[1];
  piVar3 = piVar5 + 2;
  iVar2 = 0;
  DAT_80066f00 = piVar3;
  DAT_80066fa8 = iVar1;
  if (0 < iVar1) {
    do {
      iVar2 = iVar2 + 1;
      piVar3[0xf] = piVar3[0xf] + (int)piVar5;
      piVar3 = piVar3 + 0x11;
    } while (iVar2 < iVar1);
  }
  piVar5 = (int *)((int)piVar5 + *piVar5);
  piVar3 = piVar5 + 2;
  for (iVar1 = piVar5[1]; 0 < iVar1; iVar1 = iVar1 + -1) {
    *(int **)(&DAT_80069e30 + *(short *)piVar3 * 4) = piVar3;
    piVar3 = (int *)((int)piVar3 + *(short *)((int)piVar3 + 2) + 4);
  }
  piVar5 = (int *)((int)piVar5 + *piVar5);
  iVar2 = piVar5[1];
  piVar3 = piVar5 + 2;
  iVar1 = 0;
  DAT_80066f2c = piVar3;
  if (0 < iVar2) {
    do {
      iVar1 = iVar1 + 1;
      *piVar3 = (int)piVar3 + *piVar3;
      piVar3 = piVar3 + 1;
    } while (iVar1 < iVar2);
  }
  DAT_800670c0 = (int)piVar5 + *piVar5;
  piVar3 = (int *)(DAT_800670c0 + 0x20);
  FUN_8001d5fc(DAT_800670c0 + 0x24,1);
  return (int)piVar3 + *piVar3;
}



void FUN_OVRTitleScreenAndLoading__8006feb0(int *param_1,int *param_2)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  uint *puVar4;
  int **ppiVar5;
  int iVar6;
  int iVar7;
  
  iVar6 = 0;
  puVar4 = DAT_80066f24;
  if (0 < objectModels[0]->modelCount) {
    do {
      if ((*puVar4 < DAT_8006b2ac) || (*puVar4 == 0xffffffff)) {
        *puVar4 = 0;
      }
      iVar6 = iVar6 + 1;
      puVar4 = puVar4 + 1;
    } while (iVar6 < objectModels[0]->modelCount);
  }
  puVar4 = DAT_80066f24;
  iVar1 = DAT_80066edc;
  piVar2 = param_1 + 1;
  iVar6 = *param_1;
  while (-1 < iVar6) {
    iVar7 = *piVar2;
    piVar3 = piVar2 + 1;
    ppiVar5 = (int **)(puVar4 + iVar6);
    *ppiVar5 = piVar3;
    piVar2[2] = (int)(piVar3 + (uint)*(byte *)piVar3 * 5 + 5);
    piVar2 = *ppiVar5;
    if (piVar2 + 2 < param_2) {
      piVar2[2] = iVar1 + piVar2[2];
      piVar2 = *ppiVar5;
    }
    if (piVar2 + 3 < param_2) {
      piVar2[3] = iVar1 + piVar2[3];
    }
    piVar2 = *ppiVar5;
    if (piVar2 + 4 < param_2) {
      piVar2[4] = piVar2[1] + piVar2[4];
    }
    piVar2 = (int *)((int)piVar3 + iVar7) + 1;
    iVar6 = *(int *)((int)piVar3 + iVar7);
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__80070018(ModelSet *param_1,int param_2,ModelSet *param_3)

{
  int iVar1;
  ModelSet *pMVar2;
  undefined *puVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  
  if (param_1 < param_3) {
    iVar6 = 0;
    if (param_1->modelCount < 0) {
      iVar5 = 8;
      pMVar2 = param_1;
      do {
        if ((pMVar2->field2_0x8 != 0) && ((ModelSet *)((int)&param_1->modelCount + iVar5) < param_3)
           ) {
          pMVar2->field2_0x8 = (int)&param_1->modelCount + pMVar2->field2_0x8;
        }
        iVar5 = iVar5 + 4;
        iVar6 = iVar6 + 1;
        pMVar2 = (ModelSet *)&pMVar2->field1_0x4;
      } while (iVar6 < 2);
      if (&param_1->defaultModel < param_3) {
        param_1->defaultModel = (uint *)((int)&param_1->modelCount + (int)param_1->defaultModel);
      }
      iVar6 = param_1->modelCount;
      iVar5 = 0;
      param_1->modelCount = -iVar6;
      if (iVar6 < 0) {
        iVar6 = 0x14;
        pMVar2 = param_1;
        do {
          if ((ModelSet *)((int)&param_1->modelCount + iVar6) < param_3) {
            pMVar2->models = pMVar2->models + (int)&param_1->modelCount;
          }
          puVar3 = pMVar2->models;
          if ((ModelSet *)(puVar3 + 8) < param_3) {
            *(short *)(puVar3 + 8) =
                 *(short *)(puVar3 + 8) + ((short)param_1->defaultModel - (short)puVar3);
            puVar3 = pMVar2->models;
            *(short *)(puVar3 + 10) =
                 *(short *)(puVar3 + 10) + ((short)param_1->defaultModel - (short)puVar3);
            puVar3 = pMVar2->models;
          }
          if ((ModelSet *)(puVar3 + 0xc) < param_3) {
            *(short *)(puVar3 + 0xc) =
                 *(short *)(puVar3 + 0xc) + ((short)param_1->defaultModel - (short)puVar3);
            puVar3 = pMVar2->models;
            *(short *)(puVar3 + 0xe) =
                 *(short *)(puVar3 + 0xe) + ((short)param_1->defaultModel - (short)puVar3);
          }
          pMVar2 = (ModelSet *)&pMVar2->field1_0x4;
          iVar5 = iVar5 + 1;
          iVar6 = iVar6 + 4;
        } while (iVar5 < param_1->modelCount);
      }
      param_1 = (ModelSet *)((uint)param_1 & 0x7fffffff);
    }
    else {
      iVar5 = 0x14;
      pMVar2 = param_1;
      do {
        if ((pMVar2->models != (undefined *)0x0) &&
           ((ModelSet *)((int)&param_1->modelCount + iVar5) < param_3)) {
          pMVar2->models = pMVar2->models + (int)&param_1->modelCount;
        }
        iVar5 = iVar5 + 4;
        iVar6 = iVar6 + 1;
        pMVar2 = (ModelSet *)&pMVar2->field1_0x4;
      } while (iVar6 < 8);
      if (&param_1[2].field1_0x4 < param_3) {
        param_1[2].field1_0x4 = (int)&param_1->modelCount + param_1[2].field1_0x4;
      }
      if (&param_1[2].field2_0x8 < param_3) {
        param_1[2].field2_0x8 = (int)&param_1->modelCount + param_1[2].field2_0x8;
      }
      iVar6 = 0;
      if (0 < param_1->modelCount) {
        iVar5 = 0x3c;
        pMVar2 = param_1;
        do {
          if ((ModelSet *)((int)&param_1->modelCount + iVar5) < param_3) {
            pMVar2[2].field3_0xc = (int)&param_1->modelCount + pMVar2[2].field3_0xc;
          }
          iVar4 = pMVar2[2].field3_0xc;
          if ((ModelSet *)(iVar4 + 0xc) < param_3) {
            *(int *)(iVar4 + 0xc) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0xc);
            iVar4 = pMVar2[2].field3_0xc;
          }
          if ((ModelSet *)(iVar4 + 0x10) < param_3) {
            *(int *)(iVar4 + 0x10) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x10);
          }
          iVar4 = pMVar2[2].field3_0xc;
          if ((ModelSet *)(iVar4 + 0x14) < param_3) {
            *(int *)(iVar4 + 0x14) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x14);
            iVar4 = pMVar2[2].field3_0xc;
          }
          if (((ModelSet *)(iVar4 + 0x18) < param_3) && (*(int *)(iVar4 + 0x18) != 0)) {
            *(int *)(iVar4 + 0x18) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x18);
          }
          iVar4 = pMVar2[2].field3_0xc;
          if ((ModelSet *)(iVar4 + 0x1c) < param_3) {
            if (*(int *)(iVar4 + 0x1c) == 0) {
              iVar1 = *(int *)(iVar4 + 0x14);
            }
            else {
              iVar1 = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x1c);
            }
            *(int *)(iVar4 + 0x1c) = iVar1;
          }
          iVar4 = pMVar2[2].field3_0xc;
          if ((ModelSet *)(iVar4 + 0x20) < param_3) {
            *(int *)(iVar4 + 0x20) = param_1[2].field2_0x8 + *(int *)(iVar4 + 0x20);
          }
          pMVar2 = (ModelSet *)&pMVar2->field1_0x4;
          iVar6 = iVar6 + 1;
          iVar5 = iVar5 + 4;
        } while (iVar6 < param_1->modelCount);
      }
    }
    objectModels[param_2] = param_1;
  }
  return;
}



int FUN_OVRTitleScreenAndLoading__80070398(undefined4 param_1,undefined4 param_2)

{
  short sVar1;
  int *piVar2;
  short *psVar3;
  int *piVar4;
  int iVar5;
  
  piVar2 = &DAT_8006b0e4;
  FUN_OVRTitleScreenAndLoading__8006feb0(DAT_8006b290 + (DAT_8006b0e4 - DAT_8006b0b4));
  iVar5 = 1;
  if (0 < DAT_8006b0ec) {
    piVar4 = &DAT_8006b0ec;
    psVar3 = &DAT_8006b1e6;
    do {
      piVar2 = piVar2 + 1;
      piVar4 = piVar4 + 1;
      sVar1 = *psVar3;
      psVar3 = psVar3 + 1;
      FUN_OVRTitleScreenAndLoading__80070018
                (DAT_8006b290 + (*piVar2 - DAT_8006b0b4),(int)sVar1,param_2);
      iVar5 = iVar5 + 1;
    } while (0 < *piVar4);
  }
  return (DAT_8006b290 + (&DAT_8006b0e4)[iVar5]) - DAT_8006b0b4;
}



void FUN_OVRTitleScreenAndLoading__80070498(void)

{
  uint uVar1;
  long lVar2;
  u_long *puVar3;
  undefined4 uVar4;
  int iVar5;
  int iVar6;
  RECT RStack_18;
  
  switch(loadingStatus) {
  default:
    goto LAB_OVRTitleScreenAndLoading__800709e4;
  case 2:
    MemCopy(&DAT_8006abd0,DAT_80067068,0x28);
    DAT_80067068 = &DAT_8006abd0;
    g_currLevelID = (LevelID)(byte)(&DAT_80064940)[currentLoadedLevel];
    if ((int)currentLoadedLevel < 0x43) {
      DAT_80067148 = 0;
      DAT_80066ff0 = 0;
      DAT_80066f44 = 0;
      DAT_80066ff4 = 0;
      inHomeWorld = (uint)((int)currentLoadedLevel % 10 == 0);
      inSpeedwayFlag = -1;
      if (((int)currentLoadedLevel % 10 == 5) &&
         (inSpeedwayFlag = (int)currentLoadedLevel / 10 + -2, currentLoadedLevel == DRAGON_SHORES))
      {
        inSpeedwayFlag = -1;
      }
      DAT_80067090 = (uint)worldsCompleted[g_currLevelID];
    }
    if ((currentLoadedLevel == SHADY_OASIS) || (currentLoadedLevel == MYSTIC_MARSH)) {
      DAT_80066fa4 = 1;
    }
    else {
      DAT_80066fa4 = 0;
    }
    FUN_OVRTitleScreenAndLoading__8006d960();
    iVar5 = *(int *)(&DAT_8006774c + g_currLevelID * 0x10);
    if (*(int *)(&DAT_8006774c + g_currLevelID * 0x10) < DAT_800670c4) {
      iVar5 = DAT_800670c4;
    }
    DAT_8006b288 = (u_long *)(&DAT_OVRTitleScreenAndLoading__8006d264 + iVar5);
    DAT_8006b28c = DAT_8006b288;
    iVar5 = *(int *)(&DAT_80067750 + g_currLevelID * 0x10);
    uVar4 = 0x800;
    puVar3 = DAT_8006b288;
    break;
  case 3:
    MemCopy(&DAT_8006b0a4,DAT_8006b28c,0x1c0);
    FUN_80013918(DAT_800682d8,DAT_8006b28c,0x80000,
                 DAT_8006b0a4 + *(int *)(&DAT_80067750 + g_currLevelID * 0x10));
    if (currGameState != 9) {
      DAT_80066fac = 0;
      return;
    }
    DAT_80066fac = 2;
    return;
  case 4:
    switch(DAT_80066fac) {
    case 0:
      RStack_18.x = 0x200;
      RStack_18.w = 0x200;
      RStack_18.y = 0;
      RStack_18.h = 0x100;
      LoadImage(&RStack_18,DAT_8006b28c);
      break;
    case 1:
      RStack_18.y = 0x100;
      RStack_18.h = 0x100;
      RStack_18.x = 0x200;
      RStack_18.w = 0x200;
      LoadImage(&RStack_18,DAT_8006b28c + 0x10000);
      break;
    case 2:
      FUN_80013918(DAT_800682d8,DAT_8006b28c,DAT_8006b0a8 + -0x80000,
                   DAT_8006b0a4 + *(int *)(&DAT_80067750 + g_currLevelID * 0x10) + 0x80000);
      break;
    case 3:
      SpuSetTransferStartAddr(0x7a000);
      FUN_8005aaa8(DAT_8006b28c,0x6000);
      do {
        lVar2 = SpuIsTransferCompleted(0);
      } while (lVar2 == 0);
      break;
    case 4:
    case 5:
    case 6:
    case 7:
    case 8:
    case 9:
    case 10:
    case 0xb:
      iVar5 = DAT_80066fac + -4;
      uVar1 = iVar5 * 0x10000;
      iVar6 = DAT_8006b0a8 - (uVar1 + 0x86000);
      if (0x10000 < iVar6) {
        iVar6 = 0x10000;
      }
      if (0 < iVar6) {
        SpuSetTransferStartAddr(uVar1 | 0x1010);
        FUN_8005aaa8(DAT_8006b28c + iVar5 * 0x4000 + 0x1800,iVar6);
        do {
          lVar2 = SpuIsTransferCompleted(0);
        } while (lVar2 == 0);
      }
      break;
    case 0xc:
      FUN_80013918(DAT_800682d8,DAT_8006b28c,DAT_8006b0b0,
                   DAT_8006b0ac + *(int *)(&DAT_80067750 + g_currLevelID * 0x10));
      loadingStatus = loadingStatus + 1;
    }
    loadingStatus = loadingStatus + -1;
    DAT_80066fac = DAT_80066fac + 1;
    return;
  case 5:
    DAT_8006b290 = (u_long *)FUN_OVRTitleScreenAndLoading__8006fa98(DAT_8006b28c);
    iVar5 = DAT_8006b0b4 + *(int *)(&DAT_80067750 + g_currLevelID * 0x10);
    puVar3 = DAT_8006b290;
    uVar4 = DAT_8006b0b8;
    break;
  case 6:
    DAT_8006b294 = (u_long *)FUN_OVRTitleScreenAndLoading__80070398(DAT_8006b290,0x80800000);
    iVar5 = (&DAT_8006b0a4)[(DAT_80067118 + 3) * 2] + *(int *)(&DAT_80067750 + g_currLevelID * 0x10)
    ;
    puVar3 = DAT_8006b294;
    uVar4 = (&DAT_8006b0a8)[(DAT_80067118 + 3) * 2];
  }
  FUN_80013918(DAT_800682d8,puVar3,uVar4,iVar5);
LAB_OVRTitleScreenAndLoading__800709e4:
                    // WARNING: Read-only address (ram,0x80067118) is written
                    // WARNING: Read-only address (ram,0x8006b0a4) is written
                    // WARNING: Read-only address (ram,0x8006b0a8) is written
                    // WARNING: Read-only address (ram,0x8006b0ac) is written
                    // WARNING: Read-only address (ram,0x8006b0b0) is written
                    // WARNING: Read-only address (ram,0x8006b0b4) is written
                    // WARNING: Read-only address (ram,0x8006b0b8) is written
  return;
}



void FUN_OVRTitleScreenAndLoading__800709fc(void)

{
  undefined *puVar1;
  undefined4 uVar2;
  int iVar3;
  
  uVar2 = DAT_80067e04;
  switch(DAT_80067e04) {
  case 0:
    uVar2 = 0xffffffff;
    if (((DAT_80067e20 != 0) && (uVar2 = 0xffffffff, -1 < DAT_80067e28)) &&
       (uVar2 = 0xffffffff, (&DAT_80067e54)[DAT_80067e24] != -1)) {
      FUN_OVRTitleScreenAndLoading__8007cc68();
      FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e28 << 4);
      DAT_80067e04 = 1;
      DAT_80067e2c = 0;
      DAT_80067e70 = (int *)(DAT_8006b2a8 + 0x2400);
      uVar2 = DAT_80067e04;
    }
    break;
  case 1:
    iVar3 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
    if (iVar3 == 0) {
      return;
    }
    if (DAT_80067e6c == 3) {
      DAT_80067e6c = 0;
    }
    if (DAT_80067e6c == 0) {
      FUN_OVRTitleScreenAndLoading__8007d778
                (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,
                 DAT_80067e24 * 0x600 + 0x200,0x80);
      DAT_80067e04 = 2;
      return;
    }
    if (1 < DAT_80067e2c) {
      if (DAT_80067e6c != 1) {
        DAT_80067e04 = 5;
        DAT_80067e1c = 2;
        return;
      }
      DAT_80067e04 = 5;
      DAT_80067e1c = DAT_80067e6c;
      return;
    }
    FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e28 << 4);
    goto LAB_OVRTitleScreenAndLoading__80070dc4;
  case 2:
    iVar3 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
    if (iVar3 == 0) {
      return;
    }
    if (DAT_80067e6c == 0) {
      iVar3 = FUN_OVRTitleScreenAndLoading__80076674(DAT_80067e70);
      if (iVar3 == 0) {
        DAT_80067e04 = 5;
        DAT_80067e1c = 2;
        return;
      }
      if (DAT_80067140 != 0) {
        DAT_80067140 = 0;
        FUN_OVRTitleScreenAndLoading__8007d9d0
                  (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,&DAT_8006410c,0,0x80);
        FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
      }
      if (DAT_80067e6c != 0) {
        DAT_80067e04 = 5;
        DAT_80067e1c = 2;
        return;
      }
      uVar2 = FUN_OVRTitleScreenAndLoading__8007677c(DAT_80067e70);
      puVar1 = PTR_s_BASCUS_94425SP2RR_80066e6c;
      (&DAT_80067e54)[DAT_80067e24] = uVar2;
      FUN_OVRTitleScreenAndLoading__8007d9d0
                (DAT_80067e30 << 4,puVar1,DAT_80067e70,DAT_80067e24 * 0x600 + 0x200,0x600);
      DAT_80067e04 = 3;
      return;
    }
    goto joined_r0x80070d94;
  case 3:
    iVar3 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
    if (iVar3 == 0) {
      return;
    }
    if (DAT_80067e6c == 0) {
      FUN_OVRTitleScreenAndLoading__8007d778
                (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,
                 DAT_80067e24 * 0x600 + 0x200,0x600);
      DAT_80067e04 = 4;
      return;
    }
joined_r0x80070d94:
    if (DAT_80067e2c < 2) {
      FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e28 << 4);
      DAT_80067e04 = 1;
LAB_OVRTitleScreenAndLoading__80070dc4:
      DAT_80067e2c = DAT_80067e2c + 1;
      uVar2 = DAT_80067e04;
    }
    else {
LAB_OVRTitleScreenAndLoading__80070e90:
      DAT_80067e04 = 5;
      DAT_80067e1c = 3;
      uVar2 = DAT_80067e04;
    }
    break;
  case 4:
    iVar3 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
    if (iVar3 == 0) {
      return;
    }
    if ((DAT_80067e6c == 0) &&
       (iVar3 = FUN_OVRTitleScreenAndLoading__80076614(DAT_80067e70), iVar3 == DAT_80067e70[0x16a]))
    {
      DAT_80067e04 = 5;
      DAT_80067e1c = 0;
      return;
    }
    if (DAT_80067e2c < 2) {
      FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e28 << 4);
      DAT_80067e04 = 1;
      DAT_80067e2c = DAT_80067e2c + 1;
      return;
    }
    goto LAB_OVRTitleScreenAndLoading__80070e90;
  case 5:
    FUN_OVRTitleScreenAndLoading__8007ccd8();
    MEMSET(DAT_80067e70,0,0x800);
    uVar2 = 0xffffffff;
  }
  DAT_80067e04 = uVar2;
  return;
}



void FUN_OVRTitleScreenAndLoading__80070eec(void)

{
  byte bVar1;
  ushort uVar2;
  bool bVar3;
  Object *pOVar4;
  Object *pOVar5;
  undefined4 uVar6;
  int iVar7;
  char *pcVar8;
  int *piVar9;
  short sVar10;
  undefined *puVar11;
  int iVar12;
  int iVar13;
  byte *pbVar14;
  int iVar15;
  char acStack_50 [48];
  
  if (menuState == Paused) {
    if (0xf < menuAnimation) {
      return;
    }
    RenderPortalSkyboxes();
    MemFill(DAT_80067034 + -0x3000,0,0xc00);
    goto LAB_OVRTitleScreenAndLoading__80071b84;
  }
  if ((int)menuState < 1) {
    return;
  }
  if (3 < (int)menuState) {
    return;
  }
  Objects = (Object *)(DAT_8006b29c + 0x36000);
  DAT_80066fc8 = Objects;
  *(undefined *)(DAT_8006b29c + 0x36048) = 0xff;
  if (menuState == Playing) {
    if (menuAnimation - 0x21U < 0x48) {
      iVar15 = 0;
      pbVar14 = &DAT_80068218;
      do {
        iVar12 = iVar15 * 8;
        if (*(char *)(iVar12 + DAT_80067110 + 4) != '\0') {
          MEMSET((int *)DAT_80066fc8,0,0x58);
          pOVar4 = DAT_80066fc8;
          DAT_80066fc8->type = 1;
          pOVar4->modelId = *pbVar14;
          pOVar4 = DAT_80066fc8;
          piVar9 = (int *)(iVar12 + DAT_80067110);
          (DAT_80066fc8->position).x =
               ((cosineLookupTable[*(byte *)((int)piVar9 + 5)] * 0x2d >> 10) *
                (int)sineLookupTable[(*piVar9 << 7) / 0x28] >> 0xc) + 0x154 + *piVar9 * -4;
          (pOVar4->position).y = (*piVar9 * 0xb4) / 0x28 + 0x26;
          uVar2 = sineLookupTable[*(byte *)((int)piVar9 + 5)];
          sVar10 = sineLookupTable[(*piVar9 << 7) / 0x28];
          (pOVar4->eulerRotation).pitch = 0;
          pOVar5 = DAT_80066fc8;
          (pOVar4->position).z = (((int)((uint)uVar2 << 0x10) >> 0x13) * (int)sVar10 >> 0xc) + 0xc80
          ;
          (pOVar5->eulerRotation).roll = 8;
          (DAT_80066fc8->eulerRotation).yaw = *(byte *)(iVar12 + DAT_80067110 + 6);
          (DAT_80066fc8->eulerRotation).pad = 0x3f;
          (DAT_80066fc8->color).Red = *pbVar14 + 1;
          DAT_80066fc8->field_0x4c = 0xff;
          DAT_80066fc8->lodDistanceLimit = 0x40;
          DAT_80066fc8->field_0x4c = 0xff;
          pOVar4 = DAT_80066fc8 + 1;
          DAT_80066fc8 = DAT_80066fc8 + 1;
          pOVar4->state = 0xff;
        }
        iVar15 = iVar15 + 1;
        pbVar14 = pbVar14 + 1;
      } while (iVar15 < 0x18);
    }
    if (menuAnimation - 4U < 0x5d) {
      iVar15 = 0x18;
      if (menuAnimation < 0x10) {
        iVar15 = (byte)(&DAT_8006342c)[menuAnimation] - 0x10;
      }
      else if (0x53 < menuAnimation) {
        iVar15 = (byte)(&DAT_800633f4)[menuAnimation] - 0x10;
      }
      if (menuAnimation < 0x20) {
        iVar13 = worldGemsCollectedValue[DAT_80066fd0] - DAT_800670d0;
      }
      else {
        iVar12 = gemCollectedPhysicalCount + 1;
        if (gemCollectedPhysicalCount < 0x10) {
          iVar12 = iVar12 + gemCollectedPhysicalCount;
        }
        iVar7 = iVar12 + 0x20;
        if (0x20 < iVar12) {
          iVar12 = 0x20;
          iVar7 = 0x40;
        }
        iVar7 = iVar7 - menuAnimation;
        bVar3 = iVar12 < iVar7;
        if (iVar7 < 0) {
          iVar7 = 0;
          bVar3 = iVar12 < 0;
        }
        if (bVar3) {
          iVar7 = iVar12;
        }
        iVar7 = (worldGemsCollectedValue[DAT_80066fd0] - DAT_800670d0) * iVar7;
        iVar13 = iVar7 / iVar12;
        if (iVar12 == 0) {
          trap(0x1c00);
        }
        if ((iVar12 == -1) && (iVar7 == -0x80000000)) {
          trap(0x1800);
        }
      }
      DrawText_Right((&PTR_s_Treasure_Found_80061b4c)[DAT_80067118],300,(short)iVar15,1);
      DrawNumberSmall(iVar13,0x17c,(short)iVar15,1);
      MEMSET((int *)DAT_80066fc8,0,0x58);
      pOVar4 = DAT_80066fc8;
      (DAT_80066fc8->position).x = 0x154;
      (pOVar4->position).y = iVar15 + 0xe;
      (pOVar4->position).z = 0xc00;
      (pOVar4->eulerRotation).yaw = (byte)(menuAnimation << 2);
      pOVar4 = DAT_80066fc8;
      DAT_80066fc8->type = 1;
      (pOVar4->eulerRotation).pad = 0x3f;
      (DAT_80066fc8->color).Red = 2;
      DAT_80066fc8->field_0x4c = 0xff;
      DAT_80066fc8->lodDistanceLimit = 0x40;
      pOVar4 = DAT_80066fc8 + 1;
      DAT_80066fc8 = DAT_80066fc8 + 1;
      pOVar4->state = 0xff;
    }
    if (menuAnimation - 0x28U < 0x61) {
      iVar15 = 0xcc;
      if (menuAnimation < 0x34) {
        bVar1 = (&DAT_80063408)[menuAnimation];
LAB_OVRTitleScreenAndLoading__800714bc:
        iVar15 = 0xf4 - (uint)bVar1;
      }
      else if (0x7b < menuAnimation) {
        bVar1 = *(byte *)((int)photoAnimationRightBounds + menuAnimation + 0x12);
        goto LAB_OVRTitleScreenAndLoading__800714bc;
      }
      if (menuAnimation < 0x48) {
        iVar13 = worldGemsCollectedValue[DAT_80066fd0] - DAT_800670d0;
      }
      else {
        iVar12 = gemCollectedPhysicalCount + 1;
        if (gemCollectedPhysicalCount < 0x10) {
          iVar12 = iVar12 + gemCollectedPhysicalCount;
        }
        iVar7 = iVar12 + 0x48;
        if (0x20 < iVar12) {
          iVar12 = 0x20;
          iVar7 = 0x68;
        }
        iVar7 = iVar7 - menuAnimation;
        bVar3 = iVar12 < iVar7;
        if (iVar7 < 0) {
          iVar7 = 0;
          bVar3 = iVar12 < 0;
        }
        if (bVar3) {
          iVar7 = iVar12;
        }
        iVar7 = (worldGemsCollectedValue[DAT_80066fd0] - DAT_800670d0) * iVar7;
        iVar13 = iVar7 / iVar12;
        if (iVar12 == 0) {
          trap(0x1c00);
        }
        if ((iVar12 == -1) && (iVar7 == -0x80000000)) {
          trap(0x1800);
        }
      }
      iVar13 = gemsCollectedNetValue - iVar13;
      if (iVar13 < 0) {
        iVar13 = 0;
      }
      RenderText((&PTR_s_Total_Treasure_80061b50)[DAT_80067118],0xdc,(short)iVar15,1,
                 (TextConfig *)0x0);
      DrawNumberSmall(iVar13,-0x8c,(short)iVar15,1);
      MEMSET((int *)DAT_80066fc8,0,0x58);
      pOVar4 = DAT_80066fc8;
      (DAT_80066fc8->position).x = 0xb4;
      (pOVar4->position).y = iVar15 + 0xe;
      (pOVar4->position).z = 0xc00;
      (pOVar4->eulerRotation).yaw = (byte)(menuAnimation << 2);
      pOVar4 = DAT_80066fc8;
      DAT_80066fc8->type = 1;
      (pOVar4->eulerRotation).pad = 0x3f;
      (DAT_80066fc8->color).Red = 2;
      DAT_80066fc8->field_0x4c = 0xff;
      DAT_80066fc8->lodDistanceLimit = 0x40;
      pOVar4 = DAT_80066fc8 + 1;
      DAT_80066fc8 = DAT_80066fc8 + 1;
      pOVar4->state = 0xff;
    }
  }
  else {
    if ((((worldsEntered[g_currLevelID] == false) || (inHomeWorld != 0)) ||
        (currentLoadedLevel == GLIMMER)) ||
       (((int)currentLoadedLevel / 10) * 10 == currentLoadedLevel + ~New_Name_(4))) {
      if (menuAnimation - 0x14U < 0x5d) {
        sVar10 = 0x18;
        if (menuAnimation < 0x20) {
          sVar10 = (byte)(&DAT_8006341c)[menuAnimation] - 0x10;
        }
        else if ((99 < menuAnimation) && (DAT_8006b2f8 == 0)) {
          sVar10 = photoAnimationTopBounds[menuAnimation + 5] - 0x10;
        }
        if (inHomeWorld == 0) {
          puVar11 = (&PTR_s_Entering_80061b5c)[DAT_80067118];
        }
        else {
          puVar11 = (&PTR_s_Returning_To_80061b58)[DAT_80067118];
        }
        sprintf(acStack_50,s__s_s____OVRTitleScreenAndLoading__8006d3b4,puVar11,
                (&PTR_s_Summer_Forest_800649b4)[DAT_80067118 * 0x20 + g_currLevelID]);
        pcVar8 = acStack_50;
        iVar15 = 0x10a;
        goto LAB_OVRTitleScreenAndLoading__800718dc;
      }
    }
    else if (menuAnimation - 0x14U < 0x5d) {
      sVar10 = 0x18;
      if (menuAnimation < 0x20) {
        sVar10 = (byte)(&DAT_8006341c)[menuAnimation] - 0x10;
      }
      else if ((99 < menuAnimation) && (DAT_8006b2f8 == 0)) {
        sVar10 = photoAnimationTopBounds[menuAnimation + 5] - 0x10;
      }
      pcVar8 = (&PTR_s___To_Replay_Intro_80061b54)[DAT_80067118];
      iVar15 = 0x100;
LAB_OVRTitleScreenAndLoading__800718dc:
      DrawText_Center(pcVar8,iVar15,sVar10,1);
    }
    if (menuAnimation - 4U < 0x6d) {
      iVar15 = 0xcc;
      if (menuAnimation < 0x10) {
        iVar15 = 0xf4 - (uint)(byte)(&DAT_8006342c)[menuAnimation];
      }
      if (99 < menuAnimation) {
        iVar15 = 0xf4 - (uint)photoAnimationTopBounds[menuAnimation + 5];
      }
      if (DAT_80067e20 != 0) {
        if ((DAT_80067e28 < 0) || ((&DAT_80067e54)[DAT_80067e24] == -1)) {
          if ((DAT_80067e20 != 0) &&
             (DrawText_CenterWithBG
                        ((&PTR_s_Auto_Save_Unavailable__80061b78)[DAT_80067118],0x100,iVar15,0xb),
             0x1b < menuAnimation)) {
            pcVar8 = (&PTR_s_No_save_file_selected__80061b7c)[DAT_80067118];
LAB_OVRTitleScreenAndLoading__80071b38:
            iVar15 = iVar15 + 0xd;
            iVar12 = 0xb;
            goto LAB_OVRTitleScreenAndLoading__80071b3c;
          }
        }
        else if (DAT_80067e1c == 0) {
          if (menuAnimation < 0x29) {
            pcVar8 = (&PTR_s_Auto_Saving____80061b60)[DAT_80067118];
            iVar12 = 1;
          }
          else {
            pcVar8 = (&PTR_s_Save_Complete__80061b64)[DAT_80067118];
            iVar12 = 1;
          }
LAB_OVRTitleScreenAndLoading__80071b3c:
          DrawText_CenterWithBG(pcVar8,0x100,iVar15,iVar12);
        }
        else {
          DrawText_CenterWithBG((&PTR_s_Save_Error__80061b68)[DAT_80067118],0x100,iVar15,0xb);
          if (0xf < menuAnimation) {
            if (DAT_80067e1c == 1) {
              pcVar8 = (&PTR_s_MEMORY_CARD_has_been_removed__80061b6c)[DAT_80067118];
            }
            else if (DAT_80067e1c == 2) {
              pcVar8 = (&PTR_s_MEMORY_CARD_has_changed__80061b70)[DAT_80067118];
            }
            else {
              pcVar8 = (&PTR_s_Could_not_write_to_MEMORY_CARD__80061b74)[DAT_80067118];
            }
            goto LAB_OVRTitleScreenAndLoading__80071b38;
          }
        }
      }
    }
  }
  uVar6 = DAT_800673e4;
  DAT_800673e4 = 0;
  RenderSkyboxes();
  DAT_800673e4 = uVar6;
  MemFill(DAT_80067034 + -0x3000,0,0xc00);
  FUN_80043858();
  FUN_80046fd8();
LAB_OVRTitleScreenAndLoading__80071b84:
  FUN_80041dbc();
  if (blackOverlayOpacity != 0) {
    FillColor(2,blackOverlayOpacity,blackOverlayOpacity,blackOverlayOpacity);
  }
                    // WARNING: Read-only address (ram,0x80067118) is written
  return;
}



void FUN_OVRTitleScreenAndLoading__80071bd4(void)

{
  char cVar1;
  PauseMenuState PVar2;
  short sVar3;
  uint uVar4;
  int iVar5;
  undefined4 uVar6;
  int iVar7;
  int *piVar8;
  int *piVar9;
  LoadedLevelID LVar10;
  ushort uVar11;
  int iVar12;
  int iVar13;
  byte *pbVar14;
  byte **ppbVar15;
  int iVar16;
  Vec3 local_58;
  Vec3 local_48;
  Vec3 local_38 [2];
  
  PVar2 = menuState;
  if (menuState != Paused) {
    if ((int)menuState < 1) {
      return;
    }
    if (3 < (int)menuState) {
      return;
    }
    if (menuAnimation == 0) {
      if (menuState == Playing) {
        inSpeedwayFlag = 0xffffffff;
        FUN_80030a6c();
        Spyro.position.x = 0x2000;
        Spyro.position.y = 0x2000;
        Spyro.position.z = 0x2000;
        Spyro.field13_0x1e = 0;
        SetSpyroState(Glide);
        FUN_8002e304();
        Spyro.angleAsByte.pitch = 0;
        Spyro.angleAsByte.roll = 0;
        Spyro.angleAsByte.yaw = 0;
      }
      uVar4 = rand();
      DAT_8006b2f4 = uVar4 & 1;
      if (menuState == BetweenMenuAndHomeworld) {
        DAT_8006b2f4 = DAT_8006b2f4 + 2;
      }
    }
    if ((menuState == Playing) && (menuAnimation - 0x20U < 0x49)) {
      if (menuAnimation == 0x20) {
        DAT_80067110 = &DAT_800687f0;
        iVar12 = 0;
        iVar5 = 0;
        do {
          iVar12 = iVar12 + 1;
          *(undefined *)((int)DAT_80067110 + iVar5 + 4) = 0;
          iVar5 = iVar12 * 8;
        } while (iVar12 < 0x20);
      }
      iVar5 = 3;
      if (0xf < gemCollectedPhysicalCount) {
        iVar5 = 1;
      }
      iVar12 = 0;
      iVar13 = 0;
      iVar16 = 0x20;
      do {
        if ((iVar12 < gemCollectedPhysicalCount) && (iVar16 <= menuAnimation)) {
          if (*(char *)((int)DAT_80067110 + iVar13 + 4) == '\0') {
            if (menuAnimation < 0x40) {
              *(undefined *)((int)DAT_80067110 + iVar13 + 4) = 1;
              if ((iVar5 != 1) || (iVar12 == (iVar12 / 3) * 3)) {
                uVar6 = PlayAudio(1,0,0);
                FUN_80050cf4(uVar6,0x800);
              }
              *(undefined4 *)(iVar13 + (int)DAT_80067110) = 0;
              if (iVar12 == 0) {
                iVar7 = rand();
                *(char *)((int)DAT_80067110 + 5) = (char)iVar7;
              }
              else {
                iVar7 = rand();
                *(char *)((int)DAT_80067110 + iVar13 + 5) =
                     *(char *)((int)DAT_80067110 + iVar13 + -3) + '0' +
                     (char)iVar7 + (char)(iVar7 / 0xa0) * '`';
              }
              iVar7 = rand();
              *(char *)((int)DAT_80067110 + iVar13 + 6) = (char)iVar7;
              iVar7 = rand();
              *(byte *)((int)DAT_80067110 + iVar13 + 7) = ((byte)iVar7 & 0xf) - 8;
            }
            if (*(char *)((int)DAT_80067110 + iVar13 + 4) == '\0')
            goto LAB_OVRTitleScreenAndLoading__80072344;
          }
          piVar9 = (int *)(iVar13 + (int)DAT_80067110);
          *(char *)((int)piVar9 + 6) = *(char *)((int)piVar9 + 6) + *(char *)((int)piVar9 + 7);
          piVar8 = (int *)(iVar13 + (int)DAT_80067110);
          *piVar9 = *piVar9 + 1;
          if ((0x27 < *piVar8) &&
             ((*(undefined *)(piVar8 + 1) = 0, iVar5 != 1 || (iVar12 == (iVar12 / 3) * 3)))) {
            uVar6 = PlayAudio(0,0,0);
            FUN_80050cf4(uVar6,0x800);
          }
        }
LAB_OVRTitleScreenAndLoading__80072344:
        iVar13 = iVar13 + 8;
        iVar12 = iVar12 + 1;
        iVar16 = iVar16 + iVar5;
      } while (iVar12 < 0x18);
    }
    if (DAT_8006b2f4 == 0) {
      iVar12 = -0x80 - (menuAnimation * 0x700) / 0x8c;
      iVar5 = cosineLookup(iVar12);
      cameraPosition.x = (iVar5 * 0xa00 >> 0xc) + 0x2000;
      iVar5 = sineLookup(iVar12);
      cameraPosition.y = (iVar5 * 0xa00 >> 0xc) + 0x2000;
      cameraPosition.z = 0x1e00;
      VectorShort_80067ec8.Z = (short)iVar12 + 0x800;
      VectorShort_80067ec8.X = 0;
      VectorShort_80067ec8.Y = 0xf80;
    }
    else if (DAT_8006b2f4 == 1) {
      uVar4 = (menuAnimation * 0x400) / 0x8c - 0x200U & 0xfff;
      iVar5 = cosineLookup(uVar4);
      cameraPosition.x = (iVar5 * 0x600 >> 0xc) + 0x2000;
      iVar5 = sineLookup(uVar4);
      cameraPosition.y = (iVar5 * 0x600 >> 0xc) + 0x2000;
      cameraPosition.z = 0x1e80;
      VectorShort_80067ec8.X = 0;
      VectorShort_80067ec8.Y = 0xf80;
      VectorShort_80067ec8.Z = (short)uVar4 + 0x800;
      cVar1 = (char)menuAnimation;
      if (menuAnimation - 0x21U < 0x10) {
        Spyro.anotherByteAngle.roll = (' ' - cVar1) * '\x02';
        Spyro.anotherByteAngle.yaw = cVar1 - 0x20;
      }
      else if (menuAnimation - 0x39U < 0x10) {
        Spyro.anotherByteAngle.yaw = ('@' - cVar1) * '\x02';
      }
      else if (menuAnimation - 0x59U < 0x10) {
        Spyro.anotherByteAngle.roll = (cVar1 + 0x98U) * '\x02';
        Spyro.anotherByteAngle.yaw = cVar1 + 0x98U;
      }
    }
    else {
      if (DAT_8006b2f4 == 2) {
        cameraPosition.y = 0x1e70;
        cameraPosition.z = 0x1e70;
        cameraPosition.x = menuAnimation * -0xa0 + 0x3e00;
        VectorSubtract(&local_58,&Spyro.position,&cameraPosition);
        VectorShort_80067ec8.X = 0;
        iVar5 = VectorLength(&local_58,0);
        sVar3 = Atan2(iVar5,local_58.z,1);
      }
      else {
        if (DAT_8006b2f4 != 3) goto LAB_OVRTitleScreenAndLoading__80072704;
        iVar12 = menuAnimation * 0x1c + 0x600;
        uVar4 = -((menuAnimation * 0x280) / 0x78) - 0x100U & 0xfff;
        iVar5 = cosineLookup(uVar4);
        cameraPosition.x = (iVar5 * iVar12 >> 0xc) + 0x2000;
        iVar5 = sineLookup(uVar4);
        cameraPosition.z = menuAnimation * -4 + 0x1f00;
        cameraPosition.y = (iVar5 * iVar12 >> 0xc) + 0x2000;
        VectorSubtract(&local_48,&Spyro.position,&cameraPosition);
        VectorShort_80067ec8.X = 0;
        iVar5 = VectorLength(&local_48,0);
        sVar3 = Atan2(iVar5,local_48.z,1);
        local_58.x = local_48.x;
        local_58.y = local_48.y;
      }
      VectorShort_80067ec8.Y = -sVar3;
      VectorShort_80067ec8.Z = Atan2(local_58.x,local_58.y,1);
    }
LAB_OVRTitleScreenAndLoading__80072704:
    iVar5 = menuAnimation + 1;
    if (menuState != Playing) {
      if (((((worldsEntered[g_currLevelID] != false) && (DAT_8006b2f8 == 0)) && (inHomeWorld == 0))
          && ((currentLoadedLevel != GLIMMER &&
              (((int)currentLoadedLevel / 10) * 10 != currentLoadedLevel + ~New_Name_(4))))) &&
         ((menuAnimation - 0x13U < 0x5c && ((inputStates[0].pressed & Triangle) != None)))) {
        DAT_8006b2f8 = iVar5;
      }
      if (iVar5 < 9) {
        iVar12 = 8 - iVar5;
LAB_OVRTitleScreenAndLoading__800728fc:
        blackOverlayOpacity = iVar12 << 5;
      }
      else if ((DAT_8006b2f8 == 0) || (iVar5 < DAT_8006b2f8)) {
        iVar12 = menuAnimation + -0x6f;
        if (0x6f < iVar5) goto LAB_OVRTitleScreenAndLoading__800728fc;
      }
      else {
        blackOverlayOpacity = (iVar5 - DAT_8006b2f8) * 0x20;
      }
      if (0xff < blackOverlayOpacity) {
        blackOverlayOpacity = 0xff;
      }
      if ((iVar5 == 0x78) ||
         ((menuAnimation = iVar5, DAT_8006b2f8 != 0 && (iVar5 == DAT_8006b2f8 + 8)))) {
        menuAnimation = iVar5;
        ClearDoubleBuffer();
        menuState = Homeworld;
        menuAnimation = 0;
        DAT_800670c8 = 1;
        while (loadingStatus < 7) {
                    // WARNING: Read-only address (ram,0x80067700) is written
                    // WARNING: Read-only address (ram,0x80069941) is written
                    // WARNING: Read-only address (ram,0x80069942) is written
                    // WARNING: Read-only address (ram,0x80069943) is written
                    // WARNING: Read-only address (ram,0x800699b5) is written
                    // WARNING: Read-only address (ram,0x800699b6) is written
                    // WARNING: Read-only address (ram,0x800699b7) is written
          FUN_8001d658();
        }
                    // WARNING: Read-only address (ram,0x80067700) is written
                    // WARNING: Read-only address (ram,0x80069941) is written
                    // WARNING: Read-only address (ram,0x80069942) is written
                    // WARNING: Read-only address (ram,0x80069943) is written
                    // WARNING: Read-only address (ram,0x800699b5) is written
                    // WARNING: Read-only address (ram,0x800699b6) is written
                    // WARNING: Read-only address (ram,0x800699b7) is written
        iVar5 = 0;
        if (inHomeWorld == 0) {
          if (((worldsEntered[g_currLevelID] == false) || (DAT_8006b2f8 != 0)) &&
             (FUN_8001c5ec(), (&DAT_80064914)[g_currLevelID] != -1)) {
            FUN_OVRTitleScreenAndLoading__80073e48(0);
          }
        }
        else {
          piVar8 = (int *)0x0;
          if (0 < DAT_80066fa8) {
            piVar9 = DAT_80066f00;
            do {
              iVar5 = iVar5 + 1;
              piVar8 = piVar9;
              if (*(byte *)((int)piVar9 + 0x42) == LoadedLevelIDAsBytesArray[DAT_80066fd0]) break;
              piVar9 = piVar9 + 0x11;
              piVar8 = (int *)0x0;
            } while (iVar5 < DAT_80066fa8);
          }
          sVar3 = Atan2(piVar8[0xc] - *piVar8,piVar8[0xd] - piVar8[1],1);
          uVar11 = sVar3 + 0x400U & 0xfff;
          local_38[0].x = cosineLookup(uVar11);
          local_38[0].x = local_38[0].x >> 1;
          local_38[0].y = sineLookup(uVar11);
          local_38[0].y = local_38[0].y >> 1;
          local_38[0].z = -0x480;
          VectorAdd((Vec3 *)&DAT_8006b2b8,(Vec3 *)(piVar8 + 6),local_38);
          DAT_8006b2d0 = uVar11 + 0x800 & 0xfff;
          VecShortToInt(&Vec3_8006b2c4,
                        (VectorShort *)((uint)(byte)(&DAT_80064a34)[DAT_80066fd0] * 8 + -0x7ff9b5ac)
                       );
        }
      }
      goto LAB_OVRTitleScreenAndLoading__80072b28;
    }
    if (iVar5 < 9) {
      iVar12 = 8 - iVar5;
LAB_OVRTitleScreenAndLoading__8007274c:
      blackOverlayOpacity = iVar12 << 5;
    }
    else {
      iVar12 = menuAnimation + -0x83;
      if (0x84 < iVar5) goto LAB_OVRTitleScreenAndLoading__8007274c;
    }
    menuAnimation = iVar5;
    if (iVar5 == 0x8c) {
      menuState = BetweenMenuAndHomeworld;
      menuAnimation = 0;
      blackOverlayOpacity = 0xff;
      if (-1 < DAT_80067e04) {
        ClearDoubleBuffer();
        DAT_800670c8 = 1;
        while (-1 < DAT_80067e04) {
          FUN_OVRTitleScreenAndLoading__800709fc();
        }
      }
    }
LAB_OVRTitleScreenAndLoading__80072b28:
    FUN_8002e304();
    if (loadingStatus < 7) {
      FUN_8001d658();
    }
    if (DAT_80067e04 < 0) {
      return;
    }
    FUN_OVRTitleScreenAndLoading__800709fc();
    return;
  }
  if (loadingStatus < 2) {
    FUN_8001d658();
  }
  else if (DAT_8006b2fc == Pausing) {
    LVar10 = DAT_8006715c;
    if (inHomeWorld == 0) {
      LVar10 = currentLoadedLevel;
    }
    FUN_80013918(DAT_800682d8,DAT_8006b29c + 0x2c000,0xa000,
                 DAT_80067700 + (uint)(byte)(&DAT_8006328c)[(byte)(&DAT_80064940)[LVar10]] * 0xa000)
    ;
    DAT_8006b2fc = PVar2;
  }
  menuAnimation = menuAnimation + 1;
  if (pauseSubMenuId == 0) {
    if (menuAnimation < 0x10) {
      iVar5 = FUN_80031b94(&DAT_8006b2b8);
      if (iVar5 < 0x400) {
        DAT_8006b2b8 = DAT_8006b2b8 + Vec3_8006b2c4.x;
        DAT_8006b2bc = DAT_8006b2bc + Vec3_8006b2c4.y;
      }
      FUN_8002e304();
      blackOverlayOpacity = menuAnimation << 4;
      return;
    }
    if (menuAnimation != 0x10) goto LAB_OVRTitleScreenAndLoading__80071d70;
  }
  else {
LAB_OVRTitleScreenAndLoading__80071d70:
    if ((pauseSubMenuId != 1) || (menuAnimation != 1)) goto LAB_OVRTitleScreenAndLoading__80071e10;
  }
  if ((g_currLevelID == GLIMMER) && (worldsEntered[0] == false)) {
    FUN_80019230(4);
    return;
  }
  ClearDoubleBuffer();
  if (((inHomeWorld == 0) && (DAT_80066ff4 != '\0')) &&
     (iVar5 = FUN_OVRTitleScreenAndLoading__80073e48(1), iVar5 != 0)) {
    return;
  }
LAB_OVRTitleScreenAndLoading__80071e10:
                    // WARNING: Read-only address (ram,0x80069941) is written
  doubleFrameBuffer[0].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80069942) is written
  doubleFrameBuffer[0].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80069943) is written
  doubleFrameBuffer[0].drawEnvironment.b0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b5) is written
  doubleFrameBuffer[1].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b6) is written
  doubleFrameBuffer[1].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b7) is written
  doubleFrameBuffer[1].drawEnvironment.b0 = '\0';
  if ((DAT_8006b2fc != Pausing) && (iVar12 = FUN_80013690(), iVar5 = DAT_8006b29c, iVar12 == 0)) {
    piVar8 = (int *)(DAT_8006b29c + 0x2c000);
    FUN_OVRTitleScreenAndLoading__80070018(DAT_8006b29c + *piVar8 + 0x2c014,1,0x80800000);
    FUN_OVRTitleScreenAndLoading__80070018
              (DAT_8006b29c + *(int *)(iVar5 + 0x2c004) + 0x2c014,0x137,0x80800000);
    pbVar14 = (byte *)((int)piVar8 + *(int *)(iVar5 + 0x2c008));
    clearColor.Red = *pbVar14;
    clearColor.Green = pbVar14[1];
    clearColor.Blue = pbVar14[2];
    DAT_800681b8 = *(int *)(pbVar14 + 4);
    ppbVar15 = (byte **)(pbVar14 + 8);
    iVar5 = 0;
    DAT_800681bc = ppbVar15;
    if (0 < DAT_800681b8) {
      do {
        iVar5 = iVar5 + 1;
        *ppbVar15 = pbVar14 + (int)*ppbVar15;
        ppbVar15 = ppbVar15 + 1;
      } while (iVar5 < DAT_800681b8);
    }
    menuState = Playing;
    DAT_80067ec4 = 0;
    menuAnimation = 0;
    DAT_800670c8 = 1;
                    // WARNING: Read-only address (ram,0x80069941) is written
    doubleFrameBuffer[0].drawEnvironment.r0 = clearColor.Red;
                    // WARNING: Read-only address (ram,0x80069942) is written
    doubleFrameBuffer[0].drawEnvironment.g0 = clearColor.Green;
                    // WARNING: Read-only address (ram,0x80069943) is written
    doubleFrameBuffer[0].drawEnvironment.b0 = clearColor.Blue;
                    // WARNING: Read-only address (ram,0x800699b5) is written
    doubleFrameBuffer[1].drawEnvironment.r0 = clearColor.Red;
                    // WARNING: Read-only address (ram,0x800699b6) is written
    doubleFrameBuffer[1].drawEnvironment.g0 = clearColor.Green;
                    // WARNING: Read-only address (ram,0x800699b7) is written
    doubleFrameBuffer[1].drawEnvironment.b0 = clearColor.Blue;
    currentLoadedLevel = DAT_8006715c;
    DAT_80066fd0 = g_currLevelID;
  }
                    // WARNING: Read-only address (ram,0x80067700) is written
                    // WARNING: Read-only address (ram,0x80069941) is written
                    // WARNING: Read-only address (ram,0x80069942) is written
                    // WARNING: Read-only address (ram,0x80069943) is written
                    // WARNING: Read-only address (ram,0x800699b5) is written
                    // WARNING: Read-only address (ram,0x800699b6) is written
                    // WARNING: Read-only address (ram,0x800699b7) is written
  return;
}



void FUN_OVRTitleScreenAndLoading__80072b90(void)

{
  char *text;
  int screenPosX;
  int colorIndex;
  short sVar1;
  char acStack_40 [48];
  
  if (2 < (int)menuState) {
    return;
  }
  if ((int)menuState < 1) {
    return;
  }
  if ((menuState == Paused) && (0xf < menuAnimation)) {
LAB_OVRTitleScreenAndLoading__80072bf8:
    sVar1 = 0x18;
    if ((menuState == Paused) && (menuAnimation < 0x1c)) {
      sVar1 = (byte)(&DAT_80063420)[menuAnimation] - 0x10;
    }
    else if ((menuState == Playing) && (0x4c < menuAnimation)) {
      sVar1 = (byte)(&DAT_800633fc)[menuAnimation] - 0x10;
    }
    sprintf(acStack_40,s__s_s____OVRTitleScreenAndLoading__8006d3b4,
            (&PTR_s_Entering_80061b5c)[DAT_80067118],
            (&PTR_s_Summer_Forest_800649b4)[DAT_80067118 * 0x20 + g_currLevelID]);
    DrawText_Center(acStack_40,0x10a,sVar1,1);
  }
  else {
    if (menuState != Playing) goto LAB_OVRTitleScreenAndLoading__80072f48;
    if (menuAnimation < 0x58) goto LAB_OVRTitleScreenAndLoading__80072bf8;
  }
  if ((menuState != Playing) || (0x54 < menuAnimation - 4U))
  goto LAB_OVRTitleScreenAndLoading__80072f48;
  sVar1 = 0xcc;
  if (menuAnimation < 0x10) {
    sVar1 = 0xf4 - (ushort)(byte)(&DAT_8006342c)[menuAnimation];
  }
  if (0x4b < menuAnimation) {
    sVar1 = 0xf4 - (ushort)(byte)(&DAT_800633fc)[menuAnimation];
  }
  if (DAT_80067e20 == 0) goto LAB_OVRTitleScreenAndLoading__80072f48;
  if ((DAT_80067e28 < 0) || ((&DAT_80067e54)[DAT_80067e24] == -1)) {
    if ((DAT_80067e20 == 0) ||
       (DrawText_Center((&PTR_s_Auto_Save_Unavailable__80061b78)[DAT_80067118],0x100,sVar1,0xb),
       menuAnimation < 0x1c)) goto LAB_OVRTitleScreenAndLoading__80072f48;
    text = (&PTR_s_No_save_file_selected__80061b7c)[DAT_80067118];
LAB_OVRTitleScreenAndLoading__80072f38:
    sVar1 = sVar1 + 0xc;
    screenPosX = 0x100;
    colorIndex = 0xb;
  }
  else {
    if (DAT_80067e1c != 0) {
      DrawText_Center((&PTR_s_Save_Error__80061b68)[DAT_80067118],0x100,sVar1,0xb);
      if (menuAnimation < 0x10) goto LAB_OVRTitleScreenAndLoading__80072f48;
      if (DAT_80067e1c == 1) {
        text = (&PTR_s_MEMORY_CARD_has_been_removed__80061b6c)[DAT_80067118];
      }
      else if (DAT_80067e1c == 2) {
        text = (&PTR_s_MEMORY_CARD_has_changed__80061b70)[DAT_80067118];
      }
      else {
        text = (&PTR_s_Could_not_write_to_MEMORY_CARD__80061b74)[DAT_80067118];
      }
      goto LAB_OVRTitleScreenAndLoading__80072f38;
    }
    screenPosX = 0x10a;
    if (menuAnimation < 0x25) {
      text = (&PTR_s_Auto_Saving____80061b60)[DAT_80067118];
      colorIndex = 1;
    }
    else {
      screenPosX = 0x100;
      text = (&PTR_s_Save_Complete__80061b64)[DAT_80067118];
      colorIndex = 1;
    }
  }
  DrawText_Center(text,screenPosX,sVar1,colorIndex);
LAB_OVRTitleScreenAndLoading__80072f48:
  MemFill(DAT_80067034 + -0x3000,0,0xc00);
  FUN_80041dbc();
  if (blackOverlayOpacity != 0) {
    FillColor(2,blackOverlayOpacity,blackOverlayOpacity,blackOverlayOpacity);
  }
                    // WARNING: Read-only address (ram,0x80067118) is written
  return;
}



void FUN_OVRTitleScreenAndLoading__80072f9c(void)

{
  short sVar1;
  int iVar2;
  int iVar3;
  Vec3 local_18;
  
  if (2 < (int)menuState) {
    return;
  }
  if ((int)menuState < 1) {
    return;
  }
  if (menuAnimation == 0) {
    if (menuState == Paused) {
      DAT_800670c8 = menuState;
      currentLoadedLevel = DAT_8006715c;
      DAT_80066fd0 = g_currLevelID;
      FUN_80030a6c();
      Spyro.position.x = 0x4000;
      Spyro.position.y = 0x4000;
      Spyro.position.z = 0x4000;
      Spyro.field13_0x1e = 0;
      SetSpyroState(Flop);
      FUN_8002e304();
      Spyro.angleAsByte.pitch = 0;
      Spyro.angleAsByte.roll = 0;
      Spyro.angleAsByte.yaw = 0;
      goto LAB_OVRTitleScreenAndLoading__80073060;
    }
LAB_OVRTitleScreenAndLoading__800730b0:
    cameraPosition.y = 0x3c00;
    iVar3 = (menuAnimation + -0x30) * 0xe0;
  }
  else {
LAB_OVRTitleScreenAndLoading__80073060:
    if (menuState != Paused) goto LAB_OVRTitleScreenAndLoading__800730b0;
    cameraPosition.y = 0x4400;
    iVar3 = (menuAnimation + -0x30) * 200;
  }
  cameraPosition.z = iVar3 + 0x4000;
  cameraPosition.x = 0x4400;
  VectorSubtract(&local_18,&Spyro.position,&cameraPosition);
  VectorShort_80067ec8.X = 0;
  iVar3 = VectorLength(&local_18,0);
  sVar1 = Atan2(iVar3,local_18.z,1);
  VectorShort_80067ec8.Y = -sVar1;
  VectorShort_80067ec8.Z = Atan2(local_18.x,local_18.y,1);
  iVar3 = menuAnimation + 1;
  if (menuState != Paused) {
    if (8 < iVar3) {
      iVar2 = menuAnimation + -0x57;
      if (0x58 < iVar3) goto LAB_OVRTitleScreenAndLoading__80073240;
    }
    else {
      iVar2 = 8 - iVar3;
LAB_OVRTitleScreenAndLoading__80073240:
      blackOverlayOpacity = iVar2 << 5;
    }
    menuAnimation = iVar3;
    if (iVar3 == 0x60) {
      menuState = BetweenMenuAndHomeworld;
      menuAnimation = 0;
      ClearDoubleBuffer();
      DAT_800670c8 = Paused;
    }
    goto LAB_OVRTitleScreenAndLoading__80073280;
  }
  if (8 < iVar3) {
    iVar2 = menuAnimation + -0x57;
    if (0x58 < iVar3) goto LAB_OVRTitleScreenAndLoading__80073190;
  }
  else {
    iVar2 = 8 - iVar3;
LAB_OVRTitleScreenAndLoading__80073190:
    blackOverlayOpacity = iVar2 << 5;
  }
  menuAnimation = iVar3;
  if (iVar3 == 0x60) {
    menuState = Playing;
    menuAnimation = 0;
    blackOverlayOpacity = 0xff;
    if (-1 < DAT_80067e04) {
      ClearDoubleBuffer();
      DAT_800670c8 = Paused;
      while (-1 < DAT_80067e04) {
        FUN_OVRTitleScreenAndLoading__800709fc();
      }
    }
  }
LAB_OVRTitleScreenAndLoading__80073280:
  FUN_8002e304();
  if (loadingStatus < 7) {
    FUN_8001d658();
  }
  if (-1 < DAT_80067e04) {
    FUN_OVRTitleScreenAndLoading__800709fc();
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__800732d8(undefined4 param_1)

{
  undefined *puVar1;
  int iVar2;
  int tpage;
  
  iVar2 = 0;
  tpage = 0x108;
  do {
    puVar1 = primitiveBuffer_next;
    SetDrawMode((DR_MODE *)primitiveBuffer_next,1,0,tpage,(RECT *)0x0);
    FUN_8001b354(puVar1,param_1);
    *(undefined4 *)(puVar1 + 0xc) = 0x4000000;
    *(short *)(puVar1 + 0x14) = (short)(iVar2 << 7);
    *(undefined2 *)(puVar1 + 0x16) = 0xc;
    *(undefined2 *)(puVar1 + 0x1c) = 0x80;
    *(undefined4 *)(puVar1 + 0x10) = 0x64808080;
    puVar1[0x18] = 0;
    puVar1[0x19] = 0;
    *(undefined2 *)(puVar1 + 0x1e) = 0xd8;
    FUN_8001b354(puVar1 + 0xc,param_1);
    iVar2 = iVar2 + 1;
    primitiveBuffer_next = puVar1 + 0x20;
    tpage = tpage + 2;
  } while (iVar2 < 4);
  return;
}



void FUN_OVRTitleScreenAndLoading__800733b0(void)

{
  undefined *ptrPrimitive;
  undefined4 uVar1;
  
  FUN_OVRTitleScreenAndLoading__800732d8(0x80);
  MemFill(DAT_80067034 + -0x3000,0,0xc00);
  FUN_80041dbc();
  ptrPrimitive = primitiveBuffer_next;
  if ((0xbf < menuAnimation) && (6 < loadingStatus)) {
    SetDrawMode((DR_MODE *)primitiveBuffer_next,1,0,0x118,(RECT *)0x0);
    PrimitiveBuffer_Insert((uint *)ptrPrimitive);
    *(undefined4 *)(ptrPrimitive + 0xc) = 0x4000000;
    if (menuAnimation % 0x18 < 0xc) {
      uVar1 = 0x644064e6;
    }
    else {
      uVar1 = 0x64c0d0d0;
    }
    *(undefined4 *)(ptrPrimitive + 0x10) = uVar1;
    *(undefined2 *)(ptrPrimitive + 0x1c) = 0x100;
    *(undefined2 *)(ptrPrimitive + 0x1e) = 0x10;
    *(undefined2 *)(ptrPrimitive + 0x14) = 0x80;
    ptrPrimitive[0x18] = 0;
    ptrPrimitive[0x19] = 0;
    *(undefined2 *)(ptrPrimitive + 0x16) = 0xcc;
    PrimitiveBuffer_Insert((uint *)(ptrPrimitive + 0xc));
    primitiveBuffer_next = ptrPrimitive + 0x20;
  }
  if (blackOverlayOpacity != 0) {
    FillColor(2,blackOverlayOpacity,blackOverlayOpacity,blackOverlayOpacity);
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__80073510(void)

{
  PauseMenuState PVar1;
  int iVar2;
  int iVar3;
  RECT local_30;
  Vec3 local_28;
  RECT local_18;
  
  PVar1 = menuState;
  if (menuState == Paused) {
    if (menuAnimation == 0) {
      FUN_8004d158(0x1c000);
      FUN_80013810(DAT_800682d8,&DAT_80100000,0x38000,DAT_80067708 + DAT_80067118 * 0x38000);
      local_30.x = 0x200;
      local_30.w = 0x200;
      local_30.y = 0;
      local_30.h = 0xd8;
      LoadImage(&local_30,(u_long *)&DAT_80100000);
      local_30.y = 0x100;
      local_30.w = 0x100;
      local_30.h = 0x10;
      LoadImage(&local_30,(u_long *)&DAT_80136000);
      DrawSync(0);
      cameraPosition.x = 0x2000;
      cameraPosition.y = 0x2000;
      cameraPosition.z = 0x2000;
      VectorShort_80067ec8.X = 0;
      VectorShort_80067ec8.Y = -0x30;
      VectorShort_80067ec8.Z = 0;
      DAT_80067ec4 = 0;
      FUN_80030a6c();
      SetSpyroState(Glide);
      FUN_8002e304();
    }
    deltaTime = PVar1;
    menuAnimation = menuAnimation + 1;
    FUN_8002e304();
    if (menuAnimation < 0xc0) {
      VectorCopy(&local_28,&Spyro.position);
      iVar3 = cosineLookup(menuAnimation * -0xc + 0x2e0);
      Spyro.position.x = (iVar3 * 0x9c4 >> 0xc) + 0x3235;
      iVar3 = sineLookup(menuAnimation * -0xc + 0x2e0);
      Spyro.position.y = (iVar3 * 0xdac >> 0xc) + 0x23f0;
      Spyro.position.z = ((0xc0 - menuAnimation) * 0xdac) / 0xc0 + 9000;
      VectorSubtract(&local_28,&Spyro.position,&local_28);
      iVar3 = Atan2(local_28.x,local_28.y,1);
      Spyro.angleAsByte.yaw = (byte)(iVar3 + 8 >> 4);
      Spyro.angleAsByte.pitch = 0x18;
      if (0xa8 < menuAnimation) {
        Spyro.angleAsByte.pitch = -(char)menuAnimation - 0x40;
      }
      Spyro.angleAsByte.roll = Spyro.angleAsByte.pitch >> 3;
      if (menuAnimation == 0xbc) {
        SetSpyroState(IdleLedge);
      }
    }
    else if (menuAnimation == 0xc0) {
      Spyro.position.x = 11000;
      Spyro.position.y = 0x1ac2;
      Spyro.position.z = 9000;
      Spyro.angleAsByte.pitch = 0;
      Spyro.angleAsByte.roll = 0;
      Spyro.angleAsByte.yaw = 0x5a;
    }
    if (loadingStatus < 7) {
      FUN_8001d658();
    }
    if (menuAnimation < 0x11) {
      blackOverlayOpacity = (0x10 - menuAnimation) * 0x10;
    }
    iVar3 = blackOverlayOpacity;
    if (((0xbf < menuAnimation) && (6 < loadingStatus)) &&
       ((inputStates[0].pressed & (Cross|Start)) != None)) {
      menuState = Playing;
      menuAnimation = 0;
    }
  }
  else {
    iVar3 = blackOverlayOpacity;
    if (menuState == Playing) {
      menuAnimation = menuAnimation + 1;
      iVar3 = menuAnimation * 0x10;
      if (0xf < menuAnimation) {
        iVar3 = 0;
        ClearDoubleBuffer();
        do {
          FUN_80013810(DAT_800682d8,DAT_8006b29c,0x20000,
                       DAT_8006b0a4 + *(int *)(&DAT_80067750 + g_currLevelID * 0x10) +
                       iVar3 * 0x20000);
          iVar2 = iVar3 << 7;
          iVar3 = iVar3 + 1;
          local_18.y = (short)iVar2;
          local_18.x = 0x200;
          local_18.w = 0x200;
          local_18.h = 0x80;
          LoadImage(&local_18,DAT_8006b29c);
        } while (iVar3 < 4);
        menuState = BetweenMenuAndHomeworld;
        menuAnimation = 0;
        DAT_800670c8 = 1;
        iVar3 = blackOverlayOpacity;
      }
    }
  }
  blackOverlayOpacity = iVar3;
  return;
}



void FUN_OVRTitleScreenAndLoading__800739e0(int *param_1,int param_2)

{
  Object *pOVar1;
  Object *pOVar2;
  ModelSet *pMVar3;
  int *piVar4;
  int iVar5;
  int iVar6;
  ModelSet **ppMVar7;
  
  DAT_80068c54 = *param_1 << 1;
  DAT_80068c58 = param_1[1];
  DAT_80068c64 = param_1[2];
  DAT_80068c68 = param_1[3];
  DAT_80068c6c = param_1[4];
  DAT_80068c5c = param_1 + 5;
  DAT_80068c60 = DAT_80068c5c + DAT_80068c58;
  DAT_80068c70 = (int)param_1 + DAT_80068c68;
  DAT_80068c74 = DAT_80068c70 + DAT_80068c6c;
  piVar4 = DAT_80068c60 + DAT_80068c58;
  if (param_2 != 0) {
    FUN_80013810(DAT_800682d8,param_1 + 0x200,DAT_80068c68 + *DAT_80068c60 + -0x800,
                 (&DAT_800679d8)[DAT_80068c3c * 2] + 0x800);
  }
  ppMVar7 = objectModels;
  DAT_80068c78 = (int)param_1 + DAT_80068c64 * -4 + DAT_80068c68;
  Objects = (Object *)((int)param_1 + *piVar4);
  MemCopy(DAT_80068c78,objectModels);
  iVar6 = 0;
  if (0 < DAT_80068c64) {
    iVar5 = 0;
    do {
      piVar4 = piVar4 + 1;
      pMVar3 = (ModelSet *)((int)param_1 + *piVar4);
      *ppMVar7 = pMVar3;
      if (pMVar3->modelCount < 0) {
        FUN_OVRTitleScreenAndLoading__80070018(pMVar3,iVar6,0x80800000);
      }
      else {
        if (pMVar3[2].field1_0x4 != 0) {
          pMVar3[2].field1_0x4 = (int)&pMVar3->modelCount + pMVar3[2].field1_0x4;
        }
        pMVar3 = *ppMVar7;
        if (pMVar3[2].field2_0x8 != 0) {
          pMVar3[2].field2_0x8 = (int)&pMVar3->modelCount + pMVar3[2].field2_0x8;
        }
      }
      MEMSET((int *)((int)&Objects->data + iVar5),0,0x58);
      pOVar1 = Objects;
      ppMVar7 = ppMVar7 + 1;
      (&Objects->field_0x4c)[iVar5] = 0x20;
      pOVar2 = Objects;
      *(short *)((int)&pOVar1->type + iVar5) = (short)iVar6;
      iVar6 = iVar6 + 1;
                    // Possible PsyQ macro: setLineF2()
      (&pOVar2->lodDistanceLimit)[iVar5] = 0x40;
      (&Objects->field_0x52)[iVar5] = 0xff;
      iVar5 = iVar5 + 0x58;
    } while (iVar6 < DAT_80068c64);
  }
  Objects[DAT_80068c64].state = 0xff;
  return;
}



void FUN_OVRTitleScreenAndLoading__80073c64(int *param_1,uint param_2,int param_3)

{
  long lVar1;
  ModelSet *pMVar2;
  ulong addr;
  int iVar3;
  ModelSet **ppMVar4;
  int iVar5;
  
  if (param_3 == 0) {
    addr = param_2 * 0x6270 + 0x21010;
  }
  else {
    addr = (param_2 & 1) * 0x6270 + 0x1010;
  }
  DAT_80068c50 = param_2;
  SpuSetTransferStartAddr(addr);
  FUN_8005aaa8((int)param_1 + *param_1,0x6270);
  do {
    lVar1 = SpuIsTransferCompleted(0);
  } while (lVar1 == 0);
  iVar5 = 0;
  if (0 < DAT_80068c64) {
    ppMVar4 = objectModels;
    do {
      pMVar2 = *ppMVar4;
      if (((int)pMVar2 < 0) && ((int)param_2 < pMVar2->modelCount)) {
        (&pMVar2[2].field3_0xc)[param_2] = (int)param_1 + (&pMVar2[2].field3_0xc)[param_2];
        *(int *)((&(*ppMVar4)[2].field3_0xc)[param_2] + 0xc) =
             (int)param_1 + *(int *)((&(*ppMVar4)[2].field3_0xc)[param_2] + 0xc);
        iVar3 = (&(*ppMVar4)[2].field3_0xc)[param_2];
        *(int *)(iVar3 + 0x10) = (int)&(*ppMVar4)->modelCount + *(int *)(iVar3 + 0x10);
        iVar3 = (&(*ppMVar4)[2].field3_0xc)[param_2];
        *(int *)(iVar3 + 0x14) = (int)&(*ppMVar4)->modelCount + *(int *)(iVar3 + 0x14);
        *(undefined4 *)((&(*ppMVar4)[2].field3_0xc)[param_2] + 0x18) = 0;
        *(undefined4 *)((&(*ppMVar4)[2].field3_0xc)[param_2] + 0x1c) = 0;
        *(int *)((&(*ppMVar4)[2].field3_0xc)[param_2] + 0x20) =
             (int)param_1 + *(int *)((&(*ppMVar4)[2].field3_0xc)[param_2] + 0x20);
      }
      iVar5 = iVar5 + 1;
      ppMVar4 = ppMVar4 + 1;
    } while (iVar5 < DAT_80068c64);
  }
  return;
}



undefined4 FUN_OVRTitleScreenAndLoading__80073e48(int param_1)

{
  undefined4 *puVar1;
  undefined4 uVar2;
  undefined4 uVar3;
  undefined4 local_20;
  undefined4 local_1c;
  int local_18;
  
  uVar2 = DAT_8006b290;
  DAT_80068c40 = param_1;
  if ((currentLoadedLevel != GLIMMER) || (uVar3 = 0, param_1 != 0)) {
    DAT_80068c3c = (uint)(byte)(&DAT_80064914)[g_currLevelID];
    if (param_1 == 1) {
      DAT_80068c3c = DAT_80068c3c + 1;
    }
    if (0x45 < (int)currentLoadedLevel) {
      DAT_80068c3c = DAT_80068c3c + DAT_80067118;
    }
    if ((&DAT_800679dc)[DAT_80068c3c * 2] == 0) {
      uVar3 = 0;
    }
    else {
      FUN_80013810(DAT_800682d8,DAT_8006b290,0x800,(&DAT_800679d8)[DAT_80068c3c * 2]);
      currGameState = Cutscene;
      DAT_800670c8 = 1;
      FUN_8004d158(0x1c000);
      FUN_OVRTitleScreenAndLoading__800739e0(uVar2,1);
      DAT_80068c44 = 0;
      DAT_80068c48 = 0;
      FUN_OVRTitleScreenAndLoading__80073c64(DAT_80068c70,0,1);
                    // WARNING: Read-only address (ram,0x80069941) is written
      doubleFrameBuffer[0].drawEnvironment.r0 = clearColor.Red;
                    // WARNING: Read-only address (ram,0x80069942) is written
      doubleFrameBuffer[0].drawEnvironment.g0 = clearColor.Green;
                    // WARNING: Read-only address (ram,0x80069943) is written
      doubleFrameBuffer[0].drawEnvironment.b0 = clearColor.Blue;
                    // WARNING: Read-only address (ram,0x800699b5) is written
      doubleFrameBuffer[1].drawEnvironment.r0 = clearColor.Red;
                    // WARNING: Read-only address (ram,0x800699b6) is written
      doubleFrameBuffer[1].drawEnvironment.g0 = clearColor.Green;
                    // WARNING: Read-only address (ram,0x800699b7) is written
      doubleFrameBuffer[1].drawEnvironment.b0 = clearColor.Blue;
      if (DAT_80068c40 == 1) {
        *(undefined *)(DAT_80066f00 + 0x40) = 0;
      }
      if ((int)currentLoadedLevel < 0x46) {
        if ((currentLoadedLevel == GLIMMER) && (DAT_80068c40 == 1)) {
          FUN_8002365c(1,0xfc,0);
          FUN_80023710(1,0x3a,0);
        }
        else if ((currentLoadedLevel == BREEZE_HARBOR) && (DAT_80068c40 == 1)) {
          local_20 = 0;
          local_1c = 0;
          local_18 = 0;
          FUN_8003c310(1,&local_20);
          local_18 = local_18 >> 4;
          FUN_8004be20(&local_20);
        }
        else if ((currentLoadedLevel == ROBOTICA_FARMS) && (DAT_80068c40 == 1)) {
          FUN_8002365c(2,0xfc,0);
          FUN_8002365c(10,0xfc,0);
          FUN_8002365c(0xb,0xfc,0);
        }
      }
      else {
        FUN_8001c68c(DAT_8006b29c + -0x2004);
        DAT_80067174 = (int *)(DAT_80066f18 + -0x1000);
        MEMSET(DAT_80067174,0,0x1000);
      }
      MemCopy(&DAT_80068c80,DAT_80067068,0x14);
      puVar1 = DAT_80067068;
      uVar3 = 1;
      *DAT_80067068 = 0x1010;
      *(undefined2 *)((int)puVar1 + 6) = 0x2fff;
      *(undefined2 *)(puVar1 + 3) = 0x7f8;
      *(undefined2 *)((int)puVar1 + 0xe) = 0x7f8;
      *(undefined *)(puVar1 + 4) = 1;
      DAT_80068c7c = 0xffffffff;
      Spyro.field168_0x260 = 1;
    }
  }
  return uVar3;
}



void FUN_OVRTitleScreenAndLoading__800741a0(void)

{
  long lVar1;
  uint uVar2;
  
  MemCopy(DAT_80067068,&DAT_80068c80,0x14);
  MemCopy(objectModels,DAT_80068c78,DAT_80068c64 << 2);
  if (DAT_80068c40 < 2) {
    FUN_80013810(DAT_800682d8,DAT_8006b290,0xc800,
                 DAT_8006b0a4 + *(int *)(&DAT_80067750 + g_currLevelID * 0x10) + 0x86000);
    SpuSetTransferStartAddr(0x1010);
    FUN_8005aaa8(DAT_8006b290,0xc800);
    do {
      lVar1 = SpuIsTransferCompleted(0);
    } while (lVar1 == 0);
    uVar2 = DAT_80068c68 + DAT_80068c6c * 2 + 0x7ffU & 0xfffff800;
    FUN_80013810(DAT_800682d8,DAT_8006b290,uVar2,
                 DAT_8006b0b4 + *(int *)(&DAT_80067750 + g_currLevelID * 0x10));
    FUN_OVRTitleScreenAndLoading__80070398(DAT_8006b290,DAT_8006b290 + uVar2);
  }
  Spyro.field168_0x260 = 0;
  return;
}



void FUN_OVRTitleScreenAndLoading__800742f8(void)

{
  int iVar1;
  
  DAT_80068c44 = DAT_80068c44 + deltaTime;
  if (DAT_80068c54 + -1 < DAT_80068c44) {
    DAT_80068c44 = DAT_80068c54 + -1;
  }
  if (DAT_80068c44 < 0x14) {
    blackOverlayOpacity = (0xf - DAT_80068c44) * 0x10;
    if (blackOverlayOpacity < 0) {
      blackOverlayOpacity = 0;
    }
  }
  else {
    if (DAT_80068c54 + -10 < DAT_80068c44) {
      iVar1 = (10 - (DAT_80068c54 - DAT_80068c44)) * 0x20;
    }
    else {
      iVar1 = blackOverlayOpacity + 0x20;
      if ((blackOverlayOpacity == 0) &&
         (((DAT_80068c44 < 0x78 || (DAT_80068c54 + -0x20 <= DAT_80068c44)) ||
          (iVar1 = 0x20, (inputStates[0].pressed & (Cross|Select|Start)) == None))))
      goto LAB_OVRTitleScreenAndLoading__800743e4;
    }
    blackOverlayOpacity = iVar1;
  }
LAB_OVRTitleScreenAndLoading__800743e4:
  if (1 < DAT_80068c44) {
    if (DAT_80068c7c < 0) {
      DAT_80068c7c = PlayAudio(0,0,4);
    }
    else {
      FUN_80050cf4(DAT_80068c7c,(0x100 - blackOverlayOpacity) * 0x18);
    }
  }
  if (((DAT_80068c44 < 0x79) || (blackOverlayOpacity < 0xe1)) && (DAT_80068c44 != DAT_80068c54 + -1)
     ) {
    if ((DAT_80068c50 < 0) && (iVar1 = FUN_80013690(), iVar1 == 0)) {
      FUN_OVRTitleScreenAndLoading__80073c64
                ((&DAT_80068c70)[DAT_80068c48 + 1U & 1],DAT_80068c48 + 1U,1);
    }
    DAT_80068c48 = DAT_80068c44 / 0x78;
    DAT_80068c4c = DAT_80068c44 % 0x78;
    if (((int)DAT_80068c4c < deltaTime) &&
       (iVar1 = DAT_80068c44 - deltaTime, DAT_80068c50 < DAT_80068c48)) {
      DAT_80068c48 = iVar1 / 0x78;
      DAT_80068c4c = iVar1 % 0x78;
      DAT_80068c44 = iVar1;
      FUN_80050aac();
    }
    if (((DAT_80068c4c != 0) && ((int)DAT_80068c4c <= deltaTime)) &&
       ((int)(DAT_80068c48 + 1U) < DAT_80068c58)) {
      DAT_80068c50 = -1;
      FUN_80013918(DAT_800682d8,(&DAT_80068c70)[DAT_80068c48 + 1U & 1],
                   *(undefined4 *)(DAT_80068c48 * 4 + DAT_80068c60 + 4),
                   (&DAT_800679d8)[DAT_80068c3c * 2] + *(int *)(DAT_80068c48 * 4 + DAT_80068c5c + 4)
                  );
    }
    DAT_80068c4c = DAT_80068c4c & 0xfe;
    FUN_OVRTitleScreenAndLoading__8007490c();
    return;
  }
  FUN_80050aac();
  FUN_80050d38();
  FUN_8004d810();
  ClearDoubleBuffer();
                    // WARNING (jumptable): Read-only address (ram,0x80069941) is written
                    // WARNING: Read-only address (ram,0x80069941) is written
  doubleFrameBuffer[0].drawEnvironment.r0 = '\0';
                    // WARNING (jumptable): Read-only address (ram,0x80069942) is written
                    // WARNING: Read-only address (ram,0x80069942) is written
  doubleFrameBuffer[0].drawEnvironment.g0 = '\0';
                    // WARNING (jumptable): Read-only address (ram,0x80069943) is written
                    // WARNING: Read-only address (ram,0x80069943) is written
  doubleFrameBuffer[0].drawEnvironment.b0 = '\0';
                    // WARNING (jumptable): Read-only address (ram,0x800699b5) is written
                    // WARNING: Read-only address (ram,0x800699b5) is written
  doubleFrameBuffer[1].drawEnvironment.r0 = '\0';
                    // WARNING (jumptable): Read-only address (ram,0x800699b6) is written
                    // WARNING: Read-only address (ram,0x800699b6) is written
  doubleFrameBuffer[1].drawEnvironment.g0 = '\0';
                    // WARNING (jumptable): Read-only address (ram,0x800699b7) is written
                    // WARNING: Read-only address (ram,0x800699b7) is written
  doubleFrameBuffer[1].drawEnvironment.b0 = '\0';
  FUN_OVRTitleScreenAndLoading__800741a0();
  if (DAT_800698bd != '\0') {
    FUN_80019230(0);
    loadingStatus = 0;
    currentLoadedLevel = DRAGON_SHORES;
    return;
  }
  switch(DAT_80068c40) {
  case 0:
    currGameState = WorldTransition;
    menuState = Homeworld;
    goto LAB_OVRTitleScreenAndLoading__80074668;
  case 1:
    currGameState = WorldTransition;
    DAT_800670c8 = 1;
    menuState = Paused;
    DAT_8006b2fc = 0;
    menuAnimation = 0x10;
    FUN_8004d158(0x1c000);
    DAT_80067170 = 0x14000;
    doubleFrameBuffer[1].field2_0x70 = doubleFrameBuffer[0].field2_0x70 + 0x5000;
                    // WARNING: Read-only address (ram,0x80069a0c) is written
    break;
  case 2:
    FUN_80019230(2);
    break;
  case 3:
    FUN_80019230(3);
    break;
  case 4:
    FUN_80019230(5);
    break;
  case 5:
    currGameState = 8;
    DAT_8006715c = 0x2e;
    if (DAT_80068c40 == 5) {
      DAT_8006715c = 0x1a;
    }
    loadingStatus = 2;
    menuState = Paused;
    DAT_80067e04 = 0;
LAB_OVRTitleScreenAndLoading__80074668:
    DAT_800670c8 = 1;
    menuAnimation = 0;
    break;
  case 6:
    FUN_80019230(8);
    break;
  case 7:
    FUN_80019230(9);
    break;
  case 8:
    FUN_80019230(10);
    currentLoadedLevel = GULPS_OVERLOOK;
    break;
  case 9:
    FUN_80019230(0xc);
    break;
  case 10:
    FUN_80019230(0xd);
    break;
  case 0xb:
    FUN_80019230(0xe);
    currentLoadedLevel = RIPTOS_ARENA;
    loadingStatus = 2;
    break;
  case 0xc:
    DAT_80067048 = 0xffff;
    FUN_8001a910();
    break;
  default:
    return;
  }
                    // WARNING: Read-only address (ram,0x80069941) is written
                    // WARNING: Read-only address (ram,0x80069942) is written
                    // WARNING: Read-only address (ram,0x80069943) is written
                    // WARNING: Read-only address (ram,0x80069998) is written
                    // WARNING: Read-only address (ram,0x800699b5) is written
                    // WARNING: Read-only address (ram,0x800699b6) is written
                    // WARNING: Read-only address (ram,0x800699b7) is written
                    // WARNING: Read-only address (ram,0x80069a0c) is written
  return;
}



void FUN_OVRTitleScreenAndLoading__8007490c(void)

{
  int iVar1;
  byte *pbVar2;
  uint *puVar3;
  int iVar4;
  int iVar5;
  uint *puVar6;
  int iVar7;
  int iVar8;
  ModelSet **ppMVar9;
  int iVar10;
  int iVar11;
  Vec3 local_98;
  Vec3 local_88;
  Vec3 VStack_78;
  Vec3 local_68;
  Vec3 VStack_58;
  Vec3 local_48 [3];
  
  iVar11 = 0;
  if (0 < DAT_80068c64) {
    iVar8 = 0;
    iVar10 = 0;
    ppMVar9 = objectModels;
    do {
      if ((int)*ppMVar9 < 0) {
        (&Objects->modelId)[iVar8] = (byte)DAT_80068c48;
        (&Objects->nextModelId)[iVar8] = (byte)DAT_80068c48;
        if ((int)DAT_80068c48 < (*ppMVar9)->modelCount) {
          pbVar2 = (byte *)(&(*ppMVar9)[2].field3_0xc)[DAT_80068c48];
          iVar7 = 0;
          if (*pbVar2 == 1) {
            (&Objects->keyframe)[iVar8] = 0;
            (&Objects->nextKeyframe)[iVar8] = 0;
LAB_OVRTitleScreenAndLoading__80074bc0:
            (&Objects->field_0x40)[iVar8] = 0;
          }
          else {
            iVar1 = *pbVar2 - 1;
            iVar5 = 0;
            if (0 < iVar1) {
              do {
                iVar4 = ((int)(*(uint *)(pbVar2 + 0x28) & 0x1e00) >> 9) + 1;
                if ((int)DAT_80068c4c < iVar7 + iVar4) {
                  (&Objects->keyframe)[iVar8] = (byte)iVar5;
                  (&Objects->nextKeyframe)[iVar8] = (byte)iVar5 + 1;
                  iVar7 = (DAT_80068c4c - iVar7) * 0x10;
                  if (iVar4 == 0) {
                    trap(0x1c00);
                  }
                  if ((iVar4 == -1) && (iVar7 == -0x80000000)) {
                    trap(0x1800);
                  }
                  (&Objects->field_0x40)[iVar8] = (char)(iVar7 / iVar4);
                  break;
                }
                iVar5 = iVar5 + 1;
                pbVar2 = pbVar2 + 8;
                iVar7 = iVar7 + iVar4;
              } while (iVar5 < iVar1);
            }
            if (iVar5 == *(byte *)(&(*ppMVar9)[2].field3_0xc)[DAT_80068c48] - 1) {
              (&Objects->keyframe)[iVar8] = (byte)iVar5;
              (&Objects->nextKeyframe)[iVar8] = (byte)iVar5;
              goto LAB_OVRTitleScreenAndLoading__80074bc0;
            }
          }
          puVar3 = (uint *)((&DAT_80068c70)[(&Objects->modelId)[iVar8] & 1] +
                            *(int *)(iVar10 + (&DAT_80068c70)[(&Objects->modelId)[iVar8] & 1] + 0xc)
                           + (uint)(&Objects->keyframe)[iVar8] * 4);
          local_98.x = (int)(*puVar3 & 0x3ff00000) >> 0xc;
          local_98.y = (int)(*puVar3 & 0xffc00) >> 2;
          puVar6 = (uint *)((&DAT_80068c70)[(&Objects->nextModelId)[iVar8] & 1] +
                            *(int *)(iVar10 + (&DAT_80068c70)[(&Objects->nextModelId)[iVar8] & 1] +
                                    0xc) + (uint)(&Objects->nextKeyframe)[iVar8] * 4);
          local_98.z = (*puVar3 & 0x3ff) << 8;
          local_88.x = (int)(*puVar6 & 0x3ff00000) >> 0xc;
          local_88.y = (int)(*puVar6 & 0xffc00) >> 2;
          local_88.z = (*puVar6 & 0x3ff) << 8;
          VectorSubtract(&VStack_78,&local_98,&local_88);
          iVar7 = VectorLength(&VStack_78,1);
          if (0x7ff < iVar7) {
            if (7 < (byte)(&Objects->field_0x40)[iVar8]) {
              (&Objects->keyframe)[iVar8] = (&Objects->nextKeyframe)[iVar8];
              VectorCopy(&local_98,&local_88);
            }
            (&Objects->field_0x40)[iVar8] = 0;
          }
          local_98.x = local_98.x * (0x10 - (uint)(byte)(&Objects->field_0x40)[iVar8]);
          local_98.y = local_98.y * (0x10 - (uint)(byte)(&Objects->field_0x40)[iVar8]);
          local_98.z = local_98.z * (0x10 - (uint)(byte)(&Objects->field_0x40)[iVar8]);
          local_88.x = local_88.x * (uint)(byte)(&Objects->field_0x40)[iVar8];
          local_88.y = local_88.y * (uint)(byte)(&Objects->field_0x40)[iVar8];
          local_88.z = local_88.z * (uint)(byte)(&Objects->field_0x40)[iVar8];
          VectorAdd(&local_98,&local_98,&local_88);
          VectorShiftRight(&local_98,4);
          VectorCopy((Vec3 *)((int)&(Objects->position).x + iVar8),&local_98);
        }
        else {
          (&Objects->modelId)[iVar8] = 0;
          (&Objects->nextModelId)[iVar8] = 0;
          (&Objects->keyframe)[iVar8] = 0;
          (&Objects->nextKeyframe)[iVar8] = 0;
          (&Objects->field_0x40)[iVar8] = 0;
          (&Objects->field_0x4c)[iVar8] = 0;
          (&Objects->isShown)[iVar8] = false;
        }
      }
      iVar8 = iVar8 + 0x58;
      iVar10 = iVar10 + 4;
      iVar11 = iVar11 + 1;
      ppMVar9 = ppMVar9 + 1;
    } while (iVar11 < DAT_80068c64);
  }
  FUN_OVRTitleScreenAndLoading__8007501c();
  iVar11 = (&DAT_80068c70)[DAT_80068c48 & 1] + *(int *)((&DAT_80068c70)[DAT_80068c48 & 1] + 8);
  VecShortToInt(&local_88,(VectorShort *)(iVar11 + ((int)DAT_80068c4c >> 1) * 0xc));
  CastVectorShortToVector(&local_68,(VectorShort *)(iVar11 + ((int)DAT_80068c4c >> 1) * 0xc + 6));
  if (((DAT_80068c4c & 1) != 0) && ((int)(DAT_80068c4c + 1) < 0x78)) {
    VecShortToInt(&VStack_58,(VectorShort *)(iVar11 + ((int)DAT_80068c4c >> 1) * 0xc + 0xc));
    VectorSubtract(&VStack_58,&VStack_58,&local_88);
    CastVectorShortToVector
              (local_48,(VectorShort *)(iVar11 + ((int)DAT_80068c4c >> 1) * 0xc + 0x12));
    local_48[0].x = maybeNegativeAngularDistance4096(local_48[0].x,local_68.x);
    local_48[0].y = maybeNegativeAngularDistance4096(local_48[0].y,local_68.y);
    local_48[0].z = maybeNegativeAngularDistance4096(local_48[0].z,local_68.z);
    iVar11 = VectorLength(&VStack_58,1);
    if ((iVar11 < 0x100) && (local_48[0].z + 0xffU < 0x1ff)) {
      VectorShiftRight(&VStack_58,1);
      VectorAdd(&local_88,&local_88,&VStack_58);
      local_68.x = local_68.x + (local_48[0].x >> 1);
      local_68.y = local_68.y + (local_48[0].y >> 1);
      local_68.z = local_68.z + (local_48[0].z >> 1);
    }
  }
  VectorCopy(&cameraPosition,&local_88);
  VecIntToShort2(&VectorShort_80067ec8,&local_68);
  return;
}



void FUN_OVRTitleScreenAndLoading__8007501c(void)

{
  Object *pOVar1;
  Object *pOVar2;
  byte bVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  undefined *puVar7;
  uint uVar8;
  int iVar9;
  int iVar10;
  char cVar11;
  byte *pbVar12;
  char *pcVar13;
  char *pcVar14;
  char *pcVar15;
  int iVar16;
  int iVar17;
  char *pcVar18;
  int *piVar19;
  int iVar20;
  Vec3 local_70;
  Vec3 local_60;
  Vec3 local_50;
  short local_40;
  short local_3e;
  short local_3c;
  int local_38;
  
  pOVar1 = Objects;
  switch(currentLoadedLevel) {
  case GLIMMER:
  case ROBOTICA_FARMS:
    if (DAT_80068c40 == 1) {
      UpdateTerrainAnimations(deltaTime);
    }
    break;
  case 0x46:
    iVar16 = 0;
    if (DAT_80068c44 == deltaTime) {
      pbVar12 = (&PTR_s_Dragon_Shores_80064a20)[DAT_80067118 * 0x20];
      local_38 = strlen((char *)pbVar12);
      iVar6 = (local_38 + -1) * -0x13;
      if (0 < local_38) {
        iVar20 = 0;
        do {
          pOVar1 = Objects;
          if (*pbVar12 != 0x20) {
            piVar19 = (int *)((int)&Objects[8].data + iVar20);
            MEMSET(piVar19,0,0x58);
            *(undefined2 *)((int)&pOVar1[8].type + iVar20) = 8;
            FUN_800375c8(piVar19);
            iVar17 = (iVar6 + 0xc00) * 0x10000 >> 0x10;
            iVar9 = (int)DAT_80061dd8;
            iVar10 = (int)DAT_80061d58;
            iVar4 = cosineLookup(iVar17);
            *(int *)((int)&pOVar1[8].position.x + iVar20) =
                 (0x1174c - (iVar9 * 0x271 >> 10)) + (iVar4 * 0xd48 >> 0xc);
            iVar4 = sineLookup(iVar17);
            *(int *)((int)&pOVar1[8].position.y + iVar20) =
                 (0x9d08 - (iVar10 * 0x271 >> 10)) + (iVar4 * 0xd48 >> 0xc);
            iVar4 = cosineLookup((int)(short)iVar6);
            if (iVar4 < 0) {
              iVar4 = iVar4 + 3;
            }
            *(int *)((int)&pOVar1[8].position.z + iVar20) = (iVar4 >> 2) + 0x3010;
            bVar3 = (byte)(iVar17 + 0x800 >> 4);
            (&pOVar1[8].eulerRotation.yaw)[iVar20] = bVar3;
            (&pOVar1[8].heldGemValue)[iVar20] = bVar3;
            (&pOVar1[8].field_0x51)[iVar20] = (char)iVar16;
            bVar3 = *pbVar12;
            if (bVar3 < 0x61) {
              if (bVar3 < 0x41) {
                iVar4 = *(int *)((int)&pOVar1[8].position.z + iVar20);
                (&pOVar1[8].modelId)[iVar20] = 0x1a;
                *(int *)((int)&pOVar1[8].position.z + iVar20) = iVar4 + 0x40;
              }
              else {
                (&pOVar1[8].modelId)[iVar20] = bVar3 + 0xbf;
              }
            }
            else {
              (&pOVar1[8].modelId)[iVar20] = bVar3 + 0x9f;
            }
            (&pOVar1[8].field_0x4c)[iVar20] = 0x18;
            (&pOVar1[8].color.Red)[iVar20] = 2;
            (&pOVar1[8].eulerRotation.pad)[iVar20] = 2;
          }
          pbVar12 = pbVar12 + 1;
          iVar20 = iVar20 + 0x58;
          iVar16 = iVar16 + 1;
          iVar6 = iVar6 + 0x26;
        } while (iVar16 < local_38);
      }
      Objects[iVar16 + 8].state = 0xff;
    }
    if (Objects->state != 0xff) {
      pbVar12 = &Objects->state;
      do {
        if (*(short *)(pbVar12 + -0x12) == 8) {
          pbVar12[-2] = pbVar12[8] +
                        (char)(*(short *)((int)cosineLookupTable +
                                         (((uint)pbVar12[9] + clock) * 8 & 0x1f8)) * 3 >> 9);
        }
        pbVar12 = pbVar12 + 0x58;
      } while (*pbVar12 != 0xff);
    }
    iVar16 = 0;
    do {
      uVar8 = rand();
      if ((uVar8 & 1) == 0) {
        uVar8 = rand();
        uVar8 = uVar8 & 0xfff;
      }
      else {
        uVar8 = rand();
        uVar8 = (int)VectorShort_80067ec8.Z - ((uVar8 & 0x3ff) - 0x200);
      }
      iVar20 = rand();
      iVar6 = iVar20;
      if (iVar20 < 0) {
        iVar6 = iVar20 + 0x3fff;
      }
      iVar20 = iVar20 + (iVar6 >> 0xe) * -0x4000;
      iVar6 = cosineLookup(uVar8);
      uVar5 = rand();
      local_70.x = (cameraPosition.x + (iVar6 * iVar20 >> 0xc)) - ((uVar5 & 0x7ff) - 0x400);
      iVar6 = sineLookup(uVar8);
      uVar8 = rand();
      local_70.z = cameraPosition.z + 0x4000;
      local_70.y = (cameraPosition.y + (iVar6 * iVar20 >> 0xc)) - ((uVar8 & 0x7ff) - 0x400);
      if ((0 < local_70.x) && (0 < local_70.y)) {
        iVar6 = FUN_8003ee3c(&local_70,0x60c0,2,0);
        local_70.z = cameraPosition.z + iVar20 / 3 + 0x800;
        if ((iVar6 + 0x400 <= local_70.z) && ((iVar6 == 0 || (0 < Vec3_8006ab88.z)))) {
          puVar7 = (undefined *)FUN_80041c50(1);
          *puVar7 = 0x45;
          puVar7[3] = 1;
          if (iVar6 == 0) {
            iVar6 = local_70.z + -0x4000;
            if (iVar6 < 0x400) {
              iVar6 = 0x400;
            }
LAB_OVRTitleScreenAndLoading__80075578:
            *(undefined2 *)(puVar7 + 0x18) = 0;
          }
          else {
            if (DAT_8006aba0 != 0) goto LAB_OVRTitleScreenAndLoading__80075578;
            iVar20 = Vec3_8006ab88.x;
            if (Vec3_8006ab88.x < 0) {
              iVar20 = -Vec3_8006ab88.x;
            }
            iVar4 = Vec3_8006ab88.y;
            if (Vec3_8006ab88.y < 0) {
              iVar4 = -Vec3_8006ab88.y;
            }
            if (Vec3_8006ab88.z <= iVar20 + iVar4) goto LAB_OVRTitleScreenAndLoading__80075578;
            *(undefined2 *)(puVar7 + 0x18) = 1;
          }
          uVar8 = rand();
          local_60.x = (uVar8 & 0x1f) + 0x10;
          uVar8 = rand();
          local_60.y = (uVar8 & 0x1f) + 0x10;
          uVar8 = rand();
          local_60.z = (uVar8 & 0x7f) + 0x1c0;
          if (local_60.z == 0) {
            trap(0x1c00);
          }
          if ((local_60.z == -1) && (local_70.z - iVar6 == -0x80000000)) {
            trap(0x1800);
          }
          puVar7[2] = (char)((local_70.z - iVar6) / local_60.z);
          local_70.z = iVar6;
          VectorMultByN(&local_50,&local_60);
          VectorAdd(&local_70,&local_70,&local_50);
          VecIntToShort((VectorShort *)(puVar7 + 4),&local_70);
          VectorAdd(&local_70,&local_70,&local_60);
          VecIntToShort((VectorShort *)(puVar7 + 10),&local_70);
          puVar7[0x14] = 0x70;
          puVar7[0x15] = 0x70;
          puVar7[0x16] = 0x90;
          puVar7[0x10] = 0x90;
          puVar7[0x11] = 0x90;
          puVar7[0x12] = 0xb0;
          puVar7[0x17] = 0;
          puVar7[0x13] = 0x50;
        }
      }
      iVar16 = iVar16 + 1;
    } while (iVar16 < 4);
    cVar11 = DAT_80066f18[1];
    if (cVar11 != -1) {
      pcVar14 = DAT_80066f18 + 1;
      pcVar13 = DAT_80066f18;
      do {
        if (cVar11 != -2) {
          if (*pcVar13 == '\b') {
            if ((byte)pcVar14[9] < 5) {
LAB_OVRTitleScreenAndLoading__80075818:
              FUN_80041d20(pcVar13);
            }
            else {
              pcVar14[9] = pcVar14[9] - 1;
            }
          }
          else if (*pcVar13 == 'E') {
            local_40 = *(short *)(pcVar14 + 3) - *(short *)(pcVar14 + 9);
            local_3e = *(short *)(pcVar14 + 5) - *(short *)(pcVar14 + 0xb);
            local_3c = *(short *)(pcVar14 + 7) - *(short *)(pcVar14 + 0xd);
            *(short *)(pcVar14 + 3) = *(short *)(pcVar14 + 3) + local_40;
            *(short *)(pcVar14 + 5) = *(short *)(pcVar14 + 5) + local_3e;
            *(short *)(pcVar14 + 7) = *(short *)(pcVar14 + 7) + local_3c;
            *(short *)(pcVar14 + 9) = *(short *)(pcVar14 + 9) + local_40;
            cVar11 = pcVar14[1];
            *(short *)(pcVar14 + 0xb) = *(short *)(pcVar14 + 0xb) + local_3e;
            pcVar14[1] = cVar11 + -1;
            *(short *)(pcVar14 + 0xd) = *(short *)(pcVar14 + 0xd) + local_3c;
            if (cVar11 == '\0') {
              if (*(short *)(pcVar14 + 0x17) != 0) {
                puVar7 = (undefined *)FUN_80041c50(4);
                *puVar7 = 8;
                puVar7[2] = 0;
                puVar7[3] = 1;
                CopyVectorShort((VectorShort *)(puVar7 + 4),(VectorShort *)(pcVar13 + 10));
                iVar16 = rand();
                puVar7[10] = ((byte)iVar16 & 6) + 0xe;
                bVar3 = Spyro.angleAsByte.yaw;
                puVar7[0xc] = 0x20;
                puVar7[0xd] = 0x20;
                puVar7[0xe] = 0x40;
                puVar7[0xf] = 0x2e;
                puVar7[0x11] = 2;
                puVar7[0x10] = 0;
                puVar7[0xb] = bVar3;
              }
              goto LAB_OVRTitleScreenAndLoading__80075818;
            }
          }
        }
        pcVar14 = pcVar14 + 0x20;
        cVar11 = *pcVar14;
        pcVar13 = pcVar13 + 0x20;
      } while (cVar11 != -1);
    }
    break;
  case 0x47:
    if (DAT_80068c44 == deltaTime) {
      Objects[0x14].color.Red = 2;
      pOVar2 = Objects;
      pOVar1[0x14].position.z = 0x25e4;
      pOVar1[0x14].position.x = 0x11b00;
      pOVar1[0x14].position.y = 0x8600;
      pOVar2[0x15].position.x = 0x11b00;
      pOVar2[0x15].position.y = 0x8600;
      pOVar2[0x15].position.z = 0x2718;
      pOVar2[0x15].color.Red = 2;
    }
    else if ((int)DAT_80068c44 < 0x960) {
      Objects[0x14].eulerRotation.yaw = Objects[0x14].eulerRotation.yaw - 1;
      Objects[0x15].eulerRotation.yaw = Objects[0x15].eulerRotation.yaw + 1;
    }
    else if ((int)DAT_80068c44 < 0x1030) {
      iVar16 = sineLookup(((int)DAT_80068c44 % 0x28) * 0x66);
      Objects[0x14].position.z = iVar16 / 0x60 + 0x25e4;
      iVar16 = cosineLookup(((int)DAT_80068c44 % 0x28) * 0x66);
      pOVar1 = Objects;
      Objects[0x14].eulerRotation.yaw = Objects[0x14].eulerRotation.yaw + 5;
      pOVar2 = Objects;
      pOVar1[0x15].position.z = iVar16 / 0x60 + 0x2774;
      pOVar2[0x15].eulerRotation.yaw = pOVar2[0x15].eulerRotation.yaw - 5;
      iVar16 = sineLookup((DAT_80068c44 & 0x7f) << 5);
      Objects[0x14].eulerRotation.pitch = (byte)(iVar16 >> 7);
      iVar16 = sineLookup((DAT_80068c44 & 0x7f) << 5);
      Objects[0x14].eulerRotation.roll = (byte)(iVar16 >> 7);
      pOVar1 = Objects;
      if (0xa51 < (int)DAT_80068c44) {
        Objects[0x14].position.x = 0x11c60;
        pOVar1[0x14].position.y = 0x8854;
        pOVar1[0x15].position.x = 0x11c60;
        pOVar1[0x15].position.y = 0x8854;
      }
    }
    else {
      *(undefined *)(DAT_80066f00 + 0x40) = 0;
      pOVar1 = Objects;
      Objects[0x14].position.z = 0;
      pOVar1[0x15].position.z = 0;
    }
    whiteOverlayOpacity = 0;
    if ((0x1029 < (int)DAT_80068c44) && (iVar16 = DAT_80068c44 - 0x1030, (int)DAT_80068c44 < 0x1037)
       ) {
      if (iVar16 < 0) {
        iVar16 = -iVar16;
      }
      whiteOverlayOpacity = iVar16 * -0x19 + 0xdc;
    }
    if (DAT_80068c44 - 0x961 < 0x6cf) {
      puVar7 = (undefined *)FUN_80041c50(2);
      *puVar7 = 0xc;
      puVar7[3] = 1;
      puVar7[0x11] = 2;
      uVar8 = rand();
      VectorCopy(&local_60,&Objects[(uVar8 & 1) + 0x14].position);
      uVar8 = rand();
      local_60.x = (local_60.x + 0x80) - (uVar8 & 0xff);
      uVar8 = rand();
      local_60.y = (local_60.y + 0x80) - (uVar8 & 0xff);
      uVar8 = rand();
      local_60.z = (local_60.z + 0x80) - (uVar8 & 0xff);
      VecIntToShort((VectorShort *)(puVar7 + 4),&local_60);
      *(undefined4 *)(puVar7 + 0xc) = DAT_800644d4;
      iVar16 = rand();
      puVar7[10] = ((byte)iVar16 & 7) + 0x14;
      iVar16 = rand();
      puVar7[0xb] = (char)iVar16;
      puVar7[0x10] = 0;
      iVar16 = rand();
      *(ushort *)(puVar7 + 0x18) = ((ushort)iVar16 & 7) - 4;
      iVar16 = rand();
      *(ushort *)(puVar7 + 0x1a) = ((ushort)iVar16 & 7) - 4;
      iVar16 = rand();
      *(ushort *)(puVar7 + 0x1c) = ((ushort)iVar16 & 7) - 3;
    }
    if ((0x102f < (int)DAT_80068c44) && ((int)(DAT_80068c44 - deltaTime) < 0x1030)) {
      iVar16 = 0;
      do {
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = 0;
        iVar6 = rand();
        puVar7[2] = (byte)iVar6 & 7;
        puVar7[3] = 1;
        uVar8 = rand();
        local_50.x = 0x100 - (uVar8 & 0x1ff);
        uVar8 = rand();
        local_50.y = 0x400 - (uVar8 & 0x7ff);
        uVar8 = rand();
        local_50.z = 0x400 - (uVar8 & 0x7ff);
        VecIntToShort((VectorShort *)(puVar7 + 0x18),&local_50);
        VectorAdd(&local_50,&local_50,(Vec3 *)(DAT_80066f00 + 0x18));
        local_50.z = local_50.z + -0x540;
        VecIntToShort((VectorShort *)(puVar7 + 4),&local_50);
        iVar16 = iVar16 + 1;
        iVar6 = rand();
        *(ushort *)(puVar7 + 0x18) =
             *(short *)(puVar7 + 0x18) / 10 - (((ushort)iVar6 & 0x1f) - 0x10);
        iVar6 = rand();
        *(ushort *)(puVar7 + 0x1a) =
             *(short *)(puVar7 + 0x1a) / 10 - (((ushort)iVar6 & 0x1f) - 0x10);
        iVar6 = rand();
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        *(ushort *)(puVar7 + 0x1c) =
             *(short *)(puVar7 + 0x1c) / 10 - (((ushort)iVar6 & 0x1f) - 0x10);
        iVar6 = rand();
        puVar7[10] = ((byte)iVar6 & 0x1f) + 0x28;
        iVar6 = rand();
        puVar7[0xb] = (char)iVar6;
        puVar7[0xc] = 0x80;
        puVar7[0xd] = 0x80;
        puVar7[0xe] = 0x80;
        puVar7[0xf] = 0x2e;
        puVar7[0x11] = 4;
        puVar7[0x10] = 0;
      } while (iVar16 < 0x32);
    }
    cVar11 = DAT_80066f18[1];
    pcVar13 = DAT_80066f18 + 1;
    if (cVar11 != -1) {
      pcVar18 = DAT_80066f18 + 0x18;
      pcVar15 = DAT_80066f18 + 4;
      pcVar14 = DAT_80066f18;
      do {
        if (cVar11 != -2) {
          if (*pcVar14 == '\0') {
            VectorShortAdd(pcVar15,pcVar15,pcVar18);
            if (*(short *)(pcVar13 + 0x1d) != 0) {
              *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
            }
            pcVar13[9] = pcVar13[9] + '\x04';
            *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
            pcVar13[0xc] = pcVar13[0xc] + -6;
            pcVar13[0xb] = pcVar13[0xb] + -6;
            cVar11 = pcVar13[1];
            pcVar13[1] = cVar11 + 2U;
            pcVar13[0xd] = pcVar13[0xd] + -6;
            if (0x27 < (byte)(cVar11 + 2U)) {
LAB_OVRTitleScreenAndLoading__80075f48:
              FUN_80041d20(pcVar14);
            }
          }
          else if (*pcVar14 == '\f') {
            pcVar13[10] = pcVar13[10] + '\b';
            VectorShortAdd(pcVar15,pcVar15,pcVar18);
            if (pcVar13[0xb] != '\0') {
              pcVar13[0xb] = pcVar13[0xb] + -8;
            }
            if (pcVar13[0xc] != '\0') {
              pcVar13[0xc] = pcVar13[0xc] + -8;
            }
            if (pcVar13[0xd] != '\0') {
              pcVar13[0xd] = pcVar13[0xd] + -8;
            }
            if (((*(uint *)(pcVar13 + 0xb) & 0xffffff) == 0) || (pcVar13[2] == '\0'))
            goto LAB_OVRTitleScreenAndLoading__80075f48;
          }
        }
        pcVar13 = pcVar13 + 0x20;
        pcVar18 = pcVar18 + 0x20;
        pcVar15 = pcVar15 + 0x20;
        cVar11 = *pcVar13;
        pcVar14 = pcVar14 + 0x20;
      } while (cVar11 != -1);
    }
    break;
  case 0x48:
    Objects[7].field_0x4c = 0x36;
    Objects[8].field_0x4c = 0x36;
    break;
  case 0x49:
    if (DAT_80068c44 - 0x834 < 0xd9f) {
      *(undefined *)(DAT_80066f00 + 0x40) = 0x20;
    }
    else {
      *(undefined *)(DAT_80066f00 + 0x40) = 0;
    }
    break;
  case 0x4c:
    if (DAT_80068c44 - 0x3b0 < 7) {
      iVar16 = 0;
      do {
        iVar16 = iVar16 + 1;
        iVar6 = rand();
        cVar11 = (((byte)iVar6 & 7) + 10) * '\b';
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = 0;
        puVar7[3] = 1;
        iVar6 = rand();
        local_60.x = 0x954d - iVar6 % 0xc0;
        iVar6 = rand();
        local_60.y = 0xe880 - iVar6 % 0xc0;
        iVar6 = rand();
        local_60.z = 0x4f8a - iVar6 % 0xc0;
        VecIntToShort((VectorShort *)(puVar7 + 4),&local_60);
        iVar6 = rand();
        *(short *)(puVar7 + 0x18) = 10 - ((short)iVar6 + (short)(iVar6 / 0x14) * -0x14);
        iVar6 = rand();
        *(short *)(puVar7 + 0x1a) = 10 - ((short)iVar6 + (short)(iVar6 / 0x14) * -0x14);
        iVar6 = rand();
        *(ushort *)(puVar7 + 0x1c) = 0xc - ((ushort)iVar6 & 0xf);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        iVar6 = rand();
        puVar7[10] = ((byte)iVar6 & 0xf) + 0x14;
        iVar6 = rand();
        puVar7[0xb] = (char)iVar6;
        puVar7[0xf] = 0x2e;
        puVar7[0xc] = cVar11;
        puVar7[0xd] = cVar11;
        puVar7[0xe] = cVar11;
        puVar7[0x11] = 1;
        puVar7[0x10] = 0;
      } while (iVar16 < 6);
    }
    pcVar13 = DAT_80066f18 + 1;
    cVar11 = DAT_80066f18[1];
    pcVar14 = DAT_80066f18;
    while (cVar11 != -1) {
      if ((cVar11 != -2) && (*pcVar14 == '\0')) {
        VectorShortAdd(pcVar14 + 4,pcVar14 + 4,pcVar14 + 0x18);
        pcVar13[9] = pcVar13[9] + '\x04';
        pcVar13[0xc] = pcVar13[0xc] + -8;
        pcVar13[0xb] = pcVar13[0xb] + -8;
        pcVar13[0xd] = pcVar13[0xd] + -8;
        if (pcVar13[0xb] == '\0') {
          FUN_80041d20(pcVar14);
        }
      }
      pcVar13 = pcVar13 + 0x20;
      pcVar14 = pcVar14 + 0x20;
      cVar11 = *pcVar13;
    }
    Objects[1].field_0x4c = 0x36;
    break;
  case 0x4e:
    if ((0x677 < (int)DAT_80068c44) && ((int)(DAT_80068c44 - deltaTime) < 0x678)) {
      iVar16 = 0;
      do {
        iVar16 = iVar16 + 1;
        iVar6 = rand();
        cVar11 = (((byte)iVar6 & 7) + 10) * '\b';
        puVar7 = (undefined *)FUN_80041c50(2);
        *puVar7 = 0;
        puVar7[3] = 1;
        uVar8 = rand();
        local_60.x = 0xe6e8 - (uVar8 & 0x3ff);
        uVar8 = rand();
        local_60.y = 0x13d0a - (uVar8 & 0x3ff);
        uVar8 = rand();
        local_60.z = 0x9514 - (uVar8 & 0x3ff);
        VecIntToShort((VectorShort *)(puVar7 + 4),&local_60);
        iVar6 = rand();
        *(ushort *)(puVar7 + 0x18) = 0x10 - ((ushort)iVar6 & 0x1f);
        iVar6 = rand();
        *(ushort *)(puVar7 + 0x1a) = 0x10 - ((ushort)iVar6 & 0x1f);
        iVar6 = rand();
        *(ushort *)(puVar7 + 0x1c) = 0x10 - ((ushort)iVar6 & 0x1f);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        iVar6 = rand();
        puVar7[10] = ((byte)iVar6 & 0xf) + 0x18;
        iVar6 = rand();
        puVar7[0xb] = (char)iVar6;
        puVar7[0xf] = 0x2e;
        puVar7[0xc] = cVar11;
        puVar7[0xd] = cVar11;
        puVar7[0xe] = cVar11;
        puVar7[0x11] = 1;
        puVar7[0x10] = 0;
      } while (iVar16 < 0x28);
    }
    pcVar13 = DAT_80066f18 + 1;
    cVar11 = DAT_80066f18[1];
    pcVar14 = DAT_80066f18;
    while (cVar11 != -1) {
      if ((cVar11 != -2) && (*pcVar14 == '\0')) {
        VectorShortAdd(pcVar14 + 4,pcVar14 + 4,pcVar14 + 0x18);
        pcVar13[9] = pcVar13[9] + '\x04';
        pcVar13[0xc] = pcVar13[0xc] + -8;
        pcVar13[0xb] = pcVar13[0xb] + -8;
        pcVar13[0xd] = pcVar13[0xd] + -8;
        if (pcVar13[0xb] == '\0') {
          FUN_80041d20(pcVar14);
        }
      }
      pcVar13 = pcVar13 + 0x20;
      pcVar14 = pcVar14 + 0x20;
      cVar11 = *pcVar13;
    }
  }
  return;
}



void initNewGame(void)

{
  int iVar1;
  char *pcVar2;
  undefined4 *puVar3;
  int iVar4;
  undefined4 *puVar5;
  
  currentLoadedLevel = GLIMMER;
  lives = 4;
  vibrationFlag = 1;
  settingsSoundVolume = 10;
  settingsMusicVolume = 10;
  displayMap = 0;
  cameraMode = 0;
  enableVoiceAudio = 1;
  maybeScaledMusicVolume = 0x3fff;
  speakerSetup = 1;
  orbsCollectedCount = 0;
  MEMSET((int *)orbsCollectedFlags,0,0x20);
  talismansCollected = 0;
  MEMSET((int *)worldsCompleted,0,0x20);
  gemsCollectedNetValue = 0;
  MEMSET(worldGemsCollectedValue,0,0x80);
  MEMSET((int *)collectedFlags,0,0x400);
  MEMSET((int *)worldsEntered,0,0x20);
  MEMSET((int *)maybeNPCTalkedToFlags,0,0x20);
  MEMSET((int *)&crushDeathCounter,0,8);
  MEMSET((int *)unknownBossProgressThing,0,0x20);
  iVar1 = 0x98;
  do {
    *(undefined2 *)((int)&globalProgressFlags.glacierBridge.isPayed + iVar1) = 0;
    iVar1 = iVar1 + -4;
    iVar4 = 0x13;
  } while (-1 < iVar1);
  pcVar2 = &skillPointFlags.unused3;
  do {
    *pcVar2 = '\0';
    iVar4 = iVar4 + -1;
    pcVar2 = pcVar2 + -1;
  } while (-1 < iVar4);
  totalSkillPoints = 0;
  iVar1 = 0;
  puVar5 = &DAT_80061950;
  do {
    iVar4 = 4;
    puVar3 = puVar5 + 4;
    do {
      *puVar3 = 0;
      iVar4 = iVar4 + -1;
      puVar3 = puVar3 + -1;
    } while (-1 < iVar4);
    *(undefined4 *)((int)&oceanBestTime + iVar1) = 36000;
    *(undefined4 *)((int)&DAT_80061970 + iVar1) = 200;
    iVar1 = iVar1 + 0x58;
    puVar5 = puVar5 + 0x16;
  } while (iVar1 < 0x160);
  return;
}



int FUN_OVRTitleScreenAndLoading__80076614(byte *param_1)

{
  byte bVar1;
  int iVar2;
  byte *pbVar3;
  
  iVar2 = 0;
  pbVar3 = param_1 + 0x5a8;
  do {
    bVar1 = *param_1;
    param_1 = param_1 + 1;
    iVar2 = iVar2 + (uint)bVar1;
  } while (param_1 < pbVar3);
  return iVar2;
}



bool FUN_OVRTitleScreenAndLoading__8007663c(int param_1)

{
  int iVar1;
  
  iVar1 = FUN_OVRTitleScreenAndLoading__80076614();
  return iVar1 == *(int *)(param_1 + 0x5a8);
}



bool FUN_OVRTitleScreenAndLoading__80076674(int param_1)

{
  return (&DAT_80067e54)[DAT_80067e24] == *(int *)(param_1 + 0xc);
}



undefined4 FUN_OVRTitleScreenAndLoading__800766a0(int *param_1)

{
  int iVar1;
  int iVar2;
  
  MEMSET(param_1,0,0x600);
  *(undefined *)param_1 = 0xb;
  *(undefined *)((int)param_1 + 1) = 4;
  *(char *)((int)param_1 + 2) = (char)displayMap;
  *(undefined *)((int)param_1 + 3) = cameraMode;
  *(undefined *)(param_1 + 1) = vibrationFlag;
  *(char *)((int)param_1 + 5) = (char)enableVoiceAudio;
  *(char *)((int)param_1 + 6) = (char)settingsSoundVolume;
  *(char *)((int)param_1 + 7) = (char)settingsMusicVolume;
  *(char *)(param_1 + 2) = (char)speakerSetup;
  iVar1 = maybeReadSysClock();
  iVar2 = rand();
  param_1[3] = iVar1 + iVar2 * 0x10000;
  iVar1 = FUN_OVRTitleScreenAndLoading__80076614(param_1);
  param_1[0x16a] = iVar1;
  return 0xffffffff;
}



int FUN_OVRTitleScreenAndLoading__8007677c(int *param_1)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  undefined4 *puVar4;
  int *piVar5;
  int iVar6;
  int *piVar7;
  int *piVar8;
  undefined4 *puVar9;
  
  MEMSET(param_1,0,0x600);
  *(char *)param_1 = (char)currentLoadedLevel;
  *(char *)((int)param_1 + 1) = (char)lives;
  *(char *)((int)param_1 + 2) = (char)displayMap;
  *(undefined *)((int)param_1 + 3) = cameraMode;
  *(undefined *)(param_1 + 1) = vibrationFlag;
  *(char *)((int)param_1 + 5) = (char)enableVoiceAudio;
  *(char *)((int)param_1 + 6) = (char)settingsSoundVolume;
  *(char *)((int)param_1 + 7) = (char)settingsMusicVolume;
  *(char *)(param_1 + 2) = (char)speakerSetup;
  *(undefined *)((int)param_1 + 9) = cheatFireball;
  iVar1 = maybeReadSysClock();
  iVar2 = rand();
  param_1[3] = iVar1 + iVar2 * 0x10000;
  MemCopy(param_1 + 4,worldsEntered,0x20);
  MemCopy(param_1 + 0xc,maybeNPCTalkedToFlags,0x20);
  MemCopy(param_1 + 0x2e,&globalProgressFlags,0x9c);
  MemCopy(param_1 + 0x55,&skillPointFlags,0x14);
  iVar2 = 0;
  puVar9 = &DAT_80061950;
  iVar1 = 0;
  piVar8 = param_1;
  piVar7 = param_1;
  do {
    iVar6 = 0;
    piVar5 = piVar8 + 0x24;
    puVar4 = puVar9;
    do {
      uVar3 = *puVar4;
      puVar4 = puVar4 + 1;
      iVar6 = iVar6 + 1;
      *(char *)piVar5 = (char)uVar3;
      piVar5 = (int *)((int)piVar5 + 1);
    } while (iVar6 < 5);
    puVar9 = puVar9 + 0x16;
    piVar8 = (int *)((int)piVar8 + 5);
    iVar6 = iVar1 + 1;
    piVar7[0x29] = *(int *)((int)&oceanBestTime + iVar2);
    puVar4 = (undefined4 *)((int)&DAT_80061970 + iVar2);
    iVar2 = iVar2 + 0x58;
    *(char *)((int)param_1 + iVar1 + 0xb4) = (char)*puVar4;
    piVar7 = piVar7 + 1;
    iVar1 = iVar6;
  } while (iVar6 < 4);
  piVar7 = worldGemsCollectedValue;
  iVar1 = 0;
  piVar8 = param_1;
  do {
    iVar2 = *piVar7;
    piVar7 = piVar7 + 1;
    *(short *)(piVar8 + 0x5a) = (short)iVar2;
    *(bool *)((int)param_1 + iVar1 + 0x50) = worldsCompleted[iVar1];
    iVar2 = iVar1 + 1;
    *(byte *)((int)param_1 + iVar1 + 0x70) = orbsCollectedFlags[iVar1];
    piVar8 = (int *)((int)piVar8 + 2);
    iVar1 = iVar2;
  } while (iVar2 < 0x20);
  MemCopy(param_1 + 0x6a,collectedFlags,0x400);
  iVar1 = FUN_OVRTitleScreenAndLoading__80076614(param_1);
  param_1[0x16a] = iVar1;
  return param_1[3];
}



void FUN_OVRTitleScreenAndLoading__800769bc(byte *param_1)

{
  undefined4 *puVar1;
  byte bVar2;
  byte *pbVar3;
  uint uVar4;
  uint *puVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint *puVar9;
  int *piVar10;
  byte *pbVar11;
  byte *pbVar12;
  
  currentLoadedLevel = (LoadedLevelID)*param_1;
  lives = (uint)param_1[1];
  if (lives < 4) {
    lives = 4;
  }
  displayMap = (uint)param_1[2];
  cameraMode = param_1[3];
  vibrationFlag = param_1[4];
  enableVoiceAudio = (uint)param_1[5];
  settingsSoundVolume = (int)param_1[6];
  settingsMusicVolume = (uint)param_1[7];
  maybeScaledMusicVolume = (settingsMusicVolume * 0x3fff) / 10;
  speakerSetup = (uint)param_1[8];
  cheatFireball = param_1[9];
  MemCopy(worldsEntered,param_1 + 0x10,0x20);
  MemCopy(maybeNPCTalkedToFlags,param_1 + 0x30,0x20);
  MemCopy(&globalProgressFlags,param_1 + 0xb8,0x9c);
  MemCopy(&skillPointFlags,param_1 + 0x154,0x14);
  iVar8 = 0;
  iVar7 = 0;
  puVar9 = &DAT_80061950;
  pbVar11 = param_1;
  pbVar12 = param_1;
  do {
    iVar6 = 0;
    pbVar3 = pbVar11 + 0x90;
    puVar5 = puVar9;
    do {
      bVar2 = *pbVar3;
      pbVar3 = pbVar3 + 1;
      iVar6 = iVar6 + 1;
      *puVar5 = (uint)bVar2;
      puVar5 = puVar5 + 1;
    } while (iVar6 < 5);
    puVar1 = (undefined4 *)(pbVar12 + 0xa4);
    pbVar12 = pbVar12 + 4;
    pbVar11 = pbVar11 + 5;
    puVar9 = puVar9 + 0x16;
    *(undefined4 *)((int)&oceanBestTime + iVar7) = *puVar1;
    iVar6 = iVar8 + 0xb4;
    iVar8 = iVar8 + 1;
    *(uint *)((int)&DAT_80061970 + iVar7) = (uint)param_1[iVar6];
    iVar7 = iVar7 + 0x58;
  } while (iVar8 < 4);
  iVar7 = 0;
  pbVar12 = orbsCollectedFlags;
  piVar10 = worldGemsCollectedValue;
  gemsCollectedNetValue = 0;
  talismansCollected = 0;
  orbsCollectedCount = 0;
  pbVar11 = param_1;
  do {
    gemsCollectedNetValue = gemsCollectedNetValue + *(short *)(pbVar11 + 0x168);
    *piVar10 = (int)*(short *)(pbVar11 + 0x168);
    worldsCompleted[iVar7] = (bool)param_1[iVar7 + 0x50];
    if ((&DAT_800648f4)[iVar7] != '\0') {
      talismansCollected = talismansCollected + (uint)param_1[iVar7 + 0x50];
    }
    uVar4 = 0;
    *pbVar12 = param_1[iVar7 + 0x70];
    do {
      if (((int)(uint)*pbVar12 >> (uVar4 & 0x1f) & 1U) != 0) {
        orbsCollectedCount = orbsCollectedCount + 1;
      }
      uVar4 = uVar4 + 1;
    } while ((int)uVar4 < 4);
    pbVar12 = pbVar12 + 1;
    piVar10 = piVar10 + 1;
    iVar7 = iVar7 + 1;
    pbVar11 = pbVar11 + 2;
  } while (iVar7 < 0x20);
  if (globalProgressFlags.finalCutsceneWatched.isPayed == 0) {
    iVar7 = 0;
    do {
      if (*(short *)((int)&globalProgressFlags.glacierBridge.isPayed + iVar7) == 1) {
        gemsCollectedNetValue =
             gemsCollectedNetValue -
             *(short *)((int)&globalProgressFlags.glacierBridge.cost + iVar7);
      }
      iVar7 = iVar7 + 4;
    } while (iVar7 < 0x9c);
  }
  MemCopy(collectedFlags,param_1 + 0x1a8,0x400);
  return;
}



void FUN_OVRTitleScreenAndLoading__80076cd4(int param_1)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int *piVar8;
  int iVar9;
  
  iVar9 = 0;
  piVar8 = &DAT_80067e48;
  do {
    iVar3 = 0;
    iVar5 = 0;
    iVar4 = 0;
    iVar6 = param_1;
    iVar7 = param_1;
    do {
      uVar2 = 0;
      iVar3 = iVar3 + *(short *)(iVar7 + 0x168);
      uVar1 = (uint)*(byte *)(iVar6 + 0x70);
      do {
        if ((uVar1 & 1) != 0) {
          iVar3 = iVar3 + 200;
        }
        uVar2 = uVar2 + 1;
        uVar1 = (int)(uint)*(byte *)(iVar6 + 0x70) >> (uVar2 & 0x1f);
      } while ((int)uVar2 < 4);
      iVar5 = iVar5 + (uint)(byte)maxGemsOfWorlds[iVar4] * 100 + (uint)maxOrbsOfWorlds[iVar4] * 200;
      if ((((uint)LoadedLevelIDAsBytesArray[iVar4] % 10 - 1 < 4) && (iVar4 < 0x15)) ||
         ((uint)LoadedLevelIDAsBytesArray[iVar4] % 10 == 6)) {
        if (*(char *)(iVar6 + 0x50) != '\0') {
          iVar3 = iVar3 + 500;
        }
        iVar5 = iVar5 + 500;
      }
      iVar6 = iVar6 + 1;
      iVar4 = iVar4 + 1;
      iVar7 = iVar7 + 2;
    } while (iVar4 < 0x1d);
    iVar6 = (iVar3 * 100) / iVar5;
    if (iVar5 == 0) {
      trap(0x1c00);
    }
    if ((iVar5 == -1) && (iVar3 * 100 == -0x80000000)) {
      trap(0x1800);
    }
    if ((iVar3 != 0) && (iVar6 == 0)) {
      iVar6 = 1;
    }
    *piVar8 = iVar6;
    piVar8 = piVar8 + 1;
    iVar9 = iVar9 + 1;
    param_1 = param_1 + 0x600;
  } while (iVar9 < 3);
  return;
}



void FUN_OVRTitleScreenAndLoading__80076e70(int param_1)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  int iVar3;
  
  iVar3 = 0;
  puVar2 = &DAT_80067e54;
  do {
    puVar1 = (undefined4 *)(param_1 + 0xc);
    param_1 = param_1 + 0x600;
    iVar3 = iVar3 + 1;
    *puVar2 = *puVar1;
    puVar2 = puVar2 + 1;
  } while (iVar3 < 3);
  return;
}



int FUN_OVRTitleScreenAndLoading__80076ea0(void)

{
  byte *pbVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  int iVar5;
  
  iVar3 = 0;
  iVar5 = 0;
  iVar2 = 0;
  piVar4 = worldGemsCollectedValue;
  do {
    pbVar1 = maxGemsOfWorlds + iVar2;
    iVar2 = iVar2 + 1;
    iVar3 = iVar3 + *piVar4;
    iVar5 = iVar5 + (uint)*pbVar1 * 100;
    piVar4 = piVar4 + 1;
  } while (iVar2 < 0x1d);
  iVar2 = iVar3 + orbsCollectedCount * 200 + talismansCollected * 500;
  if (worldsCompleted[9]) {
    iVar2 = iVar2 + 500;
  }
  if (worldsCompleted[21]) {
    iVar2 = iVar2 + 500;
  }
  if (worldsCompleted[27]) {
    iVar2 = iVar2 + 500;
  }
  iVar5 = iVar5 + 0x5334;
  iVar3 = (iVar2 * 100) / iVar5;
  if (iVar5 == 0) {
    trap(0x1c00);
  }
  if ((iVar5 == -1) && (iVar2 * 100 == -0x80000000)) {
    trap(0x1800);
  }
  if ((iVar2 != 0) && (iVar3 == 0)) {
    iVar3 = 1;
  }
  return iVar3;
}



void FUN_OVRTitleScreenAndLoading__80076fd8(void)

{
  int iVar1;
  
  iVar1 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
  if (iVar1 != 0) {
    if (iVar1 == 1) {
      (&DAT_80067e38)[DAT_80067e34] = DAT_80067e6c;
      DAT_80067e34 = 1 - DAT_80067e34;
    }
    FUN_OVRTitleScreenAndLoading__8007cd18(DAT_80067e34 << 4);
  }
  return;
}



bool FUN_OVRTitleScreenAndLoading__80077068(void)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  
  bVar1 = false;
  iVar2 = DAT_80067e3c;
  if (DAT_80067e30 == 2) {
    iVar3 = 3;
    if (((DAT_80067e38 != 1) && (DAT_80067e38 != 3)) && (DAT_80067e3c != 1))
    goto LAB_OVRTitleScreenAndLoading__80077134;
  }
  else if (DAT_80067e30 < 0) {
    iVar3 = 3;
    if (((DAT_80067e38 != 0) && (DAT_80067e38 != 3)) && (DAT_80067e3c != 0))
    goto LAB_OVRTitleScreenAndLoading__80077134;
  }
  else if ((&DAT_80067e38)[DAT_80067e30] == 0) {
    iVar3 = (&DAT_80067e38)[1 - DAT_80067e30];
    iVar2 = 3;
LAB_OVRTitleScreenAndLoading__80077134:
    if (iVar2 != iVar3) goto LAB_OVRTitleScreenAndLoading__80077140;
  }
  bVar1 = true;
LAB_OVRTitleScreenAndLoading__80077140:
  if (bVar1) {
    DAT_80067e04 = 1;
    DAT_80067e0c = 0;
    DAT_80067e08 = 0;
    FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
  }
  return bVar1;
}



bool FUN_OVRTitleScreenAndLoading__80077190(void)

{
  bool bVar1;
  
  bVar1 = (inputStates[0].pressed & Triangle) != None;
  if (bVar1) {
    DAT_80067e04 = 0;
    DAT_80067e0c = 4;
    DAT_80067e00 = 0;
    FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
    FUN_OVRTitleScreenAndLoading__8007ccd8();
  }
  return bVar1;
}



void FUN_OVRTitleScreenAndLoading__800771fc(undefined4 param_1)

{
  DAT_80067e04 = 0;
  DAT_80067e0c = 5;
  DAT_80067e00 = 0;
  DAT_80067e14 = param_1;
  FUN_800506ac(0,8,1);
  return;
}



void FUN_OVRTitleScreenAndLoading__80077248(void)

{
  FUN_800541a0();
  FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
  MEMSET(DAT_80067e70,0,0x1400);
  pauseMenuCurrentItem = pauseMenuCurrentItem + 1;
  return;
}



void FUN_OVRTitleScreenAndLoading__800772a4
               (undefined4 param_1,u_long *param_2,int param_3,short param_4)

{
  int iVar1;
  RECT local_20;
  
  iVar1 = 4;
  do {
    FUN_8001c454(param_1,param_2,param_3,(0xf - iVar1) * 2);
    VSync(0);
    local_20.w = 0x200;
    local_20.x = 0;
    local_20.h = (short)(param_3 >> 10);
    local_20.y = param_4 - (short)(param_3 >> 0xb);
    LoadImage(&local_20,param_2);
    iVar1 = iVar1 + 1;
    local_20.y = local_20.y + 0xe4;
    LoadImage(&local_20,param_2);
    DrawSync(0);
  } while (iVar1 < 0x10);
  return;
}



void FUN_OVRTitleScreenAndLoading__80077374(int param_1)

{
  undefined4 *puVar1;
  int iVar2;
  long lVar3;
  undefined4 uVar4;
  RECT local_28 [2];
  
  FUN_8004d158(0x1c000);
  MEMSET(&DAT_80067e00,0,0x84);
  DAT_80067e74 = &DAT_80180000;
  settingsSoundVolume = 10;
  settingsMusicVolume = 10;
  maybeScaledMusicVolume = 0x3fff;
  if (param_1 == 0) {
    if (currGameState == 9) goto LAB_OVRTitleScreenAndLoading__80077470;
  }
  else {
    FUN_80013810(DAT_800682d8,&DAT_80180000,0x2000,DAT_800676f0);
    DAT_80067e00 = VSync(-1);
    FUN_OVRTitleScreenAndLoading__800772a4(DAT_80067e74,DAT_80067e74 + 0x1c000,0x8000,0x78);
    SsUtReverbOff();
    FUN_80011d78();
    FUN_80011f30();
    FUN_OVRTitleScreenAndLoading__8007cc68();
    FUN_OVRTitleScreenAndLoading__8007d080(0);
LAB_OVRTitleScreenAndLoading__80077470:
    FUN_80013810(DAT_800682d8,DAT_80067e74 + 0x2000,0x1a000,DAT_800676f0 + 0x2000);
  }
  DAT_8006b288 = (u_long *)(&DAT_OVRTitleScreenAndLoading__8006d264 + DAT_800670c4);
  DAT_8006b28c = DAT_8006b288;
  FUN_80013918(DAT_800682d8,DAT_8006b288,0x800,DAT_800679d0);
  if (param_1 != 0) {
    while (iVar2 = VSync(-1), iVar2 - DAT_80067e00 < 0xa4) {
      VSync(0);
    }
    FUN_8004d810();
    ClearDoubleBuffer();
    VSync(4);
    if (param_1 != 0) {
      DAT_80067e00 = VSync(-1);
      FUN_OVRTitleScreenAndLoading__800772a4
                (DAT_80067e74 + 0x2000,DAT_80067e74 + 0x1c000,0x18000,0x58);
    }
  }
  do {
    iVar2 = FUN_80013690();
  } while (iVar2 != 0);
  MemCopy(&DAT_8006b0a4,DAT_8006b28c,0x1c0);
  FUN_80013918(DAT_800682d8,DAT_8006b28c,0x80000,DAT_8006b0a4 + DAT_800679d0);
  if (param_1 == 0) {
LAB_OVRTitleScreenAndLoading__80077660:
    if (currGameState != 9) goto LAB_OVRTitleScreenAndLoading__800776c8;
  }
  else {
    FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
    if ((DAT_80067e6c == 3) || (DAT_80067e6c == 0)) {
      FUN_OVRTitleScreenAndLoading__8007d778
                (0,PTR_s_BASCUS_94425SP2RR_80066e6c,&DAT_800683f0,0,0x80);
      FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
      if (DAT_80067e6c == 0) {
        DAT_80067e04 = 1;
      }
    }
    if (DAT_80067e04 == 0) {
      FUN_OVRTitleScreenAndLoading__8007d080(0x10);
    }
    if (param_1 == 0) goto LAB_OVRTitleScreenAndLoading__80077660;
  }
  while (iVar2 = VSync(-1), iVar2 - DAT_80067e00 < 0x3c) {
    VSync(0);
  }
  FUN_OVRTitleScreenAndLoading__800772a4(DAT_80067e74 + 0x7800,DAT_80067e74 + 0x1c000,0x10000,0xc4);
LAB_OVRTitleScreenAndLoading__800776c8:
  if (param_1 != 0) {
    if ((DAT_80067e04 == 0) &&
       ((FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c), DAT_80067e6c == 3 ||
        (DAT_80067e6c == 0)))) {
      FUN_OVRTitleScreenAndLoading__8007d778
                (0x10,PTR_s_BASCUS_94425SP2RR_80066e6c,&DAT_800683f0,0,0x80);
      FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
      if (DAT_80067e6c == 0) {
        DAT_80067e04 = 1;
      }
    }
    FUN_OVRTitleScreenAndLoading__8007ccd8();
    if (DAT_80067e04 != 0) {
      DAT_80067060 = DAT_8006846e - 0x10;
      DAT_80067064 = DAT_8006846f - 0x10;
      if (0x20 < DAT_8006846e) {
        DAT_80067060 = 0;
      }
      if (0x10 < DAT_80067064) {
        DAT_80067064 = 0;
      }
    }
  }
  do {
    iVar2 = FUN_80013690();
  } while (iVar2 != 0);
  local_28[0].x = 0x200;
  local_28[0].y = 0;
  local_28[0].w = 0x200;
  local_28[0].h = 0x200;
  LoadImage(local_28,DAT_8006b28c);
  DrawSync(0);
  FUN_80013810(DAT_800682d8,DAT_8006b28c,DAT_8006b0a8 + -0x80000,
               DAT_8006b0a4 + DAT_800679d0 + 0x80000);
  SpuSetTransferStartAddr(0x1010);
  FUN_8005aaa8(DAT_8006b28c,DAT_8006b0a8 + -0x80000);
  do {
    lVar3 = SpuIsTransferCompleted(0);
  } while (lVar3 == 0);
  FUN_80013810(DAT_800682d8,DAT_8006b28c,DAT_8006b0b0,DAT_8006b0ac + DAT_800679d0);
  DAT_8006b290 = FUN_OVRTitleScreenAndLoading__8006fa98(DAT_8006b28c);
  FUN_8001c5ec();
  if (param_1 != 0) {
    while (iVar2 = VSync(-1), iVar2 - DAT_80067e00 < 0xb4) {
      VSync(0);
    }
    FUN_8004d810();
    ClearDoubleBuffer();
    if (DAT_80067e04 != 0) {
                    // WARNING: Read-only address (ram,0x80069a00) is written
      doubleFrameBuffer[1].displayEnvironment.screen.x = (short)DAT_80067060;
                    // WARNING: Read-only address (ram,0x8006998c) is written
      doubleFrameBuffer[0].displayEnvironment.screen.x = (short)DAT_80067060;
                    // WARNING: Read-only address (ram,0x80069a02) is written
      doubleFrameBuffer[1].displayEnvironment.screen.y = (short)DAT_80067064;
                    // WARNING: Read-only address (ram,0x8006998e) is written
      doubleFrameBuffer[0].displayEnvironment.screen.y = (short)DAT_80067064;
    }
    VSync(4);
    if (param_1 != 0) {
      DAT_80067e00 = VSync(-1);
      FUN_OVRTitleScreenAndLoading__800772a4
                (DAT_80067e74 + 0xb800,DAT_80067e74 + 0x1c000,0x28000,0x78);
    }
  }
  FUN_80013810(DAT_800682d8,DAT_8006b290,DAT_800679dc,DAT_800679d8);
  DAT_80068c3c = 0;
  DAT_80068c40 = 0xd;
  FUN_OVRTitleScreenAndLoading__800739e0(DAT_8006b290,0);
  if (param_1 == 0) {
    DAT_80068c44 = 0x282;
    blackOverlayOpacity = 0xf0;
  }
  else {
    DAT_80068c44 = 0xfffffffe;
  }
  DAT_80068c48 = 2;
                    // WARNING: Read-only address (ram,0x80069941) is written
  doubleFrameBuffer[0].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80069942) is written
  doubleFrameBuffer[0].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80069943) is written
  doubleFrameBuffer[0].drawEnvironment.b0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b5) is written
  doubleFrameBuffer[1].drawEnvironment.r0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b6) is written
  doubleFrameBuffer[1].drawEnvironment.g0 = '\0';
                    // WARNING: Read-only address (ram,0x800699b7) is written
  doubleFrameBuffer[1].drawEnvironment.b0 = '\0';
  FUN_8001c68c(DAT_8006b29c + -0x2004);
  DAT_80067174 = (int *)(DAT_80066f18 + -0x1000);
  MEMSET(DAT_80067174,0,0x1000);
  MemCopy(&DAT_80068c80,DAT_80067068,0x14);
  if (param_1 == 0) {
    if (currGameState == 9) {
      uVar4 = 270000;
    }
    else {
      uVar4 = 0x40cb0;
    }
  }
  else {
    uVar4 = 0x21010;
  }
  *DAT_80067068 = uVar4;
  puVar1 = DAT_80067068;
  *(undefined2 *)((int)DAT_80067068 + 6) = 0x2fff;
  *(undefined2 *)(puVar1 + 3) = 0x800;
  *(undefined2 *)((int)puVar1 + 0xe) = 0x800;
  DAT_80068c7c = PlayAudio(0,0,0);
  Spyro.field168_0x260 = 1;
  iVar2 = 0;
  if (0 < DAT_80068c58) {
    do {
      FUN_OVRTitleScreenAndLoading__80073c64
                (DAT_8006b290 + *(int *)(iVar2 * 4 + DAT_80068c5c),iVar2,0);
      iVar2 = iVar2 + 1;
    } while (iVar2 < DAT_80068c58);
  }
  if (param_1 != 0) {
    while (iVar2 = VSync(-1), iVar2 - DAT_80067e00 < 0xb4) {
      VSync(0);
    }
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__80077bc8(short param_1,short param_2,short param_3,short param_4)

{
  undefined *ptrPrimitive;
  uint *ptrPrimitive_00;
  
  ptrPrimitive = primitiveBuffer_next;
  *(undefined4 *)primitiveBuffer_next = 0x4000000;
  ptrPrimitive[7] = 0x50;
  *(short *)(ptrPrimitive + 8) = param_1;
  *(short *)(ptrPrimitive + 10) = param_2;
  *(short *)(ptrPrimitive + 0x10) = param_3;
  *(short *)(ptrPrimitive + 0x12) = param_4;
  ptrPrimitive[4] = 0x80;
  ptrPrimitive[5] = 0x4c;
  ptrPrimitive[6] = 0x59;
  ptrPrimitive[0xc] = 0x80;
  ptrPrimitive[0xd] = 0x4c;
  ptrPrimitive[0xe] = 0x59;
  PrimitiveBuffer_Insert((uint *)ptrPrimitive);
  ptrPrimitive_00 = (uint *)(ptrPrimitive + 0x14);
  primitiveBuffer_next = (undefined *)ptrPrimitive_00;
  *ptrPrimitive_00 = 0x4000000;
  ptrPrimitive[0x1b] = 0x50;
  *(short *)(ptrPrimitive + 0x1c) = param_1 + 1;
  *(short *)(ptrPrimitive + 0x1e) = param_2 + 1;
  *(short *)(ptrPrimitive + 0x24) = param_3 + 1;
  *(short *)(ptrPrimitive + 0x26) = param_4 + 1;
  ptrPrimitive[0x18] = 0x59;
  ptrPrimitive[0x19] = 0x35;
  ptrPrimitive[0x1a] = 0x44;
  ptrPrimitive[0x20] = 0x59;
  ptrPrimitive[0x21] = 0x35;
  ptrPrimitive[0x22] = 0x44;
  PrimitiveBuffer_Insert(ptrPrimitive_00);
  primitiveBuffer_next = ptrPrimitive + 0x28;
  return;
}



void FUN_OVRTitleScreenAndLoading__80077cec(void)

{
  FUN_OVRTitleScreenAndLoading__80077bc8(0x11,0x21,0xec,0x21);
  FUN_OVRTitleScreenAndLoading__80077bc8(0xc,0x58,0xf2,0x58);
  FUN_OVRTitleScreenAndLoading__80077bc8(0x80,0x58,0x80,0x6e);
  return;
}



void FUN_OVRTitleScreenAndLoading__80077d40(void)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  
  iVar3 = 0;
  uVar5 = (uint)(byte)(&DAT_80063bd9)[DAT_80067e0c * 2];
  bVar1 = (&DAT_80063bd8)[DAT_80067e0c * 2];
  iVar4 = uVar5 * -7 + 0x3f;
  uVar2 = (uint)bVar1;
  if (uVar5 != 0) {
    do {
      iVar3 = iVar3 + 1;
      DrawText_Center((&PTR_s_Accessing_80063b74)[uVar2],0x80,(short)iVar4,2);
      uVar2 = (uint)bVar1 + iVar3;
      iVar4 = iVar4 + 0xe;
    } while (iVar3 < (int)uVar5);
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__80077df8(void)

{
  char *text;
  
  text = s_Memory_Card_2_OVRTitleScreenAndLoading__8006d514;
  if (DAT_80067e30 == 0) {
    text = s_Memory_Card_1_OVRTitleScreenAndLoading__8006d504;
  }
  DrawText_Center(text,0x80,0x15,2);
  return;
}



void FUN_OVRTitleScreenAndLoading__80077e3c(void)

{
  FUN_OVRTitleScreenAndLoading__80079878(0x80,0x68,DAT_80067e30 + 0x3c,0);
  return;
}



void FUN_OVRTitleScreenAndLoading__80077e70(void)

{
  undefined *puVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  undefined4 *puVar7;
  
  iVar2 = DAT_80067e0c;
  iVar4 = DAT_80067e2c;
  switch(DAT_80067e0c) {
  case 0:
    iVar5 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
    iVar4 = DAT_80067e2c;
    if (iVar5 == 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    if (DAT_80067e08 != 0) {
      if (DAT_80067e08 == 1) {
        if (DAT_80067e6c == 3) {
          DAT_80067e6c = 0;
        }
        DAT_80067e38 = DAT_80067e6c;
        FUN_OVRTitleScreenAndLoading__8007d080(0x10);
LAB_OVRTitleScreenAndLoading__80078ed8:
        DAT_80067e08 = 2;
        iVar4 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
      if (DAT_80067e6c == 3) {
        DAT_80067e6c = 0;
      }
      DAT_80067e3c = DAT_80067e6c;
      if ((((DAT_80067e20 != 0) && (-1 < DAT_80067e28)) && ((&DAT_80067e38)[DAT_80067e28] == 0)) &&
         ((&DAT_80067e54)[DAT_80067e24] != -1)) {
        FUN_OVRTitleScreenAndLoading__8007d778
                  (DAT_80067e28 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,
                   DAT_80067e24 * 0x600 + 0x200,0x80);
        FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
        if ((DAT_80067e6c == 0) &&
           (iVar4 = FUN_OVRTitleScreenAndLoading__80076674(DAT_80067e70), iVar4 != 0)) {
          FUN_800542d8();
          DAT_80067e0c = 1;
          DAT_80067e14 = 0;
          DAT_80067e30 = DAT_80067e28;
        }
      }
      iVar4 = DAT_80067e2c;
      if (DAT_80067e0c != 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      DAT_80067e28 = -1;
      iVar4 = 0;
      puVar7 = &DAT_80067e40;
      piVar6 = &DAT_80067e38;
      do {
        if (*piVar6 == 4) {
          *piVar6 = 0;
          *puVar7 = 1;
        }
        else {
          *puVar7 = 0;
        }
        puVar7 = puVar7 + 1;
        iVar4 = iVar4 + 1;
        piVar6 = piVar6 + 1;
      } while (iVar4 < 2);
      if (DAT_80067e38 == 0) {
        if (DAT_80067e3c == 0) {
          FUN_800542d8();
          DAT_80067e30 = 2;
          DAT_80067e0c = 3;
        }
        else {
          DAT_80067e30 = 0;
LAB_OVRTitleScreenAndLoading__8007811c:
          DAT_80067e0c = 5;
          if ((&DAT_80067e40)[DAT_80067e30] == 0) {
            DAT_80067e0c = 4;
            DAT_80067e08 = 0;
            iVar4 = DAT_80067e2c;
            goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
          }
        }
      }
      else {
        if (DAT_80067e3c == 0) {
          DAT_80067e30 = 1;
          goto LAB_OVRTitleScreenAndLoading__8007811c;
        }
        FUN_80054280();
        DAT_80067e30 = -1;
        DAT_80067e0c = 2;
      }
LAB_OVRTitleScreenAndLoading__8007843c:
      DAT_80067e14 = 0;
      iVar4 = DAT_80067e2c;
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    }
    FUN_80054170();
    FUN_OVRTitleScreenAndLoading__8007d080(0);
    goto LAB_OVRTitleScreenAndLoading__80078e70;
  case 1:
    FUN_OVRTitleScreenAndLoading__80076fd8();
    iVar5 = FUN_OVRTitleScreenAndLoading__80077068();
    iVar4 = DAT_80067e2c;
    if (iVar5 != 0) {
      DAT_80067e28 = -1;
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    }
    if ((inputStates[0].pressed & Triangle) == None) {
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
        if ((DAT_80067e10 < 8) || ((inputStates[0].pressed & Cross) == None))
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
        if (DAT_80067e14 == 0) {
          FUN_80054170();
          DAT_80067e0c = 0xd;
        }
        else {
          FUN_80054210();
          DAT_80067e0c = 4;
        }
LAB_OVRTitleScreenAndLoading__80078360:
        DAT_80067e08 = 0;
LAB_OVRTitleScreenAndLoading__80078374:
        FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
        iVar4 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
LAB_OVRTitleScreenAndLoading__8007900c:
      FUN_800541d0();
      DAT_80067e10 = 0;
      DAT_80067e14 = 1 - DAT_80067e14;
      iVar4 = DAT_80067e2c;
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    }
    break;
  case 2:
    FUN_OVRTitleScreenAndLoading__80076fd8();
    iVar5 = FUN_OVRTitleScreenAndLoading__80077068();
    iVar4 = DAT_80067e2c;
    if (iVar5 != 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    if ((inputStates[0].pressed & Triangle) == None) {
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None)
      goto LAB_OVRTitleScreenAndLoading__8007900c;
      if ((DAT_80067e10 < 8) || ((inputStates[0].pressed & Cross) == None))
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      if (DAT_80067e14 == 0) {
        DAT_80067e0c = 0;
        DAT_80067e08 = 0;
        FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
        iVar4 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
    }
    break;
  case 3:
    FUN_OVRTitleScreenAndLoading__80076fd8();
    iVar5 = FUN_OVRTitleScreenAndLoading__80077068();
    iVar4 = DAT_80067e2c;
    if (iVar5 != 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    if ((inputStates[0].pressed & Triangle) == None) {
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
        if ((DAT_80067e10 < 8) || ((inputStates[0].pressed & Cross) == None))
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
        DAT_80067e30 = DAT_80067e14;
        if ((&DAT_80067e40)[DAT_80067e14] == 0) {
          FUN_80054170();
          DAT_80067e0c = 4;
          goto LAB_OVRTitleScreenAndLoading__80078360;
        }
        FUN_80054280();
        DAT_80067e0c = 5;
        DAT_80067e14 = 0;
        goto LAB_OVRTitleScreenAndLoading__80078374;
      }
      goto LAB_OVRTitleScreenAndLoading__8007900c;
    }
    break;
  case 4:
    iVar5 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
    iVar4 = DAT_80067e2c;
    if (iVar5 == 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    if (DAT_80067e08 != 0) {
      if (DAT_80067e6c == 0) {
        FUN_800542d8();
        FUN_OVRTitleScreenAndLoading__80076cd4(DAT_80067e70 + 0x200);
        FUN_OVRTitleScreenAndLoading__80076e70(DAT_80067e70 + 0x200);
        DAT_80067e0c = 0xc;
      }
      else {
        FUN_80054280();
        DAT_80067e0c = 5;
      }
      goto LAB_OVRTitleScreenAndLoading__8007843c;
    }
    FUN_OVRTitleScreenAndLoading__8007d778
              (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,0,0x1400);
LAB_OVRTitleScreenAndLoading__80078e70:
    DAT_80067e08 = 1;
    iVar4 = DAT_80067e2c;
    goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
  case 5:
    FUN_OVRTitleScreenAndLoading__80076fd8();
    iVar5 = FUN_OVRTitleScreenAndLoading__80077068();
    iVar4 = DAT_80067e2c;
    if (iVar5 != 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    if ((inputStates[0].pressed & Triangle) == None) {
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None)
      goto LAB_OVRTitleScreenAndLoading__8007900c;
      if ((DAT_80067e10 < 8) || ((inputStates[0].pressed & Cross) == None))
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      if (DAT_80067e14 == 0) {
        if ((&DAT_80067e40)[DAT_80067e30] != 0) {
          FUN_80054280();
          DAT_80067e0c = 6;
          DAT_80067e14 = 1;
          iVar4 = DAT_80067e2c;
          goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
        }
        FUN_80054170();
        DAT_80067e0c = 9;
        DAT_80067e08 = 0;
        DAT_80067e2c = 0;
        FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
        iVar4 = DAT_80067e2c;
        goto LAB_OVRTitleScreenAndLoading__80078b6c;
      }
    }
    break;
  case 6:
  case 8:
    if ((DAT_80067e0c == 6) || (0x5a < DAT_80067e10)) {
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar5 = FUN_OVRTitleScreenAndLoading__80077068();
      iVar4 = DAT_80067e2c;
      if (iVar5 != 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    }
    if ((inputStates[0].pressed & Triangle) == None) {
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None)
      goto LAB_OVRTitleScreenAndLoading__8007900c;
      iVar4 = DAT_80067e2c;
      if ((DAT_80067e10 < 8) || ((inputStates[0].pressed & Cross) == None))
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      if (DAT_80067e14 == 0) {
        FUN_80054170();
        DAT_80067e0c = 7;
        DAT_80067e08 = 0;
        DAT_80067e2c = 0;
        FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
        iVar4 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
    }
    break;
  case 7:
    if (DAT_80067e08 == 0) {
      DAT_80067e08 = 1;
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    }
    if (DAT_80067e08 == 1) {
      iVar4 = FUN_OVRTitleScreenAndLoading__8007df54(DAT_80067e30 << 4);
      if ((iVar4 == 0) || (iVar4 = DAT_80067e2c + 1, 2 < DAT_80067e2c)) {
        FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e30 << 4);
        DAT_80067e08 = 2;
        DAT_80067e2c = 0;
        iVar4 = DAT_80067e2c;
      }
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    }
    iVar5 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
    iVar4 = DAT_80067e2c;
    if (iVar5 == 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    if (DAT_80067e6c != 0) {
      if (DAT_80067e2c < 3) {
        FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e30 << 4);
        iVar4 = DAT_80067e2c + 1;
      }
      else {
        FUN_80054280();
        DAT_80067e0c = 8;
        DAT_80067e14 = 1;
        iVar4 = DAT_80067e2c;
      }
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    }
    (&DAT_80067e38)[DAT_80067e30] = 0;
    DAT_80067e0c = 9;
    DAT_80067e08 = 0;
    DAT_80067e2c = 0;
    iVar4 = DAT_80067e2c;
    goto LAB_OVRTitleScreenAndLoading__80078b6c;
  case 9:
    if (DAT_80067e08 == 0) {
      iVar5 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
      iVar4 = DAT_80067e2c;
      if (iVar5 == 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      if ((DAT_80067e6c == 0) || (DAT_80067e6c == 3)) {
        DAT_80067e08 = 1;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
      iVar4 = DAT_80067e2c + 1;
      if (DAT_80067e2c < 3) goto LAB_OVRTitleScreenAndLoading__80078b6c;
LAB_OVRTitleScreenAndLoading__80078b7c:
      FUN_80054280();
      DAT_80067e0c = 10;
      iVar4 = DAT_80067e2c;
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    }
    if (DAT_80067e08 == 1) {
      DAT_80067e6c = FUN_OVRTitleScreenAndLoading__8007dd58
                               (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,1);
      iVar4 = DAT_80067e70;
      if ((DAT_80067e6c == 0) || (DAT_80067e6c == 6)) {
        iVar5 = 0;
        puVar7 = &DAT_80067e54;
        MemCopy(DAT_80067e70,&DAT_8006410c,0x200);
        iVar4 = iVar4 + 0x200;
        do {
          uVar3 = FUN_OVRTitleScreenAndLoading__800766a0(iVar4);
          *puVar7 = uVar3;
          puVar7 = puVar7 + 1;
          iVar5 = iVar5 + 1;
          iVar4 = iVar4 + 0x600;
        } while (iVar5 < 3);
        FUN_OVRTitleScreenAndLoading__8007d9d0
                  (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,0,0x1400);
        DAT_80067140 = 0;
        DAT_80067e08 = 2;
        iVar4 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
      if (DAT_80067e6c == 7) {
        FUN_80054280();
        DAT_80067e0c = 0xb;
        iVar4 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
joined_r0x8007899c:
      if (2 < DAT_80067e2c) goto LAB_OVRTitleScreenAndLoading__80078b7c;
    }
    else {
      if (DAT_80067e08 == 2) {
        iVar5 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
        iVar4 = DAT_80067e2c;
        if (iVar5 == 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
        if (DAT_80067e6c == 0) {
          FUN_OVRTitleScreenAndLoading__8007d778
                    (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,0,0x1400);
          DAT_80067e08 = 3;
          iVar4 = DAT_80067e2c;
          goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
        }
        goto joined_r0x8007899c;
      }
      if (DAT_80067e6c == 0) {
        FUN_OVRTitleScreenAndLoading__80076cd4(DAT_80067e70 + 0x200);
        FUN_OVRTitleScreenAndLoading__80076e70(DAT_80067e70 + 0x200);
        iVar4 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x200);
        if (((iVar4 == 0) ||
            (iVar4 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x800), iVar4 == 0)) ||
           (iVar4 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0xe00), iVar4 == 0)) {
          if (DAT_80067e2c < 3) {
            DAT_80067e08 = 0;
            iVar4 = DAT_80067e2c + 1;
            goto LAB_OVRTitleScreenAndLoading__80078b6c;
          }
          iVar4 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x200);
          if (iVar4 == 0) {
            DAT_80067e54 = FUN_OVRTitleScreenAndLoading__800766a0(DAT_80067e70 + 0x200);
          }
          iVar4 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x800);
          if (iVar4 == 0) {
            DAT_80067e58 = FUN_OVRTitleScreenAndLoading__800766a0(DAT_80067e70 + 0x800);
          }
          iVar4 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0xe00);
          if (iVar4 == 0) {
            DAT_80067e5c = FUN_OVRTitleScreenAndLoading__800766a0(DAT_80067e70 + 0xe00);
          }
          FUN_800542d8();
          FUN_OVRTitleScreenAndLoading__80076cd4(DAT_80067e70 + 0x200);
        }
        else {
          FUN_800542d8();
        }
        DAT_80067e0c = 0xc;
        DAT_80067e14 = 0;
        DAT_80067e24 = 0;
        iVar4 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
      if (2 < DAT_80067e2c) goto LAB_OVRTitleScreenAndLoading__80078b7c;
    }
    DAT_80067e08 = 0;
    iVar4 = DAT_80067e2c + 1;
LAB_OVRTitleScreenAndLoading__80078b6c:
    DAT_80067e2c = iVar4;
    FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e30 << 4);
    iVar4 = DAT_80067e2c;
    goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
  case 10:
  case 0xb:
  case 0xe:
    if (0x5a < DAT_80067e10) {
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar5 = FUN_OVRTitleScreenAndLoading__80077068();
      iVar4 = DAT_80067e2c;
      if (iVar5 != 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    }
    iVar4 = DAT_80067e2c;
    if ((inputStates[0].pressed & (Triangle|Cross)) == None)
    goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    break;
  case 0xc:
    FUN_OVRTitleScreenAndLoading__80076fd8();
    iVar5 = FUN_OVRTitleScreenAndLoading__80077068();
    iVar4 = DAT_80067e2c;
    if (iVar5 != 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    if ((inputStates[0].pressed & Triangle) == None) {
      if ((inputStates[0].pressed & DPadDown) != None) {
        FUN_800541d0();
        DAT_80067e10 = 0;
        DAT_80067e14 = DAT_80067e14 + 1;
        iVar4 = DAT_80067e2c;
        if (3 < DAT_80067e14) {
          DAT_80067e14 = 0;
        }
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
      if ((inputStates[0].pressed & DPadUp) != None) {
        FUN_800541d0();
        DAT_80067e10 = 0;
        DAT_80067e14 = DAT_80067e14 + -1;
        iVar4 = DAT_80067e2c;
        if (DAT_80067e14 < 0) {
          DAT_80067e14 = 3;
        }
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
      if ((DAT_80067e10 < 8) || ((inputStates[0].pressed & Cross) == None))
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      if (DAT_80067e14 < 3) {
        if ((&DAT_80067e48)[DAT_80067e14] != 0) {
          FUN_80054280();
          DAT_80067e08 = DAT_80067e14;
          DAT_80067e0c = 0x10;
          DAT_80067e14 = 1;
          iVar4 = DAT_80067e2c;
          goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
        }
        FUN_80054170();
        DAT_80067e24 = DAT_80067e14;
        goto LAB_OVRTitleScreenAndLoading__80079090;
      }
    }
    break;
  case 0xd:
    iVar5 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
    iVar4 = DAT_80067e2c;
    if (iVar5 == 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    if (DAT_80067e08 == 0) {
      if (DAT_80067140 == 0) {
        DAT_80067e6c = 0;
      }
      else {
        DAT_80067140 = 0;
        FUN_OVRTitleScreenAndLoading__8007d9d0
                  (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,&DAT_8006410c,0,0x80);
        FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
      }
      if (DAT_80067e6c == 0) {
        uVar3 = FUN_OVRTitleScreenAndLoading__8007677c(DAT_80067e70);
        puVar1 = PTR_s_BASCUS_94425SP2RR_80066e6c;
        (&DAT_80067e54)[DAT_80067e24] = uVar3;
        FUN_OVRTitleScreenAndLoading__8007d9d0
                  (DAT_80067e30 << 4,puVar1,DAT_80067e70,DAT_80067e24 * 0x600 + 0x200,0x600);
        goto LAB_OVRTitleScreenAndLoading__80078e70;
      }
    }
    else if (DAT_80067e08 == 1) {
      if (DAT_80067e6c == 0) {
        FUN_OVRTitleScreenAndLoading__8007d778
                  (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,
                   DAT_80067e24 * 0x600 + 0x200,0x600);
        goto LAB_OVRTitleScreenAndLoading__80078ed8;
      }
    }
    else {
      if (DAT_80067e08 != 2) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      if ((DAT_80067e6c == 0) &&
         (iVar4 = FUN_OVRTitleScreenAndLoading__80076614(DAT_80067e70),
         iVar4 == *(int *)(DAT_80067e70 + 0x5a8))) {
        FUN_80054250();
        uVar3 = FUN_OVRTitleScreenAndLoading__80076ea0();
        (&DAT_80067e48)[DAT_80067e24] = uVar3;
        DAT_80067e0c = 0xf;
        iVar4 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
    }
    FUN_80054280();
    DAT_80067e0c = 0xe;
    iVar4 = DAT_80067e2c;
    goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
  case 0xf:
    if ((DAT_80067e10 < 8) || ((inputStates[0].pressed & (Triangle|Cross)) == None))
    goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    DAT_80067e28 = DAT_80067e30;
    DAT_80067e20 = 1;
    break;
  case 0x10:
    FUN_OVRTitleScreenAndLoading__80076fd8();
    iVar5 = FUN_OVRTitleScreenAndLoading__80077068();
    iVar4 = DAT_80067e2c;
    if (iVar5 != 0) goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
    if ((inputStates[0].pressed & Triangle) == None) {
      if ((inputStates[0].pressed & (DPadRight|DPadLeft)) != None)
      goto LAB_OVRTitleScreenAndLoading__8007900c;
      if ((DAT_80067e10 < 8) || ((inputStates[0].pressed & Cross) == None))
      goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      if (DAT_80067e14 == 0) {
        FUN_80054170();
        DAT_80067e24 = DAT_80067e08;
LAB_OVRTitleScreenAndLoading__80079090:
        DAT_80067e0c = 0xd;
        DAT_80067e08 = 0;
        FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
        iVar4 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
      }
    }
    FUN_80054210();
    DAT_80067e0c = 0xc;
    DAT_80067e14 = DAT_80067e08;
    iVar4 = DAT_80067e2c;
  default:
    goto switchD_OVRTitleScreenAndLoading__80077eac_caseD_11;
  }
  FUN_OVRTitleScreenAndLoading__80077248();
  iVar4 = DAT_80067e2c;
switchD_OVRTitleScreenAndLoading__80077eac_caseD_11:
  DAT_80067e2c = iVar4;
  if (DAT_80067e0c == iVar2) {
    DAT_80067e10 = DAT_80067e10 + 1;
  }
  else {
    DAT_80067e10 = 0;
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__8007913c(void)

{
  undefined **ppuVar1;
  char *pcVar2;
  int iVar3;
  uint uVar4;
  short sVar5;
  int *piVar6;
  char acStack_30 [16];
  
  switch(DAT_80067e0c) {
  case 1:
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077d40();
    goto LAB_OVRTitleScreenAndLoading__80079730;
  case 2:
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    uVar4 = 0;
    if (DAT_80067e14 == 0) {
      uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
    }
    DrawText_Center((&PTR_s_Retry_80061b88)[DAT_80067118],0x48,0x5f,uVar4 | 2);
    ppuVar1 = &PTR_s_Cancel_80061b8c;
    goto LAB_OVRTitleScreenAndLoading__80079794;
  case 3:
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    uVar4 = 0;
    if (DAT_80067e14 == 0) {
      uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
    }
    DrawText_Center((&PTR_s_Slot_1_80061b90)[DAT_80067118],0x48,0x5f,uVar4 | 2);
    ppuVar1 = &PTR_s_Slot_2_80061b94;
    goto LAB_OVRTitleScreenAndLoading__80079794;
  case 4:
  case 7:
  case 9:
  case 0xd:
    FUN_OVRTitleScreenAndLoading__80077df8();
  case 0:
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    return;
  case 5:
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    goto LAB_OVRTitleScreenAndLoading__80079730;
  case 6:
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    goto LAB_OVRTitleScreenAndLoading__80079730;
  case 8:
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    uVar4 = 0;
    if (DAT_80067e14 == 0) {
      uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
    }
    DrawText_Center((&PTR_s_Retry_80061b88)[DAT_80067118],0x48,0x5f,uVar4 | 2);
    ppuVar1 = &PTR_s_Cancel_80061b8c;
    goto LAB_OVRTitleScreenAndLoading__80079794;
  case 10:
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    uVar4 = 2;
    if ((DAT_80067e10 & 0x1f) < 0x16) {
      uVar4 = 3;
    }
    pcVar2 = (&PTR_s_Continue_80061b98)[DAT_80067118];
    iVar3 = 0xb8;
    sVar5 = 0x5f;
    break;
  case 0xb:
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    uVar4 = 2;
    if ((DAT_80067e10 & 0x1f) < 0x16) {
      uVar4 = 3;
    }
    pcVar2 = (&PTR_s_Continue_80061b98)[DAT_80067118];
    iVar3 = 0xb8;
    sVar5 = 0x5f;
    break;
  case 0xc:
    iVar3 = 0;
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077bc8(0x11,0x21,0xec,0x21);
    sVar5 = 0x38;
    piVar6 = &DAT_80067e48;
    DrawText_Center((&PTR_s_Select_Save_File__80061b9c)[DAT_80067118],0x80,0x28,2);
    do {
      sprintf(acStack_30,s__s__d_OVRTitleScreenAndLoading__8006d568,
              (&PTR_s_File_80061ba4)[DAT_80067118],iVar3 + 1);
      uVar4 = 0;
      if (DAT_80067e14 == iVar3) {
        uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
      }
      RenderText(acStack_30,0x28,sVar5,uVar4 | 2,(TextConfig *)0x0);
      if ((DAT_80067118 == 0) || (DAT_80067118 == 4)) {
        uVar4 = 0;
        if (DAT_80067e14 == iVar3) {
          uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
        }
        DrawText_Center(s_______OVRTitleScreenAndLoading__8006d570,0x88,sVar5,uVar4 | 2);
      }
      if (*piVar6 == 0) {
        uVar4 = 0;
        pcVar2 = &DAT_OVRTitleScreenAndLoading__8006d580;
        if (DAT_80067e14 == iVar3) {
          uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
        }
      }
      else {
        sprintf(acStack_30,&DAT_OVRTitleScreenAndLoading__8006d578);
        uVar4 = 0;
        if (DAT_80067e14 == iVar3) {
          uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
        }
        pcVar2 = acStack_30;
      }
      DrawText_Right(pcVar2,0xd8,sVar5,uVar4 | 2);
      sVar5 = sVar5 + 0xe;
      iVar3 = iVar3 + 1;
      piVar6 = piVar6 + 1;
    } while (iVar3 < 3);
    uVar4 = 0;
    if (DAT_80067e14 == 3) {
      uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
    }
    pcVar2 = (&PTR_s_Cancel_80061b8c)[DAT_80067118];
    iVar3 = 0x80;
    sVar5 = 0x62;
    goto LAB_OVRTitleScreenAndLoading__800797cc;
  case 0xe:
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    uVar4 = 2;
    if ((DAT_80067e10 & 0x1f) < 0x16) {
      uVar4 = 3;
    }
    pcVar2 = (&PTR_s_Continue_80061b98)[DAT_80067118];
    iVar3 = 0xb8;
    sVar5 = 0x5f;
    break;
  case 0xf:
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077cec();
    FUN_OVRTitleScreenAndLoading__80077d40();
    uVar4 = 2;
    if ((DAT_80067e10 & 0x1f) < 0x16) {
      uVar4 = 3;
    }
    pcVar2 = (&PTR_s_Continue_80061b98)[DAT_80067118];
    iVar3 = 0xb8;
    sVar5 = 0x5f;
    break;
  case 0x10:
    FUN_OVRTitleScreenAndLoading__80077df8();
    FUN_OVRTitleScreenAndLoading__80077cec();
    DrawText_Center((&PTR_s_Overwrite__80061ba0)[DAT_80067118],0x80,0x38,2);
LAB_OVRTitleScreenAndLoading__80079730:
    uVar4 = 0;
    if (DAT_80067e14 == 0) {
      uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
    }
    DrawText_Center((&PTR_s_Yes_80061b80)[DAT_80067118],0x48,0x5f,uVar4 | 2);
    ppuVar1 = &PTR_s_No_80061b84;
LAB_OVRTitleScreenAndLoading__80079794:
    uVar4 = 0;
    if (DAT_80067e14 == 1) {
      uVar4 = (uint)((DAT_80067e10 & 0x1f) < 0x16);
    }
    pcVar2 = ppuVar1[DAT_80067118];
    iVar3 = 0xb8;
    sVar5 = 0x5f;
LAB_OVRTitleScreenAndLoading__800797cc:
    uVar4 = uVar4 | 2;
    break;
  default:
    goto switchD_OVRTitleScreenAndLoading__80079184_caseD_11;
  }
  DrawText_Center(pcVar2,iVar3,sVar5,uVar4);
switchD_OVRTitleScreenAndLoading__80079184_caseD_11:
                    // WARNING: Read-only address (ram,0x80067118) is written
  return;
}



void FUN_OVRTitleScreenAndLoading__80079804
               (undefined2 param_1,undefined2 param_2,undefined2 param_3,undefined2 param_4)

{
  undefined *puVar1;
  
  puVar1 = primitiveBuffer_next;
  *(undefined2 *)(primitiveBuffer_next + 8) = param_1;
  *(undefined2 *)(puVar1 + 0x10) = param_1;
  *(undefined2 *)(puVar1 + 0xc) = param_2;
  *(undefined2 *)(puVar1 + 0x14) = param_2;
  *(undefined4 *)puVar1 = 0x5000000;
  *(undefined4 *)(puVar1 + 4) = 0x2a202020;
  *(undefined2 *)(puVar1 + 10) = param_3;
  *(undefined2 *)(puVar1 + 0xe) = param_3;
  *(undefined2 *)(puVar1 + 0x12) = param_4;
  *(undefined2 *)(puVar1 + 0x16) = param_4;
  FUN_8001b354(puVar1,0x18);
  primitiveBuffer_next = puVar1 + 0x18;
  return;
}



void FUN_OVRTitleScreenAndLoading__80079878
               (undefined2 param_1,undefined2 param_2,int param_3,int param_4)

{
  undefined *puVar1;
  undefined uVar2;
  short sVar3;
  undefined4 uVar4;
  int tpage;
  byte *pbVar5;
  int iVar6;
  
  puVar1 = primitiveBuffer_next;
  iVar6 = 0x10;
  if (param_3 < 0x20) {
    pbVar5 = &DAT_80063f44 + param_3 * 6;
    iVar6 = (param_3 - 9U < 0xc ^ 1) << 4;
    tpage = (*pbVar5 >> 6) + 0x98;
  }
  else {
    pbVar5 = &DAT_80063f2c + param_3 * 6;
    tpage = (*pbVar5 >> 6) + 0x1c;
  }
  SetDrawMode((DR_MODE *)primitiveBuffer_next,1,0,tpage,(RECT *)0x0);
  FUN_8001b354(puVar1,iVar6);
  primitiveBuffer_next = puVar1 + 0xc;
  *(undefined4 *)(puVar1 + 0xc) = 0x4000000;
  if (param_4 == 0) {
    uVar4 = 0x64808080;
  }
  else if (param_4 == 1) {
    uVar4 = 0x6420e0e0;
  }
  else if (param_4 == 2) {
    uVar4 = 0x64606060;
  }
  else {
    uVar4 = 0x64d0d0d0;
  }
  *(undefined4 *)(puVar1 + 0x10) = uVar4;
  sVar3 = (pbVar5[2] & 0x7f) + (ushort)pbVar5[3] * 0x40 + 0x4020;
  *(short *)(puVar1 + 0x1a) = sVar3;
  if (param_3 >= 0x20) {
    *(short *)(puVar1 + 0x1a) = sVar3 + 0x10;
  }
  *(undefined2 *)(puVar1 + 0x14) = param_1;
  *(undefined2 *)(puVar1 + 0x16) = param_2;
  *(ushort *)(puVar1 + 0x1c) = (ushort)pbVar5[4];
  *(ushort *)(puVar1 + 0x1e) = (ushort)pbVar5[5];
  if (param_3 < 0x20) {
    uVar2 = (undefined)((*pbVar5 & 0x3f) << 1);
  }
  else {
    uVar2 = (undefined)((*pbVar5 & 0x3f) << 2);
  }
  puVar1[0x18] = uVar2;
  puVar1[0x19] = pbVar5[1];
  FUN_8001b354(puVar1 + 0xc,iVar6);
  primitiveBuffer_next = puVar1 + 0x20;
  return;
}



void FUN_OVRTitleScreenAndLoading__80079a58
               (short param_1,short param_2,int param_3,undefined4 param_4)

{
  char cVar1;
  short sVar2;
  short sVar3;
  undefined *puVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  
  puVar4 = primitiveBuffer_next;
  param_3 = param_3 * 6;
  iVar7 = (int)((byte)(&DAT_80063f48)[param_3] + 1) >> 1;
  iVar8 = (int)((byte)(&DAT_80063f49)[param_3] + 1) >> 1;
  iVar5 = sineLookup(param_4);
  iVar6 = cosineLookup(param_4);
  iVar9 = -iVar7 * iVar6;
  sVar2 = param_1 + (short)iVar7 + -1;
  *(undefined4 *)puVar4 = 0x9000000;
  *(undefined4 *)(puVar4 + 4) = 0x2c808080;
  iVar10 = -iVar7 * iVar5;
  sVar3 = param_2 + (short)iVar8 + -1;
  *(ushort *)(puVar4 + 0x16) = ((byte)(&DAT_80063f44)[param_3] >> 6) + 0x98;
  *(ushort *)(puVar4 + 0xe) =
       ((byte)(&DAT_80063f46)[param_3] & 0x7f) +
       (ushort)(byte)(&DAT_80063f47)[param_3] * 0x40 + 0x4020;
  iVar11 = -iVar8 * iVar5;
  *(short *)(puVar4 + 8) = sVar2 - (short)(iVar7 * iVar6 - iVar8 * iVar5 >> 0xc);
  *(short *)(puVar4 + 10) = sVar3 - (short)(iVar7 * iVar5 + iVar8 * iVar6 >> 0xc);
  *(short *)(puVar4 + 0x10) = sVar2 - (short)(iVar9 - iVar8 * iVar5 >> 0xc);
  iVar12 = -iVar8 * iVar6;
  *(short *)(puVar4 + 0x12) = sVar3 - (short)(iVar10 + iVar8 * iVar6 >> 0xc);
  *(short *)(puVar4 + 0x18) = sVar2 - (short)(iVar7 * iVar6 - iVar11 >> 0xc);
  *(short *)(puVar4 + 0x20) = sVar2 - (short)(iVar9 - iVar11 >> 0xc);
  *(short *)(puVar4 + 0x1a) = sVar3 - (short)(iVar7 * iVar5 + iVar12 >> 0xc);
  *(short *)(puVar4 + 0x22) = sVar3 - (short)(iVar10 + iVar12 >> 0xc);
  puVar4[0xc] = (char)(((byte)(&DAT_80063f44)[param_3] & 0x3f) << 1);
  puVar4[0xd] = (&DAT_80063f45)[param_3];
  cVar1 = (&DAT_80063f48)[param_3];
  puVar4[0x1c] = puVar4[0xc];
  puVar4[0x15] = puVar4[0xd];
  puVar4[0x14] = puVar4[0xc] + cVar1;
  puVar4[0x1d] = puVar4[0xd] + (&DAT_80063f49)[param_3] + -1;
  puVar4[0x24] = puVar4[0x14];
  puVar4[0x25] = puVar4[0x1d];
  FUN_8001b354(puVar4,0x10);
  primitiveBuffer_next = puVar4 + 0x28;
  return;
}



void FUN_OVRTitleScreenAndLoading__80079ca8(int param_1,undefined4 param_2)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar2 = (&DAT_80067e48)[param_1];
  bVar1 = 9 < iVar2;
  iVar4 = param_1 * 0x53 + 0x9d;
  if (bVar1) {
    iVar4 = param_1 * 0x53 + 0x95;
  }
  iVar3 = 0;
  if (99 < iVar2) {
    iVar4 = iVar4 + -8;
  }
  while (bVar1) {
    iVar2 = iVar2 / 10;
    bVar1 = 9 < iVar2;
    iVar3 = iVar3 + 1;
  }
  FUN_OVRTitleScreenAndLoading__80079878(iVar4 + (iVar3 + 1) * 0x10,0x10,0x1b,param_2);
  if (-1 < iVar3) {
    iVar2 = (&DAT_80067e48)[param_1];
    iVar4 = iVar3 * 0x10 + iVar4;
    do {
      iVar3 = iVar3 + -1;
      FUN_OVRTitleScreenAndLoading__80079878(iVar4,0x10,iVar2 % 10 + 0x11,param_2);
      iVar2 = iVar2 / 10;
      iVar4 = iVar4 + -0x10;
    } while (-1 < iVar3);
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__80079df0(void)

{
  char *pcVar1;
  bool bVar2;
  char cVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  undefined4 uVar9;
  undefined4 *puVar10;
  
  iVar5 = DAT_80067e0c;
  iVar4 = DAT_80067e04;
  DAT_80068c44 = DAT_80068c44 + deltaTime;
  if (0x653 < DAT_80068c44) {
    DAT_80068c44 = DAT_80068c44 + -0x24c;
  }
  if ((0x4af < DAT_80068c44) && (DAT_80068c44 - deltaTime < 0x4b0)) {
    FUN_800506ac(0,9,1);
  }
  DAT_80068c48 = DAT_80068c44 / 0x78;
  DAT_80068c4c = DAT_80068c44 % 0x78;
  if (blackOverlayOpacity != 0) {
    blackOverlayOpacity = blackOverlayOpacity + -0x10;
  }
  (&DAT_80068c70)[DAT_80068c48 & 1] = DAT_8006b290 + *(int *)(DAT_80068c48 * 4 + DAT_80068c5c);
  FUN_OVRTitleScreenAndLoading__8007490c();
  iVar8 = DAT_80068c44 + -0x154;
  if (0x153 < DAT_80068c44) {
    if (0x20 < iVar8) {
      iVar8 = 0x20;
    }
    VectorShort_80067ec8.Y = VectorShort_80067ec8.Y - (short)(iVar8 * 0x30 >> 5);
    VectorShort_80067ec8.Z = VectorShort_80067ec8.Z + (short)(iVar8 * 0x28 >> 5);
  }
  if ((0x1e0 < DAT_80068c44) && (DAT_8006831c != 1)) {
    FUN_80012c1c(DAT_80066d44 + DAT_80064dec,DAT_80066d44 + DAT_80064dec + (uint)DAT_80064df0,
                 DAT_80064df2);
  }
  iVar8 = DAT_80067e08;
  iVar6 = DAT_80067e2c;
  if (DAT_80067e04 == 1) {
    switch(DAT_80067e0c) {
    case 0:
      iVar8 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
      iVar6 = DAT_80067e2c;
      if (iVar8 == 0) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      if (DAT_80067e08 == 0) {
        FUN_OVRTitleScreenAndLoading__8007d080(0);
LAB_OVRTitleScreenAndLoading__8007a728:
        DAT_80067e08 = 1;
        iVar6 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      }
      if (DAT_80067e08 == 1) {
        DAT_80067e38 = DAT_80067e6c;
        if (DAT_80067e6c == 3) {
          DAT_80067e38 = 0;
        }
        bVar2 = DAT_80067e38 == 4;
        if (bVar2) {
          DAT_80067e38 = 0;
        }
        DAT_80067e40 = (uint)bVar2;
        FUN_OVRTitleScreenAndLoading__8007d080(0x10);
        DAT_80067e08 = 2;
        iVar6 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      }
      DAT_80067e3c = DAT_80067e6c;
      if (DAT_80067e6c == 3) {
        DAT_80067e3c = 0;
      }
      bVar2 = DAT_80067e3c == 4;
      if (bVar2) {
        DAT_80067e3c = 0;
      }
      DAT_80067e44 = (uint)bVar2;
      if (DAT_80067e38 == 0) {
        if (DAT_80067e3c == 0) {
          uVar9 = 3;
          DAT_80067e30 = 2;
          DAT_80067e0c = 4;
          DAT_80067e14 = 0;
        }
        else {
          DAT_80067e30 = 0;
LAB_OVRTitleScreenAndLoading__8007a650:
          if ((&DAT_80067e40)[DAT_80067e30] == 0) {
            DAT_80067e0c = 1;
            DAT_80067e08 = 0;
            DAT_80067e2c = 0;
            DAT_80067e14 = 0;
            iVar6 = DAT_80067e2c;
            goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          }
          uVar9 = 3;
          DAT_80067e0c = 9;
          DAT_80067e14 = 0;
        }
      }
      else {
        if (DAT_80067e3c == 0) {
          DAT_80067e30 = 1;
          goto LAB_OVRTitleScreenAndLoading__8007a650;
        }
        uVar9 = 3;
        DAT_80067e30 = -1;
        DAT_80067e0c = 2;
        DAT_80067e14 = 0;
      }
      break;
    case 1:
      iVar7 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
      iVar8 = DAT_80067e08;
      iVar6 = DAT_80067e2c;
      if (iVar7 == 0) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      if (DAT_80067e08 == 0) {
        FUN_OVRTitleScreenAndLoading__8007d778
                  (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,0,0x1400);
        goto LAB_OVRTitleScreenAndLoading__8007a728;
      }
      if (DAT_80067e08 != 1) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      if (DAT_80067e6c == 0) {
        FUN_OVRTitleScreenAndLoading__80076cd4(DAT_80067e70 + 0x200);
        FUN_OVRTitleScreenAndLoading__80076e70(DAT_80067e70 + 0x200);
        iVar6 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x200);
        if (((iVar6 == 0) ||
            (iVar6 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x800), iVar6 == 0)) ||
           (iVar6 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0xe00), iVar6 == 0)) {
          if (DAT_80067e2c < 3) {
            DAT_80067e08 = 0;
            iVar6 = DAT_80067e2c + 1;
            goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          }
          iVar8 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x200);
          if (iVar8 == 0) {
            DAT_80067e54 = FUN_OVRTitleScreenAndLoading__800766a0(DAT_80067e70 + 0x200);
          }
          iVar8 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x800);
          if (iVar8 == 0) {
            DAT_80067e58 = FUN_OVRTitleScreenAndLoading__800766a0(DAT_80067e70 + 0x800);
          }
          iVar8 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0xe00);
          if (iVar8 == 0) {
            DAT_80067e5c = FUN_OVRTitleScreenAndLoading__800766a0(DAT_80067e70 + 0xe00);
          }
          FUN_OVRTitleScreenAndLoading__80076cd4(DAT_80067e70 + 0x200);
          uVar9 = 4;
          DAT_80067e04 = 2;
          DAT_80067e0c = 0;
          DAT_80067e60 = 0;
          DAT_800670c8 = 1;
        }
        else {
          uVar9 = 4;
          DAT_80067e04 = 2;
          DAT_80067e0c = 0;
          DAT_80067e60 = 0;
          DAT_800670c8 = iVar8;
        }
      }
      else if (DAT_80067e6c == 5) {
        uVar9 = 3;
        DAT_80067e0c = 9;
        DAT_80067e14 = 0;
      }
      else {
        if (DAT_80067e2c < 3) {
          DAT_80067e08 = 0;
          iVar6 = DAT_80067e2c + 1;
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        }
        uVar9 = 3;
        DAT_80067e0c = 3;
        DAT_80067e14 = 0;
      }
      break;
    case 2:
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar8 = FUN_OVRTitleScreenAndLoading__80077068();
      if (iVar8 == 0) {
        iVar6 = DAT_80067e2c;
        if ((DAT_80067e10 < 4) ||
           (iVar8 = FUN_OVRTitleScreenAndLoading__80077190(0), iVar6 = DAT_80067e2c, iVar8 != 0))
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
          if ((inputStates[0].pressed & (Cross|Start)) == None)
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          if (DAT_80067e14 == 0) {
LAB_OVRTitleScreenAndLoading__8007ab00:
            initNewGame(0);
            DAT_80067e20 = 0;
            DAT_80067e28 = -1;
            FUN_OVRTitleScreenAndLoading__800771fc(1);
            iVar6 = DAT_80067e2c;
            goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          }
          DAT_80067e0c = 0;
          DAT_80067e08 = 0;
          FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
          uVar9 = 2;
        }
        else {
          uVar9 = 0;
          DAT_80067e10 = 0x10;
          DAT_80067e14 = 1 - DAT_80067e14;
        }
      }
      else {
        uVar9 = 2;
      }
      break;
    case 3:
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar8 = FUN_OVRTitleScreenAndLoading__80077068();
      if (iVar8 == 0) {
        iVar6 = DAT_80067e2c;
        if ((DAT_80067e10 < 4) ||
           (iVar8 = FUN_OVRTitleScreenAndLoading__80077190(0), iVar6 = DAT_80067e2c, iVar8 != 0))
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
          if ((inputStates[0].pressed & (Cross|Start)) == None)
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          if (DAT_80067e14 == 0) goto LAB_OVRTitleScreenAndLoading__8007ab00;
          DAT_80067e0c = 0;
          DAT_80067e08 = 0;
          FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
          uVar9 = 2;
        }
        else {
          uVar9 = 0;
          DAT_80067e10 = 0x10;
          DAT_80067e14 = 1 - DAT_80067e14;
        }
      }
      else {
        uVar9 = 2;
      }
      break;
    case 4:
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar8 = FUN_OVRTitleScreenAndLoading__80077068();
      if (iVar8 == 0) {
        iVar6 = DAT_80067e2c;
        if ((DAT_80067e10 < 4) ||
           (iVar8 = FUN_OVRTitleScreenAndLoading__80077190(0), iVar6 = DAT_80067e2c, iVar8 != 0))
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
          if ((inputStates[0].pressed & (Cross|Start)) == None)
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          DAT_80067e30 = DAT_80067e14;
          if ((&DAT_80067e40)[DAT_80067e14] == 0) {
            DAT_80067e0c = 1;
            DAT_80067e08 = 0;
            DAT_80067e2c = 0;
            DAT_80067e14 = 1;
            FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
            uVar9 = 1;
          }
          else {
            DAT_80067e0c = 9;
            DAT_80067e14 = 0;
            FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
            uVar9 = 3;
          }
        }
        else {
          uVar9 = 0;
          DAT_80067e10 = 0x10;
          DAT_80067e14 = 1 - DAT_80067e14;
        }
      }
      else {
        uVar9 = 2;
      }
      break;
    case 5:
    case 6:
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar8 = FUN_OVRTitleScreenAndLoading__80077068();
      if (iVar8 == 0) {
        iVar6 = DAT_80067e2c;
        if ((DAT_80067e10 < 4) ||
           (iVar8 = FUN_OVRTitleScreenAndLoading__80077190(0), iVar6 = DAT_80067e2c, iVar8 != 0))
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
          if ((inputStates[0].pressed & (Cross|Start)) == None)
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          if (DAT_80067e14 == 0) {
            DAT_80067e0c = 7;
            DAT_80067e2c = 0;
          }
          else {
            DAT_80067e0c = 0;
          }
          DAT_80067e08 = 0;
          FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
          uVar9 = 2;
        }
        else {
          uVar9 = 0;
          DAT_80067e10 = 0x10;
          DAT_80067e14 = 1 - DAT_80067e14;
        }
      }
      else {
        uVar9 = 2;
      }
      break;
    case 7:
      if (DAT_80067e10 < 2) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      if (DAT_80067e08 == 0) {
        iVar8 = FUN_OVRTitleScreenAndLoading__8007df54(DAT_80067e30 << 4);
        if ((iVar8 == 0) || (iVar6 = DAT_80067e2c + 1, 2 < DAT_80067e2c)) {
          FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e30 << 4);
          DAT_80067e08 = 1;
          DAT_80067e2c = 0;
          iVar6 = DAT_80067e2c;
        }
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      }
      if ((DAT_80067e08 != 1) ||
         (iVar7 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c),
         iVar6 = DAT_80067e2c, iVar7 == 0)) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      if (DAT_80067e6c != 0) {
        if (DAT_80067e2c < 3) {
          FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e30 << 4);
          iVar6 = DAT_80067e2c + 1;
        }
        else {
          DAT_80067e0c = 8;
          DAT_80067e14 = iVar8;
        }
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      }
      (&DAT_80067e38)[DAT_80067e30] = 0;
      (&DAT_80067e40)[DAT_80067e30] = 0;
      DAT_80067e0c = 10;
      DAT_80067e08 = 0;
      DAT_80067e2c = 0;
      FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e30 << 4);
      uVar9 = 2;
      break;
    case 8:
      if (DAT_80067e10 == 1) {
        FUN_800506ac(0,5,1);
      }
      iVar6 = DAT_80067e2c;
      if (DAT_80067e10 < 0x40) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar8 = FUN_OVRTitleScreenAndLoading__80077068();
      if (iVar8 == 0) {
        iVar6 = DAT_80067e2c;
        if ((DAT_80067e10 < 0x48) ||
           (iVar8 = FUN_OVRTitleScreenAndLoading__80077190(0), iVar6 = DAT_80067e2c, iVar8 != 0))
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
          if ((inputStates[0].pressed & (Cross|Start)) == None)
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          if (DAT_80067e14 == 0) {
            DAT_80067e0c = 7;
            DAT_80067e08 = 0;
            DAT_80067e2c = 0;
            FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
            uVar9 = 2;
          }
          else {
            DAT_80067e0c = 3;
            DAT_80067e14 = 0;
            FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
            uVar9 = 3;
          }
        }
        else {
          uVar9 = 0;
          DAT_80067e10 = 0x50;
          DAT_80067e14 = 1 - DAT_80067e14;
        }
      }
      else {
        uVar9 = 2;
      }
      break;
    case 9:
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar8 = FUN_OVRTitleScreenAndLoading__80077068();
      if (iVar8 == 0) {
        iVar6 = DAT_80067e2c;
        if ((DAT_80067e10 < 4) ||
           (iVar8 = FUN_OVRTitleScreenAndLoading__80077190(0), iVar6 = DAT_80067e2c, iVar8 != 0))
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
          if ((inputStates[0].pressed & (Cross|Start)) == None)
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          if (DAT_80067e14 == 0) {
            if ((&DAT_80067e40)[DAT_80067e30] == 0) {
              DAT_80067e0c = 10;
              DAT_80067e08 = 0;
              DAT_80067e2c = 0;
              FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
              FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e30 << 4);
              uVar9 = 2;
            }
            else {
              DAT_80067e0c = 5;
              DAT_80067e14 = 1;
              FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
              uVar9 = 3;
            }
          }
          else {
            DAT_80067e0c = 3;
            DAT_80067e14 = 0;
            FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
            uVar9 = 3;
          }
        }
        else {
          uVar9 = 0;
          DAT_80067e10 = 0x10;
          DAT_80067e14 = 1 - DAT_80067e14;
        }
      }
      else {
        uVar9 = 2;
      }
      break;
    case 10:
      if (DAT_80067e08 == 0) {
        iVar8 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
        iVar6 = DAT_80067e2c;
        if (iVar8 == 0) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        if ((DAT_80067e6c == 0) || (DAT_80067e6c == 3)) {
          DAT_80067e08 = 1;
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        }
        iVar8 = DAT_80067e2c + 1;
        if (DAT_80067e2c < 3) {
LAB_OVRTitleScreenAndLoading__8007b658:
          DAT_80067e2c = iVar8;
          FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e30 << 4);
          iVar6 = DAT_80067e2c;
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        }
        uVar9 = 5;
        DAT_80067e0c = 0xc;
        DAT_80067e14 = 0;
      }
      else if (DAT_80067e08 == 1) {
        DAT_80067e6c = FUN_OVRTitleScreenAndLoading__8007dd58
                                 (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,1);
        iVar8 = DAT_80067e70;
        if ((DAT_80067e6c == 0) || (DAT_80067e6c == 6)) {
          iVar6 = 0;
          puVar10 = &DAT_80067e54;
          MemCopy(DAT_80067e70,&DAT_8006410c,0x200);
          iVar8 = iVar8 + 0x200;
          do {
            uVar9 = FUN_OVRTitleScreenAndLoading__800766a0(iVar8);
            *puVar10 = uVar9;
            puVar10 = puVar10 + 1;
            iVar6 = iVar6 + 1;
            iVar8 = iVar8 + 0x600;
          } while (iVar6 < 3);
          FUN_OVRTitleScreenAndLoading__8007d9d0
                    (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,0,0x1400);
          DAT_80067140 = 0;
          DAT_80067e08 = 2;
          iVar6 = DAT_80067e2c;
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        }
        if (DAT_80067e6c == 7) {
          uVar9 = 5;
          DAT_80067e0c = 0xb;
          DAT_80067e14 = 0;
        }
        else {
          uVar9 = 5;
          if (DAT_80067e2c < 3) goto LAB_OVRTitleScreenAndLoading__8007b64c;
          DAT_80067e0c = 0xc;
          DAT_80067e14 = 0;
        }
      }
      else if (DAT_80067e08 == 2) {
        iVar8 = FUN_OVRTitleScreenAndLoading__8007dc3c(1,&DAT_80067e68,&DAT_80067e6c);
        iVar6 = DAT_80067e2c;
        if (iVar8 == 0) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        if (DAT_80067e6c == 0) {
          FUN_OVRTitleScreenAndLoading__8007d778
                    (DAT_80067e30 << 4,PTR_s_BASCUS_94425SP2RR_80066e6c,DAT_80067e70,0,0x1400);
          DAT_80067e08 = 3;
          iVar6 = DAT_80067e2c;
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        }
        if (DAT_80067e2c < 3) goto LAB_OVRTitleScreenAndLoading__8007b64c;
        uVar9 = 5;
        DAT_80067e0c = 0xc;
        DAT_80067e14 = 0;
      }
      else if (DAT_80067e6c == 0) {
        FUN_OVRTitleScreenAndLoading__80076cd4(DAT_80067e70 + 0x200);
        FUN_OVRTitleScreenAndLoading__80076e70(DAT_80067e70 + 0x200);
        iVar8 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x200);
        if (((iVar8 == 0) ||
            (iVar8 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x800), iVar8 == 0)) ||
           (iVar8 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0xe00), iVar8 == 0)) {
          if (DAT_80067e2c < 3) {
            DAT_80067e08 = 0;
            iVar8 = DAT_80067e2c + 1;
            goto LAB_OVRTitleScreenAndLoading__8007b658;
          }
          iVar8 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x200);
          if (iVar8 == 0) {
            DAT_80067e54 = FUN_OVRTitleScreenAndLoading__800766a0(DAT_80067e70 + 0x200);
          }
          iVar8 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0x800);
          if (iVar8 == 0) {
            DAT_80067e58 = FUN_OVRTitleScreenAndLoading__800766a0(DAT_80067e70 + 0x800);
          }
          iVar8 = FUN_OVRTitleScreenAndLoading__8007663c(DAT_80067e70 + 0xe00);
          if (iVar8 == 0) {
            DAT_80067e5c = FUN_OVRTitleScreenAndLoading__800766a0(DAT_80067e70 + 0xe00);
          }
          FUN_OVRTitleScreenAndLoading__80076cd4(DAT_80067e70 + 0x200);
          uVar9 = 4;
          DAT_80067e04 = 2;
          DAT_80067e0c = 0;
          DAT_80067e60 = 1;
          DAT_800670c8 = 1;
        }
        else {
          uVar9 = 4;
          DAT_80067e04 = 2;
          DAT_80067e0c = 0;
          DAT_80067e60 = 1;
          DAT_800670c8 = 1;
        }
      }
      else {
        if (DAT_80067e2c < 3) {
LAB_OVRTitleScreenAndLoading__8007b64c:
          DAT_80067e08 = 0;
          iVar8 = DAT_80067e2c + 1;
          goto LAB_OVRTitleScreenAndLoading__8007b658;
        }
        uVar9 = 5;
        DAT_80067e0c = 0xc;
        DAT_80067e14 = 0;
      }
      break;
    case 0xb:
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar8 = FUN_OVRTitleScreenAndLoading__80077068();
      if (iVar8 == 0) {
        iVar6 = DAT_80067e2c;
        if (((DAT_80067e10 < 4) ||
            (iVar8 = FUN_OVRTitleScreenAndLoading__80077190(0), iVar6 = DAT_80067e2c, iVar8 != 0))
           || ((inputStates[0].pressed & (Cross|Start)) == None))
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        DAT_80067e0c = 3;
        DAT_80067e14 = 0;
        FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
        uVar9 = 3;
      }
      else {
        uVar9 = 2;
      }
      break;
    case 0xc:
      if (DAT_80067e10 < 0x40) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      FUN_OVRTitleScreenAndLoading__80076fd8();
      iVar8 = FUN_OVRTitleScreenAndLoading__80077068();
      if (iVar8 == 0) {
        iVar6 = DAT_80067e2c;
        if ((DAT_80067e10 < 0x48) ||
           (iVar8 = FUN_OVRTitleScreenAndLoading__80077190(0), iVar6 = DAT_80067e2c, iVar8 != 0))
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
        if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
          if ((inputStates[0].pressed & (Cross|Start)) == None)
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          if (DAT_80067e14 == 0) {
            DAT_80067e0c = 10;
            DAT_80067e08 = 0;
            DAT_80067e2c = 0;
            FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
            FUN_OVRTitleScreenAndLoading__8007d080(DAT_80067e30 << 4);
            uVar9 = 2;
          }
          else {
            DAT_80067e0c = 3;
            DAT_80067e14 = 0;
            FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
            uVar9 = 3;
          }
        }
        else {
          uVar9 = 0;
          DAT_80067e10 = 0x50;
          DAT_80067e14 = 1 - DAT_80067e14;
        }
      }
      else {
        uVar9 = 2;
      }
      break;
    default:
      goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
    }
    goto LAB_OVRTitleScreenAndLoading__8007bf3c;
  }
  if (DAT_80067e04 < 2) {
    if (DAT_80067e04 != 0) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
    if (DAT_80067e0c == 0) {
      if ((DAT_80068c44 < 0x1e0) && ((inputStates[0].pressed & (Cross|Start)) != None)) {
        FUN_80050aac();
        FUN_800506ac(0,4,0x41);
        *DAT_80067068 = 0x42d70;
        DAT_80068c7c = PlayAudio(0,0,0x40);
        DAT_80068c44 = 0x294;
      }
      iVar6 = DAT_80067e2c;
      if (0x293 < DAT_80068c44) {
        DAT_80067e0c = 1;
        DAT_80067e00 = 0;
      }
      goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
    }
    if (DAT_80067e0c == 1) {
      if (0xe < DAT_80067e00) {
        DAT_80067e0c = 2;
        maybeTitleDemoTimer = 0;
        DAT_80067e00 = 0;
        DAT_80067e14 = 0;
      }
      goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
    }
    if (DAT_80067e0c == 2) {
      if (DAT_80068c44 < 0x348) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      if (DAT_80068c44 - deltaTime < 0x348) {
        FUN_80050aac();
        MemCopy(DAT_80067068,&DAT_80068c80,0x14);
      }
      iVar6 = DAT_80067e2c;
      if (DAT_80068c44 < 0x348) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      if (inputStates[0].current == (TriggerRight|BumperLeft|Square)) {
        FUN_80050aac();
        FUN_80050d38();
        FUN_8004d810();
        FUN_OVRTitleScreenAndLoading__8007cbd0();
        iVar6 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      }
      DAT_80067e00 = DAT_80067e00 + 1;
      if ((inputStates[0].pressed & (Cross|Start)) != None) {
        DAT_80067e0c = 3;
        DAT_80067e00 = 0;
      }
      maybeTitleDemoTimer = maybeTitleDemoTimer + 1;
      if (maybeTitleDemoTimer < 900) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      uVar9 = 8;
      DAT_80067e0c = 6;
      DAT_80067e00 = 0;
    }
    else if (DAT_80067e0c == 3) {
      if (DAT_80067e00 == 1) {
        uVar9 = 6;
LAB_OVRTitleScreenAndLoading__8007a28c:
        FUN_800506ac(0,uVar9,1);
      }
      else if (DAT_80067e00 == 0xd) {
        uVar9 = 7;
        goto LAB_OVRTitleScreenAndLoading__8007a28c;
      }
      iVar6 = DAT_80067e2c;
      if (DAT_80067e00 < 0x1b) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      FUN_OVRTitleScreenAndLoading__8007cc68();
      uVar9 = 2;
      DAT_80067e04 = 1;
      DAT_80067e0c = 0;
      DAT_80067e08 = 0;
      DAT_80067e70 = DAT_80067174 + -0x1400;
    }
    else {
      if (DAT_80067e0c != 4) {
        if (DAT_80067e0c == 5) {
          if (0xb < DAT_80067e00) {
            FUN_OVRTitleScreenAndLoading__800741a0();
            FUN_OVRTitleScreenAndLoading__8007dc3c(0,&DAT_80067e68,&DAT_80067e6c);
            FUN_OVRTitleScreenAndLoading__8007ccd8();
            FUN_80019230(DAT_80067e14);
            iVar6 = DAT_80067e2c;
          }
        }
        else if ((DAT_80067e0c == 6) && (0xb < DAT_80067e00)) {
          FUN_OVRTitleScreenAndLoading__800741a0();
          initNewGame();
          FUN_80019230(0x11);
          DAT_800670e4 = (uint)cheatFireball;
          cheatFireball = 0;
          DAT_80067178 = 0;
          DAT_80067e20 = 0;
          currentLoadedLevel = (LoadedLevelID)(byte)(&DAT_800647a4)[DAT_80066d40];
          pcVar1 = &DAT_800647a5 + DAT_80066d40;
          DAT_80066d40 = DAT_80066d40 + 1;
          if (*pcVar1 == -1) {
            DAT_80066d40 = 0;
          }
          DAT_80067024 = 1;
          DAT_80066f28 = &DAT_80100000;
          DAT_80066f04 = &DAT_80100004;
          iVar6 = DAT_80067e2c;
        }
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      }
      if (DAT_80067e00 != 1) {
        if (10 < DAT_80067e00) {
          DAT_80067e0c = 1;
          DAT_80067e00 = 0;
        }
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      }
      uVar9 = 8;
    }
    goto LAB_OVRTitleScreenAndLoading__8007bf3c;
  }
  if (DAT_80067e04 != 2) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
  FUN_OVRTitleScreenAndLoading__80076fd8();
  iVar6 = FUN_OVRTitleScreenAndLoading__80077068();
  iVar8 = DAT_80067e14;
  if (iVar6 != 0) {
    uVar9 = 2;
    goto LAB_OVRTitleScreenAndLoading__8007bf3c;
  }
  iVar6 = DAT_80067e2c;
  switch(DAT_80067e0c) {
  case 0:
    DAT_80067e78 = DAT_80067e70 + 0x200;
    DAT_80067e7c = DAT_80067e70 + 0x800;
    DAT_80067e80 = DAT_80067e70 + 0xe00;
    if (((*(char *)(DAT_80067e70 + 0x211) == '\0') && (*(char *)(DAT_80067e70 + 0x811) == '\0')) &&
       (*(char *)(DAT_80067e70 + 0xe11) == '\0')) {
      DAT_80067e64 = 0;
    }
    else {
      DAT_80067e64 = 1;
    }
    DAT_80067e0c = 1;
    if ((DAT_80067e60 == 1) || (DAT_80067e64 == 0)) {
      DAT_80067e14 = 0;
    }
    else {
      DAT_80067e14 = 1;
    }
    DAT_800670c8 = 1;
    goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
  case 1:
    if ((DAT_80067e10 < 4) ||
       (iVar8 = FUN_OVRTitleScreenAndLoading__80077190(0), iVar6 = DAT_80067e2c, iVar8 != 0))
    goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
    if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
      if ((inputStates[0].pressed & (Cross|Start|DPadUp)) == None)
      goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      if (DAT_80067e14 == 0) {
        DAT_80067e0c = 3;
        DAT_80067e14 = 0;
        do {
          if (*(char *)((&DAT_80067e78)[DAT_80067e14] + 0x11) == '\0') break;
          DAT_80067e14 = DAT_80067e14 + 1;
        } while (DAT_80067e14 < 3);
        if (DAT_80067e14 == 3) {
          DAT_80067e14 = 0;
        }
      }
      else {
        DAT_80067e0c = 2;
        DAT_80067e14 = 0;
        if (*(char *)(DAT_80067e78 + 0x11) == '\0') {
          DAT_80067e14 = 1;
          cVar3 = *(char *)(DAT_80067e7c + 0x11);
          while ((cVar3 == '\0' && (DAT_80067e14 = DAT_80067e14 + 1, DAT_80067e14 < 3))) {
            cVar3 = *(char *)((&DAT_80067e78)[DAT_80067e14] + 0x11);
          }
        }
      }
      uVar9 = 1;
    }
    else if (DAT_80067e14 == 1) {
      uVar9 = 0;
      DAT_80067e14 = 0;
      DAT_80067e10 = 0x10;
    }
    else {
      if ((DAT_80067e14 != 0) || (DAT_80067e64 == 0))
      goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      uVar9 = 0;
      DAT_80067e14 = 1;
      DAT_80067e10 = 0x10;
    }
    break;
  case 2:
    if (DAT_80067e10 < 4) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
    if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
      if ((inputStates[0].pressed & (Cross|Start)) != None) {
        FUN_OVRTitleScreenAndLoading__800769bc((&DAT_80067e78)[DAT_80067e14]);
        DAT_80067e24 = DAT_80067e14;
        uVar9 = 0;
LAB_OVRTitleScreenAndLoading__8007bf00:
        DAT_80067e20 = 1;
        DAT_80067e28 = DAT_80067e30;
        FUN_OVRTitleScreenAndLoading__800771fc(uVar9);
        iVar6 = DAT_80067e2c;
        goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      }
      if ((inputStates[0].pressed & (Triangle|DPadDown)) == None)
      goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      uVar9 = 1;
      DAT_80067e0c = 1;
      DAT_80067e14 = 1;
    }
    else {
      iVar7 = 1;
      if ((inputStates[0].pressed & DPadLeft) != None) {
        iVar7 = -1;
      }
      do {
        DAT_80067e14 = DAT_80067e14 + iVar7;
        if (DAT_80067e14 < 0) {
          DAT_80067e14 = 2;
        }
        if (2 < DAT_80067e14) {
          DAT_80067e14 = 0;
        }
      } while (*(char *)((&DAT_80067e78)[DAT_80067e14] + 0x11) == '\0');
      if (DAT_80067e14 == iVar8) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      DAT_80067e10 = 0x10;
      uVar9 = 0;
    }
    break;
  case 3:
    if (DAT_80067e10 < 4) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
    if ((inputStates[0].pressed & DPadLeft) == None) {
      if ((inputStates[0].pressed & DPadRight) == None) {
        if ((inputStates[0].pressed & (Cross|Start)) == None) {
          if ((inputStates[0].pressed & (Triangle|DPadDown)) == None)
          goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
          uVar9 = 1;
          DAT_80067e0c = 1;
          DAT_80067e14 = 0;
        }
        else {
          if (*(char *)((&DAT_80067e78)[DAT_80067e14] + 0x11) == '\0') {
            initNewGame(0);
            DAT_80067e24 = DAT_80067e14;
LAB_OVRTitleScreenAndLoading__8007bee4:
            uVar9 = 1;
            goto LAB_OVRTitleScreenAndLoading__8007bf00;
          }
          uVar9 = 3;
          DAT_80067e0c = 4;
          DAT_80067e08 = DAT_80067e14;
          DAT_80067e14 = 1;
        }
      }
      else {
        DAT_80067e14 = DAT_80067e14 + 1;
        if (2 < DAT_80067e14) {
          DAT_80067e14 = 0;
        }
        DAT_80067e10 = 0x10;
        uVar9 = 0;
      }
    }
    else {
      DAT_80067e14 = DAT_80067e14 + -1;
      if (DAT_80067e14 < 0) {
        DAT_80067e14 = 2;
      }
      DAT_80067e10 = 0x10;
      uVar9 = 0;
    }
    break;
  case 4:
    if (DAT_80067e10 < 4) goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
    if ((inputStates[0].pressed & Triangle) != None) {
      DAT_80067e0c = 3;
      DAT_80067e14 = DAT_80067e08;
      goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
    }
    if ((inputStates[0].pressed & (DPadRight|DPadLeft)) == None) {
      if ((inputStates[0].pressed & (Cross|Start)) == None)
      goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
      if (DAT_80067e14 == 0) {
        initNewGame(0);
        DAT_80067e24 = DAT_80067e08;
        goto LAB_OVRTitleScreenAndLoading__8007bee4;
      }
      uVar9 = 1;
      DAT_80067e0c = 3;
      DAT_80067e14 = DAT_80067e08;
    }
    else {
      uVar9 = 0;
      DAT_80067e10 = 0x10;
      DAT_80067e14 = 1 - DAT_80067e14;
    }
    break;
  default:
    goto switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5;
  }
LAB_OVRTitleScreenAndLoading__8007bf3c:
  FUN_800506ac(0,uVar9,1);
  iVar6 = DAT_80067e2c;
switchD_OVRTitleScreenAndLoading__8007b8ac_caseD_5:
  DAT_80067e2c = iVar6;
  DAT_80067e00 = DAT_80067e00 + 1;
  if ((DAT_80067e04 == iVar4) && (DAT_80067e0c == iVar5)) {
    DAT_80067e10 = DAT_80067e10 + 1;
  }
  else {
    DAT_80067e10 = 0;
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__8007bfc4(void)

{
  undefined4 uVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  byte bVar5;
  bool bVar6;
  uint uVar7;
  int iVar8;
  
  SelectRender(Objects|World|Skybox);
  if (DAT_80067e04 != 1) {
    if (DAT_80067e04 < 2) {
      if (DAT_80067e04 != 0) {
        return;
      }
      if (DAT_80067e0c == 1) {
        uVar1 = 0x80;
        uVar3 = 0;
        bVar5 = 0;
        iVar2 = 10 - (char)(&DAT_800640f0)[DAT_80067e00];
      }
      else if (DAT_80067e0c == 2) {
        if (DAT_80068c44 - 0x300U < 0x38) {
          uVar7 = 0x33c - DAT_80068c44 >> 1;
          if ((uVar7 & 1) != 0) {
            uVar7 = -uVar7;
          }
          FUN_OVRTitleScreenAndLoading__80079a58(0x80,10,0,uVar7 << 1);
        }
        else {
          FUN_OVRTitleScreenAndLoading__80079878(0x80,10,0,0);
        }
        uVar1 = 0xc0;
        if (DAT_80068c44 < 0x348) {
          return;
        }
        iVar2 = 0xcb;
        uVar3 = 0xb;
        bVar5 = -((DAT_80067e00 & 0x1f) < 0x15) & 3;
      }
      else if (DAT_80067e0c == 3) {
        uVar1 = 0x80;
        if ((int)DAT_80067e00 < 0xc) {
          uVar3 = 0;
          bVar5 = 0;
          iVar2 = 10 - (char)(&DAT_80064100)[DAT_80067e00];
        }
        else {
          FUN_OVRTitleScreenAndLoading__80079804
                    (0x78,0x188,0xc - (char)(&DAT_800640e4)[DAT_80067e00],
                     100 - (char)(&DAT_800640e4)[DAT_80067e00]);
          FUN_OVRTitleScreenAndLoading__80079878(0x60,4 - (char)(&DAT_800640e4)[DAT_80067e00],1,0);
          uVar1 = 0x100;
          uVar3 = 2;
          bVar5 = 0;
          iVar2 = 4 - (char)(&DAT_800640e4)[DAT_80067e00];
        }
      }
      else if (DAT_80067e0c - 4U < 2) {
        FUN_OVRTitleScreenAndLoading__80079804
                  (0x78,0x188,0xc - (char)(&DAT_80064100)[DAT_80067e00],
                   100 - (char)(&DAT_80064100)[DAT_80067e00]);
        FUN_OVRTitleScreenAndLoading__80079878(0x60,4 - (char)(&DAT_80064100)[DAT_80067e00],1,0);
        uVar1 = 0x100;
        uVar3 = 2;
        bVar5 = 0;
        iVar2 = 4 - (char)(&DAT_80064100)[DAT_80067e00];
      }
      else {
        uVar1 = 0x80;
        if (DAT_80067e0c != 6) {
          return;
        }
        uVar3 = 0;
        bVar5 = 0;
        iVar2 = 10 - (char)(&DAT_80064100)[DAT_80067e00];
      }
    }
    else {
      if (DAT_80067e04 != 2) {
        return;
      }
      FUN_OVRTitleScreenAndLoading__80079804(0x78,0x188,0xc,100);
      FUN_OVRTitleScreenAndLoading__80079878(0x60,4,1,0);
      FUN_OVRTitleScreenAndLoading__80079878(0x100,4,2,0);
      iVar8 = 0;
      iVar2 = 0x85;
      do {
        uVar1 = 0;
        if ((1 < DAT_80067e0c - 2U) || (DAT_80067e14 != iVar8)) {
          uVar1 = 2;
        }
        FUN_OVRTitleScreenAndLoading__80079ca8(iVar8,uVar1);
        if (((byte *)(&DAT_80067e78)[iVar8])[0x11] == 0) {
          iVar4 = 6;
        }
        else {
          iVar4 = (int)(*(byte *)(&DAT_80067e78)[iVar8] - 10) / 0x14 + 3;
        }
        FUN_OVRTitleScreenAndLoading__80079878(iVar2,0x1f,iVar4,uVar1);
        iVar8 = iVar8 + 1;
        iVar2 = iVar2 + 0x53;
      } while (iVar8 < 3);
      if ((DAT_80067e0c - 2U < 2) && ((DAT_80067e10 & 0xf) < 0xb)) {
        FUN_OVRTitleScreenAndLoading__80079878(DAT_80067e14 * 0x53 + 0x85,0x1f,7,0);
      }
      if (DAT_80067e0c == 1) {
        FUN_OVRTitleScreenAndLoading__80077e3c();
        bVar6 = false;
        if (DAT_80067e14 == 0) {
          bVar6 = (DAT_80067e10 & 0xf) < 0xb;
        }
        FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x48,bVar6);
        bVar5 = false;
        if (DAT_80067e14 == 1) {
          bVar5 = (DAT_80067e10 & 0xf) < 0xb;
        }
        uVar1 = 0x100;
        iVar2 = 0x55;
        uVar3 = 0x49;
      }
      else if (DAT_80067e0c == 2) {
        FUN_OVRTitleScreenAndLoading__80079878(0x80,0x68,0x3f,0);
        FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x48,0);
        uVar1 = 0x100;
        iVar2 = 0x55;
        uVar3 = 0x49;
        bVar5 = 1;
      }
      else {
        if (DAT_80067e0c != 3) {
          if (DAT_80067e0c != 4) {
            return;
          }
          FUN_OVRTitleScreenAndLoading__80079878(DAT_80067e08 * 0x53 + 0x85,0x1f,8,0);
          FUN_OVRTitleScreenAndLoading__80079878(DAT_80067e08 * 0x53 + 0x85,0x1f,7,0);
          bVar6 = false;
          if (DAT_80067e14 == 0) {
            bVar6 = (DAT_80067e10 & 0xf) < 0xb;
          }
          FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x4a,bVar6);
          goto joined_r0x8007cb30;
        }
        FUN_OVRTitleScreenAndLoading__80079878(0x80,0x68,0x3e,0);
        FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x48,1);
        uVar1 = 0x100;
        iVar2 = 0x55;
        uVar3 = 0x49;
        bVar5 = 0;
      }
    }
    goto LAB_OVRTitleScreenAndLoading__8007cb58;
  }
  FUN_OVRTitleScreenAndLoading__80079804(0x78,0x188,0xc,100);
  FUN_OVRTitleScreenAndLoading__80079878(0x60,4,1,0);
  FUN_OVRTitleScreenAndLoading__80079878(0x100,4,2,0);
  switch(DAT_80067e0c) {
  case 0:
    uVar1 = 0x80;
    if (DAT_80067118 != 0) {
      return;
    }
    iVar2 = 0x2b;
    uVar3 = 0x20;
    bVar5 = 0;
    break;
  case 1:
    FUN_OVRTitleScreenAndLoading__80077e3c();
    uVar1 = 0x80;
    if (DAT_80067118 != 0) {
      return;
    }
    iVar2 = 0x2b;
    uVar3 = 0x20;
    bVar5 = 0;
    break;
  case 2:
    if (DAT_80067118 == 0) {
      FUN_OVRTitleScreenAndLoading__80079878(0x80,0x23,0x22,0);
      FUN_OVRTitleScreenAndLoading__80079878(0x80,0x33,0x23,0);
    }
    bVar6 = false;
    if (DAT_80067e14 == 0) {
      bVar6 = (DAT_80067e10 & 0xf) < 0xb;
    }
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x40,bVar6);
    goto joined_r0x8007cb30;
  case 3:
    if ((DAT_80067118 == 0) || (DAT_80067118 == 4)) {
      FUN_OVRTitleScreenAndLoading__80079878(0x80,0x1b,0x25,0);
      FUN_OVRTitleScreenAndLoading__80079878(0x80,0x2b,0x26,0);
      uVar1 = 0x3b;
      uVar3 = 0x27;
    }
    else {
      FUN_OVRTitleScreenAndLoading__80079878(0x80,0x16,0x25,0);
      FUN_OVRTitleScreenAndLoading__80079878(0x80,0x24,0x26,0);
      FUN_OVRTitleScreenAndLoading__80079878(0x80,0x32,0x27,0);
      uVar1 = 0x40;
      uVar3 = 0x28;
    }
    FUN_OVRTitleScreenAndLoading__80079878(0x80,uVar1,uVar3,0);
    bVar6 = false;
    if (DAT_80067e14 == 0) {
      bVar6 = (DAT_80067e10 & 0xf) < 0xb;
    }
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x40,bVar6);
    goto joined_r0x8007cb30;
  case 4:
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x2b,0x29,0);
    bVar6 = false;
    if (DAT_80067e14 == 0) {
      bVar6 = (DAT_80067e10 & 0xf) < 0xb;
    }
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x42,bVar6);
    bVar5 = false;
    if (DAT_80067e14 == 1) {
      bVar5 = (DAT_80067e10 & 0xf) < 0xb;
    }
    uVar1 = 0x100;
    iVar2 = 0x55;
    uVar3 = 0x43;
    break;
  case 5:
    FUN_OVRTitleScreenAndLoading__80077e3c();
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x1b,0x2b,0);
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x2b,0x2c,0);
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x3b,0x2d,0);
    bVar6 = false;
    if (DAT_80067e14 == 0) {
      bVar6 = (DAT_80067e10 & 0xf) < 0xb;
    }
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x44,bVar6);
    goto joined_r0x8007cb30;
  default:
    goto switchD_OVRTitleScreenAndLoading__8007c2ec_caseD_6;
  case 7:
    FUN_OVRTitleScreenAndLoading__80077e3c();
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x23,0x2e,0);
    uVar1 = 0x80;
    iVar2 = 0x33;
    uVar3 = 0x2f;
    bVar5 = 0;
    break;
  case 8:
    FUN_OVRTitleScreenAndLoading__80077e3c();
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x2b,0x30,0);
    bVar6 = false;
    if (DAT_80067e14 == 0) {
      bVar6 = (DAT_80067e10 & 0xf) < 0xb;
    }
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x45,bVar6);
    goto joined_r0x8007cb30;
  case 9:
    FUN_OVRTitleScreenAndLoading__80077e3c();
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x1b,0x32,0);
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x2b,0x33,0);
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x3b,0x34,0);
    bVar6 = false;
    if (DAT_80067e14 == 0) {
      bVar6 = (DAT_80067e10 & 0xf) < 0xb;
    }
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x46,bVar6);
    goto joined_r0x8007cb30;
  case 10:
    FUN_OVRTitleScreenAndLoading__80077e3c();
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x23,0x35,0);
    uVar1 = 0x80;
    iVar2 = 0x33;
    uVar3 = 0x36;
    bVar5 = 0;
    break;
  case 0xb:
    FUN_OVRTitleScreenAndLoading__80077e3c();
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x23,0x37,0);
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x33,0x38,0);
    uVar1 = 0x100;
    iVar2 = 0x55;
    uVar3 = 0x47;
    bVar5 = (DAT_80067e10 & 0xf) < 0xb;
    break;
  case 0xc:
    FUN_OVRTitleScreenAndLoading__80077e3c();
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x2b,0x3a,0);
    bVar6 = false;
    if (DAT_80067e14 == 0) {
      bVar6 = (DAT_80067e10 & 0xf) < 0xb;
    }
    FUN_OVRTitleScreenAndLoading__80079878(0x80,0x55,0x45,bVar6);
joined_r0x8007cb30:
    bVar5 = false;
    if (DAT_80067e14 == 1) {
      bVar5 = (DAT_80067e10 & 0xf) < 0xb;
    }
    uVar1 = 0x100;
    iVar2 = 0x55;
    uVar3 = 0x41;
  }
LAB_OVRTitleScreenAndLoading__8007cb58:
  FUN_OVRTitleScreenAndLoading__80079878(uVar1,iVar2,uVar3,bVar5);
switchD_OVRTitleScreenAndLoading__8007c2ec_caseD_6:
                    // WARNING: Read-only address (ram,0x80067118) is written
  return;
}



void FUN_OVRTitleScreenAndLoading__8007cb80(void)

{
  SetDispMask(0);
  CdInit();
  CdReadCallback((CdlCB)0x0);
  FUN_80054934(0);
  FUN_80058428();
  FUN_8005557c(3);
  FUN_80054998();
  return;
}



void FUN_OVRTitleScreenAndLoading__8007cbd0(void)

{
  printf(s_Shutting_Down_OVRTitleScreenAndLoading__8006d650);
  FUN_OVRTitleScreenAndLoading__8007cb80();
  FUN_8005ab60();
  _96_init();
  printf(s_Launching_Crash_Demo_OVRTitleScreenAndLoading__8006d660);
  LoadExec(s_cdrom__KART_PSX_EXE_1_OVRTitleScreenAndLoading__8006d678,0x801fff00,0);
  return;
}



// Possible SSINIT_H.OBJ/SsInitHot

void FUN_OVRTitleScreenAndLoading__8007cc38(void)

{
  FUN_OVRTitleScreenAndLoading__8007e228();
  FUN_OVRTitleScreenAndLoading__8007e294();
  _bu_init();
  return;
}



void FUN_OVRTitleScreenAndLoading__8007cc68(void)

{
  DAT_OVRTitleScreenAndLoading__8007f0a8 = 0;
  DAT_OVRTitleScreenAndLoading__8007f0e0 = 0;
  UserFuncInit();
  DAT_OVRTitleScreenAndLoading__8007f09c = 0;
  DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
  DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
  DAT_OVRTitleScreenAndLoading__8007f0f0 = 0;
  DAT_OVRTitleScreenAndLoading__8007f0b0 = 0xffffffff;
  DAT_OVRTitleScreenAndLoading__8007f0e8 = 1;
  DAT_OVRTitleScreenAndLoading__8007f0e4 = 1;
  DAT_OVRTitleScreenAndLoading__8007f0ec = 0;
  FUN_OVRTitleScreenAndLoading__8007e47c();
  FUN_80054968(7,FUN_OVRTitleScreenAndLoading__8007e118);
  return;
}



void FUN_OVRTitleScreenAndLoading__8007ccd8(void)

{
  do {
  } while (DAT_OVRTitleScreenAndLoading__8007f09c != 0);
  FUN_80054968(7,0);
  FUN_OVRTitleScreenAndLoading__8007e658();
  return;
}



bool FUN_OVRTitleScreenAndLoading__8007cd18(undefined4 param_1)

{
  bool bVar1;
  
  bVar1 = 0 < DAT_OVRTitleScreenAndLoading__8007f09c;
  if (bVar1) {
    printf(s_Access_Denied____event_multiple_o_OVRTitleScreenAndLoading__8006d690);
  }
  else {
    DAT_OVRTitleScreenAndLoading__8007f09c = 1;
    DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
    DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
    DAT_OVRTitleScreenAndLoading__8007f0ac = param_1;
    UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007cd80);
  }
  return !bVar1;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007cd80(int *param_1)

{
  int iVar1;
  
  iVar1 = *param_1;
  if (iVar1 == 10) {
LAB_OVRTitleScreenAndLoading__8007cde8:
    DAT_OVRTitleScreenAndLoading__8007f02c =
         (&DAT_OVRTitleScreenAndLoading__8007f0ec)[(int)DAT_OVRTitleScreenAndLoading__8007f0ac >> 4]
    ;
    (&DAT_OVRTitleScreenAndLoading__8007f0ec)[(int)DAT_OVRTitleScreenAndLoading__8007f0ac >> 4] = 0;
    FUN_OVRTitleScreenAndLoading__8007e70c();
    _card_info(DAT_OVRTitleScreenAndLoading__8007f0ac);
    *param_1 = *param_1 + 1;
  }
  else {
    if (iVar1 < 0xb) {
      if (iVar1 == 0) {
        DAT_OVRTitleScreenAndLoading__8007f070 = 0;
        DAT_OVRTitleScreenAndLoading__8007f06c = 0;
        *param_1 = 10;
        goto LAB_OVRTitleScreenAndLoading__8007cde8;
      }
    }
    else {
      if (iVar1 == 0xb) {
        iVar1 = FUN_OVRTitleScreenAndLoading__8007e9c4();
        if (iVar1 == 0) {
          return 0;
        }
        DAT_OVRTitleScreenAndLoading__8007f070 = FUN_OVRTitleScreenAndLoading__8007e814();
        if (DAT_OVRTitleScreenAndLoading__8007f070 == 1) {
          iVar1 = DAT_OVRTitleScreenAndLoading__8007f06c + 1;
          if (DAT_OVRTitleScreenAndLoading__8007f06c + 1 < 9) {
LAB_OVRTitleScreenAndLoading__8007cfec:
            DAT_OVRTitleScreenAndLoading__8007f06c = DAT_OVRTitleScreenAndLoading__8007f06c + 1;
            *param_1 = 10;
            return 0;
          }
        }
        else {
          iVar1 = DAT_OVRTitleScreenAndLoading__8007f06c;
          if (DAT_OVRTitleScreenAndLoading__8007f070 < 2) {
            if (DAT_OVRTitleScreenAndLoading__8007f070 == 0) {
              DAT_OVRTitleScreenAndLoading__8007f070 = 0;
              if ((DAT_OVRTitleScreenAndLoading__8007f0a8 &
                  1 << (DAT_OVRTitleScreenAndLoading__8007f0ac & 0x1f)) == 0) {
                DAT_OVRTitleScreenAndLoading__8007f070 = 4;
              }
              DAT_OVRTitleScreenAndLoading__8007f0a0 =
                   FUN_OVRTitleScreenAndLoading__8007e0c4(DAT_OVRTitleScreenAndLoading__8007f070);
              (&DAT_OVRTitleScreenAndLoading__8007f0e4)
              [(int)DAT_OVRTitleScreenAndLoading__8007f0ac >> 4] = 0;
              return 1;
            }
          }
          else {
            if (DAT_OVRTitleScreenAndLoading__8007f070 == 2) {
              if (3 < DAT_OVRTitleScreenAndLoading__8007f06c + 1) {
                DAT_OVRTitleScreenAndLoading__8007f06c = DAT_OVRTitleScreenAndLoading__8007f06c + 1;
                (&DAT_OVRTitleScreenAndLoading__8007f0e4)
                [(int)DAT_OVRTitleScreenAndLoading__8007f0ac >> 4] = 1;
                DAT_OVRTitleScreenAndLoading__8007f0a8 =
                     DAT_OVRTitleScreenAndLoading__8007f0a8 &
                     ~(1 << (DAT_OVRTitleScreenAndLoading__8007f0ac & 0x1f));
                DAT_OVRTitleScreenAndLoading__8007f0a0 = FUN_OVRTitleScreenAndLoading__8007e0c4(2);
                return 1;
              }
              goto LAB_OVRTitleScreenAndLoading__8007cfec;
            }
            if (((DAT_OVRTitleScreenAndLoading__8007f070 == 4) &&
                ((&DAT_OVRTitleScreenAndLoading__8007f0e4)
                 [(int)DAT_OVRTitleScreenAndLoading__8007f0ac >> 4] == 0)) &&
               (DAT_OVRTitleScreenAndLoading__8007f02c < 0x80)) {
              (&DAT_OVRTitleScreenAndLoading__8007f0e4)
              [(int)DAT_OVRTitleScreenAndLoading__8007f0ac >> 4] = 0;
              FUN_OVRTitleScreenAndLoading__8007e70c();
              _card_clear(DAT_OVRTitleScreenAndLoading__8007f0ac);
              *param_1 = 0x15;
              return 0;
            }
          }
        }
        DAT_OVRTitleScreenAndLoading__8007f06c = iVar1;
        DAT_OVRTitleScreenAndLoading__8007f0a0 =
             FUN_OVRTitleScreenAndLoading__8007e0c4(DAT_OVRTitleScreenAndLoading__8007f070);
        return 1;
      }
      if (iVar1 == 0x15) {
        iVar1 = FUN_OVRTitleScreenAndLoading__8007ea00();
        if (iVar1 != 0) {
          FUN_OVRTitleScreenAndLoading__8007e8ec();
          (&DAT_OVRTitleScreenAndLoading__8007f0ec)
          [(int)DAT_OVRTitleScreenAndLoading__8007f0ac >> 4] = 0;
          *param_1 = 0;
          return 0;
        }
        return 0;
      }
    }
    printf(s_error_OVRTitleScreenAndLoading__8006d6b8);
  }
  return 0;
}



bool FUN_OVRTitleScreenAndLoading__8007d080(undefined4 param_1)

{
  bool bVar1;
  
  bVar1 = 0 < DAT_OVRTitleScreenAndLoading__8007f09c;
  if (bVar1) {
    printf(s_Access_Denied____event_multiple_o_OVRTitleScreenAndLoading__8006d690);
  }
  else {
    DAT_OVRTitleScreenAndLoading__8007f09c = 2;
    DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
    DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
    DAT_OVRTitleScreenAndLoading__8007f0ac = param_1;
    UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007d0e8);
  }
  return !bVar1;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007d0e8(int *param_1)

{
  int iVar1;
  
  switch(*param_1) {
  case 0:
    DAT_OVRTitleScreenAndLoading__8007f078 = 0;
    DAT_OVRTitleScreenAndLoading__8007f07c = 0;
    DAT_OVRTitleScreenAndLoading__8007f074 = 0;
    DAT_OVRTitleScreenAndLoading__8007f084 = 0;
    DAT_OVRTitleScreenAndLoading__8007f080 = 0;
    *param_1 = *param_1 + 1;
  case 1:
    UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007cd80);
    iVar1 = 10;
    break;
  default:
    goto switchD_OVRTitleScreenAndLoading__8007d120_caseD_2;
  case 10:
    if (DAT_OVRTitleScreenAndLoading__8007f0a0 == 1) {
      return 1;
    }
    if (DAT_OVRTitleScreenAndLoading__8007f0a0 < 2) {
      if (DAT_OVRTitleScreenAndLoading__8007f0a0 != 0) {
        return 1;
      }
      iVar1 = 0x1e;
    }
    else {
      if (DAT_OVRTitleScreenAndLoading__8007f0a0 != 3) {
        return 1;
      }
      DAT_OVRTitleScreenAndLoading__8007f084 = 1;
      DAT_OVRTitleScreenAndLoading__8007f0a8 =
           DAT_OVRTitleScreenAndLoading__8007f0a8 |
           1 << (DAT_OVRTitleScreenAndLoading__8007f0ac & 0x1f);
      FUN_OVRTitleScreenAndLoading__8007e70c();
      _card_clear(DAT_OVRTitleScreenAndLoading__8007f0ac);
      iVar1 = 0x15;
    }
    break;
  case 0x15:
    iVar1 = FUN_OVRTitleScreenAndLoading__8007ea00();
    if (iVar1 == 0) {
      return 0;
    }
    FUN_OVRTitleScreenAndLoading__8007e8ec();
    *param_1 = 0x1e;
  case 0x1e:
    FUN_OVRTitleScreenAndLoading__8007e70c();
    _card_load(DAT_OVRTitleScreenAndLoading__8007f0ac);
    iVar1 = *param_1 + 1;
    break;
  case 0x1f:
    iVar1 = FUN_OVRTitleScreenAndLoading__8007e9c4();
    if (iVar1 == 0) {
      return 0;
    }
    DAT_OVRTitleScreenAndLoading__8007f080 = FUN_OVRTitleScreenAndLoading__8007e814();
    if (DAT_OVRTitleScreenAndLoading__8007f080 == 1) {
      DAT_OVRTitleScreenAndLoading__8007f078 = DAT_OVRTitleScreenAndLoading__8007f078 + 1;
      iVar1 = 0x1e;
      if (8 < DAT_OVRTitleScreenAndLoading__8007f078) goto LAB_OVRTitleScreenAndLoading__8007d308;
    }
    else {
      if (DAT_OVRTitleScreenAndLoading__8007f080 < 2) {
        if (DAT_OVRTitleScreenAndLoading__8007f080 == 0) {
          if (DAT_OVRTitleScreenAndLoading__8007f084 == 0) {
            DAT_OVRTitleScreenAndLoading__8007f080 = 0;
            DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
            return 1;
          }
          DAT_OVRTitleScreenAndLoading__8007f080 = 0;
          DAT_OVRTitleScreenAndLoading__8007f0a0 = 3;
          return 1;
        }
LAB_OVRTitleScreenAndLoading__8007d308:
        DAT_OVRTitleScreenAndLoading__8007f0a0 =
             FUN_OVRTitleScreenAndLoading__8007e0c4(DAT_OVRTitleScreenAndLoading__8007f080);
        return 1;
      }
      if (DAT_OVRTitleScreenAndLoading__8007f080 == 2) {
        *param_1 = 1;
        return 0;
      }
      if (DAT_OVRTitleScreenAndLoading__8007f080 != 4) goto LAB_OVRTitleScreenAndLoading__8007d308;
      FUN_OVRTitleScreenAndLoading__8007e70c();
      _card_info(DAT_OVRTitleScreenAndLoading__8007f0ac);
      iVar1 = 0x32;
    }
    break;
  case 0x32:
    iVar1 = FUN_OVRTitleScreenAndLoading__8007e9c4();
    if (iVar1 == 0) {
      return 0;
    }
    DAT_OVRTitleScreenAndLoading__8007f080 = FUN_OVRTitleScreenAndLoading__8007e814();
    iVar1 = 1;
    if (DAT_OVRTitleScreenAndLoading__8007f080 == 0) {
      DAT_OVRTitleScreenAndLoading__8007f0a0 = 4;
      return 1;
    }
  }
  *param_1 = iVar1;
switchD_OVRTitleScreenAndLoading__8007d120_caseD_2:
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007d390(undefined4 param_1,uint param_2,uint param_3)

{
  char *fmt;
  
  if (DAT_OVRTitleScreenAndLoading__8007f0b0 < 0) {
    fmt = s_Access_Denied____file_not_open__OVRTitleScreenAndLoading__8006d7b4;
  }
  else if (DAT_OVRTitleScreenAndLoading__8007f09c < 1) {
    if ((param_3 & 0x7f) == 0) {
      if ((param_2 & 0x7f) == 0) {
        DAT_OVRTitleScreenAndLoading__8007f09c = 5;
        DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
        DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
        DAT_OVRTitleScreenAndLoading__8007f0b4 = param_2;
        DAT_OVRTitleScreenAndLoading__8007f0b8 = param_3;
        DAT_OVRTitleScreenAndLoading__8007f0bc = param_1;
        UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007d448);
        return 1;
      }
      fmt = s_Access_Denied____invalid_offset_v_OVRTitleScreenAndLoading__8006d804;
    }
    else {
      fmt = s_Access_Denied____invalid_data_si_OVRTitleScreenAndLoading__8006d7d8;
    }
  }
  else {
    fmt = s_Access_Denied____event_multiple_o_OVRTitleScreenAndLoading__8006d690;
  }
  printf(fmt);
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007d448(int *param_1)

{
  long lVar1;
  int iVar2;
  
  iVar2 = *param_1;
  if (iVar2 != 10) {
    if (10 < iVar2) {
      if (iVar2 != 0x1e) {
        return 0;
      }
      iVar2 = FUN_OVRTitleScreenAndLoading__8007e9c4();
      if (iVar2 != 0) {
        iVar2 = FUN_OVRTitleScreenAndLoading__8007e814();
        if (iVar2 == 0) {
          iVar2 = 0;
        }
        else {
          DAT_OVRTitleScreenAndLoading__8007f030 = DAT_OVRTitleScreenAndLoading__8007f030 + 1;
          if (DAT_OVRTitleScreenAndLoading__8007f030 < 4) {
            *param_1 = 10;
            return 0;
          }
        }
        DAT_OVRTitleScreenAndLoading__8007f0a0 = FUN_OVRTitleScreenAndLoading__8007e0c4(iVar2);
        return 1;
      }
      return 0;
    }
    if (iVar2 != 0) {
      return 0;
    }
    DAT_OVRTitleScreenAndLoading__8007f030 = 0;
    *param_1 = 10;
  }
  do {
    lVar1 = lseek(DAT_OVRTitleScreenAndLoading__8007f0b0,DAT_OVRTitleScreenAndLoading__8007f0b4,0);
  } while (lVar1 != DAT_OVRTitleScreenAndLoading__8007f0b4);
  FUN_OVRTitleScreenAndLoading__8007e70c();
  do {
    lVar1 = read(DAT_OVRTitleScreenAndLoading__8007f0b0,DAT_OVRTitleScreenAndLoading__8007f0bc,
                 DAT_OVRTitleScreenAndLoading__8007f0b8);
  } while (lVar1 != 0);
  *param_1 = 0x1e;
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007d584(undefined4 param_1,uint param_2,uint param_3)

{
  char *fmt;
  
  if (DAT_OVRTitleScreenAndLoading__8007f0b0 < 0) {
    fmt = s_Access_Denied____file_not_open__OVRTitleScreenAndLoading__8006d7b4;
  }
  else if (DAT_OVRTitleScreenAndLoading__8007f09c < 1) {
    if ((param_3 & 0x7f) == 0) {
      if ((param_2 & 0x7f) == 0) {
        DAT_OVRTitleScreenAndLoading__8007f09c = 6;
        DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
        DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
        DAT_OVRTitleScreenAndLoading__8007f0b4 = param_2;
        DAT_OVRTitleScreenAndLoading__8007f0b8 = param_3;
        DAT_OVRTitleScreenAndLoading__8007f0bc = param_1;
        UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007d63c);
        return 1;
      }
      fmt = s_Access_Denied____invalid_offset_v_OVRTitleScreenAndLoading__8006d804;
    }
    else {
      fmt = s_Access_Denied____invalid_data_si_OVRTitleScreenAndLoading__8006d7d8;
    }
  }
  else {
    fmt = s_Access_Denied____event_multiple_o_OVRTitleScreenAndLoading__8006d690;
  }
  printf(fmt);
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007d63c(int *param_1)

{
  long lVar1;
  int iVar2;
  
  iVar2 = *param_1;
  if (iVar2 == 10) {
    do {
      lVar1 = lseek(DAT_OVRTitleScreenAndLoading__8007f0b0,DAT_OVRTitleScreenAndLoading__8007f0b4,0)
      ;
    } while (lVar1 != DAT_OVRTitleScreenAndLoading__8007f0b4);
    FUN_OVRTitleScreenAndLoading__8007e70c();
    do {
      lVar1 = write(DAT_OVRTitleScreenAndLoading__8007f0b0,DAT_OVRTitleScreenAndLoading__8007f0bc,
                    DAT_OVRTitleScreenAndLoading__8007f0b8);
    } while (lVar1 != 0);
    *param_1 = 0x1e;
  }
  else {
    if (10 < iVar2) {
      if (iVar2 != 0x1e) {
        return 0;
      }
      iVar2 = FUN_OVRTitleScreenAndLoading__8007e9c4();
      if (iVar2 != 0) {
        iVar2 = FUN_OVRTitleScreenAndLoading__8007e814();
        if (iVar2 == 0) {
          iVar2 = 0;
        }
        else {
          DAT_OVRTitleScreenAndLoading__8007f034 = DAT_OVRTitleScreenAndLoading__8007f034 + 1;
          if (DAT_OVRTitleScreenAndLoading__8007f034 < 4) {
            *param_1 = 10;
            return 0;
          }
        }
        DAT_OVRTitleScreenAndLoading__8007f0a0 = FUN_OVRTitleScreenAndLoading__8007e0c4(iVar2);
        return 1;
      }
      return 0;
    }
    if (iVar2 != 0) {
      return 0;
    }
    DAT_OVRTitleScreenAndLoading__8007f034 = 0;
    *param_1 = 10;
  }
  return 0;
}



undefined4
FUN_OVRTitleScreenAndLoading__8007d778
          (undefined4 param_1,char *param_2,undefined4 param_3,uint param_4,uint param_5)

{
  char *fmt;
  
  if (DAT_OVRTitleScreenAndLoading__8007f09c < 1) {
    if (DAT_OVRTitleScreenAndLoading__8007f0b0 < 0) {
      if ((param_5 & 0x7f) == 0) {
        if ((param_4 & 0x7f) == 0) {
          FUN_OVRTitleScreenAndLoading__8007e1c4(param_1,&DAT_OVRTitleScreenAndLoading__8007f0c0);
          strcat(&DAT_OVRTitleScreenAndLoading__8007f0c0,param_2);
          DAT_OVRTitleScreenAndLoading__8007f09c = 3;
          DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
          DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
          DAT_OVRTitleScreenAndLoading__8007f0b8 = param_5;
          DAT_OVRTitleScreenAndLoading__8007f0ac = param_1;
          DAT_OVRTitleScreenAndLoading__8007f0b4 = param_4;
          DAT_OVRTitleScreenAndLoading__8007f0bc = param_3;
          UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007d890);
          return 1;
        }
        fmt = s_Access_Denied____invalid_offset_v_OVRTitleScreenAndLoading__8006d804;
      }
      else {
        fmt = s_Access_Denied____invalid_data_si_OVRTitleScreenAndLoading__8006d7d8;
      }
    }
    else {
      fmt = s_Access_Denied____file_already_op_OVRTitleScreenAndLoading__8006d78c;
    }
  }
  else {
    fmt = s_Access_Denied____system_busy_OVRTitleScreenAndLoading__8006d834;
  }
  printf(fmt);
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007d890(undefined4 *param_1)

{
  int iVar1;
  undefined4 uVar2;
  
  switch(*param_1) {
  case 0:
    DAT_OVRTitleScreenAndLoading__8007f038 = 0;
    UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007cd80);
    uVar2 = 10;
    break;
  default:
    goto switchD_OVRTitleScreenAndLoading__8007d8c8_caseD_1;
  case 10:
    if (DAT_OVRTitleScreenAndLoading__8007f0a0 != 0) {
      return 1;
    }
    DAT_OVRTitleScreenAndLoading__8007f0b0 = open(&DAT_OVRTitleScreenAndLoading__8007f0c0,0x8001);
    if (DAT_OVRTitleScreenAndLoading__8007f0b0 < 0) {
      DAT_OVRTitleScreenAndLoading__8007f0a0 = 5;
      return 1;
    }
  case 0xb:
    *param_1 = 0x14;
    UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007d448);
    return 0;
  case 0x14:
    if (DAT_OVRTitleScreenAndLoading__8007f0a0 != 3) {
      close(DAT_OVRTitleScreenAndLoading__8007f0b0);
      DAT_OVRTitleScreenAndLoading__8007f0b0 = 0xffffffff;
      return 1;
    }
    FUN_OVRTitleScreenAndLoading__8007e70c();
    _card_clear(DAT_OVRTitleScreenAndLoading__8007f0ac);
    uVar2 = 0x16;
    break;
  case 0x16:
    iVar1 = FUN_OVRTitleScreenAndLoading__8007ea00();
    if (iVar1 == 0) {
      return 0;
    }
    FUN_OVRTitleScreenAndLoading__8007e8ec();
    uVar2 = 0xb;
  }
  *param_1 = uVar2;
switchD_OVRTitleScreenAndLoading__8007d8c8_caseD_1:
  return 0;
}



undefined4
FUN_OVRTitleScreenAndLoading__8007d9d0
          (undefined4 param_1,char *param_2,undefined4 param_3,uint param_4,uint param_5)

{
  char *fmt;
  
  if (DAT_OVRTitleScreenAndLoading__8007f09c < 1) {
    if (DAT_OVRTitleScreenAndLoading__8007f0b0 < 0) {
      if ((param_5 & 0x7f) == 0) {
        if ((param_4 & 0x7f) == 0) {
          FUN_OVRTitleScreenAndLoading__8007e1c4(param_1,&DAT_OVRTitleScreenAndLoading__8007f0c0);
          strcat(&DAT_OVRTitleScreenAndLoading__8007f0c0,param_2);
          DAT_OVRTitleScreenAndLoading__8007f09c = 4;
          DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
          DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
          DAT_OVRTitleScreenAndLoading__8007f0b8 = param_5;
          DAT_OVRTitleScreenAndLoading__8007f0ac = param_1;
          DAT_OVRTitleScreenAndLoading__8007f0b4 = param_4;
          DAT_OVRTitleScreenAndLoading__8007f0bc = param_3;
          UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007dae8);
          return 1;
        }
        fmt = s_Access_Denied____invalid_offset_v_OVRTitleScreenAndLoading__8006d804;
      }
      else {
        fmt = s_Access_Denied____invalid_data_si_OVRTitleScreenAndLoading__8006d7d8;
      }
    }
    else {
      fmt = s_Access_Denied____file_already_op_OVRTitleScreenAndLoading__8006d78c;
    }
  }
  else {
    fmt = s_Access_Denied____system_busy_OVRTitleScreenAndLoading__8006d834;
  }
  printf(fmt);
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007dae8(undefined4 *param_1)

{
  int iVar1;
  undefined4 uVar2;
  
  switch(*param_1) {
  case 0:
    DAT_OVRTitleScreenAndLoading__8007f03c = 0;
    UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007cd80);
    uVar2 = 10;
    break;
  default:
    goto switchD_OVRTitleScreenAndLoading__8007db20_caseD_1;
  case 10:
    if (DAT_OVRTitleScreenAndLoading__8007f0a0 != 0) {
      return 1;
    }
    DAT_OVRTitleScreenAndLoading__8007f0b0 = open(&DAT_OVRTitleScreenAndLoading__8007f0c0,0x8001);
    if (DAT_OVRTitleScreenAndLoading__8007f0b0 < 0) {
      DAT_OVRTitleScreenAndLoading__8007f0a0 = 5;
      return 1;
    }
  case 0xb:
    *param_1 = 0x14;
    UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007d63c);
    return 0;
  case 0x14:
    if (DAT_OVRTitleScreenAndLoading__8007f0a0 != 3) {
      close(DAT_OVRTitleScreenAndLoading__8007f0b0);
      DAT_OVRTitleScreenAndLoading__8007f0b0 = 0xffffffff;
      return 1;
    }
    FUN_OVRTitleScreenAndLoading__8007e70c();
    _card_clear(DAT_OVRTitleScreenAndLoading__8007f0ac);
    uVar2 = 0x16;
    break;
  case 0x16:
    iVar1 = FUN_OVRTitleScreenAndLoading__8007ea00();
    if (iVar1 == 0) {
      return 0;
    }
    FUN_OVRTitleScreenAndLoading__8007e8ec();
    uVar2 = 0xb;
  }
  *param_1 = uVar2;
switchD_OVRTitleScreenAndLoading__8007db20_caseD_1:
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007dc28(undefined4 param_1)

{
  undefined4 uVar1;
  
  uVar1 = DAT_OVRTitleScreenAndLoading__8007f0e0;
  DAT_OVRTitleScreenAndLoading__8007f0e0 = param_1;
  return uVar1;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007dc3c(int param_1,int *param_2,undefined4 *param_3)

{
  int iVar1;
  undefined4 uVar2;
  
  iVar1 = DAT_OVRTitleScreenAndLoading__8007f09c;
  if ((DAT_OVRTitleScreenAndLoading__8007f09c != 0) ||
     (uVar2 = 0xffffffff, DAT_OVRTitleScreenAndLoading__8007f0a4 != 0)) {
    if (param_1 == 0) {
      if (DAT_OVRTitleScreenAndLoading__8007f0a4 == 0) {
        do {
        } while( true );
      }
      if (param_3 != (undefined4 *)0x0) {
        *param_3 = DAT_OVRTitleScreenAndLoading__8007f090;
      }
      if (param_2 != (int *)0x0) {
        *param_2 = DAT_OVRTitleScreenAndLoading__8007f08c;
      }
      DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
      uVar2 = 1;
    }
    else if (DAT_OVRTitleScreenAndLoading__8007f0a4 == 0) {
      if (param_3 != (undefined4 *)0x0) {
        *param_3 = DAT_OVRTitleScreenAndLoading__8007f0a0;
      }
      uVar2 = 0;
      if (param_2 != (int *)0x0) {
        *param_2 = iVar1;
      }
    }
    else {
      if (param_3 != (undefined4 *)0x0) {
        *param_3 = DAT_OVRTitleScreenAndLoading__8007f090;
      }
      if (param_2 != (int *)0x0) {
        *param_2 = DAT_OVRTitleScreenAndLoading__8007f08c;
      }
      DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
      uVar2 = 1;
    }
  }
  return uVar2;
}



int FUN_OVRTitleScreenAndLoading__8007dd58(uint param_1,char *param_2,int param_3)

{
  long lVar1;
  int iVar2;
  char acStack_40 [32];
  int local_20;
  
  iVar2 = 0;
  if (DAT_OVRTitleScreenAndLoading__8007f09c == 0) {
    FUN_OVRTitleScreenAndLoading__8007e1c4(param_1,acStack_40);
    strcat(acStack_40,param_2);
    DAT_OVRTitleScreenAndLoading__8007f0a8 =
         DAT_OVRTitleScreenAndLoading__8007f0a8 |
         1 << (DAT_OVRTitleScreenAndLoading__8007f0ac & 0x1f);
    lVar1 = open(acStack_40,1);
    if (lVar1 < 0) {
      do {
        lVar1 = open(acStack_40,param_3 << 0x10 | 0x200);
        if (-1 < lVar1) {
          close(lVar1);
          return 0;
        }
        DAT_OVRTitleScreenAndLoading__8007f0f4 = FUN_OVRTitleScreenAndLoading__8007dc28(0);
        if (DAT_OVRTitleScreenAndLoading__8007f09c < 1) {
          DAT_OVRTitleScreenAndLoading__8007f09c = 2;
          DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
          DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
          DAT_OVRTitleScreenAndLoading__8007f0ac = param_1;
          UserFuncOpen(FUN_OVRTitleScreenAndLoading__8007d0e8);
        }
        else {
          printf(s_Access_Denied____event_multiple_o_OVRTitleScreenAndLoading__8006d690);
        }
        if ((DAT_OVRTitleScreenAndLoading__8007f09c != 0) ||
           (DAT_OVRTitleScreenAndLoading__8007f0a4 != 0)) {
          if (DAT_OVRTitleScreenAndLoading__8007f0a4 == 0) {
            do {
            } while( true );
          }
          DAT_OVRTitleScreenAndLoading__8007f0a4 = 0;
          local_20 = DAT_OVRTitleScreenAndLoading__8007f090;
        }
        FUN_OVRTitleScreenAndLoading__8007dc28(DAT_OVRTitleScreenAndLoading__8007f0f4);
        if (local_20 == 0) {
          return 7;
        }
      } while ((local_20 == 3) || ((local_20 == 2 && (iVar2 = iVar2 + 1, iVar2 < 4))));
      if (local_20 == 0) {
        local_20 = 5;
      }
    }
    else {
      close(lVar1);
      local_20 = 6;
    }
  }
  else {
    printf(s_Access_Denied____system_busy_OVRTitleScreenAndLoading__8006d834);
    local_20 = -1;
  }
  return local_20;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007df54(long param_1)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  undefined4 uVar4;
  
  if (DAT_OVRTitleScreenAndLoading__8007f09c != 0) {
    printf(s_Access_Denied____system_busy_OVRTitleScreenAndLoading__8006d834);
    return 0xffffffff;
  }
  while( true ) {
    FUN_OVRTitleScreenAndLoading__8007e70c();
    lVar1 = _card_format(param_1);
    if (lVar1 != 0) break;
    uVar2 = FUN_OVRTitleScreenAndLoading__8007e8ec();
    if ((uVar2 & 4) == 0) goto LAB_OVRTitleScreenAndLoading__8007dff8;
  }
  FUN_OVRTitleScreenAndLoading__8007e70c();
  _card_load(DAT_OVRTitleScreenAndLoading__8007f0ac);
  do {
    iVar3 = FUN_OVRTitleScreenAndLoading__8007e9c4();
  } while (iVar3 == 0);
  uVar2 = FUN_OVRTitleScreenAndLoading__8007e814();
LAB_OVRTitleScreenAndLoading__8007dff8:
  uVar4 = FUN_OVRTitleScreenAndLoading__8007e0c4(uVar2);
  return uVar4;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007e010(long param_1)

{
  undefined4 uVar1;
  undefined *puVar2;
  int iVar3;
  int iVar4;
  uchar auStack_90 [127];
  undefined local_11;
  
  if (DAT_OVRTitleScreenAndLoading__8007f09c == 0) {
    iVar4 = 0x7f;
    puVar2 = &local_11;
    do {
      *puVar2 = 0xff;
      iVar4 = iVar4 + -1;
      puVar2 = puVar2 + -1;
    } while (-1 < iVar4);
    iVar4 = 0;
    do {
      FUN_OVRTitleScreenAndLoading__8007e70c();
      _new_card();
      _card_write(param_1,iVar4,auStack_90);
      iVar3 = FUN_OVRTitleScreenAndLoading__8007e8ec();
      iVar4 = iVar4 + 1;
      if (iVar3 != 0) {
        return 0;
      }
      uVar1 = 1;
    } while (iVar4 < 0xf);
  }
  else {
    printf(s_Access_Denied____system_busy_OVRTitleScreenAndLoading__8006d834);
    uVar1 = 0xffffffff;
  }
  return uVar1;
}



uint FUN_OVRTitleScreenAndLoading__8007e0c4(uint param_1)

{
  uint uVar1;
  
  uVar1 = 0;
  if (param_1 == 1) {
    uVar1 = 2;
  }
  else if ((int)param_1 < 2) {
    if (param_1 != 0) {
      uVar1 = param_1 | 0x8000;
    }
  }
  else {
    uVar1 = 1;
    if ((param_1 != 2) && (uVar1 = param_1 | 0x8000, param_1 == 4)) {
      uVar1 = 3;
    }
  }
  return uVar1;
}



void FUN_OVRTitleScreenAndLoading__8007e118(void)

{
  undefined4 uVar1;
  undefined4 uVar2;
  int iVar3;
  
  iVar3 = UserFuncComplete();
  if (iVar3 == 0) {
    UserFuncExecute();
    iVar3 = UserFuncComplete();
    uVar2 = DAT_OVRTitleScreenAndLoading__8007f0a0;
    uVar1 = DAT_OVRTitleScreenAndLoading__8007f09c;
    if (iVar3 != 0) {
      DAT_OVRTitleScreenAndLoading__8007f0a4 = 1;
      DAT_OVRTitleScreenAndLoading__8007f08c = DAT_OVRTitleScreenAndLoading__8007f09c;
      DAT_OVRTitleScreenAndLoading__8007f090 = DAT_OVRTitleScreenAndLoading__8007f0a0;
      DAT_OVRTitleScreenAndLoading__8007f09c = 0;
      DAT_OVRTitleScreenAndLoading__8007f0a0 = 0;
      if (DAT_OVRTitleScreenAndLoading__8007f0e0 != (code *)0x0) {
        (*DAT_OVRTitleScreenAndLoading__8007f0e0)(uVar1,uVar2);
      }
    }
  }
  DAT_OVRTitleScreenAndLoading__8007f0ec = DAT_OVRTitleScreenAndLoading__8007f0ec + 1;
  DAT_OVRTitleScreenAndLoading__8007f0f0 = DAT_OVRTitleScreenAndLoading__8007f0f0 + 1;
  return;
}



void FUN_OVRTitleScreenAndLoading__8007e1c4(int param_1,uint param_2)

{
  uint uVar1;
  uint *puVar2;
  char cVar3;
  uint uVar4;
  undefined uVar5;
  undefined uVar6;
  int iVar7;
  
  uVar6 = DAT_OVRTitleScreenAndLoading__8006d919;
  uVar5 = DAT_OVRTitleScreenAndLoading__8006d918;
  uVar4 = DAT_OVRTitleScreenAndLoading__8006d914;
  uVar1 = param_2 + 3 & 3;
  puVar2 = (uint *)((param_2 + 3) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 |
            DAT_OVRTitleScreenAndLoading__8006d914 >> (3 - uVar1) * 8;
  uVar1 = param_2 & 3;
  *(uint *)(param_2 - uVar1) =
       *(uint *)(param_2 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | uVar4 << uVar1 * 8;
  *(undefined *)(param_2 + 4) = uVar5;
  *(undefined *)(param_2 + 5) = uVar6;
  iVar7 = param_1;
  if (param_1 < 0) {
    iVar7 = param_1 + 0xf;
  }
  cVar3 = (char)(iVar7 >> 4);
  *(char *)(param_2 + 2) = cVar3 + '0';
  *(char *)(param_2 + 3) = (char)param_1 + cVar3 * -0x10 + '0';
  return;
}



void FUN_OVRTitleScreenAndLoading__8007e228(undefined4 param_1)

{
  int iVar1;
  
  ChangeClearPAD(0);
  EnterCriticalSection();
  iVar1 = FUN_8005ff84();
  if (iVar1 == 0) {
    param_1 = 0;
  }
  InitCARD2(param_1);
  _copy_memcard_patch();
  _patch_card();
  _patch_card2();
  ExitCriticalSection();
  return;
}



void FUN_OVRTitleScreenAndLoading__8007e294(void)

{
  EnterCriticalSection();
  StartCARD2();
  ChangeClearPAD(0);
  ExitCriticalSection();
  return;
}



void UserFuncInit(void)

{
  DAT_OVRTitleScreenAndLoading__8007f05c = 0xffffffff;
  return;
}



void UserFuncOpen(undefined4 param_1)

{
  undefined4 *puVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = DAT_OVRTitleScreenAndLoading__8007f05c + 1;
  if (3 < iVar3) {
    printf(s_libmcrd__event_overflow_OVRTitleScreenAndLoading__8006d920);
    USERFUNC_OBJ_7C();
    return;
  }
  iVar2 = 3;
  puVar1 = &DAT_OVRTitleScreenAndLoading__8007f108 + iVar3 * 4;
  DAT_OVRTitleScreenAndLoading__8007f05c = iVar3;
  (&DAT_OVRTitleScreenAndLoading__8007f13c)[iVar3] = param_1;
  do {
    *puVar1 = 0;
    iVar2 = iVar2 + -1;
    puVar1 = puVar1 + -1;
  } while (-1 < iVar2);
  return;
}



void USERFUNC_OBJ_7C(void)

{
  return;
}



void UserFuncExecute(void)

{
  int iVar1;
  
  if ((-1 < DAT_OVRTitleScreenAndLoading__8007f05c) &&
     (iVar1 = (*(code *)(&DAT_OVRTitleScreenAndLoading__8007f13c)
                        [DAT_OVRTitleScreenAndLoading__8007f05c])
                        (DAT_OVRTitleScreenAndLoading__8007f05c * 0x10 + -0x7ff80f04), iVar1 != 0))
  {
    DAT_OVRTitleScreenAndLoading__8007f05c = DAT_OVRTitleScreenAndLoading__8007f05c + -1;
  }
  return;
}



uint UserFuncComplete(void)

{
  return DAT_OVRTitleScreenAndLoading__8007f05c >> 0x1f;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007e3dc(void)

{
  DAT_OVRTitleScreenAndLoading__8007f16c = 1;
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007e3f0(void)

{
  DAT_OVRTitleScreenAndLoading__8007f170 = 1;
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007e404(void)

{
  DAT_OVRTitleScreenAndLoading__8007f174 = 1;
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007e418(void)

{
  DAT_OVRTitleScreenAndLoading__8007f178 = 1;
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007e42c(void)

{
  DAT_OVRTitleScreenAndLoading__8007f17c = 1;
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007e440(void)

{
  DAT_OVRTitleScreenAndLoading__8007f180 = 1;
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007e454(void)

{
  DAT_OVRTitleScreenAndLoading__8007f184 = 1;
  return 0;
}



undefined4 FUN_OVRTitleScreenAndLoading__8007e468(void)

{
  DAT_OVRTitleScreenAndLoading__8007f188 = 1;
  return 0;
}



void FUN_OVRTitleScreenAndLoading__8007e47c(void)

{
  int iVar1;
  
  iVar1 = EnterCriticalSection();
  DAT_OVRTitleScreenAndLoading__8007f14c =
       OpenEvent(0xf4000001,4,0x1000,FUN_OVRTitleScreenAndLoading__8007e3dc);
  DAT_OVRTitleScreenAndLoading__8007f150 =
       OpenEvent(0xf4000001,0x8000,0x1000,FUN_OVRTitleScreenAndLoading__8007e3f0);
  DAT_OVRTitleScreenAndLoading__8007f154 =
       OpenEvent(0xf4000001,0x100,0x1000,FUN_OVRTitleScreenAndLoading__8007e404);
  DAT_OVRTitleScreenAndLoading__8007f158 =
       OpenEvent(0xf4000001,0x2000,0x1000,FUN_OVRTitleScreenAndLoading__8007e418);
  DAT_OVRTitleScreenAndLoading__8007f15c =
       OpenEvent(0xf0000011,4,0x1000,FUN_OVRTitleScreenAndLoading__8007e42c);
  DAT_OVRTitleScreenAndLoading__8007f160 =
       OpenEvent(0xf0000011,0x8000,0x1000,FUN_OVRTitleScreenAndLoading__8007e440);
  DAT_OVRTitleScreenAndLoading__8007f164 =
       OpenEvent(0xf0000011,0x100,0x1000,FUN_OVRTitleScreenAndLoading__8007e454);
  DAT_OVRTitleScreenAndLoading__8007f168 =
       OpenEvent(0xf0000011,0x2000,0x1000,FUN_OVRTitleScreenAndLoading__8007e468);
  EnableEvent(DAT_OVRTitleScreenAndLoading__8007f14c);
  EnableEvent(DAT_OVRTitleScreenAndLoading__8007f150);
  EnableEvent(DAT_OVRTitleScreenAndLoading__8007f154);
  EnableEvent(DAT_OVRTitleScreenAndLoading__8007f158);
  EnableEvent(DAT_OVRTitleScreenAndLoading__8007f15c);
  EnableEvent(DAT_OVRTitleScreenAndLoading__8007f160);
  EnableEvent(DAT_OVRTitleScreenAndLoading__8007f164);
  EnableEvent(DAT_OVRTitleScreenAndLoading__8007f168);
  FUN_OVRTitleScreenAndLoading__8007e70c();
  if (iVar1 == 1) {
    ExitCriticalSection();
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__8007e658(void)

{
  int iVar1;
  
  iVar1 = EnterCriticalSection();
  CloseEvent(DAT_OVRTitleScreenAndLoading__8007f14c);
  CloseEvent(DAT_OVRTitleScreenAndLoading__8007f150);
  CloseEvent(DAT_OVRTitleScreenAndLoading__8007f154);
  CloseEvent(DAT_OVRTitleScreenAndLoading__8007f158);
  CloseEvent(DAT_OVRTitleScreenAndLoading__8007f15c);
  CloseEvent(DAT_OVRTitleScreenAndLoading__8007f160);
  CloseEvent(DAT_OVRTitleScreenAndLoading__8007f164);
  CloseEvent(DAT_OVRTitleScreenAndLoading__8007f168);
  if (iVar1 == 1) {
    ExitCriticalSection();
  }
  return;
}



void FUN_OVRTitleScreenAndLoading__8007e70c(void)

{
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f14c);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f150);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f154);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f158);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f15c);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f160);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f164);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f168);
  DAT_OVRTitleScreenAndLoading__8007f178 = 0;
  DAT_OVRTitleScreenAndLoading__8007f174 = 0;
  DAT_OVRTitleScreenAndLoading__8007f170 = 0;
  DAT_OVRTitleScreenAndLoading__8007f16c = 0;
  DAT_OVRTitleScreenAndLoading__8007f188 = 0;
  DAT_OVRTitleScreenAndLoading__8007f184 = 0;
  DAT_OVRTitleScreenAndLoading__8007f180 = 0;
  DAT_OVRTitleScreenAndLoading__8007f17c = 0;
  return;
}



int FUN_OVRTitleScreenAndLoading__8007e814(void)

{
  int iVar1;
  
  do {
    iVar1 = DAT_OVRTitleScreenAndLoading__8007f16c + DAT_OVRTitleScreenAndLoading__8007f170 * 2 +
            DAT_OVRTitleScreenAndLoading__8007f174 * 4 + DAT_OVRTitleScreenAndLoading__8007f178 * 8;
  } while (iVar1 == 0);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f15c);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f160);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f164);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f168);
  DAT_OVRTitleScreenAndLoading__8007f178 = 0;
  DAT_OVRTitleScreenAndLoading__8007f174 = 0;
  DAT_OVRTitleScreenAndLoading__8007f170 = 0;
  DAT_OVRTitleScreenAndLoading__8007f16c = 0;
  return iVar1 >> 1;
}



int FUN_OVRTitleScreenAndLoading__8007e8ec(void)

{
  int iVar1;
  
  do {
    iVar1 = DAT_OVRTitleScreenAndLoading__8007f17c + DAT_OVRTitleScreenAndLoading__8007f180 * 2 +
            DAT_OVRTitleScreenAndLoading__8007f184 * 4 + DAT_OVRTitleScreenAndLoading__8007f188 * 8;
  } while (iVar1 == 0);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f14c);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f150);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f154);
  TestEvent(DAT_OVRTitleScreenAndLoading__8007f158);
  DAT_OVRTitleScreenAndLoading__8007f188 = 0;
  DAT_OVRTitleScreenAndLoading__8007f184 = 0;
  DAT_OVRTitleScreenAndLoading__8007f180 = 0;
  DAT_OVRTitleScreenAndLoading__8007f17c = 0;
  return iVar1 >> 1;
}



int FUN_OVRTitleScreenAndLoading__8007e9c4(void)

{
  return DAT_OVRTitleScreenAndLoading__8007f16c + DAT_OVRTitleScreenAndLoading__8007f170 * 2 +
         DAT_OVRTitleScreenAndLoading__8007f174 * 4 + DAT_OVRTitleScreenAndLoading__8007f178 * 8;
}



int FUN_OVRTitleScreenAndLoading__8007ea00(void)

{
  return DAT_OVRTitleScreenAndLoading__8007f17c + DAT_OVRTitleScreenAndLoading__8007f180 * 2 +
         DAT_OVRTitleScreenAndLoading__8007f184 * 4 + DAT_OVRTitleScreenAndLoading__8007f188 * 8;
}



long _card_info(long chan)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&LAB_000000a0)();
  return lVar1;
}



long _card_clear(long chan)

{
  long lVar1;
  
  _new_card();
  lVar1 = _card_write(chan,0x3f,(uchar *)0x0);
  return lVar1;
}



long _card_load(long chan)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&LAB_000000a0)();
  return lVar1;
}



undefined4 FORMAT_OBJ_0(long param_1,long param_2,byte *param_3)

{
  byte bVar1;
  byte bVar2;
  long lVar3;
  uint uVar4;
  undefined4 uVar5;
  byte *pbVar6;
  int iVar7;
  int iVar8;
  byte local_a0 [128];
  
  iVar8 = 0;
  bVar2 = 0;
  iVar7 = 0x7e;
  pbVar6 = param_3;
  do {
    bVar1 = *pbVar6;
    pbVar6 = pbVar6 + 1;
    iVar7 = iVar7 + -1;
    bVar2 = bVar2 ^ bVar1;
  } while (-1 < iVar7);
  *pbVar6 = bVar2;
  do {
    if (7 < iVar8) {
      return 0;
    }
    _new_card();
    lVar3 = _card_write(param_1,param_2,param_3);
    if (lVar3 != 1) {
      return 0;
    }
    do {
      uVar4 = _card_status(param_1 >> 4);
    } while ((uVar4 & 1) == 0);
    bzero(local_a0,0x80);
    _new_card();
    lVar3 = _card_read(param_1,param_2,local_a0);
    if (lVar3 != 1) {
      printf(s_card_read_error_OVRTitleScreenAndLoading__8006d940);
      uVar5 = FORMAT_OBJ_F0(local_a0);
      return uVar5;
    }
    do {
      uVar4 = _card_status(param_1 >> 4);
      pbVar6 = local_a0;
    } while ((uVar4 & 1) == 0);
    bVar2 = 0;
    iVar7 = 0x7e;
    do {
      bVar1 = *pbVar6;
      pbVar6 = pbVar6 + 1;
      iVar7 = iVar7 + -1;
      bVar2 = bVar2 ^ bVar1;
    } while (-1 < iVar7);
    iVar8 = iVar8 + 1;
  } while (param_3[0x7f] != bVar2);
  return 1;
}



undefined4 FORMAT_OBJ_F0(byte *param_1)

{
  byte bVar1;
  long lVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  byte bVar6;
  int unaff_s0;
  int unaff_s1;
  uchar *unaff_s2;
  uchar *unaff_s3;
  long unaff_s4;
  int unaff_s5;
  
  while( true ) {
    bVar6 = 0;
    iVar5 = 0x7e;
    do {
      bVar1 = *param_1;
      param_1 = param_1 + 1;
      iVar5 = iVar5 + -1;
      bVar6 = bVar6 ^ bVar1;
    } while (-1 < iVar5);
    unaff_s1 = unaff_s1 + 1;
    if (unaff_s3[0x7f] == bVar6) {
      return 1;
    }
    if (7 < unaff_s1) {
      return 0;
    }
    _new_card();
    lVar2 = _card_write(unaff_s0,unaff_s4,unaff_s3);
    if (lVar2 != unaff_s5) break;
    do {
      uVar3 = _card_status(unaff_s0 >> 4);
    } while ((uVar3 & 1) == 0);
    bzero(unaff_s2,0x80);
    _new_card();
    lVar2 = _card_read(unaff_s0,unaff_s4,unaff_s2);
    if (lVar2 != unaff_s5) {
      printf(s_card_read_error_OVRTitleScreenAndLoading__8006d940);
      uVar4 = FORMAT_OBJ_F0(&stack0x00000010);
      return uVar4;
    }
    do {
      uVar3 = _card_status(unaff_s0 >> 4);
      param_1 = &stack0x00000010;
    } while ((uVar3 & 1) == 0);
  }
  return 0;
}



long _card_format(long chan)

{
  int iVar1;
  long lVar2;
  undefined4 *puVar3;
  int iVar4;
  
  iVar4 = 0;
  do {
    bzero((uchar *)&DAT_OVRTitleScreenAndLoading__8007f3bc,0x80);
    bzero((uchar *)(&DAT_OVRTitleScreenAndLoading__8007f18c + iVar4 * 8),0x20);
    (&DAT_OVRTitleScreenAndLoading__8007f18c)[iVar4 * 8] = 0xa0;
    (&DAT_OVRTitleScreenAndLoading__8007f190)[iVar4 * 8] = 0;
    (&DAT_OVRTitleScreenAndLoading__8007f194)[iVar4 * 0x10] = 0xffff;
    DAT_OVRTitleScreenAndLoading__8007f3bc = (&DAT_OVRTitleScreenAndLoading__8007f18c)[iVar4 * 8];
    DAT_OVRTitleScreenAndLoading__8007f3c0 = (&DAT_OVRTitleScreenAndLoading__8007f190)[iVar4 * 8];
    DAT_OVRTitleScreenAndLoading__8007f3c4 =
         *(undefined4 *)(&DAT_OVRTitleScreenAndLoading__8007f194 + iVar4 * 0x10);
    DAT_OVRTitleScreenAndLoading__8007f3c8 = (&DAT_OVRTitleScreenAndLoading__8007f198)[iVar4 * 8];
    DAT_OVRTitleScreenAndLoading__8007f3cc = (&DAT_OVRTitleScreenAndLoading__8007f19c)[iVar4 * 8];
    DAT_OVRTitleScreenAndLoading__8007f3d0 = (&DAT_OVRTitleScreenAndLoading__8007f1a0)[iVar4 * 8];
    DAT_OVRTitleScreenAndLoading__8007f3d4 = (&DAT_OVRTitleScreenAndLoading__8007f1a4)[iVar4 * 8];
    DAT_OVRTitleScreenAndLoading__8007f3d8 = (&DAT_OVRTitleScreenAndLoading__8007f1a8)[iVar4 * 8];
    iVar4 = iVar4 + 1;
    iVar1 = FORMAT_OBJ_0(chan,iVar4,&DAT_OVRTitleScreenAndLoading__8007f3bc);
    if (iVar1 != 1) {
      return 0;
    }
  } while (iVar4 < 0xf);
  iVar4 = 0;
  puVar3 = &DAT_OVRTitleScreenAndLoading__8007f36c;
  do {
    *puVar3 = 0xffffffff;
    bzero((uchar *)&DAT_OVRTitleScreenAndLoading__8007f3bc,0x80);
    DAT_OVRTitleScreenAndLoading__8007f3bc = *puVar3;
    iVar1 = FORMAT_OBJ_0(chan,iVar4 + 0x10,&DAT_OVRTitleScreenAndLoading__8007f3bc);
    iVar4 = iVar4 + 1;
    if (iVar1 != 1) {
      lVar2 = FORMAT_OBJ_320();
      return lVar2;
    }
    puVar3 = puVar3 + 1;
  } while (iVar4 < 0x14);
  bzero((uchar *)&DAT_OVRTitleScreenAndLoading__8007f3bc,0x80);
  DAT_OVRTitleScreenAndLoading__8007f3bc =
       CONCAT22(DAT_OVRTitleScreenAndLoading__8007f3bc._2_2_,0x434d);
  iVar4 = FORMAT_OBJ_0(chan,0);
  return (uint)(iVar4 == 1);
}



void FORMAT_OBJ_320(void)

{
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _new_card(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



long _card_write(long chan,long block,uchar *buf)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



// Possible A74.OBJ/InitCARD2

void InitCARD2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



// Possible PATCH.OBJ/PATCH_OBJ_0

void PATCH_OBJ_0(void)

{
  ushort in_v0;
  int in_v1;
  int iVar1;
  
  *(ushort *)(in_v1 + 10) = *(ushort *)(in_v1 + 10) | in_v0 | 0x12;
  iVar1 = 0x28;
  do {
    iVar1 = iVar1 + -1;
  } while (iVar1 != 0);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_OVRTitleScreenAndLoading__8007ee48(void)

{
  int in_v1;
  
  if ((*(uint *)(in_v1 + 0x1074) & 0x80) != 0) {
    do {
    } while ((*(uint *)(in_v1 + 0x1044) & 0x80) != 0);
                    // WARNING: Could not recover jumptable at 0x8007ee7c. Too many branches
                    // WARNING: Treating indirect jump as call
    (*_DAT_0000dffc)();
    return;
  }
  return;
}



// Possible PATCH.OBJ/PATCH_OBJ_70

void PATCH_OBJ_70(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_a000dfac)();
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// Possible PATCH.OBJ/PATCH_OBJ_84

void PATCH_OBJ_84(void)

{
  int iVar1;
  code *pcVar2;
  undefined4 uVar3;
  
  uVar3 = 0x8007eeb0;
  (*(code *)&SUB_a000df80)();
  DAT_OVRTitleScreenAndLoading__8007f43c = uVar3;
  EnterCriticalSection();
  iVar1 = (*(code *)&SUB_000000b0)();
  _DAT_0000dffc =
       (undefined4 *)
       (*(int *)(*(int *)(iVar1 + 0x18) + 0x70) * 0x10000 +
        (*(uint *)(*(int *)(iVar1 + 0x18) + 0x74) & 0xffff) + 0x28);
  pcVar2 = PATCH_OBJ_70;
  do {
    *_DAT_0000dffc = *(undefined4 *)pcVar2;
    pcVar2 = (code *)((int)pcVar2 + 4);
    _DAT_0000dffc = _DAT_0000dffc + 1;
  } while (pcVar2 != PATCH_OBJ_84);
  FlushCache();
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address
// Possible PATCH.OBJ/_patch_card

void _patch_card(void)

{
  int iVar1;
  code *pcVar2;
  undefined4 unaff_retaddr;
  
  DAT_OVRTitleScreenAndLoading__8007f43c = unaff_retaddr;
  EnterCriticalSection();
  iVar1 = (*(code *)&SUB_000000b0)();
  _DAT_0000dffc =
       (undefined4 *)
       (*(int *)(*(int *)(iVar1 + 0x18) + 0x70) * 0x10000 +
        (*(uint *)(*(int *)(iVar1 + 0x18) + 0x74) & 0xffff) + 0x28);
  pcVar2 = PATCH_OBJ_70;
  do {
    *_DAT_0000dffc = *(undefined4 *)pcVar2;
    pcVar2 = (code *)((int)pcVar2 + 4);
    _DAT_0000dffc = _DAT_0000dffc + 1;
  } while (pcVar2 != PATCH_OBJ_84);
  FlushCache();
  return;
}



// Possible PATCH.OBJ/_patch_card2

void _patch_card2(void)

{
  int iVar1;
  code *pcVar2;
  undefined4 unaff_retaddr;
  
  DAT_OVRTitleScreenAndLoading__8007f43c = unaff_retaddr;
  EnterCriticalSection();
  iVar1 = (*(code *)&SUB_000000b0)();
  iVar1 = *(int *)(iVar1 + 0x16c);
  pcVar2 = PATCH_OBJ_84;
  do {
    *(undefined4 *)(iVar1 + 0x9c8) = *(undefined4 *)pcVar2;
    pcVar2 = (code *)((int)pcVar2 + 4);
    iVar1 = iVar1 + 4;
  } while (pcVar2 != _patch_card);
  FlushCache();
  return;
}



// Possible PATCH.OBJ/_copy_memcard_patch

void _copy_memcard_patch(void)

{
  undefined4 *puVar1;
  code *pcVar2;
  
  puVar1 = (undefined4 *)&DAT_0000df80;
  pcVar2 = PATCH_OBJ_0;
  do {
    *puVar1 = *(undefined4 *)pcVar2;
    pcVar2 = (code *)((int)pcVar2 + 4);
    puVar1 = puVar1 + 1;
  } while (pcVar2 != PATCH_OBJ_70);
  return;
}



// Possible A75.OBJ/StartCARD2

void StartCARD2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



long _card_status(long drv)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



long _card_read(long chan,long block,uchar *buf)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}


