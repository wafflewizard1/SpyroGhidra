typedef unsigned char   undefined;

typedef unsigned char    bool;
typedef unsigned char    byte;
typedef unsigned int    dword;
typedef unsigned char    uchar;
typedef unsigned int    uint;
typedef unsigned long    ulong;
typedef unsigned char    undefined1;
typedef unsigned short    undefined2;
typedef unsigned int    undefined4;
typedef unsigned short    ushort;
typedef unsigned short    word;
typedef struct MAT3BY3 MAT3BY3, *PMAT3BY3;

struct MAT3BY3 {
    short mat[3][3];
};

typedef enum VecLength3DFlag {
    flag2D=0,
    flag3D=1
} VecLength3DFlag;

typedef struct Vec3 Vec3, *PVec3;

struct Vec3 { // 3D Vector
    int x;
    int y;
    int z;
};

typedef struct FullMobyInfo FullMobyInfo, *PFullMobyInfo;

typedef struct u8Vec3 u8Vec3, *Pu8Vec3;

typedef struct MobyRGB MobyRGB, *PMobyRGB;

struct MobyRGB {
    uchar B;
    uchar G;
    uchar R;
};

struct u8Vec3 {
    uchar x;
    uchar y;
    uchar z;
};

struct FullMobyInfo {
    int * ptr_mobyData;
    undefined field1_0x4;
    undefined field2_0x5;
    undefined field3_0x6;
    undefined field4_0x7;
    undefined field5_0x8;
    undefined field6_0x9;
    undefined field7_0xa;
    undefined field8_0xb;
    undefined field9_0xc;
    undefined field10_0xd;
    undefined field11_0xe;
    undefined field12_0xf;
    short UNK1;
    short interactState;
    int UNK2;
    int UNK3;
    int UNK4;
    int UNK5;
    int UNK6;
    int UNK7;
    short subType;
    short type;
    short unk10;
    char canDropObject;
    char UNK21;
    char currentAnimation;
    char nextAnimation;
    char currentKeyFrame;
    char nextKeyFrame;
    char speedRelated;
    char animationSpeed;
    char UNK13;
    char active;
    struct u8Vec3 rotation;
    char requiredHUD1;
    uchar state;
    char subState;
    char visable;
    char UNK_shadowRelated;
    struct MobyRGB UNK16;
    char color;
    short requiredHUD2;
    char UNK19;
    char heldValue;
    char UNK20;
    char maybeAudibleDistance;
    short scale;
};

typedef struct CapitalTextInfo CapitalTextInfo, *PCapitalTextInfo;

struct CapitalTextInfo {
    int xPos;
    int yPos;
    int size;
};

typedef struct MaybeSoundEffectMetadata MaybeSoundEffectMetadata, *PMaybeSoundEffectMetadata;

struct MaybeSoundEffectMetadata { // This might be the structure describing necessary metadata of a sound effect. It's stored in an array that is loaded dynamically for every level and can be accessed via the pointer at 0x800761d0
    undefined4 field0_0x0;
    undefined4 field1_0x4;
    undefined2 field2_0x8;
    short field3_0xa;
    ushort field4_0xc;
    short field5_0xe;
    undefined4 field6_0x10;
};

typedef struct SoundEffect SoundEffect, *PSoundEffect;

struct SoundEffect { // Might represent a sound effect being played in the game.
    int * ptr_mobyPlayingSound;
    ushort volumeLeft;
    ushort volumeRight;
    uint field3_0x8;
    byte field4_0xc;
    char localSoundID;
    ushort flags;
    short field7_0x10;
    short field8_0x12;
    int field9_0x14;
    int * field10_0x18;
};

typedef struct RGBFilter RGBFilter, *PRGBFilter;

struct RGBFilter {
    char R;
    char G;
    char B;
    char Alpha;
};


// WARNING! conflicting data type names: /u8Vec3 - /common.h/u8Vec3

typedef struct Mat33 Mat33, *PMat33;

struct Mat33 { // Representation of a 3x3 matrix
    int R12R11;
    int R21R13;
    int R23R22;
    int R32R31;
    int R33;
};

typedef struct LowercaseTextInfo LowercaseTextInfo, *PLowercaseTextInfo;

struct LowercaseTextInfo {
    int spacing;
    int yOffset;
    int size;
};

typedef ulong u_long;

typedef uchar u_char.conflict;

typedef ushort u_short.conflict;

typedef ulong u_long.conflict;

typedef ushort u_short;

typedef uchar u_char;

typedef struct VERTC VERTC, *PVERTC;

typedef struct CVECTOR CVECTOR, *PCVECTOR;

struct CVECTOR {
    u_char r;
    u_char g;
    u_char b;
    u_char cd;
};

struct VERTC {
    short vx;
    short vy;
    short vz;
    u_char tu;
    u_char tv;
    struct CVECTOR col;
};

typedef struct DR_ENV.conflict DR_ENV.conflict, *PDR_ENV.conflict;

struct DR_ENV.conflict {
    u_long.conflict tag;
    u_long code[15];
};

typedef struct TILE_8 TILE_8, *PTILE_8;

struct TILE_8 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
};

typedef struct POLY_G3 POLY_G3, *PPOLY_G3;

struct POLY_G3 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict r1;
    u_char.conflict g1;
    u_char.conflict b1;
    u_char.conflict pad1;
    short x1;
    short y1;
    u_char.conflict r2;
    u_char.conflict g2;
    u_char.conflict b2;
    u_char.conflict pad2;
    short x2;
    short y2;
};

typedef struct RECT.conflict RECT.conflict, *PRECT.conflict;

struct RECT.conflict {
    short x;
    short y;
    short w;
    short h;
};

typedef struct POLY_F3 POLY_F3, *PPOLY_F3;

struct POLY_F3 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    short x1;
    short y1;
    short x2;
    short y2;
};

typedef struct POLY_F4 POLY_F4, *PPOLY_F4;

struct POLY_F4 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    short x1;
    short y1;
    short x2;
    short y2;
    short x3;
    short y3;
};

typedef struct POLY_GT3 POLY_GT3, *PPOLY_GT3;

struct POLY_GT3 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict u0;
    u_char.conflict $2;
    u_short.conflict clut;
    u_char.conflict r1;
    u_char.conflict g1;
    u_char.conflict b1;
    u_char.conflict p1;
    short x1;
    short y1;
    u_char.conflict u1;
    u_char.conflict $3;
    u_short.conflict tpage;
    u_char.conflict r2;
    u_char.conflict g2;
    u_char.conflict b2;
    u_char.conflict p2;
    short x2;
    short y2;
    u_char.conflict u2;
    u_char.conflict v2;
    u_short.conflict pad2;
};

typedef struct POLY_FT4 POLY_FT4, *PPOLY_FT4;

struct POLY_FT4 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict u0;
    u_char.conflict $2;
    u_short.conflict clut;
    short x1;
    short y1;
    u_char.conflict u1;
    u_char.conflict $3;
    u_short.conflict tpage;
    short x2;
    short y2;
    u_char.conflict u2;
    u_char.conflict v2;
    u_short.conflict pad1;
    short x3;
    short y3;
    u_char.conflict u3;
    u_char.conflict v3;
    u_short.conflict pad2;
};

typedef struct POLY_FT3 POLY_FT3, *PPOLY_FT3;

struct POLY_FT3 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict u0;
    u_char.conflict $2;
    u_short.conflict clut;
    short x1;
    short y1;
    u_char.conflict u1;
    u_char.conflict $3;
    u_short.conflict tpage;
    short x2;
    short y2;
    u_char.conflict u2;
    u_char.conflict v2;
    u_short.conflict pad1;
};

typedef struct DR_MODE DR_MODE, *PDR_MODE;

struct DR_MODE {
    u_long.conflict tag;
    u_long.conflict code[2];
};

typedef struct LINE_F3 LINE_F3, *PLINE_F3;

struct LINE_F3 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    short x1;
    short y1;
    short x2;
    short y2;
    u_long pad;
};

typedef struct DR_ENV DR_ENV, *PDR_ENV;

struct DR_ENV {
    u_long tag;
    u_long code[15];
};

typedef struct DR_OFFSET DR_OFFSET, *PDR_OFFSET;

struct DR_OFFSET {
    u_long.conflict tag;
    u_long.conflict code[2];
};

typedef struct RECT RECT, *PRECT;

struct RECT {
    short x;
    short y;
    short w;
    short h;
};

typedef struct POLY_G4 POLY_G4, *PPOLY_G4;

struct POLY_G4 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict r1;
    u_char.conflict g1;
    u_char.conflict b1;
    u_char.conflict pad1;
    short x1;
    short y1;
    u_char.conflict r2;
    u_char.conflict g2;
    u_char.conflict b2;
    u_char.conflict pad2;
    short x2;
    short y2;
    u_char.conflict r3;
    u_char.conflict g3;
    u_char.conflict b3;
    u_char.conflict pad3;
    short x3;
    short y3;
};

typedef struct TILE_16 TILE_16, *PTILE_16;

struct TILE_16 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
};

typedef struct SPRT_16 SPRT_16, *PSPRT_16;

struct SPRT_16 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict u0;
    u_char.conflict $2;
    u_short.conflict clut;
};

typedef struct LINE_G2 LINE_G2, *PLINE_G2;

struct LINE_G2 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict r1;
    u_char.conflict g1;
    u_char.conflict b1;
    u_char.conflict p1;
    short x1;
    short y1;
};

typedef struct TILE TILE, *PTILE;

struct TILE {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    short w;
    short h;
};

typedef struct DISPENV DISPENV, *PDISPENV;

struct DISPENV {
    struct RECT.conflict disp;
    struct RECT.conflict screen;
    u_char.conflict isinter;
    u_char.conflict isrgb24;
    u_char.conflict pad0;
    u_char.conflict pad1;
};

typedef struct DR_AREA DR_AREA, *PDR_AREA;

struct DR_AREA {
    u_long.conflict tag;
    u_long.conflict code[2];
};

typedef struct LINE_F4 LINE_F4, *PLINE_F4;

struct LINE_F4 {
    u_long tag;
    u_char r0;
    u_char g0;
    u_char b0;
    u_char code;
    short x0;
    short y0;
    short x1;
    short y1;
    short x2;
    short y2;
    short x3;
    short y3;
    u_long pad;
};

typedef struct SPRT_8 SPRT_8, *PSPRT_8;

struct SPRT_8 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict u0;
    u_char.conflict $2;
    u_short.conflict clut;
};

typedef struct SPRT SPRT, *PSPRT;

struct SPRT {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict u0;
    u_char.conflict $2;
    u_short.conflict clut;
    short w;
    short h;
};

typedef struct LINE_F2 LINE_F2, *PLINE_F2;

struct LINE_F2 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    short x1;
    short y1;
};

typedef struct DR_TPAGE DR_TPAGE, *PDR_TPAGE;

struct DR_TPAGE {
    u_long.conflict tag;
    u_long.conflict code[1];
};

typedef struct DR_LOAD DR_LOAD, *PDR_LOAD;

struct DR_LOAD {
    u_long.conflict tag;
    u_long.conflict code[3];
    u_long.conflict p[13];
};

typedef struct LINE_G3 LINE_G3, *PLINE_G3;

struct LINE_G3 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict r1;
    u_char.conflict g1;
    u_char.conflict b1;
    u_char.conflict p1;
    short x1;
    short y1;
    u_char.conflict r2;
    u_char.conflict g2;
    u_char.conflict b2;
    u_char.conflict p2;
    short x2;
    short y2;
    u_long.conflict pad;
};

typedef struct DR_TWIN DR_TWIN, *PDR_TWIN;

struct DR_TWIN {
    u_long.conflict tag;
    u_long.conflict code[2];
};

typedef struct DR_MOVE DR_MOVE, *PDR_MOVE;

struct DR_MOVE {
    u_long tag;
    u_long code[5];
};

typedef struct TILE_1 TILE_1, *PTILE_1;

struct TILE_1 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
};

typedef struct LINE_G4 LINE_G4, *PLINE_G4;

struct LINE_G4 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict r1;
    u_char.conflict g1;
    u_char.conflict b1;
    u_char.conflict p1;
    short x1;
    short y1;
    u_char.conflict r2;
    u_char.conflict g2;
    u_char.conflict b2;
    u_char.conflict p2;
    short x2;
    short y2;
    u_char.conflict r3;
    u_char.conflict g3;
    u_char.conflict b3;
    u_char.conflict p3;
    short x3;
    short y3;
    u_long.conflict pad;
};

typedef struct DRAWENV DRAWENV, *PDRAWENV;

struct DRAWENV {
    struct RECT clip;
    short ofs[2];
    struct RECT tw;
    u_short tpage;
    u_char dtd;
    u_char dfe;
    u_char isbg;
    u_char r0;
    u_char g0;
    u_char b0;
    struct DR_ENV dr_env;
};

typedef struct POLY_GT4 POLY_GT4, *PPOLY_GT4;

struct POLY_GT4 {
    u_long.conflict tag;
    u_char.conflict r0;
    u_char.conflict g0;
    u_char.conflict b0;
    u_char.conflict code;
    short x0;
    short y0;
    u_char.conflict u0;
    u_char.conflict $2;
    u_short.conflict clut;
    u_char.conflict r1;
    u_char.conflict g1;
    u_char.conflict b1;
    u_char.conflict p1;
    short x1;
    short y1;
    u_char.conflict u1;
    u_char.conflict $3;
    u_short.conflict tpage;
    u_char.conflict r2;
    u_char.conflict g2;
    u_char.conflict b2;
    u_char.conflict p2;
    short x2;
    short y2;
    u_char.conflict u2;
    u_char.conflict v2;
    u_short.conflict pad2;
    u_char.conflict r3;
    u_char.conflict g3;
    u_char.conflict b3;
    u_char.conflict p3;
    short x3;
    short y3;
    u_char.conflict u3;
    u_char.conflict v3;
    u_short.conflict pad3;
};

#define __WORDSIZE 32

typedef int __ssize_t;

typedef __ssize_t ssize_t;

typedef long __off_t;

typedef struct MATRIX MATRIX, *PMATRIX;

struct MATRIX {
    short m[3][3];
    long t[3];
};

typedef struct VECTOR VECTOR, *PVECTOR;

struct VECTOR {
    long vx;
    long vy;
    long vz;
    long pad;
};

typedef struct SVECTOR SVECTOR, *PSVECTOR;

struct SVECTOR {
    short vx;
    short vy;
    short vz;
    short pad;
};

typedef struct DVECTOR DVECTOR, *PDVECTOR;

struct DVECTOR {
    short vx;
    short vy;
};

typedef int sint32;


// WARNING! conflicting data type names: /custom_types.h/bool - /bool

typedef int s32;

typedef uint u32;

typedef short s16;

typedef char sint8;

typedef ushort u16;

typedef uint uint32;

typedef ushort uint16;

typedef uchar u8;

typedef char s8;

typedef short sint16;

typedef uchar uint8;

#define FALSE 0

#define HEXIDECIMAL 16

#define TRUE 1

#define DECIMAL 10

#define NOP 65011720

#define NULL_VALUE 0

#define NULL 0

#define BINARY 2

typedef struct MobyData_Dragon MobyData_Dragon, *PMobyData_Dragon;


// WARNING! conflicting data type names: /vector.h/Vec3 - /Vec3

typedef struct Angle Angle, *PAngle;

struct Angle {
    int yaw;
    int pitch;
    int roll;
};

struct MobyData_Dragon {
    struct Vec3 targetCameraPosition;
    struct Angle targetCameraAngle;
    int whichDragonCutsceneFromLevelToPlay;
    int unk1;
    int mobyNumberInLevelMobys;
    int unk_PlayCutsceneRelated;
    struct Vec3 targetSpyroPosition;
    int unk3;
    int dragonNameToShow;
    int audioToPlay;
    int audioDelayInFrames;
    int shakeTimer;
};

typedef struct __jmp_buf_tag __jmp_buf_tag, *P__jmp_buf_tag;

typedef int __jmp_buf[6];

typedef struct __sigset_t __sigset_t, *P__sigset_t;

struct __sigset_t {
    ulong __val[32];
};

struct __jmp_buf_tag {
    __jmp_buf __jmpbuf;
    int __mask_was_saved;
    struct __sigset_t __saved_mask;
};

typedef ulong size_t;

typedef enum GameStates {
    GAMESTATE_GAMEPLAY=0,
    GAMESTATE_LOADING=1,
    GAMESTATE_PAUSED=2,
    GAMESTATE_INVENTORY=3,
    GAMESTATE_DEATH=4,
    GAMESTATE_GAME_OVER=5,
    GAMESTATE_BETA_DRAGON_TEXTBOX_MAYBE=6,
    GAMESTATE_FLIGHT_LEVEL_MENU=7,
    GAMESTATE_DRAGON_STATE=8,
    GAMESTATE_FLY_IN=9,
    GAMESTATE_EXITING_LEVEL=10,
    GAMESTATE_DRAGON_FAIRY_TEXTBOX=11,
    GAMESTATE_BALLOONIST=12,
    GAMESTATE_TITLE_SCREEN=13,
    GAMESTATE_CUTSCENE=14,
    GAMESTATE_CREDITS=15
} GameStates;

typedef enum InventoryMenuDirection {
    INVENTORY_LEFT=-64,
    INVENTORY_NO_DIRECTION=0,
    INVENTORY_RIGHT=64
} InventoryMenuDirection;

typedef enum InventoryMenuSelections {
    ARTISANS_MENU=0,
    PEACE_KEEPERS_MENU=1,
    MAGIC_CRAFTERS_MENU=2,
    BEAST_MAKERS_MENU=3,
    DREAM_WEAVERS_MENU=4,
    GNASTYS_WORLD_MENU=5
} InventoryMenuSelections;

typedef enum MovementSubStates {
    MOVEMENT_SUBSTATE_LOADING=8,
    MOVEMENT_SUBSTATE_EXIT_PORTAL=9,
    MOVEMENT_SUBSTATE_FLY_IN_CAMERA_180=10,
    MOVEMENT_SUBSTATE_FLY_IN_LOOP=10
} MovementSubStates;

typedef enum LevelFlyInAnimations {
    FACING_FORWARD=51748,
    FACING_RIGHT=51772,
    RETURNING_HOME=51796,
    FACING_LEFT=51820,
    FACING_BACKWARDS=51844,
    FACING_DIAGONAL=51868
} LevelFlyInAnimations;

typedef struct Vec2 Vec2, *PVec2;

struct Vec2 {
    int x;
    int y;
};

typedef enum inventoryMenuSelections {
    ARTISANS_MENU=0,
    PEACE_KEEPERS_MENU=1,
    MAGIC_CRAFTERS_MENU=2,
    BEAST_MAKERS_MENU=3,
    DREAM_WEAVERS_MENU=4,
    GNASTYS_WORLD_MENU=5
} inventoryMenuSelections;


// WARNING! conflicting data type names: /common.h/Vec3 - /Vec3

typedef enum spyroHealthStates {
    NO_SPARX=0,
    GREEN_SPARX=1,
    BLUE_SPARX=2,
    YELLOW_SPARX=3
} spyroHealthStates;

typedef struct Vec3Padding Vec3Padding, *PVec3Padding;

struct Vec3Padding {
    int x;
    int y;
    int z;
    int padding;
};

typedef struct u8Angle u8Angle, *Pu8Angle;

struct u8Angle {
    char yaw;
    char pitch;
    char roll;
};


// WARNING! conflicting data type names: /common.h/RGBFilter - /RGBFilter

typedef enum levelFlyInAnimations {
    FACING_FORWARD=51748,
    FACING_RIGHT=51772,
    RETURNING_HOME=51796,
    FACING_LEFT=51820,
    FACING_BACKWARDS=51844,
    FACING_DIAGONAL=51868
} levelFlyInAnimations;

typedef enum SpyroHealthStates {
    NO_SPARX=0,
    GREEN_SPARX=1,
    BLUE_SPARX=2,
    YELLOW_SPARX=3
} SpyroHealthStates;

typedef struct OpaqueShapeInfo OpaqueShapeInfo, *POpaqueShapeInfo;

struct OpaqueShapeInfo {
};

typedef struct u8Vec2 u8Vec2, *Pu8Vec2;

struct u8Vec2 {
    uchar x;
    uchar y;
};

typedef struct NOPHexCode NOPHexCode, *PNOPHexCode;

struct NOPHexCode {
    int hexCode1;
    int hexCode2;
};

typedef enum Direction {
    LEFT=0,
    RIGHT=1
} Direction;

typedef struct SpyroHeadAngle SpyroHeadAngle, *PSpyroHeadAngle;

struct SpyroHeadAngle {
    short roll;
    short pad1;
    short pitch;
    short pad2;
    short yaw;
    short pad3;
};

typedef struct u16Vec2 u16Vec2, *Pu16Vec2;

struct u16Vec2 {
    ushort x;
    ushort y;
};

typedef struct u16Vec3 u16Vec3, *Pu16Vec3;

struct u16Vec3 {
    ushort x;
    ushort y;
    ushort z;
};

typedef struct u8RGB u8RGB, *Pu8RGB;

struct u8RGB {
    uchar R;
    uchar G;
    uchar B;
};

typedef struct u8BGR u8BGR, *Pu8BGR;

struct u8BGR {
    uchar B;
    uchar G;
    uchar R;
};

typedef enum GameState {
    GAMESTATE_GAMEPLAY=0,
    GAMESTATE_LOADING=1,
    GAMESTATE_PAUSED=2,
    GAMESTATE_INVENTORY=3,
    GAMESTATE_DEATH=4,
    GAMESTATE_GAME_OVER=5,
    GAMESTATE_BETA_DRAGON_TEXTBOX_MAYBE=6,
    GAMESTATE_FLIGHT_LEVEL_MENU=7,
    GAMESTATE_DRAGON_STATE=8,
    GAMESTATE_FLY_IN=9,
    GAMESTATE_EXITING_LEVEL=10,
    GAMESTATE_DRAGON_FAIRY_TEXTBOX=11,
    GAMESTATE_BALLOONIST=12,
    GAMESTATE_TITLE_SCREEN=13,
    GAMESTATE_CUTSCENE=14,
    GAMESTATE_CREDITS=15
} GameState;

typedef enum BalloonistStates {
    BALLOONIST_STATE_NEVER_TALKED_TO_BALLOONIST=0,
    BALLOONIST_STATE_TEXTBOX=1,
    BALLOONIST_STATE_JUMPING_ONTO_BALLOON=2,
    BALLOONIST_STATE_BALLOON_RISING=3,
    BALLOONIST_STATE_BALLOON_LOADING_PART_1=4,
    BALLOONIST_STATE_BALLOON_LOADING_PART_2=5,
    BALLOONIST_STATE_BALLOON_LOWERING=6,
    BALLOONIST_STATE_JUMPING_OUT_OF_BALLOON=7
} BalloonistStates;

typedef struct u16Angle u16Angle, *Pu16Angle;

struct u16Angle {
    short yaw;
    short pitch;
    short roll;
};

typedef struct CameraAngle CameraAngle, *PCameraAngle;

struct CameraAngle {
    short roll;
    short pitch;
    short yaw;
};

typedef struct u8RGBA u8RGBA, *Pu8RGBA;

struct u8RGBA {
    uchar R;
    uchar G;
    uchar B;
    uchar opacity;
};

typedef enum gameStates {
    GAMEPLAY=0,
    LOADING=1,
    PAUSED=2,
    INVENTORY=3,
    DEATH=4,
    GAME_OVER=5,
    BETA_DRAGON_TEXTBOX_MAYBE=6,
    FLIGHT_LEVEL_COMPLETE=7,
    DRAGON_STATE=8,
    FLY_IN=9,
    EXITING_LEVEL=10,
    DRAGON_FAIRY_TEXTBOX=11,
    BALLOONIST_STATE=12,
    TITLE_SCREEN=13,
    CUTSCENE=14,
    CREDITS=15
} gameStates;

typedef enum StartMenuSelections {
    STARTMENU_CONTINUE=0,
    STARTMENU_OPTIONS=1,
    STARTMENU_INVENTORY=2,
    STARTMENU_EXIT_LEVEL=3,
    STARTMENU_QUIT_GAME=3
} StartMenuSelections;

typedef enum LevelIDS {
    ARTISANS_ID=10,
    STONE_HILL_ID=11,
    DARK_HALLOW_ID=12,
    TOWN_SQUARE_ID=13,
    TOASTY_ID=14,
    SUNNY_FLIGHT_ID=15,
    PEACE_KEEPERS_ID=20,
    DRY_CANYON_ID=21,
    CLIFF_TOWN_ID=22,
    ICE_CAVERN_ID=23,
    SHEMP_ID=24,
    NIGHT_FLIGHT_ID=25,
    MAGIC_CRAFTERS_ID=30,
    ALPINE_RIDGE_ID=31,
    HIGH_CAVES_ID=32,
    WIZARD_PEAK_ID=33,
    BLOWHARD_ID=34,
    CRYSTAL_FLIGHT_ID=35,
    BEAST_MAKERS_ID=40,
    TERRACE_VILLAGE_ID=41,
    MISTY_BOG_ID=42,
    TREE_TOPS_ID=43,
    METALHEAD_ID=44,
    WILD_FLIGHT_ID=44,
    DREAM_WEAVERS_ID=50,
    DARK_PASSAGE_ID=51,
    LOFTY_CASTLE_ID=52,
    HAUNTED_TOWERS_ID=53,
    JACQUES_ID=54,
    ICY_FLIGHT_ID=55,
    GNASTYS_WORLD_ID=60,
    GNORC_COVE_ID=61,
    TWILIGHT_HARBOR_ID=62,
    GNASTY_GNORC_ID=63,
    GNASTYS_LOOT_ID=64
} LevelIDS;

typedef enum Buttons {
    L2_BUTTON=1,
    R2_BUTTON=2,
    L1_BUTTON=4,
    R1_BUTTON=8,
    TRIANGLE_BUTTON=16,
    CIRCLE_BUTTON=32,
    X_BUTTON=64,
    SQUARE_BUTTON=128,
    SELECT_BUTTON=256,
    L3_BUTTON=512,
    R3_BUTTON=1024,
    START_BUTTON=2048,
    UP_BUTTON=4096,
    RIGHT_BUTTON=8192,
    DOWN_BUTTON=16384,
    LEFT_BUTTON=32768
} Buttons;

#define SHAPES_SCREEN_TOP_EDGE 1

#define FOLLOW_SPYRO 201383669

#define SECONDS 30

#define SCREEN_BOTTOM_EDGE 232

#define SHAPES_SCREEN_LEFT_EDGE 1

#define SHAPES_SCREEN_RIGHT_EDGE 512

#define SCREEN_RIGHT_EDGE 512

#define SCREEN_LEFT_EDGE 0

#define GAME_UNIT 64

#define WORLD_UNIT 4096

#define DONT_FOLLOW_SPYRO 0

#define SHAPES_SCREEN_BOTTOM_EDGE 232

#define WORLD_SCALE 4096

#define SCREEN_TOP_EDGE 0

typedef enum CameraMode {
    CAMERA_MODE_ACTIVE=2,
    CAMERA_MODE_PASSIVE=82
} CameraMode;

typedef struct CdlLOC CdlLOC, *PCdlLOC;

struct CdlLOC {
    u_char.conflict minute;
    u_char.conflict second;
    u_char.conflict sector;
    u_char.conflict track;
};

typedef void (* CdlCB)(u_char.conflict, u_char.conflict *);

typedef struct CdlATV CdlATV, *PCdlATV;

struct CdlATV {
    u_char.conflict val0;
    u_char.conflict val1;
    u_char.conflict val2;
    u_char.conflict val3;
};

typedef struct DIRENTRY DIRENTRY, *PDIRENTRY;

struct DIRENTRY {
};


// WARNING! conflicting data type names: /spyro.h/u8Angle - /common.h/u8Angle


// WARNING! conflicting data type names: /spyro.h/Vec3 - /Vec3

typedef enum SpyroStates {
    IDLE_STANDING=0,
    BEGIN_WALK=1,
    WALKING=2,
    END_WALK=3,
    PIVOT=4,
    JUMP=5,
    FLOP=6,
    HURT_ZAPPED=7,
    ROLL_LEFT=9,
    ROLL_RIGHT=10,
    CHARGE=11,
    BONK=12,
    LEDGE_PEER=13,
    HURT_PITCH_HIGH=14,
    GLIDE=15,
    TRIANGLE_DROP=16,
    WHIRLWIND=17,
    IDLE_LOOK_AROUND=18,
    ROLL_DOWN_SLOPE=19,
    CHARGING_AIR=20,
    UPHILL_WALK=21,
    HURT_ROLL=22,
    PULL_BACK_GLIDE=23,
    CHARGING_AIR_SC_JUMP=24,
    HURT_SQUISHED=25,
    CANNON_ROTATE=26,
    HURT_YAW=27,
    HURT_PITCH_LOW=28,
    DROWNING=29,
    DEATH_SPIN=30,
    DEATH_SQUISHED=31,
    SUPERFLY=32,
    SUPERFLY_ASCENDING=33,
    SUPERFLY_DESCENDING=34,
    IDLE_SIT=39,
    SUPERCHARGE=44
} SpyroStates;

typedef struct Spyro Spyro, *PSpyro;

struct Spyro {
    struct Vec3 position;
    struct u8Angle RelativeSparxAngle;
    char pad1;
    int unkown1;
    int unkown2;
    char currentAnim;
    char nextAnim;
    char maybe_currentAnimDupe;
    char maybe_nextAnimDupe;
    char maybe_currentAnimDupe2;
    char maybe_nextAnimDupe2;
    char currentKeyfame;
    char nextKeyframe;
    char maybe_keyframeDupe1;
    char maybe_keyframeDupe2;
    char maybe_keyframeDupe3;
    char maybe_keyframeDupe4;
    char maybe_AnimSpeedRelated;
    char maybe_animSpeedRelatedDupe1;
    char maybe_animSpeedRelatedDupe2;
    char unkown3;
    struct u8RGBA colorFilter;
    short maybe_weirdDamageAnimRelated;
    short unkown4;
    int pad2;
    int unkown5;
    int unkown6;
    int unkown7;
    int unkown8;
    int unkown9;
    int pad3;
    int pad4;
    int pad5;
    int maybe_animUpdateRelated;
    char animSpeed;
    char unkown10;
    char unkown11;
    char unkown12;
    int maybe_animStateRelated;
    int maybe_headAnimRelated;
    int unkown_anim1;
    int maybe_headAnimRelated2;
    int maybe_tailAnimRelated;
    int unkown13;
    int maybe_tailAnimRelated2;
    int state;
    int subState;
    int framesInCurrentState;
    int unkown14;
    int unkown15;
    struct Vec3 maybe_positionRelative;
    int timer_framesIdle;
    int timer_framesInAir;
    int unkown_heightRelated;
    int unkown_angleRelated;
    int unkown_angleRelated2;
    int unkown_angleRelated3;
    int unkown_angleRelated4;
    int unkown_angleRelated5;
    int unkown_portalRelated;
    int unkown_portalRelated2;
    int unkown_portalRelated3;
    int unkown_landingMomentumRelated;
    int unkown_angleRelated6;
    int unkown_angleRelated7;
    struct Vec3 groundedChargeMomentum;
    struct Vec3 walkingMomentum;
    struct Vec3 groundedChargeMomentum2;
    struct Vec3 airMomentum;
    int unkown_angleRelated8;
    int unkown16;
    int unkown17;
    int unkown18;
    int unkown19;
    int maybe_glideAndWalkOffLedgeZMomentum;
    int absoluteMomentum;
    struct Angle angle;
    int maybe_speedRelated;
    int unkown21;
    int unkown22;
    int unkown23;
    int unkown24;
    int unkown25;
    int unkown26;
    int walkingAcceleration;
    int turnAcceleration;
    int z_Acceleration;
    int glideUsed;
    int isGliding;
    int neutralJumpZPos;
    int isGrounded;
    int iFramesTimer;
    int health;
    int drownTimer;
    int maybe_superchargeRelated;
    int isOverGoop;
    int maybe_drowningRelated;
    int unkown32;
    struct Vec3 lastGroundedPosition;
    int unkown33;
    int unkown34;
    int unkown35;
    int autoFlameRelated;
    int maybe_isFlaming;
    int unkown36;
    int maybe_flameChargeTimerRelated;
    struct SpyroHeadAngle TargetHeadAngle;
    struct SpyroHeadAngle headAngle;
    int maybe_headRollTransitionSpeed;
    int maybe_headPitchTransitionSpeed;
    int maybe_headYawTransitionSpeed;
    int maybe_smokeFlameStuff1;
    int maybe_smokeFlameStuff2;
    int maybe_smokeFlameStuff3;
    int maybe_smokeFlameStuff4;
    int maybe_smokeFlameStuff5;
    int unkown37;
    int unkown38;
    int unkown39;
    int maybe_tailRelated;
    int maybe_chargeTimerRelated;
    int isMovementLocked;
    int maybe_weirdResearchThis;
    int unkownOops;
    int unkown40;
    int unkown41;
    int unkown42;
    int unkown43;
    int unkown44;
    int unkown45;
    int unkown46;
    int unkown47;
    int unkown48;
    int unkown49;
    int unkown50;
    int unkown51;
    int unkown52;
    int unkown53;
    int unkown54;
    int unkown55;
    int unkown56;
    int unkown57;
    int unkown58;
    int unkown59;
    int canSuperfly;
    int isOnSuperchargeGround;
    int maybe_pitchRelatedFlag;
    int rollMomentum;
    int pitchMomentum;
};

typedef void (* MemCB)(ulong, ulong);

typedef struct MATRIX3BY3 MATRIX3BY3, *PMATRIX3BY3;

struct MATRIX3BY3 {
    short matrix[3][3];
};

typedef enum DrawOpaqueShapeColorSpaces {
    RGB_DARK=0,
    RGB=32,
    CMY=64
} DrawOpaqueShapeColorSpaces;

typedef struct Poly3F Poly3F, *PPoly3F;

struct Poly3F {
    int tag;
    char red;
    char green;
    char blue;
    char code;
    struct u16Vec2 point1Pos;
    struct u16Vec2 point2Pos;
    struct u16Vec2 point3Pos;
};

typedef struct OpaqueShape OpaqueShape, *POpaqueShape;

struct OpaqueShape {
    int PADDING1;
    int PADDING2;
    int PADDING3;
    int tag;
    char red;
    char green;
    char blue;
    char code;
    struct u16Vec2 point1Pos;
    struct u16Vec2 point2Pos;
    struct u16Vec2 point3Pos;
    struct u16Vec2 point4Pos;
};

typedef struct ShadedLine ShadedLine, *PShadedLine;

struct ShadedLine {
    int tag;
    struct u8RGB colorP1;
    char code;
    struct u16Vec2 point1Pos;
    struct u8RGB colorP2;
    char PADDING5;
    struct u16Vec2 point2Pos;
};

typedef struct Poly4FTexture Poly4FTexture, *PPoly4FTexture;

struct Poly4FTexture {
    int tag;
    char red;
    char green;
    char blue;
    char code;
    struct u16Vec2 point1Pos;
    struct u8Vec2 texturePoint1Pos;
    struct u8Vec2 clut;
    struct u16Vec2 point2Pos;
    struct u8Vec2 texturePoint2Pos;
    short texturePage;
    struct u16Vec2 point3Pos;
    struct u8Vec2 texturePoint3Pos;
    struct u16Vec2 point4Pos;
    struct u8Vec2 texturePoint4Pos;
};

typedef struct FullLine FullLine, *PFullLine;

struct FullLine {
    char PADDING1;
    char PADDING2;
    char PADDING3;
    char PADDING4;
    struct u8RGB colorP1;
    char maybeType;
    struct u16Vec2 point1Pos;
    struct u8RGB colorP2;
    char PADDING5;
    struct u16Vec2 point2Pos;
};

typedef struct Poly4F Poly4F, *PPoly4F;

struct Poly4F {
    int tag;
    char red;
    char green;
    char blue;
    char code;
    struct u16Vec2 point1Pos;
    struct u16Vec2 point2Pos;
    struct u16Vec2 point3Pos;
    struct u16Vec2 point4Pos;
};

typedef struct LineGradient LineGradient, *PLineGradient;

struct LineGradient {
    struct u16Vec2 point1Pos;
    struct u16Vec2 point2Pos;
    struct u8RGB colorP1;
    struct u8RGB colorP2;
};

typedef struct Line Line, *PLine;

struct Line {
    int tag;
    struct u8RGB color;
    char code;
    struct u16Vec2 point1Pos;
    struct u16Vec2 point2Pos;
};

typedef enum ShapeCode {
    SHAPECODE_TRIANGLE_OPAQUE=32,
    SHAPECODE_TRIANGLE_TRANSPARENT=34,
    SHAPECODE_SQUARE_OPAQUE=40,
    SHAPECODE_SQUARE_TRANSPARENT=42,
    SHAPECODE_LINE_OPAQUE=64,
    SHAPECODE_LINE_TRANSPARENT=66,
    SHAPECODE_SHADEDLINE_OPAQUE=80,
    SHAPECODE_SHADEDLINE_TRANSPARENT=82
} ShapeCode;

typedef enum SpeakerSetup {
    STEREO=0,
    MONO=1
} SpeakerSetup;

typedef enum PauseMenuState {
    PAUSED_MAIN=0,
    PAUSED_OPTIONS=1,
    PAUSED_QUIT_GAME=2
} PauseMenuState;

typedef enum GemColors {
    GEM_COLOR_BLACK=0,
    GEM_COLOR_RED=1,
    GEM_COLOR_GREEN=2,
    GEM_COLOR_BLUE=3,
    GEM_COLOR_YELLOW=4,
    GEM_COLOR_PINK=5,
    GEM_COLOR_WINE_RED=11,
    GEM_COLOR_SILVER=19,
    GEM_COLOR_BROWN=49,
    GEM_COLOR_SUNSET=53,
    GEM_COLOR_BLUE_PURPLE=54,
    GEM_COLOR_PURPLE=54,
    GEM_COLOR_SKY_BLUE=55,
    GEM_COLOR_DARK_PURPLE=58,
    GEM_COLOR_BRONZE=59,
    GEM_COLOR_TURQUOISE=60,
    GEM_COLOR_NEON_PINK=64,
    GEM_COLOR_NEON_GREEN=66,
    GEM_COLOR_CAMO_GREEN=112,
    GEM_COLOR_LIME_GREEN=116,
    GEM_COLOR_ORANGE=118,
    GEM_COLOR_GOLD=120,
    GEM_COLOR_WHITE=124,
    GEM_COLOR_VIOLET=141,
    GEM_COLOR_MAGENTA=164,
    GEM_COLOR_TAN_YELLOW=172,
    GEM_COLOR_LIGHT_PINK=174,
    GEM_COLOR_EMERALD_GREEN=246,
    GEM_COLOR_BRIGHT_YELLOW=254
} GemColors;

typedef enum MobyColors {
    MOBY_COLOR_TRANSPARENT=0,
    MOBY_COLOR_WHITE=1,
    MOBY_COLOR_BLACK=6,
    MOBY_COLOR_MATTE_GREY=7,
    MOBY_COLOR_EMERALD_GREEN=9,
    MOBY_COLOR_BLUE=10,
    MOBY_COLOR_GOLD=11,
    MOBY_COLOR_GREY=12,
    MOBY_COLOR_RED=13,
    MOBY_COLOR_GREEN=14,
    MOBY_COLOR_PURPLE=23,
    MOBY_COLOR_NEON_YELLOW=24,
    MOBY_COLOR_CHEESE_YELLOW=25,
    MOBY_COLOR_DARK_RED=31,
    MOBY_COLOR_NEON_RED=32,
    MOBY_COLOR_DARK_GREEN=33,
    MOBY_COLOR_NEON_GREEN=34,
    MOBY_COLOR_NEON_BLUE=36,
    MOBY_COLOR_DARK_GOLD=37,
    MOBY_COLOR_DARK_PURPLE=39,
    MOBY_COLOR_NEON_PURPLE=40,
    MOBY_COLOR_SHINY_RED=41,
    MOBY_COLOR_SHINY_GREEN=42,
    MOBY_COLOR_SHINY_BLUE=43,
    MOBY_COLOR_SHINY_GOLD=44,
    MOBY_COLOR_SHINY_PURPLE=45,
    MOBY_COLOR_SILVER=46,
    MOBY_COLOR_MATTE_RED=48,
    MOBY_COLOR_SKY_BLUE=57,
    MOBY_COLOR_CYAN=126,
    MOBY_COLOR_PINK=165,
    MOBY_COLOR_INDIGO=166,
    MOBY_COLOR_MATTE_GREEN=172,
    MOBY_COLOR_NEON_LIME=173,
    MOBY_COLOR_BRIGHT_BLUE=177,
    MOBY_COLOR_VIOLET=178,
    MOBY_COLOR_BRIGHT_RED=179
} MobyColors;

typedef union _union_15 _union_15, *P_union_15;

union _union_15 {
    char howPickedUp;
    char subState;
};

typedef struct MobyStruct MobyStruct, *PMobyStruct;

struct MobyStruct {
    int * ptr_mobyData;
    int empty1;
    int empty2;
    short UNK1;
    short interactState;
    int UNK2;
    int UNK3;
    int UNK4;
    int UNK5;
    int UNK6;
    int UNK7;
    short subType;
    short type;
    short UNK10;
    char canDropObject;
    char UNK21;
    char currentAnimation;
    char nextAnimation;
    char currentKeyFrame;
    char nextKeyFrame;
    char speedRelated;
    char animationSpeed;
    char UNK13;
    char active;
    struct u8Vec3 rotation;
    char requiredHUD1;
    uchar state;
    char subState;
    char visable;
    char UNK_shadowRelated;
    struct MobyRGB RGB;
    char color;
    short requiredHUD2;
    char UNK19;
    char heldValue;
    short UNK20;
    short scale;
};

typedef struct Moby Moby, *PMoby;

typedef union _union_33 _union_33, *P_union_33;

union _union_33 {
    char howPickedUp;
    char subState;
};

struct Moby {
    void * ptr_mobyData;
    int empty1;
    int * ptr_colision;
    struct Vec3 position;
    int interactState;
    int UNK2;
    int UNK3;
    int UNK4;
    int UNK5;
    int UNK6;
    int UNK7;
    short subType;
    short type;
    short UNK10;
    char canDropObject;
    char UNK21;
    char currentAnimation;
    char nextAnimation;
    char currentKeyFrame;
    char nextKeyFrame;
    char speedRelated;
    char animationSpeed;
    char UNK13;
    char active;
    struct u8Vec3 rotation;
    char requiredHUD1;
    uchar state;
    union _union_33 field27_0x49;
    char visable;
    char UNK_shadowRelated;
    struct u8BGR RGB;
    char color;
    short requiredHUD2;
    char UNK19;
    char heldValue;
    short UNK20;
    short scale;
};

typedef struct HudMobyInfo HudMobyInfo, *PHudMobyInfo;

struct HudMobyInfo {
    int x;
    int y;
    int z;
    uchar zRotation;
    uchar xRotation;
    uchar yRotation;
};

typedef enum MobyHeldValues {
    LIFE_HELD_ID=14,
    BUTTERFLY_HELD_ID=16,
    ONE_GEM_HELD_ID=83,
    TWO_GEM_HELD_ID=84,
    FIVE_GEM_HELD_ID=85,
    TEN_GEM_HELD_ID=86,
    TWENTYFIVE_GEM_HELD_ID=87,
    ORB_HELD_ID=255
} MobyHeldValues;

typedef enum HudMobyTypes {
    MOBY_ID_WATERFALL_PARTICLE_SPAWNER=11,
    MOBY_ID_LIFE_FIGURINE=14,
    MOBY_ID_EGG=34,
    MOBY_ID_SPYRO_HEAD=58,
    MOBY_ID_EXCAILMATION=75,
    MOBY_ID_COMMA=76,
    MOBY_ID_ONE_GEM=83,
    MOBY_ID_TWO_GEM=84,
    MOBY_ID_FIVE_GEM=85,
    MOBY_ID_TEN_GEM=86,
    MOBY_ID_TWENTYFIVE_GEM=87,
    MOBY_ID_KEY=173,
    MOBY_ID_VOLUME_BAR=434,
    MOBY_ID_GEM_CHEST=471,
    MOBY_ID_GEM_CHEST_2=473,
    MOBY_ID_DRAGON_FIGURINE=506
} HudMobyTypes;

typedef struct ArtisansGnorc ArtisansGnorc, *PArtisansGnorc;

struct ArtisansGnorc {
};

typedef enum FullMobyTypes {
    ARTISANS_GNORC=114,
    CHEST_MOBY_ID=194,
    DRAGON_MOBY_ID=250
} FullMobyTypes;

typedef struct HudMoby HudMoby, *PHudMoby;

struct HudMoby {
    struct Vec3 position;
    struct u8Angle angle;
};

#define MOBY_SIZE 88

#define ARROW_RIGHT 0

#define ARROW_LEFT 1




// my nuts itch
// 

void main(void)

{
  __main();
  InitialiseGameStuff();
  do {
    DAT_80075868 = 0;
    GameStateCheck();
    DAT_80075868 = 1;
    gameSpeedMultiplyer = gameClockRelated2;
    if (gameClockRelated2 < 2) {
      gameSpeedMultiplyer = 2;
    }
    if (4 < gameSpeedMultiplyer) {
      gameSpeedMultiplyer = 4;
    }
    gameClockRelated2 = 0;
    if (DAT_8007579c == 0) {
      GameUpdateLoop();
    }
  } while( true );
}



void SetupFramebuffer(void)

{
  RECT local_18;
  
  SetDispMask(0);
  ResetGraph(0);
  SetGraphDebug(0);
  SetDefDrawEnv(&DRAW_ENV1,0,8,0x200,0xe0);
  SetDefDrawEnv(&DRAW_ENV2,0,0xf8,0x200,0xe0);
  SetDefDispEnv(&DISP_ENV1,0,0xf0,0x200,0xf0);
  SetDefDispEnv(&DISP_ENV2,0,0,0x200,0xf0);
                    // WARNING: Read-only address (ram,0x80076f6e) is written
  DRAW_ENV2.ofs[1] = 0xf0;
                    // WARNING: Read-only address (ram,0x80076ef8) is written
  DRAW_ENV1.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x80076f7c) is written
  DRAW_ENV2.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x80076ef6) is written
  DRAW_ENV1.dtd = '\x01';
                    // WARNING: Read-only address (ram,0x80076f7a) is written
  DRAW_ENV2.dtd = '\x01';
                    // WARNING: Read-only address (ram,0x80076eea) is written
  DRAW_ENV1.ofs[1] = 0;
  local_18.x = 0;
  local_18.y = 0;
  local_18.w = 0x200;
  local_18.h = 0x200;
  ClearImage(&local_18,'\0','\0','\0');
  DrawSync(0);
  SetDispMask(1);
  return;
}



void InitialiseController(void)

{
  PadInitDirect(&DAT_800786a0,&DAT_80078e50);
  FUN_8005375c(&DAT_800776d8);
  FUN_80053790(&DAT_800776d8);
  DAT_80075904 = 0;
  maybe_vibrationTimer = 0;
  vibrationFlag = 0;
  DAT_8007584c = 0;
  DAT_80075730 = 1;
  PadStartCom();
  Buttons();
  VSyncCallback(Buttons);
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible S_I.OBJ/SpuInit

void SetupMemcard(void)

{
  MemCardInit(0);
  return;
}



void FUN_80012480(void)

{
  u_char_conflict local_10 [8];
  
  local_10[0] = 0x80;
  CdInit();
  CdControl('\x0e',local_10,(u_char_conflict *)0x0);
  CdReadCallback(FUN_80016490);
  musicState = 0x40;
  DAT_800776c4 = 0;
  musicRelatedSecondParam = 0;
  maybe_SpeaerSetupRelated3 = 0x7f;
  maybe_SpeaerSetupRelated1 = 0x7f;
  maybe_SpeaerSetupRelated4 = 0;
  maybe_SpeaerSetupRelated2 = 0;
  CdMix((CdlATV *)&maybe_SpeaerSetupRelated1);
  return;
}



void SetupWADTOC(void)

{
  WADStartSector = 37;
  LoadCdData(37,&OverlayStart,0x800,0,600);
                    // Copies WAD.WAD Header
  ArrayCopy(&WADTableOfContents,&OverlayStart,0x330);
  return;
}



undefined4 FUN_8001256c(void)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  int *piVar4;
  int iVar5;
  int *piVar6;
  
  iVar5 = 0;
  piVar6 = &DAT_8006eedc;
  piVar4 = STR_SectorLookupTable;
  do {
    iVar2 = 0;
    piVar3 = piVar6;
    do {
      iVar1 = iVar5 * 8 + iVar2;
      iVar2 = iVar2 + 1;
      cdSectorRelated[iVar1 * 2] = *piVar4;
      cdSectorRelated[iVar1 * 2 + 1] = *piVar4 + *piVar3;
      piVar3 = piVar3 + 1;
    } while (iVar2 < 8);
    piVar6 = piVar6 + 8;
    iVar5 = iVar5 + 1;
    piVar4 = piVar4 + 1;
  } while (iVar5 < 6);
  musicState = 0x40;
  return 1;
}



void StartNewGame(void)

{
  undefined *puVar1;
  int iVar2;
  int iVar3;
  int *piVar4;
  undefined4 *puVar5;
  undefined4 *puVar6;
  undefined1 *puVar7;
  
  iVar2 = 0;
  puVar6 = &levelEggsStruct;
  puVar5 = &amountOfDragonsCollectedInLevels;
  piVar4 = levelGemsCollectedArray;
  do {
    *piVar4 = 0;
    *puVar5 = 0;
    if (iVar2 < 0x12) {
      *puVar6 = 0;
    }
    puVar6 = puVar6 + 1;
    puVar5 = puVar5 + 1;
    (&levelEnteredStruct)[iVar2] = 0;
    (&levelVortexExitStruct)[iVar2] = 0;
    iVar2 = iVar2 + 1;
    piVar4 = piVar4 + 1;
  } while (iVar2 < 0x24);
  iVar2 = 5;
  puVar1 = &requirementDream;
  do {
    *puVar1 = 0;
    iVar2 = iVar2 + -1;
    puVar1 = puVar1 + -1;
  } while (-1 < iVar2);
  unlockedHWs = 2;
  puVar7 = &DAT_80078680;
  iVar2 = 0;
  puVar5 = &DAT_80078618;
  do {
    *puVar5 = 0;
    iVar3 = 4;
    puVar1 = puVar7 + 4;
    do {
      *puVar1 = 0;
      iVar3 = iVar3 + -1;
      puVar1 = puVar1 + -1;
    } while (-1 < iVar3);
    puVar7 = puVar7 + 5;
    iVar2 = iVar2 + 5;
    puVar5 = puVar5 + 1;
  } while (iVar2 < 0x1e);
  spyro.health = 3;
  lives = 4;
  globalGemCount = 0;
  globalDragonCount = 0;
  globalEggCount = 0;
  amountOfGemsAlreadyFoundInLevel = 0;
  amountOfLiteralGemsPickedUp = 0;
  keys = 0;
  lifePellets = 0;
  healthFromLastLevel = 0xffffffff;
  DAT_80075838 = 0;
  DAT_8007583c = 0;
  memset((uchar *)&DAT_80077888,'\0',0x68);
  memset(collectablesStateFlags,'\0',0x480);
  return;
}



void FUN_8001277c(void)

{
  levelIDPortalExit = 10;
  isVibrationOn = 1;
  cameraMode = CAMERA_MODE_PASSIVE;
  StartNewGame();
  return;
}



void InitialiseGameStuff(void)

{
  int iVar1;
  u_long *p;
  int iVar2;
  int iVar3;
  uint *nextintptr;
  u_long *p_00;
  RECT local_30;
  RECT local_28;
  
  SetupFramebuffer();
  iVar2 = 0;
  SetupMemcard();
  iVar3 = -0xe0;
  InitialiseController();
  FUN_8005595c();
  FUN_80012480();
  FUN_8001256c();
  InitGeom();
  SetGeomOffset(0x100,0x78);
  SetGeomScreen(0x155);
  ptr_EndOfOvl = (u_long *)&DAT_8007dde8;
  DAT_800785dc = &DAT_8007dde8;
  iVar1 = Vsync(0xffffffff);
  SetDispMask(0);
                    // WARNING: Read-only address (ram,0x80076f4d) is written
  DISP_ENV1.isrgb24 = '\x01';
                    // WARNING: Read-only address (ram,0x80076fd1) is written
  DISP_ENV2.isrgb24 = '\x01';
  memset((uchar *)ptr_EndOfOvl,'\0',0x5a000);
  do {
    DecompressImage(&DAT_8006fcf4,(int *)ptr_EndOfOvl,iVar3);
    local_30.w = 0x300;
    local_30.x = 0;
    local_30.y = 0;
    local_30.h = 0xf0;
    LoadImage(&local_30,ptr_EndOfOvl);
    DrawSync(0);
    Vsync(0);
    PutDispEnv(&DISP_ENV2);
    if (iVar2 == 0) {
      SetDispMask(1);
    }
    iVar2 = iVar2 + 1;
    iVar3 = iVar3 + 0x20;
  } while (iVar2 < 8);
  SetupWADTOC();
  LoadCdData(WADStartSector,&OverlayStart,0x800,DAT_8007a6e8,600);
  ArrayCopy(&DAT_80076c00,&OverlayStart,0x1d0);
  p_00 = (u_long *)(-0x7fe40000 - DAT_800755a4);
  LoadCdData(WADStartSector,p_00,0x40000,DAT_80076c00 + DAT_8007a6e8,600);
  LoadCdData(WADStartSector,&OverlayStart,DAT_8007a6e4,DAT_8007a6e0,600);
  nextintptr = (uint *)((int)p_00 - DAT_8007a6d4);
  LoadCdData(WADStartSector,nextintptr,DAT_8007a6d4,WADTableOfContents,600);
  while (iVar2 = Vsync(0xffffffff), iVar2 - iVar1 < 0xd2) {
    Vsync(0);
  }
  memset((uchar *)ptr_EndOfOvl,'\0',0x5a000);
  iVar1 = 0;
  do {
    iVar1 = iVar1 + 1;
    DecompressImage(&DAT_8006fcf4,(int *)ptr_EndOfOvl,iVar1 * -0x20);
    local_30.w = 0x300;
    local_30.x = 0;
    local_30.y = 0;
    local_30.h = 0xf0;
    LoadImage(&local_30,ptr_EndOfOvl);
    DrawSync(0);
    Vsync(0);
    PutDispEnv(&DISP_ENV2);
  } while (iVar1 < 8);
  iVar1 = Vsync(0xffffffff);
  p = nextintptr + -0x16800;
  memset((uchar *)p,'\0',0x5a000);
  iVar3 = 0;
  iVar2 = -0xe0;
  do {
    DecompressImage(nextintptr,(int *)p,iVar2);
    local_30.w = 0x300;
    local_30.x = 0;
    local_30.y = 0;
    local_30.h = 0xf0;
    LoadImage(&local_30,p);
    DrawSync(0);
    Vsync(0);
    iVar2 = iVar2 + 0x20;
    PutDispEnv(&DISP_ENV2);
    iVar3 = iVar3 + 1;
  } while (iVar3 < 8);
  levelLoadState = 3;
  whichCutsceneToPlay = 0;
  do {
    FUN_80014564();
  } while (levelLoadState < 10);
  while (iVar2 = Vsync(0xffffffff), iVar2 - iVar1 < 0xd2) {
    Vsync(0);
  }
  iVar1 = 0;
  do {
    iVar1 = iVar1 + 1;
    DecompressImage(nextintptr,(int *)(nextintptr + -0x16800),iVar1 * -0x20);
    local_30.w = 0x300;
    local_30.x = 0;
    local_30.y = 0;
    local_30.h = 0xf0;
    LoadImage(&local_30,nextintptr + -0x16800);
    DrawSync(0);
    Vsync(0);
    PutDispEnv(&DISP_ENV2);
  } while (iVar1 < 8);
  SetDispMask(0);
                    // WARNING: Read-only address (ram,0x80076f4d) is written
  DISP_ENV1.isrgb24 = '\0';
                    // WARNING: Read-only address (ram,0x80076fd1) is written
  DISP_ENV2.isrgb24 = '\0';
  PutDispEnv(&DISP_ENV2);
  local_28.x = 0;
  local_28.y = 0;
  local_28.w = 0x200;
  local_28.h = 0x1e0;
  ClearImage(&local_28,'\0','\0','\0');
  DrawSync(0);
  SetDispMask(1);
  local_30.x = 0x200;
  local_30.y = 0;
  local_30.w = 0x200;
  local_30.h = 0x100;
  LoadImage(&local_30,p_00);
  DrawSync(0);
  DAT_800785fc = -0x7fe00000 - DAT_800755a4;
  FUN_8005b7d8();
  FUN_8002d338();
  fadeInTimer = 0xf;
  FUN_8002d170();
  gameSpeedMultiplyer = 2;
  gameClockRelated2 = 0;
  LODDistanceRelated = 0x8000;
  return;
}



void LevelTransitionAudioRelated(byte *param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  
  sfxMetadataArray = (MaybeSoundEffectMetadata **)(param_1 + 0x104);
  localSFXArray = param_1;
  if ((param_2 != 0) && (iVar3 = *(int *)(param_1 + 0x100) + -1, -1 < iVar3)) {
    iVar2 = iVar3 * 0x14;
    do {
      iVar3 = iVar3 + -1;
      piVar1 = (int *)(iVar2 + (int)sfxMetadataArray);
      iVar2 = iVar2 + -0x14;
      *piVar1 = *piVar1 + 0x1010;
    } while (-1 < iVar3);
  }
  return;
}



int * FUN_80012d58(int *param_1,int param_2)

{
  int iVar1;
  int **ppiVar2;
  int *piVar3;
  int **ppiVar4;
  int **ppiVar5;
  int iVar6;
  
  DAT_800785c8 = param_1[1];
  DAT_800785c0 = param_1 + 2;
  DAT_800785c4 = DAT_800785c0 + DAT_800785c8 * 4;
  param_1 = (int *)((int)param_1 + *param_1);
  DAT_800785ac = param_1[1];
  piVar3 = param_1 + 2;
  iVar6 = 0;
  DAT_800785a8 = piVar3;
  if (0 < DAT_800785ac) {
    do {
      iVar6 = iVar6 + 1;
      *piVar3 = (int)param_1 + *piVar3 + 4;
      piVar3 = piVar3 + 1;
    } while (iVar6 < DAT_800785ac);
  }
  param_1 = (int *)((int)param_1 + *param_1);
  if (param_2 == 0) {
    if (*param_1 < 5) {
      DAT_800785b4 = 0;
      DAT_800785b0 = (int *)0x0;
      DAT_8007778c = (int *)0x0;
    }
    else {
      DAT_800785b4 = param_1[2];
      piVar3 = param_1 + 3;
      iVar6 = 0;
      DAT_800785b0 = piVar3;
      if (0 < DAT_800785b4) {
        do {
          iVar6 = iVar6 + 1;
          *piVar3 = (int)param_1 + *piVar3 + 4;
          piVar3 = piVar3 + 1;
        } while (iVar6 < DAT_800785b4);
      }
      iVar6 = 0;
      piVar3 = (int *)((int)param_1 + param_1[1] + 4);
      DAT_80077788 = *piVar3;
      piVar3 = piVar3 + 1;
      DAT_8007778c = piVar3;
      if (0 < DAT_80077788) {
        do {
          iVar6 = iVar6 + 1;
          *piVar3 = (int)param_1 + *piVar3 + 4 + param_1[1];
          piVar3 = piVar3 + 1;
        } while (iVar6 < DAT_80077788);
      }
    }
    param_1 = (int *)((int)param_1 + *param_1);
    DAT_800785bc = param_1[1];
    piVar3 = param_1 + 2;
    iVar6 = 0;
    ptr_levelIDRelated = piVar3;
    if (0 < DAT_800785bc) {
      do {
        iVar6 = iVar6 + 1;
        *piVar3 = (int)param_1 + *piVar3 + 4;
        piVar3 = piVar3 + 1;
      } while (iVar6 < DAT_800785bc);
    }
    param_1 = (int *)((int)param_1 + *param_1);
    piVar3 = param_1 + 1;
    DAT_800785d4 = piVar3;
    param_1[3] = (int)piVar3 + param_1[3];
    DAT_800785d4[3] = (int)piVar3 + DAT_800785d4[3];
    DAT_800785d4[4] = (int)piVar3 + DAT_800785d4[4];
    DAT_800785d4[5] = (int)piVar3 + DAT_800785d4[5];
    DAT_800785d4[6] = (int)piVar3 + DAT_800785d4[6];
    param_1 = (int *)((int)param_1 + *param_1);
  }
  DAT_80077790._0_1_ = *(undefined *)(param_1 + 1);
  DAT_80077790._1_1_ = *(undefined *)((int)param_1 + 5);
  DAT_80077790._2_1_ = *(undefined *)((int)param_1 + 6);
  DAT_80077780 = param_1[2];
  piVar3 = param_1 + 3;
  iVar6 = 0;
  DAT_80077784 = piVar3;
  if (0 < DAT_80077780) {
    do {
      iVar6 = iVar6 + 1;
      *piVar3 = (int)param_1 + *piVar3 + 4;
      piVar3 = piVar3 + 1;
    } while (iVar6 < DAT_80077780);
  }
  param_1 = (int *)((int)param_1 + *param_1);
  if (param_2 == 0) {
    DAT_800758bc = *param_1;
    ppiVar5 = (int **)(param_1 + 1);
    iVar6 = 0;
    if (0 < DAT_800758bc) {
      ppiVar2 = (int **)&DAT_80078640;
      do {
        *ppiVar2 = (int *)ppiVar5;
        ppiVar4 = ppiVar5 + (int)ppiVar5[1] * 3 + 8;
        *ppiVar5 = (int *)ppiVar4;
        ppiVar5 = ppiVar4 + 5;
        *(int **)(**ppiVar2 + 0x10) = ppiVar4[6];
        *(int **)**ppiVar2 = ppiVar4[7];
        ppiVar4 = ppiVar4 + 8;
        *(int ***)(**ppiVar2 + 4) = ppiVar4;
        iVar1 = 0;
        if (0 < *(int *)**ppiVar2) {
          do {
            *ppiVar4 = (int *)((int)ppiVar5 + (int)(*ppiVar4 + 1));
            iVar1 = iVar1 + 1;
            ppiVar4 = ppiVar4 + 1;
          } while (iVar1 < *(int *)**ppiVar2);
        }
        ppiVar2 = ppiVar2 + 1;
        iVar6 = iVar6 + 1;
        ppiVar5 = (int **)((int)ppiVar5 + (int)*ppiVar5);
      } while (iVar6 < DAT_800758bc);
    }
    ppiVar2 = ppiVar5 + 2;
    for (piVar3 = ppiVar5[1]; 0 < (int)piVar3; piVar3 = (int *)((int)piVar3 + -1)) {
      *(int ***)(&DAT_80076278 + *(short *)ppiVar2 * 4) = ppiVar2;
      ppiVar2 = (int **)((int)ppiVar2 + *(short *)((int)ppiVar2 + 2) + 4);
    }
    param_1 = (int *)((int)ppiVar5 + (int)*ppiVar5);
    DAT_80076234 = *param_1;
    LevelTransitionAudioRelated(param_1 + 1,1);
    param_1 = (int *)((int)param_1 + *param_1);
  }
  return param_1;
}



void FUN_80013230(int *param_1)

{
  uint uVar1;
  int iVar2;
  short *psVar3;
  int iVar4;
  int iVar5;
  uint *puVar6;
  int iVar7;
  
  iVar2 = 0;
  do {
    iVar5 = iVar2 * 4 + DAT_80076378;
    uVar1 = *(uint *)(iVar5 + 0x38);
    if ((uVar1 < DAT_800785fc) || (uVar1 == 0xffffffff)) {
      *(undefined4 *)(iVar5 + 0x38) = 0;
    }
    iVar2 = iVar2 + 1;
  } while (iVar2 < 0x2e);
  iVar2 = *param_1;
  if (-1 < iVar2) {
    param_1 = param_1 + 1;
    do {
      iVar7 = *param_1;
      param_1 = param_1 + 1;
      iVar2 = iVar2 * 4;
      *(int **)(iVar2 + DAT_80076378 + 0x38) = param_1;
      iVar5 = *(int *)(iVar2 + DAT_80076378 + 0x38);
      *(int *)(iVar5 + 0x14) = *(int *)(DAT_80076378 + 0x34) + *(int *)(iVar5 + 0x14);
      iVar5 = *(int *)(iVar2 + DAT_80076378 + 0x38);
      *(int *)(iVar5 + 0x18) = *(int *)(DAT_80076378 + 0x34) + *(int *)(iVar5 + 0x18);
      psVar3 = *(short **)(iVar2 + DAT_80076378 + 0x38);
      iVar5 = *psVar3 * 4 + 0x24;
      *(int *)(psVar3 + 8) = (int)param_1 + *(int *)(psVar3 + 8) + iVar5;
      psVar3 = *(short **)(iVar2 + DAT_80076378 + 0x38);
      iVar4 = 0;
      puVar6 = (uint *)(psVar3 + 0x12);
      if (0 < *psVar3) {
        do {
          *puVar6 = (*puVar6 & 0xffe00000) +
                    ((int)((int)param_1 + (*puVar6 & 0x1fffff) + iVar5) >> 1 & 0x1fffffU);
          iVar4 = iVar4 + 1;
          puVar6 = puVar6 + 1;
        } while (iVar4 < **(short **)(iVar2 + DAT_80076378 + 0x38));
      }
      iVar2 = *(int *)((int)param_1 + iVar7);
      param_1 = (int *)((int)param_1 + iVar7) + 1;
    } while (-1 < iVar2);
  }
  return;
}



int * FUN_800133e0(int *param_1)

{
  int *piVar1;
  uint uVar2;
  int iVar3;
  short *psVar4;
  uint uVar5;
  uint *puVar6;
  int *piVar7;
  int iVar8;
  
  if (*param_1 < 0) {
    param_1[1] = param_1[1] + (int)param_1;
    param_1[3] = param_1[3] + (int)param_1;
    param_1[2] = param_1[2] + (int)param_1;
    param_1 = (int *)((uint)param_1 & 0x7fffffff);
  }
  else {
    iVar8 = 0;
    piVar1 = param_1;
    do {
      if (piVar1[5] != 0) {
        piVar1[5] = ((uint)param_1 & 0x7fffffff) + piVar1[5];
      }
      iVar8 = iVar8 + 1;
      piVar1 = piVar1 + 1;
    } while (iVar8 < 8);
    iVar8 = 0;
    param_1[0xd] = (int)param_1 + param_1[0xd];
    piVar1 = param_1;
    if (0 < *param_1) {
      do {
        if (piVar1[0xe] != -1) {
          iVar3 = (int)param_1 + piVar1[0xe];
          piVar1[0xe] = iVar3;
          *(int *)(iVar3 + 0x14) = param_1[0xd] + *(int *)(iVar3 + 0x14);
          *(int *)(piVar1[0xe] + 0x18) = param_1[0xd] + *(int *)(piVar1[0xe] + 0x18);
          psVar4 = (short *)piVar1[0xe];
          if (*(int *)(psVar4 + 0xe) != 0) {
            *(int *)(psVar4 + 0xe) = param_1[0xd] + *(int *)(psVar4 + 0xe);
            *(int *)(piVar1[0xe] + 0x20) = param_1[0xd] + *(int *)(piVar1[0xe] + 0x20);
            psVar4 = (short *)piVar1[0xe];
          }
          if (*(char *)(psVar4 + 2) == '\0') {
            piVar7 = (int *)(psVar4 + 0x12);
            iVar3 = 0;
            if (0 < *psVar4) {
              do {
                *piVar7 = *piVar7 + (param_1[0xd] & 0x1fffffU);
                puVar6 = (uint *)(piVar7 + 1);
                if ((*puVar6 & 0xffff) != 0) {
                  *puVar6 = *puVar6 + ((param_1[0xd] - (int)puVar6) + 4 >> 2 & 0xffffU);
                }
                iVar3 = iVar3 + 1;
                piVar7 = piVar7 + 2;
              } while (iVar3 < *(short *)piVar1[0xe]);
            }
          }
          else {
            *(int *)(psVar4 + 8) = param_1[0xd] + *(int *)(psVar4 + 8);
            iVar3 = 0;
            puVar6 = (uint *)((short *)piVar1[0xe] + 0x12);
            if (0 < *(short *)piVar1[0xe]) {
              do {
                uVar2 = *puVar6;
                uVar5 = uVar2 & 0xffe00000;
                *puVar6 = uVar5;
                *puVar6 = uVar5 + ((int)((uVar2 & 0x1fffff) + param_1[0xd]) >> 1 & 0x1fffffU);
                iVar3 = iVar3 + 1;
                puVar6 = puVar6 + 1;
              } while (iVar3 < *(short *)piVar1[0xe]);
            }
          }
        }
        iVar8 = iVar8 + 1;
        piVar1 = piVar1 + 1;
      } while (iVar8 < *param_1);
    }
  }
  return param_1;
}



void Maybe_currentLevelObjects(int param_1)

{
  bool bVar1;
  int *piVar2;
  undefined4 *puVar3;
  undefined4 uVar4;
  char cVar5;
  undefined4 *puVar6;
  int iVar7;
  uint uVar8;
  int *piVar9;
  int *piVar10;
  int iVar11;
  int iVar12;
  uint uVar13;
  uint uVar14;
  int aiStack_70 [2];
  int local_68;
  
  PauseMusicAndSFX(0);
  Maybe_ResetHudTimers();
  piVar2 = DAT_800785e4;
  levelTimer = 0;
  levelTimerWhenActive = 0;
  spyroInvisible = 0;
  DAT_80075684 = 0;
  if (levelIDPortalExit == 0x40) {
    keys = 0;
  }
  DAT_80075698 = 0;
  if ((levelIDPortalExit == 0x28) || (levelIDPortalExit == 0x2a)) {
    DAT_8007591c = 1;
  }
  else {
    DAT_8007591c = 0;
  }
  FUN_800536a4(&currentButtonOneFrame);
  if (isInFlightLevel == 0) {
    healthFromLastLevel = spyro.health;
  }
  if (DAT_80077888 == 0) {
    if (portalToExitFromInHW == 0) {
      respawnPosX = *piVar2;
      respawnPosY = piVar2[1];
      respawnPosZ = piVar2[2];
      respawnRot = (uint)*(byte *)((int)piVar2 + 0xe);
      if ((canFlyIn == 0) && (gameState != GAMESTATE_BALLOONIST)) {
        if ((gameState == GAMESTATE_GAME_OVER) &&
           ((levelIDPortalExit - 0x28U < 0x14 &&
            (*(int *)(&DAT_8006f218 + (DAT_800757e8 + -0x12) * 0xc) != 0)))) {
          Vec3Copy((int *)&spyro,STR_LevelTrackLookupTable + DAT_800757e8 * 3 + 0x69);
          spyro.RelativeSparxAngle.roll = (&DAT_8006f296)[DAT_800757e8];
        }
        else {
          Vec3Copy((int *)&spyro,&respawnPosX);
          spyro.RelativeSparxAngle.roll = (char)respawnRot;
        }
      }
    }
  }
  else {
    Vec3Copy((int *)&spyro,&respawnPosX);
    spyro.RelativeSparxAngle.roll = (char)((int)respawnRot >> 4);
  }
  spyro.health = healthFromLastLevel;
  if (gameState != GAMESTATE_BALLOONIST) {
    Unk_UpdateSpyroAfterEvents(0);
    spyro.isMovementLocked = 0xc;
  }
  if ((levelIDPortalExit / 10) * 10 == levelIDPortalExit + -5) {
    isInFlightLevel = 1;
    spyro.canSuperfly = 1;
    DAT_800758c0 = respawnPosZ;
    spyro.neutralJumpZPos = respawnPosZ;
    SpyroMovement2(SUPERFLY);
    if (canFlyIn == 0) {
      spyro.subState = 0;
      spyro.RelativeSparxAngle.yaw = '\0';
      spyro.RelativeSparxAngle.pitch = '\0';
      spyro.angle.pitch = 0;
      spyro.angle.roll = 0;
      DAT_80075960 = 0;
      DAT_800758a0 = 0;
      DAT_80075700 = 0;
      spyro.position.z = spyro.position.z + -0x400;
    }
  }
  else {
    isInFlightLevel = 0;
    spyro.canSuperfly = 0;
    if (canFlyIn != 0) {
      respawnPosZ = respawnPosZ + *(int *)(&DAT_8006edb4 + levelID_Indexer * 4);
      respawnPosX = respawnPosX -
                    ((int)((uint)(ushort)sineWaveArray[respawnRot + 0x40] << 0x10) >> 0x12);
      respawnPosY = respawnPosY - ((int)((uint)(ushort)sineWaveArray[respawnRot] << 0x10) >> 0x12);
    }
  }
  if (levelIDPortalExit == 0x40) {
    DAT_800758c0 = 16000;
    DAT_80075678 = 0x4638;
  }
  fadeInTimer = 0;
  if (canFlyIn == 0) {
    if (gameState == GAMESTATE_BALLOONIST) goto LAB_80013b68;
    DAT_80078668 = DAT_8006c934;
    DAT_8007866c = DAT_8006c938;
    DAT_80078674 = DAT_8006c940;
    DAT_80078678 = DAT_8006c944;
    DAT_8007867c = DAT_8006c948;
    DAT_80076ea0 = &spyro;
    maybe_cameraRelated = 0;
    unk_cameraRelatedLocking = 0;
    DAT_80078670 = 0x600;
    flyInAnimation = &DAT_80078668;
    unk_camera_related_angle = spyro.angle.yaw;
    ChangeFlyInCamera();
    fadeInTimer = 0x20;
  }
  if (gameState != GAMESTATE_BALLOONIST) {
    gameState = GAMESTATE_GAMEPLAY;
    DAT_8007579c = 1;
    isInDragonState = 0;
    letterBoxEffectAmount = 0;
  }
LAB_80013b68:
  memset((uchar *)&Vec3_800786c8,'\0',0x138);
  DAT_800786d8 = piVar2[4];
  DAT_800786dc = piVar2[5];
  memset((uchar *)&DAT_8007aa10,'\0',0x28);
  DAT_80075ef8 = piVar2[6];
  DAT_80075efc = piVar2[7];
  DAT_8007850c = piVar2[10];
  DAT_80078510 = piVar2[0xb];
  iVar12 = 1;
  iVar11 = 0;
  do {
    iVar7 = iVar12;
    (&DAT_8007850c)[iVar7 * 2] = piVar2[iVar11 * 2 + 0xc];
    (&DAT_80078510)[iVar7 * 2] = piVar2[iVar11 * 2 + 0xd];
    iVar12 = iVar7 + 1;
    iVar11 = iVar7;
  } while (iVar7 < 9);
  DAT_800786e0 = piVar2[0x1e];
  iVar12 = 0;
  DAT_800786e4 = piVar2[0x1f];
  DAT_800756f0 = piVar2[0x20];
  DAT_800756f4 = piVar2[0x21];
  piVar9 = piVar2 + 0x22;
  DAT_80078560 = piVar2[0x23];
  piVar10 = piVar2 + 0x24;
  DAT_80078564 = piVar10;
  if (0 < DAT_80078560) {
    do {
      iVar12 = iVar12 + 1;
      *piVar10 = (int)piVar9 + *piVar10 + 4;
      piVar10 = piVar10 + 1;
    } while (iVar12 < DAT_80078560);
  }
  iVar12 = 0;
  piVar9 = (int *)((int)piVar9 + *piVar9);
  DAT_80078568 = piVar9[1];
  piVar10 = piVar9 + 2;
  DAT_8007856c = piVar10;
  if (0 < DAT_80078568) {
    do {
      iVar12 = iVar12 + 1;
      *piVar10 = (int)piVar9 + *piVar10 + 4;
      piVar10 = piVar10 + 1;
    } while (iVar12 < DAT_80078568);
  }
  iVar12 = 0;
  piVar9 = (int *)((int)piVar9 + *piVar9);
  DAT_80078580 = piVar9[1];
  piVar10 = piVar9 + 2;
  DAT_80078584 = piVar10;
  if (0 < DAT_80078580) {
    do {
      iVar12 = iVar12 + 1;
      *piVar10 = (int)piVar9 + *piVar10 + 4;
      piVar10 = piVar10 + 1;
    } while (iVar12 < DAT_80078580);
  }
  iVar12 = 0;
  piVar9 = (int *)((int)piVar9 + *piVar9);
  DAT_80078570 = piVar9[1];
  piVar10 = piVar9 + 2;
  DAT_80078574 = piVar10;
  if (0 < DAT_80078570) {
    do {
      iVar12 = iVar12 + 1;
      *piVar10 = (int)piVar9 + *piVar10 + 4;
      piVar10 = piVar10 + 1;
    } while (iVar12 < DAT_80078570);
  }
  iVar12 = 0;
  piVar9 = (int *)((int)piVar9 + *piVar9);
  DAT_800785a0 = piVar9[1];
  piVar10 = piVar9 + 2;
  DAT_800785a4 = piVar10;
  if (0 < DAT_800785a0) {
    do {
      iVar12 = iVar12 + 1;
      *piVar10 = (int)piVar9 + *piVar10 + 4;
      piVar10 = piVar10 + 1;
    } while (iVar12 < DAT_800785a0);
  }
  iVar12 = 0;
  piVar9 = (int *)((int)piVar9 + *piVar9);
  DAT_80078588 = piVar9[1];
  piVar10 = piVar9 + 2;
  DAT_8007858c = piVar10;
  if (0 < DAT_80078588) {
    do {
      iVar12 = iVar12 + 1;
      *piVar10 = (int)piVar9 + *piVar10 + 4;
      piVar10 = piVar10 + 1;
    } while (iVar12 < DAT_80078588);
  }
  iVar12 = 0;
  piVar9 = (int *)((int)piVar9 + *piVar9);
  DAT_80078578 = piVar9[1];
  piVar10 = piVar9 + 2;
  DAT_8007857c = piVar10;
  if (0 < DAT_80078578) {
    do {
      iVar12 = iVar12 + 1;
      *piVar10 = (int)piVar9 + *piVar10 + 4;
      piVar10 = piVar10 + 1;
    } while (iVar12 < DAT_80078578);
  }
  piVar9 = (int *)((int)piVar9 + *piVar9);
  if (param_1 == 0) {
    DAT_80078560 = 0;
    DAT_80078568 = 0;
    DAT_800785a0 = 0;
    DAT_80078588 = 0;
    DAT_80078578 = 0;
  }
  else {
    FUN_8002b4ac();
  }
  ptr_startOfCurrentLevelMobys = (char *)(piVar9 + 2);
  piVar10 = (int *)((int)piVar9 + *piVar9);
  ptr_dynamicObjects = (int *)((int)ptr_startOfCurrentLevelMobys + piVar9[1] * 0x16 * 4);
  DAT_80075890 = ptr_dynamicObjects;
  *(char *)(ptr_dynamicObjects + 0x12) = -1;
  numberOfDynamicObjects = 0;
  DAT_800756e8 = piVar10;
  ptr_levelMobyData = piVar10;
  *(undefined *)((int)piVar10 + -1) = 0xff;
  DAT_800756a8 = (undefined4)
                 ((ulonglong)((uint)((int)DAT_800756e8 - (int)DAT_80075890) >> 4) * 0x24924926 >>
                 0x20);
  piVar10 = (int *)((int)piVar10 + *piVar10);
  DAT_800757b4 = piVar10[1];
  DAT_800757f8 = piVar10 + 2;
  iVar12 = DAT_800757b4 + -1;
  if (-1 < iVar12) {
    piVar9 = DAT_800757f8 + iVar12;
    do {
      iVar12 = iVar12 + -1;
      *piVar9 = *piVar9 + (int)piVar10;
      piVar9 = piVar9 + -1;
    } while (-1 < iVar12);
  }
  piVar10 = (int *)((int)piVar10 + *piVar10);
  DAT_80075778 = piVar10 + 1;
  iVar12 = 0;
  piVar10 = (int *)((int)piVar10 + *piVar10);
  piVar9 = piVar10 + 1;
  if (0 < *piVar10) {
    do {
      iVar12 = iVar12 + 1;
      *(int *)((int)piVar2 + *piVar9) = *(int *)((int)piVar2 + *piVar9) + (int)piVar2;
      piVar9 = piVar9 + 1;
    } while (iVar12 < *piVar10);
  }
  if (isDemoMode != 0) {
    srand(0x4d2);
    iVar12 = DAT_800757b8 * 0x10;
    spyro.position.x = *(int *)(&DAT_8006ee9c + iVar12);
    spyro.position.y = *(int *)(&DAT_8006eea0 + iVar12);
    spyro.position.z = *(int *)(&DAT_8006eea4 + iVar12);
    DAT_80075784 = 1;
    spyro.RelativeSparxAngle.roll = (char)*(uint *)(&DAT_8006eea8 + iVar12);
    spyro.angle.yaw = (*(uint *)(&DAT_8006eea8 + iVar12) & 0xff) << 4;
    ptr_demoModeInputs = piVar9;
    if (isDemoMode != 1) {
      ptr_demoModeInputs = (int *)0x80600000;
      memset((uchar *)0x80600000,'\0',0x4000);
    }
  }
  uVar14 = 0;
  cVar5 = ptr_startOfCurrentLevelMobys[0x48];
  uVar13 = 0;
  if (cVar5 != -1) {
    iVar12 = 0;
    do {
      if ((int)(&DAT_80076378)[*(short *)(ptr_startOfCurrentLevelMobys + iVar12 + 0x36)] < 0) {
        FUN_800526a8();
      }
      else {
        FUN_800529cc();
      }
      Vec3Copy(aiStack_70,(int *)(ptr_startOfCurrentLevelMobys + iVar12 + 0xc));
      local_68 = local_68 + 0x400;
      MobyUpdatePosition(aiStack_70,0x10000);
      FUN_800533d0(ptr_startOfCurrentLevelMobys + iVar12);
      if (((byte)ptr_startOfCurrentLevelMobys[iVar12 + 0x3a] & 0x7f) < 0x20) {
        uVar8 = 1 << (uVar13 & 0x1f);
        if ((((&DAT_80077898)[(int)uVar13 >> 5] & uVar8) == 0) ||
           ((*(uint *)(collectablesStateFlags + ((int)uVar13 >> 5) * 4 + levelID_Indexer * 0x20) &
            uVar8) == 0)) {
          uVar14 = uVar14 | 1 << ((byte)ptr_startOfCurrentLevelMobys[iVar12 + 0x3a] & 0x1f);
        }
      }
      iVar11 = iVar12 + 0xa0;
      uVar13 = uVar13 + 1;
      iVar12 = iVar12 + 0x58;
    } while (ptr_startOfCurrentLevelMobys[iVar11] != -1);
    cVar5 = ptr_startOfCurrentLevelMobys[0x48];
  }
  uVar13 = 0;
  if (cVar5 != -1) {
    iVar12 = 0;
    do {
      uVar8 = 1 << (uVar13 & 0x1f);
      if ((*(uint *)(collectablesStateFlags + ((int)uVar13 >> 5) * 4 + levelID_Indexer * 0x20) &
          uVar8) != 0) {
        if (((&DAT_80077898)[(int)uVar13 >> 5] & uVar8) == 0) {
          if ((ptr_startOfCurrentLevelMobys[iVar12 + 0x3a] & 0x7fU) == 0x7d) {
LAB_800143a8:
            DespawnObjects(ptr_startOfCurrentLevelMobys + iVar12);
          }
          else {
            ptr_startOfCurrentLevelMobys[iVar12 + 0x53] = -1;
          }
        }
        else {
          uVar8 = (byte)ptr_startOfCurrentLevelMobys[iVar12 + 0x3a] & 0x7f;
          if (uVar8 < 0x20) {
            bVar1 = (uVar14 & 1 << ((byte)ptr_startOfCurrentLevelMobys[iVar12 + 0x3a] & 0x1f)) != 0;
          }
          else {
            bVar1 = uVar8 == 0x7e;
          }
          if (!bVar1) goto LAB_800143a8;
          ptr_startOfCurrentLevelMobys[iVar12 + 0x53] = -1;
        }
      }
      iVar11 = iVar12 + 0xa0;
      uVar13 = uVar13 + 1;
      iVar12 = iVar12 + 0x58;
    } while (ptr_startOfCurrentLevelMobys[iVar11] != -1);
  }
  iVar12 = 0;
  puVar3 = &DAT_800778b8;
  puVar6 = &DAT_80077898;
  do {
    uVar4 = *puVar6;
    puVar6 = puVar6 + 1;
    iVar12 = iVar12 + 1;
    *puVar3 = uVar4;
    puVar3 = puVar3 + 1;
  } while (iVar12 < 8);
  iVar12 = 9;
  puVar3 = &DAT_800777e4;
  do {
    *puVar3 = 0;
    iVar12 = iVar12 + -1;
    puVar3 = puVar3 + -1;
  } while (-1 < iVar12);
  ptr_headOfParticleBuffer = DAT_800785f8;
  ptr_nextFreeParticleSlotInBuffer = DAT_800785f8;
  DAT_800785f8[1] = -1;
  *(undefined4 *)(ptr_headOfParticleBuffer + 0x2000) = 0xffffffff;
  FUN_80058b68();
  if ((param_1 != 0) && (isInFlightLevel == 0)) {
    ptr_SparxMoby = (*ptr_OverlaySpawnDynamicObj)(0x78,0);
    Maybe_HudInPauseMenu(1);
  }
  PlayMusicTrack(musicLevelTrack,1);
  return;
}



void RespawnRelated(void)

{
  undefined4 uVar1;
  
  PauseMusicAndSFX(0);
  LoadCdData(WADStartSector,DAT_800785e4,DAT_80078604,
             DAT_80078600 + *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10),600);
  Maybe_currentLevelObjects(1);
  uVar1 = 0;
  if (isInFlightLevel != 0) {
    uVar1 = 0x20;
  }
  ForceMovementState(uVar1);
  spyro.health = 3;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_80014564(void)

{
  char *pcVar1;
  int iVar2;
  long lVar3;
  undefined4 uVar4;
  int *piVar5;
  int iVar6;
  int iVar7;
  undefined4 *puVar8;
  RECT local_28 [3];
  
  FUN_800163e4();
  iVar6 = levelLoadState;
  if (((DAT_80076bb8 == 0) &&
      (iVar2 = CdSync(1,(u_char_conflict *)0x0), iVar7 = DAT_800785e4, iVar6 = levelLoadState,
      iVar2 == 2)) && ((musicState & 0x40) != 0)) {
    if (levelLoadState == 0) {
      FUN_80016698(WADStartSector,ptr_EndOfOvl,0x800,(&DAT_8007a6e8)[whichCutsceneToPlay * 2],600);
      iVar6 = 1;
    }
    else if (levelLoadState == 1) {
      ArrayCopy(&DAT_80076c00,ptr_EndOfOvl,0x1d0);
      FUN_80016698(WADStartSector,ptr_EndOfOvl,
                   *(undefined4 *)(&DAT_8006ee5c + whichCutsceneToPlay * 4),
                   DAT_80076c00 + (&DAT_8007a6e8)[whichCutsceneToPlay * 2],600);
      iVar6 = 2;
    }
    else if (levelLoadState == 2) {
      local_28[0].x = 0x200;
      local_28[0].y = 0;
      local_28[0].w = 0x200;
      local_28[0].h = (short)(*(int *)(&DAT_8006ee5c + whichCutsceneToPlay * 4) >> 10);
      LoadImage(local_28,ptr_EndOfOvl);
      iVar6 = 3;
    }
    else if (levelLoadState == 3) {
      FUN_80016698(WADStartSector,ptr_EndOfOvl,DAT_80076c04 + -0x80000,
                   DAT_80076c00 + (&DAT_8007a6e8)[whichCutsceneToPlay * 2] + 0x80000,600);
      iVar6 = 4;
    }
    else if (levelLoadState == 4) {
      SpuSetTransferStartAddr(0x1010);
      SpuWrite((uchar *)ptr_EndOfOvl,0x7eff0);
      do {
        lVar3 = SpuIsTransferCompleted(0);
      } while (lVar3 == 0);
      FUN_80016698(WADStartSector,DAT_800785dc,DAT_80076c0c,
                   DAT_80076c08 + (&DAT_8007a6e8)[whichCutsceneToPlay * 2],600);
      iVar6 = 5;
    }
    else if (levelLoadState == 5) {
      DAT_800785e0 = FUN_80012d58(DAT_800785dc,1);
      DAT_80078a40 = DAT_80077780;
      DAT_80078a44 = DAT_80077784;
      DAT_80078a48 = DAT_80077788;
      DAT_80078a4c = DAT_8007778c;
      _clearColor = DAT_80077790;
      if (whichCutsceneToPlay == 1) {
        levelLoadState = 6;
        iVar6 = DAT_80076c14 + -0x60000;
      }
      else {
        levelLoadState = 8;
        iVar6 = DAT_80076c14;
      }
      FUN_80016698(WADStartSector,DAT_800785e0,iVar6,
                   DAT_80076c10 + (&DAT_8007a6e8)[whichCutsceneToPlay * 2],600);
      iVar6 = levelLoadState;
    }
    else {
      iVar6 = 7;
      if (levelLoadState != 6) {
        if (levelLoadState == 7) {
          FUN_80016698(WADStartSector,DAT_800785e0 + DAT_80076c14 + -0x60000,0x60000,
                       DAT_80076c10 + DAT_80076c14 +
                       (&DAT_8007a6e8)[whichCutsceneToPlay * 2] + -0x60000,600);
          iVar6 = 8;
        }
        else if (levelLoadState == 8) {
          piVar5 = &DAT_80076c50;
          if (0 < DAT_80076c50) {
            puVar8 = &DAT_8007637c;
            do {
              iVar6 = *piVar5;
              piVar5 = piVar5 + 1;
              uVar4 = FUN_800133e0(DAT_800785e0 + (iVar6 - DAT_80076c10));
              *puVar8 = uVar4;
              puVar8 = puVar8 + 1;
            } while (0 < *piVar5);
          }
          DAT_800785e4 = DAT_800785e0 + DAT_80076c14;
          DAT_80078604 = DAT_80076c1c;
          DAT_80078600 = DAT_80076c18;
          FUN_80016698(WADStartSector,DAT_800785e4,DAT_80076c1c,
                       DAT_80076c18 + (&DAT_8007a6e8)[whichCutsceneToPlay * 2],600);
          iVar6 = 9;
        }
        else {
          iVar2 = 0;
          iVar6 = levelLoadState;
          if (levelLoadState == 9) {
            piVar5 = (int *)(DAT_800785e4 + 0xc);
            ptr_titleScreenAnimationTimer = DAT_800785e4;
            *(int *)(DAT_800785e4 + 0x10) = DAT_800785e4 + *(int *)(DAT_800785e4 + 0x10);
            iVar6 = iVar7;
            if (0 < *piVar5) {
              do {
                iVar2 = iVar2 + 1;
                *(int *)(iVar6 + 0x14) = DAT_800785e4 + *(int *)(iVar6 + 0x14);
                iVar6 = iVar6 + 4;
              } while (iVar2 < *(int *)(iVar7 + 0xc));
            }
            ptr_startOfCurrentLevelMobys = (char *)(DAT_800785e4 + DAT_80078604);
            iVar6 = 0;
            if (0 < *(int *)(ptr_titleScreenAnimationTimer + 0xc)) {
              iVar7 = 0;
              do {
                iVar7 = (iVar7 * 4 + iVar6 * 3) * 8;
                InitArrayRelated(ptr_startOfCurrentLevelMobys + iVar7);
                pcVar1 = ptr_startOfCurrentLevelMobys;
                ptr_startOfCurrentLevelMobys[iVar7 + 0x50] = ' ';
                iVar2 = ptr_titleScreenAnimationTimer;
                iVar6 = iVar6 + 1;
                *(short *)(pcVar1 + iVar7 + 0x36) = (short)iVar6;
                iVar7 = iVar6 * 2;
              } while (iVar6 < *(int *)(iVar2 + 0xc));
            }
            ptr_startOfCurrentLevelMobys
            [*(int *)(ptr_titleScreenAnimationTimer + 0xc) * 0x58 + 0x48] = -1;
            iVar6 = 10;
          }
        }
      }
    }
  }
  levelLoadState = iVar6;
  return;
}



void DragonBreakFree(void)

{
  int iVar1;
  long lVar2;
  undefined4 uVar3;
  uint *puVar4;
  ulong uVar5;
  uchar *addr;
  short *psVar6;
  int *piVar7;
  
  FUN_800163e4();
  if (DAT_80076bb8 != 0) {
    return;
  }
  iVar1 = CdSync(1,(u_char_conflict *)0x0);
  if (iVar1 != 2) {
    return;
  }
  if ((musicState & 0x40) == 0) {
    return;
  }
  switch(dragonState2) {
  case 0:
    DAT_80077068 = *(int *)(&DAT_80076c24 + dragonInHWFreed * 8);
    iVar1 = DAT_80076760 - (int)DAT_800785e0;
    if (iVar1 < DAT_80077068) {
      if (iVar1 < 0) {
        iVar1 = iVar1 + 0x7ff;
      }
      DAT_80077068 = (iVar1 >> 0xb) << 0xb;
      DAT_80077064 = 1;
    }
    else {
      DAT_80077064 = 0;
    }
    FUN_80016698(WADStartSector,DAT_800785e0,DAT_80077068,
                 *(int *)(&DAT_80076c20 + dragonInHWFreed * 8) +
                 *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10),600);
    goto LAB_80015008;
  case 1:
    ArrayCopy((int *)&DAT_80077030,DAT_800785e0,0x24);
    if (DAT_80077064 == 0) {
      DAT_80077078 = (int)DAT_800785e0 + DAT_8007704c;
      DAT_8007707c = DAT_80077050 / 0x18;
      DAT_80076b70 = FUN_800133e0((int)DAT_800785e0 + DAT_8007703c);
      DAT_80076b74 = FUN_800133e0((int)DAT_800785e0 + DAT_80077044);
      DAT_80077060 = 0;
    }
    else {
      SpuSetTransferStartAddr(0x80000 - DAT_80077038);
      SpuWrite((uchar *)((int)DAT_800785e0 + DAT_80077034),DAT_80077038);
      do {
        lVar2 = SpuIsTransferCompleted(0);
      } while (lVar2 == 0);
      ArrayCopy(DAT_800785e0,(int)DAT_800785e0 + DAT_8007703c,DAT_80077068 - DAT_8007703c);
      FUN_80016698(WADStartSector,(int)DAT_800785e0 + (DAT_80077068 - DAT_8007703c),
                   *(int *)(&DAT_80076c24 + dragonInHWFreed * 8) - DAT_80077068,
                   *(int *)(&DAT_80076c20 + dragonInHWFreed * 8) +
                   *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10) + DAT_80077068,600);
    }
    break;
  case 2:
    if (dragonState < 2) {
      return;
    }
    if (DAT_80077064 != 0) {
      DAT_80077078 = (int)DAT_800785e0 + (DAT_8007704c - DAT_8007703c);
      DAT_8007707c = DAT_80077050 / 0x18;
      DAT_80076b70 = FUN_800133e0();
      DAT_80076b74 = FUN_800133e0((int)DAT_800785e0 + (DAT_80077044 - DAT_8007703c));
      dragonState2 = dragonState2 + 1;
      return;
    }
    SpuSetTransferStartAddr((DAT_80077060 * 0x8000 + 0x80000) - DAT_80077038);
    addr = DAT_80076f50;
    if (ptr_DisplayInfo == &DRAW_ENV1) {
      addr = DAT_80076fd4;
    }
    uVar5 = 0x8000;
    if ((int)DAT_80077038 < DAT_80077060 * 0x8000 + 0x8000) {
      uVar5 = DAT_80077038;
      if ((int)DAT_80077038 < 0) {
        uVar5 = DAT_80077038 + 0x7fff;
      }
      uVar5 = DAT_80077038 + ((int)uVar5 >> 0xf) * -0x8000;
    }
    SpuRead(addr,uVar5);
    do {
      lVar2 = SpuIsTransferCompleted(0);
    } while (lVar2 == 0);
    SpuSetTransferStartAddr((DAT_80077060 * 0x8000 + 0x80000) - DAT_80077038);
    SpuWrite((uchar *)((int)DAT_800785e0 + DAT_80077060 * 0x8000 + DAT_80077034),uVar5);
    do {
      lVar2 = SpuIsTransferCompleted(0);
    } while (lVar2 == 0);
    ArrayCopy((int *)((int)DAT_800785e0 + DAT_80077060 * 0x8000 + DAT_80077034),addr,uVar5);
    DAT_80077060 = DAT_80077060 + 1;
    if (DAT_80077060 * 0x8000 < (int)DAT_80077038) {
      return;
    }
LAB_80015008:
    dragonState2 = dragonState2 + 1;
    return;
  case 3:
    if (dragonState < 6) {
      return;
    }
    if (DAT_80077064 == 1) {
      iVar1 = DAT_80077038 + 0x180f;
      if (iVar1 < 0) {
        iVar1 = DAT_80077038 + 0x200e;
      }
      DAT_80077068 = (iVar1 >> 0xb) * 0x800;
      if (0x100000 - DAT_80076c04 < DAT_80077068) {
        FUN_80016698(WADStartSector,DAT_800785e0,DAT_80076c04 + DAT_80077068 + -0x100000,
                     (DAT_80076c00 + *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10)) -
                     (DAT_80077068 + -0x100000),600);
      }
      else {
        DAT_80077064 = 0;
      }
    }
    break;
  case 4:
    if (DAT_80077064 == 1) {
      SpuSetTransferStartAddr(0x81010 - DAT_80077068);
      SpuWrite((uchar *)DAT_800785e0,DAT_80076c04 + DAT_80077068 + -0x100000);
      do {
        lVar2 = SpuIsTransferCompleted(0);
      } while (lVar2 == 0);
    }
    FUN_80016698(WADStartSector,DAT_800785e0,DAT_80076c14,
                 DAT_80076c10 + *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10),600);
    break;
  case 5:
    iVar1 = 0;
    FUN_80013230((int)DAT_800785e0 + (DAT_80076c50 - DAT_80076c10));
    puVar4 = &DAT_80076378;
    do {
      if ((*puVar4 & 0xffffff) < (DAT_800785fc & 0xffffff)) {
        *puVar4 = 0;
      }
      iVar1 = iVar1 + 1;
      puVar4 = puVar4 + 1;
    } while (iVar1 < 0x200);
    iVar1 = 1;
    piVar7 = &DAT_80076c50;
    psVar6 = &DAT_80076d52;
    do {
      piVar7 = piVar7 + 1;
      if (*piVar7 < 1) break;
      iVar1 = iVar1 + 1;
      uVar3 = FUN_800133e0((int)DAT_800785e0 + (*piVar7 - DAT_80076c10));
      (&DAT_80076378)[*psVar6] = uVar3;
      psVar6 = psVar6 + 1;
    } while (iVar1 < 0x40);
    break;
  default:
    goto switchD_80014bfc_caseD_6;
  }
  dragonState2 = dragonState2 + 1;
switchD_80014bfc_caseD_6:
                    // WARNING: Read-only address (ram,0x80076760) is written
                    // WARNING: Read-only address (ram,0x80076c00) is written
                    // WARNING: Read-only address (ram,0x80076c04) is written
                    // WARNING: Read-only address (ram,0x80076c10) is written
                    // WARNING: Read-only address (ram,0x80076c14) is written
                    // WARNING: Read-only address (ram,0x80076c50) is written
                    // WARNING: Read-only address (ram,0x80077034) is written
                    // WARNING: Read-only address (ram,0x80077038) is written
                    // WARNING: Read-only address (ram,0x8007703c) is written
                    // WARNING: Read-only address (ram,0x80077044) is written
                    // WARNING: Read-only address (ram,0x8007704c) is written
                    // WARNING: Read-only address (ram,0x80077050) is written
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void LevelTransitionRelated(int param_1)

{
  int iVar1;
  long lVar2;
  undefined4 uVar3;
  int iVar4;
  uint uVar5;
  undefined4 *puVar6;
  uint *puVar7;
  int iVar8;
  int iVar9;
  int *piVar10;
  int *piVar11;
  int *inputArray;
  short *psVar12;
  uint uVar13;
  RECT aRStack_68 [9];
  
  if (1 < levelLoadState) {
    FUN_800163e4();
    if (DAT_80076bb8 != 0) {
      return;
    }
    iVar1 = CdSync(1,(u_char_conflict *)0x0);
    if (iVar1 != 2) {
      return;
    }
    if ((musicState & 0x40) == 0) {
      return;
    }
  }
  switch(levelLoadState) {
  case 0:
    PauseMusicAndSFX(0);
    if (portalNumber < 0) {
      inputArray = DAT_80078a44 + -3;
      iVar4 = DAT_80078a44[-3] + 0x400;
      piVar11 = (int *)(DAT_800785e8 - iVar4);
      ArrayCopy(piVar11,inputArray,iVar4);
      DAT_80078a40 = piVar11[2];
      piVar10 = piVar11 + 3;
      iVar1 = 0;
      DAT_80078a44 = piVar10;
      if (0 < DAT_80078a40) {
        do {
          iVar1 = iVar1 + 1;
          *piVar10 = (int)piVar11 + (*piVar10 - (int)inputArray);
          piVar10 = piVar10 + 1;
        } while (iVar1 < DAT_80078a40);
      }
    }
    else {
      iVar8 = *(int *)(&DAT_80078640)[portalNumber];
      iVar4 = *(int *)(iVar8 + 0x14) + 0x400;
      piVar11 = (int *)(DAT_800785e8 - iVar4);
      ArrayCopy(piVar11,iVar8,iVar4);
      _clearColor = piVar11[6];
      DAT_80078a40 = piVar11[7];
      piVar10 = piVar11 + 8;
      iVar1 = 0;
      DAT_80078a44 = piVar10;
      if (0 < DAT_80078a40) {
        do {
          iVar1 = iVar1 + 1;
          *piVar10 = (int)piVar11 + ((*piVar10 + 0x14) - (iVar8 + 0x14));
          piVar10 = piVar10 + 1;
        } while (iVar1 < DAT_80078a40);
      }
    }
    piVar11 = (int *)((DAT_800785e8 - iVar4) - DAT_80076234);
    ArrayCopy(piVar11,localSFXArray,DAT_80076234);
    LevelTransitionAudioRelated(piVar11,0);
    DAT_80076e24 = 0xffffffff;
    levelLoadState = 2;
    break;
  case 1:
    PauseMusicAndSFX(0);
    DAT_80078a40 = 0;
    DAT_80076e24 = 0xffffffff;
    levelLoadState = levelLoadState + 1;
  case 2:
    levelIDPortalExit = levelID;
    UpdateFunctionPointersBasedOnLevelID();
    indexToPreviousLevelGems = levelID_Indexer;
    homeworldID = (int)levelIDPortalExit / 10 + -1;
    levelID_Indexer = homeworldID * 6 + (int)levelIDPortalExit % 10;
    if (param_1 != 0) {
      FUN_80016698(WADStartSector,&OverlayStart,
                   *(undefined4 *)(&DAT_8007a71c + levelID_Indexer * 0x10),
                   *(undefined4 *)(&DAT_8007a718 + levelID_Indexer * 0x10),600);
    }
    levelLoadState = levelLoadState + 1;
    break;
  case 3:
    FUN_80016698(WADStartSector,DAT_800785dc,0x800,
                 *(undefined4 *)(&DAT_8007a720 + levelID_Indexer * 0x10),600);
    levelLoadState = levelLoadState + 1;
    break;
  case 4:
    ArrayCopy(&DAT_80076c00,DAT_800785dc,0x1d0);
    FUN_80016698(WADStartSector,DAT_800785dc,0x80000,
                 DAT_80076c00 + *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10),600);
    portalNumber = 0;
    levelLoadState = levelLoadState + 1;
    break;
  case 5:
    aRStack_68[0].x = 0x200;
    aRStack_68[0].w = 0x200;
    aRStack_68[0].h = 0x100;
    aRStack_68[0].y = (short)(portalNumber << 8);
    LoadImage(aRStack_68,(u_long *)(DAT_800785dc + portalNumber * 0x40000));
    portalNumber = portalNumber + 1;
    if (portalNumber == 2) {
      levelLoadState = levelLoadState + 1;
      FUN_80016698(WADStartSector,DAT_800785dc,DAT_80076c04 + -0x80000,
                   DAT_80076c00 + *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10) + 0x80000,600);
    }
    break;
  case 6:
    SpuSetTransferStartAddr(0x1010);
    SpuWrite(DAT_800785dc,0x7eff0);
    levelLoadState = levelLoadState + 1;
    break;
  case 7:
    lVar2 = SpuIsTransferCompleted(0);
    if (lVar2 != 0) {
      levelLoadState = levelLoadState + 1;
    }
    break;
  case 8:
    FUN_80016698(WADStartSector,DAT_800785dc,DAT_80076c0c,
                 DAT_80076c08 + *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10),600);
    levelLoadState = levelLoadState + 1;
    break;
  case 9:
    DAT_800785e0 = FUN_80012d58(DAT_800785dc,0);
    if (((DAT_80078a40 != 0) && (gameState != GAMESTATE_GAME_OVER)) &&
       (gameState != GAMESTATE_BALLOONIST)) {
      if (portalToExitFromInHW == (int *)0x0) {
        DAT_80078a40 = DAT_80077780;
        DAT_80078a44 = DAT_80077784;
        DAT_80078a48 = DAT_80077788;
        DAT_80078a4c = DAT_8007778c;
        _clearColor = DAT_80077790;
      }
      else {
        iVar1 = 0;
        if (0 < DAT_800758bc) {
          puVar6 = &DAT_80078640;
          do {
            iVar1 = iVar1 + 1;
            if (((int **)*puVar6)[7] == portalToExitFromInHW) {
              piVar11 = *(int **)*puVar6;
              DAT_80078a40 = *piVar11;
              DAT_80078a44 = (int *)piVar11[1];
              DAT_80078a48 = piVar11[2];
              DAT_80078a4c = piVar11[3];
              _clearColor = piVar11[4];
              break;
            }
            puVar6 = puVar6 + 1;
          } while (iVar1 < DAT_800758bc);
        }
      }
    }
    FUN_80016698(WADStartSector,DAT_800785e0,DAT_80076c14,
                 DAT_80076c10 + *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10),600);
    levelLoadState = levelLoadState + 1;
    break;
  case 10:
    if (param_1 != 0) {
      FUN_80013230(DAT_800785e0 + (DAT_80076c50 - DAT_80076c10));
    }
    iVar1 = 0;
    puVar7 = &DAT_80076378;
    do {
      if ((*puVar7 & 0xffffff) < (DAT_800785fc & 0xffffff)) {
        *puVar7 = 0;
      }
      iVar1 = iVar1 + 1;
      puVar7 = puVar7 + 1;
    } while (iVar1 < 0x200);
    iVar1 = 1;
    piVar11 = &DAT_80076c50;
    psVar12 = &DAT_80076d52;
    do {
      piVar11 = piVar11 + 1;
      if (*piVar11 < 1) break;
      iVar1 = iVar1 + 1;
      uVar3 = FUN_800133e0(DAT_800785e0 + (*piVar11 - DAT_80076c10));
      (&DAT_80076378)[*psVar12] = uVar3;
      psVar12 = psVar12 + 1;
    } while (iVar1 < 0x40);
    DAT_800785e4 = DAT_800785e0 + DAT_80076c14;
    levelLoadState = levelLoadState + 1;
    DAT_80078604 = DAT_80076c1c;
    DAT_80078600 = DAT_80076c18;
    break;
  case 0xb:
    FUN_80016698(WADStartSector,DAT_800785e4,DAT_80078604,
                 DAT_80078600 + *(int *)(&DAT_8007a720 + levelID_Indexer * 0x10),600);
    levelLoadState = levelLoadState + 1;
    break;
  case 0xc:
    if (canFlyIn == 0) {
      levelLoadState = levelLoadState + 1;
    }
    else if (levelTransitionCameraAnimTimerRelated == 0) {
      if (portalToExitFromInHW == (int *)0x0) {
        uVar13 = (uint)(byte)spyro.RelativeSparxAngle.roll - (uint)spyro.unkown42._2_1_ & 0xff;
        if (0x80 < uVar13) {
          uVar13 = uVar13 - 0x100;
        }
        if ((int)uVar13 < 0) {
          uVar13 = -uVar13;
        }
        if ((int)uVar13 < 0x10) {
          levelLoadState = levelLoadState + 1;
        }
      }
      else {
        uVar13 = spyro.angle.yaw + maybeSpyroCameraOrbitYaw2 & 0xfff;
        if (0x800 < uVar13) {
          uVar13 = uVar13 - 0x1000;
        }
        if ((int)uVar13 < 0) {
          uVar13 = -uVar13;
        }
        if ((int)uVar13 < 0x80) {
          levelLoadState = levelLoadState + 1;
        }
      }
    }
    break;
  case 0xd:
    DAT_800776cc = 0x7080;
    if ((&levelEnteredStruct)[levelID_Indexer] == '\0') {
      DAT_800776cc = 0xa8c0;
    }
    musicLevelTrack = STR_LevelTrackLookupTable[levelID_Indexer];
    (&levelEnteredStruct)[levelID_Indexer] = 1;
    memset((uchar *)&DAT_80077888,'\0',0x68);
    amountOfGemsAlreadyFoundInLevel = levelGemsCollectedArray[levelID_Indexer];
    keys = 0;
    amountOfLiteralGemsPickedUp = 0;
    Maybe_currentLevelObjects(param_1);
    if (canFlyIn == 0) {
      if (isInFlightLevel == 0) {
        if (gameState != GAMESTATE_BALLOONIST) {
          SpyroMovement2(IDLE_STANDING);
        }
      }
      else {
        spyro.subState = 0;
      }
    }
    else if (isInFlightLevel == 0) {
      if (portalToExitFromInHW == (int *)0x0) {
        SpyroMovement2(GLIDE);
        CameraRotation(&cameraPosition);
        maybeSpyroCameraOrbitYaw2 = maybeSpyroCameraOrbitYaw2 + spyro.angle.yaw;
        maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
        maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
        DAT_80076e54 = DAT_80076e6c;
        DAT_80076e58 = DAT_80076e70;
        DAT_80076e5c = DAT_80076e74;
        spyro.RelativeSparxAngle.roll = (char)respawnRot;
        spyro.angle.yaw = (respawnRot & 0xff) << 4;
        maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2 + (respawnRot & 0xff) * -0x10;
        Vec3Copy((int *)&spyro,&respawnPosX);
        FUN_80034204(&cameraPosition);
        Vec3Zero((Vec3 *)&spyro.unkown18);
        if (flyInAnimation != &DAT_8006ca84) {
          Vec3Add(&cameraPosition,&cameraPosition,&spyro);
          FUN_800342f8();
          Vec3Copy((int *)&DAT_8006ebe4,&cameraPosition.x);
          FUN_80037714(&DAT_8006ebcc);
          spyro.subState = 10;
          goto LAB_800162c4;
        }
        spyro.position.z = spyro.position.z + -0x1600;
        spyro.position.x =
             spyro.position.x - (sineWaveArray[(byte)spyro.RelativeSparxAngle.roll + 0x40] * 5 >> 1)
        ;
        spyro.position.y =
             spyro.position.y - (sineWaveArray[(byte)spyro.RelativeSparxAngle.roll] * 5 >> 1);
        Vec3Add(&cameraPosition,&cameraPosition,&spyro);
        FUN_800342f8();
        unk_cameraRelatedLocking = (uint)(byte)(&DAT_8006c588)[spyro.state];
        spyro.subState = 0xb;
        gameState = GAMESTATE_GAMEPLAY;
        spyro.unkown3 = '\x04';
      }
      else {
        iVar1 = 0;
        if (0 < DAT_800758bc) {
          iVar4 = 0;
          do {
            iVar1 = iVar1 + 1;
            if (*(int **)(*(int *)((int)&DAT_80078640 + iVar4) + 0x1c) == portalToExitFromInHW) {
              uVar13 = (uint)(byte)spyro.RelativeSparxAngle.roll;
              piVar11 = *(int **)(ptr_startOfCurrentLevelMobys +
                                 *(int *)(*(int *)((int)&DAT_80078640 + iVar4) + 0x18) * 0x58);
              SpyroMovement2(GLIDE);
              spyro.subState = 9;
              CameraRotation(&cameraPosition);
              maybeSpyroCameraOrbitYaw2 = maybeSpyroCameraOrbitYaw2 + spyro.angle.yaw;
              if (piVar11[4] == 0) {
                Vec3Copy((int *)&spyro,(int *)(*piVar11 + 0x18));
                Vec3Copy(&spyro.unkownOops,(int *)(*piVar11 + 8));
                iVar1 = *piVar11;
                iVar9 = *(int *)(iVar1 + 8);
                iVar8 = *(int *)(iVar1 + 0x18);
                iVar4 = *(int *)(iVar1 + 0xc);
                iVar1 = *(int *)(iVar1 + 0x1c);
              }
              else {
                Vec3Copy((int *)&spyro,(int *)(*piVar11 + 8));
                Vec3Copy(&spyro.unkownOops,(int *)(*piVar11 + 0x18));
                iVar1 = *piVar11;
                iVar9 = *(int *)(iVar1 + 0x18);
                iVar8 = *(int *)(iVar1 + 8);
                iVar4 = *(int *)(iVar1 + 0x1c);
                iVar1 = *(int *)(iVar1 + 0xc);
              }
              uVar5 = ATan2Scaled(iVar9 - iVar8,iVar4 - iVar1,0);
              spyro.RelativeSparxAngle.roll = (char)uVar5;
              maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
              maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
              DAT_80076e54 = DAT_80076e6c;
              DAT_80076e58 = DAT_80076e70;
              DAT_80076e5c = DAT_80076e74;
              spyro.angle.yaw = (uVar5 & 0xff) << 4;
              maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2 + (uVar5 & 0xff) * -0x10;
              FUN_80034204(&cameraPosition);
              Vec3Add(&cameraPosition,&cameraPosition,&spyro);
              FUN_800342f8();
              spyro.unkown3 = '\x7f';
              DAT_800758fc = 0;
              levelTimerNoPause_Loads = (uVar13 - (byte)spyro.RelativeSparxAngle.roll) * 0x10;
              break;
            }
            iVar4 = iVar1 * 4;
          } while (iVar1 < DAT_800758bc);
        }
      }
    }
    else {
      spyro.subState = 10;
      CameraRotation(&cameraPosition);
      maybeSpyroCameraOrbitYaw2 = maybeSpyroCameraOrbitYaw2 + spyro.angle.yaw;
      Vec3Copy((int *)&spyro,&respawnPosX);
      maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
      maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
      DAT_80076e54 = DAT_80076e6c;
      DAT_80076e58 = DAT_80076e70;
      DAT_80076e5c = DAT_80076e74;
      spyro.RelativeSparxAngle.roll = (char)respawnRot;
      spyro.angle.yaw = (respawnRot & 0xff) << 4;
      maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2 + (respawnRot & 0xff) * -0x10;
      FUN_80034204(&cameraPosition);
      Vec3Add(&cameraPosition,&cameraPosition,&spyro);
      FUN_800342f8();
      Vec3Copy((int *)&DAT_8006ebe4,&cameraPosition.x);
      FUN_80037714(&DAT_8006ebcc);
LAB_800162c4:
      gameState = GAMESTATE_FLY_IN;
    }
    DAT_80078a40 = DAT_80077780;
    DAT_80078a44 = DAT_80077784;
    DAT_80078a48 = DAT_80077788;
    DAT_80078a4c = DAT_8007778c;
    _clearColor = DAT_80077790;
    levelLoadState = -1;
    canFlyIn = 0;
    portalToExitFromInHW = (int *)0x0;
    DAT_80075870 = 0;
    DAT_80075874 = 0;
    DAT_80075838 = 0;
    DAT_8007583c = 0;
    DAT_80075670 = 0;
    DAT_80075674 = 0;
    DAT_8007577c = 0;
    DAT_80075854 = 0;
    DAT_80075850 = 0;
    DAT_80075818 = 0xffffffff;
  }
                    // WARNING: Read-only address (ram,0x80076c00) is written
                    // WARNING: Read-only address (ram,0x80076c04) is written
                    // WARNING: Read-only address (ram,0x80076c08) is written
                    // WARNING: Read-only address (ram,0x80076c0c) is written
                    // WARNING: Read-only address (ram,0x80076c10) is written
                    // WARNING: Read-only address (ram,0x80076c14) is written
                    // WARNING: Read-only address (ram,0x80076c18) is written
                    // WARNING: Read-only address (ram,0x80076c1c) is written
                    // WARNING: Read-only address (ram,0x80076c50) is written
  return;
}



void FUN_800163e4(void)

{
  int iVar1;
  
  if ((isLoading != 0) && (isLoading < loadingTimer)) {
    CdInit();
    CdReadCallback(FUN_80016490);
    musicState = 0x40;
    DAT_800776c4 = 0;
    musicRelatedSecondParam = 0;
    do {
      iVar1 = CdSync(1,(u_char_conflict *)0x0);
    } while (iVar1 != 2);
    loadingTimer = 0;
    CdRead(DAT_80076b94,CDReadBuffer,0x80);
  }
  return;
}



void FUN_80016490(char param_1)

{
  if (param_1 == CdlComplete) {
    DAT_80076bb8 = 0;
    loadingTimer = 0;
    isLoading = 0;
  }
  else {
    CdControl('\x02',&DAT_80076b98,(u_char_conflict *)0x0);
    CdRead(DAT_80076b94,CDReadBuffer,0x80);
  }
  return;
}



void LoadCdData(int baseSector,u_long *buf,int numOfSectors,int offsetSector,undefined4 param_5)

{
  int iVar1;
  u_char_conflict local_28 [8];
  
  local_28[0] = 0x80;
  while (((DAT_80076bb8 != 0 || (iVar1 = CdSync(1,(u_char_conflict *)0x0), iVar1 != 2)) ||
         ((musicState & 0x40) == 0))) {
    FUN_800163e4();
    Maybe_SoundEffectProcessing();
    FUN_8002bbe0();
  }
  CdControl('\x0e',local_28,(u_char_conflict *)0x0);
  isLoading = param_5;
  loadingTimer = 0;
  iVar1 = offsetSector >> 0xb;
  if (offsetSector < 0) {
    iVar1 = offsetSector + 0x7ff >> 0xb;
  }
  CdIntToPos(baseSector + iVar1,(CdlLOC *)&DAT_80076b98);
  CdControl('\x02',&DAT_80076b98,(u_char_conflict *)0x0);
  iVar1 = numOfSectors + 0x7ff;
  if (iVar1 < 0) {
    iVar1 = numOfSectors + 0xffe;
  }
  DAT_80076b94 = iVar1 >> 0xb;
  DAT_80076bb8 = 1;
  CDReadBuffer = buf;
  CdRead(DAT_80076b94,buf,0x80);
  while ((DAT_80076bb8 != 0 || (iVar1 = CdSync(1,(u_char_conflict *)0x0), iVar1 != 2))) {
    FUN_800163e4();
  }
  return;
}



void FUN_80016698(int param_1,u_long *param_2,int param_3,int param_4,undefined4 param_5)

{
  int iVar1;
  u_char_conflict local_20 [8];
  
  local_20[0] = 0x80;
  CdControl('\x0e',local_20,(u_char_conflict *)0x0);
  loadingTimer = 0;
  isLoading = param_5;
  iVar1 = param_4 >> 0xb;
  if (param_4 < 0) {
    iVar1 = param_4 + 0x7ff >> 0xb;
  }
  CdIntToPos(param_1 + iVar1,(CdlLOC *)&DAT_80076b98);
  CdControl('\x02',&DAT_80076b98,(u_char_conflict *)0x0);
  iVar1 = param_3 + 0x7ff;
  if (iVar1 < 0) {
    iVar1 = param_3 + 0xffe;
  }
  DAT_80076b94 = iVar1 >> 0xb;
  DAT_80076bb8 = 1;
  CDReadBuffer = param_2;
  CdRead(DAT_80076b94,param_2,0x80);
  return;
}



undefined * VramRelated(int param_1)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  undefined4 *puVar3;
  undefined4 *puVar4;
  undefined2 *puVar5;
  int iVar6;
  undefined *puVar7;
  
  puVar1 = ptr_maybe_graphicsArray2;
  puVar4 = ptr_primitivesArray;
  puVar3 = ptr_maybe_graphicsArray2 + param_1 * 2;
  do {
    puVar2 = puVar3;
    puVar5 = (undefined2 *)puVar2[-2];
    if (puVar2 == ptr_maybe_graphicsArray2) {
      puVar5 = (undefined2 *)*ptr_primitivesArray;
      puVar7 = (undefined *)ptr_primitivesArray[1];
      *ptr_primitivesArray = 0;
      if (puVar5 != (undefined2 *)0x0) {
        puVar4[1] = 0;
        *puVar5 = 0xbbe0;
        *(undefined *)(puVar5 + 1) = 6;
        return puVar7;
      }
      return &DAT_8006bbe0;
    }
    puVar3 = puVar2 + -2;
  } while (puVar5 == (undefined2 *)0x0);
  puVar7 = (undefined *)puVar2[-1];
  *puVar3 = 0;
  puVar2[-1] = 0;
  if (puVar3 != puVar1) {
    while (puVar4 = puVar3, iVar6 = puVar4[-1], puVar4 != puVar1) {
      puVar3 = puVar4 + -2;
      if (iVar6 != 0) {
        *puVar5 = (short)iVar6;
        *(char *)(puVar5 + 1) = (char)((uint)iVar6 >> 0x10);
        puVar5 = (undefined2 *)*puVar3;
        puVar4[-1] = 0;
        *puVar3 = 0;
      }
    }
  }
  puVar4 = ptr_primitivesArray;
  iVar6 = ptr_primitivesArray[1];
  if (iVar6 != 0) {
    *puVar5 = (short)iVar6;
    *(char *)(puVar5 + 1) = (char)((uint)iVar6 >> 0x10);
    puVar5 = (undefined2 *)*puVar4;
    puVar4[1] = 0;
    *puVar4 = 0;
    *puVar5 = 0xbbe0;
    *(undefined *)(puVar5 + 1) = 6;
    return puVar7;
  }
  *puVar5 = 0xbbe0;
  *(undefined *)(puVar5 + 1) = 6;
  return puVar7;
}



void AddToWorldTable(int param_1,int param_2)

{
  undefined2 *puVar1;
  int *piVar2;
  
  piVar2 = (int *)(param_2 * 8 + ptr_maybe_graphicsArray2);
  puVar1 = (undefined2 *)*piVar2;
  *piVar2 = param_1;
  if (puVar1 != (undefined2 *)0x0) {
    *puVar1 = (short)param_1;
    *(char *)(puVar1 + 1) = (char)((uint)param_1 >> 0x10);
    return;
  }
  piVar2[1] = param_1;
  return;
}



void DrawPrimitive(int param_1)

{
  int *piVar1;
  undefined2 *puVar2;
  
  piVar1 = ptr_primitivesArray;
  puVar2 = (undefined2 *)*ptr_primitivesArray;
  *ptr_primitivesArray = param_1;
  if (puVar2 != (undefined2 *)0x0) {
    *puVar2 = (short)param_1;
    *(char *)(puVar2 + 1) = (char)((uint)param_1 >> 0x10);
    return;
  }
  piVar1[1] = param_1;
  return;
}



void * memset(uchar *param_1,uchar param_2,int param_3)

{
  bool bVar1;
  void *in_v0;
  undefined3 in_register_00000015;
  undefined4 *puVar2;
  
  puVar2 = (undefined4 *)(param_1 + param_3 + -4);
  do {
    *(uint *)param_1 = CONCAT31(in_register_00000015,param_2);
    bVar1 = (undefined4 *)param_1 != puVar2;
    param_1 = (uchar *)((int)param_1 + 4);
  } while (bVar1);
  return in_v0;
}



void FUN_80016930(undefined4 *param_1,undefined4 param_2,int param_3)

{
  bool bVar1;
  undefined4 *puVar2;
  
  puVar2 = (undefined4 *)((int)param_1 + param_3 + -0x10);
  do {
    *param_1 = param_2;
    param_1[1] = param_2;
    param_1[2] = param_2;
    param_1[3] = param_2;
    bVar1 = param_1 != puVar2;
    param_1 = param_1 + 4;
  } while (bVar1);
  return;
}



void ArrayCopy(int *outputArray,int *inputArray,int arrayLength)

{
  int *piVar1;
  int *piVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  
  piVar2 = (int *)((int)outputArray + arrayLength + -4);
  do {
    iVar3 = inputArray[1];
    iVar4 = inputArray[2];
    iVar5 = inputArray[3];
    *outputArray = *inputArray;
    inputArray = inputArray + 4;
    if (outputArray == piVar2) {
      return;
    }
    outputArray[1] = iVar3;
    if (outputArray + 1 == piVar2) {
      return;
    }
    outputArray[2] = iVar4;
    piVar1 = outputArray + 3;
    if (outputArray + 2 == piVar2) {
      return;
    }
    *piVar1 = iVar5;
    outputArray = outputArray + 4;
  } while (piVar1 != piVar2);
  return;
}



int Maybe_CalculateAngle(int param_1,int param_2)

{
  int iVar1;
  int maxOfAbsP1AbsP2;
  int angle;
  uint uAngle;
  bool isNegativeAngle;
  
  angle = param_1;
  if (param_1 < 0) {
    angle = -param_1;
  }
  maxOfAbsP1AbsP2 = param_2;
  if (param_2 < 0) {
    maxOfAbsP1AbsP2 = -param_2;
  }
  iVar1 = angle;
  if (0 < angle - maxOfAbsP1AbsP2) {
    iVar1 = maxOfAbsP1AbsP2;
    maxOfAbsP1AbsP2 = angle;
  }
  if (maxOfAbsP1AbsP2 == 0) {
    maxOfAbsP1AbsP2 = 1;
  }
  if (param_1 < 0) {
    if (param_2 < 0) {
      isNegativeAngle = false;
      if (param_2 - param_1 < 0) {
        isNegativeAngle = true;
        angle = 0xc0;
      }
      else {
        angle = 0x80;
      }
    }
    else {
      isNegativeAngle = true;
      if (-param_2 - param_1 < 0) {
        isNegativeAngle = false;
        angle = 0x40;
      }
      else {
        angle = 0x80;
      }
    }
  }
  else if (param_2 < 0) {
    isNegativeAngle = true;
    if (param_1 + param_2 < 0) {
      isNegativeAngle = false;
      angle = 0xc0;
    }
    else {
      angle = 0x100;
    }
  }
  else {
    isNegativeAngle = false;
    if (param_1 - param_2 < 0) {
      isNegativeAngle = true;
      angle = 0x40;
    }
    else {
      angle = 0;
    }
  }
  uAngle = (uint)(byte)s__________________________________8006d82c
                       [(iVar1 << 6) / maxOfAbsP1AbsP2 + 0xdc];
  if (isNegativeAngle) {
    uAngle = -uAngle;
  }
  return angle + uAngle;
}



// Calculates the angle between the vector (x,y) and the positive x-axis (rotating
// counter-clockwise).
// 
// Outputs scaled: 
//  if high_precision = 0: [0,255] 
//  else: [0,4095]

int ATan2Scaled(uint x,uint y,int high_precision)

{
  uint absX;
  uint absY;
  int quadrantOffset;
  int numLeadingZeros;
  uint numBits;
  int *ptr_lookup;
  int scaledLookupValue;
  int lookupValue;
  uint smallerValue;
  int *ptr_prevLookup;
  bool sign;
  
  absX = x;
  if ((int)x < 0) {
    absX = -x;
  }
  absY = y;
  if ((int)y < 0) {
    absY = -y;
  }
  gte_ldLZCS(absX | absY);
  numLeadingZeros = gte_stLZCR();
  numBits = 0x11 - numLeadingZeros;
  if (0 < (int)numBits) {
    absX = (int)absX >> (numBits & 0x1f);
    absY = (int)absY >> (numBits & 0x1f);
  }
  smallerValue = absX;
  if (0 < (int)(absX - absY)) {
    smallerValue = absY;
    absY = absX;
  }
  if (absY != 0) {
    absY = (int)(smallerValue << 0x10) / (int)absY;
    if ((int)x < 0) {
      if ((int)y < 0) {
        sign = false;
        if ((int)(y - x) < 0) {
          sign = true;
          quadrantOffset = 0xc0;
        }
        else {
          quadrantOffset = 0x80;
        }
      }
      else {
        sign = true;
        if ((int)(-y - x) < 0) {
          sign = false;
          quadrantOffset = 0x40;
        }
        else {
          quadrantOffset = 0x80;
        }
      }
    }
    else if ((int)y < 0) {
      sign = true;
      if ((int)(x + y) < 0) {
        sign = false;
        quadrantOffset = 0xc0;
      }
      else {
        quadrantOffset = 0x100;
      }
    }
    else {
      sign = false;
      if ((int)(x - y) < 0) {
        sign = true;
        quadrantOffset = 0x40;
      }
      else {
        quadrantOffset = 0;
      }
    }
    ptr_prevLookup = ATAN_LOOKUP_TABLE + (absY >> 0xb);
    do {
      ptr_lookup = ptr_prevLookup;
      lookupValue = ptr_lookup[1] - absY;
      ptr_prevLookup = ptr_lookup + 1;
    } while (lookupValue < 0);
    absX = (uint)(ptr_lookup + 0x1ffe4c61) >> 2;
    if (high_precision != 0) {
      absX = (uint)(ptr_lookup + 0x1ffe4c61) >> 1;
      scaledLookupValue = absX * 8;
      if (absX != 0x40) {
        scaledLookupValue = scaledLookupValue + 8;
      }
      quadrantOffset = quadrantOffset << 4;
      absX = scaledLookupValue -
             ((uint)((lookupValue * 0x10000) /
                    (int)(uint)*(ushort *)((int)ATAN_PRECISION_LOOKUP_TABLE + absX)) >> 0xc);
    }
    if (sign) {
      absX = -absX;
    }
    return quadrantOffset + absX;
  }
  return 0;
}



// Function segment: [0,pi/2]
// Inputs scaled: [0,1024]
// Outputs scaled: [0,4096]

int SinScaled(uint param_1)

{
  uint uVar1;
  
  uVar1 = (param_1 & 0xfff) >> 4;
  if ((param_1 & 0xf) != 0) {
    return ((int)((param_1 & 0xf) * ((int)sineWaveArray[uVar1 + 1] - (int)sineWaveArray[uVar1])) >>
           4) + (int)sineWaveArray[uVar1];
  }
  return (int)sineWaveArray[uVar1];
}



// Function segment: [0,pi/2]
// Inputs scaled: [0,1024]
// Outputs scaled: [0,4096]

int CosScaled(uint param_1)

{
  uint uVar1;
  
  uVar1 = (param_1 & 0xfff) >> 4;
  if ((param_1 & 0xf) != 0) {
    return ((int)((param_1 & 0xf) *
                 ((int)sineWaveArray[uVar1 + 0x41] - (int)sineWaveArray[uVar1 + 0x40])) >> 4) +
           (int)sineWaveArray[uVar1 + 0x40];
  }
  return (int)sineWaveArray[uVar1 + 0x40];
}



int Maybe_SizeOfDataEstimate(int param_1)

{
  int iVar1;
  
  gte_ldLZCS(param_1);
  if (param_1 != 0) {
    iVar1 = gte_stLZCR();
    return 0x1f - iVar1;
  }
  return 0;
}



// Not sure entirely what this does without proper analysis. However, there's an instance of it
// being used to set the rotation matrix in Spyro's struct (param_2 is the output address)

void UNK_MatrixOperation(uint *param_1,uint *outputMatrix,uint *optionalInputMatrix)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  uint A12A11;
  uint A21A13;
  uint A23A22;
  uint A32A31;
  uint A33;
  
  uVar1 = *param_1;
  if (optionalInputMatrix == (uint *)0x0) {
    A12A11 = 0x1000;
    A21A13 = 0;
    A23A22 = 0x1000;
    A32A31 = 0;
    A33 = 0x1000;
  }
  else {
    A12A11 = *optionalInputMatrix;
    A21A13 = optionalInputMatrix[1];
    A23A22 = optionalInputMatrix[2];
    A32A31 = optionalInputMatrix[3];
    A33 = optionalInputMatrix[4];
  }
  gte_ldR11R12(A12A11);
  gte_ldR13R21(A21A13);
  gte_ldR22R23(A23A22);
  gte_ldR31R32(A32A31);
  gte_ldR33(A33);
  gte_ldtr(0,0,0);
  uVar2 = uVar1 >> 0xf & 0x1fe;
  if (uVar2 != 0) {
    A33 = (uint)*(ushort *)((int)sineWaveArray + uVar2 + 0x80);
    gte_ldVXY0(A33);
    gte_ldVZ0((uint)*(ushort *)((int)sineWaveArray + uVar2));
    gte_rtv0();
    A21A13 = gte_stIR1();
    iVar4 = gte_stIR2();
    uVar5 = gte_stIR3();
    gte_ldVXY0(-(uint)*(ushort *)((int)sineWaveArray + uVar2) & 0xffff);
    gte_ldVZ0(A33);
    gte_rtv0_b();
    A12A11 = (A12A11 & 0xffff0000) + (A21A13 & 0xffff);
    A32A31 = (A32A31 & 0xffff0000) + (uVar5 & 0xffff);
    A21A13 = gte_stIR1();
    iVar3 = gte_stIR2();
    A33 = gte_stIR3();
    A21A13 = (A21A13 & 0xffff) + iVar4 * 0x10000;
    A23A22 = (A23A22 & 0xffff) + iVar3 * 0x10000;
    A33 = A33 & 0xffff;
    gte_ldR11R12(A12A11);
    gte_ldR13R21(A21A13);
    gte_ldR22R23(A23A22);
    gte_ldR31R32(A32A31);
    gte_ldR33(A33);
  }
  uVar2 = (uVar1 & 0xff00) >> 8;
  if ((uVar1 & 0xff00) != 0) {
    gte_ldVXY0((uint)(ushort)sineWaveArray[uVar2 + 0x40] << 0x10);
    gte_ldVZ0((uint)(ushort)sineWaveArray[uVar2]);
    gte_rtv0();
    iVar3 = gte_stIR1();
    uVar5 = gte_stIR2();
    iVar4 = gte_stIR3();
    gte_ldVXY0((uint)(ushort)sineWaveArray[uVar2] * -0x10000);
    gte_ldVZ0((uint)(ushort)sineWaveArray[uVar2 + 0x40]);
    gte_rtv0_b();
    A12A11 = (A12A11 & 0xffff) + iVar3 * 0x10000;
    A32A31 = (A32A31 & 0xffff) + iVar4 * 0x10000;
    A23A22 = gte_stIR1();
    iVar3 = gte_stIR2();
    A33 = gte_stIR3();
    A21A13 = (A21A13 & 0xffff0000) + (A23A22 & 0xffff);
    A23A22 = iVar3 * 0x10000 + (uVar5 & 0xffff);
    A33 = A33 & 0xffff;
    gte_ldR11R12(A12A11);
    gte_ldR13R21(A21A13);
    gte_ldR22R23(A23A22);
    gte_ldR31R32(A32A31);
    gte_ldR33(A33);
  }
  uVar1 = uVar1 & 0xff;
  if (uVar1 != 0) {
    gte_ldVZ0(0);
    gte_ldVXY0((uint)(ushort)sineWaveArray[uVar1] * 0x10000 +
               (uint)(ushort)sineWaveArray[uVar1 + 0x40]);
    gte_rtv0();
    A12A11 = gte_stIR1();
    iVar3 = gte_stIR2();
    A32A31 = gte_stIR3();
    gte_ldVXY0((-(uint)(ushort)sineWaveArray[uVar1] & 0xffff) +
               (uint)(ushort)sineWaveArray[uVar1 + 0x40] * 0x10000);
    gte_ldVZ0(0);
    gte_rtv0_b();
    A21A13 = (A21A13 & 0xffff) + iVar3 * 0x10000;
    iVar3 = gte_stIR1();
    uVar1 = gte_stIR2();
    iVar4 = gte_stIR3();
    A12A11 = iVar3 * 0x10000 + (A12A11 & 0xffff);
    A32A31 = iVar4 * 0x10000 + (A32A31 & 0xffff);
    A23A22 = (A23A22 & 0xffff0000) + (uVar1 & 0xffff);
    gte_ldR11R12(A12A11);
    gte_ldR13R21(A21A13);
    gte_ldR22R23(A23A22);
    gte_ldR31R32(A32A31);
    gte_ldR33(A33);
  }
  *outputMatrix = A12A11;
  outputMatrix[1] = A21A13;
  outputMatrix[2] = A23A22;
  outputMatrix[3] = A32A31;
  outputMatrix[4] = A33;
  return;
}



// Matrix is represented by an array of 5 ints
// 
// A[0] holds A11 in its rightmost 16 bits, and A12 in its leftmost 16 bits
// A[1] holds A13 in its rightmost 16 bits, and A21 in its leftmost 16 bits
// A[2] holds A22 in its rightmost 16 bits, and A23 in its leftmost 16 bits
// A[3] holds A31 in its rightmost 16 bits, and A32 in its leftmost 16 bits
// A[4] holds A33 in its rightmost 16 bits

void MatrixTranspose(uint *outputMatrix,uint *inputMatrix)

{
  uint A12;
  uint A23;
  uint A21;
  uint A31;
  uint A13;
  uint A23A22;
  uint A32;
  uint A33;
  uint A13_;
  uint A32_;
  
  A23A22 = inputMatrix[2];
  A33 = inputMatrix[4];
  A12 = *inputMatrix & 0xffff0000;
  A21 = inputMatrix[1] & 0xffff0000;
  A13 = inputMatrix[1] ^ A21;
  A13_ = A13 & 0xffff;
  A31 = inputMatrix[3] & 0xffff;
  A32 = inputMatrix[3] ^ A31;
  A23 = A23A22 & 0xffff0000;
  A32_ = A32 & 0xffff0000;
  *outputMatrix = *inputMatrix ^ A12 | A21;
  outputMatrix[1] = (A13 | A12) ^ A13_ | A31;
  outputMatrix[2] = A23A22 ^ A23 | A32_;
  outputMatrix[3] = (A32 | A13_) ^ A32_ | A23;
  outputMatrix[4] = A33;
  return;
}



// Param_1 is a 5 int array representing the 3x3 rotation matrix. 
// Param_1[0] holds R11 in its rightmost 16 bits, and R12 in its leftmost 16 bits
// Param_1[1] holds R13 in its rightmost 16 bits, and R21 in its leftmost 16 bits
// Param_1[2] holds R22 in its rightmost 16 bits, and R23 in its leftmost 16 bits
// Param_1[3] holds R31 in its rightmost 16 bits, and R32 in its leftmost 16 bits
// Param_1[4] holds R33 in its rightmost 16 bits
// 
// Param_2 is the Vec3 that the rotation is being performed upon
// 
// Param_3 is the address we store the resulting matrix in 

void Vec3ApplyRotationMatrix
               (undefined4 *rotationMatrix,undefined4 *inputVector,undefined4 *outputVector)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  
  gte_ldR11R12(*rotationMatrix);
  gte_ldR13R21(rotationMatrix[1]);
  gte_ldR22R23(rotationMatrix[2]);
  gte_ldR31R32(rotationMatrix[3]);
  gte_ldR33(rotationMatrix[4]);
  gte_ldIR3(*inputVector);
  gte_ldIR1(-inputVector[1]);
  gte_ldIR2(-inputVector[2]);
  gte_rtir();
  uVar1 = gte_stMAC3();
  iVar2 = gte_stMAC1();
  iVar3 = gte_stMAC2();
  *outputVector = uVar1;
  outputVector[1] = -iVar2;
  outputVector[2] = -iVar3;
  return;
}



void Vec3ApplyLastLoadedRotationMatrix(undefined4 *inputVector,undefined4 *outputVector)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  
  gte_ldIR3(*inputVector);
  gte_ldIR1(-inputVector[1]);
  gte_ldIR2(-inputVector[2]);
  gte_rtir();
  uVar1 = gte_stMAC3();
  iVar2 = gte_stMAC1();
  iVar3 = gte_stMAC2();
  *outputVector = uVar1;
  outputVector[1] = -iVar2;
  outputVector[2] = -iVar3;
  return;
}



void Vec3Rotate3ByCameraMatrix(int *inputVector,int *outputVector)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  gte_ldR11R12(gCamera6.R12R11);
  gte_ldR13R21(gCamera6.R21R13);
  gte_ldR22R23(gCamera6.R23R22);
  gte_ldR31R32(gCamera6.R32R31);
  gte_ldR33(gCamera6.R33);
  iVar3 = *inputVector;
  gte_ldIR3(iVar3);
  iVar1 = -inputVector[1];
  gte_ldIR1(iVar1);
  iVar2 = -inputVector[2];
  gte_ldIR2(iVar2);
  gte_rtir();
  read_mt(iVar3,iVar1,iVar2);
  *outputVector = iVar3;
  outputVector[1] = iVar1;
  outputVector[2] = iVar2;
  return;
}



void Maybe_AlternateVec3IntToShort(uint *dest,uint *src)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  
  uVar1 = *src;
  uVar2 = src[1];
  uVar3 = src[2];
  uVar5 = uVar1;
  if ((int)uVar1 < 0) {
    uVar5 = -uVar1;
  }
  uVar6 = uVar2;
  if ((int)uVar2 < 0) {
    uVar6 = -uVar2;
  }
  uVar7 = uVar3;
  if ((int)uVar3 < 0) {
    uVar7 = -uVar3;
  }
  gte_ldLZCS(uVar5 | uVar6 | uVar7);
  iVar4 = gte_stLZCR();
  uVar5 = 0x11 - iVar4;
  if (0 < (int)uVar5) {
    uVar1 = (int)uVar1 >> (uVar5 & 0x1f);
    uVar2 = (int)uVar2 >> (uVar5 & 0x1f);
    uVar3 = (int)uVar3 >> (uVar5 & 0x1f);
  }
  *dest = uVar1;
  dest[1] = uVar2;
  dest[2] = uVar3;
  return;
}



// WARNING: Instruction at (ram,0x80017268) overlaps instruction at (ram,0x80017264)
// 
// Calculates the length of a given vector. If flag3D is set, it will calculate it for a 3D-vector,
// otherwise a 2D-vector.

uint Vec3CalculateLengthE(int *vector,VecLength3DFlag flag3D)

{
  int in_at;
  int iVar1;
  int in_v0;
  int in_v1;
  undefined3 in_register_00000015;
  uint uVar2;
  
  gte_ldIR1(vector);
  gte_ldIR3(0);
  gte_ldIR2(vector + 1);
  if (CONCAT31(in_register_00000015,flag3D) != 0) {
    gte_ldIR3(vector + 2);
  }
  gte_sqr0(0);
  read_mt(in_at,in_v0,in_v1);
  iVar1 = in_at + in_v0 + in_v1;
  gte_ldLZCS(iVar1);
  uVar2 = 0;
  if (iVar1 != 0) {
    uVar2 = gte_stLZCR();
    uVar2 = uVar2 & 0xfffffffe;
    if ((int)(uVar2 - 0x18) < 0) {
      iVar1 = iVar1 >> (0x18 - uVar2 & 0x1f);
    }
    else {
      iVar1 = iVar1 << (uVar2 - 0x18 & 0x1f);
    }
    uVar2 = (int)SquareRootShapeScaledArray[iVar1 + -0x40] << ((int)(0x1f - uVar2) >> 1 & 0x1fU);
  }
  return uVar2 >> 0xc;
}



// It seems to me that this function decides whether to accept param_2 as an accurate estimation for
// the length of the vector param_1. If it is not satisfied, we enter the bottom conditional and
// adjust.

int Maybe_ImproveEstimate(int param_1,int param_2,int param_3)

{
  int in_at;
  int in_v0;
  int in_v1;
  int iVar1;
  uint uVar2;
  
  gte_ldIR1(param_1);
  gte_ldIR3(0);
  gte_ldIR2(param_1 + 4);
  if (param_3 != 0) {
    gte_ldIR3(param_1 + 8);
  }
  gte_sqr0_b(0);
  read_mt(in_at,in_v0,in_v1);
  gte_ldLZCS(param_2 * param_2);
  iVar1 = gte_stLZCR();
  uVar2 = 0x20U - iVar1 >> 1;
  if (0 < (int)(uVar2 - 6)) {
    return param_2 + (((in_at + in_v0 + in_v1) / (int)((uint)(param_2 * param_2) >> (uVar2 & 0x1f))
                       - (1 << (uVar2 & 0x1f)) >> 1) * param_2 >> (uVar2 & 0x1f));
  }
  return param_2;
}



// WARNING: Instruction at (ram,0x800173a0) overlaps instruction at (ram,0x8001739c)
// 
// Normalizes the vector param_1 to a size of param_2. 
// 
// I don't believe param_3 and param_4 are actually parameters. I think these should be local
// variables and Ghidra is confused here, but I can't be sure.

void VecNormalize(int *a,int size,int param_3,int param_4)

{
  int iVar1;
  uint uVar2;
  int in_t0;
  
  gte_ldsv_(*a,a[1],a[2]);
  gte_sqr0(0);
  read_mt(param_3,param_4,in_t0);
  iVar1 = param_3 + param_4 + in_t0;
  gte_ldLZCS(iVar1);
  if (iVar1 != 0) {
    uVar2 = gte_stLZCR();
    uVar2 = uVar2 & 0xfffffffe;
    if ((int)(uVar2 - 0x18) < 0) {
      iVar1 = iVar1 >> (0x18 - uVar2 & 0x1f);
    }
    else {
      iVar1 = iVar1 << (uVar2 - 0x18 & 0x1f);
    }
    iVar1 = (size << 0xc) /
            (int)((uint)((int)SquareRootShapeScaledArray[iVar1 + -0x40] <<
                        ((int)(0x1f - uVar2) >> 1 & 0x1fU)) >> 0xc);
    *a = *a * iVar1 >> 0xc;
    a[1] = a[1] * iVar1 >> 0xc;
    a[2] = a[2] * iVar1 >> 0xc;
    return;
  }
  *a = 0;
  a[1] = 0;
  a[2] = 0;
  return;
}



undefined4 FUN_80017428(int *param_1,int *param_2,int *param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int in_t4;
  int in_t5;
  
  iVar2 = param_2[2];
  iVar1 = *param_2 >> 4;
  iVar3 = iVar2 >> 4;
  iVar4 = *param_1;
  iVar5 = param_1[1];
  iVar6 = param_1[2];
  iVar8 = iVar5 * -0x10000;
  gte_ldR11R12((-iVar4 & 0xffffU) + iVar8);
  gte_ldR13R21(-iVar6);
  gte_ldsv_(iVar1,param_2[1] >> 4,iVar3);
  gte_rtir_sf0();
  iVar7 = gte_stMAC1();
  gte_ldsv_(iVar1,param_2[1] >> 4,iVar3);
  if (iVar7 < 0) {
    *param_3 = iVar4;
    param_3[1] = iVar5;
    param_3[2] = iVar6;
    return 0;
  }
  gte_sqr0_b(0);
  read_mt(iVar8,in_t4,in_t5);
  gte_ldsv_(iVar1,0,iVar3);
  gte_ldMAC1(0);
  gte_ldMAC2(0);
  gte_ldMAC3(0);
  gte_ldIR0((iVar7 << 6) / (iVar8 + in_t4 + in_t5));
  gte_gpl0();
  read_mt(iVar1,0,iVar3);
  *param_3 = (*param_2 >> 10) * 2 + iVar4;
  param_3[1] = iVar5;
  param_3[2] = (iVar2 >> 10) * 2 + iVar6;
  return 1;
}



void FUN_80017548(int *param_1,int *param_2,int *param_3,long *param_4)

{
  gte_ldsv_(*param_3 - *param_1,param_3[1] - param_1[1],param_3[2] - param_1[2]);
  gte_ldR11R12(*param_2 - *param_1);
  gte_ldR22R23(param_2[1] - param_1[1]);
  gte_ldR33(param_2[2] - param_1[2]);
  gte_op0(0);
  gte_stlvnl0(param_4);
  gte_stMAC2();
  gte_stMAC3();
  return;
}



// This scales the vector down by the fraction determined in the arguments
// 

void Vec3ScaleDownByFraction(VECTOR *vector,int denominator,int numerator)

{
  int in_at;
  int in_v0;
  int in_v1;
  
  denominator = (numerator << 0xc) / denominator;
  gte_ldlvl(vector);
  gte_ldMAC1(0);
  gte_ldMAC2(0);
  gte_ldMAC3(0);
  gte_ldIR0(denominator);
  gte_gpl0();
  read_mt(in_at,in_v0,in_v1);
  vector->vx = in_at >> 0xc;
  vector->vy = in_v0 >> 0xc;
  vector->vz = in_v1 >> 0xc;
  return;
}



// The vector is scaled down by numerator / 2^denominatorExponent to ensure the denominator is a
// power of 2, for effeciency

void Vec3ScaleDownByFractionPowerOfTwo(VECTOR *vector,undefined4 numerator,uint denominatorExponent)

{
  uint in_at;
  uint in_v0;
  uint in_v1;
  
  gte_ldlvl(vector);
  gte_ldMAC1(0);
  gte_ldMAC2(0);
  gte_ldMAC3(0);
  gte_ldIR0(numerator);
  gte_gpl0();
  read_mt(in_at,in_v0,in_v1);
  if ((int)in_at < 0) {
    in_at = -(-in_at >> (denominatorExponent & 0x1f));
  }
  else {
    in_at = in_at >> (denominatorExponent & 0x1f);
  }
  if ((int)in_v0 < 0) {
    in_v0 = -(-in_v0 >> (denominatorExponent & 0x1f));
  }
  else {
    in_v0 = in_v0 >> (denominatorExponent & 0x1f);
  }
  if ((int)in_v1 < 0) {
    in_v1 = -(-in_v1 >> (denominatorExponent & 0x1f));
  }
  else {
    in_v1 = in_v1 >> (denominatorExponent & 0x1f);
  }
  vector->vx = in_at;
  vector->vy = in_v0;
  vector->vz = in_v1;
  return;
}



void Vec3ScaleUpByPowerOfTwo(int *arr1,uint param_2)

{
  *arr1 = *arr1 << (param_2 & 0x1f);
  arr1[1] = arr1[1] << (param_2 & 0x1f);
  arr1[2] = arr1[2] << (param_2 & 0x1f);
  return;
}



void Vec3ScaleDownByPowerOfTwo(int *arr1,uint exponent)

{
  *arr1 = *arr1 >> (exponent & 0x1f);
  arr1[1] = arr1[1] >> (exponent & 0x1f);
  arr1[2] = arr1[2] >> (exponent & 0x1f);
  return;
}



void Vec3Zero(Vec3 *a)

{
  a->x = 0;
  a->y = 0;
  a->z = 0;
  return;
}



void Vec3Copy(int *dest,int *src)

{
  int local_src_Y;
  int local_src_Z;
  
  local_src_Y = src[1];
  local_src_Z = src[2];
  *dest = *src;
  dest[1] = local_src_Y;
  dest[2] = local_src_Z;
  return;
}



// Checks if two vectors are equal, then returns true or false

bool Vec3AreEqual(int *a,int *b)

{
  if (*a == *b) {
    if ((a[1] == b[1]) && (b[2] == a[2])) {
      return true;
    }
  }
  return false;
}



void Vec3Add(int *result,int *a,int *b)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar1 = a[1];
  iVar2 = a[2];
  iVar3 = b[1];
  iVar4 = b[2];
  *result = *a + *b;
  result[1] = iVar1 + iVar3;
  result[2] = iVar2 + iVar4;
  return;
}



void Vec3Subtract(int *destVec,int *a,int *b)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar1 = a[1];
  iVar2 = a[2];
  iVar3 = b[1];
  iVar4 = b[2];
  *destVec = *a - *b;
  destVec[1] = iVar1 - iVar3;
  destVec[2] = iVar2 - iVar4;
  return;
}



// param 3 - lerp amount is 0-0x20

void Vec3Scale(long *result,VECTOR *vector,undefined4 multiplier)

{
  gte_ldlvl(vector);
  gte_ldMAC1(0);
  gte_ldMAC2(0);
  gte_ldMAC3(0);
  gte_ldIR0(multiplier);
  gte_gpl0();
  gte_stlvnl0(result);
  gte_stMAC2();
  gte_stMAC3();
  return;
}



void MaybeInverseSingleVecInterpolate(int *param_1,VECTOR *param_2,int param_3)

{
  int in_v0;
  int in_v1;
  
  param_3 = 0x10000 / param_3;
  gte_ldlvl(param_2);
  gte_ldMAC1(0);
  gte_ldMAC2(0);
  gte_ldMAC3(0);
  gte_ldIR0(param_3);
  gte_gpl0();
  read_mt(param_3,in_v0,in_v1);
  *param_1 = param_3 >> 0x10;
  param_1[1] = in_v0 >> 0x10;
  param_1[2] = in_v1 >> 0x10;
  return;
}



void FUN_80017854(long *param_1,undefined4 *param_2,VECTOR *param_3)

{
  gte_ldR11R12(*param_2);
  gte_ldR22R23(param_2[1]);
  gte_ldR33(param_2[2]);
  gte_ldlvl(param_3);
  gte_op0(0);
  gte_stlvnl0(param_1);
  gte_stMAC2();
  gte_stMAC3();
  return;
}



void FUN_80017894(int *param_1,int *param_2,VECTOR *param_3,int param_4)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  gte_ldIR0(param_4);
  gte_ldlvl(param_3);
  gte_gpf0(0);
  iVar1 = *param_2;
  iVar2 = param_2[1];
  iVar3 = param_2[2];
  gte_ldIR0(0x1000 - param_4);
  gte_ldsv_(iVar1,iVar2,iVar3);
  gte_gpl0();
  read_mt(iVar1,iVar2,iVar3);
  *param_1 = iVar1 >> 0xc;
  param_1[1] = iVar2 >> 0xc;
  param_1[2] = iVar3 >> 0xc;
  return;
}



// Calculates the difference between the two parameters and finds the smallest 8-bit "distance"
// between them. This is particularly useful if the parameters are 8-bit representations of angles,
// as this returns the angle of the shortest rotation between them. So if this function was passed
// the equivalent of 10 and 350, it would return 20 instead of -340.

byte Maybe_Calculate8BitDifference(int param_1,int param_2)

{
  uint delta_8bit;
  
  delta_8bit = param_1 - param_2 & 0xff;
  if (-1 < (int)(delta_8bit - 0x80)) {
    delta_8bit = 0x100 - delta_8bit;
  }
  return (byte)delta_8bit;
}



// Assuming that the value 2048 is being used as a representative for pi radians (and hence 4096 for
// 2pi radians). Then if the difference between the angles param_1 and param_2 is greater than pi
// radians, simply consider the distance in the opposite direction, and this will be 2pi- our
// original calculated distance.
// 
// In this way, angle difference can never truly be greater than pi radians, and hence the output of
// this function is between 0 and 2048

uint Maybe_AngleDiff(int param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = param_1 - param_2 & 0xfff;
  if (-1 < (int)(uVar1 - 0x800)) {
    uVar1 = 0x1000 - uVar1;
  }
  return uVar1;
}



uint FUN_80017948(int param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = param_1 - param_2 & 0xff;
  if (0 < (int)(uVar1 - 0x80)) {
    return uVar1 - 0x100;
  }
  return uVar1;
}



uint FUN_8001796c(int param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = param_1 - param_2 & 0xfff;
  if (0 < (int)(uVar1 - 0x800)) {
    return uVar1 - 0x1000;
  }
  return uVar1;
}



int Vec2EstimateOctagonalDistance(Vec2 *vecA,Vec2 *vecB)

{
  int XDistance;
  int YDistance;
  
  XDistance = vecB->x - vecA->x;
  YDistance = vecB->y - vecA->y;
  if (XDistance < 0) {
    XDistance = -XDistance;
  }
  if (YDistance < 0) {
    YDistance = -YDistance;
  }
  if (XDistance - YDistance < 0) {
    return ((uint)(XDistance * 3) >> 3) + YDistance;
  }
                    // The multiplication and bitshifting/division are used in tandem to approximate
                    // the Euclidean distance, which ends up creating an octagonal shape.
                    // https://www.desmos.com/calculator/sdfzv21ias
  return XDistance + ((uint)(YDistance * 3) >> 3);
}



char FUN_800179f0(char param_1,char param_2,char param_3,int param_4)

{
  uint uVar1;
  
  uVar1 = (uint)(byte)(param_1 - param_2);
  if ((int)(uVar1 - 0x80) < 1) {
    if (-1 < (int)(uVar1 - param_4)) {
      return param_2 + param_3;
    }
  }
  else if ((int)((uVar1 - 0x100) + param_4) < 1) {
    return param_2 - param_3;
  }
  return param_2;
}



// WARNING: Instruction at (ram,0x80017a70) overlaps instruction at (ram,0x80017a6c)
// 

uint SquareRoot(int param_1)

{
  uint uVar1;
  
  gte_ldLZCS(param_1);
  uVar1 = 0;
  if (param_1 != 0) {
    uVar1 = gte_stLZCR();
    uVar1 = uVar1 & 0xfffffffe;
    if ((int)(uVar1 - 0x18) < 0) {
      param_1 = param_1 >> (0x18 - uVar1 & 0x1f);
    }
    else {
      param_1 = param_1 << (uVar1 - 0x18 & 0x1f);
    }
    uVar1 = (int)SquareRootShapeScaledArray[param_1 + -0x40] << ((int)(0x1f - uVar1) >> 1 & 0x1fU);
  }
  return uVar1 >> 0xc;
}



void WorldToScreen(int *screenCoords,int *inputWorldCoords)

{
  int iVar1;
  int iVar2;
  
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  gte_ldtr(0,0,0);
  gte_ldVZ0(*inputWorldCoords - cameraPosition.x);
  gte_ldVXY0(cameraPosition.y - inputWorldCoords[1] & 0xffffU |
             (cameraPosition.z - inputWorldCoords[2]) * 0x10000);
  gte_rtps();
  iVar1 = gte_stSXY2();
  iVar2 = gte_stMAC3();
  *screenCoords = (int)(short)iVar1;
  screenCoords[1] = iVar1 >> 0x10;
  screenCoords[2] = iVar2;
  return;
}



void DrawPortalRelated(int *param_1,int *param_2,uint param_3)

{
  int iVar1;
  int iVar2;
  
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  gte_ldtr(0,0,0);
  gte_ldVZ0(*param_2 - cameraPosition.x >> (param_3 & 0x1f));
  gte_ldVXY0(cameraPosition.y - param_2[1] >> (param_3 & 0x1f) & 0xffffU |
             (cameraPosition.z - param_2[2] >> (param_3 & 0x1f)) << 0x10);
  gte_rtps();
  iVar1 = gte_stSXY2();
  iVar2 = gte_stMAC3();
  *param_1 = (int)(short)iVar1;
  param_1[1] = iVar1 >> 0x10;
  param_1[2] = iVar2 << (param_3 & 0x1f);
  return;
}



// Scales down the source vector by 4, then stores it in a short vector. 

void Vec3ScaleDownBy4(short *result,int *source)

{
  int iVar1;
  int iVar2;
  
  iVar1 = source[1];
  iVar2 = source[2];
  *result = (short)(*source >> 2);
  result[1] = (short)(iVar1 >> 2);
  result[2] = (short)(iVar2 >> 2);
  return;
}



void Vec3ShortScaleUpBy4(int *result,ushort *source)

{
  ushort uVar1;
  ushort uVar2;
  
  uVar1 = source[1];
  uVar2 = source[2];
  *result = (uint)*source << 2;
  result[1] = (uint)uVar1 << 2;
  result[2] = (uint)uVar2 << 2;
  return;
}



void Vec3ShortToInt(int *dest,short *source)

{
  short sVar1;
  short sVar2;
  
  sVar1 = source[1];
  sVar2 = source[2];
  *dest = (int)*source;
  dest[1] = (int)sVar1;
  dest[2] = (int)sVar2;
  return;
}



void Vec3IntToShort(short *dest,int *source)

{
  int iVar1;
  int iVar2;
  
  iVar1 = source[1];
  iVar2 = source[2];
  *dest = (short)*source;
  dest[1] = (short)iVar1;
  dest[2] = (short)iVar2;
  return;
}



void Vec3ShortAdd(short *result,short *a,short *b)

{
  short sVar1;
  short sVar2;
  short sVar3;
  short sVar4;
  
  sVar1 = a[1];
  sVar2 = a[2];
  sVar3 = b[1];
  sVar4 = b[2];
  *result = *a + *b;
  result[1] = sVar1 + sVar3;
  result[2] = sVar2 + sVar4;
  return;
}



void FUN_80017cb8(int param_1,int *param_2)

{
  uint *puVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  
  puVar1 = (uint *)(*(int *)(DAT_800785d4 + 0x10) + param_1 * 0xc);
  uVar2 = *puVar1;
  uVar3 = puVar1[1];
  uVar4 = puVar1[2];
  uVar5 = uVar2 & 0x3fff;
  *param_2 = uVar5 << 4;
  param_2[3] = (((int)(uVar2 << 9) >> 0x17) + uVar5) * 0x10;
  param_2[6] = (((int)uVar2 >> 0x17) + uVar5) * 0x10;
  uVar2 = uVar3 & 0x3fff;
  param_2[1] = uVar2 << 4;
  param_2[4] = (((int)(uVar3 << 9) >> 0x17) + uVar2) * 0x10;
  param_2[7] = (((int)uVar3 >> 0x17) + uVar2) * 0x10;
  uVar2 = uVar4 & 0x3fff;
  param_2[2] = uVar2 << 4;
  param_2[5] = (((uVar4 << 8) >> 0x18) + uVar2) * 0x10;
  param_2[8] = ((uVar4 >> 0x18) + uVar2) * 0x10;
  return;
}



int FUN_80017d7c(int *param_1,int *param_2,int *param_3,uint param_4)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  
  iVar7 = param_1[1];
  gte_ldLZCS(param_4 >> 1);
  iVar2 = gte_stLZCR();
  if (iVar2 != 0x20) {
    uVar1 = *param_2 - *param_1;
    uVar3 = param_2[1] - iVar7;
    if ((int)uVar1 < 0) {
      uVar1 = -uVar1;
    }
    uVar4 = param_2[2] - param_1[2];
    if ((int)uVar3 < 0) {
      uVar3 = -uVar3;
    }
    if ((int)uVar4 < 0) {
      uVar4 = -uVar4;
    }
    if ((int)(uVar1 - uVar3) < 0) {
      uVar1 = uVar3;
    }
    if ((int)(uVar1 - uVar4) < 0) {
      uVar1 = uVar4;
    }
    iVar2 = 0x1000 / (int)(uVar1 >> (0x20U - iVar2 & 0x1f));
    gte_ldIR1(*param_2 - *param_1);
    gte_ldIR2(param_2[1] - iVar7);
    gte_ldIR3(param_2[2] - param_1[2]);
    gte_ldIR0(iVar2);
    gte_gpf0_b(0);
    iVar5 = gte_stMAC1();
    iVar6 = gte_stMAC2();
    iVar7 = gte_stMAC3();
    *param_3 = iVar5 >> 0xc;
    iVar7 = iVar7 >> 0xc;
    param_3[1] = iVar6 >> 0xc;
  }
  param_3[2] = iVar7;
  return iVar2;
}



ulonglong PortalShimmer(undefined4 param_1,uint param_2,undefined4 param_3)

{
  undefined4 uVar1;
  
  gte_ldRGB(param_1);
  gte_ldIR0(param_3);
  gte_ldfcdir((param_2 & 0xff) << 4,param_2 >> 4 & 0xff0,param_2 >> 0xc & 0xff0);
  gte_dpcs();
  uVar1 = gte_stRGB2();
  return CONCAT44(param_2 >> 0xc,uVar1) & 0xff0ffffffff;
}



// Processes the "screenshot" taken when pausing, viewing Signposts in J or
// viewing flight level menus.
// It seems like it's being simplified here

void ImageRelated(uint *param_1,int param_2)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint *puVar6;
  uint *puVar7;
  
  uVar1 = *param_1;
  puVar7 = (uint *)((int)param_1 + param_2);
  puVar6 = param_1;
  do {
    uVar3 = uVar1 & 0x1f;
    uVar4 = uVar1 & 0x3e0;
    uVar5 = uVar1 & 0x7c00;
    uVar2 = uVar1 >> 0x10;
    uVar1 = param_1[1];
    *(char *)puVar6 = (char)(uVar3 * 4 + (uVar4 >> 4) + (uVar4 >> 5) + (uVar5 >> 10) >> 3);
    *(char *)((int)puVar6 + 1) =
         (char)((uVar2 & 0x1f) * 4 + ((uVar2 & 0x3e0) >> 4) + ((uVar2 & 0x3e0) >> 5) +
                ((uVar2 & 0x7c00) >> 10) >> 3);
    puVar6 = (uint *)((int)puVar6 + 2);
    param_1 = param_1 + 1;
  } while (puVar6 != puVar7);
  return;
}



void DecompressImage(uint *nextintptr,int *dest,int maybeBrightness)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  uint *puVar9;
  int *piVar10;
  int *piVar11;
  
  uVar1 = *nextintptr;
  puVar9 = nextintptr + 1;
  while( true ) {
    uVar3 = *puVar9;
    puVar9 = puVar9 + 1;
    if ((int)uVar1 < 0) break;
    piVar10 = (int *)((int)dest + ((uVar1 << 0xf) >> 0xd));
    uVar2 = uVar1 >> 0x11;
    uVar1 = uVar3;
    piVar11 = piVar10;
    do {
      uVar3 = uVar1 >> 0x18;
      uVar5 = uVar1 >> 0x10;
      uVar6 = uVar1 >> 8;
      uVar7 = uVar1 & 0xff;
      uVar1 = *puVar9;
      iVar4 = uVar3 + maybeBrightness;
      iVar8 = 0;
      if (0 < iVar4) {
        iVar8 = iVar4 * 0x1000000;
      }
      iVar4 = (uVar5 & 0xff) + maybeBrightness;
      if (0 < iVar4) {
        iVar8 = iVar8 + iVar4 * 0x10000;
      }
      iVar4 = (uVar6 & 0xff) + maybeBrightness;
      if (0 < iVar4) {
        iVar8 = iVar8 + iVar4 * 0x100;
      }
      iVar4 = uVar7 + maybeBrightness;
      dest = piVar11 + 1;
      if (0 < iVar4) {
        iVar8 = iVar8 + iVar4;
      }
      *piVar11 = iVar8;
      puVar9 = puVar9 + 1;
      piVar11 = dest;
    } while (piVar10 + uVar2 != dest);
  }
  return;
}



undefined2 TMR_SYSCLOCK_VAL(void)

{
  return (undefined2)TMR_SYSCLOCK_VAL;
}



uchar * DrawTextCapitals(char *text,int *textInfo,int spacing,uchar color)

{
  byte bVar1;
  undefined2 uVar2;
  uint uVar3;
  
  bVar1 = *text;
  while (bVar1 != 0) {
    if (bVar1 != 0x20) {
      ptr_hudMobys = ptr_hudMobys + -0x58;
      memset(ptr_hudMobys,'\0',0x58);
      Vec3Copy((int *)(ptr_hudMobys + 0xc),textInfo);
      bVar1 = *text;
      uVar3 = (uint)bVar1;
      if (uVar3 - 0x30 < 10) {
        *(ushort *)(ptr_hudMobys + 0x36) = bVar1 + 0xd4;
      }
      else if (uVar3 - 0x41 < 0x1a) {
        *(ushort *)(ptr_hudMobys + 0x36) = bVar1 + 0x169;
      }
      else {
        if (uVar3 == 0x2f) {
          uVar2 = 0x115;
        }
        else if (uVar3 == 0x3f) {
          uVar2 = 0x116;
        }
        else if (uVar3 == 0x25) {
          uVar2 = 0x110;
        }
        else if (uVar3 == 0x5e) {
          uVar2 = 0x141;
        }
        else {
          uVar2 = 0x147;
          if (uVar3 == 0x2b) {
            uVar2 = 0x13d;
          }
        }
        *(undefined2 *)(ptr_hudMobys + 0x36) = uVar2;
      }
      ptr_hudMobys[0x47] = '\x7f';
      ptr_hudMobys[0x4f] = color;
      ptr_hudMobys[0x50] = 0xff;
    }
    text = (char *)((byte *)text + 1);
    *textInfo = *textInfo + spacing;
    bVar1 = *text;
  }
  return ptr_hudMobys;
}



int DrawTextAll(byte *text,int *CapitalTextInfo,int *LowercaseTextInfo,int spacing,char color)

{
  byte bVar1;
  bool bVar2;
  uchar *puVar3;
  int iVar4;
  uint uVar5;
  
  bVar2 = true;
  bVar1 = *text;
  while (bVar1 != 0) {
    if (bVar1 == 0x20) {
      iVar4 = *LowercaseTextInfo * 3;
      bVar2 = true;
      if (iVar4 < 0) {
        iVar4 = iVar4 + 3;
      }
      *CapitalTextInfo = *CapitalTextInfo + (iVar4 >> 2);
    }
    else {
      ptr_hudMobys = ptr_hudMobys + -0x58;
      memset(ptr_hudMobys,'\0',0x58);
      Vec3Copy((int *)(ptr_hudMobys + 0xc),CapitalTextInfo);
      puVar3 = ptr_hudMobys;
      if ((*text == 0x21) || (*text == 0x3f)) {
        bVar2 = true;
      }
      if (!bVar2) {
        *(int *)(ptr_hudMobys + 0x10) = *(int *)(ptr_hudMobys + 0x10) + LowercaseTextInfo[1];
        *(int *)(puVar3 + 0x14) = LowercaseTextInfo[2];
      }
      puVar3 = ptr_hudMobys;
      bVar1 = *text;
      uVar5 = (uint)bVar1;
      if (uVar5 - 0x30 < 10) {
        *(ushort *)(ptr_hudMobys + 0x36) = bVar1 + 0xd4;
      }
      else if (uVar5 - 0x41 < 0x1a) {
        *(ushort *)(ptr_hudMobys + 0x36) = bVar1 + 0x169;
      }
      else if (uVar5 == 0x21) {
        *(undefined2 *)(ptr_hudMobys + 0x36) = 0x4b;
      }
      else if (uVar5 == 0x2c) {
        *(undefined2 *)(ptr_hudMobys + 0x36) = 0x4c;
      }
      else if (uVar5 == 0x3f) {
        *(undefined2 *)(ptr_hudMobys + 0x36) = 0x116;
      }
      else if (uVar5 == 0x2e) {
        *(undefined2 *)(ptr_hudMobys + 0x36) = 0x147;
      }
      else {
        *(undefined2 *)(ptr_hudMobys + 0x36) = 0x4c;
        *(int *)(puVar3 + 0x10) = *(int *)(puVar3 + 0x10) - (*LowercaseTextInfo << 1) / 3;
      }
      ptr_hudMobys[0x47] = '\x7f';
      ptr_hudMobys[0x4f] = color;
      ptr_hudMobys[0x50] = 0xff;
      if (bVar2) {
        iVar4 = *CapitalTextInfo + spacing;
      }
      else {
        iVar4 = *CapitalTextInfo + *LowercaseTextInfo;
      }
      *CapitalTextInfo = iVar4;
      bVar2 = *text - 0x30 < 10;
    }
    text = text + 1;
    bVar1 = *text;
  }
  return (int)ptr_hudMobys;
}



// WARNING: Unable to use type for symbol ptr_toLine

void DrawLine(int Point1X,int Point1Y,int Point2X,int Point2Y)

{
  byte differenceBetweenAngleAndTimer;
  int lineP1Angle;
  int lineP2Angle;
  char adjustedDifference;
  undefined4 *ptr_toLine;
  
  ptr_toLine = ptr_graphicsRelated;
  *ptr_graphicsRelated = 0x4000000;
  *(undefined *)((int)ptr_toLine + 7) = 0x50;
  *(short *)(ptr_toLine + 2) = (short)Point1X;
  *(short *)((int)ptr_toLine + 10) = (short)Point1Y;
  *(short *)(ptr_toLine + 4) = (short)Point2X;
                    // CalculateAngle Used to create an offset between different lines, so they
                    // don't fade at the same time
                    // 
  *(short *)((int)ptr_toLine + 0x12) = (short)Point2Y;
  lineP1Angle = Maybe_CalculateAngle(Point1X + -0x100,Point1Y + -0x78);
                    // Calculate8bitDifference used to get the difference only from 0-0xFF. This is
                    // because it will be used for the color, which is 1 byte.
                    // 
  differenceBetweenAngleAndTimer = Maybe_Calculate8BitDifference(lineP1Angle,wobbleAndOpacityTimer);
  adjustedDifference = -differenceBetweenAngleAndTimer + -0x20;
  *(char *)(ptr_toLine + 1) = adjustedDifference;
  *(char *)((int)ptr_toLine + 5) = adjustedDifference;
  *(byte *)((int)ptr_toLine + 6) = -differenceBetweenAngleAndTimer + -0x80;
  lineP2Angle = Maybe_CalculateAngle(Point2X + -0x100,Point2Y + -0x78);
  differenceBetweenAngleAndTimer = Maybe_Calculate8BitDifference(lineP2Angle,wobbleAndOpacityTimer);
  adjustedDifference = -differenceBetweenAngleAndTimer + -0x20;
  *(char *)(ptr_toLine + 3) = adjustedDifference;
  *(char *)((int)ptr_toLine + 0xd) = adjustedDifference;
  *(byte *)((int)ptr_toLine + 0xe) = -differenceBetweenAngleAndTimer + -0x80;
  DrawPrimitive(ptr_toLine);
  ptr_graphicsRelated = ptr_toLine + 5;
  return;
}



void DrawArrow(int *hudMobyInfo,uint timer,int leftOrRightArrow)

{
  int *dest;
  
  if ((timer & 0x1f) < 0x10) {
    ptr_hudMobys = ptr_hudMobys + -0x58;
    memset(ptr_hudMobys,'\0',0x58);
    dest = (int *)(ptr_hudMobys + 0xc);
    *(undefined2 *)(ptr_hudMobys + 0x36) = 0x105;
    Vec3Copy(dest,hudMobyInfo);
    if (leftOrRightArrow < 2) {
      ptr_hudMobys[0x44] = '@';
      ptr_hudMobys[0x46] = (uchar)(leftOrRightArrow << 7);
    }
    ptr_hudMobys[0x47] = '\x7f';
    ptr_hudMobys[0x4f] = '\v';
    ptr_hudMobys[0x50] = 0xff;
  }
  return;
}



void DrawTextBox(int param_1,int param_2,int param_3,int param_4)

{
  DR_MODE *pDVar1;
  
  pDVar1 = ptr_graphicsRelated;
  SetDrawMode(ptr_graphicsRelated,1,0,0x40,(RECT *)0x0);
  DrawPrimitive(pDVar1);
  pDVar1[1].tag = 0x5000000;
  *(undefined *)((int)pDVar1[1].code + 3) = 0x2a;
  *(short *)(pDVar1[1].code + 1) = (short)param_1;
  *(short *)&pDVar1[2].tag = (short)param_2;
  *(short *)pDVar1[2].code = (short)param_1;
  *(short *)(pDVar1[2].code + 1) = (short)param_2;
  *(short *)((int)pDVar1[1].code + 6) = (short)param_3;
  *(short *)((int)&pDVar1[2].tag + 2) = (short)param_3;
  *(short *)((int)pDVar1[2].code + 2) = (short)param_4;
  *(short *)((int)pDVar1[2].code + 6) = (short)param_4;
  *(undefined *)pDVar1[1].code = 0x70;
  *(undefined *)((int)pDVar1[1].code + 1) = 0x70;
  *(undefined *)((int)pDVar1[1].code + 2) = 0x70;
  DrawPrimitive(pDVar1 + 1);
  ptr_graphicsRelated = pDVar1 + 3;
  DrawLine(param_1,param_3,param_2,param_3);
  DrawLine(param_2,param_3,param_2,param_4);
  DrawLine(param_2,param_4,param_1,param_4);
  DrawLine(param_1,param_4,param_1,param_3);
  return;
}



void DragonText(void)

{
  int iVar1;
  char *__s;
  int iVar2;
  int local_28;
  undefined4 local_24;
  undefined4 local_20;
  
  __s = (&PTR_s_SILVUS_8006f694)[*(int *)(*ptrToLastDragonTouched + 0x38)];
  iVar1 = strlen(__s);
  iVar2 = ptr_hudMobys;
  local_28 = (iVar1 + -1) * -0xd + 0xb0;
  local_24 = 200;
  local_20 = 0x1000;
  DrawTextCapitals(s_RESCUED_800755ac,&local_28,0x14,2);
  local_28 = (iVar1 + -1) * -0xd + 0x150;
  local_24 = 200;
  local_20 = 0xc00;
  DrawTextCapitals(__s,&local_28,0x1a,2);
  iVar2 = iVar2 + -0x58;
  iVar1 = 0;
  if (ptr_hudMobys <= iVar2) {
    do {
      *(char *)(iVar2 + 0x46) =
           (char)((ushort)sineWaveArray[(dragonTimer * 2 + iVar1 & 0xffU) + 0x40] >> 7);
      iVar2 = iVar2 + -0x58;
      iVar1 = iVar1 + 0xc;
    } while (ptr_hudMobys <= iVar2);
  }
  return;
}



// Possible VM_VIB.OBJ/SsUtVibrateOff

void UnusedDeadFunc(void)

{
  return;
}



void CopyHudToShaded(void)

{
  int *piVar1;
  int *piVar2;
  
  piVar2 = &ptr_maybeTextObj;
  if (ptr_maybeTextObj != 0) {
    piVar1 = &DAT_800720f8;
    do {
      piVar2 = piVar1;
      piVar1 = piVar2 + 1;
    } while (*piVar2 != 0);
  }
  if (ptr_hudMobys != DAT_800756fc) {
    do {
      *piVar2 = ptr_hudMobys;
      ptr_hudMobys = ptr_hudMobys + 0x58;
      piVar2 = piVar2 + 1;
    } while (ptr_hudMobys != DAT_800756fc);
  }
  *piVar2 = 0;
  return;
}



void DemoModeText(void)

{
  int iVar1;
  int iVar2;
  int local_28;
  undefined4 local_24;
  undefined4 local_20;
  int local_18;
  undefined4 local_14;
  undefined4 local_10;
  
  iVar2 = ptr_hudMobys;
  local_18 = 0x10;
  local_14 = 1;
  local_10 = 0x1400;
  local_28 = 199;
  local_24 = 200;
  local_20 = 0x1100;
  DrawTextAll((byte *)"DEMO MODE",&local_28,&local_18,0x12,'\t');
  iVar2 = iVar2 + -0x58;
  iVar1 = 0;
  if (ptr_hudMobys <= iVar2) {
    do {
      *(byte *)(iVar2 + 0x46) =
           (byte)((ushort)sineWaveArray[(levelTimer * 4 + iVar1 & 0xffU) + 0x40] >> 9);
      iVar2 = iVar2 + -0x58;
      iVar1 = iVar1 + 0xc;
    } while (ptr_hudMobys <= iVar2);
  }
  CopyHudToShaded();
  return;
}



void FUN_800189f0(void)

{
  DR_MODE *pDVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  undefined uVar5;
  int *piVar6;
  undefined uVar7;
  int iVar8;
  undefined uVar9;
  int iVar10;
  undefined uVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  int local_d8;
  int local_d4;
  int local_c8;
  int local_c0;
  int local_b8;
  int local_b0;
  int local_a8;
  int local_a0;
  int local_98;
  int local_90;
  int local_88;
  int local_80;
  int local_78;
  int local_50;
  int local_48;
  int local_40;
  int *local_38;
  uint local_30;
  
  local_80 = 0;
  local_c8 = 0;
  if (0 < DAT_80075684) {
    local_40 = 0;
    local_38 = &DAT_800772c8;
    do {
      iVar3 = *(int *)(&DAT_80078658 + local_40);
      iVar13 = 0;
      local_78 = iVar3;
      if (0 < *local_38) {
        piVar6 = (int *)((int)&DAT_800772c8 + local_40);
        do {
          DrawPortalRelated(iVar3 + 0xc,iVar3,1);
          iVar13 = iVar13 + 1;
          iVar3 = iVar3 + 0x1c;
        } while (iVar13 < *piVar6);
      }
      iVar3 = 0;
      if (0 < *local_38 + -1) {
        local_50 = 0;
        local_48 = 0;
        iVar13 = local_78;
        do {
          uVar4 = -(uint)(iVar3 != *(int *)((int)&DAT_800772c8 + local_40) + -2) & 70000;
          if (iVar3 < 3) {
            uVar4 = local_48 << 5;
          }
          if (levelIDPortalExit == 0x3f) {
            uVar4 = (int)uVar4 >> 2;
          }
          if (*(int *)(iVar13 + 0x18) < 0x51) {
            Vec3Subtract(&local_d8,(int *)(iVar13 + 0xc),(int *)(local_50 + local_78 + 0x28));
            iVar15 = local_d4 * local_d4;
            iVar2 = -local_d8;
            local_80 = local_80 + 1;
            local_d8 = local_d4;
            local_d4 = iVar2;
            iVar2 = SquareRoot(iVar15 + iVar2 * iVar2);
            pDVar1 = ptr_graphicsRelated;
            if ((iVar2 == 0) || (*(int *)(iVar13 + 0x14) == 0)) {
              local_d8 = 0;
              local_d4 = 0;
            }
            else {
              iVar15 = local_d8 * uVar4;
              iVar8 = *(int *)(iVar13 + 0x14) * iVar2;
              local_d8 = iVar15 / iVar8;
              if (iVar8 == 0) {
                trap(0x1c00);
              }
              if ((iVar8 == -1) && (iVar15 == -0x80000000)) {
                trap(0x1800);
              }
              iVar15 = local_d4 * uVar4;
              iVar2 = *(int *)(iVar13 + 0x14) * iVar2;
              local_d4 = iVar15 / iVar2;
              if (iVar2 == 0) {
                trap(0x1c00);
              }
              if ((iVar2 == -1) && (iVar15 == -0x80000000)) {
                trap(0x1800);
              }
            }
            local_c0 = *(int *)(iVar13 + 0xc) + local_d8;
            local_b8 = *(int *)(iVar13 + 0xc) - local_d8;
            local_b0 = *(int *)(iVar13 + 0x10) + local_d4;
            local_a8 = *(int *)(iVar13 + 0x10) - local_d4;
            if ((1 < local_80) && (uVar4 = *(int *)(iVar13 + 0x14) >> 7, uVar4 < 2000)) {
              iVar2 = *(int *)(iVar13 + 0x18);
              iVar12 = iVar2 * -2 + 0x96;
              iVar10 = iVar2 * -4 + 0x96;
              iVar15 = *(int *)(iVar13 + -4);
              iVar14 = iVar2 * -10 + 0x96;
              iVar8 = iVar15 * -2 + 0x96;
              iVar2 = iVar15 * -4 + 0x96;
              iVar15 = iVar15 * -10 + 0x96;
              if (iVar12 < 0) {
                iVar12 = 0;
              }
              if (iVar10 < 0) {
                iVar10 = 0;
              }
              if (iVar14 < 0) {
                iVar14 = 0;
              }
              if (iVar8 < 0) {
                iVar8 = 0;
              }
              if (iVar2 < 0) {
                iVar2 = 0;
              }
              if (iVar15 < 0) {
                iVar15 = 0;
              }
              uVar11 = (char)iVar12;
              uVar9 = (char)iVar10;
              uVar7 = (char)iVar8;
              uVar5 = (char)iVar2;
              if (levelIDPortalExit == 0x3f) {
                uVar11 = (char)iVar10;
                uVar9 = (char)iVar12;
                uVar7 = (char)iVar2;
                uVar5 = (char)iVar8;
              }
              local_30 = uVar4;
              SetDrawMode(ptr_graphicsRelated,1,0,0x20,(RECT *)0x0);
              AddToWorldTable(pDVar1,local_30);
              pDVar1[1].tag = 0x8000000;
              *(undefined *)((int)pDVar1[1].code + 3) = 0x3a;
              *(undefined2 *)(pDVar1[1].code + 1) = (undefined2)local_c0;
              *(undefined2 *)pDVar1[2].code = (undefined2)local_b8;
              *(undefined2 *)&pDVar1[3].tag = (undefined2)local_a0;
              *(undefined2 *)(pDVar1[3].code + 1) = (undefined2)local_98;
              *(undefined2 *)((int)pDVar1[1].code + 6) = (undefined2)local_b0;
              *(undefined2 *)((int)pDVar1[2].code + 2) = (undefined2)local_a8;
              *(undefined2 *)((int)&pDVar1[3].tag + 2) = (undefined2)local_90;
              *(undefined *)pDVar1[1].code = uVar11;
              *(undefined *)((int)pDVar1[1].code + 1) = uVar9;
              *(undefined2 *)((int)pDVar1[3].code + 6) = (undefined2)local_88;
              *(char *)((int)pDVar1[1].code + 2) = (char)iVar14;
              *(undefined *)&pDVar1[2].tag = uVar11;
              *(undefined *)((int)&pDVar1[2].tag + 1) = uVar9;
              *(char *)((int)&pDVar1[2].tag + 2) = (char)iVar14;
              *(undefined *)(pDVar1[2].code + 1) = uVar7;
              *(undefined *)((int)pDVar1[2].code + 5) = uVar5;
              *(char *)((int)pDVar1[2].code + 6) = (char)iVar15;
              *(undefined *)pDVar1[3].code = uVar7;
              *(undefined *)((int)pDVar1[3].code + 1) = uVar5;
              *(char *)((int)pDVar1[3].code + 2) = (char)iVar15;
              AddToWorldTable(pDVar1 + 1,local_30);
              ptr_graphicsRelated = pDVar1 + 4;
            }
            local_a0 = local_c0;
            local_98 = local_b8;
            local_90 = local_b0;
            local_88 = local_a8;
          }
          iVar3 = iVar3 + 1;
          local_50 = local_50 + 0x1c;
          local_48 = local_48 + 0x271;
          iVar13 = iVar13 + 0x1c;
        } while (iVar3 < (&DAT_800772c8)[local_c8] + -1);
      }
      local_40 = local_40 + 4;
      local_38 = local_38 + 1;
      local_c8 = local_c8 + 1;
    } while (local_c8 < DAT_80075684);
  }
  DAT_80075684 = 0;
  return;
}



void LetterBoxEffect(void)

{
  short sVar1;
  undefined4 *puVar2;
  int local_letterBoxEffect;
  undefined4 *ptr_blackOpaqueShape;
  
  ptr_blackOpaqueShape = ptr_graphicsRelated;
  if (isInDragonState == 0) {
    if (0 < letterBoxEffectAmount) {
      letterBoxEffectAmount = letterBoxEffectAmount - gameSpeedMultiplyer;
    }
    if (letterBoxEffectAmount < 0) {
      letterBoxEffectAmount = 0;
    }
  }
  else {
    if (letterBoxEffectAmount < 0x16) {
      letterBoxEffectAmount = letterBoxEffectAmount + gameSpeedMultiplyer;
    }
    if (0x16 < letterBoxEffectAmount) {
      letterBoxEffectAmount = 0x16;
    }
  }
  *(undefined *)((int)ptr_graphicsRelated + 7) = 0x28;
  local_letterBoxEffect = letterBoxEffectAmount;
  *ptr_blackOpaqueShape = 0x5000000;
  *(undefined2 *)(ptr_blackOpaqueShape + 2) = 0;
  *(undefined2 *)(ptr_blackOpaqueShape + 3) = 0x200;
  *(undefined2 *)(ptr_blackOpaqueShape + 4) = 0;
  *(undefined2 *)(ptr_blackOpaqueShape + 5) = 0x200;
  *(undefined2 *)((int)ptr_blackOpaqueShape + 10) = 0;
  *(undefined2 *)((int)ptr_blackOpaqueShape + 0xe) = 0;
  *(undefined *)(ptr_blackOpaqueShape + 1) = 0;
  *(undefined *)((int)ptr_blackOpaqueShape + 5) = 0;
  *(undefined *)((int)ptr_blackOpaqueShape + 6) = 0;
  *(short *)((int)ptr_blackOpaqueShape + 0x12) = (short)local_letterBoxEffect;
  *(short *)((int)ptr_blackOpaqueShape + 0x16) = (short)local_letterBoxEffect;
  DrawPrimitive(ptr_blackOpaqueShape);
  puVar2 = ptr_blackOpaqueShape + 6;
  ptr_graphicsRelated = puVar2;
  *(undefined *)((int)ptr_blackOpaqueShape + 0x1f) = 0x28;
  local_letterBoxEffect = letterBoxEffectAmount;
  *(undefined2 *)((int)ptr_blackOpaqueShape + 0x2a) = 0xf0;
  *(undefined2 *)((int)ptr_blackOpaqueShape + 0x2e) = 0xf0;
  *puVar2 = 0x5000000;
  *(undefined2 *)(ptr_blackOpaqueShape + 8) = 0;
  *(undefined2 *)(ptr_blackOpaqueShape + 9) = 0x200;
  *(undefined2 *)(ptr_blackOpaqueShape + 10) = 0;
  *(undefined2 *)(ptr_blackOpaqueShape + 0xb) = 0x200;
  *(undefined *)(ptr_blackOpaqueShape + 7) = 0;
  *(undefined *)((int)ptr_blackOpaqueShape + 0x1d) = 0;
  *(undefined *)((int)ptr_blackOpaqueShape + 0x1e) = 0;
  sVar1 = 0xf0 - (short)local_letterBoxEffect;
  *(short *)((int)ptr_blackOpaqueShape + 0x22) = sVar1;
  *(short *)((int)ptr_blackOpaqueShape + 0x26) = sVar1;
  DrawPrimitive(puVar2);
  ptr_graphicsRelated = ptr_blackOpaqueShape + 0xc;
  return;
}



// Used for screen fading

void FillScreenColor(int colorSpace,undefined R,undefined G,undefined B)

{
  DR_MODE *ptr_blackOpaqueShape;
  
  ptr_blackOpaqueShape = ptr_graphicsRelated;
  SetDrawMode(ptr_graphicsRelated,1,0,colorSpace << 5,(RECT *)0x0);
  DrawPrimitive(ptr_blackOpaqueShape);
  ptr_blackOpaqueShape[1].tag = 0x5000000;
  *(undefined *)((int)ptr_blackOpaqueShape[1].code + 3) = 0x2a;
  *(undefined2 *)((int)ptr_blackOpaqueShape[1].code + 6) = 8;
  *(undefined2 *)((int)&ptr_blackOpaqueShape[2].tag + 2) = 8;
  *(undefined2 *)(ptr_blackOpaqueShape[1].code + 1) = 0;
  *(undefined2 *)&ptr_blackOpaqueShape[2].tag = 0x200;
  *(undefined2 *)ptr_blackOpaqueShape[2].code = 0;
  *(undefined2 *)((int)ptr_blackOpaqueShape[2].code + 2) = 0xe8;
  *(undefined2 *)(ptr_blackOpaqueShape[2].code + 1) = 0x200;
  *(undefined2 *)((int)ptr_blackOpaqueShape[2].code + 6) = 0xe8;
  *(undefined *)ptr_blackOpaqueShape[1].code = R;
  *(undefined *)((int)ptr_blackOpaqueShape[1].code + 1) = G;
  *(undefined *)((int)ptr_blackOpaqueShape[1].code + 2) = B;
  DrawPrimitive(ptr_blackOpaqueShape + 1);
  ptr_graphicsRelated = ptr_blackOpaqueShape + 3;
  return;
}



// Draws POLY_FT4 to dest using RGB from color (int[3]) and uv, clut, tpage from param_2
// Can be used for any texture provided the correct uv, clut, tpage is given

void HudLifePelletsRelated(RECT *dest,int *uv,int *color)

{
  undefined4 *puVar1;
  undefined uVar2;
  
  puVar1 = ptr_graphicsRelated;
  *ptr_graphicsRelated = 0x9000000;
  *(undefined *)((int)puVar1 + 7) = 0x2c;
  if (color == (int *)0x0) {
    uVar2 = 0x80;
    *(undefined *)(puVar1 + 1) = 0x80;
    *(undefined *)((int)puVar1 + 5) = 0x80;
  }
  else {
    *(char *)(puVar1 + 1) = (char)*color;
    *(char *)((int)puVar1 + 5) = (char)color[1];
    uVar2 = (undefined)color[2];
  }
  *(undefined *)((int)puVar1 + 6) = uVar2;
  *(short *)(puVar1 + 2) = dest->x;
  *(short *)((int)puVar1 + 10) = dest->y;
  *(short *)(puVar1 + 4) = dest->x + dest->w;
  *(short *)((int)puVar1 + 0x12) = dest->y;
  *(short *)(puVar1 + 6) = dest->x;
  *(short *)((int)puVar1 + 0x1a) = dest->y + dest->h;
  *(short *)(puVar1 + 8) = dest->x + dest->w;
  *(short *)((int)puVar1 + 0x22) = dest->y + dest->h;
  puVar1[3] = *uv;
  puVar1[5] = uv[1];
  *(char *)(puVar1 + 5) = *(char *)(puVar1 + 3) + *(char *)&dest->w;
  *(undefined *)(puVar1 + 7) = *(undefined *)(puVar1 + 3);
  *(undefined *)(puVar1 + 9) = *(undefined *)(puVar1 + 5);
  *(char *)((int)puVar1 + 0x1d) = *(char *)((int)puVar1 + 0xd) + *(char *)&dest->h;
  *(char *)((int)puVar1 + 0x25) = *(char *)((int)puVar1 + 0xd) + *(char *)&dest->h;
  DrawPrimitive(puVar1);
  ptr_graphicsRelated = puVar1 + 10;
  return;
}



void DrawHud(void)

{
  int *piVar1;
  undefined *puVar2;
  int iVar3;
  uint uVar4;
  int *piVar5;
  RECT *pRVar6;
  int buffer;
  int local_44;
  int local_40;
  undefined4 local_38;
  undefined4 local_34;
  undefined4 local_30;
  int local_ptr_mobys;
  
  if (isInFlightLevel == FALSE) {
    piVar5 = &ptr_maybeTextObj;
    if (ptr_maybeTextObj != 0) {
      piVar1 = &DAT_800720f8;
      do {
        piVar5 = piVar1;
        piVar1 = piVar5 + 1;
      } while (*piVar5 != 0);
    }
    if (hudChestState != '\0') {
      uVar4 = (uint)(hudChestState == '\x04') * 4;
      if (uVar4 < 5) {
        puVar2 = &DAT_80077fec + (uint)(hudChestState == '\x04') * 0x160;
        do {
          *piVar5 = (int)puVar2;
          piVar5 = piVar5 + 1;
          uVar4 = uVar4 + 1;
          puVar2 = puVar2 + 0x58;
        } while ((int)uVar4 < 5);
      }
      if (hudChestState == '\x04') {
        sprintf((char *)&buffer,ptr_to__d,amountOfGemsInCurrentLevel,amountOfGemsInCurrentLevel);
        local_ptr_mobys = ptr_hudMobys;
        local_38 = 0x5a;
        local_34 = 0x24;
        local_30 = 0xb40;
        DrawTextCapitals((char *)&buffer,&local_38,0x1c,0xb);
        local_ptr_mobys = local_ptr_mobys + -0x58;
        iVar3 = 0;
        if (ptr_hudMobys <= local_ptr_mobys) {
          do {
            uVar4 = timerHudStayDown * 4 + iVar3;
            iVar3 = iVar3 + 0xc;
            *(char *)(local_ptr_mobys + 0x46) =
                 (char)((ushort)sineWaveArray[(uVar4 & 0xff) + 0x40] >> 7);
            *piVar5 = local_ptr_mobys;
            local_ptr_mobys = local_ptr_mobys + -0x58;
            piVar5 = piVar5 + 1;
          } while (ptr_hudMobys <= local_ptr_mobys);
        }
      }
    }
    puVar2 = &hudDragonCountKeyframe;
    if (hudDragonState != '\0') {
      local_ptr_mobys = 0;
      do {
        *piVar5 = (int)puVar2;
        piVar5 = piVar5 + 1;
        local_ptr_mobys = local_ptr_mobys + 1;
        puVar2 = puVar2 + 0x58;
      } while (local_ptr_mobys < 3);
    }
    if (hudLivesState != '\0') {
      local_ptr_mobys = 0;
      puVar2 = &DAT_800782ac;
      do {
        *piVar5 = (int)puVar2;
        piVar5 = piVar5 + 1;
        local_ptr_mobys = local_ptr_mobys + 1;
        puVar2 = puVar2 + 0x58;
      } while (local_ptr_mobys < 3);
    }
    if ((hudAnimationState != '\0') && (DAT_80077fd8 == 1)) {
      *piVar5 = (int)&DAT_800783b4;
      piVar5 = piVar5 + 1;
    }
    *piVar5 = 0;
  }
  if ((hudLivesState != '\0') && (local_ptr_mobys = 0, 0 < DAT_80077fe0)) {
    pRVar6 = (RECT *)&DAT_8007846c;
    do {
      buffer = ((int)((uint)(ushort)sineWaveArray
                                    [(wobbleAndOpacityTimer - (local_ptr_mobys << 8) / 0x14 & 0xffU)
                                     + 0x40] << 0x10) >> 0x17) + 0x80;
      local_44 = buffer;
      local_40 = buffer;
      HudLifePelletsRelated(pRVar6,&DAT_8007850c,&buffer);
      local_ptr_mobys = local_ptr_mobys + 1;
      pRVar6 = pRVar6 + 1;
    } while (local_ptr_mobys < DAT_80077fe0);
  }
  if ((hudEggsState != '\0') && (local_ptr_mobys = 0, 0 < DAT_80077fd4)) {
    pRVar6 = (RECT *)&DAT_8007840c;
    do {
      HudLifePelletsRelated
                (pRVar6,&DAT_80078514 + ((hudChestHeadSpinTimer + local_ptr_mobys) % 9) * 2,
                 (int *)0x0);
      local_ptr_mobys = local_ptr_mobys + 1;
      pRVar6 = pRVar6 + 1;
    } while (local_ptr_mobys < DAT_80077fd4);
  }
  return;
}



void RenderObjs(void)

{
  RenderSparxBalloonEtc();
  memset((uchar *)&DAT_8006fcf4,'\0',0x900);
  DrawMobys();
  RenderShinyShit();
  RenderShinyAlso();
  DrawShadedMobys();
  FUN_80059f8c();
  if (spyroInvisible == 0) {
    DrawSpyro();
    DrawSpyroShadow();
  }
  if (DAT_80078760 != '\0') {
    DrawFlame();
  }
  DrawSparxGlowAndSomethingElse();
  return;
}



void DrawLevelTransitionText(void)

{
  short sVar1;
  bool bVar2;
  int iVar3;
  short *psVar4;
  int iVar5;
  char *fmt;
  int iVar6;
  undefined *puVar7;
  uchar *puVar8;
  int iVar9;
  int local_50;
  int local_4c;
  undefined4 local_48;
  int local_40;
  undefined4 local_3c;
  undefined4 local_38;
  byte textBuffer [32];
  
  iVar5 = (int)levelID % 10;
                    // Checking the Level ID, and storing the required strings into abStack48 to
                    // place in the DrawText Function, which draws different text on the loading
                    // screen as necesarry.
  iVar3 = ((int)levelID / 10 + -1) * 6 + iVar5;
  if (iVar5 == 0) {
                    // If Level ID is a Homeworld (divisable by 10) store RETURNING HOME... Into
                    // abStack48
    sprintf((char *)textBuffer,"RETURNING HOME...");
  }
  else {
    if ((((int)levelID < 0x3c) && (iVar5 == 4)) || (levelID == GNASTY_GNORC_ID)) {
                    // If Level ID is a Boss (remainer of 4 when diveded by 0xA) 
                    // Then store the string CONFRONTING %s into puVar9, and also store the address
                    // of a pointer the current level string in memory to pcVar7
                    // 
                    // 
      puVar7 = (&PTR_DAT_8006f7f0)[iVar3];
      fmt = "CONFRONTING %s...";
    }
    else {
                    // Else, it must be a regular level, so store ENTERING %s into puVar9, and also
                    // store the address of a pointer to the current level string in memory to
                    // pcVar7
      puVar7 = (&PTR_DAT_8006f7f0)[iVar3];
      fmt = "ENTERING %s...";
    }
                    // Store the needed ENTERING/CONFRONTING string from pcvar7, and the needed
                    // level string from puVar9 into abStack48
    sprintf((char *)textBuffer,fmt,puVar7);
  }
  iVar3 = strlen((char *)textBuffer);
  puVar8 = ptr_hudMobys;
  local_50 = (iVar3 + -1) * -8 + 0x100;
  if (loadingScreenTimer < 0x20) {
    local_4c = (int)((uint)(ushort)sineWaveArray[loadingScreenTimer * 2] << 0x10) >> 0x13;
  }
  else if (loadingScreenTimer < 0x181) {
    local_4c = 0x20;
  }
  else {
    local_4c = (int)((uint)(ushort)sineWaveArray[(0x1a0 - loadingScreenTimer) * 2] << 0x10) >> 0x17;
  }
  local_48 = 0x1100;
  local_40 = 0x10;
  local_3c = 1;
  local_38 = 0x1400;
  DrawTextAll(textBuffer,&local_50,&local_40,0x12,'\x02');
  puVar8 = puVar8 + -0x58;
  if ((int)ptr_hudMobys <= (int)puVar8) {
    iVar3 = 0;
    do {
      puVar8[0x46] = (uchar)((ushort)sineWaveArray[(loadingScreenTimer * 2 + iVar3 & 0xffU) + 0x40]
                            >> 7);
      puVar8 = puVar8 + -0x58;
      iVar3 = iVar3 + 0xc;
    } while ((int)ptr_hudMobys <= (int)puVar8);
  }
  if (0x3f < loadingScreenTimer) {
    iVar5 = 0x28;
    for (iVar3 = globalGemCount; 9 < iVar3; iVar3 = iVar3 / 10) {
      iVar5 = iVar5 + -10;
    }
    local_50 = iVar5 + 0x28;
    local_48 = 0x1100;
    if (loadingScreenTimer < 0x60) {
      local_4c = 0x110 - ((int)((uint)(ushort)sineWaveArray[(loadingScreenTimer + -0x40) * 2] <<
                               0x10) >> 0x16);
    }
    else {
      local_4c = 0xd0;
      if (DAT_80075740 <= loadingScreenTimer) {
        if (loadingScreenTimer < DAT_80075740 + 0x20) {
          local_4c = 0x110 - ((int)((uint)(ushort)sineWaveArray
                                                  [(DAT_80075740 - (loadingScreenTimer + -0x20)) * 2
                                                  ] << 0x10) >> 0x16);
        }
        else {
          local_4c = 0x110;
          if (0xdf < loadingScreenTimer) {
            if (loadingScreenTimer < 0x100) {
              local_4c = 0x110 - ((int)((uint)(ushort)sineWaveArray
                                                      [(loadingScreenTimer + -0xe0) * 2] << 0x10) >>
                                 0x16);
            }
            else {
              local_4c = 0xd0;
              if (0x17f < loadingScreenTimer) {
                if (loadingScreenTimer < 0x1a0) {
                  local_4c = 0x110 - ((int)((uint)(ushort)sineWaveArray
                                                          [(0x1a0 - loadingScreenTimer) * 2] << 0x10
                                           ) >> 0x16);
                }
                else {
                  local_4c = 0x110;
                }
              }
            }
          }
        }
      }
    }
    if (loadingScreenTimer < 0xe0) {
      sprintf((char *)textBuffer,"TREASURE FOUND");
    }
    else {
      sprintf((char *)textBuffer,"TOTAL TREASURE");
      local_50 = local_50 + -0x10;
    }
    puVar8 = ptr_hudMobys;
    DrawTextAll(textBuffer,&local_50,&local_40,0x12,'\x02');
    puVar8 = puVar8 + -0x58;
    iVar3 = 0;
    if ((int)ptr_hudMobys <= (int)puVar8) {
      do {
        puVar8[0x46] = (uchar)((ushort)sineWaveArray
                                       [(loadingScreenTimer * 2 + iVar3 & 0xffU) + 0x40] >> 7);
        puVar8 = puVar8 + -0x58;
        iVar3 = iVar3 + 0xc;
      } while ((int)ptr_hudMobys <= (int)puVar8);
    }
    if (loadingScreenTimer < 0x80) {
      iVar3 = levelGemsCollectedArray[indexToPreviousLevelGems] - amountOfGemsAlreadyFoundInLevel;
    }
    else if (loadingScreenTimer < 0xe0) {
      iVar9 = (amountOfLiteralGemsPickedUp + 1) * 2;
      if (0x40 < iVar9) {
        iVar9 = 0x40;
      }
      iVar6 = iVar9 - (loadingScreenTimer + -0x80);
      bVar2 = iVar9 < iVar6;
      if (iVar6 < 0) {
        iVar6 = 0;
        bVar2 = iVar9 < 0;
      }
      if (bVar2) {
        iVar6 = iVar9;
      }
      iVar6 = (levelGemsCollectedArray[indexToPreviousLevelGems] - amountOfGemsAlreadyFoundInLevel)
              * iVar6;
      iVar3 = iVar6 / iVar9;
      if (iVar9 == 0) {
        trap(0x1c00);
      }
      if ((iVar9 == -1) && (iVar6 == -0x80000000)) {
        trap(0x1800);
      }
    }
    else if (loadingScreenTimer < 0x110) {
      iVar3 = globalGemCount -
              (levelGemsCollectedArray[indexToPreviousLevelGems] - amountOfGemsAlreadyFoundInLevel);
    }
    else {
      iVar3 = (amountOfLiteralGemsPickedUp + 1) * 2;
      if (0x40 < iVar3) {
        iVar3 = 0x40;
      }
      iVar9 = iVar3 - (loadingScreenTimer + -0x110);
      bVar2 = iVar3 < iVar9;
      if (iVar9 < 0) {
        iVar9 = 0;
        bVar2 = iVar3 < 0;
      }
      if (bVar2) {
        iVar9 = iVar3;
      }
                    // This sets iVar4 equal to the amount of gems you have found in your current
                    // visit of the level. (the multiplying by itself gets undone later)
                    // 
      iVar9 = (levelGemsCollectedArray[indexToPreviousLevelGems] - amountOfGemsAlreadyFoundInLevel)
              * iVar9;
      if (iVar3 == 0) {
                    // if amount of gems found is equal to 0, break, because it will later attempt
                    // to divide by 0
        trap(0x1c00);
      }
      if ((iVar3 == -1) && (iVar9 == -0x80000000)) {
        trap(0x1800);
      }
                    // iVar3 will store the amount of gems you have collected that needs to be shown
                    // in the level transition
      iVar3 = globalGemCount - iVar9 / iVar3;
    }
    local_50 = iVar5 + 0x178;
    local_48 = 0xf80;
    sprintf((char *)textBuffer,&DAT_800755bc,iVar3);
    puVar8 = ptr_hudMobys;
    DrawTextCapitals((char *)textBuffer,&local_50,0x14,2);
    puVar8 = puVar8 + -0x58;
    if ((int)ptr_hudMobys <= (int)puVar8) {
      iVar3 = 0;
      do {
        puVar8[0x46] = (uchar)((ushort)sineWaveArray
                                       [(loadingScreenTimer * 2 + iVar3 & 0xffU) + 0x40] >> 7);
        puVar8 = puVar8 + -0x58;
        iVar3 = iVar3 + 0xc;
      } while ((int)ptr_hudMobys <= (int)puVar8);
    }
    iVar3 = 0;
    do {
      iVar9 = iVar3 * 0x10;
      if (*(char *)(iVar9 + DAT_8007571c + 8) != '\0') {
        ptr_hudMobys = ptr_hudMobys + -0x58;
        memset(ptr_hudMobys,'\0',0x58);
        puVar8 = ptr_hudMobys;
        psVar4 = (short *)(iVar9 + DAT_8007571c);
        *(ushort *)(ptr_hudMobys + 0x36) = (ushort)(byte)(&treasureFlagAlgo)[iVar3];
        *(int *)(puVar8 + 0xc) = iVar5 + *psVar4 + 0x140;
        sVar1 = psVar4[1];
        *(undefined4 *)(puVar8 + 0x14) = 0x1000;
        *(int *)(puVar8 + 0x10) = 0xc6 - sVar1;
        puVar8[0x44] = *(uchar *)(psVar4 + 5);
        ptr_hudMobys[0x45] = *(uchar *)(iVar9 + DAT_8007571c + 0xb);
        ptr_hudMobys[0x46] = *(uchar *)(iVar9 + DAT_8007571c + 0xc);
        ptr_hudMobys[0x47] = '\x7f';
        ptr_hudMobys[0x4f] = ptr_hudMobys[0x36] + 0xae;
        ptr_hudMobys[0x50] = 0xff;
      }
      iVar3 = iVar3 + 1;
    } while (iVar3 < 0x20);
    ptr_hudMobys = ptr_hudMobys + -0x58;
    memset(ptr_hudMobys,'\0',0x58);
    puVar8 = ptr_hudMobys;
    *(undefined2 *)(ptr_hudMobys + 0x36) = 0x1d9;
    bVar2 = loadingScreenTimer < 0xe0;
    *(int *)(puVar8 + 0xc) = iVar5 + 0x140;
    if (bVar2) {
      *(undefined4 *)(puVar8 + 0x14) = 0x800;
      puVar8[0x44] = '\x06';
      iVar3 = local_4c + 8;
    }
    else {
      *(undefined4 *)(puVar8 + 0x14) = 0x600;
      puVar8[0x44] = '\x06';
      iVar3 = local_4c + 0xc;
    }
    *(int *)(puVar8 + 0x10) = iVar3;
    ptr_hudMobys[0x46] = 0xb0;
    ptr_hudMobys[0x47] = '\x7f';
    ptr_hudMobys[0x4f] = '\v';
    ptr_hudMobys[0x50] = 0xff;
  }
  ptr_maybeTextObj = 0;
  CopyHudToShaded();
  DrawShadedMobys();
  return;
}



void LevelTransition(void)

{
  int iVar1;
  u_long *p;
  Mat33 *pMVar2;
  Mat33 *m1;
  MATRIX local_50;
  MATRIX local_30;
  
                    // WARNING: Read-only address (ram,0x80076ef9) is written
  DRAW_ENV1.r0 = clearColor.R;
                    // WARNING: Read-only address (ram,0x80076efa) is written
  DRAW_ENV1.g0 = clearColor.G;
                    // WARNING: Read-only address (ram,0x80076efb) is written
  DRAW_ENV1.b0 = clearColor.B;
                    // WARNING: Read-only address (ram,0x80076f7d) is written
  DRAW_ENV2.r0 = clearColor.R;
                    // WARNING: Read-only address (ram,0x80076f7e) is written
  DRAW_ENV2.g0 = clearColor.G;
                    // WARNING: Read-only address (ram,0x80076f7f) is written
  DRAW_ENV2.b0 = clearColor.B;
  memset((uchar *)&DAT_8006fcf4,'\0',0x900);
  if (isLoading != 0) {
    DrawLevelTransitionText();
  }
  DrawSpyro();
  if (DAT_80078a40 != 0) {
    levelTransitionCameraAnimTimerRelated = levelTransitionCameraAnimTimerRelated + -2;
    if (levelTransitionCameraAnimTimerRelated < 0) {
      levelTransitionCameraAnimTimerRelated = 0;
    }
    if (levelTransitionCameraAnimTimerRelated == 0) {
      pMVar2 = &gCamera6;
      m1 = &gCamera1;
    }
    else {
      memset((uchar *)&local_50,'\0',0x20);
      SetTransMatrix(&local_50);
      local_50.m[0][0] = 0x1000;
      local_50.m[1][1] = CosScaled(cameraAngle.pitch - levelTransitionCameraAnimTimerRelated);
      local_50.m[2][1] = SinScaled(cameraAngle.pitch - levelTransitionCameraAnimTimerRelated);
      local_50.m[1][2] = SinScaled(cameraAngle.pitch - levelTransitionCameraAnimTimerRelated);
      local_50.m[1][2] = -local_50.m[1][2];
      local_50.m[2][2] = CosScaled(cameraAngle.pitch - levelTransitionCameraAnimTimerRelated);
      m1 = (Mat33 *)&local_30;
      memset((uchar *)m1,'\0',0x20);
      local_30.m[0][0] = CosScaled((int)cameraAngle.yaw);
      local_30.m[2][0] = SinScaled((int)cameraAngle.yaw);
      local_30.m[2][0] = -local_30.m[2][0];
      local_30.m[1][1] = 0x1000;
      local_30.m[0][2] = SinScaled((int)cameraAngle.yaw);
      local_30.m[2][2] = CosScaled((int)cameraAngle.yaw);
      MulMatrix(&local_50,(MATRIX *)m1);
      memset((uchar *)m1,'\0',0x20);
      local_30.m[0][0] = CosScaled((int)cameraAngle.roll);
      local_30.m[1][0] = SinScaled((int)cameraAngle.roll);
      local_30.m[1][0] = -local_30.m[1][0];
      local_30.m[0][1] = SinScaled((int)cameraAngle.roll);
      local_30.m[1][1] = CosScaled((int)cameraAngle.roll);
      local_30.m[2][2] = 0x1000;
      MulMatrix(&local_50,(MATRIX *)m1);
      ArrayCopy((int *)m1,&local_50,0x14);
      iVar1 = local_50.m[1][0] * 0x140;
      if (iVar1 < 0) {
        iVar1 = iVar1 + 0x1ff;
      }
      local_30.m[1][0] = (short)(iVar1 >> 9);
      iVar1 = local_50.m[1][1] * 0x140;
      if (iVar1 < 0) {
        iVar1 = iVar1 + 0x1ff;
      }
      local_30.m[1][1] = (short)(iVar1 >> 9);
      iVar1 = local_50.m[1][2] * 0x140;
      if (iVar1 < 0) {
        iVar1 = iVar1 + 0x1ff;
      }
      local_30.m[1][2] = (short)(iVar1 >> 9);
      pMVar2 = (Mat33 *)&local_50;
    }
    DrawSkybox(0xffffffff,pMVar2,m1);
  }
  DrawSync(0);
  if (DAT_80075784 != 0) {
    Vsync(0);
  }
  DAT_80075954 = Vsync(0xffffffff);
  iVar1 = DAT_80075954 - DAT_80075950;
  while (iVar1 < 2) {
    Vsync(0);
    DAT_80075954 = Vsync(0xffffffff);
    iVar1 = DAT_80075954 - DAT_80075950;
  }
  DAT_80075950 = Vsync(0xffffffff);
  PutDispEnv(ptr_DisplayInfo + 1);
  PutDrawEnv(ptr_DisplayInfo);
  p = (u_long *)VramRelated(0x800);
  DrawOTag(p);
  return;
}



// WARNING: Unable to use type for symbol ptr_currentMoby
// WARNING: Unable to use type for symbol local_ptr_to_mobys

void PauseAndInventoryMenuDrawing(void)

{
  PauseMenuState PVar1;
  short sVar2;
  u_long *puVar3;
  uint uVar4;
  DRAWENV *env;
  DR_MODE *pDVar5;
  uint uVar6;
  int *piVar7;
  int iVar8;
  CapitalTextInfo *pCVar9;
  int iVar10;
  short sVar11;
  uchar *unaff_s2;
  uchar *puVar12;
  int iVar13;
  int iVar14;
  uint unaff_s5;
  short local_138 [4];
  char textBuffer [2];
  CapitalTextInfo capitalInfo;
  LowercaseTextInfo lowercaseInfo2;
  int local_f0;
  undefined4 local_ec;
  undefined4 local_e8;
  LowercaseTextInfo lowercaseInfo;
  RECT local_d0;
  RECT local_c8;
  int local_c0;
  undefined4 local_bc;
  undefined4 local_b8;
  byte local_b0;
  uchar *ptr_currentMoby;
  uchar *local_ptr_to_mobys;
  
  if (pausedTimer == 0) {
    iVar13 = 0;
    Maybe_DrawingMobyParticlesRelated();
    RenderObjs();
    RenderAllParticles();
    RenderAllSkyBoxes();
    RenderWorld();
    DrawSync(0);
    Vsync(0);
    PutDispEnv(ptr_DisplayInfo + 1);
    PutDrawEnv(ptr_DisplayInfo);
    puVar3 = (u_long *)VramRelated(0x800);
    DrawOTag(puVar3);
    DrawSync(0);
    Vsync(0);
    PutDispEnv(ptr_DisplayInfo + 1);
    local_138[0] = 0x200;
    local_138[1] = 0;
    local_138[2] = 0x100;
    local_138[3] = 0xe1;
    StoreImage((RECT *)local_138,(u_long *)(maybe_ptr_levelTextureRelated + -0x1c200));
    sVar2 = 0x200;
    do {
      local_138[1] = 8;
      local_138[0] = (short)(iVar13 << 7);
      if (ptr_DisplayInfo != &DRAW_ENV1) {
        local_138[1] = 0xf8;
      }
      iVar13 = iVar13 + 1;
      local_138[2] = 0x80;
      local_138[3] = 0xe0;
      StoreImage((RECT *)local_138,DAT_800785e8);
      DrawSync(0);
      ImageRelated(DAT_800785e8,0x7000);
      local_138[1] = 0;
      local_138[2] = 0x40;
      local_138[3] = 0xe0;
      local_138[0] = sVar2;
      LoadImage((RECT *)local_138,DAT_800785e8);
      sVar2 = sVar2 + 0x40;
    } while (iVar13 < 4);
    local_138[0] = 0x200;
    local_138[1] = 0xe0;
    local_138[2] = 0x20;
    local_138[3] = 1;
    LoadImage((RECT *)local_138,(u_long *)&PuaseScreenBackgroundCLUT);
    DrawSync(0);
    DAT_80075950 = Vsync(0xffffffff);
  }
  else {
    env = &DRAW_ENV1;
    if (ptr_DisplayInfo == &DRAW_ENV1) {
      env = &DRAW_ENV2;
    }
    iVar14 = 0;
    PutDrawEnv(env);
    DAT_800758b0 = 0;
    ptr_graphicsRelated = (DR_MODE *)DAT_800785e8;
    DAT_80075780 = DAT_800785e8 + 0x7000;
    DAT_800756fc = (uchar *)(maybe_ptr_levelTextureRelated + -0x1c200);
    iVar13 = 0;
    ptr_hudMobys = DAT_800756fc;
    do {
      puVar3 = &ptr_graphicsRelated->tag;
      sVar2 = (short)iVar14;
                    // Green Tint for Menu
      ptr_graphicsRelated->tag = 0x9000000;
      *(undefined *)((int)puVar3 + 7) = 0x2c;
      *(undefined *)(puVar3 + 1) = 0x4c;
      *(undefined *)((int)puVar3 + 5) = 0x80;
      *(short *)(puVar3 + 2) = (short)iVar13;
      *(undefined2 *)((int)puVar3 + 10) = 8;
      *(short *)(puVar3 + 4) = *(short *)(puVar3 + 2) + 0x80;
      *(short *)((int)puVar3 + 0x1a) = *(short *)((int)puVar3 + 10) + 0xdf;
      iVar14 = iVar14 + 1;
      *(undefined *)((int)puVar3 + 0xd) = 0;
      *(undefined2 *)((int)puVar3 + 0x12) = *(undefined2 *)((int)puVar3 + 10);
      *(undefined *)(puVar3 + 3) = 0;
      *(undefined2 *)(puVar3 + 6) = *(undefined2 *)(puVar3 + 2);
      *(short *)(puVar3 + 8) = *(short *)(puVar3 + 2) + 0x80;
      *(short *)((int)puVar3 + 0x22) = *(short *)((int)puVar3 + 10) + 0xdf;
      *(undefined *)((int)puVar3 + 6) = 0x40;
      *(undefined *)((int)puVar3 + 0x15) = *(undefined *)((int)puVar3 + 0xd);
      *(undefined *)(puVar3 + 7) = *(undefined *)(puVar3 + 3);
      *(char *)(puVar3 + 5) = *(char *)(puVar3 + 3) + -0x80;
      *(char *)((int)puVar3 + 0x1d) = *(char *)((int)puVar3 + 0xd) + -0x21;
      *(char *)(puVar3 + 9) = *(char *)(puVar3 + 3) + -0x80;
      *(char *)((int)puVar3 + 0x25) = *(char *)((int)puVar3 + 0xd) + -0x21;
      *(undefined2 *)((int)puVar3 + 0xe) = 0x3820;
      *(short *)((int)puVar3 + 0x16) = sVar2 + 0x88;
      DrawPrimitive(puVar3);
      ptr_graphicsRelated = (DR_MODE *)(puVar3 + 10);
      iVar13 = iVar14 * 0x80;
    } while (iVar14 < 4);
    puVar3[10] = 0x3000000;
    *(undefined *)((int)puVar3 + 0x2f) = 0x40;
    *(undefined2 *)(puVar3 + 0xc) = 0;
    *(undefined2 *)((int)puVar3 + 0x32) = 0xe7;
    *(undefined2 *)(puVar3 + 0xd) = 0x200;
    *(undefined2 *)((int)puVar3 + 0x36) = 0xe7;
    *(undefined *)(puVar3 + 0xb) = 0;
    *(undefined *)((int)puVar3 + 0x2d) = 0;
    *(undefined *)((int)puVar3 + 0x2e) = 0;
    DrawPrimitive();
    pDVar5 = (DR_MODE *)(puVar3 + 0xe);
    ptr_graphicsRelated = pDVar5;
    if (gameState == GAMESTATE_PAUSED) {
      SetDrawMode(pDVar5,1,0,0x40,(RECT *)0x0);
      DrawPrimitive(pDVar5);
      puVar3[0x11] = 0x5000000;
      *(undefined *)((int)puVar3 + 0x4b) = 0x2a;
      *(undefined *)(puVar3 + 0x12) = 0x40;
      *(undefined *)((int)puVar3 + 0x49) = 0x40;
      *(undefined *)((int)puVar3 + 0x4a) = 0x40;
      PVar1 = pauseMenuState;
      *(undefined2 *)((int)puVar3 + 0x4e) = 0x43;
      *(undefined2 *)((int)puVar3 + 0x52) = 0x43;
      if (PVar1 == PAUSED_OPTIONS) {
        *(undefined2 *)(puVar3 + 0x13) = 0x54;
        iVar13 = DAT_800756d8;
        *(undefined2 *)(puVar3 + 0x14) = 0x1ac;
        local_b0 = iVar13 != 0;
        sVar2 = (ushort)local_b0 * 0x10 + 0xb6;
      }
      else {
        local_b0 = true;
        *(undefined2 *)(puVar3 + 0x13) = 0x8c;
        *(undefined2 *)(puVar3 + 0x14) = 0x174;
        sVar2 = 0xb0;
      }
      *(short *)((int)puVar3 + 0x56) = sVar2;
      *(short *)((int)puVar3 + 0x5a) = sVar2;
      *(undefined2 *)(puVar3 + 0x15) = *(undefined2 *)(puVar3 + 0x13);
      *(undefined2 *)(puVar3 + 0x16) = *(undefined2 *)(puVar3 + 0x14);
      DrawPrimitive(puVar3 + 0x11);
      ptr_graphicsRelated = (DR_MODE *)(puVar3 + 0x17);
      DrawLine(0xe0,0x61,0x120,0x61);
      if (pauseMenuState == PAUSED_OPTIONS) {
        DrawLine(0x54,0x43,0x1ac,0x43);
        iVar14 = (uint)local_b0 * 0x10 + 0xb6;
        DrawLine(0x1ac,0x43,0x1ac,iVar14);
        DrawLine(0x1ac,iVar14,0x54,iVar14);
        iVar13 = 0x54;
        iVar8 = 0x54;
      }
      else {
        DrawLine(0x8c,0x43,0x174,0x43);
        iVar14 = (uint)local_b0 * 0x12 + 0x9e;
        DrawLine(0x174,0x43,0x174,iVar14);
        DrawLine(0x174,iVar14,0x8c,iVar14);
        iVar13 = 0x8c;
        iVar8 = 0x8c;
      }
      DrawLine(iVar13,iVar14,iVar8,0x43);
      capitalInfo.xPos = 0xba;
      capitalInfo.yPos = 0x52;
      capitalInfo.size = 0xc00;
      DrawTextCapitals(s_PAUSED_800755c0,&capitalInfo,0x1c,0xb);
      if (pauseMenuState == PAUSED_QUIT_GAME) {
        lowercaseInfo2.spacing = 0x10;
        lowercaseInfo2.size = 0x1400;
        capitalInfo.xPos = 0xb7;
        lowercaseInfo2.yOffset = 1;
        capitalInfo.yPos = 0x77;
        capitalInfo.size = 0x1100;
        DrawTextAll((byte *)"QUIT GAME?",&capitalInfo.xPos,&lowercaseInfo2.spacing,0x12,11);
        capitalInfo.xPos = 0xc0;
        capitalInfo.yPos = 0x94;
        capitalInfo.size = 0x1100;
        DrawTextAll(&DAT_800755c8,&capitalInfo.xPos,&lowercaseInfo2.spacing,0x12,11);
        if (pauseMenuSelection == 0) {
          unaff_s5 = 3;
          unaff_s2 = ptr_hudMobys;
        }
        capitalInfo.xPos = 0x128;
        capitalInfo.yPos = 0x94;
        capitalInfo.size = 0x1100;
        DrawTextAll(&DAT_800755cc,&capitalInfo.xPos,&lowercaseInfo2.spacing,0x12,11);
        uVar6 = unaff_s5 & 0xff;
        if (pauseMenuSelection == 1) {
          uVar6 = 2;
          unaff_s2 = ptr_hudMobys;
        }
        iVar13 = 0;
        if (uVar6 != 0) {
          iVar14 = 0;
          do {
            iVar13 = iVar13 + 1;
            uVar4 = pausedTimer * 8 + iVar14;
            iVar14 = iVar14 + 0xc;
            unaff_s2[0x46] = (uchar)(sineWaveArray[(uVar4 & 0xff) + 0x40] * 3 >> 9);
            unaff_s2 = unaff_s2 + 0x58;
          } while (iVar13 < (int)uVar6);
        }
      }
      else if (pauseMenuState == PAUSED_OPTIONS) {
        local_f0 = 0xf;
        local_e8 = 0x1600;
        local_ec = 1;
        capitalInfo.xPos = 0x6b;
        capitalInfo.yPos = 0x6c;
        capitalInfo.size = 0x1400;
        DrawTextAll((byte *)"SOUND EFFECTS",&capitalInfo.xPos,&local_f0,0x10,'\v');
        if (pauseMenuSelection == 0) {
          unaff_s5 = 0xb;
          unaff_s2 = ptr_hudMobys;
        }
        capitalInfo.xPos = 0x79;
        capitalInfo.yPos = 0x7c;
        capitalInfo.size = 0x1400;
        DrawTextAll((byte *)"MUSIC VOLUME",&capitalInfo.xPos,&local_f0,0x10,'\v');
        if (pauseMenuSelection == 1) {
          unaff_s5 = 0xb;
          unaff_s2 = ptr_hudMobys;
        }
        capitalInfo.xPos = 0x6b;
        capitalInfo.yPos = 0x8c;
        capitalInfo.size = 0x1400;
        DrawTextAll((byte *)"SPEAKER SETUP",&capitalInfo.xPos,&local_f0,0x10,'\v');
        if (pauseMenuSelection == 2) {
          unaff_s5 = 0xc;
          unaff_s2 = ptr_hudMobys;
        }
        if (DAT_800756d8 != 0) {
          capitalInfo.xPos = 0xa3;
          capitalInfo.yPos = 0x9c;
          capitalInfo.size = 0x1400;
          DrawTextAll((byte *)"VIBRATION",&capitalInfo.xPos,&local_f0,0x10,'\v');
          if (pauseMenuSelection == 3) {
            unaff_s5 = 9;
            unaff_s2 = ptr_hudMobys;
          }
        }
        uVar6 = (uint)local_b0;
        capitalInfo.xPos = 0xd0;
        capitalInfo.size = 0x1100;
        capitalInfo.yPos = uVar6 * 0x10 + 0x9c;
        DrawTextAll((byte *)s_CAMERA_800755d0,&capitalInfo.xPos,&local_f0,0x10,'\v');
        if (pauseMenuSelection == 4) {
          unaff_s5 = 6;
          unaff_s2 = ptr_hudMobys;
        }
        capitalInfo.xPos = 0xee;
        capitalInfo.yPos = uVar6 * 0x10 + 0xac;
        capitalInfo.size = 0x1100;
        DrawTextAll(&DAT_800755d8,&capitalInfo.xPos,&local_f0,0x10,'\v');
        uVar6 = unaff_s5 & 0xff;
        if (pauseMenuSelection == 5) {
          uVar6 = 4;
          unaff_s2 = ptr_hudMobys;
        }
        iVar13 = 0;
        if (uVar6 != 0) {
          iVar14 = 0;
          do {
            iVar13 = iVar13 + 1;
            uVar4 = pausedTimer * 8 + iVar14;
            iVar14 = iVar14 + 0xc;
            unaff_s2[0x46] = (uchar)(sineWaveArray[(uVar4 & 0xff) + 0x40] * 3 >> 9);
            unaff_s2 = unaff_s2 + 0x58;
          } while (iVar13 < (int)uVar6);
        }
        if (sfxVolume == 0) {
          capitalInfo.xPos = 0x142;
          capitalInfo.yPos = 0x6c;
          capitalInfo.size = 0x1400;
          DrawTextAll(&DAT_800755e0,&capitalInfo.xPos,&local_f0,0x10,'\v');
          iVar13 = 0;
          if (pauseMenuSelection == 0) {
            iVar14 = 0;
            puVar12 = ptr_hudMobys;
            do {
              iVar14 = iVar14 + 1;
              uVar6 = pausedTimer * 8 + iVar13;
              iVar13 = iVar13 + 0xc;
              puVar12[0x46] = (uchar)(sineWaveArray[(uVar6 & 0xff) + 0x40] * 3 >> 9);
              puVar12 = puVar12 + 0x58;
            } while (iVar14 < 3);
          }
        }
        else {
          iVar13 = 0;
          if (0 < sfxVolume) {
            iVar8 = 0;
            iVar14 = 0x140;
            do {
              ptr_hudMobys = ptr_hudMobys + -0x58;
              memset(ptr_hudMobys,'\0',0x58);
              iVar10 = pauseMenuSelection;
              puVar12 = ptr_hudMobys;
              *(undefined2 *)(ptr_hudMobys + 0x36) = 0x1b2;
              *(undefined4 *)(puVar12 + 0x10) = 0x6d;
              *(int *)(puVar12 + 0xc) = iVar14;
              *(undefined4 *)(puVar12 + 0x14) = 0x1400;
              if (iVar10 == 0) {
                puVar12[0x46] =
                     (uchar)(sineWaveArray[(pausedTimer * 8 + iVar8 & 0xff) + 0x40] * 3 >> 9);
              }
              else {
                puVar12[0x46] = '\0';
              }
              iVar8 = iVar8 + 0xc;
              ptr_hudMobys[0x47] = '\x7f';
              ptr_hudMobys[0x4f] = '\v';
              ptr_hudMobys[0x50] = 0xff;
              iVar13 = iVar13 + 1;
              iVar14 = iVar14 + 10;
            } while (iVar13 < sfxVolume);
          }
        }
        if (musicVolume == 0) {
          capitalInfo.xPos = 0x142;
          capitalInfo.yPos = 0x7c;
          capitalInfo.size = 0x1400;
          DrawTextAll(&DAT_800755e0,&capitalInfo.xPos,&local_f0,0x10,'\v');
          iVar13 = 0;
          if (pauseMenuSelection == 1) {
            iVar14 = 0;
            puVar12 = ptr_hudMobys;
            do {
              iVar14 = iVar14 + 1;
              uVar6 = pausedTimer * 8 + iVar13;
              iVar13 = iVar13 + 0xc;
              puVar12[0x46] = (uchar)(sineWaveArray[(uVar6 & 0xff) + 0x40] * 3 >> 9);
              puVar12 = puVar12 + 0x58;
            } while (iVar14 < 3);
          }
        }
        else {
          iVar13 = 0;
          if (0 < musicVolume) {
            iVar8 = 0;
            iVar14 = 0x140;
            do {
              ptr_hudMobys = ptr_hudMobys + -0x58;
              memset(ptr_hudMobys,'\0',0x58);
              iVar10 = pauseMenuSelection;
              puVar12 = ptr_hudMobys;
              *(undefined2 *)(ptr_hudMobys + 0x36) = 0x1b2;
              *(undefined4 *)(puVar12 + 0x10) = 0x7d;
              *(undefined4 *)(puVar12 + 0x14) = 0x1400;
              *(int *)(puVar12 + 0xc) = iVar14;
              if (iVar10 == 1) {
                puVar12[0x46] =
                     (uchar)(sineWaveArray[(pausedTimer * 8 + iVar8 & 0xff) + 0x40] * 3 >> 9);
              }
              else {
                puVar12[0x46] = '\0';
              }
              iVar8 = iVar8 + 0xc;
              ptr_hudMobys[0x47] = '\x7f';
              ptr_hudMobys[0x4f] = '\v';
              ptr_hudMobys[0x50] = 0xff;
              iVar13 = iVar13 + 1;
              iVar14 = iVar14 + 10;
            } while (iVar13 < musicVolume);
          }
        }
        capitalInfo.xPos = 0x142;
        capitalInfo.yPos = 0x8c;
        capitalInfo.size = 0x1400;
        if (speakerSetupOption == 0) {
          DrawTextAll((byte *)s_STEREO_800755ec,&capitalInfo.xPos,&local_f0,0x10,'\v');
          iVar13 = 6;
        }
        else {
          DrawTextAll(&DAT_800755e4,&capitalInfo.xPos,&local_f0,0x10,'\v');
          iVar13 = 4;
        }
        if ((pauseMenuSelection == 2) && (iVar14 = 0, iVar13 != 0)) {
          iVar8 = 0;
          puVar12 = ptr_hudMobys;
          do {
            iVar14 = iVar14 + 1;
            uVar6 = pausedTimer * 8 + iVar8;
            iVar8 = iVar8 + 0xc;
            puVar12[0x46] = (uchar)(sineWaveArray[(uVar6 & 0xff) + 0x40] * 3 >> 9);
            puVar12 = puVar12 + 0x58;
          } while (iVar14 < iVar13);
        }
        if (DAT_800756d8 != 0) {
          capitalInfo.xPos = 0x142;
          capitalInfo.yPos = 0x9c;
          capitalInfo.size = 0x1400;
          if (isVibrationOn == 0) {
            DrawTextAll(&DAT_800755e0,&capitalInfo.xPos,&local_f0,0x10,'\v');
            iVar13 = 3;
          }
          else {
            DrawTextAll(&DAT_800755f4,&capitalInfo.xPos,&local_f0,0x10,'\v');
            iVar13 = 2;
          }
          if ((pauseMenuSelection == 3) && (iVar14 = 0, iVar13 != 0)) {
            iVar8 = 0;
            puVar12 = ptr_hudMobys;
            do {
              iVar14 = iVar14 + 1;
              uVar6 = pausedTimer * 8 + iVar8;
              iVar8 = iVar8 + 0xc;
              puVar12[0x46] = (uchar)(sineWaveArray[(uVar6 & 0xff) + 0x40] * 3 >> 9);
              puVar12 = puVar12 + 0x58;
            } while (iVar14 < iVar13);
          }
        }
        capitalInfo.xPos = 0x142;
        capitalInfo.yPos = (uint)local_b0 * 0x10 + 0x9c;
        capitalInfo.size = 0x1400;
        if (cameraMode == CAMERA_MODE_ACTIVE) {
          DrawTextAll((byte *)s_ACTIVE_800755f8,&capitalInfo.xPos,&local_f0,0x10,'\v');
          iVar13 = 6;
        }
        else {
          DrawTextAll((byte *)s_PASSIVE_80075600,&capitalInfo.xPos,&local_f0,0x10,'\v');
          iVar13 = 7;
        }
        if ((pauseMenuSelection == 4) && (iVar14 = 0, iVar13 != 0)) {
          iVar8 = 0;
          puVar12 = ptr_hudMobys;
          do {
            iVar14 = iVar14 + 1;
            uVar6 = pausedTimer * 8 + iVar8;
            iVar8 = iVar8 + 0xc;
            puVar12[0x46] = (uchar)(sineWaveArray[(uVar6 & 0xff) + 0x40] * 3 >> 9);
            puVar12 = puVar12 + 0x58;
          } while (iVar14 < iVar13);
        }
      }
      else {
        lowercaseInfo.spacing = 0x10;
        lowercaseInfo.size = 0x1400;
        capitalInfo.xPos = 199;
        lowercaseInfo.yOffset = 1;
        capitalInfo.yPos = 0x6e;
        capitalInfo.size = 0x1100;
        DrawTextAll((byte *)"CONTINUE",&capitalInfo.xPos,&lowercaseInfo.spacing,0x12,'\v');
        if (pauseMenuSelection == 0) {
          unaff_s5 = 8;
          unaff_s2 = ptr_hudMobys;
        }
        capitalInfo.xPos = 0xcf;
        capitalInfo.yPos = 0x80;
        capitalInfo.size = 0x1100;
        DrawTextAll((byte *)s_OPTIONS_80075608,&capitalInfo.xPos,&lowercaseInfo.spacing,0x12,'\v');
        if (pauseMenuSelection == 1) {
          unaff_s5 = 7;
          unaff_s2 = ptr_hudMobys;
        }
        capitalInfo.xPos = 0xbf;
        capitalInfo.yPos = 0x92;
        capitalInfo.size = 0x1100;
        DrawTextAll((byte *)"INVENTORY",&capitalInfo.xPos,&lowercaseInfo.spacing,0x12,'\v');
        if (pauseMenuSelection == 2) {
          unaff_s5 = 9;
          unaff_s2 = ptr_hudMobys;
        }
        if (isInFlightLevel == 0) {
          if (levelIDPortalExit == (levelIDPortalExit / 10) * 10) {
            capitalInfo.xPos = 0xbf;
            capitalInfo.yPos = 0xa4;
            capitalInfo.size = 0x1100;
            DrawTextAll((byte *)"QUIT GAME",&capitalInfo.xPos,&lowercaseInfo.spacing,0x12,'\v');
            uVar6 = unaff_s5 & 0xff;
            if (pauseMenuSelection == 3) {
              uVar6 = 8;
              unaff_s2 = ptr_hudMobys;
            }
          }
          else {
            capitalInfo.xPos = 0xb7;
            capitalInfo.yPos = 0xa4;
            capitalInfo.size = 0x1100;
            DrawTextAll((byte *)"EXIT LEVEL",&capitalInfo.xPos,&lowercaseInfo.spacing,0x12,'\v');
            uVar6 = unaff_s5 & 0xff;
            if (pauseMenuSelection == 3) {
              uVar6 = 9;
              unaff_s2 = ptr_hudMobys;
            }
          }
        }
        else {
          capitalInfo.xPos = 0xe7;
          capitalInfo.yPos = 0xa4;
          capitalInfo.size = 0x1100;
          DrawTextAll(&DAT_80075610,&capitalInfo.xPos,&lowercaseInfo.spacing,0x12,'\v');
          uVar6 = unaff_s5 & 0xff;
          if (pauseMenuSelection == 3) {
            uVar6 = 4;
            unaff_s2 = ptr_hudMobys;
          }
        }
        iVar13 = 0;
        if (uVar6 != 0) {
          iVar14 = 0;
          do {
            iVar13 = iVar13 + 1;
            uVar4 = pausedTimer * 8 + iVar14;
            iVar14 = iVar14 + 0xc;
            unaff_s2[0x46] = (uchar)(sineWaveArray[(uVar4 & 0xff) + 0x40] * 3 >> 9);
            unaff_s2 = unaff_s2 + 0x58;
          } while (iVar13 < (int)uVar6);
        }
      }
    }
    else if (gameState == GAMESTATE_INVENTORY) {
      iVar13 = CalculateCompletionPercentage();
      capitalInfo.xPos = 0x1b8;
      capitalInfo.yPos = 0x2c;
      capitalInfo.size = 0x900;
      if (9 < iVar13) {
        capitalInfo.xPos = 0x196;
      }
      if (99 < iVar13) {
        capitalInfo.xPos = capitalInfo.xPos + -0x22;
      }
      sprintf(textBuffer,&DAT_800755bc);
      DrawTextCapitals(textBuffer,&capitalInfo,0x22,2);
      capitalInfo.xPos = 0x1de;
      textBuffer[0] = '%';
      textBuffer[1] = '\0';
      DrawTextCapitals(textBuffer,&capitalInfo,0x22,2);
      capitalInfo.xPos = 0x5a;
      capitalInfo.yPos = 0x24;
      capitalInfo.size = 0xb40;
      sprintf(textBuffer,&DAT_800755bc,globalGemCount);
      DrawTextCapitals(textBuffer,&capitalInfo,0x1b,2);
      capitalInfo.xPos = 0x14d;
      capitalInfo.yPos = 0x24;
      capitalInfo.size = 0xb40;
      if (9 < globalDragonCount) {
        capitalInfo.xPos = 0x132;
      }
      sprintf(textBuffer,&DAT_800755bc);
      DrawTextCapitals(textBuffer,&capitalInfo,0x1b,2);
      ptr_hudMobys = ptr_hudMobys + -0x58;
      memset(ptr_hudMobys,'\0',0x58);
      local_ptr_to_mobys = ptr_hudMobys;
      *(undefined2 *)(ptr_hudMobys + 0x36) = 0x1d7;
      *(undefined4 *)(local_ptr_to_mobys + 0xc) = 0x2e;
      *(undefined4 *)(local_ptr_to_mobys + 0x10) = 0x2e;
      *(undefined4 *)(local_ptr_to_mobys + 0x14) = 0xc00;
      local_ptr_to_mobys[0x45] = (uchar)(sineWaveArray[hudChestHeadSpinTimer + 0x40] >> 9);
      ptr_hudMobys[0x46] = (uchar)hudChestHeadSpinTimer;
      ptr_hudMobys[0x47] = '\x7f';
      ptr_hudMobys[0x4f] = '\v';
      ptr_hudMobys[0x50] = 0xff;
      ptr_hudMobys = ptr_hudMobys + -0x58;
      memset(ptr_hudMobys,'\0',0x58);
      puVar12 = ptr_hudMobys;
      *(undefined2 *)(ptr_hudMobys + 0x36) = 0x1fa;
      *(undefined4 *)(puVar12 + 0xc) = 300;
      if (9 < globalDragonCount) {
        *(undefined4 *)(puVar12 + 0xc) = 0x111;
      }
      puVar12 = ptr_hudMobys;
      uVar6 = pausedTimer & 0x1f;
      *(undefined4 *)(ptr_hudMobys + 0x10) = 0x2e;
      *(undefined4 *)(puVar12 + 0x14) = 0x780;
      puVar12[0x46] = (uchar)((ushort)sineWaveArray[uVar6 * 8 + 0x40] >> 8);
      ptr_hudMobys[0x47] = '\x7f';
      ptr_hudMobys[0x4f] = '\v';
      ptr_hudMobys[0x50] = 0xff;
      iVar13 = 0x24;
      if (0 < globalEggCount) {
        iVar14 = 0;
        sVar2 = 0x18;
        do {
          local_d0.y = 0x32;
          local_d0.w = 0x18;
          local_d0.h = 0x10;
          local_d0.x = sVar2;
          if (iVar14 < globalEggCount) {
            pCVar9 = (CapitalTextInfo *)0x0;
            piVar7 = &DAT_80078514 + ((hudChestHeadSpinTimer + iVar14) % 9) * 2;
          }
          else {
            capitalInfo.yPos = 0x3a;
            capitalInfo.size = 0x1800;
            capitalInfo.xPos = iVar13;
            DrawTextCapitals(&DAT_80075618,&capitalInfo,0,2);
            piVar7 = &DAT_80078514;
            capitalInfo.xPos = 0x20;
            capitalInfo.yPos = 0x20;
            capitalInfo.size = 0x20;
            pCVar9 = &capitalInfo;
          }
          iVar13 = iVar13 + 0x1b;
          HudLifePelletsRelated(&local_d0,piVar7,&pCVar9->xPos);
          iVar14 = iVar14 + 1;
          sVar2 = sVar2 + 0x1b;
        } while (iVar14 < 0xc);
      }
      DrawLine(0x40,0x45,0x1c0,0x45);
      pDVar5 = ptr_graphicsRelated;
      SetDrawMode(ptr_graphicsRelated,1,0,0x40,(RECT *)0x0);
      DrawPrimitive(pDVar5);
      pDVar5[1].tag = 0x5000000;
      *(undefined *)((int)pDVar5[1].code + 3) = 0x2a;
      *(undefined *)pDVar5[1].code = 0x60;
      *(undefined *)((int)pDVar5[1].code + 1) = 0x60;
      *(undefined *)((int)pDVar5[1].code + 2) = 0x60;
      *(undefined2 *)((int)pDVar5[1].code + 6) = 0x46;
      *(undefined2 *)((int)&pDVar5[2].tag + 2) = 0x46;
      *(undefined2 *)(pDVar5[1].code + 1) = 0x40;
      *(undefined2 *)&pDVar5[2].tag = 0x1c0;
      *(undefined2 *)pDVar5[2].code = 0x40;
      *(undefined2 *)((int)pDVar5[2].code + 2) = 0x47;
      *(undefined2 *)(pDVar5[2].code + 1) = 0x1c0;
      *(undefined2 *)((int)pDVar5[2].code + 6) = 0x47;
      DrawPrimitive(pDVar5 + 1);
      ptr_graphicsRelated = pDVar5 + 3;
      DrawLine(0x40,0x47,0x1c0,0x47);
      if ((0 < inventoryMenuPage) && ((&DAT_80078e72)[inventoryMenuPage * 6] != '\0')) {
        capitalInfo.xPos = 0x28;
        capitalInfo.yPos = 0x48;
        capitalInfo.size = 0x1100;
        DrawArrow(&capitalInfo,pausedTimer << 1,1);
      }
      if ((inventoryMenuPage < 5) && ((&DAT_80078e7e)[inventoryMenuPage * 6] != '\0')) {
        capitalInfo.xPos = 0x1d7;
        capitalInfo.yPos = 0x48;
        capitalInfo.size = 0x1100;
        DrawArrow(&capitalInfo,pausedTimer << 1,0);
      }
      iVar14 = 0;
      iVar8 = (uint)(inventoryMenuPage < 3) * 8;
      iVar13 = strlen((&PTR_s_ARTISANS_8006f7d4)[inventoryMenuPage]);
      capitalInfo.yPos = 0x5c;
      capitalInfo.size = 0xe00;
      local_c0 = 0x14;
      local_b8 = 0x1000;
      local_bc = 2;
      capitalInfo.xPos = inventoryMenuMovementAnimFrame - ((iVar13 + -1) * 10 + -0x9e);
      DrawTextAll((&PTR_s_ARTISANS_8006f7d4)[inventoryMenuPage],&capitalInfo.xPos,&local_c0,0x17,
                  '\x02');
      iVar13 = 0;
      puVar12 = ptr_hudMobys;
      if ((&DAT_8007555c)[inventoryMenuPage] != '\0') {
        do {
          iVar14 = iVar14 + 1;
          puVar12[0x46] = (uchar)(sineWaveArray[(pausedTimer * 8 + iVar13 & 0xff) + 0x40] * 3 >> 9);
          iVar13 = iVar13 + 0xc;
          puVar12 = puVar12 + 0x58;
        } while (iVar14 < (int)(uint)(byte)(&DAT_8007555c)[inventoryMenuPage]);
      }
      ptr_hudMobys = ptr_hudMobys + -0x58;
      memset(ptr_hudMobys,'\0',0x58);
      ptr_currentMoby = ptr_hudMobys;
      *(undefined2 *)(ptr_hudMobys + 0x36) = 0x1d7;
      *(int *)(ptr_currentMoby + 0xc) = inventoryMenuMovementAnimFrame + iVar8 + 0x15a;
      *(undefined4 *)(ptr_currentMoby + 0x10) = 0x6c;
      *(undefined4 *)(ptr_currentMoby + 0x14) = 0xc00;
      ptr_currentMoby[0x45] = (uchar)(sineWaveArray[hudChestHeadSpinTimer + 0x40] >> 9);
      ptr_hudMobys[0x46] = (uchar)hudChestHeadSpinTimer;
      ptr_hudMobys[0x47] = '\x7f';
      ptr_hudMobys[0x4f] = '\v';
      ptr_hudMobys[0x50] = 0xff;
      ptr_hudMobys = ptr_hudMobys + -0x58;
      memset(ptr_hudMobys,'\0',0x58);
      puVar12 = ptr_hudMobys;
      *(int *)(ptr_hudMobys + 0xc) = inventoryMenuMovementAnimFrame + 0x1d1;
      *(undefined4 *)(puVar12 + 0x10) = 0x6e;
      uVar6 = pausedTimer;
      *(undefined2 *)(puVar12 + 0x36) = 0x1fa;
      *(undefined4 *)(puVar12 + 0x14) = 0x780;
      puVar12[0x46] = (uchar)((ushort)sineWaveArray[(uVar6 & 0x1f) * 8 + 0x40] >> 8);
      ptr_hudMobys[0x47] = '\x7f';
      iVar13 = 0;
      ptr_hudMobys[0x4f] = '\v';
      iVar14 = 0x7b;
      ptr_hudMobys[0x50] = 0xff;
      do {
        pDVar5 = ptr_graphicsRelated;
        if ((&levelEnteredStruct)[inventoryMenuPage * 6 + iVar13] != '\0') {
          SetDrawMode(ptr_graphicsRelated,1,0,0x40,(RECT *)0x0);
          DrawPrimitive(pDVar5);
          pDVar5[1].tag = 0x5000000;
          *(undefined *)((int)pDVar5[1].code + 3) = 0x2a;
          *(undefined *)pDVar5[1].code = 0x28;
          *(undefined *)((int)pDVar5[1].code + 1) = 0x28;
          *(undefined *)((int)pDVar5[1].code + 2) = 0x28;
          iVar10 = inventoryMenuMovementAnimFrame;
          sVar2 = (short)iVar14;
          *(short *)((int)pDVar5[1].code + 6) = sVar2 + -10;
          *(short *)((int)&pDVar5[2].tag + 2) = sVar2 + -10;
          *(short *)((int)pDVar5[2].code + 2) = sVar2 + 9;
          *(short *)((int)pDVar5[2].code + 6) = sVar2 + 9;
          sVar11 = (short)iVar10;
          *(short *)(pDVar5[1].code + 1) = sVar11;
          *(short *)&pDVar5[2].tag = sVar11 + 0x1ff;
          *(short *)pDVar5[2].code = sVar11;
          *(short *)(pDVar5[2].code + 1) = sVar11 + 0x1ff;
          DrawPrimitive(pDVar5 + 1);
          iVar10 = iVar14 + -0xb;
          ptr_graphicsRelated = pDVar5 + 3;
          DrawLine(inventoryMenuMovementAnimFrame + 0x70,iVar10,
                   inventoryMenuMovementAnimFrame + 0xd0,iVar10);
          DrawLine(inventoryMenuMovementAnimFrame + iVar8 + 0x13a,iVar10,
                   inventoryMenuMovementAnimFrame + iVar8 + 0x17a,iVar10);
          DrawLine(inventoryMenuMovementAnimFrame + 0x1ae,iVar10,
                   inventoryMenuMovementAnimFrame + 0x1ee,iVar10);
          puVar12 = ptr_hudMobys;
          local_c0 = 0x10;
          local_bc = 1;
          local_b8 = 0x1400;
          capitalInfo.xPos = inventoryMenuMovementAnimFrame + 0x24;
          capitalInfo.size = 0x1100;
          capitalInfo.yPos = iVar14;
          DrawTextAll((&PTR_DAT_8006f7f0)[inventoryMenuPage * 6 + iVar13],&capitalInfo.xPos,
                      &local_c0,0x12,'\x02');
          capitalInfo.xPos = inventoryMenuMovementAnimFrame + iVar8 + 0x113;
          piVar7 = levelGemsCollectedArray + inventoryMenuPage * 6 + iVar13;
          if (*piVar7 < 1000) {
            capitalInfo.xPos = capitalInfo.xPos + 0x12;
          }
          if (*piVar7 < 100) {
            capitalInfo.xPos = capitalInfo.xPos + 0x12;
          }
          if (*piVar7 < 10) {
            capitalInfo.xPos = capitalInfo.xPos + 0x12;
          }
          sprintf(textBuffer,&DAT_800755bc,*piVar7);
          DrawTextCapitals(textBuffer,&capitalInfo,0x12,2);
          capitalInfo.size = 0x1800;
          capitalInfo.xPos = inventoryMenuMovementAnimFrame + iVar8 + 0x15a;
          DrawTextCapitals(&DAT_8007561c,&capitalInfo,0x12,2);
          capitalInfo.size = 0x1100;
          capitalInfo.xPos = inventoryMenuMovementAnimFrame + iVar8 + 0x16b;
          sprintf(textBuffer,&DAT_800755bc,
                  (int)*(short *)(&DAT_8006f438 + (inventoryMenuPage * 6 + iVar13) * 2));
          DrawTextCapitals(textBuffer,&capitalInfo,0x12,2);
          iVar10 = inventoryMenuPage * 6 + iVar13;
          if ((&DAT_8006f414)[iVar10] == '\0') {
            capitalInfo.size = 0x1800;
            capitalInfo.xPos = inventoryMenuMovementAnimFrame + 0x1ce;
            DrawTextCapitals(&DAT_8007561c,&capitalInfo,0x12,2);
            ptr_hudMobys[0x44] = ')';
          }
          else {
            capitalInfo.xPos = inventoryMenuMovementAnimFrame + 0x1bd;
            sprintf(textBuffer,&DAT_800755bc,(&amountOfDragonsCollectedInLevels)[iVar10]);
            DrawTextCapitals(textBuffer,&capitalInfo,0x12,2);
            capitalInfo.size = 0x1800;
            capitalInfo.xPos = inventoryMenuMovementAnimFrame + 0x1ce;
            DrawTextCapitals(&DAT_8007561c,&capitalInfo,0x12,2);
            capitalInfo.size = 0x1100;
            capitalInfo.xPos = inventoryMenuMovementAnimFrame + 0x1df;
            sprintf(textBuffer,&DAT_800755bc,
                    (uint)(byte)(&DAT_8006f414)[inventoryMenuPage * 6 + iVar13]);
            DrawTextCapitals(textBuffer,&capitalInfo,0x12,2);
          }
          if ((inventoryMenuPage * 6 + iVar13 == levelID_Indexer) &&
             (puVar12 = puVar12 + -0x58, (int)ptr_hudMobys <= (int)puVar12)) {
            iVar10 = 0;
            do {
              puVar12[0x46] =
                   (uchar)(sineWaveArray[(pausedTimer * 8 + iVar10 & 0xff) + 0x40] * 3 >> 9);
              puVar12 = puVar12 + -0x58;
              iVar10 = iVar10 + 0xc;
            } while ((int)ptr_hudMobys <= (int)puVar12);
          }
          if (((0 < globalEggCount) && (inventoryMenuPage < 3)) &&
             (iVar10 = 0, (&DAT_8006f480)[inventoryMenuPage * 6 + iVar13] != '\0')) {
            sVar11 = 0;
            do {
              local_c8.x = (short)inventoryMenuMovementAnimFrame + 0xe8 + sVar11;
              if ((&DAT_8006f480)[inventoryMenuPage * 6 + iVar13] == '\x01') {
                local_c8.x = local_c8.x + 0x18;
              }
              local_c8.y = sVar2 + -8;
              local_c8.w = 0x18;
              local_c8.h = 0x10;
              if (iVar10 < (int)(&levelEggsStruct)[inventoryMenuPage * 6 + iVar13]) {
                pCVar9 = (CapitalTextInfo *)0x0;
                piVar7 = &DAT_80078514 + ((hudChestHeadSpinTimer + iVar13) % 9) * 2;
              }
              else {
                capitalInfo.xPos = local_c8.x + 0xc;
                capitalInfo.size = 0x1800;
                capitalInfo.yPos = iVar14;
                DrawTextCapitals(&DAT_80075618,&capitalInfo,0,2);
                piVar7 = &DAT_80078514;
                capitalInfo.xPos = 0x20;
                capitalInfo.yPos = 0x20;
                capitalInfo.size = 0x20;
                pCVar9 = &capitalInfo;
              }
              sVar11 = sVar11 + 0x18;
              HudLifePelletsRelated(&local_c8,piVar7,&pCVar9->xPos);
              iVar10 = iVar10 + 1;
            } while (iVar10 < (int)(uint)(byte)(&DAT_8006f480)[inventoryMenuPage * 6 + iVar13]);
          }
          iVar14 = iVar14 + 0x13;
        }
        iVar13 = iVar13 + 1;
        iVar10 = iVar14 + -0xb;
      } while (iVar13 < 6);
      DrawLine(inventoryMenuMovementAnimFrame + 0x70,iVar10,inventoryMenuMovementAnimFrame + 0xd0,
               iVar10);
      DrawLine(inventoryMenuMovementAnimFrame + 0x140,iVar10,inventoryMenuMovementAnimFrame + 0x180,
               iVar10);
      DrawLine(inventoryMenuMovementAnimFrame + 0x1ae,iVar10,inventoryMenuMovementAnimFrame + 0x1ee,
               iVar10);
    }
    ptr_maybeTextObj = 0;
    if ((gameState == GAMESTATE_PAUSED) && (isInFlightLevel == 0)) {
      DrawHud();
    }
    CopyHudToShaded();
    memset((uchar *)&DAT_8006fcf4,'\0',0x900);
    DrawShadedMobys();
    puVar3 = (u_long *)VramRelated(0);
    DrawOTag(puVar3);
    DrawSync(0);
    if (DAT_80075784 != 0) {
      Vsync(0);
    }
    DAT_80075954 = Vsync(0xffffffff);
    iVar13 = DAT_80075954 - DAT_80075950;
    while (iVar13 < 2) {
      Vsync(0);
      DAT_80075954 = Vsync(0xffffffff);
      iVar13 = DAT_80075954 - DAT_80075950;
    }
    DAT_80075950 = Vsync(0xffffffff);
    PutDispEnv(ptr_DisplayInfo + 1);
  }
  pausedTimer = pausedTimer + 1;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void ExitLevelTransition(void)

{
  short sVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  u_long *p;
  int iVar4;
  undefined4 *puVar5;
  DRAWENV *pDVar6;
  RECT local_20;
  undefined4 local_18;
  
  DAT_800758b0 = 0;
  ptr_graphicsRelated = DAT_800785e8;
  DAT_80075780 = DAT_800785e8 + 0x7000;
  if (pausedTimer == 0) {
    pDVar6 = &DRAW_ENV1;
    if (ptr_DisplayInfo == &DRAW_ENV1) {
      pDVar6 = &DRAW_ENV2;
    }
    iVar4 = 0;
    PutDrawEnv(pDVar6);
    local_20.y = 0xe0;
    local_20.h = 1;
    local_20.x = (short)pausedTimerOnCurrentSelection + 0x200;
    local_20.w = 0x20 - (short)pausedTimerOnCurrentSelection;
    LoadImage(&local_20,(u_long *)&PuaseScreenBackgroundCLUT);
    DrawSync(0);
    do {
      puVar2 = ptr_graphicsRelated;
      sVar1 = (short)iVar4;
      *ptr_graphicsRelated = 0x9000000;
      *(undefined *)((int)puVar2 + 7) = 0x2c;
      *(undefined *)(puVar2 + 1) = 0x4c;
      *(undefined *)((int)puVar2 + 5) = 0x80;
      *(short *)(puVar2 + 2) = (short)(iVar4 << 7);
      *(undefined2 *)((int)puVar2 + 10) = 8;
      *(short *)(puVar2 + 4) = *(short *)(puVar2 + 2) + 0x80;
      *(short *)((int)puVar2 + 0x1a) = *(short *)((int)puVar2 + 10) + 0xdf;
      iVar4 = iVar4 + 1;
      *(undefined *)((int)puVar2 + 0xd) = 0;
      *(undefined2 *)((int)puVar2 + 0x12) = *(undefined2 *)((int)puVar2 + 10);
      *(undefined *)(puVar2 + 3) = 0;
      *(undefined2 *)(puVar2 + 6) = *(undefined2 *)(puVar2 + 2);
      *(short *)(puVar2 + 8) = *(short *)(puVar2 + 2) + 0x80;
      *(short *)((int)puVar2 + 0x22) = *(short *)((int)puVar2 + 10) + 0xdf;
      *(undefined *)((int)puVar2 + 6) = 0x40;
      *(undefined *)((int)puVar2 + 0x15) = *(undefined *)((int)puVar2 + 0xd);
      *(undefined *)(puVar2 + 7) = *(undefined *)(puVar2 + 3);
      *(char *)(puVar2 + 5) = *(char *)(puVar2 + 3) + -0x80;
      *(char *)((int)puVar2 + 0x1d) = *(char *)((int)puVar2 + 0xd) + -0x21;
      *(char *)(puVar2 + 9) = *(char *)(puVar2 + 3) + -0x80;
      *(char *)((int)puVar2 + 0x25) = *(char *)((int)puVar2 + 0xd) + -0x21;
      *(undefined2 *)((int)puVar2 + 0xe) = 0x3820;
      *(short *)((int)puVar2 + 0x16) = sVar1 + 0x88;
      AddToWorldTable(puVar2,0x3ff);
      puVar5 = puVar2 + 10;
      ptr_graphicsRelated = puVar5;
    } while (iVar4 < 4);
    puVar2[10] = 0x3000000;
    *(undefined *)((int)puVar2 + 0x2f) = 0x40;
    *(undefined2 *)(puVar2 + 0xc) = 0;
    *(undefined2 *)((int)puVar2 + 0x32) = 0xe7;
    *(undefined2 *)(puVar2 + 0xd) = 0x200;
    *(undefined2 *)((int)puVar2 + 0x36) = 0xe7;
    *(undefined *)(puVar2 + 0xb) = 0;
    *(undefined *)((int)puVar2 + 0x2d) = 0;
    *(undefined *)((int)puVar2 + 0x2e) = 0;
    AddToWorldTable(puVar5,0x3ff);
    ptr_graphicsRelated = puVar2 + 0xe;
  }
  else if (pausedTimer == 1) {
    DAT_800757d4 = 0;
    DAT_8007575c = (0x20 - pausedTimerOnCurrentSelection) * 0x80;
    uVar3 = PortalShimmer(_clearColor,0);
    pDVar6 = &DRAW_ENV1;
    local_18._0_1_ = (u_char)uVar3;
    local_18._1_1_ = (u_char)((uint)uVar3 >> 8);
    local_18._2_1_ = (u_char)((uint)uVar3 >> 0x10);
    if (ptr_DisplayInfo == &DRAW_ENV1) {
                    // WARNING: Read-only address (ram,0x80076f7d) is written
      DRAW_ENV2.r0 = (u_char)local_18;
                    // WARNING: Read-only address (ram,0x80076f7e) is written
      DRAW_ENV2.g0 = local_18._1_1_;
                    // WARNING: Read-only address (ram,0x80076f7f) is written
      DRAW_ENV2.b0 = local_18._2_1_;
      pDVar6 = &DRAW_ENV2;
    }
    else {
                    // WARNING: Read-only address (ram,0x80076ef9) is written
      DRAW_ENV1.r0 = (u_char)local_18;
                    // WARNING: Read-only address (ram,0x80076efa) is written
      DRAW_ENV1.g0 = local_18._1_1_;
                    // WARNING: Read-only address (ram,0x80076efb) is written
      DRAW_ENV1.b0 = local_18._2_1_;
    }
    local_18 = uVar3;
    PutDrawEnv(pDVar6);
    BalloonTransitionSkyChangeRelated();
  }
  memset((uchar *)&DAT_8006fcf4,'\0',0x900);
  DrawSpyro();
  p = (u_long *)VramRelated(0x800);
  DrawOTag(p);
  DrawSync(0);
  if (DAT_80075784 != 0) {
    Vsync(0);
  }
  DAT_80075954 = Vsync(0xffffffff);
  iVar4 = DAT_80075954 - DAT_80075950;
  while (iVar4 < 2) {
    Vsync(0);
    DAT_80075954 = Vsync(0xffffffff);
    iVar4 = DAT_80075954 - DAT_80075950;
  }
  DAT_80075950 = Vsync(0xffffffff);
  PutDispEnv(ptr_DisplayInfo + 1);
  return;
}



void DeathFunc(void)

{
  u_long *puVar1;
  uint uVar2;
  uchar *puVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  RECT local_40;
  int local_38;
  undefined4 local_34;
  undefined4 local_30;
  int local_28;
  undefined4 local_24;
  undefined4 local_20;
  
  if (gameOverFlag == 0) {
    if (deathAndGameOverTimer == 0) {
      Maybe_DrawingMobyParticlesRelated();
      RenderObjs();
      RenderAllParticles();
      RenderAllSkyBoxes();
      RenderWorld();
      DrawSync(0);
      Vsync(0);
      PutDispEnv(ptr_DisplayInfo + 1);
      PutDrawEnv(ptr_DisplayInfo);
      puVar1 = (u_long *)VramRelated(0x800);
      DrawOTag(puVar1);
      DrawSync(0);
      Vsync(0);
LAB_8001ce58:
      iVar7 = 8;
      local_40.x = 0;
      if (ptr_DisplayInfo != &DRAW_ENV1) {
        iVar7 = 0xf8;
      }
      local_40.w = 0x200;
      local_40.y = (short)iVar7;
      local_40.h = 0xe0;
      MoveImage(&local_40,0,0x100 - iVar7);
      DrawSync(0);
      DRAW_ENV2.isbg = '\0';
      DRAW_ENV1.isbg = '\0';
                    // WARNING: Read-only address (ram,0x80076ef8) is written
                    // WARNING: Read-only address (ram,0x80076ef9) is written
                    // WARNING: Read-only address (ram,0x80076efa) is written
                    // WARNING: Read-only address (ram,0x80076efb) is written
                    // WARNING: Read-only address (ram,0x80076f7c) is written
                    // WARNING: Read-only address (ram,0x80076f7d) is written
                    // WARNING: Read-only address (ram,0x80076f7e) is written
                    // WARNING: Read-only address (ram,0x80076f7f) is written
      return;
                    // WARNING: Read-only address (ram,0x80076ef8) is written
                    // WARNING: Read-only address (ram,0x80076f7c) is written
    }
    if (0xf < deathAndGameOverTimer) {
      return;
    }
    uVar4 = 0x10;
    if (deathAndGameOverTimer == 1) {
      uVar5 = 0x10;
      uVar6 = 0x10;
      goto LAB_8001ceec;
    }
  }
  else {
    if (gameOverFlag == 1) {
      if (0x3b < deathAndGameOverTimer) {
        iVar7 = 0;
        iVar9 = 0;
        do {
          iVar8 = deathAndGameOverTimer - ((byte)(&ptr_maybe_toText)[iVar7] + 0x3c);
          if (-1 < iVar8) {
            ptr_hudMobys = ptr_hudMobys + -0x58;
            memset(ptr_hudMobys,'\0',0x58);
            if (iVar8 < 0x18) {
              *(int *)(ptr_hudMobys + 0x14) = (int)*(short *)(&DAT_8006f2d4 + iVar8 * 2);
            }
            else {
              *(undefined4 *)(ptr_hudMobys + 0x14) = 0x400;
            }
            puVar3 = ptr_hudMobys;
            *(ushort *)(ptr_hudMobys + 0x36) = (byte)s_GAMEOVER_8006f304[iVar7] + 0x169;
            *(int *)(puVar3 + 0xc) = (int)*(short *)((int)&maybe_startGameOverTextX + iVar9);
            *(int *)(puVar3 + 0x10) = (int)*(short *)((int)&maybe_startGameOverTextY + iVar9);
            puVar3[0x46] = (&maybe_gameOverTextRotation)[iVar7];
            ptr_hudMobys[0x47] = '\x04';
            ptr_hudMobys[0x4f] = '\v';
            ptr_hudMobys[0x50] = ' ';
          }
          iVar7 = iVar7 + 1;
          iVar9 = iVar9 + 4;
        } while (iVar7 < 8);
        if ((10 < levelLoadState) && (0x1a4 < deathAndGameOverTimer)) {
          local_28 = 0x10;
          local_24 = 1;
          local_20 = 0x1400;
          local_38 = 0xae;
          local_34 = 0xd0;
          local_30 = 0x1100;
          DrawTextAll((byte *)"PRESS START",&local_38,&local_28,0x12,'\v');
          iVar9 = 0;
          iVar7 = 0;
          puVar3 = ptr_hudMobys;
          do {
            iVar9 = iVar9 + 1;
            uVar2 = deathAndGameOverTimer * 4 + iVar7;
            iVar7 = iVar7 + 0xc;
            puVar3[0x46] = (uchar)(sineWaveArray[(uVar2 & 0xff) + 0x40] * 3 >> 9);
            puVar3 = puVar3 + 0x58;
          } while (iVar9 < 10);
        }
        ptr_maybeTextObj = 0;
        CopyHudToShaded();
        memset((uchar *)&DAT_8006fcf4,'\0',0x900);
        DrawShadedMobys();
        if (0xb4 < deathAndGameOverTimer) {
          DrawSpyro();
        }
      }
      cameraAngle.pitch = DAT_800752dc;
      cameraAngle.yaw = DAT_800752de;
      CreateCameraMatrix();
      DrawSkybox(0xffffffff,&gCamera6,&gCamera1);
      cameraAngle.pitch = DAT_800752d8;
      cameraAngle.yaw = DAT_800752da;
      if (deathAndGameOverTimer < 0x20) {
        iVar7 = (0x1f - deathAndGameOverTimer) * 8;
        FillScreenColor(2,iVar7,iVar7,iVar7);
      }
      DrawSync(0);
      Vsync(0);
      PutDispEnv(ptr_DisplayInfo + 1);
      PutDrawEnv(ptr_DisplayInfo);
      puVar1 = (u_long *)VramRelated(0x800);
      DrawOTag(puVar1);
      return;
    }
    if (deathAndGameOverTimer == 0) goto LAB_8001ce58;
    if (0xf < deathAndGameOverTimer) {
      return;
    }
    uVar4 = 0x10;
    if (deathAndGameOverTimer == 1) {
      uVar5 = 0x10;
      uVar6 = 0x10;
      goto LAB_8001ceec;
    }
  }
  uVar4 = 0x20;
  uVar5 = 0x20;
  uVar6 = 0x20;
LAB_8001ceec:
  FillScreenColor(2,uVar4,uVar5,uVar6);
  DrawSync(0);
  Vsync(0);
  PutDispEnv(ptr_DisplayInfo + 1);
  PutDrawEnv(ptr_DisplayInfo);
  puVar1 = (u_long *)VramRelated(0x800);
  DrawOTag(puVar1);
  if (deathAndGameOverTimer != 0xf) {
    return;
  }
                    // WARNING: Read-only address (ram,0x80076ef8) is written
  DRAW_ENV1.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x80076f7c) is written
  DRAW_ENV2.isbg = '\x01';
                    // WARNING: Read-only address (ram,0x80076ef9) is written
  DRAW_ENV1.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80076efa) is written
  DRAW_ENV1.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80076efb) is written
  DRAW_ENV1.b0 = '\0';
                    // WARNING: Read-only address (ram,0x80076f7d) is written
  DRAW_ENV2.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80076f7e) is written
  DRAW_ENV2.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80076f7f) is written
  DRAW_ENV2.b0 = '\0';
  DrawSync(0);
  Vsync(0);
  local_40.w = 0x200;
  local_40.x = 0;
  local_40.y = 0;
  local_40.h = 0x1e0;
  ClearImage(&local_40,'\0','\0','\0');
  return;
}



void DragonLoadAnimation(void)

{
  int iVar1;
  u_long *p;
  int **ppiVar2;
  byte *pbVar3;
  undefined4 *puVar4;
  byte bVar5;
  undefined *puVar6;
  char *pcVar7;
  char **ppcVar8;
  
  if (DAT_80076248 != 0) {
    UNK_MatrixOperation(&DAT_80076270,&DAT_80076258,&gCamera1);
    FUN_80058864();
  }
  if (dragonState == 0) {
    Maybe_DrawingMobyParticlesRelated();
    RenderObjs();
    RenderWorld();
    RenderAllSkyBoxes();
    RenderAllParticles();
    if (dragonFlashRGBValues != 0) {
      FillScreenColor(1,dragonFlashRGBValues,dragonFlashRGBValues,dragonFlashRGBValues);
    }
  }
  else if (dragonState < 4) {
    ppiVar2 = &DAT_8006fcf4;
    if (*(byte *)(ptrToLastDragonTouched + 0x12) < 0x80) {
      DAT_8006fcf4 = ptrToLastDragonTouched;
      ppiVar2 = (int **)&DAT_8006fcf8;
    }
    if (dragonState == 3) {
      *ppiVar2 = DAT_800770b8;
      ppiVar2 = ppiVar2 + 1;
    }
    *ppiVar2 = (int *)0x0;
    ppcVar8 = (char **)&ptr_maybeTextObj;
    bVar5 = ptr_startOfCurrentLevelMobys[0x48];
    if (bVar5 != 0xff) {
      pbVar3 = (byte *)(ptr_startOfCurrentLevelMobys + 0x48);
      pcVar7 = ptr_startOfCurrentLevelMobys;
      do {
        if ((*(short *)(pbVar3 + -0x12) == 0xfb) && (bVar5 < 0x80)) {
          *ppcVar8 = pcVar7;
          ppcVar8 = ppcVar8 + 1;
        }
        pbVar3 = pbVar3 + 0x58;
        bVar5 = *pbVar3;
        pcVar7 = pcVar7 + 0x58;
      } while (bVar5 != 0xff);
    }
    *ppcVar8 = (char *)0x0;
    DragonText();
    CopyHudToShaded();
    RenderSparxBalloonEtc();
    memset((uchar *)&DAT_8006fcf4,'\0',0x900);
    DrawMobys();
    DrawShadedMobys();
    FUN_80059f8c();
    DrawSpyro();
    DrawSpyroShadow();
    RenderWorld();
    RenderAllSkyBoxes();
    RenderAllParticles();
    if (dragonFlashRGBValues != 0) {
      FillScreenColor(1,dragonFlashRGBValues,dragonFlashRGBValues,dragonFlashRGBValues);
    }
  }
  else {
    if (dragonState == 4) {
      DAT_8006fcf4 = DAT_800770b8;
      DAT_8006fcf8 = DAT_800770bc;
      DAT_8006fcfc = 0;
      ppcVar8 = (char **)&ptr_maybeTextObj;
      bVar5 = ptr_startOfCurrentLevelMobys[0x48];
      if (bVar5 != 0xff) {
        pbVar3 = (byte *)(ptr_startOfCurrentLevelMobys + 0x48);
        pcVar7 = ptr_startOfCurrentLevelMobys;
        do {
          if ((*(short *)(pbVar3 + -0x12) == 0xfb) && (bVar5 < 0x80)) {
            *ppcVar8 = pcVar7;
            ppcVar8 = ppcVar8 + 1;
          }
          pbVar3 = pbVar3 + 0x58;
          bVar5 = *pbVar3;
          pcVar7 = pcVar7 + 0x58;
        } while (bVar5 != 0xff);
      }
      *ppcVar8 = (char *)0x0;
      if (dragonTimerCurrentState < 0x3c) {
        DragonText();
        CopyHudToShaded();
      }
      RenderSparxBalloonEtc();
      memset((uchar *)&DAT_8006fcf4,'\0',0x900);
      DrawMobys();
      DrawShadedMobys();
      FUN_80059f8c();
    }
    else {
      if (dragonState == 5) {
        iVar1 = 0;
        puVar6 = &hudDragonCountKeyframe;
        DAT_8006fcf4 = DAT_800770b8;
        puVar4 = &ptr_maybeTextObj;
        DAT_8006fcf8 = 0;
        do {
          *puVar4 = puVar6;
          puVar4 = puVar4 + 1;
          iVar1 = iVar1 + 1;
          puVar6 = puVar6 + 0x58;
        } while (iVar1 < 3);
        *puVar4 = 0;
        RenderSparxBalloonEtc();
        if (DAT_800712f4 != 0) {
          iVar1 = (int)*(short *)(&DAT_8006f3c0 + dragonTimerCurrentState * 2);
          DAT_80071310._0_2_ = (short)((short)DAT_80071310 * iVar1 >> 0xc);
          DAT_80071310._2_2_ = (short)(DAT_80071310._2_2_ * iVar1 >> 0xc);
          DAT_80071314._0_2_ = (short)((short)DAT_80071314 * iVar1 >> 0xc);
          if (8 < dragonTimerCurrentState) {
            iVar1 = CosScaled((dragonTimerCurrentState + -8) * 0x2a);
            DAT_80071314._2_2_ = (short)(DAT_80071314._2_2_ * iVar1 >> 0xc);
            DAT_80071318._0_2_ = (short)((short)DAT_80071318 * iVar1 >> 0xc);
            DAT_80071318._2_2_ = (short)(DAT_80071318._2_2_ * iVar1 >> 0xc);
          }
        }
        memset((uchar *)&DAT_8006fcf4,'\0',0x900);
        DrawMobys();
      }
      else {
        if (dragonState != 6) {
          if (dragonState == 7) {
            iVar1 = 0;
            if (dragonTimerCurrentState < 0x10) {
              puVar4 = &ptr_maybeTextObj;
              puVar6 = &hudDragonCountKeyframe;
              do {
                *puVar4 = puVar6;
                puVar4 = puVar4 + 1;
                iVar1 = iVar1 + 1;
                puVar6 = puVar6 + 0x58;
              } while (iVar1 < 3);
              *puVar4 = 0;
              memset((uchar *)&DAT_8006fcf4,'\0',0x900);
              DrawShadedMobys();
            }
            else {
              Maybe_DrawingMobyParticlesRelated();
              RenderSparxBalloonEtc();
              memset((uchar *)&DAT_8006fcf4,'\0',0x900);
              DrawMobys();
              RenderShinyShit();
              RenderShinyAlso();
              DrawShadedMobys();
              FUN_80059f8c();
            }
            DrawSpyro();
            DrawSpyroShadow();
            RenderWorld();
            RenderAllSkyBoxes();
            RenderAllParticles();
            if ((isInDragonState != 0) || (letterBoxEffectAmount != 0)) {
              LetterBoxEffect();
            }
            if (dragonFlashRGBValues != 0) {
              FillScreenColor(1,dragonFlashRGBValues,dragonFlashRGBValues,dragonFlashRGBValues);
            }
          }
          goto LAB_8001d644;
        }
        puVar4 = &ptr_maybeTextObj;
        iVar1 = 0;
        puVar6 = &hudDragonCountKeyframe;
        do {
          *puVar4 = puVar6;
          puVar4 = puVar4 + 1;
          iVar1 = iVar1 + 1;
          puVar6 = puVar6 + 0x58;
        } while (iVar1 < 3);
        *puVar4 = 0;
        memset((uchar *)&DAT_8006fcf4,'\0',0x900);
      }
      DrawShadedMobys();
      DrawSpyro();
    }
    DrawSpyroShadow();
    RenderWorld();
    RenderAllSkyBoxes();
    RenderAllParticles();
  }
  if ((isInDragonState != 0) || (letterBoxEffectAmount != 0)) {
    LetterBoxEffect();
  }
LAB_8001d644:
  DrawSync(0);
  if (DAT_80075784 != 0) {
    Vsync(0);
  }
  DAT_80075954 = Vsync(0xffffffff);
  iVar1 = DAT_80075954 - DAT_80075950;
  while (iVar1 < 2) {
    Vsync(0);
    DAT_80075954 = Vsync(0xffffffff);
    iVar1 = DAT_80075954 - DAT_80075950;
  }
  DAT_80075950 = Vsync(0xffffffff);
  PutDispEnv(ptr_DisplayInfo + 1);
  PutDrawEnv(ptr_DisplayInfo);
  p = (u_long *)VramRelated(0x800);
  DrawOTag(p);
  return;
}



void FairyMenu(void)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  u_long *p;
  char *pcVar5;
  int iVar6;
  int iVar7;
  int unaff_s1;
  uint unaff_s3;
  int local_50;
  int local_4c;
  undefined4 local_48;
  int local_40;
  int local_3c;
  undefined4 local_38;
  
  iVar4 = fairyTextFlag;
  if (DAT_800756fc == maybe_ptr_levelTextureRelated) {
    DAT_800756fc = ptr_graphicsRelated + 0x1ba00;
    ptr_hudMobys = DAT_800756fc;
  }
  if (fairyTextFlag != 1) goto LAB_8001e10c;
  iVar1 = fairyTextboxSaveGameMenus * 8;
  DrawTextBox(DAT_80078d10 + *(short *)(&DAT_8006f350 + iVar1),
              DAT_80078d10 + *(short *)(&DAT_8006f352 + iVar1),
              (int)*(short *)(&DAT_8006f354 + iVar1),(int)*(short *)(&DAT_8006f356 + iVar1));
  local_40 = 0x10;
  local_38 = 0x1400;
  local_3c = iVar4;
  local_48 = 0x1100;
  switch(fairyTextboxSaveGameMenus) {
  case 0:
    local_4c = 0x32;
    local_50 = DAT_80078d10 + 0x40;
    DrawTextAll((byte *)"HI SPYRO,",&local_50,&local_40,0x12,'\v');
    local_4c = local_4c + 0x18;
    local_50 = DAT_80078d10 + 0x4c;
    DrawTextAll((byte *)"SAVE GAME",&local_50,&local_40,0x12,'\v');
    local_4c = local_4c + 0x13;
    if (fairyTextboxSelection == 0) {
      unaff_s3 = 8;
      unaff_s1 = ptr_hudMobys;
    }
    local_50 = DAT_80078d10 + 0x4c;
    DrawTextAll((byte *)"REPLAY DRAGON",&local_50,&local_40,0x12,'\v');
    local_4c = local_4c + 0x13;
    if (fairyTextboxSelection == 1) {
      unaff_s3 = 0xc;
      unaff_s1 = ptr_hudMobys;
    }
    local_50 = DAT_80078d10 + 0x4c;
    DrawTextAll((byte *)"CONTINUE",&local_50,&local_40,0x12,'\v');
    uVar3 = unaff_s3 & 0xff;
    if (fairyTextboxSelection == 2) {
      uVar3 = 8;
      unaff_s1 = ptr_hudMobys;
    }
    iVar4 = 0;
    if (uVar3 != 0) {
      iVar1 = 0;
      do {
        iVar4 = iVar4 + 1;
        uVar2 = fairyMenuTimer * 4 + iVar1;
        iVar1 = iVar1 + 0xc;
        *(char *)(unaff_s1 + 0x46) = (char)(sineWaveArray[(uVar2 & 0xff) + 0x40] * 3 >> 9);
        unaff_s1 = unaff_s1 + 0x58;
      } while (iVar4 < (int)uVar3);
    }
    break;
  case 1:
    local_4c = 0x32;
    local_50 = DAT_80078d10 + 0x52;
    DrawTextAll((byte *)"NO SAVE FILE",&local_50,&local_40,0x12,'\v');
    iVar1 = 0;
    iVar7 = 0;
    local_4c = local_4c + 0x1a;
    iVar4 = ptr_hudMobys;
    do {
      iVar1 = iVar1 + 1;
      uVar3 = fairyMenuTimer * 4 + iVar7;
      iVar7 = iVar7 + 0xc;
      *(char *)(iVar4 + 0x46) = (char)(sineWaveArray[(uVar3 & 0xff) + 0x40] * 3 >> 9);
      iVar4 = iVar4 + 0x58;
    } while (iVar1 < 10);
    local_40 = 0xe;
    local_3c = 1;
    local_38 = 0x1600;
    local_48 = 0x1400;
    local_50 = DAT_80078d10 + 0x2d;
    DrawTextAll((byte *)"PLEASE RESTART WITH",&local_50,&local_40,0x10,'\v');
    local_4c = local_4c + 0x11;
    local_50 = DAT_80078d10 + 0x43;
    DrawTextAll((byte *)"A MEMORY CARD TO",&local_50,&local_40,0x10,'\v');
    pcVar5 = "ENABLE GAME SAVES.";
    local_4c = local_4c + 0x11;
    local_50 = DAT_80078d10 + 0x38;
    goto LAB_8001de8c;
  case 2:
    local_4c = 0x52;
    local_50 = DAT_80078d10 + 0x6a;
    DrawTextAll((byte *)"SAVING...",&local_50,&local_40,0x12,'\v');
    iVar1 = 0;
    iVar7 = 0;
    iVar4 = ptr_hudMobys;
    do {
      iVar1 = iVar1 + 1;
      uVar3 = fairyMenuTimer * 4 + iVar7;
      iVar7 = iVar7 + 0xc;
      *(char *)(iVar4 + 0x46) = (char)(sineWaveArray[(uVar3 & 0xff) + 0x40] * 3 >> 9);
      iVar4 = iVar4 + 0x58;
    } while (iVar1 < 9);
    break;
  case 3:
  case 4:
    local_4c = 0x32;
    if (fairyTextboxSaveGameMenus == 3) {
      pcVar5 = "NO MEMORY CARD";
      iVar4 = 0xc;
      local_50 = DAT_80078d10 + 0x42;
    }
    else {
      pcVar5 = "NO SAVE FILE";
      iVar4 = 10;
      local_50 = DAT_80078d10 + 0x54;
    }
    DrawTextAll((byte *)pcVar5,&local_50,&local_40,0x12,'\v');
    iVar1 = 0;
    local_4c = local_4c + 0x1a;
    if (iVar4 != 0) {
      iVar6 = 0;
      iVar7 = ptr_hudMobys;
      do {
        iVar1 = iVar1 + 1;
        uVar3 = fairyMenuTimer * 4 + iVar6;
        iVar6 = iVar6 + 0xc;
        *(char *)(iVar7 + 0x46) = (char)(sineWaveArray[(uVar3 & 0xff) + 0x40] * 3 >> 9);
        iVar7 = iVar7 + 0x58;
      } while (iVar1 < iVar4);
    }
    local_40 = 0xe;
    local_3c = 1;
    local_38 = 0x1600;
    local_48 = 0x1400;
    local_50 = DAT_80078d10 + 0x3b;
    DrawTextAll((byte *)"PLEASE INSERT THE",&local_50,&local_40,0x10,'\v');
    local_4c = local_4c + 0x11;
    local_50 = DAT_80078d10 + 0x43;
    DrawTextAll((byte *)"MEMORY CARD WITH",&local_50,&local_40,0x10,'\v');
    pcVar5 = "THIS GAME SAVE FILE";
    local_4c = local_4c + 0x11;
    local_50 = DAT_80078d10 + 0x2d;
    goto LAB_8001de8c;
  case 5:
    local_4c = 0x32;
    local_50 = DAT_80078d10 + 0x5e;
    DrawTextAll((byte *)"SAVE ERROR",&local_50,&local_40,0x12,'\v');
    iVar1 = 0;
    iVar7 = 0;
    local_4c = local_4c + 0x1a;
    iVar4 = ptr_hudMobys;
    do {
      iVar1 = iVar1 + 1;
      uVar3 = fairyMenuTimer * 4 + iVar7;
      iVar7 = iVar7 + 0xc;
      *(char *)(iVar4 + 0x46) = (char)(sineWaveArray[(uVar3 & 0xff) + 0x40] * 3 >> 9);
      iVar4 = iVar4 + 0x58;
    } while (iVar1 < 9);
    local_40 = 0xe;
    local_3c = 1;
    local_38 = 0x1600;
    local_48 = 0x1400;
    local_50 = DAT_80078d10 + 0x3b;
    DrawTextAll((byte *)"PLEASE CHECK THAT",&local_50,&local_40,0x10,'\v');
    local_4c = local_4c + 0x11;
    local_50 = DAT_80078d10 + 0x49;
    DrawTextAll((byte *)"THE MEMORY CARD",&local_50,&local_40,0x10,'\v');
    pcVar5 = "IS STILL IN PLACE.";
    local_4c = local_4c + 0x11;
    local_50 = DAT_80078d10 + 0x36;
LAB_8001de8c:
    DrawTextAll((byte *)pcVar5,&local_50,&local_40,0x10,'\v');
    break;
  case 6:
    local_4c = 0x35;
    local_50 = DAT_80078d10 + 0x56;
    DrawTextAll((byte *)"SAVE FAILED",&local_50,&local_40,0x12,'\v');
    local_4c = local_4c + 0x28;
    local_50 = DAT_80078d10 + 0x87;
    DrawTextAll((byte *)s_RETRY_80075620,&local_50,&local_40,0x12,'\v');
    local_4c = local_4c + 0x13;
    if (fairyTextboxSelection == 0) {
      unaff_s3 = 5;
      unaff_s1 = ptr_hudMobys;
    }
    local_50 = DAT_80078d10 + 0x87;
    DrawTextAll((byte *)s_ABORT_80075628,&local_50,&local_40,0x12,'\v');
    uVar3 = unaff_s3 & 0xff;
    if (fairyTextboxSelection == 1) {
      uVar3 = 5;
      unaff_s1 = ptr_hudMobys;
    }
    iVar4 = 0;
    if (uVar3 != 0) {
      iVar1 = 0;
      do {
        iVar4 = iVar4 + 1;
        uVar2 = fairyMenuTimer * 4 + iVar1;
        iVar1 = iVar1 + 0xc;
        *(char *)(unaff_s1 + 0x46) = (char)(sineWaveArray[(uVar2 & 0xff) + 0x40] * 3 >> 9);
        unaff_s1 = unaff_s1 + 0x58;
      } while (iVar4 < (int)uVar3);
    }
    break;
  case 7:
    local_4c = 0x52;
    local_50 = DAT_80078d10 + 0x5e;
    DrawTextAll((byte *)"GAME SAVED",&local_50,&local_40,0x12,'\v');
    iVar1 = 0;
    iVar7 = 0;
    iVar4 = ptr_hudMobys;
    do {
      iVar1 = iVar1 + 1;
      uVar3 = fairyMenuTimer * 4 + iVar7;
      iVar7 = iVar7 + 0xc;
      *(char *)(iVar4 + 0x46) = (char)(sineWaveArray[(uVar3 & 0xff) + 0x40] * 3 >> 9);
      iVar4 = iVar4 + 0x58;
    } while (iVar1 < 9);
  }
  if (1 < fairyTextboxSaveGameMenus) {
    local_40 = 0xd;
    local_3c = 1;
    local_38 = 0x1a00;
    local_4c = 0x1d;
    local_48 = 0x1600;
    if (DAT_80078d18 == 0) {
      pcVar5 = s_SLOT_1_80075630;
      local_50 = DAT_80078d10 + 0x30;
    }
    else {
      pcVar5 = s_SLOT_2_80075638;
      local_50 = 0xe6;
    }
    DrawTextAll((byte *)pcVar5,&local_50,&local_40,0xe,'\v');
  }
LAB_8001e10c:
  Maybe_DrawingMobyParticlesRelated();
  RenderObjs();
  if (fairyTextFlag == 1) {
    ptr_maybeTextObj = 0;
    CopyHudToShaded();
    DrawShadedMobys();
  }
  RenderWorld();
  RenderAllSkyBoxes();
  RenderAllParticles();
  LetterBoxEffect();
  DrawSync(0);
  if (DAT_80075784 != 0) {
    Vsync(0);
  }
  DAT_80075954 = Vsync(0xffffffff);
  iVar4 = DAT_80075954 - DAT_80075950;
  while (iVar4 < 2) {
    Vsync(0);
    DAT_80075954 = Vsync(0xffffffff);
    iVar4 = DAT_80075954 - DAT_80075950;
  }
  DAT_80075950 = Vsync(0xffffffff);
  PutDispEnv(ptr_DisplayInfo + 1);
  PutDrawEnv(ptr_DisplayInfo);
  p = (u_long *)VramRelated(0x800);
  DrawOTag(p);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void StartBalloonist(void)

{
  int iVar1;
  undefined4 uVar2;
  u_long *p;
  char *fmt;
  undefined *puVar3;
  int iVar4;
  int local_70;
  undefined4 local_6c;
  undefined4 local_68;
  int local_60;
  undefined4 local_5c;
  undefined4 local_58;
  byte abStack_50 [64];
  undefined4 local_10;
  
  if ((balloonistState < 4) || (5 < balloonistState)) {
    (*ptr_OverlayBalloonistVisuals)();
  }
  else {
    DAT_8006fcf8 = 0;
    DAT_8006fcf4 = DAT_80077850;
    if (balloonistDropoffLocation < 5) {
      puVar3 = (&PTR_s_DRAGON_X_8006f7d0)[(int)levelID / 10];
      fmt = "ENTERING %s WORLD";
    }
    else {
      if (balloonistDropoffLocation == 5) {
        puVar3 = (&PTR_s_DRAGON_X_8006f7d0)[(int)levelID / 10];
      }
      else {
        puVar3 = (&PTR_s_PEACE_KEEPERS_8006f7d8)[levelID + ((int)levelID / 10) * -4];
      }
      fmt = "ENTERING %s";
    }
    sprintf((char *)abStack_50,fmt,puVar3);
    iVar1 = strlen((char *)abStack_50);
    iVar4 = ptr_hudMobys;
    local_70 = (iVar1 + -1) * -7 + 0x100;
    local_6c = 200;
    local_68 = 0x1400;
    local_60 = 0xe;
    local_5c = 1;
    local_58 = 0x1600;
    DrawTextAll(abStack_50,&local_70,&local_60,0x10,'\x02');
    iVar4 = iVar4 + -0x58;
    iVar1 = 0;
    if (ptr_hudMobys <= iVar4) {
      do {
        *(char *)(iVar4 + 0x46) =
             (char)((ushort)sineWaveArray[(DAT_800777ec * 2 + iVar1 & 0xffU) + 0x40] >> 7);
        iVar4 = iVar4 + -0x58;
        iVar1 = iVar1 + 0xc;
      } while (ptr_hudMobys <= iVar4);
    }
    RenderSparxBalloonEtc();
    memset((uchar *)&DAT_8006fcf4,'\0',0x900);
    DrawMobys();
    ptr_maybeTextObj = 0;
    CopyHudToShaded();
    DrawShadedMobys();
    DrawSpyro();
    if (balloonistState < 6) {
      DAT_800757d4 = 0x401010;
      if (balloonistState == 4) {
        DAT_8007575c = DAT_800777ec << 4;
      }
      else {
        DAT_8007575c = (0x100 - DAT_800777ec) * 0x10;
      }
      if (DAT_8007575c < 0) {
        DAT_8007575c = 0;
      }
      if (0x1000 < DAT_8007575c) {
        DAT_8007575c = 0x1000;
      }
      uVar2 = PortalShimmer(_clearColor,0x401010,DAT_8007575c);
      local_10._0_1_ = (u_char)uVar2;
      local_10._1_1_ = (u_char)((uint)uVar2 >> 8);
      local_10._2_1_ = (u_char)((uint)uVar2 >> 0x10);
                    // WARNING: Read-only address (ram,0x80076ef9) is written
      DRAW_ENV1.r0 = (u_char)local_10;
                    // WARNING: Read-only address (ram,0x80076efa) is written
      DRAW_ENV1.g0 = local_10._1_1_;
                    // WARNING: Read-only address (ram,0x80076efb) is written
      DRAW_ENV1.b0 = local_10._2_1_;
                    // WARNING: Read-only address (ram,0x80076f7d) is written
      DRAW_ENV2.r0 = (u_char)local_10;
                    // WARNING: Read-only address (ram,0x80076f7e) is written
      DRAW_ENV2.g0 = local_10._1_1_;
                    // WARNING: Read-only address (ram,0x80076f7f) is written
      DRAW_ENV2.b0 = local_10._2_1_;
      local_10 = uVar2;
      if (DAT_8007575c < 0x1000) {
        BalloonTransitionSkyChangeRelated();
      }
    }
  }
  LetterBoxEffect();
  DrawSync(0);
  if (DAT_80075784 != 0) {
    Vsync(0);
  }
  DAT_80075954 = Vsync(0xffffffff);
  iVar4 = DAT_80075954 - DAT_80075950;
  while (iVar4 < 2) {
    Vsync(0);
    DAT_80075954 = Vsync(0xffffffff);
    iVar4 = DAT_80075954 - DAT_80075950;
  }
  DAT_80075950 = Vsync(0xffffffff);
  PutDispEnv(ptr_DisplayInfo + 1);
  PutDrawEnv(ptr_DisplayInfo);
  p = (u_long *)VramRelated(0x800);
  DrawOTag(p);
  return;
}



void DrawIntroText(void)

{
  undefined4 *puVar1;
  char cVar2;
  u_long *p;
  int iVar3;
  int iVar4;
  char *pcVar5;
  int iVar6;
  int iVar7;
  int local_28;
  undefined4 local_24;
  undefined4 local_20;
  int local_18;
  undefined4 local_14;
  undefined4 local_10;
  
  iVar6 = ptr_hudMobys;
  if ((DAT_80078d7c == 2) && (0x8b < DAT_80078d80)) {
    local_24 = 0x78;
    local_20 = 0x1400;
    local_18 = 0xe;
    local_14 = 1;
    local_10 = 0x1600;
    if (DAT_80078d94 == 0) {
      local_28 = 0x5c;
      DrawTextAll((byte *)"IN THE WORLD OF DRAGONS...",&local_28,&local_18,0x10,'\v');
      iVar3 = 0xb8;
    }
    else if (DAT_80078d94 == 1) {
      if (levelEnteredStruct == '\0') {
        local_28 = 100;
        DrawTextAll((byte *)"THE ADVENTURE BEGINS...",&local_28,&local_18,0x10,'\v');
        iVar3 = 0xb6;
      }
      else {
        local_28 = 0x50;
        DrawTextAll((byte *)"THE ADVENTURE CONTINUES...",&local_28,&local_18,0x10,'\v');
        iVar3 = 0xbc;
      }
    }
    else {
      local_28 = 0x68;
      DrawTextAll((byte *)"ENTERING DEMO MODE...",&local_28,&local_18,0x10,'\v');
      iVar3 = 0xb2;
    }
    if (DAT_80078d80 < iVar3) {
      ptr_hudMobys = ptr_hudMobys + (iVar3 - DAT_80078d80 >> 1) * 0x58;
    }
    iVar7 = iVar6 + -0x58;
    iVar3 = 0;
    if (ptr_hudMobys <= iVar7) {
      pcVar5 = (char *)(iVar6 + -0x12);
      iVar6 = 0;
      do {
        iVar4 = DAT_80078d80 - (iVar3 + 0x8c);
        if (iVar4 < 0x38) {
          cVar2 = (char)iVar4 * '\b' + '@';
        }
        else {
          cVar2 = (char)((ushort)sineWaveArray[(DAT_80078d80 * 4 + iVar6 & 0xffU) + 0x40] >> 7);
        }
        *pcVar5 = cVar2;
        iVar6 = iVar6 + 0xc;
        iVar3 = iVar3 + 1;
        iVar7 = iVar7 + -0x58;
        pcVar5 = pcVar5 + -0x58;
      } while (ptr_hudMobys <= iVar7);
    }
  }
                    // WARNING: Read-only address (ram,0x80076ef9) is written
  DRAW_ENV1.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80076efa) is written
  DRAW_ENV1.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80076efb) is written
  DRAW_ENV1.b0 = '\0';
                    // WARNING: Read-only address (ram,0x80076f7d) is written
  DRAW_ENV2.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80076f7e) is written
  DRAW_ENV2.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80076f7f) is written
  DRAW_ENV2.b0 = '\0';
  ptr_maybeTextObj = 0;
  CopyHudToShaded();
  memset((uchar *)&DAT_8006fcf4,'\0',0x900);
  DrawShadedMobys();
  if (DAT_80078d7c == 2) {
    DrawSpyro();
    iVar6 = ptr_maybe_graphicsArray2;
    puVar1 = ptr_primitivesArray;
    *(undefined4 *)(ptr_maybe_graphicsArray2 + 0x100) = *ptr_primitivesArray;
    *(undefined4 *)(iVar6 + 0x104) = puVar1[1];
    *puVar1 = 0;
    ptr_primitivesArray[1] = 0;
  }
  DrawSync(0);
  Vsync(0);
  PutDispEnv(ptr_DisplayInfo + 1);
  PutDrawEnv(ptr_DisplayInfo);
  p = (u_long *)VramRelated(0x800);
  DrawOTag(p);
  return;
}



void PlayCutscene(void)

{
  u_long *p;
  int iVar1;
  
                    // WARNING: Read-only address (ram,0x80076ef9) is written
  DRAW_ENV1.r0 = clearColor.R;
                    // WARNING: Read-only address (ram,0x80076efa) is written
  DRAW_ENV1.g0 = clearColor.G;
                    // WARNING: Read-only address (ram,0x80076efb) is written
  DRAW_ENV1.b0 = clearColor.B;
                    // WARNING: Read-only address (ram,0x80076f7d) is written
  DRAW_ENV2.r0 = clearColor.R;
                    // WARNING: Read-only address (ram,0x80076f7e) is written
  DRAW_ENV2.g0 = clearColor.G;
                    // WARNING: Read-only address (ram,0x80076f7f) is written
  DRAW_ENV2.b0 = clearColor.B;
  Maybe_DrawingMobyParticlesRelated();
  RenderSparxBalloonEtc();
  memset((uchar *)&DAT_8006fcf4,'\0',0x900);
  DrawMobys();
  memset((uchar *)&DAT_8006fcf4,'\0',0x1c00);
  DAT_800785d0 = 0x14000;
  World(0xffffffff);
  DrawSkybox(0xffffffff,&gCamera6,&gCamera1);
  if (fadeInTimer != 0) {
    iVar1 = fadeInTimer << 4;
    FillScreenColor(2,iVar1,iVar1,iVar1);
  }
  DrawSync(0);
  if (DAT_80075784 != 0) {
    Vsync(0);
  }
  DAT_80075954 = Vsync(0xffffffff);
  iVar1 = DAT_80075954 - DAT_80075950;
  while (iVar1 < 2) {
    Vsync(0);
    DAT_80075954 = Vsync(0xffffffff);
    iVar1 = DAT_80075954 - DAT_80075950;
  }
  DAT_80075950 = Vsync(0xffffffff);
  PutDispEnv(ptr_DisplayInfo + 1);
  PutDrawEnv(ptr_DisplayInfo);
  p = (u_long *)VramRelated(0x800);
  DrawOTag(p);
  return;
}



void PlayPostCredits(void)

{
  u_long *p;
  int iVar1;
  int iVar2;
  int local_28;
  undefined4 local_24;
  undefined4 local_20;
  int local_18;
  undefined4 local_14;
  undefined4 local_10;
  
  iVar2 = ptr_hudMobys;
  local_28 = 0x10;
  local_24 = 1;
  local_20 = 0x1400;
  local_18 = 0x76;
  local_14 = 0x6e;
  local_10 = 0x1100;
                    // WARNING: Read-only address (ram,0x80076ef9) is written
  DRAW_ENV1.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80076efa) is written
  DRAW_ENV1.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80076efb) is written
  DRAW_ENV1.b0 = '\0';
                    // WARNING: Read-only address (ram,0x80076f7d) is written
  DRAW_ENV2.r0 = '\0';
                    // WARNING: Read-only address (ram,0x80076f7e) is written
  DRAW_ENV2.g0 = '\0';
                    // WARNING: Read-only address (ram,0x80076f7f) is written
  DRAW_ENV2.b0 = '\0';
  DrawTextAll((byte *)"RETURNING HOME...",&local_18,&local_28,0x12,'\v');
  iVar2 = iVar2 + -0x58;
  iVar1 = 0;
  if (ptr_hudMobys <= iVar2) {
    do {
      *(char *)(iVar2 + 0x46) =
           (char)((ushort)sineWaveArray[(DAT_800756f8 * 2 + iVar1 & 0xffU) + 0x40] >> 7);
      iVar2 = iVar2 + -0x58;
      iVar1 = iVar1 + 0xc;
    } while (ptr_hudMobys <= iVar2);
  }
  ptr_maybeTextObj = 0;
  CopyHudToShaded();
  memset((uchar *)&DAT_8006fcf4,'\0',0x900);
  DrawShadedMobys();
  DrawSync(0);
  DAT_80075954 = Vsync(0xffffffff);
  iVar2 = DAT_80075954 - DAT_80075950;
  while (iVar2 < 2) {
    Vsync(0);
    DAT_80075954 = Vsync(0xffffffff);
    iVar2 = DAT_80075954 - DAT_80075950;
  }
  DAT_80075950 = Vsync(0xffffffff);
  PutDispEnv(ptr_DisplayInfo + 1);
  PutDrawEnv(ptr_DisplayInfo);
  p = (u_long *)VramRelated(0x800);
  DrawOTag(p);
  return;
}



void GameUpdateLoop(void)

{
  u_long *p;
  int iVar1;
  DRAWENV *pDVar2;
  
  pDVar2 = &DRAW_ENV1;
  if (ptr_DisplayInfo == &DRAW_ENV1) {
    pDVar2 = &DRAW_ENV2;
  }
  ptr_maybe_graphicsArray2._0_1_ = pDVar2[1].isbg;
  ptr_maybe_graphicsArray2._1_1_ = pDVar2[1].r0;
  ptr_maybe_graphicsArray2._2_1_ = pDVar2[1].g0;
  ptr_maybe_graphicsArray2._3_1_ = pDVar2[1].b0;
  ptr_primitivesArray = pDVar2[1].dr_env.tag;
  ptr_graphicsRelated = *(int *)&pDVar2[1].tpage;
  DAT_800758b0 = 0;
  DAT_800756fc = ptr_graphicsRelated + 0x1c000;
  ptr_hudMobys = DAT_800756fc;
  DAT_80075780 = DAT_800756fc;
  ptr_DisplayInfo = pDVar2;
  CreateCameraMatrix();
  if (gameState == GAMESTATE_GAMEPLAY) {
                    // WARNING: Read-only address (ram,0x80076ef9) is written
    DRAW_ENV1.r0 = clearColor.R;
                    // WARNING: Read-only address (ram,0x80076efa) is written
    DRAW_ENV1.g0 = clearColor.G;
                    // WARNING: Read-only address (ram,0x80076efb) is written
    DRAW_ENV1.b0 = clearColor.B;
                    // WARNING: Read-only address (ram,0x80076f7d) is written
    DRAW_ENV2.r0 = clearColor.R;
                    // WARNING: Read-only address (ram,0x80076f7e) is written
    DRAW_ENV2.g0 = clearColor.G;
                    // WARNING: Read-only address (ram,0x80076f7f) is written
    DRAW_ENV2.b0 = clearColor.B;
    Maybe_DrawingMobyParticlesRelated();
    if (isInFlightLevel == 0) {
      DrawHud();
    }
    if (isDemoMode != 0) {
      DemoModeText();
    }
    RenderObjs();
    RenderWorld();
    RenderAllSkyBoxes();
    RenderAllParticles();
    if (fadeInTimer != 0) {
      iVar1 = fadeInTimer << 3;
      FillScreenColor(2,iVar1,iVar1,iVar1);
    }
    if ((isInDragonState != 0) || (letterBoxEffectAmount != 0)) {
      LetterBoxEffect();
    }
    FUN_800189f0();
    DrawSync(0);
    if (DAT_80075784 != 0) {
      Vsync(0);
    }
    DAT_80075954 = Vsync(0xffffffff);
    iVar1 = DAT_80075954 - DAT_80075950;
    while (iVar1 < 2) {
      Vsync(0);
      DAT_80075954 = Vsync(0xffffffff);
      iVar1 = DAT_80075954 - DAT_80075950;
    }
    DAT_80075950 = Vsync(0xffffffff);
    PutDispEnv(ptr_DisplayInfo + 1);
    PutDrawEnv(ptr_DisplayInfo);
    p = (u_long *)VramRelated(0x800);
    DrawOTag(p);
    return;
  }
  if (gameState == GAMESTATE_LOADING) {
LAB_8001ee88:
    LevelTransition();
  }
  else {
    if ((gameState != GAMESTATE_PAUSED) && (gameState != GAMESTATE_INVENTORY)) {
      if ((gameState == GAMESTATE_DEATH) || (gameState == GAMESTATE_GAME_OVER)) {
        DeathFunc();
        return;
      }
      if (gameState != GAMESTATE_BETA_DRAGON_TEXTBOX_MAYBE) {
        if (gameState == GAMESTATE_FLIGHT_LEVEL_MENU) {
          (*DAT_8007567c)();
          return;
        }
        if (gameState == GAMESTATE_DRAGON_STATE) {
          DragonLoadAnimation();
          return;
        }
        if (gameState != GAMESTATE_FLY_IN) {
          if (gameState == GAMESTATE_EXITING_LEVEL) {
            ExitLevelTransition();
            return;
          }
          if (gameState == GAMESTATE_DRAGON_FAIRY_TEXTBOX) {
            FairyMenu();
            return;
          }
          if (gameState == GAMESTATE_BALLOONIST) {
            StartBalloonist();
            return;
          }
          if (gameState == GAMESTATE_TITLE_SCREEN) {
            if (titleScreenState == 3) {
              DrawIntroText();
              return;
            }
            RenderMainMenu();
            return;
          }
          if (gameState == GAMESTATE_CUTSCENE) {
            PlayCutscene();
            return;
          }
          if (gameState != GAMESTATE_CREDITS) {
            return;
          }
          if (DAT_80075704 < 99) {
            PlayCredits();
            return;
          }
          PlayPostCredits();
          return;
        }
        goto LAB_8001ee88;
      }
    }
    PauseAndInventoryMenuDrawing();
  }
                    // WARNING: Read-only address (ram,0x80076ef9) is written
                    // WARNING: Read-only address (ram,0x80076efa) is written
                    // WARNING: Read-only address (ram,0x80076efb) is written
                    // WARNING: Read-only address (ram,0x80076f7d) is written
                    // WARNING: Read-only address (ram,0x80076f7e) is written
                    // WARNING: Read-only address (ram,0x80076f7f) is written
  return;
}



void RenderSparxBalloonEtc(void)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  undefined4 *puVar10;
  int iVar11;
  uint uVar12;
  int *piVar13;
  int iVar14;
  int iVar15;
  uint uVar16;
  uint uVar17;
  uint uVar18;
  int iVar19;
  int iVar20;
  uint uVar21;
  int iVar22;
  int iVar23;
  uint uVar24;
  int iVar25;
  int iVar26;
  uint uVar27;
  int iVar28;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  undefined *puVar29;
  undefined4 unaff_s8;
  int *piVar30;
  undefined4 unaff_retaddr;
  undefined4 *puVar31;
  undefined auStackX_0 [16];
  
  iVar9 = cameraPosition.z;
  iVar8 = cameraPosition.y;
  iVar7 = cameraPosition.x;
  iVar6 = gCamera1.R33;
  iVar5 = gCamera1.R32R31;
  iVar4 = gCamera1.R23R22;
  iVar3 = gCamera1.R21R13;
  iVar2 = gCamera1.R12R11;
  DAT_80077df8 = &DAT_80075264;
  puVar10 = &DAT_8006fcf4;
  piVar30 = &DAT_800712f4;
  puVar31 = &DAT_800724f4;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  do {
    do {
      do {
        do {
          do {
            do {
              do {
                puVar29 = (undefined *)*puVar10;
                puVar10 = puVar10 + 1;
                DAT_80075f00 = puVar31;
                if (puVar29 == (undefined *)0x0) goto LAB_8001f744;
                puVar29[0x51] = 0;
                iVar25 = (((uint)*(ushort *)(puVar29 + 0x50) << 0x18) >> 0x10) +
                         (*(ushort *)(puVar29 + 0x50) & 0x100) * 2;
                iVar11 = *(int *)(puVar29 + 0xc) - iVar7 >> 2;
              } while ((iVar11 + iVar25 < 1) || (-1 < iVar11 - iVar25));
              iVar14 = iVar8 - *(int *)(puVar29 + 0x10) >> 2;
            } while ((iVar14 + iVar25 < 1) || (-1 < iVar14 - iVar25));
            iVar15 = iVar9 - *(int *)(puVar29 + 0x14) >> 2;
          } while ((iVar15 + iVar25 < 1) || (-1 < iVar15 - iVar25));
          uVar27 = *(uint *)(puVar29 + 0x3c);
          iVar28 = (&DAT_80076378)[*(ushort *)(puVar29 + 0x36)];
          iVar26 = *(int *)((uVar27 & 0xff) * 4 + iVar28 + 0x38);
          gte_ldR11R12(iVar2);
          gte_ldR13R21(iVar3);
          gte_ldR22R23(iVar4);
          gte_ldR31R32(iVar5);
          gte_ldR33(iVar6);
          uVar17 = (uint)*(byte *)(iVar26 + 7);
          gte_ldIR3(iVar11);
          gte_ldIR1(iVar14);
          gte_ldIR2(iVar15);
          uVar18 = uVar17 * 0x10;
          gte_rtir_b();
          iVar19 = (uVar18 >> 1) + (uVar18 >> 2) + (uVar18 >> 5);
          iVar20 = (uVar18 >> 1) + uVar17 + (uVar18 >> 5);
          iVar15 = gte_stMAC3();
          iVar14 = gte_stMAC2();
          iVar11 = gte_stMAC1();
        } while ((-1 < iVar15 - iVar25) || ((int)(iVar15 + uVar18) < 1));
        iVar25 = iVar11;
        if (iVar11 < 0) {
          iVar25 = -iVar11;
        }
      } while (-1 < (iVar25 - iVar19) * 4 + (iVar15 + iVar20) * -3);
      iVar22 = (uVar18 >> 2) + uVar17;
      iVar25 = (uVar18 - (uVar18 >> 5)) - (uVar18 >> 6);
      if ((*(int *)(puVar29 + 0x1c) < 0) && (iVar15 + -0x1200 < 0)) {
        bVar1 = puVar29[0x3e];
        *puVar31 = puVar29;
        DAT_80075f00 = puVar31 + 2;
        puVar31[1] = (uint)*(byte *)((uint)bVar1 * 8 + iVar26 + 0x2a);
      }
      iVar23 = iVar14;
      if (iVar14 < 0) {
        iVar23 = -iVar14;
      }
      puVar31 = DAT_80075f00;
    } while (iVar15 + iVar22 + (iVar23 - iVar25) * -3 < 1);
    iVar23 = iVar11;
    if (iVar11 < 0) {
      iVar23 = -iVar11;
    }
    if ((iVar23 + iVar19) * 4 + (iVar15 - iVar20) * -3 < 0) {
      iVar19 = iVar14;
      if (iVar14 < 0) {
        iVar19 = -iVar14;
      }
      if ((iVar15 - iVar22) + (iVar19 + iVar25) * -3 < 1) goto LAB_8001f400;
      iVar25 = 0x40000000;
    }
    else {
LAB_8001f400:
      iVar25 = -0x80000000;
    }
    bVar1 = puVar29[0x4b];
    uVar17 = *(uint *)(puVar29 + 0x44);
    if ((byte)puVar29[0x40] == 0) {
      iVar19 = 0;
      iVar25 = iVar25 + (uVar17 >> 0x18) * 0x10000 + (uint)*(byte *)(iVar26 + 0xb) * 0x1000000 +
               (uint)(byte)puVar29[0x57];
    }
    else {
      iVar20 = *(int *)(((uVar27 & 0xff00) >> 6) + iVar28 + 0x38);
      iVar19 = (uVar27 >> 0x18) * 8 + 0x24 + iVar20;
      uVar21 = (uint)*(byte *)(iVar20 + 0xb);
      uVar18 = (uint)*(byte *)(iVar26 + 0xb);
      if ((int)(*(byte *)(iVar26 + 0xb) - uVar21) < 0) {
        uVar18 = uVar21;
      }
      iVar25 = iVar25 + (uint)(byte)puVar29[0x40] * 0x100 + (uVar17 >> 0x18) * 0x10000 +
               uVar18 * 0x1000000 + (uint)(byte)puVar29[0x57];
    }
    puVar29[0x51] = 1;
    *piVar30 = iVar25;
    piVar30[1] = iVar26;
    piVar30[2] = (uVar27 >> 0x10 & 0xff) * 8 + 0x24 + iVar26;
    piVar30[3] = iVar19;
    piVar30[4] = iVar11;
    piVar30[5] = iVar14;
    piVar30[6] = iVar15;
    *(ushort *)((int)piVar30 + 0x2e) = (bVar1 & 0x3f) * 0x100 - (short)iVar15;
    piVar30[0xd] = (int)puVar29;
    uVar12 = uVar17 >> 0xf & 0x1fe;
    uVar18 = iVar2;
    uVar27 = iVar3;
    uVar21 = iVar4;
    uVar24 = iVar5;
    uVar16 = iVar6;
    if (uVar12 != 0) {
      uVar18 = (uint)*(ushort *)((int)sineWaveArray + uVar12 + 0x80);
      gte_ldVXY0(uVar18);
      gte_ldVZ0((uint)*(ushort *)((int)sineWaveArray + uVar12));
      gte_rtv0();
      uVar27 = gte_stIR1();
      iVar25 = gte_stIR2();
      uVar21 = gte_stIR3();
      gte_ldVXY0(-(uint)*(ushort *)((int)sineWaveArray + uVar12) & 0xffff);
      gte_ldVZ0(uVar18);
      gte_rtv0_b();
      uVar18 = (iVar2 & 0xffff0000U) + (uVar27 & 0xffff);
      uVar24 = (iVar5 & 0xffff0000U) + (uVar21 & 0xffff);
      uVar27 = gte_stIR1();
      iVar11 = gte_stIR2();
      uVar16 = gte_stIR3();
      uVar27 = (uVar27 & 0xffff) + iVar25 * 0x10000;
      uVar21 = (iVar4 & 0xffffU) + iVar11 * 0x10000;
      uVar16 = uVar16 & 0xffff;
      gte_ldR11R12(uVar18);
      gte_ldR13R21(uVar27);
      gte_ldR22R23(uVar21);
      gte_ldR31R32(uVar24);
      gte_ldR33(uVar16);
    }
    uVar12 = (uVar17 & 0xff00) >> 7;
    if ((uVar17 & 0xff00) != 0) {
      uVar16 = (uint)*(ushort *)((int)sineWaveArray + uVar12 + 0x80);
      uVar21 = (uint)*(ushort *)((int)sineWaveArray + uVar12);
      gte_ldVXY0(uVar16 << 0x10);
      gte_ldVZ0(uVar21);
      gte_rtv0();
      iVar11 = gte_stIR1();
      uVar12 = gte_stIR2();
      iVar25 = gte_stIR3();
      gte_ldVXY0(uVar21 * -0x10000);
      gte_ldVZ0(uVar16);
      gte_rtv0_b();
      uVar18 = (uVar18 & 0xffff) + iVar11 * 0x10000;
      uVar24 = (uVar24 & 0xffff) + iVar25 * 0x10000;
      uVar21 = gte_stIR1();
      iVar11 = gte_stIR2();
      uVar16 = gte_stIR3();
      uVar27 = (uVar27 & 0xffff0000) + (uVar21 & 0xffff);
      uVar21 = iVar11 * 0x10000 + (uVar12 & 0xffff);
      uVar16 = uVar16 & 0xffff;
      gte_ldR11R12(uVar18);
      gte_ldR13R21(uVar27);
      gte_ldR22R23(uVar21);
      gte_ldR31R32(uVar24);
      gte_ldR33(uVar16);
    }
    uVar17 = uVar17 & 0xff;
    if (uVar17 != 0) {
      gte_ldVZ0(0);
      gte_ldVXY0((uint)(ushort)sineWaveArray[uVar17] * 0x10000 +
                 (uint)(ushort)sineWaveArray[uVar17 + 0x40]);
      gte_rtv0();
      uVar18 = gte_stIR1();
      iVar11 = gte_stIR2();
      uVar24 = gte_stIR3();
      gte_ldVXY0((-(uint)(ushort)sineWaveArray[uVar17] & 0xffff) +
                 (uint)(ushort)sineWaveArray[uVar17 + 0x40] * 0x10000);
      gte_ldVZ0(0);
      gte_rtv0_b();
      uVar27 = (uVar27 & 0xffff) + iVar11 * 0x10000;
      iVar11 = gte_stIR1();
      uVar17 = gte_stIR2();
      iVar25 = gte_stIR3();
      uVar18 = iVar11 * 0x10000 + (uVar18 & 0xffff);
      uVar24 = iVar25 * 0x10000 + (uVar24 & 0xffff);
      uVar21 = (uVar21 & 0xffff0000) + (uVar17 & 0xffff);
    }
    piVar30[7] = uVar18;
    piVar30[8] = uVar27;
    piVar30[9] = uVar21;
    piVar30[10] = uVar24;
    piVar13 = piVar30 + 0x1c;
    *(short *)(piVar30 + 0xb) = (short)uVar16;
    piVar30 = piVar30 + 0xe;
  } while (-1 < (int)&DAT_80071ef4 - (int)piVar13);
LAB_8001f744:
  *piVar30 = 0;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void DrawMobys(void)

{
  undefined4 *puVar1;
  bool bVar2;
  short sVar3;
  short sVar4;
  int iVar5;
  uint **ppuVar6;
  undefined4 *puVar7;
  int *piVar8;
  int iVar9;
  uint **ppuVar10;
  short sVar11;
  int iVar12;
  undefined4 *puVar13;
  undefined2 *puVar14;
  undefined uVar15;
  short sVar16;
  uint uVar17;
  uint *puVar18;
  undefined4 *puVar19;
  int *piVar20;
  int *piVar21;
  uint uVar22;
  uint **ppuVar23;
  int iVar24;
  uint *puVar25;
  uint *in_t0;
  uint *puVar26;
  int iVar27;
  undefined2 *puVar28;
  int iVar29;
  uint *puVar30;
  uint uVar31;
  uint uVar32;
  uint uVar33;
  uint *puVar34;
  uint in_t6;
  uint uVar35;
  undefined4 uVar36;
  int iVar37;
  float in_t7;
  uint uVar38;
  float unaff_s0;
  undefined4 uVar39;
  undefined4 unaff_s1;
  int iVar40;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  uint uVar41;
  int *piVar42;
  undefined4 unaff_s4;
  uint uVar43;
  int *piVar44;
  undefined4 unaff_s5;
  uint uVar45;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  undefined2 uVar46;
  uint *puVar47;
  undefined4 *puVar48;
  undefined4 *puVar49;
  int iVar50;
  undefined4 unaff_s8;
  float *pfVar51;
  float *pfVar52;
  int *piVar53;
  undefined4 unaff_retaddr;
  uint uVar54;
  uint uVar55;
  float *pfVar56;
  undefined auStackX_0 [16];
  
  DAT_80077df8 = &DAT_80075264;
  puVar47 = &DAT_800712f4;
  gte_ldZSF3(DAT_8007591c);
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  do {
    uVar41 = *puVar47;
    uVar54 = puVar47[1];
    if (uVar41 == 0) {
      return;
    }
    uVar43 = (uVar41 & 0xff00) >> 2;
    iVar24 = ((int)puVar47[6] >> 5) - ((int)(uVar41 << 8) >> 0x18);
    uVar17 = (uint)*(byte *)(uVar54 + 5);
    if (iVar24 < 0) {
      iVar24 = 0;
    }
    if (-1 < iVar24 + -0x110) {
      iVar24 = iVar24 + 0x20;
    }
    uVar22 = uVar41 >> 0x18 & 0x1f;
    iVar5 = (int)(puVar47[4] << 2) >> (uVar17 & 0x1f);
    iVar9 = (int)(puVar47[5] << 2) >> (uVar17 & 0x1f);
    iVar12 = (int)(puVar47[6] << 2) >> (uVar17 & 0x1f);
    if ((uVar41 & 0xff) == 0) {
LAB_8001f8b0:
      puVar25 = (uint *)(iVar12 - (0x200 << uVar22));
      uVar45 = *(byte *)(uVar54 + 6) + 1;
      gte_ldtr(iVar5,iVar9,iVar12);
      gte_ldbkdir(uVar22 + uVar17 * 0x100,iVar24,puVar25);
      gte_ldR11R12(puVar47[7]);
      gte_ldR13R21(puVar47[8]);
      gte_ldR22R23(puVar47[9]);
      gte_ldR31R32(puVar47[10]);
      gte_ldR33(puVar47[0xb]);
      iVar24 = (int)puVar47[0xb] >> 0x10;
      gte_ldZSF4(iVar24);
      puVar26 = (uint *)puVar47[2];
      puVar30 = (uint *)puVar47[3];
      uVar17 = puVar26[1];
      ppuVar10 = (uint **)&DAT_800726f4;
      if ((0 < iVar24) &&
         (uVar22 = (uVar17 << 0x10) >> 0xe, ppuVar6 = (uint **)(uVar22 + (int)puVar26), uVar22 != 0)
         ) {
        iVar24 = *(int *)(uVar54 + 0x14);
        do {
          puVar18 = *ppuVar6;
          ppuVar23 = (uint **)(((uint)puVar18 & 0xffff) + iVar24);
          uVar22 = (uint)puVar18 >> 0x18 & 0x7f;
          puVar25 = (uint *)((int)ppuVar23 * 0x100 + uVar22);
          *ppuVar10 = puVar25;
          while( true ) {
            ppuVar10 = ppuVar10 + 1;
            ppuVar6 = ppuVar6 + 1;
            bVar2 = uVar22 == 0;
            uVar22 = uVar22 - 1;
            if (bVar2) break;
            *ppuVar10 = *ppuVar23;
            puVar25 = *ppuVar6;
            *ppuVar23 = puVar25;
            ppuVar23 = ppuVar23 + 1;
          }
        } while (0 < (int)puVar18);
      }
      *ppuVar10 = (uint *)0x0;
      puVar18 = (uint *)(*puVar26 & 0x1fffff);
      puVar26 = puVar18 + (uVar17 >> 0x18);
      if (puVar30 != (uint *)0x0) {
        in_t0 = (uint *)(*puVar30 & 0x1fffff);
        puVar25 = in_t0 + (puVar30[1] >> 0x18);
      }
      iVar24 = gte_stZSF4();
      uVar55 = (uint)*(byte *)((uVar54 - (iVar24 >> 0x1f)) + 8);
      uVar22 = 0xffffffff;
      uVar17 = *puVar18;
      if (uVar55 != 0) {
        puVar49 = &DAT_1f800200;
        if (0 < (int)(uVar55 - 0x80)) {
          puVar49 = (undefined4 *)&DAT_800705f4;
        }
        pfVar56 = (float *)(uVar55 * 4 + 0x1f800000);
        puVar18 = puVar18 + 1;
        iVar24 = (int)uVar17 >> 0x15;
        iVar5 = (int)(uVar17 << 10) >> 0x15;
        iVar9 = (int)(uVar17 << 0x14) >> 0x13;
        uVar17 = uVar17 & 1;
        if (uVar43 == 0) {
          gte_ldVZ0(iVar24);
          gte_ldVXY0(iVar9 * 0x10000 + iVar5);
          puVar25 = puVar49;
          pfVar51 = &FLOAT_1f800000;
          do {
            while( true ) {
              if (uVar17 == 0) {
                gte_rtps_b();
                uVar17 = *puVar18;
                puVar18 = puVar18 + 1;
                iVar24 = (int)uVar17 >> 0x15;
                iVar5 = (int)(uVar17 << 10) >> 0x15;
                iVar9 = (int)(uVar17 << 0x14) >> 0x13;
                iVar12 = iVar5 + iVar9 * 0x10000;
              }
              else {
                uVar17 = (uint)*(short *)puVar26;
                gte_rtps_b();
                puVar26 = (uint *)((int)puVar26 + 2);
                iVar24 = iVar24 + (((int)uVar17 >> 0xb) << (uVar45 & 0x1f));
                iVar5 = iVar5 - (((int)(uVar17 << 0x15) >> 0x1b) << (uVar45 & 0x1f));
                iVar9 = iVar9 - (((int)(uVar17 << 0x1a) >> 0x1b) << (uVar45 & 0x1f));
                iVar12 = iVar5 + iVar9 * 0x10000;
              }
              pfVar52 = pfVar51 + 1;
              gte_ldVXY0(iVar12);
              gte_ldVZ0(iVar24);
              in_t6 = gte_stSZ3();
              in_t7 = (float)gte_stSXY2();
              *puVar25 = in_t6;
              if ((int)uVar41 < 0) break;
              uVar17 = uVar17 & 1;
              *pfVar51 = in_t7;
              puVar25 = puVar25 + 1;
              pfVar51 = pfVar52;
              if (pfVar52 == pfVar56) goto LAB_8001fdd0;
            }
            unaff_s0 = (float)((int)in_t7 << 5);
            if ((int)((int)in_t7 - 0x10000U) < 1) {
              unaff_s0 = (float)((uint)unaff_s0 | 1);
            }
            if (-1 < (int)((int)in_t7 - 0x1000000U)) {
              unaff_s0 = (float)((uint)unaff_s0 | 2);
            }
            in_t6 = (int)in_t7 * 0x10000 + 0xfe000000;
            if ((int)in_t7 * 0x10000 < 1) {
              unaff_s0 = (float)((uint)unaff_s0 | 4);
            }
            uVar17 = uVar17 & 1;
            if (-1 < (int)in_t6) {
              unaff_s0 = (float)((uint)unaff_s0 | 8);
            }
            uVar22 = uVar22 & (uint)unaff_s0;
            *pfVar51 = unaff_s0;
            puVar25 = puVar25 + 1;
            pfVar51 = pfVar52;
          } while (pfVar52 != pfVar56);
joined_r0x8001fcb8:
          if ((uVar22 & 0x1f) != 0) goto LAB_80020860;
        }
        else {
          uVar55 = *in_t0;
          in_t0 = in_t0 + 1;
          iVar12 = (int)uVar55 >> 0x15;
          iVar27 = (int)(uVar55 << 10) >> 0x15;
          iVar29 = (int)(uVar55 << 0x14) >> 0x13;
          gte_ldIR0(uVar43);
          gte_ldsv_(iVar24,iVar5,iVar9);
          gte_ldfcdir(iVar12,iVar27,iVar29);
          uVar55 = uVar55 & 1;
          gte_intpl_b();
          if (uVar17 == 0) {
            uVar31 = *puVar18;
          }
          else {
            uVar31 = (uint)*(short *)puVar26;
          }
          read_mt(in_t6,in_t7,unaff_s0);
          gte_ldVZ0(in_t6);
          gte_ldVXY0((int)in_t7 + (int)unaff_s0 * 0x10000);
          puVar7 = puVar49;
          pfVar51 = &FLOAT_1f800000;
          do {
            while( true ) {
              if (uVar17 == 0) break;
              gte_rtps_b();
              if (uVar55 == 0) {
                uVar35 = *in_t0;
              }
              else {
                uVar35 = (uint)*(short *)puVar25;
              }
              iVar24 = iVar24 + (((int)uVar31 >> 0xb) << (uVar45 & 0x1f));
              iVar5 = iVar5 - (((int)(uVar31 << 0x15) >> 0x1b) << (uVar45 & 0x1f));
              iVar9 = iVar9 - (((int)(uVar31 << 0x1a) >> 0x1b) << (uVar45 & 0x1f));
              puVar26 = (uint *)((int)puVar26 + 2);
              if (uVar55 == 0) goto LAB_8001faf4;
LAB_8001fbcc:
              uVar17 = uVar31 & 1;
              iVar12 = iVar12 + (((int)uVar35 >> 0xb) << (uVar45 & 0x1f));
              iVar27 = iVar27 - (((int)(uVar35 << 0x15) >> 0x1b) << (uVar45 & 0x1f));
              iVar29 = iVar29 - (((int)(uVar35 << 0x1a) >> 0x1b) << (uVar45 & 0x1f));
              gte_ldIR0(uVar43);
              gte_ldsv_(iVar24,iVar5,iVar9);
              gte_ldfcdir(iVar12,iVar27,iVar29);
              in_t7 = (float)gte_stSXY2();
              uVar39 = gte_stSZ3();
              gte_intpl_b();
              puVar25 = (uint *)((int)puVar25 + 2);
              if (uVar17 == 0) {
                uVar32 = *puVar18;
              }
              else {
                uVar32 = (uint)*(short *)puVar26;
              }
              uVar55 = uVar35 & 1;
              pfVar52 = pfVar51 + 1;
              uVar36 = gte_stMAC1();
              iVar40 = gte_stMAC3();
              gte_ldVZ0(uVar36);
              iVar37 = gte_stMAC2();
              in_t6 = iVar37 + iVar40 * 0x10000;
              gte_ldVXY0(in_t6);
              *puVar7 = uVar39;
              if ((int)uVar41 < 0) {
LAB_8001fc70:
                pfVar52 = pfVar51 + 1;
                uVar17 = uVar31 & 1;
                unaff_s0 = (float)((int)in_t7 << 5);
                if ((int)((int)in_t7 - 0x10000U) < 1) {
                  unaff_s0 = (float)((uint)unaff_s0 | 1);
                }
                if (-1 < (int)((int)in_t7 - 0x1000000U)) {
                  unaff_s0 = (float)((uint)unaff_s0 | 2);
                }
                in_t6 = (int)in_t7 * 0x10000 + 0xfe000000;
                if ((int)in_t7 * 0x10000 < 1) {
                  unaff_s0 = (float)((uint)unaff_s0 | 4);
                }
                if (-1 < (int)in_t6) {
                  unaff_s0 = (float)((uint)unaff_s0 | 8);
                }
                uVar22 = uVar22 & (uint)unaff_s0;
                *pfVar51 = unaff_s0;
                uVar31 = uVar32;
                puVar7 = puVar7 + 1;
                pfVar51 = pfVar52;
                if (pfVar52 == pfVar56) goto joined_r0x8001fcb8;
              }
              else {
                *pfVar51 = in_t7;
                uVar31 = uVar32;
                puVar7 = puVar7 + 1;
                pfVar51 = pfVar52;
                if (pfVar52 == pfVar56) goto LAB_8001fdd0;
              }
            }
            gte_rtps_b();
            iVar24 = (int)uVar31 >> 0x15;
            if (uVar55 == 0) {
              uVar35 = *in_t0;
            }
            else {
              uVar35 = (uint)*(short *)puVar25;
            }
            iVar5 = (int)(uVar31 << 10) >> 0x15;
            iVar9 = (int)(uVar31 << 0x14) >> 0x13;
            puVar18 = puVar18 + 1;
            if (uVar55 != 0) goto LAB_8001fbcc;
LAB_8001faf4:
            uVar17 = uVar31 & 1;
            iVar12 = (int)uVar35 >> 0x15;
            iVar27 = (int)(uVar35 << 10) >> 0x15;
            iVar29 = (int)(uVar35 << 0x14) >> 0x13;
            gte_ldIR0(uVar43);
            gte_ldsv_(iVar24,iVar5,iVar9);
            gte_ldfcdir(iVar12,iVar27,iVar29);
            in_t7 = (float)gte_stSXY2();
            uVar39 = gte_stSZ3();
            gte_intpl_b();
            in_t0 = in_t0 + 1;
            if (uVar17 == 0) {
              uVar32 = *puVar18;
            }
            else {
              uVar32 = (uint)*(short *)puVar26;
            }
            uVar55 = uVar35 & 1;
            pfVar52 = pfVar51 + 1;
            uVar36 = gte_stMAC1();
            iVar40 = gte_stMAC3();
            gte_ldVZ0(uVar36);
            iVar37 = gte_stMAC2();
            in_t6 = iVar37 + iVar40 * 0x10000;
            gte_ldVXY0(in_t6);
            *puVar7 = uVar39;
            if ((int)uVar41 < 0) goto LAB_8001fc70;
            *pfVar51 = in_t7;
            uVar31 = uVar32;
            puVar7 = puVar7 + 1;
            pfVar51 = pfVar52;
          } while (pfVar52 != pfVar56);
        }
LAB_8001fdd0:
        iVar24 = gte_stZSF4();
        if (iVar24 < 1) {
          iVar5 = gte_stZSF3();
          piVar53 = *(int **)(uVar54 + 0x1c);
          puVar7 = *(undefined4 **)(uVar54 + 0x20);
          if (iVar5 < 1) {
            iVar5 = 0;
          }
          else {
            iVar5 = 0;
            if (iVar24 + 0x800 < 0) {
              iVar5 = -(iVar24 + 0x800);
              if (iVar24 + 0x1000 < 1) {
                iVar5 = 0x7ff;
              }
              iVar5 = iVar5 << 1;
              gte_ldIR0(iVar5);
              puVar7 = *(undefined4 **)(uVar54 + 0x20);
              puVar13 = &DAT_80070df4;
              in_t0 = (uint *)(_clearColor >> 4 & 0xff0);
              gte_ldfcdir((_clearColor & 0xff) << 4,in_t0,_clearColor >> 0xc & 0xff0);
              gte_ldRGB(*puVar7);
              puVar19 = puVar7 + *(ushort *)(uVar54 + 2);
              do {
                gte_dpcs_b();
                puVar1 = puVar7 + 1;
                puVar7 = puVar7 + 1;
                uVar39 = gte_stRGB2();
                gte_ldRGB(*puVar1);
                *puVar13 = uVar39;
                puVar13 = puVar13 + 1;
              } while (puVar7 != puVar19);
              puVar7 = &DAT_80070df4;
            }
          }
        }
        else if (iVar24 + -0x400 < 0) {
          uVar17 = (iVar24 + -0x400) * -4;
          gte_ldIR0(uVar17);
          puVar7 = *(undefined4 **)(uVar54 + 0x18);
          puVar25 = *(uint **)(uVar54 + 0x20);
          puVar19 = &DAT_80070df4;
          iVar5 = (uVar17 >> 9) << 0x16;
          uVar17 = *puVar25;
          uVar39 = *puVar7;
          in_t0 = (uint *)(uVar17 >> 0xc & 0xff0);
          puVar26 = puVar25 + *(ushort *)(uVar54 + 2);
          do {
            gte_ldRGB(uVar39);
            gte_ldfcdir((uVar17 & 0xff) << 4,uVar17 >> 4 & 0xff0,in_t0);
            uVar17 = puVar25[1];
            puVar7 = puVar7 + 1;
            puVar25 = puVar25 + 1;
            gte_dpcs_b();
            uVar39 = *puVar7;
            uVar36 = gte_stRGB2();
            in_t0 = (uint *)(uVar17 >> 0xc & 0xff0);
            *puVar19 = uVar36;
            puVar19 = puVar19 + 1;
          } while (puVar25 != puVar26);
          piVar53 = *(int **)(uVar54 + 0x14);
          puVar7 = &DAT_80070df4;
        }
        else {
          piVar53 = *(int **)(uVar54 + 0x14);
          puVar7 = *(undefined4 **)(uVar54 + 0x18);
          iVar5 = 0;
        }
        iVar50 = gte_stZSF4();
        uVar41 = uVar41 & 0x80000000;
        iVar24 = gte_stBBK();
        uVar17 = gte_stRBK();
        iVar9 = iVar24 * 4;
        uVar17 = (uVar17 & 0xff) + 4 + uVar41;
        puVar48 = &DAT_1f800200;
        if (0 < (int)(*(byte *)((uVar54 - (iVar50 >> 0x1f)) + 8) - 0x80)) {
          puVar48 = (undefined4 *)&DAT_800705f4;
        }
        iVar12 = 0;
        if (iVar9 < 1) {
          iVar12 = ((uint)(iVar24 * -4) >> (uVar17 & 0x1f)) << 3;
          iVar9 = 1;
        }
        piVar42 = (int *)((int)&DAT_8006fcf4 + iVar12);
        piVar44 = (int *)((int)&DAT_800705f4 + iVar12);
        puVar26 = (uint *)(*piVar53 + (int)(piVar53 + 1));
        uVar54 = piVar53[1];
        piVar21 = piVar42;
        puVar19 = ptr_graphicsRelated;
        puVar25 = (uint *)(piVar53 + 1);
LAB_8001fff8:
        puVar30 = puVar25;
        uVar43 = uVar54;
        piVar53 = ptr_maybe_graphicsArray2;
        unaff_s0 = (float)puVar30[1];
        uVar46 = SUB42(puVar19,0);
        iVar24 = (int)unaff_s0 >> 0x1c;
        uVar15 = (undefined)((uint)puVar19 >> 0x10);
        if ((int)uVar43 < 0) {
          if (puVar26 == puVar30) goto LAB_8002074c;
          uVar22 = uVar43 >> 0x14 & 0x7fc;
          in_t6 = uVar43 & 8;
          if ((uVar43 & 4) == 0) {
            uVar33 = puVar30[2];
            uVar45 = uVar43 >> 0xb & 0x7fc;
            uVar55 = uVar43 >> 2 & 0x7fc;
            uVar54 = *(uint *)(uVar22 + 0x1f800000);
            uVar35 = *(uint *)(uVar45 + 0x1f800000);
            in_t0 = *(uint **)(uVar55 + 0x1f800000);
            uVar31 = uVar33 & 0x7fc;
            uVar32 = *(uint *)(uVar31 + 0x1f800000);
            if (uVar41 != 0) {
              uVar38 = uVar54 & uVar35;
              uVar54 = (int)uVar54 >> 5;
              if ((uVar38 & (uint)in_t0 & uVar32 & 0x1f) == 0) {
                uVar35 = (int)uVar35 >> 5;
                in_t0 = (uint *)((int)in_t0 >> 5);
                uVar32 = (int)uVar32 >> 5;
                goto LAB_80020078;
              }
LAB_80020304:
              in_t7 = (float)(uVar43 & 2);
              puVar25 = puVar30 + 3;
              if (in_t7 != 0.0) {
                puVar25 = puVar30 + 6;
              }
              uVar54 = *puVar25;
              goto LAB_8001fff8;
            }
LAB_80020078:
            gte_ldSXY0(uVar54);
            gte_ldSXY1(uVar35);
            gte_ldSXY2(in_t0);
            in_t7 = (float)(uVar43 & 2);
            if (in_t6 != 0) goto LAB_80020304;
            gte_nclip_b();
            puVar19[2] = uVar54;
            if (in_t7 == 0.0) {
              puVar19[4] = uVar35;
              puVar19[6] = in_t0;
              puVar19[8] = uVar32;
            }
            else {
              puVar30 = puVar30 + 3;
              puVar19[5] = uVar35;
              puVar19[8] = in_t0;
              puVar19[0xb] = uVar32;
            }
            iVar27 = uVar43 << 0x1f;
            iVar12 = gte_stMAC0();
            gte_ldSXY0(uVar32);
            if ((iVar27 != 0) && (0 < iVar12)) {
              iVar12 = -iVar12;
            }
            puVar18 = (uint *)(((uint)unaff_s0 >> 0x11 & 0x7fc) + (int)puVar7);
            gte_nclip_b();
            uVar54 = puVar30[3];
            puVar25 = puVar30 + 3;
            puVar34 = (uint *)((uVar33 >> 9 & 0x7fc) + (int)puVar7);
            if (iVar12 < 0) {
              iVar12 = gte_stMAC0();
              if ((iVar27 != 0) && (iVar12 < 0)) {
                iVar12 = -iVar12;
              }
              uVar35 = (uint)unaff_s0 >> 8 & 0x7fc;
              if (0 < iVar12) {
                uVar43 = *puVar18;
                uVar39 = *(undefined4 *)(uVar35 + (int)puVar7);
                uVar36 = *(undefined4 *)(((uint)unaff_s0 & 0x3fe) * 2 + (int)puVar7);
                uVar35 = *puVar34;
                iVar12 = *(int *)((int)puVar48 + uVar22);
                iVar29 = *(int *)((int)puVar48 + uVar45);
                iVar37 = *(int *)((int)puVar48 + uVar55);
                iVar27 = *(int *)((int)puVar48 + uVar31);
                if (in_t7 == 0.0) {
                  puVar19[1] = (uVar43 & 0xffffff) + 0x38000000;
                  puVar19[3] = uVar39;
                  puVar19[5] = uVar36;
                  puVar19[7] = uVar35;
                  in_t6 = (iVar24 << 1) << (uVar17 & 0x1f);
                  iVar27 = (iVar12 - iVar9) + iVar29 + iVar37 + iVar27;
                  if (-1 < iVar27) {
                    *puVar19 = 0x8000000;
                    iVar27 = iVar27 + in_t6;
                    if (-1 < iVar27) {
                      piVar53 = piVar42 + (iVar27 >> (uVar17 & 0x1f)) * 2;
                      puVar14 = (undefined2 *)*piVar53;
                      *piVar53 = (int)puVar19;
                      if (puVar14 == (undefined2 *)0x0) {
                        if (0 < (int)piVar44 - (int)piVar53) {
                          piVar44 = piVar53;
                        }
                        piVar53[1] = (int)puVar19;
                        if ((int)piVar21 - (int)piVar53 < 0) {
                          piVar21 = piVar53;
                        }
                        puVar19 = puVar19 + 9;
                      }
                      else {
                        *puVar14 = uVar46;
                        *(undefined *)(puVar14 + 1) = uVar15;
                        puVar19 = puVar19 + 9;
                      }
                    }
                  }
                }
                else {
                  uVar22 = *puVar30;
                  in_t6 = (iVar24 << 1) << (uVar17 & 0x1f);
                  iVar27 = (iVar12 - iVar9) + iVar29 + iVar37 + iVar27;
                  uVar45 = puVar30[1];
                  iVar24 = iVar27 + in_t6;
                  if ((-1 < iVar27) && (-1 < iVar24)) {
                    piVar53 = piVar42 + (iVar24 >> (uVar17 & 0x1f)) * 2;
                    puVar14 = (undefined2 *)*piVar53;
                    in_t0 = (uint *)puVar30[2];
                    puVar19[10] = uVar35;
                    puVar19[7] = uVar36;
                    puVar19[4] = uVar39;
                    puVar19[1] = (uVar43 & 0xffffff) + 0x3c000000 + ((uint)unaff_s0 & 1) * 0x2000000
                    ;
                    *puVar19 = 0xc000000;
                    puVar19[3] = uVar22 + iVar5;
                    puVar19[6] = uVar45;
                    puVar19[9] = in_t0;
                    puVar19[0xc] = (uint)in_t0 >> 0x10;
                    *piVar53 = (int)puVar19;
                    if (puVar14 == (undefined2 *)0x0) {
                      if (0 < (int)piVar44 - (int)piVar53) {
                        piVar44 = piVar53;
                      }
                      piVar53[1] = (int)puVar19;
                      if ((int)piVar21 - (int)piVar53 < 0) {
                        piVar21 = piVar53;
                      }
                      puVar19 = puVar19 + 0xd;
                    }
                    else {
                      *puVar14 = uVar46;
                      *(undefined *)(puVar14 + 1) = uVar15;
                      puVar19 = puVar19 + 0xd;
                    }
                  }
                }
                goto LAB_8001fff8;
              }
              bVar2 = false;
            }
            else {
              in_t6 = gte_stMAC0();
              if ((iVar27 != 0) && ((int)in_t6 < 0)) {
                in_t6 = -in_t6;
              }
              uVar35 = (uint)unaff_s0 >> 8 & 0x7fc;
              if ((int)in_t6 < 1) goto LAB_8001fff8;
              puVar19[2] = uVar32;
              bVar2 = true;
              uVar22 = uVar31;
              puVar18 = puVar34;
            }
LAB_800203f4:
            in_t7 = (float)(uVar43 & 2);
            uVar31 = *puVar18;
            uVar39 = *(undefined4 *)(uVar35 + (int)puVar7);
            uVar36 = *(undefined4 *)(((uint)unaff_s0 & 0x3fe) * 2 + (int)puVar7);
            uVar43 = *(uint *)((int)puVar48 + uVar22);
            if (in_t7 == 0.0) {
              uVar22 = *(uint *)((int)puVar48 + uVar45);
              iVar12 = *(int *)((int)puVar48 + uVar55);
              in_t6 = iVar24 * 2;
              puVar19[1] = (uVar31 & 0xffffff) + 0x30000000;
              puVar19[3] = uVar39;
              puVar19[5] = uVar36;
              iVar12 = ((uVar43 + (uVar43 >> 1)) - iVar9) + uVar22 + (uVar22 >> 1) + iVar12;
              if ((-1 < iVar12) && (iVar24 = (iVar12 >> (uVar17 & 0x1f)) + in_t6, -1 < iVar24)) {
                *puVar19 = 0x6000000;
                piVar53 = piVar42 + iVar24 * 2;
                puVar14 = (undefined2 *)*piVar53;
                *piVar53 = (int)puVar19;
                if (puVar14 == (undefined2 *)0x0) {
                  if (0 < (int)piVar44 - (int)piVar53) {
                    piVar44 = piVar53;
                  }
                  piVar53[1] = (int)puVar19;
                  if ((int)piVar21 - (int)piVar53 < 0) {
                    piVar21 = piVar53;
                  }
                  puVar19 = puVar19 + 7;
                }
                else {
                  *puVar14 = uVar46;
                  *(undefined *)(puVar14 + 1) = uVar15;
                  puVar19 = puVar19 + 7;
                }
              }
            }
            else {
              uVar22 = *(uint *)((int)puVar48 + uVar45);
              uVar45 = puVar25[-3];
              in_t6 = iVar24 * 2;
              iVar24 = ((uVar43 + (uVar43 >> 1)) - iVar9) + uVar22 + (uVar22 >> 1) +
                       *(int *)((int)puVar48 + uVar55);
              if (-1 < iVar24) {
                uVar43 = puVar25[-2];
                iVar24 = (iVar24 >> (uVar17 & 0x1f)) + in_t6;
                if (-1 < iVar24) {
                  piVar53 = piVar42 + iVar24 * 2;
                  in_t6 = 0x34000000;
                  puVar14 = (undefined2 *)*piVar53;
                  in_t0 = (uint *)puVar25[-1];
                  puVar19[7] = uVar36;
                  puVar19[4] = uVar39;
                  puVar19[1] = (uVar31 & 0xffffff) + 0x34000000 + ((uint)unaff_s0 & 1) * 0x2000000;
                  puVar19[3] = uVar45 + iVar5;
                  if (bVar2) {
                    *(short *)(puVar19 + 3) = (short)((uint)in_t0 >> 0x10);
                  }
                  *puVar19 = 0x9000000;
                  puVar19[6] = uVar43;
                  puVar19[9] = in_t0;
                  *piVar53 = (int)puVar19;
                  if (puVar14 == (undefined2 *)0x0) {
                    if (0 < (int)piVar44 - (int)piVar53) {
                      piVar44 = piVar53;
                    }
                    piVar53[1] = (int)puVar19;
                    if ((int)piVar21 - (int)piVar53 < 0) {
                      piVar21 = piVar53;
                    }
                    puVar19 = puVar19 + 10;
                  }
                  else {
                    *puVar14 = uVar46;
                    *(undefined *)(puVar14 + 1) = uVar15;
                    puVar19 = puVar19 + 10;
                  }
                }
              }
            }
            goto LAB_8001fff8;
          }
          uVar43 = *(uint *)(uVar22 + 0x1f800000);
          uVar54 = uVar43 & 0x1f;
          if ((uVar41 == 0) || (uVar43 = (int)uVar43 >> 5, uVar54 == 0)) {
            gte_ldDQA(0x100);
            gte_ldDQB(0);
            gte_ldR31R32(0);
            gte_ldR33(0);
            gte_ldTRZ(*(int *)((int)puVar48 + uVar22));
            gte_rtps_b();
            iVar24 = (*(int *)((int)puVar48 + uVar22) * 4 + in_t6) - iVar9;
            uVar54 = puVar30[5];
            puVar25 = puVar30 + 5;
            if (0 < iVar24) {
              piVar53 = piVar42 + (iVar24 >> (uVar17 & 0x1f)) * 2;
              uVar22 = gte_stMAC0();
              gte_ldIR1((uint)unaff_s0 >> 10 & 0x1ff);
              gte_ldIR2((uint)unaff_s0 >> 1 & 0x1ff);
              gte_ldIR0(uVar22 >> 0xc);
              gte_gpf0_b(0);
              uVar22 = gte_stMAC1();
              uVar45 = gte_stMAC2();
              in_t0 = (uint *)puVar30[2];
              uVar55 = puVar30[3];
              uVar31 = puVar30[4];
              sVar3 = (short)uVar43 + (short)(uVar22 >> 0xc);
              sVar11 = sVar3 - (short)(uVar22 >> 0xb);
              puVar19[1] = (*(uint *)(((uint)unaff_s0 >> 0x11 & 0x7fc) + (int)puVar7) & 0xffffff) +
                           0x2c000000 + ((uint)unaff_s0 & 1) * 0x2000000;
              puVar19[3] = in_t0;
              puVar19[5] = uVar55;
              puVar19[7] = uVar31;
              puVar19[9] = uVar31 >> 0x10;
              sVar4 = (short)(uVar43 >> 0x10) + (short)(uVar45 >> 0xc);
              sVar16 = sVar4 - (short)(uVar45 >> 0xb);
              *(short *)(puVar19 + 2) = sVar11;
              *(short *)((int)puVar19 + 10) = sVar16;
              *(short *)(puVar19 + 4) = sVar3;
              *(short *)((int)puVar19 + 0x12) = sVar16;
              *(short *)(puVar19 + 6) = sVar11;
              *(short *)((int)puVar19 + 0x1a) = sVar4;
              *(short *)(puVar19 + 8) = sVar3;
              *(short *)((int)puVar19 + 0x22) = sVar4;
              *puVar19 = 0x9000000;
              puVar14 = (undefined2 *)*piVar53;
              *piVar53 = (int)puVar19;
              if (puVar14 == (undefined2 *)0x0) {
                if (0 < (int)piVar44 - (int)piVar53) {
                  piVar44 = piVar53;
                }
                piVar53[1] = (int)puVar19;
                if ((int)piVar21 - (int)piVar53 < 0) {
                  piVar21 = piVar53;
                }
                puVar19 = puVar19 + 10;
              }
              else {
                *puVar14 = uVar46;
                *(undefined *)(puVar14 + 1) = uVar15;
                puVar19 = puVar19 + 10;
              }
            }
          }
          else {
            uVar54 = puVar30[5];
            puVar25 = puVar30 + 5;
          }
          goto LAB_8001fff8;
        }
        if (puVar26 != puVar30) {
          uVar22 = uVar43 >> 0x14 & 0x7fc;
          uVar45 = uVar43 >> 0xb & 0x7fc;
          uVar55 = uVar43 >> 2 & 0x7fc;
          uVar54 = *(uint *)(uVar22 + 0x1f800000);
          uVar31 = *(uint *)(uVar45 + 0x1f800000);
          in_t0 = *(uint **)(uVar55 + 0x1f800000);
          if (uVar41 == 0) {
LAB_80020370:
            gte_ldSXY0(uVar54);
            gte_ldSXY1(uVar31);
            gte_ldSXY2(in_t0);
            in_t7 = (float)(uVar43 & 2);
            gte_nclip_b();
            puVar19[2] = uVar54;
            if (in_t7 == 0.0) {
              puVar19[4] = uVar31;
              puVar19[6] = in_t0;
            }
            else {
              puVar30 = puVar30 + 3;
              puVar19[5] = uVar31;
              puVar19[8] = in_t0;
            }
            in_t6 = uVar43 & 1;
            if ((uVar43 & 8) == 0) {
              bVar2 = false;
              if (in_t6 == 0) {
                in_t6 = gte_stMAC0();
                uVar54 = puVar30[2];
                puVar25 = puVar30 + 2;
                if ((int)in_t6 < 1) goto LAB_8001fff8;
              }
              else {
                in_t6 = gte_stMAC0();
                uVar54 = puVar30[2];
                puVar25 = puVar30 + 2;
                if (in_t6 == 0) goto LAB_8001fff8;
              }
              puVar25 = puVar30 + 2;
              puVar18 = (uint *)(((uint)unaff_s0 >> 0x11 & 0x7fc) + (int)puVar7);
              uVar35 = (uint)unaff_s0 >> 8 & 0x7fc;
              goto LAB_800203f4;
            }
          }
          else {
            uVar35 = uVar54 & uVar31;
            uVar54 = (int)uVar54 >> 5;
            if ((uVar35 & (uint)in_t0 & 0x1f) == 0) {
              uVar31 = (int)uVar31 >> 5;
              in_t0 = (uint *)((int)in_t0 >> 5);
              goto LAB_80020370;
            }
            if ((uVar43 & 2) != 0) {
              puVar30 = puVar30 + 3;
            }
          }
          in_t7 = (float)(uVar43 & 2);
          uVar54 = puVar30[2];
          puVar25 = puVar30 + 2;
          goto LAB_8001fff8;
        }
LAB_8002074c:
        if (-1 < (int)piVar21 - (int)piVar44) {
          iVar24 = gte_stGBK();
          uVar41 = gte_stRBK();
          uVar41 = (uVar41 >> 8) + (uVar41 & 0xff);
          uVar54 = (int)&DAT_800704f4 - (int)piVar21 << (uVar41 & 0x1f);
          if ((int)&DAT_800704f4 - (int)piVar21 < 0) {
            uVar54 = 0;
          }
          iVar24 = iVar24 * 8 + (0x20 << (uVar41 & 0x1f)) + -8 + (uVar54 >> 8) * -8;
          if (iVar24 < 0) {
            iVar24 = 0;
          }
          piVar44 = piVar44 + -2;
          piVar42 = (int *)(iVar24 + (int)ptr_maybe_graphicsArray2);
LAB_800207d0:
          piVar8 = piVar42;
          puVar14 = (undefined2 *)*piVar8;
          piVar42 = (int *)((int)piVar21 - (0x100U >> (uVar41 & 0x1f)));
          if (0 < (int)piVar44 - (int)piVar42) {
            piVar42 = piVar44;
          }
          if (puVar14 == (undefined2 *)0x0) {
            do {
              piVar20 = piVar21;
              in_t0 = (uint *)piVar20[1];
              piVar21 = piVar20;
              puVar28 = puVar14;
              if (piVar20 == piVar42) goto LAB_80020844;
              piVar21 = piVar20 + -2;
            } while (in_t0 == (uint *)0x0);
            puVar14 = (undefined2 *)*piVar20;
            piVar8[1] = (int)in_t0;
            piVar20[1] = 0;
            *piVar20 = 0;
          }
          do {
            do {
              piVar20 = piVar21;
              in_t0 = (uint *)piVar20[1];
              piVar21 = piVar20;
              puVar28 = puVar14;
              if (piVar20 == piVar42) goto LAB_80020844;
              piVar21 = piVar20 + -2;
            } while (in_t0 == (uint *)0x0);
            puVar28 = (undefined2 *)*piVar20;
            *puVar14 = (short)in_t0;
            *(char *)(puVar14 + 1) = (char)((uint)in_t0 >> 0x10);
            *piVar20 = 0;
            piVar20[1] = 0;
            puVar14 = puVar28;
          } while (piVar21 != piVar42);
LAB_80020844:
          *piVar8 = (int)puVar28;
          ptr_graphicsRelated = puVar19;
          if (piVar42 != piVar44) {
            piVar42 = piVar8 + -2;
            if (piVar8 == piVar53) {
              piVar42 = piVar8;
            }
            goto LAB_800207d0;
          }
        }
      }
LAB_80020860:
      puVar25 = &DAT_800726f4;
      while( true ) {
        uVar41 = *puVar25;
        uVar54 = uVar41 & 0xff;
        if (uVar41 == 0) break;
        puVar26 = (uint *)(uVar41 >> 8 | 0x80000000);
        while( true ) {
          puVar25 = puVar25 + 1;
          bVar2 = uVar54 == 0;
          uVar54 = uVar54 - 1;
          if (bVar2) break;
          *puVar26 = *puVar25;
          puVar26 = puVar26 + 1;
        }
      }
    }
    else {
      gte_ldIR0(uVar41 & 0xff);
      gte_ldsv_(iVar5,iVar9,iVar12);
      gte_gpf0(0);
      iVar12 = gte_stMAC3();
      iVar9 = gte_stMAC2();
      iVar5 = gte_stMAC1();
      iVar12 = iVar12 >> 5;
      iVar9 = iVar9 >> 5;
      iVar5 = iVar5 >> 5;
      if (iVar12 + -63000 < 1) goto LAB_8001f8b0;
    }
    puVar47 = puVar47 + 0xe;
  } while( true );
}



void RenderShinyShit(void)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  uint uVar11;
  int iVar12;
  int iVar13;
  uint uVar14;
  uint uVar15;
  uint uVar16;
  int iVar17;
  int iVar18;
  int iVar19;
  uint uVar20;
  int iVar21;
  int iVar22;
  uint uVar23;
  int iVar24;
  int iVar25;
  uint uVar26;
  int iVar27;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  undefined *puVar28;
  undefined4 unaff_s8;
  int *piVar29;
  undefined4 unaff_retaddr;
  undefined4 *puVar30;
  undefined auStackX_0 [16];
  
  iVar9 = cameraPosition.z;
  iVar8 = cameraPosition.y;
  iVar7 = cameraPosition.x;
  iVar6 = gCamera1.R33;
  iVar5 = gCamera1.R32R31;
  iVar4 = gCamera1.R23R22;
  iVar3 = gCamera1.R21R13;
  iVar2 = gCamera1.R12R11;
  DAT_80077df8 = &DAT_80075264;
  puVar30 = &DAT_80071ef4;
  piVar29 = &DAT_800712f4;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  do {
    do {
      do {
        do {
          do {
            do {
              do {
                puVar28 = (undefined *)*puVar30;
                puVar30 = puVar30 + 1;
                if (puVar28 == (undefined *)0x0) {
                  *piVar29 = 0;
                  return;
                }
                puVar28[0x51] = 0;
                iVar24 = (*(ushort *)(puVar28 + 0x50) & 0xff) * 0x100 +
                         (*(ushort *)(puVar28 + 0x50) & 0x100) * 2;
                iVar10 = *(int *)(puVar28 + 0xc) - iVar7 >> 2;
              } while ((iVar10 + iVar24 < 1) || (-1 < iVar10 - iVar24));
              iVar12 = iVar8 - *(int *)(puVar28 + 0x10) >> 2;
            } while ((iVar12 + iVar24 < 1) || (-1 < iVar12 - iVar24));
            iVar13 = iVar9 - *(int *)(puVar28 + 0x14) >> 2;
          } while ((iVar13 + iVar24 < 1) || (-1 < iVar13 - iVar24));
          uVar26 = *(uint *)(puVar28 + 0x3c);
          iVar27 = (&DAT_80076378)[*(ushort *)(puVar28 + 0x36)];
          iVar25 = *(int *)((uVar26 & 0xff) * 4 + iVar27 + 0x38);
          gte_ldR11R12(iVar2);
          gte_ldR13R21(iVar3);
          gte_ldR22R23(iVar4);
          gte_ldR31R32(iVar5);
          gte_ldR33(iVar6);
          uVar15 = (uint)*(byte *)(iVar25 + 7);
          gte_ldIR3(iVar10);
          gte_ldIR1(iVar12);
          gte_ldIR2(iVar13);
          uVar16 = uVar15 * 0x10;
          gte_rtir_b();
          iVar17 = (uVar16 >> 1) + (uVar16 >> 2) + (uVar16 >> 5);
          iVar18 = (uVar16 >> 1) + uVar15 + (uVar16 >> 5);
          iVar13 = gte_stMAC3();
          iVar12 = gte_stMAC2();
          iVar10 = gte_stMAC1();
        } while ((-1 < iVar13 - iVar24) || ((int)(iVar13 + uVar16) < 1));
        iVar24 = iVar10;
        if (iVar10 < 0) {
          iVar24 = -iVar10;
        }
      } while (-1 < (iVar24 - iVar17) * 4 + (iVar13 + iVar18) * -3);
      iVar21 = (uVar16 >> 2) + uVar15;
      iVar19 = (uVar16 - (uVar16 >> 5)) - (uVar16 >> 6);
      iVar24 = DAT_80075f00;
      if ((*(int *)(puVar28 + 0x1c) < 0) && (iVar13 + -0x1200 < 0)) {
        bVar1 = puVar28[0x3e];
        *(undefined **)DAT_80075f00 = puVar28;
        iVar24 = DAT_80075f00 + 8;
        *(uint *)(DAT_80075f00 + 4) = (uint)*(byte *)((uint)bVar1 * 8 + iVar25 + 0x2a);
      }
      iVar22 = iVar12;
      if (iVar12 < 0) {
        iVar22 = -iVar12;
      }
      DAT_80075f00 = iVar24;
    } while (iVar13 + iVar21 + (iVar22 - iVar19) * -3 < 1);
    iVar24 = iVar10;
    if (iVar10 < 0) {
      iVar24 = -iVar10;
    }
    if ((iVar24 + iVar17) * 4 + (iVar13 - iVar18) * -3 < 0) {
      iVar24 = iVar12;
      if (iVar12 < 0) {
        iVar24 = -iVar12;
      }
      if ((iVar13 - iVar21) + (iVar24 + iVar19) * -3 < 1) goto LAB_80020bac;
      iVar24 = 0x40000000;
    }
    else {
LAB_80020bac:
      iVar24 = -0x80000000;
    }
    bVar1 = puVar28[0x4b];
    uVar15 = *(uint *)(puVar28 + 0x44);
    if ((byte)puVar28[0x40] == 0) {
      iVar17 = 0;
      iVar24 = iVar24 + (uVar15 >> 0x18) * 0x10000 + (uint)*(byte *)(iVar25 + 0xb) * 0x1000000 +
               (uint)(byte)puVar28[0x57];
    }
    else {
      iVar18 = *(int *)(((uVar26 & 0xff00) >> 6) + iVar27 + 0x38);
      iVar17 = (uVar26 >> 0x18) * 8 + 0x24 + iVar18;
      uVar20 = (uint)*(byte *)(iVar18 + 0xb);
      uVar16 = (uint)*(byte *)(iVar25 + 0xb);
      if ((int)(*(byte *)(iVar25 + 0xb) - uVar20) < 0) {
        uVar16 = uVar20;
      }
      iVar24 = iVar24 + (uint)(byte)puVar28[0x40] * 0x100 + (uVar15 >> 0x18) * 0x10000 +
               uVar16 * 0x1000000 + (uint)(byte)puVar28[0x57];
    }
    iVar18 = *(int *)(puVar28 + 0x4c);
    puVar28[0x51] = 1;
    *piVar29 = iVar24;
    piVar29[1] = iVar25;
    piVar29[2] = (uVar26 >> 0x10 & 0xff) * 8 + 0x24 + iVar25;
    piVar29[3] = iVar17;
    piVar29[4] = iVar10;
    piVar29[5] = iVar12;
    piVar29[6] = iVar13;
    *(ushort *)((int)piVar29 + 0x2e) = (bVar1 & 0x3f) * 0x100 - (short)iVar13;
    piVar29[0xc] = iVar18;
    piVar29[0xd] = (int)puVar28;
    uVar11 = uVar15 >> 0xf & 0x1fe;
    uVar16 = iVar2;
    uVar26 = iVar3;
    uVar20 = iVar4;
    uVar23 = iVar5;
    uVar14 = iVar6;
    if (uVar11 != 0) {
      uVar16 = (uint)*(ushort *)((int)sineWaveArray + uVar11 + 0x80);
      gte_ldVXY0(uVar16);
      gte_ldVZ0((uint)*(ushort *)((int)sineWaveArray + uVar11));
      gte_rtv0();
      uVar26 = gte_stIR1();
      iVar24 = gte_stIR2();
      uVar20 = gte_stIR3();
      gte_ldVXY0(-(uint)*(ushort *)((int)sineWaveArray + uVar11) & 0xffff);
      gte_ldVZ0(uVar16);
      gte_rtv0_b();
      uVar16 = (iVar2 & 0xffff0000U) + (uVar26 & 0xffff);
      uVar23 = (iVar5 & 0xffff0000U) + (uVar20 & 0xffff);
      uVar26 = gte_stIR1();
      iVar10 = gte_stIR2();
      uVar14 = gte_stIR3();
      uVar26 = (uVar26 & 0xffff) + iVar24 * 0x10000;
      uVar20 = (iVar4 & 0xffffU) + iVar10 * 0x10000;
      uVar14 = uVar14 & 0xffff;
      gte_ldR11R12(uVar16);
      gte_ldR13R21(uVar26);
      gte_ldR22R23(uVar20);
      gte_ldR31R32(uVar23);
      gte_ldR33(uVar14);
    }
    uVar11 = (uVar15 & 0xff00) >> 7;
    if ((uVar15 & 0xff00) != 0) {
      uVar14 = (uint)*(ushort *)((int)sineWaveArray + uVar11 + 0x80);
      uVar20 = (uint)*(ushort *)((int)sineWaveArray + uVar11);
      gte_ldVXY0(uVar14 << 0x10);
      gte_ldVZ0(uVar20);
      gte_rtv0();
      iVar10 = gte_stIR1();
      uVar11 = gte_stIR2();
      iVar24 = gte_stIR3();
      gte_ldVXY0(uVar20 * -0x10000);
      gte_ldVZ0(uVar14);
      gte_rtv0_b();
      uVar16 = (uVar16 & 0xffff) + iVar10 * 0x10000;
      uVar23 = (uVar23 & 0xffff) + iVar24 * 0x10000;
      uVar20 = gte_stIR1();
      iVar10 = gte_stIR2();
      uVar14 = gte_stIR3();
      uVar26 = (uVar26 & 0xffff0000) + (uVar20 & 0xffff);
      uVar20 = iVar10 * 0x10000 + (uVar11 & 0xffff);
      uVar14 = uVar14 & 0xffff;
      gte_ldR11R12(uVar16);
      gte_ldR13R21(uVar26);
      gte_ldR22R23(uVar20);
      gte_ldR31R32(uVar23);
      gte_ldR33(uVar14);
    }
    uVar15 = uVar15 & 0xff;
    if (uVar15 != 0) {
      gte_ldVZ0(0);
      gte_ldVXY0((uint)(ushort)sineWaveArray[uVar15] * 0x10000 +
                 (uint)(ushort)sineWaveArray[uVar15 + 0x40]);
      gte_rtv0();
      uVar16 = gte_stIR1();
      iVar10 = gte_stIR2();
      uVar23 = gte_stIR3();
      gte_ldVXY0((-(uint)(ushort)sineWaveArray[uVar15] & 0xffff) +
                 (uint)(ushort)sineWaveArray[uVar15 + 0x40] * 0x10000);
      gte_ldVZ0(0);
      gte_rtv0_b();
      uVar26 = (uVar26 & 0xffff) + iVar10 * 0x10000;
      iVar10 = gte_stIR1();
      uVar15 = gte_stIR2();
      iVar24 = gte_stIR3();
      uVar16 = iVar10 * 0x10000 + (uVar16 & 0xffff);
      uVar23 = iVar24 * 0x10000 + (uVar23 & 0xffff);
      uVar20 = (uVar20 & 0xffff0000) + (uVar15 & 0xffff);
    }
    piVar29[7] = uVar16;
    piVar29[8] = uVar26;
    piVar29[9] = uVar20;
    piVar29[10] = uVar23;
    *(short *)(piVar29 + 0xb) = (short)uVar14;
    piVar29 = piVar29 + 0xe;
  } while( true );
}



// WARNING: Instruction at (ram,0x80022270) overlaps instruction at (ram,0x8002226c)
// 
// WARNING: This function may have set the stack pointer
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void RenderShinyAlso(void)

{
  undefined4 *puVar1;
  bool bVar2;
  ushort uVar3;
  ushort uVar4;
  ushort uVar5;
  ushort uVar6;
  int iVar7;
  uint **ppuVar8;
  undefined4 *puVar9;
  int *piVar10;
  int iVar11;
  uint **ppuVar12;
  int iVar13;
  undefined4 *puVar14;
  ushort *puVar15;
  undefined2 *puVar16;
  undefined uVar17;
  short sVar18;
  uint uVar19;
  uint *puVar20;
  undefined4 *puVar21;
  ushort *puVar22;
  int *piVar23;
  int *piVar24;
  short sVar25;
  uint uVar26;
  uint **ppuVar27;
  short sVar28;
  int iVar29;
  short sVar30;
  uint *puVar31;
  uint *in_t0;
  undefined4 uVar32;
  uint *puVar33;
  int iVar34;
  uint *puVar35;
  undefined2 *puVar36;
  int iVar37;
  uint *puVar38;
  code *UNRECOVERED_JUMPTABLE_00;
  uint uVar39;
  uint uVar40;
  uint uVar41;
  uint *puVar42;
  uint *in_t6;
  uint uVar43;
  undefined4 uVar44;
  float in_t7;
  int iVar45;
  uint uVar46;
  float unaff_s0;
  int unaff_s1;
  int iVar47;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  uint uVar48;
  int *piVar49;
  undefined4 unaff_s4;
  uint uVar50;
  int *piVar51;
  undefined4 unaff_s5;
  uint uVar52;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  undefined2 uVar53;
  uint *puVar55;
  undefined4 unaff_s8;
  float *pfVar56;
  float *pfVar57;
  int *piVar58;
  undefined4 unaff_retaddr;
  uint uVar59;
  uint uVar60;
  float *pfVar61;
  undefined auStackX_0 [16];
  undefined4 *puVar54;
  
  DAT_80077df8 = &DAT_80075264;
  puVar55 = &DAT_800712f4;
  gte_ldZSF3(DAT_8007591c);
  puVar54 = ptr_graphicsRelated;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  do {
    uVar48 = *puVar55;
    uVar59 = puVar55[1];
    if (uVar48 == 0) {
      ptr_graphicsRelated = puVar54;
      return;
    }
    uVar50 = (uVar48 & 0xff00) >> 2;
    iVar29 = ((int)puVar55[6] >> 5) - ((int)(uVar48 << 8) >> 0x18);
    uVar19 = (uint)*(byte *)(uVar59 + 5);
    if (iVar29 < 0) {
      iVar29 = 0;
    }
    if (-1 < iVar29 + -0x110) {
      iVar29 = iVar29 + 0x20;
    }
    uVar26 = uVar48 >> 0x18 & 0x1f;
    iVar7 = (int)(puVar55[4] << 2) >> (uVar19 & 0x1f);
    iVar11 = (int)(puVar55[5] << 2) >> (uVar19 & 0x1f);
    iVar13 = (int)(puVar55[6] << 2) >> (uVar19 & 0x1f);
    if ((uVar48 & 0xff) == 0) {
LAB_8002104c:
      puVar31 = (uint *)(iVar13 - (0x200 << uVar26));
      uVar52 = *(byte *)(uVar59 + 6) + 1;
      gte_ldtr(iVar7,iVar11,iVar13);
      gte_ldbkdir(uVar26 + uVar19 * 0x100,iVar29,puVar31);
      gte_ldR11R12(puVar55[7]);
      gte_ldR13R21(puVar55[8]);
      gte_ldR22R23(puVar55[9]);
      gte_ldR31R32(puVar55[10]);
      gte_ldR33(puVar55[0xb]);
      iVar29 = (int)puVar55[0xb] >> 0x10;
      gte_ldZSF4(iVar29);
      puVar33 = (uint *)puVar55[2];
      puVar38 = (uint *)puVar55[3];
      uVar19 = puVar33[1];
      ppuVar12 = (uint **)&DAT_800726f4;
      if ((0 < iVar29) &&
         (uVar26 = (uVar19 << 0x10) >> 0xe, ppuVar8 = (uint **)(uVar26 + (int)puVar33), uVar26 != 0)
         ) {
        iVar29 = *(int *)(uVar59 + 0x14);
        do {
          puVar20 = *ppuVar8;
          ppuVar27 = (uint **)(((uint)puVar20 & 0xffff) + iVar29);
          uVar26 = (uint)puVar20 >> 0x18 & 0x7f;
          puVar31 = (uint *)((int)ppuVar27 * 0x100 + uVar26);
          *ppuVar12 = puVar31;
          while( true ) {
            ppuVar12 = ppuVar12 + 1;
            ppuVar8 = ppuVar8 + 1;
            bVar2 = uVar26 == 0;
            uVar26 = uVar26 - 1;
            if (bVar2) break;
            *ppuVar12 = *ppuVar27;
            puVar31 = *ppuVar8;
            *ppuVar27 = puVar31;
            ppuVar27 = ppuVar27 + 1;
          }
        } while (0 < (int)puVar20);
      }
      *ppuVar12 = (uint *)0x0;
      puVar20 = (uint *)(*puVar33 & 0x1fffff);
      puVar33 = puVar20 + (uVar19 >> 0x18);
      if (puVar38 != (uint *)0x0) {
        in_t0 = (uint *)(*puVar38 & 0x1fffff);
        puVar31 = in_t0 + (puVar38[1] >> 0x18);
      }
      iVar29 = gte_stZSF4();
      uVar60 = (uint)*(byte *)((uVar59 - (iVar29 >> 0x1f)) + 8);
      uVar26 = 0xffffffff;
      uVar19 = *puVar20;
      if (uVar60 != 0) {
        pfVar61 = (float *)(uVar60 * 4 + 0x1f800000);
        puVar20 = puVar20 + 1;
        iVar29 = (int)uVar19 >> 0x15;
        iVar7 = (int)(uVar19 << 10) >> 0x15;
        iVar11 = (int)(uVar19 << 0x14) >> 0x13;
        uVar19 = uVar19 & 1;
        if (uVar50 == 0) {
          gte_ldVZ0(iVar29);
          gte_ldVXY0(iVar11 * 0x10000 + iVar7);
          puVar16 = &DAT_800705f4;
          pfVar56 = &FLOAT_1f800000;
          do {
            while( true ) {
              if (uVar19 == 0) {
                gte_rtps_b();
                uVar19 = *puVar20;
                puVar20 = puVar20 + 1;
                iVar29 = (int)uVar19 >> 0x15;
                iVar7 = (int)(uVar19 << 10) >> 0x15;
                iVar11 = (int)(uVar19 << 0x14) >> 0x13;
                iVar13 = iVar7 + iVar11 * 0x10000;
              }
              else {
                uVar19 = (uint)*(short *)puVar33;
                gte_rtps_b();
                puVar33 = (uint *)((int)puVar33 + 2);
                iVar29 = iVar29 + (((int)uVar19 >> 0xb) << (uVar52 & 0x1f));
                iVar7 = iVar7 - (((int)(uVar19 << 0x15) >> 0x1b) << (uVar52 & 0x1f));
                iVar11 = iVar11 - (((int)(uVar19 << 0x1a) >> 0x1b) << (uVar52 & 0x1f));
                iVar13 = iVar7 + iVar11 * 0x10000;
              }
              pfVar57 = pfVar56 + 1;
              gte_ldVXY0(iVar13);
              gte_ldVZ0(iVar29);
              read_mt(iVar13,in_t7,unaff_s0);
              puVar16[1] = (short)iVar13;
              puVar16[2] = SUB42(in_t7,0);
              puVar16[3] = SUB42(unaff_s0,0);
              in_t6 = (uint *)gte_stSZ3();
              in_t7 = (float)gte_stSXY2();
              *puVar16 = (short)in_t6;
              if ((int)uVar48 < 0) break;
              uVar19 = uVar19 & 1;
              *pfVar56 = in_t7;
              puVar16 = puVar16 + 4;
              pfVar56 = pfVar57;
              if (pfVar57 == pfVar61) goto LAB_800215a8;
            }
            unaff_s0 = (float)((int)in_t7 << 5);
            if ((int)((int)in_t7 - 0x10000U) < 1) {
              unaff_s0 = (float)((uint)unaff_s0 | 1);
            }
            if (-1 < (int)((int)in_t7 - 0x1000000U)) {
              unaff_s0 = (float)((uint)unaff_s0 | 2);
            }
            in_t6 = (uint *)((int)in_t7 * 0x10000 + -0x2000000);
            if ((int)in_t7 * 0x10000 < 1) {
              unaff_s0 = (float)((uint)unaff_s0 | 4);
            }
            uVar19 = uVar19 & 1;
            if (-1 < (int)in_t6) {
              unaff_s0 = (float)((uint)unaff_s0 | 8);
            }
            uVar26 = uVar26 & (uint)unaff_s0;
            *pfVar56 = unaff_s0;
            puVar16 = puVar16 + 4;
            pfVar56 = pfVar57;
          } while (pfVar57 != pfVar61);
joined_r0x80021478:
          if ((uVar26 & 0x1f) != 0) goto LAB_80022990;
        }
        else {
          uVar60 = *in_t0;
          in_t0 = in_t0 + 1;
          iVar13 = (int)uVar60 >> 0x15;
          iVar34 = (int)(uVar60 << 10) >> 0x15;
          iVar37 = (int)(uVar60 << 0x14) >> 0x13;
          gte_ldIR0(uVar50);
          gte_ldsv_(iVar29,iVar7,iVar11);
          gte_ldfcdir(iVar13,iVar34,iVar37);
          uVar60 = uVar60 & 1;
          gte_intpl_b();
          if (uVar19 == 0) {
            uVar39 = *puVar20;
          }
          else {
            uVar39 = (uint)*(short *)puVar33;
          }
          read_mt(in_t6,in_t7,unaff_s0);
          gte_ldVZ0(in_t6);
          unaff_s0 = (float)((int)unaff_s0 * 0x10000);
          gte_ldVXY0((int)in_t7 + (int)unaff_s0);
          puVar16 = &DAT_800705f4;
          pfVar56 = &FLOAT_1f800000;
          do {
            while( true ) {
              if (uVar19 != 0) break;
              gte_rtps_b();
              iVar29 = (int)uVar39 >> 0x15;
              if (uVar60 == 0) {
                uVar43 = *in_t0;
              }
              else {
                uVar43 = (uint)*(short *)puVar31;
              }
              iVar7 = (int)(uVar39 << 10) >> 0x15;
              iVar45 = uVar39 << 0x14;
              iVar11 = iVar45 >> 0x13;
              puVar20 = puVar20 + 1;
              if (uVar60 != 0) goto LAB_80021374;
LAB_80021284:
              uVar19 = uVar39 & 1;
              iVar13 = (int)uVar43 >> 0x15;
              iVar34 = (int)(uVar43 << 10) >> 0x15;
              iVar37 = (int)(uVar43 << 0x14) >> 0x13;
              gte_ldIR0(uVar50);
              gte_ldsv_(iVar29,iVar7,iVar11);
              gte_ldfcdir(iVar13,iVar34,iVar37);
              read_mt(iVar45,unaff_s0,unaff_s1);
              puVar16[1] = (short)iVar45;
              puVar16[2] = SUB42(unaff_s0,0);
              puVar16[3] = (short)unaff_s1;
              in_t7 = (float)gte_stSXY2();
              unaff_s0 = (float)gte_stSZ3();
              gte_intpl_b();
              in_t0 = in_t0 + 1;
              if (uVar19 == 0) {
                uVar40 = *puVar20;
              }
              else {
                uVar40 = (uint)*(short *)puVar33;
              }
              uVar60 = uVar43 & 1;
              pfVar57 = pfVar56 + 1;
              uVar44 = gte_stMAC1();
              iVar47 = gte_stMAC3();
              gte_ldVZ0(uVar44);
              iVar45 = gte_stMAC2();
              unaff_s1 = iVar47 * 0x10000;
              in_t6 = (uint *)(iVar45 + unaff_s1);
              gte_ldVXY0(in_t6);
              *puVar16 = SUB42(unaff_s0,0);
              if ((int)uVar48 < 0) {
LAB_80021430:
                pfVar57 = pfVar56 + 1;
                uVar19 = uVar39 & 1;
                unaff_s0 = (float)((int)in_t7 << 5);
                if ((int)((int)in_t7 - 0x10000U) < 1) {
                  unaff_s0 = (float)((uint)unaff_s0 | 1);
                }
                if (-1 < (int)((int)in_t7 - 0x1000000U)) {
                  unaff_s0 = (float)((uint)unaff_s0 | 2);
                }
                in_t6 = (uint *)((int)in_t7 * 0x10000 + -0x2000000);
                if ((int)in_t7 * 0x10000 < 1) {
                  unaff_s0 = (float)((uint)unaff_s0 | 4);
                }
                if (-1 < (int)in_t6) {
                  unaff_s0 = (float)((uint)unaff_s0 | 8);
                }
                uVar26 = uVar26 & (uint)unaff_s0;
                *pfVar56 = unaff_s0;
                uVar39 = uVar40;
                puVar16 = puVar16 + 4;
                pfVar56 = pfVar57;
                if (pfVar57 == pfVar61) goto joined_r0x80021478;
              }
              else {
                *pfVar56 = in_t7;
                uVar39 = uVar40;
                puVar16 = puVar16 + 4;
                pfVar56 = pfVar57;
                if (pfVar57 == pfVar61) goto LAB_800215a8;
              }
            }
            gte_rtps_b();
            if (uVar60 == 0) {
              uVar43 = *in_t0;
            }
            else {
              uVar43 = (uint)*(short *)puVar31;
            }
            iVar29 = iVar29 + (((int)uVar39 >> 0xb) << (uVar52 & 0x1f));
            iVar7 = iVar7 - (((int)(uVar39 << 0x15) >> 0x1b) << (uVar52 & 0x1f));
            iVar45 = ((int)(uVar39 << 0x1a) >> 0x1b) << (uVar52 & 0x1f);
            iVar11 = iVar11 - iVar45;
            puVar33 = (uint *)((int)puVar33 + 2);
            if (uVar60 == 0) goto LAB_80021284;
LAB_80021374:
            uVar19 = uVar39 & 1;
            iVar13 = iVar13 + (((int)uVar43 >> 0xb) << (uVar52 & 0x1f));
            iVar34 = iVar34 - (((int)(uVar43 << 0x15) >> 0x1b) << (uVar52 & 0x1f));
            iVar37 = iVar37 - (((int)(uVar43 << 0x1a) >> 0x1b) << (uVar52 & 0x1f));
            gte_ldIR0(uVar50);
            gte_ldsv_(iVar29,iVar7,iVar11);
            gte_ldfcdir(iVar13,iVar34,iVar37);
            read_mt(iVar45,unaff_s0,unaff_s1);
            puVar16[1] = (short)iVar45;
            puVar16[2] = SUB42(unaff_s0,0);
            puVar16[3] = (short)unaff_s1;
            in_t7 = (float)gte_stSXY2();
            unaff_s0 = (float)gte_stSZ3();
            gte_intpl_b();
            puVar31 = (uint *)((int)puVar31 + 2);
            if (uVar19 == 0) {
              uVar40 = *puVar20;
            }
            else {
              uVar40 = (uint)*(short *)puVar33;
            }
            uVar60 = uVar43 & 1;
            pfVar57 = pfVar56 + 1;
            uVar44 = gte_stMAC1();
            iVar47 = gte_stMAC3();
            gte_ldVZ0(uVar44);
            iVar45 = gte_stMAC2();
            unaff_s1 = iVar47 * 0x10000;
            in_t6 = (uint *)(iVar45 + unaff_s1);
            gte_ldVXY0(in_t6);
            *puVar16 = SUB42(unaff_s0,0);
            if ((int)uVar48 < 0) goto LAB_80021430;
            *pfVar56 = in_t7;
            uVar39 = uVar40;
            puVar16 = puVar16 + 4;
            pfVar56 = pfVar57;
          } while (pfVar57 != pfVar61);
        }
LAB_800215a8:
        iVar29 = gte_stZSF4();
        if (iVar29 < 1) {
          iVar7 = gte_stZSF3();
          piVar58 = *(int **)(uVar59 + 0x1c);
          puVar9 = *(undefined4 **)(uVar59 + 0x20);
          if (iVar7 < 1) {
            iVar7 = 0;
          }
          else {
            iVar7 = 0;
            if (iVar29 + 0x800 < 0) {
              iVar7 = -(iVar29 + 0x800);
              if (iVar29 + 0x1000 < 1) {
                iVar7 = 0x7ff;
              }
              iVar7 = iVar7 << 1;
              gte_ldIR0(iVar7);
              puVar9 = *(undefined4 **)(uVar59 + 0x20);
              puVar14 = &DAT_80070df4;
              in_t0 = (uint *)(_clearColor >> 4 & 0xff0);
              gte_ldfcdir((_clearColor & 0xff) << 4,in_t0,_clearColor >> 0xc & 0xff0);
              gte_ldRGB(*puVar9);
              puVar21 = puVar9 + *(ushort *)(uVar59 + 2);
              do {
                gte_dpcs_b();
                puVar1 = puVar9 + 1;
                puVar9 = puVar9 + 1;
                uVar44 = gte_stRGB2();
                gte_ldRGB(*puVar1);
                *puVar14 = uVar44;
                puVar14 = puVar14 + 1;
              } while (puVar9 != puVar21);
              puVar9 = &DAT_80070df4;
            }
          }
        }
        else if (iVar29 + -0x400 < 0) {
          uVar19 = (iVar29 + -0x400) * -4;
          gte_ldIR0(uVar19);
          puVar9 = *(undefined4 **)(uVar59 + 0x18);
          puVar31 = *(uint **)(uVar59 + 0x20);
          puVar21 = &DAT_80070df4;
          iVar7 = (uVar19 >> 9) << 0x16;
          uVar19 = *puVar31;
          uVar44 = *puVar9;
          in_t0 = (uint *)(uVar19 >> 0xc & 0xff0);
          puVar33 = puVar31 + *(ushort *)(uVar59 + 2);
          do {
            gte_ldRGB(uVar44);
            gte_ldfcdir((uVar19 & 0xff) << 4,uVar19 >> 4 & 0xff0,in_t0);
            uVar19 = puVar31[1];
            puVar9 = puVar9 + 1;
            puVar31 = puVar31 + 1;
            gte_dpcs_b();
            uVar44 = *puVar9;
            uVar32 = gte_stRGB2();
            in_t0 = (uint *)(uVar19 >> 0xc & 0xff0);
            *puVar21 = uVar32;
            puVar21 = puVar21 + 1;
          } while (puVar31 != puVar33);
          piVar58 = *(int **)(uVar59 + 0x14);
          puVar9 = &DAT_80070df4;
        }
        else {
          piVar58 = *(int **)(uVar59 + 0x14);
          puVar9 = *(undefined4 **)(uVar59 + 0x18);
          iVar7 = 0;
        }
        iVar29 = gte_stBBK();
        uVar59 = gte_stRBK();
        puVar31 = (uint *)puVar55[0xc];
        iVar11 = iVar29 * 4;
        uVar48 = uVar48 & 0x80000000;
        uVar59 = (uVar59 & 0xff) + 4 + uVar48;
        if ((uint)puVar31 >> 0x18 != 0) {
          if ((uint)puVar31 >> 0x18 != 1) {
            puVar31 = (uint *)((uint)puVar31 | 0xff000000);
          }
          gte_ldL11L12(DAT_800770e0);
          gte_ldL13L21(DAT_800770e4);
          gte_ldL22L23(DAT_800770e8);
          gte_ldL31L32(DAT_800770ec);
          gte_ldL33(DAT_800770f0);
          iVar34 = gte_stTRZ();
          iVar37 = gte_stTRX();
          iVar13 = iVar34;
          if (iVar34 < 0) {
            iVar13 = -iVar34;
          }
          iVar45 = iVar37;
          if (iVar37 < 0) {
            iVar45 = -iVar37;
          }
          iVar47 = iVar13;
          if (0 < iVar13 - iVar45) {
            iVar47 = iVar45;
            iVar45 = iVar13;
          }
          if (iVar45 == 0) {
            iVar45 = 1;
          }
          if (iVar34 < 0) {
            if (iVar37 < 0) {
              bVar2 = false;
              if (iVar37 - iVar34 < 0) {
                bVar2 = true;
                iVar13 = 0xc0;
              }
              else {
                iVar13 = 0x80;
              }
            }
            else {
              bVar2 = true;
              if (-iVar37 - iVar34 < 0) {
                bVar2 = false;
                iVar13 = 0x40;
              }
              else {
                iVar13 = 0x80;
              }
            }
          }
          else if (iVar37 < 0) {
            bVar2 = true;
            if (iVar34 + iVar37 < 0) {
              bVar2 = false;
              iVar13 = 0xc0;
            }
            else {
              iVar13 = 0;
            }
          }
          else {
            bVar2 = false;
            if (iVar34 - iVar37 < 0) {
              bVar2 = true;
              iVar13 = 0x40;
            }
            else {
              iVar13 = 0;
            }
          }
          uVar19 = (uint)(byte)s__________________________________8006d82c
                               [(iVar47 << 6) / iVar45 + 0xdc];
          if (bVar2) {
            uVar19 = -uVar19;
          }
          in_t0 = (uint *)((int)puVar31 + ((ram0x80076e20 >> 3) + (iVar13 + uVar19) * -2 & 0x1ff));
          puVar31 = in_t0;
        }
        iVar13 = 0;
        if (iVar11 < 1) {
          iVar13 = ((uint)(iVar29 * -4) >> (uVar59 & 0x1f)) << 3;
          iVar11 = 1;
        }
        piVar49 = (int *)((int)&DAT_8006fcf4 + iVar13);
        piVar51 = (int *)((int)&DAT_800705f4 + iVar13);
        puVar38 = (uint *)(*piVar58 + (int)(piVar58 + 1));
        uVar19 = piVar58[1];
        piVar24 = piVar49;
        puVar33 = (uint *)(piVar58 + 1);
LAB_800217c4:
        puVar20 = puVar33;
        uVar50 = uVar19;
        piVar58 = ptr_maybe_graphicsArray2;
        unaff_s0 = (float)puVar20[1];
        uVar53 = SUB42(puVar54,0);
        iVar29 = (int)unaff_s0 >> 0x1c;
        uVar17 = (undefined)((uint)puVar54 >> 0x10);
        if ((int)uVar50 < 0) {
          if (puVar38 == puVar20) goto LAB_8002287c;
          uVar26 = uVar50 >> 0x14 & 0x7fc;
          in_t6 = (uint *)(uVar50 & 8);
          if ((uVar50 & 4) == 0) {
            uVar41 = puVar20[2];
            uVar52 = uVar50 >> 0xb & 0x7fc;
            uVar60 = uVar50 >> 2 & 0x7fc;
            uVar19 = *(uint *)(uVar26 + 0x1f800000);
            uVar43 = *(uint *)(uVar52 + 0x1f800000);
            in_t0 = *(uint **)(uVar60 + 0x1f800000);
            uVar39 = uVar41 & 0x7fc;
            uVar40 = *(uint *)(uVar39 + 0x1f800000);
            if (uVar48 == 0) {
LAB_80021844:
              gte_ldSXY0(uVar19);
              gte_ldSXY1(uVar43);
              gte_ldSXY2(in_t0);
              in_t7 = (float)(uVar50 & 2);
              if (in_t6 != (uint *)0x0) goto LAB_80021ae0;
              gte_nclip_b();
              puVar54[2] = uVar19;
              if (in_t7 == 0.0) {
                puVar54[4] = uVar43;
                puVar54[6] = in_t0;
                puVar54[8] = uVar40;
              }
              else {
                puVar20 = puVar20 + 3;
                puVar54[5] = uVar43;
                puVar54[8] = in_t0;
                puVar54[0xb] = uVar40;
              }
              if ((uVar50 & 1) != 0) {
                puVar35 = (uint *)(((uint)unaff_s0 >> 0x11 & 0x7fc) + (int)puVar9);
                puVar42 = (uint *)((uVar41 >> 9 & 0x7fc) + (int)puVar9);
                uVar19 = puVar20[3];
                uVar43 = (uint)unaff_s0 >> 8 & 0x7fc;
LAB_80021924:
                puVar33 = puVar20 + 3;
                uVar50 = *puVar35;
                uVar44 = *(undefined4 *)(uVar43 + (int)puVar9);
                uVar32 = *(undefined4 *)(((uint)unaff_s0 & 0x3fe) * 2 + (int)puVar9);
                uVar43 = *puVar42;
                uVar4 = (&DAT_800705f4)[uVar26];
                uVar5 = (&DAT_800705f4)[uVar52];
                uVar6 = (&DAT_800705f4)[uVar60];
                uVar3 = (&DAT_800705f4)[uVar39];
                if (in_t7 == 0.0) {
                  puVar54[1] = (uVar50 & 0xffffff) + 0x38000000;
                  puVar54[3] = uVar44;
                  puVar54[5] = uVar32;
                  puVar54[7] = uVar43;
                  in_t6 = (uint *)((iVar29 << 1) << (uVar59 & 0x1f));
                  iVar29 = ((uint)uVar4 - iVar11) + (uint)uVar5 + (uint)uVar6 + (uint)uVar3;
                  if (-1 < iVar29) {
                    *puVar54 = 0x8000000;
                    iVar29 = iVar29 + (int)in_t6;
                    if (-1 < iVar29) {
                      piVar58 = piVar49 + (iVar29 >> (uVar59 & 0x1f)) * 2;
                      puVar16 = (undefined2 *)*piVar58;
                      *piVar58 = (int)puVar54;
                      if (puVar16 == (undefined2 *)0x0) {
                        if (0 < (int)piVar51 - (int)piVar58) {
                          piVar51 = piVar58;
                        }
                        piVar58[1] = (int)puVar54;
                        if ((int)piVar24 - (int)piVar58 < 0) {
                          piVar24 = piVar58;
                        }
                        puVar54 = puVar54 + 9;
                      }
                      else {
                        *puVar16 = uVar53;
                        *(undefined *)(puVar16 + 1) = uVar17;
                        puVar54 = puVar54 + 9;
                      }
                    }
                  }
                }
                else {
                  uVar26 = *puVar20;
                  in_t6 = (uint *)((iVar29 << 1) << (uVar59 & 0x1f));
                  iVar29 = ((uint)uVar4 - iVar11) + (uint)uVar5 + (uint)uVar6 + (uint)uVar3;
                  uVar52 = puVar20[1];
                  iVar13 = iVar29 + (int)in_t6;
                  if ((-1 < iVar29) && (-1 < iVar13)) {
                    piVar58 = piVar49 + (iVar13 >> (uVar59 & 0x1f)) * 2;
                    puVar16 = (undefined2 *)*piVar58;
                    in_t0 = (uint *)puVar20[2];
                    puVar54[10] = uVar43;
                    puVar54[7] = uVar32;
                    puVar54[4] = uVar44;
                    puVar54[1] = (uVar50 & 0xffffff) + 0x3c000000 + ((uint)unaff_s0 & 1) * 0x2000000
                    ;
                    *puVar54 = 0xc000000;
                    puVar54[3] = uVar26 + iVar7;
                    puVar54[6] = uVar52;
                    puVar54[9] = in_t0;
                    puVar54[0xc] = (uint)in_t0 >> 0x10;
                    *piVar58 = (int)puVar54;
                    if (puVar16 == (undefined2 *)0x0) {
                      if (0 < (int)piVar51 - (int)piVar58) {
                        piVar51 = piVar58;
                      }
                      piVar58[1] = (int)puVar54;
                      if ((int)piVar24 - (int)piVar58 < 0) {
                        piVar24 = piVar58;
                      }
                      puVar54 = puVar54 + 0xd;
                    }
                    else {
                      *puVar16 = uVar53;
                      *(undefined *)(puVar16 + 1) = uVar17;
                      puVar54 = puVar54 + 0xd;
                    }
                  }
                }
                goto LAB_800217c4;
              }
              iVar13 = gte_stMAC0();
              gte_ldSXY0(uVar40);
              puVar35 = (uint *)(((uint)unaff_s0 >> 0x11 & 0x7fc) + (int)puVar9);
              gte_nclip_b();
              uVar19 = puVar20[3];
              puVar33 = puVar20 + 3;
              puVar42 = (uint *)((uVar41 >> 9 & 0x7fc) + (int)puVar9);
              if (iVar13 < 0) {
                iVar13 = gte_stMAC0();
                uVar43 = (uint)unaff_s0 >> 8 & 0x7fc;
                if (0 < iVar13) goto LAB_80021924;
                uVar40 = 0;
                unaff_s1 = 0;
              }
              else {
                in_t6 = (uint *)gte_stMAC0();
                uVar43 = (uint)unaff_s0 >> 8 & 0x7fc;
                if ((int)in_t6 < 1) goto LAB_800217c4;
                puVar54[2] = uVar40;
                uVar40 = 0;
                unaff_s1 = 0x10;
                uVar26 = uVar39;
                puVar35 = puVar42;
              }
LAB_80021bd4:
              in_t7 = (float)(uVar50 & 2);
              uVar50 = *(uint *)(uVar43 + (int)puVar9);
              uVar39 = *(uint *)(((uint)unaff_s0 & 0x3fe) * 2 + (int)puVar9);
              puVar15 = &DAT_800705f4 + uVar52;
              puVar22 = &DAT_800705f4 + uVar60;
              uVar43 = *puVar35 & 0xffffff;
              if (uVar40 == 0) {
LAB_80021c14:
                uVar4 = (&DAT_800705f4)[uVar26];
                if (in_t7 == 0.0) {
                  uVar5 = *puVar15;
                  uVar6 = *puVar22;
                  in_t6 = (uint *)(iVar29 * 2);
                  puVar54[1] = uVar43 + 0x30000000;
                  puVar54[3] = uVar50;
                  puVar54[5] = uVar39;
                  iVar29 = (((uint)uVar4 + (uint)(uVar4 >> 1)) - iVar11) + (uint)uVar5 +
                           (uint)(uVar5 >> 1) + (uint)uVar6;
                  if ((-1 < iVar29) &&
                     (iVar29 = (iVar29 >> (uVar59 & 0x1f)) + (int)in_t6, -1 < iVar29)) {
                    *puVar54 = 0x6000000;
                    piVar58 = piVar49 + iVar29 * 2;
                    puVar16 = (undefined2 *)*piVar58;
                    *piVar58 = (int)puVar54;
                    if (puVar16 == (undefined2 *)0x0) {
                      if (0 < (int)piVar51 - (int)piVar58) {
                        piVar51 = piVar58;
                      }
                      piVar58[1] = (int)puVar54;
                      if ((int)piVar24 - (int)piVar58 < 0) {
                        piVar24 = piVar58;
                      }
                      puVar54 = puVar54 + 7;
                    }
                    else {
                      *puVar16 = uVar53;
                      *(undefined *)(puVar16 + 1) = uVar17;
                      puVar54 = puVar54 + 7;
                    }
                  }
                  goto LAB_800217c4;
                }
                uVar26 = puVar33[-3];
                in_t6 = (uint *)(iVar29 * 2);
                iVar29 = (((uint)uVar4 + (uint)(uVar4 >> 1)) - iVar11) + (uint)*puVar15 +
                         (uint)(*puVar15 >> 1) + (uint)*puVar22;
                if (iVar29 < 0) goto LAB_800217c4;
                uVar52 = puVar33[-2];
                iVar29 = (iVar29 >> (uVar59 & 0x1f)) + (int)in_t6;
                if (iVar29 < 0) goto LAB_800217c4;
                piVar58 = piVar49 + iVar29 * 2;
                puVar16 = (undefined2 *)*piVar58;
                in_t0 = (uint *)puVar33[-1];
                puVar54[7] = uVar39;
                puVar54[4] = uVar50;
                puVar54[1] = uVar43 + 0x34000000 + ((uint)unaff_s0 & 1) * 0x2000000;
                puVar54[3] = uVar26 + iVar7;
                if (unaff_s1 != 0) {
                  *(short *)(puVar54 + 3) = (short)((uint)in_t0 >> 0x10);
                }
                *puVar54 = 0x9000000;
                puVar54[6] = uVar52;
                puVar54[9] = in_t0;
                in_t6 = (uint *)0x34000000;
              }
              else {
                if ((int)puVar31 >> 0x18 == 0) {
                  iVar13 = *(int *)(&DAT_800705f8 + uVar26);
                  gte_ldsv_((int)(short)(&DAT_800705f6)[uVar52] -
                            (int)(short)(&DAT_800705f6)[uVar26],
                            *(int *)(&DAT_800705f8 + uVar52) * 0x10000 + iVar13 * -0x10000 >> 0x10,
                            (*(int *)(&DAT_800705f8 + uVar52) >> 0x10) - (iVar13 >> 0x10));
                  gte_ldR11R12((int)(short)(&DAT_800705f6)[uVar60] -
                               (int)(short)(&DAT_800705f6)[uVar26]);
                  gte_ldR22R23(*(int *)(&DAT_800705f8 + uVar60) * 0x10000 + iVar13 * -0x10000 >>
                               0x10);
                  gte_ldR33((*(int *)(&DAT_800705f8 + uVar60) >> 0x10) - (iVar13 >> 0x10));
                  uVar44 = gte_stRBK();
                  uVar32 = gte_stGBK();
                  gte_op0_b(0);
                  iVar13 = gte_stMAC1();
                  iVar34 = gte_stMAC3();
                  iVar37 = gte_stMAC2();
                  iVar13 = iVar13 >> 4;
                  iVar34 = iVar34 >> 4;
                  iVar37 = iVar37 >> 4;
                  gte_ldsv_(iVar13,iVar34,iVar37);
                  gte_sqr0(0);
                  gte_ldbkdir((uint)puVar31 >> 6 & 0xff0,(uint)puVar31 & 0xff0,
                              ((uint)puVar31 & 0x3f) << 6);
                  gte_ldsv_(iVar13,iVar34,iVar37);
                  read_mt(iVar13,iVar34,iVar37);
                  uVar50 = iVar13 + iVar34 + iVar37;
                  gte_ldLZCS(uVar50);
                  if (uVar50 != 0) {
                    uVar52 = gte_stLZCR();
                    uVar60 = (uVar52 & 0xfffffffe) - 0x18;
                    iVar13 = uVar50 << (uVar60 & 0x1f);
                    if ((int)uVar60 < 0) {
                      iVar13 = (int)uVar50 >> (-uVar60 & 0x1f);
                    }
                    uVar50 = (uint)((int)SquareRootShapeScaledArray[iVar13 + -0x40] <<
                                   ((int)(0x1f - (uVar52 & 0xfffffffe)) >> 1 & 0x1fU)) >> 0xc;
                  }
                  iVar13 = (int)(((uint)puVar31 >> 0x12) << 0xe) / (int)uVar50;
                  uVar50 = DAT_800770d4 & 0xffff;
                  uVar52 = DAT_800770d8 & 0xffff;
                  uVar60 = DAT_800770dc & 0xffff;
                  gte_ldLR1LR2(uVar52 * 0x10000 + uVar50);
                  gte_ldLR3LG1(uVar50 * 0x10000 + uVar60);
                  gte_ldLG2LG3(uVar60 * 0x10000 + uVar52);
                  in_t0 = (uint *)(uVar52 * 0x10000 + uVar50);
                  gte_ldLB1LB2(in_t0);
                  gte_ldLB3(uVar60);
                  gte_ldRGB(0xffffff);
                  gte_ldIR0(iVar13);
                  gte_gpf0(0);
                  read_mt(iVar13,uVar52,uVar60);
                  gte_ldsv_(iVar13 >> 8,(int)uVar52 >> 8,(int)uVar60 >> 8);
                  gte_cc();
                  uVar43 = gte_stRGB2();
                  gte_ldRBK(uVar44);
                  gte_ldGBK(uVar32);
                  uVar50 = uVar43;
                  uVar39 = uVar43;
                  goto LAB_80021c14;
                }
                uVar40 = (uint)puVar31 >> 0x10 & 0xff;
                if (uVar40 == 0) {
                  puVar54[4] = uVar50;
                  puVar54[7] = uVar39;
                  uVar50 = 0x34000000;
                  puVar54[1] = uVar43 + 0x34000000;
                }
                else {
                  iVar13 = (*puVar35 & 0xff) + uVar40;
                  if (-1 < iVar13 + -0x100) {
                    iVar13 = 0xff;
                  }
                  *(char *)(puVar54 + 1) = (char)iVar13;
                  iVar13 = (uVar50 & 0xff) + uVar40;
                  if (-1 < iVar13 + -0x100) {
                    iVar13 = 0xff;
                  }
                  *(char *)(puVar54 + 4) = (char)iVar13;
                  iVar13 = (uVar39 & 0xff) + uVar40;
                  if (-1 < iVar13 + -0x100) {
                    iVar13 = 0xff;
                  }
                  *(char *)(puVar54 + 7) = (char)iVar13;
                  iVar13 = (uVar43 >> 8 & 0xff) - uVar40;
                  *(char *)((int)puVar54 + 5) = (char)iVar13;
                  if (iVar13 < 0) {
                    *(undefined *)((int)puVar54 + 5) = 0;
                  }
                  iVar13 = (uVar50 >> 8 & 0xff) - uVar40;
                  *(char *)((int)puVar54 + 0x11) = (char)iVar13;
                  if (iVar13 < 0) {
                    *(undefined *)((int)puVar54 + 0x11) = 0;
                  }
                  iVar13 = (uVar39 >> 8 & 0xff) - uVar40;
                  *(char *)((int)puVar54 + 0x1d) = (char)iVar13;
                  if (iVar13 < 0) {
                    *(undefined *)((int)puVar54 + 0x1d) = 0;
                  }
                  iVar13 = (uVar43 >> 0x10) - uVar40;
                  *(char *)((int)puVar54 + 6) = (char)iVar13;
                  if (iVar13 < 0) {
                    *(undefined *)((int)puVar54 + 6) = 0;
                  }
                  iVar13 = (uVar50 >> 0x10 & 0xff) - uVar40;
                  *(char *)((int)puVar54 + 0x12) = (char)iVar13;
                  if (iVar13 < 0) {
                    *(undefined *)((int)puVar54 + 0x12) = 0;
                  }
                  iVar13 = (uVar39 >> 0x10 & 0xff) - uVar40;
                  *(char *)((int)puVar54 + 0x1e) = (char)iVar13;
                  if (iVar13 < 0) {
                    *(undefined *)((int)puVar54 + 0x1e) = 0;
                  }
                  *(undefined *)((int)puVar54 + 7) = 0x34;
                }
                uVar44 = DAT_800756f4;
                iVar13 = (int)(short)(&DAT_800705f6)[uVar26];
                iVar34 = *(int *)(&DAT_800705f8 + uVar26);
                iVar37 = iVar34 >> 0x10;
                if (iVar13 != 0x4000) {
                  UNRECOVERED_JUMPTABLE_00 = (code *)&LAB_80022110;
                  iVar29 = (int)(short)iVar34;
LAB_800222c0:
                  iVar7 = gte_stTRX();
                  iVar11 = gte_stTRY();
                  iVar34 = gte_stTRZ();
                  gte_ldsv_(iVar13 - iVar7,iVar29 - iVar11,iVar37 - iVar34);
                  gte_mvmva(0,1,3,3,0);
                  gte_ldsv_(iVar13 - iVar7,iVar29 - iVar11,iVar37 - iVar34);
                  read_mt(iVar11,iVar34,uVar50);
                  gte_sqr0_b(0);
                  iVar29 = iVar11;
                  if (iVar11 < 0) {
                    iVar29 = -iVar11;
                  }
                  iVar13 = iVar34;
                  if (iVar34 < 0) {
                    iVar13 = -iVar34;
                  }
                  iVar37 = iVar29;
                  if (0 < iVar29 - iVar13) {
                    iVar37 = iVar13;
                    iVar13 = iVar29;
                  }
                  iVar37 = iVar37 * 0x40;
                  if (iVar13 == 0) {
                    iVar13 = 1;
                  }
                  read_mt(iVar37,iVar13,iVar29);
                  uVar48 = iVar37 + iVar13 + iVar29;
                  gte_ldLZCS(uVar48);
                  if (uVar48 != 0) {
                    uVar59 = gte_stLZCR();
                    uVar19 = (uVar59 & 0xfffffffe) - 0x18;
                    iVar29 = uVar48 << (uVar19 & 0x1f);
                    if ((int)uVar19 < 0) {
                      iVar29 = (int)uVar48 >> (-uVar19 & 0x1f);
                    }
                    uVar48 = (uint)((int)SquareRootShapeScaledArray[iVar29 + -0x40] <<
                                   ((int)(0x1f - (uVar59 & 0xfffffffe)) >> 1 & 0x1fU)) >> 0xc;
                    iVar7 = iVar37 / iVar13;
                  }
                  if (iVar11 < 0) {
                    if (iVar34 < 0) {
                      bVar2 = false;
                      if (iVar34 - iVar11 < 0) {
                        bVar2 = true;
                        iVar29 = 0xc0;
                      }
                      else {
                        iVar29 = 0x80;
                      }
                    }
                    else {
                      bVar2 = true;
                      if (-iVar34 - iVar11 < 0) {
                        bVar2 = false;
                        iVar29 = 0x40;
                      }
                      else {
                        iVar29 = 0x80;
                      }
                    }
                  }
                  else if (iVar34 < 0) {
                    bVar2 = true;
                    if (iVar11 + iVar34 < 0) {
                      bVar2 = false;
                      iVar29 = 0xc0;
                    }
                    else {
                      iVar29 = 0;
                    }
                  }
                  else {
                    bVar2 = false;
                    if (iVar11 - iVar34 < 0) {
                      bVar2 = true;
                      iVar29 = 0x40;
                    }
                    else {
                      iVar29 = 0;
                    }
                  }
                  uVar59 = (uint)(byte)s__________________________________8006d82c[iVar7 + 0xdc];
                  if (bVar2) {
                    uVar59 = -uVar59;
                  }
                  iVar7 = (int)uVar50 / (int)uVar48 >> 5;
                  iVar11 = iVar7 + 0x80;
                  if (iVar11 < 0) {
                    iVar11 = 0;
                  }
                  if (-1 < iVar7 + -0x80) {
                    iVar11 = 0xff;
                  }
                  iVar13 = gte_stTRZ();
                  uVar48 = gte_stRBK();
                  iVar7 = (int)(char)(&DAT_8006d808)[iVar11];
                  uVar48 = ((uint)(iVar13 << (uVar48 >> 8 & 0x1f)) >> 6) + ((uint)puVar31 & 0x1ff) +
                           iVar29 + uVar59 & 0xff;
                  if ((int)puVar31 < 0) {
                    if (0 < iVar7 + -0x3f) {
                      iVar7 = 0x3f;
                    }
                    gte_ldIR0(iVar7);
                    gte_ldIR1((int)sineWaveArray[uVar48 + 0x40]);
                    gte_ldIR2((int)sineWaveArray[uVar48]);
                    gte_gpf0(0);
                    iVar29 = gte_stMAC1();
                    iVar7 = gte_stMAC2();
                    uVar59 = (iVar29 >> 0xc) + 0x40;
                    // WARNING: Could not recover jumptable at 0x80022564. Too many branches
                    // WARNING: Treating indirect jump as call
                    (*UNRECOVERED_JUMPTABLE_00)
                              (puVar22,uVar59,((iVar7 >> 0xc) + 0x40) * 0x100 | uVar59,
                               (int)sineWaveArray[uVar48 + 0x40]);
                    return;
                  }
                    // WARNING: Could not recover jumptable at 0x80022500. Too many branches
                    // WARNING: Treating indirect jump as call
                  (*UNRECOVERED_JUMPTABLE_00)(puVar22,iVar11,iVar7 << 8 | uVar48 >> 1);
                  return;
                }
                gte_ldRFC(iVar34);
                iVar13 = (int)(short)(&DAT_800705f6)[uVar52];
                iVar34 = *(int *)(&DAT_800705f8 + uVar52);
                iVar37 = iVar34 >> 0x10;
                if (iVar13 != 0x4000) {
                  UNRECOVERED_JUMPTABLE_00 = (code *)&LAB_80022148;
                  iVar29 = (int)(short)iVar34;
                  goto LAB_800222c0;
                }
                gte_ldGFC(iVar34);
                iVar13 = (int)(short)(&DAT_800705f6)[uVar60];
                iVar34 = *(int *)(&DAT_800705f8 + uVar60);
                in_t0 = (uint *)0x4000;
                iVar37 = iVar34 >> 0x10;
                if (iVar13 != 0x4000) {
                  UNRECOVERED_JUMPTABLE_00 = (code *)&UNK_80022180;
                  iVar29 = (int)(short)iVar34;
                  goto LAB_800222c0;
                }
                gte_ldBFC(iVar34);
                uVar4 = (&DAT_800705f4)[uVar26];
                iVar13 = (((uint)uVar4 + (uint)(uVar4 >> 1)) - iVar11) + (uint)*puVar15 +
                         (uint)(*puVar15 >> 1) + (uint)*puVar22;
                in_t6 = puVar31;
                if ((iVar13 < 0) || (iVar29 = (iVar13 >> (uVar59 & 0x1f)) + iVar29 * 2, iVar29 < 0))
                goto LAB_800217c4;
                piVar58 = piVar49 + iVar29 * 2;
                puVar16 = (undefined2 *)*piVar58;
                uVar50 = gte_stRFC();
                sVar25 = (short)uVar50;
                uVar26 = gte_stGFC();
                sVar28 = (short)uVar26;
                uVar52 = gte_stBFC();
                sVar30 = (short)uVar52;
                if (-1 < (int)puVar31) {
                  uVar50 = (uVar50 & 0xff) - 0x40;
                  uVar26 = (uVar26 & 0xff) - 0x40;
                  uVar52 = (uVar52 & 0xff) - 0x40;
                  if ((((int)(uVar50 | uVar26 | uVar52) < 0) &&
                      (-1 < (int)(uVar50 & uVar26 & uVar52))) &&
                     ((-1 < (int)((uVar50 - uVar26) + -0x40) ||
                      (((((int)((uVar50 - uVar26) + 0x40) < 1 ||
                         (-1 < (int)((uVar50 - uVar52) + -0x40))) ||
                        ((int)((uVar50 - uVar52) + 0x40) < 1)) ||
                       ((-1 < (int)((uVar26 - uVar52) + -0x40) ||
                        ((int)((uVar26 - uVar52) + 0x40) < 1)))))))) {
                    sVar25 = sVar25 + (short)((int)uVar50 >> 0x1f) * -0x80;
                    sVar28 = sVar28 + (short)((int)uVar26 >> 0x1f) * -0x80;
                    sVar30 = sVar30 + (short)((int)uVar52 >> 0x1f) * -0x80;
                  }
                }
                in_t0 = (uint *)(DAT_800756f0 + iVar7);
                *puVar54 = 0x9000000;
                puVar54[3] = in_t0;
                puVar54[6] = uVar44;
                *(short *)(puVar54 + 3) = sVar25;
                *(short *)(puVar54 + 6) = sVar28;
                *(short *)(puVar54 + 9) = sVar30;
              }
              *piVar58 = (int)puVar54;
              if (puVar16 == (undefined2 *)0x0) {
                if (0 < (int)piVar51 - (int)piVar58) {
                  piVar51 = piVar58;
                }
                piVar58[1] = (int)puVar54;
                if ((int)piVar24 - (int)piVar58 < 0) {
                  piVar24 = piVar58;
                }
                puVar54 = puVar54 + 10;
              }
              else {
                *puVar16 = uVar53;
                *(undefined *)(puVar16 + 1) = uVar17;
                puVar54 = puVar54 + 10;
              }
              goto LAB_800217c4;
            }
            uVar46 = uVar19 & uVar43;
            uVar19 = (int)uVar19 >> 5;
            if ((uVar46 & (uint)in_t0 & uVar40 & 0x1f) == 0) {
              uVar43 = (int)uVar43 >> 5;
              in_t0 = (uint *)((int)in_t0 >> 5);
              uVar40 = (int)uVar40 >> 5;
              goto LAB_80021844;
            }
LAB_80021ae0:
            in_t7 = (float)(uVar50 & 2);
            puVar33 = puVar20 + 3;
            if (in_t7 != 0.0) {
              puVar33 = puVar20 + 6;
            }
            uVar19 = *puVar33;
          }
          else {
            uVar50 = *(uint *)(uVar26 + 0x1f800000);
            uVar19 = uVar50 & 0x1f;
            if ((uVar48 == 0) || (uVar50 = (int)uVar50 >> 5, uVar19 == 0)) {
              gte_ldDQA(0x100);
              gte_ldDQB(0);
              gte_ldR31R32(0);
              gte_ldR33(0);
              gte_ldTRZ((uint)(ushort)(&DAT_800705f4)[uVar26]);
              gte_rtps_b();
              iVar29 = (int)in_t6 + ((uint)(ushort)(&DAT_800705f4)[uVar26] * 4 - iVar11);
              uVar19 = puVar20[5];
              puVar33 = puVar20 + 5;
              if (0 < iVar29) {
                piVar58 = piVar49 + (iVar29 >> (uVar59 & 0x1f)) * 2;
                uVar26 = gte_stMAC0();
                gte_ldIR1((uint)unaff_s0 >> 10 & 0x1ff);
                gte_ldIR2((uint)unaff_s0 >> 1 & 0x1ff);
                gte_ldIR0(uVar26 >> 0xc);
                gte_gpf0_b(0);
                uVar26 = gte_stMAC1();
                uVar52 = gte_stMAC2();
                in_t0 = (uint *)puVar20[2];
                uVar60 = puVar20[3];
                uVar39 = puVar20[4];
                sVar25 = (short)uVar50 + (short)(uVar26 >> 0xc);
                sVar30 = sVar25 - (short)(uVar26 >> 0xb);
                puVar54[1] = (*(uint *)(((uint)unaff_s0 >> 0x11 & 0x7fc) + (int)puVar9) & 0xffffff)
                             + 0x2c000000 + ((uint)unaff_s0 & 1) * 0x2000000;
                puVar54[3] = in_t0;
                puVar54[5] = uVar60;
                puVar54[7] = uVar39;
                puVar54[9] = uVar39 >> 0x10;
                sVar28 = (short)(uVar50 >> 0x10) + (short)(uVar52 >> 0xc);
                sVar18 = sVar28 - (short)(uVar52 >> 0xb);
                *(short *)(puVar54 + 2) = sVar30;
                *(short *)((int)puVar54 + 10) = sVar18;
                *(short *)(puVar54 + 4) = sVar25;
                *(short *)((int)puVar54 + 0x12) = sVar18;
                *(short *)(puVar54 + 6) = sVar30;
                *(short *)((int)puVar54 + 0x1a) = sVar28;
                *(short *)(puVar54 + 8) = sVar25;
                *(short *)((int)puVar54 + 0x22) = sVar28;
                *puVar54 = 0x9000000;
                puVar16 = (undefined2 *)*piVar58;
                *piVar58 = (int)puVar54;
                if (puVar16 == (undefined2 *)0x0) {
                  if (0 < (int)piVar51 - (int)piVar58) {
                    piVar51 = piVar58;
                  }
                  piVar58[1] = (int)puVar54;
                  if ((int)piVar24 - (int)piVar58 < 0) {
                    piVar24 = piVar58;
                  }
                  puVar54 = puVar54 + 10;
                }
                else {
                  *puVar16 = uVar53;
                  *(undefined *)(puVar16 + 1) = uVar17;
                  puVar54 = puVar54 + 10;
                }
              }
            }
            else {
              uVar19 = puVar20[5];
              puVar33 = puVar20 + 5;
            }
          }
          goto LAB_800217c4;
        }
        if (puVar38 != puVar20) {
          uVar26 = uVar50 >> 0x14 & 0x7fc;
          uVar52 = uVar50 >> 0xb & 0x7fc;
          uVar60 = uVar50 >> 2 & 0x7fc;
          uVar19 = *(uint *)(uVar26 + 0x1f800000);
          uVar39 = *(uint *)(uVar52 + 0x1f800000);
          in_t0 = *(uint **)(uVar60 + 0x1f800000);
          if (uVar48 == 0) {
LAB_80021b4c:
            gte_ldSXY0(uVar19);
            gte_ldSXY1(uVar39);
            gte_ldSXY2(in_t0);
            in_t7 = (float)(uVar50 & 2);
            gte_nclip_b();
            uVar40 = uVar50 & 4;
            puVar54[2] = uVar19;
            if (in_t7 == 0.0) {
              puVar54[4] = uVar39;
              puVar54[6] = in_t0;
            }
            else {
              puVar20 = puVar20 + 3;
              puVar54[5] = uVar39;
              puVar54[8] = in_t0;
            }
            in_t6 = (uint *)(uVar50 & 1);
            if ((uVar50 & 8) == 0) {
              unaff_s1 = 0;
              if (in_t6 == (uint *)0x0) {
                in_t6 = (uint *)gte_stMAC0();
                uVar19 = puVar20[2];
                puVar33 = puVar20 + 2;
                if ((int)in_t6 < 1) goto LAB_800217c4;
              }
              else {
                in_t6 = (uint *)gte_stMAC0();
                uVar19 = puVar20[2];
                puVar33 = puVar20 + 2;
                if (in_t6 == (uint *)0x0) goto LAB_800217c4;
              }
              puVar33 = puVar20 + 2;
              puVar35 = (uint *)(((uint)unaff_s0 >> 0x11 & 0x7fc) + (int)puVar9);
              uVar43 = (uint)unaff_s0 >> 8 & 0x7fc;
              goto LAB_80021bd4;
            }
          }
          else {
            uVar43 = uVar19 & uVar39;
            uVar19 = (int)uVar19 >> 5;
            if ((uVar43 & (uint)in_t0 & 0x1f) == 0) {
              uVar39 = (int)uVar39 >> 5;
              in_t0 = (uint *)((int)in_t0 >> 5);
              goto LAB_80021b4c;
            }
            if ((uVar50 & 2) != 0) {
              puVar20 = puVar20 + 3;
            }
          }
          in_t7 = (float)(uVar50 & 2);
          uVar19 = puVar20[2];
          puVar33 = puVar20 + 2;
          goto LAB_800217c4;
        }
LAB_8002287c:
        if (-1 < (int)piVar24 - (int)piVar51) {
          iVar29 = gte_stGBK();
          uVar48 = gte_stRBK();
          uVar48 = (uVar48 >> 8) + (uVar48 & 0xff);
          uVar59 = (int)&DAT_800704f4 - (int)piVar24 << (uVar48 & 0x1f);
          if ((int)&DAT_800704f4 - (int)piVar24 < 0) {
            uVar59 = 0;
          }
          iVar29 = iVar29 * 8 + (0x20 << (uVar48 & 0x1f)) + -8 + (uVar59 >> 8) * -8;
          if (iVar29 < 0) {
            iVar29 = 0;
          }
          piVar51 = piVar51 + -2;
          piVar49 = (int *)(iVar29 + (int)ptr_maybe_graphicsArray2);
LAB_80022904:
          piVar10 = piVar49;
          puVar16 = (undefined2 *)*piVar10;
          piVar49 = (int *)((int)piVar24 - (0x100U >> (uVar48 & 0x1f)));
          if (0 < (int)piVar51 - (int)piVar49) {
            piVar49 = piVar51;
          }
          if (puVar16 == (undefined2 *)0x0) {
            do {
              piVar23 = piVar24;
              in_t0 = (uint *)piVar23[1];
              piVar24 = piVar23;
              puVar36 = puVar16;
              if (piVar23 == piVar49) goto LAB_80022978;
              piVar24 = piVar23 + -2;
            } while (in_t0 == (uint *)0x0);
            puVar16 = (undefined2 *)*piVar23;
            piVar10[1] = (int)in_t0;
            piVar23[1] = 0;
            *piVar23 = 0;
          }
          do {
            do {
              piVar23 = piVar24;
              in_t0 = (uint *)piVar23[1];
              piVar24 = piVar23;
              puVar36 = puVar16;
              if (piVar23 == piVar49) goto LAB_80022978;
              piVar24 = piVar23 + -2;
            } while (in_t0 == (uint *)0x0);
            puVar36 = (undefined2 *)*piVar23;
            *puVar16 = (short)in_t0;
            *(char *)(puVar16 + 1) = (char)((uint)in_t0 >> 0x10);
            *piVar23 = 0;
            piVar23[1] = 0;
            puVar16 = puVar36;
          } while (piVar24 != piVar49);
LAB_80022978:
          *piVar10 = (int)puVar36;
          if (piVar49 != piVar51) {
            piVar49 = piVar10 + -2;
            if (piVar10 == piVar58) {
              piVar49 = piVar10;
            }
            goto LAB_80022904;
          }
        }
      }
LAB_80022990:
      puVar31 = &DAT_800726f4;
      while( true ) {
        uVar48 = *puVar31;
        uVar59 = uVar48 & 0xff;
        if (uVar48 == 0) break;
        puVar33 = (uint *)(uVar48 >> 8 | 0x80000000);
        while( true ) {
          puVar31 = puVar31 + 1;
          bVar2 = uVar59 == 0;
          uVar59 = uVar59 - 1;
          if (bVar2) break;
          *puVar33 = *puVar31;
          puVar33 = puVar33 + 1;
        }
      }
    }
    else {
      gte_ldIR0(uVar48 & 0xff);
      gte_ldsv_(iVar7,iVar11,iVar13);
      gte_gpf0(0);
      iVar13 = gte_stMAC3();
      iVar11 = gte_stMAC2();
      iVar7 = gte_stMAC1();
      iVar13 = iVar13 >> 5;
      iVar11 = iVar11 >> 5;
      iVar7 = iVar7 >> 5;
      if (iVar13 + -63000 < 1) goto LAB_8002104c;
    }
    puVar55 = puVar55 + 0xe;
  } while( true );
}



// WARNING: Instruction at (ram,0x80023990) overlaps instruction at (ram,0x8002398c)
// 

void DrawShadedMobys(void)

{
  char cVar1;
  char cVar2;
  char cVar3;
  char cVar4;
  uint uVar5;
  float fVar6;
  int iVar7;
  uint uVar8;
  float fVar9;
  int iVar10;
  float fVar11;
  undefined2 *puVar12;
  undefined uVar13;
  int iVar14;
  uint uVar15;
  uint *puVar16;
  undefined4 uVar17;
  uint *puVar18;
  int iVar19;
  uint uVar20;
  int iVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  uint uVar25;
  uint uVar26;
  uint uVar27;
  int *piVar28;
  undefined4 uVar29;
  undefined4 uVar30;
  int iVar31;
  uint uVar32;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  int *piVar33;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  float *pfVar34;
  float *pfVar35;
  char *pcVar36;
  undefined4 unaff_s4;
  uint uVar37;
  float *pfVar38;
  undefined4 *puVar39;
  uint *puVar40;
  undefined4 unaff_s5;
  int *piVar41;
  uint *puVar42;
  undefined4 unaff_s6;
  char *pcVar43;
  undefined4 unaff_s7;
  uint uVar44;
  int iVar45;
  undefined2 uVar46;
  undefined4 *puVar47;
  undefined4 unaff_s8;
  int iVar48;
  undefined4 unaff_retaddr;
  int *piVar49;
  undefined auStackX_0 [16];
  
  DAT_80077df8 = &DAT_80075264;
  piVar49 = &ptr_maybeTextObj;
  DAT_1f8003e0 = cameraPosition.x;
  DAT_1f8003e4 = cameraPosition.y;
  DAT_1f8003e8 = cameraPosition.z;
  DAT_1f8003ec = gCamera1.R12R11;
  DAT_1f8003f0 = gCamera1.R21R13;
  DAT_1f8003f4 = gCamera1.R23R22;
  DAT_1f8003f8 = gCamera1.R32R31;
  DAT_1f8003fc = gCamera1.R33;
  iVar21 = DAT_800770cc * 0x10000 + DAT_800770c8;
  gte_ldLR1LR2(iVar21);
  gte_ldLB1LB2(iVar21);
  gte_ldLR3LG1(DAT_800770c8 * 0x10000 + DAT_800770d0);
  gte_ldLG2LG3(DAT_800770d0 * 0x10000 + DAT_800770cc);
  gte_ldLB3(DAT_800770d0);
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
LAB_80022b08:
  iVar10 = DAT_1f8003e8;
  iVar7 = DAT_1f8003e4;
  iVar21 = DAT_1f8003e0;
  iVar48 = *piVar49;
  piVar49 = piVar49 + 1;
  if (iVar48 == 0) {
    return;
  }
  *(undefined *)(iVar48 + 0x51) = 0;
  uVar15 = DAT_1f8003fc;
  uVar26 = DAT_1f8003f8;
  uVar24 = DAT_1f8003f4;
  uVar8 = DAT_1f8003f0;
  uVar22 = DAT_1f8003ec;
  iVar14 = (uint)*(ushort *)(iVar48 + 0x50) << 0x18;
  if (-1 < iVar14) goto code_r0x80022b40;
  gte_ldOFX(*(int *)(iVar48 + 0xc) << 0x10);
  gte_ldOFY(*(int *)(iVar48 + 0x10) << 0x10);
  iVar21 = 0;
  iVar7 = 0;
  iVar10 = *(int *)(iVar48 + 0x14) >> 1;
  iVar14 = *(int *)(iVar48 + 0x14) >> 7;
  uVar44 = 0;
  uVar37 = *(uint *)(iVar48 + 0x44);
  pcVar43 = (char *)(&DAT_80076378)[*(ushort *)(iVar48 + 0x36)];
  uVar22 = 0x1000;
  uVar8 = 0;
  uVar24 = 0xa00;
  uVar26 = 0;
  uVar15 = 0x1000;
  gte_ldR11R12(0x1000);
  gte_ldR13R21(0);
  gte_ldR22R23(0xa00);
  gte_ldR31R32(0);
  gte_ldR33(0x1000);
  uVar17 = 1;
  goto LAB_80022d90;
code_r0x80022b40:
  iVar14 = (iVar14 >> 0x10) + (*(ushort *)(iVar48 + 0x50) & 0x100) * 2;
  iVar21 = *(int *)(iVar48 + 0xc) - iVar21 >> 2;
  if ((0 < iVar21 + iVar14) && (iVar21 - iVar14 < 0)) {
    iVar7 = iVar7 - *(int *)(iVar48 + 0x10) >> 2;
    if ((0 < iVar7 + iVar14) && (iVar7 - iVar14 < 0)) {
      iVar10 = iVar10 - *(int *)(iVar48 + 0x14) >> 2;
      if ((0 < iVar10 + iVar14) && (iVar10 - iVar14 < 0)) {
        gte_ldR11R12(DAT_1f8003ec);
        gte_ldR13R21(DAT_1f8003f0);
        gte_ldR22R23(DAT_1f8003f4);
        gte_ldR31R32(DAT_1f8003f8);
        gte_ldR33(DAT_1f8003fc);
        gte_ldIR3(iVar21);
        gte_ldIR1(iVar7);
        gte_ldIR2(iVar10);
        gte_rtir_b();
        iVar10 = gte_stMAC3();
        iVar7 = gte_stMAC2();
        iVar21 = gte_stMAC1();
        if ((iVar10 - iVar14 < 0) && (0 < iVar10 + 0x80)) {
          iVar14 = iVar21;
          if (iVar21 < 0) {
            iVar14 = -iVar21;
          }
          if ((iVar14 + -0x66) * 4 + (iVar10 + 0x4d) * -3 < 0) {
            pcVar43 = (char *)(&DAT_80076378)[*(ushort *)(iVar48 + 0x36)];
            piVar41 = DAT_80075f00;
            if ((*(int *)(iVar48 + 0x1c) < 0) && (*DAT_80075f00 = iVar48, iVar10 + -0x1100 < 0)) {
              piVar41 = DAT_80075f00 + 2;
              DAT_80075f00[1] = (int)pcVar43[2];
            }
            iVar14 = iVar7;
            if (iVar7 < 0) {
              iVar14 = -iVar7;
            }
            uVar44 = 0x80000000;
            DAT_80075f00 = piVar41;
            if (0 < iVar10 + 0x28 + (iVar14 + -0x79) * -3) {
              uVar37 = *(uint *)(iVar48 + 0x44);
              iVar14 = iVar21;
              if (iVar21 < 0) {
                iVar14 = -iVar21;
              }
              if ((iVar14 + 0x66) * 4 + (iVar10 + -0x4d) * -3 < 0) {
                iVar14 = iVar7;
                if (iVar7 < 0) {
                  iVar14 = -iVar7;
                }
                if (0 < iVar10 + -0x28 + (iVar14 + 0x79) * -3) {
                  uVar44 = 0;
                }
              }
              iVar21 = iVar21 << 1;
              iVar7 = iVar7 << 1;
              iVar10 = iVar10 << 1;
              iVar14 = iVar10 >> 6;
              uVar17 = 0;
              if (*(byte *)(iVar48 + 0x57) != 0) {
                gte_ldIR0((uint)*(byte *)(iVar48 + 0x57));
                gte_ldsv_(iVar21,iVar7,iVar10);
                gte_gpf0(0);
                iVar10 = gte_stMAC3();
                iVar7 = gte_stMAC2();
                iVar21 = gte_stMAC1();
                iVar10 = iVar10 >> 5;
                iVar7 = iVar7 >> 5;
                iVar21 = iVar21 >> 5;
              }
LAB_80022d90:
              gte_ldDQA(uVar17);
              *(undefined *)(iVar48 + 0x51) = 1;
              iVar14 = iVar14 - ((int)uVar37 >> 0x18);
              if (iVar14 < 0) {
                iVar14 = 0;
              }
              iVar45 = (iVar10 + -0x100) * 4;
              if (iVar10 + -0x100 < 0) {
                iVar45 = 0;
              }
              gte_ldtr(iVar21,iVar7,iVar10);
              uVar5 = uVar37 >> 0xf & 0x1fe;
              if (uVar5 != 0) {
                uVar8 = (uint)*(ushort *)((int)sineWaveArray + uVar5 + 0x80);
                gte_ldVXY0(uVar8);
                gte_ldVZ0((uint)*(ushort *)((int)sineWaveArray + uVar5));
                gte_rtv0();
                uVar15 = gte_stIR1();
                iVar7 = gte_stIR2();
                uVar20 = gte_stIR3();
                gte_ldVXY0(-(uint)*(ushort *)((int)sineWaveArray + uVar5) & 0xffff);
                gte_ldVZ0(uVar8);
                gte_rtv0_b();
                uVar22 = (uVar22 & 0xffff0000) + (uVar15 & 0xffff);
                uVar26 = (uVar26 & 0xffff0000) + (uVar20 & 0xffff);
                uVar8 = gte_stIR1();
                iVar21 = gte_stIR2();
                uVar15 = gte_stIR3();
                uVar8 = (uVar8 & 0xffff) + iVar7 * 0x10000;
                uVar24 = (uVar24 & 0xffff) + iVar21 * 0x10000;
                uVar15 = uVar15 & 0xffff;
                gte_ldR11R12(uVar22);
                gte_ldR13R21(uVar8);
                gte_ldR22R23(uVar24);
                gte_ldR31R32(uVar26);
                gte_ldR33(uVar15);
              }
              uVar5 = (uVar37 & 0xff00) >> 7;
              if ((uVar37 & 0xff00) != 0) {
                uVar15 = (uint)*(ushort *)((int)sineWaveArray + uVar5 + 0x80);
                uVar24 = (uint)*(ushort *)((int)sineWaveArray + uVar5);
                gte_ldVXY0(uVar15 << 0x10);
                gte_ldVZ0(uVar24);
                gte_rtv0();
                iVar7 = gte_stIR1();
                uVar5 = gte_stIR2();
                iVar10 = gte_stIR3();
                gte_ldVXY0(uVar24 * -0x10000);
                gte_ldVZ0(uVar15);
                gte_rtv0_b();
                uVar24 = gte_stIR1();
                iVar21 = gte_stIR2();
                uVar15 = gte_stIR3();
                uVar8 = (uVar8 & 0xffff0000) + (uVar24 & 0xffff);
                uVar24 = iVar21 * 0x10000 + (uVar5 & 0xffff);
                uVar15 = uVar15 & 0xffff;
                gte_ldR11R12((uVar22 & 0xffff) + iVar7 * 0x10000);
                gte_ldR13R21(uVar8);
                gte_ldR22R23(uVar24);
                gte_ldR31R32((uVar26 & 0xffff) + iVar10 * 0x10000);
                gte_ldR33(uVar15);
              }
              uVar37 = uVar37 & 0xff;
              if (uVar37 != 0) {
                gte_ldVZ0(0);
                gte_ldVXY0((uint)(ushort)sineWaveArray[uVar37] * 0x10000 +
                           (uint)(ushort)sineWaveArray[uVar37 + 0x40]);
                gte_rtv0();
                uVar26 = gte_stIR1();
                iVar10 = gte_stIR2();
                uVar5 = gte_stIR3();
                gte_ldVXY0((-(uint)(ushort)sineWaveArray[uVar37] & 0xffff) +
                           (uint)(ushort)sineWaveArray[uVar37 + 0x40] * 0x10000);
                gte_ldVZ0(0);
                gte_rtv0_b();
                iVar21 = gte_stIR1();
                uVar22 = gte_stIR2();
                iVar7 = gte_stIR3();
                gte_ldR11R12(iVar21 * 0x10000 + (uVar26 & 0xffff));
                gte_ldR13R21((uVar8 & 0xffff) + iVar10 * 0x10000);
                gte_ldR22R23((uVar24 & 0xffff0000) + (uVar22 & 0xffff));
                gte_ldR31R32(iVar7 * 0x10000 + (uVar5 & 0xffff));
                gte_ldR33(uVar15);
              }
              piVar41 = *(int **)(pcVar43 + 4);
              uVar22 = 0xffffffff;
              iVar21 = *piVar41;
              uVar8 = (int)piVar41 + 3;
              fVar11 = (float)(((iVar21 << 8) >> 0x17) * 0x10000);
              gte_ldVXY0(((iVar21 << 0x10) >> 0x17) + (int)fVar11);
              gte_ldVZ0((iVar21 << 0x18) >> 0x17);
              pfVar38 = (float *)(*pcVar43 * 4 + 0x1f800000);
              pfVar34 = &FLOAT_1f800000;
              do {
                while( true ) {
                  gte_rtps_b();
                  uVar26 = uVar8 & 3;
                  uVar24 = uVar8 + 3 & 3;
                  uVar24 = *(int *)((uVar8 + 3) - uVar24) << (3 - uVar24) * 8 |
                           ((uint)fVar11 & -1 << (4 - uVar26) * 8 |
                           *(uint *)(uVar8 - uVar26) >> uVar26 * 8) &
                           0xffffffffU >> (uVar24 + 1) * 8;
                  uVar8 = uVar8 + 3;
                  fVar11 = (float)(((int)(uVar24 << 8) >> 0x17) * 0x10000);
                  gte_ldVXY0(((int)(uVar24 << 0x10) >> 0x17) + (int)fVar11);
                  gte_ldVZ0((int)(uVar24 << 0x18) >> 0x17);
                  fVar6 = (float)gte_stSXY2();
                  fVar9 = (float)gte_stSZ3();
                  pfVar35 = pfVar34 + 1;
                  if (uVar44 == 0) break;
                  fVar11 = (float)((int)fVar6 << 5);
                  if ((int)((int)fVar6 - 0x10000U) < 1) {
                    fVar11 = (float)((uint)fVar11 | 1);
                  }
                  if (-1 < (int)((int)fVar6 - 0x1000000U)) {
                    fVar11 = (float)((uint)fVar11 | 2);
                  }
                  if ((int)fVar6 * 0x10000 < 1) {
                    fVar11 = (float)((uint)fVar11 | 4);
                  }
                  pfVar34[0x80] = fVar9;
                  if (-1 < (int)fVar6 * 0x10000 + -0x2000000) {
                    fVar11 = (float)((uint)fVar11 | 8);
                  }
                  uVar22 = uVar22 & (uint)fVar11;
                  *pfVar34 = fVar11;
                  pfVar34 = pfVar35;
                  if (pfVar35 == pfVar38) {
                    if ((uVar22 & 0xf) != 0) goto LAB_80022b08;
                    goto LAB_800230ec;
                  }
                }
                *pfVar34 = fVar6;
                pfVar34[0x80] = fVar9;
                pfVar34 = pfVar35;
              } while (pfVar35 != pfVar38);
LAB_800230ec:
              puVar39 = *(undefined4 **)(pcVar43 + 8);
              if (pcVar43 + 0x10 != (char *)((uint)piVar41 & 0x7fffffff)) {
                cVar1 = *pcVar43;
                uVar22 = *(uint *)(&DAT_8006e3d8 + (*(int *)(iVar48 + 0x4c) >> 0x16));
                cVar2 = pcVar43[0x10];
                cVar3 = pcVar43[0x11];
                cVar4 = pcVar43[0x12];
                pcVar36 = pcVar43 + 0x13;
                puVar42 = &DAT_800726f4;
                do {
                  gte_ldIR3((int)cVar2);
                  gte_ldIR1((int)cVar3);
                  gte_ldIR2((int)cVar4);
                  gte_rtir_b();
                  cVar2 = *pcVar36;
                  gte_ldIR0(uVar22 >> 0x17 & 0x1e);
                  gte_gpf0_b(0);
                  gte_ldRGB(0xffffff);
                  gte_ldbkdir((uVar22 & 0xff) << 4,uVar22 >> 4 & 0xff0,uVar22 >> 0xc & 0xff0);
                  gte_cc();
                  cVar3 = pcVar36[1];
                  cVar4 = pcVar36[2];
                  uVar24 = gte_stRGB2();
                  pcVar36 = pcVar36 + 3;
                  puVar40 = puVar42 + 1;
                  uVar8 = uVar22 & 0xffffff;
                  if ((-1 < (int)(uVar24 - (uVar22 & 0xffffff))) &&
                     (uVar8 = uVar24, uVar22 >> 0x1c != 0)) {
                    iVar7 = gte_stIR1();
                    iVar21 = gte_stRBK();
                    iVar21 = (iVar7 + (uVar22 >> 0x1c) * -0x80) - iVar21;
                    iVar7 = iVar21 * 2;
                    if (0 < iVar21) {
                      iVar21 = gte_stIR1();
                      iVar10 = gte_stIR2();
                      iVar19 = gte_stIR3();
                      uVar8 = (uint)(iVar21 + iVar7) >> 4;
                      if (-1 < (int)((iVar21 + iVar7) - 0x1000U)) {
                        uVar8 = 0xff;
                      }
                      uVar24 = (uint)(iVar10 + iVar7) >> 4;
                      if (-1 < (int)((iVar10 + iVar7) - 0x1000U)) {
                        uVar24 = 0xff;
                      }
                      uVar26 = (uint)(iVar19 + iVar7) >> 4;
                      if (-1 < (int)((iVar19 + iVar7) - 0x1000U)) {
                        uVar26 = 0xff;
                      }
                      uVar8 = uVar8 + uVar24 * 0x100 + uVar26 * 0x10000;
                    }
                  }
                  *puVar42 = uVar8;
                  puVar42 = puVar40;
                } while (puVar40 != &DAT_800726f4 + cVar1);
                puVar39 = &DAT_800726f4;
              }
              iVar21 = *(int *)(iVar48 + 0x4c);
              puVar42 = *(uint **)(pcVar43 + 0xc);
              puVar40 = puVar42 + (uint)(byte)pcVar43[1] * 2;
              gte_ldDQB(iVar14);
              piVar33 = &DAT_8006fcf4;
              piVar41 = (int *)&DAT_800705f4;
              uVar22 = *puVar42;
              puVar47 = ptr_graphicsRelated;
LAB_800232a8:
              uVar8 = puVar42[1];
              uVar13 = (undefined)((uint)puVar47 >> 0x10);
              uVar46 = SUB42(puVar47,0);
              if (puVar42 != puVar40) {
                uVar24 = uVar22 >> 0x15 & 0x1fc;
                uVar26 = uVar22 >> 0xe & 0x1fc;
                uVar15 = uVar22 >> 7 & 0x1fc;
                puVar16 = (uint *)(uVar15 + 0x1f800000);
                uVar37 = uVar22 & 0x1fc;
                puVar18 = (uint *)(uVar37 + 0x1f800000);
                uVar5 = *(uint *)(uVar24 + 0x1f800000);
                uVar20 = *(uint *)(uVar26 + 0x1f800000);
                uVar23 = *puVar16;
                uVar25 = *puVar18;
                if ((int)uVar44 < 0) {
                  uVar27 = uVar5 & uVar20;
                  uVar5 = (int)uVar5 >> 5;
                  if ((uVar27 & uVar23 & uVar25 & 0xf) != 0) {
                    uVar22 = puVar42[2];
                    puVar42 = puVar42 + 2;
                    goto LAB_800232a8;
                  }
                  uVar20 = (int)uVar20 >> 5;
                  uVar23 = (int)uVar23 >> 5;
                  uVar25 = (int)uVar25 >> 5;
                }
                gte_ldSXY0(uVar5);
                gte_ldSXY1(uVar20);
                gte_ldSXY2(uVar23);
                uVar27 = uVar22 & 1;
                uVar32 = uVar22 & 2;
                gte_nclip_b();
                uVar22 = puVar42[2];
                puVar42 = puVar42 + 2;
                if (uVar27 != 0) {
                  if (uVar32 != 0) {
                    iVar10 = iVar21 >> 0x15;
                    iVar7 = gte_stTRZ();
                    uVar27 = gte_stMAC0();
                    if (iVar7 + -0x800 < 0) {
                      iVar7 = (uVar27 >> 0x1f) << 0x19;
                    }
                    else {
                      iVar7 = 0x2000000;
                      if ((int)uVar27 < 1) {
                        gte_ldSXY0(uVar25);
                        if (puVar16 == puVar18) goto LAB_800232a8;
                        gte_nclip_b();
                        uVar27 = gte_stMAC0();
                        if (-1 < (int)uVar27) goto LAB_800232a8;
                      }
                    }
                    puVar47[2] = uVar5;
                    puVar47[3] = uVar20;
                    puVar47[4] = uVar23;
                    puVar47[5] = uVar25;
                    gte_ldIR3((int)uVar8 >> 0x18);
                    gte_ldIR1((int)(uVar8 << 8) >> 0x18);
                    gte_ldIR2((int)(uVar8 << 0x10) >> 0x18);
                    gte_rtir_b();
                    uVar8 = *(uint *)(&DAT_8006e44c + iVar10);
                    uVar5 = *(uint *)(&DAT_8006e450 + iVar10);
                    iVar10 = (*(int *)((int)&DAT_1f800200 + uVar24) +
                             *(int *)((int)&DAT_1f800200 + uVar26)) - iVar45;
                    gte_mvmva_b(0,2,3,3,0);
                    uVar44 = uVar44 | 2;
                    iVar48 = gte_stMAC1();
                    gte_ldsv_((uVar5 & 0xff) << 4,uVar5 >> 4 & 0xff0,uVar5 >> 0xc & 0xff0);
                    iVar14 = iVar48 >> 8;
                    if ((int)uVar27 < 0) {
                      iVar14 = iVar48 >> 10;
                      uVar8 = uVar8 >> 1;
                      iVar10 = iVar10 + 0x200;
                    }
                    gte_ldIR0(iVar14);
                    gte_gpf0_b(0);
                    read_mt(uVar20,uVar23,uVar8);
                    uVar24 = (uVar8 & 0xff) * 0x10 + ((int)uVar20 >> 0xc);
                    uVar26 = (uVar8 >> 4 & 0xff0) + ((int)uVar23 >> 0xc);
                    uVar8 = (uVar8 >> 0xc & 0xff0) + ((int)uVar8 >> 0xc);
                    iVar48 = (iVar14 + -0x5c0) * 8;
                    if (0 < iVar14 + -0x5c0) {
                      uVar24 = uVar24 + iVar48;
                      uVar26 = uVar26 + iVar48;
                      uVar8 = uVar8 + iVar48;
                    }
                    iVar48 = uVar24 - 0xfff;
                    if ((int)uVar24 < 0) {
                      uVar24 = 0;
                    }
                    uVar24 = uVar24 >> 4;
                    if (-1 < iVar48) {
                      uVar24 = 0xff;
                    }
                    iVar48 = uVar26 - 0xfff;
                    if ((int)uVar26 < 0) {
                      uVar26 = 0;
                    }
                    uVar26 = uVar26 >> 4;
                    if (-1 < iVar48) {
                      uVar26 = 0xff;
                    }
                    iVar48 = uVar8 - 0xfff;
                    if ((int)uVar8 < 0) {
                      uVar8 = 0;
                    }
                    uVar8 = uVar8 >> 4;
                    if (-1 < iVar48) {
                      uVar8 = 0xff;
                    }
                    iVar48 = *(int *)((int)&DAT_1f800200 + uVar15);
                    if (puVar16 == puVar18) {
                      uVar17 = 0x4000000;
                      iVar14 = 0x22000000;
                      iVar19 = 0x14;
                    }
                    else {
                      uVar17 = 0x5000000;
                      iVar14 = 0x2a000000;
                      iVar19 = 0x18;
                    }
                    iVar31 = *(int *)((int)&DAT_1f800200 + uVar37);
                    *puVar47 = uVar17;
                    puVar47[1] = (iVar14 - iVar7) + uVar24 + uVar26 * 0x100 + uVar8 * 0x10000;
                    iVar31 = iVar10 + iVar48 + iVar31;
                    iVar7 = iVar31 >> 5;
                    if (0 < iVar31) {
                      piVar28 = &DAT_8006fcf4 + iVar7 * 2;
                      puVar12 = (undefined2 *)*piVar28;
                      *piVar28 = (int)puVar47;
                      if (puVar12 == (undefined2 *)0x0) {
                        if (0 < (int)piVar41 - (int)piVar28) {
                          piVar41 = piVar28;
                        }
                        (&DAT_8006fcf8)[iVar7 * 2] = puVar47;
                        if ((int)piVar33 - (int)piVar28 < 0) {
                          piVar33 = piVar28;
                        }
                        puVar47 = (undefined4 *)((int)puVar47 + iVar19);
                      }
                      else {
                        *puVar12 = uVar46;
                        *(undefined *)(puVar12 + 1) = uVar13;
                        puVar47 = (undefined4 *)((int)puVar47 + iVar19);
                      }
                    }
                    goto LAB_800232a8;
                  }
                  iVar7 = gte_stMAC0();
                  iVar10 = iVar21 >> 0x16;
                  if (iVar7 < 1) {
                    gte_ldSXY0(uVar25);
                    if (puVar16 == puVar18) goto LAB_800232a8;
                    gte_nclip_b();
                    iVar7 = gte_stMAC0();
                    if (-1 < iVar7) goto LAB_800232a8;
                  }
                  uVar27 = *(uint *)(&DAT_8006e3d8 + iVar10);
                  gte_ldIR3((int)uVar8 >> 0x18);
                  gte_ldIR1((int)(uVar8 << 8) >> 0x18);
                  gte_ldIR2((int)(uVar8 << 0x10) >> 0x18);
                  puVar47[2] = uVar5;
                  puVar47[3] = uVar20;
                  gte_rtir_b();
                  puVar47[4] = uVar23;
                  puVar47[5] = uVar25;
                  gte_ldIR0(uVar27 >> 0x17 & 0x1e);
                  gte_gpf0_b(0);
                  gte_ldbkdir((uVar27 & 0xff) << 4,uVar27 >> 4 & 0xff0,uVar27 >> 0xc & 0xff0);
                  gte_ldRGB(0xffffff);
                  gte_cc_b();
                  iVar7 = (*(int *)((int)&DAT_1f800200 + uVar24) +
                           *(int *)((int)&DAT_1f800200 + uVar26) +
                           *(int *)((int)&DAT_1f800200 + uVar15) +
                          *(int *)((int)&DAT_1f800200 + uVar37)) - iVar45;
                  iVar48 = iVar7 >> 5;
                  if (0 < iVar7) {
                    if (puVar16 == puVar18) {
                      uVar17 = 0x4000000;
                      uVar8 = 0x20000000;
                      iVar7 = 0x14;
                    }
                    else {
                      uVar17 = 0x5000000;
                      uVar8 = 0x28000000;
                      iVar7 = 0x18;
                    }
                    piVar28 = &DAT_8006fcf4 + iVar48 * 2;
                    if (iVar10 == 0) {
                      uVar8 = uVar8 + 0x2000000;
                      uVar44 = uVar44 | 1;
                    }
                    uVar24 = gte_stRGB2();
                    *puVar47 = uVar17;
                    if (uVar27 >> 0x1c != 0) {
                      iVar14 = gte_stIR1();
                      iVar10 = gte_stRBK();
                      iVar10 = (iVar14 + (uVar27 >> 0x1c) * -0x80) - iVar10;
                      iVar14 = iVar10 * 2;
                      if (0 < iVar10) {
                        iVar10 = gte_stIR1();
                        iVar19 = gte_stIR2();
                        iVar31 = gte_stIR3();
                        uVar24 = (uint)(iVar10 + iVar14) >> 4;
                        if (-1 < (int)((iVar10 + iVar14) - 0x1000U)) {
                          uVar24 = 0xff;
                        }
                        uVar26 = (uint)(iVar19 + iVar14) >> 4;
                        if (-1 < (int)((iVar19 + iVar14) - 0x1000U)) {
                          uVar26 = 0xff;
                        }
                        uVar15 = (uint)(iVar31 + iVar14) >> 4;
                        if (-1 < (int)((iVar31 + iVar14) - 0x1000U)) {
                          uVar15 = 0xff;
                        }
                        uVar24 = uVar24 + uVar26 * 0x100 + uVar15 * 0x10000;
                      }
                    }
                    puVar47[1] = uVar24 | uVar8;
                    puVar12 = (undefined2 *)*piVar28;
                    *piVar28 = (int)puVar47;
                    if (puVar12 == (undefined2 *)0x0) {
                      if (0 < (int)piVar41 - (int)piVar28) {
                        piVar41 = piVar28;
                      }
                      (&DAT_8006fcf8)[iVar48 * 2] = puVar47;
                      if ((int)piVar33 - (int)piVar28 < 0) {
                        piVar33 = piVar28;
                      }
                      puVar47 = (undefined4 *)((int)puVar47 + iVar7);
                    }
                    else {
                      *puVar12 = uVar46;
                      *(undefined *)(puVar12 + 1) = uVar13;
                      puVar47 = (undefined4 *)((int)puVar47 + iVar7);
                    }
                  }
                  goto LAB_800232a8;
                }
                uVar27 = uVar8 >> 0x15 & 0x1fc;
                if (puVar16 != puVar18) {
                  iVar7 = gte_stMAC0();
                  gte_ldSXY0(uVar25);
                  piVar28 = (int *)(uVar27 + (int)puVar39);
                  if (iVar7 < 1) {
                    gte_nclip_b();
                    iVar7 = *piVar28;
                    iVar10 = gte_stMAC0();
                    if (-1 < iVar10) goto LAB_800232a8;
                  }
                  else {
                    iVar7 = *piVar28;
                  }
                  uVar17 = *(undefined4 *)((uVar8 >> 0xe & 0x1fc) + (int)puVar39);
                  uVar29 = *(undefined4 *)((uVar8 >> 7 & 0x1fc) + (int)puVar39);
                  uVar30 = *(undefined4 *)((uVar8 & 0x1fc) + (int)puVar39);
                  iVar10 = *(int *)((int)&DAT_1f800200 + uVar24);
                  iVar48 = *(int *)((int)&DAT_1f800200 + uVar26);
                  iVar14 = *(int *)((int)&DAT_1f800200 + uVar15);
                  iVar19 = *(int *)((int)&DAT_1f800200 + uVar37);
                  puVar47[2] = uVar5;
                  puVar47[4] = uVar20;
                  puVar47[6] = uVar23;
                  puVar47[8] = uVar25;
                  iVar10 = (iVar10 + iVar48 + iVar14 + iVar19) - iVar45;
                  if (0 < iVar10) {
                    iVar10 = (iVar10 >> 5) + (uVar8 & 3);
                    puVar47[1] = iVar7 + 0x38000000;
                    puVar47[3] = uVar17;
                    puVar47[5] = uVar29;
                    puVar47[7] = uVar30;
                    *puVar47 = 0x8000000;
                    piVar28 = &DAT_8006fcf4 + iVar10 * 2;
                    puVar12 = (undefined2 *)*piVar28;
                    *piVar28 = (int)puVar47;
                    if (puVar12 == (undefined2 *)0x0) {
                      if (0 < (int)piVar41 - (int)piVar28) {
                        piVar41 = piVar28;
                      }
                      (&DAT_8006fcf8)[iVar10 * 2] = puVar47;
                      if ((int)piVar33 - (int)piVar28 < 0) {
                        piVar33 = piVar28;
                      }
                      puVar47 = puVar47 + 9;
                    }
                    else {
                      *puVar12 = uVar46;
                      *(undefined *)(puVar12 + 1) = uVar13;
                      puVar47 = puVar47 + 9;
                    }
                  }
                  goto LAB_800232a8;
                }
                iVar7 = gte_stMAC0();
                if (0 < iVar7) {
                  iVar14 = *(int *)(uVar27 + (int)puVar39);
                  uVar17 = *(undefined4 *)((uVar8 >> 0xe & 0x1fc) + (int)puVar39);
                  uVar29 = *(undefined4 *)((uVar8 >> 7 & 0x1fc) + (int)puVar39);
                  iVar7 = *(int *)((int)&DAT_1f800200 + uVar24);
                  iVar10 = *(int *)((int)&DAT_1f800200 + uVar26);
                  iVar48 = *(int *)((int)&DAT_1f800200 + uVar15);
                  puVar47[2] = uVar5;
                  puVar47[4] = uVar20;
                  puVar47[6] = uVar23;
                  iVar7 = (iVar7 + iVar10 + iVar48 * 2) - iVar45;
                  puVar47[1] = iVar14 + 0x30000000;
                  if (0 < iVar7) {
                    puVar47[3] = uVar17;
                    puVar47[5] = uVar29;
                    iVar7 = (iVar7 >> 5) + (uVar8 & 3);
                    *puVar47 = 0x6000000;
                    piVar28 = &DAT_8006fcf4 + iVar7 * 2;
                    puVar12 = (undefined2 *)*piVar28;
                    *piVar28 = (int)puVar47;
                    if (puVar12 == (undefined2 *)0x0) {
                      if (0 < (int)piVar41 - (int)piVar28) {
                        piVar41 = piVar28;
                      }
                      (&DAT_8006fcf8)[iVar7 * 2] = puVar47;
                      if ((int)piVar33 - (int)piVar28 < 0) {
                        piVar33 = piVar28;
                      }
                      puVar47 = puVar47 + 7;
                    }
                    else {
                      *puVar12 = uVar46;
                      *(undefined *)(puVar12 + 1) = uVar13;
                      puVar47 = puVar47 + 7;
                    }
                  }
                }
                goto LAB_800232a8;
              }
              gte_ldOFX(0x1000000);
              gte_ldOFY(0x780000);
              ptr_graphicsRelated = puVar47;
              if (-1 < (int)piVar33 - (int)piVar41) {
                puVar12 = (undefined2 *)*piVar33;
                iVar21 = piVar33[1];
                *piVar33 = 0;
                piVar33[1] = 0;
                while (iVar7 = piVar33[-1], piVar28 = piVar33, piVar41 != piVar33) {
                  while (piVar33 = piVar28 + -2, iVar7 != 0) {
                    *puVar12 = (short)iVar7;
                    *(char *)(puVar12 + 1) = (char)((uint)iVar7 >> 0x10);
                    puVar12 = (undefined2 *)*piVar33;
                    *piVar33 = 0;
                    piVar28[-1] = 0;
                    if (piVar41 == piVar33) goto LAB_800239b8;
                    iVar7 = piVar28[-3];
                    piVar28 = piVar33;
                  }
                }
LAB_800239b8:
                iVar10 = gte_stDQB();
                iVar14 = gte_stDQA();
                iVar48 = iVar10 << 3;
                iVar7 = ptr_maybe_graphicsArray2;
                if ((iVar10 == 0) && (iVar48 = 0, iVar14 != 0)) {
                  iVar7 = ptr_primitivesArray;
                }
                piVar41 = (int *)(iVar7 + iVar48);
                puVar39 = (undefined4 *)*piVar41;
                if ((uVar44 & 0xf) != 0) {
                  *puVar47 = 0x2000000;
                  puVar47[1] = ((uVar44 & 0xf) - 1) * 0x20 | 0xe1000600;
                  puVar47[2] = 0;
                  ptr_graphicsRelated = puVar47 + 3;
                  *piVar41 = (int)puVar47;
                  if (puVar39 == (undefined4 *)0x0) {
                    piVar41[1] = (int)puVar47;
                    puVar39 = puVar47;
                  }
                  else {
                    *(undefined2 *)puVar39 = uVar46;
                    *(undefined *)((int)puVar39 + 2) = uVar13;
                    puVar39 = puVar47;
                  }
                }
                *piVar41 = (int)puVar12;
                if (puVar39 == (undefined4 *)0x0) {
                  piVar41[1] = iVar21;
                }
                else {
                  *(short *)puVar39 = (short)iVar21;
                  *(char *)((int)puVar39 + 2) = (char)((uint)iVar21 >> 0x10);
                }
              }
            }
          }
        }
      }
    }
  }
  goto LAB_80022b08;
}



// WARNING: Instruction at (ram,0x800251e0) overlaps instruction at (ram,0x800251dc)
// 
// WARNING: Switch with 1 destination removed at 0x800243fc
// WARNING: Type propagation algorithm not settling
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void DrawSpyro(void)

{
  bool bVar1;
  byte bVar2;
  ushort uVar3;
  undefined *puVar4;
  uint uVar5;
  int *piVar6;
  uint *puVar7;
  uint uVar8;
  byte *pbVar9;
  undefined4 uVar10;
  uint *puVar11;
  int *piVar12;
  int iVar13;
  int iVar14;
  ushort *puVar15;
  ushort *puVar16;
  undefined2 *puVar17;
  undefined uVar18;
  uint uVar19;
  uint uVar20;
  uint uVar21;
  int iVar22;
  uint uVar23;
  uint uVar24;
  uint uVar25;
  int iVar26;
  uint uVar27;
  undefined4 uVar28;
  int *piVar29;
  undefined4 uVar30;
  int iVar31;
  byte *pbVar32;
  undefined2 *puVar33;
  int iVar34;
  short *psVar35;
  undefined4 *puVar36;
  uint uVar37;
  int in_t4;
  uint uVar38;
  int in_t5;
  uint uVar39;
  uint *puVar40;
  uint uVar41;
  uint uVar42;
  int iVar43;
  uint uVar44;
  uint in_t7;
  uint unaff_s0;
  uint unaff_s1;
  int iVar45;
  float fVar46;
  uint unaff_s2;
  int iVar47;
  uint unaff_s3;
  int *piVar48;
  undefined4 unaff_s4;
  int *piVar49;
  undefined4 unaff_s5;
  int iVar50;
  int iVar51;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  uint uVar52;
  undefined2 uVar53;
  uint *puVar54;
  undefined4 *puVar55;
  int iVar56;
  undefined2 *puVar57;
  int *piVar58;
  undefined4 *puVar59;
  int *piVar60;
  undefined4 unaff_s8;
  float *pfVar61;
  float *pfVar62;
  float *pfVar63;
  undefined4 unaff_retaddr;
  float *pfVar64;
  float *pfVar65;
  int *piVar66;
  undefined auStackX_0 [16];
  
  iVar43 = spyro.pad2;
  DAT_80077df8 = &DAT_80075264;
  uVar52 = 0;
  uVar42 = (uint)(byte)spyro.maybe_AnimSpeedRelated;
  iVar56 = *(int *)((uint)(byte)spyro.currentAnim * 4 + DAT_80076378 + 0x38);
  uVar19 = *(uint *)((uint)(byte)spyro.currentKeyfame * 4 + iVar56 + 0x24);
  uVar20 = (uVar19 << 0xb) >> 10;
  uVar19 = (uVar19 >> 9 & 0x1000) + uVar42 * 0x100 + (uint)*(byte *)(iVar56 + 8) * 0x10000;
  DAT_80071618 = *(undefined4 *)(iVar56 + 0x10);
  iVar31 = *(int *)(uVar20 + 0x10);
  iVar34 = *(int *)(uVar20 + 0x14);
  DAT_80071620 = uVar20 + 0x18;
  DAT_8007161c = (*(uint *)(uVar20 + 8) >> 0x14) + DAT_80071620;
  if (uVar42 != 0) {
    iVar13 = *(int *)((uint)(byte)spyro.nextAnim * 4 + DAT_80076378 + 0x38);
    uVar20 = *(uint *)((uint)(byte)spyro.nextKeyframe * 4 + iVar13 + 0x24);
    uVar52 = (uint)*(byte *)(iVar13 + 0xb);
    uVar19 = uVar19 + (uVar20 >> 8 & 0x2000);
    uVar20 = (uVar20 << 0xb) >> 10;
    DAT_80071628 = *(undefined4 *)(iVar13 + 0x10);
    in_t4 = *(int *)(uVar20 + 0x10);
    in_t5 = *(int *)(uVar20 + 0x14);
    DAT_80071630 = uVar20 + 0x18;
    DAT_8007162c = (*(uint *)(uVar20 + 8) >> 0x14) + DAT_80071630;
  }
  iVar13 = *(int *)((uint)(byte)spyro.maybe_currentAnimDupe * 4 + DAT_80076378 + 0x38);
  uVar20 = *(uint *)((uint)(byte)spyro.maybe_keyframeDupe1 * 4 + iVar13 + 0x24);
  uVar21 = (uVar20 << 0xb) >> 10;
  DAT_80071638 = (uVar20 >> 10 & 0x1000) + (uint)(byte)spyro.maybe_animSpeedRelatedDupe1 * 0x100 +
                 (uint)*(byte *)(iVar13 + 9) * 0x10000;
  DAT_8007165c = *(int *)(iVar13 + 0x10) + (uint)*(byte *)(iVar13 + 8) * 4;
  DAT_80071664 = (*(uint *)(uVar21 + 0xc) >> 0x10) + uVar21 + 0x18;
  DAT_80071660 = (*(uint *)(uVar21 + 8) >> 10 & 0x3ff) + uVar21 + 0x18;
  if ((byte)spyro.maybe_animSpeedRelatedDupe1 != 0) {
    iVar13 = *(int *)((uint)(byte)spyro.maybe_nextAnimDupe * 4 + DAT_80076378 + 0x38);
    uVar20 = *(uint *)((uint)(byte)spyro.maybe_keyframeDupe2 * 4 + iVar13 + 0x24);
    DAT_80071638 = DAT_80071638 + (uVar20 >> 9 & 0x2000);
    uVar20 = (uVar20 << 0xb) >> 10;
    DAT_8007166c = *(int *)(iVar13 + 0x10) + (uint)*(byte *)(iVar13 + 8) * 4;
    PTR_DAT_80071674 = (undefined *)((*(uint *)(uVar20 + 0xc) >> 0x10) + uVar20 + 0x18);
    DAT_80071670 = (*(uint *)(uVar20 + 8) >> 10 & 0x3ff) + uVar20 + 0x18;
  }
  iVar13 = *(int *)((uint)(byte)spyro.maybe_currentAnimDupe2 * 4 + DAT_80076378 + 0x38);
  uVar20 = *(uint *)((uint)(byte)spyro.maybe_keyframeDupe3 * 4 + iVar13 + 0x24);
  uVar21 = (uVar20 << 0xb) >> 10;
  DAT_8007167c = (uVar20 >> 0xb & 0x1000) + (uint)(byte)spyro.maybe_animSpeedRelatedDupe2 * 0x100 +
                 (uint)*(byte *)(iVar13 + 10) * 0x10000;
  s_aaa___________________80071692._14_4_ =
       *(int *)(iVar13 + 0x10) + (uint)*(byte *)(iVar13 + 9) * 4;
  DAT_800716a8 = (*(uint *)(uVar21 + 0xc) & 0xffff) + uVar21 + 0x18;
  s_aaa___________________80071692._18_4_ = (*(uint *)(uVar21 + 8) & 0x3ff) + uVar21 + 0x18;
  if ((byte)spyro.maybe_animSpeedRelatedDupe2 != 0) {
    iVar13 = *(int *)((uint)(byte)spyro.maybe_nextAnimDupe2 * 4 + DAT_80076378 + 0x38);
    uVar20 = *(uint *)((uint)(byte)spyro.maybe_keyframeDupe4 * 4 + iVar13 + 0x24);
    DAT_8007167c = DAT_8007167c + (uVar20 >> 10 & 0x2000);
    uVar20 = (uVar20 << 0xb) >> 10;
    DAT_800716b0 = *(int *)(iVar13 + 0x10) + (uint)*(byte *)(iVar13 + 9) * 4;
    DAT_800716b8 = (*(uint *)(uVar20 + 0xc) & 0xffff) + uVar20 + 0x18;
    DAT_800716b4 = (*(uint *)(uVar20 + 8) & 0x3ff) + uVar20 + 0x18;
  }
  DAT_800716c0 = 0;
  iVar13 = iVar34 << 0x16;
  if (uVar42 == 0) {
    iVar13 = iVar13 >> 0x15;
    in_t7 = iVar31 >> 0x15;
    uVar20 = (iVar31 << 0xb) >> 0x15;
    uVar42 = (iVar31 << 0x16) >> 0x15;
    uVar21 = iVar34 >> 0x15;
    uVar24 = (iVar34 << 0xb) >> 0x15;
  }
  else {
    gte_ldIR0(uVar42 * 0x100);
    gte_ldsv_(iVar31 >> 0x15,(iVar31 << 0xb) >> 0x15,(iVar31 << 0x16) >> 0x15);
    gte_ldfcdir(in_t4 >> 0x15,(in_t4 << 0xb) >> 0x15,(in_t4 << 0x16) >> 0x15);
    gte_intpl_b();
    gte_ldsv_(iVar34 >> 0x15,(iVar34 << 0xb) >> 0x15,(iVar34 << 0x16) >> 0x15);
    gte_ldfcdir(in_t5 >> 0x15,(in_t5 << 0xb) >> 0x15,(in_t5 << 0x16) >> 0x15);
    read_mt(in_t7,unaff_s0,unaff_s1);
    gte_intpl_b();
    read_mt(unaff_s2,unaff_s3,iVar13);
    uVar20 = unaff_s0;
    uVar42 = unaff_s1;
    uVar21 = unaff_s2;
    uVar24 = unaff_s3;
  }
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  gte_ldtr(0,0,0);
  gte_ldIR3(spyro.position.x - cameraPosition.x);
  gte_ldIR1(cameraPosition.y - spyro.position.y);
  gte_ldIR2(cameraPosition.z - spyro.position.z);
  gte_rtir();
  iVar14 = gte_stMAC3();
  iVar34 = gte_stMAC2();
  iVar31 = gte_stMAC1();
  iVar22 = iVar14 + 0x800;
  DAT_800715f4 = uVar19;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  if ((((iVar14 + -0x4000 < 0) && (0 < iVar22 - iVar31)) && (0 < iVar22 + iVar31)) &&
     ((0 < iVar22 - iVar34 && (0 < iVar22 + iVar34)))) {
    iVar22 = (iVar14 >> 7) - (uint)(byte)spyro.unkown3;
    if (iVar22 < 0) {
      iVar22 = 0;
    }
    if ((int)(uVar52 - *(byte *)(iVar56 + 0xb)) < 0) {
      uVar52 = (uint)*(byte *)(iVar56 + 0xb);
    }
    iVar26 = iVar14 - (0x200 << (uVar52 & 0x1f));
    if (iVar26 < 0) {
      iVar26 = 0;
    }
    gte_ldbkdir(uVar52,iVar22,iVar26);
    DAT_800716c0 = 0;
    DAT_800716c4 = 0;
    DAT_800716c8 = 0;
    gte_ldtr(iVar31,iVar34,iVar14);
    DAT_80071604 = gte_stR11R12();
    DAT_80071608 = gte_stR13R21();
    DAT_8007160c = gte_stR22R23();
    DAT_80071610 = gte_stR31R32();
    DAT_80071614 = gte_stR33();
    uVar52 = spyro._12_4_;
    uVar25 = in_t7;
    uVar39 = uVar20;
    uVar41 = uVar42;
    uVar37 = uVar21;
    uVar38 = uVar24;
    DAT_80071688 = iVar13;
    do {
      do {
        uVar5 = uVar52 >> 0xf & 0x1fe;
        if (uVar5 != 0) {
          uVar8 = (uint)*(ushort *)((int)sineWaveArray + uVar5 + 0x80);
          gte_ldVXY0(uVar8);
          gte_ldVZ0((uint)*(ushort *)((int)sineWaveArray + uVar5));
          gte_rtv0();
          uVar23 = gte_stIR1();
          iVar26 = gte_stIR2();
          uVar27 = gte_stIR3();
          gte_ldVXY0(-(uint)*(ushort *)((int)sineWaveArray + uVar5) & 0xffff);
          gte_ldVZ0(uVar8);
          gte_rtv0_b();
          DAT_80071604 = (DAT_80071604 & 0xffff0000) + (uVar23 & 0xffff);
          DAT_80071610 = (DAT_80071610 & 0xffff0000) + (uVar27 & 0xffff);
          uVar5 = gte_stIR1();
          iVar22 = gte_stIR2();
          uVar8 = gte_stIR3();
          DAT_80071608 = (uVar5 & 0xffff) + iVar26 * 0x10000;
          DAT_8007160c = (DAT_8007160c & 0xffff) + iVar22 * 0x10000;
          DAT_80071614 = uVar8 & 0xffff;
          gte_ldR11R12(DAT_80071604);
          gte_ldR13R21(DAT_80071608);
          gte_ldR22R23(DAT_8007160c);
          gte_ldR31R32(DAT_80071610);
          gte_ldR33(DAT_80071614);
        }
        uVar5 = (uVar52 & 0xff00) >> 8;
        if ((uVar52 & 0xff00) != 0) {
          gte_ldVXY0((uint)(ushort)sineWaveArray[uVar5 + 0x40] << 0x10);
          gte_ldVZ0((uint)(ushort)sineWaveArray[uVar5]);
          gte_rtv0();
          iVar22 = gte_stIR1();
          uVar23 = gte_stIR2();
          iVar26 = gte_stIR3();
          gte_ldVXY0((uint)(ushort)sineWaveArray[uVar5] * -0x10000);
          gte_ldVZ0((uint)(ushort)sineWaveArray[uVar5 + 0x40]);
          gte_rtv0_b();
          DAT_80071604 = (DAT_80071604 & 0xffff) + iVar22 * 0x10000;
          DAT_80071610 = (DAT_80071610 & 0xffff) + iVar26 * 0x10000;
          uVar5 = gte_stIR1();
          iVar22 = gte_stIR2();
          uVar8 = gte_stIR3();
          DAT_80071608 = (DAT_80071608 & 0xffff0000) + (uVar5 & 0xffff);
          DAT_8007160c = iVar22 * 0x10000 + (uVar23 & 0xffff);
          DAT_80071614 = uVar8 & 0xffff;
          gte_ldR11R12(DAT_80071604);
          gte_ldR13R21(DAT_80071608);
          gte_ldR22R23(DAT_8007160c);
          gte_ldR31R32(DAT_80071610);
          gte_ldR33(DAT_80071614);
        }
        uVar52 = uVar52 & 0xff;
        if (uVar52 != 0) {
          gte_ldVZ0(0);
          gte_ldVXY0((uint)(ushort)sineWaveArray[uVar52] * 0x10000 +
                     (uint)(ushort)sineWaveArray[uVar52 + 0x40]);
          gte_rtv0();
          uVar5 = gte_stIR1();
          iVar22 = gte_stIR2();
          uVar8 = gte_stIR3();
          gte_ldVXY0((-(uint)(ushort)sineWaveArray[uVar52] & 0xffff) +
                     (uint)(ushort)sineWaveArray[uVar52 + 0x40] * 0x10000);
          gte_ldVZ0(0);
          gte_rtv0_b();
          DAT_80071608 = (DAT_80071608 & 0xffff) + iVar22 * 0x10000;
          iVar22 = gte_stIR1();
          uVar52 = gte_stIR2();
          iVar26 = gte_stIR3();
          DAT_80071604 = iVar22 * 0x10000 + (uVar5 & 0xffff);
          DAT_80071610 = iVar26 * 0x10000 + (uVar8 & 0xffff);
          DAT_8007160c = (DAT_8007160c & 0xffff0000) + (uVar52 & 0xffff);
          gte_ldR11R12(DAT_80071604);
          gte_ldR13R21(DAT_80071608);
          gte_ldR22R23(DAT_8007160c);
          gte_ldR31R32(DAT_80071610);
          gte_ldR33(DAT_80071614);
        }
        gte_ldVXY0(uVar41 * -0x10000 - uVar39);
        gte_ldVZ0(uVar25);
        gte_rtps_b();
        DAT_8007163c = gte_stIR1();
        gte_ldVXY0(DAT_80071688 * -0x10000 - uVar38);
        gte_ldVZ0(uVar37);
        DAT_80071640 = gte_stIR2();
        DAT_80071644 = gte_stIR3();
        gte_rtps_b();
        DAT_80071680 = gte_stIR1();
        DAT_80071684 = gte_stIR2();
        DAT_80071688 = gte_stIR3();
        uVar52 = spyro.unkown1;
        uVar25 = DAT_80071604;
        uVar39 = DAT_80071608;
        uVar41 = DAT_8007160c;
        uVar37 = DAT_80071610;
        uVar38 = DAT_80071614;
      } while (0 < spyro.unkown1);
      if (DAT_80078762 != '\0') {
        DAT_80078780 = DAT_80071604;
        DAT_80078784 = DAT_80071608;
        DAT_80078788 = DAT_8007160c;
        DAT_8007878c = DAT_80071610;
        DAT_80078790 = DAT_80071614;
      }
      if (spyro.unkown1 != 0) {
        DAT_80071638 = CONCAT13(0x80,(undefined3)DAT_80071638);
        gte_ldR11R12(DAT_80071604);
        gte_ldR13R21(DAT_80071608);
        gte_ldR22R23(DAT_8007160c);
        gte_ldR31R32(DAT_80071610);
        gte_ldR33(DAT_80071614);
        DAT_8007167c = CONCAT13(0x80,(undefined3)DAT_8007167c);
        DAT_80071648 = DAT_80071604;
        DAT_8007164c = DAT_80071608;
        DAT_80071650 = DAT_8007160c;
        DAT_80071654 = DAT_80071610;
        DAT_80071658 = DAT_80071614;
        DAT_8007168c = DAT_80071604;
        _DAT_80071690 = DAT_80071608;
        s_aaa___________________80071692._2_4_ = DAT_8007160c;
        s_aaa___________________80071692._6_4_ = DAT_80071610;
        s_aaa___________________80071692._10_4_ = DAT_80071614;
      }
      uVar52 = spyro.unkown2;
    } while (0 < spyro.unkown2);
    puVar54 = &DAT_800715f4;
    pfVar61 = &FLOAT_1f800000;
    piVar58 = (int *)&DAT_800705f4;
    DAT_800715f8 = iVar31;
    DAT_800715fc = iVar34;
    DAT_80071600 = iVar14;
    DAT_800716cc = in_t7;
    DAT_800716d0 = uVar20;
    DAT_800716d4 = uVar42;
    DAT_800716d8 = uVar21;
    DAT_800716dc = uVar24;
    DAT_800716e0 = iVar13;
    do {
      gte_ldtr(puVar54[1],puVar54[2],puVar54[3]);
      if ((int)uVar19 < 0) {
        gte_ldR11R12(puVar54[4]);
        gte_ldR13R21(puVar54[5]);
        gte_ldR22R23(puVar54[6]);
        gte_ldR31R32(puVar54[7]);
        gte_ldR33(puVar54[8]);
      }
      pfVar64 = (float *)((uVar19 >> 0xe & 0x3ff) + 0x1f7ffffc);
      uVar52 = uVar19 & 0x1000;
      pbVar9 = (byte *)puVar54[10];
      puVar15 = (ushort *)puVar54[0xb];
      iVar13 = 0;
      iVar31 = 0;
      iVar34 = 0;
      uVar20 = uVar19 & 0xfff;
      uVar19 = uVar19 & 0x2000;
      piVar49 = (int *)puVar54[9];
      puVar55 = piVar58;
      pfVar65 = pfVar61 + 1;
      if (uVar20 == 0) {
        do {
          while (pfVar62 = pfVar61, puVar59 = puVar55, piVar48 = piVar49 + 1, uVar52 == 0) {
            gte_rtps_b();
            bVar2 = *pbVar9;
            uVar52 = bVar2 & 1;
            pbVar9 = pbVar9 + 1;
            iVar14 = *(int *)(&DAT_8006d614 + (bVar2 & 0xfe) * 2) + *piVar49;
            if (iVar43 != 0) {
              uVar10 = gte_stVXY0();
              uVar28 = gte_stVZ0();
              puVar59[1] = uVar10;
              puVar59[2] = uVar28;
            }
            iVar13 = iVar13 + (iVar14 >> 0x15);
            iVar31 = iVar31 - (iVar14 * 0x800 >> 0x15);
            iVar34 = iVar34 - (iVar14 * 0x400000 >> 0x15);
            gte_ldVXY0(iVar34 * 0x10000 + iVar31);
            gte_ldVZ0(iVar13);
            uVar10 = gte_stSZ3();
            fVar46 = (float)gte_stSXY2();
            *puVar59 = uVar10;
            *pfVar62 = fVar46;
joined_r0x80024560:
            piVar49 = piVar48;
            puVar55 = puVar59 + 4;
            pfVar61 = pfVar62 + 1;
            if (pfVar62 + 1 == pfVar65) {
              piVar66 = puVar59 + 4;
              bVar1 = pfVar64 == pfVar65;
              pfVar63 = pfVar62 + 1;
              puVar55 = puVar59;
              pfVar61 = pfVar62;
              pfVar65 = pfVar64;
              if (bVar1) goto LAB_80024a14;
            }
          }
          gte_rtps_b();
          uVar19 = (uint)(short)*puVar15;
          piVar66 = puVar59 + 4;
          pfVar63 = pfVar62 + 1;
          uVar52 = uVar19 & 0x4000;
          if (-1 < (int)uVar19) {
            iVar14 = *piVar49;
            uVar10 = gte_stSZ3();
            *puVar59 = uVar10;
            if (iVar43 != 0) {
              uVar10 = gte_stVXY0();
              uVar28 = gte_stVZ0();
              puVar59[1] = uVar10;
              puVar59[2] = uVar28;
            }
            iVar13 = iVar13 + ((int)(uVar19 << 0x12) >> 0x19) + (iVar14 >> 0x15);
            iVar31 = (iVar31 - ((int)(uVar19 << 0x17) >> 0x19)) - ((iVar14 << 0xb) >> 0x15);
            iVar34 = (iVar34 - ((int)(uVar19 << 0x1c) >> 0x19)) - ((iVar14 << 0x16) >> 0x15);
            gte_ldVZ0(iVar13);
            gte_ldVXY0(iVar34 * 0x10000 + iVar31);
            fVar46 = (float)gte_stSXY2();
            *pfVar62 = fVar46;
            puVar15 = puVar15 + 1;
            goto joined_r0x80024560;
          }
          uVar20 = (uint)puVar15[1];
          puVar15 = puVar15 + 2;
          iVar13 = (int)(uVar19 << 0x12) >> 0x15;
          uVar10 = gte_stSZ3();
          *puVar59 = uVar10;
          if (iVar43 != 0) {
            uVar10 = gte_stVXY0();
            uVar28 = gte_stVZ0();
            puVar59[1] = uVar10;
            puVar59[2] = uVar28;
          }
          iVar31 = -((int)(uVar20 << 0xc | uVar19 << 0x1c) >> 0x15);
          iVar14 = (int)(uVar20 << 0x16) >> 0x15;
          iVar34 = -iVar14;
          gte_ldVXY0(iVar14 * -0x10000 + iVar31);
          gte_ldVZ0(iVar13);
          fVar46 = (float)gte_stSXY2();
          *pfVar62 = fVar46;
          piVar49 = piVar48;
          puVar55 = puVar59 + 4;
          pfVar61 = pfVar63;
        } while ((pfVar63 != pfVar65) ||
                (bVar1 = pfVar64 != pfVar65, puVar55 = puVar59, pfVar61 = pfVar62, pfVar65 = pfVar64
                , bVar1));
      }
      else {
        piVar29 = (int *)puVar54[0xd];
        pbVar32 = (byte *)puVar54[0xe];
        psVar35 = (short *)puVar54[0xf];
        iVar26 = 0;
        iVar14 = 0;
        iVar22 = 0;
        piVar48 = piVar58;
        do {
          while (pfVar62 = pfVar61, piVar60 = piVar48, piVar6 = piVar49 + 1, uVar52 != 0) {
            gte_rtps_b();
            uVar42 = (uint)(short)*puVar15;
            puVar16 = puVar15 + 1;
            uVar52 = uVar42 & 0x4000;
            if ((int)uVar42 < 0) {
              uVar3 = *puVar16;
              puVar16 = puVar15 + 2;
              iVar13 = (int)(uVar42 << 0x12) >> 0x15;
              iVar31 = -((int)((uint)uVar3 << 0xc | uVar42 << 0x1c) >> 0x15);
              iVar47 = *piVar29;
              iVar34 = -((int)((uint)uVar3 << 0x16) >> 0x15);
              goto joined_r0x80024710;
            }
            iVar45 = *piVar49;
            iVar47 = *piVar29;
            iVar13 = iVar13 + ((int)(uVar42 << 0x12) >> 0x19) + (iVar45 >> 0x15);
            iVar31 = (iVar31 - ((int)(uVar42 << 0x17) >> 0x19)) - ((iVar45 << 0xb) >> 0x15);
            iVar34 = (iVar34 - ((int)(uVar42 << 0x1c) >> 0x19)) - ((iVar45 << 0x16) >> 0x15);
            if (uVar19 == 0) goto LAB_80024718;
LAB_80024848:
            pfVar63 = pfVar62 + 1;
            piVar29 = piVar29 + 1;
            uVar42 = (uint)*psVar35;
            uVar19 = uVar42 & 0x4000;
            if ((int)uVar42 < 0) {
              uVar21 = (uint)(ushort)psVar35[1];
              psVar35 = psVar35 + 2;
              iVar26 = (int)(uVar42 << 0x12) >> 0x15;
              gte_ldIR0(uVar20);
              gte_ldsv_(iVar13,iVar31,iVar34);
              iVar14 = -((int)(uVar21 << 0xc | uVar42 << 0x1c) >> 0x15);
              iVar22 = -((int)(uVar21 << 0x16) >> 0x15);
              gte_ldfcdir(iVar26,iVar14,iVar22);
              fVar46 = (float)gte_stSXY2();
              iVar47 = gte_stSZ3();
              gte_intpl_b();
              *pfVar62 = fVar46;
              *piVar60 = iVar47;
              if (iVar43 != 0) {
                iVar45 = gte_stVXY0();
                iVar50 = gte_stVZ0();
                piVar60[1] = iVar45;
                piVar60[2] = iVar50;
              }
              read_mt(fVar46,uVar21,iVar47);
              gte_ldVZ0(fVar46);
              gte_ldVXY0(uVar21 + iVar47 * 0x10000);
            }
            else {
              gte_ldIR0(uVar20);
              gte_ldsv_(iVar13,iVar31,iVar34);
              iVar26 = iVar26 + (iVar47 >> 0x15) + ((int)(uVar42 << 0x12) >> 0x19);
              iVar14 = (iVar14 - ((iVar47 << 0xb) >> 0x15)) - ((int)(uVar42 << 0x17) >> 0x19);
              iVar45 = (int)(uVar42 << 0x1c) >> 0x19;
              iVar22 = (iVar22 - ((iVar47 << 0x16) >> 0x15)) - iVar45;
              gte_ldfcdir(iVar26,iVar14,iVar22);
              fVar46 = (float)gte_stSXY2();
              iVar47 = gte_stSZ3();
              gte_intpl_b();
              *pfVar62 = fVar46;
              *piVar60 = iVar47;
              psVar35 = psVar35 + 1;
              if (iVar43 != 0) {
                iVar50 = gte_stVXY0();
                iVar51 = gte_stVZ0();
                piVar60[1] = iVar50;
                piVar60[2] = iVar51;
              }
              read_mt(fVar46,iVar45,iVar47);
              gte_ldVZ0(fVar46);
              gte_ldVXY0(iVar45 + iVar47 * 0x10000);
            }
            piVar49 = piVar6;
            puVar15 = puVar16;
            piVar48 = piVar60 + 4;
            pfVar61 = pfVar63;
            if ((pfVar63 == pfVar65) &&
               (piVar66 = piVar60 + 4, bVar1 = pfVar64 == pfVar65, piVar48 = piVar60,
               pfVar61 = pfVar62, pfVar65 = pfVar64, bVar1)) goto LAB_80024a14;
          }
          gte_rtps_b();
          bVar2 = *pbVar9;
          uVar52 = bVar2 & 1;
          pbVar9 = pbVar9 + 1;
          iVar45 = *(int *)(&DAT_8006d614 + (bVar2 & 0xfe) * 2) + *piVar49;
          iVar13 = iVar13 + (iVar45 >> 0x15);
          iVar47 = *piVar29;
          iVar31 = iVar31 - (iVar45 * 0x800 >> 0x15);
          iVar34 = iVar34 - (iVar45 * 0x400000 >> 0x15);
          puVar16 = puVar15;
joined_r0x80024710:
          if (uVar19 != 0) goto LAB_80024848;
LAB_80024718:
          pfVar63 = pfVar62 + 1;
          piVar66 = piVar60 + 4;
          piVar29 = piVar29 + 1;
          uVar42 = (uint)*pbVar32;
          gte_ldIR0(uVar20);
          gte_ldsv_(iVar13,iVar31,iVar34);
          iVar47 = *(int *)(&DAT_8006d614 + (uVar42 & 0xfe) * 2) + iVar47;
          iVar26 = iVar26 + (iVar47 >> 0x15);
          iVar14 = iVar14 - (iVar47 * 0x800 >> 0x15);
          iVar22 = iVar22 - (iVar47 * 0x400000 >> 0x15);
          gte_ldfcdir(iVar26,iVar14,iVar22);
          fVar46 = (float)gte_stSXY2();
          iVar47 = gte_stSZ3();
          gte_intpl_b();
          *pfVar62 = fVar46;
          *piVar60 = iVar47;
          uVar19 = uVar42 & 1;
          pbVar32 = pbVar32 + 1;
          if (iVar43 != 0) {
            iVar45 = gte_stVXY0();
            iVar50 = gte_stVZ0();
            piVar60[1] = iVar45;
            piVar60[2] = iVar50;
          }
          read_mt(fVar46,iVar47,uVar42);
          gte_ldVZ0(fVar46);
          gte_ldVXY0(iVar47 + uVar42 * 0x10000);
          piVar49 = piVar6;
          puVar15 = puVar16;
          piVar48 = piVar60 + 4;
          pfVar61 = pfVar63;
        } while ((pfVar63 != pfVar65) ||
                (bVar1 = pfVar64 != pfVar65, piVar48 = piVar60, pfVar61 = pfVar62, pfVar65 = pfVar64
                , bVar1));
      }
LAB_80024a14:
      gte_rtps_b();
      piVar58 = piVar66 + 4;
      pfVar61 = pfVar63 + 1;
      puVar54 = puVar54 + 0x11;
      uVar19 = *puVar54;
      fVar46 = (float)gte_stSXY2();
      uVar10 = gte_stSZ3();
      *pfVar63 = fVar46;
      *piVar66 = uVar10;
      if (iVar43 != 0) {
        iVar31 = gte_stVXY0();
        iVar34 = gte_stVZ0();
        piVar66[1] = iVar31;
        piVar66[2] = iVar34;
      }
    } while (uVar19 != 0);
    if (iVar43 != 0) {
      gte_ldR11R12(spyro.unkown5);
      gte_ldR13R21(spyro.unkown6);
      gte_ldR22R23(spyro.unkown7);
      gte_ldR31R32(spyro.unkown8);
      gte_ldR33(spyro.unkown9);
      iVar31 = spyro.position.z - iVar43;
      iVar34 = 0;
      puVar57 = &DAT_800705f4;
      do {
        bVar2 = *(byte *)(iVar34 + iVar56 + 8);
        uVar10 = (&DAT_800716c0)[iVar34 * 3];
        iVar13 = -(&DAT_800716c4)[iVar34 * 3];
        iVar14 = -(&DAT_800716c8)[iVar34 * 3];
        gte_ldsv_(iVar13,iVar14,uVar10);
        gte_rtir_b();
        read_mt(iVar13,iVar14,uVar10);
        gte_ldtr(iVar13,iVar14,uVar10);
        gte_ldVXY0(*(undefined4 *)((int)puVar57 + 4));
        gte_ldVZ0(*(undefined4 *)((int)puVar57 + 8));
        puVar4 = (undefined *)((int)puVar57 + 0x10);
        do {
          puVar57 = (undefined2 *)puVar4;
          copFunction(2,0x480012);
          iVar13 = gte_stMAC2();
          gte_ldVXY0(*(undefined4 *)((int)puVar57 + 4));
          gte_ldVZ0(*(undefined4 *)((int)puVar57 + 8));
          *(int *)((int)puVar57 + -0xc) = iVar31 - iVar13;
          puVar4 = (undefined *)((int)puVar57 + 0x10);
        } while (puVar57 != &DAT_800705f4 + (uint)bVar2 * 8);
        bVar1 = iVar34 != 2;
        iVar34 = iVar34 + 1;
      } while (bVar1);
    }
    puVar7 = *(uint **)(iVar56 + 0x18);
    puVar54 = puVar7;
    if ((uint)spyro.colorFilter >> 0x18 != 0) {
      puVar54 = &DAT_800719f4;
      gte_ldIR0(((uint)spyro.colorFilter >> 0x18) << 4);
      gte_ldRFC(((uint)spyro.colorFilter & 0xff) << 4);
      gte_ldGFC((uint)spyro.colorFilter >> 4 & 0xff0);
      gte_ldBFC((uint)spyro.colorFilter >> 0xc & 0xff0);
      uVar52 = *puVar7;
      puVar7 = puVar7 + 1;
      gte_ldsv_((uVar52 & 0xff) << 4,uVar52 >> 4 & 0xff0,uVar52 >> 0xc & 0xff0);
      puVar11 = puVar7 + *(ushort *)(iVar56 + 2);
      puVar40 = puVar54;
      do {
        gte_intpl_b();
        uVar19 = *puVar7;
        puVar7 = puVar7 + 1;
        uVar52 = gte_stRGB2();
        *puVar40 = uVar52;
        gte_ldsv_((uVar19 & 0xff) << 4,uVar19 >> 4 & 0xff0,uVar19 >> 0xc & 0xff0);
        puVar40 = puVar40 + 1;
      } while (puVar7 != puVar11);
    }
    piVar48 = &DAT_8006fcf4;
    piVar49 = (int *)&DAT_800705f4;
    iVar31 = gte_stBBK();
    iVar34 = gte_stRBK();
    uVar52 = iVar34 + 4;
    puVar55 = ptr_graphicsRelated;
    if (iVar43 == 0) {
      piVar66 = *(int **)(iVar56 + 0x14);
      uVar19 = piVar66[1];
      piVar29 = (int *)(*piVar66 + (int)(piVar66 + 1));
      piVar66 = piVar66 + 1;
LAB_80024c94:
      piVar6 = piVar66;
      uVar20 = piVar6[1];
      uVar18 = (undefined)((uint)puVar55 >> 0x10);
      if (-1 < (int)uVar19) {
        if (piVar6 != piVar29) {
          uVar42 = uVar19 >> 0x14 & 0x7fc;
          uVar21 = uVar19 >> 0xb & 0x7fc;
          uVar24 = uVar19 >> 2 & 0x7fc;
          uVar10 = *(undefined4 *)(uVar21 + 0x1f800000);
          uVar28 = *(undefined4 *)(uVar24 + 0x1f800000);
          gte_ldSXY0(*(undefined4 *)(uVar42 + 0x1f800000));
          gte_ldSXY1(uVar10);
          gte_ldSXY2(uVar28);
          puVar55[2] = *(undefined4 *)(uVar42 + 0x1f800000);
          puVar55[5] = uVar10;
          gte_nclip_b();
          puVar55[8] = uVar28;
          puVar7 = (uint *)((uVar20 >> 0x11 & 0x7fc) + (int)puVar54);
          bVar1 = false;
          if ((uVar19 & 1) == 0) goto code_r0x80024f10;
          uVar19 = piVar6[5];
          goto LAB_80024f30;
        }
        goto LAB_800257a0;
      }
      if (piVar6 == piVar29) goto LAB_800257a0;
      uVar42 = uVar19 >> 0x14 & 0x7fc;
      uVar21 = uVar19 >> 0xb & 0x7fc;
      uVar39 = piVar6[2];
      uVar24 = uVar19 >> 2 & 0x7fc;
      uVar10 = *(undefined4 *)(uVar21 + 0x1f800000);
      uVar28 = *(undefined4 *)(uVar24 + 0x1f800000);
      gte_ldSXY0(*(undefined4 *)(uVar42 + 0x1f800000));
      gte_ldSXY1(uVar10);
      gte_ldSXY2(uVar28);
      uVar25 = uVar39 & 0x7fc;
      gte_nclip_b();
      uVar30 = *(undefined4 *)(uVar25 + 0x1f800000);
      puVar55[2] = *(undefined4 *)(uVar42 + 0x1f800000);
      puVar55[5] = uVar10;
      puVar55[8] = uVar28;
      puVar55[0xb] = uVar30;
      if ((uVar19 & 1) != 0) {
        puVar7 = (uint *)((uVar20 >> 0x11 & 0x7fc) + (int)puVar54);
        puVar40 = (uint *)((uVar39 >> 9 & 0x7fc) + (int)puVar54);
        uVar19 = piVar6[6];
        puVar36 = (undefined4 *)((uVar20 >> 8 & 0x7fc) + (int)puVar54);
LAB_80024d98:
        piVar66 = piVar6 + 6;
        uVar39 = *puVar7;
        uVar10 = *(undefined4 *)((uVar20 & 0x3fe) * 2 + (int)puVar54);
        uVar41 = *puVar40;
        iVar43 = piVar6[3];
        uVar42 = (uint)(ushort)(&DAT_800705f4)[uVar42 * 2] + iVar31 * -4 +
                 (uint)(ushort)(&DAT_800705f4)[uVar21 * 2] +
                 (uint)(ushort)(&DAT_800705f4)[uVar24 * 2] +
                 ((((int)uVar20 >> 0x1c) << 2) << (uVar52 & 0x1f)) +
                 (uint)(ushort)(&DAT_800705f4)[uVar25 * 2];
        uVar21 = uVar42 >> (uVar52 & 0x1f);
        if (0 < (int)uVar42) {
          piVar12 = &DAT_8006fcf4 + uVar21 * 2;
          puVar17 = (undefined2 *)*piVar12;
          iVar34 = piVar6[4];
          uVar42 = piVar6[5];
          puVar55[4] = *puVar36;
          puVar55[7] = uVar10;
          puVar55[10] = uVar41;
          puVar55[1] = (uVar39 & 0xffffff) + 0x3c000000 + (uVar20 & 1) * 0x2000000;
          *puVar55 = 0xc000000;
          puVar55[3] = iVar43;
          puVar55[6] = iVar34;
          puVar55[9] = uVar42;
          puVar55[0xc] = uVar42 >> 0x10;
          *piVar12 = (int)puVar55;
          if (puVar17 == (undefined2 *)0x0) {
            if (0 < (int)piVar49 - (int)piVar12) {
              piVar49 = piVar12;
            }
            (&DAT_8006fcf8)[uVar21 * 2] = puVar55;
            if ((int)piVar48 - (int)piVar12 < 0) {
              piVar48 = piVar12;
            }
            puVar55 = puVar55 + 0xd;
          }
          else {
            *puVar17 = (short)puVar55;
            *(undefined *)(puVar17 + 1) = uVar18;
            puVar55 = puVar55 + 0xd;
          }
        }
        goto LAB_80024c94;
      }
      iVar43 = gte_stMAC0();
      gte_ldSXY0(uVar30);
      puVar7 = (uint *)((uVar20 >> 0x11 & 0x7fc) + (int)puVar54);
      gte_nclip_b();
      uVar19 = piVar6[6];
      piVar66 = piVar6 + 6;
      puVar40 = (uint *)((uVar39 >> 9 & 0x7fc) + (int)puVar54);
      iVar34 = gte_stMAC0();
      uVar39 = uVar20 >> 8 & 0x7fc;
      if (-1 < iVar43) {
        puVar36 = (undefined4 *)(uVar39 + (int)puVar54);
        if (0 < iVar34) {
          puVar55[2] = uVar30;
          bVar1 = true;
          uVar42 = uVar25;
          puVar7 = puVar40;
          goto LAB_80024f3c;
        }
        goto LAB_80024c94;
      }
      puVar36 = (undefined4 *)(uVar39 + (int)puVar54);
      if (0 < iVar34) goto LAB_80024d98;
      bVar1 = false;
      goto LAB_80024f3c;
    }
    puVar40 = (uint *)(*(int **)(iVar56 + 0x14) + 1);
    puVar7 = (uint *)(**(int **)(iVar56 + 0x14) + (int)puVar40);
LAB_80025068:
    uVar19 = *puVar40;
    if (puVar40 != puVar7) {
      uVar20 = puVar40[1];
      if ((int)uVar19 < 0) {
        uVar42 = uVar19 >> 0x12 & 0xff0;
        uVar21 = uVar19 >> 9 & 0xff0;
        uVar24 = uVar19 & 0xff0;
        uVar25 = uVar20 >> 0x11 & 0x7fc;
        uVar39 = uVar20 >> 8 & 0x7fc;
        iVar43 = (uVar20 & 0x3fe) << 1;
        uVar41 = puVar40[3];
        uVar37 = puVar40[4];
        uVar38 = puVar40[5];
        puVar40 = puVar40 + 6;
      }
      else {
        uVar42 = uVar19 >> 0x12 & 0xff0;
        uVar21 = uVar19 >> 9 & 0xff0;
        uVar24 = uVar19 & 0xff0;
        uVar25 = uVar20 >> 0x11 & 0x7fc;
        uVar39 = uVar20 >> 8 & 0x7fc;
        iVar43 = (uVar20 & 0x3fe) << 1;
        uVar41 = puVar40[2];
        uVar37 = puVar40[3];
        uVar38 = puVar40[4];
        puVar40 = puVar40 + 5;
      }
      do {
        uVar5 = *(uint *)((int)&DAT_800705f8 + uVar42);
        uVar8 = *(uint *)((int)&DAT_800705f8 + uVar21);
        uVar23 = *(uint *)((int)&DAT_800705f8 + uVar24);
        uVar27 = *(uint *)((int)&DAT_800705f4 + uVar42);
        if (-1 < (int)(uVar5 & uVar8 & uVar23)) {
          uVar44 = *(uint *)((int)&DAT_800705f4 + uVar21);
          iVar26 = *(int *)((int)&DAT_800705f4 + uVar24);
          iVar34 = *(int *)((uVar42 >> 2) + 0x1f800000);
          iVar13 = *(int *)((uVar21 >> 2) + 0x1f800000);
          iVar14 = *(int *)((uVar24 >> 2) + 0x1f800000);
          gte_ldSXY0(iVar34);
          gte_ldSXY1(iVar13);
          gte_ldSXY2(iVar14);
          puVar55[2] = iVar34;
          puVar55[5] = iVar13;
          gte_nclip_b();
          puVar55[8] = iVar14;
          iVar22 = uVar27 + (uVar27 >> 1) + (uVar44 >> 1);
          if ((uVar19 & 1) == 0) {
            iVar47 = gte_stMAC0();
            if ((int)uVar19 < 0) {
              iVar47 = -iVar47;
            }
            if (iVar47 < 1) goto joined_r0x80025764;
          }
          uVar42 = *(uint *)(uVar25 + (int)puVar54);
          uVar21 = *(uint *)(uVar39 + (int)puVar54);
          uVar24 = *(uint *)(iVar43 + (int)puVar54);
          uVar53 = SUB42(puVar55,0);
          uVar18 = (undefined)((uint)puVar55 >> 0x10);
          if ((int)(uVar5 | uVar8 | uVar23) < 0) {
            puVar55[3] = uVar41;
            puVar55[6] = uVar37;
            uVar25 = iVar22 + iVar31 * -4 + uVar44 + iVar26 +
                     ((((int)uVar20 >> 0x1c) << 2) << (uVar52 & 0x1f));
            uVar39 = uVar25 >> (uVar52 & 0x1f);
            if (0 < (int)uVar25) {
              piVar66 = &DAT_8006fcf4 + uVar39 * 2;
              puVar36 = puVar55;
              if (-1 < (int)uVar5) {
                puVar55[1] = uVar42;
                puVar55[2] = iVar34;
                *(short *)(puVar55 + 3) = (short)uVar41;
                puVar36 = puVar55 + 3;
              }
              if ((int)(uVar5 ^ uVar8) < 0) {
                gte_ldIR1(uVar42 & 0xff);
                gte_ldRFC(uVar21 & 0xff);
                gte_ldIR2(uVar42 >> 8 & 0xff);
                gte_ldGFC(uVar21 >> 8 & 0xff);
                gte_ldIR3(uVar42 >> 0x10 & 0xff);
                gte_ldBFC(uVar21 >> 0x10 & 0xff);
                gte_ldIR0((int)(uVar5 << 0xc) / (int)(uVar5 - uVar8));
                gte_intpl();
                iVar26 = gte_stMAC3();
                iVar43 = gte_stMAC2();
                iVar22 = gte_stMAC1();
                puVar36[1] = (iVar26 * 0x100 + iVar43) * 0x100 + iVar22;
                gte_ldIR1((int)(short)iVar34);
                gte_ldRFC((int)(short)iVar13);
                gte_ldIR2(iVar34 >> 0x10);
                gte_ldGFC(iVar13 >> 0x10);
                gte_intpl();
                iVar43 = gte_stMAC2();
                uVar25 = gte_stMAC1();
                puVar36[2] = (uVar25 & 0xffff) + iVar43 * 0x10000;
                gte_ldIR1(uVar41 & 0xff);
                gte_ldRFC(uVar37 & 0xff);
                gte_ldIR2(uVar41 >> 8 & 0xff);
                gte_ldGFC(uVar37 >> 8 & 0xff);
                gte_intpl();
                uVar10 = gte_stMAC2();
                uVar28 = gte_stMAC1();
                *(short *)(puVar36 + 3) = (short)uVar28 + (short)uVar10 * 0x100;
                puVar36 = puVar36 + 3;
              }
              if (-1 < (int)uVar8) {
                puVar36[1] = uVar21;
                puVar36[2] = iVar13;
                *(short *)(puVar36 + 3) = (short)uVar37;
                puVar36 = puVar36 + 3;
              }
              if ((int)(uVar8 ^ uVar23) < 0) {
                gte_ldIR1(uVar21 & 0xff);
                gte_ldRFC(uVar24 & 0xff);
                gte_ldIR2(uVar21 >> 8 & 0xff);
                gte_ldGFC(uVar24 >> 8 & 0xff);
                gte_ldIR3(uVar21 >> 0x10 & 0xff);
                gte_ldBFC(uVar24 >> 0x10 & 0xff);
                gte_ldIR0((int)(uVar8 << 0xc) / (int)(uVar8 - uVar23));
                gte_intpl();
                iVar26 = gte_stMAC3();
                iVar43 = gte_stMAC2();
                iVar22 = gte_stMAC1();
                puVar36[1] = (iVar26 * 0x100 + iVar43) * 0x100 + iVar22;
                gte_ldIR1((int)(short)iVar13);
                gte_ldRFC((int)(short)iVar14);
                gte_ldIR2(iVar13 >> 0x10);
                gte_ldGFC(iVar14 >> 0x10);
                gte_intpl();
                iVar43 = gte_stMAC2();
                uVar21 = gte_stMAC1();
                puVar36[2] = (uVar21 & 0xffff) + iVar43 * 0x10000;
                gte_ldIR1(uVar37 & 0xff);
                gte_ldRFC(uVar38 & 0xff);
                gte_ldIR2(uVar37 >> 8 & 0xff);
                gte_ldGFC(uVar38 >> 8 & 0xff);
                gte_intpl();
                uVar10 = gte_stMAC2();
                uVar28 = gte_stMAC1();
                *(short *)(puVar36 + 3) = (short)uVar28 + (short)uVar10 * 0x100;
                puVar36 = puVar36 + 3;
              }
              if (-1 < (int)uVar23) {
                puVar36[1] = uVar24;
                puVar36[2] = iVar14;
                *(short *)(puVar36 + 3) = (short)uVar38;
                puVar36 = puVar36 + 3;
              }
              if ((int)(uVar23 ^ uVar5) < 0) {
                gte_ldIR1(uVar24 & 0xff);
                gte_ldRFC(uVar42 & 0xff);
                gte_ldIR2(uVar24 >> 8 & 0xff);
                gte_ldGFC(uVar42 >> 8 & 0xff);
                gte_ldIR3(uVar24 >> 0x10 & 0xff);
                gte_ldBFC(uVar42 >> 0x10 & 0xff);
                gte_ldIR0((int)(uVar23 << 0xc) / (int)(uVar23 - uVar5));
                gte_intpl();
                iVar22 = gte_stMAC3();
                iVar43 = gte_stMAC2();
                iVar13 = gte_stMAC1();
                puVar36[1] = (iVar22 * 0x100 + iVar43) * 0x100 + iVar13;
                gte_ldIR1((int)(short)iVar14);
                gte_ldRFC((int)(short)iVar34);
                gte_ldIR2(iVar14 >> 0x10);
                gte_ldGFC(iVar34 >> 0x10);
                gte_intpl();
                iVar43 = gte_stMAC2();
                uVar42 = gte_stMAC1();
                puVar36[2] = (uVar42 & 0xffff) + iVar43 * 0x10000;
                gte_ldIR1(uVar38 & 0xff);
                gte_ldRFC(uVar41 & 0xff);
                gte_ldIR2(uVar38 >> 8 & 0xff);
                gte_ldGFC(uVar41 >> 8 & 0xff);
                gte_intpl();
                uVar10 = gte_stMAC2();
                uVar28 = gte_stMAC1();
                *(short *)(puVar36 + 3) = (short)uVar28 + (short)uVar10 * 0x100;
                puVar36 = puVar36 + 3;
              }
              puVar17 = (undefined2 *)*piVar66;
              if ((int)puVar36 - (int)puVar55 == 0x30) {
                uVar10 = puVar55[7];
                uVar28 = puVar55[8];
                uVar30 = puVar55[9];
                puVar55[7] = puVar55[10];
                puVar55[8] = puVar55[0xb];
                puVar55[9] = puVar55[0xc];
                puVar55[10] = uVar10;
                puVar55[0xb] = uVar28;
                puVar55[0xc] = uVar30;
                *(undefined *)((int)puVar55 + 7) = 0x3c;
                *puVar55 = 0xc000000;
                *piVar66 = (int)puVar55;
                if (puVar17 == (undefined2 *)0x0) {
                  if (0 < (int)piVar49 - (int)piVar66) {
                    piVar49 = piVar66;
                  }
                  (&DAT_8006fcf8)[uVar39 * 2] = puVar55;
                  if ((int)piVar48 - (int)piVar66 < 0) {
                    piVar48 = piVar66;
                  }
                  puVar55 = puVar55 + 0xd;
                }
                else {
                  *puVar17 = uVar53;
                  *(undefined *)(puVar17 + 1) = uVar18;
                  puVar55 = puVar55 + 0xd;
                }
              }
              else {
                *(undefined *)((int)puVar55 + 7) = 0x34;
                *puVar55 = 0x9000000;
                *piVar66 = (int)puVar55;
                if (puVar17 == (undefined2 *)0x0) {
                  if (0 < (int)piVar49 - (int)piVar66) {
                    piVar49 = piVar66;
                  }
                  (&DAT_8006fcf8)[uVar39 * 2] = puVar55;
                  if ((int)piVar48 - (int)piVar66 < 0) {
                    piVar48 = piVar66;
                  }
                  puVar55 = puVar55 + 10;
                }
                else {
                  *puVar17 = uVar53;
                  *(undefined *)(puVar17 + 1) = uVar18;
                  puVar55 = puVar55 + 10;
                }
              }
            }
          }
          else {
            uVar25 = iVar22 + iVar31 * -4 + uVar44 + iVar26 +
                     ((((int)uVar20 >> 0x1c) << 2) << (uVar52 & 0x1f));
            uVar39 = uVar25 >> (uVar52 & 0x1f);
            if (0 < (int)uVar25) {
              piVar66 = &DAT_8006fcf4 + uVar39 * 2;
              puVar17 = (undefined2 *)*piVar66;
              puVar55[1] = (uVar42 & 0xffffff) + 0x34000000;
              puVar55[4] = uVar21;
              puVar55[7] = uVar24;
              puVar55[3] = uVar41;
              puVar55[6] = uVar37;
              puVar55[9] = uVar38;
              *puVar55 = 0x9000000;
              *piVar66 = (int)puVar55;
              if (puVar17 == (undefined2 *)0x0) {
                if (0 < (int)piVar49 - (int)piVar66) {
                  piVar49 = piVar66;
                }
                (&DAT_8006fcf8)[uVar39 * 2] = puVar55;
                if ((int)piVar48 - (int)piVar66 < 0) {
                  piVar48 = piVar66;
                }
                puVar55 = puVar55 + 10;
              }
              else {
                *puVar17 = uVar53;
                *(undefined *)(puVar17 + 1) = uVar18;
                puVar55 = puVar55 + 10;
              }
            }
          }
        }
joined_r0x80025764:
        if (-1 < (int)uVar19) goto LAB_80025068;
        uVar21 = uVar19 >> 9 & 0xff0;
        uVar24 = uVar19 & 0xff0;
        uVar39 = uVar20 >> 8 & 0x7fc;
        iVar43 = (uVar20 & 0x3fe) << 1;
        uVar42 = (puVar40[-4] & 0x3fc) << 2;
        uVar25 = puVar40[-4] >> 9 & 0x7fc;
        uVar41 = uVar41 & 0xffff0000 | uVar38 >> 0x10;
        uVar19 = uVar19 & 0x7fffffff;
      } while( true );
    }
LAB_800257a0:
    piVar66 = ptr_maybe_graphicsArray2;
    if (-1 < (int)piVar48 - (int)piVar49) {
      iVar43 = gte_stGBK();
      uVar52 = gte_stRBK();
      uVar19 = (int)&DAT_800704f4 - (int)piVar48 << (uVar52 & 0x1f);
      if ((int)&DAT_800704f4 - (int)piVar48 < 0) {
        uVar19 = 0;
      }
      iVar43 = iVar43 * 8 + (0x20 << (uVar52 & 0x1f)) + -8 + (uVar19 >> 8) * -8;
      if (iVar43 < 0) {
        iVar43 = 0;
      }
      piVar49 = piVar49 + -2;
      piVar29 = (int *)(iVar43 + (int)ptr_maybe_graphicsArray2);
LAB_80025818:
      piVar6 = piVar29;
      puVar17 = (undefined2 *)*piVar6;
      piVar29 = (int *)((int)piVar48 - (0x100U >> (uVar52 & 0x1f)));
      if (0 < (int)piVar49 - (int)piVar29) {
        piVar29 = piVar49;
      }
      if (puVar17 == (undefined2 *)0x0) {
        do {
          piVar12 = piVar48;
          piVar48 = piVar12;
          puVar33 = puVar17;
          if (piVar12 == piVar29) goto LAB_8002588c;
          piVar48 = piVar12 + -2;
        } while (piVar12[1] == 0);
        puVar17 = (undefined2 *)*piVar12;
        piVar6[1] = piVar12[1];
        piVar12[1] = 0;
        *piVar12 = 0;
      }
      do {
        do {
          piVar12 = piVar48;
          iVar43 = piVar12[1];
          piVar48 = piVar12;
          puVar33 = puVar17;
          if (piVar12 == piVar29) goto LAB_8002588c;
          piVar48 = piVar12 + -2;
        } while (iVar43 == 0);
        puVar33 = (undefined2 *)*piVar12;
        *puVar17 = (short)iVar43;
        *(char *)(puVar17 + 1) = (char)((uint)iVar43 >> 0x10);
        *piVar12 = 0;
        piVar12[1] = 0;
        puVar17 = puVar33;
      } while (piVar48 != piVar29);
LAB_8002588c:
      *piVar6 = (int)puVar33;
      ptr_graphicsRelated = puVar55;
      if (piVar29 != piVar49) {
        piVar29 = piVar6 + -2;
        if (piVar6 == piVar66) {
          piVar29 = piVar6;
        }
        goto LAB_80025818;
      }
    }
  }
  return;
code_r0x80024f10:
  iVar43 = gte_stMAC0();
  uVar19 = piVar6[5];
  piVar66 = piVar6 + 5;
  if (iVar43 < 1) goto LAB_80024c94;
LAB_80024f30:
  piVar66 = piVar6 + 5;
  puVar36 = (undefined4 *)((uVar20 >> 8 & 0x7fc) + (int)puVar54);
LAB_80024f3c:
  uVar25 = *puVar7;
  uVar10 = *(undefined4 *)((uVar20 & 0x3fe) * 2 + (int)puVar54);
  iVar43 = piVar66[-3];
  uVar42 = (uint)(ushort)(&DAT_800705f4)[uVar42 * 2] +
           (uint)((ushort)(&DAT_800705f4)[uVar42 * 2] >> 1) + iVar31 * -4 +
           (uint)(ushort)(&DAT_800705f4)[uVar21 * 2] +
           (uint)((ushort)(&DAT_800705f4)[uVar21 * 2] >> 1) +
           (uint)(ushort)(&DAT_800705f4)[uVar24 * 2] +
           ((((int)uVar20 >> 0x1c) << 2) << (uVar52 & 0x1f));
  uVar21 = uVar42 >> (uVar52 & 0x1f);
  if (0 < (int)uVar42) {
    piVar6 = &DAT_8006fcf4 + uVar21 * 2;
    puVar17 = (undefined2 *)*piVar6;
    iVar34 = piVar66[-2];
    iVar13 = piVar66[-1];
    puVar55[4] = *puVar36;
    puVar55[7] = uVar10;
    puVar55[1] = (uVar25 & 0xffffff) + 0x34000000 + (uVar20 & 1) * 0x2000000;
    puVar55[3] = iVar43;
    if (bVar1) {
      *(short *)(puVar55 + 3) = (short)((uint)iVar13 >> 0x10);
    }
    *puVar55 = 0x9000000;
    puVar55[6] = iVar34;
    puVar55[9] = iVar13;
    *piVar6 = (int)puVar55;
    if (puVar17 == (undefined2 *)0x0) {
      if (0 < (int)piVar49 - (int)piVar6) {
        piVar49 = piVar6;
      }
      (&DAT_8006fcf8)[uVar21 * 2] = puVar55;
      if ((int)piVar48 - (int)piVar6 < 0) {
        piVar48 = piVar6;
      }
      puVar55 = puVar55 + 10;
    }
    else {
      *puVar17 = (short)puVar55;
      *(undefined *)(puVar17 + 1) = uVar18;
      puVar55 = puVar55 + 10;
    }
  }
  goto LAB_80024c94;
}



// WARNING: Instruction at (ram,0x80025b74) overlaps instruction at (ram,0x80025b70)
// 
// WARNING: Type propagation algorithm not settling
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void World(int param_1)

{
  bool bVar1;
  char cVar2;
  short sVar3;
  ushort uVar4;
  ushort uVar5;
  ushort uVar6;
  bool bVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  uint *puVar10;
  undefined4 *puVar11;
  ushort *puVar12;
  undefined **ppuVar13;
  uint uVar14;
  uint *puVar15;
  undefined4 *puVar16;
  uint uVar17;
  float fVar18;
  ushort *puVar19;
  uint *puVar20;
  uint uVar21;
  uint uVar22;
  ushort *puVar23;
  undefined4 *puVar24;
  int *piVar25;
  uint uVar26;
  uint *puVar27;
  uint uVar28;
  uint uVar29;
  uint uVar30;
  uint uVar31;
  undefined2 *puVar32;
  int iVar33;
  int iVar34;
  int iVar35;
  undefined uVar36;
  int iVar37;
  uint uVar38;
  undefined4 uVar39;
  byte bVar40;
  int iVar41;
  uint uVar42;
  short *psVar43;
  short *psVar44;
  uint uVar45;
  uint uVar46;
  undefined4 uVar47;
  int iVar48;
  int iVar49;
  undefined4 uVar50;
  int iVar51;
  int iVar52;
  undefined4 uVar53;
  int iVar54;
  int *piVar55;
  int iVar56;
  int iVar57;
  int iVar58;
  uint uVar59;
  uint *puVar60;
  undefined4 unaff_s0;
  uint *puVar61;
  undefined4 unaff_s1;
  uint *puVar62;
  undefined4 unaff_s2;
  uint **ppuVar63;
  undefined4 unaff_s3;
  uint **ppuVar64;
  undefined4 unaff_s4;
  undefined *unaff_s5;
  uint uVar65;
  undefined4 unaff_s6;
  uint *puVar66;
  undefined4 unaff_s7;
  float *pfVar67;
  float *pfVar68;
  undefined2 *puVar69;
  int iVar70;
  uint uVar71;
  undefined *puVar72;
  uint *puVar73;
  int *piVar74;
  float *pfVar75;
  uint *puVar76;
  undefined2 uVar77;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  
  DAT_80077df8 = &DAT_80075264;
  gte_ldR11R12(gCamera6.R12R11);
  gte_ldR13R21(gCamera6.R21R13);
  gte_ldR22R23(gCamera6.R23R22);
  gte_ldR31R32(gCamera6.R32R31);
  gte_ldR33(gCamera6.R33);
  gte_ldtr(0,0,0);
  pfVar67 = (float *)(cameraPosition.x >> 4);
  puVar69 = (undefined2 *)(cameraPosition.y >> 4);
  iVar70 = cameraPosition.z >> 4;
  puVar11 = &DAT_800771c8;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  do {
    puVar16 = puVar11 + 4;
    *puVar11 = 0;
    puVar11[1] = 0;
    puVar11[2] = 0;
    puVar11[3] = 0;
    puVar11 = puVar16;
  } while (puVar16 != &DAT_800772c8);
  puVar60 = &DAT_800718f4;
  puVar61 = &DAT_80071cf4;
  puVar66 = (uint *)((uint)LODDistanceRelated >> 4);
  ppuVar63 = DAT_800785a8;
  if (param_1 < 0) {
    unaff_s5 = &UNK_800771c7;
    ppuVar64 = DAT_800785a8 + DAT_800785ac;
  }
  else {
    ppuVar64 = *(uint ***)(DAT_800785b0 + param_1 * 4);
  }
LAB_800259fc:
  unaff_s5 = unaff_s5 + 1;
  if (param_1 < 0) {
    puVar62 = *ppuVar63;
    if (ppuVar63 == ppuVar64) goto LAB_800261a0;
    ppuVar63 = ppuVar63 + 1;
  }
  else {
    uVar26 = (uint)*(byte *)ppuVar64;
    ppuVar64 = (uint **)((int)ppuVar64 + 1);
    if (uVar26 == 0xff) goto LAB_800261a0;
    puVar62 = ppuVar63[uVar26];
    unaff_s5 = (undefined *)((int)&DAT_800771c8 + uVar26);
  }
  uVar26 = puVar62[1];
  uVar30 = (uint)puVar62 | 1;
  gte_ldIR3((*puVar62 >> 0x10) - (int)pfVar67);
  gte_ldIR1((int)puVar69 - (*puVar62 & 0xffff));
  gte_ldIR2(iVar70 - (uVar26 >> 0x10));
  uVar45 = uVar26 & 0x1fff;
  gte_rtir_b();
  iVar49 = (uVar45 >> 1) + (uVar45 >> 2) + (uVar45 >> 5);
  iVar41 = gte_stIR3();
  iVar34 = gte_stIR1();
  iVar52 = (uVar45 >> 1) + (uVar45 >> 4) + (uVar45 >> 5);
  if (0 < (int)(iVar41 + uVar45)) {
    if (iVar34 < 0) {
      iVar34 = -iVar34;
    }
    if ((iVar34 - iVar49) * 4 + (iVar41 + iVar52) * -3 < 0) {
      iVar57 = uVar45 - (uVar45 >> 3);
      iVar37 = gte_stIR2();
      iVar58 = (uVar45 >> 1) - (uVar45 >> 4);
      if (iVar37 < 0) {
        iVar37 = -iVar37;
      }
      if ((iVar37 - iVar57) * 0x20 + (iVar41 + iVar58) * -0x11 < 0) {
        uVar71 = puVar62[6];
        if (((0 < (int)(iVar41 - uVar45)) && ((iVar34 + iVar49) * 4 + (iVar41 - iVar52) * -3 < 0))
           && ((iVar37 + iVar57) * 0x20 + (iVar41 - iVar58) * -0x11 < 0)) {
          uVar30 = uVar30 ^ 1;
        }
        uVar14 = 0xffffffff;
        *unaff_s5 = 0xff;
        if ((uVar26 & 0x2000) == 0) {
          if ((uVar26 & 0x8000) == 0) {
            *puVar61 = uVar30;
            if (-1 < (int)((int)puVar66 - (iVar41 + uVar45 + 0x100))) goto LAB_80025b80;
          }
          else {
            *puVar61 = uVar30;
          }
          puVar61 = puVar61 + 1;
          uVar14 = 0xffff0000;
        }
LAB_80025b80:
        if (((uVar26 & 0x4000) == 0) && (0 < (int)((int)puVar66 - (iVar41 - uVar45)))) {
          uVar14 = uVar14 & 0xffff;
          if ((int)((iVar41 - uVar45) + -0x100) < 0) {
            uVar30 = uVar30 + 2;
          }
          *puVar60 = uVar30;
          puVar60 = puVar60 + 1;
        }
        puVar72 = (undefined *)(uVar71 | uVar14);
        if (puVar72 != (undefined *)0xffffffff) {
          if (-1 < (int)puVar72 << 0x18) {
            *(undefined *)(puVar62 + 6) = 0xff;
            iVar34 = *(int *)(((uint)puVar72 & 0xff) * 4 + DAT_80078574);
            iVar41 = iVar34 + 0xc + (uint)*(byte *)(iVar34 + 2) * 8;
            uVar26 = (uint)*(ushort *)(iVar34 + 6);
            iVar49 = *(byte *)(iVar41 + 5) * uVar26;
            if (*(byte *)(iVar41 + 4) == 0) {
              puVar20 = (uint *)(*(int *)(iVar34 + 8) + iVar34 + iVar49);
              puVar15 = (uint *)((int)puVar20 + uVar26);
              puVar10 = puVar62 + 7;
              do {
                uVar26 = *puVar20;
                puVar20 = puVar20 + 1;
                *puVar10 = uVar26;
                puVar10 = puVar10 + 1;
              } while (puVar20 != puVar15);
            }
            else {
              gte_ldIR0((uint)*(byte *)(iVar41 + 4) << 4);
              iVar34 = iVar34 + *(int *)(iVar34 + 8);
              puVar15 = (uint *)(iVar34 + iVar49);
              puVar27 = (uint *)(iVar34 + *(byte *)(iVar41 + 6) * uVar26);
              uVar30 = *puVar15;
              puVar20 = puVar15 + 1;
              uVar45 = *puVar27;
              gte_ldsv_(uVar30 >> 0x15,uVar30 >> 10 & 0x7ff,uVar30 & 0x3ff);
              puVar10 = puVar62 + 7;
              do {
                puVar27 = puVar27 + 1;
                gte_ldfcdir(uVar45 >> 0x15,uVar45 >> 10 & 0x7ff,uVar45 & 0x3ff);
                uVar30 = *puVar20;
                uVar45 = *puVar27;
                gte_intpl_b();
                puVar20 = puVar20 + 1;
                uVar14 = uVar30 >> 10 & 0x7ff;
                uVar46 = uVar30 & 0x3ff;
                gte_ldsv_(uVar30 >> 0x15,uVar14,uVar46);
                read_mt(uVar30 >> 0x15,uVar14,uVar46);
                *puVar10 = (uVar30 & 0xffe00000) + uVar14 * 0x400 + uVar46;
                puVar10 = puVar10 + 1;
              } while ((uint *)((int)puVar15 + uVar26 + 4) != puVar20);
            }
          }
          if (-1 < (int)puVar72 << 0x10) {
            *(undefined *)((int)puVar62 + 0x19) = 0xff;
            iVar34 = *(int *)(((uint)((int)puVar72 << 0x10) >> 0x18) * 4 + DAT_8007857c);
            iVar41 = iVar34 + 0xc + (uint)*(byte *)(iVar34 + 2) * 8;
            uVar26 = (uint)*(ushort *)(iVar34 + 6);
            iVar49 = *(byte *)(iVar41 + 5) * uVar26;
            if (*(byte *)(iVar41 + 4) == 0) {
              puVar20 = (uint *)(*(int *)(iVar34 + 8) + iVar34 + iVar49);
              puVar15 = (uint *)((int)puVar20 + uVar26);
              puVar10 = puVar62 + *(byte *)(puVar62 + 4) + 7;
              do {
                uVar26 = *puVar20;
                puVar20 = puVar20 + 1;
                puVar10 = (uint *)((int)puVar10 + (uVar26 >> 0x16 & 0x3fc));
                *puVar10 = uVar26 & 0xffffff;
              } while (puVar20 != puVar15);
            }
            else {
              iVar34 = iVar34 + *(int *)(iVar34 + 8);
              puVar20 = (uint *)(iVar34 + iVar49);
              puVar15 = (uint *)((int)puVar20 + uVar26);
              gte_ldIR0((uint)*(byte *)(iVar41 + 4) << 4);
              puVar27 = (uint *)(iVar34 + *(byte *)(iVar41 + 6) * uVar26);
              puVar10 = puVar62 + *(byte *)(puVar62 + 4) + 7;
              uVar26 = *puVar20;
              uVar30 = *puVar27;
              do {
                gte_ldRGB(uVar26 & 0xffffff);
                gte_ldRFC((uVar30 & 0xff) << 4);
                gte_ldGFC(uVar30 >> 4 & 0xff0);
                gte_ldBFC(uVar30 >> 0xc & 0xff0);
                uVar45 = uVar26 >> 0x16;
                gte_dpcs_b();
                uVar26 = puVar20[1];
                uVar30 = puVar27[1];
                puVar20 = puVar20 + 1;
                puVar27 = puVar27 + 1;
                puVar10 = (uint *)((int)puVar10 + (uVar45 & 0x3fc));
                uVar45 = gte_stRGB2();
                *puVar10 = uVar45;
              } while (puVar15 != puVar20);
            }
          }
          if (-1 < (int)puVar72 << 8) {
            *(undefined *)((int)puVar62 + 0x1a) = 0xff;
            iVar34 = *(int *)(((uint)((int)puVar72 << 8) >> 0x18) * 4 + DAT_80078584);
            iVar41 = iVar34 + 0xc + (uint)*(byte *)(iVar34 + 2) * 8;
            uVar26 = (uint)*(ushort *)(iVar34 + 6);
            iVar49 = *(byte *)(iVar41 + 5) * uVar26;
            if (*(byte *)(iVar41 + 4) == 0) {
              puVar20 = (uint *)(*(int *)(iVar34 + 8) + iVar34 + iVar49);
              puVar15 = (uint *)((int)puVar20 + uVar26);
              puVar10 = puVar62 + *(byte *)((int)puVar62 + 0x17) + 7;
              do {
                uVar26 = *puVar20;
                puVar20 = puVar20 + 1;
                *puVar10 = uVar26;
                puVar10 = puVar10 + 1;
              } while (puVar20 != puVar15);
            }
            else {
              gte_ldIR0((uint)*(byte *)(iVar41 + 4) << 4);
              iVar34 = iVar34 + *(int *)(iVar34 + 8);
              puVar15 = (uint *)(iVar34 + iVar49);
              puVar27 = (uint *)(iVar34 + *(byte *)(iVar41 + 6) * uVar26);
              uVar30 = *puVar15;
              puVar20 = puVar15 + 1;
              uVar45 = *puVar27;
              gte_ldsv_(uVar30 >> 0x15,uVar30 >> 10 & 0x7ff,uVar30 & 0x3ff);
              puVar10 = puVar62 + *(byte *)((int)puVar62 + 0x17) + 7;
              do {
                puVar27 = puVar27 + 1;
                gte_ldfcdir(uVar45 >> 0x15,uVar45 >> 10 & 0x7ff,uVar45 & 0x3ff);
                uVar30 = *puVar20;
                uVar45 = *puVar27;
                gte_intpl_b();
                puVar20 = puVar20 + 1;
                uVar14 = uVar30 >> 10 & 0x7ff;
                uVar46 = uVar30 & 0x3ff;
                gte_ldsv_(uVar30 >> 0x15,uVar14,uVar46);
                read_mt(uVar30 >> 0x15,uVar14,uVar46);
                *puVar10 = (uVar30 & 0xffe00000) + uVar14 * 0x400 + uVar46;
                puVar10 = puVar10 + 1;
              } while ((uint *)((int)puVar15 + uVar26 + 4) != puVar20);
            }
          }
          if (-1 < (int)puVar72) {
            *(undefined *)((int)puVar62 + 0x1b) = 0xff;
            iVar34 = *(int *)(((uint)puVar72 >> 0x18) * 4 + DAT_8007858c);
            iVar41 = iVar34 + 0xc + (uint)*(byte *)(iVar34 + 2) * 8;
            uVar26 = (uint)*(ushort *)(iVar34 + 6);
            iVar49 = *(byte *)(iVar41 + 5) * uVar26;
            if (*(byte *)(iVar41 + 4) == 0) {
              puVar15 = (uint *)(*(int *)(iVar34 + 8) + iVar34 + iVar49);
              puVar20 = (uint *)((int)puVar15 + uVar26);
              uVar26 = puVar62[5];
              puVar62 = (uint *)((int)puVar62 +
                                (uVar26 & 0xff) * 4 + (uVar26 >> 0x16 & 0x3fc) + 0x1c);
              puVar10 = (uint *)((int)puVar62 + (uVar26 >> 6 & 0x3fc));
              do {
                uVar26 = *puVar15;
                uVar30 = puVar15[1];
                puVar15 = puVar15 + 2;
                uVar45 = uVar26 >> 0x16 & 0x3fc;
                puVar62 = (uint *)((int)puVar62 + uVar45);
                puVar10 = (uint *)((int)puVar10 + uVar45);
                *puVar62 = uVar26 & 0xffffff;
                *puVar10 = uVar30;
              } while (puVar15 != puVar20);
            }
            else {
              iVar34 = iVar34 + *(int *)(iVar34 + 8);
              puVar10 = (uint *)(iVar34 + iVar49);
              gte_ldIR0((uint)*(byte *)(iVar41 + 4) << 4);
              puVar20 = (uint *)((int)puVar10 + uVar26);
              uVar30 = puVar62[5];
              puVar15 = (uint *)(iVar34 + *(byte *)(iVar41 + 6) * uVar26);
              uVar26 = *puVar10;
              puVar11 = (undefined4 *)
                        ((int)puVar62 + (uVar30 & 0xff) * 4 + (uVar30 >> 0x16 & 0x3fc) + 0x1c);
              uVar45 = *puVar15;
              puVar16 = (undefined4 *)((int)puVar11 + (uVar30 >> 6 & 0x3fc));
              do {
                gte_ldRGB(uVar26 & 0xffffff);
                gte_ldRFC((uVar45 & 0xff) << 4);
                gte_ldGFC(uVar45 >> 4 & 0xff0);
                gte_ldBFC(uVar45 >> 0xc & 0xff0);
                uVar30 = uVar26 >> 0x16 & 0x3fc;
                gte_dpcs_b();
                uVar26 = puVar10[1];
                uVar45 = puVar15[1];
                uVar47 = gte_stRGB2();
                puVar11 = (undefined4 *)((int)puVar11 + uVar30);
                *puVar11 = uVar47;
                gte_ldRGB(uVar26);
                gte_ldRFC((uVar45 & 0xff) << 4);
                gte_ldGFC(uVar45 >> 4 & 0xff0);
                gte_ldBFC(uVar45 >> 0xc & 0xff0);
                puVar10 = puVar10 + 2;
                puVar15 = puVar15 + 2;
                gte_dpcs_b();
                uVar26 = *puVar10;
                uVar45 = *puVar15;
                uVar47 = gte_stRGB2();
                puVar16 = (undefined4 *)((int)puVar16 + uVar30);
                *puVar16 = uVar47;
              } while (puVar10 != puVar20);
            }
          }
        }
      }
    }
  }
  goto LAB_800259fc;
LAB_800261a0:
  *puVar61 = 0;
  *puVar60 = 0;
  puVar11 = ptr_maybe_graphicsArray2;
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  puVar60 = &DAT_80071cf4;
  if (DAT_8007591c == 0) {
    uVar26 = DAT_800785d0 >> 7;
    iVar34 = ((uint)LODDistanceRelated >> 7) - 0x20;
    while( true ) {
      uVar30 = *puVar60;
      puVar60 = puVar60 + 1;
      uVar45 = uVar30 & 1;
      if (uVar30 == 0) break;
      uVar30 = uVar30 ^ uVar45;
      uVar65 = *(uint *)(uVar30 + 8) & 0xffff;
      iVar41 = (*(uint *)(uVar30 + 8) >> 0x10) - (int)pfVar67;
      puVar66 = (uint *)(iVar70 - (uint)*(ushort *)(uVar30 + 0xe));
      uVar46 = *(uint *)(uVar30 + 0x10);
      pfVar75 = &FLOAT_1f800000;
      uVar59 = 0xffffffff;
      uVar14 = *(uint *)(uVar30 + 0x1c);
      puVar61 = (uint *)(uVar30 + 0x20);
      gte_ldVZ0((uVar14 >> 0x15) + iVar41);
      gte_ldVXY0((int)puVar69 +
                 ((int)puVar66 - (uVar14 & 0x3ff)) * 0x10000 + (-(uVar14 >> 10 & 0x7ff) - uVar65));
      uVar14 = *puVar61;
      puVar62 = (uint *)(uVar30 + 0x24);
      do {
        while( true ) {
          gte_rtps_b();
          uVar30 = uVar14 >> 0x15;
          uVar21 = uVar14 >> 10;
          uVar28 = uVar14 & 0x3ff;
          uVar14 = *puVar62;
          gte_ldVZ0(uVar30 + iVar41);
          gte_ldVXY0((int)puVar69 + ((int)puVar66 - uVar28) * 0x10000 + (-(uVar21 & 0x7ff) - uVar65)
                    );
          uVar30 = gte_stSXY2();
          uVar21 = gte_stSZ3();
          puVar62 = puVar62 + 1;
          if (uVar45 != 0) break;
          *pfVar75 = (float)uVar30;
          ((uint *)pfVar75)[1] = uVar21;
          pfVar75 = (float *)((uint *)pfVar75 + 2);
          if (puVar62 == puVar61 + (uVar46 & 0xff) + 1) goto LAB_80026364;
        }
        uVar28 = uVar30 * 0x20;
        if ((int)(uVar30 - 0x10000) < 1) {
          uVar28 = uVar28 + 1;
        }
        if (-1 < (int)(uVar30 - 0x1000000)) {
          uVar28 = uVar28 + 2;
        }
        ((uint *)pfVar75)[1] = uVar21;
        if ((uVar30 & 0xfe00) != 0) {
          uVar28 = uVar28 + 4;
        }
        uVar59 = uVar59 & uVar28;
        *pfVar75 = (float)uVar28;
        pfVar75 = (float *)((uint *)pfVar75 + 2);
      } while (puVar62 != puVar61 + (uVar46 & 0xff) + 1);
      if ((uVar59 & 0xf) == 0) {
LAB_80026364:
        iVar41 = (uVar46 & 0xff) * 4 + -4;
        puVar62 = (uint *)((int)puVar61 + (uVar46 >> 6 & 0x3fc) + iVar41);
        uVar30 = *puVar62;
        puVar66 = (uint *)((uVar46 >> 0xd & 0x7f8) + (int)puVar62);
LAB_80026390:
        uVar14 = puVar62[1];
        if (puVar62 != puVar66) {
          uVar46 = uVar30 >> 0x17 & 0x1f8;
          uVar59 = uVar30 >> 0x11 & 0x1f8;
          uVar65 = uVar30 >> 0xb & 0x1f8;
          uVar21 = uVar30 >> 5 & 0x1f8;
          uVar36 = (undefined)((uint)ptr_graphicsRelated >> 0x10);
          if (uVar65 != uVar21) {
            uVar28 = *(uint *)(uVar46 + 0x1f800000);
            uVar17 = *(uint *)(uVar59 + 0x1f800000);
            uVar22 = *(uint *)(uVar65 + 0x1f800000);
            uVar29 = *(uint *)(uVar21 + 0x1f800000);
            if (uVar45 != 0) {
              uVar31 = uVar28 & uVar17;
              uVar28 = (int)uVar28 >> 5;
              if ((uVar31 & uVar22 & uVar29 & 0xf) != 0) {
LAB_8002677c:
                uVar30 = puVar62[2];
                puVar62 = puVar62 + 2;
                goto LAB_80026390;
              }
              uVar17 = (int)uVar17 >> 5;
              uVar22 = (int)uVar22 >> 5;
              uVar29 = (int)uVar29 >> 5;
            }
            gte_ldSXY0(uVar28);
            gte_ldSXY1(uVar17);
            gte_ldSXY2(uVar22);
            gte_nclip_b();
            uVar42 = *(int *)((int)&DAT_1f800004 + uVar46) + *(int *)((int)&DAT_1f800004 + uVar59) +
                     *(int *)((int)&DAT_1f800004 + uVar65) + *(int *)((int)&DAT_1f800004 + uVar21);
            uVar38 = uVar30 & 0x80;
            uVar31 = uVar30 & 0x1f;
            iVar49 = gte_stMAC0();
            gte_ldSXY0(uVar29);
            puVar62 = puVar62 + 2;
            if (iVar49 < 1) {
              gte_nclip_b();
              uVar30 = *puVar62;
              if (uVar38 != 0) goto LAB_80026484;
              if (-1 < (int)((uVar42 >> 5) - uVar26)) goto LAB_80026390;
              iVar52 = gte_stMAC0();
              iVar49 = (uVar31 * 8 + (uVar42 >> 5)) - iVar34;
              if (-1 < iVar52) goto LAB_80026390;
            }
            else {
              uVar30 = *puVar62;
LAB_80026484:
              if (-1 < (int)((uVar42 >> 5) - uVar26)) goto LAB_80026390;
              iVar49 = (uVar31 * 8 + (uVar42 >> 5)) - iVar34;
            }
            if ((-1 < iVar49) ||
               ((iVar52 = iVar34 + uVar31 * -8, 0 < iVar49 + 0x20 &&
                (-1 < (*(int *)((int)&DAT_1f800004 + uVar46) + iVar52 * -8 &
                       *(int *)((int)&DAT_1f800004 + uVar59) + iVar52 * -8 &
                       *(int *)((int)&DAT_1f800004 + uVar65) + iVar52 * -8 &
                      *(int *)((int)&DAT_1f800004 + uVar21) + iVar52 * -8))))) {
              iVar52 = *(int *)((int)puVar61 + (uVar14 >> 0x18 & 0xfc) + iVar41);
              uVar47 = *(undefined4 *)((int)puVar61 + (uVar14 >> 0x12 & 0xfc) + iVar41);
              uVar50 = *(undefined4 *)((int)puVar61 + (uVar14 >> 0xc & 0xfc) + iVar41);
              piVar55 = puVar11 + ((uVar42 >> 5) + (uVar14 & 0xf8) + 0x40) * 2;
              uVar53 = *(undefined4 *)((int)puVar61 + (uVar14 >> 6 & 0xfc) + iVar41);
              iVar49 = 0x38000000;
              if ((uVar14 & 4) != 0) {
                iVar49 = 0x3a000000;
                *ptr_graphicsRelated = 0x2000000;
                ptr_graphicsRelated[2] = 0;
                *(ushort *)(ptr_graphicsRelated + 1) = (ushort)((uVar14 & 3) << 5) | 0x600;
                *(undefined2 *)((int)ptr_graphicsRelated + 6) = 0xe100;
                puVar32 = (undefined2 *)*piVar55;
                *piVar55 = (int)ptr_graphicsRelated;
                if (puVar32 == (undefined2 *)0x0) {
                  piVar55[1] = (int)ptr_graphicsRelated;
                  ptr_graphicsRelated = ptr_graphicsRelated + 3;
                }
                else {
                  *puVar32 = (short)ptr_graphicsRelated;
                  *(undefined *)(puVar32 + 1) = uVar36;
                  ptr_graphicsRelated = ptr_graphicsRelated + 3;
                }
              }
              *ptr_graphicsRelated = 0x8000000;
              ptr_graphicsRelated[1] = iVar52 + iVar49;
              ptr_graphicsRelated[2] = uVar28;
              ptr_graphicsRelated[3] = uVar47;
              ptr_graphicsRelated[4] = uVar17;
              ptr_graphicsRelated[5] = uVar50;
              ptr_graphicsRelated[6] = uVar22;
              ptr_graphicsRelated[7] = uVar53;
              ptr_graphicsRelated[8] = uVar29;
              puVar32 = (undefined2 *)*piVar55;
              *piVar55 = (int)ptr_graphicsRelated;
              if (puVar32 == (undefined2 *)0x0) {
                piVar55[1] = (int)ptr_graphicsRelated;
                ptr_graphicsRelated = ptr_graphicsRelated + 9;
              }
              else {
                *puVar32 = (short)ptr_graphicsRelated;
                *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
                ptr_graphicsRelated = ptr_graphicsRelated + 9;
              }
            }
            goto LAB_80026390;
          }
          uVar21 = *(uint *)(uVar46 + 0x1f800000);
          uVar28 = *(uint *)(uVar59 + 0x1f800000);
          uVar17 = *(uint *)(uVar65 + 0x1f800000);
          if (uVar45 != 0) {
            uVar22 = uVar21 & uVar28;
            uVar21 = (int)uVar21 >> 5;
            if ((uVar22 & uVar17 & 0x1f) != 0) goto LAB_8002677c;
            uVar28 = (int)uVar28 >> 5;
            uVar17 = (int)uVar17 >> 5;
          }
          gte_ldSXY0(uVar21);
          gte_ldSXY1(uVar28);
          gte_ldSXY2(uVar17);
          uVar29 = uVar30 & 0x80;
          uVar22 = uVar30 & 0x1f;
          gte_nclip_b();
          uVar30 = puVar62[2];
          puVar62 = puVar62 + 2;
          iVar49 = gte_stMAC0();
          if (0 < (int)(iVar49 + uVar29 * 0x800000)) {
            uVar29 = (uint)(*(int *)((int)&DAT_1f800004 + uVar46) +
                            *(int *)((int)&DAT_1f800004 + uVar59) +
                           *(int *)((int)&DAT_1f800004 + uVar65) * 2) >> 5;
            if ((int)(uVar29 - uVar26) < 0) {
              iVar52 = *(int *)((int)puVar61 + (uVar14 >> 0x18 & 0xfc) + iVar41);
              iVar49 = (uVar22 * 8 + uVar29) - iVar34;
              if ((-1 < iVar49) ||
                 ((iVar37 = iVar34 + uVar22 * -8, 0 < iVar49 + 0x20 &&
                  (-1 < (*(int *)((int)&DAT_1f800004 + uVar46) + iVar37 * -8 &
                         *(int *)((int)&DAT_1f800004 + uVar59) + iVar37 * -8 &
                        *(int *)((int)&DAT_1f800004 + uVar65) + iVar37 * -8))))) {
                uVar47 = *(undefined4 *)((int)puVar61 + (uVar14 >> 0x12 & 0xfc) + iVar41);
                uVar50 = *(undefined4 *)((int)puVar61 + (uVar14 >> 0xc & 0xfc) + iVar41);
                piVar55 = puVar11 + (uVar29 + (uVar14 & 0xf8) + 0x40) * 2;
                iVar49 = 0x30000000;
                if ((uVar14 & 4) != 0) {
                  iVar49 = 0x32000000;
                  *ptr_graphicsRelated = 0x2000000;
                  ptr_graphicsRelated[2] = 0;
                  *(ushort *)(ptr_graphicsRelated + 1) = (ushort)((uVar14 & 3) << 5) | 0x600;
                  *(undefined2 *)((int)ptr_graphicsRelated + 6) = 0xe100;
                  puVar32 = (undefined2 *)*piVar55;
                  *piVar55 = (int)ptr_graphicsRelated;
                  if (puVar32 == (undefined2 *)0x0) {
                    piVar55[1] = (int)ptr_graphicsRelated;
                    ptr_graphicsRelated = ptr_graphicsRelated + 3;
                  }
                  else {
                    *puVar32 = (short)ptr_graphicsRelated;
                    *(undefined *)(puVar32 + 1) = uVar36;
                    ptr_graphicsRelated = ptr_graphicsRelated + 3;
                  }
                }
                *ptr_graphicsRelated = 0x6000000;
                ptr_graphicsRelated[1] = iVar52 + iVar49;
                ptr_graphicsRelated[2] = uVar21;
                ptr_graphicsRelated[3] = uVar47;
                ptr_graphicsRelated[4] = uVar28;
                ptr_graphicsRelated[5] = uVar50;
                ptr_graphicsRelated[6] = uVar17;
                puVar32 = (undefined2 *)*piVar55;
                *piVar55 = (int)ptr_graphicsRelated;
                if (puVar32 == (undefined2 *)0x0) {
                  piVar55[1] = (int)ptr_graphicsRelated;
                  ptr_graphicsRelated = ptr_graphicsRelated + 7;
                }
                else {
                  *puVar32 = (short)ptr_graphicsRelated;
                  *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
                  ptr_graphicsRelated = ptr_graphicsRelated + 7;
                }
              }
            }
          }
          goto LAB_80026390;
        }
      }
    }
  }
  puVar16 = LODDistanceRelated;
  iVar70 = DAT_800785c0;
  puVar11 = ptr_maybe_graphicsArray2;
  puVar60 = &DAT_800718f4;
  puVar76 = &DAT_80071af4;
  puVar73 = &DAT_80071cf4;
  gte_ldbkdir((uint)cameraPosition.x >> 2,(uint)cameraPosition.y >> 2,(uint)cameraPosition.z >> 2);
LAB_800267e4:
  do {
    uVar26 = *puVar60;
    puVar60 = puVar60 + 1;
    if (uVar26 == 0) {
      *puVar73 = 0;
      *puVar76 = 0;
      iVar34 = DAT_800785c4;
      puVar9 = ptr_maybe_graphicsArray2;
      iVar70 = 0;
      puVar60 = &DAT_80071cf4;
LAB_800276b4:
      uVar26 = *puVar60;
      puVar61 = puVar60 + 1;
      if (uVar26 == 0) {
        DAT_1f8003fc = &DAT_80071cf4;
        puVar60 = &DAT_80071af4;
LAB_80028590:
        do {
          uVar26 = *puVar60;
          puVar61 = puVar60 + 1;
          if (uVar26 == 0) {
            puVar60 = &DAT_80071af4;
LAB_80029500:
            do {
              uVar26 = *puVar60;
              puVar61 = puVar60 + 1;
              if (uVar26 == 0) {
                puVar16 = &DAT_80071cf4;
                puVar11 = DAT_1f8003fc;
                do {
                  piVar74 = (int *)*puVar16;
                  if (puVar16 == puVar11) {
                    return;
                  }
                  puVar16 = puVar16 + 1;
                  cVar2 = *(char *)((int)piVar74 + 3);
                  *(undefined *)((int)piVar74 + 3) = 0;
                  piVar55 = piVar74;
                  if (cVar2 == '\f') {
                    FLOAT_1f800000 = (float)piVar74[2];
                    _DAT_1f800020 = piVar74[5];
                    _DAT_1f800060 = piVar74[8];
                    _DAT_1f800080 = piVar74[0xb];
                    iVar70 = (int)(short)_DAT_1f800020;
                    iVar41 = (int)(short)_DAT_1f800060;
                    DAT_1f800010 = (undefined2)(SUB42(FLOAT_1f800000,0) + iVar70 >> 1);
                    DAT_1f800030._0_2_ = (undefined2)(SUB42(FLOAT_1f800000,0) + iVar41 >> 1);
                    DAT_1f800070 = (undefined2)(iVar41 + (short)_DAT_1f800080 >> 1);
                    iVar34 = _DAT_1f800020 >> 0x10;
                    iVar49 = _DAT_1f800060 >> 0x10;
                    DAT_1f800012 = (undefined2)(((int)FLOAT_1f800000 >> 0x10) + iVar34 >> 1);
                    DAT_1f800030._2_2_ = (undefined2)(((int)FLOAT_1f800000 >> 0x10) + iVar49 >> 1);
                    DAT_1f800040 = CONCAT22((short)(iVar34 + iVar49 >> 1),
                                            (short)(iVar70 + iVar41 >> 1));
                    DAT_1f800050 = CONCAT22((short)(iVar34 + (_DAT_1f800080 >> 0x10) >> 1),
                                            (short)(iVar70 + (short)_DAT_1f800080 >> 1));
                    DAT_1f800072 = (undefined2)(iVar49 + (_DAT_1f800080 >> 0x10) >> 1);
                    _DAT_1f800004 = piVar74[1] + 0xf8000000;
                    _DAT_1f800024 = piVar74[4] + 0xf8000000;
                    _DAT_1f800064 = piVar74[7] + 0xf8000000;
                    _DAT_1f800084 = piVar74[10] + 0xf8000000;
                    uVar26 = _DAT_1f800024 & 0xfffefeff;
                    uVar30 = _DAT_1f800064 & 0xfffefeff;
                    _DAT_1f800014 = (_DAT_1f800004 & 0xfffefeff) + uVar26 >> 1;
                    DAT_1f800034 = (_DAT_1f800004 & 0xfffefeff) + uVar30 >> 1;
                    DAT_1f800044 = uVar26 + uVar30 >> 1;
                    DAT_1f800054 = uVar26 + (_DAT_1f800084 & 0xfffefeff) >> 1;
                    _DAT_1f800074 = uVar30 + (_DAT_1f800084 & 0xfffefeff) >> 1;
                    uVar26 = piVar74[3];
                    uVar30 = piVar74[6];
                    uVar45 = piVar74[9];
                    uVar59 = piVar74[0xc];
                    uVar14 = uVar26 & 0xffff0000;
                    uVar46 = uVar30 & 0xffff0000;
                    _DAT_1f800008 = CONCAT22(DAT_1f80000a,(short)uVar26);
                    _DAT_1f800028 = CONCAT22(DAT_1f80002a,(short)uVar30);
                    DAT_1f800068 = CONCAT22(DAT_1f800068._2_2_,(short)uVar45);
                    DAT_1f800088 = CONCAT22(DAT_1f800088._2_2_,(short)uVar59);
                    uVar65 = uVar30 & 0xff00;
                    uVar21 = uVar45 & 0xff00;
                    _DAT_1f800018 = CONCAT22(DAT_1f80001a,(short)((uVar26 & 0xff00) + uVar65 >> 1));
                    DAT_1f800038 = CONCAT22(DAT_1f800038._2_2_,
                                            (short)((uVar26 & 0xff00) + uVar21 >> 1));
                    DAT_1f800048 = CONCAT22(DAT_1f800048._2_2_,(short)(uVar65 + uVar21 >> 1));
                    DAT_1f800058 = CONCAT22(DAT_1f800058._2_2_,
                                            (short)(uVar65 + (uVar59 & 0xff00) >> 1));
                    DAT_1f800078 = CONCAT22(DAT_1f800078._2_2_,
                                            (short)(uVar21 + (uVar59 & 0xff00) >> 1));
                    uVar30 = uVar30 & 0xff;
                    uVar45 = uVar45 & 0xff;
                    _DAT_1f800018 = CONCAT31(ram0x1f800019,(char)((uVar26 & 0xff) + uVar30 >> 1));
                    DAT_1f800038 = CONCAT31(DAT_1f800038._1_3_,(char)((uVar26 & 0xff) + uVar45 >> 1)
                                           );
                    DAT_1f800048 = CONCAT31(DAT_1f800048._1_3_,(char)(uVar30 + uVar45 >> 1));
                    DAT_1f800058 = CONCAT31(DAT_1f800058._1_3_,(char)(uVar30 + (uVar59 & 0xff) >> 1)
                                           );
                    DAT_1f800078 = CONCAT31(DAT_1f800078._1_3_,(char)(uVar45 + (uVar59 & 0xff) >> 1)
                                           );
                    pfVar67 = &FLOAT_1f800000;
                    do {
                      fVar18 = *pfVar67;
                      bVar40 = (int)fVar18 + -0x10000 < 1;
                      if (-1 < (int)fVar18 + -0x1000000) {
                        bVar40 = bVar40 | 2;
                      }
                      if ((int)fVar18 * 0x10000 < 1) {
                        bVar40 = bVar40 | 4;
                      }
                      pfVar68 = pfVar67 + 4;
                      if (-1 < (int)fVar18 * 0x10000 + -0x2000000) {
                        bVar40 = bVar40 | 8;
                      }
                      *(byte *)((int)pfVar67 + 0xf) = bVar40;
                      pfVar67 = pfVar68;
                    } while (pfVar68 != (float *)&DAT_1f800090);
                    iVar70 = *piVar74;
                    puVar60 = &DAT_8006d5e4;
                    puVar61 = (uint *)&DAT_8006d614;
                  }
                  else {
                    FLOAT_1f800000 = (float)piVar74[2];
                    _DAT_1f800020 = piVar74[5];
                    DAT_1f800050 = piVar74[8];
                    DAT_1f800010 = (undefined2)
                                   ((int)SUB42(FLOAT_1f800000,0) + (int)(short)_DAT_1f800020 >> 1);
                    DAT_1f800030._0_2_ =
                         (undefined2)((int)SUB42(FLOAT_1f800000,0) + (int)(short)DAT_1f800050 >> 1);
                    DAT_1f800012 = (undefined2)
                                   (((int)FLOAT_1f800000 >> 0x10) + (_DAT_1f800020 >> 0x10) >> 1);
                    DAT_1f800030._2_2_ =
                         (undefined2)(((int)FLOAT_1f800000 >> 0x10) + (DAT_1f800050 >> 0x10) >> 1);
                    DAT_1f800040 = CONCAT22((short)((_DAT_1f800020 >> 0x10) + (DAT_1f800050 >> 0x10)
                                                   >> 1),
                                            (short)((int)(short)_DAT_1f800020 +
                                                    (int)(short)DAT_1f800050 >> 1));
                    _DAT_1f800004 = piVar74[1];
                    _DAT_1f800024 = piVar74[4];
                    DAT_1f800054 = piVar74[7];
                    _DAT_1f800014 = (_DAT_1f800004 & 0xfffefeff) + (_DAT_1f800024 & 0xfffefeff) >> 1
                    ;
                    DAT_1f800034 = (_DAT_1f800004 & 0xfffefeff) + (DAT_1f800054 & 0xfffefeff) >> 1;
                    DAT_1f800044 = (_DAT_1f800024 & 0xfffefeff) + (DAT_1f800054 & 0xfffefeff) >> 1;
                    uVar26 = piVar74[3];
                    uVar30 = piVar74[6];
                    uVar45 = piVar74[9];
                    uVar14 = uVar26 & 0xffff0000;
                    uVar46 = uVar30 & 0xffff0000;
                    _DAT_1f800008 = CONCAT22(DAT_1f80000a,(short)uVar26);
                    _DAT_1f800028 = CONCAT22(DAT_1f80002a,(short)uVar30);
                    DAT_1f800058 = CONCAT22(DAT_1f800058._2_2_,(short)uVar45);
                    _DAT_1f800018 =
                         CONCAT22(DAT_1f80001a,(short)((uVar26 & 0xff00) + (uVar30 & 0xff00) >> 1));
                    DAT_1f800038 = CONCAT22(DAT_1f800038._2_2_,
                                            (short)((uVar26 & 0xff00) + (uVar45 & 0xff00) >> 1));
                    DAT_1f800048 = CONCAT22(DAT_1f800048._2_2_,
                                            (short)((uVar30 & 0xff00) + (uVar45 & 0xff00) >> 1));
                    _DAT_1f800018 =
                         CONCAT31(ram0x1f800019,(char)((uVar26 & 0xff) + (uVar30 & 0xff) >> 1));
                    DAT_1f800038 = CONCAT31(DAT_1f800038._1_3_,
                                            (char)((uVar26 & 0xff) + (uVar45 & 0xff) >> 1));
                    DAT_1f800048 = CONCAT31(DAT_1f800048._1_3_,
                                            (char)((uVar30 & 0xff) + (uVar45 & 0xff) >> 1));
                    pfVar67 = &FLOAT_1f800000;
                    do {
                      fVar18 = *pfVar67;
                      bVar40 = (int)fVar18 + -0x10000 < 1;
                      if (-1 < (int)fVar18 + -0x1000000) {
                        bVar40 = bVar40 | 2;
                      }
                      if ((int)fVar18 * 0x10000 < 1) {
                        bVar40 = bVar40 | 4;
                      }
                      pfVar68 = pfVar67 + 4;
                      if (-1 < (int)fVar18 * 0x10000 + -0x2000000) {
                        bVar40 = bVar40 | 8;
                      }
                      *(byte *)((int)pfVar67 + 0xf) = bVar40;
                      pfVar67 = pfVar68;
                    } while (pfVar68 != (float *)&DAT_1f800060);
                    iVar70 = *piVar74;
                    puVar60 = &DAT_8006d5c8;
                    puVar61 = &DAT_8006d5e4;
                  }
                  while (uVar26 = *puVar60, puVar60 != puVar61) {
                    puVar60 = puVar60 + 1;
                    uVar30 = uVar26 >> 0x18;
                    uVar45 = uVar26 >> 0x10 & 0xff;
                    uVar59 = uVar26 >> 8 & 0xff;
                    uVar4 = *(ushort *)((int)&DAT_1f800008 + uVar30);
                    if ((char)(*(byte *)((int)&DAT_1f80000e + uVar30 + 1) &
                               *(byte *)((int)&DAT_1f80000e + uVar45 + 1) &
                              *(byte *)((int)&DAT_1f80000e + uVar59 + 1)) < '\x01') {
                      uVar5 = *(ushort *)((int)&DAT_1f800008 + uVar45);
                      uVar6 = *(ushort *)((int)&DAT_1f800008 + uVar59);
                      uVar47 = *(undefined4 *)((int)&DAT_1f800004 + uVar45);
                      uVar50 = *(undefined4 *)((int)&DAT_1f800004 + uVar59);
                      ptr_graphicsRelated[1] = *(undefined4 *)((int)&DAT_1f800004 + uVar30);
                      ptr_graphicsRelated[4] = uVar47;
                      ptr_graphicsRelated[7] = uVar50;
                      ptr_graphicsRelated[3] = uVar4 + uVar14;
                      ptr_graphicsRelated[6] = uVar5 + uVar46;
                      ptr_graphicsRelated[9] = (uint)uVar6;
                      uVar47 = *(undefined4 *)(uVar30 + 0x1f800000);
                      uVar50 = *(undefined4 *)(uVar45 + 0x1f800000);
                      uVar53 = *(undefined4 *)(uVar59 + 0x1f800000);
                      iVar34 = (int)*(short *)((int)&FLOAT_1f800000 + uVar30 + 2);
                      if ((uVar26 & 1) == 0) {
                        iVar41 = (int)*(short *)((int)&FLOAT_1f800000 + uVar45 + 2);
                        iVar49 = (int)*(short *)((int)&FLOAT_1f800000 + uVar59 + 2);
                        iVar52 = iVar34 - iVar41;
                        if ((((-1 < iVar52 + -0x200) ||
                             (iVar34 = iVar34 - iVar49, iVar52 + 0x200 < 1)) ||
                            (-1 < iVar34 + -0x200)) ||
                           (((iVar41 = iVar41 - iVar49, iVar34 + 0x200 < 1 || (-1 < iVar41 + -0x200)
                             ) || (iVar34 = (int)*(short *)(undefined4 *)(uVar30 + 0x1f800000),
                                  iVar41 + 0x200 < 1)))) {
LAB_8002a668:
                          *puVar11 = ptr_graphicsRelated;
                          puVar11 = puVar11 + 1;
                          goto LAB_8002a63c;
                        }
                        iVar41 = (int)*(short *)(undefined4 *)(uVar45 + 0x1f800000);
                        iVar49 = (int)*(short *)(undefined4 *)(uVar59 + 0x1f800000);
                        iVar52 = iVar34 - iVar41;
                        if (((-1 < iVar52 + -0x400) ||
                            (iVar34 = iVar34 - iVar49, iVar52 + 0x400 < 1)) ||
                           ((-1 < iVar34 + -0x400 ||
                            (((iVar41 = iVar41 - iVar49, iVar34 + 0x400 < 1 ||
                              (-1 < iVar41 + -0x400)) ||
                             (ptr_graphicsRelated[2] = uVar47, iVar41 + 0x400 < 1))))))
                        goto LAB_8002a668;
                      }
                      else {
LAB_8002a63c:
                        ptr_graphicsRelated[2] = uVar47;
                      }
                      ptr_graphicsRelated[5] = uVar50;
                      ptr_graphicsRelated[8] = uVar53;
                      *ptr_graphicsRelated = 0x9000000;
                      *(short *)piVar55 = (short)ptr_graphicsRelated;
                      *(char *)((int)piVar55 + 2) = (char)((uint)ptr_graphicsRelated >> 0x10);
                      piVar55 = ptr_graphicsRelated;
                      ptr_graphicsRelated = ptr_graphicsRelated + 10;
                    }
                  }
                  puVar9 = ptr_maybe_graphicsArray2;
                  if (iVar70 == 0) {
                    do {
                      puVar24 = puVar9;
                      puVar9 = puVar24 + 2;
                    } while ((int *)*puVar24 != piVar74);
                    *puVar24 = piVar55;
                  }
                  else {
                    *(short *)piVar55 = (short)iVar70;
                    *(char *)((int)piVar55 + 2) = (char)((uint)iVar70 >> 0x10);
                  }
                } while( true );
              }
              iVar41 = uVar26 * 4;
              if (-1 < (int)uVar26) {
                iVar49 = gte_stRBK();
                iVar52 = gte_stGBK();
                iVar70 = gte_stBBK();
                pfVar67 = (float *)((*(uint *)(iVar41 + 8) >> 0xe) - iVar49);
                puVar69 = (undefined2 *)(iVar52 + (*(uint *)(iVar41 + 8) & 0xffff) * -4);
                uVar30 = *(uint *)(iVar41 + 0x14);
                iVar70 = iVar70 - (*(uint *)(iVar41 + 0xc) >> 0xe);
                puVar11 = (undefined4 *)(iVar41 + 0x1c + (uVar30 >> 0x16 & 0x3fc));
                puVar16 = puVar11 + (uVar30 & 0xff);
                uVar26 = *puVar61;
                puVar61 = puVar60 + 2;
                puVar66 = (uint *)((int)puVar16 +
                                  (*(uint *)(iVar41 + 0xc) & 0xffff) * -0x10 + (uVar30 >> 5 & 0x7f8)
                                  );
              }
              puVar60 = puVar61;
            } while ((uVar26 & 2) == 0);
            puVar61 = (uint *)(uVar26 & 0xfffffffc);
            uVar14 = *puVar61;
            uVar30 = *(uint *)((uVar14 >> 0x16 & 0x3fc) + (int)puVar11);
            uVar45 = *(uint *)((uVar14 >> 0xe & 0x3fc) + (int)puVar11);
            uVar14 = puVar11[uVar14 & 0xff];
            uVar46 = puVar61[2];
            iVar41 = (uVar30 >> 0x13 & 0x1ffc) + (int)pfVar67;
            iVar52 = (uVar45 >> 0x13 & 0x1ffc) + (int)pfVar67;
            iVar49 = (uVar14 >> 0x13 & 0x1ffc) + (int)pfVar67;
            DAT_1f8000e0 = (undefined2)iVar49;
            iVar58 = iVar41 + iVar52 >> 1;
            DAT_1f800010 = (undefined2)(iVar41 + iVar58 >> 1);
            DAT_1f800030._0_2_ = (undefined2)(iVar52 + iVar58 >> 1);
            iVar33 = iVar41 + iVar49 >> 1;
            DAT_1f8000c0 = (undefined2)(iVar49 + iVar33 >> 1);
            iVar35 = iVar52 + iVar49 >> 1;
            DAT_1f8000b0 = (undefined2)iVar35;
            DAT_1f8000d0 = (undefined2)(iVar49 + iVar35 >> 1);
            DAT_1f800070 = (undefined2)(iVar52 + iVar33 >> 1);
            DAT_1f8000a0 = (undefined2)(iVar49 + iVar58 >> 1);
            uVar59 = puVar61[3];
            iVar49 = (int)puVar69 - (uVar30 >> 8 & 0x1ffc);
            iVar37 = (int)puVar69 - (uVar45 >> 8 & 0x1ffc);
            iVar57 = (int)puVar69 - (uVar14 >> 8 & 0x1ffc);
            FLOAT_1f800000 = (float)CONCAT22((short)iVar49,(short)iVar41);
            DAT_1f800040 = CONCAT22((short)iVar37,(short)iVar52);
            DAT_1f8000e2 = (undefined2)iVar57;
            iVar54 = iVar49 + iVar37 >> 1;
            _DAT_1f800020 = CONCAT22((short)iVar54,(short)iVar58);
            DAT_1f800012 = (undefined2)(iVar49 + iVar54 >> 1);
            DAT_1f800030._2_2_ = (undefined2)(iVar37 + iVar54 >> 1);
            iVar58 = iVar49 + iVar57 >> 1;
            DAT_1f800090 = CONCAT22((short)iVar58,(short)iVar33);
            DAT_1f800050 = CONCAT22((short)(iVar49 + iVar58 >> 1),(short)(iVar41 + iVar33 >> 1));
            DAT_1f8000c2 = (undefined2)(iVar57 + iVar58 >> 1);
            iVar33 = iVar37 + iVar57 >> 1;
            DAT_1f8000b2 = (undefined2)iVar33;
            _DAT_1f800080 = CONCAT22((short)(iVar37 + iVar33 >> 1),(short)(iVar52 + iVar35 >> 1));
            DAT_1f8000d2 = (undefined2)(iVar57 + iVar33 >> 1);
            _DAT_1f800060 = CONCAT22((short)(iVar49 + iVar33 >> 1),(short)(iVar41 + iVar35 >> 1));
            DAT_1f800072 = (undefined2)(iVar37 + iVar58 >> 1);
            DAT_1f8000a2 = (undefined2)(iVar57 + iVar54 >> 1);
            iVar52 = iVar70 + (uVar30 & 0x3ff) * -4;
            iVar37 = iVar70 + (uVar45 & 0x3ff) * -4;
            iVar57 = iVar70 + (uVar14 & 0x3ff) * -4;
            _DAT_1f800004 = CONCAT22(DAT_1f800006,(short)iVar52);
            DAT_1f800044 = CONCAT22(DAT_1f800044._2_2_,(short)iVar37);
            DAT_1f8000e4 = (undefined2)iVar57;
            iVar58 = iVar52 + iVar37 >> 1;
            _DAT_1f800024 = CONCAT22(DAT_1f800026,(short)iVar58);
            _DAT_1f800014 = CONCAT22(DAT_1f800016,(short)(iVar52 + iVar58 >> 1));
            DAT_1f800034 = CONCAT22(DAT_1f800034._2_2_,(short)(iVar37 + iVar58 >> 1));
            iVar54 = iVar52 + iVar57 >> 1;
            DAT_1f800094 = (undefined2)iVar54;
            DAT_1f800054 = CONCAT22(DAT_1f800054._2_2_,(short)(iVar52 + iVar54 >> 1));
            DAT_1f8000c4 = (undefined2)(iVar57 + iVar54 >> 1);
            iVar33 = iVar37 + iVar57 >> 1;
            DAT_1f8000b4 = (undefined2)iVar33;
            _DAT_1f800084 = CONCAT22(DAT_1f800084_2,(short)(iVar37 + iVar33 >> 1));
            DAT_1f8000d4 = (undefined2)(iVar57 + iVar33 >> 1);
            _DAT_1f800064 = CONCAT22(DAT_1f800064_2,(short)(iVar52 + iVar33 >> 1));
            _DAT_1f800074 = CONCAT22(DAT_1f800074_2,(short)(iVar37 + iVar54 >> 1));
            DAT_1f8000a4 = (undefined2)(iVar57 + iVar58 >> 1);
            uVar30 = puVar61[1];
            iVar37 = 0x34000000;
            if ((uVar46 & 0x80) != 0) {
              iVar37 = 0x36000000;
            }
            DAT_1f8000e8 = puVar16[uVar30 & 0xff] + iVar37;
            DAT_1f800048 = *(int *)((uVar30 >> 0xe & 0x3fc) + (int)puVar16) + iVar37;
            _DAT_1f800008 = *(int *)((uVar30 >> 0x16 & 0x3fc) + (int)puVar16) + iVar37;
            uVar14 = DAT_1f8000e8 & 0xfffefeff;
            uVar45 = DAT_1f800048 & 0xfffefeff;
            uVar30 = _DAT_1f800008 & 0xfffefeff;
            _DAT_1f800028 = uVar30 + uVar45 >> 1;
            uVar65 = _DAT_1f800028 & 0xfffefeff;
            _DAT_1f800018 = uVar30 + uVar65 >> 1;
            DAT_1f800038 = uVar45 + uVar65 >> 1;
            DAT_1f800098 = uVar30 + uVar14 >> 1;
            uVar21 = DAT_1f800098 & 0xfffefeff;
            DAT_1f800058 = uVar30 + uVar21 >> 1;
            DAT_1f8000c8 = uVar14 + uVar21 >> 1;
            DAT_1f8000b8 = uVar45 + uVar14 >> 1;
            uVar28 = DAT_1f8000b8 & 0xfffefeff;
            DAT_1f800088 = uVar45 + uVar28 >> 1;
            DAT_1f8000d8 = uVar14 + uVar28 >> 1;
            DAT_1f800068 = uVar30 + uVar28 >> 1;
            DAT_1f800078 = uVar45 + uVar21 >> 1;
            DAT_1f8000a8 = uVar14 + uVar65 >> 1;
            _DAT_1f8000f0 = 0;
            iVar41 = (int)(short)iVar41;
            iVar49 = (int)(short)iVar49;
            iVar52 = (int)(short)iVar52;
            if ((((iVar41 >> 8) + 1 >> 1 == 0) && ((iVar49 >> 8) + 1 >> 1 == 0)) &&
               ((iVar52 >> 8) + 1 >> 1 == 0)) {
              iVar41 = iVar41 << 4;
              iVar49 = iVar49 * 0x10 + iVar52 * 0x100000;
              bVar1 = true;
            }
            else {
              iVar49 = iVar49 + iVar52 * 0x10000;
              bVar1 = false;
            }
            gte_ldVZ0(iVar41);
            gte_ldVXY0(iVar49);
            psVar44 = &DAT_1f800010;
            do {
              gte_rtps_b();
              iVar41 = (int)*psVar44;
              iVar49 = (int)psVar44[1];
              iVar52 = (int)psVar44[2];
              if ((((iVar41 >> 8) + 1 >> 1 == 0) && ((iVar49 >> 8) + 1 >> 1 == 0)) &&
                 ((iVar52 >> 8) + 1 >> 1 == 0)) {
                iVar41 = iVar41 << 4;
                iVar49 = iVar49 * 0x10 + iVar52 * 0x100000;
                bVar7 = true;
              }
              else {
                iVar49 = iVar49 + iVar52 * 0x10000;
                bVar7 = false;
              }
              iVar52 = gte_stSXY2();
              uVar30 = gte_stSZ3();
              gte_ldVZ0(iVar41);
              gte_ldVXY0(iVar49);
              psVar43 = psVar44 + 8;
              if (bVar1) {
                uVar30 = uVar30 >> 4;
              }
              if ((int)uVar30 < 1) {
                uVar30 = uVar30 | 0xf000;
              }
              if (iVar52 + -0x10000 < 1) {
                uVar30 = uVar30 | 0x1000;
              }
              if (-1 < iVar52 + -0x1000000) {
                uVar30 = uVar30 | 0x2000;
              }
              if (iVar52 * 0x10000 < 1) {
                uVar30 = uVar30 | 0x4000;
              }
              *(int *)(psVar44 + -8) = iVar52;
              if (-1 < iVar52 * 0x10000 + -0x2000000) {
                uVar30 = uVar30 | 0x8000;
              }
              *(uint *)(psVar44 + -6) = uVar30;
              psVar44 = psVar43;
              bVar1 = bVar7;
            } while (psVar43 != &DAT_1f800100);
            uVar30 = (uint)((int)puVar61 - (int)puVar66) >> 4;
            piVar55 = (int *)((uVar46 & 0x7f) * 0xa8 + iVar34);
            uVar30 = (int)*(char *)((int)&DAT_8006fcf4 + ((int)uVar46 >> 0x14) + uVar30) & 3U |
                     ((int)*(char *)((int)&DAT_8006fcf4 + ((int)(uVar59 << 0xc) >> 0x14) + uVar30) &
                     3U) << 8 |
                     ((int)*(char *)((int)&DAT_8006fcf4 + ((int)uVar59 >> 0x14) + uVar30) & 3U) <<
                     0x10;
            puVar61 = (uint *)(&DAT_8006d1c8 + ((uVar46 & 0x300) >> 8) * 0x6c);
            while (puVar62 = puVar61, uVar45 = uVar30, uVar45 != 0) {
              uVar30 = uVar45 >> 8;
              puVar61 = puVar62 + 9;
              if ((uVar45 & 0xff) != 0) {
                uVar28 = puVar62[1];
                uVar14 = *puVar62 >> 0x10;
                uVar65 = *puVar62 & 0xffff;
                uVar21 = uVar28 >> 0x10;
                uVar22 = *(uint *)((int)&DAT_1f800004 + uVar14);
                uVar29 = *(uint *)((int)&DAT_1f800004 + uVar65);
                uVar31 = *(uint *)((int)&DAT_1f800004 + uVar21);
                uVar17 = puVar62[2];
                if ((uVar22 & uVar29 & uVar31 & 0xf000) == 0) {
                  iVar49 = *piVar55;
                  uVar47 = *(undefined4 *)(uVar65 + 0x1f800000);
                  uVar50 = *(undefined4 *)(uVar21 + 0x1f800000);
                  ptr_graphicsRelated[2] = *(undefined4 *)(uVar14 + 0x1f800000);
                  ptr_graphicsRelated[5] = uVar47;
                  ptr_graphicsRelated[8] = uVar50;
                  uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar65);
                  uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar21);
                  ptr_graphicsRelated[1] = *(undefined4 *)((int)&DAT_1f800008 + uVar14);
                  ptr_graphicsRelated[4] = uVar47;
                  ptr_graphicsRelated[7] = uVar50;
                  iVar41 = piVar55[1];
                  ptr_graphicsRelated[3] = (uVar28 & 0xffff) + iVar49;
                  ptr_graphicsRelated[6] = ((int)uVar17 >> 0x10) + iVar41;
                  ptr_graphicsRelated[9] = (uVar17 & 0xffff) + iVar49;
                  *ptr_graphicsRelated = 0x9000000;
                  piVar25 = puVar9 + (((uVar22 & 0xfff) + (uVar29 & 0xfff) + (uVar31 & 0xfff) * 2 >>
                                      7) + ((uVar59 & 0x38) >> 1)) * 2;
                  puVar32 = (undefined2 *)*piVar25;
                  *piVar25 = (int)ptr_graphicsRelated;
                  if (puVar32 == (undefined2 *)0x0) {
                    piVar25[1] = (int)ptr_graphicsRelated;
                    ptr_graphicsRelated = ptr_graphicsRelated + 10;
                  }
                  else {
                    *puVar32 = (short)ptr_graphicsRelated;
                    *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
                    ptr_graphicsRelated = ptr_graphicsRelated + 10;
                  }
                }
                uVar28 = puVar62[4];
                uVar14 = puVar62[3] >> 0x10;
                uVar65 = puVar62[3] & 0xffff;
                uVar21 = uVar28 >> 0x10;
                uVar22 = *(uint *)((int)&DAT_1f800004 + uVar14);
                uVar29 = *(uint *)((int)&DAT_1f800004 + uVar65);
                uVar31 = *(uint *)((int)&DAT_1f800004 + uVar21);
                uVar17 = puVar62[5];
                if ((uVar22 & uVar29 & uVar31 & 0xf000) == 0) {
                  iVar49 = *piVar55;
                  uVar47 = *(undefined4 *)(uVar65 + 0x1f800000);
                  uVar50 = *(undefined4 *)(uVar21 + 0x1f800000);
                  ptr_graphicsRelated[2] = *(undefined4 *)(uVar14 + 0x1f800000);
                  ptr_graphicsRelated[5] = uVar47;
                  ptr_graphicsRelated[8] = uVar50;
                  uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar65);
                  uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar21);
                  ptr_graphicsRelated[1] = *(undefined4 *)((int)&DAT_1f800008 + uVar14);
                  ptr_graphicsRelated[4] = uVar47;
                  ptr_graphicsRelated[7] = uVar50;
                  iVar41 = piVar55[1];
                  ptr_graphicsRelated[3] = (uVar28 & 0xffff) + iVar49;
                  ptr_graphicsRelated[6] = ((int)uVar17 >> 0x10) + iVar41;
                  ptr_graphicsRelated[9] = (uVar17 & 0xffff) + iVar49;
                  *ptr_graphicsRelated = 0x9000000;
                  piVar25 = puVar9 + (((uVar22 & 0xfff) + (uVar29 & 0xfff) + (uVar31 & 0xfff) * 2 >>
                                      7) + ((uVar59 & 0x38) >> 1)) * 2;
                  puVar32 = (undefined2 *)*piVar25;
                  *piVar25 = (int)ptr_graphicsRelated;
                  if (puVar32 == (undefined2 *)0x0) {
                    piVar25[1] = (int)ptr_graphicsRelated;
                    ptr_graphicsRelated = ptr_graphicsRelated + 10;
                  }
                  else {
                    *puVar32 = (short)ptr_graphicsRelated;
                    *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
                    ptr_graphicsRelated = ptr_graphicsRelated + 10;
                  }
                }
                if ((uVar45 & 1) != 0) {
                  uVar21 = puVar62[7];
                  uVar45 = puVar62[6] >> 0x10;
                  uVar14 = puVar62[6] & 0xffff;
                  uVar65 = uVar21 >> 0x10;
                  uVar17 = *(uint *)((int)&DAT_1f800004 + uVar45);
                  uVar22 = *(uint *)((int)&DAT_1f800004 + uVar14);
                  uVar29 = *(uint *)((int)&DAT_1f800004 + uVar65);
                  uVar28 = puVar62[8];
                  if ((uVar17 & uVar22 & uVar29 & 0xf000) == 0) {
                    iVar49 = *piVar55;
                    uVar47 = *(undefined4 *)(uVar14 + 0x1f800000);
                    uVar50 = *(undefined4 *)(uVar65 + 0x1f800000);
                    ptr_graphicsRelated[2] = *(undefined4 *)(uVar45 + 0x1f800000);
                    ptr_graphicsRelated[5] = uVar47;
                    ptr_graphicsRelated[8] = uVar50;
                    uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar14);
                    uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar65);
                    ptr_graphicsRelated[1] = *(undefined4 *)((int)&DAT_1f800008 + uVar45);
                    ptr_graphicsRelated[4] = uVar47;
                    ptr_graphicsRelated[7] = uVar50;
                    iVar41 = piVar55[1];
                    ptr_graphicsRelated[3] = (uVar21 & 0xffff) + iVar49;
                    ptr_graphicsRelated[6] = ((int)uVar28 >> 0x10) + iVar41;
                    ptr_graphicsRelated[9] = (uVar28 & 0xffff) + iVar49;
                    *ptr_graphicsRelated = 0x9000000;
                    piVar25 = puVar9 + (((uVar17 & 0xfff) + (uVar22 & 0xfff) + (uVar29 & 0xfff) * 2
                                        >> 7) + ((uVar59 & 0x38) >> 1)) * 2;
                    puVar32 = (undefined2 *)*piVar25;
                    *piVar25 = (int)ptr_graphicsRelated;
                    if (puVar32 == (undefined2 *)0x0) {
                      piVar25[1] = (int)ptr_graphicsRelated;
                      ptr_graphicsRelated = ptr_graphicsRelated + 10;
                    }
                    else {
                      *puVar32 = (short)ptr_graphicsRelated;
                      *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
                      ptr_graphicsRelated = ptr_graphicsRelated + 10;
                    }
                  }
                }
              }
            }
            puVar61 = &DAT_8006d0f8;
LAB_80029e38:
            do {
              uVar30 = *puVar61;
              bVar1 = puVar61 == (uint *)0x8006d138;
              puVar61 = puVar61 + 1;
              if (bVar1) goto LAB_80029500;
              uVar45 = uVar46 >> 8 & 3;
              uVar65 = uVar30 >> 0x14 & 0xff0;
              uVar21 = uVar30 >> 0xc & 0xff0;
              uVar28 = uVar30 >> 4 & 0xff0;
              piVar25 = (int *)((int)piVar55 +
                               (char)(&DAT_8006d388)[uVar45 + (uVar30 & 0x3c)] + 0x28);
              uVar14 = piVar25[1];
              iVar49 = *piVar25;
              iVar41 = (uVar45 + uVar30 & 3) * 0x80 + (uVar14 >> 0x19 & 0x78);
              uVar30 = *(uint *)(&DAT_8006d3c8 + iVar41);
              sVar3 = *(short *)(&DAT_8006d3cc + iVar41);
              ptr_graphicsRelated[3] = (uVar30 & 0xffff) + iVar49;
              ptr_graphicsRelated[6] = ((int)uVar30 >> 0x10) + uVar14;
              ptr_graphicsRelated[9] = sVar3 + iVar49;
              uVar30 = *(uint *)((int)&DAT_1f800004 + uVar65);
              uVar45 = *(uint *)((int)&DAT_1f800004 + uVar21);
              uVar14 = *(uint *)((int)&DAT_1f800004 + uVar28);
              if ((uVar30 & uVar45 & uVar14 & 0xf000) == 0) {
                uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar21);
                uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar28);
                ptr_graphicsRelated[1] = *(undefined4 *)((int)&DAT_1f800008 + uVar65);
                ptr_graphicsRelated[4] = uVar47;
                ptr_graphicsRelated[7] = uVar50;
                uVar30 = (uVar30 & 0xfff) + (uVar45 & 0xfff) + (uVar14 & 0xfff) * 2;
                uVar47 = *(undefined4 *)(uVar65 + 0x1f800000);
                uVar50 = *(undefined4 *)(uVar21 + 0x1f800000);
                uVar53 = *(undefined4 *)(uVar28 + 0x1f800000);
                if ((uVar26 & 1) == 0) {
LAB_80029f60:
                  ptr_graphicsRelated[2] = uVar47;
                }
                else {
                  gte_ldSXY0(uVar47);
                  gte_ldSXY1(uVar50);
                  gte_ldSXY2(uVar53);
                  gte_nclip_b();
                  if ((uVar59 & 4) != 0) goto LAB_80029f60;
                  iVar41 = gte_stMAC0();
                  if ((uVar59 & 2) != 0) {
                    iVar41 = -iVar41;
                  }
                  ptr_graphicsRelated[2] = uVar47;
                  if (iVar41 < 0) goto LAB_80029e38;
                }
                ptr_graphicsRelated[5] = uVar50;
                ptr_graphicsRelated[8] = uVar53;
                puVar24 = DAT_1f8003fc;
                iVar41 = (int)*(short *)((int)&FLOAT_1f800000 + uVar65 + 2);
                iVar49 = (int)*(short *)((int)&FLOAT_1f800000 + uVar21 + 2);
                iVar52 = (int)*(short *)((int)&FLOAT_1f800000 + uVar28 + 2);
                iVar37 = iVar41 - iVar49;
                uVar36 = (undefined)((uint)ptr_graphicsRelated >> 0x10);
                if (((((iVar37 + -0x200 < 0) && (iVar41 = iVar41 - iVar52, 0 < iVar37 + 0x200)) &&
                     (iVar41 + -0x200 < 0)) &&
                    ((iVar49 = iVar49 - iVar52, 0 < iVar41 + 0x200 && (iVar49 + -0x200 < 0)))) &&
                   (iVar41 = (int)*(short *)(undefined4 *)(uVar65 + 0x1f800000), 0 < iVar49 + 0x200)
                   ) {
                  iVar49 = (int)*(short *)(undefined4 *)(uVar21 + 0x1f800000);
                  iVar52 = (int)*(short *)(undefined4 *)(uVar28 + 0x1f800000);
                  iVar37 = iVar41 - iVar49;
                  if (((-1 < iVar37 + -0x400) || (iVar41 = iVar41 - iVar52, iVar37 + 0x400 < 1)) ||
                     ((-1 < iVar41 + -0x400 ||
                      (((iVar49 = iVar49 - iVar52, iVar41 + 0x400 < 1 || (-1 < iVar49 + -0x400)) ||
                       (iVar49 + 0x400 < 1)))))) goto LAB_8002a04c;
                  if (uVar30 == 0) goto LAB_80029e38;
                  *ptr_graphicsRelated = 0x9000000;
                  piVar25 = puVar9 + ((uVar30 >> 7) + ((uVar59 & 0x38) >> 1)) * 2;
                  puVar32 = (undefined2 *)*piVar25;
                  *piVar25 = (int)ptr_graphicsRelated;
                  if (puVar32 != (undefined2 *)0x0) {
                    *puVar32 = (short)ptr_graphicsRelated;
                    *(undefined *)(puVar32 + 1) = uVar36;
                    ptr_graphicsRelated = ptr_graphicsRelated + 10;
                    goto LAB_80029e38;
                  }
                }
                else {
LAB_8002a04c:
                  *DAT_1f8003fc = ptr_graphicsRelated;
                  if (uVar30 == 0) goto LAB_80029e38;
                  DAT_1f8003fc = puVar24 + 1;
                  *ptr_graphicsRelated = 0x9000000;
                  piVar25 = puVar9 + ((uVar30 >> 7) + ((uVar59 & 0x38) >> 1)) * 2;
                  puVar32 = (undefined2 *)*piVar25;
                  *piVar25 = (int)ptr_graphicsRelated;
                  if (puVar32 != (undefined2 *)0x0) {
                    *puVar32 = (short)ptr_graphicsRelated;
                    *(undefined *)(puVar32 + 1) = uVar36;
                    ptr_graphicsRelated = ptr_graphicsRelated + 10;
                    goto LAB_80029e38;
                  }
                }
                piVar25[1] = (int)ptr_graphicsRelated;
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
            } while( true );
          }
          iVar41 = uVar26 * 4;
          if (-1 < (int)uVar26) {
            iVar49 = gte_stRBK();
            iVar52 = gte_stGBK();
            iVar70 = gte_stBBK();
            pfVar67 = (float *)((*(uint *)(iVar41 + 8) >> 0xe) - iVar49);
            puVar69 = (undefined2 *)(iVar52 + (*(uint *)(iVar41 + 8) & 0xffff) * -4);
            uVar30 = *(uint *)(iVar41 + 0x14);
            iVar70 = iVar70 - (*(uint *)(iVar41 + 0xc) >> 0xe);
            puVar11 = (undefined4 *)(iVar41 + 0x1c + (uVar30 >> 0x16 & 0x3fc));
            puVar16 = puVar11 + (uVar30 & 0xff);
            uVar26 = *puVar61;
            puVar61 = puVar60 + 2;
            puVar66 = (uint *)((int)puVar16 +
                              (*(uint *)(iVar41 + 0xc) & 0xffff) * -0x10 + (uVar30 >> 5 & 0x7f8));
          }
          puVar60 = puVar61;
        } while ((uVar26 & 2) != 0);
        puVar61 = (uint *)(uVar26 & 0xfffffffc);
        uVar46 = *puVar61;
        uVar30 = *(uint *)((uVar46 >> 0x16 & 0x3fc) + (int)puVar11);
        uVar45 = *(uint *)((uVar46 >> 0xe & 0x3fc) + (int)puVar11);
        uVar14 = puVar11[uVar46 & 0xff];
        uVar46 = *(uint *)((uVar46 >> 6 & 0x3fc) + (int)puVar11);
        uVar59 = puVar61[2];
        iVar41 = (uVar30 >> 0x13 & 0x1ffc) + (int)pfVar67;
        iVar37 = (uVar45 >> 0x13 & 0x1ffc) + (int)pfVar67;
        uVar65 = puVar61[3];
        iVar52 = (uVar14 >> 0x13 & 0x1ffc) + (int)pfVar67;
        iVar58 = (uVar46 >> 0x13 & 0x1ffc) + (int)pfVar67;
        DAT_1f800140 = (undefined2)iVar52;
        DAT_1f800180 = (undefined2)iVar58;
        iVar48 = iVar41 + iVar37 >> 1;
        DAT_1f800010 = (undefined2)(iVar41 + iVar48 >> 1);
        DAT_1f800030._0_2_ = (undefined2)(iVar37 + iVar48 >> 1);
        iVar49 = iVar52 + iVar58 >> 1;
        DAT_1f800160 = (undefined2)iVar49;
        DAT_1f800150 = (undefined2)(iVar52 + iVar49 >> 1);
        DAT_1f800170 = (undefined2)(iVar58 + iVar49 >> 1);
        iVar54 = iVar41 + iVar52 >> 1;
        DAT_1f8000a0 = (undefined2)iVar54;
        iVar33 = iVar37 + iVar58 >> 1;
        DAT_1f8000e0 = (undefined2)iVar33;
        iVar49 = iVar54 + iVar33 >> 1;
        DAT_1f8000c0 = (undefined2)iVar49;
        DAT_1f8000b0 = (undefined2)(iVar54 + iVar49 >> 1);
        DAT_1f8000d0 = (undefined2)(iVar33 + iVar49 >> 1);
        iVar49 = iVar41 + iVar54 >> 1;
        iVar57 = iVar37 + iVar33 >> 1;
        iVar54 = iVar52 + iVar54 >> 1;
        iVar52 = iVar58 + iVar33 >> 1;
        DAT_1f800130 = (undefined2)iVar52;
        iVar51 = iVar49 + iVar57 >> 1;
        DAT_1f800070 = (undefined2)iVar51;
        iVar58 = iVar54 + iVar52 >> 1;
        DAT_1f800110 = (undefined2)iVar58;
        DAT_1f800100 = (undefined2)(iVar54 + iVar58 >> 1);
        DAT_1f800120 = (undefined2)(iVar52 + iVar58 >> 1);
        iVar52 = (int)puVar69 - (uVar30 >> 8 & 0x1ffc);
        FLOAT_1f800000 = (float)CONCAT22((short)iVar52,(short)iVar41);
        iVar58 = (int)puVar69 - (uVar45 >> 8 & 0x1ffc);
        DAT_1f800040 = CONCAT22((short)iVar58,(short)iVar37);
        iVar33 = (int)puVar69 - (uVar14 >> 8 & 0x1ffc);
        DAT_1f800142 = (undefined2)iVar33;
        iVar35 = (int)puVar69 - (uVar46 >> 8 & 0x1ffc);
        DAT_1f800182 = (undefined2)iVar35;
        iVar37 = iVar52 + iVar58 >> 1;
        _DAT_1f800020 = CONCAT22((short)iVar37,(short)iVar48);
        DAT_1f800012 = (undefined2)(iVar52 + iVar37 >> 1);
        DAT_1f800030._2_2_ = (undefined2)(iVar58 + iVar37 >> 1);
        iVar37 = iVar33 + iVar35 >> 1;
        DAT_1f800162 = (undefined2)iVar37;
        DAT_1f800152 = (undefined2)(iVar33 + iVar37 >> 1);
        DAT_1f800172 = (undefined2)(iVar35 + iVar37 >> 1);
        iVar48 = iVar52 + iVar33 >> 1;
        DAT_1f8000a2 = (undefined2)iVar48;
        iVar56 = iVar58 + iVar35 >> 1;
        DAT_1f8000e2 = (undefined2)iVar56;
        iVar37 = iVar48 + iVar56 >> 1;
        DAT_1f8000c2 = (undefined2)iVar37;
        DAT_1f8000b2 = (undefined2)(iVar48 + iVar37 >> 1);
        DAT_1f8000d2 = (undefined2)(iVar56 + iVar37 >> 1);
        iVar37 = iVar52 + iVar48 >> 1;
        DAT_1f800050 = CONCAT22((short)iVar37,(short)iVar49);
        iVar58 = iVar58 + iVar56 >> 1;
        DAT_1f800090 = CONCAT22((short)iVar58,(short)iVar57);
        iVar33 = iVar33 + iVar48 >> 1;
        _DAT_1f8000f0 = CONCAT22((short)iVar33,(short)iVar54);
        iVar54 = iVar35 + iVar56 >> 1;
        DAT_1f800132 = (undefined2)iVar54;
        iVar35 = iVar37 + iVar58 >> 1;
        DAT_1f800072 = (undefined2)iVar35;
        _DAT_1f800060 = CONCAT22((short)(iVar37 + iVar35 >> 1),(short)(iVar49 + iVar51 >> 1));
        _DAT_1f800080 = CONCAT22((short)(iVar58 + iVar35 >> 1),(short)(iVar57 + iVar51 >> 1));
        iVar49 = iVar33 + iVar54 >> 1;
        DAT_1f800112 = (undefined2)iVar49;
        DAT_1f800102 = (undefined2)(iVar33 + iVar49 >> 1);
        DAT_1f800122 = (undefined2)(iVar54 + iVar49 >> 1);
        iVar49 = iVar70 + (uVar30 & 0x3ff) * -4;
        _DAT_1f800004 = CONCAT22(DAT_1f800006,(short)iVar49);
        iVar57 = iVar70 + (uVar45 & 0x3ff) * -4;
        DAT_1f800044 = CONCAT22(DAT_1f800044._2_2_,(short)iVar57);
        iVar58 = iVar70 + (uVar14 & 0x3ff) * -4;
        _DAT_1f800144 = CONCAT22(DAT_1f800144_2,(short)iVar58);
        iVar54 = iVar70 + (uVar46 & 0x3ff) * -4;
        _DAT_1f800184 = CONCAT22(DAT_1f800184_2,(short)iVar54);
        iVar37 = iVar49 + iVar57 >> 1;
        _DAT_1f800024 = CONCAT22(DAT_1f800026,(short)iVar37);
        _DAT_1f800014 = CONCAT22(DAT_1f800016,(short)(iVar49 + iVar37 >> 1));
        DAT_1f800034 = CONCAT22(DAT_1f800034._2_2_,(short)(iVar57 + iVar37 >> 1));
        iVar37 = iVar58 + iVar54 >> 1;
        DAT_1f800164 = (undefined2)iVar37;
        DAT_1f800154 = (undefined2)(iVar58 + iVar37 >> 1);
        DAT_1f800174 = (undefined2)(iVar54 + iVar37 >> 1);
        iVar33 = iVar49 + iVar58 >> 1;
        DAT_1f8000a4 = (undefined2)iVar33;
        iVar35 = iVar57 + iVar54 >> 1;
        DAT_1f8000e4 = (undefined2)iVar35;
        iVar37 = iVar33 + iVar35 >> 1;
        DAT_1f8000c4 = (undefined2)iVar37;
        DAT_1f8000b4 = (undefined2)(iVar33 + iVar37 >> 1);
        DAT_1f8000d4 = (undefined2)(iVar35 + iVar37 >> 1);
        iVar37 = iVar49 + iVar33 >> 1;
        DAT_1f800054 = CONCAT22(DAT_1f800054._2_2_,(short)iVar37);
        iVar57 = iVar57 + iVar35 >> 1;
        DAT_1f800094 = (undefined2)iVar57;
        iVar58 = iVar58 + iVar33 >> 1;
        DAT_1f8000f4 = (undefined2)iVar58;
        iVar54 = iVar54 + iVar35 >> 1;
        DAT_1f800134 = (undefined2)iVar54;
        iVar33 = iVar37 + iVar57 >> 1;
        _DAT_1f800074 = CONCAT22(DAT_1f800074_2,(short)iVar33);
        _DAT_1f800064 = CONCAT22(DAT_1f800064_2,(short)(iVar37 + iVar33 >> 1));
        _DAT_1f800084 = CONCAT22(DAT_1f800084_2,(short)(iVar57 + iVar33 >> 1));
        iVar37 = iVar58 + iVar54 >> 1;
        DAT_1f800114 = (undefined2)iVar37;
        DAT_1f800104 = (undefined2)(iVar58 + iVar37 >> 1);
        DAT_1f800124 = (undefined2)(iVar54 + iVar37 >> 1);
        uVar30 = puVar61[1];
        iVar37 = 0x3c000000;
        if ((uVar59 & 0x80) != 0) {
          iVar37 = 0x3e000000;
        }
        DAT_1f800188 = *(int *)((uVar30 >> 6 & 0x3fc) + (int)puVar16) + iVar37;
        DAT_1f800148 = puVar16[uVar30 & 0xff] + iVar37;
        DAT_1f800048 = *(int *)((uVar30 >> 0xe & 0x3fc) + (int)puVar16) + iVar37;
        _DAT_1f800008 = *(int *)((uVar30 >> 0x16 & 0x3fc) + (int)puVar16) + iVar37;
        uVar46 = DAT_1f800188 & 0xfffefeff;
        uVar14 = DAT_1f800148 & 0xfffefeff;
        uVar45 = DAT_1f800048 & 0xfffefeff;
        uVar30 = _DAT_1f800008 & 0xfffefeff;
        DAT_1f8000c8 = uVar45 + uVar14 >> 1;
        uVar21 = DAT_1f8000c8 & 0xfffefeff;
        _DAT_1f800028 = uVar30 + uVar45 >> 1;
        uVar28 = _DAT_1f800028 & 0xfffefeff;
        _DAT_1f800018 = uVar30 + uVar28 >> 1;
        DAT_1f800038 = uVar45 + uVar28 >> 1;
        DAT_1f800078 = uVar21 + uVar28 >> 1;
        DAT_1f8000a8 = uVar30 + uVar14 >> 1;
        uVar28 = DAT_1f8000a8 & 0xfffefeff;
        DAT_1f800058 = uVar30 + uVar28 >> 1;
        DAT_1f8000f8 = uVar14 + uVar28 >> 1;
        DAT_1f8000b8 = uVar21 + uVar28 >> 1;
        DAT_1f8000e8 = uVar45 + uVar46 >> 1;
        uVar28 = DAT_1f8000e8 & 0xfffefeff;
        DAT_1f800098 = uVar45 + uVar28 >> 1;
        DAT_1f800138 = uVar46 + uVar28 >> 1;
        DAT_1f8000d8 = uVar21 + uVar28 >> 1;
        DAT_1f800168 = uVar14 + uVar46 >> 1;
        uVar28 = DAT_1f800168 & 0xfffefeff;
        DAT_1f800158 = uVar14 + uVar28 >> 1;
        DAT_1f800178 = uVar46 + uVar28 >> 1;
        DAT_1f800118 = uVar21 + uVar28 >> 1;
        DAT_1f800068 = uVar30 + uVar21 >> 1;
        DAT_1f800088 = uVar45 + uVar21 >> 1;
        DAT_1f800108 = uVar14 + uVar21 >> 1;
        DAT_1f800128 = uVar46 + uVar21 >> 1;
        DAT_1f800190 = 0;
        iVar41 = (int)(short)iVar41;
        iVar52 = (int)(short)iVar52;
        iVar49 = (int)(short)iVar49;
        if ((((iVar41 >> 8) + 1 >> 1 == 0) && ((iVar52 >> 8) + 1 >> 1 == 0)) &&
           ((iVar49 >> 8) + 1 >> 1 == 0)) {
          iVar41 = iVar41 << 4;
          iVar52 = iVar52 * 0x10 + iVar49 * 0x100000;
          bVar1 = true;
        }
        else {
          iVar52 = iVar52 + iVar49 * 0x10000;
          bVar1 = false;
        }
        gte_ldVZ0(iVar41);
        gte_ldVXY0(iVar52);
        psVar44 = &DAT_1f800010;
        do {
          gte_rtps_b();
          iVar41 = (int)*psVar44;
          iVar49 = (int)psVar44[1];
          iVar52 = (int)psVar44[2];
          if ((((iVar41 >> 8) + 1 >> 1 == 0) && ((iVar49 >> 8) + 1 >> 1 == 0)) &&
             ((iVar52 >> 8) + 1 >> 1 == 0)) {
            iVar41 = iVar41 << 4;
            iVar49 = iVar49 * 0x10 + iVar52 * 0x100000;
            bVar7 = true;
          }
          else {
            iVar49 = iVar49 + iVar52 * 0x10000;
            bVar7 = false;
          }
          iVar52 = gte_stSXY2();
          uVar30 = gte_stSZ3();
          gte_ldVZ0(iVar41);
          gte_ldVXY0(iVar49);
          psVar43 = psVar44 + 8;
          if (bVar1) {
            uVar30 = uVar30 >> 4;
          }
          if ((int)uVar30 < 1) {
            uVar30 = uVar30 | 0xf000;
          }
          if (iVar52 + -0x10000 < 1) {
            uVar30 = uVar30 | 0x1000;
          }
          if (-1 < iVar52 + -0x1000000) {
            uVar30 = uVar30 | 0x2000;
          }
          if (iVar52 * 0x10000 < 1) {
            uVar30 = uVar30 | 0x4000;
          }
          *(int *)(psVar44 + -8) = iVar52;
          if (-1 < iVar52 * 0x10000 + -0x2000000) {
            uVar30 = uVar30 | 0x8000;
          }
          *(uint *)(psVar44 + -6) = uVar30;
          psVar44 = psVar43;
          bVar1 = bVar7;
        } while (psVar43 != (short *)0x1f8001a0);
        uVar30 = (_DAT_1f800004 & 0xfff) - 0x40;
        if (0 < (int)uVar30) {
          uVar45 = (DAT_1f800044 & 0xfff) - 0x40;
          if (0 < (int)uVar45) {
            uVar14 = (_DAT_1f800144 & 0xfff) - 0x40;
            if (0 < (int)uVar14) {
              uVar46 = (_DAT_1f800184 & 0xfff) - 0x40;
              if (0 < (int)uVar46) {
                if ((int)(uVar45 - uVar30) < 0) {
                  uVar30 = uVar45;
                }
                if ((int)(uVar14 - uVar30) < 0) {
                  uVar30 = uVar14;
                }
                if ((int)(uVar46 - uVar30) < 0) {
                  uVar30 = uVar46;
                }
                ppuVar13 = &PTR_DAT_8006d0d8;
                while (piVar55 = (int *)*ppuVar13, ppuVar13 != (undefined **)&DAT_8006d0e8) {
                  ppuVar13 = (undefined **)((int **)ppuVar13 + 1);
                  if ((piVar55[1] & 0xf000U) == 0) {
                    gte_ldIR0(-(uVar30 - 0x100));
                    gte_ldIR1((int)(short)*piVar55);
                    gte_ldIR2(*piVar55 >> 0x10);
                    gte_gpf0_b(0);
                    gte_ldIR0(uVar30 >> 1);
                    gte_ldIR1((int)(short)piVar55[-0x10] + (int)(short)piVar55[0x10]);
                    gte_ldIR2((piVar55[-0x10] >> 0x10) + (piVar55[0x10] >> 0x10));
                    iVar41 = gte_stMAC1();
                    iVar49 = gte_stMAC2();
                    gte_gpf0_b(0);
                    iVar52 = gte_stMAC1();
                    iVar37 = gte_stMAC2();
                    *piVar55 = (iVar41 + iVar52 >> 8 & 0xffffU) + (iVar49 + iVar37 >> 8) * 0x10000;
                  }
                }
              }
            }
          }
        }
        uVar30 = (uint)((int)puVar61 - (int)puVar66) >> 4;
        piVar55 = (int *)((uVar59 & 0x7f) * 0xa8 + iVar34);
        uVar30 = (int)*(char *)((int)&DAT_8006fcf4 + ((int)uVar59 >> 0x14) + uVar30) & 3U |
                 ((int)*(char *)((int)&DAT_8006fcf4 + ((int)(uVar59 << 0xc) >> 0x14) + uVar30) & 3U)
                 << 8 | ((int)*(char *)((int)&DAT_8006fcf4 + ((int)uVar65 >> 0x14) + uVar30) & 3U)
                        << 0x10 |
                 ((int)*(char *)((int)&DAT_8006fcf4 + ((int)(uVar65 << 0xc) >> 0x14) + uVar30) & 3U)
                 << 0x18;
        puVar61 = &DAT_8006cfc8;
        while (puVar62 = puVar61, uVar45 = uVar30, uVar45 != 0) {
          uVar30 = uVar45 >> 8;
          puVar61 = puVar62 + 9;
          if ((uVar45 & 0xff) != 0) {
            uVar21 = puVar62[1];
            uVar14 = *puVar62 >> 0x10;
            uVar46 = *puVar62 & 0xffff;
            uVar59 = uVar21 >> 0x10;
            uVar17 = *(uint *)((int)&DAT_1f800004 + uVar14);
            uVar22 = *(uint *)((int)&DAT_1f800004 + uVar46);
            uVar29 = *(uint *)((int)&DAT_1f800004 + uVar59);
            uVar28 = puVar62[2];
            if ((uVar17 & uVar22 & uVar29 & 0xf000) == 0) {
              iVar49 = *piVar55;
              uVar47 = *(undefined4 *)(uVar46 + 0x1f800000);
              uVar50 = *(undefined4 *)(uVar59 + 0x1f800000);
              ptr_graphicsRelated[2] = *(undefined4 *)(uVar14 + 0x1f800000);
              ptr_graphicsRelated[5] = uVar47;
              ptr_graphicsRelated[8] = uVar50;
              uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar46);
              uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar59);
              ptr_graphicsRelated[1] = *(int *)((int)&DAT_1f800008 + uVar14) + -0x8000000;
              ptr_graphicsRelated[4] = uVar47;
              ptr_graphicsRelated[7] = uVar50;
              iVar41 = piVar55[1];
              ptr_graphicsRelated[3] = (uVar21 & 0xffff) + iVar49;
              ptr_graphicsRelated[6] = ((int)uVar28 >> 0x10) + iVar41;
              ptr_graphicsRelated[9] = (uVar28 & 0xffff) + iVar49;
              *ptr_graphicsRelated = 0x9000000;
              piVar25 = puVar9 + (((uVar17 & 0xfff) + (uVar22 & 0xfff) + (uVar29 & 0xfff) * 2 >> 7)
                                 + ((uVar65 & 0x38) >> 1)) * 2;
              puVar32 = (undefined2 *)*piVar25;
              *piVar25 = (int)ptr_graphicsRelated;
              if (puVar32 == (undefined2 *)0x0) {
                piVar25[1] = (int)ptr_graphicsRelated;
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
              else {
                *puVar32 = (short)ptr_graphicsRelated;
                *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
            }
            uVar21 = puVar62[4];
            uVar14 = puVar62[3] >> 0x10;
            uVar46 = puVar62[3] & 0xffff;
            uVar59 = uVar21 >> 0x10;
            uVar17 = *(uint *)((int)&DAT_1f800004 + uVar14);
            uVar22 = *(uint *)((int)&DAT_1f800004 + uVar46);
            uVar29 = *(uint *)((int)&DAT_1f800004 + uVar59);
            uVar28 = puVar62[5];
            if ((uVar17 & uVar22 & uVar29 & 0xf000) == 0) {
              iVar49 = *piVar55;
              uVar47 = *(undefined4 *)(uVar46 + 0x1f800000);
              uVar50 = *(undefined4 *)(uVar59 + 0x1f800000);
              ptr_graphicsRelated[2] = *(undefined4 *)(uVar14 + 0x1f800000);
              ptr_graphicsRelated[5] = uVar47;
              ptr_graphicsRelated[8] = uVar50;
              uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar46);
              uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar59);
              ptr_graphicsRelated[1] = *(int *)((int)&DAT_1f800008 + uVar14) + -0x8000000;
              ptr_graphicsRelated[4] = uVar47;
              ptr_graphicsRelated[7] = uVar50;
              iVar41 = piVar55[1];
              ptr_graphicsRelated[3] = (uVar21 & 0xffff) + iVar49;
              ptr_graphicsRelated[6] = ((int)uVar28 >> 0x10) + iVar41;
              ptr_graphicsRelated[9] = (uVar28 & 0xffff) + iVar49;
              *ptr_graphicsRelated = 0x9000000;
              piVar25 = puVar9 + (((uVar17 & 0xfff) + (uVar22 & 0xfff) + (uVar29 & 0xfff) * 2 >> 7)
                                 + ((uVar65 & 0x38) >> 1)) * 2;
              puVar32 = (undefined2 *)*piVar25;
              *piVar25 = (int)ptr_graphicsRelated;
              if (puVar32 == (undefined2 *)0x0) {
                piVar25[1] = (int)ptr_graphicsRelated;
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
              else {
                *puVar32 = (short)ptr_graphicsRelated;
                *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
            }
            if ((uVar45 & 1) != 0) {
              uVar59 = puVar62[7];
              uVar45 = puVar62[6] >> 0x10;
              uVar14 = puVar62[6] & 0xffff;
              uVar46 = uVar59 >> 0x10;
              uVar28 = *(uint *)((int)&DAT_1f800004 + uVar45);
              uVar17 = *(uint *)((int)&DAT_1f800004 + uVar14);
              uVar22 = *(uint *)((int)&DAT_1f800004 + uVar46);
              uVar21 = puVar62[8];
              if ((uVar28 & uVar17 & uVar22 & 0xf000) == 0) {
                iVar49 = *piVar55;
                uVar47 = *(undefined4 *)(uVar14 + 0x1f800000);
                uVar50 = *(undefined4 *)(uVar46 + 0x1f800000);
                ptr_graphicsRelated[2] = *(undefined4 *)(uVar45 + 0x1f800000);
                ptr_graphicsRelated[5] = uVar47;
                ptr_graphicsRelated[8] = uVar50;
                uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar14);
                uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar46);
                ptr_graphicsRelated[1] = *(int *)((int)&DAT_1f800008 + uVar45) + -0x8000000;
                ptr_graphicsRelated[4] = uVar47;
                ptr_graphicsRelated[7] = uVar50;
                iVar41 = piVar55[1];
                ptr_graphicsRelated[3] = (uVar59 & 0xffff) + iVar49;
                ptr_graphicsRelated[6] = ((int)uVar21 >> 0x10) + iVar41;
                ptr_graphicsRelated[9] = (uVar21 & 0xffff) + iVar49;
                *ptr_graphicsRelated = 0x9000000;
                piVar25 = puVar9 + (((uVar28 & 0xfff) + (uVar17 & 0xfff) + (uVar22 & 0xfff) * 2 >> 7
                                    ) + ((uVar65 & 0x38) >> 1)) * 2;
                puVar32 = (undefined2 *)*piVar25;
                *piVar25 = (int)ptr_graphicsRelated;
                if (puVar32 == (undefined2 *)0x0) {
                  piVar25[1] = (int)ptr_graphicsRelated;
                  ptr_graphicsRelated = ptr_graphicsRelated + 10;
                }
                else {
                  *puVar32 = (short)ptr_graphicsRelated;
                  *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
                  ptr_graphicsRelated = ptr_graphicsRelated + 10;
                }
              }
            }
          }
        }
        ppuVar13 = &PTR_FLOAT_8006cf58;
        piVar55 = piVar55 + 8;
LAB_80029214:
        do {
          piVar25 = piVar55;
          piVar55 = piVar25 + 2;
          if (ppuVar13 == (undefined **)&DAT_8006cf98) goto LAB_80028590;
          puVar24 = (undefined4 *)*ppuVar13;
          ppuVar13 = (undefined **)((short **)ppuVar13 + 1);
          iVar41 = *piVar55;
          if ((puVar24[1] & puVar24[5] & puVar24[0x15] & puVar24[0x19] & 0xf000) == 0) {
            uVar14 = piVar25[3];
            uVar45 = (puVar24[1] & 0xfff) + (puVar24[5] & 0xfff) + (puVar24[0x15] & 0xfff) +
                     (puVar24[0x19] & 0xfff);
            uVar47 = puVar24[6];
            uVar50 = puVar24[0x16];
            uVar53 = puVar24[0x1a];
            ptr_graphicsRelated[1] = puVar24[2];
            ptr_graphicsRelated[4] = uVar47;
            ptr_graphicsRelated[7] = uVar50;
            ptr_graphicsRelated[10] = uVar53;
            iVar49 = iVar41 + 0xf00;
            uVar30 = uVar14 >> 0x19;
            iVar52 = iVar41 + 0xf0f;
            if (uVar30 != 0) {
              iVar49 = iVar41 + (*(uint *)(&DAT_8006d05c + uVar30) & 0xffff);
              iVar52 = iVar41 + (*(uint *)(&DAT_8006d05c + uVar30) >> 0x10);
              iVar41 = iVar41 + (*(uint *)(&DAT_8006d058 + uVar30) & 0xffff);
              uVar14 = uVar14 + ((int)*(uint *)(&DAT_8006d058 + uVar30) >> 0x10);
            }
            ptr_graphicsRelated[3] = iVar41;
            ptr_graphicsRelated[6] = uVar14;
            ptr_graphicsRelated[9] = iVar49;
            ptr_graphicsRelated[0xc] = iVar52;
            uVar47 = *puVar24;
            uVar50 = puVar24[4];
            uVar53 = puVar24[0x14];
            uVar39 = puVar24[0x18];
            if ((uVar26 & 1) == 0) {
LAB_80029358:
              ptr_graphicsRelated[2] = uVar47;
            }
            else {
              gte_ldSXY0(uVar47);
              gte_ldSXY1(uVar50);
              gte_ldSXY2(uVar53);
              gte_nclip_b();
              if ((uVar65 & 4) != 0) goto LAB_80029358;
              iVar41 = gte_stMAC0();
              if ((uVar65 & 2) != 0) {
                iVar41 = -iVar41;
              }
              if (-1 < iVar41) goto LAB_80029358;
              gte_ldSXY0(uVar39);
              gte_ldSXY1(uVar53);
              gte_ldSXY2(uVar50);
              gte_nclip();
              iVar41 = gte_stMAC0();
              if ((uVar65 & 2) != 0) {
                iVar41 = -iVar41;
              }
              ptr_graphicsRelated[2] = uVar47;
              if (iVar41 < 0) goto LAB_80029214;
            }
            ptr_graphicsRelated[5] = uVar50;
            ptr_graphicsRelated[8] = uVar53;
            ptr_graphicsRelated[0xb] = uVar39;
            puVar8 = DAT_1f8003fc;
            iVar41 = (int)*(short *)((int)puVar24 + 0x12);
            iVar49 = (int)*(short *)((int)puVar24 + 0x52);
            iVar52 = *(short *)((int)puVar24 + 2) - iVar41;
            uVar36 = (undefined)((uint)ptr_graphicsRelated >> 0x10);
            if (((((iVar52 + -0x200 < 0) &&
                  (iVar37 = *(short *)((int)puVar24 + 2) - iVar49, 0 < iVar52 + 0x200)) &&
                 (iVar37 + -0x200 < 0)) &&
                (((0 < iVar37 + 0x200 && ((iVar41 - iVar49) + -0x200 < 0)) &&
                 (((iVar52 = iVar41 - *(short *)((int)puVar24 + 0x62), 0 < (iVar41 - iVar49) + 0x200
                   && ((iVar52 + -0x200 < 0 &&
                       (iVar49 = iVar49 - *(short *)((int)puVar24 + 0x62), 0 < iVar52 + 0x200)))) &&
                  (iVar49 + -0x200 < 0)))))) && (0 < iVar49 + 0x200)) {
              iVar41 = (int)*(short *)(puVar24 + 4);
              iVar49 = (int)*(short *)(puVar24 + 0x14);
              iVar52 = *(short *)puVar24 - iVar41;
              if (((((((-1 < iVar52 + -0x400) ||
                      (iVar37 = *(short *)puVar24 - iVar49, iVar52 + 0x400 < 1)) ||
                     (-1 < iVar37 + -0x400)) ||
                    ((iVar37 + 0x400 < 1 || (-1 < (iVar41 - iVar49) + -0x400)))) ||
                   ((iVar52 = iVar41 - *(short *)(puVar24 + 0x18), (iVar41 - iVar49) + 0x400 < 1 ||
                    ((-1 < iVar52 + -0x400 ||
                     (iVar49 = iVar49 - *(short *)(puVar24 + 0x18), iVar52 + 0x400 < 1)))))) ||
                  (-1 < iVar49 + -0x400)) || (iVar49 + 0x400 < 1)) goto LAB_800294a0;
              if (uVar45 == 0) goto LAB_80029214;
              *ptr_graphicsRelated = 0xc000000;
              piVar25 = puVar9 + ((uVar45 >> 7) + ((uVar65 & 0x38) >> 1)) * 2;
              puVar32 = (undefined2 *)*piVar25;
              *piVar25 = (int)ptr_graphicsRelated;
              if (puVar32 != (undefined2 *)0x0) {
                *puVar32 = (short)ptr_graphicsRelated;
                *(undefined *)(puVar32 + 1) = uVar36;
                ptr_graphicsRelated = ptr_graphicsRelated + 0xd;
                goto LAB_80029214;
              }
            }
            else {
LAB_800294a0:
              *DAT_1f8003fc = ptr_graphicsRelated;
              if (uVar45 == 0) goto LAB_80029214;
              DAT_1f8003fc = puVar8 + 1;
              *ptr_graphicsRelated = 0xc000000;
              piVar25 = puVar9 + ((uVar45 >> 7) + ((uVar65 & 0x38) >> 1)) * 2;
              puVar32 = (undefined2 *)*piVar25;
              *piVar25 = (int)ptr_graphicsRelated;
              if (puVar32 != (undefined2 *)0x0) {
                *puVar32 = (short)ptr_graphicsRelated;
                *(undefined *)(puVar32 + 1) = uVar36;
                ptr_graphicsRelated = ptr_graphicsRelated + 0xd;
                goto LAB_80029214;
              }
            }
            piVar25[1] = (int)ptr_graphicsRelated;
            ptr_graphicsRelated = ptr_graphicsRelated + 0xd;
          }
        } while( true );
      }
      iVar41 = uVar26 * 4;
      if (-1 < (int)uVar26) {
        iVar49 = gte_stRBK();
        iVar52 = gte_stGBK();
        iVar70 = gte_stBBK();
        pfVar67 = (float *)((*(uint *)(iVar41 + 8) >> 0xe) - iVar49);
        puVar69 = (undefined2 *)(iVar52 + (*(uint *)(iVar41 + 8) & 0xffff) * -4);
        uVar30 = *(uint *)(iVar41 + 0x14);
        iVar70 = iVar70 - (*(uint *)(iVar41 + 0xc) >> 0xe);
        puVar11 = (undefined4 *)(iVar41 + 0x1c + (uVar30 >> 0x16 & 0x3fc));
        puVar16 = puVar11 + (uVar30 & 0xff);
        uVar26 = *puVar61;
        puVar61 = puVar60 + 2;
        puVar66 = (uint *)((int)puVar16 +
                          (*(uint *)(iVar41 + 0xc) & 0xffff) * -0x10 + (uVar30 >> 5 & 0x7f8));
      }
      puVar62 = (uint *)(uVar26 & 0xfffffffc);
      puVar60 = puVar61;
      if ((uVar26 & 2) != 0) {
        uVar14 = *puVar62;
        uVar30 = *(uint *)((uVar14 >> 0x16 & 0x3fc) + (int)puVar11);
        uVar45 = *(uint *)((uVar14 >> 0xe & 0x3fc) + (int)puVar11);
        uVar14 = puVar11[uVar14 & 0xff];
        uVar46 = puVar62[2];
        uVar59 = puVar62[3];
        iVar41 = (uVar30 >> 0x13 & 0x1ffc) + (int)pfVar67;
        iVar49 = (int)puVar69 - (uVar30 >> 8 & 0x1ffc);
        iVar52 = iVar70 + (uVar30 & 0x3ff) * -4;
        iVar37 = (uVar45 >> 0x13 & 0x1ffc) + (int)pfVar67;
        iVar57 = (int)puVar69 - (uVar45 >> 8 & 0x1ffc);
        iVar58 = iVar70 + (uVar45 & 0x3ff) * -4;
        iVar54 = (uVar14 >> 0x13 & 0x1ffc) + (int)pfVar67;
        iVar33 = (int)puVar69 - (uVar14 >> 8 & 0x1ffc);
        iVar35 = iVar70 + (uVar14 & 0x3ff) * -4;
        FLOAT_1f800000 = (float)CONCAT22((short)iVar49,(short)iVar41);
        _DAT_1f800004 = CONCAT22(DAT_1f800006,(short)iVar52);
        _DAT_1f800020 = CONCAT22((short)iVar57,(short)iVar37);
        _DAT_1f800024 = CONCAT22(DAT_1f800026,(short)iVar58);
        DAT_1f800050 = CONCAT22((short)iVar33,(short)iVar54);
        DAT_1f800054 = CONCAT22(DAT_1f800054._2_2_,(short)iVar35);
        DAT_1f800010 = (undefined2)(iVar41 + iVar37 >> 1);
        DAT_1f800012 = (undefined2)(iVar49 + iVar57 >> 1);
        _DAT_1f800014 = CONCAT22(DAT_1f800016,(short)(iVar52 + iVar58 >> 1));
        DAT_1f800030._0_2_ = (undefined2)(iVar41 + iVar54 >> 1);
        DAT_1f800030._2_2_ = (undefined2)(iVar49 + iVar33 >> 1);
        DAT_1f800034 = CONCAT22(DAT_1f800034._2_2_,(short)(iVar52 + iVar35 >> 1));
        DAT_1f800040 = CONCAT22((short)(iVar57 + iVar33 >> 1),(short)(iVar37 + iVar54 >> 1));
        DAT_1f800044 = CONCAT22(DAT_1f800044._2_2_,(short)(iVar58 + iVar35 >> 1));
        uVar30 = puVar62[1];
        iVar37 = 0x34000000;
        if ((uVar46 & 0x80) != 0) {
          iVar37 = 0x36000000;
        }
        DAT_1f800058 = puVar16[uVar30 & 0xff] + iVar37;
        _DAT_1f800028 = *(int *)((uVar30 >> 0xe & 0x3fc) + (int)puVar16) + iVar37;
        _DAT_1f800008 = *(int *)((uVar30 >> 0x16 & 0x3fc) + (int)puVar16) + iVar37;
        _DAT_1f800018 = (_DAT_1f800008 & 0xfffefeff) + (_DAT_1f800028 & 0xfffefeff) >> 1;
        DAT_1f800038 = (_DAT_1f800008 & 0xfffefeff) + (DAT_1f800058 & 0xfffefeff) >> 1;
        DAT_1f800048 = (_DAT_1f800028 & 0xfffefeff) + (DAT_1f800058 & 0xfffefeff) >> 1;
        _DAT_1f800060 = 0;
        iVar41 = (int)(short)iVar41;
        iVar49 = (int)(short)iVar49;
        iVar52 = (int)(short)iVar52;
        if ((((iVar41 >> 8) + 1 >> 1 == 0) && ((iVar49 >> 8) + 1 >> 1 == 0)) &&
           ((iVar52 >> 8) + 1 >> 1 == 0)) {
          iVar41 = iVar41 << 4;
          iVar49 = iVar49 * 0x10 + iVar52 * 0x100000;
          bVar1 = true;
        }
        else {
          iVar49 = iVar49 + iVar52 * 0x10000;
          bVar1 = false;
        }
        gte_ldVZ0(iVar41);
        gte_ldVXY0(iVar49);
        psVar44 = &DAT_1f800010;
        do {
          gte_rtps_b();
          iVar41 = (int)*psVar44;
          iVar49 = (int)psVar44[1];
          iVar52 = (int)psVar44[2];
          if ((((iVar41 >> 8) + 1 >> 1 == 0) && ((iVar49 >> 8) + 1 >> 1 == 0)) &&
             ((iVar52 >> 8) + 1 >> 1 == 0)) {
            iVar41 = iVar41 << 4;
            iVar49 = iVar49 * 0x10 + iVar52 * 0x100000;
            bVar7 = true;
          }
          else {
            iVar49 = iVar49 + iVar52 * 0x10000;
            bVar7 = false;
          }
          iVar52 = gte_stSXY2();
          uVar30 = gte_stSZ3();
          gte_ldVZ0(iVar41);
          gte_ldVXY0(iVar49);
          psVar43 = psVar44 + 8;
          if (bVar1) {
            uVar30 = uVar30 >> 4;
          }
          if (iVar52 + -0x10000 < 1) {
            uVar30 = uVar30 | 0x1000;
          }
          if (-1 < iVar52 + -0x1000000) {
            uVar30 = uVar30 | 0x2000;
          }
          if (iVar52 * 0x10000 < 1) {
            uVar30 = uVar30 | 0x4000;
          }
          *(int *)(psVar44 + -8) = iVar52;
          if (-1 < iVar52 * 0x10000 + -0x2000000) {
            uVar30 = uVar30 | 0x8000;
          }
          *(uint *)(psVar44 + -6) = uVar30;
          psVar44 = psVar43;
          bVar1 = bVar7;
        } while (psVar43 != &DAT_1f800070);
        uVar30 = (uint)((int)puVar62 - (int)puVar66) >> 4;
        piVar55 = (int *)((uVar46 & 0x7f) * 0xa8 + iVar34);
        uVar30 = (int)*(char *)((int)&DAT_8006fcf4 + ((int)uVar46 >> 0x14) + uVar30) & 1U |
                 ((int)*(char *)((int)&DAT_8006fcf4 + ((int)(uVar59 << 0xc) >> 0x14) + uVar30) & 1U)
                 << 8 | ((int)*(char *)((int)&DAT_8006fcf4 + ((int)uVar59 >> 0x14) + uVar30) & 1U)
                        << 0x10;
        puVar61 = (uint *)(((uVar46 & 0x300) >> 3) + 0x8006d138 + ((uVar46 & 0x300) >> 6));
        while (puVar62 = puVar61, uVar45 = uVar30 & 0xff, uVar30 != 0) {
          uVar30 = uVar30 >> 8;
          puVar61 = puVar62 + 3;
          if (uVar45 != 0) {
            uVar21 = puVar62[1];
            uVar45 = *puVar62 >> 0x10;
            uVar14 = *puVar62 & 0xffff;
            uVar65 = uVar21 >> 0x10;
            uVar17 = *(uint *)((int)&DAT_1f800004 + uVar45);
            uVar22 = *(uint *)((int)&DAT_1f800004 + uVar14);
            uVar29 = *(uint *)((int)&DAT_1f800004 + uVar65);
            uVar28 = puVar62[2];
            if ((uVar17 & uVar22 & uVar29 & 0xf000) == 0) {
              iVar49 = *piVar55;
              uVar47 = *(undefined4 *)(uVar14 + 0x1f800000);
              uVar50 = *(undefined4 *)(uVar65 + 0x1f800000);
              ptr_graphicsRelated[2] = *(undefined4 *)(uVar45 + 0x1f800000);
              ptr_graphicsRelated[5] = uVar47;
              ptr_graphicsRelated[8] = uVar50;
              uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar14);
              uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar65);
              ptr_graphicsRelated[1] = *(undefined4 *)((int)&DAT_1f800008 + uVar45);
              ptr_graphicsRelated[4] = uVar47;
              ptr_graphicsRelated[7] = uVar50;
              iVar41 = piVar55[1];
              ptr_graphicsRelated[3] = (uVar21 & 0xffff) + iVar49;
              ptr_graphicsRelated[6] = ((int)uVar28 >> 0x10) + iVar41;
              ptr_graphicsRelated[9] = (uVar28 & 0xffff) + iVar49;
              *ptr_graphicsRelated = 0x9000000;
              piVar25 = puVar9 + (((uVar17 & 0xfff) + (uVar22 & 0xfff) + (uVar29 & 0xfff) * 2 >> 7)
                                 + ((uVar59 & 0x38) >> 1)) * 2;
              puVar32 = (undefined2 *)*piVar25;
              *piVar25 = (int)ptr_graphicsRelated;
              if (puVar32 == (undefined2 *)0x0) {
                piVar25[1] = (int)ptr_graphicsRelated;
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
              else {
                *puVar32 = (short)ptr_graphicsRelated;
                *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
            }
          }
        }
        puVar61 = &DAT_8006d0e8;
LAB_800283fc:
        do {
          uVar30 = *puVar61;
          bVar1 = puVar61 == &DAT_8006d0f8;
          puVar61 = puVar61 + 1;
          if (bVar1) goto LAB_800276b4;
          uVar45 = uVar46 >> 8 & 3;
          uVar65 = uVar30 >> 0x14 & 0xff0;
          uVar21 = uVar30 >> 0xc & 0xff0;
          uVar28 = uVar30 >> 4 & 0xff0;
          piVar25 = (int *)((int)piVar55 + (char)(&DAT_8006d378)[uVar45 + (uVar30 & 0xc)] + 8);
          uVar14 = piVar25[1];
          iVar49 = *piVar25;
          iVar41 = (uVar45 + uVar30 & 3) * 0x80 + (uVar14 >> 0x19 & 0x78);
          uVar30 = *(uint *)(&DAT_8006d3c8 + iVar41);
          sVar3 = *(short *)(&DAT_8006d3cc + iVar41);
          ptr_graphicsRelated[3] = (uVar30 & 0xffff) + iVar49;
          ptr_graphicsRelated[6] = ((int)uVar30 >> 0x10) + uVar14;
          ptr_graphicsRelated[9] = sVar3 + iVar49;
          uVar30 = *(uint *)((int)&DAT_1f800004 + uVar65);
          uVar45 = *(uint *)((int)&DAT_1f800004 + uVar21);
          uVar14 = *(uint *)((int)&DAT_1f800004 + uVar28);
          if ((uVar30 & uVar45 & uVar14 & 0xf000) == 0) {
            uVar47 = *(undefined4 *)(uVar65 + 0x1f800000);
            uVar50 = *(undefined4 *)(uVar21 + 0x1f800000);
            uVar53 = *(undefined4 *)(uVar28 + 0x1f800000);
            if ((uVar26 & 1) == 0) {
LAB_8002850c:
              ptr_graphicsRelated[2] = uVar47;
            }
            else {
              gte_ldSXY0(uVar47);
              gte_ldSXY1(uVar50);
              gte_ldSXY2(uVar53);
              gte_nclip_b();
              if ((uVar59 & 4) != 0) goto LAB_8002850c;
              iVar41 = gte_stMAC0();
              if ((uVar59 & 2) != 0) {
                iVar41 = -iVar41;
              }
              ptr_graphicsRelated[2] = uVar47;
              if (iVar41 < 0) goto LAB_800283fc;
            }
            ptr_graphicsRelated[5] = uVar50;
            ptr_graphicsRelated[8] = uVar53;
            uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar21);
            uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar28);
            ptr_graphicsRelated[1] = *(undefined4 *)((int)&DAT_1f800008 + uVar65);
            ptr_graphicsRelated[4] = uVar47;
            ptr_graphicsRelated[7] = uVar50;
            *ptr_graphicsRelated = 0x9000000;
            piVar25 = puVar9 + (((uVar30 & 0xfff) + (uVar45 & 0xfff) + (uVar14 & 0xfff) * 2 >> 7) +
                               ((uVar59 & 0x38) >> 1)) * 2;
            puVar32 = (undefined2 *)*piVar25;
            *piVar25 = (int)ptr_graphicsRelated;
            if (puVar32 == (undefined2 *)0x0) {
              piVar25[1] = (int)ptr_graphicsRelated;
              ptr_graphicsRelated = ptr_graphicsRelated + 10;
            }
            else {
              *puVar32 = (short)ptr_graphicsRelated;
              *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
              ptr_graphicsRelated = ptr_graphicsRelated + 10;
            }
          }
        } while( true );
      }
      uVar46 = *puVar62;
      uVar30 = *(uint *)((uVar46 >> 0x16 & 0x3fc) + (int)puVar11);
      uVar45 = *(uint *)((uVar46 >> 0xe & 0x3fc) + (int)puVar11);
      uVar14 = puVar11[uVar46 & 0xff];
      uVar46 = *(uint *)((uVar46 >> 6 & 0x3fc) + (int)puVar11);
      uVar59 = puVar62[2];
      uVar65 = puVar62[3];
      iVar41 = (uVar30 >> 0x13 & 0x1ffc) + (int)pfVar67;
      iVar52 = (int)puVar69 - (uVar30 >> 8 & 0x1ffc);
      iVar57 = iVar70 + (uVar30 & 0x3ff) * -4;
      iVar54 = (uVar45 >> 0x13 & 0x1ffc) + (int)pfVar67;
      iVar33 = (int)puVar69 - (uVar45 >> 8 & 0x1ffc);
      iVar35 = iVar70 + (uVar45 & 0x3ff) * -4;
      iVar49 = (uVar14 >> 0x13 & 0x1ffc) + (int)pfVar67;
      iVar37 = (int)puVar69 - (uVar14 >> 8 & 0x1ffc);
      iVar58 = iVar70 + (uVar14 & 0x3ff) * -4;
      iVar48 = (uVar46 >> 0x13 & 0x1ffc) + (int)pfVar67;
      iVar51 = (int)puVar69 - (uVar46 >> 8 & 0x1ffc);
      iVar56 = iVar70 + (uVar46 & 0x3ff) * -4;
      FLOAT_1f800000 = (float)CONCAT22((short)iVar52,(short)iVar41);
      _DAT_1f800004 = CONCAT22(DAT_1f800006,(short)iVar57);
      _DAT_1f800020 = CONCAT22((short)iVar33,(short)iVar54);
      _DAT_1f800024 = CONCAT22(DAT_1f800026,(short)iVar35);
      _DAT_1f800060 = CONCAT22((short)iVar37,(short)iVar49);
      _DAT_1f800064 = CONCAT22(DAT_1f800064_2,(short)iVar58);
      _DAT_1f800080 = CONCAT22((short)iVar51,(short)iVar48);
      _DAT_1f800084 = CONCAT22(DAT_1f800084_2,(short)iVar56);
      DAT_1f800010 = (undefined2)(iVar41 + iVar54 >> 1);
      DAT_1f800012 = (undefined2)(iVar52 + iVar33 >> 1);
      _DAT_1f800014 = CONCAT22(DAT_1f800016,(short)(iVar57 + iVar35 >> 1));
      DAT_1f800070 = (undefined2)(iVar49 + iVar48 >> 1);
      DAT_1f800072 = (undefined2)(iVar37 + iVar51 >> 1);
      _DAT_1f800074 = CONCAT22(DAT_1f800074_2,(short)(iVar58 + iVar56 >> 1));
      iVar49 = iVar41 + iVar49 >> 1;
      DAT_1f800030._0_2_ = (undefined2)iVar49;
      iVar37 = iVar52 + iVar37 >> 1;
      DAT_1f800030._2_2_ = (undefined2)iVar37;
      iVar58 = iVar57 + iVar58 >> 1;
      DAT_1f800034 = CONCAT22(DAT_1f800034._2_2_,(short)iVar58);
      iVar54 = iVar54 + iVar48 >> 1;
      iVar33 = iVar33 + iVar51 >> 1;
      DAT_1f800050 = CONCAT22((short)iVar33,(short)iVar54);
      iVar35 = iVar35 + iVar56 >> 1;
      DAT_1f800054 = CONCAT22(DAT_1f800054._2_2_,(short)iVar35);
      DAT_1f800040 = CONCAT22((short)(iVar37 + iVar33 >> 1),(short)(iVar49 + iVar54 >> 1));
      DAT_1f800044 = CONCAT22(DAT_1f800044._2_2_,(short)(iVar58 + iVar35 >> 1));
      uVar30 = puVar62[1];
      iVar49 = 0x3c000000;
      if ((uVar59 & 0x80) != 0) {
        iVar49 = 0x3e000000;
      }
      DAT_1f800088 = *(int *)((uVar30 >> 6 & 0x3fc) + (int)puVar16) + iVar49;
      DAT_1f800068 = puVar16[uVar30 & 0xff] + iVar49;
      _DAT_1f800028 = *(int *)((uVar30 >> 0xe & 0x3fc) + (int)puVar16) + iVar49;
      _DAT_1f800008 = *(int *)((uVar30 >> 0x16 & 0x3fc) + (int)puVar16) + iVar49;
      uVar45 = DAT_1f800068 & 0xfffefeff;
      uVar30 = _DAT_1f800028 & 0xfffefeff;
      _DAT_1f800018 = (_DAT_1f800008 & 0xfffefeff) + uVar30 >> 1;
      DAT_1f800078 = uVar45 + (DAT_1f800088 & 0xfffefeff) >> 1;
      DAT_1f800038 = (_DAT_1f800008 & 0xfffefeff) + uVar45 >> 1;
      DAT_1f800058 = uVar30 + (DAT_1f800088 & 0xfffefeff) >> 1;
      DAT_1f800048 = uVar30 + uVar45 >> 1;
      DAT_1f800090 = 0;
      iVar41 = (int)(short)iVar41;
      iVar49 = (int)(short)iVar52;
      iVar52 = (int)(short)iVar57;
      if ((((iVar41 >> 8) + 1 >> 1 == 0) && ((iVar49 >> 8) + 1 >> 1 == 0)) &&
         ((iVar52 >> 8) + 1 >> 1 == 0)) {
        iVar41 = iVar41 << 4;
        iVar49 = iVar49 * 0x10 + iVar52 * 0x100000;
        bVar1 = true;
      }
      else {
        iVar49 = iVar49 + iVar52 * 0x10000;
        bVar1 = false;
      }
      gte_ldVZ0(iVar41);
      gte_ldVXY0(iVar49);
      psVar44 = &DAT_1f800010;
      do {
        gte_rtps_b();
        iVar41 = (int)*psVar44;
        iVar49 = (int)psVar44[1];
        iVar52 = (int)psVar44[2];
        if ((((iVar41 >> 8) + 1 >> 1 == 0) && ((iVar49 >> 8) + 1 >> 1 == 0)) &&
           ((iVar52 >> 8) + 1 >> 1 == 0)) {
          iVar41 = iVar41 << 4;
          iVar49 = iVar49 * 0x10 + iVar52 * 0x100000;
          bVar7 = true;
        }
        else {
          iVar49 = iVar49 + iVar52 * 0x10000;
          bVar7 = false;
        }
        iVar52 = gte_stSXY2();
        uVar30 = gte_stSZ3();
        gte_ldVZ0(iVar41);
        gte_ldVXY0(iVar49);
        psVar43 = psVar44 + 8;
        if (bVar1) {
          uVar30 = uVar30 >> 4;
        }
        if (iVar52 + -0x10000 < 1) {
          uVar30 = uVar30 | 0x1000;
        }
        if (-1 < iVar52 + -0x1000000) {
          uVar30 = uVar30 | 0x2000;
        }
        if (iVar52 * 0x10000 < 1) {
          uVar30 = uVar30 | 0x4000;
        }
        *(int *)(psVar44 + -8) = iVar52;
        if (-1 < iVar52 * 0x10000 + -0x2000000) {
          uVar30 = uVar30 | 0x8000;
        }
        *(uint *)(psVar44 + -6) = uVar30;
        psVar44 = psVar43;
        bVar1 = bVar7;
      } while (psVar43 != &DAT_1f8000a0);
      if ((DAT_1f800044 & 0xf000) == 0) {
        uVar30 = (DAT_1f800044 & 0xfff) - 0x700;
        if (0 < (int)uVar30) {
          gte_ldIR0(-((DAT_1f800044 & 0xfff) - 0x800));
          gte_ldIR1((int)(short)DAT_1f800040);
          gte_ldIR2(DAT_1f800040 >> 0x10);
          gte_gpf0_b(0);
          gte_ldIR0(uVar30 >> 1);
          gte_ldIR1((int)(short)_DAT_1f800020 + (int)(short)_DAT_1f800060);
          gte_ldIR2((_DAT_1f800020 >> 0x10) + (_DAT_1f800060 >> 0x10));
          iVar41 = gte_stMAC1();
          iVar49 = gte_stMAC2();
          gte_gpf0_b(0);
          iVar52 = gte_stMAC1();
          iVar37 = gte_stMAC2();
          DAT_1f800040 = (iVar41 + iVar52 >> 8 & 0xffffU) + (iVar49 + iVar37 >> 8) * 0x10000;
        }
      }
      uVar30 = (uint)((int)puVar62 - (int)puVar66) >> 4;
      piVar55 = (int *)((uVar59 & 0x7f) * 0xa8 + iVar34);
      uVar30 = (int)*(char *)((int)&DAT_8006fcf4 + ((int)uVar59 >> 0x14) + uVar30) & 1U |
               ((int)*(char *)((int)&DAT_8006fcf4 + ((int)(uVar59 << 0xc) >> 0x14) + uVar30) & 1U)
               << 8 | ((int)*(char *)((int)&DAT_8006fcf4 + ((int)uVar65 >> 0x14) + uVar30) & 1U) <<
                      0x10 |
               ((int)*(char *)((int)&DAT_8006fcf4 + ((int)(uVar65 << 0xc) >> 0x14) + uVar30) & 1U)
               << 0x18;
      puVar61 = &DAT_8006cf98;
      while (puVar62 = puVar61, uVar45 = uVar30 & 0xff, uVar30 != 0) {
        uVar30 = uVar30 >> 8;
        puVar61 = puVar62 + 3;
        if (uVar45 != 0) {
          uVar59 = puVar62[1];
          uVar45 = *puVar62 >> 0x10;
          uVar14 = *puVar62 & 0xffff;
          uVar46 = uVar59 >> 0x10;
          uVar28 = *(uint *)((int)&DAT_1f800004 + uVar45);
          uVar17 = *(uint *)((int)&DAT_1f800004 + uVar14);
          uVar22 = *(uint *)((int)&DAT_1f800004 + uVar46);
          uVar21 = puVar62[2];
          if ((uVar28 & uVar17 & uVar22 & 0xf000) == 0) {
            iVar49 = *piVar55;
            uVar47 = *(undefined4 *)(uVar14 + 0x1f800000);
            uVar50 = *(undefined4 *)(uVar46 + 0x1f800000);
            ptr_graphicsRelated[2] = *(undefined4 *)(uVar45 + 0x1f800000);
            ptr_graphicsRelated[5] = uVar47;
            ptr_graphicsRelated[8] = uVar50;
            uVar47 = *(undefined4 *)((int)&DAT_1f800008 + uVar14);
            uVar50 = *(undefined4 *)((int)&DAT_1f800008 + uVar46);
            ptr_graphicsRelated[1] = *(int *)((int)&DAT_1f800008 + uVar45) + -0x8000000;
            ptr_graphicsRelated[4] = uVar47;
            ptr_graphicsRelated[7] = uVar50;
            iVar41 = piVar55[1];
            ptr_graphicsRelated[3] = (uVar59 & 0xffff) + iVar49;
            ptr_graphicsRelated[6] = ((int)uVar21 >> 0x10) + iVar41;
            ptr_graphicsRelated[9] = (uVar21 & 0xffff) + iVar49;
            *ptr_graphicsRelated = 0x9000000;
            piVar25 = puVar9 + (((uVar28 & 0xfff) + (uVar17 & 0xfff) + (uVar22 & 0xfff) * 2 >> 7) +
                               ((uVar65 & 0x38) >> 1)) * 2;
            puVar32 = (undefined2 *)*piVar25;
            *piVar25 = (int)ptr_graphicsRelated;
            if (puVar32 == (undefined2 *)0x0) {
              piVar25[1] = (int)ptr_graphicsRelated;
              ptr_graphicsRelated = ptr_graphicsRelated + 10;
            }
            else {
              *puVar32 = (short)ptr_graphicsRelated;
              *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
              ptr_graphicsRelated = ptr_graphicsRelated + 10;
            }
          }
        }
      }
      ppuVar13 = &PTR_FLOAT_8006cf48;
LAB_80027d88:
      do {
        piVar25 = piVar55;
        piVar55 = piVar25 + 2;
        if (ppuVar13 == &PTR_FLOAT_8006cf58) goto LAB_800276b4;
        puVar24 = (undefined4 *)*ppuVar13;
        ppuVar13 = ppuVar13 + 1;
        uVar30 = puVar24[1];
        uVar45 = puVar24[5];
        uVar14 = puVar24[0xd];
        uVar46 = puVar24[0x11];
        iVar41 = *piVar55;
        if ((uVar30 & uVar45 & uVar14 & uVar46 & 0xf000) == 0) {
          uVar59 = piVar25[3];
          uVar47 = *puVar24;
          uVar50 = puVar24[4];
          uVar53 = puVar24[0xc];
          uVar39 = puVar24[0x10];
          if ((uVar26 & 1) == 0) {
LAB_80027e58:
            ptr_graphicsRelated[2] = uVar47;
          }
          else {
            gte_ldSXY0(uVar47);
            gte_ldSXY1(uVar50);
            gte_ldSXY2(uVar53);
            gte_nclip_b();
            if ((uVar65 & 4) != 0) goto LAB_80027e58;
            iVar49 = gte_stMAC0();
            if ((uVar65 & 2) != 0) {
              iVar49 = -iVar49;
            }
            if (-1 < iVar49) goto LAB_80027e58;
            gte_ldSXY0(uVar39);
            gte_ldSXY1(uVar53);
            gte_ldSXY2(uVar50);
            gte_nclip();
            iVar49 = gte_stMAC0();
            if ((uVar65 & 2) != 0) {
              iVar49 = -iVar49;
            }
            ptr_graphicsRelated[2] = uVar47;
            if (iVar49 < 0) goto LAB_80027d88;
          }
          ptr_graphicsRelated[5] = uVar50;
          ptr_graphicsRelated[8] = uVar53;
          ptr_graphicsRelated[0xb] = uVar39;
          uVar47 = puVar24[6];
          uVar50 = puVar24[0xe];
          uVar53 = puVar24[0x12];
          ptr_graphicsRelated[1] = puVar24[2];
          ptr_graphicsRelated[4] = uVar47;
          ptr_graphicsRelated[7] = uVar50;
          ptr_graphicsRelated[10] = uVar53;
          iVar49 = iVar41 + 0x1f00;
          uVar21 = uVar59 >> 0x19;
          iVar52 = iVar41 + 0x1f1f;
          if (uVar21 != 0) {
            iVar49 = iVar41 + (*(uint *)(&DAT_8006d05c + uVar21) & 0xffff);
            iVar52 = iVar41 + (*(uint *)(&DAT_8006d05c + uVar21) >> 0x10);
            iVar41 = iVar41 + (*(uint *)(&DAT_8006d058 + uVar21) & 0xffff);
            uVar59 = uVar59 + ((int)*(uint *)(&DAT_8006d058 + uVar21) >> 0x10);
          }
          ptr_graphicsRelated[3] = iVar41;
          ptr_graphicsRelated[6] = uVar59;
          ptr_graphicsRelated[9] = iVar49;
          ptr_graphicsRelated[0xc] = iVar52;
          *ptr_graphicsRelated = 0xc000000;
          piVar25 = puVar9 + (((uVar30 & 0xfff) + (uVar45 & 0xfff) + (uVar14 & 0xfff) +
                               (uVar46 & 0xfff) >> 7) + ((uVar65 & 0x38) >> 1)) * 2;
          puVar32 = (undefined2 *)*piVar25;
          *piVar25 = (int)ptr_graphicsRelated;
          if (puVar32 == (undefined2 *)0x0) {
            piVar25[1] = (int)ptr_graphicsRelated;
            ptr_graphicsRelated = ptr_graphicsRelated + 0xd;
          }
          else {
            *puVar32 = (short)ptr_graphicsRelated;
            *(char *)(puVar32 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
            ptr_graphicsRelated = ptr_graphicsRelated + 0xd;
          }
        }
      } while( true );
    }
    uVar45 = uVar26 ^ uVar26 & 3;
    iVar34 = gte_stRBK();
    iVar41 = gte_stGBK();
    iVar49 = gte_stBBK();
    iVar34 = (*(uint *)(uVar45 + 8) >> 0xe) - iVar34;
    iVar41 = iVar41 + (*(uint *)(uVar45 + 8) & 0xffff) * -4;
    iVar49 = iVar49 - (*(uint *)(uVar45 + 0xc) >> 0xe);
    puVar66 = (uint *)((int)&DAT_8006fcf4 + (*(uint *)(uVar45 + 0xc) & 0xffff));
    uVar65 = *(uint *)(uVar45 + 0x14);
    pfVar67 = &FLOAT_1f800000;
    puVar69 = &DAT_1f8002a8;
    uVar46 = 0xffffffff;
    puVar62 = (uint *)((uVar65 >> 0x16 & 0x3fc) + 0x1c + uVar45);
    uVar14 = *puVar62;
    puVar61 = puVar62 + 1;
    uVar59 = uVar65 & 0xff;
    puVar10 = puVar61 + uVar59 + 1;
    uVar30 = *puVar61;
    gte_ldVZ0((uVar14 >> 0x13 & 0x1ffc) + iVar34);
    gte_ldVXY0((iVar41 - (uVar14 >> 8 & 0x1ffc)) + (iVar49 + (uVar14 & 0x3ff) * -4) * 0x10000);
    puVar62 = puVar62 + 2;
    pfVar68 = pfVar67;
    if ((uVar26 & 2) == 0) {
      if ((uVar26 & 3) == 0) {
        do {
          gte_rtps_b();
          uVar26 = *puVar62;
          puVar62 = puVar62 + 1;
          gte_ldVZ0((uVar30 >> 0x13 & 0x1ffc) + iVar34);
          gte_ldVXY0((iVar41 - (uVar30 >> 8 & 0x1ffc)) + (iVar49 + (uVar30 & 0x3ff) * -4) * 0x10000)
          ;
          fVar18 = (float)gte_stSXY2();
          uVar47 = gte_stSZ3();
          *pfVar67 = fVar18;
          *puVar69 = (short)uVar47;
          pfVar67 = pfVar67 + 1;
          puVar69 = puVar69 + 1;
          uVar30 = uVar26;
        } while (puVar62 != puVar10);
        puVar66 = (uint *)((uint)puVar66 & 0x7fffffff);
        break;
      }
      do {
        gte_rtps_b();
        uVar26 = *puVar62;
        puVar62 = puVar62 + 1;
        gte_ldVZ0((uVar30 >> 0x13 & 0x1ffc) + iVar34);
        gte_ldVXY0((iVar41 - (uVar30 >> 8 & 0x1ffc)) + (iVar49 + (uVar30 & 0x3ff) * -4) * 0x10000);
        uVar30 = gte_stSXY2();
        uVar47 = gte_stSZ3();
        fVar18 = (float)(uVar30 * 0x20);
        if ((int)(uVar30 - 0x10000) < 1) {
          fVar18 = (float)((int)fVar18 + 1);
        }
        if (-1 < (int)(uVar30 - 0x1000000)) {
          fVar18 = (float)((int)fVar18 + 2);
        }
        *puVar69 = (short)uVar47;
        if ((uVar30 & 0xfe00) != 0) {
          fVar18 = (float)((int)fVar18 + 0xc);
        }
        uVar46 = uVar46 & (uint)fVar18;
        *pfVar67 = fVar18;
        pfVar67 = pfVar67 + 1;
        puVar69 = puVar69 + 1;
        uVar30 = uVar26;
      } while (puVar62 != puVar10);
    }
    else {
      do {
        while( true ) {
          puVar32 = puVar69;
          gte_rtps_b();
          uVar26 = *puVar62;
          iVar52 = (uVar30 >> 0x13 & 0x1ffc) + iVar34;
          iVar37 = (iVar41 - (uVar30 >> 8 & 0x1ffc)) + (iVar49 + (uVar30 & 0x3ff) * -4) * 0x10000;
          puVar62 = puVar62 + 1;
          iVar57 = gte_stSZ3();
          uVar14 = gte_stSXY2();
          pfVar67 = pfVar68 + 1;
          uVar30 = uVar26;
          if (-1 < iVar57 + -0x600) break;
          if ((iVar57 + -0x100 < 0) && (iVar57 != 0x100)) {
            iVar58 = gte_stMAC1();
            iVar54 = gte_stMAC2();
            if (((0 < iVar58 + 0x100) && ((iVar58 + -0x100 < 0 && (0 < iVar54 + 0x100)))) &&
               (iVar54 + -0x100 < 0)) {
              iVar58 = gte_stVZ0();
              uVar26 = gte_stVXY0();
              gte_ldVZ0(iVar58 << 4);
              gte_ldVXY0((uVar26 & 0xfff0fff) << 4);
              gte_rtps();
              uVar14 = gte_stSXY2();
            }
          }
          iVar58 = gte_stFLAG();
          gte_ldVZ0(iVar52);
          gte_ldVXY0(iVar37);
          fVar18 = (float)(uVar14 * 0x20);
          if (iVar58 < 0) {
            fVar18 = (float)((int)fVar18 + 0x10);
          }
          if ((int)(uVar14 - 0x10000) < 1) {
            fVar18 = (float)((int)fVar18 + 1);
          }
          if (-1 < (int)(uVar14 - 0x1000000)) {
            fVar18 = (float)((int)fVar18 + 2);
          }
          if ((int)(uVar14 * 0x10000) < 1) {
            fVar18 = (float)((int)fVar18 + 4);
          }
          *puVar32 = (short)iVar57;
          if (-1 < (int)(uVar14 * 0x10000 + -0x2000000)) {
            fVar18 = (float)((int)fVar18 + 8);
          }
          uVar46 = uVar46 & (uint)fVar18;
          *pfVar68 = fVar18;
          pfVar68 = pfVar67;
          puVar69 = puVar32 + 1;
          if (puVar62 == puVar10) goto joined_r0x80026b40;
        }
        gte_ldVZ0(iVar52);
        gte_ldVXY0(iVar37);
        fVar18 = (float)(uVar14 * 0x20);
        if ((int)(uVar14 - 0x10000) < 1) {
          fVar18 = (float)((int)fVar18 + 1);
        }
        if (-1 < (int)(uVar14 - 0x1000000)) {
          fVar18 = (float)((int)fVar18 + 2);
        }
        *puVar32 = (short)iVar57;
        if ((uVar14 & 0xfe00) != 0) {
          fVar18 = (float)((int)fVar18 + 0xc);
        }
        uVar46 = uVar46 & (uint)fVar18;
        *pfVar68 = fVar18;
        pfVar68 = pfVar67;
        puVar69 = puVar32 + 1;
      } while (puVar62 != puVar10);
joined_r0x80026b40:
      puVar69 = puVar32 + 1;
    }
  } while ((uVar46 & 0xf) != 0);
  iVar34 = uVar59 * 4 + -4;
  uVar26 = uVar65 >> 6 & 0x3fc;
  iVar41 = uVar26 + iVar34;
  puVar15 = (uint *)((int)puVar61 + uVar26 + iVar41);
  pfVar67 = &FLOAT_1f800000;
  puVar69 = &DAT_1f8002a8;
  uVar26 = *puVar15;
  puVar62 = puVar15;
  puVar10 = puVar66;
LAB_80026b74:
  puVar66 = puVar10;
  puVar20 = puVar62;
  if (puVar20 != (uint *)((uVar65 >> 0xc & 0xff0) + (int)puVar15)) {
    uVar28 = puVar20[4];
    uVar30 = uVar26 >> 0x16 & 0x3fc;
    uVar14 = uVar26 >> 0xe & 0x3fc;
    uVar46 = uVar26 >> 6 & 0x3fc;
    uVar21 = (uVar26 & 0xff) * 4;
    puVar62 = puVar20 + 4;
    uVar77 = SUB42(ptr_graphicsRelated,0);
    uVar36 = (undefined)((uint)ptr_graphicsRelated >> 0x10);
    uVar26 = uVar28;
    if (uVar46 == uVar21) {
      puVar10 = (uint *)((int)puVar66 + 1);
      if ((int)puVar66 < 1) goto code_r0x80027170;
      uVar22 = puVar20[3];
      uVar21 = 0;
      iVar49 = *(int *)(uVar30 + 0x1f800000);
      iVar52 = *(int *)(uVar14 + 0x1f800000);
      iVar37 = *(int *)(uVar46 + 0x1f800000);
      goto LAB_800271d8;
    }
    puVar10 = (uint *)((int)puVar66 + 1);
    if ((int)puVar66 < 1) {
      uVar28 = *(uint *)(uVar30 + 0x1f800000);
      uVar22 = *(uint *)(uVar14 + 0x1f800000);
      uVar29 = *(uint *)(uVar46 + 0x1f800000);
      uVar31 = *(uint *)(uVar21 + 0x1f800000);
      if ((uVar28 & uVar22 & uVar29 & uVar31 & 0xf) != 0) goto LAB_80026b74;
      uVar17 = puVar20[3];
      iVar49 = (int)uVar28 >> 5;
      iVar52 = (int)uVar22 >> 5;
      iVar37 = (int)uVar29 >> 5;
      iVar57 = (int)uVar31 >> 5;
      uVar28 = (uVar28 | uVar22 | uVar29 | uVar31) & 0x10;
    }
    else {
      uVar17 = puVar20[3];
      uVar28 = 0;
      iVar49 = *(int *)(uVar30 + 0x1f800000);
      iVar52 = *(int *)(uVar14 + 0x1f800000);
      iVar37 = *(int *)(uVar46 + 0x1f800000);
      iVar57 = *(int *)(uVar21 + 0x1f800000);
    }
    gte_ldSXY0(iVar49);
    gte_ldSXY1(iVar52);
    gte_ldSXY2(iVar57);
    puVar12 = (ushort *)((int)&DAT_1f8002a8 + (uVar30 >> 1));
    gte_nclip_b();
    puVar19 = (ushort *)((int)&DAT_1f8002a8 + (uVar14 >> 1));
    puVar23 = (ushort *)((int)&DAT_1f8002a8 + (uVar46 >> 1));
    if (uVar28 == 0) {
      iVar58 = gte_stMAC0();
      if ((uVar17 & 2) != 0) {
        iVar58 = -iVar58;
      }
      uVar30 = (uint)*puVar12;
      if (-1 < iVar58) goto LAB_80026ce0;
      gte_ldSXY0(iVar37);
      uVar14 = (uint)*puVar19;
      uVar46 = (uint)*puVar23;
      gte_nclip_b();
      uVar21 = (uint)*(ushort *)((int)&DAT_1f8002a8 + (uVar21 >> 1));
      iVar58 = uVar30 + uVar14;
      if ((uVar17 & 4) != 0) goto LAB_80026cf0;
      uVar22 = iVar58 + uVar46 + uVar21;
      if ((uVar17 & 2) == 0) {
        iVar54 = gte_stMAC0();
        iVar58 = (int)puVar16 - uVar22;
        if (0 < iVar54) goto LAB_80026b74;
      }
      else {
        iVar54 = gte_stMAC0();
        iVar58 = (int)puVar16 - uVar22;
        if (iVar54 < 0) goto LAB_80026b74;
      }
    }
    else {
      uVar30 = (uint)*puVar12;
LAB_80026ce0:
      uVar14 = (uint)*puVar19;
      uVar46 = (uint)*puVar23;
      uVar21 = (uint)*(ushort *)((int)&DAT_1f8002a8 + (uVar21 >> 1));
      iVar58 = uVar30 + uVar14;
LAB_80026cf0:
      uVar22 = iVar58 + uVar46 + uVar21;
      iVar58 = (int)puVar16 - uVar22;
    }
    if (0 < iVar58) {
      if ((-1 < (int)(uVar22 - 0x2000)) || ((uVar17 & 0x80) != 0)) {
LAB_80026db8:
        uVar28 = puVar20[1];
        uVar22 = uVar22 >> 7;
        iVar58 = uVar22 + ((uVar17 & 0x38) >> 1);
        ptr_graphicsRelated[2] = iVar49;
        ptr_graphicsRelated[5] = iVar52;
        ptr_graphicsRelated[8] = iVar57;
        ptr_graphicsRelated[0xb] = iVar37;
        uVar29 = (uint)puVar16 >> 2;
        if ((uVar17 & 1) != 0) {
          uVar29 = uVar29 + 0x2000;
        }
        uVar31 = uVar28 >> 0x16 & 0x3fc;
        uVar17 = *(uint *)((int)puVar61 + uVar31 + iVar34);
        iVar49 = uVar29 - uVar30;
        uVar30 = uVar17;
        if ((iVar49 + -0x1000 < 0) &&
           (uVar30 = *(uint *)((int)puVar61 + uVar31 + iVar41), 0 < iVar49)) {
          gte_ldfcdir((uVar17 & 0xff) << 4,uVar17 >> 4 & 0xff0,uVar17 >> 0xc);
          gte_ldRGB(uVar30);
          gte_ldIR0(iVar49);
          uVar17 = uVar28 >> 0xe & 0x3fc;
          gte_dpcs_b();
          uVar30 = *(uint *)((int)puVar61 + uVar17 + iVar34);
          uVar31 = gte_stRGB2();
          ptr_graphicsRelated[1] = uVar31 | 0x3c000000;
        }
        else {
          ptr_graphicsRelated[1] = uVar30 | 0x3c000000;
          uVar17 = uVar28 >> 0xe & 0x3fc;
          uVar30 = *(uint *)((int)puVar61 + uVar17 + iVar34);
        }
        iVar49 = uVar29 - uVar14;
        uVar14 = uVar30;
        if ((iVar49 + -0x1000 < 0) &&
           (uVar14 = *(uint *)((int)puVar61 + uVar17 + iVar41), 0 < iVar49)) {
          gte_ldfcdir((uVar30 & 0xff) << 4,uVar30 >> 4 & 0xff0,uVar30 >> 0xc);
          gte_ldRGB(uVar14);
          gte_ldIR0(iVar49);
          uVar14 = uVar28 >> 6 & 0x3fc;
          gte_dpcs_b();
          uVar30 = *(uint *)((int)puVar61 + uVar14 + iVar34);
          uVar47 = gte_stRGB2();
          ptr_graphicsRelated[4] = uVar47;
        }
        else {
          ptr_graphicsRelated[4] = uVar14;
          uVar14 = uVar28 >> 6 & 0x3fc;
          uVar30 = *(uint *)((int)puVar61 + uVar14 + iVar34);
        }
        iVar49 = uVar29 - uVar46;
        uVar46 = uVar30;
        if ((iVar49 + -0x1000 < 0) &&
           (uVar46 = *(uint *)((int)puVar61 + uVar14 + iVar41), 0 < iVar49)) {
          gte_ldfcdir((uVar30 & 0xff) << 4,uVar30 >> 4 & 0xff0,uVar30 >> 0xc);
          gte_ldRGB(uVar46);
          gte_ldIR0(iVar49);
          gte_dpcs_b();
          uVar30 = puVar61[uVar59 + ((uVar28 & 0xff) - 1)];
          uVar47 = gte_stRGB2();
          ptr_graphicsRelated[10] = uVar47;
        }
        else {
          ptr_graphicsRelated[10] = uVar46;
          uVar30 = puVar61[uVar59 + ((uVar28 & 0xff) - 1)];
        }
        iVar52 = uVar29 - uVar21;
        uVar14 = uVar30;
        iVar49 = iVar70;
        if ((iVar52 + -0x1000 < 0) &&
           (uVar14 = *(uint *)((int)puVar61 + (uVar28 & 0xff) * 4 + iVar41), 0 < iVar52)) {
          gte_ldfcdir((uVar30 & 0xff) << 4,uVar30 >> 4 & 0xff0,uVar30 >> 0xc);
          gte_ldRGB(uVar14);
          gte_ldIR0(iVar52);
          gte_dpcs_b();
          cVar2 = *(char *)(puVar20 + 2);
          uVar30 = (uVar22 * 0x20 - uVar29) + 0x1000;
          uVar14 = uVar30 >> 8;
          if ((int)uVar30 < 1) {
            uVar14 = 0;
            iVar49 = iVar70 + 8;
          }
          *(undefined *)puVar66 = 1;
          uVar47 = gte_stRGB2();
          ptr_graphicsRelated[7] = uVar47;
        }
        else {
          ptr_graphicsRelated[7] = uVar14;
          uVar30 = (uVar22 * 0x20 - uVar29) + 0x1000;
          cVar2 = *(char *)(puVar20 + 2);
          uVar14 = uVar30 >> 8;
          if ((int)uVar30 < 1) {
            uVar14 = 0;
            iVar49 = iVar70 + 8;
          }
          *(undefined *)puVar66 = 1;
        }
        uVar30 = (uint)cVar2;
        if ((int)uVar30 < 0) {
          *(undefined *)((int)ptr_graphicsRelated + 7) = 0x3e;
          bVar1 = uVar30 == 0xffffffff;
          uVar30 = uVar30 & 0x7f;
          if (bVar1) {
            uVar47 = ptr_graphicsRelated[4];
            ptr_graphicsRelated[4] = ptr_graphicsRelated[5];
            ptr_graphicsRelated[6] = ptr_graphicsRelated[8];
            ptr_graphicsRelated[8] = ptr_graphicsRelated[0xb];
            ptr_graphicsRelated[3] = uVar47;
            ptr_graphicsRelated[5] = ptr_graphicsRelated[7];
            ptr_graphicsRelated[7] = ptr_graphicsRelated[10];
            *(undefined *)((int)ptr_graphicsRelated + 7) = 0x38;
            *ptr_graphicsRelated = 0x8000000;
            piVar55 = puVar11 + iVar58 * 2;
            puVar32 = (undefined2 *)*piVar55;
            *piVar55 = (int)ptr_graphicsRelated;
            if (puVar32 == (undefined2 *)0x0) {
              piVar55[1] = (int)ptr_graphicsRelated;
              ptr_graphicsRelated = ptr_graphicsRelated + 9;
            }
            else {
              *puVar32 = uVar77;
              *(undefined *)(puVar32 + 1) = uVar36;
              ptr_graphicsRelated = ptr_graphicsRelated + 9;
            }
            goto LAB_80026b74;
          }
        }
        piVar55 = (int *)(uVar30 * 0x10 + iVar49);
        iVar52 = piVar55[1];
        iVar49 = *piVar55 + uVar14 * 0x400000;
        ptr_graphicsRelated[3] = iVar49;
        ptr_graphicsRelated[6] = iVar52;
        ptr_graphicsRelated[9] = iVar49 + 0x1f00;
        ptr_graphicsRelated[0xc] = iVar49 + 0x1f1f;
        *ptr_graphicsRelated = 0xc000000;
        piVar55 = puVar11 + iVar58 * 2;
        puVar32 = (undefined2 *)*piVar55;
        *piVar55 = (int)ptr_graphicsRelated;
        if (puVar32 == (undefined2 *)0x0) {
          piVar55[1] = (int)ptr_graphicsRelated;
          ptr_graphicsRelated = ptr_graphicsRelated + 0xd;
        }
        else {
          *puVar32 = uVar77;
          *(undefined *)(puVar32 + 1) = uVar36;
          ptr_graphicsRelated = ptr_graphicsRelated + 0xd;
        }
        goto LAB_80026b74;
      }
      if (((int)(uVar30 - 0x140) < 0) ||
         ((((int)(uVar14 - 0x140) < 0 || ((int)(uVar46 - 0x140) < 0)) || ((int)(uVar21 - 0x140) < 0)
          ))) {
        if (uVar22 == 0) goto LAB_80026b74;
        if ((uVar17 & 0x40) == 0) {
          if ((uVar45 & 2) == 0) {
            *puVar76 = uVar45 >> 2;
            puVar76 = puVar76 + 1;
          }
          *puVar76 = (int)puVar20 + (uVar28 >> 4);
          puVar76 = (uint *)((int *)puVar76 + 1);
          *(undefined *)puVar66 = 4;
          uVar45 = uVar45 | 2;
          goto LAB_80026b74;
        }
      }
      else if ((uVar17 & 0x40) != 0) goto LAB_80026db8;
      if ((uVar45 & 1) == 0) {
        *puVar73 = uVar45 >> 2;
        puVar73 = puVar73 + 1;
      }
      *puVar73 = (int)puVar20 + (uVar28 >> 4);
      puVar73 = (uint *)((int *)puVar73 + 1);
      *(undefined *)puVar66 = 2;
      uVar45 = uVar45 | 1;
    }
    goto LAB_80026b74;
  }
  goto LAB_800267e4;
code_r0x80027170:
  uVar21 = *(uint *)(uVar30 + 0x1f800000);
  uVar28 = *(uint *)(uVar14 + 0x1f800000);
  uVar17 = *(uint *)(uVar46 + 0x1f800000);
  if ((uVar21 & uVar28 & uVar17 & 0xf) != 0) goto LAB_80026b74;
  uVar22 = puVar20[3];
  iVar49 = (int)uVar21 >> 5;
  iVar52 = (int)uVar28 >> 5;
  iVar37 = (int)uVar17 >> 5;
  uVar21 = (uVar21 | uVar28 | uVar17) & 0x10;
LAB_800271d8:
  gte_ldSXY0(iVar49);
  gte_ldSXY1(iVar52);
  gte_ldSXY2(iVar37);
  puVar12 = (ushort *)((int)&DAT_1f8002a8 + (uVar30 >> 1));
  gte_nclip_b();
  puVar19 = (ushort *)((int)&DAT_1f8002a8 + (uVar14 >> 1));
  if (((uVar22 & 4) == 0) && (uVar21 == 0)) {
    iVar57 = gte_stMAC0();
    uVar4 = *puVar12;
    if ((uVar22 & 2) != 0) {
      iVar57 = -iVar57;
    }
    uVar5 = *puVar19;
    if (iVar57 < 0) goto LAB_80026b74;
    uVar6 = *(ushort *)((int)&DAT_1f8002a8 + (uVar46 >> 1));
  }
  else {
    uVar4 = *puVar12;
    uVar5 = *puVar19;
    uVar6 = *(ushort *)((int)&DAT_1f8002a8 + (uVar46 >> 1));
  }
  uVar46 = (uint)uVar6;
  uVar14 = (uint)uVar5;
  uVar30 = (uint)uVar4;
  uVar28 = uVar30 + uVar14 + uVar46 * 2;
  if ((int)((int)puVar16 - uVar28) < 1) goto LAB_80026b74;
  if (((int)(uVar28 - 0x2000) < 0) && ((uVar22 & 0x80) == 0)) {
    if (((int)(uVar30 - 0x140) < 0) || (((int)(uVar14 - 0x140) < 0 || ((int)(uVar46 - 0x140) < 0))))
    {
      if (uVar28 == 0) goto LAB_80026b74;
      if ((uVar22 & 0x40) == 0) {
        if ((uVar45 & 2) == 0) {
          *puVar76 = uVar45 >> 2;
          puVar76 = puVar76 + 1;
        }
        *puVar76 = (int)puVar20 + (uVar21 >> 4) | 2;
        puVar76 = puVar76 + 1;
        *(undefined *)puVar66 = 4;
        uVar45 = uVar45 | 2;
        goto LAB_80026b74;
      }
    }
    else if ((uVar22 & 0x40) != 0) goto LAB_80027310;
    if ((uVar45 & 1) == 0) {
      *puVar73 = uVar45 >> 2;
      puVar73 = puVar73 + 1;
    }
    *puVar73 = (int)puVar20 + (uVar21 >> 4) | 2;
    puVar73 = puVar73 + 1;
    *(undefined *)puVar66 = 2;
    uVar45 = uVar45 | 1;
    goto LAB_80026b74;
  }
LAB_80027310:
  uVar21 = puVar20[1];
  uVar28 = uVar28 >> 7;
  iVar57 = uVar28 + ((uVar22 & 0x38) >> 1);
  ptr_graphicsRelated[2] = iVar49;
  ptr_graphicsRelated[5] = iVar52;
  ptr_graphicsRelated[8] = iVar37;
  uVar17 = (uint)puVar16 >> 2;
  if ((uVar22 & 1) != 0) {
    uVar17 = uVar17 + 0x2000;
  }
  uVar29 = uVar21 >> 0x16 & 0x3fc;
  uVar22 = *(uint *)((int)puVar61 + uVar29 + iVar34);
  iVar49 = uVar17 - uVar30;
  uVar30 = uVar22;
  if ((iVar49 + -0x1000 < 0) && (uVar30 = *(uint *)((int)puVar61 + uVar29 + iVar41), 0 < iVar49)) {
    gte_ldfcdir((uVar22 & 0xff) << 4,uVar22 >> 4 & 0xff0,uVar22 >> 0xc);
    gte_ldRGB(uVar30);
    gte_ldIR0(iVar49);
    uVar22 = uVar21 >> 0xe & 0x3fc;
    gte_dpcs_b();
    uVar30 = *(uint *)((int)puVar61 + uVar22 + iVar34);
    uVar29 = gte_stRGB2();
    ptr_graphicsRelated[1] = uVar29 | 0x34000000;
  }
  else {
    ptr_graphicsRelated[1] = uVar30 | 0x34000000;
    uVar22 = uVar21 >> 0xe & 0x3fc;
    uVar30 = *(uint *)((int)puVar61 + uVar22 + iVar34);
  }
  iVar49 = uVar17 - uVar14;
  uVar14 = uVar30;
  if ((iVar49 + -0x1000 < 0) && (uVar14 = *(uint *)((int)puVar61 + uVar22 + iVar41), 0 < iVar49)) {
    gte_ldfcdir((uVar30 & 0xff) << 4,uVar30 >> 4 & 0xff0,uVar30 >> 0xc);
    gte_ldRGB(uVar14);
    gte_ldIR0(iVar49);
    uVar14 = uVar21 >> 6 & 0x3fc;
    gte_dpcs_b();
    uVar30 = *(uint *)((int)puVar61 + uVar14 + iVar34);
    uVar47 = gte_stRGB2();
    ptr_graphicsRelated[4] = uVar47;
  }
  else {
    ptr_graphicsRelated[4] = uVar14;
    uVar14 = uVar21 >> 6 & 0x3fc;
    uVar30 = *(uint *)((int)puVar61 + uVar14 + iVar34);
  }
  iVar52 = uVar17 - uVar46;
  uVar46 = uVar30;
  iVar49 = iVar70;
  if ((iVar52 + -0x1000 < 0) && (uVar46 = *(uint *)((int)puVar61 + uVar14 + iVar41), 0 < iVar52)) {
    gte_ldfcdir((uVar30 & 0xff) << 4,uVar30 >> 4 & 0xff0,uVar30 >> 0xc);
    gte_ldRGB(uVar46);
    gte_ldIR0(iVar52);
    gte_dpcs_b();
    uVar46 = puVar20[2];
    uVar30 = (uVar28 * 0x20 - uVar17) + 0x1000;
    uVar14 = uVar30 >> 8;
    if ((int)uVar30 < 1) {
      uVar14 = 0;
      iVar49 = iVar70 + 8;
    }
    *(undefined *)puVar66 = 1;
    uVar47 = gte_stRGB2();
    ptr_graphicsRelated[7] = uVar47;
  }
  else {
    ptr_graphicsRelated[7] = uVar46;
    uVar30 = (uVar28 * 0x20 - uVar17) + 0x1000;
    uVar46 = puVar20[2];
    uVar14 = uVar30 >> 8;
    if ((int)uVar30 < 1) {
      uVar14 = 0;
      iVar49 = iVar70 + 8;
    }
    *(undefined *)puVar66 = 1;
  }
  uVar30 = uVar46;
  if ((int)(uVar46 << 0x18) < 0) {
    *(undefined *)((int)ptr_graphicsRelated + 7) = 0x36;
    uVar30 = (int)(uVar46 << 0x18) >> 0x18;
    if (uVar30 == 0xffffffff) {
      uVar47 = ptr_graphicsRelated[4];
      ptr_graphicsRelated[4] = ptr_graphicsRelated[5];
      ptr_graphicsRelated[6] = ptr_graphicsRelated[8];
      ptr_graphicsRelated[3] = uVar47;
      ptr_graphicsRelated[5] = ptr_graphicsRelated[7];
      *(undefined *)((int)ptr_graphicsRelated + 7) = 0x30;
      *ptr_graphicsRelated = 0x6000000;
      piVar55 = puVar11 + iVar57 * 2;
      puVar32 = (undefined2 *)*piVar55;
      *piVar55 = (int)ptr_graphicsRelated;
      if (puVar32 == (undefined2 *)0x0) {
        piVar55[1] = (int)ptr_graphicsRelated;
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
      else {
        *puVar32 = uVar77;
        *(undefined *)(puVar32 + 1) = uVar36;
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
      goto LAB_80026b74;
    }
  }
  piVar55 = (int *)((uVar30 & 0x7f) * 0x10 + iVar49);
  iVar52 = piVar55[1];
  uVar46 = uVar46 & 0x300;
  iVar49 = *piVar55 + uVar14 * 0x400000;
  if (uVar46 == 0) {
    ptr_graphicsRelated[3] = iVar49;
    ptr_graphicsRelated[6] = iVar52;
    ptr_graphicsRelated[9] = iVar49 + 0x1f00;
  }
  else if ((int)(uVar46 - 0x100) < 1) {
    ptr_graphicsRelated[3] = iVar49 + 0x1f;
    ptr_graphicsRelated[6] = iVar52 + 0x1f00;
    ptr_graphicsRelated[9] = iVar49;
  }
  else if ((int)(uVar46 - 0x200) < 1) {
    ptr_graphicsRelated[3] = iVar49 + 0x1f1f;
    ptr_graphicsRelated[6] = iVar52 + 0x1ee1;
    ptr_graphicsRelated[9] = iVar52;
  }
  else {
    ptr_graphicsRelated[3] = iVar49 + 0x1f00;
    ptr_graphicsRelated[6] = iVar52 + -0x1f;
    ptr_graphicsRelated[9] = iVar49 + 0x1f1f;
  }
  *ptr_graphicsRelated = 0x9000000;
  piVar55 = puVar11 + iVar57 * 2;
  puVar32 = (undefined2 *)*piVar55;
  *piVar55 = (int)ptr_graphicsRelated;
  if (puVar32 == (undefined2 *)0x0) {
    piVar55[1] = (int)ptr_graphicsRelated;
    ptr_graphicsRelated = ptr_graphicsRelated + 10;
  }
  else {
    *puVar32 = uVar77;
    *(undefined *)(puVar32 + 1) = uVar36;
    ptr_graphicsRelated = ptr_graphicsRelated + 10;
  }
  goto LAB_80026b74;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_8002a6fc(int param_1)

{
  byte bVar1;
  byte bVar2;
  int iVar3;
  uint *puVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  uint *puVar9;
  undefined4 *puVar10;
  uint *puVar11;
  undefined uVar12;
  char cVar13;
  byte bVar14;
  byte *pbVar15;
  undefined4 *puVar16;
  undefined4 *puVar17;
  int iVar18;
  undefined4 uVar19;
  uint uVar20;
  undefined4 uVar21;
  undefined4 uVar22;
  uint uVar23;
  uint uVar24;
  int iVar25;
  uint uVar26;
  uint uVar27;
  int iVar28;
  int iVar29;
  int iVar30;
  uint uVar31;
  int *piVar32;
  uint *puVar33;
  int *piVar34;
  uint *puVar35;
  
  piVar34 = DAT_80078564 + DAT_80078560;
  piVar32 = DAT_80078564;
  while (iVar29 = *piVar32, piVar32 != piVar34) {
    piVar32 = piVar32 + 1;
    if ((*(byte *)(iVar29 + 1) & 2) == 0) {
      uVar5 = (uint)*(byte *)(iVar29 + 3) - param_1;
      if ((int)uVar5 < 1) {
        bVar14 = *(byte *)((uint)*(byte *)(iVar29 + 2) * 4 + iVar29 + 8 +
                           (*(byte *)(iVar29 + 1) & 1) + 1);
        while( true ) {
          pbVar15 = (byte *)((uint)bVar14 * 4 + iVar29 + 8);
          bVar1 = *pbVar15;
          *(byte *)(iVar29 + 1) = bVar1 & 3;
          uVar6 = (uint)(bVar1 >> 2);
          if (((bVar1 & 2) != 0) || (uVar6 = uVar6 + uVar5, 0 < (int)uVar6)) break;
          bVar14 = pbVar15[(bVar1 & 1) + 1];
          uVar5 = uVar6;
        }
        *(char *)(iVar29 + 3) = (char)uVar6;
        *(byte *)(iVar29 + 2) = bVar14;
        iVar18 = DAT_800785c4;
        bVar14 = pbVar15[3];
        iVar29 = *(int *)(iVar29 + 4);
        puVar16 = (undefined4 *)((uint)bVar14 * 0x10 + DAT_800785c0);
        puVar17 = (undefined4 *)(iVar29 * 0x10 + DAT_800785c0);
        uVar19 = puVar16[1];
        uVar21 = puVar16[2];
        uVar22 = puVar16[3];
        *puVar17 = *puVar16;
        puVar17[1] = uVar19;
        puVar17[2] = uVar21;
        puVar17[3] = uVar22;
        puVar16 = (undefined4 *)(iVar18 + (uint)bVar14 * 0xa8);
        puVar17 = (undefined4 *)(iVar18 + iVar29 * 0xa8);
        puVar10 = puVar16 + 0x2a;
        do {
          uVar19 = puVar16[1];
          *puVar17 = *puVar16;
          puVar17[1] = uVar19;
          puVar16 = puVar16 + 2;
          puVar17 = puVar17 + 2;
        } while (puVar16 != puVar10);
      }
      else {
        *(char *)(iVar29 + 3) = (char)uVar5;
      }
    }
  }
  piVar34 = DAT_8007856c + DAT_80078568;
  piVar32 = DAT_8007856c;
  while (iVar29 = *piVar32, piVar32 != piVar34) {
    piVar32 = piVar32 + 1;
    if ((*(byte *)(iVar29 + 1) & 2) == 0) {
      uVar5 = (uint)*(byte *)(iVar29 + 3) - param_1;
      if ((int)uVar5 < 1) {
        bVar14 = *(byte *)((uint)*(byte *)(iVar29 + 2) * 4 + iVar29 + 8 +
                           (*(byte *)(iVar29 + 1) & 1) + 1);
        iVar18 = 0;
        while( true ) {
          pbVar15 = (byte *)((uint)bVar14 * 4 + iVar29 + 8);
          bVar2 = *pbVar15;
          bVar1 = pbVar15[3];
          *(byte *)(iVar29 + 1) = bVar2 & 3;
          iVar18 = iVar18 + (char)bVar1;
          uVar6 = (uint)(bVar2 >> 2);
          if (((bVar2 & 2) != 0) || (uVar6 = uVar6 + uVar5, 0 < (int)uVar6)) break;
          bVar14 = pbVar15[(bVar2 & 1) + 1];
          uVar5 = uVar6;
        }
        *(char *)(iVar29 + 3) = (char)uVar6;
        *(byte *)(iVar29 + 2) = bVar14;
        iVar3 = DAT_800785c0 + (uint)*(ushort *)(iVar29 + 4) * 0x10;
        iVar7 = DAT_800785c4 + (uint)*(ushort *)(iVar29 + 4) * 0xa8;
        uVar5 = (uint)*(ushort *)(iVar29 + 6) + iVar18 & 0x7f;
        *(short *)(iVar29 + 6) = (short)uVar5;
        uVar12 = (undefined)(uVar5 >> 2);
        *(undefined *)(iVar3 + 1) = uVar12;
        *(undefined *)(iVar3 + 5) = uVar12;
        *(undefined *)(iVar3 + 9) = uVar12;
        *(undefined *)(iVar3 + 0xd) = uVar12;
        *(undefined *)(iVar7 + 1) = uVar12;
        *(undefined *)(iVar7 + 5) = uVar12;
        cVar13 = (char)(uVar5 >> 1);
        *(char *)(iVar7 + 9) = cVar13;
        *(char *)(iVar7 + 0xd) = cVar13;
        *(char *)(iVar7 + 0x11) = cVar13;
        *(char *)(iVar7 + 0x15) = cVar13;
        bVar14 = cVar13 + 0x20U & 0x3f;
        *(byte *)(iVar7 + 0x19) = bVar14;
        *(byte *)(iVar7 + 0x1d) = bVar14;
        *(byte *)(iVar7 + 0x21) = bVar14;
        *(byte *)(iVar7 + 0x25) = bVar14;
        cVar13 = (char)(uVar5 >> 1);
        *(char *)(iVar7 + 0x29) = cVar13;
        *(char *)(iVar7 + 0x2d) = cVar13;
        *(char *)(iVar7 + 0x31) = cVar13;
        *(char *)(iVar7 + 0x35) = cVar13;
        *(char *)(iVar7 + 0x39) = cVar13;
        *(char *)(iVar7 + 0x3d) = cVar13;
        *(char *)(iVar7 + 0x41) = cVar13;
        *(char *)(iVar7 + 0x45) = cVar13;
        bVar14 = cVar13 + 0x10U & 0x3f;
        *(byte *)(iVar7 + 0x49) = bVar14;
        *(byte *)(iVar7 + 0x4d) = bVar14;
        *(byte *)(iVar7 + 0x51) = bVar14;
        *(byte *)(iVar7 + 0x55) = bVar14;
        *(byte *)(iVar7 + 0x59) = bVar14;
        *(byte *)(iVar7 + 0x5d) = bVar14;
        *(byte *)(iVar7 + 0x61) = bVar14;
        *(byte *)(iVar7 + 0x65) = bVar14;
        bVar14 = bVar14 + 0x10 & 0x3f;
        *(byte *)(iVar7 + 0x69) = bVar14;
        *(byte *)(iVar7 + 0x6d) = bVar14;
        *(byte *)(iVar7 + 0x71) = bVar14;
        *(byte *)(iVar7 + 0x75) = bVar14;
        *(byte *)(iVar7 + 0x79) = bVar14;
        *(byte *)(iVar7 + 0x7d) = bVar14;
        *(byte *)(iVar7 + 0x81) = bVar14;
        *(byte *)(iVar7 + 0x85) = bVar14;
        bVar14 = bVar14 + 0x10 & 0x3f;
        *(byte *)(iVar7 + 0x89) = bVar14;
        *(byte *)(iVar7 + 0x8d) = bVar14;
        *(byte *)(iVar7 + 0x91) = bVar14;
        *(byte *)(iVar7 + 0x95) = bVar14;
        *(byte *)(iVar7 + 0x99) = bVar14;
        *(byte *)(iVar7 + 0x9d) = bVar14;
        *(byte *)(iVar7 + 0xa1) = bVar14;
        *(byte *)(iVar7 + 0xa5) = bVar14;
      }
      else {
        *(char *)(iVar29 + 3) = (char)uVar5;
      }
    }
  }
  cVar13 = -1;
  piVar34 = DAT_80078574 + DAT_80078570;
  piVar32 = DAT_80078574;
  while (cVar13 = cVar13 + '\x01', piVar32 != piVar34) {
    iVar29 = *piVar32;
    piVar32 = piVar32 + 1;
    if ((*(byte *)(iVar29 + 1) & 2) == 0) {
      uVar5 = (uint)*(byte *)(iVar29 + 3) - param_1;
      if ((int)uVar5 < 1) {
        bVar14 = *(byte *)((uint)*(byte *)(iVar29 + 2) * 8 + iVar29 + 0xc +
                           (*(byte *)(iVar29 + 1) & 1) + 2);
        while( true ) {
          pbVar15 = (byte *)((uint)bVar14 * 8 + iVar29 + 0xc);
          bVar1 = *pbVar15;
          uVar6 = (uint)pbVar15[1];
          *(byte *)(iVar29 + 1) = bVar1;
          if (((bVar1 & 2) != 0) || (uVar6 = uVar6 + uVar5, 0 < (int)uVar6)) break;
          bVar14 = pbVar15[(bVar1 & 1) + 2];
          uVar5 = uVar6;
        }
        *(char *)(iVar29 + 3) = (char)uVar6;
        *(byte *)(iVar29 + 2) = bVar14;
        *(char *)(*(int *)(DAT_800785a8 + (uint)*(ushort *)(iVar29 + 4) * 4) + 0x18) = cVar13;
      }
      else {
        *(char *)(iVar29 + 3) = (char)uVar5;
      }
    }
  }
  cVar13 = -1;
  piVar34 = DAT_8007857c + DAT_80078578;
  piVar32 = DAT_8007857c;
  while (cVar13 = cVar13 + '\x01', piVar32 != piVar34) {
    iVar29 = *piVar32;
    piVar32 = piVar32 + 1;
    if ((*(byte *)(iVar29 + 1) & 2) == 0) {
      uVar5 = (uint)*(byte *)(iVar29 + 3) - param_1;
      if ((int)uVar5 < 1) {
        bVar14 = *(byte *)((uint)*(byte *)(iVar29 + 2) * 8 + iVar29 + 0xc +
                           (*(byte *)(iVar29 + 1) & 1) + 2);
        while( true ) {
          pbVar15 = (byte *)((uint)bVar14 * 8 + iVar29 + 0xc);
          bVar1 = *pbVar15;
          uVar6 = (uint)pbVar15[1];
          *(byte *)(iVar29 + 1) = bVar1;
          if (((bVar1 & 2) != 0) || (uVar6 = uVar6 + uVar5, 0 < (int)uVar6)) break;
          bVar14 = pbVar15[(bVar1 & 1) + 2];
          uVar5 = uVar6;
        }
        *(char *)(iVar29 + 3) = (char)uVar6;
        *(byte *)(iVar29 + 2) = bVar14;
        *(char *)(*(int *)(DAT_800785a8 + (uint)*(ushort *)(iVar29 + 4) * 4) + 0x19) = cVar13;
      }
      else {
        *(char *)(iVar29 + 3) = (char)uVar5;
      }
    }
  }
  cVar13 = -1;
  piVar34 = DAT_80078584 + DAT_80078580;
  piVar32 = DAT_80078584;
  while (cVar13 = cVar13 + '\x01', piVar32 != piVar34) {
    iVar29 = *piVar32;
    piVar32 = piVar32 + 1;
    if ((*(byte *)(iVar29 + 1) & 2) == 0) {
      uVar5 = (uint)*(byte *)(iVar29 + 3) - param_1;
      if ((int)uVar5 < 1) {
        bVar14 = *(byte *)((uint)*(byte *)(iVar29 + 2) * 8 + iVar29 + 0xc +
                           (*(byte *)(iVar29 + 1) & 1) + 2);
        while( true ) {
          pbVar15 = (byte *)((uint)bVar14 * 8 + iVar29 + 0xc);
          bVar1 = *pbVar15;
          uVar6 = (uint)pbVar15[1];
          *(byte *)(iVar29 + 1) = bVar1;
          if (((bVar1 & 2) != 0) || (uVar6 = uVar6 + uVar5, 0 < (int)uVar6)) break;
          bVar14 = pbVar15[(bVar1 & 1) + 2];
          uVar5 = uVar6;
        }
        *(char *)(iVar29 + 3) = (char)uVar6;
        *(byte *)(iVar29 + 2) = bVar14;
        *(char *)(*(int *)(DAT_800785a8 + (uint)*(ushort *)(iVar29 + 4) * 4) + 0x1a) = cVar13;
      }
      else {
        *(char *)(iVar29 + 3) = (char)uVar5;
      }
    }
  }
  cVar13 = -1;
  piVar34 = DAT_8007858c + DAT_80078588;
  piVar32 = DAT_8007858c;
  while (cVar13 = cVar13 + '\x01', piVar32 != piVar34) {
    iVar29 = *piVar32;
    piVar32 = piVar32 + 1;
    if ((*(byte *)(iVar29 + 1) & 2) == 0) {
      uVar5 = (uint)*(byte *)(iVar29 + 3) - param_1;
      if ((int)uVar5 < 1) {
        bVar14 = *(byte *)((uint)*(byte *)(iVar29 + 2) * 8 + iVar29 + 0xc +
                           (*(byte *)(iVar29 + 1) & 1) + 2);
        while( true ) {
          pbVar15 = (byte *)((uint)bVar14 * 8 + iVar29 + 0xc);
          bVar1 = *pbVar15;
          uVar6 = (uint)pbVar15[1];
          *(byte *)(iVar29 + 1) = bVar1;
          if (((bVar1 & 2) != 0) || (uVar6 = uVar6 + uVar5, 0 < (int)uVar6)) break;
          bVar14 = pbVar15[(bVar1 & 1) + 2];
          uVar5 = uVar6;
        }
        *(char *)(iVar29 + 3) = (char)uVar6;
        *(byte *)(iVar29 + 2) = bVar14;
        *(char *)(*(int *)(DAT_800785a8 + (uint)*(ushort *)(iVar29 + 4) * 4) + 0x1b) = cVar13;
      }
      else {
        *(char *)(iVar29 + 3) = (char)uVar5;
      }
    }
  }
  puVar35 = DAT_800785a4 + DAT_800785a0;
  puVar33 = DAT_800785a4;
  while (uVar5 = *puVar33, puVar33 != puVar35) {
    puVar33 = puVar33 + 1;
    if ((*(byte *)(uVar5 + 1) & 2) == 0) {
      uVar6 = (uint)*(byte *)(uVar5 + 3) - param_1;
      if ((int)uVar6 < 1) {
        bVar14 = *(byte *)((uint)*(byte *)(uVar5 + 2) * 8 + uVar5 + 0xc + (*(byte *)(uVar5 + 1) & 1)
                          + 2);
        while( true ) {
          pbVar15 = (byte *)((uint)bVar14 * 8 + uVar5 + 0xc);
          bVar1 = *pbVar15;
          uVar8 = (uint)pbVar15[1];
          *(byte *)(uVar5 + 1) = bVar1;
          if (((bVar1 & 2) != 0) || (uVar8 = uVar8 + uVar6, 0 < (int)uVar8)) break;
          bVar14 = pbVar15[(bVar1 & 1) + 2];
          uVar6 = uVar8;
        }
        *(char *)(uVar5 + 3) = (char)uVar8;
        *(byte *)(uVar5 + 2) = bVar14;
        uVar8 = *(uint *)(pbVar15 + 4);
        uVar26 = uVar8 & 0xff;
        uVar24 = uVar8 >> 8 & 0xff;
        uVar6 = *(uint *)(uVar5 + 4) >> 0x10;
        iVar29 = (*(uint *)(uVar5 + 4) & 0xffff) * 0xc;
        iVar18 = *(int *)(uVar5 + 8) + uVar5;
        if (uVar26 == 0) {
          iVar3 = iVar29 * uVar24;
          puVar9 = (uint *)(iVar18 + iVar3);
          puVar4 = (uint *)(uVar6 * 0xc + *(int *)(DAT_800785d4 + 0x10));
          do {
            uVar8 = puVar9[2];
            uVar6 = puVar9[1];
            uVar5 = *puVar9;
            iVar7 = (int)(uVar8 << 9) >> 0x17;
            iVar30 = (int)uVar8 >> 0x17;
            if ((iVar7 < 0) || (uVar8 = uVar8 & 0x3fff, iVar30 < 0)) {
              uVar8 = uVar8 & 0x3fff;
              uVar31 = iVar30 + uVar8;
              uVar27 = iVar7 + uVar8;
              uVar24 = uVar5 & 0x3fff;
              uVar26 = ((int)uVar5 >> 0x17) + uVar24;
              uVar5 = ((int)(uVar5 << 9) >> 0x17) + uVar24;
              uVar20 = uVar6 & 0x3fff;
              uVar23 = ((int)uVar6 >> 0x17) + uVar20;
              uVar6 = ((int)(uVar6 << 9) >> 0x17) + uVar20;
              if (iVar30 - iVar7 < 0) {
                *puVar4 = uVar26 & 0x3fff | (uVar5 - uVar26) * 0x800000 |
                          (uVar24 - uVar26 & 0x1ff) << 0xe;
                puVar4[1] = uVar23 & 0x3fff | (uVar6 - uVar23) * 0x800000 |
                            (uVar20 - uVar23 & 0x1ff) << 0xe;
                puVar4[2] = uVar31 & 0x3fff | (uVar27 - uVar31) * 0x1000000 |
                            (uVar8 - uVar31 & 0x1ff) << 0x10;
              }
              else {
                *puVar4 = uVar5 & 0x3fff | (uVar24 - uVar5) * 0x800000 |
                          (uVar26 - uVar5 & 0x1ff) << 0xe;
                puVar4[1] = uVar6 & 0x3fff | (uVar20 - uVar6) * 0x800000 |
                            (uVar23 - uVar6 & 0x1ff) << 0xe;
                puVar4[2] = uVar27 & 0x3fff | (uVar8 - uVar27) * 0x1000000 |
                            (uVar31 - uVar27 & 0x1ff) << 0x10;
              }
            }
            else {
              *puVar4 = uVar5;
              puVar4[1] = uVar6;
              puVar4[2] = uVar8 | iVar7 << 0x10 | iVar30 << 0x18;
            }
            puVar9 = puVar9 + 3;
            puVar4 = puVar4 + 3;
          } while (puVar9 != (uint *)(iVar18 + iVar3 + iVar29));
        }
        else {
          puVar11 = (uint *)(iVar18 + iVar29 * (uVar8 >> 0x10 & 0xff));
          iVar30 = iVar29 * uVar24;
          puVar4 = (uint *)(uVar6 * 0xc + *(int *)(DAT_800785d4 + 0x10));
          puVar9 = (uint *)(iVar18 + iVar30);
          iVar3 = uVar26 * 0x10;
          iVar7 = uVar26 * -0x10 + 0x1000;
          do {
            uVar6 = *puVar9;
            uVar24 = *puVar11;
            uVar8 = uVar6 & 0x3fff;
            gte_ldIR0(iVar7);
            gte_ldsv_(uVar8,((int)(uVar6 << 9) >> 0x17) + uVar8,((int)uVar6 >> 0x17) + uVar8);
            gte_gpf0_b(0);
            uVar6 = uVar24 & 0x3fff;
            iVar25 = ((int)(uVar24 << 9) >> 0x17) + uVar6;
            iVar28 = ((int)uVar24 >> 0x17) + uVar6;
            gte_ldIR0(iVar3);
            gte_ldsv_(uVar6,iVar25,iVar28);
            gte_gpl0_b(0);
            uVar6 = puVar9[1];
            read_mt(iVar25,iVar28,uVar5);
            uVar24 = puVar11[1];
            FLOAT_1f800000 = (float)(iVar25 >> 0xc);
            _DAT_1f800004 = iVar28 >> 0xc;
            _DAT_1f800008 = (int)uVar5 >> 0xc;
            uVar8 = uVar6 & 0x3fff;
            gte_ldIR0(iVar7);
            gte_ldsv_(uVar8,((int)(uVar6 << 9) >> 0x17) + uVar8,((int)uVar6 >> 0x17) + uVar8);
            gte_gpf0_b(0);
            uVar6 = uVar24 & 0x3fff;
            iVar25 = ((int)(uVar24 << 9) >> 0x17) + uVar6;
            iVar28 = ((int)uVar24 >> 0x17) + uVar6;
            gte_ldIR0(iVar3);
            gte_ldsv_(uVar6,iVar25,iVar28);
            gte_gpl0_b(0);
            uVar6 = puVar9[2];
            read_mt(iVar25,iVar28,_DAT_1f800008);
            uVar8 = puVar11[2];
            _DAT_1f80000c = iVar25 >> 0xc;
            _DAT_1f800010 = iVar28 >> 0xc;
            _DAT_1f800014 = (int)uVar5 >> 0x18;
            uVar5 = uVar6 & 0x3fff;
            gte_ldIR0(iVar7);
            gte_ldsv_(uVar5,((int)(uVar6 << 9) >> 0x17) + uVar5,((int)uVar6 >> 0x17) + uVar5);
            gte_gpf0_b(0);
            uVar5 = uVar8 & 0x3fff;
            uVar6 = ((int)(uVar8 << 9) >> 0x17) + uVar5;
            uVar8 = ((int)uVar8 >> 0x17) + uVar5;
            gte_ldIR0(iVar3);
            gte_ldsv_(uVar5,uVar6,uVar8);
            gte_gpl0_b(0);
            read_mt(uVar6,uVar8,_DAT_1f800014);
            uVar6 = uVar6 >> 0xc;
            uVar8 = uVar8 >> 0xc;
            uVar5 = _DAT_1f800014 >> 0xc;
            if (((int)(uVar8 - uVar6) < 0) || ((int)(uVar5 - uVar6) < 0)) {
              if ((int)(uVar5 - uVar8) < 0) {
                puVar4[2] = uVar5 & 0x3fff | (uVar6 - uVar5 & 0xff) << 0x10 |
                            (uVar8 - uVar5) * 0x1000000;
                puVar4[1] = _DAT_1f800014 & 0x3fff | (_DAT_1f80000c - _DAT_1f800014 & 0x1ff) << 0xe
                            | (_DAT_1f800010 - _DAT_1f800014) * 0x800000;
                uVar5 = _DAT_1f800008 & 0x3fff |
                        ((int)FLOAT_1f800000 - _DAT_1f800008 & 0x1ff) << 0xe |
                        (_DAT_1f800004 - _DAT_1f800008) * 0x800000;
                *puVar4 = uVar5;
              }
              else {
                puVar4[2] = uVar8 & 0x3fff | (uVar5 - uVar8 & 0xff) << 0x10 |
                            (uVar6 - uVar8) * 0x1000000;
                puVar4[1] = _DAT_1f800010 & 0x3fff | (_DAT_1f800014 - _DAT_1f800010 & 0x1ff) << 0xe
                            | (_DAT_1f80000c - _DAT_1f800010) * 0x800000;
                uVar5 = (_DAT_1f800008 - _DAT_1f800004 & 0x1ff) << 0xe;
                *puVar4 = _DAT_1f800004 & 0x3fff | uVar5 |
                          ((int)FLOAT_1f800000 - _DAT_1f800004) * 0x800000;
              }
            }
            else {
              puVar4[2] = uVar6 & 0x3fff | (uVar8 - uVar6 & 0xff) << 0x10 |
                          (uVar5 - uVar6) * 0x1000000;
              puVar4[1] = _DAT_1f80000c & 0x3fff | (_DAT_1f800010 - _DAT_1f80000c & 0x1ff) << 0xe |
                          (_DAT_1f800014 - _DAT_1f80000c) * 0x800000;
              uVar5 = (_DAT_1f800008 - (int)FLOAT_1f800000) * 0x800000;
              *puVar4 = (uint)FLOAT_1f800000 & 0x3fff |
                        (_DAT_1f800004 - (int)FLOAT_1f800000 & 0x1ff) << 0xe | uVar5;
            }
            puVar9 = puVar9 + 3;
            puVar11 = puVar11 + 3;
            puVar4 = puVar4 + 3;
          } while (puVar9 != (uint *)(iVar18 + iVar30 + iVar29));
        }
      }
      else {
        *(char *)(uVar5 + 3) = (char)uVar6;
      }
    }
  }
  return;
}



void maybe_UpdateTerrain(uint param_1,byte param_2,byte param_3)

{
  byte *pbVar1;
  byte **ppbVar2;
  int iVar3;
  byte **ppbVar4;
  int *piVar5;
  
  piVar5 = &DAT_80078560;
  while (iVar3 = *piVar5, piVar5 != &DAT_800785a8) {
    ppbVar2 = (byte **)piVar5[1];
    piVar5 = piVar5 + 2;
    ppbVar4 = ppbVar2 + iVar3;
    while (pbVar1 = *ppbVar2, ppbVar2 != ppbVar4) {
      ppbVar2 = ppbVar2 + 1;
      if (*pbVar1 == param_1) {
        pbVar1[1] = pbVar1[1] & param_2 | param_3;
      }
    }
  }
  return;
}



void FUN_8002b3f4(int param_1)

{
  int *piVar1;
  int **ppiVar2;
  int iVar3;
  int **ppiVar4;
  int *piVar5;
  
  piVar5 = &DAT_80078560;
  do {
    iVar3 = *piVar5;
    if (piVar5 == &DAT_800785a8) {
      return;
    }
    ppiVar2 = (int **)piVar5[1];
    piVar5 = piVar5 + 2;
    ppiVar4 = ppiVar2 + iVar3;
    while (piVar1 = *ppiVar2, ppiVar2 != ppiVar4) {
      ppiVar2 = ppiVar2 + 1;
      if (*piVar1 << 0x18 == param_1 << 0x18) {
        return;
      }
    }
  } while( true );
}



void TerrainKeyFrameRelated(uint param_1,byte param_2,int param_3)

{
  byte *pbVar1;
  byte **ppbVar2;
  int iVar3;
  byte **ppbVar4;
  int *piVar5;
  
  piVar5 = &DAT_80078560;
  while (iVar3 = *piVar5, piVar5 != &DAT_800785a8) {
    ppbVar2 = (byte **)piVar5[1];
    piVar5 = piVar5 + 2;
    ppbVar4 = ppbVar2 + iVar3;
    while (pbVar1 = *ppbVar2, ppbVar2 != ppbVar4) {
      ppbVar2 = ppbVar2 + 1;
      if ((*pbVar1 == param_1) && (pbVar1[2] = param_2, param_3 != 0)) {
        pbVar1[3] = 1;
      }
    }
  }
  return;
}



void FUN_8002b4ac(void)

{
  ushort uVar1;
  int iVar2;
  uint *puVar3;
  uint *puVar4;
  uint uVar5;
  undefined4 *puVar6;
  undefined uVar7;
  char cVar8;
  byte bVar9;
  undefined4 *puVar10;
  int iVar11;
  uint uVar12;
  undefined4 *puVar13;
  uint uVar14;
  undefined4 uVar15;
  uint uVar16;
  uint uVar17;
  undefined4 uVar18;
  undefined4 uVar19;
  uint uVar20;
  uint uVar21;
  uint uVar22;
  int iVar23;
  int iVar24;
  uint uVar25;
  int *piVar26;
  int *piVar27;
  int iVar28;
  
  piVar27 = DAT_80078564 + DAT_80078560;
  piVar26 = DAT_80078564;
  while (iVar2 = DAT_800785c4, iVar23 = *piVar26, piVar26 != piVar27) {
    piVar26 = piVar26 + 1;
    uVar5 = (uint)*(byte *)(iVar23 + (uint)*(byte *)(iVar23 + 2) * 4 + 0xb);
    iVar23 = *(int *)(iVar23 + 4);
    puVar10 = (undefined4 *)(uVar5 * 0x10 + DAT_800785c0);
    puVar13 = (undefined4 *)(iVar23 * 0x10 + DAT_800785c0);
    uVar15 = puVar10[1];
    uVar18 = puVar10[2];
    uVar19 = puVar10[3];
    *puVar13 = *puVar10;
    puVar13[1] = uVar15;
    puVar13[2] = uVar18;
    puVar13[3] = uVar19;
    puVar10 = (undefined4 *)(iVar2 + uVar5 * 0xa8);
    puVar13 = (undefined4 *)(iVar2 + iVar23 * 0xa8);
    puVar6 = puVar10 + 0x2a;
    do {
      uVar15 = puVar10[1];
      *puVar13 = *puVar10;
      puVar13[1] = uVar15;
      puVar10 = puVar10 + 2;
      puVar13 = puVar13 + 2;
    } while (puVar10 != puVar6);
  }
  piVar27 = DAT_8007856c + DAT_80078568;
  for (piVar26 = DAT_8007856c; piVar26 != piVar27; piVar26 = piVar26 + 1) {
    uVar5 = (uint)*(ushort *)(*piVar26 + 4);
    uVar1 = *(ushort *)(*piVar26 + 6);
    iVar2 = DAT_800785c0 + uVar5 * 0x10;
    iVar23 = DAT_800785c4 + uVar5 * 0xa8;
    uVar7 = (undefined)(uVar1 >> 2);
    *(undefined *)(iVar2 + 1) = uVar7;
    *(undefined *)(iVar2 + 5) = uVar7;
    *(undefined *)(iVar2 + 9) = uVar7;
    *(undefined *)(iVar2 + 0xd) = uVar7;
    *(undefined *)(iVar23 + 1) = uVar7;
    *(undefined *)(iVar23 + 5) = uVar7;
    cVar8 = (char)(uVar1 >> 1);
    *(char *)(iVar23 + 9) = cVar8;
    *(char *)(iVar23 + 0xd) = cVar8;
    *(char *)(iVar23 + 0x11) = cVar8;
    *(char *)(iVar23 + 0x15) = cVar8;
    bVar9 = cVar8 + 0x20U & 0x3f;
    *(byte *)(iVar23 + 0x19) = bVar9;
    *(byte *)(iVar23 + 0x1d) = bVar9;
    *(byte *)(iVar23 + 0x21) = bVar9;
    *(byte *)(iVar23 + 0x25) = bVar9;
    cVar8 = (char)(uVar1 >> 1);
    *(char *)(iVar23 + 0x29) = cVar8;
    *(char *)(iVar23 + 0x2d) = cVar8;
    *(char *)(iVar23 + 0x31) = cVar8;
    *(char *)(iVar23 + 0x35) = cVar8;
    *(char *)(iVar23 + 0x39) = cVar8;
    *(char *)(iVar23 + 0x3d) = cVar8;
    *(char *)(iVar23 + 0x41) = cVar8;
    *(char *)(iVar23 + 0x45) = cVar8;
    bVar9 = cVar8 + 0x10U & 0x3f;
    *(byte *)(iVar23 + 0x49) = bVar9;
    *(byte *)(iVar23 + 0x4d) = bVar9;
    *(byte *)(iVar23 + 0x51) = bVar9;
    *(byte *)(iVar23 + 0x55) = bVar9;
    *(byte *)(iVar23 + 0x59) = bVar9;
    *(byte *)(iVar23 + 0x5d) = bVar9;
    *(byte *)(iVar23 + 0x61) = bVar9;
    *(byte *)(iVar23 + 0x65) = bVar9;
    bVar9 = bVar9 + 0x10 & 0x3f;
    *(byte *)(iVar23 + 0x69) = bVar9;
    *(byte *)(iVar23 + 0x6d) = bVar9;
    *(byte *)(iVar23 + 0x71) = bVar9;
    *(byte *)(iVar23 + 0x75) = bVar9;
    *(byte *)(iVar23 + 0x79) = bVar9;
    *(byte *)(iVar23 + 0x7d) = bVar9;
    *(byte *)(iVar23 + 0x81) = bVar9;
    *(byte *)(iVar23 + 0x85) = bVar9;
    bVar9 = bVar9 + 0x10 & 0x3f;
    *(byte *)(iVar23 + 0x89) = bVar9;
    *(byte *)(iVar23 + 0x8d) = bVar9;
    *(byte *)(iVar23 + 0x91) = bVar9;
    *(byte *)(iVar23 + 0x95) = bVar9;
    *(byte *)(iVar23 + 0x99) = bVar9;
    *(byte *)(iVar23 + 0x9d) = bVar9;
    *(byte *)(iVar23 + 0xa1) = bVar9;
    *(byte *)(iVar23 + 0xa5) = bVar9;
  }
  cVar8 = -1;
  piVar27 = DAT_80078574 + DAT_80078570;
  for (piVar26 = DAT_80078574; cVar8 = cVar8 + '\x01', piVar26 != piVar27; piVar26 = piVar26 + 1) {
    *(char *)(*(int *)(DAT_800785a8 + (uint)*(ushort *)(*piVar26 + 4) * 4) + 0x18) = cVar8;
  }
  cVar8 = -1;
  piVar27 = DAT_8007857c + DAT_80078578;
  for (piVar26 = DAT_8007857c; cVar8 = cVar8 + '\x01', piVar26 != piVar27; piVar26 = piVar26 + 1) {
    *(char *)(*(int *)(DAT_800785a8 + (uint)*(ushort *)(*piVar26 + 4) * 4) + 0x19) = cVar8;
  }
  cVar8 = -1;
  piVar27 = DAT_80078584 + DAT_80078580;
  for (piVar26 = DAT_80078584; cVar8 = cVar8 + '\x01', piVar26 != piVar27; piVar26 = piVar26 + 1) {
    *(char *)(*(int *)(DAT_800785a8 + (uint)*(ushort *)(*piVar26 + 4) * 4) + 0x1a) = cVar8;
  }
  cVar8 = -1;
  piVar27 = DAT_8007858c + DAT_80078588;
  for (piVar26 = DAT_8007858c; cVar8 = cVar8 + '\x01', piVar26 != piVar27; piVar26 = piVar26 + 1) {
    *(char *)(*(int *)(DAT_800785a8 + (uint)*(ushort *)(*piVar26 + 4) * 4) + 0x1b) = cVar8;
  }
  piVar27 = DAT_800785a4 + DAT_800785a0;
  piVar26 = DAT_800785a4;
  while (iVar2 = *piVar26, piVar26 != piVar27) {
    piVar26 = piVar26 + 1;
    iVar23 = (*(uint *)(iVar2 + 4) & 0xffff) * 0xc;
    iVar11 = *(int *)(iVar2 + 8) + iVar2;
    iVar28 = iVar23 * (*(uint *)(iVar2 + (uint)*(byte *)(iVar2 + 2) * 8 + 0x10) >> 8 & 0xff);
    puVar4 = (uint *)(iVar11 + iVar28);
    puVar3 = (uint *)((*(uint *)(iVar2 + 4) >> 0x10) * 0xc + *(int *)(DAT_800785d4 + 0x10));
    do {
      uVar21 = puVar4[2];
      uVar16 = puVar4[1];
      uVar5 = *puVar4;
      iVar2 = (int)(uVar21 << 9) >> 0x17;
      iVar24 = (int)uVar21 >> 0x17;
      if ((iVar2 < 0) || (uVar21 = uVar21 & 0x3fff, iVar24 < 0)) {
        uVar21 = uVar21 & 0x3fff;
        uVar25 = iVar24 + uVar21;
        uVar22 = iVar2 + uVar21;
        uVar12 = uVar5 & 0x3fff;
        uVar14 = ((int)uVar5 >> 0x17) + uVar12;
        uVar5 = ((int)(uVar5 << 9) >> 0x17) + uVar12;
        uVar17 = uVar16 & 0x3fff;
        uVar20 = ((int)uVar16 >> 0x17) + uVar17;
        uVar16 = ((int)(uVar16 << 9) >> 0x17) + uVar17;
        if (iVar24 - iVar2 < 0) {
          *puVar3 = uVar14 & 0x3fff | (uVar5 - uVar14) * 0x800000 | (uVar12 - uVar14 & 0x1ff) << 0xe
          ;
          puVar3[1] = uVar20 & 0x3fff | (uVar16 - uVar20) * 0x800000 |
                      (uVar17 - uVar20 & 0x1ff) << 0xe;
          puVar3[2] = uVar25 & 0x3fff | (uVar22 - uVar25) * 0x1000000 |
                      (uVar21 - uVar25 & 0x1ff) << 0x10;
        }
        else {
          *puVar3 = uVar5 & 0x3fff | (uVar12 - uVar5) * 0x800000 | (uVar14 - uVar5 & 0x1ff) << 0xe;
          puVar3[1] = uVar16 & 0x3fff | (uVar17 - uVar16) * 0x800000 |
                      (uVar20 - uVar16 & 0x1ff) << 0xe;
          puVar3[2] = uVar22 & 0x3fff | (uVar21 - uVar22) * 0x1000000 |
                      (uVar25 - uVar22 & 0x1ff) << 0x10;
        }
      }
      else {
        *puVar3 = uVar5;
        puVar3[1] = uVar16;
        puVar3[2] = uVar21 | iVar2 << 0x10 | iVar24 << 0x18;
      }
      puVar4 = puVar4 + 3;
      puVar3 = puVar3 + 3;
    } while (puVar4 != (uint *)(iVar11 + iVar28 + iVar23));
  }
  return;
}



void RenderWorld(void)

{
  int iVar1;
  
  FUN_80016930(&DAT_8006fcf4,0,0x1c00);
  if (DAT_80076e24 < DAT_800785b4) {
    DAT_800785d0 = 0x28000;
    iVar1 = DAT_80076e24;
  }
  else {
    if (gameState + ~GAMESTATE_BALLOONIST < 2) {
      DAT_800785d0 = 0x1c000;
    }
    else {
      DAT_800785d0 = 0x14000;
    }
    iVar1 = -1;
  }
  World(iVar1);
  return;
}



void FUN_8002ba68(void)

{
  SetDispMask(0);
  CdInit();
  CdReadCallback((CdlCB)0x0);
  VSyncCallback((f *)0x0);
  PadStopCom();
  ResetGraph(3);
  StopCallback();
  return;
}



void FUN_8002bab8(void)

{
  printf("Shutting Down\n");
  FUN_8002ba68();
  _96_remove();
  _96_init();
  printf("Launching Crash Demo\n");
  LoadExec("cdrom:\\S0\\CRASH.EXE;1",0x801fff00,0);
  return;
}



int CalculateCompletionPercentage(void)

{
  int percentage;
  
  percentage = (globalGemCount * 0x32 + globalDragonCount * 6000 + globalEggCount * 10000) / 12000;
  if (12000 < globalGemCount) {
    percentage = (globalGemCount + -12000) / 100 + 100;
  }
  return percentage;
}



void FUN_8002bbe0(void)

{
  int iVar1;
  uint uVar2;
  CdlLOC aCStack_20 [2];
  u_char_conflict local_18;
  byte local_17;
  
  iVar1 = CdSync(1,&DAT_800776bc);
  if (DAT_800776c4 == 0) {
    if (musicRelatedSecondParam != 0) {
      PlayMusicTrack(musicLevelTrack);
      musicRelatedSecondParam = 0;
    }
  }
  else if (7 < DAT_800776c4) {
    if (DAT_800776c4 < 10) {
      if (((musicState & 0x200) == 0) && (uVar2 = 0x40, iVar1 == 2)) goto LAB_8002bc58;
    }
    else {
      uVar2 = 0x10;
      if (DAT_800776c4 == 0x1b) {
LAB_8002bc58:
        DAT_800776c4 = 0;
        musicState = uVar2;
      }
    }
  }
  if ((musicState & 0x10) != 0) {
    if (iVar1 == 2) {
      if ((uint)cdSectorRelated[musicLevelTrack * 2 + 1] < DAT_800776b8) {
        if (DAT_800776cc < levelTimer) {
          iVar1 = rand();
          musicLevelTrack =
               STR_LevelTrackLookupTable
               [*(int *)((iVar1 % 3) * 4 + levelID_Indexer * 0xc + -0x7ff90fa4)];
          DAT_800776cc = levelTimer + 0x7080;
        }
        DAT_800776b8 = cdSectorRelated[musicLevelTrack * 2];
        CdIntToPos(DAT_800776b8,aCStack_20);
        local_18 = '\x01';
        local_17 = (byte)musicLevelTrack & 7;
        CdControlB('\r',&local_18,(u_char_conflict *)0x0);
        CdControl('\x1b',&aCStack_20[0].minute,(u_char_conflict *)0x0);
      }
      else {
        iVar1 = CdLastCom();
        if ((iVar1 == 0x11) && (uVar2 = CdPosToInt((CdlLOC *)&DAT_800776c1), 0 < (int)uVar2)) {
          DAT_800776b8 = uVar2;
        }
        CdControlF('\x11',(u_char_conflict *)0x0);
      }
    }
    else if (iVar1 == 5) {
      CdIntToPos(cdSectorRelated[musicLevelTrack * 2],aCStack_20);
      CdControl('\x1b',&aCStack_20[0].minute,(u_char_conflict *)0x0);
      DAT_800776c4 = 0x1b;
      DAT_800776b8 = cdSectorRelated[musicLevelTrack * 2];
    }
  }
  if (DAT_800761d8 < 0) {
    if ((musicState & 0x200) == 0) {
      return;
    }
    musicState = 0x100;
    return;
  }
  iVar1 = musicVolume + DAT_80076230;
  if (DAT_80076230 < 0) {
    if (DAT_800761d8 < iVar1) goto LAB_8002bf80;
    if ((DAT_800761d8 == 0) && (7 < DAT_800776c4)) {
      if (DAT_800776c4 < 10) {
        CdControl((u_char_conflict)DAT_800776c4,(u_char_conflict *)0x0,(u_char_conflict *)0x0);
        uVar2 = 0x100;
      }
      else {
        uVar2 = 0x10;
        if (DAT_800776c4 != 0x1b) goto LAB_8002bf30;
      }
      musicState = uVar2;
    }
LAB_8002bf30:
    iVar1 = DAT_800761d8;
    DAT_80076230 = 0;
    DAT_800761d8 = -1;
    musicVolume = (short)iVar1;
  }
  else {
    if (DAT_800761d8 <= iVar1) {
      DAT_80076230 = 0;
      musicVolume = (short)DAT_800761d8;
      DAT_800761d8 = -1;
      DAT_80075f1a = musicVolume;
      goto LAB_8002bf8c;
    }
LAB_8002bf80:
    musicVolume = (short)iVar1;
  }
  DAT_80075f1a = (undefined2)iVar1;
LAB_8002bf8c:
  maybeStartOfSoundBuffer = 0xc0;
  SpuSetCommonAttr(&maybeStartOfSoundBuffer);
  return;
}



void TitleCameraRelated(void)

{
  uint *puVar1;
  char *pcVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  char cVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  int iVar13;
  
  cameraPosition.x =
       *(int *)(((int)*ptr_titleScreenAnimationTimer >> 1) * 0x18 + ptr_titleScreenAnimationTimer[4]
               );
  cameraPosition.y =
       *(int *)(((int)*ptr_titleScreenAnimationTimer >> 1) * 0x18 + ptr_titleScreenAnimationTimer[4]
               + 4);
  cameraPosition.z =
       *(int *)(((int)*ptr_titleScreenAnimationTimer >> 1) * 0x18 + ptr_titleScreenAnimationTimer[4]
               + 8);
  cameraAngle.roll =
       (short)*(undefined4 *)
               (((int)*ptr_titleScreenAnimationTimer >> 1) * 0x18 + ptr_titleScreenAnimationTimer[4]
               + 0xc);
  cameraAngle.pitch =
       (short)*(undefined4 *)
               (((int)*ptr_titleScreenAnimationTimer >> 1) * 0x18 + ptr_titleScreenAnimationTimer[4]
               + 0x10);
  cameraAngle.yaw =
       (short)*(undefined4 *)
               (((int)*ptr_titleScreenAnimationTimer >> 1) * 0x18 + ptr_titleScreenAnimationTimer[4]
               + 0x14);
  iVar13 = 0;
  if (0 < (int)ptr_titleScreenAnimationTimer[3]) {
    iVar12 = 0;
    iVar11 = 0;
    do {
      cVar7 = *(char *)(*(int *)(*(int *)((int)&DAT_8007637c + iVar12) + 0x38) + 0xc);
      if (cVar7 == '\x10') {
        iVar8 = (int)*ptr_titleScreenAnimationTimer >> 3;
        iVar10 = (*ptr_titleScreenAnimationTimer & 7) << 3;
      }
      else if (cVar7 == '\x15') {
        iVar8 = (int)*ptr_titleScreenAnimationTimer / 6;
        iVar10 = ((int)*ptr_titleScreenAnimationTimer % 6) * 10;
      }
      else if (cVar7 == ' ') {
        iVar8 = (int)*ptr_titleScreenAnimationTimer >> 2;
        iVar10 = (*ptr_titleScreenAnimationTimer & 3) << 4;
      }
      else {
        iVar8 = (int)*ptr_titleScreenAnimationTimer >> 1;
        iVar10 = (*ptr_titleScreenAnimationTimer & 1) << 5;
      }
      cVar7 = (char)(iVar8 / 0x3c);
      ptr_startOfCurrentLevelMobys[iVar11 + 0x3c] = cVar7;
      ptr_startOfCurrentLevelMobys[iVar11 + 0x3e] = (char)iVar8 + cVar7 * -0x3c;
      cVar7 = (char)((iVar8 + 1) / 0x3c);
      ptr_startOfCurrentLevelMobys[iVar11 + 0x3d] = cVar7;
      ptr_startOfCurrentLevelMobys[iVar11 + 0x3f] = (char)(iVar8 + 1) + cVar7 * -0x3c;
      ptr_startOfCurrentLevelMobys[iVar11 + 0x40] = (char)iVar10;
      pcVar2 = ptr_startOfCurrentLevelMobys;
      puVar1 = ptr_titleScreenAnimationTimer;
      iVar8 = iVar8 * 4;
      uVar3 = *(uint *)(iVar8 + *(int *)((int)ptr_titleScreenAnimationTimer + iVar12 + 0x14));
      iVar9 = 0x40 - iVar10;
      uVar4 = *(uint *)(iVar8 + *(int *)((int)ptr_titleScreenAnimationTimer + iVar12 + 0x14));
      uVar5 = *(uint *)(iVar8 + *(int *)((int)ptr_titleScreenAnimationTimer + iVar12 + 0x14) + 4);
      uVar6 = *(uint *)(iVar8 + *(int *)((int)ptr_titleScreenAnimationTimer + iVar12 + 0x14) + 4);
      *(int *)(ptr_startOfCurrentLevelMobys + iVar11 + 0xc) =
           ((int)(*(uint *)(iVar8 + *(int *)((int)ptr_titleScreenAnimationTimer + iVar12 + 0x14)) &
                 0x3ff00000) >> 0xc) * iVar9 +
           ((int)(*(uint *)(iVar8 + *(int *)((int)ptr_titleScreenAnimationTimer + iVar12 + 0x14) + 4
                           ) & 0x3ff00000) >> 0xc) * iVar10 >> 6;
      *(int *)(pcVar2 + iVar11 + 0x10) =
           ((int)(uVar3 & 0xffc00) >> 2) * iVar9 + ((int)(uVar5 & 0xffc00) >> 2) * iVar10 >> 6;
      iVar13 = iVar13 + 1;
      iVar12 = iVar12 + 4;
      *(int *)(pcVar2 + iVar11 + 0x14) =
           (int)((uVar4 & 0x3ff) * 0x100 * iVar9 + (uVar6 & 0x3ff) * 0x100 * iVar10) >> 6;
      iVar11 = iVar11 + 0x58;
    } while (iVar13 < (int)puVar1[3]);
  }
  return;
}



void PreparePausedGamestate(int param_1)

{
  if (param_1 != 0) {
    PauseMusicAndSFX(0);
  }
  PlaySoundEffect((uint)localSFXArray[0x2c],(int *)0x0,0x10,0);
  gameState = GAMESTATE_PAUSED;
  pauseMenuSelection = 0;
  pauseMenuState = PAUSED_MAIN;
  pausedTimerOnCurrentSelection = 0;
  if (isInFlightLevel == 0) {
    Maybe_HudInPauseMenu(0);
    if (param_1 == 0) {
      hudChestState = 1;
      hudDragonState = 1;
      hudLivesState = 1;
      hudEggsState = 1;
      hudAnimationState = 1;
      hudChestKeyframe = 0xc;
      hudDragonKeyframe = 0xc;
      hudLivesKeyframe = 0xc;
      DAT_80077fb0 = 0xc;
      DAT_80077fb1 = 0xc;
    }
    else {
      pausedTimer = 0;
    }
    Maybe_HudUpdates();
  }
  else if (param_1 != 0) {
    pausedTimer = 0;
  }
  return;
}



void ExitPauseMenu(int param_1)

{
  RECT local_10;
  
  local_10.x = 0x200;
  local_10.w = 0x100;
  local_10.y = 0;
  local_10.h = 0xe1;
  LoadImage(&local_10,(u_long *)(maybe_ptr_levelTextureRelated + -0x1c200));
  DrawSync(0);
  gameState = GAMESTATE_GAMEPLAY;
  Maybe_ResetHudTimers();
  hudChestState = 3;
  hudDragonState = 3;
  hudLivesState = 3;
  hudEggsState = 3;
  hudAnimationState = 3;
  hudChestKeyframe = 0xd;
  hudDragonKeyframe = 0xd;
  hudLivesKeyframe = 0xd;
  DAT_80077fb0 = 0xd;
  DAT_80077fb1 = 0xd;
  if (param_1 != 0) {
    PlayMusicTrack(musicLevelTrack,8);
  }
  return;
}



void FUN_8002c618(void)

{
  PauseMusicAndSFX(0);
  gameState = GAMESTATE_EXITING_LEVEL;
  pausedTimerOnCurrentSelection = 0;
  pausedTimer = 0;
  Unk_UpdateSpyroAfterEvents(0);
  SpyroMovement2(IDLE_STANDING);
  return;
}



void ReturnHomeParamSet(void)

{
  Maybe_ResetHudTimers();
  levelLoadState = 0;
  loadingScreenTimer = 0;
  unk_cameraRelatedLocking = &DAT_80000012;
  portalNumber = 0xffffffff;
  portalToExitFromInHW = levelIDPortalExit;
  gameState = GAMESTATE_LOADING;
  canFlyIn = 1;
  isLoading = 1;
  DAT_8007579c = 1;
  levelID = (levelIDPortalExit / 10) * 10;
  return;
}



void PrepareInventoryGamestate(int param_1)

{
  if (param_1 != 0) {
    PauseMusicAndSFX(0);
  }
  PlaySoundEffect((uint)localSFXArray[0x2c],(int *)0x0,0x10,0);
  inventoryMenuPage = levelID_Indexer / 6;
  inventoryMenuMovementAnimFrame = 0;
  inventoryMenuScrollingSpeed = 0;
  gameState = GAMESTATE_INVENTORY;
  if (param_1 != 0) {
    pausedTimer = 0;
  }
  FUN_8002d554();
  return;
}



void ExitInventoryMenu(void)

{
  RECT local_10;
  
  local_10.x = 0x200;
  local_10.w = 0x100;
  local_10.y = 0;
  local_10.h = 0xe1;
  LoadImage(&local_10,(u_long *)(maybe_ptr_levelTextureRelated + -0x1c200));
  DrawSync(0);
  gameState = GAMESTATE_GAMEPLAY;
  Maybe_ResetHudTimers();
  hudChestState = 0;
  hudDragonState = 0;
  hudLivesState = 0;
  hudEggsState = 0;
  hudAnimationState = 0;
  PlayMusicTrack(musicLevelTrack,8);
  return;
}



void ShouldDieOrGameover(void)

{
  if (lives == 0) {
    gameState = GAMESTATE_GAME_OVER;
  }
  else {
    gameState = GAMESTATE_DEATH;
    lives = lives + -1;
  }
  gameOverFlag = 0;
  deathAndGameOverTimer = 0;
  return;
}



void FUN_8002c8a4(void)

{
  gameState = GAMESTATE_GAMEPLAY;
                    // WARNING: Read-only address (ram,0x80076ef9) is written
  DRAW_ENV1.r0 = clearColor.R;
                    // WARNING: Read-only address (ram,0x80076efa) is written
  DRAW_ENV1.g0 = clearColor.G;
                    // WARNING: Read-only address (ram,0x80076efb) is written
  DRAW_ENV1.b0 = clearColor.B;
                    // WARNING: Read-only address (ram,0x80076f7d) is written
  DRAW_ENV2.r0 = clearColor.R;
                    // WARNING: Read-only address (ram,0x80076f7e) is written
  DRAW_ENV2.g0 = clearColor.G;
                    // WARNING: Read-only address (ram,0x80076f7f) is written
  DRAW_ENV2.b0 = clearColor.B;
  Maybe_ResetHudTimers();
  return;
}



// Possible VM_VIB.OBJ/SsUtVibrateOff
// Possible VM_VIB.OBJ/SsUtVibrateOn

void FUN_8002c914(void)

{
  return;
}



// Possible VM_VIB.OBJ/SsUtVibrateOff

void FUN_8002c91c(void)

{
  return;
}



void DragonStart(Moby *pointerToDragon)

{
  MobyData_Dragon *local_PointerToDragon;
  
  local_PointerToDragon = (MobyData_Dragon *)pointerToDragon->ptr_mobyData;
  if (((levelIDPortalExit == 10) && (local_PointerToDragon->whichDragonCutsceneFromLevelToPlay == 1)
      ) && ((DAT_8007a6a9 != '\0' ||
            (((DAT_8007a6aa != '\0' || (DAT_8007a6ab != '\0')) || (DAT_8007a6ad != '\0')))))) {
    local_PointerToDragon->whichDragonCutsceneFromLevelToPlay = 2;
  }
  if ((levelIDPortalExit == 0x3c) && (hasWatchedCredits != '\0')) {
    local_PointerToDragon->whichDragonCutsceneFromLevelToPlay = 1;
    (local_PointerToDragon->targetSpyroPosition).y = 0xcc8;
    (local_PointerToDragon->targetCameraPosition).z = 0x2561;
    (local_PointerToDragon->targetCameraAngle).yaw = 0xffc;
    (local_PointerToDragon->targetCameraAngle).pitch = 0x6a;
    (local_PointerToDragon->targetCameraAngle).roll = 0xbb;
    (local_PointerToDragon->targetSpyroPosition).x = 0x800;
    (local_PointerToDragon->targetSpyroPosition).z = 0x800;
    (local_PointerToDragon->targetCameraPosition).x = 0x134bf;
    (local_PointerToDragon->targetCameraPosition).y = 0x13ce9;
    local_PointerToDragon->dragonNameToShow = 0x10;
  }
  gameState = GAMESTATE_DRAGON_STATE;
  dragonCountCutsceneHUD = globalDragonCount;
  isInDragonState = 1;
  DAT_8007579c = 1;
  (&amountOfDragonsCollectedInLevels)[levelID_Indexer] =
       (&amountOfDragonsCollectedInLevels)[levelID_Indexer] + 1;
  dragonState = 0;
  dragonState2 = 0;
  dragonTimerCurrentState = 0;
  dragonTimer = 0;
  DAT_8007708c = 0;
  DAT_80077088 = 0;
  dragonInHWFreed = local_PointerToDragon->whichDragonCutsceneFromLevelToPlay;
  globalDragonCount = globalDragonCount + 1;
  ptrToLastDragonTouched = (int *)pointerToDragon;
  if (local_PointerToDragon->mobyNumberInLevelMobys != -1) {
    ptr_startOfCurrentLevelMobys
    [local_PointerToDragon->mobyNumberInLevelMobys * SIZE_OF_MOBY + 0x3c] = '\x01';
  }
  Vec3Copy(&dragonStarPatriclePosition,&(pointerToDragon->position).x);
  DAT_80076254 = DAT_80076254 + 0x40;
  PlaySoundEffect((uint)localSFXArray[0x30],(int *)&ptrToLastDragonTouched,0x10,
                  ptrToLastDragonTouched + 0x15);
  return;
}



void ExitDragon(void)

{
  int iVar1;
  char *local_ptr_level_mobys;
  
  local_ptr_level_mobys = ptr_startOfCurrentLevelMobys;
  gameState = GAMESTATE_GAMEPLAY;
  isInDragonState = 0;
  iVar1 = *(int *)(*ptrToLastDragonTouched + 0x20);
  if (iVar1 != -1) {
    ptr_startOfCurrentLevelMobys[iVar1 * 0x58 + 0x3c] = '\0';
    local_ptr_level_mobys[iVar1 * 0x58 + 0x48] = '\x01';
  }
  Unk_UpdateSpyroAfterEvents(1);
  spyro.isMovementLocked = 0xc;
  DAT_80076ea0 = &spyro;
  maybe_cameraRelated = 0;
  unk_cameraRelatedLocking = 0;
  flyInAnimation = &DAT_8006c8bc;
  superFlameTimer = backupSuperFlameTimer;
  unk_camera_related_angle = spyro.angle.yaw;
  CameraRotation(&cameraPosition);
  ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
  DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
  ChangeFlyInCamera();
  Maybe_HudInPauseMenu(0);
  hudChestState = 0;
  hudDragonState = 0;
  hudLivesState = 0;
  hudEggsState = 0;
  hudAnimationState = 0;
  PlayMusicTrack(musicLevelTrack,8);
  return;
}



void FUN_8002ccc8(int *param_1)

{
  int iVar1;
  int aiStack_20 [4];
  
  iVar1 = *param_1;
  gameState = GAMESTATE_DRAGON_FAIRY_TEXTBOX;
  isInDragonState = 1;
  DAT_8007579c = 1;
  fairyTextFlag = 0;
  fairyMenuTimer = 0;
  fairyTextboxSaveGameMenus = 0;
  if (DAT_80078d14 == 0) {
    fairyTextboxSelection = 2;
  }
  else {
    fairyTextboxSelection = 0;
  }
  backupSuperFlameTimer = superFlameTimer;
  DAT_80078d74 = param_1;
  PlaySoundEffect((uint)localSFXArray[0x2c],(int *)0x0,0x10,0);
  Unk_UpdateSpyroAfterEvents(1);
  spyro.currentAnim = '\x01';
  spyro.nextAnim = '\x01';
  spyro.currentKeyfame = '\0';
  spyro.nextKeyframe = '\x01';
  spyro.maybe_AnimSpeedRelated = '\0';
  DAT_80078d6c = spyro.angle.yaw;
  DAT_80078d70 = ATan2Scaled(*(int *)(ptr_startOfCurrentLevelMobys +
                                     *(int *)(iVar1 + 4) * 0x58 + 0xc) - spyro.position.x,
                             *(int *)(ptr_startOfCurrentLevelMobys +
                                     *(int *)(iVar1 + 4) * 0x58 + 0x10) - spyro.position.y,1);
  DAT_80078d2c = ATan2Scaled(param_1[3] - spyro.position.x,param_1[4] - spyro.position.y,1);
  Vec3Subtract(aiStack_20,param_1 + 3,(int *)&spyro);
  DAT_80078d30 = Vec3CalculateLengthE(aiStack_20,flag2D);
  DAT_80078d34 = param_1[5];
  DAT_80078d3c = 0x480;
  DAT_80078d38 = DAT_80078d70;
  DAT_80078d40 = spyro.position.z + 0x170;
  if (ptr_SparxMoby != 0) {
    DAT_80078d44 = ATan2Scaled(*(int *)(ptr_SparxMoby + 0xc) - spyro.position.x,
                               *(int *)(ptr_SparxMoby + 0x10) - spyro.position.y,1);
    Vec3Subtract(aiStack_20,(int *)(ptr_SparxMoby + 0xc),(int *)&spyro);
    DAT_80078d48 = Vec3CalculateLengthE(aiStack_20,flag2D);
    DAT_80078d50 = 0x600;
    DAT_80078d4c = DAT_80078d70 + 0x800U & 0xfff;
  }
  DAT_80078d54 = ATan2Scaled(cameraPosition.x - spyro.position.x,cameraPosition.y - spyro.position.y
                             ,1);
  Vec3Subtract(aiStack_20,&cameraPosition.x,(int *)&spyro);
  DAT_80078d58 = Vec3CalculateLengthE(aiStack_20,flag2D);
  DAT_80078d10 = 0xb0;
  DAT_80078d60 = DAT_80078d70 + 0x30bU & 0xfff;
  DAT_80078d5c = cameraPosition.z;
  iVar1 = Maybe_AngleDiff(DAT_80078d54);
  if (0x400 < iVar1) {
    DAT_80078d10 = 0;
    DAT_80078d60 = DAT_80078d70 - 0x30bU & 0xfff;
  }
  DAT_80078d64 = 0x4c9;
  DAT_80078d68 = spyro.position.z + 0x56b;
  return;
}



void ExitFairyOrBalloonist(void)

{
  gameState = GAMESTATE_GAMEPLAY;
  isInDragonState = 0;
  Maybe_ResetHudTimers();
  Vec3Zero((Vec3 *)&spyro.TargetHeadAngle);
  Unk_UpdateSpyroAfterEvents(1);
  spyro.headAngle.pitch = 0x100;
  spyro.headAngle.pad2 = 0;
  spyro.unkown1._1_1_ = 0x10;
  spyro.isMovementLocked = 8;
  DAT_80076ea0 = &spyro;
  maybe_cameraRelated = 0;
  unk_cameraRelatedLocking = 0;
  flyInAnimation = &DAT_8006c8bc;
  superFlameTimer = backupSuperFlameTimer;
  unk_camera_related_angle = spyro.angle.yaw;
  CameraRotation(&cameraPosition);
  ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
  DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
  ChangeFlyInCamera();
  Maybe_HudInPauseMenu(0);
  hudChestState = 0;
  hudDragonState = 0;
  hudLivesState = 0;
  hudEggsState = 0;
  hudAnimationState = 0;
  PlayMusicTrack(musicLevelTrack,8);
  return;
}



void FUN_8002d170(void)

{
  gameState = GAMESTATE_TITLE_SCREEN;
  memset((uchar *)&titleScreenState,'\0',0x5c);
  maybe_sfxRelated = 0x3fff;
  musicVolume2 = 0x5000;
  musicVolume = 0x5000;
  DAT_80075f1a = 0x5000;
  sfxVolume = 10;
  musicVolume = 10;
  maybeStartOfSoundBuffer = 0xc0;
  loadedMemoryCardDataBuffer = DAT_800785e8 + -0x2000;
  SpuSetCommonAttr(&maybeStartOfSoundBuffer);
  DAT_8007591c = 0;
  *ptr_titleScreenAnimationTimer = 0;
  srand(0x159);
  return;
}



void FUN_8002d228(int param_1)

{
  RECT local_10;
  
  local_10.w = 0x200;
  local_10.x = 0;
  local_10.y = 0;
  local_10.h = 0x1e0;
  ClearImage(&local_10,'\0','\0','\0');
  DrawSync(0);
  PauseMusicAndSFX(0);
  FUN_80056ed4();
  if (param_1 != 0) {
    FUN_8005b7d8();
  }
  Unk_UpdateSpyroAfterEvents(1);
  gameState = GAMESTATE_CREDITS;
  DAT_80075704 = 0xffffffff;
  creditsProgression = 0;
  DAT_80075878 = 0;
  DAT_800757dc = 0;
  DAT_800757bc = 0;
  DAT_80075768 = 0;
  DAT_800756f8 = 0;
  if (DAT_800757ac != 10) {
    DAT_800757ac = 0;
  }
  LoadCdData(WADStartSector,&OverlayStart,DAT_8007a95c,DAT_8007a958,600);
  return;
}



void FUN_8002d338(void)

{
  bool bVar1;
  int localHasStartedGame;
  
  localHasStartedGame = whichCutsceneToPlay;
  gameState = GAMESTATE_CUTSCENE;
  fadeInTimer = 0;
  bVar1 = whichCutsceneToPlay == 1;
  *ptr_titleScreenAnimationTimer = 0;
  if (bVar1) {
    DAT_8007591c = 1;
  }
  sfxMetadataArray = (MaybeSoundEffectMetadata **)&DAT_800778f0;
  DAT_800778f0 = 0x1010;
  DAT_800778f4 = 0xffffffff;
  DAT_800778f8 = 0x50;
  DAT_800778fa = (undefined2)(&DAT_8006ee6c)[localHasStartedGame];
  DAT_800778fc = 0;
  DAT_800778fe = 0;
  collectableRelated = 0;
  DAT_800761dc = 1;
  USHORT_800761e8 = 0x3fff;
  USHORT_800761ea = 0x3fff;
  PlaySoundEffect(0,(int *)0x0,0x10,&DAT_80077084);
  return;
}



void StartAdventureBegins(void)

{
  undefined4 uVar1;
  RECT local_18;
  
  if (whichCutsceneToPlay == 1) {
    local_18.w = 0x200;
    local_18.x = 0;
    local_18.y = 0;
    local_18.h = 0x1e0;
    ClearImage(&local_18,'\0','\0','\0');
    DrawSync(0);
    PauseMusicAndSFX(0);
    FUN_80056ed4();
    FUN_8005b7d8();
    gameState = GAMESTATE_TITLE_SCREEN;
    memset((uchar *)&titleScreenState,'\0',0x5c);
    titleScreenState = 3;
    DAT_80078d7c = 0;
    DAT_80078d94 = 1;
    FUN_8001277c();
    levelIDPortalExit = 10;
  }
  else {
    if (whichCutsceneToPlay == 2) {
      uVar1 = 0;
    }
    else {
      uVar1 = 1;
      if (whichCutsceneToPlay != 3) {
        return;
      }
      DAT_800757ac = 10;
    }
    FUN_8002d228(uVar1);
  }
  DAT_8007579c = 1;
  return;
}



void FUN_8002d554(void)

{
  undefined4 *puVar1;
  int iVar2;
  
  iVar2 = 0xf;
  puVar1 = &DAT_80076bfc;
  do {
    *puVar1 = 0;
    iVar2 = iVar2 + -1;
    puVar1 = puVar1 + -1;
  } while (-1 < iVar2);
  DAT_80075928 = 0;
  return;
}



void DebugLevelSelect(void)

{
  int iVar1;
  int iVar2;
  
  iVar1 = levelSelectHomeWorld;
  if (currentButtonOneFrame != 0) {
    iVar2 = -1;
    if (currentButtonOneFrame == SQUARE_BUTTON) {
      iVar2 = 2;
    }
    else if ((int)currentButtonOneFrame < 0x81) {
      if (currentButtonOneFrame == CIRCLE_BUTTON) {
        iVar2 = 0;
      }
      else if ((int)currentButtonOneFrame < 0x21) {
        if (currentButtonOneFrame == TRIANGLE_BUTTON) {
          iVar2 = 3;
        }
      }
      else if (currentButtonOneFrame == X_BUTTON) {
        iVar2 = 1;
      }
    }
    else if (currentButtonOneFrame == RIGHT_BUTTON) {
      iVar2 = 4;
    }
    else if ((int)currentButtonOneFrame < 0x2001) {
      if (currentButtonOneFrame == UP_BUTTON) {
        levelID = levelIDPortalExit + 1;
        if (5 < (int)levelID % 10) {
          levelID = ((int)levelID / 10 + 1) * 10;
        }
        if (0x36 < levelID + 0xfffffff6) {
          levelID = ARTISANS_ID;
        }
        levelSelectHomeWorld = (int)levelID / 10;
        iVar2 = (int)levelID % 10;
      }
    }
    else if (currentButtonOneFrame == DOWN_BUTTON) {
      iVar2 = 5;
    }
    else if (currentButtonOneFrame == LEFT_BUTTON) {
      iVar2 = 6;
    }
    iVar1 = levelSelectHomeWorld;
    if ((-1 < iVar2) && (iVar1 = iVar2, levelSelectHomeWorld != 0)) {
      levelID = levelSelectHomeWorld * 10 + iVar2;
      debugLevelChosen = iVar2;
      if ((levelID + 0xfffffff6 < 0x37) && (iVar2 < 6)) {
        PauseMusicAndSFX(0);
        Maybe_ResetHudTimers();
        portalToExitFromInHW = 0;
        portalNumber = 0xffffffff;
        Unk_UpdateSpyroAfterEvents(0);
        ForceMovementState(0xf);
        gameState = GAMESTATE_LOADING;
        levelLoadState = 1;
        canFlyIn = 0;
        isLoading = 0;
        DAT_8007579c = 1;
        unk_cameraRelatedLocking = &DAT_80000012;
      }
      else {
        levelID = levelIDPortalExit;
      }
      debugLevelSelectFlag = 0;
      iVar1 = levelSelectHomeWorld;
    }
  }
  levelSelectHomeWorld = iVar1;
  return;
}



void FUN_8002d810(int param_1)

{
  int iVar1;
  undefined1 *puVar2;
  
  if (param_1 == 3) {
    iVar1 = 0x1f;
    puVar2 = &DAT_80078e97;
    do {
      *puVar2 = 1;
      iVar1 = iVar1 + -1;
      puVar2 = puVar2 + -1;
    } while (-1 < iVar1);
    iVar1 = 5;
    puVar2 = &requirementDream;
    do {
      *puVar2 = 2;
      iVar1 = iVar1 + -1;
      puVar2 = puVar2 + -1;
    } while (-1 < iVar1);
  }
  else {
    if (3 < param_1) {
      if (param_1 != 4) {
        return;
      }
      lives = 99;
      return;
    }
    if (param_1 != 2) {
      return;
    }
    DAT_80075818 = levelIDPortalExit;
    FUN_8002d228(0);
  }
  PlaySoundEffect((uint)*localSFXArray,(int *)0x0,0x10,0);
  return;
}



void Maybe_InvPreReq(void)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  int *piVar7;
  int *piVar8;
  
  if ((levelLoadState < 0) && (currentButtonOneFrame != 0)) {
    iVar3 = DAT_80075928 * 4;
    DAT_80075928 = DAT_80075928 + 1;
    *(Buttons *)(&DAT_80076bc0 + iVar3) = currentButtonOneFrame;
    iVar3 = 0;
    if (0xf < DAT_80075928) {
      DAT_80075928 = 0;
    }
    piVar8 = &DAT_80072e94;
    do {
      iVar2 = *piVar8;
      piVar5 = piVar8;
      for (iVar6 = 0; (iVar2 != 0 && (iVar6 < 0x10)); iVar6 = iVar6 + 1) {
        piVar5 = piVar5 + 1;
        iVar2 = *piVar5;
      }
      if (iVar6 != 0) {
        iVar4 = 0;
        iVar2 = DAT_80075928;
        if (0 < iVar6) {
          do {
            iVar2 = iVar2 + -1;
            if (iVar2 < 0) {
              iVar2 = 0xf;
            }
            iVar4 = iVar4 + 1;
          } while (iVar4 < iVar6);
        }
        bVar1 = true;
        iVar4 = 0;
        if (0 < iVar6) {
          piVar5 = (int *)(&DAT_80076bc0 + iVar2 * 4);
          piVar7 = piVar8;
          do {
            if (!bVar1) goto LAB_8002da54;
            if (*piVar5 != *piVar7) {
              bVar1 = false;
            }
            iVar2 = iVar2 + 1;
            piVar5 = piVar5 + 1;
            if (0xf < iVar2) {
              iVar2 = 0;
              piVar5 = (int *)&DAT_80076bc0;
            }
            iVar4 = iVar4 + 1;
            piVar7 = piVar7 + 1;
          } while (iVar4 < iVar6);
        }
        if (bVar1) {
          FUN_8002d810();
          FUN_8002d554();
          return;
        }
      }
LAB_8002da54:
      iVar3 = iVar3 + 1;
      piVar8 = piVar8 + 0x10;
    } while (iVar3 < 8);
  }
  return;
}



void LevelTransitionText(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  short *psVar4;
  int iVar5;
  
  DAT_8007571c = &DAT_800724f4;
  if (loadingScreenTimer == 0) {
    DAT_80075740 = amountOfLiteralGemsPickedUp * 2 + 0x8c;
    iVar5 = 0;
    if (0xc0 < DAT_80075740) {
      DAT_80075740 = 0xc0;
    }
    iVar1 = 0;
    do {
      iVar5 = iVar5 + 1;
      *(undefined *)((int)DAT_8007571c + iVar1 + 8) = 0;
      iVar1 = iVar5 * 0x10;
    } while (iVar5 < 0x40);
  }
  loadingScreenTimer = loadingScreenTimer + gameSpeedMultiplyer;
  if ((int)loadingScreenTimer < 0x1a1) {
    iVar5 = 0;
    if (0x7f < (int)loadingScreenTimer) {
      iVar1 = 0;
      do {
        if ((iVar5 < amountOfLiteralGemsPickedUp) && (iVar5 * 2 + 0x80 <= (int)loadingScreenTimer))
        {
          if ((int)loadingScreenTimer < 0x100) {
            if (*(char *)((int)DAT_8007571c + iVar1 + 8) == '\0') {
              *(undefined *)((int)DAT_8007571c + iVar1 + 8) = 1;
              *(char *)((int)DAT_8007571c + iVar1 + 9) =
                   ((char)loadingScreenTimer - ((char)(iVar5 * 2) + -0x80)) -
                   (char)gameSpeedMultiplyer;
              iVar2 = rand();
              *(ushort *)((int)DAT_8007571c + iVar1 + 4) = ((ushort)iVar2 & 0xff) - 0x80;
              iVar2 = rand();
              *(ushort *)((int)DAT_8007571c + iVar1 + 6) = ((ushort)iVar2 & 0x3f) + 0x60;
              iVar2 = rand();
              *(byte *)((int)DAT_8007571c + iVar1 + 10) = ((byte)iVar2 & 0x3f) - 0x20;
              iVar2 = rand();
              *(byte *)((int)DAT_8007571c + iVar1 + 0xb) = ((byte)iVar2 & 0x3f) - 0x20;
              iVar2 = rand();
              *(char *)((int)DAT_8007571c + iVar1 + 0xc) = (char)iVar2;
              iVar2 = rand();
              *(byte *)((int)DAT_8007571c + iVar1 + 0xd) = ((byte)iVar2 & 2) - 1;
              iVar2 = rand();
              *(byte *)((int)DAT_8007571c + iVar1 + 0xe) = ((byte)iVar2 & 2) - 1;
              iVar2 = rand();
              *(byte *)((int)DAT_8007571c + iVar1 + 0xf) = ((byte)iVar2 & 0xf) - 8;
              if ((loadingScreenTimer & 7) == 0) {
                PlaySoundEffect((uint)*localSFXArray,(int *)0x0,0x10,0);
              }
              goto LAB_8002dcfc;
            }
          }
          else {
LAB_8002dcfc:
            if (*(char *)((int)DAT_8007571c + iVar1 + 8) == '\0') goto LAB_8002df68;
          }
          *(char *)((int)DAT_8007571c + iVar1 + 9) =
               *(char *)((int)DAT_8007571c + iVar1 + 9) + (char)gameSpeedMultiplyer;
          *(char *)((int)DAT_8007571c + iVar1 + 0xc) =
               *(char *)((int)DAT_8007571c + iVar1 + 0xc) +
               *(char *)((int)DAT_8007571c + iVar1 + 0xf);
          psVar4 = (short *)(iVar1 + (int)DAT_8007571c);
          uVar3 = (uint)*(byte *)((int)psVar4 + 9);
          if (uVar3 < 0x30) {
            *psVar4 = (short)((int)psVar4[2] * (0x1000 - sineWaveArray[(uVar3 << 2) / 3 + 0x40]) >>
                             0xc);
            psVar4[1] = (short)((int)psVar4[3] *
                                (int)sineWaveArray[((uint)*(byte *)((int)psVar4 + 9) << 2) / 3] >>
                               0xc);
          }
          else if (uVar3 < 0x60) {
            *psVar4 = psVar4[2] +
                      (short)((int)psVar4[2] * (int)sineWaveArray[(int)((uVar3 - 0x30) * 8) / 3] >>
                             0xd);
            psVar4[1] = (psVar4[3] >> 1) +
                        (short)((int)psVar4[3] *
                                (sineWaveArray
                                 [(int)((*(byte *)((int)psVar4 + 9) - 0x30) * 8) / 3 + 0x40] +
                                0x1000) >> 0xe);
          }
          else if (uVar3 < 0x93) {
            *psVar4 = psVar4[2] -
                      (short)((int)psVar4[2] * (int)sineWaveArray[(int)((uVar3 - 0x60) * 4) / 3] >>
                             0xc);
            psVar4[1] = (short)((int)psVar4[3] *
                                (int)sineWaveArray
                                     [(int)((*(byte *)((int)psVar4 + 9) - 0x60) * 4) / 3 + 0x40] >>
                               0xd);
          }
          else {
            *(undefined *)(psVar4 + 4) = 0;
            if (iVar5 == (iVar5 / 3) * 3) {
              PlaySoundEffect((uint)localSFXArray[0x2f],(int *)0x0,0x10,0);
            }
          }
        }
LAB_8002df68:
        iVar5 = iVar5 + 1;
        iVar1 = iVar1 + 0x10;
      } while (iVar5 < 0x20);
    }
  }
  else {
    isLoading = 0;
  }
  return;
}



void LevelTransitionCalls(void)

{
  LevelTransitionAnim();
  CameraFollowSpyro();
  LevelTransitionText();
  if ((levelLoadState < 0xb) || (isLoading == 0)) {
    LevelTransitionRelated(1);
  }
  return;
}



void StartFlyIn(void)

{
  SpyroUpdateAnimation();
  CameraFollowSpyro();
  cameraAngle.pitch = cameraAngle.pitch & 0xfff;
  if (0x800 < (ushort)cameraAngle.pitch) {
    cameraAngle.pitch = cameraAngle.pitch - 0x1000;
  }
  if ((cameraAngle.pitch < -0x200) || (flyInAnimation == &DAT_8006ca84)) {
    gameState = GAMESTATE_GAMEPLAY;
  }
  return;
}



void CallReturnHome(void)

{
  FUN_8004aa0c();
  CameraFollowSpyro();
  pausedTimerOnCurrentSelection = pausedTimerOnCurrentSelection + 1;
  if (pausedTimerOnCurrentSelection < 0x20) {
    if ((pausedTimerOnCurrentSelection == 0x10) && (pausedTimer == 0)) {
      SpyroMovement2(GLIDE);
    }
  }
  else {
    pausedTimerOnCurrentSelection = 0;
    pausedTimer = pausedTimer + 1;
    if (pausedTimer == 2) {
      ReturnHomeParamSet();
    }
  }
  return;
}



void PauseMenuUpdates(void)

{
  int iVar1;
  int local_pauseMenuSelection;
  RECT local_18;
  
  if (isInFlightLevel == FALSE) {
    Maybe_HudUpdates();
  }
  timerHudStayDown = 0;
  DAT_80077fb8 = 0;
  DAT_80077fbc = 0;
  DAT_80077fc0 = 0;
  DAT_80077fc4 = 0;
  pausedTimerOnCurrentSelection = pausedTimerOnCurrentSelection + 1;
  SetTextWobbleTimerSpeed(3);
                    // Checking if the menu has been paused for 5 frames to allow updates
                    // 
  if (pausedTimer < 5) {
    return;
  }
  if ((currentButtonOneFrame & SELECT_BUTTON) != 0) {
LAB_8002ea34:
    PrepareInventoryGamestate(0);
    return;
  }
  if (pauseMenuState == PAUSED_QUIT_GAME) {
    if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
      PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
      pauseMenuSelection = 1 - pauseMenuSelection;
      return;
    }
    if ((currentButtonOneFrame & (TRIANGLE_BUTTON|X_BUTTON)) == 0) {
      return;
    }
    if ((pauseMenuSelection != 1) && ((currentButtonOneFrame & TRIANGLE_BUTTON) == 0)) {
      PauseMusicAndSFX(0);
      PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      FUN_80056ed4();
      local_18.w = 0x200;
      local_18.x = 0;
      local_18.y = 0;
      local_18.h = 0x1e0;
      ClearImage(&local_18,'\0','\0','\0');
      DrawSync(0);
      ptr_EndOfOvl = &DAT_8007dde8;
      DAT_800785dc = &DAT_8007dde8;
      levelLoadState = 0;
      whichCutsceneToPlay = 0;
      LoadCdData(WADStartSector,&OverlayStart,DAT_8007a6e4,DAT_8007a6e0,600);
      while (levelLoadState < 10) {
        FUN_80014564();
        FUN_8002bbe0();
      }
      FUN_8002d338();
      FUN_8002d170();
      DAT_8007579c = 1;
      return;
    }
    PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
    pauseMenuSelection = 3;
    pauseMenuState = PAUSED_MAIN;
    return;
  }
  if (pauseMenuState != PAUSED_OPTIONS) {
    if ((currentButtonOneFrame & DOWN_BUTTON) == 0) {
      if ((currentButtonOneFrame & UP_BUTTON) != 0) {
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
        pausedTimerOnCurrentSelection = 0;
        pauseMenuSelection = pauseMenuSelection + -1;
        if (pauseMenuSelection < 0) {
          pauseMenuSelection = 3;
        }
      }
    }
    else {
      PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      pausedTimerOnCurrentSelection = 0;
      pauseMenuSelection = pauseMenuSelection + 1;
      if (3 < pauseMenuSelection) {
        pauseMenuSelection = 0;
      }
    }
    if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
      return;
    }
    if (pauseMenuSelection == 1) {
      PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
      pauseMenuSelection = 0;
      pauseMenuState = PAUSED_OPTIONS;
      return;
    }
    if (pauseMenuSelection < 2) {
      if (pauseMenuSelection != 0) {
        return;
      }
      PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
      ExitPauseMenu(1);
      return;
    }
    if (pauseMenuSelection != 2) {
      if (pauseMenuSelection != 3) {
        return;
      }
      PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
      if (levelIDPortalExit == (levelIDPortalExit / 10) * 10) {
        pauseMenuSelection = 1;
        pauseMenuState = PAUSED_QUIT_GAME;
        return;
      }
      Vec3Zero((Vec3 *)&spyro.TargetHeadAngle);
      spyro.autoFlameRelated = 0;
      if (isInFlightLevel != 0) {
        gameState = GAMESTATE_FLIGHT_LEVEL_MENU;
        pauseMenuSelection = 0;
        pausedTimerOnCurrentSelection = 0;
        DAT_80075900 = 1;
        (*funcptr_OverlayUpdateMobys)();
        return;
      }
      FUN_8002c618();
      return;
    }
    goto LAB_8002ea34;
  }
  if ((currentButtonOneFrame & DOWN_BUTTON) == 0) {
    local_pauseMenuSelection = pauseMenuSelection;
    if ((currentButtonOneFrame & UP_BUTTON) != 0) {
      PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      pausedTimerOnCurrentSelection = 0;
      local_pauseMenuSelection = pauseMenuSelection + -1;
      if (local_pauseMenuSelection < 0) {
        iVar1 = 5;
      }
      else if ((local_pauseMenuSelection != 3) ||
              (iVar1 = pauseMenuSelection + -2, DAT_800756d8 != 0)) goto LAB_8002e47c;
LAB_8002e474:
      pausedTimerOnCurrentSelection = 0;
      local_pauseMenuSelection = iVar1;
    }
  }
  else {
    PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
    pausedTimerOnCurrentSelection = 0;
    local_pauseMenuSelection = pauseMenuSelection + 1;
    if (local_pauseMenuSelection < 6) {
      if ((local_pauseMenuSelection == 3) && (iVar1 = pauseMenuSelection + 2, DAT_800756d8 == 0))
      goto LAB_8002e474;
    }
    else {
      pauseMenuSelection = 0;
      local_pauseMenuSelection = pauseMenuSelection;
    }
  }
LAB_8002e47c:
  pauseMenuSelection = local_pauseMenuSelection;
  if ((currentButtonOneFrame & TRIANGLE_BUTTON) == 0) {
    switch(pauseMenuSelection) {
    case 0:
      if (((currentButtonOneFrame & LEFT_BUTTON) == 0) || (sfxVolume < 1)) {
        if (((currentButtonOneFrame & RIGHT_BUTTON) != 0) && (sfxVolume < 10)) {
          PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
          sfxVolume = sfxVolume + 1;
        }
      }
      else {
        PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
        sfxVolume = sfxVolume + -1;
      }
      maybe_sfxRelated = (sfxVolume * 0x3fff) / 10;
      sfxVolume = (maybe_sfxRelated * 0x1000) / 0x3fff;
      break;
    case 1:
      if (((currentButtonOneFrame & LEFT_BUTTON) == 0) || (musicVolume < 1)) {
        if (((currentButtonOneFrame & RIGHT_BUTTON) != 0) && (musicVolume < 10)) {
          PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
          musicVolume = musicVolume + 1;
        }
      }
      else {
        PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
        musicVolume = musicVolume + -1;
      }
      maybeStartOfSoundBuffer = 0xc0;
      musicVolume2 = musicVolume << 0xb;
      musicVolume = (undefined2)musicVolume2;
      DAT_80075f1a = musicVolume;
      SpuSetCommonAttr(&maybeStartOfSoundBuffer);
      break;
    case 2:
      if ((currentButtonOneFrame & (X_BUTTON|RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
        PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
        speakerSetupOption = 1 - speakerSetupOption;
        if (speakerSetupOption == 0) {
          maybe_SpeaerSetupRelated3 = 0x7f;
          maybe_SpeaerSetupRelated1 = 0x7f;
          maybe_SpeaerSetupRelated4 = 0;
          maybe_SpeaerSetupRelated2 = 0;
        }
        else {
          maybe_SpeaerSetupRelated4 = 0x3f;
          maybe_SpeaerSetupRelated3 = 0x3f;
          maybe_SpeaerSetupRelated2 = 0x3f;
          maybe_SpeaerSetupRelated1 = 0x3f;
        }
        CdMix((CdlATV *)&maybe_SpeaerSetupRelated1);
      }
      break;
    case 3:
      if (DAT_800756d8 == 0) {
        pauseMenuSelection = 4;
      }
      else if ((currentButtonOneFrame & (X_BUTTON|RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
        PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
        isVibrationOn = 1 - isVibrationOn;
        if ((isVibrationOn != 0) && (maybe_vibrationTimer < 10)) {
          maybe_vibrationTimer = 10;
        }
      }
      break;
    case 4:
      if ((currentButtonOneFrame & (X_BUTTON|RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
        PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
        if (cameraMode == CAMERA_MODE_ACTIVE) {
          cameraMode = CAMERA_MODE_PASSIVE;
        }
        else {
          cameraMode = CAMERA_MODE_ACTIVE;
        }
      }
      break;
    case 5:
      if ((currentButtonOneFrame & X_BUTTON) == 0) {
        return;
      }
      goto LAB_8002e8a0;
    }
  }
  else {
LAB_8002e8a0:
    PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
    pauseMenuState = PAUSED_MAIN;
    pauseMenuSelection = 0;
  }
                    // WARNING: Read-only address (ram,0x8007a6e0) is written
                    // WARNING: Read-only address (ram,0x8007a6e4) is written
  return;
}



void InventoryMenuUpdates(void)

{
  pausedTimerOnCurrentSelection = pausedTimerOnCurrentSelection + gameSpeedMultiplyer;
  hudChestHeadSpinTimer = hudChestHeadSpinTimer - gameSpeedMultiplyer & 0xff;
  hudChestHeadSpinTimer = (hudChestHeadSpinTimer + 1) % 9;
  SetTextWobbleTimerSpeed(3);
  if (4 < pausedTimer) {
    if (debugLevelSelectFlag == 0) {
      Maybe_InvPreReq();
      if (inventoryMenuMovementAnimFrame == 0) {
        if (((0 < inventoryMenuPage) && ((&DAT_80078e72)[inventoryMenuPage * 6] != '\0')) &&
           ((currentButton & LEFT_BUTTON) != 0)) {
          PlaySoundEffect((uint)localSFXArray[0x38],(int *)0x0,0x10,0);
          inventoryMenuScrollingSpeed = 0x40;
        }
        if (((inventoryMenuPage < 5) && ((&DAT_80078e7e)[inventoryMenuPage * 6] != '\0')) &&
           ((currentButton & RIGHT_BUTTON) != 0)) {
          PlaySoundEffect((uint)localSFXArray[0x38],(int *)0x0,0x10,0);
          inventoryMenuScrollingSpeed = -0x40;
        }
      }
      if (inventoryMenuScrollingSpeed != 0) {
                    // This applies either 40 or -40 to depending on the direction to the current
                    // movement animation frame
        inventoryMenuMovementAnimFrame =
             inventoryMenuMovementAnimFrame + inventoryMenuScrollingSpeed;
        if (inventoryMenuMovementAnimFrame == INVENTORY_NO_MOVEMENT) {
          inventoryMenuScrollingSpeed = 0;
        }
        else if (inventoryMenuMovementAnimFrame == TRANSITION_FRAME_SCROLLING_TO_LEFT) {
          inventoryMenuScrollingSpeed = -0x40;
          inventoryMenuMovementAnimFrame = TRANSITION_FRAME_SCROLLING_TO_RIGHT;
          inventoryMenuPage = inventoryMenuPage + 1;
        }
        else if (inventoryMenuMovementAnimFrame == TRANSITION_FRAME_SCROLLING_TO_RIGHT) {
          inventoryMenuScrollingSpeed = 0x40;
          inventoryMenuMovementAnimFrame = TRAINSITION_FRAME_SCROLLING_TO_LEFT;
          inventoryMenuPage = inventoryMenuPage + -1;
        }
      }
      if ((currentButtonOneFrame & (TRIANGLE_BUTTON|START_BUTTON)) == 0) {
        if (((currentButtonOneFrame & (X_BUTTON|SELECT_BUTTON)) != 0) && (debugLevelSelectFlag == 0)
           ) {
          ExitInventoryMenu();
        }
      }
      else {
        PreparePausedGamestate(0);
      }
    }
    else {
      DebugLevelSelect();
    }
  }
  return;
}



void Maybe_DeathTransition(void)

{
  LevelIDS LVar1;
  u_char *puVar2;
  u_char **ppuVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  
  if (deathAndGameOverTimer == 0) {
    PauseMusicAndSFX(0);
  }
  deathAndGameOverTimer = deathAndGameOverTimer + 1;
  SetTextWobbleTimerSpeed(3);
  if (gameOverFlag == 0) {
    if (deathAndGameOverTimer < 0x10) {
      return;
    }
    if (gameState == GAMESTATE_DEATH) {
      FUN_8002c8a4();
      RespawnRelated();
      return;
    }
    LoadCdData(WADStartSector,DAT_800785e8 - DAT_8007a70c,DAT_8007a70c,DAT_8007a708,600);
    puVar2 = (u_char *)(DAT_800785e8 - DAT_8007a70c);
    DRAW_ENV1.r0 = *puVar2;
    DRAW_ENV1.g0 = puVar2[1];
    DRAW_ENV1.b0 = puVar2[2];
                    // WARNING: Read-only address (ram,0x80076ef9) is written
                    // WARNING: Read-only address (ram,0x80076efa) is written
                    // WARNING: Read-only address (ram,0x80076f7d) is written
                    // WARNING: Read-only address (ram,0x80076f7e) is written
                    // WARNING: Read-only address (ram,0x80076efb) is written
                    // WARNING: Read-only address (ram,0x80076f7f) is written
    DAT_80078a40 = *(int *)(puVar2 + 4);
    ppuVar3 = (u_char **)(puVar2 + 8);
    iVar4 = 0;
    DRAW_ENV2.r0 = DRAW_ENV1.r0;
    DRAW_ENV2.g0 = DRAW_ENV1.g0;
    DRAW_ENV2.b0 = DRAW_ENV1.b0;
    DAT_80078a44 = ppuVar3;
    clearColor.R = DRAW_ENV1.r0;
    clearColor.G = DRAW_ENV1.g0;
    clearColor.B = DRAW_ENV1.b0;
    if (0 < DAT_80078a40) {
      do {
        iVar4 = iVar4 + 1;
        *ppuVar3 = puVar2 + (int)*ppuVar3;
        ppuVar3 = ppuVar3 + 1;
      } while (iVar4 < DAT_80078a40);
    }
    cameraPosition.x = 0x2800;
    cameraPosition.y = 0x80;
    cameraAngle.roll = 0;
    cameraPosition.z = 0x800;
    cameraAngle.pitch = DAT_800752d8;
    cameraAngle.yaw = DAT_800752da;
    Unk_UpdateSpyroAfterEvents(1);
    spyro.currentAnim = '\x10';
    spyro.nextAnim = '\x10';
    spyro.nextKeyframe = '\x01';
    lives = 4;
    lifePellets = 0;
    spyro.health = 3;
    canFlyIn = 0;
    portalToExitFromInHW = 0;
    DAT_800757e8 = levelID_Indexer;
    memset((uchar *)&DAT_80077888,'\0',0x68);
    LVar1 = ((int)levelIDPortalExit / 10) * 10;
    if (levelIDPortalExit == LVar1) {
      levelLoadState = 0xb;
      gameOverFlag = 1;
    }
    else {
      levelLoadState = 2;
      portalNumber = 0xffffffff;
      gameOverFlag = 1;
      levelID = LVar1;
    }
  }
  else {
    if (gameOverFlag != 1) {
      if (deathAndGameOverTimer < 0x11) {
        return;
      }
      LevelTransitionRelated(1);
      if (-1 < levelLoadState) {
        return;
      }
      FUN_8002c8a4();
      return;
    }
    uVar7 = deathAndGameOverTimer - 0xb4;
    if (uVar7 < 0xc0) {
      uVar6 = uVar7 * 0x10 + 0xe00 & 0xfff;
      iVar4 = CosScaled(uVar6);
      iVar5 = 0x87c - (int)(uVar7 * 0x43e) / 0xc0;
      spyro.position.x = (iVar4 * iVar5 >> 0xc) + 0x2a00;
      iVar4 = SinScaled(uVar6);
      spyro.position.z = uVar7 * -6 + 0xb44;
      spyro.RelativeSparxAngle.roll = (char)((int)(uVar6 + 0x400) >> 4);
      spyro.RelativeSparxAngle.pitch = '\0';
      spyro.position.y = (iVar4 * iVar5 >> 0xc) + 0xc00;
      spyro.RelativeSparxAngle.yaw = (char)((int)uVar7 / 0xc) + -0x20;
      if (deathAndGameOverTimer < 0x164) {
        FUN_8003cb24(3);
      }
      else {
        iVar4 = (deathAndGameOverTimer + -0x164) * 10;
        spyro.nextAnim = '\x0e';
        spyro.maybe_AnimSpeedRelated = (char)deathAndGameOverTimer + -100;
        spyro.nextKeyframe = '\0';
        if (iVar4 < 0) {
          iVar4 = iVar4 + 0xf;
        }
        spyro.RelativeSparxAngle.pitch = -(char)(iVar4 >> 4);
        spyro.RelativeSparxAngle.yaw = (char)deathAndGameOverTimer + -0x74;
      }
      SpyroHeadAnimations();
      SpyroTailAnimations();
    }
    if (0x173 < deathAndGameOverTimer) {
      if (deathAndGameOverTimer == 0x174) {
        spyro.currentAnim = '\x0e';
        spyro.nextAnim = '\x0e';
        spyro.currentKeyfame = '\0';
        spyro.nextKeyframe = '\x01';
        spyro.maybe_AnimSpeedRelated = '\0';
      }
      spyro.position.x = 0x26f8;
      spyro.position.y = 0x900;
      spyro.position.z = 0x6c4;
      spyro.RelativeSparxAngle.pitch = -10;
      spyro.RelativeSparxAngle.yaw = '\0';
      spyro.RelativeSparxAngle.roll = -0x20;
      FUN_8003cb24(3);
      SpyroHeadAnimations();
      SpyroTailAnimations();
    }
    if (levelLoadState < 0xb) {
      LevelTransitionRelated(1);
      return;
    }
    if (deathAndGameOverTimer < 0x169) {
      return;
    }
    if ((currentButton & START_BUTTON) == 0) {
      return;
    }
    ForceMovementState(0);
    gameOverFlag = 2;
  }
  deathAndGameOverTimer = 0;
                    // WARNING: Read-only address (ram,0x80076ef9) is written
                    // WARNING: Read-only address (ram,0x80076efa) is written
                    // WARNING: Read-only address (ram,0x80076efb) is written
                    // WARNING: Read-only address (ram,0x80076f7d) is written
                    // WARNING: Read-only address (ram,0x80076f7e) is written
                    // WARNING: Read-only address (ram,0x80076f7f) is written
                    // WARNING: Read-only address (ram,0x8007a708) is written
                    // WARNING: Read-only address (ram,0x8007a70c) is written
  return;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD

void FuckingNothingBecauseItUsedToBeThePrototypeDragonTextBoxGameState(void)

{
  FUN_8002c91c();
  return;
}



void DragonMainLoop(void)

{
  char cVar1;
  bool bVar2;
  byte bVar3;
  undefined3 extraout_var;
  undefined3 extraout_var_00;
  undefined3 extraout_var_01;
  long lVar4;
  undefined4 uVar5;
  short sVar6;
  uint uVar7;
  int *piVar8;
  byte *pbVar9;
  int iVar10;
  char *pcVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  uint local_60;
  uint local_5c;
  uint local_58;
  short local_50;
  short local_4e;
  short local_4c;
  int local_48 [12];
  
  dragonTimerCurrentState = dragonTimerCurrentState + gameSpeedMultiplyer;
  dragonTimer = dragonTimer + gameSpeedMultiplyer;
  switch(dragonState) {
  case 0:
    levelTimerWhenActive = levelTimerWhenActive + 1;
    (*funcptr_OverlayUpdateMobys)();
    SpyroUpdateAnimation();
    CameraFollowSpyro();
    DAT_80076248 = 1;
    dragonStarParticleAnimation = (char)dragonTimerCurrentState * '\x04' + '@';
    DAT_8007626c = dragonTimerCurrentState << 4;
    DAT_80076272 = DAT_80076272 +
                   ((char)(dragonTimerCurrentState >> 4) + '\x02') * (char)gameSpeedMultiplyer;
    if (dragonTimerCurrentState < 0x21) {
      dragonFlashRGBValues = 0;
    }
    else {
      dragonFlashRGBValues = (dragonTimerCurrentState + -0x20) * 0x10;
    }
    if (vibrationFlag < 8) {
      vibrationFlag = 8;
    }
    DAT_8007584c = 0x46;
    if (dragonTimerCurrentState < 0x30) break;
    dragonState = 1;
    dragonTimerCurrentState = 0;
    dragonFlashRGBValues = 0xff;
    ptrToLastDragonTouched[5] = ptrToLastDragonTouched[5] + -0x78;
    DAT_80077090 = ATan2Scaled(spyro.position.x - ptrToLastDragonTouched[3],
                               spyro.position.y - ptrToLastDragonTouched[4],1);
    Vec3Subtract((int *)&local_60,(int *)&spyro,ptrToLastDragonTouched + 3);
    DAT_80077094 = Vec3CalculateLengthE((int *)&local_60,flag2D);
    DAT_80077098 = *(uint *)(*ptrToLastDragonTouched + 0x28);
    DAT_8007709c = *(int *)(*ptrToLastDragonTouched + 0x2c);
    dragonCutsceneSpyroStartingRotation =
         ATan2Scaled(cameraPosition.x - ptrToLastDragonTouched[3],
                     cameraPosition.y - ptrToLastDragonTouched[4],1);
    Vec3Subtract((int *)&local_60,&cameraPosition.x,ptrToLastDragonTouched + 3);
    DAT_800770a4 = Vec3CalculateLengthE((int *)&local_60,flag2D);
    DAT_800770a8 = cameraPosition.z;
    piVar8 = (int *)*ptrToLastDragonTouched;
    dragonAnimCameraPosRelated =
         ATan2Scaled(*piVar8 - ptrToLastDragonTouched[3],piVar8[1] - ptrToLastDragonTouched[4],1);
    Vec3Subtract((int *)&local_60,piVar8,ptrToLastDragonTouched + 3);
    DAT_800770b0 = Vec3CalculateLengthE((int *)&local_60,flag2D);
    DAT_800770b4 = piVar8[2];
    iVar10 = Maybe_AngleDiff(DAT_80077090,DAT_80077098);
    dragonEndPathWalkTime = (iVar10 >> 4) + 0x28;
    if (dragonEndPathWalkTime < 0x40) {
      dragonEndPathWalkTime = 0x40;
    }
    if (0x80 < dragonEndPathWalkTime) {
      dragonEndPathWalkTime = 0x80;
    }
    backupSuperFlameTimer = superFlameTimer;
    Unk_UpdateSpyroAfterEvents(1);
    spyro.currentAnim = '\x01';
    spyro.nextAnim = '\x01';
    spyro.nextKeyframe = '\x01';
    spyro.currentKeyfame = '\0';
    spyro.maybe_AnimSpeedRelated = '\0';
    ptr_nextFreeParticleSlotInBuffer = ptr_headOfParticleBuffer;
    ptr_headOfParticleBuffer[1] = -1;
    PauseMusicAndSFX(1 << (*(byte *)(ptrToLastDragonTouched + 0x15) & 0x1f));
    bVar3 = localSFXArray[0x32];
    goto LAB_800312a0;
  case 1:
    if (dragonTimerCurrentState < 0x20) {
      iVar10 = 0x20 - dragonTimerCurrentState;
      dragonStarParticleAnimation = (char)iVar10 * '\x04' + '@';
      DAT_8007626c = iVar10 * 0x10;
      DAT_80076272 = DAT_80076272 + ((char)(iVar10 >> 4) + '\x02') * (char)gameSpeedMultiplyer;
    }
    DAT_80076248 = (uint)(dragonTimerCurrentState < 0x20);
    if (dragonTimerCurrentState < 8) {
      dragonFlashRGBValues = (8 - dragonTimerCurrentState) * 0x20;
    }
    else {
      dragonFlashRGBValues = 0;
    }
    *(byte *)((int)ptrToLastDragonTouched + 0x49) =
         *(char *)((int)ptrToLastDragonTouched + 0x49) + 1U & 3;
    *(undefined *)(ptrToLastDragonTouched + 0x11) =
         (&DAT_8006f390)[(uint)*(byte *)((int)ptrToLastDragonTouched + 0x49) * 2];
    *(undefined *)((int)ptrToLastDragonTouched + 0x45) =
         (&DAT_8006f391)[(uint)*(byte *)((int)ptrToLastDragonTouched + 0x49) * 2];
    if (vibrationFlag < 8) {
      vibrationFlag = 8;
    }
    DAT_8007584c = 0x46;
    (*ptr_OverlaySpawnDynamicObj)(0xfb,ptrToLastDragonTouched);
    if (dragonTimerCurrentState < dragonEndPathWalkTime) {
      if (dragonEndPathWalkTime == 0) {
        trap(0x1c00);
      }
      if ((dragonEndPathWalkTime == -1) && (dragonTimerCurrentState << 0xb == -0x80000000)) {
        trap(0x1800);
      }
      iVar10 = SinScaled((dragonTimerCurrentState << 0xb) / dragonEndPathWalkTime + -0x400);
      iVar10 = iVar10 + 0x1000;
      if ((DAT_80077098 - DAT_80077090 & 0xfff) < 0x801) {
        iVar13 = Maybe_AngleDiff();
        iVar13 = DAT_80077090 + (iVar13 * iVar10 >> 0xd);
      }
      else {
        iVar13 = Maybe_AngleDiff();
        iVar13 = DAT_80077090 - (iVar13 * iVar10 >> 0xd);
      }
      if (dragonEndPathWalkTime == 0) {
        trap(0x1c00);
      }
      if ((dragonEndPathWalkTime == -1) && (dragonTimerCurrentState << 10 == -0x80000000)) {
        trap(0x1800);
      }
      iVar14 = SinScaled((dragonTimerCurrentState << 10) / dragonEndPathWalkTime + -0x400);
      iVar12 = DAT_80077094 + ((int)((DAT_8007709c - DAT_80077094) * (iVar14 + 0x1000)) >> 0xc);
      Vec3Copy((int *)&local_60,(int *)&spyro);
      iVar14 = CosScaled(iVar13);
      spyro.position.x = ptrToLastDragonTouched[3] + (iVar14 * iVar12 >> 0xc);
      iVar13 = SinScaled(iVar13);
      spyro.position.y = ptrToLastDragonTouched[4] + (iVar13 * iVar12 >> 0xc);
      Vec3Subtract((int *)&local_60,(int *)&spyro,(int *)&local_60);
      iVar13 = ATan2Scaled(local_60,local_5c,0);
      bVar3 = Maybe_Calculate8BitDifference(iVar13,(uint)(byte)spyro.RelativeSparxAngle.roll);
      if (3 < CONCAT31(extraout_var,bVar3)) {
        uVar7 = (uint)(byte)spyro.RelativeSparxAngle.roll;
        if ((iVar13 - uVar7 & 0xff) < 0x81) {
          bVar3 = Maybe_Calculate8BitDifference(iVar13,uVar7);
          spyro.RelativeSparxAngle.roll =
               spyro.RelativeSparxAngle.roll + (char)(CONCAT31(extraout_var_00,bVar3) >> 2);
        }
        else {
          bVar3 = Maybe_Calculate8BitDifference(iVar13,uVar7);
          spyro.RelativeSparxAngle.roll =
               spyro.RelativeSparxAngle.roll - (char)(CONCAT31(extraout_var_01,bVar3) >> 2);
        }
      }
      uVar7 = Vec3CalculateLengthE((int *)&local_60,flag2D);
      spyro._88_4_ = (int)uVar7 >> 1;
      if ((int)spyro._88_4_ < 4) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (0x10 < (int)spyro._88_4_) {
        spyro.animSpeed = '\x10';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if ((dragonAnimCameraPosRelated - dragonCutsceneSpyroStartingRotation & 0xfffU) < 0x801) {
        iVar13 = Maybe_AngleDiff();
        iVar13 = dragonCutsceneSpyroStartingRotation + (iVar13 * iVar10 >> 0xd);
      }
      else {
        iVar13 = Maybe_AngleDiff();
        iVar13 = dragonCutsceneSpyroStartingRotation - (iVar13 * iVar10 >> 0xd);
      }
      iVar12 = DAT_800770a4 + ((int)((DAT_800770b0 - DAT_800770a4) * iVar10) >> 0xd);
      iVar14 = CosScaled(iVar13);
      cameraPosition.x = ptrToLastDragonTouched[3] + (iVar14 * iVar12 >> 0xc);
      iVar13 = SinScaled(iVar13);
      cVar1 = spyro.nextKeyframe;
      cameraPosition.y = ptrToLastDragonTouched[4] + (iVar13 * iVar12 >> 0xc);
      cameraPosition.z = DAT_800770a8 + ((DAT_800770b4 - DAT_800770a8) * iVar10 >> 0xd);
      if ((dragonEndPathWalkTime + -0x10 <= dragonTimerCurrentState) &&
         (dragonTimerCurrentState - gameSpeedMultiplyer < dragonEndPathWalkTime + -0x10)) {
        spyro.nextAnim = '\x03';
        spyro.nextKeyframe = '\0';
        spyro.maybe_AnimSpeedRelated = '\0';
        spyro.animSpeed = '\f';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
        spyro.currentKeyfame = cVar1;
      }
    }
    else if (dragonTimerCurrentState < dragonEndPathWalkTime + 0x20) {
      if (dragonTimerCurrentState - gameSpeedMultiplyer < dragonEndPathWalkTime) {
        iVar10 = CosScaled(DAT_80077098);
        spyro.position.x = ptrToLastDragonTouched[3] + (iVar10 * DAT_8007709c >> 0xc);
        iVar10 = SinScaled(DAT_80077098);
        DAT_80077090 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
        DAT_80077098 = DAT_80077098 + 0x800 & 0xfff;
        spyro.position.y = ptrToLastDragonTouched[4] + (iVar10 * DAT_8007709c >> 0xc);
        Vec3Copy(&cameraPosition.x,(int *)*ptrToLastDragonTouched);
      }
      if ((DAT_80077098 - DAT_80077090 & 0xfff) < 0x801) {
        iVar10 = Maybe_AngleDiff();
        iVar10 = iVar10 * (dragonTimerCurrentState - dragonEndPathWalkTime);
        if (iVar10 < 0) {
          iVar10 = iVar10 + 0x1f;
        }
        iVar10 = DAT_80077090 + (iVar10 >> 5);
      }
      else {
        iVar10 = Maybe_AngleDiff();
        iVar10 = iVar10 * (dragonTimerCurrentState - dragonEndPathWalkTime);
        if (iVar10 < 0) {
          iVar10 = iVar10 + 0x1f;
        }
        iVar10 = DAT_80077090 - (iVar10 >> 5);
      }
      spyro.RelativeSparxAngle.roll = (char)(iVar10 >> 4);
      spyro.animSpeed = '\b';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
    }
    else {
      dragonState = 2;
      spyro.maybe_AnimSpeedRelated = '\x04';
      dragonTimerCurrentState = 0;
      spyro.nextAnim = '\0';
      spyro.nextKeyframe = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      spyro.RelativeSparxAngle.roll = (char)((int)DAT_80077098 >> 4);
    }
    if (dragonState == 1) {
      Vec3Add(&local_60,&spyro,ptrToLastDragonTouched + 3);
      Vec3ScaleDownByPowerOfTwo((int *)&local_60,1);
      Vec3Subtract((int *)&local_60,(int *)&local_60,&cameraPosition.x);
      if (dragonTimerCurrentState < 0x10) {
        local_50 = 0;
        uVar7 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        iVar10 = ATan2Scaled(uVar7,-local_58,1);
        local_4e = (short)iVar10;
        iVar10 = ATan2Scaled(local_60,local_5c,1);
        local_4c = (short)iVar10;
        iVar10 = FUN_8001796c((int)local_50,(int)cameraAngle.roll);
        cameraAngle.roll = cameraAngle.roll + (short)(iVar10 * dragonTimerCurrentState >> 4) & 0xfff
        ;
        iVar10 = FUN_8001796c((int)local_4e,(int)cameraAngle.pitch);
        cameraAngle.pitch =
             cameraAngle.pitch + (short)(iVar10 * dragonTimerCurrentState >> 4) & 0xfff;
        iVar10 = FUN_8001796c((int)local_4c,(int)cameraAngle.yaw);
        sVar6 = (short)(iVar10 * dragonTimerCurrentState >> 4);
      }
      else {
        if (dragonTimerCurrentState < dragonEndPathWalkTime + -0x20) {
          cameraAngle.roll = 0;
          uVar7 = Vec3CalculateLengthE((int *)&local_60,flag2D);
          iVar10 = ATan2Scaled(uVar7,-local_58,1);
          cameraAngle.pitch = (short)iVar10;
          iVar10 = ATan2Scaled(local_60,local_5c,1);
          cameraAngle.yaw = (short)iVar10;
          goto LAB_80030258;
        }
        iVar13 = *ptrToLastDragonTouched;
        local_50 = 0;
        uVar7 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        iVar10 = ATan2Scaled(uVar7,-local_58,1);
        local_4e = (short)iVar10;
        iVar10 = ATan2Scaled(local_60,local_5c,1);
        local_4c = (short)iVar10;
        iVar10 = FUN_8001796c(*(undefined4 *)(iVar13 + 0xc),(int)local_50);
        cameraAngle.roll =
             local_50 +
             (short)(iVar10 * ((dragonTimerCurrentState - dragonEndPathWalkTime) + 0x20) >> 6) &
             0xfff;
        iVar10 = FUN_8001796c(*(undefined4 *)(iVar13 + 0x10),(int)local_4e);
        cameraAngle.pitch =
             local_4e +
             (short)(iVar10 * ((dragonTimerCurrentState - dragonEndPathWalkTime) + 0x20) >> 6) &
             0xfff;
        iVar10 = FUN_8001796c(*(undefined4 *)(iVar13 + 0x14),(int)local_4c);
        sVar6 = (short)(iVar10 * ((dragonTimerCurrentState - dragonEndPathWalkTime) + 0x20) >> 6);
        cameraAngle.yaw = local_4c;
      }
      cameraAngle.yaw = cameraAngle.yaw + sVar6 & 0xfff;
    }
LAB_80030258:
    iVar10 = CosScaled((uint)(byte)spyro.RelativeSparxAngle.roll << 4);
    iVar13 = SinScaled((uint)(byte)spyro.RelativeSparxAngle.roll << 4);
    local_60 = spyro.unkown_angleRelated * iVar10 + spyro.unkown_angleRelated2 * iVar13 >> 0xc;
    iVar10 = CosScaled((uint)(byte)spyro.RelativeSparxAngle.roll << 4);
    iVar13 = SinScaled((uint)(byte)spyro.RelativeSparxAngle.roll << 4);
    local_58 = spyro.unkown_angleRelated3;
    local_5c = spyro.unkown_angleRelated2 * iVar10 - spyro.unkown_angleRelated * iVar13 >> 0xc;
    uVar7 = SquareRoot(local_60 * local_60 + spyro.unkown_angleRelated3 * spyro.unkown_angleRelated3
                      );
    iVar10 = ATan2Scaled(uVar7,local_5c,1);
    spyro.RelativeSparxAngle.yaw = -(char)iVar10;
    iVar10 = ATan2Scaled(local_58,local_60,1);
    spyro.RelativeSparxAngle.pitch = -(char)iVar10;
    FUN_8003cb24(spyro._88_4_);
    SpyroHeadAnimations();
    SpyroTailAnimations();
    spyro.position.z = spyro.position.z + 0x400;
    spyro.unkown_heightRelated = FUN_8004df24(&spyro);
    spyro.position.z = spyro.unkown_heightRelated + 0x164;
    FUN_80049fac(0);
    break;
  case 2:
    *(byte *)((int)ptrToLastDragonTouched + 0x49) =
         *(char *)((int)ptrToLastDragonTouched + 0x49) + 1U & 3;
    *(undefined *)(ptrToLastDragonTouched + 0x11) =
         (&DAT_8006f398)[(uint)*(byte *)((int)ptrToLastDragonTouched + 0x49) * 2];
    *(undefined *)((int)ptrToLastDragonTouched + 0x45) =
         (&DAT_8006f399)[(uint)*(byte *)((int)ptrToLastDragonTouched + 0x49) * 2];
    if (vibrationFlag < 8) {
      vibrationFlag = 8;
    }
    DAT_8007584c = 0x46;
    (*ptr_OverlaySpawnDynamicObj)(0xfb,ptrToLastDragonTouched);
    if ((dragonTimerCurrentState < 0x10) || (iVar10 = 0, dragonState2 < 3)) {
      FUN_8003cb24(spyro._88_4_);
      SpyroHeadAnimations();
      SpyroTailAnimations();
    }
    else {
      dragonState = 3;
      dragonTimerCurrentState = 0;
      do {
        iVar10 = iVar10 + 1;
        (*ptr_OverlaySpawnDynamicObj)(0xfb,ptrToLastDragonTouched);
      } while (iVar10 < 0x20);
      DAT_800770b8 = SpawnDynamicObjects();
      InitArrayRelated();
      *(undefined2 *)(DAT_800770b8 + 0x36) = 0x1fe;
      Vec3Copy((int *)(DAT_800770b8 + 0xc),ptrToLastDragonTouched + 3);
      *(undefined *)(DAT_800770b8 + 0x46) = *(undefined *)((int)ptrToLastDragonTouched + 0x46);
      *(undefined *)(DAT_800770b8 + 0x57) = 0x60;
      *(undefined *)(DAT_800770b8 + 0x47) = 5;
      *(undefined4 *)(DAT_800770b8 + 0x1c) = 0xffffffff;
      *(int *)(DAT_800770b8 + 0x14) = *(int *)(DAT_800770b8 + 0x14) + 0x400;
      FUN_8004df24(DAT_800770b8 + 0xc);
      *(int *)(DAT_800770b8 + 0x14) = *(int *)(DAT_800770b8 + 0x14) + -0x400;
      FUN_800533d0(DAT_800770b8);
      FUN_800526a8(DAT_800770b8);
      DAT_800770bc = SpawnDynamicObjects();
      InitArrayRelated();
      *(undefined2 *)(DAT_800770bc + 0x36) = 0x1ff;
      Vec3Copy((int *)(DAT_800770bc + 0xc),(int *)&spyro);
      *(undefined *)(DAT_800770bc + 0x47) = 5;
      FUN_800526a8(DAT_800770bc);
      FUN_80056200(DAT_80077084,4);
      PlaySoundEffect((uint)localSFXArray[0x31],(int *)0x0,0x10,&DAT_80077084);
      ptrToLastDragonTouched[5] = ptrToLastDragonTouched[5] + 0x78;
      DespawnObjects(ptrToLastDragonTouched);
    }
    break;
  case 3:
    if (dragonTimerCurrentState < 0x18) {
      *(char *)(DAT_800770b8 + 0x57) = (char)dragonTimerCurrentState * -3 + '`';
      iVar10 = FUN_80017948(*(int *)(*ptrToLastDragonTouched + 0x30) >> 4,
                            *(undefined *)((int)ptrToLastDragonTouched + 0x46));
      *(char *)(DAT_800770b8 + 0x46) =
           *(char *)((int)ptrToLastDragonTouched + 0x46) +
           (char)((iVar10 * dragonTimerCurrentState) / 0x18);
    }
    else {
      dragonState = 4;
      dragonTimerCurrentState = 0;
      *(char *)(DAT_800770b8 + 0x46) = (char)(*(int *)(*ptrToLastDragonTouched + 0x30) >> 4);
      *(undefined *)(DAT_800770b8 + 0x57) = 0;
      *(char *)(DAT_800770bc + 0x44) = spyro.RelativeSparxAngle.yaw;
      *(char *)(DAT_800770bc + 0x45) = spyro.RelativeSparxAngle.pitch;
      *(char *)(DAT_800770bc + 0x46) = spyro.RelativeSparxAngle.roll;
    }
    break;
  case 4:
    bVar2 = false;
    if (dragonTimerCurrentState < DAT_8007707c << 1) {
      if ((DAT_80077088 == 0) &&
         (*(int *)(*ptrToLastDragonTouched + 0x40) <= dragonTimerCurrentState)) {
        ArrayCopy(local_48,sfxMetadataArray,0x14);
        *sfxMetadataArray = (MaybeSoundEffectMetadata *)(0x80000 - DAT_80077038);
        sfxMetadataArray[1] = (MaybeSoundEffectMetadata *)0xffffffff;
        *(undefined2 *)(sfxMetadataArray + 2) = 0x32;
        *(short *)((int)sfxMetadataArray + 10) =
             (short)((*(int *)(*ptrToLastDragonTouched + 0x3c) << 10) / 0x2b11);
        *(undefined2 *)(sfxMetadataArray + 3) = 0;
        *(undefined2 *)((int)sfxMetadataArray + 0xe) = 0;
        sfxMetadataArray[4] = (MaybeSoundEffectMetadata *)0x0;
        DAT_800761dc = 1;
        USHORT_800761e8 = 0x3fff;
        USHORT_800761ea = 0x3fff;
        FUN_80056200(DAT_80077084,4);
        PlaySoundEffect(0,(int *)0x0,0x10,&DAT_80077084);
        ArrayCopy((int *)sfxMetadataArray,local_48,0x14);
        DAT_80077088 = 1;
      }
      piVar8 = (int *)((dragonTimerCurrentState >> 1) * 0x18 + DAT_80077078);
      cameraPosition.x = *piVar8;
      cameraPosition.y = piVar8[1];
      cameraPosition.z = piVar8[2];
      cameraAngle.roll = (short)piVar8[3];
      cameraAngle.pitch = (short)piVar8[4];
      cameraAngle.yaw = (short)piVar8[5];
      cVar1 = *(char *)(*(int *)(DAT_80076b70 + 0x38) + 0xc);
      if (cVar1 == '\x10') {
        iVar10 = 8;
      }
      else if (cVar1 == '\x15') {
        iVar10 = 6;
      }
      else {
        iVar10 = 2;
        if (cVar1 == ' ') {
          iVar10 = 4;
        }
      }
      if (iVar10 == 0) {
        trap(0x1c00);
      }
      if ((iVar10 == -1) && (dragonTimerCurrentState == -0x80000000)) {
        trap(0x1800);
      }
      *(char *)(DAT_800770b8 + 0x3e) = (char)(dragonTimerCurrentState / iVar10);
      *(char *)(DAT_800770b8 + 0x3f) = *(char *)(DAT_800770b8 + 0x3e) + '\x01';
      if (iVar10 == 0) {
        trap(0x1c00);
      }
      if ((iVar10 == -1) && (dragonTimerCurrentState == -0x80000000)) {
        trap(0x1800);
      }
      iVar13 = dragonTimerCurrentState % iVar10 << 6;
      if (iVar10 == 0) {
        trap(0x1c00);
      }
      if ((iVar10 == -1) && (iVar13 == -0x80000000)) {
        trap(0x1800);
      }
      *(char *)(DAT_800770b8 + 0x40) = (char)(iVar13 / iVar10);
      if (**(short **)(DAT_80076b70 + 0x38) <= (short)(ushort)*(byte *)(DAT_800770b8 + 0x3f)) {
        *(char *)(DAT_800770b8 + 0x3e) = (char)**(short **)(DAT_80076b70 + 0x38) + -1;
        *(undefined *)(DAT_800770b8 + 0x40) = 0;
      }
      cVar1 = *(char *)(*(int *)(DAT_80076b74 + 0x38) + 0xc);
      if (cVar1 == '\x10') {
        iVar10 = 8;
      }
      else if (cVar1 == '\x15') {
        iVar10 = 6;
      }
      else {
        iVar10 = 2;
        if (cVar1 == ' ') {
          iVar10 = 4;
        }
      }
      if (iVar10 == 0) {
        trap(0x1c00);
      }
      if ((iVar10 == -1) && (dragonTimerCurrentState == -0x80000000)) {
        trap(0x1800);
      }
      *(char *)(DAT_800770bc + 0x3e) = (char)(dragonTimerCurrentState / iVar10);
      *(char *)(DAT_800770bc + 0x3f) = *(char *)(DAT_800770bc + 0x3e) + '\x01';
      if (iVar10 == 0) {
        trap(0x1c00);
      }
      if ((iVar10 == -1) && (dragonTimerCurrentState == -0x80000000)) {
        trap(0x1800);
      }
      iVar13 = dragonTimerCurrentState % iVar10 << 6;
      if (iVar10 == 0) {
        trap(0x1c00);
      }
      if ((iVar10 == -1) && (iVar13 == -0x80000000)) {
        trap(0x1800);
      }
      *(char *)(DAT_800770bc + 0x40) = (char)(iVar13 / iVar10);
      if (**(short **)(DAT_80076b74 + 0x38) <= (short)(ushort)*(byte *)(DAT_800770bc + 0x3f)) {
        *(char *)(DAT_800770bc + 0x3e) = (char)**(short **)(DAT_80076b74 + 0x38) + -1;
        *(undefined *)(DAT_800770bc + 0x40) = 0;
      }
      if ((currentButtonOneFrame & X_BUTTON) != 0) {
        if (*(int *)(*ptrToLastDragonTouched + 0x34) == 0) {
          bVar2 = true;
        }
        else if (DAT_8007708c == 0) {
          DAT_8007708c = 1;
        }
      }
    }
    if ((bVar2) || (DAT_8007707c << 1 <= dragonTimerCurrentState)) {
      dragonState = 5;
      dragonTimerCurrentState = 0;
      iVar10 = DAT_8007707c * 0x18 + DAT_80077078;
      cameraPosition.x = *(int *)(iVar10 + -0x18);
      cameraPosition.y = *(int *)(iVar10 + -0x14);
      cameraPosition.z = *(int *)(iVar10 + -0x10);
      cameraAngle.roll = (short)*(undefined4 *)(iVar10 + -0xc);
      cameraAngle.pitch = (short)*(undefined4 *)(iVar10 + -8);
      cameraAngle.yaw = (short)*(undefined4 *)(iVar10 + -4);
      *(char *)(DAT_800770b8 + 0x3e) = **(char **)(DAT_80076b70 + 0x38) + -1;
      *(undefined *)(DAT_800770b8 + 0x40) = 0;
      *(char *)(DAT_800770bc + 0x3e) = **(char **)(DAT_80076b74 + 0x38) + -1;
      *(undefined *)(DAT_800770bc + 0x40) = 0;
      spyro.currentAnim = '\0';
      spyro.nextAnim = '\0';
      spyro.currentKeyfame = '\0';
      spyro.nextKeyframe = '\x01';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      SpyroHeadAnimations();
      SpyroTailAnimations();
      FUN_80056200(DAT_80077084,2);
      FUN_80056ed4();
      if (DAT_80077064 == 0) {
        SpuSetTransferStartAddr(0x80000 - DAT_80077038);
        SpuWrite((uchar *)(DAT_800785e0 + DAT_80077034),DAT_80077038);
        do {
          lVar4 = SpuIsTransferCompleted(0);
        } while (lVar4 == 0);
      }
    }
    if ((DAT_8007708c != 0) &&
       (DAT_8007708c = DAT_8007708c + gameSpeedMultiplyer, 0x77 < DAT_8007708c)) {
      DAT_8007708c = 0;
    }
    break;
  case 5:
    iVar10 = 0;
    if (0 < *(short *)(*(int *)(DAT_80076b70 + 0x38) + 2)) {
      do {
        uVar5 = PortalShimmer(*(undefined4 *)
                               (iVar10 * 4 + *(int *)(*(int *)(DAT_80076b70 + 0x38) + 0x18)),
                              0xffffff,0x200);
        *(undefined4 *)(iVar10 * 4 + *(int *)(*(int *)(DAT_80076b70 + 0x38) + 0x18)) = uVar5;
        iVar10 = iVar10 + 1;
      } while (iVar10 < *(short *)(*(int *)(DAT_80076b70 + 0x38) + 2));
    }
    iVar10 = 0;
    piVar8 = &DAT_800781b4;
    iVar14 = 0;
    iVar13 = 0;
    FUN_8003cb24(spyro._88_4_);
    SpyroHeadAnimations();
    SpyroTailAnimations();
    do {
      Vec3Copy((int *)(&DAT_800781b0 + iVar14),(int *)(&DAT_8006f3f0 + iVar13));
      if (dragonTimerCurrentState < 0x19) {
        *piVar8 = *piVar8 + (*(short *)(&DAT_8006e77c + (dragonTimerCurrentState >> 1) * 2) * 3 >> 1
                            );
      }
      else {
        *piVar8 = *piVar8 + (DAT_8006e794 * 3 >> 1);
      }
      piVar8 = piVar8 + 0x16;
      iVar14 = iVar14 + 0x58;
      iVar10 = iVar10 + 1;
      iVar13 = iVar13 + 0xc;
    } while (iVar10 < 3);
    if (0x18 < dragonTimerCurrentState) {
      dragonState = 6;
      dragonTimerCurrentState = 0;
      hudDragonKeyframe = '\0';
      Vec3Copy((int *)&local_50,(int *)(DAT_800770b8 + 0xc));
      local_48[0] = local_48[0] + 0x40;
      (*ptr_OverlayCreateParticle)(0x20,0x18,&local_50,0);
      Vec3Copy(&dragonStarPatriclePosition,(int *)&local_50);
      DespawnObjects(DAT_800770b8);
      DespawnObjects(DAT_800770bc);
      PlaySoundEffect((uint)localSFXArray[0x34],(int *)0x0,0x10,&DAT_80077084);
    }
    break;
  case 6:
    FUN_8003cb24(spyro._88_4_);
    SpyroHeadAnimations();
    SpyroTailAnimations();
    if ((dragonCountCutsceneHUD != globalDragonCount) || (hudDragonKeyframe != '\0')) {
      hudDragonKeyframe = hudDragonKeyframe + '\x10';
      HudVisual(5,2,dragonCountCutsceneHUD + 1,0);
      HudNumSpin(5,2,hudDragonKeyframe);
      if (hudDragonKeyframe == -0x40) {
        dragonCountCutsceneHUD = dragonCountCutsceneHUD + 1;
      }
      if (hudDragonKeyframe == '\0') {
        PlaySoundEffect((uint)localSFXArray[0x35],(int *)0x0,0x10,&DAT_80077084);
      }
    }
    if ((dragonTimerCurrentState < 0x60) || (dragonState2 != 6)) break;
    dragonState = 7;
    dragonTimerCurrentState = 0;
    ptr_nextFreeParticleSlotInBuffer = ptr_headOfParticleBuffer;
    ptr_headOfParticleBuffer[1] = -1;
    bVar3 = localSFXArray[0x33];
LAB_800312a0:
    PlaySoundEffect((uint)bVar3,(int *)0x0,0x10,&DAT_80077084);
    break;
  case 7:
    FUN_8003cb24(spyro._88_4_);
    SpyroHeadAnimations();
    SpyroTailAnimations();
    if (dragonTimerCurrentState < 0x10) {
      iVar14 = 0;
      piVar8 = &DAT_800781b4;
      iVar13 = 0;
      iVar10 = 0;
      do {
        Vec3Copy((int *)(&DAT_800781b0 + iVar13),(int *)(&DAT_8006f3f0 + iVar10));
        iVar13 = iVar13 + 0x58;
        iVar10 = iVar10 + 0xc;
        iVar14 = iVar14 + 1;
        *piVar8 = *piVar8 + (0x11 - dragonTimerCurrentState) * 3;
        piVar8 = piVar8 + 0x16;
      } while (iVar14 < 3);
      iVar13 = dragonTimerCurrentState << 4;
      iVar10 = dragonTimerCurrentState;
      if (0xf < dragonTimerCurrentState) goto LAB_80031374;
    }
    else {
LAB_80031374:
      iVar10 = 0x20 - dragonTimerCurrentState;
      iVar13 = iVar10 * 0x10;
    }
    dragonFlashRGBValues = iVar13 + -1;
    DAT_80076248 = 1;
    dragonStarParticleAnimation = (char)iVar10 * '\b' + '@';
    DAT_8007626c = iVar10 * 0x50;
    DAT_80076272 = DAT_80076272 + '\b';
    if (0x1f < dragonTimerCurrentState) {
      DAT_80076248 = 0;
      ExitDragon();
    }
  }
  (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
  if (0 < dragonState) {
    DragonBreakFree();
  }
  bVar3 = ptr_startOfCurrentLevelMobys[0x48];
  if (bVar3 != 0xff) {
    pbVar9 = (byte *)(ptr_startOfCurrentLevelMobys + 0x48);
    pcVar11 = ptr_startOfCurrentLevelMobys;
    do {
      if ((*(short *)(pbVar9 + -0x12) == 0xfb) && (bVar3 < 0x80)) {
        FUN_8003c6e4(pcVar11);
      }
      pbVar9 = pbVar9 + 0x58;
      bVar3 = *pbVar9;
      pcVar11 = pcVar11 + 0x58;
    } while (bVar3 != 0xff);
  }
  return;
}



void StartFairyMenu(void)

{
  char *pcVar1;
  int iVar2;
  uint uVar3;
  long lVar4;
  int iVar5;
  Moby *pointerToDragon;
  int iVar6;
  uint uVar7;
  uint local_30;
  uint local_2c;
  int local_28;
  short local_20;
  short local_1e;
  short local_1c;
  
  fairyMenuTimer = fairyMenuTimer + gameSpeedMultiplyer;
  SetTextWobbleTimerSpeed(3);
  DAT_800700f8 = 0;
  DAT_800700f4 = DAT_80078d74;
  FUN_800522c0(&DAT_800700f4,0);
  if (fairyTextFlag == 0) {
    if (fairyMenuTimer < 0x40) {
      iVar2 = SinScaled(fairyMenuTimer * 0x20 + -0x400);
      pcVar1 = ptr_startOfCurrentLevelMobys;
      iVar5 = (*DAT_80078d74)[1];
      uVar7 = iVar2 + 0x1000;
      if ((ptr_startOfCurrentLevelMobys[iVar5 * 0x58 + 0x48] == '\x02') &&
         (uVar3 = (uint)(byte)ptr_startOfCurrentLevelMobys[iVar5 * 0x58 + 0x49] +
                  gameSpeedMultiplyer,
         ptr_startOfCurrentLevelMobys[iVar5 * 0x58 + 0x49] = (char)uVar3, 0x2f < (uVar3 & 0xff))) {
        pcVar1[iVar5 * 0x58 + 0x48] = '\0';
        pcVar1[iVar5 * 0x58 + 0x3c] = '\0';
      }
      if ((DAT_80078d38 - DAT_80078d2c & 0xfffU) < 0x801) {
        iVar2 = Maybe_AngleDiff();
        iVar2 = DAT_80078d2c + ((int)(iVar2 * uVar7) >> 0xd);
      }
      else {
        iVar2 = Maybe_AngleDiff();
        iVar2 = DAT_80078d2c - ((int)(iVar2 * uVar7) >> 0xd);
      }
      iVar6 = DAT_80078d30 + ((int)((DAT_80078d3c - DAT_80078d30) * uVar7) >> 0xd);
      iVar5 = CosScaled(iVar2);
      DAT_80078d74[3] = (int *)(spyro.position.x + (iVar5 * iVar6 >> 0xc));
      iVar2 = SinScaled(iVar2);
      DAT_80078d74[4] = (int *)(spyro.position.y + (iVar2 * iVar6 >> 0xc));
      DAT_80078d74[5] =
           (int *)(DAT_80078d34 + ((int)(((int)DAT_80078d40 - DAT_80078d34) * uVar7) >> 0xd));
      FUN_80038dc0(DAT_80078d74,3,0,0);
      MobyUpdatePosition(DAT_80078d74 + 3,0x1000);
      FUN_800533d0(DAT_80078d74);
      if (ptr_SparxMoby != 0) {
        if ((DAT_80078d4c - DAT_80078d44 & 0xfffU) < 0x801) {
          iVar2 = Maybe_AngleDiff();
          iVar2 = DAT_80078d44 + ((int)(iVar2 * uVar7) >> 0xd);
        }
        else {
          iVar2 = Maybe_AngleDiff();
          iVar2 = DAT_80078d44 - ((int)(iVar2 * uVar7) >> 0xd);
        }
        iVar6 = DAT_80078d48 + ((int)((DAT_80078d50 - DAT_80078d48) * uVar7) >> 0xd);
        iVar5 = CosScaled(iVar2);
        *(int *)(ptr_SparxMoby + 0xc) = spyro.position.x + (iVar5 * iVar6 >> 0xc);
        iVar2 = SinScaled(iVar2);
        *(int *)(ptr_SparxMoby + 0x10) = spyro.position.y + (iVar2 * iVar6 >> 0xc);
      }
      if ((DAT_80078d60 - DAT_80078d54 & 0xfffU) < 0x801) {
        iVar2 = Maybe_AngleDiff();
        iVar2 = DAT_80078d54 + ((int)(iVar2 * uVar7) >> 0xd);
      }
      else {
        iVar2 = Maybe_AngleDiff();
        iVar2 = DAT_80078d54 - ((int)(iVar2 * uVar7) >> 0xd);
      }
      iVar6 = DAT_80078d58 + ((int)((DAT_80078d64 - DAT_80078d58) * uVar7) >> 0xd);
      iVar5 = CosScaled(iVar2);
      cameraPosition.x = spyro.position.x + (iVar5 * iVar6 >> 0xc);
      iVar2 = SinScaled(iVar2);
      cameraPosition.y = spyro.position.y + (iVar2 * iVar6 >> 0xc);
      cameraPosition.z = DAT_80078d5c + ((int)((DAT_80078d68 - DAT_80078d5c) * uVar7) >> 0xd);
      Vec3Add(&local_30,&spyro,DAT_80078d74 + 3);
      local_28 = local_28 + 0x240;
      Vec3ScaleDownByPowerOfTwo((int *)&local_30,1);
      Vec3Subtract((int *)&local_30,(int *)&local_30,&cameraPosition.x);
      if (fairyMenuTimer < 0x20) {
        local_20 = 0;
        uVar3 = Vec3CalculateLengthE((int *)&local_30,flag2D);
        iVar2 = ATan2Scaled(uVar3,-local_28,1);
        local_1e = (short)iVar2;
        iVar2 = ATan2Scaled(local_30,local_2c,1);
        local_1c = (short)iVar2;
        iVar2 = FUN_8001796c((int)local_20,(int)cameraAngle.roll);
        cameraAngle.roll = cameraAngle.roll + (short)(iVar2 * fairyMenuTimer >> 5) & 0xfff;
        iVar2 = FUN_8001796c((int)local_1e,(int)cameraAngle.pitch);
        cameraAngle.pitch = cameraAngle.pitch + (short)(iVar2 * fairyMenuTimer >> 5) & 0xfff;
        iVar2 = FUN_8001796c((int)local_1c,(int)cameraAngle.yaw);
        cameraAngle.yaw = cameraAngle.yaw + (short)(iVar2 * fairyMenuTimer >> 5) & 0xfff;
      }
      else {
        cameraAngle.roll = 0;
        uVar3 = Vec3CalculateLengthE((int *)&local_30,flag2D);
        iVar2 = ATan2Scaled(uVar3,-local_28,1);
        cameraAngle.pitch = (short)iVar2;
        iVar2 = ATan2Scaled(local_30,local_2c,1);
        cameraAngle.yaw = (short)iVar2;
      }
      if ((DAT_80078d70 - DAT_80078d6c & 0xfffU) < 0x801) {
        iVar2 = Maybe_AngleDiff();
        iVar2 = DAT_80078d6c + ((int)(iVar2 * uVar7) >> 0xd);
      }
      else {
        iVar2 = Maybe_AngleDiff();
        iVar2 = DAT_80078d6c - ((int)(iVar2 * uVar7) >> 0xd);
      }
      spyro.RelativeSparxAngle.roll = (char)(iVar2 >> 4);
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      spyro.unkown1._1_1_ = (undefined)(uVar7 >> 9);
      FUN_8003cb24(0x10);
      SpyroHeadAnimations();
      SpyroTailAnimations();
      FlameButAlsoNotFlame(gameSpeedMultiplyer);
      (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
      return;
    }
    iVar2 = CosScaled(DAT_80078d38);
    DAT_80078d74[3] = (int *)(spyro.position.x + (iVar2 * DAT_80078d3c >> 0xc));
    iVar2 = SinScaled(DAT_80078d38);
    DAT_80078d74[4] = (int *)(spyro.position.y + (iVar2 * DAT_80078d3c >> 0xc));
    DAT_80078d74[5] = DAT_80078d40;
    iVar2 = ATan2Scaled(spyro.position.x - (int)DAT_80078d74[3],
                        spyro.position.y - (int)DAT_80078d74[4],0);
    *(char *)((int)DAT_80078d74 + 0x46) = (char)iVar2;
    if (ptr_SparxMoby != 0) {
      iVar2 = CosScaled(DAT_80078d4c);
      *(int *)(ptr_SparxMoby + 0xc) = spyro.position.x + (iVar2 * DAT_80078d50 >> 0xc);
      iVar2 = SinScaled(DAT_80078d4c);
      *(int *)(ptr_SparxMoby + 0x10) = spyro.position.y + (iVar2 * DAT_80078d50 >> 0xc);
    }
    iVar2 = CosScaled(DAT_80078d60);
    cameraPosition.x = spyro.position.x + (iVar2 * DAT_80078d64 >> 0xc);
    iVar2 = SinScaled(DAT_80078d60);
    cameraPosition.y = spyro.position.y + (iVar2 * DAT_80078d64 >> 0xc);
    cameraPosition.z = DAT_80078d68;
    spyro.RelativeSparxAngle.roll = (char)(DAT_80078d70 >> 4);
    spyro.nextAnim = '\0';
    spyro.nextKeyframe = '\0';
    spyro.maybe_AnimSpeedRelated = '\x04';
    spyro.animSpeed = '\x04';
    spyro.unkown10 = '\0';
    spyro.unkown11 = '\0';
    spyro.unkown12 = '\0';
    fairyTextFlag = 1;
    fairyMenuTimer = 0;
    return;
  }
  if (fairyTextFlag != 1) {
    return;
  }
  FUN_8003cb24(spyro._88_4_);
  SpyroHeadAnimations();
  SpyroTailAnimations();
  levelTimerWhenActive = levelTimerWhenActive + 1;
  (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
  switch(fairyTextboxSaveGameMenus) {
  case 0:
    if ((currentButtonOneFrame & DOWN_BUTTON) == 0) {
      if ((currentButtonOneFrame & UP_BUTTON) != 0) {
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
        fairyMenuTimer = 0;
        fairyTextboxSelection = fairyTextboxSelection + -1;
        if (fairyTextboxSelection < 0) {
          fairyTextboxSelection = 2;
        }
      }
    }
    else {
      PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      fairyMenuTimer = 0;
      fairyTextboxSelection = fairyTextboxSelection + 1;
      if (2 < fairyTextboxSelection) {
        fairyTextboxSelection = 0;
      }
    }
    if (fairyMenuTimer < 8) {
      return;
    }
    if ((currentButtonOneFrame & X_BUTTON) == 0) {
      return;
    }
    PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
    if (fairyTextboxSelection == 0) {
      if (DAT_80078d14 != 0) {
        fairyMenuTimer = 0;
        fairyTextboxSaveGameMenus = 2;
        return;
      }
      fairyMenuTimer = 0;
      fairyTextboxSaveGameMenus = 1;
      return;
    }
    if (fairyTextboxSelection == 1) {
      pointerToDragon = (Moby *)(ptr_startOfCurrentLevelMobys + **DAT_80078d74 * 0x58);
      if (*(int *)((int)pointerToDragon->ptr_mobyData + 0x24) != -1) {
        return;
      }
      if (*(int *)((int)pointerToDragon->ptr_mobyData + 0x18) == -1) {
        return;
      }
      ExitFairyOrBalloonist();
      pointerToDragon->state = '\x02';
      pointerToDragon->ptr_colision = (int *)0x0;
      pointerToDragon->subType = -1;
      DragonStart(pointerToDragon);
      globalDragonCount = globalDragonCount + -1;
      (&amountOfDragonsCollectedInLevels)[levelID_Indexer] =
           (&amountOfDragonsCollectedInLevels)[levelID_Indexer] + -1;
      return;
    }
    goto LAB_80032494;
  case 1:
    if ((0x3b < fairyMenuTimer) && ((currentButtonOneFrame & X_BUTTON) != 0)) {
      PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
      fairyMenuTimer = 0;
      fairyTextboxSaveGameMenus = 0;
      fairyTextboxSelection = 2;
    }
    break;
  case 2:
    if (fairyTextboxSelection == 0) {
      MemCardStart();
      MemCardAccept(DAT_80078d18);
      fairyTextboxSelection = 1;
      return;
    }
    if (fairyTextboxSelection == 1) {
      lVar4 = MemCardSync(1,(ulong *)&DAT_80078d24,(ulong *)&DAT_80078d28);
      if (lVar4 == 0) {
        return;
      }
      if ((DAT_80078d28 == 0) || (DAT_80078d28 == 3)) {
        MemCardReadFile(DAT_80078d18,"BASCUS-94228SPYRO",
                        (long *)(maybe_ptr_levelTextureRelated + -0x600),0,0x80);
        fairyTextboxSelection = 2;
        return;
      }
      iVar5 = DAT_80078d28;
      if (DAT_80078d28 == 4) {
LAB_80032174:
        iVar2 = iVar5;
      }
      else {
        fairyTextboxSaveGameMenus = 3;
        iVar2 = fairyTextboxSaveGameMenus;
      }
    }
    else if (fairyTextboxSelection == 2) {
      lVar4 = MemCardSync(1,(ulong *)&DAT_80078d24,(ulong *)&DAT_80078d28);
      if (lVar4 == 0) {
        return;
      }
      iVar5 = 5;
      if (DAT_80078d28 == 0) {
        iVar2 = 4;
        if (DAT_80078d20 == *(ushort *)(maybe_ptr_levelTextureRelated + -0x582)) {
          FUN_80059864(maybe_ptr_levelTextureRelated + -0x600);
          MemCardWriteFile(DAT_80078d18,"BASCUS-94228SPYRO",
                           (long *)(maybe_ptr_levelTextureRelated + -0x600),
                           DAT_80078d1c * 0x600 + 0x200,0x600);
          fairyTextboxSelection = 3;
          return;
        }
      }
      else {
        iVar2 = 4;
        if (DAT_80078d28 != 5) goto LAB_80032174;
      }
    }
    else if (fairyTextboxSelection == 3) {
      lVar4 = MemCardSync(1,(ulong *)&DAT_80078d24,(ulong *)&DAT_80078d28);
      if (lVar4 == 0) {
        return;
      }
      iVar2 = 5;
      if (DAT_80078d28 == 0) {
        MemCardReadFile(DAT_80078d18,"BASCUS-94228SPYRO",
                        (long *)(maybe_ptr_levelTextureRelated + -0x600),
                        DAT_80078d1c * 0x600 + 0x200,0x600);
        fairyTextboxSelection = 4;
        return;
      }
    }
    else {
      lVar4 = MemCardSync(1,(ulong *)&DAT_80078d24,(ulong *)&DAT_80078d28);
      if (lVar4 == 0) {
        return;
      }
      iVar2 = 5;
      if (DAT_80078d28 == 0) {
        iVar5 = FUN_8005956c(maybe_ptr_levelTextureRelated + -0x600);
        iVar2 = 5;
        if (iVar5 == *(int *)(maybe_ptr_levelTextureRelated + -0x74)) {
          iVar2 = 7;
        }
      }
    }
    fairyTextboxSaveGameMenus = iVar2;
    fairyMenuTimer = 0;
    break;
  case 3:
  case 4:
  case 5:
    if (fairyMenuTimer < 0x3c) {
      return;
    }
    if ((currentButtonOneFrame & X_BUTTON) == 0) {
      return;
    }
    PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
    fairyTextboxSaveGameMenus = 6;
LAB_80032440:
    fairyMenuTimer = 0;
    fairyTextboxSelection = 0;
    break;
  case 6:
    if ((currentButtonOneFrame & (UP_BUTTON|DOWN_BUTTON)) != 0) {
      PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      fairyTextboxSelection = 1 - fairyTextboxSelection;
    }
    if (fairyMenuTimer < 0x20) {
      return;
    }
    if ((currentButtonOneFrame & X_BUTTON) == 0) {
      return;
    }
    MemCardStop();
    if (fairyTextboxSelection == 0) {
      PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
      fairyTextboxSaveGameMenus = 2;
      goto LAB_80032440;
    }
    goto LAB_80032494;
  case 7:
    if (fairyMenuTimer < 8) {
      return;
    }
    if ((currentButtonOneFrame & X_BUTTON) == 0) {
      return;
    }
    MemCardStop();
LAB_80032494:
    ExitFairyOrBalloonist();
    PlaySoundEffect((uint)localSFXArray[0x2e],(int *)0x0,0x10,0);
  }
                    // WARNING: Read-only address (ram,0x80078d28) is written
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void StartBalloonist(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint local_40;
  uint local_3c;
  int local_38;
  undefined2 local_30;
  short local_2e;
  short local_2c;
  uint local_28;
  uint local_24;
  int local_20;
  
  DAT_800777ec = DAT_800777ec + gameSpeedMultiplyer;
  SetTextWobbleTimerSpeed(3);
  if (balloonistState == 4) {
    if (levelLoadState < 10) {
      LevelTransitionRelated(1);
    }
    if (DAT_800777ec < 0x100) {
      iVar1 = SinScaled(((DAT_800777ec << 0xb) >> 8) + -0x400);
      iVar1 = iVar1 + 0x1000;
      if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
        iVar2 = Maybe_AngleDiff();
        iVar2 = DAT_80077820 + (iVar2 * iVar1 >> 0xd);
      }
      else {
        iVar2 = Maybe_AngleDiff();
        iVar2 = DAT_80077820 - (iVar2 * iVar1 >> 0xd);
      }
      iVar5 = DAT_80077824 + ((DAT_8007783c - DAT_80077824) * iVar1 >> 0xd);
      iVar3 = CosScaled(iVar2);
      cameraPosition.x = *(int *)(DAT_80077850 + 0xc) + (iVar3 * iVar5 >> 0xc);
      iVar2 = SinScaled(iVar2);
      cameraPosition.y = *(int *)(DAT_80077850 + 0x10) + (iVar2 * iVar5 >> 0xc);
      cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar1 >> 0xd);
      Vec3Subtract((int *)&local_40,(int *)(DAT_80077850 + 0xc),&cameraPosition.x);
      local_38 = local_38 + 0x200;
      if (DAT_800777ec < 0x40) {
        local_30 = 0;
        uVar4 = Vec3CalculateLengthE((int *)&local_40,flag2D);
        iVar1 = ATan2Scaled(uVar4,-local_38,1);
        local_2e = (short)iVar1;
        iVar1 = ATan2Scaled(local_40,local_3c,1);
        local_2c = (short)iVar1;
        iVar1 = FUN_8001796c((int)local_2e,(int)cameraAngle.pitch);
        cameraAngle.pitch = cameraAngle.pitch + (short)(iVar1 * DAT_800777ec >> 6) & 0xfff;
        iVar1 = FUN_8001796c((int)local_2c,(int)cameraAngle.yaw);
        cameraAngle.yaw = cameraAngle.yaw + (short)(iVar1 * DAT_800777ec >> 6) & 0xfff;
      }
      else {
        uVar4 = Vec3CalculateLengthE((int *)&local_40,flag2D);
        iVar1 = ATan2Scaled(uVar4,-local_38,1);
        cameraAngle.pitch = (short)iVar1;
        iVar1 = ATan2Scaled(local_40,local_3c,1);
        cameraAngle.yaw = (short)iVar1;
      }
    }
    else if (levelLoadState == 10) {
      DAT_80078a40 = DAT_80077780;
      DAT_80078a44 = DAT_80077784;
      DAT_80078a48 = DAT_80077788;
      DAT_80078a4c = DAT_8007778c;
      _clearColor = DAT_80077790;
      balloonistState = 5;
      DAT_800777ec = 0;
      Vec3Copy((int *)(DAT_80077850 + 0xc),(int *)(balloonistDropoffLocation * 0x10 + -0x7ff915b4));
      *(char *)(DAT_80077850 + 0x46) =
           (char)*(undefined4 *)(&DAT_8006ea58 + balloonistDropoffLocation * 0x10);
      Vec3Copy((int *)&spyro,(int *)(DAT_80077850 + 0xc));
      spyro.position.z = spyro.position.z + 0x2d4;
      spyro.RelativeSparxAngle.roll = *(char *)(DAT_80077850 + 0x46) + -0x80;
      DAT_80077838 = (uint)*(byte *)(DAT_80077850 + 0x46) * 0x10 + 0x390 & 0xfff;
      iVar1 = CosScaled();
      cameraPosition.x = *(int *)(DAT_80077850 + 0xc) + (iVar1 * DAT_8007783c >> 0xc);
      iVar1 = SinScaled(DAT_80077838);
      cameraPosition.y = *(int *)(DAT_80077850 + 0x10) + (iVar1 * DAT_8007783c >> 0xc);
      cameraPosition.z = *(int *)(DAT_80077850 + 0x14) + 0x200;
      Vec3Subtract((int *)&local_28,(int *)(DAT_80077850 + 0xc),&cameraPosition.x);
      local_20 = local_20 + 0x200;
      uVar4 = Vec3CalculateLengthE((int *)&local_28,flag2D);
      iVar1 = ATan2Scaled(uVar4,-local_20,1);
      cameraAngle.pitch = (short)iVar1;
      iVar1 = ATan2Scaled(local_28,local_24,1);
      cameraAngle.yaw = (short)iVar1;
      DAT_80077840 = cameraPosition.z;
      DAT_80077828 = cameraPosition.z + -0xfce;
      DAT_80077820 = (uint)*(byte *)(DAT_80077850 + 0x46) * 0x10 + 0xba0 & 0xfff;
    }
  }
  else {
    (*ptr_OverlayBalloonistSubstates)();
  }
  FUN_8003cb24(spyro._88_4_);
  SpyroHeadAnimations();
  SpyroTailAnimations();
  return;
}



void FUN_80032a20(void)

{
  long lVar1;
  
  lVar1 = MemCardSync(1,(ulong *)&DAT_80078db8,&DAT_80078dbc);
  if (lVar1 != 0) {
    if (lVar1 == 1) {
      (&DAT_80078da8)[DAT_80078da4] = DAT_80078dbc;
      DAT_80078da4 = 1 - DAT_80078da4;
    }
    MemCardExist(DAT_80078da4 << 4);
  }
  return;
}



void FUN_80032ab0(void)

{
  if ((currentButtonOneFrame & TRIANGLE_BUTTON) != 0) {
    titleScreenState = 1;
    titleScreenMenu = 0;
    DAT_80078d7c = 0;
    MemCardSync(0,(ulong *)&DAT_80078db8,&DAT_80078dbc);
  }
  return;
}



void StartAdventureContinues(void)

{
  int iVar1;
  uint x;
  uint local_28;
  uint local_24;
  uint local_20;
  RECT local_18;
  
  if (titleScreenState != 3) goto LAB_80033170;
  if (DAT_80078d7c != 0) {
    if (DAT_80078d7c == 1) {
      if (DAT_80078d94 == 0) {
        if (levelLoadState < 3) {
          do {
            FUN_80014564();
            FUN_8002bbe0();
          } while (levelLoadState < 3);
        }
      }
      else {
        while (levelLoadState < 6) {
          LevelTransitionRelated(1);
          FUN_8002bbe0();
        }
      }
      DAT_80078d7c = 2;
      DAT_80078d80 = 0;
    }
    else if (DAT_80078d7c == 2) {
      Vec3Copy((int *)&local_28,(int *)&spyro);
      if (DAT_80078d80 < 0x50) {
        iVar1 = CosScaled((DAT_80078d80 * -0x400) / 0x50);
        spyro.position.x = iVar1 + 0x1780;
        iVar1 = SinScaled((DAT_80078d80 * -0x400) / 0x50);
        spyro.position.y = (iVar1 >> 1) + 0xe80;
        iVar1 = SinScaled((DAT_80078d80 * -0x400) / 0x50);
        spyro.position.z = (iVar1 >> 1) + 0x2980;
      }
      else if (DAT_80078d80 < 0x78) {
        spyro.position.x = 0x1400;
        spyro.position.y = 0xc00;
        spyro.position.z = 0x20c0;
      }
      else if (DAT_80078d80 < 200) {
        spyro.position.x = spyro.position.x + 0x4c;
      }
      else if (DAT_80078d80 < 0xf0) {
        spyro.position.x = 0x2880;
        spyro.position.y = 0x680;
        spyro.position.z = 0x2180;
      }
      else if (DAT_80078d80 < 0x140) {
        iVar1 = CosScaled(0xc00 - ((DAT_80078d80 + -0xf0) * 0x400) / 0x50);
        spyro.position.x = iVar1 + 0x2880;
        iVar1 = SinScaled(0xc00 - ((DAT_80078d80 + -0xf0) * 0x400) / 0x50);
        spyro.position.y = (iVar1 >> 1) + 0xe80;
        iVar1 = SinScaled(((DAT_80078d80 + -0xf0) * 0x400) / 0x50 + 0xc00);
        spyro.position.z = (iVar1 >> 1) + 0x2980;
      }
      else {
        spyro.position.x = 0x2000;
        spyro.position.y = 0x1000;
        spyro.position.z = 0x4000;
      }
      Vec3Subtract((int *)&local_28,(int *)&spyro,(int *)&local_28);
      x = Vec3CalculateLengthE((int *)&local_28,flag2D);
      iVar1 = ATan2Scaled(x,local_20,0);
      spyro.RelativeSparxAngle.pitch = (char)iVar1;
      iVar1 = ATan2Scaled(local_28,local_24,0);
      spyro.RelativeSparxAngle.roll = (char)iVar1;
      FUN_8003cb24(3);
      SpyroHeadAnimations();
      SpyroTailAnimations();
      if (DAT_80078d94 == 0) {
        if (levelLoadState < 7) {
          FUN_80014564();
        }
        if ((0x17f < DAT_80078d80) && (levelLoadState == 7)) {
          local_18.w = 0x200;
          local_18.x = 0;
          local_18.y = 0;
          local_18.h = 0x1e0;
          ClearImage(&local_18,'\0','\0','\0');
          DrawSync(0);
          DAT_800785fc = -0x7fe00000 - DAT_800755a4;
          FUN_8005b6f8(1);
          while (levelLoadState < 10) {
            FUN_80014564();
            FUN_8002bbe0();
          }
          FUN_8002d338();
          DAT_8007579c = 1;
          return;
        }
      }
      else {
        if (levelLoadState < 0xd) {
          LevelTransitionRelated(1);
        }
        if ((0x17f < DAT_80078d80) && (levelLoadState == 0xd)) {
          if (DAT_80078d94 == 2) {
            isDemoMode = 1;
            DAT_80075884 = 0;
          }
          Unk_UpdateSpyroAfterEvents(1);
          LevelTransitionRelated(1);
          return;
        }
      }
    }
    goto LAB_80033170;
  }
  PauseMusicAndSFX(0);
  FUN_80056ed4();
  DAT_80078d7c = 1;
  if (DAT_80078d94 == 0) {
    whichCutsceneToPlay = 1;
    levelLoadState = 0;
    ptr_EndOfOvl = &OverlayStart;
    DAT_800785dc = &OverlayStart;
  }
  else {
    if (DAT_80078d94 != 1) {
      if (DAT_80078d94 != 2) goto LAB_80032c30;
      FUN_8001277c();
      levelIDPortalExit = *(LevelIDS *)(&DAT_8006ee7c + DAT_800757b8 * 4);
    }
    portalToExitFromInHW = 0;
    levelLoadState = 1;
    canFlyIn = 0;
    isInFlightLevel = 0;
    levelID = levelIDPortalExit;
  }
LAB_80032c30:
  cameraAngle.yaw = 0x400;
  cameraAngle.roll = 0;
  cameraAngle.pitch = 0;
  cameraPosition.x = 0x2000;
  cameraPosition.y = 0;
  cameraPosition.z = 0x2000;
  Unk_UpdateSpyroAfterEvents(1);
  spyro.position.x = 0x2780;
  spyro.position.y = 0xf00;
  spyro.position.z = 0x29a0;
  spyro.currentAnim = '\x10';
  spyro.nextAnim = '\x10';
  spyro.RelativeSparxAngle.yaw = '\0';
  spyro.RelativeSparxAngle.pitch = '\0';
  spyro.RelativeSparxAngle.roll = '\0';
  spyro.nextKeyframe = '\x01';
LAB_80033170:
  SetTextWobbleTimerSpeed(3);
  DAT_80078d80 = DAT_80078d80 + 1;
  return;
}



void PlayIntroCutscenes(void)

{
  int *piVar1;
  int iVar2;
  RECT local_10;
  
  if ((1 < whichCutsceneToPlay) && (*ptr_titleScreenAnimationTimer == 0)) {
    PauseMusicAndSFX(0);
    FUN_80056ed4();
    local_10.w = 0x200;
    local_10.x = 0;
    local_10.y = 0;
    local_10.h = 0x1e0;
    ClearImage(&local_10,'\0','\0','\0');
    DrawSync(0);
    levelLoadState = 0;
    ptr_EndOfOvl = &OverlayStart;
    DAT_800785dc = &OverlayStart;
    if (whichCutsceneToPlay == 3) {
      DAT_800785fc = -0x7fe00000 - DAT_800755a4;
      FUN_8005b6f8(1);
    }
    while (levelLoadState < 10) {
      FUN_80014564();
      FUN_8002bbe0();
    }
    FUN_8002d338();
  }
  piVar1 = ptr_titleScreenAnimationTimer + 2;
  iVar2 = *ptr_titleScreenAnimationTimer + gameSpeedMultiplyer;
  *ptr_titleScreenAnimationTimer = iVar2;
  if (iVar2 < *piVar1 * 2) {
    if ((iVar2 < 0x10) || (iVar2 = *piVar1 * 2 - iVar2, iVar2 < 0x10)) {
      fadeInTimer = 0x10 - iVar2;
    }
    else {
      fadeInTimer = 0;
    }
    if (0xf < fadeInTimer) {
      fadeInTimer = 0xf;
    }
    if ((whichCutsceneToPlay == 1) && ((currentButton & (X_BUTTON|START_BUTTON)) != 0)) {
      iVar2 = *ptr_titleScreenAnimationTimer;
      if ((0xf0 < iVar2) && (iVar2 < ptr_titleScreenAnimationTimer[2] * 2 + -0x20)) {
        ptr_titleScreenAnimationTimer[2] = (iVar2 >> 1) + 0x10;
      }
    }
    TitleCameraRelated(*ptr_titleScreenAnimationTimer);
  }
  else {
    StartAdventureBegins();
  }
  return;
}



void StartEndCredits(void)

{
  SetTextWobbleTimerSpeed(3);
  if (DAT_80075704 == 99) {
    levelLoadState = 1;
    if (DAT_80075818 == 0xffffffff) {
      levelID = GNASTYS_WORLD_ID;
      if (globalGemCount == 14000) {
        levelID = ARTISANS_ID;
      }
    }
    else {
      levelID = DAT_80075818;
      DAT_80075818 = 0xffffffff;
    }
    portalToExitFromInHW = 0;
    canFlyIn = 0;
    DAT_800756f8 = 0;
    DAT_80075704 = 100;
  }
  else if (DAT_80075704 == 100) {
    DAT_800756f8 = DAT_800756f8 + gameSpeedMultiplyer;
    LevelTransitionRelated(1);
  }
  return;
}



undefined4 FUN_800334d4(void)

{
  undefined4 uVar1;
  RECT local_18 [2];
  
  ControlDemoModeSpyro();
  uVar1 = 0;
  if (isDemoMode != 2) {
    if (DAT_80075884 == 0) {
      if ((*(int *)(&DAT_8006ee8c + DAT_800757b8 * 4) + -8 <= levelTimerWhenActive) ||
         (((0xf < levelTimerWhenActive && (DAT_800786a0 == '\0')) &&
          ((DAT_800786a2 != -1 || (DAT_800786a3 != -1)))))) {
        DAT_80075884 = 1;
      }
    }
    else {
      fadeInTimer = (DAT_80075884 + 1) * 2;
      DAT_80075884 = DAT_80075884 + 1;
    }
    uVar1 = 0;
    if (DAT_80075884 == 0x10) {
      PauseMusicAndSFX(0);
      FUN_80056ed4();
      local_18[0].w = 0x200;
      local_18[0].x = 0;
      local_18[0].y = 0;
      local_18[0].h = 0x1e0;
      ClearImage(local_18,'\0','\0','\0');
      DrawSync(0);
      ptr_EndOfOvl = &DAT_8007dde8;
      DAT_800785dc = &DAT_8007dde8;
      DAT_80075904 = 0;
      maybe_vibrationTimer = 0;
      vibrationFlag = 0;
      DAT_8007584c = 0;
      isDemoMode = 0;
      levelLoadState = 0;
      whichCutsceneToPlay = 0;
      isInFlightLevel = 0;
      DAT_80075784 = 0;
      LoadCdData(WADStartSector,&OverlayStart,DAT_8007a6e4,DAT_8007a6e0,600);
      while (levelLoadState < 10) {
        FUN_80014564();
        FUN_8002bbe0();
      }
      gameState = GAMESTATE_CUTSCENE;
      fadeInTimer = 0xf;
      FUN_8002d170();
      if (levelTimerWhenActive < *(int *)(&DAT_8006ee8c + DAT_800757b8 * 4)) {
        *ptr_titleScreenAnimationTimer = 0x490;
      }
      else {
        *ptr_titleScreenAnimationTimer = 0x2d0;
        sfxMetadataArray = (MaybeSoundEffectMetadata **)&DAT_800778f0;
        DAT_800778f0 = 0x262d0;
        DAT_800778f4 = 0xffffffff;
        DAT_800778f8 = 0x50;
        DAT_800778fa = (undefined2)DAT_8006ee6c;
        DAT_800778fc = 0;
        DAT_800778fe = 0;
        collectableRelated = 0;
        DAT_800761dc = 1;
        USHORT_800761e8 = 0x3fff;
        USHORT_800761ea = 0x3fff;
        PlaySoundEffect(0,(int *)0x0,0x10,&DAT_80077084);
      }
      titleScreenMenu = 1;
      FUN_80016698(WADStartSector,DAT_800785e8 + -0x40000,0x40000,DAT_8007a6d8,600);
      DAT_8007579c = 1;
      DAT_800757b8 = DAT_800757b8 + 1 & 3;
      uVar1 = 1;
    }
  }
  return uVar1;
}



void GameStateCheck(void)

{
  int iVar1;
  
  DAT_8007579c = 0;
  Maybe_SoundEffectProcessing();
  FUN_8002bbe0();
  if (gameState == GAMESTATE_GAMEPLAY) {
    levelTimerWhenActive = levelTimerWhenActive + 1;
    if ((isDemoMode != 0) && (iVar1 = FUN_800334d4(), iVar1 != 0)) {
      return;
    }
    FUN_8002a6fc(gameSpeedMultiplyer);
    (*funcptr_OverlayUpdateMobys)();
    if (gameState + ~GAMESTATE_EXITING_LEVEL < 2) {
      return;
    }
    if (gameState == GAMESTATE_FLIGHT_LEVEL_MENU) {
      return;
    }
    if (gameState == GAMESTATE_LOADING) {
      return;
    }
    SpyroUpdateAnimation();
    if (gameState + ~GAMESTATE_INVENTORY < 2) {
      return;
    }
    if (gameState == GAMESTATE_FLIGHT_LEVEL_MENU) {
      return;
    }
    if (gameState == GAMESTATE_LOADING) {
      return;
    }
    (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
    if (isInFlightLevel == 0) {
      Maybe_HudUpdates();
    }
    FUN_80058bd8();
    CameraFollowSpyro();
    if ((fadeInTimer != 0) && (fadeInTimer = fadeInTimer - gameSpeedMultiplyer, fadeInTimer < 0)) {
      fadeInTimer = 0;
    }
    if ((((gameState == GAMESTATE_GAMEPLAY) && (isInDragonState == 0)) && (-1 < spyro.health)) &&
       (maybe_cameraRelated != &DAT_8000000e)) {
      if ((unk_movementRelated < 2) || ((currentButtonOneFrame & START_BUTTON) != 0)) {
        PreparePausedGamestate(1);
      }
      else if ((currentButtonOneFrame & SELECT_BUTTON) != 0) {
        PrepareInventoryGamestate(1);
      }
    }
  }
  else if (gameState == GAMESTATE_LOADING) {
    LevelTransitionCalls();
  }
  else if (gameState == GAMESTATE_PAUSED) {
    PauseMenuUpdates();
  }
  else if (gameState == GAMESTATE_INVENTORY) {
    InventoryMenuUpdates();
  }
  else if ((gameState == GAMESTATE_DEATH) || (gameState == GAMESTATE_GAME_OVER)) {
    Maybe_DeathTransition();
  }
  else if (gameState == GAMESTATE_BETA_DRAGON_TEXTBOX_MAYBE) {
    FuckingNothingBecauseItUsedToBeThePrototypeDragonTextBoxGameState();
  }
  else if (gameState == GAMESTATE_FLIGHT_LEVEL_MENU) {
    (*ptr_OverlayFlightLevelCompleteFunc)();
  }
  else if (gameState == GAMESTATE_DRAGON_STATE) {
    DragonMainLoop();
  }
  else if (gameState == GAMESTATE_FLY_IN) {
    StartFlyIn();
  }
  else if (gameState == GAMESTATE_EXITING_LEVEL) {
    CallReturnHome();
  }
  else if (gameState == GAMESTATE_DRAGON_FAIRY_TEXTBOX) {
    StartFairyMenu();
  }
  else if (gameState == GAMESTATE_BALLOONIST) {
    StartBalloonist();
  }
  else if (gameState == GAMESTATE_TITLE_SCREEN) {
    if (titleScreenState == 3) {
      StartAdventureContinues();
    }
    else {
      MainTitleScreenFunc();
    }
  }
  else if (gameState == GAMESTATE_CUTSCENE) {
    PlayIntroCutscenes();
  }
  else if (gameState == GAMESTATE_CREDITS) {
    if (DAT_80075704 < 99) {
      CallPlayCredits();
    }
    else {
      StartEndCredits();
    }
  }
  FUN_80056ed4();
  return;
}



void CreateCameraMatrix(void)

{
  int iVar1;
  MATRIX local_50;
  MATRIX local_30;
  
  memset((uchar *)&local_50,'\0',0x20);
  SetTransMatrix(&local_50);
  local_50.m[0][0] = 0x1000;
  local_50.m[1][1] = CosScaled((int)cameraAngle.pitch);
  local_50.m[2][1] = SinScaled((int)cameraAngle.pitch);
  local_50.m[1][2] = SinScaled((int)cameraAngle.pitch);
  local_50.m[1][2] = -local_50.m[1][2];
  local_50.m[2][2] = CosScaled((int)cameraAngle.pitch);
  memset((uchar *)&local_30,'\0',0x20);
  local_30.m[0][0] = CosScaled((int)cameraAngle.yaw);
  local_30.m[2][0] = SinScaled((int)cameraAngle.yaw);
  local_30.m[2][0] = -local_30.m[2][0];
  local_30.m[1][1] = 0x1000;
  local_30.m[0][2] = SinScaled((int)cameraAngle.yaw);
  local_30.m[2][2] = CosScaled((int)cameraAngle.yaw);
  MulMatrix(&local_50,&local_30);
  memset((uchar *)&local_30,'\0',0x20);
  local_30.m[0][0] = CosScaled((int)cameraAngle.roll);
  local_30.m[1][0] = SinScaled((int)cameraAngle.roll);
  local_30.m[1][0] = -local_30.m[1][0];
  local_30.m[0][1] = SinScaled((int)cameraAngle.roll);
  local_30.m[1][1] = CosScaled((int)cameraAngle.roll);
  local_30.m[2][2] = 0x1000;
  MulMatrix(&local_50,&local_30);
  ArrayCopy(&gCamera6.R12R11,&local_50,0x14);
  iVar1 = local_50.m[1][0] * 0x140;
  if (iVar1 < 0) {
    iVar1 = iVar1 + 0x1ff;
  }
  local_50.m[1][0] = (short)(iVar1 >> 9);
  iVar1 = local_50.m[1][1] * 0x140;
  if (iVar1 < 0) {
    iVar1 = iVar1 + 0x1ff;
  }
  local_50.m[1][1] = (short)(iVar1 >> 9);
  iVar1 = local_50.m[1][2] * 0x140;
  if (iVar1 < 0) {
    iVar1 = iVar1 + 0x1ff;
  }
  local_50.m[1][2] = (short)(iVar1 >> 9);
  ArrayCopy(&gCamera1.R12R11,&local_50,0x14);
  return;
}



undefined4 FUN_80033e40(int *param_1,int *param_2)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int aiStack_50 [4];
  int aiStack_40 [4];
  int aiStack_30 [6];
  
  Vec3Subtract(aiStack_50,param_2,param_1);
  uVar1 = Vec3CalculateLengthE(aiStack_50,flag3D);
  Vec3ScaleDownByFraction(aiStack_50,uVar1,0x400);
  Vec3Copy(aiStack_40,param_1);
  iVar3 = 0;
  if (0 < (int)uVar1 >> 10) {
    do {
      Vec3Add(aiStack_30,aiStack_40,aiStack_50);
      iVar2 = FindCollsionPolygonAltro(aiStack_40,aiStack_30);
      if (iVar2 != 0) {
        return 0;
      }
      Vec3Copy(aiStack_40,aiStack_30);
      iVar3 = iVar3 + 1;
    } while (iVar3 < (int)uVar1 >> 10);
  }
  return 1;
}



undefined4 CameraRotation(int *param_1)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  undefined4 uVar4;
  uint local_18;
  int local_14;
  uint local_10;
  
  Vec3Subtract((int *)&local_18,param_1,DAT_80076ea0);
  maybeSpyroCameraOrbitRadius2 = Vec3CalculateLengthE((int *)&local_18,flag3D);
  maybeSpyroCameraOrbitRadius2 = Maybe_ImproveEstimate(&local_18,maybeSpyroCameraOrbitRadius2,1);
  uVar1 = Vec3CalculateLengthE((int *)&local_18,flag2D);
  uVar1 = Maybe_ImproveEstimate(&local_18,uVar1,0);
  maybeSpyroCameraOrbitPitch2 = ATan2Scaled(uVar1,local_10,1);
  uVar2 = ATan2Scaled(local_18,-local_14,1);
  uVar1 = uVar2 - maybeSpyroCameraOrbitYaw2 & 0xfff;
  if (0x800 < uVar1) {
    uVar1 = uVar1 - 0x1000;
  }
  uVar3 = uVar2 - (maybeSpyroCameraOrbitYaw2 + -0x800) & 0xfff;
  if (0x800 < uVar3) {
    uVar3 = uVar3 - 0x1000;
  }
  if ((int)uVar3 < 0) {
    uVar3 = -uVar3;
  }
  if ((int)uVar1 < 0) {
    uVar1 = -uVar1;
  }
  if (((int)uVar1 <= (int)uVar3) || ((maybe_cameraRelated != &DAT_80000009 && (DAT_80076eb8 == 0))))
  {
    if ((int)local_18 < 0) {
      local_18 = -local_18;
    }
    if ((int)local_18 < 0x81) {
      if (local_14 < 0) {
        local_14 = -local_14;
      }
      if (local_14 < 0x81) {
        maybeSpyroCameraOrbitYaw2 = maybeSpyroCameraOrbitYaw;
        uVar4 = 0;
        goto LAB_80034100;
      }
    }
    uVar4 = 0;
    maybeSpyroCameraOrbitYaw2 = uVar2;
    goto LAB_80034100;
  }
  if ((int)local_18 < 0) {
    local_18 = -local_18;
  }
  if ((int)local_18 < 0x81) {
    if (local_14 < 0) {
      local_14 = -local_14;
    }
    maybeSpyroCameraOrbitYaw2 = maybeSpyroCameraOrbitYaw;
    if (0x80 < local_14) goto LAB_80034060;
  }
  else {
LAB_80034060:
    maybeSpyroCameraOrbitYaw2 = uVar2 + 0x800 & 0xfff;
  }
  uVar4 = 1;
  maybeSpyroCameraOrbitPitch2 = 0x800 - maybeSpyroCameraOrbitPitch2 & 0xfff;
LAB_80034100:
  DAT_80076e70 = (int)cameraAngle.pitch - maybeSpyroCameraOrbitPitch2 & 0xfff;
  DAT_80076e6c = (int)cameraAngle.roll;
  if (0x800 < DAT_80076e70) {
    DAT_80076e70 = DAT_80076e70 - 0x1000;
  }
  DAT_80076e74 = (0x800 - maybeSpyroCameraOrbitYaw2) - (int)cameraAngle.yaw & 0xfff;
  if (0x800 < DAT_80076e74) {
    DAT_80076e74 = DAT_80076e74 - 0x1000;
  }
  return uVar4;
}



void FUN_80034198(void)

{
  DAT_80076e30 = *flyInAnimation - unk_camera_related_angle & 0xfff;
  DAT_80076e34 = flyInAnimation[1];
  DAT_80076e38 = flyInAnimation[2];
  DAT_80076e3c = flyInAnimation[3];
  DAT_80076e40 = flyInAnimation[4];
  DAT_80076e44 = flyInAnimation[5];
  return;
}



void FUN_80034204(int *param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = CosScaled(maybeSpyroCameraOrbitPitch);
  iVar2 = CosScaled(maybeSpyroCameraOrbitYaw);
  *param_1 = (maybeSpyroCameraOrbitRadius * iVar1 >> 0xc) * iVar2 >> 0xc;
  iVar1 = CosScaled(maybeSpyroCameraOrbitPitch);
  iVar2 = SinScaled(maybeSpyroCameraOrbitYaw);
  param_1[1] = -(maybeSpyroCameraOrbitRadius * iVar1 >> 0xc) * iVar2 >> 0xc;
  iVar1 = SinScaled(maybeSpyroCameraOrbitPitch);
  param_1[2] = maybeSpyroCameraOrbitRadius * iVar1 >> 0xc;
  return;
}



void FUN_800342f8(void)

{
  cameraAngle.pitch = (short)maybeSpyroCameraOrbitPitch2 + (short)DAT_80076e58 & 0xfff;
  cameraAngle.roll = (short)DAT_80076e54;
  cameraAngle.yaw = (0x800 - (short)DAT_80076e5c) - (short)maybeSpyroCameraOrbitYaw2 & 0xfff;
  return;
}



void ChangeFlyInCamera(void)

{
  FUN_80034198();
  DAT_80076e78 = 0;
  DAT_80076e7c = 0;
  DAT_80076e80 = 0;
  DAT_80076e84 = 0;
  DAT_80076e88 = 0;
  DAT_80076e8c = 0;
  DAT_80076e94 = 0;
  DAT_80076e98 = 0;
  maybeSpyroCameraOrbitYaw = DAT_80076e30;
  maybeSpyroCameraOrbitPitch = DAT_80076e34;
  maybeSpyroCameraOrbitRadius = DAT_80076e38;
  DAT_80076e54 = DAT_80076e3c;
  DAT_80076e58 = DAT_80076e40;
  DAT_80076e5c = DAT_80076e44;
  FUN_80034204(&cameraFollowPosition);
  Vec3Add(&cameraFollowPosition,&cameraFollowPosition,DAT_80076ea0);
  Vec3Copy(&cameraPosition.x,&cameraFollowPosition.x);
  DAT_80076eb8 = CameraRotation(&cameraPosition);
  FUN_800342f8();
  DAT_800756dc = 0;
  DAT_8007590c = 0;
  return;
}



void CameraFollowPosition(void)

{
  bool bVar1;
  uint uVar2;
  uint uVar3;
  int unaff_s1;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int local_58;
  int local_54;
  int local_50;
  int local_48;
  int local_44;
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_24;
  
  bVar1 = false;
  Vec3Subtract(&local_48,&cameraFollowPosition.x,(int *)&spyro);
  uVar2 = Vec3CalculateLengthE(&local_48,flag3D);
  Vec3Copy(&local_58,&cameraFollowPosition.x);
  Vec3Subtract(&local_48,&cameraFollowPosition.x,&cameraPosition.x);
  uVar3 = Vec3CalculateLengthE(&local_48,flag3D);
  if ((int)uVar3 < 0) {
    uVar3 = uVar3 + 0xff;
  }
  iVar4 = ((int)uVar3 >> 8) + 1;
  iVar7 = local_40;
  if (1 < iVar4) {
    iVar5 = local_48 / iVar4;
    if (iVar4 == 0) {
      trap(0x1c00);
    }
    if ((iVar4 == -1) && (local_48 == -0x80000000)) {
      trap(0x1800);
    }
    iVar6 = local_44 / iVar4;
    if (iVar4 == 0) {
      trap(0x1c00);
    }
    if ((iVar4 == -1) && (local_44 == -0x80000000)) {
      trap(0x1800);
    }
    iVar7 = local_40 / iVar4;
    if (iVar4 == 0) {
      trap(0x1c00);
    }
    local_48 = iVar5;
    local_44 = iVar6;
    if ((iVar4 == -1) && (local_40 == -0x80000000)) {
      trap(0x1800);
    }
  }
  local_40 = iVar7;
  Vec3Copy(&cameraFollowPosition.x,&cameraPosition.x);
  iVar7 = 0;
  if (0 < iVar4) {
    do {
      Vec3Add(&cameraFollowPosition,&cameraFollowPosition,&local_48);
      unaff_s1 = 0;
      do {
        iVar5 = FUN_8004be4c(&cameraFollowPosition,0x100,0x100);
        if (iVar5 == 0) break;
        Vec3Copy(&cameraFollowPosition.x,&unknownPositionVector.x);
        unaff_s1 = unaff_s1 + 1;
        bVar1 = true;
      } while (unaff_s1 < 6);
      if (unaff_s1 == 6) {
        Vec3Copy(&cameraFollowPosition.x,&local_58);
        iVar7 = iVar4;
      }
      iVar7 = iVar7 + 1;
    } while (iVar7 < iVar4);
  }
  DAT_80076e9c = 0;
  if (unaff_s1 < 6) {
    if (bVar1) {
      Vec3Subtract(&local_58,&cameraFollowPosition.x,&cameraPosition.x);
      iVar7 = local_58;
      if (local_58 < 0) {
        iVar7 = -local_58;
      }
      if (iVar7 < 0x20) {
        local_58 = 0;
      }
      iVar7 = local_54;
      if (local_54 < 0) {
        iVar7 = -local_54;
      }
      if (iVar7 < 0x20) {
        local_54 = 0;
      }
      iVar7 = local_50;
      if (local_50 < 0) {
        iVar7 = -local_50;
      }
      if (iVar7 < 0x20) {
        local_50 = 0;
      }
      Vec3Add(&cameraPosition,&cameraPosition,&local_58);
    }
    else {
      Vec3Copy(&cameraPosition.x,&cameraFollowPosition.x);
      DAT_80076e9c = 1;
    }
  }
  DAT_80076eb8 = CameraRotation(&cameraPosition);
  Vec3Copy(&local_48,(int *)&spyro);
  local_40 = local_40 + -0x134;
  iVar7 = FUN_80033e40(&cameraPosition,&local_48);
  if ((iVar7 == 0) || (iVar7 = FUN_80033e40(&local_48,&cameraPosition), iVar7 == 0)) {
    DAT_800756b8 = 0;
    if ((byte)spyro.unkown3 < 0x7f) {
      spyro.unkown3 = '\x02';
    }
    DAT_8007aa2c = 0;
    DAT_80076e98 = DAT_80076e98 + 1;
    if (0x1e < DAT_80076e98) {
      iVar4 = 0;
      iVar7 = 0;
      do {
        flyInAnimation = &DAT_8006cab4 + iVar7;
        ChangeFlyInCamera();
        iVar5 = FUN_8004be4c(&cameraFollowPosition,0x100,0x100);
        if (((iVar5 == 0) && (iVar5 = FUN_80033e40(&cameraFollowPosition,&local_48), iVar5 != 0)) &&
           (iVar5 = FUN_80033e40(&local_48,&cameraFollowPosition), iVar5 != 0)) {
          return;
        }
        iVar4 = iVar4 + 1;
        iVar7 = iVar7 + 0x18;
      } while (iVar4 < 5);
    }
    uVar3 = 0;
    local_38 = maybeSpyroCameraOrbitYaw2;
    local_34 = maybeSpyroCameraOrbitPitch2;
    local_30 = maybeSpyroCameraOrbitRadius2;
    local_2c = DAT_80076e6c;
    local_28 = DAT_80076e70;
    local_24 = DAT_80076e74;
    uVar2 = 0;
    iVar7 = 0;
    do {
      maybeSpyroCameraOrbitYaw =
           maybeSpyroCameraOrbitYaw2 + *(int *)((int)&DAT_8006c82c + iVar7) & 0xfff;
      maybeSpyroCameraOrbitPitch =
           maybeSpyroCameraOrbitPitch2 + *(int *)((int)&DAT_8006c830 + iVar7) & 0xfff;
      maybeSpyroCameraOrbitRadius =
           maybeSpyroCameraOrbitRadius2 + *(int *)((int)&DAT_8006c834 + iVar7);
      FUN_80034204(&cameraFollowPosition);
      Vec3Add(&cameraFollowPosition,&cameraFollowPosition,DAT_80076ea0);
      iVar4 = FUN_8004be4c(&cameraFollowPosition,0x100,0x100);
      if (iVar4 == 0) {
        uVar3 = uVar3 | 1 << (uVar2 & 0x1f);
        iVar4 = FUN_80033e40(&cameraFollowPosition,&local_48);
        if ((iVar4 != 0) && (iVar4 = FUN_80033e40(&local_48,&cameraFollowPosition), iVar4 != 0))
        goto LAB_80034be4;
      }
      uVar2 = uVar2 + 1;
      iVar7 = iVar7 + 0x18;
    } while ((int)uVar2 < 5);
    uVar2 = 0;
    if (uVar3 != 0) {
      iVar7 = 0;
      do {
        if (((int)uVar3 >> (uVar2 & 0x1f) & 1U) != 0) {
          maybeSpyroCameraOrbitYaw =
               maybeSpyroCameraOrbitYaw2 + *(int *)((int)&DAT_8006c82c + iVar7) * 2 & 0xfff;
          maybeSpyroCameraOrbitPitch =
               maybeSpyroCameraOrbitPitch2 + *(int *)((int)&DAT_8006c830 + iVar7) * 2 & 0xfff;
          maybeSpyroCameraOrbitRadius =
               maybeSpyroCameraOrbitRadius2 + *(int *)((int)&DAT_8006c834 + iVar7) * 2;
          FUN_80034204(&cameraFollowPosition);
          Vec3Add(&cameraFollowPosition,&cameraFollowPosition,DAT_80076ea0);
          iVar4 = FUN_8004be4c(&cameraFollowPosition,0x100,0x100);
          if (((iVar4 == 0) && (iVar4 = FUN_80033e40(&cameraFollowPosition,&local_48), iVar4 != 0))
             && (iVar4 = FUN_80033e40(&local_48,&cameraFollowPosition), iVar4 != 0))
          goto LAB_80034be4;
        }
        uVar2 = uVar2 + 1;
        iVar7 = iVar7 + 0x18;
      } while ((int)uVar2 < 5);
      uVar2 = 0;
      if (uVar3 != 0) {
        iVar7 = 0;
        do {
          if (((int)uVar3 >> (uVar2 & 0x1f) & 1U) != 0) {
            maybeSpyroCameraOrbitYaw =
                 maybeSpyroCameraOrbitYaw2 + *(int *)((int)&DAT_8006c82c + iVar7) * 4 & 0xfff;
            maybeSpyroCameraOrbitPitch =
                 maybeSpyroCameraOrbitPitch2 + *(int *)((int)&DAT_8006c830 + iVar7) * 4 & 0xfff;
            maybeSpyroCameraOrbitRadius =
                 maybeSpyroCameraOrbitRadius2 + *(int *)((int)&DAT_8006c834 + iVar7) * 4;
            FUN_80034204(&cameraFollowPosition);
            Vec3Add(&cameraFollowPosition,&cameraFollowPosition,DAT_80076ea0);
            iVar4 = FUN_8004be4c(&cameraFollowPosition,0x100,0x100);
            if (((iVar4 == 0) && (iVar4 = FUN_80033e40(&cameraFollowPosition,&local_48), iVar4 != 0)
                ) && (iVar4 = FUN_80033e40(&local_48,&cameraFollowPosition), iVar4 != 0)) {
LAB_80034be4:
              DAT_80076e94 = 5;
              CameraRotation(&cameraFollowPosition);
              DAT_80076e30 = maybeSpyroCameraOrbitYaw2;
              DAT_80076e34 = maybeSpyroCameraOrbitPitch2;
              DAT_80076e38 = maybeSpyroCameraOrbitRadius2;
              maybeSpyroCameraOrbitYaw2 = local_38;
              maybeSpyroCameraOrbitPitch2 = local_34;
              maybeSpyroCameraOrbitRadius2 = local_30;
              DAT_80076e6c = local_2c;
              DAT_80076e70 = local_28;
              DAT_80076e74 = local_24;
              return;
            }
          }
          uVar2 = uVar2 + 1;
          iVar7 = iVar7 + 0x18;
        } while ((int)uVar2 < 5);
      }
    }
  }
  else {
    DAT_800756b8 = 1;
    if ((DAT_80076e94 != 0) &&
       (((maybe_cameraRelated != (undefined *)0x0 && (maybe_cameraRelated != &DAT_80000009)) ||
        (DAT_80076eb8 != 0)))) {
      DAT_80076e94 = DAT_80076e94 + -1;
    }
    if (((int)maybe_cameraRelated < 0) ||
       (((WorldToScreen(&local_48,&spyro), local_48 - 0x21U < 0x1bf && (local_44 - 0x19U < 0xbf)) &&
        ((int)uVar2 < 0x2001)))) {
      DAT_80076e98 = 0;
    }
    else {
      DAT_80076e98 = DAT_80076e98 + 1;
    }
  }
  return;
}



void FUN_80034c84(void)

{
  Vec3Copy(&cameraPosition.x,&cameraFollowPosition.x);
  DAT_80076e94 = 0;
  DAT_80076e98 = 0;
  DAT_80076e9c = 1;
  DAT_800756b8 = 1;
  DAT_80076eb8 = CameraRotation(&cameraPosition);
  return;
}



void FUN_80034ce8(int param_1)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  
  iVar3 = (int)*(short *)(&DAT_8006c754 + param_1 * 2);
  if ((maybe_cameraRelated == (undefined *)0x3) && (iVar3 < 0x400)) {
    iVar3 = 0x400;
  }
  uVar2 = DAT_80075924;
  if ((DAT_80075924 == 0) &&
     (((((cameraMode & 0x10) == 0 && (DAT_8007592c == 0)) || (maybe_cameraRelated != &DAT_80000011))
      || (uVar2 = 0, DAT_800756b8 == 0)))) {
    if ((((((cameraMode & 0x10) == 0) || (1 < spyro.state - 5U)) && (DAT_8007592c == 0)) ||
        ((0x3ff < spyro.absoluteMomentum || (DAT_80076e94 != 0)))) ||
       (uVar2 = 0, maybe_UnknownPositionVector.y != 0)) {
      uVar2 = 0;
      if (maybe_cameraRelated != (undefined *)0x6) {
        uVar2 = DAT_80076e30 - maybeSpyroCameraOrbitYaw & 0xfff;
        iVar4 = iVar3 * uVar2;
        if (uVar2 < 0x801) goto LAB_80034e58;
        uVar2 = uVar2 - 0x1000;
      }
      goto LAB_80034e54;
    }
    DAT_80076e78 = 0;
    iVar4 = 0;
  }
  else {
LAB_80034e54:
    iVar4 = iVar3 * uVar2;
  }
LAB_80034e58:
  DAT_80076e78 = DAT_80076e78 +
                 (iVar4 - *(short *)(&DAT_8006c79c + param_1 * 2) * DAT_80076e78 >> 8);
  iVar3 = DAT_80076e78;
  if (DAT_80076e78 < 0) {
    iVar3 = -DAT_80076e78;
  }
  if (((iVar3 < *(short *)(&DAT_8006c7e4 + param_1 * 2)) && (DAT_80076e78 = 0, DAT_80076e9c != 0))
     && ((iVar3 = 0x100, 0 < (int)uVar2 || (iVar3 = -0x100, (int)uVar2 < 0)))) {
    DAT_80076e78 = iVar3;
  }
  if ((spyro.state == 0xf) && (spyro.subState == 0xb)) {
    if (DAT_80076e78 < -0x800) {
      DAT_80076e78 = -0x800;
    }
    if (0x800 < DAT_80076e78) {
      DAT_80076e78 = 0x800;
    }
  }
  if ((((cameraMode & 0x40) != 0) && (DAT_80076e94 == 0)) &&
     ((maybe_cameraRelated == &DAT_80000009 || (maybe_cameraRelated == (undefined *)0x3)))) {
    if (DAT_80076e78 < -0x2000) {
      DAT_80076e78 = -0x2000;
    }
    if (0x2000 < DAT_80076e78) {
      DAT_80076e78 = 0x2000;
    }
  }
  if (((((cameraMode & 0x10) != 0) || (DAT_8007592c != 0)) && (DAT_80075894 == 0)) &&
     (((DAT_800756b8 != 0 && (maybe_UnknownPositionVector.y == 0)) &&
      ((maybe_cameraRelated == (undefined *)0x0 || (maybe_cameraRelated == (undefined *)0x80000000))
      )))) {
    if (DAT_80076e78 < -0x800) {
      DAT_80076e78 = -0x800;
    }
    if (0x800 < DAT_80076e78) {
      DAT_80076e78 = 0x800;
    }
  }
  maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw + (DAT_80076e78 >> 8);
  if ((((cameraMode & 0x10) == 0) && (DAT_8007592c == 0)) || (maybe_cameraRelated != &DAT_80000011))
  {
    if ((((cameraMode & 0x10) != 0) && (spyro.state == 6)) && (uVar2 = 0, DAT_80076e94 == 0)) {
      DAT_80076e7c = 0;
      goto LAB_8003517c;
    }
    if (maybe_cameraRelated != (undefined *)0x6) {
      uVar2 = DAT_80076e34 - maybeSpyroCameraOrbitPitch & 0xfff;
      if (0x800 < uVar2) {
        uVar2 = uVar2 - 0x1000;
      }
      goto LAB_8003517c;
    }
  }
  uVar2 = 0;
LAB_8003517c:
  iVar4 = param_1 * 2;
  DAT_80076e7c = DAT_80076e7c +
                 ((int)((int)*(short *)(&DAT_8006c760 + iVar4) * uVar2 -
                       *(short *)(&DAT_8006c7a8 + iVar4) * DAT_80076e7c) >> 8);
  iVar3 = DAT_80076e7c;
  if (DAT_80076e7c < 0) {
    iVar3 = -DAT_80076e7c;
  }
  if (((iVar3 < *(short *)(&DAT_8006c7f0 + iVar4)) && (DAT_80076e7c = 0, DAT_80076e9c != 0)) &&
     ((iVar3 = 0x100, 0 < (int)uVar2 || (iVar3 = -0x100, (int)uVar2 < 0)))) {
    DAT_80076e7c = iVar3;
  }
  if ((((cameraMode & 0x40) != 0) && (maybe_cameraRelated == &DAT_80000009)) && (DAT_80076e94 == 0))
  {
    if (DAT_80076e7c < -0x2000) {
      DAT_80076e7c = -0x2000;
    }
    if (0x2000 < DAT_80076e7c) {
      DAT_80076e7c = 0x2000;
    }
  }
  maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch + (DAT_80076e7c >> 8);
  if (((((cameraMode & 0x10) == 0) && (DAT_8007592c == 0)) || (maybe_cameraRelated != &DAT_80000011)
      ) && (maybe_cameraRelated != (undefined *)0x6)) {
    iVar3 = DAT_80076e38 - maybeSpyroCameraOrbitRadius;
  }
  else {
    iVar3 = 0;
  }
  iVar1 = param_1 * 2;
  DAT_80076e80 = DAT_80076e80 +
                 (*(short *)(&DAT_8006c76c + iVar1) * iVar3 -
                  *(short *)(&DAT_8006c7b4 + iVar1) * DAT_80076e80 >> 8);
  iVar4 = DAT_80076e80;
  if (DAT_80076e80 < 0) {
    iVar4 = -DAT_80076e80;
  }
  if (((iVar4 < *(short *)(&DAT_8006c7fc + iVar1)) && (DAT_80076e80 = 0, DAT_80076e9c != 0)) &&
     ((iVar4 = 0x100, 0 < iVar3 || (iVar4 = -0x100, iVar3 < 0)))) {
    DAT_80076e80 = iVar4;
  }
  maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius + (DAT_80076e80 >> 8);
  if (((((cameraMode & 0x10) == 0) && (DAT_8007592c == 0)) || (maybe_cameraRelated != &DAT_80000011)
      ) && (maybe_cameraRelated != (undefined *)0x6)) {
    uVar2 = DAT_80076e3c - DAT_80076e54 & 0xfff;
    if (0x800 < uVar2) {
      uVar2 = uVar2 - 0x1000;
    }
  }
  else {
    uVar2 = 0;
  }
  iVar4 = param_1 * 2;
  DAT_80076e84 = DAT_80076e84 +
                 ((int)((int)*(short *)(&DAT_8006c778 + iVar4) * uVar2 -
                       *(short *)(&DAT_8006c7c0 + iVar4) * DAT_80076e84) >> 8);
  iVar3 = DAT_80076e84;
  if (DAT_80076e84 < 0) {
    iVar3 = -DAT_80076e84;
  }
  if (((iVar3 < *(short *)(&DAT_8006c808 + iVar4)) && (DAT_80076e84 = 0, DAT_80076e9c != 0)) &&
     ((iVar3 = 0x100, 0 < (int)uVar2 || (iVar3 = -0x100, (int)uVar2 < 0)))) {
    DAT_80076e84 = iVar3;
  }
  DAT_80076e54 = DAT_80076e54 + (DAT_80076e84 >> 8);
  if (((((cameraMode & 0x10) == 0) && (DAT_8007592c == 0)) || (maybe_cameraRelated != &DAT_80000011)
      ) && (maybe_cameraRelated != (undefined *)0x6)) {
    uVar2 = DAT_80076e40 - DAT_80076e58 & 0xfff;
    if (0x800 < uVar2) {
      uVar2 = uVar2 - 0x1000;
    }
  }
  else {
    uVar2 = 0;
  }
  iVar4 = param_1 * 2;
  DAT_80076e88 = DAT_80076e88 +
                 ((int)((int)*(short *)(&DAT_8006c784 + iVar4) * uVar2 -
                       *(short *)(&DAT_8006c7cc + iVar4) * DAT_80076e88) >> 8);
  iVar3 = DAT_80076e88;
  if (DAT_80076e88 < 0) {
    iVar3 = -DAT_80076e88;
  }
  if (((iVar3 < *(short *)(&DAT_8006c814 + iVar4)) && (DAT_80076e88 = 0, DAT_80076e9c != 0)) &&
     ((iVar3 = 0x100, 0 < (int)uVar2 || (iVar3 = -0x100, (int)uVar2 < 0)))) {
    DAT_80076e88 = iVar3;
  }
  DAT_80076e58 = DAT_80076e58 + (DAT_80076e88 >> 8);
  if (((((cameraMode & 0x10) == 0) && (DAT_8007592c == 0)) || (maybe_cameraRelated != &DAT_80000011)
      ) && (maybe_cameraRelated != (undefined *)0x6)) {
    uVar2 = DAT_80076e44 - DAT_80076e5c & 0xfff;
    if (0x800 < uVar2) {
      uVar2 = uVar2 - 0x1000;
    }
  }
  else {
    uVar2 = 0;
  }
  param_1 = param_1 * 2;
  DAT_80076e8c = DAT_80076e8c +
                 ((int)((int)*(short *)(&DAT_8006c790 + param_1) * uVar2 -
                       *(short *)(&DAT_8006c7d8 + param_1) * DAT_80076e8c) >> 8);
  iVar3 = DAT_80076e8c;
  if (DAT_80076e8c < 0) {
    iVar3 = -DAT_80076e8c;
  }
  if (((iVar3 < *(short *)(&DAT_8006c820 + param_1)) && (DAT_80076e8c = 0, DAT_80076e9c != 0)) &&
     ((iVar3 = 0x100, 0 < (int)uVar2 || (iVar3 = -0x100, (int)uVar2 < 0)))) {
    DAT_80076e8c = iVar3;
  }
  DAT_80076e5c = DAT_80076e5c + (DAT_80076e8c >> 8);
  return;
}



void WeirdCamera(void)

{
  undefined *puVar1;
  int iVar2;
  undefined *puVar3;
  int local_18;
  int local_14;
  uint local_10;
  
  puVar3 = unk_cameraRelatedLocking;
  if (unk_cameraRelatedLocking == &DAT_80000009) {
    if ((cameraMode & 0x10) == 0) {
      if (((currentButton & TRIANGLE_BUTTON) != 0) && (spyro.state == 0)) goto LAB_80035dc4;
    }
    else if ((spyro.state == 0) || (spyro.state == 0xd)) {
      if ((currentButton & TRIANGLE_BUTTON) == 0) {
        unk_cameraRelatedLocking = &DAT_80000010;
        DAT_80075938 = 0x2d;
        spyro.TargetHeadAngle.roll = 0;
        spyro.TargetHeadAngle.pad1 = 0;
        spyro.TargetHeadAngle.pitch = 0;
        spyro.TargetHeadAngle.pad2 = 0;
        spyro.TargetHeadAngle.yaw = 0;
        spyro.TargetHeadAngle.pad3 = 0;
        puVar3 = unk_cameraRelatedLocking;
      }
      goto LAB_80035dc4;
    }
    spyro.TargetHeadAngle.roll = 0;
    spyro.TargetHeadAngle.pad1 = 0;
    spyro.TargetHeadAngle.pitch = 0;
    spyro.TargetHeadAngle.pad2 = 0;
    spyro.TargetHeadAngle.yaw = 0;
    spyro.TargetHeadAngle.pad3 = 0;
    puVar3 = (undefined *)(uint)(byte)(&DAT_8006c588)[spyro.state];
    goto LAB_80035dc4;
  }
  if (unk_cameraRelatedLocking == &DAT_8000000a) {
    if ((spyro.maybe_weirdResearchThis & 0x200U) == 0) {
      unk_cameraRelatedLocking = (undefined *)(uint)(byte)(&DAT_8006c588)[spyro.state];
      DAT_80076ea0 = &spyro;
      DAT_80076eb8 = CameraRotation(&cameraPosition);
      maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
      maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
      maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
      DAT_80076e54 = DAT_80076e6c;
      DAT_80076e58 = DAT_80076e70;
      DAT_80076e5c = DAT_80076e74;
      puVar3 = unk_cameraRelatedLocking;
      if (((((cameraMode & 0x10) == 0) && (DAT_8007592c == 0)) ||
          (unk_cameraRelatedLocking != (undefined *)0x0)) || (maybe_UnknownPositionVector.y != 0))
      goto LAB_80035dc4;
LAB_80035d30:
      unk_cameraRelatedLocking = &DAT_80000010;
      DAT_80075938 = 0x2d;
      puVar3 = unk_cameraRelatedLocking;
      goto LAB_80035dc4;
    }
    puVar1 = &DAT_8000000a;
joined_r0x80035a8c:
    if (maybe_cameraRelated == puVar1) goto LAB_80035dc4;
  }
  else if (unk_cameraRelatedLocking == (undefined *)0x80000007) {
    if ((spyro.maybe_weirdResearchThis & 0x8000U) == 0) {
      unk_cameraRelatedLocking = (undefined *)(uint)(byte)(&DAT_8006c588)[spyro.state];
      DAT_80076ea0 = &spyro;
    }
    else if (maybe_cameraRelated == (undefined *)0x80000007) goto LAB_80035dc4;
  }
  else {
    if (unk_cameraRelatedLocking != &DAT_8000000c) {
      if (unk_cameraRelatedLocking == &DAT_8000000b) {
        if ((spyro.maybe_weirdResearchThis & 0x400U) == 0) {
          DAT_80076ea0 = &spyro;
          puVar3 = (undefined *)(uint)(byte)(&DAT_8006c588)[spyro.state];
        }
        else if (maybe_cameraRelated != &DAT_8000000b) {
          if (spyro.unkown59 == 0) {
            *(undefined *)(spyro.unkown57 + 1) = 0;
            puVar3 = unk_cameraRelatedLocking;
          }
          else {
            *(char *)(spyro.unkown57 + 1) = *(char *)spyro.unkown57 + -1;
            puVar3 = unk_cameraRelatedLocking;
          }
        }
        goto LAB_80035dc4;
      }
      if ((unk_cameraRelatedLocking == &DAT_80000010) || (unk_cameraRelatedLocking == &DAT_80000011)
         ) {
        puVar3 = (undefined *)(uint)(byte)(&DAT_8006c588)[spyro.state];
        if (((puVar3 != (undefined *)0x0) && (puVar3 != (undefined *)0x4)) ||
           (puVar3 = unk_cameraRelatedLocking, 0 < DAT_80075938)) goto LAB_80035dc4;
      }
      else {
        if (unk_cameraRelatedLocking != (undefined *)0x80000000) {
          if ((((unk_cameraRelatedLocking == (undefined *)0x0) && (spyro.autoFlameRelated == 0)) &&
              (((cameraMode & 0x10) != 0 || (DAT_8007592c != 0)))) &&
             (maybe_UnknownPositionVector.y == 0)) {
            WorldToScreen(&local_18,&spyro);
            local_18 = local_18 + -0x100;
            local_14 = local_14 + -0x78;
            iVar2 = local_18;
            if (local_18 < 0) {
              iVar2 = -local_18;
            }
            if (iVar2 < 0x41) {
              iVar2 = local_14;
              if (local_14 < 0) {
                iVar2 = -local_14;
              }
              if ((iVar2 < 0x29) && (puVar3 = unk_cameraRelatedLocking, local_10 < 0x1401))
              goto LAB_80035dc4;
            }
            goto LAB_80035d30;
          }
          if ((DAT_80076ea0 == &spyro) || (maybe_cameraRelated == (undefined *)0x6))
          goto LAB_80035dc4;
          DAT_80076ea0 = &spyro;
          goto LAB_80035d74;
        }
        if (0x400 < spyro.absoluteMomentum) {
          puVar3 = (undefined *)(uint)(byte)(&DAT_8006c588)[spyro.state];
          goto LAB_80035dc4;
        }
        WorldToScreen(&local_18,&spyro);
        local_18 = local_18 + -0x100;
        local_14 = local_14 + -0x78;
        iVar2 = local_18;
        if (local_18 < 0) {
          iVar2 = -local_18;
        }
        if (iVar2 < 0x41) {
          iVar2 = local_14;
          if (local_14 < 0) {
            iVar2 = -local_14;
          }
          if ((iVar2 < 0x29) && (puVar3 = unk_cameraRelatedLocking, local_10 < 0x1401))
          goto LAB_80035dc4;
        }
      }
      puVar3 = (undefined *)(uint)(byte)(&DAT_8006c588)[spyro.state];
      goto LAB_80035dc4;
    }
    if ((spyro.maybe_weirdResearchThis & 0x10000U) != 0) {
      puVar1 = &DAT_8000000c;
      goto joined_r0x80035a8c;
    }
    unk_cameraRelatedLocking = (undefined *)(uint)(byte)(&DAT_8006c588)[spyro.state];
    DAT_80076ea0 = &spyro;
  }
LAB_80035d74:
  DAT_80076eb8 = CameraRotation(&cameraPosition);
  maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
  maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
  maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
  DAT_80076e54 = DAT_80076e6c;
  DAT_80076e58 = DAT_80076e70;
  DAT_80076e5c = DAT_80076e74;
  puVar3 = unk_cameraRelatedLocking;
LAB_80035dc4:
  unk_cameraRelatedLocking = puVar3;
  if (unk_cameraRelatedLocking != maybe_cameraRelated) {
    if ((((((cameraMode & 0x10) == 0) && (DAT_8007592c == 0)) ||
         ((spyro.autoFlameRelated != 0 || (maybe_UnknownPositionVector.y != 0)))) ||
        ((unk_cameraRelatedLocking != (undefined *)0x0 &&
         (unk_cameraRelatedLocking != (undefined *)0x80000000)))) ||
       ((maybe_cameraRelated == &DAT_80000011 || (DAT_80076ea0 != &spyro)))) {
      if ((maybe_cameraRelated == (undefined *)0x2) || (maybe_cameraRelated == &DAT_8000000e)) {
        DAT_80076eb8 = CameraRotation(&cameraPosition);
        maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
        maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
        maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
        DAT_80076e54 = DAT_80076e6c;
        DAT_80076e58 = DAT_80076e70;
        DAT_80076e5c = DAT_80076e74;
      }
    }
    else {
      DAT_80075938 = 8;
      unk_cameraRelatedLocking = &DAT_80000011;
      DAT_80075894 = 0x5a;
    }
    maybe_cameraRelated = unk_cameraRelatedLocking;
    if (unk_cameraRelatedLocking == &DAT_80000009) {
      if (DAT_800756b8 != 0) {
        DAT_80076e94 = 0;
      }
      DAT_80076eac = 0;
      DAT_80076eb0 = 0;
    }
  }
  return;
}



void FUN_80035f58(void)

{
  undefined4 uVar1;
  
  DAT_80075924 = 0;
  if (((spyro.maybe_weirdResearchThis & 0x1000U) == 0) && (DAT_80076e98 == 0)) {
    uVar1 = 0xfffffc00;
    if (((currentButton & R2_BUTTON) != 0) || (uVar1 = 0x400, (currentButton & L2_BUTTON) != 0)) {
      DAT_80075924 = uVar1;
    }
  }
  return;
}



void LockCameraToSpyro(void)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  uint local_98;
  uint local_94;
  uint local_88;
  uint local_84;
  uint local_78;
  uint local_74;
  uint local_58;
  uint local_54;
  
  if ((((cameraMode & 0x10) != 0) || (DAT_8007592c != 0)) &&
     (maybe_cameraRelated == (undefined *)0xf)) {
    maybe_cameraRelated = (undefined *)0x0;
  }
  iVar9 = DAT_80076e98 + 1 >> 1;
  if (4 < iVar9) {
    iVar9 = 4;
  }
  if (maybe_cameraRelated == (undefined *)0x0) {
LAB_80036128:
    if (((((cameraMode & 0x10) == 0) || (maybe_UnknownPositionVector.y != 0)) ||
        ((DAT_80075924 != 0 || (DAT_80076e94 != 0)))) ||
       ((DAT_80075894 == 0 && (spyro.state != 0x1b)))) {
      flyInAnimation = (undefined4 *)&DAT_8006c8d4;
      DAT_80076ea0 = &spyro;
      unk_camera_related_angle = spyro.angle.yaw;
      DAT_80076eb8 = CameraRotation(&cameraPosition);
      maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
      if ((DAT_80076e94 == 0) || (levelTimerWhenActive < 0x78)) {
        FUN_80034198();
      }
    }
    if (((((cameraMode & 0x10) == 0) && (DAT_8007592c == 0)) || (DAT_80077390 == 0)) ||
       ((DAT_800756b8 == 0 || (maybe_UnknownPositionVector.y != 0)))) {
      DAT_80075894 = 0x5a;
    }
    else if (DAT_80075894 != 0) {
      uVar6 = maybeSpyroCameraOrbitYaw2 + spyro.angle.yaw + -0x800 & 0xfff;
      if (0x800 < uVar6) {
        uVar6 = uVar6 - 0x1000;
      }
      uVar3 = maybeSpyroCameraOrbitPitch2 - DAT_8006c8d8 & 0xfff;
      if (0x800 < uVar3) {
        uVar3 = uVar3 - 0x1000;
      }
      if ((int)uVar6 < 0) {
        uVar6 = -uVar6;
      }
      if ((int)uVar6 < 0x191) {
        if ((int)uVar3 < 0) {
          uVar3 = -uVar3;
        }
        if ((int)uVar3 < 0x101) goto LAB_80037180;
      }
      DAT_80075894 = DAT_80075894 - gameSpeedMultiplyer;
      if (DAT_80075894 < 1) {
        DAT_80075894 = 0;
        DAT_80076e78 = 0;
        DAT_80076e7c = 0;
        DAT_80076e80 = 0;
        DAT_80076e84 = 0;
        DAT_80076e88 = 0;
        DAT_80076e8c = 0;
      }
    }
    goto LAB_80037180;
  }
  if (0 < (int)maybe_cameraRelated) {
    if (maybe_cameraRelated == (undefined *)0x4) {
      DAT_80076ea0 = &spyro;
      unk_camera_related_angle = spyro.angle.yaw;
      if (DAT_80076e94 == 0) {
        iVar8 = Maybe_AngleDiff(spyro.angle.yaw,(int)cameraAngle.yaw);
        if (iVar8 < 0x579) {
          flyInAnimation = (undefined4 *)&DAT_8006c9ac;
          if ((cameraMode & 0x40) == 0) {
LAB_80036b18:
            DAT_80076eb8 = CameraRotation(&cameraPosition);
            maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
          }
        }
        else {
          flyInAnimation = (undefined4 *)&DAT_8006c9dc;
        }
        goto LAB_80036eac;
      }
    }
    else if ((int)maybe_cameraRelated < 5) {
      if (maybe_cameraRelated == (undefined *)0x2) {
        DAT_80076ea0 = &spyro;
        unk_camera_related_angle = spyro.angle.yaw;
        if (DAT_80076e94 == 0) {
          iVar8 = Maybe_AngleDiff(spyro.angle.yaw,(int)cameraAngle.yaw);
          if (iVar8 < 0x579) {
            flyInAnimation = &DAT_8006c934;
          }
          else {
            flyInAnimation = (undefined4 *)&DAT_8006c964;
          }
          goto LAB_80036eac;
        }
      }
      else {
        if ((int)maybe_cameraRelated < 3) {
          DAT_80076ea0 = &spyro;
          unk_camera_related_angle = spyro.angle.yaw;
          if (DAT_80076e94 != 0) goto LAB_80037180;
          iVar8 = Maybe_AngleDiff(spyro.angle.yaw,(int)cameraAngle.yaw);
          if (iVar8 < 0x579) {
            flyInAnimation = &DAT_8006c934;
            if ((cameraMode & 0x40) == 0) {
              DAT_80076eb8 = CameraRotation(&cameraPosition);
              maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
            }
          }
          else {
            flyInAnimation = (undefined4 *)&DAT_8006c964;
          }
          FUN_80034198();
          Vec3Subtract((int *)&local_98,(int *)&spyro,&cameraPosition.x);
          Vec3Scale(&local_88,0x80078b64,DAT_8007527c);
          Vec3ScaleDownByPowerOfTwo((int *)&local_88,6);
          Vec3Add(&local_88,&local_98,&local_88);
          iVar8 = ATan2Scaled(local_98,local_94,1);
LAB_800368c4:
          iVar2 = ATan2Scaled(local_88,local_84,1);
          DAT_80076e44 = iVar8 - iVar2 & 0xfff;
          goto LAB_80037180;
        }
        flyInAnimation = (undefined4 *)&DAT_8006c994;
        DAT_80076ea0 = &spyro;
        unk_camera_related_angle = spyro.angle.yaw;
        DAT_80076eb8 = CameraRotation(&cameraPosition);
        maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
        if (DAT_80076e94 == 0) {
          FUN_80034198();
          DAT_80076e44 = (-spyro.turnAcceleration & 0x1ffU) << 3;
          goto LAB_80037180;
        }
      }
    }
    else {
      if (maybe_cameraRelated == (undefined *)0x6) {
        if (DAT_80076ea0 != (Spyro *)&DAT_80077798) {
          Vec3Copy((int *)&DAT_80077798,(int *)DAT_80076ea0);
          DAT_80076ea0 = (Spyro *)&DAT_80077798;
        }
        DAT_80075924 = 0;
        iVar9 = DAT_80076e78;
        if (DAT_80076e78 < 0) {
          iVar9 = -DAT_80076e78;
        }
        iVar8 = DAT_80076e7c;
        if (DAT_80076e7c < 0) {
          iVar8 = -DAT_80076e7c;
        }
        iVar2 = DAT_80076e80;
        if (DAT_80076e80 < 0) {
          iVar2 = -DAT_80076e80;
        }
        iVar4 = DAT_80076e84;
        if (DAT_80076e84 < 0) {
          iVar4 = -DAT_80076e84;
        }
        iVar7 = DAT_80076e88;
        if (DAT_80076e88 < 0) {
          iVar7 = -DAT_80076e88;
        }
        iVar5 = DAT_80076e8c;
        if (DAT_80076e8c < 0) {
          iVar5 = -DAT_80076e8c;
        }
        if (0x20 < iVar9 + iVar8 + iVar2 + iVar4 + iVar7 + iVar5) {
          iVar9 = 0;
          if (0 < gameSpeedMultiplyer) {
            do {
              FUN_80034ce8(0);
              iVar9 = iVar9 + 1;
            } while (iVar9 < gameSpeedMultiplyer);
          }
          FUN_80034204(&cameraFollowPosition);
          Vec3Add(&cameraFollowPosition,&cameraFollowPosition,DAT_80076ea0);
          FUN_80034c84();
          FUN_800342f8();
        }
        DAT_80076eb8 = CameraRotation(&cameraPosition);
        maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
        maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
        maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
        DAT_80076e54 = DAT_80076e6c;
        DAT_80076e58 = DAT_80076e70;
        DAT_80076e5c = DAT_80076e74;
        return;
      }
      if ((int)maybe_cameraRelated < 6) {
        DAT_80076ea0 = &spyro;
        unk_camera_related_angle = spyro.angle.yaw;
        if (DAT_80076e94 == 0) {
          if (spyro.canSuperfly != 0) {
            if (spyro.subState != 2) {
              if (spyro.subState == 1) {
                uVar6 = spyro.angle.yaw - cameraAngle.yaw & 0xfff;
                bVar1 = uVar6 < 0x101;
                if (0x800 < uVar6) {
                  uVar6 = uVar6 - 0x1000;
                  bVar1 = (int)uVar6 < 0x101;
                }
                if (bVar1) {
                  if ((int)uVar6 < -0x100) {
                    flyInAnimation = (undefined4 *)&DAT_8006c97c;
                  }
                  else {
                    flyInAnimation = &DAT_8006c934;
                  }
                }
                else {
                  flyInAnimation = (undefined4 *)&DAT_8006c94c;
                }
                DAT_80076eb8 = CameraRotation(&cameraPosition);
                maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
              }
              else {
                flyInAnimation = &DAT_8006c934;
                DAT_80076eb8 = CameraRotation(&cameraPosition);
                maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
                maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
                FUN_80034198();
                Vec3Subtract((int *)&local_78,(int *)&spyro,&cameraPosition.x);
                Vec3Scale(&local_58,0x80078b64,DAT_8007527c);
                Vec3ScaleDownByPowerOfTwo((int *)&local_58,5);
                Vec3Add(&local_58,&local_78,&local_58);
                iVar8 = ATan2Scaled(local_78,local_74,1);
                iVar2 = ATan2Scaled(local_58,local_54,1);
                DAT_80076e44 = iVar8 - iVar2 & 0xfff;
              }
              goto LAB_80037180;
            }
            uVar6 = spyro.angle.yaw - cameraAngle.yaw & 0xfff;
            if (0x800 < uVar6) {
              uVar6 = uVar6 - 0x1000;
            }
            if ((int)uVar6 < 1) {
              flyInAnimation = (undefined4 *)&DAT_8006c97c;
            }
            else {
              flyInAnimation = (undefined4 *)&DAT_8006c94c;
            }
            unk_camera_related_angle = spyro.angle.yaw + 0x800U & 0xfff;
            goto LAB_80036b18;
          }
          iVar8 = Maybe_AngleDiff(spyro.angle.yaw,(int)cameraAngle.yaw);
          if ((spyro.subState == 0xb) || (iVar8 < 0x579)) {
            flyInAnimation = &DAT_8006c934;
            DAT_80076eb8 = CameraRotation(&cameraPosition);
            maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
            maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
          }
          else {
            flyInAnimation = (undefined4 *)&DAT_8006c964;
          }
          FUN_80034198();
          Vec3Subtract((int *)&local_78,(int *)&spyro,&cameraPosition.x);
          Vec3Scale(&local_58,0x80078b64,DAT_8007527c);
          Vec3ScaleDownByPowerOfTwo((int *)&local_58,5);
          Vec3Add(&local_58,&local_78,&local_58);
          iVar8 = ATan2Scaled(local_78,local_74,1);
          local_88 = local_58;
          local_84 = local_54;
          goto LAB_800368c4;
        }
      }
      else {
        if (maybe_cameraRelated != (undefined *)0xf) goto LAB_80037180;
        flyInAnimation = (undefined4 *)&DAT_8006c8d4;
        DAT_80076ea0 = &spyro;
        unk_camera_related_angle = spyro.angle.yaw;
        DAT_80076eb8 = CameraRotation(&cameraPosition);
        maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
        maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
        if (DAT_80076e94 == 0) goto LAB_80036eac;
      }
    }
    DAT_80076eb8 = CameraRotation(&cameraPosition);
    maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
    maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
    maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
    DAT_80076e54 = DAT_80076e6c;
    DAT_80076e58 = DAT_80076e70;
    DAT_80076e5c = DAT_80076e74;
    goto LAB_80037180;
  }
  if (maybe_cameraRelated == &DAT_8000000a) {
    DAT_80076eb8 = CameraRotation(&cameraPosition);
    maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
    maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
    maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
    if (DAT_80076e94 == 0) {
      FUN_80034198();
    }
    else {
      DAT_80076eb8 = CameraRotation(&cameraPosition);
      maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
      maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
      maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
      DAT_80076e54 = DAT_80076e6c;
      DAT_80076e58 = DAT_80076e70;
      DAT_80076e5c = DAT_80076e74;
    }
    if ((spyro.maybe_weirdResearchThis & 0x1000U) != 0) {
      iVar9 = 5;
    }
    goto LAB_80037180;
  }
  if ((int)maybe_cameraRelated < -0x7ffffff5) {
    if (maybe_cameraRelated != (undefined *)0x80000007) {
      if (-0x7ffffff9 < (int)maybe_cameraRelated) {
        if (maybe_cameraRelated == &DAT_80000009) {
          flyInAnimation = (undefined4 *)&DAT_8006ca0c;
          DAT_80076ea0 = &spyro;
          unk_camera_related_angle = spyro.angle.yaw;
          DAT_80076eb8 = CameraRotation(&cameraPosition);
          maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
          maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
          maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
          iVar9 = 5;
          if (DAT_80076e94 == 0) {
            FUN_80034198();
            if ((*DAT_800757e0 == 3) && ((DAT_800757e0[5] & 0xffff0000U) != 0x7f7f0000)) {
              DAT_80076eac = DAT_80076eac + ((int)(*(byte *)((int)DAT_800757e0 + 0x16) - 0x7f) >> 1)
              ;
              DAT_80076eb0 = DAT_80076eb0 +
                             ((int)(0x7f - (uint)*(byte *)((int)DAT_800757e0 + 0x17)) >> 1);
            }
            else {
              if ((currentButton & LEFT_BUTTON) == 0) {
                if ((currentButton & RIGHT_BUTTON) != 0) {
                  DAT_80076eac = DAT_80076eac + 0x30;
                }
              }
              else {
                DAT_80076eac = DAT_80076eac + -0x30;
              }
              if ((currentButton & UP_BUTTON) == 0) {
                if ((currentButton & DOWN_BUTTON) != 0) {
                  DAT_80076eb0 = DAT_80076eb0 + -0x30;
                }
              }
              else {
                DAT_80076eb0 = DAT_80076eb0 + 0x30;
              }
            }
            if (DAT_80076eac < -0x400) {
              DAT_80076eac = -0x400;
            }
            if (0x400 < DAT_80076eac) {
              DAT_80076eac = 0x400;
            }
            if (DAT_80076eb0 < -0x3d0) {
              DAT_80076eb0 = -0x3d0;
            }
            if (0x500 < DAT_80076eb0) {
              DAT_80076eb0 = 0x500;
            }
            DAT_80076e30 = DAT_80076e30 + DAT_80076eac;
            if (DAT_80076eb0 < -0x140) {
              DAT_80076e34 = DAT_80076e34 + -0x140;
              DAT_80076e40 = DAT_80076e40 + 0x140 + DAT_80076eb0;
            }
            else {
              DAT_80076e34 = DAT_80076e34 + DAT_80076eb0;
            }
            iVar9 = -DAT_80076eac;
            spyro.TargetHeadAngle._8_4_ = iVar9;
            if (iVar9 < -0x300) {
              spyro.TargetHeadAngle._8_4_ = -0x300;
            }
            if (0x300 < iVar9) {
              spyro.TargetHeadAngle._8_4_ = 0x300;
            }
            iVar9 = -DAT_80076eb0;
            spyro.TargetHeadAngle._4_4_ = iVar9;
            if (iVar9 < -0x200) {
              spyro.TargetHeadAngle._4_4_ = -0x200;
            }
            if (0x200 < iVar9) {
              spyro.TargetHeadAngle._4_4_ = 0x200;
            }
            iVar9 = 5;
          }
        }
        goto LAB_80037180;
      }
      if (maybe_cameraRelated != (undefined *)0x80000000) goto LAB_80037180;
      goto LAB_80036128;
    }
    flyInAnimation = (undefined4 *)&DAT_8006cb5c;
    DAT_80076ea0 = (Spyro *)&Vec3_80076ec8.z;
    Vec3_80076ec8.z = *(int *)(spyro.unkown50 + 0xc);
                    // WARNING: Read-only address (ram,0x80076ed0) is written
    DAT_80076ed4 = *(undefined4 *)(spyro.unkown50 + 0x10);
    DAT_80076ed8 = spyro.position.z;
    unk_camera_related_angle = (uint)*(byte *)(spyro.unkown50 + 0x46) << 4;
    DAT_80076eb8 = CameraRotation(&cameraPosition);
    maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
    maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
    maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
LAB_80036eac:
    FUN_80034198();
  }
  else {
    if (maybe_cameraRelated == &DAT_80000010) {
      flyInAnimation = (undefined4 *)&DAT_8006c8d4;
      DAT_80076ea0 = &spyro;
      unk_camera_related_angle = spyro.angle.yaw;
      DAT_80076eb8 = CameraRotation(&cameraPosition);
      maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
      if (DAT_80076e94 == 0) {
        FUN_80034198();
      }
    }
    else {
      if ((int)maybe_cameraRelated < -0x7fffffef) {
        if (maybe_cameraRelated != &DAT_8000000c) goto LAB_80037180;
        DAT_80076ea0 = &spyro;
        unk_camera_related_angle =
             ATan2Scaled(*(int *)(spyro.unkown50 + 0xc) - spyro.position.x,
                         *(int *)(spyro.unkown50 + 0x10) - spyro.position.y,1);
        if (DAT_80076e94 != 0) goto LAB_80037180;
        flyInAnimation = (undefined4 *)&DAT_8006cb74;
        DAT_80076eb8 = CameraRotation(&cameraPosition);
        goto LAB_80036eac;
      }
      if (maybe_cameraRelated != &DAT_80000011) goto LAB_80037180;
    }
    DAT_80075938 = DAT_80075938 + -1;
  }
LAB_80037180:
  if ((((maybe_cameraRelated == &DAT_80000009) || (maybe_cameraRelated == (undefined *)0x80000007))
      || (maybe_cameraRelated == &DAT_80000012)) ||
     (((maybe_cameraRelated == &DAT_8000000b || (maybe_cameraRelated == &DAT_8000000e)) ||
      (maybe_cameraRelated == (undefined *)0x3)))) {
    DAT_80075924 = 0;
  }
  else {
    FUN_80035f58();
  }
  if ((((cameraMode & 0x10) == 0) && (DAT_8007592c == 0)) ||
     (((DAT_800756b8 == 0 ||
       (((DAT_80075894 == 0 || (maybe_UnknownPositionVector.y != 0)) || (DAT_80075924 != 0)))) ||
      ((maybe_cameraRelated != (undefined *)0x0 && (maybe_cameraRelated != (undefined *)0x80000000))
      )))) {
    iVar8 = 0;
    if (0 < gameSpeedMultiplyer) {
      do {
        FUN_80034ce8(iVar9);
        iVar8 = iVar8 + 1;
      } while (iVar8 < gameSpeedMultiplyer);
    }
    FUN_80034204(&cameraFollowPosition);
    Vec3Add(&cameraFollowPosition,&cameraFollowPosition,DAT_80076ea0);
    CameraFollowPosition();
    FUN_800342f8();
  }
  else {
    Vec3Copy(&cameraFollowPosition.x,&cameraPosition.x);
    DAT_80076e78 = 0;
    DAT_80076e7c = 0;
    DAT_80076e80 = 0;
    DAT_80076e84 = 0;
    DAT_80076e88 = 0;
    DAT_80076e8c = 0;
  }
  DAT_80076eb8 = CameraRotation(&cameraPosition);
  if ((((cameraMode & 0x10) == 0) || (spyro.state != 5)) ||
     ((maybe_UnknownPositionVector.y != 0 || (0x3ff < spyro.absoluteMomentum)))) {
    maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
  }
                    // WARNING: Read-only address (ram,0x80076ed0) is written
  maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
  maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
  DAT_80076e54 = DAT_80076e6c;
  DAT_80076e58 = DAT_80076e70;
  DAT_80076e5c = DAT_80076e74;
  return;
}



void CameraPortalEntry(void)

{
  bool bVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int *b;
  undefined4 in_a3;
  uint uVar6;
  uint uVar7;
  int local_48;
  int local_44;
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  int aiStack_28 [4];
  
  uVar7 = (uint)*(byte *)(spyro.unkown57 + 1);
  Vec3Subtract(aiStack_28,(int *)(spyro.unkown57 + uVar7 * 0x10 + 8),&cameraPosition.x);
  uVar2 = Vec3CalculateLengthE(aiStack_28,flag3D);
  if ((int)uVar2 < 0x200) {
    if (spyro.unkown59 == 0) {
      if ((int)(uint)*(byte *)(spyro.unkown57 + 1) < (int)(*(byte *)spyro.unkown57 - 1)) {
        *(byte *)(spyro.unkown57 + 1) = *(byte *)(spyro.unkown57 + 1) + 1;
      }
    }
    else if (*(char *)(spyro.unkown57 + 1) != '\0') {
      *(char *)(spyro.unkown57 + 1) = *(char *)(spyro.unkown57 + 1) + -1;
    }
  }
  bVar1 = false;
  if (spyro.unkown59 == 0) {
    if (uVar7 != 0) {
      bVar1 = true;
    }
  }
  else {
    bVar1 = (int)uVar7 < (int)(*(byte *)spyro.unkown57 - 1);
  }
  if (bVar1) {
    Vec3Subtract(&local_38,(int *)&spyro,&cameraPosition.x);
    uVar3 = Vec3CalculateLengthE(&local_38,flag3D);
    uVar6 = 0;
    if (0x400 < (int)uVar3) {
      uVar6 = (uVar3 - 0x400) * 4;
      if ((int)uVar3 < (int)uVar6) {
        uVar6 = uVar3;
      }
      Vec3ScaleDownByFraction(&local_38,uVar3,uVar6);
      if (spyro.unkown59 == 0) {
        iVar5 = uVar7 * 0x10 + -8;
      }
      else {
        iVar5 = uVar7 * 0x10 + 0x18;
      }
      b = (int *)(spyro.unkown57 + iVar5);
      Vec3Subtract(&local_48,(int *)(spyro.unkown57 + uVar7 * 0x10 + 8),b);
      VecNormalize(&local_48,0x1000,b,in_a3);
      iVar4 = local_48 * local_38 + local_44 * local_34 + local_40 * local_30;
      iVar5 = iVar4 / (int)uVar6;
      if (uVar6 == 0) {
        trap(0x1c00);
      }
      if ((uVar6 == 0xffffffff) && (iVar4 == -0x80000000)) {
        trap(0x1800);
      }
      if (iVar5 < 0) {
        iVar5 = -iVar5;
      }
      iVar4 = iVar5;
      if (iVar5 < 0) {
        iVar4 = 0;
      }
      iVar4 = iVar4 << 7;
      if (0x1000 < iVar5) {
        iVar4 = 0x80000;
      }
      uVar6 = iVar4 >> 0xc;
    }
  }
  else {
    uVar6 = uVar2;
    if (spyro.unkown58 < (int)uVar2) {
      uVar6 = spyro.unkown58;
    }
  }
  Vec3ScaleDownByFraction(aiStack_28,uVar2,uVar6 * gameSpeedMultiplyer);
  Vec3Add(&cameraPosition,&cameraPosition,aiStack_28);
  DAT_80076eb8 = CameraRotation(&cameraPosition);
  FUN_800342f8();
  return;
}



void FUN_80037714(int param_1)

{
  maybe_UnknownPositionVector.x = param_1;
  Vec3Copy(&cameraPosition.x,(int *)(param_1 + 0x18));
  Vec3Zero((Vec3 *)&spyro.airMomentum);
  spyro.airMomentum.z = -0x2300;
  cameraAngle.roll = (short)*(undefined4 *)(maybe_UnknownPositionVector.x + 0x24);
  cameraAngle.pitch = (short)*(undefined4 *)(maybe_UnknownPositionVector.x + 0x28);
  maybe_cameraRelated = &DAT_8000000e;
  unk_cameraRelatedLocking = &DAT_8000000e;
  cameraAngle.yaw = (short)*(undefined4 *)(maybe_UnknownPositionVector.x + 0x2c);
  return;
}



void FUN_800377a8(void)

{
  bool bVar1;
  uint uVar2;
  uint uVar3;
  int iStack_20;
  int local_1c;
  
  bVar1 = false;
  if (levelLoadState < 0) {
    if (((spyro.state != 6) && (spyro.state != 0x10)) &&
       ((1 < spyro.state - 0x20U &&
        (((spyro.state != 0x22 && (spyro.state != 0xf)) && (spyro.state != 0x1d)))))) {
      unk_cameraRelatedLocking = (uint)(byte)(&DAT_8006c588)[spyro.state];
    }
    goto LAB_800379b8;
  }
  if (maybe_UnknownPositionVector.x == 0) {
LAB_800378d8:
    bVar1 = true;
  }
  else {
    Vec3Subtract(&iStack_20,&cameraPosition.x,(int *)&spyro);
    uVar2 = Vec3CalculateLengthE(&iStack_20,flag3D);
    Vec3Subtract(&iStack_20,&cameraPosition.x,&spyro.maybe_positionRelative.x);
    if (((*(int *)(maybe_UnknownPositionVector.x + 0x34) < (int)uVar2) &&
        (uVar3 = Vec3CalculateLengthE(&iStack_20,flag3D), (int)uVar3 < (int)uVar2)) ||
       (WorldToScreen(&iStack_20,&spyro), 0xf0 < local_1c)) goto LAB_800378d8;
  }
  if ((bVar1) || (maybe_cameraRelated != &DAT_8000000e)) {
    uVar2 = rand();
    uVar2 = (int)((uVar2 & 0xfff) * 3) >> 0xc;
    if ((undefined *)maybe_UnknownPositionVector.x == &DAT_8006eb24 + uVar2 * 0x38) {
      uVar2 = (uVar2 + 1) % 3;
    }
    FUN_80037714(&DAT_8006eb24 + uVar2 * 0x38);
    Vec3Copy((int *)&spyro,(int *)maybe_UnknownPositionVector.x);
    spyro.angle.roll = *(int *)(maybe_UnknownPositionVector.x + 0xc);
    spyro.angle.pitch = *(int *)(maybe_UnknownPositionVector.x + 0x10);
    spyro.angle.yaw = *(int *)(maybe_UnknownPositionVector.x + 0x14);
  }
LAB_800379b8:
  if (*(int *)(maybe_UnknownPositionVector.x + 0x30) == 1) {
    Vec3Subtract(&iStack_20,(int *)&spyro,&cameraPosition.x);
    DAT_80076eb8 = CameraRotation(&cameraPosition);
    FUN_800342f8();
  }
  return;
}



void FUN_80037a20(void)

{
  int iVar1;
  
  DAT_80076ea0 = &spyro;
  unk_camera_related_angle = spyro.angle.yaw;
  if (portalToExitFromInHW == 0) {
    if (flyInAnimation == (undefined *)0x0) {
      if (spyro.angle.yaw < cameraAngle.yaw) {
        flyInAnimation = &DAT_8006ca3c;
      }
      else {
        flyInAnimation = &DAT_8006ca6c;
      }
    }
  }
  else if (levelLoadState < 10) {
    flyInAnimation = &DAT_8006ca54;
  }
  else {
    flyInAnimation = &DAT_8006c964;
  }
  iVar1 = 0;
  FUN_80034198();
  DAT_80075924 = 0;
  if (0 < gameSpeedMultiplyer) {
    do {
      FUN_80034ce8(0);
      iVar1 = iVar1 + 1;
    } while (iVar1 < gameSpeedMultiplyer);
  }
  FUN_80034204(&cameraFollowPosition);
  Vec3Add(&cameraFollowPosition,&cameraFollowPosition,DAT_80076ea0);
  FUN_80034c84();
  FUN_800342f8();
  DAT_80076eb8 = CameraRotation(&cameraPosition);
  maybeSpyroCameraOrbitYaw = maybeSpyroCameraOrbitYaw2;
  maybeSpyroCameraOrbitPitch = maybeSpyroCameraOrbitPitch2;
  maybeSpyroCameraOrbitRadius = maybeSpyroCameraOrbitRadius2;
  DAT_80076e54 = DAT_80076e6c;
  DAT_80076e58 = DAT_80076e70;
  DAT_80076e5c = DAT_80076e74;
  return;
}



void CameraFollowSpyro(void)

{
  int iVar1;
  
  DAT_8007592c = (uint)(spyro.state == 0x1b);
  DAT_80075944 = '\0';
  if (spyro.isMovementLocked != 0) {
    FUN_80053708(&currentButtonOneFrame,&DAT_800776d8);
  }
  if (spyro.autoFlameRelated == 0) {
    if (-1 < (int)unk_cameraRelatedLocking) {
      unk_cameraRelatedLocking = (uint)(byte)(&DAT_8006c588)[spyro.state];
    }
  }
  else {
    unk_cameraRelatedLocking = 0;
    DAT_80075894 = 0;
  }
  WeirdCamera();
  if (maybe_cameraRelated == &DAT_8000000e) {
    FUN_800377a8();
  }
  else if (maybe_cameraRelated == &DAT_80000012) {
    FUN_80037a20();
  }
  else {
    if (maybe_cameraRelated == &DAT_8000000b) {
      CameraPortalEntry();
    }
    else {
      LockCameraToSpyro();
    }
    if (DAT_8007590c == 0) {
      DAT_80075848 = 0;
    }
    else {
      if (DAT_80075848 < DAT_8007590c) {
        DAT_80075848 = DAT_8007590c;
      }
      DAT_8007590c = DAT_8007590c - gameSpeedMultiplyer;
      if (DAT_8007590c < 0) {
        DAT_8007590c = 0;
      }
      iVar1 = DAT_800756dc * DAT_8007590c * ((levelTimerWhenActive & 2) - 1);
      if (DAT_80075848 == 0) {
        trap(0x1c00);
      }
      if ((DAT_80075848 == -1) && (iVar1 == -0x80000000)) {
        trap(0x1800);
      }
      cameraPosition.z = cameraPosition.z + (iVar1 / DAT_80075848 >> 6);
    }
    if (levelLoadState < 0) {
      iVar1 = FUN_8004df24(&cameraPosition);
      if (iVar1 != 0) {
        DAT_80076e24 = DAT_80075844;
      }
      if (DAT_800785b4 <= DAT_80076e24) {
        DAT_80076e24 = -1;
      }
      maybe_UnknownPositionVector.x = 0;
    }
  }
  if (DAT_80075944 != '\0') {
    FUN_80053708(&DAT_800776d8,&currentButtonOneFrame);
  }
  return;
}



// Possible VM_VIB.OBJ/SsUtVibrateOff

void FUN_80037e98(void)

{
  return;
}



int FUN_80037ea0(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  
  iVar1 = rand();
  iVar2 = (param_2 - param_1) + 1;
  if (iVar2 == 0) {
    trap(0x1c00);
  }
  if ((iVar2 == -1) && (iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  return iVar1 % iVar2 + param_1;
}



int FUN_80037f10(int param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  
  uVar1 = rand();
  iVar2 = (param_2 - param_1) + 1;
  if (iVar2 == 0) {
    trap(0x1c00);
  }
  if ((iVar2 == -1) && (uVar1 == 0x80000000)) {
    trap(0x1800);
  }
  param_1 = (int)uVar1 % iVar2 + param_1;
  if ((uVar1 & 1) == 0) {
    param_1 = -param_1;
  }
  return param_1;
}



undefined4 FUN_80037f90(int *param_1,int param_2)

{
  byte bVar1;
  short sVar2;
  int iVar3;
  
  if (param_2 == 4) {
    iVar3 = *param_1;
    if (DAT_800756c4 < iVar3) {
      *param_1 = iVar3 - DAT_800756c4;
      return 0;
    }
    if (iVar3 != 0) {
      *param_1 = 0;
      return 2;
    }
  }
  else if (param_2 == 2) {
    sVar2 = *(short *)param_1;
    if (DAT_800756c4 < sVar2) {
      *(short *)param_1 = sVar2 - (short)DAT_800756c4;
      return 0;
    }
    if (sVar2 != 0) {
      *(undefined2 *)param_1 = 0;
      return 2;
    }
  }
  else {
    if (param_2 != 1) {
      return 1;
    }
    bVar1 = *(byte *)param_1;
    if (DAT_800756c4 < (int)(uint)bVar1) {
      *(byte *)param_1 = bVar1 - (char)DAT_800756c4;
      return 0;
    }
    if (bVar1 != 0) {
      *(undefined *)param_1 = 0;
      return 2;
    }
  }
  return 1;
}



int FUN_80038074(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  
  iVar2 = param_1 + param_2 + 0x100;
  iVar1 = iVar2;
  if (iVar2 < 0) {
    iVar1 = param_1 + param_2 + 0x1ff;
  }
  return iVar2 + (iVar1 >> 8) * -0x100;
}



undefined4 FUN_80038098(undefined4 param_1,undefined4 param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar1 = FUN_800381bc();
  iVar2 = iVar1;
  if (iVar1 < 0) {
    iVar2 = -iVar1;
  }
  if (param_3 < iVar2) {
    if (iVar1 < 0) {
      param_1 = FUN_80038074(param_2,param_3);
    }
    else {
      param_1 = FUN_80038074(param_2,-param_3);
    }
  }
  return param_1;
}



void FUN_80038120(undefined4 param_1,undefined4 param_2,uint param_3)

{
  int iVar1;
  
  iVar1 = FUN_800381bc(param_2,param_1);
  FUN_80038074(param_2,(int)(iVar1 * (param_3 & 0xff)) >> 8);
  return;
}



void FUN_80038178(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined param_4)

{
  undefined4 uVar1;
  
  uVar1 = FUN_80038098();
  FUN_80038120(uVar1,param_2,param_4);
  return;
}



int FUN_800381bc(int param_1,int param_2)

{
  param_2 = param_2 - param_1;
  if (0x80 < param_2) {
    param_2 = param_2 + -0x100;
  }
  if (param_2 < -0x80) {
    param_2 = param_2 + 0x100;
  }
  return param_2;
}



undefined4 FUN_80038250(int *param_1)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int aiStack_50 [4];
  int aiStack_40 [4];
  int aiStack_30 [6];
  
  Vec3Subtract(aiStack_50,(int *)&spyro,param_1);
  uVar1 = Vec3CalculateLengthE(aiStack_50,flag3D);
  Maybe_ImproveEstimate(aiStack_50,uVar1,1);
  Vec3ScaleDownByFraction(aiStack_50,uVar1,0x400);
  Vec3Copy(aiStack_40,param_1);
  iVar3 = 0;
  if (0 < (int)uVar1 >> 10) {
    do {
      Vec3Add(aiStack_30,aiStack_40,aiStack_50);
      iVar2 = FindCollsionPolygonAltro(aiStack_40,aiStack_30);
      if (iVar2 != 0) {
        return 0;
      }
      Vec3Copy(aiStack_40,aiStack_30);
      iVar3 = iVar3 + 1;
    } while (iVar3 < (int)uVar1 >> 10);
  }
  return 1;
}



void FUN_80038340(int param_1)

{
  *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + 0x5dc;
  MobyUpdatePosition(param_1 + 0xc,0x1000);
  *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + -0x5dc;
  return;
}



bool FUN_8003838c(int param_1)

{
  char cVar1;
  uint uVar2;
  
  *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + 0x5dc;
  MobyUpdatePosition(param_1 + 0xc,0x1000);
  *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + -0x5dc;
  uVar2 = Vec3CalculateLengthE(&unknownVector.x,flag2D);
  cVar1 = Maybe_CalculateAngle(unknownVector.z,uVar2);
  return cVar1 < '\x18';
}



void FUN_80038400(int param_1,int param_2)

{
  *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + param_2;
  MobyUpdatePosition(param_1 + 0xc,param_2 + 0x1000);
  *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) - param_2;
  return;
}



void FUN_80038458(int param_1)

{
  int iVar1;
  
  iVar1 = FUN_80038340();
  *(int *)(param_1 + 0x14) = iVar1 + *(short *)(param_1 + 0x38);
  FUN_800533d0();
  return;
}



bool FUN_80038494(int param_1)

{
  int iVar1;
  bool bVar2;
  
  iVar1 = (param_1 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d;
  bVar2 = false;
  if (((&DAT_80077898)[iVar1 >> 8] & 1 << (iVar1 >> 3 & 0x1fU)) != 0) {
    bVar2 = *(char *)(param_1 + 0x53) == -1;
  }
  return bVar2;
}



void FUN_8003851c(int *param_1,int param_2,int *param_3)

{
  byte bVar1;
  
  if (param_3 == (int *)0x0) {
    UNK_SuperchargeRelated(param_1,1);
    bVar1 = *(byte *)((&DAT_80076378)[*(short *)((int)param_1 + 0x36)] + param_2 + 4);
    param_3 = param_1 + 0x15;
  }
  else {
    bVar1 = *(byte *)((&DAT_80076378)[*(short *)((int)param_1 + 0x36)] + param_2 + 4);
  }
  PlaySoundEffect((uint)bVar1,param_1,8,param_3);
  return;
}



void FUN_800385bc(int *param_1,undefined4 param_2)

{
  byte bVar1;
  int *ptr_sourceMoby;
  undefined4 playbackMode;
  int *piVar2;
  
  if (param_1 == (int *)0x0) {
    ptr_sourceMoby = (int *)0x0;
    playbackMode = 0x10;
    bVar1 = localSFXArray[0x26];
    piVar2 = (int *)0x0;
  }
  else {
    playbackMode = 8;
    bVar1 = localSFXArray[0x26];
    piVar2 = param_1 + 0x15;
    ptr_sourceMoby = param_1;
  }
  PlaySoundEffect((uint)bVar1,ptr_sourceMoby,playbackMode,piVar2);
  FUN_800530c0(param_1,param_2);
  return;
}



int FUN_80038638(int param_1,int *param_2,int param_3,undefined4 param_4,int param_5,int param_6,
                undefined4 param_7,undefined4 param_8,int param_9,int param_10,undefined4 param_11,
                undefined4 param_12,uint param_13)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  undefined3 extraout_var;
  int iVar4;
  undefined3 extraout_var_00;
  int iVar5;
  undefined4 uVar6;
  int iVar7;
  
  iVar2 = ATan2Scaled(*(int *)(param_1 + 0xc) - *param_2,*(int *)(param_1 + 0x10) - param_2[1],0);
  iVar3 = FUN_800381bc(param_4,iVar2);
  iVar4 = iVar3;
  if (iVar3 < 0) {
    iVar4 = -iVar3;
  }
  if (iVar4 < param_5) {
    return iVar4;
  }
  if ((param_9 != 0xff) &&
     (bVar1 = Maybe_Calculate8BitDifference(iVar2,param_9), CONCAT31(extraout_var,bVar1) < 5)) {
    iVar4 = FUN_800381bc(param_9,iVar2);
    if ((iVar3 < 0) && (iVar4 < 0)) {
      return 0x100;
    }
    if ((0 < iVar3) && (0 < iVar4)) {
      return 0x100;
    }
  }
  if (((param_10 != 0xff) &&
      (bVar1 = Maybe_Calculate8BitDifference(iVar2,param_10), CONCAT31(extraout_var_00,bVar1) < 5))
     && (((iVar4 = FUN_800381bc(param_10,iVar2), iVar3 < 0 && (iVar4 < 0)) ||
         ((0 < iVar3 && (0 < iVar4)))))) {
    return 0x100;
  }
  if (iVar3 < 0) {
    uVar6 = 3;
  }
  else {
    uVar6 = 0xfffffffd;
  }
  iVar4 = FUN_80038074(iVar2,uVar6);
  iVar2 = *param_2 + (sineWaveArray[iVar4 + 0x40] * param_3 >> 0xc);
  iVar7 = param_2[1] + (sineWaveArray[iVar4] * param_3 >> 0xc);
  iVar4 = ATan2Scaled(iVar2 - *(int *)(param_1 + 0xc),iVar7 - *(int *)(param_1 + 0x10),0);
  if (DAT_800756c4 == 3) {
    param_6 = param_6 + (param_6 >> 1);
  }
  else if (DAT_800756c4 == 4) {
    param_6 = param_6 << 1;
  }
  if ((param_13 & 8) == 0) {
    iVar4 = FUN_80038ee0(param_1,iVar4,param_7,param_8,1);
    if (iVar4 == 0) goto LAB_800388dc;
    iVar4 = UNK_MobyPosCollsionRelated(param_1,param_6,param_11,param_12,param_13);
  }
  else {
    iVar5 = ATan2Scaled(*param_2 - *(int *)(param_1 + 0xc),param_2[1] - *(int *)(param_1 + 0x10),0);
    FUN_80038ee0(param_1,iVar5,param_7,0,0);
    iVar4 = FUN_80039688(param_1,iVar4,param_6,param_11,param_12,param_13,iVar2,iVar7);
  }
  if (iVar4 != 0) {
    return -iVar4;
  }
LAB_800388dc:
  if (iVar3 < 0) {
    return -iVar3;
  }
  return iVar3;
}



int FUN_8003891c(int *param_1,int *param_2,int param_3,int param_4,int *param_5)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int local_20;
  int local_1c;
  
  local_20 = *param_1 - *param_2;
  local_1c = param_1[1] - param_2[1];
  uVar2 = Vec3CalculateLengthE(&local_20,flag2D);
  iVar4 = (int)uVar2 / param_3;
  if (param_3 == 0) {
    trap(0x1c00);
  }
  if ((param_3 == -1) && (uVar2 == 0x80000000)) {
    trap(0x1800);
  }
  if (param_5 != (int *)0x0) {
    *param_5 = iVar4;
  }
  if (iVar4 == 0) {
    iVar3 = 0;
  }
  else {
    iVar1 = -((param_1[2] - param_2[2]) + (param_4 * iVar4 * iVar4 >> 1));
    iVar3 = iVar1 / iVar4;
    if (iVar4 == 0) {
      trap(0x1c00);
    }
    if ((iVar4 == -1) && (iVar1 == -0x80000000)) {
      trap(0x1800);
    }
  }
  return iVar3;
}



int FUN_80038a40(int param_1,byte *param_2,int *param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int unaff_s5;
  
  iVar4 = 0xffffff;
  iVar2 = 0;
  if (*param_2 != 0) {
    iVar3 = 8;
    do {
      iVar1 = Vec2EstimateOctagonalDistance((Vec2 *)(param_1 + 0xc),(Vec2 *)(param_2 + iVar3));
      if (iVar1 < iVar4) {
        iVar4 = iVar1;
        unaff_s5 = iVar2;
      }
      iVar2 = iVar2 + 1;
      iVar3 = iVar3 + 0x10;
    } while (iVar2 < (int)(uint)*param_2);
  }
  if (param_3 != (int *)0x0) {
    *param_3 = unaff_s5;
  }
  return iVar4;
}



int FUN_80038afc(byte *param_1,int *param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int unaff_s4;
  
  iVar4 = 0xffffff;
  iVar2 = 0;
  if (*param_1 != 0) {
    iVar3 = 8;
    do {
      iVar1 = Vec2EstimateOctagonalDistance((Vec2 *)&spyro,(Vec2 *)(param_1 + iVar3));
      if (iVar1 < iVar4) {
        iVar4 = iVar1;
        unaff_s4 = iVar2;
      }
      iVar2 = iVar2 + 1;
      iVar3 = iVar3 + 0x10;
    } while (iVar2 < (int)(uint)*param_1);
  }
  if (param_2 != (int *)0x0) {
    *param_2 = unaff_s4;
  }
  return iVar4;
}



int FUN_80038bb0(byte *param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int unaff_s4;
  
  iVar4 = 0;
  iVar2 = 0;
  if (*param_1 != 0) {
    iVar3 = 8;
    do {
      iVar1 = Vec2EstimateOctagonalDistance((Vec2 *)&spyro,(Vec2 *)(param_1 + iVar3));
      if (iVar4 < iVar1) {
        iVar4 = iVar1;
        unaff_s4 = iVar2;
      }
      iVar2 = iVar2 + 1;
      iVar3 = iVar3 + 0x10;
    } while (iVar2 < (int)(uint)*param_1);
  }
  return unaff_s4;
}



bool FUN_80038c4c(int *param_1,int *param_2)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  int local_20;
  int local_1c;
  
  iVar3 = param_2[5];
  Vec3Subtract(&local_20,param_1,param_2);
  iVar2 = (local_20 * sineWaveArray[iVar3 + 0x40] >> 0xc) - (local_1c * sineWaveArray[iVar3] >> 0xc)
  ;
  if (iVar2 < 0) {
    iVar2 = -iVar2;
  }
  iVar3 = (local_20 * sineWaveArray[iVar3] >> 0xc) + (local_1c * sineWaveArray[iVar3 + 0x40] >> 0xc)
  ;
  if (iVar3 < 0) {
    iVar3 = -iVar3;
  }
  bVar1 = false;
  if (iVar2 < param_2[3]) {
    bVar1 = iVar3 < param_2[4];
  }
  return bVar1;
}



int FUN_80038d54(int *param_1,int *param_2)

{
  int iVar1;
  
  iVar1 = (*param_2 * *param_1 + param_2[1] * param_1[1] + param_2[2] * param_1[2] >> 10) +
          param_2[3];
  if (iVar1 < 0) {
    iVar1 = -iVar1;
  }
  return iVar1;
}



undefined4 FUN_80038dc0(int param_1,int param_2,int param_3,int param_4)

{
  bool bVar1;
  byte bVar2;
  undefined uVar3;
  int iVar4;
  undefined3 extraout_var;
  undefined3 extraout_var_00;
  undefined4 uVar6;
  int iVar5;
  
  iVar4 = ATan2Scaled(spyro.position.x - *(int *)(param_1 + 0xc),
                      spyro.position.y - *(int *)(param_1 + 0x10),0);
  bVar2 = Maybe_Calculate8BitDifference(iVar4,(uint)*(byte *)(param_1 + 0x46));
  iVar5 = CONCAT31(extraout_var,bVar2);
  if (DAT_800756c4 == 3) {
    param_2 = param_2 + (param_2 >> 1);
  }
  else {
    bVar1 = iVar5 < param_2;
    if (DAT_800756c4 != 4) goto LAB_80038e58;
    param_2 = param_2 << 1;
  }
  bVar1 = iVar5 < param_2;
LAB_80038e58:
  if (bVar1) {
    param_2 = iVar5;
  }
  bVar2 = Maybe_Calculate8BitDifference(iVar4,(uint)*(byte *)(param_1 + 0x46));
  if (param_3 < CONCAT31(extraout_var_00,bVar2)) {
    uVar3 = FUN_800179f0(iVar4,*(undefined *)(param_1 + 0x46),param_2,(param_2 >> 1) + 1);
    *(undefined *)(param_1 + 0x46) = uVar3;
    uVar6 = 0;
  }
  else {
    if (param_4 != 0) {
      uVar3 = FUN_800179f0(iVar4,*(undefined *)(param_1 + 0x46),param_2,(param_2 >> 1) + 1);
      *(undefined *)(param_1 + 0x46) = uVar3;
    }
    uVar6 = 1;
  }
  return uVar6;
}



undefined4 FUN_80038ee0(int param_1,int param_2,int param_3,int param_4,int param_5)

{
  bool bVar1;
  byte bVar2;
  undefined uVar3;
  undefined3 extraout_var;
  undefined4 uVar5;
  int iVar4;
  
  bVar2 = Maybe_Calculate8BitDifference(param_2,(uint)*(byte *)(param_1 + 0x46));
  iVar4 = CONCAT31(extraout_var,bVar2);
  if (DAT_800756c4 == 3) {
    param_3 = param_3 + (param_3 >> 1);
  }
  else {
    bVar1 = iVar4 < param_3;
    if (DAT_800756c4 != 4) goto LAB_80038f50;
    param_3 = param_3 << 1;
  }
  bVar1 = iVar4 < param_3;
LAB_80038f50:
  if (bVar1) {
    param_3 = iVar4;
  }
  if (iVar4 < param_4) {
    if (param_5 != 0) {
      uVar3 = FUN_800179f0(param_2,*(undefined *)(param_1 + 0x46),param_3,(param_3 >> 1) + 1);
      *(undefined *)(param_1 + 0x46) = uVar3;
    }
    uVar5 = 1;
  }
  else {
    uVar3 = FUN_800179f0(param_2,*(undefined *)(param_1 + 0x46),param_3,(param_3 >> 1) + 1);
    *(undefined *)(param_1 + 0x46) = uVar3;
    uVar5 = 0;
  }
  return uVar5;
}



uint FUN_80038fc8(int param_1,int *param_2,int *param_3,uint param_4,int param_5,uint param_6)

{
  undefined uVar1;
  undefined uVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  
  iVar3 = ATan2Scaled(spyro.position.x - *(int *)(param_1 + 0xc),
                      spyro.position.y - *(int *)(param_1 + 0x10),1);
  uVar6 = iVar3 - *param_3 & 0xfff;
  uVar5 = (iVar3 + -0x800) - *param_3 & 0xfff;
  if (0x800 < uVar6) {
    uVar6 = uVar6 - 0x1000;
  }
  if (0x800 < uVar5) {
    uVar5 = uVar5 - 0x1000;
  }
  if (DAT_800756c4 == 3) {
    param_4 = param_4 + ((int)param_4 >> 1);
  }
  else if (DAT_800756c4 == 4) {
    param_4 = param_4 << 1;
  }
  uVar4 = uVar6;
  if ((int)uVar6 < 0) {
    uVar4 = -uVar6;
  }
  if ((int)uVar4 < (int)param_4) {
    param_4 = uVar4;
  }
  iVar3 = *param_2;
  if (iVar3 == 0) {
    iVar3 = 1;
    if ((int)uVar6 < 0) {
      iVar3 = -1;
    }
LAB_80039124:
    *param_2 = iVar3;
  }
  else if ((int)uVar6 < 0) {
    if (0 < iVar3) {
      if ((int)uVar5 < 0) {
        uVar5 = -uVar5;
      }
      if (param_5 < (int)uVar5) {
        *param_2 = -1;
      }
    }
  }
  else if ((iVar3 < 0) && (0 < (int)uVar6)) {
    if ((int)uVar5 < 0) {
      uVar5 = -uVar5;
    }
    iVar3 = 1;
    if (param_5 < (int)uVar5) goto LAB_80039124;
  }
  uVar5 = uVar6;
  if ((int)uVar6 < 0) {
    uVar5 = -uVar6;
  }
  if (0x100 < (int)uVar5) {
    if (*param_2 == 1) {
      if (*(byte *)(param_1 + 0x3d) == param_6) goto LAB_800391c4;
      DAT_80075794 = 0;
      uVar2 = *(undefined *)(param_1 + 0x3d);
      uVar1 = *(undefined *)(param_1 + 0x3f);
      *(undefined *)(param_1 + 0x40) = 0x10;
      *(undefined *)(param_1 + 0x41) = 0x10;
      *(char *)(param_1 + 0x3d) = (char)param_6;
    }
    else {
      if ((uint)*(byte *)(param_1 + 0x3d) == param_6 + 1) goto LAB_800391c4;
      DAT_80075794 = 0;
      uVar2 = *(undefined *)(param_1 + 0x3d);
      uVar1 = *(undefined *)(param_1 + 0x3f);
      *(undefined *)(param_1 + 0x40) = 0x10;
      *(undefined *)(param_1 + 0x41) = 0x10;
      *(char *)(param_1 + 0x3d) = (char)(param_6 + 1);
    }
    *(undefined *)(param_1 + 0x3f) = 0;
    *(undefined *)(param_1 + 0x3c) = uVar2;
    *(undefined *)(param_1 + 0x3e) = uVar1;
    FUN_80037e98(param_1);
  }
LAB_800391c4:
  iVar3 = *param_3 + param_4 * *param_2;
  *param_3 = iVar3;
  if (iVar3 < 0) {
    *param_3 = iVar3 + 0x1000;
  }
  *(char *)(param_1 + 0x46) = (char)(*param_3 >> 4);
  return uVar6;
}



undefined4
FUN_80039228(int param_1,int param_2,undefined4 param_3,undefined4 param_4,int param_5,int param_6,
            uint param_7)

{
  int iVar1;
  int local_res4;
  undefined4 local_res8;
  undefined4 local_resc;
  int aiStack_40 [2];
  int local_38;
  int aiStack_30 [4];
  
  local_res4 = param_2;
  local_res8 = param_3;
  local_resc = param_4;
  if (DAT_800756c4 == 3) {
    Vec3Copy(aiStack_30,&local_res4);
    Vec3ScaleDownByPowerOfTwo(aiStack_30,1);
    Vec3Add(&local_res4,&local_res4,aiStack_30);
  }
  else if (DAT_800756c4 == 4) {
    Vec3ScaleUpByPowerOfTwo(&local_res4,1);
  }
  Vec3Add(aiStack_40,param_1 + 0xc,&local_res4);
  if ((param_7 & 1) != 0) {
    local_38 = local_38 + 300 + param_6;
  }
  if ((param_5 != 0) && (iVar1 = MobyCollisionRelated(aiStack_40,param_5,0,0,param_1,0), iVar1 != 0)
     ) {
    return 1;
  }
  if ((param_6 != 0) && (iVar1 = FUN_8004be4c(aiStack_40,param_6,param_6), iVar1 != 0)) {
    return 2;
  }
  if ((param_7 & 1) != 0) {
    local_38 = (local_38 + -300) - param_6;
  }
  Vec3Copy((int *)(param_1 + 0xc),aiStack_40);
  UpdateMobyCollision(param_1,2);
  return 0;
}



undefined4 UNK_MobyPosCollsionRelated(int param_1,int param_2,int param_3,int param_4,uint param_5)

{
  int iVar1;
  uint x;
  undefined4 uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int unaff_s3;
  int local_28;
  int local_24;
  int local_20;
  
  if (DAT_800756c4 == 3) {
    param_2 = param_2 + (param_2 >> 1);
  }
  else if (DAT_800756c4 == 4) {
    param_2 = param_2 << 1;
  }
  local_28 = *(int *)(param_1 + 0xc) +
             (sineWaveArray[*(byte *)(param_1 + 0x46) + 0x40] * param_2 >> 0xc);
  local_24 = *(int *)(param_1 + 0x10) + (sineWaveArray[*(byte *)(param_1 + 0x46)] * param_2 >> 0xc);
  local_20 = *(int *)(param_1 + 0x14);
  if (param_3 != 0) {
    if ((param_5 & 2) == 0) {
      iVar1 = MobyCollisionRelated(&local_28,param_3,0,0,param_1,0);
      if (iVar1 != 0) {
        return 1;
      }
    }
    else {
      MobyCollisionRelated(&local_28,param_3,0,0,param_1,3);
    }
  }
  if ((param_5 & 1) != 0) {
    local_20 = local_20 + 300 + param_4;
  }
  if (param_4 != 0) {
    iVar1 = FUN_8004be4c(&local_28,param_4,param_4);
    if (iVar1 != 0) {
      if ((param_5 & 0x20) == 0) {
        return 2;
      }
      Vec3Copy(&local_28,&unknownPositionVector.x);
    }
  }
  if ((param_5 & 1) != 0) {
    local_20 = (local_20 + -300) - param_4;
  }
  if ((param_5 & 0x54) != 0) {
    local_20 = local_20 + 0x400;
    unaff_s3 = MobyUpdatePosition(&local_28,5000);
  }
  if ((param_5 & 0x10) == 0) {
LAB_80039578:
    if ((param_5 & 0x40) != 0) {
      x = Vec3CalculateLengthE(&unknownVector.x,flag2D);
      iVar1 = ATan2Scaled(x,unknownVector.z,0);
      if (0x80 < iVar1) {
        iVar1 = iVar1 + -0x100;
      }
      if (iVar1 < 0) {
        iVar1 = -iVar1;
      }
      if (iVar1 < 0x17) goto LAB_800395d0;
    }
    *(int *)(param_1 + 0xc) = local_28;
    *(int *)(param_1 + 0x10) = local_24;
    if ((param_5 & 4) != 0) {
      iVar3 = *(int *)(param_1 + 0x14);
      iVar5 = unaff_s3 + *(short *)(param_1 + 0x38);
      iVar4 = iVar5 - iVar3;
      iVar1 = iVar4;
      if (iVar4 < 0) {
        iVar1 = -iVar4;
      }
      if (iVar1 < 0x259) {
        *(int *)(param_1 + 0x14) = iVar5;
      }
      else if (iVar4 < 1) {
        *(int *)(param_1 + 0x14) = iVar3 + -0xfa;
      }
      else {
        *(int *)(param_1 + 0x14) = iVar3 + 0xfa;
      }
    }
    if ((param_5 & 0x54) != 0) {
      FUN_800533d0(param_1);
    }
    UpdateMobyCollision(param_1,2);
    uVar2 = 0;
  }
  else {
    iVar3 = unaff_s3 + *(short *)(param_1 + 0x38);
    iVar1 = iVar3 - *(int *)(param_1 + 0x14);
    if (iVar1 < 1) {
      iVar1 = *(int *)(param_1 + 0x14) - iVar3;
    }
    if (iVar1 < 0x191) goto LAB_80039578;
LAB_800395d0:
    uVar2 = 2;
  }
  return uVar2;
}



undefined4 FUN_80039688(int param_1,int param_2,int param_3,int param_4,int param_5,uint param_6)

{
  int iVar1;
  int iVar2;
  int unaff_s2;
  int local_28;
  int local_24;
  int local_20;
  
  if (DAT_800756c4 == 3) {
    param_3 = param_3 + (param_3 >> 1);
  }
  else if (DAT_800756c4 == 4) {
    param_3 = param_3 << 1;
  }
  local_28 = *(int *)(param_1 + 0xc) + (sineWaveArray[param_2 + 0x40] * param_3 >> 0xc);
  local_24 = *(int *)(param_1 + 0x10) + (sineWaveArray[param_2] * param_3 >> 0xc);
  local_20 = *(int *)(param_1 + 0x14);
  if (param_4 != 0) {
    if ((param_6 & 2) == 0) {
      iVar1 = MobyCollisionRelated(&local_28,param_4,0,0,param_1,0);
      if (iVar1 != 0) {
        return 1;
      }
    }
    else {
      MobyCollisionRelated(&local_28,param_4,0,0,param_1,3);
    }
  }
  if ((param_6 & 1) != 0) {
    local_20 = local_20 + 300 + param_5;
  }
  if (param_5 != 0) {
    iVar1 = FUN_8004be4c(&local_28,param_5,param_5);
    if (iVar1 != 0) {
      if ((param_6 & 0x20) == 0) {
        return 2;
      }
      Vec3Copy(&local_28,&unknownPositionVector.x);
    }
  }
  if ((param_6 & 0x14) != 0) {
    local_20 = local_20 + 0x400;
    unaff_s2 = MobyUpdatePosition(&local_28,5000);
  }
  if ((param_6 & 0x10) != 0) {
    iVar2 = unaff_s2 + *(short *)(param_1 + 0x38);
    iVar1 = iVar2 - *(int *)(param_1 + 0x14);
    if (iVar1 < 1) {
      iVar1 = *(int *)(param_1 + 0x14) - iVar2;
    }
    if (200 < iVar1) {
      return 2;
    }
  }
  *(int *)(param_1 + 0xc) = local_28;
  *(int *)(param_1 + 0x10) = local_24;
  if ((param_6 & 4) != 0) {
    local_20 = local_20 + 0x400;
    iVar2 = (unaff_s2 + *(short *)(param_1 + 0x38)) - *(int *)(param_1 + 0x14);
    iVar1 = iVar2;
    if (iVar2 < 0) {
      iVar1 = -iVar2;
    }
    if (iVar1 < 0x259) {
      iVar1 = unaff_s2 + *(short *)(param_1 + 0x38);
    }
    else if (iVar2 < 1) {
      iVar1 = *(int *)(param_1 + 0x14) + -0xfa;
    }
    else {
      iVar1 = *(int *)(param_1 + 0x14) + 0xfa;
    }
    *(int *)(param_1 + 0x14) = iVar1;
  }
  if ((param_6 & 0x54) != 0) {
    FUN_800533d0(param_1);
  }
  UpdateMobyCollision(param_1,2);
  return 0;
}



int FUN_80039910(int param_1,int *param_2,undefined4 param_3,int *param_4,int param_5,int param_6)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  
  iVar5 = 0;
  uVar4 = 0x21;
  iVar3 = 300;
  if ((param_4 == (int *)0x0) || (*param_4 == 0xffff)) {
    uVar4 = 0x25;
  }
  uVar1 = (uint)*(byte *)(param_1 + 0x3b);
  if (uVar1 == 0xfe) {
    uVar4 = 1;
  }
  else if (uVar1 != 0) {
    uVar4 = uVar4 & 0xffffffdf;
    iVar3 = uVar1 << 2;
    if (uVar1 == 0xff) {
      iVar3 = 0;
    }
  }
  if (*param_2 != 0) {
    iVar5 = FUN_80039688(param_1,param_3,*param_2,iVar3,500,uVar4);
    iVar3 = *param_2;
    *param_2 = iVar3 - param_5;
    if (iVar3 - param_5 < 0) {
      *param_2 = 0;
    }
  }
  iVar3 = 2;
  if (((iVar5 != 2) && (iVar3 = iVar5, param_4 != (int *)0x0)) && (*param_4 != 0xffff)) {
    iVar5 = FUN_80038400(param_1,600);
    *(int *)(param_1 + 0x14) = *(int *)(param_1 + 0x14) + *param_4;
    iVar2 = *param_4;
    *param_4 = iVar2 - param_6;
    if (iVar2 - param_6 < -0x104) {
      *param_4 = -0x104;
    }
    if ((*param_4 < 1) &&
       (iVar5 = iVar5 + *(short *)(param_1 + 0x38), *(int *)(param_1 + 0x14) < iVar5)) {
      *(int *)(param_1 + 0x14) = iVar5;
      iVar3 = 3;
    }
    FUN_800533d0(param_1);
  }
  return iVar3;
}



void FUN_80039aa8(int param_1,Vec2 *param_2)

{
  byte bVar1;
  char cVar2;
  undefined uVar3;
  undefined uVar4;
  char cVar5;
  uint uVar6;
  int iVar7;
  undefined4 uVar8;
  int iVar9;
  undefined4 uVar10;
  uint uVar11;
  uint uVar12;
  
  uVar12 = (uint)*(byte *)((int)&param_2[1].y + 1);
  uVar11 = (uint)*(byte *)&param_2[1].y;
  if (DAT_800756c4 == 3) {
    uVar11 = uVar11 + ((int)uVar11 >> 1);
    uVar12 = uVar12 + ((int)uVar12 >> 1);
  }
  else if (DAT_800756c4 == 4) {
    uVar11 = uVar11 << 1;
    uVar12 = uVar12 << 1;
  }
  cVar2 = *(char *)((int)&param_2[2].y + 3);
  *(char *)((int)&param_2[2].y + 3) = cVar2 + -1;
  if (cVar2 == '\0') {
    cVar2 = FUN_80037ea0(*(undefined *)((int)&param_2[2].x + 1),
                         *(undefined *)((int)&param_2[2].x + 2));
    uVar6 = rand();
    if ((uVar6 & 1) != 0) {
      cVar2 = -cVar2;
    }
    uVar3 = *(undefined *)((int)&param_2[1].y + 3);
    *(char *)&param_2[3].x = *(char *)&param_2[3].x + cVar2;
    uVar3 = FUN_80037ea0(uVar3,*(undefined *)&param_2[2].x);
    *(undefined *)((int)&param_2[2].y + 3) = uVar3;
    *(undefined2 *)((int)&param_2[3].y + 2) = 0;
    *(undefined *)((int)&param_2[3].x + 3) = 0;
  }
  uVar6 = (uint)*(byte *)&param_2[3].x;
  if (*(char *)&param_2[2].y != '\0') {
    iVar7 = (int)*(short *)((int)&param_2[3].y + 2);
    bVar1 = *(byte *)&param_2[2].y;
    uVar6 = uVar6 + iVar7;
    iVar7 = iVar7 + (uint)*(byte *)((int)&param_2[2].y + 1) *
                    (uint)*(byte *)((int)&param_2[3].x + 1);
    *(short *)((int)&param_2[3].y + 2) = (short)iVar7;
    iVar7 = iVar7 * 0x10000 >> 0x10;
    if (iVar7 < 0) {
      iVar7 = -iVar7;
    }
    if ((int)(uint)bVar1 <= iVar7) {
      *(char *)((int)&param_2[3].x + 1) = -*(char *)((int)&param_2[3].x + 1);
    }
  }
  iVar7 = FUN_80038ee0(param_1,uVar6,uVar12,5,1);
  if (*(char *)((int)&param_2[3].y + 1) == '\0') {
    uVar3 = *(undefined *)((int)&param_2[1].y + 2);
    uVar4 = uVar3;
  }
  else {
    uVar3 = *(undefined *)((int)&param_2[1].y + 2);
    uVar4 = 0;
  }
  uVar11 = UNK_MobyPosCollsionRelated(param_1,uVar11,uVar4,uVar3,0x55);
  if (uVar11 == 0) {
    iVar7 = Vec2EstimateOctagonalDistance((Vec2 *)(param_1 + 0xc),(Vec2 *)&spyro);
    if ((iVar7 < 0x44c) && (*(char *)((int)&param_2[3].x + 3) == '\0')) {
      iVar7 = ATan2Scaled(*(int *)(param_1 + 0xc) - spyro.position.x,
                          *(int *)(param_1 + 0x10) - spyro.position.y,0);
      uVar3 = (undefined)iVar7;
      uVar8 = 0xffffffc4;
      uVar10 = 0x3c;
    }
    else {
      uVar11 = (uint)*(byte *)((int)&param_2[3].x + 2);
      if ((uVar11 == 0) ||
         (((*(char *)((int)&param_2[3].x + 3) != '\0' || (*(char *)&param_2[3].y != '\0')) ||
          ((int)(uVar11 << 10) <= iVar7)))) {
        iVar7 = Vec2EstimateOctagonalDistance((Vec2 *)(param_1 + 0xc),param_2);
        if ((int)((uint)*(byte *)((int)&param_2[2].x + 3) << 10) < iVar7) {
          iVar9 = ATan2Scaled(param_2->x - *(int *)(param_1 + 0xc),
                              param_2->y - *(int *)(param_1 + 0x10),0);
          uVar11 = (uint)*(byte *)&param_2[1].y;
          if (uVar11 == 0) {
            trap(0x1c00);
          }
          if ((uVar11 == 0xffffffff) && (iVar7 == -0x80000000)) {
            trap(0x1800);
          }
          *(char *)&param_2[3].x = (char)iVar9;
          *(undefined *)((int)&param_2[3].x + 3) = 0;
          *(undefined *)&param_2[3].y = 0x14;
          *(char *)((int)&param_2[2].y + 3) = (char)(iVar7 / (int)uVar11);
          return;
        }
        if (*(char *)&param_2[3].y != '\0') {
          *(char *)&param_2[3].y = *(char *)&param_2[3].y + -1;
        }
        cVar2 = *(char *)((int)&param_2[3].y + 1);
        cVar5 = cVar2 + -1;
        if (cVar2 == '\0') {
          return;
        }
        goto LAB_80039e68;
      }
      iVar7 = ATan2Scaled(*(int *)(param_1 + 0xc) - spyro.position.x,
                          *(int *)(param_1 + 0x10) - spyro.position.y,0);
      uVar3 = (undefined)iVar7;
      uVar8 = 0xffffffd0;
      uVar10 = 0x30;
    }
    *(undefined *)&param_2[3].x = uVar3;
    uVar8 = FUN_80037ea0(uVar8,uVar10);
    uVar4 = FUN_80038074(*(undefined *)&param_2[3].x,uVar8);
    uVar3 = *(undefined *)((int)&param_2[1].y + 3);
    *(undefined *)&param_2[3].x = uVar4;
    uVar3 = FUN_80037ea0(uVar3,*(undefined *)&param_2[2].x);
    *(undefined *)((int)&param_2[2].y + 3) = uVar3;
    *(undefined *)((int)&param_2[3].x + 3) = 1;
  }
  else {
    if (iVar7 == 0) {
      return;
    }
    uVar8 = FUN_80037ea0(0x40,0xc0);
    uVar4 = FUN_80038074(*(undefined *)&param_2[3].x,uVar8);
    uVar3 = *(undefined *)((int)&param_2[1].y + 3);
    *(undefined *)&param_2[3].x = uVar4;
    uVar3 = FUN_80037ea0(uVar3,*(undefined *)&param_2[2].x);
    *(undefined *)((int)&param_2[2].y + 3) = uVar3;
    *(undefined *)((int)&param_2[3].x + 3) = 0;
    if ((uVar11 & 2) != 0) {
      *(undefined *)&param_2[3].y = 0x14;
      return;
    }
    cVar5 = '\x06';
LAB_80039e68:
    *(char *)((int)&param_2[3].y + 1) = cVar5;
  }
  return;
}



int SpecificMobyRotation
              (int param_1,char *param_2,int param_3,int param_4,undefined4 param_5,
              undefined4 param_6,int param_7,uint param_8,uint param_9)

{
  char cVar1;
  bool bVar2;
  byte bVar3;
  undefined uVar4;
  undefined3 extraout_var;
  int iVar5;
  int iVar6;
  int *piVar7;
  int iVar8;
  
  if (DAT_800756c4 == 3) {
    param_4 = param_4 + (param_4 >> 1);
  }
  else if (DAT_800756c4 == 4) {
    param_4 = param_4 << 1;
  }
  iVar8 = 0;
  if ((param_9 & 0x100) == 0) {
    bVar2 = true;
  }
  else {
    iVar5 = *(int *)(param_1 + 0x14) - *(int *)(param_2 + (uint)(byte)param_2[1] * 0x10 + 0x10);
    if (iVar5 < 0) {
      iVar5 = -iVar5;
    }
    bVar2 = iVar5 < param_3;
  }
  iVar5 = Vec2EstimateOctagonalDistance
                    ((Vec2 *)(param_1 + 0xc),(Vec2 *)(param_2 + (uint)(byte)param_2[1] * 0x10 + 8));
  if ((iVar5 < param_3) && (bVar2)) {
    *(undefined *)(param_1 + 0x49) = 0;
    if (*(short *)(param_2 + 6) == -1) {
      cVar1 = param_2[1];
      param_2[1] = cVar1 + '\x01';
      if ((char)(cVar1 + '\x01') == *param_2) {
        param_2[1] = '\0';
      }
    }
    else {
      cVar1 = param_2[1];
      param_2[1] = cVar1 + -1;
      if ((char)(cVar1 + -1) == -1) {
        param_2[1] = *param_2 + -1;
      }
    }
    iVar8 = (byte)param_2[1] + 0x100;
  }
  iVar5 = ATan2Scaled(*(int *)(param_2 + (uint)(byte)param_2[1] * 0x10 + 8) -
                      *(int *)(param_1 + 0xc),
                      *(int *)(param_2 + (uint)(byte)param_2[1] * 0x10 + 0xc) -
                      *(int *)(param_1 + 0x10),0);
  bVar3 = Maybe_Calculate8BitDifference(iVar5,(uint)*(byte *)(param_1 + 0x46));
  if (param_7 < CONCAT31(extraout_var,bVar3)) {
    if ((*(char *)(param_1 + 0x49) == '\0') && (param_8 != 0xff)) {
      piVar7 = &DAT_800700f4;
      iVar6 = DAT_800700f4;
      if (DAT_800700f4 != 0) {
        do {
          piVar7 = piVar7 + 1;
          if (((*(byte *)(iVar6 + 0x43) == param_8) && (*(byte *)(iVar6 + 0x48) < 0x80)) &&
             (*(char *)(iVar6 + 0x49) == '\x01')) break;
          iVar6 = *piVar7;
        } while (iVar6 != 0);
        if (iVar6 != 0) {
          return iVar8;
        }
      }
      uVar4 = FUN_800179f0(iVar5,*(undefined *)(param_1 + 0x46),param_6,param_7);
      *(undefined *)(param_1 + 0x46) = uVar4;
      *(undefined *)(param_1 + 0x49) = 2;
    }
    else {
      uVar4 = FUN_800179f0(iVar5,*(undefined *)(param_1 + 0x46),param_6,param_7);
      *(undefined *)(param_1 + 0x46) = uVar4;
    }
  }
  else {
    *(undefined *)(param_1 + 0x49) = 1;
    FUN_80038ee0(param_1,iVar5,param_6,param_7,1);
    UNK_MobyPosCollsionRelated(param_1,param_4,param_5,0,param_9);
  }
  return iVar8;
}



int FUN_8003a16c(int param_1,char *param_2,int param_3,uint param_4,int param_5,uint param_6,
                int param_7,uint *param_8)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  undefined local_60;
  undefined local_5f;
  undefined local_5e;
  uint local_58;
  uint local_54;
  uint local_50;
  undefined auStack_48 [32];
  
  Vec3Subtract((int *)&local_58,(int *)(param_2 + (uint)(byte)param_2[1] * 0x10 + 8),
               (int *)(param_1 + 0xc));
  local_60 = 0;
  uVar2 = Vec3CalculateLengthE((int *)&local_58,flag2D);
  iVar3 = ATan2Scaled(uVar2,local_50,0);
  local_5f = (undefined)iVar3;
  uVar2 = Vec3CalculateLengthE((int *)&local_58,flag2D);
  if ((int)uVar2 < param_3) {
    local_5e = (undefined)*param_8;
  }
  else {
    iVar3 = ATan2Scaled(local_58,local_54,0);
    uVar2 = iVar3 - *param_8 & 0xff;
    if (0x80 < uVar2) {
      uVar2 = uVar2 - 0x100;
    }
    uVar4 = uVar2;
    if ((int)uVar2 < 0) {
      uVar4 = -uVar2;
    }
    if (param_7 < (int)uVar4) {
      param_4 = 0;
    }
    if ((int)uVar2 < (int)-param_6) {
      uVar2 = -param_6;
    }
    if ((int)param_6 < (int)uVar2) {
      uVar2 = param_6;
    }
    uVar2 = uVar2 + *param_8;
    local_5e = (undefined)uVar2;
    *param_8 = uVar2 & 0xff;
  }
  uVar2 = Vec3CalculateLengthE((int *)&local_58,flag3D);
  local_58 = param_4;
  if ((int)uVar2 < (int)param_4) {
    local_58 = uVar2;
  }
  UNK_MatrixOperation(&local_60,auStack_48,0);
  local_54 = 0;
  local_50 = 0;
  Vec3ApplyRotationMatrix(auStack_48,&local_58,&local_58);
  Vec3Add(&local_58,param_1 + 0xc,&local_58);
  if (param_5 != 0) {
    MobyCollisionRelated(&local_58,param_5,0,0,param_1,0);
  }
  local_50 = local_50 + 0x400;
  iVar3 = MobyUpdatePosition(&local_58,0x400);
  if (iVar3 == 0) {
    iVar3 = local_50 + -0x400;
  }
  local_50 = iVar3;
  Vec3Copy((int *)(param_1 + 0xc),(int *)&local_58);
  FUN_800533d0(param_1);
  UpdateMobyCollision(param_1,2);
  Vec3Subtract((int *)&local_58,(int *)(param_2 + (uint)(byte)param_2[1] * 0x10 + 8),
               (int *)(param_1 + 0xc));
  uVar2 = Vec3CalculateLengthE((int *)&local_58,flag3D);
  iVar3 = 0;
  if ((int)uVar2 < param_3) {
    *(undefined *)(param_1 + 0x49) = 0;
    cVar1 = param_2[1];
    param_2[1] = cVar1 + '\x01';
    if ((char)(cVar1 + '\x01') == *param_2) {
      param_2[1] = '\0';
    }
    iVar3 = (byte)param_2[1] + 0x100;
  }
  return iVar3;
}



int FUN_8003a420(int param_1,char *param_2,int param_3,uint param_4,int param_5,int param_6,
                int param_7,uint *param_8)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  uint *b;
  undefined local_60;
  undefined local_5f;
  char local_5e;
  uint local_58;
  uint local_54;
  uint local_50;
  undefined auStack_48 [32];
  
  Vec3Subtract((int *)&local_58,(int *)(param_2 + (uint)(byte)param_2[1] * 0x10 + 8),
               (int *)(param_1 + 0xc));
  local_60 = 0;
  uVar2 = Vec3CalculateLengthE((int *)&local_58,flag2D);
  iVar3 = ATan2Scaled(uVar2,local_50,0);
  local_5f = (undefined)iVar3;
  uVar2 = Vec3CalculateLengthE((int *)&local_58,flag2D);
  if ((int)uVar2 < param_3) {
    local_5e = *(char *)(param_1 + 0x46);
  }
  else {
    iVar3 = ATan2Scaled(local_58,local_54,0);
    uVar2 = iVar3 - (uint)*(byte *)(param_1 + 0x46) & 0xff;
    if (0x80 < uVar2) {
      uVar2 = uVar2 - 0x100;
    }
    uVar4 = uVar2;
    if ((int)uVar2 < 0) {
      uVar4 = -uVar2;
    }
    if (param_7 < (int)uVar4) {
      param_4 = 0;
    }
    if ((int)uVar2 < -param_6) {
      uVar2 = -param_6;
    }
    local_5e = (char)uVar2;
    if (param_6 < (int)uVar2) {
      local_5e = (char)param_6;
    }
    local_5e = *(byte *)(param_1 + 0x46) + local_5e;
    *(char *)(param_1 + 0x46) = local_5e;
  }
  uVar2 = Vec3CalculateLengthE((int *)&local_58,flag3D);
  local_58 = param_4;
  if ((int)uVar2 < (int)param_4) {
    local_58 = uVar2;
  }
  UNK_MatrixOperation(&local_60,auStack_48,0);
  local_54 = 0;
  local_50 = 0;
  Vec3ApplyRotationMatrix(auStack_48,&local_58,&local_58);
  b = &local_58;
  if (param_8 != (uint *)0x0) {
    Vec3Add(param_8,param_8,&local_58);
    Vec3Copy((int *)&local_58,(int *)param_8);
    Vec3ScaleDownByPowerOfTwo((int *)&local_58,2);
    Vec3Subtract((int *)param_8,(int *)param_8,(int *)&local_58);
    b = param_8;
  }
  Vec3Add(&local_58,param_1 + 0xc,b);
  if (param_5 != 0) {
    MobyCollisionRelated(&local_58,param_5,0,0,param_1,0);
  }
  local_50 = local_50 + 0x400;
  iVar3 = MobyUpdatePosition(&local_58,0x400);
  if (iVar3 == 0) {
    iVar3 = local_50 + -0x400;
  }
  local_50 = iVar3;
  Vec3Copy((int *)(param_1 + 0xc),(int *)&local_58);
  FUN_800533d0(param_1);
  UpdateMobyCollision(param_1,2);
  Vec3Subtract((int *)&local_58,(int *)(param_2 + (uint)(byte)param_2[1] * 0x10 + 8),
               (int *)(param_1 + 0xc));
  uVar2 = Vec3CalculateLengthE((int *)&local_58,flag3D);
  iVar3 = 0;
  if ((int)uVar2 < param_3) {
    *(undefined *)(param_1 + 0x49) = 0;
    cVar1 = param_2[1];
    param_2[1] = cVar1 + '\x01';
    if ((char)(cVar1 + '\x01') == *param_2) {
      param_2[1] = '\0';
    }
    iVar3 = (byte)param_2[1] + 0x100;
  }
  return iVar3;
}



void InitArrayRelated(int param_1)

{
  *(undefined *)(param_1 + 0x50) = 0x10;
  *(undefined *)(param_1 + 0x47) = 4;
  *(undefined *)(param_1 + 0x3f) = 1;
  *(undefined *)(param_1 + 0x52) = 0xff;
  *(undefined *)(param_1 + 0x48) = 0;
  *(undefined *)(param_1 + 0x49) = 0;
  *(undefined *)(param_1 + 0x3c) = 0;
  *(undefined *)(param_1 + 0x3d) = 0;
  *(undefined *)(param_1 + 0x3e) = 0;
  *(undefined *)(param_1 + 0x40) = 0;
  *(undefined *)(param_1 + 0x41) = 0x20;
  *(undefined *)(param_1 + 0x43) = 0xff;
  *(undefined *)(param_1 + 0x4a) = 0xff;
  *(undefined *)(param_1 + 0x53) = 0xff;
  *(undefined4 *)(param_1 + 0x18) = 0;
  *(undefined *)(param_1 + 0x44) = 0;
  *(undefined *)(param_1 + 0x45) = 0;
  *(undefined *)(param_1 + 0x46) = 0;
  *(undefined4 *)(param_1 + 0x1c) = 0;
  *(undefined *)(param_1 + 0x57) = 0;
  *(undefined *)(param_1 + 0x54) = 0x7f;
  *(undefined2 *)(param_1 + 0x38) = 0;
  *(undefined *)(param_1 + 0x4b) = 0x20;
  *(undefined4 *)(param_1 + 0x4c) = 0;
  return;
}



int FUN_8003a9ec(int param_1,int param_2)

{
  int iVar1;
  
  if ((param_2 == 0) && (*(int *)(param_1 + 0x18) == 0)) {
    return 0;
  }
  if (((*(uint *)(param_1 + 0x18) & 0x10000) == 0) || (0x4f < param_2)) {
    if (param_2 < 0x21) {
      iVar1 = param_2 >> 2;
      if (param_2 < 1) goto LAB_8003aa50;
      param_2 = param_2 + -1;
    }
    else {
      param_2 = param_2 + -2;
    }
  }
  else {
    param_2 = param_2 + 0x10;
  }
  iVar1 = param_2 >> 2;
LAB_8003aa50:
  *(int *)(param_1 + 0x4c) = iVar1 * 0xfbf + 0xa18618;
  return param_2;
}



void FUN_8003aa84(int param_1)

{
  byte bVar1;
  char cVar2;
  
  if ((*(uint *)(param_1 + 0x18) & 0x10000) == 0) {
    bVar1 = *(byte *)(param_1 + 0x4e);
    cVar2 = bVar1 - 2;
    if ((0x20 < bVar1) || (cVar2 = bVar1 - 1, bVar1 != 0)) {
      *(char *)(param_1 + 0x4e) = cVar2;
    }
  }
  else {
    bVar1 = *(char *)(param_1 + 0x4e) + 0x18;
    *(byte *)(param_1 + 0x4e) = bVar1;
    if (0x60 < bVar1) {
      *(undefined *)(param_1 + 0x4e) = 0x60;
    }
  }
  return;
}



int FUN_8003aaec(int param_1,undefined4 param_2)

{
  int iVar1;
  int iVar2;
  int iVar3;
  undefined4 *result;
  
  iVar2 = FUN_8005882c();
  if (-1 < iVar2) {
    iVar1 = iVar2 * 0x18;
    result = &DAT_80077108 + iVar2 * 6;
    *(undefined *)(&DAT_80077118 + iVar2 * 6) = 0xff;
    *(undefined *)((int)&DAT_80077118 + iVar1 + 1) = 0xff;
    *(undefined *)((int)&DAT_80077118 + iVar1 + 2) = 0xff;
    UpdateMobyCollision(param_1,4);
    Vec3ApplyRotationMatrix(param_1 + 0x20,param_2,result);
    Vec3Add(result,result,param_1 + 0xc);
    iVar3 = rand();
    *(char *)((int)&DAT_80077114 + iVar1 + 2) = (char)iVar3;
    *(undefined *)((int)&DAT_80077114 + iVar1 + 3) = 3;
    *(undefined *)((int)&DAT_80077114 + iVar1 + 1) = 0x10;
    *(undefined *)(&DAT_80077114 + iVar2 * 6) = 0x20;
    *(undefined *)(&DAT_8007711c + iVar2 * 6) = 0x20;
    *(undefined *)((int)&DAT_8007711c + iVar1 + 1) = 0x40;
  }
  return iVar2;
}



Vec3 ** FUN_8003abc0(int param_1,int param_2,int *param_3,int *param_4)

{
  bool bVar1;
  char cVar2;
  uint uVar3;
  Vec3 **ppVVar4;
  int iVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  int unaff_s4;
  Vec3 *a;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  uVar7 = *(byte *)(param_1 + 0x53) & 0x7f;
  if (uVar7 - 1 < 0x7e) {
    if ((*(byte *)(param_1 + 0x3a) & 0x80) != 0) {
      return (Vec3 **)0x0;
    }
    *(byte *)(param_1 + 0x3a) = *(byte *)(param_1 + 0x3a) | 0x80;
  }
  else {
    uVar7 = 0xf;
    uVar3 = rand();
    uVar3 = (uVar3 & 0xfff) * 0x19 >> 10;
    if (uVar3 < 2) {
      uVar7 = 0xe;
    }
    else if ((spyro.health < 3) && (uVar3 < 0xc)) {
      uVar7 = 0x10;
    }
  }
  if (uVar7 == 0x10) {
    if ((ptr_SparxMoby == (Vec3 **)0x0) && (-1 < spyro.health)) {
      ppVVar4 = (Vec3 **)(*ptr_OverlaySpawnDynamicObj)(0x78,param_1);
      FUN_8003851c(ppVVar4,0,0);
      ptr_SparxMoby = ppVVar4;
      spyro.health = 1;
      return ppVVar4;
    }
    ppVVar4 = (Vec3 **)(*ptr_OverlaySpawnDynamicObj)(0x10,param_1);
    return ppVVar4;
  }
  if (uVar7 == 0xe) {
    ppVVar4 = (Vec3 **)(*ptr_OverlaySpawnDynamicObj)(0xe,param_1);
    a = *ppVVar4;
LAB_8003b0a4:
    *(undefined *)((int)&a[1].x + 2) = 1;
    return ppVVar4;
  }
  ppVVar4 = (Vec3 **)(*ptr_OverlaySpawnDynamicObj)(uVar7,param_1);
  a = *ppVVar4;
  if (param_2 == 0) {
    param_4 = (int *)(param_1 + 0xc);
LAB_8003add8:
    unaff_s4 = 0x8c;
    Vec3Copy(&local_38,param_4);
  }
  else {
    if (param_2 == 6) {
      Vec3Copy(&local_38,(int *)(param_1 + 0xc));
      unaff_s4 = 300;
      uVar7 = rand();
      local_38 = local_38 + -0x100 + (uVar7 & 0x1ff);
      uVar7 = rand();
      uVar7 = uVar7 & 0x1ff;
      local_34 = local_34 + -0x100;
    }
    else {
      if (param_2 != 1) {
        if (param_2 == 2) goto LAB_8003add8;
        if (1 < param_2 - 3U) {
          if (param_2 == 5) {
            Vec3Copy((int *)(ppVVar4 + 3),(int *)(param_1 + 0xc));
            ppVVar4[5] = (Vec3 *)&ppVVar4[5][0x15].y;
            Vec3Zero(a);
            return ppVVar4;
          }
          goto LAB_8003af6c;
        }
        if (param_2 == 4) {
LAB_8003ae94:
          Vec3Copy((int *)(ppVVar4 + 3),(int *)(param_1 + 0xc));
          ppVVar4[5] = (Vec3 *)&ppVVar4[5][0x15].y;
          Vec3Copy(&a->x,(int *)(ppVVar4 + 3));
          iVar5 = rand();
          *(byte *)((int)&a[1].y + 1) = (byte)iVar5 & 0xe;
          iVar5 = rand();
          *(byte *)((int)&a[1].y + 2) = (byte)iVar5 & 0xe;
          iVar5 = rand();
          *(byte *)((int)&a[1].y + 3) = (byte)iVar5 & 0xe;
          *(undefined *)((int)ppVVar4 + 0x49) = 3;
          *(undefined *)((int)ppVVar4 + 0x52) = 0xff;
          return ppVVar4;
        }
        if ((((spyro.state == 0xb) || (spyro.state == 0x18)) || (spyro.state == 0x14)) ||
           (spyro.state == 0x2c)) {
          if (param_2 == 4) goto LAB_8003ae94;
          iVar5 = Vec2EstimateOctagonalDistance((Vec2 *)(ppVVar4 + 3),(Vec2 *)&spyro);
          if (iVar5 < 0x800) {
            iVar5 = ((int)ppVVar4[5] - (int)*(short *)(ppVVar4 + 0xe)) - spyro.position.z;
            if (iVar5 < 1) {
              iVar5 = spyro.position.z - ((int)ppVVar4[5] - (int)*(short *)(ppVVar4 + 0xe));
            }
            if (iVar5 < 0x400) goto LAB_8003ae94;
          }
        }
      }
      Vec3Copy(&local_38,(int *)(param_1 + 0xc));
      unaff_s4 = 0x8c;
      uVar7 = rand();
      local_38 = local_38 + -0x200 + (uVar7 & 0x3ff);
      uVar7 = rand();
      uVar7 = uVar7 & 0x3ff;
      local_34 = local_34 + -0x200;
    }
    local_34 = local_34 + uVar7;
  }
LAB_8003af6c:
  if (param_3 == (int *)0x0) {
    Vec3Copy(aiStack_48,(int *)(param_1 + 0xc));
    local_40 = local_40 + 0x100;
  }
  else {
    Vec3Copy(aiStack_48,param_3);
  }
  local_30 = local_30 + 0x400;
  iVar5 = MobyUpdatePosition(&local_38,0x800);
  local_30 = local_30 + -0x400;
  uVar7 = Vec3CalculateLengthE(&unknownVector.x,flag2D);
  cVar2 = Maybe_CalculateAngle(unknownVector.z,uVar7);
  if (((iVar5 == 0) || ('\x17' < cVar2)) ||
     (iVar5 = MobyCollisionRelated(&local_38,200,0,0,0,0), iVar5 != 0)) {
    Vec3Copy(&local_38,(int *)(param_1 + 0xc));
  }
  iVar8 = 0;
  iVar5 = unaff_s4;
  iVar6 = local_40;
  if (unaff_s4 < 1) goto LAB_8003b04c;
  do {
    iVar6 = iVar6 + iVar5;
    while( true ) {
      iVar5 = iVar5 + -10;
      iVar8 = iVar8 + 1;
      if (0 < iVar5) break;
LAB_8003b04c:
      bVar1 = iVar6 <= local_30;
      iVar6 = iVar6 + iVar5;
      if (bVar1) {
        Vec3Copy((int *)(ppVVar4 + 3),aiStack_48);
        Vec3Subtract(&local_38,&local_38,aiStack_48);
        MaybeInverseSingleVecInterpolate(&local_38,&local_38,iVar8);
        local_30 = unaff_s4;
        Vec3Copy(&a->x,&local_38);
        goto LAB_8003b0a4;
      }
    }
  } while( true );
}



undefined4 FUN_8003b0dc(int param_1)

{
  ushort uVar1;
  ushort *puVar2;
  
  if (param_1 < DAT_800757b4) {
    puVar2 = *(ushort **)(param_1 * 4 + DAT_800757f8);
    do {
      uVar1 = *puVar2;
      if ((byte)ptr_startOfCurrentLevelMobys[(uVar1 & 0x7fff) * 0x58 + 0x48] < 0x80) {
        return 1;
      }
      puVar2 = puVar2 + 1;
    } while (-1 < (int)((uint)uVar1 << 0x10));
  }
  return 0;
}



void FUN_8003b1e8(int param_1,char param_2)

{
  ushort uVar1;
  ushort *puVar2;
  
  if ((int)(uint)*(byte *)(param_1 + 0x43) < DAT_800757b4) {
    puVar2 = *(ushort **)((uint)*(byte *)(param_1 + 0x43) * 4 + DAT_800757f8);
    do {
      if ((byte)ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] < 0x80) {
        ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] = param_2;
      }
      uVar1 = *puVar2;
      puVar2 = puVar2 + 1;
    } while (-1 < (short)uVar1);
  }
  else if (*(byte *)(param_1 + 0x48) < 0x80) {
    *(char *)(param_1 + 0x48) = param_2;
  }
  return;
}



void FUN_8003b294(int param_1,int param_2,uint param_3,int param_4,int param_5,int param_6,
                 int param_7)

{
  ushort uVar1;
  char *pcVar2;
  byte bVar3;
  int iVar4;
  undefined3 extraout_var;
  uint uVar5;
  ushort *puVar6;
  
  if (param_2 < DAT_800757b4) {
    puVar6 = *(ushort **)(param_2 * 4 + DAT_800757f8);
    do {
      pcVar2 = ptr_startOfCurrentLevelMobys;
      uVar5 = *puVar6 & 0x7fff;
      if ((byte)ptr_startOfCurrentLevelMobys[uVar5 * 0x58 + 0x48] < 0x80) {
        iVar4 = *(int *)(param_1 + 0xc) -
                *(int *)(ptr_startOfCurrentLevelMobys + uVar5 * 0x58 + 0xc);
        if (iVar4 < 1) {
          iVar4 = *(int *)(ptr_startOfCurrentLevelMobys + uVar5 * 0x58 + 0xc) -
                  *(int *)(param_1 + 0xc);
        }
        if (iVar4 < param_6) {
          iVar4 = *(int *)(param_1 + 0x10) -
                  *(int *)(ptr_startOfCurrentLevelMobys + uVar5 * 0x58 + 0x10);
          if (iVar4 < 1) {
            iVar4 = *(int *)(ptr_startOfCurrentLevelMobys + uVar5 * 0x58 + 0x10) -
                    *(int *)(param_1 + 0x10);
          }
          if ((iVar4 < param_6) &&
             (iVar4 = Vec2EstimateOctagonalDistance
                                ((Vec2 *)(param_1 + 0xc),
                                 (Vec2 *)(ptr_startOfCurrentLevelMobys + uVar5 * 0x58 + 0xc)),
             iVar4 < param_4)) {
            iVar4 = *(int *)(pcVar2 + uVar5 * 0x58 + 0x14) - *(int *)(param_1 + 0x14);
            if (iVar4 < 1) {
              iVar4 = *(int *)(param_1 + 0x14) - *(int *)(pcVar2 + uVar5 * 0x58 + 0x14);
            }
            if (iVar4 < param_5) {
              iVar4 = ATan2Scaled(*(int *)(pcVar2 + uVar5 * 0x58 + 0xc) - *(int *)(param_1 + 0xc),
                                  *(int *)(pcVar2 + uVar5 * 0x58 + 0x10) - *(int *)(param_1 + 0x10),
                                  0);
              bVar3 = Maybe_Calculate8BitDifference((uint)*(byte *)(param_1 + 0x46),iVar4);
              if (CONCAT31(extraout_var,bVar3) < param_7) {
                *(uint *)(pcVar2 + uVar5 * 0x58 + 0x18) =
                     *(uint *)(pcVar2 + uVar5 * 0x58 + 0x18) | param_3;
              }
            }
          }
        }
      }
      uVar1 = *puVar6;
      puVar6 = puVar6 + 1;
    } while (-1 < (short)uVar1);
  }
  return;
}



void FUN_8003b47c(int param_1,char param_2,uint param_3)

{
  ushort uVar1;
  ushort *puVar2;
  
  if ((int)(uint)*(byte *)(param_1 + 0x43) < DAT_800757b4) {
    puVar2 = *(ushort **)((uint)*(byte *)(param_1 + 0x43) * 4 + DAT_800757f8);
    do {
      if (((byte)ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] < 0x80) &&
         ((byte)ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] != param_3)) {
        ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] = param_2;
      }
      uVar1 = *puVar2;
      puVar2 = puVar2 + 1;
    } while (-1 < (short)uVar1);
  }
  else if ((*(byte *)(param_1 + 0x48) < 0x80) && (*(byte *)(param_1 + 0x48) != param_3)) {
    *(char *)(param_1 + 0x48) = param_2;
  }
  return;
}



void FUN_8003b538(int param_1,char param_2,uint param_3)

{
  ushort uVar1;
  ushort *puVar2;
  
  if ((int)(uint)*(byte *)(param_1 + 0x43) < DAT_800757b4) {
    puVar2 = *(ushort **)((uint)*(byte *)(param_1 + 0x43) * 4 + DAT_800757f8);
    do {
      if (((byte)ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] < 0x80) &&
         ((byte)ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] == param_3)) {
        ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] = param_2;
      }
      uVar1 = *puVar2;
      puVar2 = puVar2 + 1;
    } while (-1 < (short)uVar1);
  }
  else if ((*(byte *)(param_1 + 0x48) < 0x80) && (*(byte *)(param_1 + 0x48) == param_3)) {
    *(char *)(param_1 + 0x48) = param_2;
  }
  return;
}



void FUN_8003b5f4(int param_1,uint param_2)

{
  ushort uVar1;
  char *pcVar2;
  uint uVar3;
  ushort *puVar4;
  
  pcVar2 = ptr_startOfCurrentLevelMobys;
  if (param_1 < DAT_800757b4) {
    puVar4 = *(ushort **)(param_1 * 4 + DAT_800757f8);
    do {
      uVar3 = *puVar4 & 0x7fff;
      if ((byte)pcVar2[uVar3 * 0x58 + 0x48] < 0x80) {
        *(uint *)(pcVar2 + uVar3 * 0x58 + 0x18) = *(uint *)(pcVar2 + uVar3 * 0x58 + 0x18) | param_2;
      }
      uVar1 = *puVar4;
      puVar4 = puVar4 + 1;
    } while (-1 < (short)uVar1);
  }
  return;
}



void FUN_8003b688(int param_1)

{
  ushort uVar1;
  ushort *puVar2;
  
  if (param_1 < DAT_800757b4) {
    puVar2 = *(ushort **)(param_1 * 4 + DAT_800757f8);
    do {
      if ((byte)ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] < 0x80) {
        DespawnObjects();
      }
      uVar1 = *puVar2;
      puVar2 = puVar2 + 1;
    } while (-1 < (short)uVar1);
  }
  return;
}



void FUN_8003b728(int param_1,char param_2)

{
  ushort uVar1;
  ushort *puVar2;
  
  if ((int)(uint)*(byte *)(param_1 + 0x43) < DAT_800757b4) {
    puVar2 = *(ushort **)((uint)*(byte *)(param_1 + 0x43) * 4 + DAT_800757f8);
    do {
      if ((byte)ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x48] < 0x80) {
        ptr_startOfCurrentLevelMobys[(*puVar2 & 0x7fff) * 0x58 + 0x49] = param_2;
      }
      uVar1 = *puVar2;
      puVar2 = puVar2 + 1;
    } while (-1 < (short)uVar1);
  }
  else {
    *(char *)(param_1 + 0x49) = param_2;
  }
  return;
}



void FUN_8003b7c0(char *param_1)

{
  int iVar1;
  
  if ((ptr_startOfCurrentLevelMobys <= param_1) && (param_1 < DAT_80075890)) {
    iVar1 = ((int)param_1 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d;
    (&DAT_800778b8)[iVar1 >> 8] = (&DAT_800778b8)[iVar1 >> 8] | 1 << (iVar1 >> 3 & 0x1fU);
  }
  return;
}



void collectCollectable(int gemValue,int *ptr_moby)

{
  int iVar1;
  uint uVar2;
  
  if (gemValue != 0) {
    if (0x2ff < ptr_moby[5]) {
      maybe_SpawnGemNumberMoby();
    }
    globalGemCount = globalGemCount + gemValue;
    levelGemsCollectedArray[levelID_Indexer] = levelGemsCollectedArray[levelID_Indexer] + gemValue;
  }
  if ((ptr_moby < ptr_startOfCurrentLevelMobys) || (DAT_80075890 <= ptr_moby)) {
    uVar2 = (uint)*(byte *)((int)ptr_moby + 0x56);
  }
  else {
    iVar1 = ((int)ptr_moby - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d;
    uVar2 = iVar1 >> 3;
    (&DAT_800778b8)[iVar1 >> 8] = (&DAT_800778b8)[iVar1 >> 8] | 1 << (uVar2 & 0x1f);
  }
  *(uint *)(collectablesStateFlags + ((int)uVar2 >> 5) * 4 + levelID_Indexer * 0x20) =
       *(uint *)(collectablesStateFlags + ((int)uVar2 >> 5) * 4 + levelID_Indexer * 0x20) |
       1 << (uVar2 & 0x1f);
  PlaySoundEffect((uint)*localSFXArray,ptr_moby,0x10,0);
  return;
}



void collectGem(int ptr_gemMoby)

{
  short sVar1;
  undefined4 uVar2;
  
  (&treasureFlagAlgo)[amountOfLiteralGemsPickedUp & 0x1f] =
       (char)*(undefined2 *)(ptr_gemMoby + 0x36);
  amountOfLiteralGemsPickedUp = amountOfLiteralGemsPickedUp + 1;
  if (ptr_gemMoby == DAT_80075758) {
    keys = 3;
  }
  UpdateMobyCollision(ptr_gemMoby,4);
  (*ptr_OverlayCreateParticle)
            (6,0xc,ptr_gemMoby,*(undefined4 *)(&DAT_8006e330 + *(short *)(ptr_gemMoby + 0x36) * 4));
  sVar1 = *(short *)(ptr_gemMoby + 0x36);
  if (sVar1 == 0x53) {
    uVar2 = 1;
  }
  else if (sVar1 == 0x54) {
    uVar2 = 2;
  }
  else if (sVar1 == 0x55) {
    uVar2 = 5;
  }
  else if (sVar1 == 0x56) {
    uVar2 = 10;
  }
  else {
    uVar2 = 0x19;
    if (sVar1 != 0x57) {
      return;
    }
  }
  collectCollectable(uVar2,ptr_gemMoby);
  return;
}



bool FUN_8003bad0(int param_1,int *param_2,uint param_3,uint param_4,uint param_5,int param_6)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  int *b;
  bool bVar5;
  uint local_58;
  uint local_54;
  uint local_50;
  undefined auStack_48 [32];
  
  bVar5 = false;
  b = (int *)(param_1 + 0xc);
  Vec3Subtract((int *)&local_58,param_2,b);
  iVar1 = ATan2Scaled(local_58,local_54,0);
  uVar2 = Vec3CalculateLengthE((int *)&local_58,flag2D);
  iVar3 = ATan2Scaled(uVar2,local_50,0);
  uVar2 = iVar1 - (uint)*(byte *)(param_1 + 0x46) & 0xff;
  if (0x7f < uVar2) {
    uVar2 = uVar2 - 0x100;
  }
  if ((int)uVar2 < (int)-param_4) {
    uVar2 = -param_4;
  }
  if ((int)param_4 < (int)uVar2) {
    uVar2 = param_4;
  }
  uVar4 = iVar3 - (uint)*(byte *)(param_1 + 0x45) & 0xff;
  if (0x7f < uVar4) {
    uVar4 = uVar4 - 0x100;
  }
  if ((int)uVar4 < (int)-param_5) {
    uVar4 = -param_5;
  }
  if ((int)param_5 < (int)uVar4) {
    uVar4 = param_5;
  }
  *(byte *)(param_1 + 0x46) = *(byte *)(param_1 + 0x46) + (char)uVar2;
  *(char *)(param_1 + 0x45) = *(char *)(param_1 + 0x45) + (char)uVar4;
  UNK_MatrixOperation(param_1 + 0x44,auStack_48,0);
  local_54 = 0;
  local_50 = 0;
  local_58 = param_3;
  Vec3ApplyRotationMatrix(auStack_48,&local_58,&local_58);
  Vec3Add(b,b,&local_58);
  if (param_6 != 0) {
    iVar1 = FUN_8004be4c(b,param_6,param_6);
    bVar5 = iVar1 != 0;
    if (bVar5) {
      Vec3Copy(b,&unknownPositionVector.x);
    }
    iVar1 = MobyCollisionRelated(b,param_6,0,0,param_1,1);
    if (iVar1 != 0) {
      bVar5 = true;
    }
  }
  UpdateMobyCollision(param_1,2);
  FUN_80038340(param_1);
  FUN_800533d0(param_1);
  return bVar5;
}



undefined4 FUN_8003bccc(int param_1,int param_2,int param_3,int param_4,uint param_5)

{
  int iVar1;
  int unaff_s6;
  undefined auStack_50 [32];
  int local_30;
  undefined4 local_2c;
  int local_28;
  
  if (DAT_800756c4 == 3) {
    param_2 = param_2 + (param_2 >> 1);
  }
  else if (DAT_800756c4 == 4) {
    param_2 = param_2 << 1;
  }
  UNK_MatrixOperation(param_1 + 0x44,auStack_50,0);
  local_28 = 0;
  local_2c = 0;
  local_30 = param_2;
  Vec3ApplyRotationMatrix(auStack_50,&local_30,&local_30);
  Vec3Add(&local_30,&local_30,param_1 + 0xc);
  if ((param_5 & 1) != 0) {
    local_28 = local_28 + 300 + param_4;
  }
  if (param_3 != 0) {
    if ((param_5 & 2) == 0) {
      iVar1 = MobyCollisionRelated(&local_30,param_3,0,0,param_1,0);
      if (iVar1 != 0) {
        return 1;
      }
    }
    else {
      MobyCollisionRelated(&local_30,param_3,0,0,param_1,3);
    }
  }
  if ((param_4 != 0) && (iVar1 = FUN_8004be4c(&local_30,param_4,param_4), iVar1 != 0)) {
    return 2;
  }
  if ((param_5 & 1) != 0) {
    local_28 = (local_28 + -300) - param_4;
  }
  if ((param_5 & 0x14) != 0) {
    local_28 = local_28 + 0x400;
    unaff_s6 = MobyUpdatePosition(&local_30,0x800);
  }
  if ((param_5 & 0x10) != 0) {
    iVar1 = unaff_s6 - *(int *)(param_1 + 0x14);
    if (iVar1 < 1) {
      if (200 < *(int *)(param_1 + 0x14) - unaff_s6) {
        return 2;
      }
    }
    else if (200 < iVar1) {
      return 2;
    }
  }
  Vec3Copy((int *)(param_1 + 0xc),&local_30);
  FUN_800533d0(param_1);
  UpdateMobyCollision(param_1,2);
  return 0;
}



undefined4
FUN_8003bfc0(int param_1,byte *param_2,int *param_3,int *param_4,int param_5,uint param_6)

{
  byte bVar1;
  undefined uVar2;
  char cVar3;
  int iVar4;
  uint uVar5;
  undefined *puVar6;
  undefined4 uVar7;
  int iVar8;
  int iVar9;
  int local_48;
  int local_44;
  int local_40;
  undefined auStack_38 [16];
  
  uVar7 = 0;
  if (param_5 < 9) {
    if (param_5 < 7) {
      iVar4 = 1;
      if (param_5 < 5) {
        puVar6 = &DAT_80075280;
      }
      else {
        puVar6 = &DAT_8006cba4;
        iVar4 = 3;
      }
    }
    else {
      puVar6 = &DAT_8006cbb4;
      iVar4 = 5;
    }
  }
  else {
    puVar6 = &DAT_8006cbcc;
    iVar4 = 7;
  }
  uVar5 = (uint)param_2[1];
  if (*param_4 < param_5) {
    if (iVar4 < *param_4) {
      Vec3Subtract(&local_48,(int *)(param_2 + uVar5 * 0x10 + 8),(int *)(param_1 + 0xc));
      param_5 = param_5 - (*param_4 + -1);
      iVar8 = local_48 / param_5;
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_48 == -0x80000000)) {
        trap(0x1800);
      }
      iVar9 = local_44 / param_5;
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_44 == -0x80000000)) {
        trap(0x1800);
      }
      iVar4 = local_40 / param_5;
      if (param_5 == 0) {
        trap(0x1c00);
      }
      local_48 = iVar8;
      local_44 = iVar9;
      if ((param_5 == -1) && (local_40 == -0x80000000)) {
        trap(0x1800);
      }
    }
    else {
      Vec3Subtract(&local_48,(int *)(param_2 + uVar5 * 0x10 + 8),(int *)(param_1 + 0xc));
      param_5 = param_5 - (*param_4 + -1);
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_48 == -0x80000000)) {
        trap(0x1800);
      }
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_44 == -0x80000000)) {
        trap(0x1800);
      }
      if (param_5 == 0) {
        trap(0x1c00);
      }
      if ((param_5 == -1) && (local_40 == -0x80000000)) {
        trap(0x1800);
      }
      local_48 = local_48 / param_5;
      local_44 = local_44 / param_5;
      local_40 = local_40 / param_5;
      Vec3Scale(&local_48,&local_48,(int)*(short *)(puVar6 + *param_4 * 4));
      Vec3Scale(auStack_38,param_3,(int)*(short *)(puVar6 + *param_4 * 4 + 2));
      Vec3Add(&local_48,&local_48,auStack_38);
      Vec3ScaleDownByPowerOfTwo(&local_48,10);
      iVar4 = local_40;
    }
    local_40 = iVar4;
    *param_4 = *param_4 + 1;
  }
  else {
    Vec3Subtract(&local_48,(int *)(param_2 + uVar5 * 0x10 + 8),(int *)(param_1 + 0xc));
    Vec3Copy(param_3,&local_48);
    bVar1 = param_2[1];
    param_2[1] = bVar1 + 1;
    uVar7 = 1;
    if (*param_2 <= (byte)(bVar1 + 1)) {
      param_2[1] = 0;
      uVar7 = 2;
    }
    *param_4 = 0;
  }
  if ((param_6 & 4) == 0) {
    local_40 = 0;
  }
  uVar2 = Maybe_CalculateAngle(local_48,local_44);
  *(undefined *)(param_1 + 0x46) = uVar2;
  uVar5 = Vec3CalculateLengthE(&local_48,flag2D);
  cVar3 = Maybe_CalculateAngle(local_40,uVar5);
  *(char *)(param_1 + 0x45) = '@' - cVar3;
  Vec3Add(param_1 + 0xc,param_1 + 0xc,&local_48);
  UpdateMobyCollision(param_1,2);
  return uVar7;
}



void FUN_8003c358(int **param_1,int param_2)

{
  undefined uVar1;
  int iVar2;
  int *piVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int *destVec;
  int iVar7;
  byte *__s;
  ushort uVar8;
  uint uVar9;
  int local_70;
  int local_6c;
  undefined4 local_68;
  int local_60;
  int local_5c;
  undefined4 local_58;
  Vec3 VStack_50;
  int local_40;
  int local_3c;
  undefined4 local_38;
  
  __s = PTR_s_RETURN_HOME_8006f880;
  if (param_2 == 0) {
    uVar9 = ATan2Scaled(spyro.position.x - (int)param_1[3],spyro.position.y - (int)param_1[4],0);
    uVar8 = (ushort)uVar9;
    uVar9 = uVar9 & 0xff;
  }
  else {
    uVar9 = (uint)*(byte *)((int)param_1 + 0x46);
    uVar8 = (ushort)*(byte *)((int)param_1 + 0x46);
    __s = (&PTR_DAT_8006f7f0)[**param_1];
  }
  iVar2 = CosScaled(uVar9 << 4);
  local_70 = iVar2 * 3 >> 4;
  iVar2 = SinScaled(uVar9 << 4);
  iVar5 = (uVar9 + 0x40) * 0x10;
  local_6c = iVar2 * 3 >> 4;
  local_68 = 0;
  local_60 = CosScaled(iVar5);
  local_60 = local_60 >> 5;
  local_5c = SinScaled(iVar5);
  local_5c = local_5c >> 5;
  local_58 = 0;
  if (param_2 != 0) {
    if (*(char *)((int)param_1 + 0x49) == '\0') {
      uVar8 = *(byte *)((int)param_1 + 0x46) - 0x80;
    }
    else {
      uVar8 = (ushort)*(byte *)((int)param_1 + 0x46);
      Vec3Zero(&VStack_50);
      Vec3Subtract(&local_70,&VStack_50.x,&local_70);
      Vec3Subtract(&local_60,&VStack_50.x,&local_60);
    }
  }
  iVar2 = strlen((char *)__s);
  Vec3Scale(&VStack_50,&local_60,iVar2 + -1);
  Vec3ScaleUpByPowerOfTwo(&local_60,1);
  uVar9 = (iVar2 + -1) * 2;
  iVar6 = (uVar9 & 0xff) << 4;
  iVar5 = CosScaled(iVar6);
  VStack_50.z = VStack_50.z + (iVar5 * 3 >> 3);
  local_40 = CosScaled(iVar6);
  local_40 = local_70 * local_40;
  local_3c = CosScaled(iVar6);
  local_3c = local_6c * local_3c;
  iVar5 = 0;
  local_38 = 0;
  if (0 < iVar2) {
    do {
      uVar4 = (uint)*__s;
      if (uVar4 != 0x20) {
        if (uVar4 - 0x41 < 0x1a) {
          iVar6 = uVar4 + 0x169;
        }
        else {
          iVar6 = 0x4c;
        }
        piVar3 = (int *)(*ptr_OverlaySpawnDynamicObj)(iVar6,param_1);
        *(int ***)*piVar3 = param_1;
        iVar7 = (uVar9 & 0xff) << 4;
        *(short *)(*piVar3 + 4) = (short)iVar2;
        *(short *)(*piVar3 + 6) = (short)iVar5;
        iVar6 = CosScaled(iVar7);
        piVar3[3] = local_70 * iVar6;
        iVar6 = CosScaled(iVar7);
        destVec = piVar3 + 3;
        piVar3[5] = 0;
        piVar3[4] = local_6c * iVar6;
        Vec3Subtract(destVec,destVec,&local_40);
        Vec3ScaleDownByPowerOfTwo(destVec,10);
        Vec3Add(destVec,destVec,&local_70);
        Vec3Add(destVec,destVec,param_1 + 3);
        Vec3Subtract(destVec,destVec,&VStack_50.x);
        iVar6 = CosScaled(iVar7);
        iVar6 = piVar3[5] + (iVar6 * 3 >> 3);
        piVar3[5] = iVar6;
        if (*(short *)((int)piVar3 + 0x36) == 0x4c) {
          piVar3[5] = iVar6 + 0x100;
        }
        *(char *)((int)piVar3 + 0x46) = (char)uVar8;
        *(ushort *)(piVar3 + 0xe) = uVar8 & 0xff;
        uVar1 = *(undefined *)((int)param_1 + 0x49);
        *(char *)((int)piVar3 + 0x49) = (char)(iVar5 << 3);
        *(undefined *)((int)piVar3 + 0x4f) = 2;
        *(undefined *)(piVar3 + 0x12) = uVar1;
      }
      Vec3Subtract(&VStack_50.x,&VStack_50.x,&local_60);
      uVar9 = uVar9 - 4;
      iVar5 = iVar5 + 1;
      __s = __s + 1;
    } while (iVar5 < iVar2);
  }
  return;
}



void FUN_8003c6e4(int **param_1)

{
  byte bVar1;
  int iVar2;
  int *piVar3;
  uint local_18;
  uint local_14;
  undefined4 local_10;
  
  piVar3 = *param_1;
  if ((*(char *)((int)piVar3 + 0x13) == '\0') || ((int)param_1[5] <= piVar3[3])) {
    (*ptr_OverlayCreateParticle)(3,0x46,param_1 + 3,0x10);
    DespawnObjects(param_1);
  }
  else {
    param_1[3] = (int *)((int)param_1[3] + *piVar3);
    param_1[4] = (int *)((int)param_1[4] + piVar3[1]);
    iVar2 = piVar3[2];
    piVar3[2] = iVar2 + -6;
    if (iVar2 + -6 < -0x80) {
      piVar3[2] = -0x80;
    }
    param_1[5] = (int *)((int)param_1[5] + piVar3[2]);
    *(char *)(param_1 + 0x11) = *(char *)(param_1 + 0x11) + *(char *)(piVar3 + 4);
    *(char *)((int)param_1 + 0x45) = *(char *)((int)param_1 + 0x45) + *(char *)((int)piVar3 + 0x11);
    *(char *)((int)param_1 + 0x46) = *(char *)((int)param_1 + 0x46) + *(char *)((int)piVar3 + 0x12);
    bVar1 = *(char *)((int)piVar3 + 0x13) - 1;
    *(byte *)((int)piVar3 + 0x13) = bVar1;
    if ((bVar1 & 1) == 0) {
      local_18 = rand();
      local_18 = local_18 & 3;
      local_14 = rand();
      local_14 = local_14 & 3;
      local_10 = 0x14;
      (*ptr_OverlayCreateParticle)(1,1,param_1 + 3,&local_18);
    }
  }
  return;
}



void FUN_8003c85c(int *param_1)

{
  uint x;
  undefined4 uVar1;
  int iVar2;
  undefined4 uVar3;
  undefined auStack_40 [32];
  uint local_20;
  uint local_1c;
  uint local_18;
  
  local_20 = 100;
  local_1c = 0;
  local_18 = 0x40;
  Vec3ApplyRotationMatrix(0x80078a8c,&local_20,&local_20);
  Vec3Add(&local_20,&local_20,&spyro);
  Vec3Subtract((int *)&local_20,param_1,(int *)&local_20);
  MatrixTranspose(auStack_40,0x80078a8c);
  Vec3ApplyRotationMatrix(auStack_40,&local_20,&local_20);
  x = Vec3CalculateLengthE((int *)&local_20,flag2D);
  spyro.TargetHeadAngle._4_4_ = ATan2Scaled(x,local_18,1);
  uVar1._0_2_ = 0x180;
  uVar1._2_2_ = 0;
  if ((spyro.TargetHeadAngle._4_4_ - 0x181 < 0x67f) ||
     (uVar1._0_2_ = 0xe80, uVar1._2_2_ = 0, spyro.TargetHeadAngle._4_4_ - 0x800 < 0x680)) {
    spyro.TargetHeadAngle._4_4_ = uVar1;
  }
  iVar2 = ATan2Scaled(local_20,local_1c,1);
  if (iVar2 - 0x201U < 0x5ff) {
    uVar3._0_2_ = 0x200;
    uVar3._2_2_ = 0;
  }
  else {
    uVar3._0_2_ = 0xe00;
    uVar3._2_2_ = 0;
    if (0x5ff < iVar2 - 0x800U) {
      spyro.TargetHeadAngle.yaw = (short)iVar2;
      spyro.TargetHeadAngle.pad3 = (short)((uint)iVar2 >> 0x10);
      return;
    }
  }
  spyro.TargetHeadAngle.yaw = (short)uVar3;
  spyro.TargetHeadAngle.pad3 = SUB42(uVar3,2);
  return;
}



void FUN_8003c994(int param_1,char *param_2,int param_3,int param_4,undefined4 param_5,
                 undefined4 param_6,undefined4 param_7)

{
  char cVar1;
  uint uVar2;
  int iVar3;
  int aiStack_30 [4];
  
  Vec3Subtract(aiStack_30,(int *)(param_1 + 0xc),
               (int *)(param_2 + (uint)(byte)param_2[1] * 0x10 + 8));
  uVar2 = Vec3CalculateLengthE(aiStack_30,flag3D);
  if ((int)uVar2 < param_3) {
    if (*(short *)(param_2 + 6) == -1) {
      cVar1 = param_2[1];
      param_2[1] = cVar1 + '\x01';
      if ((char)(cVar1 + '\x01') == *param_2) {
        param_2[1] = '\0';
      }
    }
    else {
      cVar1 = param_2[1];
      param_2[1] = cVar1 + -1;
      if ((char)(cVar1 + -1) == -1) {
        param_2[1] = *param_2 + -1;
      }
    }
  }
  iVar3 = (int)uVar2 >> 4;
  if (param_4 < (int)uVar2 >> 4) {
    iVar3 = param_4;
  }
  FUN_8003bad0(param_1,param_2 + (uint)(byte)param_2[1] * 0x10 + 8,iVar3,param_6,param_7,param_5);
  return;
}



void FUN_8003cac4(int param_1)

{
  int *piVar1;
  int iVar2;
  
  iVar2 = 0;
  piVar1 = &DAT_80078608;
  (&DAT_80078630)[param_1] = (&DAT_80078630)[param_1] + 1;
  while( true ) {
    if (*piVar1 < 0) {
      *piVar1 = param_1;
      return;
    }
    if (*piVar1 == param_1) break;
    iVar2 = iVar2 + 1;
    piVar1 = piVar1 + 1;
    if (3 < iVar2) {
      return;
    }
  }
  return;
}



void FUN_8003cb24(char param_1)

{
  byte bVar1;
  
  spyro.maybe_AnimSpeedRelated = spyro.maybe_AnimSpeedRelated + param_1;
  if (0xf < (byte)spyro.maybe_AnimSpeedRelated) {
    spyro.maybe_AnimSpeedRelated = spyro.maybe_AnimSpeedRelated - 0x10;
    bVar1 = spyro.nextKeyframe + 1;
    spyro.currentAnim = spyro.nextAnim;
    spyro.currentKeyfame = spyro.nextKeyframe;
    spyro.nextKeyframe = bVar1;
    if ((byte)(&DAT_8006c4a1)[(uint)(byte)spyro.nextAnim * 4] <= bVar1) {
      spyro.nextKeyframe = (&DAT_8006c4a0)[(uint)(byte)spyro.nextAnim * 4];
    }
  }
  return;
}



undefined4 FUN_8003cbb8(char param_1)

{
  byte bVar1;
  undefined4 uVar2;
  
  spyro.maybe_AnimSpeedRelated = spyro.maybe_AnimSpeedRelated + param_1;
  if ((byte)spyro.maybe_AnimSpeedRelated < 0x10) {
    uVar2 = 0;
  }
  else {
    spyro.maybe_AnimSpeedRelated = spyro.maybe_AnimSpeedRelated - 0x10;
    bVar1 = spyro.nextKeyframe + 1;
    spyro.currentAnim = spyro.nextAnim;
    spyro.currentKeyfame = spyro.nextKeyframe;
    uVar2 = 0;
    spyro.nextKeyframe = bVar1;
    if ((byte)(&DAT_8006c4a2)[(uint)(byte)spyro.nextAnim * 4] <= bVar1) {
      spyro.nextAnim = (&DAT_8006c470)[spyro.state];
      if ((&DAT_8006bc84)[spyro.state + spyro.maybe_animStateRelated * 0x2d] == '\n') {
        spyro.nextKeyframe = (&DAT_8006c4a0)[(uint)(byte)(&DAT_8006c470)[spyro.state] * 4];
      }
      else {
        spyro.nextKeyframe = '\x01';
        spyro.maybe_AnimSpeedRelated = '\x04';
      }
      spyro.maybe_animStateRelated = spyro.state;
      uVar2 = 1;
    }
  }
  return uVar2;
}



void SpyroBodyAnimation(void)

{
  char cVar1;
  
  switch((&DAT_8006bc84)[spyro.state + spyro.maybe_animStateRelated * 0x2d]) {
  case 1:
    spyro.maybe_animUpdateRelated = 1;
    cVar1 = (&DAT_8006c470)[spyro.state];
    spyro.maybe_AnimSpeedRelated = '\x02';
    goto LAB_8003cdd0;
  case 2:
    if ((byte)spyro.nextKeyframe < (byte)(&DAT_8006c4a1)[(uint)(byte)spyro.nextAnim * 4]) {
      spyro.maybe_animUpdateRelated = 0;
    }
    else {
      spyro.maybe_animUpdateRelated = 2;
      spyro.currentAnim = spyro.nextAnim;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = (&DAT_8006c4a0)[(uint)(byte)spyro.nextAnim * 4];
      spyro.maybe_AnimSpeedRelated = '\x02';
    }
    break;
  case 3:
  case 10:
    spyro.maybe_animUpdateRelated = 3;
    break;
  case 4:
    spyro.currentKeyfame = spyro.nextKeyframe;
    spyro.currentAnim = spyro.nextAnim;
    if ((spyro.maybe_animStateRelated == 6) && (spyro.unkown14 < 0x18)) {
      spyro.maybe_animUpdateRelated = 1;
      spyro.nextAnim = (&DAT_8006c470)[spyro.state];
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\x02';
      spyro.maybe_animStateRelated = spyro.state;
    }
    else {
      spyro.nextKeyframe = (&DAT_8006c4a1)[(uint)(byte)spyro.nextAnim * 4];
      spyro.maybe_AnimSpeedRelated = '\x04';
      spyro.maybe_animUpdateRelated = 4;
      if ((spyro.maybe_animStateRelated == 6) && (DAT_8007584c = 0xa0, vibrationFlag < 0xf)) {
        vibrationFlag = 0xf;
      }
    }
    break;
  case 5:
    spyro.currentAnim = spyro.nextAnim;
    spyro.currentKeyfame = spyro.nextKeyframe;
    spyro.nextAnim = (&DAT_8006c470)[spyro.state];
    spyro.nextKeyframe = spyro.nextKeyframe + 1;
    if ((byte)(&DAT_8006c4a1)[(uint)(byte)spyro.nextAnim * 4] <= (byte)spyro.nextKeyframe) {
      spyro.nextKeyframe = (&DAT_8006c4a0)[(uint)(byte)spyro.nextAnim * 4];
    }
    spyro.maybe_AnimSpeedRelated = '\x04';
    spyro.maybe_animUpdateRelated = 5;
    spyro.maybe_animStateRelated = spyro.state;
    break;
  case 6:
    spyro.maybe_animUpdateRelated = 6;
    spyro.currentAnim = spyro.nextAnim;
    spyro.currentKeyfame = spyro.nextKeyframe;
    spyro.nextAnim = (&DAT_8006c470)[spyro.state];
    spyro.nextKeyframe = (&DAT_8006c4a0)[(uint)(byte)spyro.nextAnim * 4];
    spyro.maybe_AnimSpeedRelated = '\x02';
    spyro.maybe_animStateRelated = spyro.state;
    break;
  case 7:
    spyro.currentAnim = (&DAT_8006c470)[spyro.state];
    spyro.currentKeyfame = '\0';
    spyro.nextAnim = (&DAT_8006c470)[spyro.state];
    spyro.nextKeyframe = '\x01';
    spyro.maybe_AnimSpeedRelated = '\0';
    spyro.maybe_animUpdateRelated = 0;
    spyro.maybe_animStateRelated = spyro.state;
    break;
  case 8:
    spyro.maybe_animUpdateRelated = 8;
    cVar1 = (&DAT_8006c470)[spyro.state];
    spyro.maybe_AnimSpeedRelated = '\x04';
LAB_8003cdd0:
    spyro.currentKeyfame = spyro.nextKeyframe;
    spyro.currentAnim = spyro.nextAnim;
    spyro.nextKeyframe = '\0';
    spyro.maybe_animStateRelated = spyro.state;
    spyro.nextAnim = cVar1;
    break;
  case 0xb:
    spyro.currentAnim = (&DAT_8006c470)[spyro.state];
    spyro.currentKeyfame = (&DAT_8006c4a0)[(uint)(byte)spyro.currentAnim * 4];
    spyro.maybe_AnimSpeedRelated = '\0';
    spyro.maybe_animUpdateRelated = 0;
    spyro.maybe_animStateRelated = spyro.state;
    spyro.nextKeyframe = (&DAT_8006c4a0)[(uint)(byte)spyro.currentAnim * 4] + '\x01';
    spyro.nextAnim = (&DAT_8006c470)[spyro.state];
  }
  return;
}



void SpyroBodyAnimations(void)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  undefined4 uVar4;
  
  switch(spyro.maybe_animUpdateRelated) {
  case 0:
    if (spyro.state == spyro.maybe_animStateRelated) {
      FUN_8003cb24(spyro._88_4_);
      return;
    }
LAB_8003d2cc:
    SpyroBodyAnimation();
    break;
  case 1:
  case 2:
  case 6:
    spyro.maybe_AnimSpeedRelated = spyro.maybe_AnimSpeedRelated + 2;
    goto joined_r0x8003d250;
  case 3:
  case 10:
    cVar1 = (&DAT_8006bc84)[spyro.state + spyro.maybe_animStateRelated * 0x2d];
    if (((cVar1 != '\x03') && (cVar1 != '\n')) && (cVar1 != '\x04')) goto LAB_8003d2cc;
    iVar2 = FUN_8003cbb8((&DAT_8006c4a3)[(uint)(byte)spyro.currentAnim * 4]);
    if (iVar2 == 0) {
      return;
    }
    if (spyro.currentAnim == '\x1a') {
      PlaySoundEffect((uint)localSFXArray[0x1b],(int *)&spyro,0x10,0);
    }
    goto LAB_8003d26c;
  case 4:
    uVar3 = (uint)(byte)spyro.maybe_AnimSpeedRelated;
    spyro.maybe_AnimSpeedRelated = (char)(uVar3 + spyro._88_4_);
    if (0xf < (uVar3 + spyro._88_4_ & 0xff)) {
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.maybe_animUpdateRelated = 3;
      spyro.currentAnim = spyro.nextAnim;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = spyro.nextKeyframe + '\x01';
    }
    break;
  case 5:
    spyro.maybe_AnimSpeedRelated = spyro.maybe_AnimSpeedRelated + 4;
joined_r0x8003d250:
    uVar4 = 0;
    if (0xf < (byte)spyro.maybe_AnimSpeedRelated) {
LAB_8003d264:
      FUN_8003cb24(uVar4);
LAB_8003d26c:
      spyro.maybe_animUpdateRelated = 0;
    }
    break;
  case 8:
    uVar4 = 2;
    goto LAB_8003d264;
  }
  return;
}



void FUN_8003d3b8(int param_1)

{
  int iVar1;
  int iVar2;
  
  if ((*(int *)(DAT_800757e0 + 0x10) == 0) ||
     ((*(uint *)(DAT_800757e0 + 0x14) & 0xffff0000) == 0x7f7f0000)) {
    if ((*(uint *)(DAT_800757e0 + 4) & 0xf000) == 0) {
      spyro.unkown_angleRelated6 = 0;
      spyro.turnAcceleration = 0;
      spyro.unkown_angleRelated7 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
    }
    else {
      spyro.unkown_angleRelated7 =
           (int)*(short *)(&DAT_8006c5d0 + (*(int *)(DAT_800757e0 + 4) >> 0xb & 0x1e)) +
           (int)cameraAngle.yaw & 0xfff;
      spyro.unkown_angleRelated6 = param_1;
    }
  }
  else {
    iVar1 = ATan2Scaled(0x7f - *(byte *)(DAT_800757e0 + 0x17),0x7f - *(byte *)(DAT_800757e0 + 0x16),
                        1);
    spyro.unkown_angleRelated7 = iVar1 + cameraAngle.yaw & 0xfff;
    iVar1 = 0x7f - (uint)*(byte *)(DAT_800757e0 + 0x17);
    if (iVar1 < 0) {
      iVar1 = -iVar1;
    }
    iVar2 = 0x7f - (uint)*(byte *)(DAT_800757e0 + 0x16);
    if (iVar2 < 0) {
      iVar2 = -iVar2;
    }
    spyro.unkown_angleRelated6 = param_1 * (iVar1 + iVar2) >> 7;
    if (param_1 < spyro.unkown_angleRelated6) {
      spyro.unkown_angleRelated6 = param_1;
    }
  }
  return;
}



void FUN_8003d52c(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar1 = CosScaled(spyro.angle.roll);
  iVar2 = SinScaled(spyro.angle.roll);
  iVar3 = CosScaled(-spyro.angle.pitch & 0xfff);
  if (iVar3 == 0) {
    iVar3 = 1;
  }
  iVar4 = SinScaled(-spyro.angle.pitch & 0xfff);
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (param_1 * iVar4 == -0x80000000)) {
    trap(0x1800);
  }
  if (iVar3 == 0) {
    trap(0x1c00);
  }
  if ((iVar3 == -1) && (param_1 * iVar1 == -0x80000000)) {
    trap(0x1800);
  }
  spyro.angle.pitch = spyro.angle.pitch + (param_1 * iVar2 >> 0xc) & 0xfff;
  spyro.RelativeSparxAngle.pitch = (char)(spyro.angle.pitch >> 4);
  spyro.angle.yaw = spyro.angle.yaw + (param_1 * iVar1) / iVar3 & 0xfff;
  spyro.RelativeSparxAngle.roll = (char)(spyro.angle.yaw >> 4);
  spyro.angle.roll = spyro.angle.roll + (((param_1 * iVar4) / iVar3) * iVar1 >> 0xc) & 0xfff;
  spyro.RelativeSparxAngle.yaw = (char)(spyro.angle.roll >> 4);
  return;
}



void FUN_8003d6d0(int param_1)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  
  uVar3 = spyro.unkown_angleRelated7 - spyro.angle.yaw & 0xfff;
  if (uVar3 < 0x800) {
    spyro.turnAcceleration = spyro.turnAcceleration + 1;
    if (spyro.turnAcceleration < 1) {
      spyro.turnAcceleration = 1;
    }
    iVar1 = 6;
    if (spyro.turnAcceleration < 7) goto LAB_8003d78c;
  }
  else {
    spyro.turnAcceleration = spyro.turnAcceleration + -1;
    if (spyro.turnAcceleration < -6) {
      spyro.turnAcceleration = -6;
    }
    iVar1 = -1;
    if (spyro.turnAcceleration < 0) goto LAB_8003d78c;
  }
  spyro.turnAcceleration = iVar1;
LAB_8003d78c:
  uVar2 = (uint)*(short *)(spyro.turnAcceleration * 2 + param_1 * 0x1a + -0x7ff93a04);
  if (((int)uVar3 <= (int)uVar2) || ((int)(uVar2 + 0x1000) <= (int)uVar3)) {
    uVar2 = spyro.unkown_angleRelated7 - spyro.angle.yaw & 0xfff;
    if (0x800 < uVar2) {
      uVar2 = uVar2 - 0x1000;
    }
    spyro.turnAcceleration = 0;
  }
  FUN_8003d52c(uVar2);
  Maybe_AngleDiff(spyro.unkown_angleRelated7,spyro.angle.yaw);
  return;
}



void FUN_8003d840(void)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  int local_18;
  int local_14;
  undefined4 local_10;
  
  if ((*(int *)(DAT_800757e0 + 0x10) != 0) &&
     ((*(uint *)(DAT_800757e0 + 0x14) & 0xffff0000) != 0x7f7f0000)) {
    local_18 = *(byte *)(DAT_800757e0 + 0x16) - 0x7f;
    local_10 = 0;
    local_14 = *(byte *)(DAT_800757e0 + 0x17) - 0x7f;
    uVar1 = Vec3CalculateLengthE(&local_18,flag2D);
    if ((int)uVar1 < 0x60) {
      uVar3 = spyro.unkown_angleRelated7 - spyro.angle.yaw & 0xfff;
      if (0x800 < uVar3) {
        uVar3 = uVar3 - 0x1000;
      }
      uVar2 = uVar3;
      if ((int)uVar3 < 0) {
        uVar2 = -uVar3;
      }
      if (0x100 < (int)uVar2) {
        spyro.subState = 1;
      }
      spyro.unkown_angleRelated7 = spyro.angle.yaw + ((int)(uVar1 * uVar3) >> 9) & 0xfff;
    }
  }
  FUN_8003d6d0(0);
  return;
}



// This function is some kind of convergence / decay function. It makes spyro.maybe_momentumRelated
// approach spyro.unknown_angleRelated6 (from below at speed param_1 and from above at speed
// param_2. If it overshoots, then momentumrelated is set to angleRelated.

void FUN_8003d92c(int param_1,int param_2)

{
  bool bVar1;
  
  if (spyro.absoluteMomentum < spyro.unkown_angleRelated6) {
    bVar1 = spyro.unkown_angleRelated6 < spyro.absoluteMomentum + param_1;
    spyro.absoluteMomentum = spyro.absoluteMomentum + param_1;
  }
  else {
    spyro.absoluteMomentum = spyro.absoluteMomentum - param_2;
    bVar1 = spyro.absoluteMomentum < spyro.unkown_angleRelated6;
  }
  if (bVar1) {
    spyro.absoluteMomentum = spyro.unkown_angleRelated6;
  }
  return;
}



void Maybe_decayMomenum(void)

{
  undefined auStack_30 [32];
  undefined local_10;
  undefined local_f;
  undefined local_e;
  
  local_10 = (undefined)(spyro.angle.roll >> 4);
  local_e = (undefined)(spyro.angle.yaw >> 4);
  local_f = (undefined)(spyro.angle.pitch >> 4);
  UNK_MatrixOperation(&local_10,auStack_30,0);
  spyro.airMomentum.y = 0;
  spyro.airMomentum.z = 0;
  spyro.airMomentum.x = spyro.absoluteMomentum;
  Vec3ApplyRotationMatrix(auStack_30,0x80078b4c,0x80078b4c);
  return;
}



void MaybeFlopPitchRollCorrection(void)

{
  uint local_10;
  uint local_c;
  
  local_10 = -spyro.angle.roll & 0xfff;
  if (0x7ff < local_10) {
    local_10 = local_10 - 0x1000;
  }
  local_c = -spyro.angle.pitch & 0xfff;
  if (0x7ff < local_c) {
    local_c = local_c - 0x1000;
  }
  spyro.rollMomentum =
       spyro.rollMomentum + (((int)(local_10 << 2) >> 4) - ((spyro.rollMomentum << 4) >> 6));
  spyro.pitchMomentum =
       spyro.pitchMomentum + (((int)(local_c << 2) >> 4) - ((spyro.pitchMomentum << 4) >> 6));
  spyro.angle.roll = spyro.angle.roll + (spyro.rollMomentum >> 2);
  spyro.angle.pitch = spyro.angle.pitch + (spyro.pitchMomentum >> 2);
  return;
}



void Maybe_PitchRollCorrection(void)

{
  int iVar1;
  int iVar2;
  uint x;
  uint local_30;
  uint local_2c;
  uint local_28;
  uint local_20;
  uint local_1c;
  
  if (spyro.unkown_angleRelated4 < 0x17) {
    iVar1 = CosScaled(spyro.angle.yaw);
    iVar2 = SinScaled(spyro.angle.yaw);
    local_30 = spyro.unkown_angleRelated * iVar1 + spyro.unkown_angleRelated2 * iVar2 >> 0xc;
    iVar1 = CosScaled(spyro.angle.yaw);
    iVar2 = SinScaled(spyro.angle.yaw);
    local_28 = spyro.unkown_angleRelated3;
    local_2c = spyro.unkown_angleRelated2 * iVar1 - spyro.unkown_angleRelated * iVar2 >> 0xc;
    x = SquareRoot(local_30 * local_30 + spyro.unkown_angleRelated3 * spyro.unkown_angleRelated3);
    iVar1 = ATan2Scaled(x,local_2c,1);
    local_20 = -iVar1;
    iVar1 = ATan2Scaled(local_28,local_30,1);
    local_20 = local_20 - spyro.angle.roll & 0xfff;
    if (0x800 < local_20) {
      local_20 = local_20 - 0x1000;
    }
    local_1c = -spyro.angle.pitch - iVar1 & 0xfff;
    if (0x800 < local_1c) {
      local_1c = local_1c - 0x1000;
    }
    spyro.rollMomentum =
         spyro.rollMomentum + (((int)(local_20 << 2) >> 4) - ((spyro.rollMomentum << 4) >> 6));
    spyro.pitchMomentum =
         spyro.pitchMomentum + (((int)(local_1c << 2) >> 4) - ((spyro.pitchMomentum << 4) >> 6));
    local_20 = spyro.rollMomentum >> 2;
    local_1c = spyro.pitchMomentum >> 2;
    spyro.angle.roll = spyro.angle.roll + local_20 & 0xfff;
    if (0x800 < (uint)spyro.angle.roll) {
      spyro.angle.roll = spyro.angle.roll - 0x1000;
    }
    spyro.angle.pitch = spyro.angle.pitch + local_1c & 0xfff;
    if (0x800 < (uint)spyro.angle.pitch) {
      spyro.angle.pitch = spyro.angle.pitch - 0x1000;
    }
    if ((0xc0 < (byte)(spyro.RelativeSparxAngle.yaw - 0x20U)) &&
       (0xc0 < (byte)(spyro.RelativeSparxAngle.pitch - 0x20U))) {
      iVar1 = SinScaled();
      local_2c = iVar1 * -0x174 >> 0xc;
      iVar1 = SinScaled(local_1c);
      local_30 = iVar1 * -0x174 >> 0xc;
      iVar1 = CosScaled(local_1c);
      iVar2 = CosScaled(local_20);
      local_28 = ((0x2000 - iVar1) - iVar2) * 0x174 >> 0xc;
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      Vec3ApplyRotationMatrix(0x80078a8c,&local_30,&local_30);
      Vec3Add(&spyro,&spyro,&local_30);
    }
  }
  else {
    MaybeFlopPitchRollCorrection();
  }
  return;
}



void Maybe_ChargeInAirPitchRollCorrection(void)

{
  uint x;
  int iVar1;
  uint local_18;
  uint local_14;
  
  x = Vec3CalculateLengthE(&spyro.airMomentum.x,flag2D);
  iVar1 = ATan2Scaled(x,spyro.airMomentum.z,1);
  local_18 = -spyro.angle.roll & 0xfff;
  if (0x7ff < local_18) {
    local_18 = local_18 - 0x1000;
  }
  local_14 = (iVar1 + 0x8e) - spyro.angle.pitch & 0xfff;
  if (0x7ff < local_14) {
    local_14 = local_14 - 0x1000;
  }
  spyro.rollMomentum =
       spyro.rollMomentum + (((int)(local_18 << 2) >> 4) - ((spyro.rollMomentum << 4) >> 6));
  spyro.angle.roll = spyro.angle.roll + (spyro.rollMomentum >> 2);
  spyro.pitchMomentum =
       spyro.pitchMomentum + (((int)(local_14 << 2) >> 4) - ((spyro.pitchMomentum << 4) >> 6));
  spyro.angle.pitch = spyro.angle.pitch + (spyro.pitchMomentum >> 2);
  return;
}



void FUN_8003dfa4(void)

{
  Vec3Zero((Vec3 *)&spyro.unkown18);
  spyro.maybe_speedRelated = 0;
  Vec3Zero((Vec3 *)&spyro.airMomentum);
  spyro.absoluteMomentum = 0;
  return;
}



void FUN_8003dfec(int param_1,int param_2)

{
  char cVar1;
  int iVar2;
  uint uVar3;
  
  iVar2 = ATan2Scaled(spyro.unkown18,spyro.unkown19,0);
  uVar3 = iVar2 - (uint)(byte)spyro.RelativeSparxAngle.roll & 0xff;
  if ((param_2 < (int)uVar3) && ((int)uVar3 < 0x100 - param_2)) {
    if ((param_1 < (int)uVar3) && ((int)uVar3 < 0x100 - param_1)) {
      cVar1 = (char)param_1;
      if (0x7f < uVar3) {
        cVar1 = -cVar1;
      }
      spyro.RelativeSparxAngle.roll = spyro.RelativeSparxAngle.roll + cVar1;
    }
    else {
      spyro.RelativeSparxAngle.roll = (char)iVar2;
    }
    spyro.angle.yaw = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
  }
  return;
}



void FUN_8003e0b4(void)

{
  uint uVar1;
  int local_18;
  int local_14;
  int local_10;
  
  Vec3Copy(&local_18,&spyro.unkown_angleRelated);
  uVar1 = Vec3CalculateLengthE(&local_18,flag3D);
  if (uVar1 != 0) {
    if (uVar1 == 0) {
      trap(0x1c00);
    }
    if ((uVar1 == 0xffffffff) && (spyro.z_Acceleration * local_10 == -0x80000000)) {
      trap(0x1800);
    }
    Vec3ScaleDownByFraction(&local_18,uVar1,(spyro.z_Acceleration * local_10) / (int)uVar1);
    if (0 < local_10) {
      local_18 = -local_18;
      local_14 = -local_14;
      local_10 = -local_10;
    }
    Vec3Zero((Vec3 *)&spyro.groundedChargeMomentum);
    spyro.groundedChargeMomentum.z = spyro.z_Acceleration;
    Vec3Subtract(&spyro.groundedChargeMomentum.x,&spyro.groundedChargeMomentum.x,&local_18);
  }
  return;
}



void Maybe_Hill_Gravity_Cancellation
               (undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int size;
  Vec3 VStack_18;
  
  Vec3Copy(&spyro.walkingMomentum.x,&spyro.unkown_angleRelated);
  size = spyro.z_Acceleration;
  if (spyro.z_Acceleration < 0) {
    size = -spyro.z_Acceleration;
  }
  VecNormalize(&spyro.walkingMomentum.x,size,param_3,param_4);
  Vec3Zero(&VStack_18);
  Vec3Subtract(&spyro.walkingMomentum.x,&VStack_18.x,&spyro.walkingMomentum.x);
  return;
}



void FUN_8003e218(void)

{
  int iVar1;
  uint y;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  undefined4 local_20;
  undefined4 local_1c;
  undefined4 local_18;
  
  local_28 = 0xfffffe9c;
  local_20 = 0x1c4;
  local_2c = 0;
  local_30 = 0;
  local_1c = 0;
  local_18 = 0xfffffe5c;
  Vec3ApplyRotationMatrix(0x80078a8c,&local_30,&local_30);
  Vec3Add(&local_30,&local_30,&spyro);
  Vec3ApplyLastLoadedRotationMatrix(&local_20,&local_20);
  Vec3Add(&local_20,&local_20,&spyro);
  iVar1 = FindCollsionPolygonAltro(&local_30,&local_20);
  if (iVar1 != 0) {
    y = Vec3CalculateLengthE(&unknownVector.x,flag2D);
    iVar1 = ATan2Scaled(unknownVector.z,y,0);
    if ('\x16' < (char)iVar1) {
      spyro.unkown_angleRelated5 = 1;
      Vec3Copy(&spyro.unkown_portalRelated,&unknownVector.x);
    }
  }
  return;
}



void FUN_8003e318(void)

{
  int iVar1;
  uint uVar2;
  undefined4 local_40;
  undefined4 local_3c;
  undefined4 local_38;
  undefined4 local_30;
  undefined4 local_2c;
  undefined4 local_28;
  
  spyro.timer_framesInAir = spyro.timer_framesInAir + 1;
  Vec3Zero((Vec3 *)&spyro.unkown_angleRelated);
  spyro.unkown_angleRelated3 = 0x1000;
  spyro.unkown_angleRelated4 = 0;
  spyro.unkown_landingMomentumRelated = 0;
  if ((spyro.maybe_weirdResearchThis & 0x4000U) == 0) {
    local_40 = 0;
    local_30 = 0;
    local_3c = 0;
    local_2c = 0;
    local_38 = 0xfffffefc;
    local_28 = 0xfffffe3c;
    Vec3ApplyRotationMatrix(0x80078a8c,&local_40,&local_40);
    Vec3Add(&local_40,&local_40,&spyro);
    Vec3ApplyLastLoadedRotationMatrix(&local_30,&local_30);
    Vec3Add(&local_30,&local_30,&spyro);
    iVar1 = FindCollsionPolygonAltro(&local_40,&local_30);
    if (iVar1 == 0) {
      DAT_80078ccc = 0xffffffff;
    }
    else {
      Vec3Copy(&spyro.unkown_angleRelated,&unknownVector.x);
      uVar2 = Vec3CalculateLengthE(&unknownVector.x,flag2D);
      iVar1 = ATan2Scaled(unknownVector.z,uVar2,0);
      spyro.unkown_angleRelated4 = (int)(char)iVar1;
      if (spyro.unkown_angleRelated4 < 0) {
        spyro.unkown_angleRelated4 = 0x400;
      }
      DAT_80078ccc = DAT_80075808;
      FUN_80017cb8(DAT_80075808,&DAT_80078cd0);
      if (spyro.unkown_angleRelated4 < 0x21) {
        spyro.glideUsed = spyro.unkown_angleRelated4 < 0x17 ^ 1;
        spyro.timer_framesInAir = 0;
        local_40 = 0x104;
        local_3c = 0;
        local_38 = 0xfffffefc;
        local_30 = 0x1c4;
        local_2c = 0;
        local_28 = 0xfffffe3c;
        Vec3ApplyRotationMatrix(0x80078a8c,&local_40,&local_40);
        Vec3Add(&local_40,&local_40,&spyro);
        Vec3ApplyLastLoadedRotationMatrix(&local_30,&local_30);
        Vec3Add(&local_30,&local_30,&spyro);
        iVar1 = FindCollsionPolygonAltro(&local_40,&local_30);
        if (iVar1 == 0) {
          spyro.unkown_landingMomentumRelated = 1;
        }
      }
    }
    if ((spyro.timer_framesInAir != 0) && (spyro.timer_framesIdle == 0)) {
      local_38 = 0xfffffefc;
      local_40 = 0;
      local_3c = 0;
      local_30 = 0;
      local_2c = 0;
      local_28 = 0xfffffe3c;
      Vec3Add(&local_40,&local_40,&spyro);
      Vec3Add(&local_30,&local_30,&spyro);
      iVar1 = FindCollsionPolygonAltro(&local_40,&local_30);
      if (iVar1 != 0) {
        Vec3Copy(&spyro.unkown_angleRelated,&unknownVector.x);
        uVar2 = Vec3CalculateLengthE(&spyro.unkown_angleRelated,flag2D);
        iVar1 = ATan2Scaled(spyro.unkown_angleRelated3,uVar2,0);
        spyro.unkown_angleRelated4 = (int)(char)iVar1;
        if (spyro.unkown_angleRelated4 < 0) {
          spyro.unkown_angleRelated4 = 0x400;
        }
        if (spyro.unkown_angleRelated4 < 0x21) {
          spyro.glideUsed = spyro.unkown_angleRelated4 < 0x17 ^ 1;
          spyro.timer_framesInAir = 0;
        }
      }
    }
  }
  return;
}



void FUN_8003e628(void)

{
  uint uVar1;
  int *destVec;
  int *b;
  int iVar2;
  int aiStack_50 [10];
  Vec3 local_28;
  
  if (-1 < DAT_80078ccc) {
    Vec3Zero(&local_28);
    iVar2 = 0;
    b = (int *)&DAT_80078cd0;
    destVec = aiStack_50;
    FUN_80017cb8(DAT_80078ccc,aiStack_50);
    do {
      Vec3Subtract(destVec,destVec,b);
      Vec3Add(&local_28,&local_28,destVec);
      b = b + 3;
      iVar2 = iVar2 + 1;
      destVec = destVec + 3;
    } while (iVar2 < 3);
    local_28.x = local_28.x / 3;
    local_28.y = local_28.y / 3;
    local_28.z = local_28.z / 3;
    Vec3Copy(&spyro.unkown21,&local_28.x);
    uVar1 = Vec3CalculateLengthE(&local_28.x,flag3D);
    if (0x20 < (int)uVar1) {
      maybe_UnknownPositionVector.y = 1;
    }
  }
  return;
}



void FUN_8003e758(void)

{
  int iVar1;
  int local_48;
  int local_44;
  int local_40;
  int aiStack_38 [2];
  int local_30;
  int aiStack_28 [2];
  int local_20;
  
  local_48 = 0;
  local_44 = 0;
  local_40 = -0x164;
  Vec3Copy(aiStack_28,&local_48);
  local_20 = local_20 + -0x80;
  Vec3Copy(aiStack_38,&local_48);
  local_30 = local_30 + 0x80;
  Vec3ApplyRotationMatrix(0x80078a8c,aiStack_28,aiStack_28);
  Vec3Add(aiStack_28,&spyro,aiStack_28);
  Vec3ApplyLastLoadedRotationMatrix(aiStack_38,aiStack_38);
  Vec3Add(aiStack_38,&spyro,aiStack_38);
  Vec3ApplyLastLoadedRotationMatrix(&local_48,&local_48);
  Vec3Add(&local_48,&spyro,&local_48);
  iVar1 = FindCollsionPolygonAltro(aiStack_38,aiStack_28);
  if ((iVar1 == 0) || (unknownVector.z < 1)) {
    spyro.timer_framesInAir = spyro.timer_framesInAir + 1;
  }
  else {
    Vec3Subtract(&local_48,&unknownPositionVector.x,&local_48);
    iVar1 = local_48;
    if (local_48 < 0) {
      iVar1 = -local_48;
    }
    if (iVar1 < 8) {
      local_48 = 0;
    }
    iVar1 = local_44;
    if (local_44 < 0) {
      iVar1 = -local_44;
    }
    if (iVar1 < 8) {
      local_44 = 0;
    }
    iVar1 = local_40;
    if (local_40 < 0) {
      iVar1 = -local_40;
    }
    if (iVar1 < 8) {
      local_40 = 0;
    }
    Vec3Add(&spyro,&spyro,&local_48);
    spyro.timer_framesInAir = 0;
  }
  return;
}



void FUN_8003e90c(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  ushort *puVar4;
  uint uVar5;
  int local_48;
  int local_44;
  undefined4 local_40;
  int local_38;
  int local_34;
  undefined4 local_30;
  
  uVar5 = 0;
  iVar2 = 0x20;
  uVar3 = 0;
  puVar4 = (ushort *)(sineWaveArray + 0x60);
  do {
    local_48 = (int)((uint)*puVar4 << 0x10) >> 0x14;
    local_40 = 0xfffffedc;
    local_30 = 0xfffffe5c;
    local_44 = (int)((uint)(ushort)sineWaveArray[iVar2] << 0x10) >> 0x14;
    local_38 = local_48;
    local_34 = local_44;
    Vec3Add(&local_48,&local_48,&spyro);
    Vec3Add(&local_38,&local_38,&spyro);
    iVar1 = FindCollsionPolygonAltro(&local_48,&local_38);
    if (iVar1 != 0) {
      uVar5 = uVar5 | 1 << (uVar3 & 0x1f);
    }
    puVar4 = puVar4 + 0x40;
    uVar3 = uVar3 + 1;
    iVar2 = iVar2 + 0x40;
  } while ((int)uVar3 < 4);
  iVar2 = *(int *)(uVar5 * 4 + -0x7ff938ec);
  if (-1 < iVar2) {
    spyro.airMomentum.x = spyro.airMomentum.x + ((int)sineWaveArray[iVar2 + 0x40] >> 4);
    spyro.airMomentum.y = spyro.airMomentum.y + ((int)sineWaveArray[iVar2] >> 4);
  }
  return;
}



void SpyroMovement2(SpyroStates spyroMovementState)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  int iVar5;
  uint uVar6;
  int iVar7;
  uint uVar8;
  undefined1 *puVar9;
  int iVar10;
  char *pcVar11;
  int *a;
  uint local_40;
  uint local_3c;
  int local_38;
  undefined4 local_30;
  int local_2c;
  int local_28;
  
  switch(spyro.state) {
  case 7:
    spyro.colorFilter.opacity = '\0';
  case 0xe:
  case 0x16:
  case 0x1b:
  case 0x1c:
    bVar1 = localSFXArray[0x1b];
    goto LAB_8003eb14;
  case 0xb:
  case 0xf:
  case 0x20:
  case 0x2c:
    UNK_SuperchargeRelated(&spyro,2);
    break;
  case 0x19:
    bVar1 = localSFXArray[0x20];
LAB_8003eb14:
    PlaySoundEffect((uint)bVar1,(int *)&spyro,4,&DAT_80078cf8);
  }
  switch(spyroMovementState) {
  case IDLE_STANDING:
    spyro.subState = 0;
    uVar6 = rand();
    spyro.z_Acceleration = -0x80;
    spyro.isGrounded = 1;
    DAT_80075788 = (ushort)(byte)(&DAT_80075274)[uVar6 & 7] * (ushort)DAT_8006c4a2 + -2;
    break;
  case BEGIN_WALK:
  case WALKING:
  case END_WALK:
  case UPHILL_WALK:
    spyro.subState = 0;
    iVar5 = ATan2Scaled(spyro.unkown18,spyro.unkown19,1);
    if ((iVar5 - spyro.angle.yaw & 0xfffU) - 0x401 < 0x7ff) {
      spyro.absoluteMomentum = 0;
    }
    else {
      spyro.absoluteMomentum = Vec3CalculateLengthE(&spyro.unkown18,flag2D);
    }
    if ((spyroMovementState == END_WALK) && (0x1400 < spyro.absoluteMomentum)) {
      spyro.absoluteMomentum = 0x1400;
    }
    spyro.z_Acceleration = -0xc00;
    Maybe_Hill_Gravity_Cancellation();
    iVar5 = maybe_walkAccelRelated;
    if (spyro.unkown_angleRelated4 != 0) {
      iVar5 = ATan2Scaled(spyro.unkown_angleRelated,spyro.unkown_angleRelated2,1);
      uVar6 = spyro.angle.yaw - iVar5 & 0xfff;
      if (0x800 < uVar6) {
        uVar6 = uVar6 - 0x1000;
      }
      if ((int)uVar6 < 0) {
        uVar6 = -uVar6;
      }
      iVar5 = (spyro.unkown_angleRelated4 << 0xc) / 0x16;
      if ((int)uVar6 < 0x401) {
        iVar2 = DAT_8006c5c4 - maybe_walkAccelRelated;
        iVar7 = maybe_walkAccelRelated;
      }
      else {
        iVar2 = DAT_8006c5cc - DAT_8006c5c0;
        uVar6 = 0x800 - uVar6;
        iVar7 = DAT_8006c5c0;
      }
      iVar10 = DAT_8006c5bc + (iVar5 * (DAT_8006c5c8 - DAT_8006c5bc) >> 0xc);
      iVar3 = CosScaled(uVar6);
      iVar2 = (iVar7 + (iVar5 * iVar2 >> 0xc)) * iVar3 >> 0xc;
      iVar5 = SinScaled(uVar6);
      iVar5 = iVar10 * iVar5 >> 0xc;
      iVar5 = SquareRoot(iVar2 * iVar2 + iVar5 * iVar5);
    }
    spyro.isGrounded = 1;
    spyro.walkingAcceleration = iVar5;
    if (spyro.autoFlameRelated != 0) {
      spyro.unkown_angleRelated6 = 0;
      spyro.unkown_angleRelated7 = (uint)spyro.unkown42._2_1_ << 4;
    }
    break;
  case PIVOT:
    spyro.subState = 0;
    spyro.z_Acceleration = -0xc00;
    goto LAB_8003fbd8;
  case JUMP:
    Vec3Copy(&spyro.airMomentum.x,&spyro.unkown18);
    spyro.groundedChargeMomentum2.z = 0xdc0;
    spyro.z_Acceleration = -0xc0;
    spyro.subState = 0;
    spyro.isGliding = 0;
    spyro.isGrounded = 0;
    spyro.neutralJumpZPos = spyro.position.z + (spyro.airMomentum.z >> 6);
    if (spyro.state == 0x1d) {
      DAT_800756b4 = 1;
    }
    else {
      DAT_800756b4 = 0;
    }
    break;
  case FLOP:
    spyro.subState = 0;
    Vec3Copy(&spyro.airMomentum.x,&spyro.unkown18);
    iVar5 = -0xc0;
    if ((spyro.timer_framesIdle == 0) && (iVar5 = -0xc0, spyro.unkown_angleRelated4 < 0x20)) {
      FUN_8003e90c();
      iVar5 = -0xc0;
    }
    goto LAB_8003f8d4;
  case HURT_ZAPPED:
    spyro.subState = 0;
    Vec3Zero((Vec3 *)&spyro.airMomentum);
    Vec3Subtract(&spyro.airMomentum.x,&spyro.airMomentum.x,&spyro.unkown18);
    uVar6 = Vec3CalculateLengthE(&spyro.airMomentum.x,flag3D);
    if (0x1e00 < (int)uVar6) {
      Vec3ScaleDownByFraction(0x80078b4c,uVar6,0x1e00);
    }
    spyro.z_Acceleration = -0x300;
    if (spyro.timer_framesInAir == 0) {
      Maybe_Hill_Gravity_Cancellation(5);
    }
    spyro.isGrounded = 1;
    (*ptr_OverlayCreateParticle)(5,10,0,0);
    if (maybe_vibrationTimer < 0x2d) {
      maybe_vibrationTimer = 0x2d;
    }
    break;
  case 8:
    goto switchD_8003eb38_caseD_8;
  case ROLL_LEFT:
  case ROLL_RIGHT:
    spyro.subState = 0;
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.unkown18);
    spyro.absoluteMomentum = 0;
    spyro.z_Acceleration = -0xc00;
LAB_8003fbd8:
    Maybe_Hill_Gravity_Cancellation();
LAB_8003fbe4:
    spyro.isGrounded = 1;
    break;
  case CHARGE:
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.unkown18);
    iVar5 = 1;
    if ((spyro.isOnSuperchargeGround != 0) && (iVar5 = 0x81, (spyro.subState & 0x80U) == 0)) {
      spyro.neutralJumpZPos = spyro.position.z;
      spyro.unkown_angleRelated6 = Vec3CalculateLengthE(&spyro.groundedChargeMomentum2.x,flag3D);
      if (spyro.unkown_angleRelated6 < 0x1f80) {
        spyro.unkown_angleRelated6 = 0x1f80;
      }
      iVar5 = 0x81;
    }
    spyro.turnAcceleration = 0;
    spyro.z_Acceleration = -0x240;
    spyro.subState = iVar5;
    Maybe_Hill_Gravity_Cancellation();
    FUN_8003e0b4();
    spyro.isGrounded = 1;
    PlaySoundEffect((uint)localSFXArray[4],(int *)&spyro,4,&DAT_80078cf9);
    DAT_80075790 = (char *)0x0;
    uVar6 = spyro.angle.yaw - cameraAngle.yaw & 0xfff;
    if (0x800 < uVar6) {
      uVar6 = uVar6 - 0x1000;
    }
    if ((int)uVar6 < 0) {
      uVar6 = -uVar6;
    }
    if ((0x200 < (int)uVar6) && (iVar5 = 30000, ptr_startOfCurrentLevelMobys < DAT_80075890)) {
      a = (int *)(ptr_startOfCurrentLevelMobys + 0xc);
      pcVar11 = ptr_startOfCurrentLevelMobys;
      do {
        if ((*(byte *)(a + 0xf) < 0x7f) && (a[-1] != 0)) {
          Vec3Subtract((int *)&local_40,a,(int *)&spyro);
          iVar2 = ATan2Scaled(local_40,local_3c,1);
          uVar6 = iVar2 - spyro.angle.yaw & 0xfff;
          if (0x800 < uVar6) {
            uVar6 = uVar6 - 0x1000;
          }
          if ((int)uVar6 < 0) {
            uVar6 = -uVar6;
          }
          if ((int)uVar6 < 0x200) {
            uVar4 = local_40;
            if ((int)local_40 < 0) {
              uVar4 = -local_40;
            }
            uVar8 = local_3c;
            if ((int)local_3c < 0) {
              uVar8 = -local_3c;
            }
            iVar2 = local_38;
            if (local_38 < 0) {
              iVar2 = -local_38;
            }
            if ((int)(uVar4 + uVar8 + iVar2) < 0x4000) {
              uVar4 = Vec3CalculateLengthE((int *)&local_40,flag3D);
              if (((int)uVar4 < 0x1800) && (iVar2 = uVar4 + uVar6 * 4, iVar2 < iVar5)) {
                iVar5 = iVar2;
                DAT_80075790 = pcVar11;
              }
            }
          }
        }
        pcVar11 = pcVar11 + 0x58;
        a = a + 0x16;
      } while (pcVar11 < DAT_80075890);
    }
    break;
  case BONK:
    iVar5 = 0;
    uVar6 = rand();
    uVar6 = uVar6 & 0x3f;
    do {
      local_30 = 0;
      local_2c = (int)((uint)(ushort)sineWaveArray[uVar6 + 0x40] << 0x10) >> 0x17;
      iVar5 = iVar5 + 1;
      local_28 = (int)((uint)(ushort)sineWaveArray[uVar6] << 0x10) >> 0x17;
      Vec3ApplyRotationMatrix(0x80078a8c,&local_30,&local_30);
      (*ptr_OverlayCreateParticle)(1,0x21,&local_30,1);
      uVar6 = uVar6 + 0x40 & 0xff;
    } while (iVar5 < 4);
    spyro.subState = 0;
    Vec3Zero((Vec3 *)&spyro.groundedChargeMomentum2);
    Vec3Subtract(&spyro.airMomentum.x,&spyro.groundedChargeMomentum2.x,&spyro.airMomentum.x);
    Vec3ScaleDownByPowerOfTwo(&spyro.airMomentum.x,2);
    spyro.z_Acceleration = -0x300;
    spyro.isGrounded = 1;
    if (DAT_8007584c < 0x78) {
      DAT_8007584c = 0x78;
    }
    if (vibrationFlag < 0xf) {
      vibrationFlag = 0xf;
    }
    break;
  case LEDGE_PEER:
    spyro.z_Acceleration = -0xc00;
    goto switchD_8003eb38_caseD_8;
  case HURT_PITCH_HIGH:
    spyro.subState = 0;
    Vec3Zero((Vec3 *)&spyro.airMomentum);
    Vec3Subtract(&spyro.airMomentum.x,&spyro.airMomentum.x,&spyro.unkown18);
    uVar6 = Vec3CalculateLengthE(&spyro.airMomentum.x,flag3D);
    if (0x1e00 < (int)uVar6) {
      Vec3ScaleDownByFraction(0x80078b4c,uVar6,0x1e00);
    }
    spyro.z_Acceleration = -0x300;
    if (spyro.timer_framesInAir == 0) {
      Maybe_Hill_Gravity_Cancellation(5);
    }
    spyro.isGrounded = 1;
    (*ptr_OverlayCreateParticle)(5,10,0,0);
    if (DAT_80075904 < 0xf) {
      DAT_80075904 = 0xf;
    }
    uVar6 = (uint)localSFXArray[0x3b];
    puVar9 = &DAT_80078cf8;
    goto LAB_8003fd48;
  case GLIDE:
  case PULL_BACK_GLIDE:
  case SUPERFLY:
  case SUPERFLY_ASCENDING:
  case SUPERFLY_DESCENDING:
    if ((((spyro.state != 0xf) && (spyro.state != 0x17)) && (1 < spyro.state - 0x20U)) &&
       (spyro.state != 0x22)) {
      spyro.subState = 0;
      spyro.glideUsed = 1;
      spyro.turnAcceleration = 0;
      DAT_80075960 = 0;
      DAT_800758a0 = 0;
      DAT_80075700 = 0;
      if (0 < spyro.maybe_glideAndWalkOffLedgeZMomentum) {
        spyro.maybe_glideAndWalkOffLedgeZMomentum = 0;
      }
      spyro.absoluteMomentum = Vec3CalculateLengthE(&spyro.airMomentum.x,flag2D);
      if (0x1900 < spyro.absoluteMomentum) {
        spyro.absoluteMomentum = 0x1900;
      }
      if (spyro.absoluteMomentum < 0x780) {
        spyro.absoluteMomentum = 0x780;
      }
      if (((spyro.state != 6) || (isInFlightLevel != 0)) ||
         (spyro.neutralJumpZPos < spyro.position.z)) {
        spyro.neutralJumpZPos = spyro.position.z;
      }
      if (spyro.angle.pitch < 0x401) {
        spyro.maybe_pitchRelatedFlag = 0;
        spyro.z_Acceleration = -0x80;
      }
      else {
        spyro.maybe_pitchRelatedFlag = 1;
        spyro.z_Acceleration = -0x80;
      }
    }
    goto LAB_8003f774;
  case TRIANGLE_DROP:
    spyro.subState = 0;
    spyro.airMomentum.x = 0;
    spyro.airMomentum.y = 0;
    spyro.airMomentum.z = spyro.maybe_glideAndWalkOffLedgeZMomentum;
    iVar5 = -0xc0;
    if ((spyro.timer_framesIdle == 0) && (iVar5 = -0xc0, spyro.unkown_angleRelated4 < 0x20)) {
      FUN_8003e90c();
      iVar5 = -0xc0;
    }
    goto LAB_8003f8d4;
  case WHIRLWIND:
    if (spyro.unkown50 == 0) {
      Vec3Copy(&spyro.airMomentum.x,&spyro.unkown18);
      spyro.z_Acceleration = 0x80;
    }
    else {
      Vec3Zero((Vec3 *)&spyro.airMomentum);
      spyro.neutralJumpZPos = spyro.unkown41;
      DAT_80075724 = (spyro.unkown41 - spyro.position.z) + -0x800;
      DAT_80075668 = spyro.position.z;
      DAT_8007578c = spyro.angle.yaw;
      DAT_800757f0 = ((uint)*(byte *)(spyro.unkown50 + 0x46) * 0x10 - spyro.angle.yaw) -
                     ((DAT_80075724 * 0x400 >> 10) + 0x400) & 0xfff;
      spyro.z_Acceleration = 0x80;
      if (0x800 < DAT_800757f0) {
        DAT_800757f0 = DAT_800757f0 - 0x1000;
        spyro.z_Acceleration = 0x80;
      }
    }
    goto LAB_8003f774;
  case IDLE_LOOK_AROUND:
  case 0x24:
  case 0x25:
  case 0x26:
  case IDLE_SIT:
  case 0x28:
  case 0x29:
  case 0x2a:
  case 0x2b:
    spyro.subState = 0;
    spyro.z_Acceleration = -0xc00;
    DAT_80075788 = (ushort)(&DAT_8006c4a2)[spyroMovementState * 4] << 4;
    break;
  case ROLL_DOWN_SLOPE:
    spyro.subState = 0;
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.unkown18);
    if (0 < spyro.groundedChargeMomentum2.z) {
      spyro.groundedChargeMomentum2.z = 0;
    }
    spyro.z_Acceleration = -0x200;
    Maybe_Hill_Gravity_Cancellation();
    FUN_8003e0b4();
    goto LAB_8003f774;
  case CHARGING_AIR:
    Vec3Copy(&spyro.airMomentum.x,&spyro.unkown18);
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.unkown18);
    spyro.turnAcceleration = 0;
    if (spyro.isOnSuperchargeGround == 0) {
      spyro.subState = 0;
      spyro.airMomentum.z = 0;
      spyro.groundedChargeMomentum2.z = 0;
    }
    else {
      if ((spyro.subState & 0x80U) == 0) {
        spyro.neutralJumpZPos = spyro.position.z;
        spyro.unkown_angleRelated6 = Vec3CalculateLengthE(&spyro.groundedChargeMomentum2.x,flag3D);
        if (spyro.unkown_angleRelated6 < 0x1f80) {
          spyro.unkown_angleRelated6 = 0x1f80;
        }
      }
      spyro.subState = spyro.subState | 0x80;
    }
    iVar5 = -0x240;
LAB_8003f8d4:
    spyro.isGliding = 0;
    spyro.z_Acceleration = iVar5;
LAB_8003f774:
    spyro.isGrounded = 0;
    break;
  case HURT_ROLL:
  case HURT_PITCH_LOW:
    spyro.airMomentum.x = spyro.unkown43 << 6;
    spyro.subState = 0;
    spyro.airMomentum.y = spyro.unkown44 << 6;
    spyro.airMomentum.z = spyro.unkown45 << 6;
    if (spyro.unkown45 == 0) {
      spyro.airMomentum.z = spyro.maybe_glideAndWalkOffLedgeZMomentum;
    }
    ATan2Scaled(spyro.airMomentum.x,spyro.airMomentum.y,1);
    spyro.z_Acceleration = -0x300;
    if (spyro.timer_framesInAir == 0) {
      Maybe_Hill_Gravity_Cancellation(5);
    }
    spyro.isGrounded = 1;
    (*ptr_OverlayCreateParticle)(5,10,0,0);
    bVar1 = localSFXArray[0x3b];
    goto LAB_8003fb6c;
  case CHARGING_AIR_SC_JUMP:
    Vec3Copy(&spyro.airMomentum.x,&spyro.unkown18);
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.unkown18);
    spyro.turnAcceleration = 0;
    spyro.subState = 0xc0;
    spyro.z_Acceleration = 0;
    spyro.isGliding = 0;
    break;
  case HURT_SQUISHED:
    spyro.subState = 0;
    Vec3Zero((Vec3 *)&spyro.airMomentum);
    spyro.airMomentum.z = -0xc00;
    spyro.isGrounded = 1;
    (*ptr_OverlayCreateParticle)(5,10,0,0);
    if (DAT_80075904 < 0xf) {
      DAT_80075904 = 0xf;
    }
    uVar6 = (uint)localSFXArray[0x3a];
    puVar9 = &DAT_80078cf8;
    goto LAB_8003fd48;
  case CANNON_ROTATE:
    spyro.subState = 0;
    iVar5 = ATan2Scaled(spyro.unkown18,spyro.unkown19,1);
    if ((iVar5 - spyro.angle.yaw & 0xfffU) - 0x401 < 0x7ff) {
      spyro.absoluteMomentum = 0;
    }
    else {
      spyro.absoluteMomentum = Vec3CalculateLengthE(&spyro.unkown18,flag2D);
    }
    spyro.z_Acceleration = -0xc00;
    Maybe_Hill_Gravity_Cancellation();
    spyro.walkingAcceleration = 0x280;
    DAT_800758a0 = 0;
    spyro.isGrounded = 1;
    break;
  case HURT_YAW:
    spyro.subState = 0;
    Vec3Zero((Vec3 *)&spyro.airMomentum);
    spyro.z_Acceleration = -0x300;
    spyro.isGrounded = 1;
    (*ptr_OverlayCreateParticle)(5,10,0,0);
    goto LAB_8003fb7c;
  case DROWNING:
    spyro.subState = 0;
    spyro.z_Acceleration = -0x80;
    spyro.isGrounded = 1;
    if (spyro.iFramesTimer == 0) {
      (*ptr_OverlayCreateParticle)(5,10,0,0);
    }
    (*ptr_OverlaySpawnDynamicObj)(*(undefined4 *)(&DAT_8006ea34 + DAT_80075728 * 4),0);
    PlaySoundEffect((uint)localSFXArray[0x1d],(int *)&spyro,4,&DAT_80078cf8);
    bVar1 = localSFXArray[0x1b];
LAB_8003fb6c:
    PlaySoundEffect((uint)bVar1,(int *)&spyro,4,&DAT_80078cf8);
LAB_8003fb7c:
    if (DAT_80075904 < 0xf) {
      DAT_80075904 = 0xf;
    }
    break;
  case DEATH_SPIN:
    spyro.subState = 0;
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.unkown18);
    spyro.z_Acceleration = -0x300;
    if (spyro.timer_framesInAir == 0) goto LAB_8003fbd8;
    goto LAB_8003fbe4;
  case DEATH_SQUISHED:
    spyro.subState = 0;
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.unkown18);
    spyro.z_Acceleration = -0x300;
    if (spyro.timer_framesInAir == 0) {
      Maybe_Hill_Gravity_Cancellation(5);
    }
    spyro.isGrounded = 1;
    (*ptr_OverlayCreateParticle)(5,10,0,0);
    break;
  case 0x23:
    spyro.z_Acceleration = -0x80;
switchD_8003eb38_caseD_8:
    spyro.subState = 0;
    spyro.isGrounded = 1;
    break;
  case SUPERCHARGE:
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.unkown18);
    if ((spyro.subState & 0x80U) == 0) {
      spyro.neutralJumpZPos = spyro.position.z;
      spyro.unkown_angleRelated6 = Vec3CalculateLengthE(&spyro.groundedChargeMomentum2.x,flag3D);
      if (spyro.unkown_angleRelated6 < 0x1f80) {
        spyro.unkown_angleRelated6 = 0x1f80;
      }
    }
    spyro.subState = 0xc0;
    spyro.turnAcceleration = 0;
    spyro.z_Acceleration = -0x240;
    Maybe_Hill_Gravity_Cancellation();
    FUN_8003e0b4();
    spyro.isGrounded = 1;
    DAT_80075700 = 0;
    uVar6 = (uint)localSFXArray[5];
    puVar9 = &DAT_80078cf9;
LAB_8003fd48:
    PlaySoundEffect(uVar6,(int *)&spyro,4,puVar9);
  }
  spyro.unkown14 = spyro.framesInCurrentState;
  spyro.state = spyroMovementState;
  spyro.framesInCurrentState = 0;
  uVar6 = (uint)(byte)(&DAT_8006c4a3)[(uint)(byte)(&DAT_8006c470)[spyroMovementState] * 4];
  spyro.animSpeed = (char)uVar6;
  spyro.unkown10 = (char)(uVar6 >> 8);
  spyro.unkown11 = (char)(uVar6 >> 0x10);
  spyro.unkown12 = (char)(uVar6 >> 0x18);
  return;
}



void ForceMovementState(SpyroStates param_1)

{
  SpyroMovement2(param_1);
  spyro.currentKeyfame = '\0';
  spyro.currentAnim = (&DAT_8006c470)[spyro.state];
  spyro.nextKeyframe = '\x01';
  spyro.maybe_AnimSpeedRelated = '\0';
  spyro.maybe_animUpdateRelated = 0;
  spyro.maybe_animStateRelated = spyro.state;
  spyro.nextAnim = (&DAT_8006c470)[spyro.state];
  return;
}



undefined4 FUN_8003fe40(void)

{
  bool bVar1;
  uint uVar2;
  char cVar3;
  uint uVar4;
  Spyro *pSVar5;
  undefined4 uVar6;
  undefined4 uVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  int local_80;
  int local_7c;
  int local_78;
  int local_70;
  int local_6c;
  int local_68;
  int aiStack_60 [4];
  uint local_50;
  uint local_4c;
  int local_40;
  int local_38;
  
  spyro.unkown15 = 0;
  spyro.maybe_superchargeRelated = 0xff;
  spyro.unkown_angleRelated5 = 0;
  spyro.timer_framesIdle = spyro.timer_framesIdle + 1;
  Vec3Zero((Vec3 *)&spyro.unkown_portalRelated);
  Vec3Add(&spyro,&spyro,0x80078b84);
  Vec3Zero((Vec3 *)&spyro.unkown21);
  Vec3Copy(&spyro.maybe_positionRelative.x,(int *)&spyro);
  if (-1 < spyro.maybe_weirdResearchThis) {
    spyro.maybe_weirdResearchThis = 0;
    goto LAB_8004060c;
  }
  if ((((spyro.maybe_weirdResearchThis & 0x100U) != 0) && (-1 < spyro.health)) &&
     (spyro.state != spyro.unkown47)) {
    SpyroMovement2(spyro.unkown47);
    spyro.timer_framesInAir = 1;
  }
  if ((spyro.maybe_weirdResearchThis & 7U) != 0) {
    if ((spyro.maybe_weirdResearchThis & 0x40U) == 0) {
      if ((spyro.maybe_weirdResearchThis & 1U) != 0) {
        spyro.unkown_angleRelated8 = (spyro.unkownOops - spyro.position.x) * 0x40;
        spyro.airMomentum.x = spyro.unkown_angleRelated8 / gameSpeedMultiplyer;
        if (gameSpeedMultiplyer == 0) {
          trap(0x1c00);
        }
        if ((gameSpeedMultiplyer == -1) && (spyro.unkown_angleRelated8 == -0x80000000)) {
          trap(0x1800);
        }
      }
      if ((spyro.maybe_weirdResearchThis & 2U) != 0) {
        spyro.unkown16 = (spyro.unkown40 - spyro.position.y) * 0x40;
        spyro.airMomentum.y = spyro.unkown16 / gameSpeedMultiplyer;
        if (gameSpeedMultiplyer == 0) {
          trap(0x1c00);
        }
        if ((gameSpeedMultiplyer == -1) && (spyro.unkown16 == -0x80000000)) {
          trap(0x1800);
        }
      }
      if ((spyro.maybe_weirdResearchThis & 4U) != 0) {
        iVar10 = spyro.unkown41 - spyro.position.z;
        goto LAB_8004010c;
      }
    }
    else {
      if ((spyro.maybe_weirdResearchThis & 1U) != 0) {
        spyro.unkown_angleRelated8 = spyro.unkown43 << 6;
        spyro.airMomentum.x = spyro.unkown_angleRelated8 / gameSpeedMultiplyer;
        if (gameSpeedMultiplyer == 0) {
          trap(0x1c00);
        }
        if ((gameSpeedMultiplyer == -1) && (spyro.unkown_angleRelated8 == -0x80000000)) {
          trap(0x1800);
        }
      }
      if ((spyro.maybe_weirdResearchThis & 2U) != 0) {
        spyro.unkown16 = spyro.unkown44 << 6;
        spyro.airMomentum.y = spyro.unkown16 / gameSpeedMultiplyer;
        if (gameSpeedMultiplyer == 0) {
          trap(0x1c00);
        }
        if ((gameSpeedMultiplyer == -1) && (spyro.unkown16 == -0x80000000)) {
          trap(0x1800);
        }
      }
      iVar10 = spyro.unkown45;
      if ((spyro.maybe_weirdResearchThis & 4U) != 0) {
LAB_8004010c:
        spyro.unkown17 = iVar10 << 6;
        spyro.airMomentum.z = spyro.unkown17 / gameSpeedMultiplyer;
        if (gameSpeedMultiplyer == 0) {
          trap(0x1c00);
        }
        if ((gameSpeedMultiplyer == -1) && (spyro.unkown17 == -0x80000000)) {
          trap(0x1800);
        }
      }
    }
    spyro.absoluteMomentum = Vec3CalculateLengthE(&spyro.airMomentum.x,flag2D);
  }
  iVar10 = spyro.unkown_angleRelated7;
  if ((spyro.maybe_weirdResearchThis & 8U) != 0) {
    spyro.RelativeSparxAngle.yaw = (byte)spyro.unkown42;
    spyro.angle.roll = (uint)(byte)spyro.unkown42 << 4;
  }
  if ((spyro.maybe_weirdResearchThis & 0x10U) != 0) {
    spyro.RelativeSparxAngle.pitch = spyro.unkown42._1_1_;
    spyro.angle.pitch = (uint)spyro.unkown42._1_1_ << 4;
  }
  if ((spyro.maybe_weirdResearchThis & 0x20U) != 0) {
    spyro.RelativeSparxAngle.roll = spyro.unkown42._2_1_;
    spyro.angle.yaw = (uint)spyro.unkown42._2_1_ << 4;
  }
  if (unk_cameraRelatedLocking != &DAT_80000009) {
    if ((spyro.maybe_weirdResearchThis & 0x200U) == 0) {
      if ((spyro.maybe_weirdResearchThis & 0x400U) == 0) {
        if ((spyro.maybe_weirdResearchThis & 0x1000U) == 0) {
          if ((spyro.maybe_weirdResearchThis & 0x8000U) == 0) {
            if ((spyro.maybe_weirdResearchThis & 0x10000U) != 0) {
              unk_cameraRelatedLocking = &DAT_8000000c;
            }
          }
          else {
            unk_cameraRelatedLocking = (undefined *)0x80000007;
          }
        }
        else {
          uVar2 = (uint)*(byte *)(spyro.unkown50 + 0x46) -
                  ((int)((uint)(ushort)cameraAngle.yaw << 0x10) >> 0x14) & 0xff;
          if (0x80 < uVar2) {
            uVar2 = uVar2 - 0x100;
          }
          if ((int)uVar2 < 0) {
            uVar2 = -uVar2;
          }
          uVar4 = spyro.maybe_weirdResearchThis | 0x2000;
          if ((int)uVar2 < 0x10) {
            if (DAT_80075948 < 0x1e) {
              DAT_800758a0 = 0;
              spyro.maybe_weirdResearchThis = uVar4;
              if (spyro.isMovementLocked < 2) {
                spyro.isMovementLocked = 2;
              }
            }
            else {
              FUN_8003d3b8(spyro.walkingAcceleration);
              if (spyro.unkown_angleRelated6 != 0) {
                Vec3Subtract((int *)&local_50,(int *)&spyro,(int *)(spyro.unkown50 + 0xc));
                iVar8 = ATan2Scaled(local_50,local_4c,0);
                uVar2 = (iVar8 - (uint)*(byte *)(spyro.unkown50 + 0x46)) + 0x80 & 0xff;
                if (0x80 < uVar2) {
                  uVar2 = uVar2 - 0x100;
                }
                if (levelIDPortalExit == 0x14) {
                  iVar8 = 0x28;
                  if (spyro.state == 0x1a) {
                    iVar8 = 0x32;
                  }
                }
                else {
                  iVar8 = 0x30;
                  if (spyro.state == 0x1a) {
                    iVar8 = 0x38;
                  }
                }
                if ((int)uVar2 < 0) {
                  uVar2 = -uVar2;
                }
                if ((int)uVar2 < iVar8) {
                  Vec3Subtract((int *)&local_50,(int *)(spyro.unkown50 + 0xc),(int *)&spyro);
                  iVar8 = ATan2Scaled(local_50,local_4c,1);
                  uVar2 = (uint)*(byte *)(spyro.unkown50 + 0x46);
                  bVar1 = 0x7ff < (iVar8 + uVar2 * -0x10 & 0xfff);
                  if (bVar1) {
                    iVar8 = uVar2 - 0x40;
                  }
                  else {
                    iVar8 = uVar2 + 0x40;
                  }
                  uVar2 = iVar8 * 0x10 - spyro.unkown_angleRelated7 & 0xfff;
                  if (0x800 < uVar2) {
                    uVar2 = uVar2 - 0x1000;
                  }
                  if ((int)uVar2 < 0) {
                    uVar2 = -uVar2;
                  }
                  if ((int)uVar2 < 0x200) {
                    if (spyro.state != 0x1a) {
                      SpyroMovement2(CANNON_ROTATE);
                    }
                    if (bVar1) {
                      spyro.subState = 2;
                      spyro.maybe_weirdResearchThis = spyro.maybe_weirdResearchThis | 0x100U;
                    }
                    else {
                      spyro.subState = 1;
                      spyro.maybe_weirdResearchThis = spyro.maybe_weirdResearchThis | 0x100U;
                    }
                  }
                  goto LAB_800404dc;
                }
              }
              DAT_800758a0 = 0;
            }
LAB_800404dc:
            DAT_80075948 = DAT_80075948 + gameSpeedMultiplyer;
          }
          else {
            DAT_80075948 = 0;
            spyro.maybe_weirdResearchThis = uVar4;
            if (spyro.isMovementLocked < 2) {
              spyro.isMovementLocked = 2;
            }
          }
          DAT_80076ea0 = &DAT_80077798;
          Vec3Copy((int *)&DAT_80077798,(int *)(spyro.unkown50 + 0xc));
          DAT_800777a0 = DAT_800777a0 + 0x200;
          flyInAnimation = &DAT_8006cb2c;
          unk_cameraRelatedLocking = &DAT_8000000a;
          spyro.maybe_weirdResearchThis = spyro.maybe_weirdResearchThis | 0x200;
          unk_camera_related_angle = (uint)*(byte *)(spyro.unkown50 + 0x46) << 4;
        }
      }
      else {
        unk_cameraRelatedLocking = &DAT_8000000b;
      }
    }
    else {
      unk_camera_related_angle = 0;
      unk_cameraRelatedLocking = &DAT_8000000a;
      DAT_80076ea0 = (undefined *)spyro.unkown48;
      flyInAnimation = (undefined *)spyro.unkown49;
    }
  }
  spyro.unkown_angleRelated7 = iVar10;
  if ((spyro.maybe_weirdResearchThis & 0x20000U) != 0) {
    spyro.autoFlameRelated = 1;
    SpyroMovement2(BEGIN_WALK);
  }
LAB_8004060c:
  Vec3ScaleDownByPowerOfTwo(&spyro.unkown_angleRelated8,6);
  if ((spyro.maybe_weirdResearchThis & 0x4000U) == 0) {
    uVar2 = Vec3CalculateLengthE(&spyro.unkown_angleRelated8,flag3D);
    local_38 = (int)uVar2 / 0x154 + 1;
    iVar10 = spyro.unkown17;
    if (1 < local_38) {
      iVar8 = spyro.unkown_angleRelated8 / local_38;
      if (local_38 == 0) {
        trap(0x1c00);
      }
      if ((local_38 == -1) && (spyro.unkown_angleRelated8 == -0x80000000)) {
        trap(0x1800);
      }
      iVar9 = spyro.unkown16 / local_38;
      if (local_38 == 0) {
        trap(0x1c00);
      }
      if ((local_38 == -1) && (spyro.unkown16 == -0x80000000)) {
        trap(0x1800);
      }
      iVar10 = spyro.unkown17 / local_38;
      if (local_38 == 0) {
        trap(0x1c00);
      }
      spyro.unkown_angleRelated8 = iVar8;
      spyro.unkown16 = iVar9;
      if ((local_38 == -1) && (spyro.unkown17 == -0x80000000)) {
        trap(0x1800);
      }
    }
    spyro.unkown17 = iVar10;
    local_40 = 0;
    if (0 < local_38) {
      do {
        Vec3Copy(&spyro.unkown18,(int *)&spyro);
        Vec3Copy(aiStack_60,(int *)&spyro);
        Vec3Add(&spyro,&spyro,0x80078b58);
        iVar10 = 0;
        do {
          uVar7 = 0;
          if (spyro.state == 0x14) {
            if ((spyro.subState & 0x40U) == 0) {
LAB_8004084c:
              uVar6 = 0x20000;
              iVar8 = MobyCollisionRelated(&spyro,0x164,0x80078a84,0x20000,0,1);
              if (iVar8 != 0) {
                if (DAT_8007584c < 100) {
                  DAT_8007584c = 100;
                }
                if (vibrationFlag < 0xc) {
                  vibrationFlag = 0xc;
                }
                goto LAB_80040924;
              }
            }
            else {
              uVar6 = 0x80000;
              iVar8 = MobyCollisionRelated(&spyro,0x164,0x80078a84,0x80000,0,0);
              if (iVar8 != 0) {
                if ((spyro._44_4_ & 0x4000) != 0) {
                  uVar7 = 0x80000;
                  goto LAB_80040914;
                }
                goto LAB_80040924;
              }
            }
          }
          else {
            if (spyro.state < 0x15) {
              if (spyro.state == 0xb) goto LAB_8004084c;
            }
            else if ((spyro.state == 0x18) || (spyro.state == 0x2c)) {
              uVar7 = 0x80000;
              uVar6 = uVar7;
              iVar8 = MobyCollisionRelated(&spyro,0x164,0x80078a84,0x80000,0,0);
              if (iVar8 == 0) goto LAB_8004097c;
              if ((spyro._44_4_ & 0x4000) == 0) goto LAB_80040924;
            }
LAB_80040914:
            iVar8 = MobyCollisionRelated(&spyro,0x164,0x80078a84,uVar7,0,1);
            uVar6 = uVar7;
LAB_80040924:
            if (iVar8 != 0) {
              spyro.unkown15 = 1;
              DAT_80075804 = iVar8;
              Vec3Subtract(&local_80,(int *)&spyro,&spyro.unkown18);
              uVar2 = Vec3CalculateLengthE(&local_80,flag3D);
              if (0x140 < (int)uVar2) {
                Vec3ScaleDownByFraction(&local_80,uVar2,0x140);
                Vec3Add(&spyro,0x80078b64,&local_80);
              }
            }
          }
LAB_8004097c:
          iVar9 = FUN_8004be4c(&spyro,0x164,0x164);
          if (iVar9 == 0) {
            if (iVar8 == 0) break;
          }
          else {
            if (((spyro.state == 0xf) || (spyro.state - 0x20U < 2)) || (spyro.state == 0x22)) {
              pSVar5 = &spyro;
              Vec3Subtract(&local_80,&unknownVector5.x,(int *)&spyro);
              VecNormalize(&local_80,0x100,pSVar5,uVar6);
              if (local_78 < -200) goto LAB_80040a6c;
              Vec3Copy(&local_70,&spyro.unkown_angleRelated8);
              VecNormalize(&local_70,0x100,pSVar5,uVar6);
              if (0xe0 < local_80 * local_70 + local_7c * local_6c + local_78 * local_68 >> 8)
              goto LAB_80040a6c;
            }
            else {
LAB_80040a6c:
              spyro.timer_framesIdle = 0;
            }
            uVar2 = Vec3CalculateLengthE(&unknownVector.x,flag2D);
            uVar7 = 0;
            iVar8 = ATan2Scaled(unknownVector.z,uVar2,0);
            if ('\x16' < (char)iVar8) {
              if ((DAT_80075718 & 0x3f) == 0x3f) {
                cVar3 = '\0';
              }
              else {
                cVar3 = **(char **)((DAT_80075718 & 0x3f) * 4 + ptr_levelIDRelated);
              }
              if (cVar3 != '\x06') {
                spyro.unkown_angleRelated5 = 1;
                VecNormalize(&unknownVector.x,0x400,uVar7,uVar6);
                Vec3Add(0x80078b10,0x80078b10,&unknownVector);
              }
            }
            Vec3Copy((int *)&spyro,&unknownPositionVector.x);
            if (spyro.maybe_superchargeRelated == 0xff) {
              spyro.maybe_superchargeRelated = DAT_80075718;
              Vec3Copy(&spyro.lastGroundedPosition.x,&unknownVector5.x);
              Vec3Copy(&spyro.unkown33,&unknownVector.x);
            }
            Vec3Subtract(&local_80,(int *)&spyro,&spyro.unkown18);
            uVar2 = Vec3CalculateLengthE(&local_80,flag3D);
            if (0x140 < (int)uVar2) {
              Vec3ScaleDownByFraction(&local_80,uVar2,0x140);
              Vec3Add(&spyro,0x80078b64,&local_80);
            }
          }
          iVar10 = iVar10 + 1;
        } while (iVar10 < 6);
        if (iVar10 == 6) {
          iVar10 = 0;
          do {
            iVar8 = FUN_8004be4c(&spyro,0x164,0x164);
            if (iVar8 == 0) break;
            if (((spyro.state == 0xf) || (spyro.state - 0x20U < 2)) || (spyro.state == 0x22)) {
              pSVar5 = &spyro;
              Vec3Subtract(&local_80,&unknownVector5.x,(int *)&spyro);
              VecNormalize(&local_80,0x100,pSVar5,uVar6);
              if (local_78 < -200) goto LAB_80040cc8;
              Vec3Copy(&local_70,&spyro.unkown_angleRelated8);
              VecNormalize(&local_70,0x100,pSVar5,uVar6);
              if (0xe0 < local_80 * local_70 + local_7c * local_6c + local_78 * local_68 >> 8)
              goto LAB_80040cc8;
            }
            else {
LAB_80040cc8:
              spyro.timer_framesIdle = 0;
            }
            uVar2 = Vec3CalculateLengthE(&unknownVector.x,flag2D);
            uVar7 = 0;
            iVar8 = ATan2Scaled(unknownVector.z,uVar2,0);
            if ('\x16' < (char)iVar8) {
              if ((DAT_80075718 & 0x3f) == 0x3f) {
                cVar3 = '\0';
              }
              else {
                cVar3 = **(char **)((DAT_80075718 & 0x3f) * 4 + ptr_levelIDRelated);
              }
              if (cVar3 != '\x06') {
                spyro.unkown_angleRelated5 = 1;
                VecNormalize(&unknownVector.x,0x400,uVar7,uVar6);
                Vec3Add(0x80078b10,0x80078b10,&unknownVector);
              }
            }
            Vec3Copy((int *)&spyro,&unknownPositionVector.x);
            if (spyro.maybe_superchargeRelated == 0xff) {
              spyro.maybe_superchargeRelated = DAT_80075718;
              Vec3Copy(&spyro.lastGroundedPosition.x,&unknownVector5.x);
              Vec3Copy(&spyro.unkown33,&unknownVector.x);
            }
            Vec3Subtract(&local_80,(int *)&spyro,aiStack_60);
            uVar2 = Vec3CalculateLengthE(&local_80,flag3D);
            if (0x140 < (int)uVar2) {
              Vec3ScaleDownByFraction(&local_80,uVar2,0x140);
              Vec3Add(&spyro,aiStack_60,&local_80);
            }
            iVar10 = iVar10 + 1;
          } while (iVar10 < 6);
        }
        local_40 = local_40 + 1;
      } while (local_40 < local_38);
    }
  }
  else {
    Vec3Add(&spyro,&spyro,0x80078b58);
  }
  Vec3Subtract(&spyro.unkown18,(int *)&spyro,&spyro.maybe_positionRelative.x);
  Vec3ScaleUpByPowerOfTwo(&spyro.unkown18,6);
  if (gameSpeedMultiplyer == 0) {
    trap(0x1c00);
  }
  if ((gameSpeedMultiplyer == -1) && (spyro.unkown18 == -0x80000000)) {
    trap(0x1800);
  }
  if (gameSpeedMultiplyer == 0) {
    trap(0x1c00);
  }
  if ((gameSpeedMultiplyer == -1) && (spyro.unkown19 == -0x80000000)) {
    trap(0x1800);
  }
  if (gameSpeedMultiplyer == 0) {
    trap(0x1c00);
  }
  if ((gameSpeedMultiplyer == -1) && (spyro.maybe_glideAndWalkOffLedgeZMomentum == -0x80000000)) {
    trap(0x1800);
  }
  spyro.unkown18 = spyro.unkown18 / gameSpeedMultiplyer;
  spyro.unkown19 = spyro.unkown19 / gameSpeedMultiplyer;
  spyro.maybe_glideAndWalkOffLedgeZMomentum =
       spyro.maybe_glideAndWalkOffLedgeZMomentum / gameSpeedMultiplyer;
  spyro.maybe_speedRelated = Vec3CalculateLengthE(&spyro.unkown18,flag3D);
  return 1;
}



undefined4 FUN_80040f68(uint param_1,undefined4 param_2,undefined4 param_3)

{
  uint uVar1;
  SpyroStates spyroMovementState;
  undefined4 uVar2;
  undefined4 uVar3;
  
  uVar3 = 0;
  if (levelID != levelIDPortalExit) {
    return 0;
  }
  uVar1 = param_1;
  if ((spyro.iFramesTimer != 0) &&
     (uVar1 = param_1 & 0xfffffe0e, 0 < spyro.maybe_glideAndWalkOffLedgeZMomentum)) {
    uVar1 = param_1 & 0xfffffa0e;
  }
  uVar2 = 0x80078a84;
  uVar1 = uVar1 & spyro._44_4_;
  if (((uVar1 & 0x5f1) == 0) || (spyro.health < 0)) {
    if ((uVar1 & 0x400) != 0) {
      if (-1 < spyro.health) {
        FUN_8003dfa4();
        if (DAT_800756a0 == 0) {
          spyro.health = spyro.health + -1;
        }
        if (spyro.iFramesTimer < 0x5a) {
          spyro.iFramesTimer = 0x5a;
        }
        SpyroMovement2(DROWNING);
      }
      uVar3 = 1;
    }
    if ((uVar1 & 0x8000) != 0) {
      SpyroMovement2(BONK);
      VecNormalize(&spyro.unkown33,0x800,param_3,uVar2);
      Vec3Copy(&spyro.airMomentum.x,&spyro.unkown33);
      uVar3 = 1;
    }
    if ((uVar1 & 0x800) == 0) {
      if (spyro.state == 0x11) {
        SpyroMovement2(GLIDE);
      }
    }
    else if (spyro.state != 0x11) {
      SpyroMovement2(WHIRLWIND);
      uVar3 = 1;
    }
    if (spyro.state == 0x2c) {
      return uVar3;
    }
    if ((uVar1 & 0x2000) == 0) {
      spyro.isOnSuperchargeGround = 0;
      return uVar3;
    }
    spyro.isOnSuperchargeGround = 1;
    return uVar3;
  }
  if (DAT_800756a0 == 0) {
    spyro.health = spyro.health + -1;
  }
  if ((uVar1 & 0x10) == 0) {
    if ((uVar1 & 0x20) == 0) {
      if ((uVar1 & 0x40) == 0) {
        if ((uVar1 & 0x80) == 0) {
          if ((uVar1 & 0x100) == 0) {
            spyroMovementState = HURT_PITCH_HIGH;
            if ((uVar1 & 0x400) != 0) {
              SpyroMovement2(DROWNING);
              if ((*DAT_80078cf4 != 0) && (DAT_800756a0 == 0)) {
                spyro.health = -1;
              }
              goto LAB_800410f8;
            }
          }
          else {
            spyroMovementState = HURT_ROLL;
          }
        }
        else {
          spyroMovementState = HURT_PITCH_LOW;
        }
      }
      else {
        spyroMovementState = HURT_YAW;
      }
    }
    else {
      PlaySoundEffect((uint)localSFXArray[0x1f],(int *)&spyro,4,&DAT_80078cf8);
      spyroMovementState = HURT_ZAPPED;
    }
  }
  else {
    spyroMovementState = HURT_SQUISHED;
    if (spyro.health < 0) {
      spyroMovementState = DEATH_SQUISHED;
    }
  }
  SpyroMovement2(spyroMovementState);
LAB_800410f8:
  if (spyro.iFramesTimer < 0x5a) {
    spyro.iFramesTimer = 0x5a;
  }
  return 1;
}



undefined4 FUN_80041270(void)

{
  int iVar1;
  uint uVar2;
  SpyroStates spyroMovementState;
  undefined4 uVar3;
  undefined4 in_a3;
  uint uVar4;
  undefined4 uVar5;
  uint local_28;
  uint local_24;
  
  uVar4 = 0xffff;
  uVar5 = 0;
  if (levelID != levelIDPortalExit) {
    return 0;
  }
  uVar3 = 0x80078bb8;
  if (spyro.iFramesTimer != 0) {
    uVar4 = 0xfe0e;
  }
  uVar4 = uVar4 & spyro._44_4_;
  uVar2 = uVar4 & 6;
  if (uVar2 != 4) {
    if (4 < uVar2) {
      if (((uVar2 == 6) && (spyro.iFramesTimer == 0)) && (-1 < spyro.health)) {
        if (DAT_800756a0 == 0) {
          spyro.health = spyro.health + -1;
        }
        spyro.iFramesTimer = 0x5a;
        if ((uVar4 & 0x10) == 0) {
          spyroMovementState = HURT_ZAPPED;
          if ((((uVar4 & 0x20) == 0) && (spyroMovementState = HURT_YAW, (uVar4 & 0x40) == 0)) &&
             (spyroMovementState = HURT_PITCH_LOW, (uVar4 & 0x80) == 0)) {
            if ((uVar4 & 0x100) == 0) {
              spyroMovementState = HURT_PITCH_HIGH;
              if ((uVar4 & 0x400) != 0) {
                spyroMovementState = DROWNING;
              }
            }
            else {
              spyroMovementState = HURT_ROLL;
            }
          }
        }
        else {
          spyroMovementState = HURT_SQUISHED;
          if (spyro.health < 0) {
            spyroMovementState = DEATH_SQUISHED;
          }
        }
        SpyroMovement2(spyroMovementState);
        return 1;
      }
      goto LAB_80041434;
    }
    if (uVar2 != 2) goto LAB_80041434;
    Vec3Subtract((int *)&local_28,(int *)(DAT_80075804 + 0xc),(int *)&spyro);
    uVar3 = 1;
    iVar1 = ATan2Scaled(local_28,local_24,1);
    uVar2 = iVar1 - spyro.angle.yaw & 0xfff;
    if (0x800 < uVar2) {
      uVar2 = uVar2 - 0x1000;
    }
    if ((int)uVar2 < 0) {
      uVar2 = -uVar2;
    }
    if (0x1ff < (int)uVar2) goto LAB_80041434;
  }
  SpyroMovement2(BONK);
  uVar5 = 1;
LAB_80041434:
  if ((uVar4 & 0x8000) != 0) {
    SpyroMovement2(BONK);
    VecNormalize(&spyro.unkown33,0x800,uVar3,in_a3);
    Vec3Copy(&spyro.airMomentum.x,&spyro.unkown33);
    uVar5 = 1;
  }
  if (((uVar4 & 0x800) != 0) && (spyro.state != 0x11)) {
    SpyroMovement2(WHIRLWIND);
    uVar5 = 1;
  }
  if (((uVar4 & 0x400) != 0) && (-1 < spyro.health)) {
    FUN_8003dfa4();
    if (DAT_800756a0 == 0) {
      spyro.health = spyro.health + -1;
    }
    if (spyro.iFramesTimer < 0x5a) {
      spyro.iFramesTimer = 0x5a;
    }
    SpyroMovement2(DROWNING);
    uVar5 = 1;
  }
  spyro.isOnSuperchargeGround = (int)((uVar4 & 0x2000) != 0);
  return uVar5;
}



void FUN_80041558(void)

{
  int iVar1;
  
  iVar1 = DAT_80075970;
  while( true ) {
    DAT_80075970 = DAT_80075970 + 1;
    if (8 < DAT_80075970) {
      DAT_80075970 = 0;
    }
    if (DAT_80075970 == iVar1) break;
    if (*(int *)((uint)(byte)(&DAT_8006c470)[(&DAT_8006bc60)[DAT_80075970]] * 4 + DAT_80076378 +
                0x38) != 0) {
LAB_8004163c:
      SpyroMovement2((&DAT_8006bc60)[DAT_80075970]);
      return;
    }
  }
  if (*(int *)((uint)(byte)(&DAT_8006c470)[(&DAT_8006bc60)[DAT_80075970]] * 4 + DAT_80076378 + 0x38)
      == 0) {
    DAT_80075788 = 10000;
    return;
  }
  goto LAB_8004163c;
}



// WARNING: Type propagation algorithm not settling

void SpyroMovement(void)

{
  uint uVar1;
  Buttons BVar2;
  int iVar3;
  int iVar4;
  SpyroStates SVar5;
  int local_30;
  int local_2c;
  undefined4 local_28;
  int local_20;
  int local_1c;
  undefined4 local_18;
  
  switch(spyro.state) {
  case 0:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    SVar5 = JUMP;
    if ((((((currentButtonOneFrame & X_BUTTON) == 0) && (SVar5 = FLOP, spyro.timer_framesInAir < 4))
         && (spyro.unkown_angleRelated4 < 0x17)) &&
        ((SVar5 = CHARGE, (currentButton & SQUARE_BUTTON) == 0 &&
         (SVar5 = ROLL_LEFT, (currentButtonOneFrame & L1_BUTTON) == 0)))) &&
       (SVar5 = ROLL_RIGHT, (currentButtonOneFrame & R1_BUTTON) == 0)) {
      if (0x400 < spyro.maybe_speedRelated) {
        SpyroMovement2(END_WALK);
        spyro.subState = 7;
        return;
      }
      if (unk_cameraRelatedLocking == &DAT_80000009) {
        return;
      }
      SVar5 = BEGIN_WALK;
      if (DAT_80077394 != 0) {
        if (spyro.isMovementLocked != 0) {
          return;
        }
        SVar5 = LEDGE_PEER;
        if (spyro.unkown_landingMomentumRelated == 0) {
          if (spyro.framesInCurrentState < DAT_80075788) {
            return;
          }
          if (spyro.maybe_isFlaming == 1) {
            return;
          }
          FUN_80041558();
          return;
        }
      }
    }
    break;
  case 1:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    SVar5 = JUMP;
    if ((((((currentButtonOneFrame & X_BUTTON) == 0) && (SVar5 = FLOP, spyro.timer_framesInAir < 4))
         && (spyro.unkown_angleRelated4 < 0x17)) &&
        (((SVar5 = CHARGE, (currentButton & SQUARE_BUTTON) == 0 &&
          (SVar5 = ROLL_LEFT, (currentButtonOneFrame & L1_BUTTON) == 0)) &&
         (SVar5 = ROLL_RIGHT, (currentButtonOneFrame & R1_BUTTON) == 0)))) &&
       (((spyro.absoluteMomentum != 0 || (spyro.unkown_angleRelated6 != 0)) ||
        (SVar5 = IDLE_STANDING, spyro.framesInCurrentState < 0x10)))) {
      if (spyro.absoluteMomentum < 0xf01) {
        SVar5 = UPHILL_WALK;
        if (spyro.absoluteMomentum < 0x781) {
          return;
        }
      }
      else {
        SVar5 = WALKING;
      }
    }
    break;
  case 2:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    SVar5 = JUMP;
    if (((((currentButtonOneFrame & X_BUTTON) == 0) && (SVar5 = FLOP, spyro.timer_framesInAir < 4))
        && (spyro.unkown_angleRelated4 < 0x17)) &&
       (((SVar5 = CHARGE, (currentButton & SQUARE_BUTTON) == 0 &&
         (SVar5 = ROLL_LEFT, (currentButtonOneFrame & L1_BUTTON) == 0)) &&
        ((SVar5 = ROLL_RIGHT, (currentButtonOneFrame & R1_BUTTON) == 0 &&
         (SVar5 = END_WALK, spyro.unkown_angleRelated6 != 0)))))) {
      iVar4 = Maybe_AngleDiff(spyro.unkown_angleRelated7,spyro.angle.yaw);
      if (iVar4 < 0x501) {
        SVar5 = IDLE_STANDING;
        if (((spyro.unkown_angleRelated6 != 0) &&
            (SVar5 = BEGIN_WALK, 0x63f < spyro.absoluteMomentum)) &&
           (SVar5 = UPHILL_WALK, 0xc7f < spyro.absoluteMomentum)) {
          return;
        }
      }
      else if (DAT_80077388 == 0) {
        SVar5 = PIVOT;
      }
      else {
        iVar4 = *(byte *)(DAT_800757e0 + 0x17) - 0x7f;
        if (iVar4 < 0) {
          iVar4 = -iVar4;
        }
        SVar5 = END_WALK;
        if (0x30 < iVar4) {
          SVar5 = PIVOT;
        }
      }
    }
    break;
  case 3:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    SVar5 = JUMP;
    if (((((((currentButtonOneFrame & X_BUTTON) == 0) && (SVar5 = FLOP, spyro.timer_framesInAir < 4)
           ) && (spyro.unkown_angleRelated4 < 0x17)) &&
         ((SVar5 = CHARGE, (currentButton & SQUARE_BUTTON) == 0 &&
          (SVar5 = ROLL_LEFT, (currentButtonOneFrame & L1_BUTTON) == 0)))) &&
        (SVar5 = ROLL_RIGHT, (currentButtonOneFrame & R1_BUTTON) == 0)) &&
       (((spyro.absoluteMomentum != 0 || (spyro.unkown_angleRelated6 != 0)) ||
        (SVar5 = IDLE_STANDING, 0xff < spyro.maybe_speedRelated)))) {
      if ((0 < spyro.unkown_angleRelated6) && (spyro.framesInCurrentState < 0x12)) {
        iVar4 = Maybe_AngleDiff(spyro.unkown_angleRelated7,spyro.angle.yaw);
        SVar5 = PIVOT;
        if (0x500 < iVar4) break;
      }
      if (((spyro.absoluteMomentum < 0xf01) || (SVar5 = WALKING, spyro.unkown_angleRelated6 < 1)) &&
         ((spyro.absoluteMomentum < 0x781 || (SVar5 = UPHILL_WALK, spyro.unkown_angleRelated6 < 1)))
         ) {
        if (spyro.absoluteMomentum < 1) {
          return;
        }
        SVar5 = BEGIN_WALK;
        if (spyro.unkown_angleRelated6 < 1) {
          return;
        }
      }
    }
    break;
  case 4:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if ((spyro.timer_framesInAir < 4) && (spyro.unkown_angleRelated4 < 0x17)) {
      if (spyro.framesInCurrentState < 0x25) {
        return;
      }
      SVar5 = IDLE_STANDING;
      if (DAT_80077394 == 0) {
        spyro.absoluteMomentum = 0xa00;
        SVar5 = BEGIN_WALK;
      }
    }
    else {
      SVar5 = FLOP;
    }
    break;
  case 5:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if ((spyro.glideUsed == 0) && ((currentButtonOneFrame & X_BUTTON) != 0)) {
      spyro.isGliding = 1;
    }
    if (spyro.maybe_glideAndWalkOffLedgeZMomentum < 0) {
      spyro.subState = 1;
    }
    if (((spyro.subState == 0) && ((currentButton & X_BUTTON) == 0)) && (DAT_800756b4 == 0)) {
      spyro.subState = 2;
    }
    if ((spyro.timer_framesInAir == 0) && (0xf < spyro.framesInCurrentState)) {
      SVar5 = ROLL_DOWN_SLOPE;
      if (spyro.unkown_angleRelated4 < 0x17) {
        if (-1 < spyro.unkown_angleRelated * spyro.airMomentum.x +
                 spyro.unkown_angleRelated2 * spyro.airMomentum.y +
                 spyro.unkown_angleRelated3 * spyro.airMomentum.z) {
          return;
        }
        if (spyro.unkown_angleRelated6 < 1) {
          SVar5 = END_WALK;
          if (spyro.absoluteMomentum < 0x780) {
            FUN_8003dfa4();
            SVar5 = IDLE_STANDING;
          }
        }
        else if (spyro.absoluteMomentum < 0xf01) {
          SVar5 = BEGIN_WALK;
          if (0x780 < spyro.absoluteMomentum) {
            SVar5 = UPHILL_WALK;
          }
        }
        else {
          SVar5 = WALKING;
        }
      }
    }
    else {
      if ((currentButton & SQUARE_BUTTON) != 0) {
        SpyroMovement2(CHARGING_AIR);
        spyro.absoluteMomentum = 0x1f80;
        return;
      }
      if (((spyro.glideUsed == 0) && (spyro.subState == 1)) && (spyro.isGliding != 0)) {
        SVar5 = SUPERFLY;
        if ((isInFlightLevel == 0) && (SVar5 = GLIDE, levelIDPortalExit == 0x40)) {
          SVar5 = SUPERFLY;
        }
      }
      else {
        SVar5 = FLOP;
        if ((-0x1901 < spyro.maybe_glideAndWalkOffLedgeZMomentum) &&
           (spyro.framesInCurrentState < 0x79)) {
          return;
        }
      }
    }
    break;
  case 6:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if ((currentButtonOneFrame & X_BUTTON) == 0) {
LAB_80042014:
      if ((spyro.position.z < *(int *)(&DAT_8006e9a4 + levelID_Indexer * 4)) ||
         (spyro.timer_framesInAir != 0)) {
joined_r0x80042eac:
        if (spyro.framesInCurrentState < 0x12d) {
          spyro.maybe_weirdDamageAnimRelated = (short)spyro._44_4_;
          spyro.unkown4 = SUB42(spyro._44_4_,2);
          return;
        }
        if (isInFlightLevel != 0) {
          (*DAT_80075694)();
          (*funcptr_OverlayUpdateMobys)();
          return;
        }
        lives = lives + 1;
        ShouldDieOrGameover();
        return;
      }
      if (spyro.unkown_angleRelated4 < 0x17) {
        if (0 < spyro.unkown_angleRelated6) {
          if (spyro.absoluteMomentum < 0xf01) {
            SVar5 = BEGIN_WALK;
            if (0x780 < spyro.absoluteMomentum) {
              SVar5 = UPHILL_WALK;
            }
          }
          else {
            SVar5 = WALKING;
          }
          iVar4 = 0;
          SpyroMovement2(SVar5);
          uVar1 = (uint)(byte)spyro.RelativeSparxAngle.roll;
          local_28 = 0;
          do {
            iVar4 = iVar4 + 1;
            local_30 = (int)((uint)(ushort)sineWaveArray[uVar1 + 0x40] << 0x10) >> 0x17;
            local_2c = (int)((uint)(ushort)sineWaveArray[uVar1] << 0x10) >> 0x17;
            (*ptr_OverlayCreateParticle)(1,0x21,&local_30,0);
            uVar1 = uVar1 + 0x40 & 0xff;
          } while (iVar4 < 4);
          return;
        }
        SVar5 = END_WALK;
        if (spyro.absoluteMomentum < 0x780) {
          FUN_8003dfa4();
          SVar5 = IDLE_STANDING;
        }
        iVar4 = 0;
        SpyroMovement2(SVar5);
        uVar1 = (uint)(byte)spyro.RelativeSparxAngle.roll;
        local_18 = 0;
        do {
          iVar4 = iVar4 + 1;
          local_20 = (int)((uint)(ushort)sineWaveArray[uVar1 + 0x40] << 0x10) >> 0x17;
          local_1c = (int)((uint)(ushort)sineWaveArray[uVar1] << 0x10) >> 0x17;
          (*ptr_OverlayCreateParticle)(1,0x21,&local_20,0);
          uVar1 = uVar1 + 0x40 & 0xff;
        } while (iVar4 < 4);
        return;
      }
      SVar5 = ROLL_DOWN_SLOPE;
      if (spyro.framesInCurrentState < 9) {
        return;
      }
    }
    else if ((spyro.isGrounded == 0) || (SVar5 = JUMP, 3 < spyro.framesInCurrentState)) {
      if (((currentButtonOneFrame & X_BUTTON) == 0) || (spyro.subState != 0)) goto LAB_80042014;
      if ((isInFlightLevel != 0) || (levelIDPortalExit == 0x40)) {
        SVar5 = SUPERFLY;
        goto joined_r0x80042d34;
      }
      SVar5 = GLIDE;
      if ((spyro.glideUsed != 0) && (spyro.framesInCurrentState < 0x1f)) {
        return;
      }
    }
    break;
  case 7:
    if ((spyro._44_4_ & 0x20) != 0) {
      return;
    }
    if (spyro.framesInCurrentState < 0x18) {
      return;
    }
    if (-1 < spyro.health) {
LAB_80043558:
      SVar5 = FLOP;
      if (spyro.timer_framesInAir == 0) {
        SVar5 = IDLE_STANDING;
      }
      SpyroMovement2(SVar5);
      if (0xb < spyro.isMovementLocked) {
        return;
      }
      spyro.isMovementLocked = 0xc;
      return;
    }
    SVar5 = DEATH_SPIN;
    break;
  case 8:
    iVar4 = FUN_80040f68(0xfbf9);
    if (iVar4 != 0) {
      if (spyro.framesInCurrentState < 0xd) {
        return;
      }
      spyro.angle.yaw = spyro.unkown_angleRelated7;
      spyro.angle.pitch = -spyro.angle.pitch & 0xfff;
      spyro.angle.roll = -spyro.angle.roll & 0xfff;
      return;
    }
    if (spyro.framesInCurrentState < 0x14) {
      return;
    }
    spyro.angle.yaw = spyro.unkown_angleRelated7;
    spyro.angle.roll = -spyro.angle.roll & 0xfff;
    spyro.angle.pitch = -spyro.angle.pitch & 0xfff;
    SVar5 = IDLE_STANDING;
    if (DAT_80077394 == 0) {
      SpyroMovement2(BEGIN_WALK);
      spyro.absoluteMomentum = 0x15;
      return;
    }
    break;
  case 9:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if ((spyro.timer_framesInAir < 4) && (spyro.unkown_angleRelated4 < 0x17)) {
      if ((currentButton & L1_BUTTON) != 0) {
        return;
      }
      if (spyro.framesInCurrentState < 0x15) {
        return;
      }
      Vec3Copy(&spyro.airMomentum.x,&spyro.groundedChargeMomentum2.x);
      spyro.absoluteMomentum = 0;
      SVar5 = IDLE_STANDING;
    }
    else {
      SVar5 = FLOP;
    }
    break;
  case 10:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if ((spyro.timer_framesInAir < 4) && (spyro.unkown_angleRelated4 < 0x17)) {
      if ((currentButton & R1_BUTTON) != 0) {
        return;
      }
      if (spyro.framesInCurrentState < 0x15) {
        return;
      }
      Vec3Copy(&spyro.airMomentum.x,&spyro.groundedChargeMomentum2.x);
      spyro.absoluteMomentum = 0;
      SVar5 = IDLE_STANDING;
    }
    else {
      SVar5 = FLOP;
    }
    break;
  case 0xb:
    iVar4 = FUN_80041270();
    if (iVar4 != 0) {
      return;
    }
    if (((currentButton & (X_BUTTON|SQUARE_BUTTON)) == (X_BUTTON|SQUARE_BUTTON)) &&
       (spyro.unkown_angleRelated4 < 0xc)) {
      SpyroMovement2(CHARGING_AIR);
      spyro.timer_framesInAir = spyro.timer_framesInAir + 1;
      spyro.airMomentum.z = spyro.airMomentum.z + 0xdc0;
      return;
    }
    SVar5 = CHARGING_AIR;
    if ((spyro.timer_framesInAir < 4) && (SVar5 = FLOP, spyro.unkown_angleRelated4 < 0x17)) {
      if ((currentButton & SQUARE_BUTTON) == 0) {
        SpyroMovement2(WALKING);
        spyro.framesInCurrentState = spyro.unkown14 << 1;
        return;
      }
      if (((spyro.absoluteMomentum < 0xc81) ||
          (spyro.absoluteMomentum <= spyro.maybe_speedRelated << 1)) ||
         (SVar5 = BONK, canFlyIn != 0)) {
        if (spyro.isOnSuperchargeGround == 0) {
          spyro.subState = spyro.subState & 0xffffff7f;
          return;
        }
        if (spyro.absoluteMomentum < 0x3001) {
          if ((spyro.subState & 0x80U) != 0) {
            return;
          }
          spyro.neutralJumpZPos = spyro.position.z;
          spyro.unkown_angleRelated6 = Vec3CalculateLengthE(&spyro.groundedChargeMomentum2.x,flag3D)
          ;
          if (spyro.unkown_angleRelated6 < 0x1f80) {
            spyro.unkown_angleRelated6 = 0x1f80;
          }
          spyro.subState = spyro.subState | 0x80;
          return;
        }
        SVar5 = SUPERCHARGE;
      }
    }
    break;
  case 0xc:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if ((spyro.framesInCurrentState < 0x11) ||
       ((spyro.timer_framesInAir == 0 && (spyro.unkown_angleRelated4 < 0x17)))) {
      SVar5 = IDLE_STANDING;
      if (spyro.framesInCurrentState < 0x19) {
        return;
      }
    }
    else {
      SVar5 = FLOP;
    }
    break;
  case 0xd:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    SVar5 = JUMP;
    if ((((((currentButtonOneFrame & X_BUTTON) == 0) && (SVar5 = FLOP, spyro.timer_framesInAir < 4))
         && (spyro.unkown_angleRelated4 < 0x17)) &&
        (((SVar5 = CHARGE, (currentButton & SQUARE_BUTTON) == 0 &&
          (SVar5 = ROLL_LEFT, (currentButtonOneFrame & L1_BUTTON) == 0)) &&
         ((SVar5 = ROLL_RIGHT, (currentButtonOneFrame & R1_BUTTON) == 0 &&
          ((SVar5 = IDLE_STANDING, unk_cameraRelatedLocking != &DAT_80000009 &&
           (SVar5 = BEGIN_WALK, DAT_80077394 != 0)))))))) &&
       (SVar5 = IDLE_STANDING, spyro.isMovementLocked == 0)) {
      iVar4 = spyro.unkown_landingMomentumRelated;
      if (spyro.framesInCurrentState < 0x1f) {
        return;
      }
      goto joined_r0x80043df8;
    }
    break;
  case 0xe:
  case 0x16:
  case 0x1c:
    if (spyro.framesInCurrentState < 0x18) {
      return;
    }
    if (-1 < spyro.health) goto LAB_80043558;
    SVar5 = DEATH_SPIN;
    break;
  case 0xf:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if (spyro.timer_framesInAir == 0) {
      SVar5 = FLOP;
      if (spyro.unkown_angleRelated4 < 0x17) {
        if (spyro.unkown_angleRelated6 < 1) {
          SVar5 = END_WALK;
          if (spyro.absoluteMomentum < 0x780) {
            FUN_8003dfa4();
            SVar5 = IDLE_STANDING;
          }
        }
        else if (spyro.absoluteMomentum < 0xf01) {
          SVar5 = BEGIN_WALK;
          if (0x780 < spyro.absoluteMomentum) {
            SVar5 = UPHILL_WALK;
          }
        }
        else {
          SVar5 = WALKING;
        }
      }
    }
    else {
      SVar5 = FLOP;
      if ((((spyro.timer_framesIdle != 0) && (0x3ff < spyro.maybe_speedRelated)) &&
          (SVar5 = CHARGING_AIR, (currentButton & SQUARE_BUTTON) == 0)) &&
         ((spyro.framesInCurrentState < 0x11 ||
          (SVar5 = TRIANGLE_DROP, (currentButtonOneFrame & TRIANGLE_BUTTON) == 0)))) {
        if (spyro.canSuperfly == 0) {
          if ((spyro.subState != 0) ||
             (SVar5 = FLOP, spyro.position.z <= spyro.neutralJumpZPos + 0x18)) {
            if (0xc7f < spyro.absoluteMomentum) {
              return;
            }
            SVar5 = PULL_BACK_GLIDE;
            if (spyro.framesInCurrentState < 0x11) {
              return;
            }
          }
        }
        else {
          if (spyro.subState != 0) {
            return;
          }
          if (spyro.position.z - spyro.neutralJumpZPos < 0x201) {
            if ((*(uint *)(DAT_800757e0 + 4) & 8) != 0) {
              spyro.subState = 1;
              return;
            }
            if ((*(uint *)(DAT_800757e0 + 4) & 4) == 0) {
              return;
            }
            DAT_80075700 = spyro.position.z;
            spyro.subState = 2;
            return;
          }
          SVar5 = FLOP;
        }
      }
    }
    break;
  case 0x10:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if ((*(int *)(&DAT_8006e9a4 + levelID_Indexer * 4) <= spyro.position.z) &&
       (spyro.timer_framesInAir == 0)) {
      if ((spyro.framesInCurrentState < 0x18) && (spyro.unkown_angleRelated4 < 0x17)) {
        SpyroMovement2(IDLE_STANDING);
      }
      else {
        SpyroMovement2(FLOP);
        spyro.framesInCurrentState = spyro.unkown14;
      }
      if (spyro.isMovementLocked < 8) {
        spyro.isMovementLocked = 8;
      }
      FUN_8003dfa4();
    }
    if ((currentButtonOneFrame & X_BUTTON) == 0) goto joined_r0x80042eac;
    SVar5 = GLIDE;
joined_r0x80042d34:
    if ((spyro.glideUsed != 0) && (spyro.framesInCurrentState < 0x10)) {
      spyro.maybe_weirdDamageAnimRelated = (short)spyro._44_4_;
      spyro.unkown4 = SUB42(spyro._44_4_,2);
      return;
    }
    break;
  case 0x11:
    FUN_80040f68(0xfff9);
    return;
  case 0x12:
  case 0x24:
  case 0x25:
  case 0x26:
  case 0x27:
  case 0x28:
  case 0x29:
  case 0x2a:
  case 0x2b:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    SVar5 = JUMP;
    if ((currentButtonOneFrame & X_BUTTON) == 0) {
      if ((spyro.timer_framesInAir < 4) && (spyro.unkown_angleRelated4 < 0x17)) {
        if ((currentButton & SQUARE_BUTTON) == 0) {
          if ((currentButtonOneFrame & L1_BUTTON) == 0) {
            if ((currentButtonOneFrame & R1_BUTTON) == 0) {
              if (spyro.maybe_speedRelated < 0x401) {
                if (unk_cameraRelatedLocking == &DAT_80000009) goto LAB_80042c2c;
                if (DAT_80077394 == 0) {
                  SVar5 = BEGIN_WALK;
                }
                else {
                  if (spyro.unkown_landingMomentumRelated != 0) {
                    ForceMovementState(0xd);
                    return;
                  }
                  if (spyro.isMovementLocked != 0) {
LAB_80042c2c:
                    ForceMovementState(0);
                    return;
                  }
                  if (((uint)(byte)spyro.nextAnim != (uint)(byte)(&DAT_8006c470)[spyro.state]) ||
                     (SVar5 = IDLE_STANDING,
                     (int)(uint)(byte)spyro.nextKeyframe <
                     (int)((byte)(&DAT_8006c4a1)[(uint)(byte)spyro.nextAnim * 4] - 1))) {
                    if (spyro.maybe_isFlaming != 1) {
                      return;
                    }
                    goto LAB_80042c2c;
                  }
                }
              }
              else {
                SVar5 = END_WALK;
              }
            }
            else {
              SVar5 = ROLL_RIGHT;
            }
          }
          else {
            SVar5 = ROLL_LEFT;
          }
          break;
        }
LAB_80043fbc:
        SVar5 = CHARGE;
      }
      else {
        SVar5 = FLOP;
      }
    }
    break;
  case 0x13:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if (((((currentButton & X_BUTTON) == 0) || (SVar5 = JUMP, 3 < spyro.framesInCurrentState)) &&
        (((currentButton & SQUARE_BUTTON) == 0 ||
         (SVar5 = CHARGING_AIR, spyro.absoluteMomentum < 0x1f01)))) &&
       (SVar5 = FLOP, spyro.timer_framesInAir < 8)) {
      if (((0x16 < spyro.unkown_angleRelated4) ||
          ((uint)(byte)spyro.nextKeyframe != DAT_8006c4f1 - 1)) ||
         (0x8ff < spyro.maybe_speedRelated)) goto joined_r0x80042eac;
      if (spyro.unkown_angleRelated6 < 1) {
        SVar5 = END_WALK;
        if (spyro.absoluteMomentum < 0x780) {
          FUN_8003dfa4();
          SVar5 = IDLE_STANDING;
        }
      }
      else if (spyro.absoluteMomentum < 0xf01) {
        SVar5 = BEGIN_WALK;
        if (0x780 < spyro.absoluteMomentum) {
          SVar5 = UPHILL_WALK;
        }
      }
      else {
        SVar5 = WALKING;
      }
    }
    break;
  case 0x14:
    if ((spyro.glideUsed == 0) && ((currentButtonOneFrame & X_BUTTON) != 0)) {
      spyro.isGliding = 1;
    }
    if (((spyro.subState & 0x40U) == 0) && (iVar4 = FUN_80041270(), iVar4 != 0)) {
      return;
    }
    if (((spyro.unkown_angleRelated4 < 0x17) || (canFlyIn != 0)) ||
       (SVar5 = BONK,
       -1 < spyro.airMomentum.x * spyro.unkown_angleRelated +
            spyro.airMomentum.y * spyro.unkown_angleRelated2)) {
      if (((spyro.unkown15 == 0) && (0xc80 < spyro.absoluteMomentum)) &&
         ((spyro.maybe_speedRelated << 1 < spyro.absoluteMomentum && (canFlyIn == 0)))) {
        Maybe_decayMomenum();
        SVar5 = BONK;
      }
      else if (spyro.timer_framesInAir == 0) {
        SVar5 = SUPERCHARGE;
        if ((spyro.subState & 0x40U) == 0) goto LAB_80043fbc;
      }
      else {
        if (-1 < spyro.airMomentum.z) {
          return;
        }
        if (spyro.isGliding == 0) {
          return;
        }
        SVar5 = SUPERFLY;
        if ((isInFlightLevel == 0) && (SVar5 = GLIDE, levelIDPortalExit == 0x40)) {
          SVar5 = SUPERFLY;
        }
      }
    }
    break;
  case 0x15:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    SVar5 = JUMP;
    if ((((((currentButtonOneFrame & X_BUTTON) == 0) && (SVar5 = FLOP, spyro.timer_framesInAir < 4))
         && (spyro.unkown_angleRelated4 < 0x17)) &&
        ((SVar5 = CHARGE, (currentButton & SQUARE_BUTTON) == 0 &&
         (SVar5 = ROLL_LEFT, (currentButtonOneFrame & L1_BUTTON) == 0)))) &&
       (SVar5 = ROLL_RIGHT, (currentButtonOneFrame & R1_BUTTON) == 0)) {
      if (spyro.absoluteMomentum < 0xf01) {
        SVar5 = BEGIN_WALK;
        if (0x63f < spyro.absoluteMomentum) {
          return;
        }
      }
      else {
        SVar5 = WALKING;
      }
    }
    break;
  case 0x17:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if (spyro.timer_framesInAir == 0) {
      SVar5 = FLOP;
      if (spyro.unkown_angleRelated4 < 0x17) {
        if (spyro.unkown_angleRelated6 < 1) {
          SVar5 = END_WALK;
          if (spyro.absoluteMomentum < 0x780) {
            FUN_8003dfa4();
            SVar5 = IDLE_STANDING;
          }
        }
        else if (spyro.absoluteMomentum < 0xf01) {
          SVar5 = BEGIN_WALK;
          if (0x780 < spyro.absoluteMomentum) {
            SVar5 = UPHILL_WALK;
          }
        }
        else {
          SVar5 = WALKING;
        }
      }
    }
    else {
      SVar5 = FLOP;
      if (((spyro.timer_framesIdle != 0) && (0x3ff < spyro.maybe_speedRelated)) &&
         ((SVar5 = CHARGING_AIR, (currentButton & SQUARE_BUTTON) == 0 &&
          ((SVar5 = TRIANGLE_DROP, (currentButtonOneFrame & TRIANGLE_BUTTON) == 0 &&
           (SVar5 = FLOP, spyro.position.z <= spyro.neutralJumpZPos + 0x18)))))) {
        if (spyro.absoluteMomentum < 0xc81) {
          return;
        }
        SVar5 = SUPERFLY;
        if ((isInFlightLevel == 0) && (SVar5 = GLIDE, levelIDPortalExit == 0x40)) {
          SVar5 = SUPERFLY;
        }
      }
    }
    break;
  case 0x18:
    if (3 < spyro.framesInCurrentState) {
      spyro.isGrounded = 0;
    }
    if (((currentButton & X_BUTTON) == 0) || (spyro.isGrounded == 0)) {
      if (((currentButtonOneFrame & X_BUTTON) != 0) && (spyro.glideUsed == 0)) {
        spyro.isGliding = 1;
      }
    }
    else {
      spyro.isGrounded = 0;
      spyro.airMomentum.z = spyro.airMomentum.z + 0xdc0;
    }
    if (((spyro.unkown_angleRelated4 < 0x17) || (canFlyIn != 0)) ||
       (SVar5 = BONK,
       -1 < spyro.airMomentum.x * spyro.unkown_angleRelated +
            spyro.airMomentum.y * spyro.unkown_angleRelated2)) {
      uVar1 = Vec3CalculateLengthE(&spyro.airMomentum.x,flag3D);
      if (uVar1 == 0) {
        uVar1 = 1;
      }
      if (uVar1 == 0) {
        trap(0x1c00);
      }
      if ((uVar1 == 0xffffffff) && (spyro.maybe_speedRelated << 0xc == -0x80000000)) {
        trap(0x1800);
      }
      if ((((spyro.unkown15 != 0) || (0x7ff < (spyro.maybe_speedRelated << 0xc) / (int)uVar1)) ||
          (SVar5 = BONK, canFlyIn != 0)) && (SVar5 = CHARGE, spyro.timer_framesInAir != 0)) {
        if (-1 < spyro.airMomentum.z) {
          return;
        }
        SVar5 = CHARGING_AIR;
        if (((spyro.isGliding != 0) && (SVar5 = SUPERFLY, isInFlightLevel == 0)) &&
           (SVar5 = GLIDE, levelIDPortalExit == 0x40)) {
          SVar5 = SUPERFLY;
        }
      }
    }
    break;
  case 0x19:
    if ((spyro._44_4_ & 0x10) != 0) {
      return;
    }
    if (spyro.framesInCurrentState < 0x18) {
      return;
    }
    if (-1 < spyro.health) goto LAB_80043558;
    SVar5 = DEATH_SPIN;
    break;
  case 0x1a:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    SVar5 = JUMP;
    if ((((((currentButtonOneFrame & X_BUTTON) == 0) && (SVar5 = FLOP, spyro.timer_framesInAir < 4))
         && (spyro.unkown_angleRelated4 < 0x17)) &&
        ((SVar5 = BEGIN_WALK, spyro.absoluteMomentum == 0 && (spyro.unkown_angleRelated6 == 0)))) &&
       (0xf < spyro.framesInCurrentState)) {
      SVar5 = IDLE_STANDING;
    }
    break;
  case 0x1b:
    if (spyro.framesInCurrentState < 0x30) {
      return;
    }
    if (-1 < spyro.health) goto LAB_80043558;
    SVar5 = DEATH_SPIN;
    break;
  case 0x1d:
    iVar4 = FUN_80040f68(0xfbf9);
    if (iVar4 != 0) {
      return;
    }
    if (spyro.health < 0) {
      return;
    }
    if (0x3c < spyro.framesInCurrentState) {
      spyro.health = -1;
      (*ptr_OverlaySpawnDynamicObj)(*(undefined4 *)(&DAT_8006ea40 + DAT_80075728 * 4),0);
      return;
    }
    if (spyro.framesInCurrentState < 0x10) {
      return;
    }
    BVar2 = currentButton & X_BUTTON;
    SVar5 = JUMP;
    goto joined_r0x80043dcc;
  default:
    goto switchD_800416a8_caseD_1e;
  case 0x20:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if (spyro.timer_framesInAir == 0) {
      if (spyro.unkown_angleRelated4 < 0x17) {
        if (spyro.unkown_angleRelated6 < 1) {
          if (spyro.absoluteMomentum < 0x780) {
            FUN_8003dfa4();
            SpyroMovement2(IDLE_STANDING);
          }
          else {
            SpyroMovement2(END_WALK);
          }
        }
        else if (spyro.absoluteMomentum < 0xf01) {
          if (spyro.absoluteMomentum < 0x781) {
            SpyroMovement2(BEGIN_WALK);
          }
          else {
            SpyroMovement2(UPHILL_WALK);
          }
        }
        else {
          SpyroMovement2(WALKING);
        }
      }
      else {
LAB_8004387c:
        SpyroMovement2(FLOP);
      }
    }
    else {
      if ((spyro.timer_framesIdle == 0) || (spyro.maybe_speedRelated < 0x400)) goto LAB_8004387c;
      if ((spyro.maybe_glideAndWalkOffLedgeZMomentum < 0x801) &&
         ((currentButtonOneFrame & X_BUTTON) == 0)) {
        if (spyro.maybe_glideAndWalkOffLedgeZMomentum < -0x1000) {
          SpyroMovement2(SUPERFLY_DESCENDING);
        }
        else if (spyro.subState == 0) {
          if (0x200 < spyro.position.z - spyro.neutralJumpZPos) goto LAB_8004387c;
          if ((*(uint *)(DAT_800757e0 + 4) & 8) == 0) {
            if ((*(uint *)(DAT_800757e0 + 4) & 4) != 0) {
              spyro.subState = 2;
              DAT_80075700 = spyro.position.z;
            }
          }
          else {
            spyro.subState = 1;
          }
        }
      }
      else {
        SpyroMovement2(SUPERFLY_ASCENDING);
      }
    }
    if (isInFlightLevel != 0) {
      return;
    }
    SVar5 = CHARGING_AIR;
    if ((currentButton & SQUARE_BUTTON) == 0) {
      if (spyro.framesInCurrentState < 0x11) {
        return;
      }
      BVar2 = currentButtonOneFrame & TRIANGLE_BUTTON;
      SVar5 = TRIANGLE_DROP;
      goto joined_r0x80043dcc;
    }
    break;
  case 0x21:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if (spyro.timer_framesInAir == 0) {
      if (spyro.unkown_angleRelated4 < 0x17) {
        if (spyro.unkown_angleRelated6 < 1) {
          if (spyro.absoluteMomentum < 0x780) {
            FUN_8003dfa4();
            SpyroMovement2(IDLE_STANDING);
            iVar4 = isInFlightLevel;
          }
          else {
            SpyroMovement2(END_WALK);
            iVar4 = isInFlightLevel;
          }
        }
        else if (spyro.absoluteMomentum < 0xf01) {
          if (spyro.absoluteMomentum < 0x781) {
            SpyroMovement2(BEGIN_WALK);
            iVar4 = isInFlightLevel;
          }
          else {
            SpyroMovement2(UPHILL_WALK);
            iVar4 = isInFlightLevel;
          }
        }
        else {
          SpyroMovement2(WALKING);
          iVar4 = isInFlightLevel;
        }
      }
      else {
LAB_80043ac4:
        SpyroMovement2(FLOP);
        iVar4 = isInFlightLevel;
      }
    }
    else {
      if ((spyro.timer_framesIdle == 0) || (spyro.maybe_speedRelated < 0x400)) goto LAB_80043ac4;
      if ((spyro.framesInCurrentState < 0x1f) || (0x5ff < spyro.maybe_glideAndWalkOffLedgeZMomentum)
         ) {
        iVar4 = isInFlightLevel;
        if (spyro.subState == 0) {
          if (0x200 < spyro.position.z - spyro.neutralJumpZPos) goto LAB_80043ac4;
          if ((*(uint *)(DAT_800757e0 + 4) & 8) == 0) {
            if ((*(uint *)(DAT_800757e0 + 4) & 4) != 0) {
              spyro.subState = 2;
              DAT_80075700 = spyro.position.z;
            }
          }
          else {
            spyro.subState = 1;
          }
        }
      }
      else {
        SpyroMovement2(SUPERFLY);
        iVar4 = isInFlightLevel;
      }
    }
    goto joined_r0x80043d84;
  case 0x22:
    iVar4 = FUN_80040f68(0xfff9);
    if (iVar4 != 0) {
      return;
    }
    if (spyro.timer_framesInAir == 0) {
      if (spyro.unkown_angleRelated4 < 0x17) {
        if (spyro.unkown_angleRelated6 < 1) {
          if (spyro.absoluteMomentum < 0x780) {
            FUN_8003dfa4();
            SpyroMovement2(IDLE_STANDING);
            iVar4 = isInFlightLevel;
          }
          else {
            SpyroMovement2(END_WALK);
            iVar4 = isInFlightLevel;
          }
        }
        else if (spyro.absoluteMomentum < 0xf01) {
          if (spyro.absoluteMomentum < 0x781) {
            SpyroMovement2(BEGIN_WALK);
            iVar4 = isInFlightLevel;
          }
          else {
            SpyroMovement2(UPHILL_WALK);
            iVar4 = isInFlightLevel;
          }
        }
        else {
          SpyroMovement2(WALKING);
          iVar4 = isInFlightLevel;
        }
      }
      else {
LAB_80043d28:
        SpyroMovement2(FLOP);
        iVar4 = isInFlightLevel;
      }
    }
    else {
      if ((spyro.timer_framesIdle == 0) || (spyro.maybe_speedRelated < 0x400)) goto LAB_80043d28;
      if ((currentButtonOneFrame & X_BUTTON) == 0) {
        if ((spyro.framesInCurrentState < 0x1f) ||
           (spyro.maybe_glideAndWalkOffLedgeZMomentum < -0xbff)) {
          iVar4 = isInFlightLevel;
          if (spyro.subState == 0) {
            if (0x200 < spyro.position.z - spyro.neutralJumpZPos) goto LAB_80043d28;
            if ((*(uint *)(DAT_800757e0 + 4) & 8) == 0) {
              if ((*(uint *)(DAT_800757e0 + 4) & 4) != 0) {
                spyro.subState = 2;
                DAT_80075700 = spyro.position.z;
              }
            }
            else {
              spyro.subState = 1;
            }
          }
        }
        else {
          SpyroMovement2(SUPERFLY);
          iVar4 = isInFlightLevel;
        }
      }
      else {
        SpyroMovement2(SUPERFLY_ASCENDING);
        iVar4 = isInFlightLevel;
      }
    }
joined_r0x80043d84:
    if (iVar4 != 0) {
      isInFlightLevel = iVar4;
      spyro.maybe_weirdDamageAnimRelated = (short)spyro._44_4_;
      spyro.unkown4 = (short)((uint)spyro._44_4_ >> 0x10);
      return;
    }
    SVar5 = CHARGING_AIR;
    isInFlightLevel = 0;
    if ((currentButton & SQUARE_BUTTON) == 0) {
      if (spyro.framesInCurrentState < 0x11) {
        isInFlightLevel = iVar4;
        spyro.maybe_weirdDamageAnimRelated = (short)spyro._44_4_;
        spyro.unkown4 = (short)((uint)spyro._44_4_ >> 0x10);
        return;
      }
      BVar2 = currentButtonOneFrame & TRIANGLE_BUTTON;
      SVar5 = TRIANGLE_DROP;
joined_r0x80043dcc:
      if (BVar2 == 0) {
        spyro.maybe_weirdDamageAnimRelated = (short)spyro._44_4_;
        spyro.unkown4 = SUB42(spyro._44_4_,2);
        return;
      }
    }
    break;
  case 0x23:
    iVar3 = FUN_80040f68(0xfff9);
    iVar4 = spyro.maybe_weirdResearchThis;
    if (iVar3 != 0) {
      return;
    }
joined_r0x80043df8:
    SVar5 = IDLE_STANDING;
    if (iVar4 != 0) {
      spyro.maybe_weirdDamageAnimRelated = (short)spyro._44_4_;
      spyro.unkown4 = SUB42(spyro._44_4_,2);
      return;
    }
    break;
  case 0x2c:
    iVar4 = FUN_80040f68(0x8400);
    if (iVar4 != 0) {
      return;
    }
    if ((currentButton & X_BUTTON) == 0) {
LAB_80043e74:
      if ((DAT_8007737c & 0x40) == 0) {
        if (3 < spyro.timer_framesInAir) {
          SpyroMovement2(CHARGING_AIR_SC_JUMP);
          spyro.isGrounded = 1;
          return;
        }
        SVar5 = FLOP;
        if (((spyro.unkown_angleRelated4 < 0x17) &&
            ((spyro.framesInCurrentState < 0xf ||
             (SVar5 = CHARGE, (currentButton & SQUARE_BUTTON) != 0)))) &&
           ((spyro.unkown15 != 0 ||
            (((spyro.absoluteMomentum < 0xc81 ||
              (spyro.absoluteMomentum <= spyro.maybe_speedRelated << 1)) ||
             (SVar5 = BONK, canFlyIn != 0)))))) {
          if (0x1dff < spyro.absoluteMomentum) {
            return;
          }
          goto LAB_80043fbc;
        }
        break;
      }
    }
    else if ((DAT_80075700 < 10) && (spyro.timer_framesInAir == 0)) {
      DAT_80075700 = DAT_80075700 + gameSpeedMultiplyer;
      goto LAB_80043e74;
    }
    SpyroMovement2(CHARGING_AIR_SC_JUMP);
    spyro.isGrounded = 0;
    spyro.airMomentum.z = spyro.airMomentum.z + 0xdc0;
    spyro.timer_framesInAir = spyro.timer_framesInAir + 1;
    goto switchD_800416a8_caseD_1e;
  }
  SpyroMovement2(SVar5);
switchD_800416a8_caseD_1e:
  return;
}



void UpdateSpyroPosition(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  bool bVar1;
  bool bVar2;
  int iVar3;
  int iVar4;
  undefined4 uVar5;
  int *b;
  Vec3 *pVVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  uint uVar10;
  int iVar11;
  int aiStack_d0 [2];
  undefined4 local_c8;
  Vec3 VStack_c0;
  uint local_b0;
  uint local_ac;
  uint local_a0;
  uint local_9c;
  int local_98;
  int local_90;
  int local_8c;
  int local_88;
  undefined auStack_80 [16];
  int aiStack_70 [4];
  int local_60;
  int local_5c;
  undefined4 local_58;
  Vec3 VStack_50;
  uint local_40;
  uint local_3c;
  undefined4 local_38;
  Vec3 VStack_30;
  
  iVar3 = param_1 * 0x18;
  DAT_800757e0 = &DAT_800773bc + param_1 * 6;
  iVar9 = spyro.framesInCurrentState + param_1;
  if (((gameState == GAMESTATE_GAMEPLAY) && (levelIDPortalExit == 0x40)) &&
     (spyro.timer_framesInAir == 0)) {
    spyro.canSuperfly = 1;
  }
  switch(spyro.state) {
  case 0:
  case 0xd:
  case 0x12:
  case 0x24:
  case 0x25:
  case 0x26:
  case 0x27:
  case 0x28:
  case 0x29:
  case 0x2a:
  case 0x2b:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if (spyro.autoFlameRelated == 0) {
      FUN_8003d3b8(0);
    }
    else if ((0x2c < spyro.framesInCurrentState) && (DAT_80078760 == '\0')) {
      if (spyro.subState == 0) {
        spyro.subState = 1;
        currentButtonOneFrame = currentButtonOneFrame | CIRCLE_BUTTON;
      }
      else {
        spyro.autoFlameRelated = 0;
      }
    }
  case 0x1d:
    Vec3Zero((Vec3 *)&spyro.airMomentum);
    break;
  case 1:
  case 2:
  case 0x15:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if (spyro.autoFlameRelated == 0) {
      FUN_8003d3b8(spyro.walkingAcceleration);
    }
    else {
      uVar10 = spyro.unkown_angleRelated7 - spyro.angle.yaw & 0xfff;
      if (0x800 < uVar10) {
        uVar10 = uVar10 - 0x1000;
      }
      if ((int)uVar10 < 0) {
        uVar10 = -uVar10;
      }
      if ((int)uVar10 < 0x10) {
        SpyroMovement2(IDLE_STANDING);
      }
    }
    spyro.subState = 0;
    if (spyro.absoluteMomentum < 0x400) {
      iVar3 = FUN_8003d840();
    }
    else {
      uVar5 = 2;
      if (spyro.absoluteMomentum < 0xc80) {
        uVar5 = 1;
      }
      iVar3 = FUN_8003d6d0(uVar5);
    }
    if (spyro.subState == 0) {
      uVar5 = 0x140;
      if (0x200 < iVar3) {
        uVar5 = 0;
      }
      FUN_8003d92c(uVar5,0xc0);
    }
    else {
      spyro.absoluteMomentum = spyro.absoluteMomentum + -0xc0;
      if (spyro.absoluteMomentum < 0) {
        spyro.absoluteMomentum = 0;
      }
    }
    Maybe_decayMomenum();
    if (spyro.unkown_angleRelated5 != 0) {
      spyro.unkown_portalRelated3 = 0;
      VecNormalize(&spyro.unkown_portalRelated,0x1000,param_3,param_4);
      if (0 < -spyro.airMomentum.x * spyro.unkown_portalRelated -
              spyro.airMomentum.y * spyro.unkown_portalRelated2 >> 0xc) {
        Vec3ScaleDownByFraction(0x80078b10,0x1000);
        Vec3Add(0x80078b4c,0x80078b4c,0x80078b10);
        spyro.absoluteMomentum = Vec3CalculateLengthE(&spyro.airMomentum.x,flag3D);
      }
    }
    goto code_r0x80044340;
  case 3:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if ((DAT_80077394 == 0) || (spyro.subState != 7)) {
      FUN_8003d3b8(spyro.walkingAcceleration);
    }
    else {
      spyro.unkown_angleRelated6 = 0;
      param_3 = 1;
      if (DAT_80075804 != 0) {
        spyro.unkown_angleRelated7 =
             ATan2Scaled(*(int *)(DAT_80075804 + 0xc) - spyro.position.x,
                         *(int *)(DAT_80075804 + 0x10) - spyro.position.y,1);
      }
    }
    if (spyro.subState != 7) {
      spyro.subState = 0;
    }
    if (spyro.absoluteMomentum < 0x400) {
      iVar3 = FUN_8003d840();
    }
    else {
      uVar5 = 2;
      if (spyro.absoluteMomentum < 0xc80) {
        uVar5 = 1;
      }
      iVar3 = FUN_8003d6d0(uVar5);
    }
    if (spyro.unkown_landingMomentumRelated == 0) {
      if (spyro.subState == 0) {
        uVar5 = 0x140;
        if (0x200 < iVar3) {
          uVar5 = 0;
        }
        FUN_8003d92c(uVar5,0xc0);
      }
      else {
        spyro.absoluteMomentum = spyro.absoluteMomentum + -0xc0;
        if (spyro.absoluteMomentum < 0) goto LAB_80044564;
      }
    }
    else {
LAB_80044564:
      spyro.absoluteMomentum = 0;
    }
    Maybe_decayMomenum();
    if (spyro.unkown_angleRelated5 != 0) {
      spyro.unkown_portalRelated3 = 0;
      VecNormalize(&spyro.unkown_portalRelated,0x1000,param_3,param_4);
      if (0 < -spyro.airMomentum.x * spyro.unkown_portalRelated -
              spyro.airMomentum.y * spyro.unkown_portalRelated2 >> 0xc) {
        Vec3ScaleDownByFraction(0x80078b10,0x1000);
        Vec3Add(0x80078b4c,0x80078b4c,0x80078b10);
        spyro.absoluteMomentum = Vec3CalculateLengthE(&spyro.airMomentum.x,flag3D);
      }
    }
    uVar5 = 0x80078b4c;
    if (spyro.timer_framesInAir == 0) goto LAB_80047800;
    goto LAB_800477d4;
  case 4:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    iVar3 = Maybe_AngleDiff(spyro.unkown_angleRelated7,spyro.angle.yaw);
    uVar10 = iVar3 >> 3;
    if (0x7f < iVar3) {
      if (0xb < iVar9) {
        iVar9 = 0xb;
      }
      uVar10 = (uint)(byte)(&DAT_8006c6f8)[iVar9];
    }
    FUN_8003d52c(uVar10);
    if ((spyro.unkown_landingMomentumRelated != 0) ||
       (spyro.absoluteMomentum = spyro.absoluteMomentum + -0x100, spyro.absoluteMomentum < 0)) {
      spyro.absoluteMomentum = 0;
    }
    Maybe_decayMomenum();
    goto LAB_800477f4;
  case 5:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    FUN_8003d3b8(0xc80);
    FUN_8003d6d0(2);
    FUN_8003d92c(0x140,0xc0);
    iVar3 = CosScaled(spyro.unkown_angleRelated7);
    spyro.groundedChargeMomentum2.x = spyro.absoluteMomentum * iVar3 >> 0xc;
    iVar3 = SinScaled(spyro.unkown_angleRelated7);
    spyro.groundedChargeMomentum2.y = spyro.absoluteMomentum * iVar3 >> 0xc;
    Vec3Subtract(aiStack_d0,&spyro.groundedChargeMomentum2.x,&spyro.airMomentum.x);
    local_c8 = 0;
    uVar10 = Vec3CalculateLengthE(aiStack_d0,flag2D);
    if (0x280 < (int)uVar10) {
      Vec3ScaleDownByFraction(aiStack_d0,uVar10,0x280);
    }
    b = aiStack_d0;
    Vec3Add(0x80078b4c,0x80078b4c,b);
    if (spyro.unkown_angleRelated5 != 0) {
      spyro.unkown_portalRelated3 = 0;
      VecNormalize(&spyro.unkown_portalRelated,0x1000,b,param_4);
      if (0 < -spyro.airMomentum.x * spyro.unkown_portalRelated -
              spyro.airMomentum.y * spyro.unkown_portalRelated2 >> 0xc) {
        Vec3ScaleDownByFraction(0x80078b10,0x1000);
        Vec3Add(0x80078b4c,0x80078b4c,0x80078b10);
      }
    }
    if (((iVar9 < 0xd) && (spyro.subState == 0)) &&
       (((DAT_800757e0[1] & 0x40) != 0 || (DAT_800756b4 != 0)))) {
      spyro.groundedChargeMomentum2.z =
           spyro.groundedChargeMomentum2.z + 0xd7 + spyro.z_Acceleration;
      spyro.airMomentum.z =
           ((spyro.neutralJumpZPos - spyro.position.z) * 0x40 - spyro.unkown17) +
           spyro.groundedChargeMomentum2.z;
      spyro.neutralJumpZPos = spyro.position.z * 0x40 + spyro.airMomentum.z + spyro.unkown17 >> 6;
    }
    else {
      spyro.groundedChargeMomentum2.z = spyro.groundedChargeMomentum2.z + spyro.z_Acceleration;
      spyro.airMomentum.z = spyro.groundedChargeMomentum2.z;
    }
    break;
  case 6:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if (spyro.canSuperfly != 0) {
      FUN_8003d3b8(spyro.walkingAcceleration);
      uVar10 = spyro.unkown_angleRelated7 - spyro.angle.yaw & 0xfff;
      bVar1 = uVar10 < 0x21;
      if (0x800 < uVar10) {
        uVar10 = uVar10 - 0x1000;
        bVar1 = (int)uVar10 < 0x21;
      }
      bVar2 = (int)uVar10 < -0x20;
      if (!bVar1) {
        uVar10 = 0x20;
      }
      if (bVar1 && bVar2) {
        uVar10 = 0xffffffe0;
      }
      FUN_8003d52c(uVar10);
    }
    if (spyro.maybe_speedRelated < 0x80) {
      Vec3Copy(&VStack_c0.x,&spyro.unkown_portalRelated);
      Vec3ScaleDownByPowerOfTwo(&VStack_c0.x,3);
      Vec3Add(0x80078b4c,0x80078b4c,&VStack_c0);
    }
    pVVar6 = &VStack_c0;
    Vec3Zero(pVVar6);
    Vec3Subtract(&pVVar6->x,&pVVar6->x,&spyro.airMomentum.x);
    VStack_c0.z = 0;
    uVar10 = Vec3CalculateLengthE(&pVVar6->x,flag2D);
    if (0x40 < (int)uVar10) {
      Vec3ScaleDownByFraction(pVVar6,uVar10,0x40);
    }
    VStack_c0.z = spyro.z_Acceleration;
    Vec3Add(0x80078b4c,0x80078b4c,pVVar6);
    if ((spyro.timer_framesIdle == 0) && (spyro.unkown_angleRelated4 < 0x20)) {
      FUN_8003e90c();
    }
    if (spyro.airMomentum.z < -0x2300) {
      spyro.airMomentum.z = -0x2300;
    }
    if (spyro.unkown_angleRelated5 != 0) {
      spyro.unkown_portalRelated3 = 0;
      VecNormalize(&spyro.unkown_portalRelated,0x1000,pVVar6,param_4);
      if (0 < -spyro.airMomentum.x * spyro.unkown_portalRelated -
              spyro.airMomentum.y * spyro.unkown_portalRelated2 >> 0xc) {
        Vec3ScaleDownByFraction(0x80078b10,0x1000);
        Vec3Add(0x80078b4c,0x80078b4c,0x80078b10);
      }
    }
    break;
  case 7:
  case 0xe:
    spyro.unkown_angleRelated6 = 0;
    FUN_8003d92c(0,0xc0);
    Maybe_decayMomenum();
    spyro.airMomentum.z = spyro.maybe_glideAndWalkOffLedgeZMomentum + -0xc0;
    bVar1 = spyro.airMomentum.z < -0x2300;
    goto LAB_80047450;
  case 8:
  case 0x23:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    break;
  case 9:
  case 10:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    FUN_8003d3b8(0x1000);
    FUN_8003d6d0(3);
    spyro.unkown_angleRelated6 = 0x1000;
    FUN_8003d92c(0x140,0xc0);
    spyro.airMomentum.x = 0;
    spyro.airMomentum.z = 0;
    spyro.airMomentum.y = spyro.absoluteMomentum;
    if (spyro.state == 10) {
      spyro.airMomentum.y = -spyro.absoluteMomentum;
    }
    Vec3ApplyRotationMatrix(0x80078a8c,0x80078b4c,0x80078b4c);
    spyro.groundedChargeMomentum2.x =
         spyro.groundedChargeMomentum2.x - (spyro.groundedChargeMomentum2.x >> 4);
    spyro.groundedChargeMomentum2.y =
         spyro.groundedChargeMomentum2.y - (spyro.groundedChargeMomentum2.y >> 4);
    spyro.groundedChargeMomentum2.z =
         spyro.groundedChargeMomentum2.z - (spyro.groundedChargeMomentum2.z >> 4);
    Vec3Add(0x80078b4c,0x80078b4c,0x80078b40);
code_r0x80044340:
    if (spyro.unkown_landingMomentumRelated == 0) {
joined_r0x800477cc:
      if (spyro.timer_framesInAir == 0) goto LAB_800477f4;
    }
LAB_800477d4:
    spyro.airMomentum.z = spyro.maybe_glideAndWalkOffLedgeZMomentum + -0xc0;
    break;
  case 0xb:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if ((spyro.subState & 1U) != 0) {
      if ((&DAT_800773cc)[param_1 * 6] == 0) {
        uVar10 = 0x7f;
        if (((&DAT_800773c0)[param_1 * 6] & 0x1000) == 0) {
          uVar10 = -(uint)(((&DAT_800773c0)[param_1 * 6] & 0x4000) != 0) & 0xffffff81;
        }
        uVar8 = 0x7f;
        if (((&DAT_800773c0)[param_1 * 6] & 0x2000) == 0) {
          uVar8 = -(uint)(((&DAT_800773c0)[param_1 * 6] & 0x8000) != 0) & 0xffffff81;
        }
      }
      else {
        uVar8 = *(byte *)((int)&DAT_800773d0 + iVar3 + 2) - 0x7f;
        uVar10 = 0x7f - *(byte *)((int)&DAT_800773d0 + iVar3 + 3);
      }
      uVar7 = spyro.angle.yaw - cameraAngle.yaw & 0xfff;
      iVar3 = CosScaled(uVar7);
      iVar9 = SinScaled(uVar7);
      spyro.turnAcceleration = (int)(-uVar8 * iVar3 - uVar10 * iVar9) >> 0xd;
      if (spyro.turnAcceleration < DAT_8006c704) {
        spyro.turnAcceleration = (int)DAT_8006c704;
      }
      if (DAT_8006c710 < spyro.turnAcceleration) {
        spyro.turnAcceleration = (int)DAT_8006c710;
      }
      FUN_8003d52c(spyro.turnAcceleration);
      if ((DAT_80075790 != 0) && (spyro.framesInCurrentState < 0x78)) {
        uVar10 = spyro.angle.yaw - cameraAngle.yaw & 0xfff;
        if (0x800 < uVar10) {
          uVar10 = uVar10 - 0x1000;
        }
        if ((int)uVar10 < 0) {
          uVar10 = -uVar10;
        }
        if (0x1ff < (int)uVar10) {
          Vec3Subtract((int *)&local_b0,(int *)(DAT_80075790 + 0xc),(int *)&spyro);
          uVar10 = Vec3CalculateLengthE((int *)&local_b0,flag3D);
          iVar3 = ATan2Scaled(local_b0,local_ac,1);
          uVar8 = iVar3 - spyro.angle.yaw & 0xfff;
          if (0x800 < uVar8) {
            uVar8 = uVar8 - 0x1000;
          }
          uVar7 = uVar8;
          if ((int)uVar8 < 0) {
            uVar7 = -uVar8;
          }
          if (((int)uVar7 < 0x200) && ((int)uVar10 < 0x1800)) {
            iVar3 = (int)uVar8 >> 2;
            if ((int)uVar8 >> 2 < (int)DAT_8006c704) {
              iVar3 = (int)DAT_8006c704;
            }
            if (DAT_8006c710 < iVar3) {
              iVar3 = (int)DAT_8006c710;
            }
            FUN_8003d52c(iVar3);
            goto LAB_80044e58;
          }
        }
        DAT_80075790 = 0;
      }
LAB_80044e58:
      if (spyro.isOnSuperchargeGround == 0) {
        local_a0 = spyro.groundedChargeMomentum2.x * -300 >> 0xc;
        local_9c = spyro.groundedChargeMomentum2.y * -300 >> 0xc;
        local_98 = spyro.groundedChargeMomentum2.z * -300 >> 0xc;
        Vec3Add(0x80078b40,0x80078b40,&local_a0);
        spyro.absoluteMomentum = 0x240;
        Maybe_decayMomenum();
        Vec3Add(0x80078b40,0x80078b40,0x80078b4c);
        Vec3Add(0x80078b40,0x80078b40,0x80078b28);
        spyro.absoluteMomentum = Vec3CalculateLengthE(&spyro.groundedChargeMomentum2.x,flag3D);
        Vec3Add(0x80078b4c,0x80078b40,0x80078b34);
      }
      else {
        iVar3 = spyro.neutralJumpZPos - spyro.position.z;
        if (iVar3 < 0) {
          iVar3 = SquareRoot(iVar3 * -0x2000);
          iVar3 = -iVar3;
        }
        else {
          iVar3 = SquareRoot(iVar3 * 0x2000);
        }
        spyro.absoluteMomentum = iVar3 + 0x1f80;
        if (0x5900 < spyro.absoluteMomentum) {
          spyro.absoluteMomentum = 0x5900;
        }
        if (spyro.absoluteMomentum < 0x1400) {
          spyro.unkown_angleRelated6 = 0x1400;
          spyro.neutralJumpZPos = spyro.position.z;
        }
        Maybe_decayMomenum();
        Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.airMomentum.x);
        if (spyro.unkown_landingMomentumRelated == 0) {
          Vec3Add(0x80078b4c,0x80078b4c,0x80078b34);
        }
        else {
          spyro.airMomentum.z = spyro.airMomentum.z + -0xc0;
        }
      }
      break;
    }
    spyro.unkown_angleRelated6 = 0;
    FUN_8003d92c(0,0x180);
    Maybe_decayMomenum();
    Vec3Add(0x80078b4c,0x80078b4c,0x80078b28);
    spyro.absoluteMomentum = Vec3CalculateLengthE(&spyro.airMomentum.x,flag3D);
    if (0x2300 < spyro.absoluteMomentum) {
      Vec3ScaleDownByFraction(0x80078b4c,spyro.absoluteMomentum,0x2300);
      spyro.absoluteMomentum = 0x2300;
    }
    if (spyro.unkown_landingMomentumRelated != 0) {
      spyro.airMomentum.z = spyro.airMomentum.z + -0xc0;
      break;
    }
    goto LAB_800477f4;
  case 0xc:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if (spyro.airMomentum.z < 0) {
      spyro.airMomentum.z = 0;
    }
    if (0x12 < iVar9) {
      Vec3ScaleDownByFractionPowerOfTwo(0x80078b4c,7,3);
    }
    spyro.airMomentum.z = spyro.airMomentum.z + spyro.z_Acceleration;
    break;
  case 0xf:
  case 0x17:
  case 0x20:
  case 0x21:
  case 0x22:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if (spyro.canSuperfly == 0) {
      if ((&DAT_800773cc)[param_1 * 6] == 0) {
        uVar10 = 0x7f;
        if (((&DAT_800773c0)[param_1 * 6] & 0x1000) == 0) {
          uVar10 = -(uint)(((&DAT_800773c0)[param_1 * 6] & 0x4000) != 0) & 0xffffff81;
        }
        uVar8 = 0x7f;
        if (((&DAT_800773c0)[param_1 * 6] & 0x2000) == 0) {
          uVar8 = -(uint)(((&DAT_800773c0)[param_1 * 6] & 0x8000) != 0) & 0xffffff81;
        }
      }
      else {
        uVar8 = *(byte *)((int)&DAT_800773d0 + iVar3 + 2) - 0x7f;
        uVar10 = 0x7f - *(byte *)((int)&DAT_800773d0 + iVar3 + 3);
      }
      uVar7 = spyro.angle.yaw - cameraAngle.yaw & 0xfff;
      iVar3 = CosScaled(uVar7);
      iVar9 = SinScaled(uVar7);
      iVar11 = CosScaled(uVar7);
      iVar4 = SinScaled(uVar7);
      iVar11 = (int)(uVar10 * iVar11 - uVar8 * iVar4) >> 0xc;
      if (iVar11 < 0) {
        spyro.unkown_angleRelated6 = (iVar11 * 0x1180 >> 7) + 0x1900;
      }
      else {
        spyro.unkown_angleRelated6 = 0x1900;
      }
      if (spyro.absoluteMomentum < spyro.unkown_angleRelated6) {
        bVar1 = spyro.unkown_angleRelated6 < spyro.absoluteMomentum + 0x80;
        spyro.absoluteMomentum = spyro.absoluteMomentum + 0x80;
LAB_80046554:
        if (bVar1) {
          spyro.absoluteMomentum = spyro.unkown_angleRelated6;
        }
      }
      else if (spyro.unkown_angleRelated6 < spyro.absoluteMomentum) {
        bVar1 = spyro.absoluteMomentum + -0x80 < spyro.unkown_angleRelated6;
        spyro.absoluteMomentum = spyro.absoluteMomentum + -0x80;
        goto LAB_80046554;
      }
      if (spyro.absoluteMomentum < 0x780) {
        spyro.absoluteMomentum = 0x780;
      }
      spyro.turnAcceleration = ((int)(-uVar8 * iVar3 - uVar10 * iVar9) >> 0xc) * 0x14 >> 7;
      spyro.angle.yaw = spyro.angle.yaw + spyro.turnAcceleration;
      spyro.RelativeSparxAngle.roll = (char)(spyro.angle.yaw >> 4);
      if (spyro.subState == 8) {
        if (portalToExitFromInHW == 0) {
          spyro.turnAcceleration = (uint)spyro.unkown42._2_1_ * 0x10 - spyro.angle.yaw & 0xfff;
          if (0x800 < (uint)spyro.turnAcceleration) {
            spyro.turnAcceleration = spyro.turnAcceleration - 0x1000;
          }
          spyro.turnAcceleration = spyro.turnAcceleration << 4;
          if (spyro.turnAcceleration < -0x10) {
            spyro.turnAcceleration = -0x10;
          }
          if (0x10 < spyro.turnAcceleration) {
            spyro.turnAcceleration = 0x10;
          }
          spyro.angle.yaw = spyro.angle.yaw + spyro.turnAcceleration;
        }
        Vec3Zero((Vec3 *)&spyro.airMomentum);
LAB_800469cc:
        spyro.angle.pitch = 0;
      }
      else {
        if (spyro.subState == 9) {
          Maybe_decayMomenum();
          spyro.airMomentum.z = 0;
          spyro.maybe_weirdResearchThis = (int)&DAT_80004000;
          if (spyro.isMovementLocked < 1) {
            spyro.isMovementLocked = 1;
          }
          iVar3 = Vec2EstimateOctagonalDistance((Vec2 *)&spyro,(Vec2 *)&spyro.unkownOops);
          if (iVar3 < 0x300) {
            spyro.subState = 0;
            unk_cameraRelatedLocking = (uint)(byte)(&DAT_8006c588)[spyro.state];
            spyro.unkown3 = '\x04';
          }
          goto LAB_800469cc;
        }
        if (spyro.subState == 0xb) {
          Maybe_decayMomenum();
          spyro.airMomentum.z = spyro.maybe_glideAndWalkOffLedgeZMomentum + spyro.z_Acceleration;
          if (spyro.airMomentum.z < -0x780) {
            spyro.airMomentum.z = -0x780;
          }
          spyro.angle.pitch = 0;
        }
        else {
          if (spyro.subState != 10) {
            Maybe_decayMomenum();
            spyro.airMomentum.z = spyro.maybe_glideAndWalkOffLedgeZMomentum + spyro.z_Acceleration;
            if (spyro.airMomentum.z < -0x780) {
              spyro.airMomentum.z = -0x780;
            }
            goto LAB_800469cc;
          }
          if (spyro.framesInCurrentState < 0x10) {
            iVar3 = 0;
          }
          else {
            iVar3 = MobyUpdatePosition(&spyro,0x10000);
            if (spyro.maybe_pitchRelatedFlag == 0) {
LAB_8004686c:
              iVar3 = 0x1e;
              if (spyro.angle.pitch + 0x100U < 0x501) {
                spyro.maybe_pitchRelatedFlag = 0;
              }
              else {
                spyro.maybe_pitchRelatedFlag = 1;
                uVar10 = -spyro.angle.pitch - 0x400U & 0xfff;
                if (0x800 < uVar10) {
                  uVar10 = uVar10 - 0x1000;
                }
                if (levelIDPortalExit == 0x16) {
                  uVar8 = uVar10;
                  if ((int)uVar10 < 0) {
                    uVar8 = -uVar10;
                  }
                  if ((int)uVar8 < 0x100) {
                    unk_cameraRelatedLocking = (uint)(byte)(&DAT_8006c588)[spyro.state];
                  }
                }
                iVar9 = (int)uVar10 >> 4;
                iVar3 = iVar9;
                if (iVar9 < -0x1e) {
                  iVar3 = -0x1e;
                }
                if (0x1e < iVar9) {
                  iVar3 = 0x1e;
                }
              }
            }
            else if (spyro.position.z - iVar3 < 0x200) {
              spyro.subState = 0;
              unk_cameraRelatedLocking = (uint)(byte)(&DAT_8006c588)[spyro.state];
              spyro.unkown3 = '\x04';
            }
            else {
              if (0x7ff < spyro.position.z - iVar3) goto LAB_8004686c;
              uVar10 = -spyro.angle.pitch - 0x100U & 0xfff;
              if (0x800 < uVar10) {
                uVar10 = uVar10 - 0x1000;
              }
              iVar9 = (int)uVar10 >> 2;
              iVar3 = iVar9;
              if (iVar9 < -0x3c) {
                iVar3 = -0x3c;
              }
              if (0x3c < iVar9) {
                iVar3 = 0x3c;
              }
            }
          }
          spyro.angle.pitch = spyro.angle.pitch + iVar3 & 0xfff;
          spyro.RelativeSparxAngle.pitch = (char)(spyro.angle.pitch >> 4);
          if (0x800 < (uint)spyro.angle.pitch) {
            spyro.angle.pitch = spyro.angle.pitch - 0x1000;
          }
          Maybe_decayMomenum();
        }
        if (spyro.isMovementLocked < 1) {
          spyro.isMovementLocked = 1;
        }
      }
      uVar10 = spyro.turnAcceleration * -8 - spyro.angle.roll & 0xfff;
      bVar1 = uVar10 < 0x11;
      if (0x800 < uVar10) {
        uVar10 = uVar10 - 0x1000;
        bVar1 = (int)uVar10 < 0x11;
      }
      if (bVar1) {
        if ((int)uVar10 < -0x10) {
          uVar10 = 0xfffffff0;
        }
      }
      else {
        uVar10 = 0x10;
      }
      spyro.angle.roll = spyro.angle.roll + uVar10 & 0xfff;
      break;
    }
    iVar9 = spyro.angle.yaw;
    switch(spyro.subState) {
    case 0:
      if ((&DAT_800773cc)[param_1 * 6] == 0) {
        if (((&DAT_800773c0)[param_1 * 6] & 0x1000) == 0) {
          if (((&DAT_800773c0)[param_1 * 6] & 0x4000) == 0) {
            iVar3 = -DAT_80075700;
            iVar9 = iVar3;
            if (0x20 < iVar3) {
              iVar9 = 0x20;
            }
            iVar9 = DAT_80075700 + iVar9;
            if (iVar3 < -0x20) {
              iVar9 = DAT_80075700 + -0x20;
            }
          }
          else {
            DAT_80075700 = DAT_80075700 + -0x10;
            iVar9 = -0x7f;
            if (-0x80 < DAT_80075700) goto LAB_80045378;
          }
LAB_80045370:
          DAT_80075700 = iVar9;
        }
        else {
          DAT_80075700 = DAT_80075700 + 0x10;
          iVar9 = 0x7f;
          if (0x7f < DAT_80075700) goto LAB_80045370;
        }
LAB_80045378:
        iVar3 = DAT_80075700;
        if (((&DAT_800773c0)[param_1 * 6] & 0x2000) == 0) {
          if (((&DAT_800773c0)[param_1 * 6] & 0x8000) == 0) {
            iVar9 = -DAT_800758a0;
            iVar11 = iVar9;
            if (0x20 < iVar9) {
              iVar11 = 0x20;
            }
            iVar11 = DAT_800758a0 + iVar11;
            if (iVar9 < -0x20) {
              iVar11 = DAT_800758a0 + -0x20;
            }
          }
          else {
            iVar9 = DAT_800758a0 + -0x10;
            iVar11 = -0x7f;
            DAT_800758a0 = iVar9;
            if (-0x80 < iVar9) goto LAB_80045440;
          }
        }
        else {
          iVar9 = DAT_800758a0 + 0x10;
          iVar11 = 0x7f;
          DAT_800758a0 = iVar9;
          if (iVar9 < 0x80) goto LAB_80045440;
        }
        iVar9 = iVar11;
        DAT_800758a0 = iVar11;
      }
      else {
        iVar9 = *(byte *)((int)&DAT_800773d0 + iVar3 + 2) - 0x7f;
        iVar3 = 0x7f - (uint)*(byte *)((int)&DAT_800773d0 + iVar3 + 3);
      }
LAB_80045440:
      if (iVar3 == 0) {
        iVar11 = spyro.angle.pitch >> 3;
        if (spyro.absoluteMomentum < 0x1040) {
          iVar11 = iVar11 + (0x1040 - spyro.absoluteMomentum >> 6);
        }
        iVar3 = iVar11;
        if (0x7f < iVar11) {
          iVar3 = 0x7f;
        }
        if (iVar11 < -0x7f) {
          iVar3 = -0x7f;
        }
      }
      iVar11 = CosScaled(spyro.angle.pitch);
      iVar3 = iVar3 * -0xf >> 7;
      iVar9 = iVar9 * -0x14 >> 7;
      if ((spyro.position.z < spyro.neutralJumpZPos) &&
         (local_98 = (spyro.airMomentum.z >> 3) + -0x400, local_98 < 0)) {
        local_a0 = spyro.airMomentum.x >> 3;
        local_9c = spyro.airMomentum.y >> 3;
        Vec3Add(&local_a0,&local_a0,&spyro);
        iVar4 = FUN_80033e40(&spyro,&local_a0);
        if (iVar4 == 0) {
          iVar4 = spyro.position.z - unknownPositionVector.z >> 3;
          if (7 < iVar4) {
            iVar4 = 7;
          }
          iVar3 = iVar3 + iVar4;
        }
      }
      spyro.angle.yaw = spyro.angle.yaw + iVar9 & 0xfff;
      spyro.angle.pitch = spyro.angle.pitch + iVar3 & 0xfff;
      if (0x800 < (uint)spyro.angle.pitch) {
        spyro.angle.pitch = spyro.angle.pitch - 0x1000;
      }
      if (800 < spyro.angle.pitch) {
        spyro.angle.pitch = 800;
      }
      iVar3 = spyro.neutralJumpZPos - spyro.position.z;
      if (iVar3 < 0) {
        iVar4 = SquareRoot(-iVar3);
        iVar4 = iVar4 * -0x80;
      }
      else {
        iVar4 = SquareRoot(iVar3);
        iVar4 = iVar4 * 0x40;
      }
      spyro.absoluteMomentum = iVar4 + 0x1040;
      if (isInFlightLevel == 0) {
        spyro.absoluteMomentum = iVar4 + 0x145e;
      }
      if (0x5900 < spyro.absoluteMomentum) {
        spyro.absoluteMomentum = 0x5900;
      }
      iVar3 = iVar3 + 0x132 >> 2;
      if (iVar3 < 0) {
        iVar3 = 0;
      }
      if (iVar3 < spyro.angle.pitch) {
        spyro.angle.pitch = iVar3;
      }
      if (spyro.angle.pitch < -800) {
        spyro.angle.pitch = -800;
      }
      if (spyro.absoluteMomentum < 0x780) {
        spyro.absoluteMomentum = 0x780;
      }
      DAT_80075960 = DAT_80075960 +
                     (((iVar9 * iVar11 * -0x20 >> 0xc) - ((DAT_80075960 << 4) >> 6)) -
                     ((spyro.angle.roll << 6) >> 6));
      spyro.angle.roll = spyro.angle.roll + (DAT_80075960 >> 6) & 0xfff;
      if (0x800 < (uint)spyro.angle.roll) {
        spyro.angle.roll = spyro.angle.roll - 0x1000;
      }
      if (0x300 < spyro.angle.roll) {
        spyro.angle.roll = 0x300;
      }
      if (spyro.angle.roll < -0x300) {
        spyro.angle.roll = -0x300;
      }
      Maybe_decayMomenum();
      iVar9 = spyro.angle.yaw;
      if (isInFlightLevel != 0) {
        iVar3 = (levelIDPortalExit / 10 + -1) * 0xc;
        Vec3Subtract((int *)&local_a0,(int *)(iVar3 + -0x7ff91824),(int *)&spyro);
        Vec3ScaleDownByPowerOfTwo((int *)&local_a0,4);
        uVar10 = Vec3CalculateLengthE((int *)&local_a0,flag2D);
        iVar3 = *(int *)(iVar3 + -0x7ff9181c) >> 4;
        iVar11 = uVar10 - iVar3;
        iVar9 = spyro.angle.yaw;
        if (iVar3 < (int)uVar10) {
          Vec3ScaleDownByFraction(&local_a0,uVar10,iVar11);
          Vec3ScaleUpByPowerOfTwo((int *)&local_a0,5);
          local_98 = 0;
          Vec3Add(0x80078b4c,0x80078b4c,&local_a0);
          iVar3 = ATan2Scaled(local_a0,local_9c,1);
          uVar10 = iVar3 - spyro.angle.yaw & 0xfff;
          if (0x800 < uVar10) {
            uVar10 = uVar10 - 0x1000;
          }
          iVar11 = (int)(uVar10 * iVar11) >> 0xf;
          iVar3 = iVar11;
          if (iVar11 < -0x20) {
            iVar3 = -0x20;
          }
          iVar9 = spyro.angle.yaw + iVar3;
          if (0x20 < iVar11) {
            iVar9 = spyro.angle.yaw + 0x20;
          }
        }
      }
      break;
    case 1:
      spyro.angle.yaw = spyro.angle.yaw & 0xfff;
      spyro.angle.pitch = spyro.angle.pitch + 0x1eU & 0xfff;
      if (0x800 < (uint)spyro.angle.pitch) {
        spyro.angle.pitch = spyro.angle.pitch - 0x1000;
      }
      if (spyro.angle.pitch < 0x401) {
        if (0 < spyro.angle.pitch) {
          if (spyro.maybe_pitchRelatedFlag != 0) {
            spyro.subState = 0;
          }
          spyro.maybe_pitchRelatedFlag = 0;
        }
      }
      else {
        spyro.maybe_pitchRelatedFlag = 1;
      }
      uVar10 = -spyro.angle.roll & 0xfff;
      bVar1 = uVar10 < 0x11;
      if (0x800 < uVar10) {
        uVar10 = uVar10 - 0x1000;
        bVar1 = (int)uVar10 < 0x11;
      }
      bVar2 = (int)uVar10 < -0x10;
      if (!bVar1) {
        uVar10 = 0x10;
      }
      uVar10 = spyro.angle.roll + uVar10;
      if (bVar1 && bVar2) {
        uVar10 = spyro.angle.roll - 0x10;
      }
      spyro.angle.roll = uVar10 & 0xfff;
      iVar3 = spyro.neutralJumpZPos - spyro.position.z;
      if (iVar3 < 0) {
        iVar3 = SquareRoot(-iVar3);
        iVar3 = iVar3 * -0x80;
      }
      else {
        iVar3 = SquareRoot(iVar3);
        iVar3 = iVar3 * 0x40;
      }
      spyro.absoluteMomentum = iVar3 + 0x1040;
      if (0x5900 < spyro.absoluteMomentum) {
        spyro.absoluteMomentum = 0x5900;
      }
      iVar3 = spyro.absoluteMomentum;
      if ((spyro.absoluteMomentum < 0x1e00) && (spyro.maybe_pitchRelatedFlag == 0)) {
        spyro.subState = 0;
        DAT_800758a0 = 0;
        DAT_80075700 = 0;
      }
      goto LAB_80045fb0;
    case 2:
      if (spyro.maybe_pitchRelatedFlag == 0) {
        spyro.angle.yaw = spyro.angle.yaw & 0xfff;
        spyro.angle.pitch = spyro.angle.pitch + 0x1eU & 0xfff;
        if (0x800 < (uint)spyro.angle.pitch) {
          spyro.angle.pitch = spyro.angle.pitch - 0x1000;
        }
        if (spyro.angle.pitch < -0x400) {
          spyro.maybe_pitchRelatedFlag = 1;
          spyro.angle.yaw = spyro.angle.yaw + 0x800U & 0xfff;
          spyro.angle.pitch = 0x800U - spyro.angle.pitch & 0xfff;
          DAT_800758a0 = 0;
          spyro.angle.roll = spyro.angle.roll + 0x800U & 0xfff;
        }
        uVar10 = -spyro.angle.roll & 0xfff;
        bVar1 = uVar10 < 0x11;
        if (0x800 < uVar10) {
          uVar10 = uVar10 - 0x1000;
          bVar1 = (int)uVar10 < 0x11;
        }
        bVar2 = (int)uVar10 < -0x10;
        if (!bVar1) {
          uVar10 = 0x10;
        }
        uVar10 = spyro.angle.roll + uVar10;
        if (bVar1 && bVar2) {
          uVar10 = spyro.angle.roll - 0x10;
        }
        spyro.angle.roll = uVar10 & 0xfff;
      }
      else {
        uVar10 = -spyro.angle.pitch & 0xfff;
        if (0x800 < uVar10) {
          uVar10 = uVar10 - 0x1000;
        }
        iVar3 = DAT_80075700 - spyro.position.z;
        iVar11 = uVar10 + (iVar3 - (spyro.maybe_glideAndWalkOffLedgeZMomentum >> 5) >> 2);
        iVar9 = iVar11;
        if (0x1e < iVar11) {
          iVar9 = 0x1e;
        }
        uVar10 = spyro.angle.pitch + iVar9;
        if (iVar11 < -0x1e) {
          uVar10 = spyro.angle.pitch - 0x1e;
        }
        spyro.angle.pitch = uVar10 & 0xfff;
        if (0x800 < (uint)spyro.angle.pitch) {
          spyro.angle.pitch = spyro.angle.pitch - 0x1000;
        }
        spyro.angle.yaw = spyro.angle.yaw & 0xfff;
        iVar9 = spyro.angle.roll;
        if (spyro.angle.roll < 0) {
          iVar9 = -spyro.angle.roll;
        }
        if (iVar9 < 0x40) {
          if (iVar3 < 0) {
            iVar3 = -iVar3;
          }
          if (iVar3 < 0x100) {
            iVar3 = spyro.angle.pitch;
            if (spyro.angle.pitch < 0) {
              iVar3 = -spyro.angle.pitch;
            }
            if (iVar3 < 0x80) {
              spyro.subState = 0;
              spyro.maybe_pitchRelatedFlag = 0;
              DAT_800758a0 = 0;
              DAT_80075700 = 0;
            }
          }
          spyro.angle.roll = 0;
        }
        else {
          uVar10 = -spyro.angle.roll & 0xfff;
          bVar1 = uVar10 < 0x11;
          if (0x800 < uVar10) {
            uVar10 = uVar10 - 0x1000;
            bVar1 = (int)uVar10 < 0x11;
          }
          bVar2 = (int)uVar10 < -0x10;
          if (!bVar1) {
            uVar10 = 0x10;
          }
          if (bVar1 && bVar2) {
            uVar10 = 0xfffffff0;
          }
          DAT_800758a0 = DAT_800758a0 + uVar10;
          if (0x40 < DAT_800758a0) {
            DAT_800758a0 = 0x40;
          }
          if (DAT_800758a0 < -0x40) {
            DAT_800758a0 = -0x40;
          }
          spyro.angle.roll = spyro.angle.roll + DAT_800758a0 & 0xfff;
        }
        if (0x800 < (uint)spyro.angle.roll) {
          spyro.angle.roll = spyro.angle.roll + -0x1000;
        }
      }
      iVar3 = spyro.neutralJumpZPos - spyro.position.z;
      if (iVar3 < 0) {
        iVar3 = SquareRoot(-iVar3);
        iVar3 = iVar3 * -0x80;
      }
      else {
        iVar3 = SquareRoot(iVar3);
        iVar3 = iVar3 * 0x40;
      }
      spyro.absoluteMomentum = iVar3 + 0x1040;
      if (0x5900 < spyro.absoluteMomentum) {
        spyro.absoluteMomentum = 0x5900;
      }
      iVar3 = spyro.absoluteMomentum;
      if (((spyro.absoluteMomentum < 0x1e00) && (spyro.maybe_pitchRelatedFlag == 0)) &&
         (spyro.angle.pitch < 0x400)) {
        spyro.subState = 0;
        DAT_800758a0 = 0;
        DAT_80075700 = 0;
      }
      goto LAB_80045fb0;
    case 3:
      if (maybe_cameraRelated != &DAT_8000000e) {
        Vec3Copy((int *)&DAT_8006ebe4,&cameraPosition.x);
        FUN_80037714(&DAT_8006ebcc);
      }
      uVar10 = 0x400U - spyro.angle.pitch & 0xfff;
      bVar1 = uVar10 < 0x1f;
      if (0x800 < uVar10) {
        uVar10 = uVar10 - 0x1000;
        bVar1 = (int)uVar10 < 0x1f;
      }
      bVar2 = (int)uVar10 < -0x1e;
      if (!bVar1) {
        uVar10 = 0x1e;
      }
      uVar10 = spyro.angle.pitch + uVar10;
      if (bVar1 && bVar2) {
        uVar10 = spyro.angle.pitch - 0x1e;
      }
      spyro.angle.pitch = uVar10 & 0xfff;
      spyro.angle.yaw = spyro.angle.yaw & 0xfff;
      if (0x800 < (uint)spyro.angle.pitch) {
        spyro.angle.pitch = spyro.angle.pitch - 0x1000;
      }
      iVar3 = spyro.angle.pitch + -0x400;
      if (iVar3 < 0) {
        iVar3 = -iVar3;
      }
      uVar10 = 0x40;
      if (0x7f < iVar3) {
        uVar10 = -spyro.angle.roll & 0xfff;
        bVar1 = uVar10 < 0x11;
        if (0x800 < uVar10) {
          uVar10 = uVar10 - 0x1000;
          bVar1 = (int)uVar10 < 0x11;
        }
        bVar2 = (int)uVar10 < -0x10;
        if (!bVar1) {
          uVar10 = 0x10;
        }
        if (bVar1 && bVar2) {
          uVar10 = 0xfffffff0;
        }
      }
      iVar9 = 0x1040 - spyro.absoluteMomentum;
      spyro.angle.roll = spyro.angle.roll + uVar10 & 0xfff;
      iVar3 = iVar9;
      if (iVar9 < -0x80) {
        iVar3 = -0x80;
      }
      iVar3 = spyro.absoluteMomentum + iVar3;
      if (0x80 < iVar9) {
        iVar3 = spyro.absoluteMomentum + 0x80;
      }
LAB_80045fb0:
      spyro.absoluteMomentum = iVar3;
      Maybe_decayMomenum();
      iVar9 = spyro.angle.yaw;
      break;
    case 10:
      spyro.unkown_angleRelated6 = 0x1900;
      if (spyro.absoluteMomentum < 0x1900) {
        bVar1 = 0x1900 < spyro.absoluteMomentum + 0x80;
        spyro.absoluteMomentum = spyro.absoluteMomentum + 0x80;
LAB_80046000:
        if (bVar1) {
          spyro.absoluteMomentum = 0x1900;
        }
      }
      else if (0x1900 < spyro.absoluteMomentum) {
        bVar1 = spyro.absoluteMomentum + -0x80 < 0x1900;
        spyro.absoluteMomentum = spyro.absoluteMomentum + -0x80;
        goto LAB_80046000;
      }
      if (spyro.absoluteMomentum < 0x780) {
        spyro.absoluteMomentum = 0x780;
      }
      spyro.RelativeSparxAngle.roll = (char)(spyro.angle.yaw >> 4);
      if (spyro.maybe_pitchRelatedFlag == 0) {
        if (spyro.angle.pitch < 0) {
          spyro.maybe_pitchRelatedFlag = 1;
        }
      }
      else if (-0x100 < spyro.angle.pitch) {
        spyro.subState = 0;
        unk_cameraRelatedLocking = (uint)(byte)(&DAT_8006c588)[spyro.state];
        spyro.unkown3 = '\x04';
      }
      spyro.angle.pitch = spyro.angle.pitch + 0x1eU & 0xfff;
      spyro.RelativeSparxAngle.pitch = (char)(spyro.angle.pitch >> 4);
      if (0x800 < (uint)spyro.angle.pitch) {
        spyro.angle.pitch = spyro.angle.pitch - 0x1000;
      }
      Maybe_decayMomenum();
      if (spyro.isMovementLocked < 1) {
        spyro.isMovementLocked = 1;
      }
      uVar10 = spyro.turnAcceleration * -8 - spyro.angle.roll & 0xfff;
      bVar1 = uVar10 < 0x11;
      if (0x800 < uVar10) {
        uVar10 = uVar10 - 0x1000;
        bVar1 = (int)uVar10 < 0x11;
      }
      if (bVar1) {
        if ((int)uVar10 < -0x10) {
          uVar10 = 0xfffffff0;
        }
      }
      else {
        uVar10 = 0x10;
      }
      spyro.angle.roll = spyro.angle.roll + uVar10 & 0xfff;
      iVar9 = spyro.angle.yaw;
    }
    spyro.angle.yaw = iVar9;
    if ((spyro.isOverGoop != 0) && (spyro.position.z - spyro.unkown_heightRelated < 0xc01)) {
      iVar3 = (spyro.absoluteMomentum >> 0xb) + 2;
      if ((spyro.unkown_angleRelated8 == 0) && (spyro.unkown16 == 0)) {
        iVar3 = (spyro.absoluteMomentum >> 0xb) + 0x10002;
      }
      Vec3Copy(&local_90,&spyro.unkown_angleRelated8);
      Vec3ScaleDownByPowerOfTwo(&local_90,6);
      local_90 = local_90 + spyro.position.x;
      local_88 = spyro.unkown_heightRelated;
      local_8c = local_8c + spyro.position.y;
      (*ptr_OverlayCreateParticle)(1,0x1b,&local_90,iVar3);
    }
    iVar3 = 0;
    if ((spyro.unkown_angleRelated8 != 0) || (spyro.unkown16 != 0)) {
      iVar3 = 1;
    }
    iVar9 = iVar3 + -1;
    if (spyro.state == 0x20) {
      iVar9 = iVar3 + -3;
    }
    iVar9 = (spyro.absoluteMomentum >> 0xb) - iVar9;
    if (iVar9 < 1) {
      iVar9 = 1;
    }
    uVar10 = (uint)(byte)spyro.maybe_AnimSpeedRelated;
    if ((iVar3 != 0) && (uVar10 < 0xd)) {
      uVar10 = uVar10 + 4;
    }
    iVar11 = 0;
    iVar3 = 9;
    do {
      FUN_80052f38(iVar3,auStack_80,spyro.currentAnim,spyro.currentKeyfame);
      if (uVar10 != 0) {
        FUN_80052f38(iVar3,aiStack_70,spyro.nextAnim,spyro.nextKeyframe);
        FUN_80017894(auStack_80,auStack_80,aiStack_70,uVar10 << 8);
      }
      Vec3ApplyRotationMatrix(0x80078a8c,auStack_80,auStack_80);
      Vec3Add(auStack_80,auStack_80,&spyro);
      Vec3Copy(aiStack_70,&spyro.unkown_angleRelated8);
      Vec3ScaleDownByPowerOfTwo(aiStack_70,6);
      Vec3Add(auStack_80,auStack_80,aiStack_70);
      iVar3 = iVar3 + 0x5b;
      iVar11 = iVar11 + 1;
      (*ptr_OverlayCreateParticle)(1,0x1a,auStack_80,iVar9);
    } while (iVar11 < 2);
    break;
  case 0x10:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    spyro.airMomentum.z = spyro.airMomentum.z + spyro.z_Acceleration;
    bVar1 = spyro.airMomentum.z < -0x2300;
    goto LAB_80047450;
  case 0x11:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if (spyro.unkown50 != 0) {
      iVar3 = 0x500;
      if (*(short *)(spyro.unkown50 + 0x36) == 300) {
        iVar3 = *(int *)(*(int *)spyro.unkown50 + 4);
      }
      if (spyro.position.z < DAT_80075668 + 0x400) {
        iVar9 = spyro.groundedChargeMomentum2.z + 0x80;
        if (0x12c0 < iVar9) {
          iVar9 = 0x12c0;
        }
        Vec3Copy(&local_60,&spyro.lastGroundedPosition.x);
        spyro.subState = 0;
        spyro.walkingAcceleration = 0x400;
        uVar10 = ((spyro.position.z - DAT_80075668) * (spyro.position.z - DAT_80075668) >> 0xb) +
                 DAT_8007578c;
      }
      else if (spyro.position.z < spyro.neutralJumpZPos + -0x400) {
        if (spyro.subState < 1) {
          spyro.subState = 1;
          DAT_8007578c = DAT_8007578c + 0x200;
        }
        iVar11 = (spyro.position.z - DAT_80075668) + -0x400;
        if (DAT_80075724 == 0) {
          trap(0x1c00);
        }
        if ((DAT_80075724 == -1) && (DAT_800757f0 * iVar11 == -0x80000000)) {
          trap(0x1800);
        }
        spyro.walkingAcceleration = 0xc80;
        uVar10 = DAT_8007578c + (DAT_800757f0 * iVar11) / DAT_80075724 + (iVar11 * 0x400 >> 10) &
                 0xfff;
        iVar9 = 0x12c0;
        if (iVar3 < iVar11) {
          iVar11 = iVar3;
        }
        iVar3 = CosScaled(spyro.angle.yaw);
        local_60 = iVar11 * iVar3 >> 0xc;
        iVar3 = SinScaled(spyro.angle.yaw);
        local_5c = iVar11 * iVar3 >> 0xc;
        Vec3Add(&local_60,&local_60,0x80078bd4);
      }
      else {
        uVar10 = spyro.angle.yaw + (uint)*(byte *)(spyro.unkown50 + 0x46) * -0x10 & 0xfff;
        if (0x800 < uVar10) {
          uVar10 = uVar10 - 0x1000;
        }
        if ((int)uVar10 < 0) {
          uVar10 = -uVar10;
        }
        if ((int)uVar10 < 0x100) {
          iVar3 = iVar3 + 0x800;
        }
        iVar9 = CosScaled();
        local_60 = iVar3 * iVar9 >> 0xc;
        iVar9 = SinScaled(spyro.angle.yaw);
        local_5c = iVar3 * iVar9 >> 0xc;
        Vec3Add(&local_60,&local_60,0x80078bd4);
        iVar3 = spyro.neutralJumpZPos - spyro.position.z;
        iVar9 = iVar3 * 0x12c0 >> 10;
        spyro.walkingAcceleration = 0xc80;
        uVar10 = (uint)*(byte *)(spyro.unkown50 + 0x46) * 0x10 - (iVar3 * iVar3 >> 0xb);
      }
      local_58 = 0;
      Vec3Subtract(&local_60,&local_60,(int *)&spyro);
      uVar8 = Vec3CalculateLengthE(&local_60,flag2D);
      if (spyro.walkingAcceleration < (int)uVar8) {
        Vec3ScaleDownByFraction(&local_60,uVar8);
      }
      Vec3Copy(&spyro.groundedChargeMomentum2.x,&local_60);
      Vec3Copy(&spyro.airMomentum.x,&spyro.groundedChargeMomentum2.x);
      spyro.angle.yaw = uVar10 & 0xfff;
      spyro.groundedChargeMomentum2.z = iVar9;
      spyro.airMomentum.z = iVar9;
    }
    break;
  case 0x13:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    FUN_8003dfec(8,4);
    if (spyro.unkown_angleRelated4 < 0x17) {
      Vec3Zero(&VStack_50);
      Vec3Subtract(&VStack_50.x,&VStack_50.x,&spyro.groundedChargeMomentum2.x);
      uVar10 = Vec3CalculateLengthE(&VStack_50.x,flag3D);
      if (0x100 < (int)uVar10) {
        Vec3ScaleDownByFraction(&VStack_50,uVar10,0x100);
      }
      Vec3Add(0x80078b40,0x80078b40,&VStack_50);
    }
    Vec3Add(0x80078b40,0x80078b40,0x80078b28);
    spyro.absoluteMomentum = Vec3CalculateLengthE(&spyro.groundedChargeMomentum2.x,flag3D);
    if (0x2300 < spyro.absoluteMomentum) {
      Vec3ScaleDownByFraction(0x80078b40,spyro.absoluteMomentum,0x2300);
      spyro.absoluteMomentum = 0x2300;
    }
    uVar5 = 0x80078b40;
    goto LAB_80047800;
  case 0x14:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if ((&DAT_800773cc)[param_1 * 6] == 0) {
      uVar10 = 0x7f;
      if (((&DAT_800773c0)[param_1 * 6] & 0x1000) == 0) {
        uVar10 = -(uint)(((&DAT_800773c0)[param_1 * 6] & 0x4000) != 0) & 0xffffff81;
      }
      uVar8 = 0x7f;
      if (((&DAT_800773c0)[param_1 * 6] & 0x2000) == 0) {
        uVar8 = -(uint)(((&DAT_800773c0)[param_1 * 6] & 0x8000) != 0) & 0xffffff81;
      }
    }
    else {
      uVar8 = *(byte *)((int)&DAT_800773d0 + iVar3 + 2) - 0x7f;
      uVar10 = 0x7f - *(byte *)((int)&DAT_800773d0 + iVar3 + 3);
    }
    uVar7 = spyro.angle.yaw - cameraAngle.yaw & 0xfff;
    iVar3 = CosScaled(uVar7);
    iVar9 = SinScaled(uVar7);
    spyro.turnAcceleration = (int)(-uVar8 * iVar3 - uVar10 * iVar9) >> 0xd;
    if (spyro.turnAcceleration < DAT_8006c704) {
      spyro.turnAcceleration = (int)DAT_8006c704;
    }
    if (DAT_8006c710 < spyro.turnAcceleration) {
      spyro.turnAcceleration = (int)DAT_8006c710;
    }
    FUN_8003d52c(spyro.turnAcceleration);
    if ((spyro.subState & 0x40U) == 0) {
      spyro.unkown_angleRelated6 = 0x1e00;
      FUN_8003d92c(0x240,0x180);
      iVar3 = CosScaled(spyro.angle.yaw);
      spyro.airMomentum.x = spyro.absoluteMomentum * iVar3 >> 0xc;
      iVar3 = SinScaled(spyro.angle.yaw);
      spyro.airMomentum.y = spyro.absoluteMomentum * iVar3 >> 0xc;
    }
    else {
      iVar3 = spyro.neutralJumpZPos - spyro.position.z;
      if (iVar3 < 0) {
        iVar3 = SquareRoot(iVar3 * -0x2000);
        spyro.absoluteMomentum = spyro.unkown_angleRelated6 - iVar3;
      }
      else {
        iVar3 = SquareRoot(iVar3 * 0x2000);
        spyro.absoluteMomentum = spyro.unkown_angleRelated6 + iVar3;
      }
      if (0x5900 < spyro.absoluteMomentum) {
        spyro.absoluteMomentum = 0x5900;
      }
      iVar3 = CosScaled(spyro.angle.yaw);
      spyro.airMomentum.x = spyro.absoluteMomentum * iVar3 >> 0xc;
      iVar3 = SinScaled(spyro.angle.yaw);
      spyro.airMomentum.y = spyro.absoluteMomentum * iVar3 >> 0xc;
      Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.airMomentum.x);
    }
    if (spyro.unkown_angleRelated5 != 0) {
      spyro.unkown_portalRelated3 = 0;
      VecNormalize(&spyro.unkown_portalRelated,0x1000,param_3,param_4);
      if (0 < -spyro.airMomentum.x * spyro.unkown_portalRelated -
              spyro.airMomentum.y * spyro.unkown_portalRelated2 >> 0xc) {
        Vec3ScaleDownByFraction(0x80078b10,0x1000);
        Vec3Add(0x80078b4c,0x80078b4c,0x80078b10);
      }
    }
    spyro.airMomentum.z = spyro.airMomentum.z + -0xc0;
    goto code_r0x80047728;
  case 0x16:
  case 0x1c:
    pVVar6 = &VStack_30;
    Vec3Zero(pVVar6);
    Vec3Subtract(&pVVar6->x,&pVVar6->x,&spyro.airMomentum.x);
    if (spyro.timer_framesInAir == 0) {
      uVar10 = Vec3CalculateLengthE(&pVVar6->x,flag3D);
      if (0x100 < (int)uVar10) {
        Vec3ScaleDownByFraction(pVVar6,uVar10,0x100);
      }
      Vec3Add(0x80078b4c,0x80078b4c,pVVar6);
      pVVar6 = (Vec3 *)&spyro.walkingMomentum;
    }
    else {
      VStack_30.z = 0;
      uVar10 = Vec3CalculateLengthE(&pVVar6->x,flag2D);
      if (0x40 < (int)uVar10) {
        Vec3ScaleDownByFraction(pVVar6,uVar10,0x40);
      }
      VStack_30.z = -0xc0;
    }
    Vec3Add(0x80078b4c,0x80078b4c,pVVar6);
code_r0x80047728:
    if (spyro.airMomentum.z < -0x2300) {
      spyro.airMomentum.z = -0x2300;
    }
    break;
  case 0x18:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if ((&DAT_800773cc)[param_1 * 6] == 0) {
      uVar10 = 0x7f;
      if (((&DAT_800773c0)[param_1 * 6] & 0x1000) == 0) {
        uVar10 = -(uint)(((&DAT_800773c0)[param_1 * 6] & 0x4000) != 0) & 0xffffff81;
      }
      uVar8 = 0x7f;
      if (((&DAT_800773c0)[param_1 * 6] & 0x2000) == 0) {
        uVar8 = -(uint)(((&DAT_800773c0)[param_1 * 6] & 0x8000) != 0) & 0xffffff81;
      }
    }
    else {
      uVar8 = *(byte *)((int)&DAT_800773d0 + iVar3 + 2) - 0x7f;
      uVar10 = 0x7f - *(byte *)((int)&DAT_800773d0 + iVar3 + 3);
    }
    uVar7 = spyro.angle.yaw - cameraAngle.yaw & 0xfff;
    iVar3 = CosScaled(uVar7);
    iVar9 = SinScaled(uVar7);
    spyro.turnAcceleration = (int)(-uVar8 * iVar3 - uVar10 * iVar9) >> 0xd;
    if (spyro.turnAcceleration < DAT_8006c704) {
      spyro.turnAcceleration = (int)DAT_8006c704;
    }
    if (DAT_8006c710 < spyro.turnAcceleration) {
      spyro.turnAcceleration = (int)DAT_8006c710;
    }
    FUN_8003d52c(spyro.turnAcceleration);
    iVar3 = CosScaled(spyro.angle.yaw);
    spyro.airMomentum.x = spyro.absoluteMomentum * iVar3 >> 0xc;
    iVar3 = SinScaled(spyro.angle.yaw);
    spyro.airMomentum.y = spyro.absoluteMomentum * iVar3 >> 0xc;
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.airMomentum.x);
    if (4 < spyro.framesInCurrentState) {
      spyro.airMomentum.z = spyro.airMomentum.z - spyro.z_Acceleration;
    }
    bVar1 = spyro.airMomentum.z < -0x2300;
    goto LAB_80047450;
  case 0x19:
    if (spyro.timer_framesInAir == 0) {
      Vec3Zero((Vec3 *)&spyro.airMomentum);
      break;
    }
    spyro.airMomentum.z = spyro.airMomentum.z + -0x600;
    bVar1 = spyro.airMomentum.z < -0x2300;
LAB_80047450:
    if (bVar1) {
      spyro.airMomentum.z = -0x2300;
    }
    break;
  case 0x1a:
    iVar3 = *(int *)spyro.unkown50;
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    Vec3Subtract((int *)&local_40,(int *)(spyro.unkown50 + 0xc),(int *)&spyro);
    uVar10 = Vec3CalculateLengthE((int *)&local_40,flag2D);
    iVar11 = ATan2Scaled(local_40,local_3c,1);
    iVar9 = DAT_800758a0;
    if (spyro.subState == 1) {
      iVar9 = -DAT_800758a0;
    }
    iVar9 = iVar9 >> 6;
    FUN_8003d3b8(0x280);
    FUN_8003d6d0(0);
    DAT_800758a0 = DAT_800758a0 + 0x20;
    if (spyro.unkown_angleRelated6 < DAT_800758a0) {
      DAT_800758a0 = spyro.unkown_angleRelated6;
    }
    uVar8 = iVar11 + iVar9 + 0x800U & 0xfff;
    if (*(short *)(spyro.unkown50 + 0x36) == 0xff) {
      uVar7 = *(int *)(iVar3 + 0x14) + iVar9 & 0xfff;
      *(uint *)(iVar3 + 0x14) = uVar7;
    }
    else {
      uVar7 = *(int *)(iVar3 + 0x14) + iVar9 & 0xfff;
      *(uint *)(iVar3 + 0x14) = uVar7;
    }
    *(char *)(spyro.unkown50 + 0x46) = (char)((int)uVar7 >> 4);
    iVar3 = CosScaled(uVar8);
    local_40 = (int)(uVar10 * iVar3) >> 0xc;
    iVar3 = SinScaled(uVar8);
    local_3c = (int)(uVar10 * iVar3) >> 0xc;
    Vec3Add(&local_40,&local_40,spyro.unkown50 + 0xc);
    Vec3Subtract((int *)&local_40,(int *)&local_40,(int *)&spyro);
    local_38 = 0;
    Vec3ScaleUpByPowerOfTwo((int *)&local_40,6);
    Vec3Copy(&spyro.airMomentum.x,(int *)&local_40);
    spyro.angle.yaw = spyro.angle.yaw + iVar9 & 0xfff;
    if (spyro.unkown_landingMomentumRelated != 0) {
      spyro.airMomentum.z = spyro.airMomentum.z + -0xc0;
      break;
    }
LAB_800477f4:
    uVar5 = 0x80078b4c;
LAB_80047800:
    Vec3Add(0x80078b4c,uVar5,0x80078b34);
    break;
  case 0x1b:
    if (spyro.timer_framesInAir == 0) {
      Vec3Zero((Vec3 *)&spyro.airMomentum);
    }
    else {
      spyro.airMomentum.z = spyro.airMomentum.z + -0x600;
      if (spyro.airMomentum.z < -0x2300) {
        spyro.airMomentum.z = -0x2300;
      }
    }
    spyro.angle.yaw = spyro.angle.yaw + 0x55;
    break;
  case 0x1e:
  case 0x1f:
    spyro.groundedChargeMomentum2.x =
         spyro.groundedChargeMomentum2.x - (spyro.groundedChargeMomentum2.x >> 4);
    spyro.groundedChargeMomentum2.y =
         spyro.groundedChargeMomentum2.y - (spyro.groundedChargeMomentum2.y >> 4);
    spyro.groundedChargeMomentum2.z =
         spyro.groundedChargeMomentum2.z - (spyro.groundedChargeMomentum2.z >> 4);
    Vec3Copy(&spyro.airMomentum.x,&spyro.groundedChargeMomentum2.x);
    if (spyro.unkown_landingMomentumRelated != 0) goto LAB_800477d4;
    goto joined_r0x800477cc;
  case 0x2c:
    spyro.iFramesTimer = spyro.iFramesTimer + -1;
    if (spyro.iFramesTimer < 0) {
      spyro.iFramesTimer = 0;
    }
    if ((&DAT_800773cc)[param_1 * 6] == 0) {
      if (((&DAT_800773c0)[param_1 * 6] & 0x8000) == 0) {
        if (((&DAT_800773c0)[param_1 * 6] & 0x2000) == 0) {
          spyro.turnAcceleration = 0;
        }
        else {
          if (0 < spyro.turnAcceleration) {
            spyro.turnAcceleration = 0;
          }
          if (-6 < spyro.turnAcceleration) {
            spyro.turnAcceleration = spyro.turnAcceleration + -1;
          }
        }
      }
      else {
        if (spyro.turnAcceleration < 0) {
          spyro.turnAcceleration = 0;
        }
        if (spyro.turnAcceleration < 6) {
          spyro.turnAcceleration = spyro.turnAcceleration + 1;
        }
      }
      iVar3 = (int)(char)(&DAT_8006c70a)[spyro.turnAcceleration];
    }
    else {
      iVar3 = (int)(0x7f - (uint)*(byte *)((int)&DAT_800773d0 + iVar3 + 2)) >> 1;
      iVar9 = (int)DAT_8006c704;
      if ((iVar3 < DAT_8006c704) ||
         (iVar9 = (int)DAT_8006c710, spyro.turnAcceleration = iVar3, DAT_8006c710 < iVar3)) {
        iVar3 = iVar9;
        spyro.turnAcceleration = iVar3;
      }
    }
    FUN_8003d52c(iVar3);
    iVar3 = spyro.neutralJumpZPos - spyro.position.z;
    if (iVar3 < 0) {
      iVar3 = SquareRoot(iVar3 * -0x2000);
      spyro.absoluteMomentum = spyro.unkown_angleRelated6 - iVar3;
    }
    else {
      iVar3 = SquareRoot(iVar3 * 0x2000);
      spyro.absoluteMomentum = spyro.unkown_angleRelated6 + iVar3;
    }
    if (0x5900 < spyro.absoluteMomentum) {
      spyro.absoluteMomentum = 0x5900;
    }
    if (spyro.absoluteMomentum < 0x1400) {
      spyro.unkown_angleRelated6 = 0x1400;
      spyro.neutralJumpZPos = spyro.position.z;
    }
    Maybe_decayMomenum();
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.airMomentum.x);
    if (spyro.timer_framesInAir == 0) {
      Vec3Add(0x80078b4c,0x80078b4c,0x80078b34);
    }
    DAT_8007584c = (spyro.absoluteMomentum + -0x1400 >> 7) + 0x14;
    if (DAT_8007584c < 0x50) {
      DAT_8007584c = 0x50;
    }
    if (0xa0 < DAT_8007584c) {
      DAT_8007584c = 0xa0;
    }
    if (vibrationFlag < 4) {
      vibrationFlag = 4;
    }
  }
  Vec3Add(0x80078b58,0x80078b58,0x80078b4c);
  spyro.RelativeSparxAngle.yaw = (char)(spyro.angle.roll >> 4);
  spyro.RelativeSparxAngle.roll = (char)(spyro.angle.yaw >> 4);
  spyro.RelativeSparxAngle.pitch = (char)(spyro.angle.pitch >> 4);
  return;
}



void FUN_80047b60(void)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  undefined4 uVar6;
  int *dest;
  int *dest_00;
  int iVar7;
  int aiStack_80 [2];
  int local_78;
  int aiStack_70 [4];
  int local_60;
  undefined4 local_5c;
  undefined4 local_58;
  int local_50;
  int local_4c;
  int aiStack_40 [4];
  int local_30;
  int local_2c;
  int local_28;
  int aiStack_20 [4];
  
  maybe_UnknownPositionVector.y = 0;
  switch(spyro.state) {
  case 0:
  case 0xc:
  case 0xd:
  case 0x12:
  case 0x23:
  case 0x24:
  case 0x25:
  case 0x26:
  case 0x27:
  case 0x28:
  case 0x29:
  case 0x2a:
  case 0x2b:
    if ((DAT_80077394 != 0) && ((currentButton & TRIANGLE_BUTTON) != 0)) {
      unk_cameraRelatedLocking = &DAT_80000009;
    }
    FUN_8003e628();
    FUN_8003fe40();
    FUN_8003e318();
    if (spyro.maybe_weirdResearchThis == 0) {
      FUN_8003e758();
    }
    break;
  case 1:
  case 2:
  case 3:
  case 0x15:
    FUN_8003e628();
    FUN_8003fe40();
    FUN_8003e318();
    Maybe_Hill_Gravity_Cancellation();
    iVar5 = maybe_walkAccelRelated;
    if (spyro.unkown_angleRelated4 != 0) {
      iVar5 = ATan2Scaled(spyro.unkown_angleRelated,spyro.unkown_angleRelated2,1);
      uVar2 = spyro.angle.yaw - iVar5 & 0xfff;
      if (0x800 < uVar2) {
        uVar2 = uVar2 - 0x1000;
      }
      if ((int)uVar2 < 0) {
        uVar2 = -uVar2;
      }
      iVar5 = (spyro.unkown_angleRelated4 << 0xc) / 0x16;
      if ((int)uVar2 < 0x401) {
        iVar4 = DAT_8006c5c4 - maybe_walkAccelRelated;
        iVar3 = maybe_walkAccelRelated;
      }
      else {
        iVar4 = DAT_8006c5cc - DAT_8006c5c0;
        uVar2 = 0x800 - uVar2;
        iVar3 = DAT_8006c5c0;
      }
      iVar7 = DAT_8006c5bc + (iVar5 * (DAT_8006c5c8 - DAT_8006c5bc) >> 0xc);
      iVar1 = CosScaled(uVar2);
      iVar4 = (iVar3 + (iVar5 * iVar4 >> 0xc)) * iVar1 >> 0xc;
      iVar5 = SinScaled(uVar2);
      iVar5 = iVar7 * iVar5 >> 0xc;
      iVar5 = SquareRoot(iVar4 * iVar4 + iVar5 * iVar5);
    }
    spyro.walkingAcceleration = iVar5;
    if (spyro.state != 3) break;
    dest = aiStack_70;
    Vec3Copy(dest,&spyro.unkown18);
    Vec3ScaleDownByPowerOfTwo(dest,6);
    uVar6 = 0x21;
    dest_00 = (int *)0x0;
    goto LAB_800487d8;
  case 4:
    FUN_8003e628();
    FUN_8003fe40();
    FUN_8003e318();
    Maybe_Hill_Gravity_Cancellation();
    dest = &local_60;
    local_60 = 0x20;
    local_5c = 0;
    local_58 = 0;
    Vec3ApplyRotationMatrix(0x80078a8c,dest,dest);
    uVar6 = 0x21;
    dest_00 = (int *)0x0;
    goto LAB_800487d8;
  case 5:
  case 0x11:
    FUN_8003fe40();
    FUN_8003e318();
    iVar5 = spyro.neutralJumpZPos;
    goto LAB_80048598;
  case 6:
  case 0x10:
    if (spyro.canSuperfly == 0) {
      spyro.neutralJumpZPos = spyro.position.z;
    }
    FUN_8003fe40();
    FUN_8003e318();
    iVar5 = spyro.neutralJumpZPos;
    if (spyro.canSuperfly != 0) {
      if (isInFlightLevel == 0) {
        if (DAT_800758c0 != 0) {
          iVar4 = DAT_800758c0 - spyro.neutralJumpZPos;
          iVar5 = iVar4;
          if (0x40 < iVar4) {
            iVar5 = 0x40;
          }
          iVar5 = spyro.neutralJumpZPos + iVar5;
          if (iVar4 < -0x10) {
            iVar5 = spyro.neutralJumpZPos + -0x10;
          }
        }
        spyro.neutralJumpZPos = iVar5;
        if ((DAT_800758c0 < spyro.neutralJumpZPos) && (spyro.timer_framesIdle != 0)) {
          DAT_800758c0 = spyro.neutralJumpZPos;
        }
        iVar5 = spyro.neutralJumpZPos;
        if ((levelIDPortalExit == 0x40) && (DAT_80075678 < DAT_800758c0)) {
          DAT_800758c0 = DAT_80075678;
        }
      }
      else {
        iVar4 = DAT_800758c0 - spyro.neutralJumpZPos;
        iVar5 = iVar4;
        if (0x40 < iVar4) {
          iVar5 = 0x40;
        }
        iVar5 = spyro.neutralJumpZPos + iVar5;
        if (iVar4 < -0x10) {
          iVar5 = spyro.neutralJumpZPos + -0x10;
        }
      }
    }
    spyro.neutralJumpZPos = iVar5;
    if (spyro.unkown_angleRelated5 == 0) {
      FUN_8003e218();
    }
    Vec3Copy(&spyro.airMomentum.x,&spyro.unkown18);
    break;
  case 7:
    FUN_8003fe40();
    FUN_8003e318();
    Maybe_Hill_Gravity_Cancellation();
    if ((byte)spyro.nextKeyframe < 10) {
      spyro.colorFilter.opacity = 0xff;
      if ((spyro.nextKeyframe & 1U) == 0) {
        spyro.colorFilter.B = '@';
        spyro.colorFilter.G = '@';
        spyro.colorFilter.R = '@';
      }
      else {
        spyro.colorFilter.B = 0xff;
        spyro.colorFilter.G = 0xff;
        spyro.colorFilter.R = 0xff;
      }
    }
    else {
      spyro.colorFilter.opacity = '\0';
    }
    break;
  case 8:
    FUN_8003e628();
    goto LAB_8004870c;
  case 9:
  case 10:
  case 0xe:
  case 0x16:
  case 0x1a:
  case 0x1c:
  case 0x1e:
  case 0x1f:
    FUN_8003fe40();
    FUN_8003e318();
    Maybe_Hill_Gravity_Cancellation();
    break;
  case 0xb:
    FUN_8003fe40();
    FUN_8003e318();
    Maybe_Hill_Gravity_Cancellation();
    FUN_8003e0b4();
    FUN_8003e758();
    iVar5 = spyro.neutralJumpZPos;
    goto LAB_80048598;
  case 0xf:
    if (spyro.canSuperfly == 0) {
      spyro.neutralJumpZPos = spyro.position.z;
    }
    FUN_8003fe40();
    FUN_8003e318();
    if (spyro.canSuperfly != 0) {
      iVar5 = spyro.neutralJumpZPos;
      if (DAT_800758c0 != 0) {
        iVar4 = DAT_800758c0 - spyro.neutralJumpZPos;
        iVar5 = iVar4;
        if (0x40 < iVar4) {
          iVar5 = 0x40;
        }
        iVar5 = spyro.neutralJumpZPos + iVar5;
        if (iVar4 < -0x10) {
          iVar5 = spyro.neutralJumpZPos + -0x10;
        }
      }
      spyro.neutralJumpZPos = iVar5;
      if ((DAT_800758c0 < spyro.neutralJumpZPos) && (spyro.timer_framesIdle != 0)) {
        DAT_800758c0 = spyro.neutralJumpZPos;
      }
      if ((levelIDPortalExit == 0x40) && (DAT_80075678 < DAT_800758c0)) {
        DAT_800758c0 = DAT_80075678;
      }
    }
    if (spyro.unkown_angleRelated5 == 0) {
      FUN_8003e218();
    }
    if (((spyro.maybe_weirdResearchThis & 0x4000U) != 0) && (spyro.subState == 9)) {
      spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
    }
    break;
  case 0x13:
    FUN_8003fe40();
    Vec3Copy(&spyro.groundedChargeMomentum2.x,&spyro.unkown18);
    FUN_8003e318();
    Maybe_Hill_Gravity_Cancellation();
    FUN_8003e0b4();
    break;
  case 0x14:
  case 0x18:
    FUN_8003fe40();
    FUN_8003e318();
    dest = &local_50;
    if ((spyro.subState & 0x40U) == 0) break;
    Vec3Copy(dest,(int *)&spyro);
    uVar2 = rand();
    local_50 = local_50 + -0x7f + (uVar2 & 0xfe);
    uVar2 = rand();
    dest_00 = aiStack_40;
    local_4c = local_4c + -0x7f + (uVar2 & 0xfe);
    Vec3Copy(dest_00,&spyro.unkown18);
    Vec3ScaleDownByPowerOfTwo(dest_00,6);
    goto LAB_800487cc;
  case 0x17:
    if (spyro.canSuperfly == 0) {
      spyro.neutralJumpZPos = spyro.position.z;
    }
    FUN_8003fe40();
    FUN_8003e318();
    iVar5 = spyro.neutralJumpZPos;
    if (spyro.canSuperfly != 0) {
      if (isInFlightLevel == 0) {
        if (DAT_800758c0 != 0) {
          iVar4 = DAT_800758c0 - spyro.neutralJumpZPos;
          iVar5 = iVar4;
          if (0x40 < iVar4) {
            iVar5 = 0x40;
          }
          iVar5 = spyro.neutralJumpZPos + iVar5;
          if (iVar4 < -0x10) {
            iVar5 = spyro.neutralJumpZPos + -0x10;
          }
        }
        spyro.neutralJumpZPos = iVar5;
        if ((DAT_800758c0 < spyro.neutralJumpZPos) && (spyro.timer_framesIdle != 0)) {
          DAT_800758c0 = spyro.neutralJumpZPos;
        }
        iVar5 = spyro.neutralJumpZPos;
        if ((levelIDPortalExit == 0x40) && (DAT_80075678 < DAT_800758c0)) {
          DAT_800758c0 = DAT_80075678;
        }
      }
      else {
        iVar4 = DAT_800758c0 - spyro.neutralJumpZPos;
        iVar5 = iVar4;
        if (0x40 < iVar4) {
          iVar5 = 0x40;
        }
        iVar5 = spyro.neutralJumpZPos + iVar5;
        if (iVar4 < -0x10) {
          iVar5 = spyro.neutralJumpZPos + -0x10;
        }
      }
    }
    goto LAB_80048598;
  case 0x19:
  case 0x1b:
    FUN_8003fe40();
    FUN_8003e318();
    break;
  case 0x1d:
    iVar5 = spyro.drownTimer + 8;
    if (spyro.drownTimer != 0) {
      spyro.position.z = spyro.maybe_drowningRelated + 0x164;
      spyro.drownTimer = iVar5;
      if (spyro.health < 0) {
        if (0x240 < iVar5) {
          spyro.drownTimer = 0x240;
        }
      }
      else if (0x96 < iVar5) {
        spyro.drownTimer = 0x96;
      }
    }
LAB_8004870c:
    FUN_8003fe40();
    FUN_8003e318();
    FUN_8003e758();
    break;
  case 0x20:
  case 0x21:
  case 0x22:
    if (spyro.canSuperfly == 0) {
      spyro.neutralJumpZPos = spyro.position.z;
    }
    FUN_8003fe40();
    FUN_8003e318();
    iVar5 = spyro.neutralJumpZPos;
    if (spyro.canSuperfly != 0) {
      if (isInFlightLevel == 0) {
        if (DAT_800758c0 != 0) {
          iVar4 = DAT_800758c0 - spyro.neutralJumpZPos;
          iVar5 = iVar4;
          if (0x40 < iVar4) {
            iVar5 = 0x40;
          }
          iVar5 = spyro.neutralJumpZPos + iVar5;
          if (iVar4 < -0x10) {
            iVar5 = spyro.neutralJumpZPos + -0x10;
          }
        }
        spyro.neutralJumpZPos = iVar5;
        if ((DAT_800758c0 < spyro.neutralJumpZPos) && (spyro.timer_framesIdle != 0)) {
          DAT_800758c0 = spyro.neutralJumpZPos;
        }
        iVar5 = spyro.neutralJumpZPos;
        if ((levelIDPortalExit == 0x40) && (DAT_80075678 < DAT_800758c0)) {
          DAT_800758c0 = DAT_80075678;
        }
      }
      else {
        iVar4 = DAT_800758c0 - spyro.neutralJumpZPos;
        iVar5 = iVar4;
        if (0x40 < iVar4) {
          iVar5 = 0x40;
        }
        iVar5 = spyro.neutralJumpZPos + iVar5;
        if (iVar4 < -0x10) {
          iVar5 = spyro.neutralJumpZPos + -0x10;
        }
        if ((spyro.subState == 3) &&
           (spyro.neutralJumpZPos = iVar5, iVar4 = FUN_8004be4c(&spyro,0x164,0x164),
           iVar5 = spyro.neutralJumpZPos, iVar4 != 0)) {
          (*DAT_80075694)();
          iVar5 = spyro.neutralJumpZPos;
        }
      }
    }
LAB_80048598:
    spyro.neutralJumpZPos = iVar5;
    if (spyro.unkown_angleRelated5 == 0) {
      FUN_8003e218();
    }
    break;
  case 0x2c:
    FUN_8003fe40();
    FUN_8003e318();
    Maybe_Hill_Gravity_Cancellation();
    FUN_8003e0b4();
    dest = &local_30;
    Vec3Copy(dest,(int *)&spyro);
    uVar2 = rand();
    local_30 = local_30 + -0x7f + (uVar2 & 0xfe);
    uVar2 = rand();
    dest_00 = aiStack_20;
    local_2c = local_2c + -0x7f + (uVar2 & 0xfe);
    local_28 = local_28 + -0x164;
    Vec3Copy(dest_00,&spyro.unkown18);
    Vec3ScaleDownByPowerOfTwo(dest_00,6);
LAB_800487cc:
    uVar6 = 9;
LAB_800487d8:
    (*ptr_OverlayCreateParticle)(1,uVar6,dest,dest_00);
  }
  if (spyro.state == 0x1d) {
    spyro.position.z = spyro.position.z - spyro.drownTimer;
    if (spyro.unkown_heightRelated == 0) {
      Vec3Copy(aiStack_80,(int *)&spyro);
      local_78 = local_78 + 0x800;
      spyro.pad2 = MobyUpdatePosition(aiStack_80,0xc00);
    }
    else {
      spyro.pad2 = spyro.unkown_heightRelated;
    }
  }
  else {
    spyro.pad2 = 0;
  }
  return;
}



// Most states do this with the general function "maybePitchRollCorrection", but several states
// require special treatment

void MaybeGeneralPitchRollCorrection(void)

{
  switch(spyro.state) {
  case 1:
    Maybe_PitchRollCorrection();
    if (spyro.absoluteMomentum == 0) {
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      if (((cameraMode & 0x10) != 0) && (-1 < unk_cameraRelatedLocking)) {
        unk_cameraRelatedLocking = -0x80000000;
      }
    }
    else {
      spyro._88_4_ = 4;
      if (spyro.unkown_angleRelated5 == 0) {
        spyro._88_4_ = spyro.absoluteMomentum >> 7;
      }
      if ((int)spyro._88_4_ < 1) {
        spyro.animSpeed = '\x01';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (0x10 < (int)spyro._88_4_) {
        spyro.animSpeed = '\x10';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
    }
    break;
  case 5:
    Maybe_PitchRollCorrection();
    if (spyro.maybe_animUpdateRelated != 0) break;
    if (spyro.subState == 0) {
      if ((byte)spyro.nextKeyframe < 3) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
        break;
      }
      if ((byte)spyro.nextKeyframe < 6) goto LAB_80048a0c;
    }
    else if ((byte)spyro.nextKeyframe < 8) {
LAB_80048a0c:
      spyro.animSpeed = '\x02';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      break;
    }
    spyro.animSpeed = '\0';
    spyro.unkown10 = '\0';
    spyro.unkown11 = '\0';
    spyro.unkown12 = '\0';
    break;
  case 6:
    MaybeFlopPitchRollCorrection();
    break;
  case 0xb:
    Maybe_PitchRollCorrection();
    if (((spyro.subState & 1U) != 0) && (spyro.unkown15 != 0)) {
      spyro.absoluteMomentum = 0xa00;
    }
    break;
  case 0x13:
    Maybe_PitchRollCorrection();
    spyro._88_4_ = (spyro.absoluteMomentum >> 0xb) + 3;
    if ((int)spyro._88_4_ < 4) {
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
    }
    if (0xc < (int)spyro._88_4_) {
      spyro.animSpeed = '\f';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
    }
    break;
  case 0x14:
    Maybe_ChargeInAirPitchRollCorrection();
    break;
  case 0x15:
    Maybe_PitchRollCorrection();
    spyro._88_4_ = (spyro.absoluteMomentum + -0x640 >> 9) + 6;
    if ((int)spyro._88_4_ < 6) {
      spyro.animSpeed = '\x06';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
    }
    if (0x10 < (int)spyro._88_4_) {
      spyro.animSpeed = '\x10';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
    }
    break;
  case 0x18:
    Maybe_ChargeInAirPitchRollCorrection();
    spyro.z_Acceleration = spyro.z_Acceleration + 0xc;
    if (0xc0 < spyro.z_Acceleration) {
      spyro.z_Acceleration = 0xc0;
    }
    break;
  case 0x2c:
    if (spyro.timer_framesInAir != 0) break;
  case 0:
  case 2:
  case 3:
  case 4:
  case 7:
  case 8:
  case 9:
  case 10:
  case 0xc:
  case 0xd:
  case 0xe:
  case 0x10:
  case 0x11:
  case 0x12:
  case 0x16:
  case 0x19:
  case 0x1a:
  case 0x1b:
  case 0x1c:
  case 0x1d:
  case 0x1e:
  case 0x1f:
  case 0x23:
  case 0x24:
  case 0x25:
  case 0x26:
  case 0x27:
  case 0x28:
  case 0x29:
  case 0x2a:
  case 0x2b:
    Maybe_PitchRollCorrection();
  }
  spyro.framesInCurrentState = spyro.framesInCurrentState + 1;
  return;
}



void FUN_80048b9c(void)

{
  uint uVar1;
  undefined4 uVar2;
  int iVar3;
  
  Vec3Zero((Vec3 *)&spyro.unkown_angleRelated8);
  iVar3 = 0;
  if (0 < gameSpeedMultiplyer) {
    do {
      UpdateSpyroPosition(iVar3);
      iVar3 = iVar3 + 1;
    } while (iVar3 < gameSpeedMultiplyer);
  }
  iVar3 = 0;
  FUN_80047b60();
  if (0 < gameSpeedMultiplyer) {
    do {
      iVar3 = iVar3 + 1;
      MaybeGeneralPitchRollCorrection();
    } while (iVar3 < gameSpeedMultiplyer);
  }
  if ((spyro.maybe_weirdResearchThis & 0x4000U) != 0) {
    return;
  }
  spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
  spyro.isOverGoop = 0;
  if (((spyro.timer_framesInAir != 0) || (uVar1 = DAT_80075718 & 0x3f, uVar1 == 0x3f)) ||
     (uVar2 = 2, 0x200 < spyro.position.z - spyro.unkown_heightRelated)) {
    uVar1 = spyro.maybe_superchargeRelated & 0x3f;
    if (uVar1 == 0x3f) {
      if (spyro.unkown_heightRelated < 1) {
        spyro.isOverGoop = 0;
        return;
      }
      uVar1 = DAT_80075718 & 0x3f;
      uVar2 = 1;
      if (uVar1 == 0x3f) {
        spyro.isOverGoop = 0;
        return;
      }
    }
    else {
      uVar2 = 0;
    }
  }
  ChangeLevelIDRelated(uVar1,uVar2);
  return;
}



void FlameButAlsoNotFlame(int param_1)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  byte bVar4;
  int *piVar5;
  uint uVar6;
  int iVar7;
  undefined4 uVar8;
  byte *pbVar9;
  char *pcVar10;
  int local_88;
  int local_84;
  int local_80;
  int local_78;
  int local_74;
  int local_70;
  int aiStack_68 [4];
  Vec3 local_58;
  int local_48;
  int local_40;
  int local_30;
  
  local_48 = 0;
  local_40 = 0;
  if (superFlameTimer != 0) {
    uVar1 = rand();
    local_88 = (uVar1 & 0x1ff) - 0x160;
    uVar1 = rand();
    local_84 = (uVar1 & 0x7f) - 0x40;
    uVar1 = rand();
    local_80 = (local_88 >> 1) + (uVar1 & 0x3f) + -0x60;
    Vec3ApplyRotationMatrix(0x80078a8c,&local_88,&local_88);
    Vec3Add(&local_88,&local_88,&spyro);
    (*ptr_OverlayCreateParticle)(1,0x1e,&local_88,0);
    spyro.colorFilter.R = 0x90;
    spyro.colorFilter.G = ' ';
    spyro.colorFilter.B = '\x10';
    if ((superFlameTimer < 0x78) && (0xd < superFlameTimer % 0x18)) {
      spyro.colorFilter.opacity = '\0';
    }
    else {
      iVar7 = SinScaled(superFlameTimer << 7);
      if (iVar7 < 0) {
        iVar7 = iVar7 + 0xff;
      }
      spyro.colorFilter.opacity = (char)((uint)iVar7 >> 8) + 0xd8;
    }
    superFlameTimer = superFlameTimer - gameSpeedMultiplyer;
    if (superFlameTimer < 1) {
      superFlameTimer = 0;
      spyro.colorFilter.opacity = '\0';
    }
  }
  if (DAT_80078760 != '\0') {
    if ((spyro.timer_framesInAir == 0) && (0x80 < (byte)spyro.RelativeSparxAngle.pitch)) {
      spyro.TargetHeadAngle._4_4_ = (0x100 - (uint)(byte)spyro.RelativeSparxAngle.pitch) * 8;
    }
    else {
      spyro.TargetHeadAngle.pitch = 0;
      spyro.TargetHeadAngle.pad2 = 0;
    }
    iVar7 = 0;
    if (0 < param_1) {
      do {
        if (DAT_80078761 < 8) {
          (&DAT_800786e8)[*(byte *)((uint)DAT_80078763 * 8 + -0x7ff91e38 + (uint)DAT_80078761)] =
               (char)param_1 - (char)iVar7;
          (&DAT_800786f0)[*(byte *)((uint)DAT_80078763 * 8 + -0x7ff91e38 + (uint)DAT_80078761)] =
               0x20;
          (&DAT_800786f8)[*(byte *)((uint)DAT_80078763 * 8 + -0x7ff91e38 + (uint)DAT_80078761)] = 0;
        }
        iVar7 = iVar7 + 1;
        DAT_80078761 = DAT_80078761 + 1;
      } while (iVar7 < param_1);
    }
    if (((DAT_80078761 < 0x1e) && ((spyro._24_4_ & 0xffff0000) == 0x7070000)) &&
       (spyro.maybe_keyframeDupe1 == '\x04')) {
      spyro.maybe_animSpeedRelatedDupe1 = '\0';
    }
    if (DAT_80078762 == '\0') {
      Vec3Add(&Vec3_800786c8,&spyro,&DAT_80078794);
    }
    else {
      DAT_800786d4 = spyro.RelativeSparxAngle.yaw;
      DAT_800786d5 = spyro.RelativeSparxAngle.pitch;
      DAT_800786d6 = spyro.RelativeSparxAngle.roll;
      ArrayCopy(&maybe_FlameMatrix.R12R11,0x80078c20,0x14);
      iVar7 = *(int *)((*(uint *)((uint)(byte)spyro.currentKeyfame * 4 +
                                  *(int *)((spyro._24_4_ & 0xff) * 4 + DAT_80076378 + 0x38) + 0x24)
                       & 0x1fffff) * 2 + 0x10);
      local_78 = iVar7 >> 0x15;
      local_74 = (iVar7 << 0xb) >> 0x15;
      local_70 = (iVar7 << 0x16) >> 0x15;
      Vec3ApplyRotationMatrix(0x80078a8c,&local_78,&local_78);
      Vec3Add(&Vec3_800786c8,&local_78,&spyro);
      if (DAT_80078761 < 8) {
        piVar5 = (int *)((uint)(DAT_80078761 >> 1) * 0xc + -0x7ff92594);
      }
      else {
        piVar5 = (int *)&DAT_8006da9c;
      }
      Vec3Copy(&local_78,piVar5);
      Vec3ApplyRotationMatrix(&maybe_FlameMatrix,&local_78,&local_78);
      Vec3Add(&Vec3_800786c8,&Vec3_800786c8,&local_78);
      Vec3Subtract((int *)&DAT_80078794,&Vec3_800786c8.x,(int *)&spyro);
    }
    iVar7 = 0;
    local_30 = 0;
    pbVar9 = &DAT_800786e8;
    pcVar10 = &DAT_800786f8;
    piVar5 = (int *)&DAT_800787a0;
    do {
      if (*pbVar9 == 0) {
        local_48 = local_48 + 1;
      }
      else {
        uVar1 = 0x18;
        if (iVar7 < 4) {
          bVar4 = 0x20;
        }
        else {
          uVar1 = 0x20;
          bVar4 = 0x28;
        }
        if (*pcVar10 != '\0') {
          *pbVar9 = *pbVar9 + (char)param_1;
        }
        if (*pbVar9 < bVar4) {
          if (*pcVar10 != '\x02') {
            if (iVar7 < 4) {
              iVar2 = -0x7ff92558;
              iVar3 = iVar7;
            }
            else {
              iVar3 = iVar7 + -4;
              iVar2 = -0x7ff92258;
            }
            iVar2 = iVar3 * uVar1 * 8 + iVar2;
            uVar6 = (uint)*pbVar9;
            if ((int)uVar6 < (int)(uVar1 - 1)) {
              Vec3ShortToInt(aiStack_68,iVar2 + (uVar6 + 1) * 8);
              Vec3ApplyRotationMatrix(&maybe_FlameMatrix,aiStack_68,aiStack_68);
              Vec3Add(aiStack_68,aiStack_68,&Vec3_800786c8);
              if (*pcVar10 == '\0') {
                Vec3Copy(&local_58.x,(int *)&spyro);
                *pcVar10 = '\x01';
              }
              else {
                Vec3Copy(&local_58.x,piVar5);
              }
              Vec3Copy(piVar5,aiStack_68);
              uVar8 = 0x10000;
              if (DAT_80078764 != 0) {
                uVar8 = 0x90000;
              }
              iVar3 = MobyCollisionRelated(aiStack_68,0xa0,0,uVar8,0,0);
              if ((iVar3 != 0) ||
                 (iVar3 = FindCollsionPolygonAltro(&local_58,aiStack_68), iVar3 != 0)) {
                *pcVar10 = '\x02';
                (&DAT_800786f0)[iVar7] = *pbVar9;
                local_58.x = -0x10;
                uVar1 = rand();
                local_58.y = (uVar1 & 0x1f) - 0x10;
                local_58.z = 0;
                Vec3ApplyRotationMatrix(&maybe_FlameMatrix,&local_58,&local_58);
                local_58.z = 0;
                (*ptr_OverlayCreateParticle)(1,1,aiStack_68,&local_58);
                if (DAT_80078764 == 0) {
                  (*ptr_OverlayCreateParticle)(4,0x4e,aiStack_68,0);
                }
                local_58.x = 0x30;
                local_58.y = 0;
                local_58.z = 0;
                Vec3ApplyLastLoadedRotationMatrix(&local_58,&local_58);
                (*ptr_OverlayCreateParticle)(DAT_80078764 * 5 + 5,0x4f,aiStack_68,&local_58);
                if (local_40 == 0) {
                  local_40 = 1;
                  PlaySoundEffect((uint)localSFXArray[0x28],(int *)&spyro,4,0);
                }
              }
            }
            else if ((uVar1 < uVar6) && ((int)uVar6 <= (int)(uVar1 + param_1))) {
              Vec3ShortToInt(aiStack_68,iVar2 + (uVar1 - 1) * 8);
              Vec3ApplyRotationMatrix(&maybe_FlameMatrix,aiStack_68,aiStack_68);
              Vec3Add(aiStack_68,aiStack_68,&Vec3_800786c8);
              Vec3Zero(&local_58);
              (*ptr_OverlayCreateParticle)(1,DAT_80078764 != 0,aiStack_68,&local_58);
              if (DAT_80078764 == 0) {
                (*ptr_OverlayCreateParticle)(4,0x4e,aiStack_68,0);
              }
              Vec3ApplyLastLoadedRotationMatrix(local_30 + -0x7ff91e28,&local_58);
              (*ptr_OverlayCreateParticle)(DAT_80078764 * 5 + 5,0x4f,aiStack_68,&local_58);
            }
          }
        }
        else {
          *pbVar9 = 0;
        }
      }
      pbVar9 = pbVar9 + 1;
      pcVar10 = pcVar10 + 1;
      piVar5 = piVar5 + 3;
      iVar7 = iVar7 + 1;
      local_30 = local_30 + 0xc;
    } while (iVar7 < 8);
    if (local_48 == 8) {
      DAT_80078760 = '\0';
    }
  }
  return;
}



void FUN_800495d8(char param_1)

{
  byte bVar1;
  
  spyro.maybe_animSpeedRelatedDupe1 = spyro.maybe_animSpeedRelatedDupe1 + param_1;
  if (0xf < (byte)spyro.maybe_animSpeedRelatedDupe1) {
    spyro.maybe_animSpeedRelatedDupe1 = spyro.maybe_animSpeedRelatedDupe1 - 0x10;
    bVar1 = spyro.maybe_keyframeDupe2 + 1;
    spyro.maybe_currentAnimDupe = spyro.maybe_nextAnimDupe;
    spyro.maybe_keyframeDupe1 = spyro.maybe_keyframeDupe2;
    spyro.maybe_keyframeDupe2 = bVar1;
    if ((byte)(&DAT_8006c4a2)[(uint)(byte)spyro.maybe_nextAnimDupe * 4] <= bVar1) {
      spyro.maybe_keyframeDupe2 = (&DAT_8006c4a2)[(uint)(byte)spyro.maybe_nextAnimDupe * 4] - 1;
    }
  }
  return;
}



void SpyroHeadAnimations(void)

{
  uint uVar1;
  
  if (spyro.maybe_headAnimRelated == 1) {
    spyro.maybe_animSpeedRelatedDupe1 = spyro.maybe_animSpeedRelatedDupe1 + 2;
  }
  else {
    if (spyro.maybe_headAnimRelated < 2) {
      if (spyro.maybe_headAnimRelated != 0) {
        return;
      }
      if (spyro.maybe_isFlaming == spyro.maybe_headAnimRelated2) {
        if (spyro.maybe_isFlaming == 0) {
          spyro.maybe_currentAnimDupe = spyro.currentAnim;
          spyro.maybe_nextAnimDupe = spyro.nextAnim;
          spyro.maybe_keyframeDupe1 = spyro.currentKeyfame;
          spyro.maybe_keyframeDupe2 = spyro.nextKeyframe;
          spyro.maybe_animSpeedRelatedDupe1 = spyro.maybe_AnimSpeedRelated;
          return;
        }
        FUN_800495d8(spyro.unkown_anim1);
        return;
      }
      uVar1 = (uint)(byte)(&DAT_80075264)[spyro.maybe_isFlaming + spyro.maybe_headAnimRelated2 * 2];
      if (uVar1 == 1) {
        spyro.maybe_currentAnimDupe = spyro.maybe_nextAnimDupe;
        spyro.maybe_nextAnimDupe = spyro.nextAnim;
        spyro.maybe_keyframeDupe1 = spyro.maybe_keyframeDupe2;
        spyro.maybe_keyframeDupe2 = spyro.nextKeyframe;
        spyro.maybe_animSpeedRelatedDupe1 = '\x02';
        spyro.maybe_headAnimRelated = uVar1;
        spyro.maybe_headAnimRelated2 = spyro.maybe_isFlaming;
        return;
      }
      if (uVar1 != 2) {
        return;
      }
      spyro.maybe_currentAnimDupe = spyro.maybe_nextAnimDupe;
      spyro.maybe_nextAnimDupe = (&DAT_80075268)[spyro.maybe_isFlaming];
      spyro.maybe_keyframeDupe1 = spyro.maybe_keyframeDupe2;
      spyro.maybe_keyframeDupe2 = '\0';
      spyro.maybe_animSpeedRelatedDupe1 = '\x04';
      spyro.maybe_headAnimRelated = uVar1;
      spyro.maybe_headAnimRelated2 = spyro.maybe_isFlaming;
      return;
    }
    if (spyro.maybe_headAnimRelated != 2) {
      return;
    }
    spyro.maybe_animSpeedRelatedDupe1 = spyro.maybe_animSpeedRelatedDupe1 + 4;
  }
  if (0xf < (byte)spyro.maybe_animSpeedRelatedDupe1) {
    FUN_800495d8(0);
    spyro.maybe_headAnimRelated = 0;
  }
  return;
}



void FUN_80049880(void)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = spyro.TargetHeadAngle._0_4_ - spyro.headAngle._0_4_ & 0xfff;
  iVar1 = uVar2 << 7;
  if (0x800 < uVar2) {
    iVar1 = (uVar2 - 0x1000) * 0x80;
  }
  uVar2 = spyro.TargetHeadAngle._4_4_ - spyro.headAngle._4_4_ & 0xfff;
  spyro.maybe_headRollTransitionSpeed =
       spyro.maybe_headRollTransitionSpeed +
       (iVar1 + spyro.maybe_headRollTransitionSpeed * -0x10 >> 6);
  spyro.headAngle._0_4_ = spyro.headAngle._0_4_ + (spyro.maybe_headRollTransitionSpeed >> 6);
  iVar1 = uVar2 << 7;
  if (0x800 < uVar2) {
    iVar1 = (uVar2 - 0x1000) * 0x80;
  }
  uVar2 = spyro.TargetHeadAngle._8_4_ - spyro.headAngle._8_4_ & 0xfff;
  spyro.maybe_headPitchTransitionSpeed =
       spyro.maybe_headPitchTransitionSpeed +
       (iVar1 + spyro.maybe_headPitchTransitionSpeed * -0x10 >> 6);
  spyro.headAngle._4_4_ = spyro.headAngle._4_4_ + (spyro.maybe_headPitchTransitionSpeed >> 6);
  if (0x800 < uVar2) {
    uVar2 = uVar2 - 0x1000;
  }
  spyro.unkown1._0_1_ = (char)((int)spyro.headAngle._0_4_ >> 4);
  spyro.unkown1._1_1_ = (char)((int)spyro.headAngle._4_4_ >> 4);
  spyro.maybe_headYawTransitionSpeed =
       spyro.maybe_headYawTransitionSpeed +
       ((int)(uVar2 * 0x80 + spyro.maybe_headYawTransitionSpeed * -0x10) >> 6);
  spyro.headAngle._8_4_ = spyro.headAngle._8_4_ + (spyro.maybe_headYawTransitionSpeed >> 6);
  spyro.unkown1._2_1_ = (char)((int)spyro.headAngle._8_4_ >> 4);
  return;
}



void Maybe_FlameRelated(void)

{
  int iVar1;
  undefined auStack_30 [16];
  undefined auStack_20 [16];
  
  if ((&DAT_8006c558)[(byte)(&DAT_8006c470)[spyro.state]] != '\0') {
    spyro.maybe_isFlaming = 0;
    Vec3Zero((Vec3 *)&spyro.TargetHeadAngle);
    goto LAB_80049ddc;
  }
  if (spyro.maybe_isFlaming == 0) {
    DAT_80078762 = 0;
    if (((currentButtonOneFrame & CIRCLE_BUTTON) != 0) && (DAT_80078760 == '\0')) {
      spyro.maybe_isFlaming = 1;
      spyro.maybe_flameChargeTimerRelated = -1;
      spyro.maybe_headAnimRelated = 0;
      spyro.unkown_anim1 = (int)(byte)(&DAT_8006c4a3)[(uint)DAT_80075269 * 4];
      DAT_80078760 = '\x01';
      DAT_80078761 = 0;
      DAT_80078762 = 1;
      iVar1 = rand();
      DAT_80078763 = (byte)iVar1 & 1;
      DAT_80078764 = (uint)(superFlameTimer != 0);
      memset(&DAT_800786e8,'\0',8);
LAB_80049dbc:
      Vec3Zero((Vec3 *)&spyro.TargetHeadAngle);
    }
  }
  else if (spyro.maybe_isFlaming == 1) {
    if (spyro.maybe_flameChargeTimerRelated == 0x10) {
      DAT_80078762 = 0;
    }
    if ((((spyro.maybe_flameChargeTimerRelated & 3U) == 0) &&
        (spyro.maybe_flameChargeTimerRelated - 0xcU < 0x11)) && (levelLoadState < 0)) {
      Vec3ApplyRotationMatrix(0x80078c20,&DAT_8006e238,auStack_30);
      Vec3Add(auStack_30,auStack_30,&spyro);
      Vec3ApplyLastLoadedRotationMatrix(&DAT_8006e250,auStack_20);
      (*ptr_OverlayCreateParticle)(1,DAT_80078764 != 0,auStack_30,auStack_20);
      Vec3ApplyRotationMatrix(0x80078c20,&DAT_8006e244,auStack_30);
      Vec3Add(auStack_30,auStack_30,&spyro);
      Vec3ApplyLastLoadedRotationMatrix(&DAT_8006e25c,auStack_20);
      (*ptr_OverlayCreateParticle)(1,DAT_80078764 != 0,auStack_30,auStack_20);
    }
    else if (((currentButtonOneFrame & CIRCLE_BUTTON) == 0) ||
            (spyro.maybe_flameChargeTimerRelated < 0x2c)) {
      if (0x2f < spyro.maybe_flameChargeTimerRelated) {
        DAT_80078760 = '\0';
        memset(&DAT_800786e8,'\0',8);
        spyro.maybe_isFlaming = 0;
        spyro.maybe_flameChargeTimerRelated = -1;
        spyro.unkown_anim1 = (int)(byte)(&DAT_8006c4a3)[(uint)DAT_80075268 * 4];
        goto LAB_80049dbc;
      }
    }
    else {
      spyro.maybe_flameChargeTimerRelated = -1;
      spyro.maybe_headAnimRelated = 2;
      spyro.maybe_animSpeedRelatedDupe1 = '\x04';
      spyro.maybe_keyframeDupe2 = '\0';
      DAT_80078760 = '\x01';
      DAT_80078761 = 0;
      DAT_80078762 = 1;
      iVar1 = rand();
      DAT_80078763 = (byte)iVar1 & 1;
      DAT_80078764 = (uint)(superFlameTimer != 0);
      memset(&DAT_800786e8,'\0',8);
    }
  }
  else if (maybe_cameraRelated != &DAT_80000009) goto LAB_80049dbc;
  spyro.maybe_flameChargeTimerRelated = spyro.maybe_flameChargeTimerRelated + 1;
LAB_80049ddc:
  FUN_80049880();
  return;
}



void FUN_80049dfc(char param_1)

{
  char cVar1;
  
  spyro.maybe_animSpeedRelatedDupe2 = spyro.maybe_animSpeedRelatedDupe2 + param_1;
  if (0xf < (byte)spyro.maybe_animSpeedRelatedDupe2) {
    spyro.maybe_animSpeedRelatedDupe2 = spyro.maybe_animSpeedRelatedDupe2 - 0x10;
    cVar1 = spyro.maybe_keyframeDupe4 + '\x01';
    spyro.maybe_currentAnimDupe2 = spyro.maybe_nextAnimDupe2;
    spyro.maybe_keyframeDupe3 = spyro.maybe_keyframeDupe4;
    spyro.maybe_keyframeDupe4 = cVar1;
    if (cVar1 == (&DAT_8006c4a1)[(uint)(byte)spyro.maybe_nextAnimDupe2 * 4]) {
      spyro.maybe_keyframeDupe4 = (&DAT_8006c4a0)[(uint)(byte)spyro.maybe_nextAnimDupe2 * 4];
    }
  }
  return;
}



void SpyroTailAnimations(void)

{
  if ((spyro.maybe_tailAnimRelated == 0) &&
     (spyro.maybe_tailRelated == spyro.maybe_tailAnimRelated2)) {
    if (spyro.maybe_tailRelated == 0) {
      spyro.maybe_currentAnimDupe2 = spyro.currentAnim;
      spyro.maybe_keyframeDupe3 = spyro.currentKeyfame;
      spyro.maybe_nextAnimDupe2 = spyro.nextAnim;
      spyro.maybe_keyframeDupe4 = spyro.nextKeyframe;
      spyro.maybe_animSpeedRelatedDupe2 = spyro.maybe_AnimSpeedRelated;
    }
    else {
      FUN_80049dfc(spyro.unkown13);
    }
  }
  return;
}



void FUN_80049f3c(void)

{
  if (((&DAT_8006c558)[(byte)spyro.currentAnim] == '\0') &&
     ((&DAT_8006c558)[(byte)spyro.nextAnim] == '\0')) {
    spyro.maybe_chargeTimerRelated = spyro.maybe_chargeTimerRelated + 1;
  }
  else {
    spyro.maybe_tailRelated = 0;
  }
  return;
}



void FUN_80049fac(int param_1)

{
  int iVar1;
  int local_20;
  undefined4 local_1c;
  int local_18;
  
  local_20 = 0;
  local_1c = 0;
  local_18 = -0x164;
  Vec3ApplyRotationMatrix(0x80078a8c,&local_20,&local_20);
  Vec3Add(&local_20,&local_20,&spyro);
  Vec3Copy(&DAT_8007aa20,&local_20);
  DAT_8007aa28 = spyro.unkown_heightRelated;
  if ((byte)spyro.unkown3 < 0x7f) {
    spyro.unkown3 = '\x05';
  }
  DAT_8007aa2c = 3;
  if (0x364 < spyro.position.z - spyro.unkown_heightRelated) {
    DAT_8007aa2c = 5;
  }
  DAT_8007aa34 = 0;
  if ((spyro.unkown_heightRelated <= *(int *)(&DAT_8006e9a4 + levelID_Indexer * 4)) ||
     (spyro.isOverGoop != 0)) {
    DAT_8007aa34 = 1;
  }
  DAT_8007aa30 = DAT_8007aa30 + 1 & 7;
  if (param_1 == 0) {
    *(undefined *)((int)&DAT_8007aa18 + DAT_8007aa30) = 0;
  }
  else {
    Vec3ApplyRotationMatrix(0x80078a8c,DAT_8007aa30 * 0xc + -0x7ff91d58,&local_20);
    Vec3Add(&local_20,&local_20,&spyro);
    local_18 = local_18 + 0x200;
    iVar1 = MobyUpdatePosition(&local_20,0x400);
    if ((local_18 - iVar1) - 0x180U < 0x100) {
      *(undefined *)((int)&DAT_8007aa18 + DAT_8007aa30) = 0;
      iVar1 = (DAT_8007aa28 - iVar1) * 0xc2;
      if (iVar1 < 0) {
        iVar1 = iVar1 + 0x1ff;
      }
      *(char *)((int)&DAT_8007aa10 + DAT_8007aa30) = (char)(iVar1 >> 9);
      return;
    }
    *(undefined *)((int)&DAT_8007aa18 + DAT_8007aa30) = 1;
  }
  *(undefined *)((int)&DAT_8007aa10 + DAT_8007aa30) = 0;
  return;
}



void SpyroUpdateAnimation(void)

{
  uint sfxID;
  uint sfxID_00;
  int iVar2;
  bool bVar1;
  
  if ((((spyro.maybe_weirdResearchThis & 0x2000U) != 0) || (spyro.autoFlameRelated != 0)) &&
     (spyro.isMovementLocked < 2)) {
    spyro.isMovementLocked = 2;
  }
  DAT_80075944 = '\0';
  if (spyro.isMovementLocked != 0) {
    FUN_80053708(&currentButtonOneFrame,&DAT_800776d8);
    spyro.isMovementLocked = spyro.isMovementLocked + -1;
  }
  FUN_80048b9c();
  if (spyro.state == 0x1d) {
    if (spyro.drownTimer < 1) {
      spyro.drownTimer = 1;
    }
  }
  else {
    spyro.drownTimer = 0;
  }
  if (((spyro.maybe_weirdResearchThis & 0x100U) == 0) && (spyro.autoFlameRelated == 0)) {
    SpyroMovement();
  }
  iVar2 = 0;
  if (0 < gameSpeedMultiplyer) {
    do {
      iVar2 = iVar2 + 1;
      SpyroBodyAnimations();
      Maybe_FlameRelated();
      SpyroHeadAnimations();
      FUN_80049f3c();
      SpyroTailAnimations();
    } while (iVar2 < gameSpeedMultiplyer);
  }
  spyro.RelativeSparxAngle.yaw = (char)(spyro.angle.roll >> 4);
  spyro.RelativeSparxAngle.pitch = (char)(spyro.angle.pitch >> 4);
  spyro.RelativeSparxAngle.roll = (char)(spyro.angle.yaw >> 4);
  UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
  UNK_MatrixOperation(0x80078a68,0x80078c20,0);
  MulMatrix0((MATRIX *)&spyro.unkown5,(MATRIX *)&spyro.maybe_smokeFlameStuff1,
             (MATRIX *)&spyro.maybe_smokeFlameStuff1);
  FUN_80049fac(1);
  FlameButAlsoNotFlame(gameSpeedMultiplyer);
  spyro.maybe_weirdDamageAnimRelated = 0;
  spyro.unkown4 = 0;
  if (spyro.health < 0) {
    if (spyro.state == 0x1e) {
      bVar1 = spyro.framesInCurrentState < 0x65;
    }
    else {
      if (spyro.state < 0x1f) {
        if ((spyro.state != 0x1d) || (spyro.drownTimer != 0x240)) goto LAB_8004a638;
        if (isInFlightLevel != 0) {
          (*DAT_80075694)();
          (*funcptr_OverlayUpdateMobys)();
          goto LAB_8004a638;
        }
        goto LAB_8004a4d8;
      }
      if (spyro.state != 0x1f) goto LAB_8004a638;
      bVar1 = spyro.framesInCurrentState < 0x7d;
    }
    if (bVar1) goto LAB_8004a638;
  }
  else if ((0x3ff < spyro.position.z) && ((spyro.state != 6 || (spyro.subState < 0x79)))) {
    if (spyro.position.z < *(int *)(&DAT_8006e9a4 + levelID_Indexer * 4)) {
      if ((spyro.state != 6) && (spyro.state != 0x10)) {
LAB_8004a5e0:
        SpyroMovement2(FLOP);
      }
    }
    else {
      if ((0x7ff < spyro.position.x) && (0x7ff < spyro.position.y)) goto LAB_8004a638;
      if ((spyro.state != 6) && (spyro.state != 0x10)) {
        Vec3Zero((Vec3 *)&spyro.unkown18);
        Vec3Zero((Vec3 *)&spyro.airMomentum);
        goto LAB_8004a5e0;
      }
    }
    if (spyro.subState == 0) {
      Vec3Copy((int *)&DAT_8006ebe4,&cameraPosition.x);
      FUN_80037714(&DAT_8006ebcc);
    }
    spyro.subState = spyro.subState + gameSpeedMultiplyer;
    goto LAB_8004a638;
  }
LAB_8004a4d8:
  ShouldDieOrGameover();
LAB_8004a638:
  iVar2 = (uint)(byte)spyro.currentAnim * 4 + DAT_80076378;
  sfxID = (uint)*(byte *)((uint)(byte)spyro.currentKeyfame * 4 + *(int *)(iVar2 + 0x38) + 0x27);
  if ((sfxID != 0xff) &&
     (DAT_80078cbc != *(int *)((uint)(byte)spyro.currentKeyfame * 4 + *(int *)(iVar2 + 0x38) + 0x24)
     )) {
    PlaySoundEffect(sfxID,(int *)&spyro,4,&DAT_80078cf8);
  }
  DAT_80078cbc = *(undefined4 *)
                  ((uint)(byte)spyro.currentKeyfame * 4 +
                   *(int *)((uint)(byte)spyro.currentAnim * 4 + DAT_80076378 + 0x38) + 0x24);
  iVar2 = (uint)(byte)spyro.maybe_currentAnimDupe * 4 + DAT_80076378;
  sfxID_00 = (uint)*(byte *)((uint)(byte)spyro.maybe_keyframeDupe1 * 4 + *(int *)(iVar2 + 0x38) +
                            0x27);
  if (((sfxID_00 != 0xff) && (sfxID != sfxID_00)) &&
     (DAT_80078cc0 !=
      *(int *)((uint)(byte)spyro.maybe_keyframeDupe1 * 4 + *(int *)(iVar2 + 0x38) + 0x24))) {
    PlaySoundEffect(sfxID_00,(int *)&spyro,4,&DAT_80078cf8);
  }
  DAT_80078cc0 = *(undefined4 *)
                  ((uint)(byte)spyro.maybe_keyframeDupe1 * 4 +
                   *(int *)((uint)(byte)spyro.maybe_currentAnimDupe * 4 + DAT_80076378 + 0x38) +
                  0x24);
  spyro.maybe_weirdResearchThis = spyro.maybe_weirdResearchThis & 0x7fffffff;
  if (DAT_80075944 != '\0') {
    FUN_80053708(&DAT_800776d8,&currentButtonOneFrame);
  }
  return;
}



void LevelTransitionAnim(void)

{
  int iVar1;
  
  DAT_80075944 = 0;
  FUN_80053708(&currentButtonOneFrame,&DAT_800776d8);
  if (spyro.state != 0xf) {
    SpyroMovement2(GLIDE);
  }
  spyro.subState = 8;
  if (spyro.isMovementLocked < 1) {
    spyro.isMovementLocked = 1;
  }
  Vec3Zero((Vec3 *)&spyro.unkown_angleRelated8);
  iVar1 = 0;
  if (0 < gameSpeedMultiplyer) {
    do {
      UpdateSpyroPosition(iVar1);
      iVar1 = iVar1 + 1;
    } while (iVar1 < gameSpeedMultiplyer);
  }
  Vec3ScaleDownByPowerOfTwo(&spyro.unkown_angleRelated8,6);
  Vec3Copy(&spyro.maybe_positionRelative.x,(int *)&spyro);
  Vec3Add(&spyro,&spyro,0x80078b58);
  iVar1 = 0;
  if (0 < gameSpeedMultiplyer) {
    do {
      iVar1 = iVar1 + 1;
      MaybeGeneralPitchRollCorrection();
    } while (iVar1 < gameSpeedMultiplyer);
  }
  iVar1 = 0;
  if (0 < gameSpeedMultiplyer) {
    do {
      iVar1 = iVar1 + 1;
      SpyroBodyAnimations();
      Maybe_FlameRelated();
      SpyroHeadAnimations();
      FUN_80049f3c();
      SpyroTailAnimations();
    } while (iVar1 < gameSpeedMultiplyer);
  }
  spyro.RelativeSparxAngle.yaw = (char)(spyro.angle.roll >> 4);
  spyro.RelativeSparxAngle.pitch = (char)(spyro.angle.pitch >> 4);
  spyro.RelativeSparxAngle.roll = (char)(spyro.angle.yaw >> 4);
  UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
  UNK_MatrixOperation(0x80078a68,0x80078c20,0);
  MulMatrix0((MATRIX *)&spyro.unkown5,(MATRIX *)&spyro.maybe_smokeFlameStuff1,
             (MATRIX *)&spyro.maybe_smokeFlameStuff1);
  spyro.maybe_weirdResearchThis = 0;
  FUN_80053708(&DAT_800776d8,&currentButtonOneFrame);
  return;
}



void FUN_8004aa0c(void)

{
  int iVar1;
  
  DAT_80075944 = 0;
  FUN_80053708(&currentButtonOneFrame,&DAT_800776d8);
  if (spyro.state == 0xf) {
    spyro.subState = 8;
  }
  if (spyro.isMovementLocked < 1) {
    spyro.isMovementLocked = 1;
  }
  Vec3Zero((Vec3 *)&spyro.unkown_angleRelated8);
  iVar1 = 0;
  if (0 < gameSpeedMultiplyer) {
    do {
      UpdateSpyroPosition(iVar1);
      iVar1 = iVar1 + 1;
    } while (iVar1 < gameSpeedMultiplyer);
  }
  Vec3ScaleDownByPowerOfTwo(&spyro.unkown_angleRelated8,6);
  Vec3Copy(&spyro.maybe_positionRelative.x,(int *)&spyro);
  Vec3Add(&spyro,&spyro,0x80078b58);
  iVar1 = 0;
  if (0 < gameSpeedMultiplyer) {
    do {
      iVar1 = iVar1 + 1;
      MaybeGeneralPitchRollCorrection();
    } while (iVar1 < gameSpeedMultiplyer);
  }
  iVar1 = 0;
  if (0 < gameSpeedMultiplyer) {
    do {
      iVar1 = iVar1 + 1;
      SpyroBodyAnimations();
      Maybe_FlameRelated();
      SpyroHeadAnimations();
      FUN_80049f3c();
      SpyroTailAnimations();
    } while (iVar1 < gameSpeedMultiplyer);
  }
  spyro.RelativeSparxAngle.yaw = (char)(spyro.angle.roll >> 4);
  spyro.RelativeSparxAngle.pitch = (char)(spyro.angle.pitch >> 4);
  spyro.RelativeSparxAngle.roll = (char)(spyro.angle.yaw >> 4);
  UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
  UNK_MatrixOperation(0x80078a68,0x80078c20,0);
  MulMatrix0((MATRIX *)&spyro.unkown5,(MATRIX *)&spyro.maybe_smokeFlameStuff1,
             (MATRIX *)&spyro.maybe_smokeFlameStuff1);
  spyro.maybe_weirdResearchThis = 0;
  FUN_80053708(&DAT_800776d8,&currentButtonOneFrame);
  return;
}



void Unk_UpdateSpyroAfterEvents(int param_1)

{
  int iVar1;
  int aiStack_28 [4];
  byte local_18;
  byte local_17;
  byte local_16;
  
  switch(spyro.state) {
  case 7:
    spyro.colorFilter = (u8RGBA)((uint)spyro.colorFilter & 0xffffff);
    break;
  case 0xb:
  case 0xf:
  case 0x20:
  case 0x2c:
    UNK_SuperchargeRelated(&spyro,2);
  }
  if (param_1 == 0) {
    DAT_80078ccc = 0xffffffff;
    spyro.colorFilter.R = '\0';
    spyro.colorFilter.G = '\0';
    spyro.colorFilter.B = '\0';
    spyro.colorFilter.opacity = '\0';
    spyro.maybe_weirdDamageAnimRelated = 0;
    spyro.unkown4 = 0;
    spyro.pad2 = 0;
    spyro.canSuperfly = 0;
    spyro.isOnSuperchargeGround = 0;
    spyro.maybe_pitchRelatedFlag = 0;
    spyro.drownTimer = 0;
    spyro.angle.roll = (uint)(byte)spyro.RelativeSparxAngle.yaw << 4;
    spyro.angle.pitch = (uint)(byte)spyro.RelativeSparxAngle.pitch << 4;
    spyro.angle.yaw = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
  }
  else {
    Vec3Copy(aiStack_28,(int *)&spyro);
    iVar1 = spyro.health;
    local_16 = spyro.RelativeSparxAngle.roll;
    local_18 = spyro.RelativeSparxAngle.yaw;
    local_17 = spyro.RelativeSparxAngle.pitch;
    memset((uchar *)&spyro,'\0',0x2a4);
    Vec3Copy((int *)&spyro,aiStack_28);
    spyro.unkown3 = '\x04';
    spyro.nextKeyframe = '\x01';
    DAT_80078ccc = 0xffffffff;
    spyro.RelativeSparxAngle.yaw = local_18;
    spyro.angle.roll = (uint)local_18 << 4;
    spyro.RelativeSparxAngle.pitch = local_17;
    spyro.angle.pitch = (uint)local_17 << 4;
    spyro.RelativeSparxAngle.roll = local_16;
    spyro.angle.yaw = (uint)local_16 << 4;
    spyro.health = iVar1;
    SpyroMovement2(IDLE_STANDING);
    DAT_80078cf8 = 0x3f;
  }
  spyro.maybe_superchargeRelated = 0xff;
  superFlameTimer = 0;
  return;
}



undefined8 FindCollsionPolygonAltro(uint *param_1,uint *param_2,undefined4 param_3,int *param_4)

{
  bool bVar1;
  undefined2 uVar2;
  float *pfVar3;
  int iVar4;
  float fVar5;
  undefined2 uVar6;
  undefined4 uVar7;
  int iVar8;
  float fVar9;
  uint in_v1;
  float fVar10;
  int iVar11;
  int iVar12;
  int *piVar13;
  undefined2 uVar14;
  int iVar15;
  uint uVar16;
  ushort *puVar17;
  int *piVar18;
  undefined2 uVar19;
  uint uVar20;
  ushort *puVar21;
  int iVar22;
  int iVar23;
  float fVar24;
  int iVar25;
  uint uVar26;
  uint *puVar27;
  int iVar28;
  uint uVar29;
  uint uVar30;
  int iVar31;
  uint uVar32;
  undefined4 unaff_s0;
  int iVar33;
  int iVar34;
  undefined4 unaff_s1;
  int iVar35;
  int iVar36;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined2 *puVar37;
  undefined4 unaff_s4;
  uint uVar38;
  undefined4 unaff_s5;
  uint uVar39;
  undefined4 unaff_s6;
  uint uVar40;
  undefined4 unaff_s7;
  uint uVar41;
  uint uVar42;
  uint uVar43;
  uint uVar44;
  undefined *puVar45;
  uint uVar46;
  int iVar47;
  ushort *puVar48;
  undefined *puVar49;
  undefined4 unaff_s8;
  short *psVar61;
  float *pfVar62;
  undefined4 unaff_retaddr;
  undefined4 *puVar63;
  undefined4 *puVar64;
  undefined auStackX_0 [16];
  undefined *puVar50;
  undefined *puVar51;
  undefined *puVar52;
  undefined *puVar53;
  undefined *puVar54;
  undefined *puVar55;
  undefined *puVar56;
  undefined *puVar57;
  undefined *puVar58;
  undefined *puVar59;
  undefined *puVar60;
  
  DAT_80077df8 = &DAT_80075264;
  uVar40 = param_1[2];
  uVar39 = param_1[1];
  uVar38 = *param_1;
  uVar44 = param_2[2];
  uVar43 = param_2[1];
  uVar41 = *param_2;
  uVar7 = 0;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  if (-1 < (int)(uVar38 | uVar39 | uVar40 | uVar41 | uVar43 | uVar44)) {
    pfVar3 = &FLOAT_1f800000;
    iVar8 = DAT_80075778 + 0x1000;
    iVar22 = (uVar38 >> 0xd) + (uVar39 >> 0xd) * 0x20;
    FLOAT_1f800000 = *(float *)(iVar22 * 4 + iVar8);
    if (FLOAT_1f800000 != 0.0) {
      pfVar3 = (float *)&DAT_1f800004;
    }
    iVar11 = -1;
    if ((uVar38 & 0x1000) != 0) {
      iVar11 = 1;
    }
    uVar26 = iVar22 + iVar11 & 0xfffffc00;
    if ((int)uVar26 < 1) {
      fVar24 = *(float *)((iVar22 + iVar11) * 4 + iVar8);
      uVar26 = uVar39 & 0x1000;
      *pfVar3 = fVar24;
      if (fVar24 != 0.0) {
        pfVar3 = pfVar3 + 1;
      }
    }
    iVar15 = -0x20;
    if (uVar26 != 0) {
      iVar15 = 0x20;
    }
    if (((int)(iVar22 + iVar15 & 0xfffffc00U) < 1) &&
       (fVar24 = *(float *)((iVar22 + iVar15) * 4 + iVar8), *pfVar3 = fVar24, fVar24 != 0.0)) {
      pfVar3 = pfVar3 + 1;
    }
    uVar26 = iVar22 + iVar11 + iVar15;
    if (((int)(uVar26 & 0xfffffc00) < 1) &&
       (fVar24 = *(float *)(uVar26 * 4 + iVar8), *pfVar3 = fVar24, fVar24 != 0.0)) {
      pfVar3 = pfVar3 + 1;
    }
    puVar37 = (undefined2 *)0x1f800000;
    *pfVar3 = 0.0;
    if (pfVar3 != &FLOAT_1f800000) {
      DAT_1f800030 = uVar38;
      DAT_1f800034 = uVar41;
      if (0 < (int)(uVar38 - uVar41)) {
        DAT_1f800030 = uVar41;
        DAT_1f800034 = uVar38;
      }
      DAT_1f800038 = uVar39;
      DAT_1f80003c = uVar43;
      if (0 < (int)(uVar39 - uVar43)) {
        DAT_1f800038 = uVar43;
        DAT_1f80003c = uVar39;
      }
      DAT_1f800040 = uVar40;
      DAT_1f800044 = uVar44;
      if (0 < (int)(uVar40 - uVar44)) {
        DAT_1f800040 = uVar44;
        DAT_1f800044 = uVar40;
      }
      uVar41 = uVar41 - uVar38;
      iVar8 = uVar43 - uVar39;
      fVar24 = (float)(uVar44 - uVar40);
      DAT_1f800054 = 0x40000000;
      pfVar3 = &FLOAT_1f800000;
      puVar37 = &DAT_1f800080;
      uVar43 = uVar41;
      if ((int)uVar41 < 0) {
        uVar43 = -uVar41;
      }
      iVar11 = iVar8;
      if (iVar8 < 0) {
        iVar11 = -iVar8;
      }
      fVar10 = fVar24;
      if ((int)fVar24 < 0) {
        fVar10 = (float)-(int)fVar24;
      }
      DAT_1f80005c = uVar43 + iVar11 + (int)fVar10;
      while( true ) {
        fVar5 = *pfVar3;
        pfVar62 = pfVar3 + -1;
        pfVar3 = pfVar3 + 1;
        if (fVar5 == 0.0) break;
        while( true ) {
          pfVar62 = (float *)pfVar62[1];
          fVar5 = pfVar62[3];
          if (pfVar62 == (float *)0x0) break;
          fVar9 = pfVar62[4];
          fVar10 = pfVar62[5];
          iVar11 = (int)fVar10 - uVar40;
          gte_ldsv_((int)fVar5 - uVar38,(int)fVar9 - uVar39,iVar11);
          gte_sqr0_b(0);
          puVar48 = (ushort *)((uint)(undefined *)pfVar62[2] | 0x80000000);
          if ((undefined *)pfVar62[2] != (undefined *)0x0) {
            read_mt(iVar11,param_4,iVar22);
            if ((int)((int)param_4 +
                     ((iVar22 + iVar11) -
                     ((uint)*puVar48 + DAT_1f80005c) * ((uint)*puVar48 + DAT_1f80005c))) < 0) {
              gte_ldR11R12(pfVar62[8]);
              gte_ldR13R21(pfVar62[9]);
              gte_ldR22R23(pfVar62[10]);
              gte_ldR31R32(pfVar62[0xb]);
              gte_ldR33(pfVar62[0xc]);
              gte_ldtr(0,0,0);
              iVar22 = *(int *)((uint)*(byte *)(pfVar62 + 0xf) * 4 +
                                (&DAT_80076378)[*(ushort *)((int)pfVar62 + 0x36)] + 0x38);
              uVar43 = (uint)*(byte *)(iVar22 + 5);
              piVar18 = (int *)(*(uint *)(iVar22 + (uint)*(byte *)((int)pfVar62 + 0x3e) * 8 + 0x24)
                                & 0x1fffff | 0x80000000);
              piVar13 = piVar18 + puVar48[1] + 1;
              param_4 = (int *)&DAT_1f800070;
              do {
                gte_rtps_b();
                iVar22 = *piVar18;
                piVar18 = piVar18 + 1;
                gte_ldVZ0((iVar22 >> 0x15) << (uVar43 & 0x1f));
                gte_ldVXY0((((iVar22 << 10) >> 0x15) << (uVar43 & 0x1f)) +
                           (((iVar22 << 0x14) >> 0x13) << (uVar43 & 0x1f)) * 0x10000);
                iVar22 = gte_stIR3();
                iVar11 = gte_stIR1();
                iVar15 = gte_stIR2();
                iVar22 = iVar22 + (int)fVar5;
                *param_4 = iVar22;
                param_4[1] = (int)fVar9 - iVar11;
                param_4[2] = (int)fVar10 - iVar15;
                param_4 = param_4 + 4;
                puVar17 = puVar48 + 2;
              } while (piVar18 != piVar13);
              while( true ) {
                uVar46 = *(uint *)puVar17;
                puVar49 = (undefined *)((int)puVar17 + 4);
                puVar50 = (undefined *)((int)puVar17 + 4);
                puVar51 = (undefined *)((int)puVar17 + 4);
                puVar52 = (undefined *)((int)puVar17 + 4);
                puVar53 = (undefined *)((int)puVar17 + 4);
                puVar54 = (undefined *)((int)puVar17 + 4);
                puVar55 = (undefined *)((int)puVar17 + 4);
                puVar56 = (undefined *)((int)puVar17 + 4);
                puVar57 = (undefined *)((int)puVar17 + 4);
                puVar58 = (undefined *)((int)puVar17 + 4);
                puVar59 = (undefined *)((int)puVar17 + 4);
                puVar60 = (undefined *)((int)puVar17 + 4);
                if ((int)uVar46 < 0) break;
                uVar43 = uVar46 >> 0x14 & 0x3f0;
                iVar25 = *(int *)((int)&DAT_1f800080 + uVar43);
                iVar31 = *(int *)((int)&DAT_1f800084 + uVar43);
                iVar35 = *(int *)((int)&DAT_1f800088 + uVar43);
                uVar43 = uVar46 >> 0xc & 0x3f0;
                iVar4 = *(int *)((int)&DAT_1f800080 + uVar43);
                iVar12 = *(int *)((int)&DAT_1f800084 + uVar43);
                iVar23 = *(int *)((int)&DAT_1f800088 + uVar43);
                uVar43 = uVar46 >> 4 & 0x3f0;
                iVar11 = *(int *)((int)&DAT_1f800080 + uVar43);
                iVar15 = *(int *)((int)&DAT_1f800084 + uVar43);
                fVar10 = *(float *)((int)&DAT_1f800088 + uVar43);
                puVar17 = (ushort *)((int)puVar17 + 4);
                if ((((-1 < (int)(iVar11 - DAT_1f800030 & iVar4 - DAT_1f800030 &
                                 iVar25 - DAT_1f800030)) &&
                     (puVar17 = (ushort *)puVar49,
                     -1 < (int)(DAT_1f800034 - iVar11 & DAT_1f800034 - iVar4 & DAT_1f800034 - iVar25
                               ))) &&
                    (puVar17 = (ushort *)puVar50,
                    -1 < (int)(iVar15 - DAT_1f800038 & iVar12 - DAT_1f800038 & iVar31 - DAT_1f800038
                              ))) &&
                   ((puVar17 = (ushort *)puVar51,
                    -1 < (int)(DAT_1f80003c - iVar15 & DAT_1f80003c - iVar12 & DAT_1f80003c - iVar31
                              ) &&
                    (puVar17 = (ushort *)puVar52,
                    -1 < (int)((int)fVar10 - DAT_1f800040 & iVar23 - DAT_1f800040 &
                              iVar35 - DAT_1f800040))))) {
                  uVar43 = DAT_1f800044 - iVar35;
                  iVar11 = iVar11 - iVar25;
                  puVar17 = (ushort *)puVar53;
                  if (-1 < (int)(DAT_1f800044 - (int)fVar10 & DAT_1f800044 - iVar23 & uVar43)) {
                    iVar15 = iVar15 - iVar31;
                    fVar10 = (float)((int)fVar10 - iVar35);
                    iVar4 = iVar4 - iVar25;
                    iVar12 = iVar12 - iVar31;
                    iVar23 = iVar23 - iVar35;
                    gte_ldsv_(iVar4,iVar12,iVar23);
                    gte_ldR11R12(iVar11);
                    gte_ldR22R23(iVar15);
                    gte_ldR33(fVar10);
                    param_4 = (int *)(uVar38 - iVar25);
                    iVar22 = uVar39 - iVar31;
                    gte_op0_b(0);
                    iVar33 = uVar40 - iVar35;
                    gte_ldR11R12(iVar22 * 0x10000 + ((uint)param_4 & 0xffff));
                    gte_ldR13R21(iVar33);
                    uVar16 = (int)param_4 + uVar41 & 0xffff;
                    iVar28 = (iVar22 + iVar8) * 0x10000 + uVar16;
                    gte_ldR31R32(iVar28);
                    gte_ldR33(iVar33 + (int)fVar24);
                    read_mt(iVar28,uVar16,uVar43);
                    uVar26 = iVar28 >> 10;
                    uVar16 = (int)uVar16 >> 10;
                    uVar43 = (int)uVar43 >> 10;
                    gte_ldsv_(uVar26,uVar16,uVar43);
                    gte_rtir_sf0_b();
                    iVar28 = gte_stMAC3();
                    iVar36 = gte_stMAC1();
                    uVar44 = uVar41 & 0xffff;
                    puVar17 = (ushort *)puVar54;
                    DAT_1f800048 = iVar25;
                    DAT_1f80004c = iVar31;
                    DAT_1f800050 = iVar35;
                    if ((iVar28 < 0) && (puVar17 = (ushort *)puVar55, -1 < iVar36)) {
                      gte_ldsv_(uVar26,uVar16,uVar43);
                      gte_ldR11R12(iVar22 * 0x10000 + ((uint)param_4 & 0xffff));
                      gte_ldR13R21(iVar33);
                      gte_ldR31R32(iVar8 * 0x10000 + uVar44);
                      gte_ldR33(fVar24);
                      gte_rtir_sf0();
                      iVar34 = gte_stMAC1();
                      iVar36 = gte_stMAC3();
                      gte_ldLZCS(iVar34);
                      iVar28 = gte_stLZCR();
                      uVar42 = iVar28 - 0xe;
                      uVar20 = -uVar42;
                      if ((int)uVar42 < 0) {
                        iVar36 = iVar36 >> (uVar20 & 0x1f);
                      }
                      else {
                        iVar36 = iVar36 << (uVar42 & 0x1f);
                      }
                      iVar36 = (iVar34 << (iVar28 - 2U & 0x1f)) / iVar36;
                      gte_ldMAC1(0);
                      gte_ldMAC2(0);
                      gte_ldMAC3(0);
                      gte_ldsv_(uVar41,iVar8,fVar24);
                      gte_ldIR0(iVar36);
                      gte_gpl0();
                      read_mt(iVar36,uVar20,uVar44);
                      iVar36 = iVar36 >> 0xc;
                      iVar28 = (int)uVar20 >> 0xc;
                      iVar34 = (int)uVar44 >> 0xc;
                      gte_ldsv_(iVar36,iVar28,iVar34);
                      param_4 = (int *)((int)param_4 - iVar36);
                      iVar22 = iVar22 - iVar28;
                      gte_sqr0_b(0);
                      iVar33 = iVar33 - iVar34;
                      read_mt(iVar36,iVar28,iVar34);
                      DAT_1f800058 = iVar36 + iVar28 + iVar34;
                      puVar17 = (ushort *)puVar56;
                      if (DAT_1f800058 - DAT_1f800054 < 0) {
                        bVar1 = (int)(uVar26 + uVar16 ^ uVar26 - uVar16) < 0;
                        uVar44 = uVar26;
                        if (bVar1) {
                          uVar44 = uVar16;
                        }
                        if ((int)(uVar44 + uVar43 ^ uVar44 - uVar43) < 0) {
                          uVar44 = uVar43;
                        }
                        gte_ldsv_(iVar11,iVar15,fVar10);
                        gte_ldR11R12(param_4);
                        gte_ldR22R23(iVar22);
                        gte_ldR33(iVar33);
                        gte_op0_b(0);
                        switch(bVar1) {
                        case false:
                          uVar20 = gte_stMAC1();
                          break;
                        case true:
                          uVar20 = gte_stMAC2();
                          break;
                        default:
                          uVar20 = gte_stMAC3();
                        }
                        if ((uVar20 == 0) ||
                           (puVar17 = (ushort *)puVar57, (int)(uVar20 ^ uVar44) < 0)) {
                          gte_ldsv_(param_4,iVar22,iVar33);
                          gte_ldR11R12(iVar4);
                          gte_ldR22R23(iVar12);
                          gte_ldR33(iVar23);
                          gte_op0_b(0);
                          switch(bVar1) {
                          case false:
                            uVar20 = gte_stMAC1();
                            break;
                          case true:
                            uVar20 = gte_stMAC2();
                            break;
                          default:
                            uVar20 = gte_stMAC3();
                          }
                          if ((uVar20 == 0) ||
                             (puVar17 = (ushort *)puVar58, (int)(uVar20 ^ uVar44) < 0)) {
                            iVar23 = iVar23 - (int)fVar10;
                            fVar10 = (float)(iVar33 - (int)fVar10);
                            gte_ldsv_(iVar4 - iVar11,iVar12 - iVar15,iVar23);
                            gte_ldR11R12((int)param_4 - iVar11);
                            gte_ldR22R23(iVar22 - iVar15);
                            gte_ldR33(fVar10);
                            gte_op0_b(0);
                            switch(bVar1) {
                            case false:
                              uVar20 = gte_stMAC1();
                              break;
                            case true:
                              uVar20 = gte_stMAC2();
                              break;
                            default:
                              uVar20 = gte_stMAC3();
                            }
                            if ((uVar20 == 0) ||
                               (puVar17 = (ushort *)puVar59, (int)(uVar20 ^ uVar44) < 0)) {
                              unknownPositionVector.x = iVar25 + (int)param_4;
                              unknownPositionVector.y = iVar31 + iVar22;
                              fVar10 = (float)(iVar35 + iVar33);
                              DAT_80075808 = (undefined *)0xffffffff;
                              puVar17 = (ushort *)puVar60;
                              DAT_1f800054 = DAT_1f800058;
                              DAT_800757e4 = pfVar62;
                              unknownPositionVector.z = (int)fVar10;
                              unknownVector.x = uVar26;
                              unknownVector.y = uVar16;
                              unknownVector.z = uVar43;
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
      if (DAT_1f800054 != 0x40000000) {
        return CONCAT44(fVar10,1);
      }
      uVar41 = uVar41 + uVar38;
      uVar43 = iVar8 + uVar39;
      uVar44 = (int)fVar24 + uVar40;
    }
    uVar26 = uVar38;
    uVar16 = uVar41;
    if (0 < (int)(uVar38 - uVar41)) {
      uVar26 = uVar41;
      uVar16 = uVar38;
    }
    iVar8 = (uVar16 >> 4) + 1;
    *(uint *)(puVar37 + 0x18) = iVar8 - (uVar26 >> 4);
    *(int *)(puVar37 + 0x1a) = iVar8;
    uVar26 = uVar39;
    uVar16 = uVar43;
    if (0 < (int)(uVar39 - uVar43)) {
      uVar26 = uVar43;
      uVar16 = uVar39;
    }
    iVar8 = (uVar16 >> 4) + 1;
    *(uint *)(puVar37 + 0x1c) = iVar8 - (uVar26 >> 4);
    *(int *)(puVar37 + 0x1e) = iVar8;
    uVar26 = uVar40;
    uVar16 = uVar44;
    if (0 < (int)(uVar40 - uVar44)) {
      uVar26 = uVar44;
      uVar16 = uVar40;
    }
    iVar8 = (uVar16 >> 4) + 1;
    *(uint *)(puVar37 + 0x20) = iVar8 - (uVar26 >> 4);
    *(int *)(puVar37 + 0x22) = iVar8;
    *(undefined4 *)(puVar37 + 0x2a) = 0x40000000;
    uVar26 = uVar39 >> 0xc;
    in_v1 = uVar40 >> 0xc;
    uVar16 = uVar43 >> 0xc;
    uVar20 = uVar44 >> 0xc;
    iVar47 = *(int *)(DAT_800785d4 + 0x10);
    uVar42 = uVar41 - uVar38;
    iVar8 = uVar43 - uVar39;
    iVar22 = uVar44 - uVar40;
    uVar2 = (undefined2)(uVar38 >> 0xc);
    uVar6 = (undefined2)uVar26;
    FLOAT_1f800000 = (float)CONCAT22(uVar6,uVar2);
    DAT_1f800004 = (undefined2)in_v1;
    uVar19 = (undefined2)uVar20;
    uVar14 = (undefined2)uVar16;
    if (uVar38 >> 0xc == uVar41 >> 0xc) {
      if (uVar26 == uVar16) {
        if (in_v1 == uVar20) {
          puVar64 = (undefined4 *)&DAT_1f800006;
        }
        else {
          puVar64 = (undefined4 *)&DAT_1f80000c;
          DAT_1f800006 = uVar2;
          DAT_1f800008 = uVar6;
          DAT_1f80000a = uVar19;
        }
      }
      else {
        DAT_1f800008 = uVar14;
        if (in_v1 == uVar20) {
          puVar64 = (undefined4 *)&DAT_1f80000c;
          DAT_1f800006 = uVar2;
          DAT_1f80000a = DAT_1f800004;
        }
        else {
          puVar64 = (undefined4 *)&DAT_1f800018;
          DAT_1f800006 = uVar2;
          DAT_1f80000a = DAT_1f800004;
          DAT_1f80000c = uVar2;
          DAT_1f80000e = uVar6;
          DAT_1f800010 = uVar19;
          DAT_1f800012 = uVar2;
          DAT_1f800014 = uVar14;
          DAT_1f800016 = uVar19;
        }
      }
    }
    else {
      DAT_1f800006 = (undefined2)(uVar41 >> 0xc);
      if (uVar26 == uVar16) {
        if (in_v1 == uVar20) {
          puVar64 = (undefined4 *)&DAT_1f80000c;
          DAT_1f800008 = uVar6;
          DAT_1f80000a = DAT_1f800004;
        }
        else {
          puVar64 = (undefined4 *)&DAT_1f800018;
          DAT_1f800008 = uVar6;
          DAT_1f80000a = DAT_1f800004;
          DAT_1f80000c = uVar2;
          DAT_1f80000e = uVar6;
          DAT_1f800010 = uVar19;
          DAT_1f800012 = DAT_1f800006;
          DAT_1f800014 = uVar6;
          DAT_1f800016 = uVar19;
        }
      }
      else {
        DAT_1f80000e = uVar14;
        if (in_v1 == uVar20) {
          puVar64 = (undefined4 *)&DAT_1f800018;
          DAT_1f800008 = uVar6;
          DAT_1f80000a = DAT_1f800004;
          DAT_1f80000c = uVar2;
          DAT_1f800010 = DAT_1f800004;
          DAT_1f800012 = DAT_1f800006;
          DAT_1f800014 = uVar14;
          DAT_1f800016 = DAT_1f800004;
        }
        else {
          puVar64 = &DAT_1f800030;
          DAT_1f800008 = uVar6;
          DAT_1f80000a = DAT_1f800004;
          DAT_1f80000c = uVar2;
          DAT_1f800010 = DAT_1f800004;
          DAT_1f800012 = DAT_1f800006;
          DAT_1f800014 = uVar14;
          DAT_1f800016 = DAT_1f800004;
          DAT_1f800018 = uVar2;
          DAT_1f80001a = uVar6;
          DAT_1f80001c = uVar19;
          DAT_1f80001e = uVar2;
          DAT_1f800020 = uVar14;
          DAT_1f800022 = uVar19;
          DAT_1f800024 = DAT_1f800006;
          DAT_1f800026 = uVar6;
          DAT_1f800028 = uVar19;
          DAT_1f80002a = DAT_1f800006;
          DAT_1f80002c = uVar14;
          DAT_1f80002e = uVar19;
        }
      }
    }
    while (puVar63 = puVar64, puVar64 = (undefined4 *)((int)puVar63 + -6), 0 < (int)puVar63 << 0x10)
    {
      iVar11 = (int)*(short *)((int)puVar63 + -2);
      if (-1 < iVar11) {
        puVar17 = *(ushort **)(DAT_800785d4 + 8);
        in_v1 = (uint)*puVar17 - iVar11;
        puVar21 = (ushort *)((uint)puVar17[iVar11 + 1] + (int)puVar17);
        if ((puVar17[iVar11 + 1] != 0xffff) &&
           (iVar11 = (int)*(short *)(puVar63 + -1), 0 < (int)in_v1)) {
          in_v1 = (uint)*puVar21;
          if (-1 < iVar11) {
            uVar41 = (uint)puVar21[iVar11 + 1];
            in_v1 = in_v1 - iVar11;
            puVar17 = (ushort *)(uVar41 + (int)puVar17);
            if ((uVar41 != 0xffff) && (iVar11 = (int)*(short *)puVar64, 0 < (int)in_v1)) {
              in_v1 = (uint)*puVar17;
              if (-1 < iVar11) {
                uVar41 = (uint)puVar17[iVar11 + 1];
                in_v1 = in_v1 - iVar11;
                if ((0 < (int)in_v1) && (uVar41 != 0xffff)) {
                  psVar61 = (short *)(*(int *)(DAT_800785d4 + 0xc) + uVar41 * 2);
                  puVar45 = (undefined *)((int)*psVar61 & 0x7fff);
                  while (psVar61 = psVar61 + 1, -1 < (int)puVar45) {
                    puVar27 = (uint *)((int)puVar45 * 0xc + iVar47);
                    uVar44 = puVar27[2];
                    uVar43 = uVar44 & 0x3fff;
                    uVar41 = uVar44 >> 0x18;
                    in_v1 = uVar41;
                    if ((int)(uVar43 - *(int *)(puVar37 + 0x22)) < 1) {
                      uVar26 = uVar44 >> 0x10 & 0xff;
                      iVar11 = (uVar43 - *(int *)(puVar37 + 0x22)) + *(int *)(puVar37 + 0x20);
                      if (-1 < (int)(iVar11 + uVar26 & iVar11 + uVar41)) {
                        uVar16 = puVar27[1];
                        iVar11 = (int)uVar16 >> 0x17;
                        iVar15 = (int)(uVar16 << 9) >> 0x17;
                        uVar16 = uVar16 & 0x3fff;
                        uVar20 = uVar16 - *(int *)(puVar37 + 0x1e);
                        uVar29 = uVar20 + *(int *)(puVar37 + 0x1c);
                        if (((int)(uVar20 | uVar20 + iVar15 | uVar20 + iVar11) < 1) &&
                           (-1 < (int)(uVar29 & uVar29 + iVar15 & uVar29 + iVar11))) {
                          uVar20 = *puVar27;
                          iVar4 = (int)uVar20 >> 0x17;
                          iVar12 = (int)(uVar20 << 9) >> 0x17;
                          uVar20 = uVar20 & 0x3fff;
                          uVar29 = uVar20 - *(int *)(puVar37 + 0x1a);
                          uVar30 = uVar29 + *(int *)(puVar37 + 0x18);
                          if ((int)(uVar29 | uVar29 + iVar12 | uVar29 + iVar4) < 1) {
                            uVar29 = uVar30 + iVar4;
                            if ((-1 < (int)(uVar30 & uVar30 + iVar12 & uVar29)) &&
                               ((uVar44 & 0x4000) == 0)) {
                              gte_ldsv_(iVar12,iVar15,uVar26);
                              gte_ldR11R12(iVar4);
                              gte_ldR22R23(iVar11);
                              gte_ldR33(uVar41);
                              uVar44 = uVar38 + uVar20 * -0x10;
                              iVar23 = uVar39 + uVar16 * -0x10;
                              gte_op0_b(0);
                              iVar25 = uVar40 + uVar43 * -0x10;
                              gte_ldR11R12(iVar23 * 0x10000 + (uVar44 & 0xffff));
                              gte_ldR13R21(iVar25);
                              uVar32 = uVar44 + uVar42 & 0xffff;
                              iVar31 = (iVar23 + iVar8) * 0x10000 + uVar32;
                              gte_ldR31R32(iVar31);
                              gte_ldR33(iVar25 + iVar22);
                              read_mt(iVar31,uVar32,uVar29);
                              uVar30 = iVar31 >> 2;
                              uVar32 = (int)uVar32 >> 2;
                              uVar29 = (int)uVar29 >> 2;
                              gte_ldsv_(uVar30,uVar32,uVar29);
                              *(uint *)(puVar37 + 0x24) = uVar20 * 0x10;
                              *(uint *)(puVar37 + 0x26) = uVar16 * 0x10;
                              gte_rtir_sf0_b();
                              *(uint *)(puVar37 + 0x28) = uVar43 * 0x10;
                              iVar31 = gte_stMAC3();
                              iVar35 = gte_stMAC1();
                              uVar43 = uVar42 & 0xffff;
                              if ((iVar31 < 0) && (-1 < iVar35)) {
                                gte_ldsv_(uVar30,uVar32,uVar29);
                                gte_ldR11R12(iVar23 * 0x10000 + (uVar44 & 0xffff));
                                gte_ldR13R21(iVar25);
                                gte_ldR31R32(iVar8 * 0x10000 + uVar43);
                                gte_ldR33(iVar22);
                                gte_rtir_sf0();
                                iVar33 = gte_stMAC1();
                                iVar35 = gte_stMAC3();
                                gte_ldLZCS(iVar33);
                                iVar31 = gte_stLZCR();
                                uVar20 = iVar31 - 0xe;
                                uVar16 = -uVar20;
                                if ((int)uVar20 < 0) {
                                  iVar35 = iVar35 >> (uVar16 & 0x1f);
                                }
                                else {
                                  iVar35 = iVar35 << (uVar20 & 0x1f);
                                }
                                iVar35 = (iVar33 << (iVar31 - 2U & 0x1f)) / iVar35;
                                in_v1 = uVar41 * 0x10;
                                gte_ldMAC1(0);
                                gte_ldMAC2(0);
                                gte_ldMAC3(0);
                                gte_ldsv_(uVar42,iVar8,iVar22);
                                gte_ldIR0(iVar35);
                                gte_gpl0();
                                read_mt(iVar35,uVar16,uVar43);
                                iVar35 = iVar35 >> 0xc;
                                iVar28 = (int)uVar16 >> 0xc;
                                iVar33 = (int)uVar43 >> 0xc;
                                gte_ldsv_(iVar35,iVar28,iVar33);
                                iVar31 = uVar44 - iVar35;
                                iVar23 = iVar23 - iVar28;
                                gte_sqr0_b(0);
                                iVar25 = iVar25 - iVar33;
                                read_mt(iVar35,iVar28,iVar33);
                                iVar33 = iVar35 + iVar28 + iVar33;
                                *(int *)(puVar37 + 0x2c) = iVar33;
                                if (iVar33 - *(int *)(puVar37 + 0x2a) < 0) {
                                  bVar1 = (int)(uVar30 + uVar32 ^ uVar30 - uVar32) < 0;
                                  uVar43 = uVar30;
                                  if (bVar1) {
                                    uVar43 = uVar32;
                                  }
                                  if ((int)(uVar43 + uVar29 ^ uVar43 - uVar29) < 0) {
                                    uVar43 = uVar29;
                                  }
                                  gte_ldsv_(iVar4 * 0x10,iVar11 * 0x10,in_v1);
                                  gte_ldR11R12(iVar31);
                                  gte_ldR22R23(iVar23);
                                  gte_ldR33(iVar25);
                                  gte_op0_b(0);
                                  switch(bVar1) {
                                  case false:
                                    uVar44 = gte_stMAC1();
                                    break;
                                  case true:
                                    uVar44 = gte_stMAC2();
                                    break;
                                  default:
                                    uVar44 = gte_stMAC3();
                                  }
                                  if ((uVar44 == 0) || ((int)(uVar44 ^ uVar43) < 0)) {
                                    gte_ldsv_(iVar31,iVar23,iVar25);
                                    gte_ldR11R12(iVar12 * 0x10);
                                    gte_ldR22R23(iVar15 * 0x10);
                                    gte_ldR33(uVar26 * 0x10);
                                    gte_op0_b(0);
                                    switch(bVar1) {
                                    case false:
                                      uVar44 = gte_stMAC1();
                                      break;
                                    case true:
                                      uVar44 = gte_stMAC2();
                                      break;
                                    default:
                                      uVar44 = gte_stMAC3();
                                    }
                                    if ((uVar44 == 0) || ((int)(uVar44 ^ uVar43) < 0)) {
                                      in_v1 = iVar25 + uVar41 * -0x10;
                                      gte_ldsv_(iVar12 * 0x10 + iVar4 * -0x10,
                                                iVar15 * 0x10 + iVar11 * -0x10,
                                                uVar26 * 0x10 + uVar41 * -0x10);
                                      gte_ldR11R12(iVar31 + iVar4 * -0x10);
                                      gte_ldR22R23(iVar23 + iVar11 * -0x10);
                                      gte_ldR33(in_v1);
                                      gte_op0_b(0);
                                      switch(bVar1) {
                                      case false:
                                        uVar41 = gte_stMAC1();
                                        break;
                                      case true:
                                        uVar41 = gte_stMAC2();
                                        break;
                                      default:
                                        uVar41 = gte_stMAC3();
                                      }
                                      if ((uVar41 == 0) || ((int)(uVar41 ^ uVar43) < 0)) {
                                        unknownPositionVector.x = *(int *)(puVar37 + 0x24) + iVar31;
                                        unknownPositionVector.y = *(int *)(puVar37 + 0x26) + iVar23;
                                        in_v1 = *(int *)(puVar37 + 0x28) + iVar25;
                                        DAT_800757e4 = (float *)0x0;
                                        DAT_80075808 = puVar45;
                                        unknownPositionVector.z = in_v1;
                                        unknownVector.x = uVar30;
                                        unknownVector.y = uVar32;
                                        unknownVector.z = uVar29;
                                        *(undefined4 *)(puVar37 + 0x2a) =
                                             *(undefined4 *)(puVar37 + 0x2c);
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                    puVar45 = (undefined *)(int)*psVar61;
                  }
                }
              }
            }
          }
        }
      }
    }
    uVar7 = 0;
    if (*(int *)(puVar37 + 0x2a) != 0x40000000) {
      uVar7 = 1;
    }
  }
  return CONCAT44(in_v1,uVar7);
}



// WARNING: Instruction at (ram,0x8004c9e8) overlaps instruction at (ram,0x8004c9e4)
// 

undefined4 FUN_8004be4c(uint *param_1,uint param_2,uint param_3,int *param_4)

{
  bool bVar1;
  undefined2 uVar2;
  float *pfVar3;
  undefined2 uVar4;
  undefined4 uVar5;
  int iVar6;
  uint uVar7;
  float fVar8;
  uint uVar9;
  float fVar10;
  int iVar11;
  uint uVar12;
  int *piVar13;
  undefined2 uVar14;
  int iVar15;
  uint uVar16;
  ushort *puVar17;
  int *piVar18;
  undefined2 uVar19;
  uint uVar20;
  ushort *puVar21;
  int iVar22;
  float fVar23;
  uint uVar24;
  uint *puVar25;
  int iVar26;
  int iVar27;
  int iVar28;
  uint uVar29;
  int iVar30;
  uint in_t7;
  undefined4 unaff_s0;
  int iVar31;
  undefined4 unaff_s1;
  int iVar32;
  int iVar33;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  uint uVar34;
  uint uVar35;
  uint uVar36;
  undefined *puVar37;
  uint uVar38;
  ushort *puVar39;
  undefined *puVar40;
  undefined4 unaff_s8;
  short *psVar47;
  float *pfVar48;
  undefined4 unaff_retaddr;
  undefined4 *puVar49;
  undefined4 *puVar50;
  int iVar51;
  int iVar52;
  undefined auStackX_0 [16];
  undefined *puVar41;
  undefined *puVar42;
  undefined *puVar43;
  undefined *puVar44;
  undefined *puVar45;
  undefined *puVar46;
  
  DAT_80077df8 = &DAT_80075264;
  DAT_1f800054 = param_2 * param_2;
  uVar36 = param_1[2];
  uVar35 = param_1[1];
  uVar34 = *param_1;
  DAT_1f800058 = &DAT_8006fcf4;
  uVar5 = 0;
  DAT_1f80005c = param_3;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  if (((-1 < (int)(uVar36 - param_2)) && (-1 < (int)(uVar35 - param_2))) &&
     (pfVar3 = &FLOAT_1f800000, -1 < (int)(uVar34 - param_2))) {
    iVar6 = DAT_80075778 + 0x1000;
    iVar22 = (uVar34 >> 0xd) + (uVar35 >> 0xd) * 0x20;
    FLOAT_1f800000 = *(float *)(iVar22 * 4 + iVar6);
    if (FLOAT_1f800000 != 0.0) {
      pfVar3 = (float *)&DAT_1f800004;
    }
    iVar11 = -1;
    if ((uVar34 & 0x1000) != 0) {
      iVar11 = 1;
    }
    uVar24 = iVar22 + iVar11 & 0xfffffc00;
    if ((int)uVar24 < 1) {
      fVar23 = *(float *)((iVar22 + iVar11) * 4 + iVar6);
      uVar24 = uVar35 & 0x1000;
      *pfVar3 = fVar23;
      if (fVar23 != 0.0) {
        pfVar3 = pfVar3 + 1;
      }
    }
    iVar15 = -0x20;
    if (uVar24 != 0) {
      iVar15 = 0x20;
    }
    if (((int)(iVar22 + iVar15 & 0xfffffc00U) < 1) &&
       (fVar23 = *(float *)((iVar22 + iVar15) * 4 + iVar6), *pfVar3 = fVar23, fVar23 != 0.0)) {
      pfVar3 = pfVar3 + 1;
    }
    uVar24 = iVar22 + iVar11 + iVar15;
    if (((int)(uVar24 & 0xfffffc00) < 1) &&
       (fVar23 = *(float *)(uVar24 * 4 + iVar6), *pfVar3 = fVar23, fVar23 != 0.0)) {
      pfVar3 = pfVar3 + 1;
    }
    *pfVar3 = 0.0;
    if (pfVar3 != &FLOAT_1f800000) {
      pfVar3 = &FLOAT_1f800000;
      while( true ) {
        fVar23 = *pfVar3;
        pfVar48 = pfVar3 + -1;
        pfVar3 = pfVar3 + 1;
        if (fVar23 == 0.0) break;
        while( true ) {
          pfVar48 = (float *)pfVar48[1];
          fVar23 = pfVar48[3];
          if (pfVar48 == (float *)0x0) break;
          fVar8 = pfVar48[4];
          fVar10 = pfVar48[5];
          iVar6 = (int)fVar10 - uVar36;
          gte_ldsv_((int)fVar23 - uVar34,(int)fVar8 - uVar35,iVar6);
          puVar39 = (ushort *)((uint)(undefined *)pfVar48[2] | 0x80000000);
          if ((undefined *)pfVar48[2] != (undefined *)0x0) {
            gte_sqr0_b(0);
            read_mt(iVar6,param_4,iVar22);
            if ((int)((int)param_4 +
                     ((iVar22 + iVar6) - (*puVar39 + param_2) * (*puVar39 + param_2))) < 0) {
              gte_ldR11R12(pfVar48[8]);
              gte_ldR13R21(pfVar48[9]);
              gte_ldR22R23(pfVar48[10]);
              gte_ldR31R32(pfVar48[0xb]);
              gte_ldR33(pfVar48[0xc]);
              gte_ldtr(0,0,0);
              iVar6 = *(int *)((uint)*(byte *)(pfVar48 + 0xf) * 4 +
                               (&DAT_80076378)[*(ushort *)((int)pfVar48 + 0x36)] + 0x38);
              uVar24 = (uint)*(byte *)(iVar6 + 5);
              piVar18 = (int *)(*(uint *)(iVar6 + (uint)*(byte *)((int)pfVar48 + 0x3e) * 8 + 0x24) &
                                0x1fffff | 0x80000000);
              piVar13 = piVar18 + puVar39[1] + 1;
              param_4 = (int *)&DAT_1f800070;
              do {
                gte_rtps_b();
                iVar6 = *piVar18;
                piVar18 = piVar18 + 1;
                gte_ldVZ0((iVar6 >> 0x15) << (uVar24 & 0x1f));
                gte_ldVXY0((((iVar6 << 10) >> 0x15) << (uVar24 & 0x1f)) +
                           (((iVar6 << 0x14) >> 0x13) << (uVar24 & 0x1f)) * 0x10000);
                iVar22 = gte_stIR3();
                iVar6 = gte_stIR1();
                iVar11 = gte_stIR2();
                iVar22 = iVar22 + (int)fVar23;
                *param_4 = iVar22;
                param_4[1] = (int)fVar8 - iVar6;
                param_4[2] = (int)fVar10 - iVar11;
                param_4 = param_4 + 4;
                puVar17 = puVar39 + 2;
              } while (piVar18 != piVar13);
              while( true ) {
                uVar38 = *(uint *)puVar17;
                puVar40 = (undefined *)((int)puVar17 + 4);
                puVar41 = (undefined *)((int)puVar17 + 4);
                puVar42 = (undefined *)((int)puVar17 + 4);
                puVar43 = (undefined *)((int)puVar17 + 4);
                puVar44 = (undefined *)((int)puVar17 + 4);
                puVar45 = (undefined *)((int)puVar17 + 4);
                puVar46 = (undefined *)((int)puVar17 + 4);
                if ((int)uVar38 < 0) break;
                uVar24 = uVar38 >> 0x14 & 0x3f0;
                param_4 = *(int **)((int)&DAT_1f800080 + uVar24);
                iVar22 = *(int *)((int)&DAT_1f800084 + uVar24);
                iVar31 = *(int *)((int)&DAT_1f800088 + uVar24);
                uVar24 = uVar38 >> 0xc & 0x3f0;
                iVar27 = *(int *)((int)&DAT_1f800080 + uVar24);
                iVar28 = *(int *)((int)&DAT_1f800084 + uVar24);
                iVar30 = *(int *)((int)&DAT_1f800088 + uVar24);
                uVar24 = uVar38 >> 4 & 0x3f0;
                iVar6 = *(int *)((int)&DAT_1f800080 + uVar24);
                iVar11 = *(int *)((int)&DAT_1f800084 + uVar24);
                iVar15 = *(int *)((int)&DAT_1f800088 + uVar24);
                iVar26 = uVar34 - param_2;
                iVar51 = uVar34 + param_2;
                puVar17 = (ushort *)((int)puVar17 + 4);
                if ((((-1 < (iVar6 - iVar26 & iVar27 - iVar26 & (int)param_4 - iVar26)) &&
                     (iVar26 = uVar35 - param_2, puVar17 = (ushort *)puVar40,
                     -1 < (iVar51 - iVar6 & iVar51 - iVar27 & iVar51 - (int)param_4))) &&
                    (iVar51 = uVar35 + param_2, puVar17 = (ushort *)puVar41,
                    -1 < (iVar11 - iVar26 & iVar28 - iVar26 & iVar22 - iVar26))) &&
                   (((iVar26 = uVar36 - param_2, puVar17 = (ushort *)puVar42,
                     -1 < (iVar51 - iVar11 & iVar51 - iVar28 & iVar51 - iVar22) &&
                     (iVar51 = uVar36 + param_2, puVar17 = (ushort *)puVar43,
                     -1 < (iVar15 - iVar26 & iVar30 - iVar26 & iVar31 - iVar26))) &&
                    (iVar6 = iVar6 - (int)param_4, puVar17 = (ushort *)puVar44,
                    -1 < (iVar51 - iVar15 & iVar51 - iVar30 & iVar51 - iVar31))))) {
                  iVar11 = iVar11 - iVar22;
                  iVar15 = iVar15 - iVar31;
                  iVar27 = iVar27 - (int)param_4;
                  iVar28 = iVar28 - iVar22;
                  iVar30 = iVar30 - iVar31;
                  gte_ldsv_(iVar27,iVar28,iVar30);
                  gte_ldR11R12(iVar6);
                  gte_ldR22R23(iVar11);
                  gte_ldR33(iVar15);
                  uVar7 = uVar34 - (int)param_4;
                  iVar26 = uVar35 - iVar22;
                  gte_op0_b(0);
                  iVar31 = uVar36 - iVar31;
                  uVar9 = uVar7 & 0xffff;
                  iVar51 = iVar26 * 0x10000 + uVar9;
                  gte_ldR13R21(iVar31);
                  gte_ldR11R12(iVar51);
                  read_mt(iVar51,uVar9,in_t7);
                  uVar24 = iVar51 >> 10;
                  uVar9 = (int)uVar9 >> 10;
                  in_t7 = (int)in_t7 >> 10;
                  gte_ldsv_(uVar24,uVar9,in_t7);
                  gte_rtir_sf0_b();
                  iVar51 = gte_stMAC1();
                  puVar17 = (ushort *)puVar45;
                  if (0 < iVar51) {
                    gte_ldsv_(uVar24,uVar9,in_t7);
                    gte_ldR11R12(iVar26 * 0x10000 + (uVar7 & 0xffff));
                    gte_ldR13R21(iVar31);
                    gte_ldR31R32(uVar9 * 0x10000 + (uVar24 & 0xffff));
                    gte_ldR33(in_t7);
                    gte_rtir_sf0();
                    iVar32 = gte_stMAC1();
                    iVar33 = gte_stMAC3();
                    iVar52 = (iVar32 << 4) / (iVar33 >> 6);
                    gte_ldMAC1(0);
                    gte_ldMAC2(0);
                    gte_ldMAC3(0);
                    gte_ldsv_(uVar24,uVar9,in_t7);
                    gte_ldIR0(iVar52);
                    gte_gpl0();
                    read_mt(iVar52,iVar33 >> 6,iVar51);
                    iVar52 = iVar52 >> 10;
                    iVar33 = iVar33 >> 0x10;
                    iVar51 = iVar51 >> 10;
                    gte_ldsv_(iVar52,iVar33,iVar51);
                    iVar32 = uVar7 - iVar52;
                    gte_sqr0_b(0);
                    iVar26 = iVar26 - iVar33;
                    iVar31 = iVar31 - iVar51;
                    read_mt(iVar52,iVar33,iVar51);
                    puVar17 = (ushort *)puVar46;
                    if (0 < (int)(((param_2 * param_2 - iVar52) - iVar33) - iVar51)) {
                      bVar1 = (int)(uVar24 + uVar9 ^ uVar24 - uVar9) < 0;
                      if (bVar1) {
                        uVar24 = uVar9;
                      }
                      if ((int)(uVar24 + in_t7 ^ uVar24 - in_t7) < 0) {
                        uVar24 = in_t7;
                      }
                      gte_ldsv_(iVar6,iVar11,iVar15);
                      gte_ldR11R12(iVar32);
                      gte_ldR22R23(iVar26);
                      gte_ldR33(iVar31);
                      gte_op0_b(0);
                      switch(bVar1) {
                      case false:
                        uVar34 = gte_stMAC1();
                        break;
                      case true:
                        uVar34 = gte_stMAC2();
                        break;
                      default:
                        uVar34 = gte_stMAC3();
                      }
                      gte_ldsv_(iVar32,iVar26,iVar31);
                      gte_ldR11R12(iVar27);
                      gte_ldR22R23(iVar28);
                      gte_ldR33(iVar30);
                      gte_op0_b(0);
                      switch(bVar1) {
                      case false:
                        uVar35 = gte_stMAC1();
                        break;
                      case true:
                        uVar35 = gte_stMAC2();
                        break;
                      default:
                        uVar35 = gte_stMAC3();
                      }
                      gte_ldIR1(iVar27 - iVar6);
                      gte_ldIR2(iVar28 - iVar11);
                      gte_ldIR3(iVar30 - iVar15);
                      gte_ldR11R12(iVar32 - iVar6);
                      gte_ldR22R23(iVar26 - iVar11);
                      gte_ldR33(iVar31 - iVar15);
                      gte_op0_b(0);
                      switch(bVar1) {
                      case false:
                        uVar36 = gte_stMAC1();
                        break;
                      case true:
                        uVar36 = gte_stMAC2();
                        break;
                      default:
                        uVar36 = gte_stMAC3();
                      }
                    // WARNING: Could not recover jumptable at 0x8004d0d8. Too many branches
                    // WARNING: Treating indirect jump as call
                      uVar5 = (*(code *)(((uVar34 ^ uVar24) >> 0x1f |
                                          ((uVar35 ^ uVar24) >> 0x1f) << 1 |
                                         ((uVar36 ^ uVar24) >> 0x1f) << 2) * 8 + -0x7ffb2f20))
                                        (iVar27,iVar28,iVar30);
                      return uVar5;
                    }
                  }
                }
              }
            }
          }
        }
      }
      param_2 = DAT_1f80005c;
      if ((DAT_1f800054 != 0) && ((int)(DAT_1f800054 - DAT_1f80005c * DAT_1f80005c) < 0)) {
        gte_ldLZCS(DAT_1f800054);
        uVar24 = gte_stLZCR();
        uVar24 = uVar24 & 0xfffffffe;
        unknownVector5.x = DAT_1f800048;
        unknownVector5.y = DAT_1f80004c;
        unknownVector5.z = DAT_1f800050;
        if ((int)(uVar24 - 0x18) < 0) {
          uVar7 = 0x18 - uVar24;
          iVar6 = DAT_1f800054 >> (uVar7 & 0x1f);
        }
        else {
          iVar6 = DAT_1f800054 << (uVar24 - 0x18 & 0x1f);
          uVar7 = 0x18;
        }
        iVar22 = (iVar6 + -0x40) * 2;
        uVar9 = (uint)((int)SquareRootShapeScaledArray[iVar6 + -0x40] <<
                      ((int)(0x1f - uVar24) >> 1 & 0x1fU)) >> 0xc;
        do {
          iVar6 = uVar34 - DAT_1f800048;
          iVar11 = uVar35 - DAT_1f80004c;
          iVar15 = uVar36 - DAT_1f800050;
          gte_ldMAC1(0);
          gte_ldMAC2(0);
          gte_ldMAC3(0);
          gte_ldsv_(iVar6,iVar11,iVar15);
          gte_ldIR0(DAT_1f80005c);
          gte_gpl0();
          read_mt(iVar6,iVar11,iVar15);
          iVar6 = iVar6 / (int)uVar9;
          iVar11 = iVar11 / (int)uVar9;
          iVar15 = iVar15 / (int)uVar9;
          gte_ldsv_(iVar6,iVar11,iVar15);
          gte_sqr0(0);
          read_mt(uVar24,uVar7,iVar22);
          iVar27 = uVar24 + uVar7;
          uVar7 = DAT_1f80005c * DAT_1f80005c;
          uVar24 = (iVar27 + iVar22) - uVar7;
          uVar9 = uVar9 - 1;
        } while ((int)uVar24 < 0);
        unknownPositionVector.x = DAT_1f800048 + iVar6;
        unknownPositionVector.y = DAT_1f80004c + iVar11;
        unknownPositionVector.z = DAT_1f800050 + iVar15;
        DAT_80075774 = (uint)(DAT_1f800058 + 0x1ffe40c3) >> 4;
        return 1;
      }
    }
    DAT_1f800034 = (uVar34 + param_2 >> 4) + 1;
    DAT_1f80003c = (uVar35 + param_2 >> 4) + 1;
    DAT_1f800044 = (uVar36 + param_2 >> 4) + 1;
    DAT_1f800030 = (param_2 >> 3) + 1;
    uVar24 = uVar34 >> 0xc;
    uVar7 = uVar35 >> 0xc;
    uVar9 = uVar36 >> 0xc;
    uVar12 = uVar34 + param_2 >> 0xc;
    if (uVar12 == uVar24) {
      uVar12 = uVar34 - param_2 >> 0xc;
    }
    uVar16 = uVar35 + param_2 >> 0xc;
    if (uVar16 == uVar7) {
      uVar16 = uVar35 - param_2 >> 0xc;
    }
    uVar20 = uVar36 + param_2 >> 0xc;
    if (uVar20 == uVar9) {
      uVar20 = uVar36 - param_2 >> 0xc;
    }
    uVar2 = (undefined2)uVar24;
    uVar4 = (undefined2)uVar7;
    FLOAT_1f800000 = (float)CONCAT22(uVar4,uVar2);
    DAT_1f800004 = (undefined2)uVar9;
    uVar19 = (undefined2)uVar20;
    uVar14 = (undefined2)uVar16;
    if (uVar24 == uVar12) {
      if (uVar7 == uVar16) {
        if (uVar9 == uVar20) {
          puVar50 = (undefined4 *)&DAT_1f800006;
        }
        else {
          puVar50 = (undefined4 *)&DAT_1f80000c;
          DAT_1f800006 = uVar2;
          DAT_1f800008 = uVar4;
          DAT_1f80000a = uVar19;
        }
      }
      else {
        DAT_1f800008 = uVar14;
        if (uVar9 == uVar20) {
          puVar50 = (undefined4 *)&DAT_1f80000c;
          DAT_1f800006 = uVar2;
          DAT_1f80000a = DAT_1f800004;
        }
        else {
          puVar50 = (undefined4 *)&DAT_1f800018;
          DAT_1f800006 = uVar2;
          DAT_1f80000a = DAT_1f800004;
          DAT_1f80000c = uVar2;
          DAT_1f80000e = uVar4;
          DAT_1f800010 = uVar19;
          DAT_1f800012 = uVar2;
          DAT_1f800014 = uVar14;
          DAT_1f800016 = uVar19;
        }
      }
    }
    else {
      DAT_1f800006 = (undefined2)uVar12;
      if (uVar7 == uVar16) {
        if (uVar9 == uVar20) {
          puVar50 = (undefined4 *)&DAT_1f80000c;
          DAT_1f800008 = uVar4;
          DAT_1f80000a = DAT_1f800004;
        }
        else {
          puVar50 = (undefined4 *)&DAT_1f800018;
          DAT_1f800008 = uVar4;
          DAT_1f80000a = DAT_1f800004;
          DAT_1f80000c = uVar2;
          DAT_1f80000e = uVar4;
          DAT_1f800010 = uVar19;
          DAT_1f800012 = DAT_1f800006;
          DAT_1f800014 = uVar4;
          DAT_1f800016 = uVar19;
        }
      }
      else {
        DAT_1f80000e = uVar14;
        if (uVar9 == uVar20) {
          puVar50 = (undefined4 *)&DAT_1f800018;
          DAT_1f800008 = uVar4;
          DAT_1f80000a = DAT_1f800004;
          DAT_1f80000c = uVar2;
          DAT_1f800010 = DAT_1f800004;
          DAT_1f800012 = DAT_1f800006;
          DAT_1f800014 = uVar14;
          DAT_1f800016 = DAT_1f800004;
        }
        else {
          puVar50 = &DAT_1f800030;
          DAT_1f800008 = uVar4;
          DAT_1f80000a = DAT_1f800004;
          DAT_1f80000c = uVar2;
          DAT_1f800010 = DAT_1f800004;
          DAT_1f800012 = DAT_1f800006;
          DAT_1f800014 = uVar14;
          DAT_1f800016 = DAT_1f800004;
          DAT_1f800018 = uVar2;
          DAT_1f80001a = uVar4;
          DAT_1f80001c = uVar19;
          DAT_1f80001e = uVar2;
          DAT_1f800020 = uVar14;
          DAT_1f800022 = uVar19;
          DAT_1f800024 = DAT_1f800006;
          DAT_1f800026 = uVar4;
          DAT_1f800028 = uVar19;
          DAT_1f80002a = DAT_1f800006;
          DAT_1f80002c = uVar14;
          DAT_1f80002e = uVar19;
        }
      }
    }
    while (puVar49 = puVar50, puVar50 = (undefined4 *)((int)puVar49 + -6),
          DAT_1f800038 = DAT_1f800030, DAT_1f800040 = DAT_1f800030, 0 < (int)puVar49 << 0x10) {
      iVar6 = (int)*(short *)((int)puVar49 + -2);
      if (-1 < iVar6) {
        puVar17 = *(ushort **)(DAT_800785d4 + 8);
        puVar21 = (ushort *)((uint)puVar17[iVar6 + 1] + (int)puVar17);
        if ((puVar17[iVar6 + 1] != 0xffff) &&
           (iVar22 = (int)*(short *)(puVar49 + -1), 0 < (int)((uint)*puVar17 - iVar6))) {
          if (-1 < iVar22) {
            uVar24 = (uint)puVar21[iVar22 + 1];
            puVar17 = (ushort *)(uVar24 + (int)puVar17);
            if ((uVar24 != 0xffff) &&
               (iVar6 = (int)*(short *)puVar50, 0 < (int)((uint)*puVar21 - iVar22))) {
              if (-1 < iVar6) {
                uVar24 = (uint)puVar17[iVar6 + 1];
                if ((0 < (int)((uint)*puVar17 - iVar6)) && (uVar24 != 0xffff)) {
                  psVar47 = (short *)(*(int *)(DAT_800785d4 + 0xc) + uVar24 * 2);
                  puVar37 = (undefined *)((int)*psVar47 & 0x7fff);
                  while (psVar47 = psVar47 + 1, -1 < (int)puVar37) {
                    puVar25 = (uint *)((int)puVar37 * 0xc + *(int *)(DAT_800785d4 + 0x10));
                    uVar7 = puVar25[2];
                    iVar6 = (uVar7 & 0x3fff) - DAT_1f800044;
                    uVar24 = uVar7 >> 0x18;
                    if ((iVar6 < 1) &&
                       (uVar9 = uVar7 >> 0x10 & 0xff, iVar6 = iVar6 + DAT_1f800030,
                       -1 < (int)(iVar6 + uVar9 & iVar6 + uVar24))) {
                      uVar12 = puVar25[1];
                      iVar6 = (int)uVar12 >> 0x17;
                      iVar22 = (int)(uVar12 << 9) >> 0x17;
                      uVar16 = (uVar12 & 0x3fff) - DAT_1f80003c;
                      uVar20 = uVar16 + DAT_1f800030;
                      if (((int)(uVar16 | uVar16 + iVar22 | uVar16 + iVar6) < 1) &&
                         (-1 < (int)(uVar20 & uVar20 + iVar22 & uVar20 + iVar6))) {
                        uVar16 = *puVar25;
                        iVar11 = (int)uVar16 >> 0x17;
                        iVar15 = (int)(uVar16 << 9) >> 0x17;
                        uVar20 = (uVar16 & 0x3fff) - DAT_1f800034;
                        uVar29 = uVar20 + DAT_1f800030;
                        if ((((int)(uVar20 | uVar20 + iVar15 | uVar20 + iVar11) < 1) &&
                            (uVar20 = uVar29 + iVar11, -1 < (int)(uVar29 & uVar29 + iVar15 & uVar20)
                            )) && ((uVar7 & 0x4000) == 0)) {
                          gte_ldsv_(iVar15,iVar22,uVar9);
                          gte_ldR11R12(iVar11);
                          gte_ldR22R23(iVar6);
                          gte_ldR33(uVar24);
                          uVar16 = uVar34 + (uVar16 & 0x3fff) * -0x10;
                          iVar27 = uVar35 + (uVar12 & 0x3fff) * -0x10;
                          gte_op0_b(0);
                          iVar28 = uVar36 + (uVar7 & 0x3fff) * -0x10;
                          uVar12 = uVar16 & 0xffff;
                          iVar30 = iVar27 * 0x10000 + uVar12;
                          gte_ldR13R21(iVar28);
                          gte_ldR11R12(iVar30);
                          read_mt(iVar30,uVar12,uVar20);
                          uVar7 = iVar30 >> 2;
                          uVar12 = (int)uVar12 >> 2;
                          uVar20 = (int)uVar20 >> 2;
                          gte_ldsv_(uVar7,uVar12,uVar20);
                          gte_rtir_sf0_b();
                          iVar30 = gte_stMAC1();
                          if (0 < iVar30) {
                            gte_ldsv_(uVar7,uVar12,uVar20);
                            gte_ldR11R12(iVar27 * 0x10000 + (uVar16 & 0xffff));
                            gte_ldR13R21(iVar28);
                            gte_ldR31R32(uVar12 * 0x10000 + (uVar7 & 0xffff));
                            gte_ldR33(uVar20);
                            gte_rtir_sf0();
                            iVar31 = gte_stMAC1();
                            iVar32 = gte_stMAC3();
                            iVar51 = (iVar31 << 4) / (iVar32 >> 6);
                            iVar15 = iVar15 * 0x10;
                            iVar22 = iVar22 * 0x10;
                            iVar31 = uVar9 * 0x10;
                            gte_ldMAC1(0);
                            gte_ldMAC2(0);
                            gte_ldMAC3(0);
                            gte_ldsv_(uVar7,uVar12,uVar20);
                            gte_ldIR0(iVar51);
                            gte_gpl0();
                            read_mt(iVar51,iVar32 >> 6,iVar30);
                            iVar51 = iVar51 >> 10;
                            iVar32 = iVar32 >> 0x10;
                            iVar30 = iVar30 >> 10;
                            gte_ldsv_(iVar51,iVar32,iVar30);
                            iVar26 = uVar16 - iVar51;
                            gte_sqr0_b(0);
                            iVar27 = iVar27 - iVar32;
                            iVar28 = iVar28 - iVar30;
                            read_mt(iVar51,iVar32,iVar30);
                            if (0 < (int)(((param_2 * param_2 - iVar51) - iVar32) - iVar30)) {
                              bVar1 = (int)(uVar7 + uVar12 ^ uVar7 - uVar12) < 0;
                              if (bVar1) {
                                uVar7 = uVar12;
                              }
                              if ((int)(uVar7 + uVar20 ^ uVar7 - uVar20) < 0) {
                                uVar7 = uVar20;
                              }
                              gte_ldsv_(iVar11 * 0x10,iVar6 * 0x10,uVar24 * 0x10);
                              gte_ldR11R12(iVar26);
                              gte_ldR22R23(iVar27);
                              gte_ldR33(iVar28);
                              gte_op0_b(0);
                              switch(bVar1) {
                              case false:
                                uVar34 = gte_stMAC1();
                                break;
                              case true:
                                uVar34 = gte_stMAC2();
                                break;
                              default:
                                uVar34 = gte_stMAC3();
                              }
                              gte_ldsv_(iVar26,iVar27,iVar28);
                              gte_ldR11R12(iVar15);
                              gte_ldR22R23(iVar22);
                              gte_ldR33(iVar31);
                              gte_op0_b(0);
                              switch(bVar1) {
                              case false:
                                uVar35 = gte_stMAC1();
                                break;
                              case true:
                                uVar35 = gte_stMAC2();
                                break;
                              default:
                                uVar35 = gte_stMAC3();
                              }
                              gte_ldIR1(iVar15 + iVar11 * -0x10);
                              gte_ldIR2(iVar22 + iVar6 * -0x10);
                              gte_ldIR3(iVar31 + uVar24 * -0x10);
                              gte_ldR11R12(iVar26 + iVar11 * -0x10);
                              gte_ldR22R23(iVar27 + iVar6 * -0x10);
                              gte_ldR33(iVar28 + uVar24 * -0x10);
                              gte_op0_b(0);
                              switch(bVar1) {
                              case false:
                                uVar36 = gte_stMAC1();
                                break;
                              case true:
                                uVar36 = gte_stMAC2();
                                break;
                              default:
                                uVar36 = gte_stMAC3();
                              }
                    // WARNING: Could not recover jumptable at 0x8004c618. Too many branches
                    // WARNING: Treating indirect jump as call
                              uVar5 = (*(code *)(&UNK_8004c620 +
                                                ((uVar34 ^ uVar7) >> 0x1f |
                                                 ((uVar35 ^ uVar7) >> 0x1f) << 1 |
                                                ((uVar36 ^ uVar7) >> 0x1f) << 2) * 8))
                                                (iVar15,iVar22,iVar31);
                              return uVar5;
                            }
                          }
                        }
                      }
                    }
                    puVar37 = (undefined *)(int)*psVar47;
                  }
                }
              }
            }
          }
        }
      }
    }
    uVar5 = 0;
    if ((DAT_1f800054 != 0) && (uVar5 = 0, (int)(DAT_1f800054 - DAT_1f80005c * DAT_1f80005c) < 0)) {
      gte_ldLZCS(DAT_1f800054);
      uVar24 = gte_stLZCR();
      uVar24 = uVar24 & 0xfffffffe;
      unknownVector5.x = DAT_1f800048;
      unknownVector5.y = DAT_1f80004c;
      unknownVector5.z = DAT_1f800050;
      if ((int)(uVar24 - 0x18) < 0) {
        uVar7 = 0x18 - uVar24;
        iVar6 = DAT_1f800054 >> (uVar7 & 0x1f);
      }
      else {
        iVar6 = DAT_1f800054 << (uVar24 - 0x18 & 0x1f);
        uVar7 = 0x18;
      }
      iVar22 = (iVar6 + -0x40) * 2;
      uVar9 = (uint)((int)SquareRootShapeScaledArray[iVar6 + -0x40] <<
                    ((int)(0x1f - uVar24) >> 1 & 0x1fU)) >> 0xc;
      do {
        iVar6 = uVar34 - DAT_1f800048;
        iVar11 = uVar35 - DAT_1f80004c;
        iVar15 = uVar36 - DAT_1f800050;
        gte_ldMAC1(0);
        gte_ldMAC2(0);
        gte_ldMAC3(0);
        gte_ldsv_(iVar6,iVar11,iVar15);
        gte_ldIR0(DAT_1f80005c);
        gte_gpl0();
        read_mt(iVar6,iVar11,iVar15);
        iVar6 = iVar6 / (int)uVar9;
        iVar11 = iVar11 / (int)uVar9;
        iVar15 = iVar15 / (int)uVar9;
        gte_ldsv_(iVar6,iVar11,iVar15);
        gte_sqr0(0);
        read_mt(uVar24,uVar7,iVar22);
        iVar27 = uVar24 + uVar7;
        uVar7 = DAT_1f80005c * DAT_1f80005c;
        uVar24 = (iVar27 + iVar22) - uVar7;
        uVar9 = uVar9 - 1;
      } while ((int)uVar24 < 0);
      unknownPositionVector.x = DAT_1f800048 + iVar6;
      unknownPositionVector.y = DAT_1f80004c + iVar11;
      unknownPositionVector.z = DAT_1f800050 + iVar15;
      uVar5 = 1;
    }
  }
  DAT_80075774 = (uint)(DAT_1f800058 + 0x1ffe40c3) >> 4;
  return uVar5;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void MobyUpdatePosition(uint *param_1,int param_2)

{
  float *pfVar1;
  int iVar2;
  uint *puVar3;
  uint *puVar4;
  int iVar5;
  int *piVar6;
  int iVar7;
  ushort *puVar8;
  int *piVar9;
  ushort *puVar10;
  uint uVar11;
  uint uVar12;
  int *piVar13;
  uint uVar14;
  int iVar15;
  uint uVar16;
  float fVar17;
  uint uVar18;
  uint uVar19;
  uint *puVar20;
  uint uVar21;
  int iVar22;
  int iVar23;
  int iVar24;
  int iVar25;
  int iVar26;
  int iVar27;
  int iVar28;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  uint uVar29;
  undefined4 unaff_s7;
  uint uVar30;
  uint uVar31;
  uint uVar32;
  uint uVar33;
  uint uVar34;
  uint uVar35;
  ushort *puVar36;
  undefined *puVar37;
  undefined4 unaff_s8;
  uint uVar49;
  uint **ppuVar50;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  undefined *puVar38;
  undefined *puVar39;
  undefined *puVar40;
  undefined *puVar41;
  undefined *puVar42;
  undefined *puVar43;
  undefined *puVar44;
  undefined *puVar45;
  undefined *puVar46;
  undefined *puVar47;
  undefined *puVar48;
  
  DAT_80077df8 = &DAT_80075264;
  uVar34 = param_1[2];
  uVar32 = param_1[1];
  uVar30 = *param_1;
  unknownPositionVector.z = 0;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  if (-1 < (int)(uVar34 | uVar32 | uVar30)) {
    uVar29 = uVar34 - param_2 & 0xfff0;
    if ((int)(uVar34 - param_2) < 0) {
      uVar29 = 0;
    }
    pfVar1 = &FLOAT_1f800000;
    iVar2 = DAT_80075778 + 0x1000;
    iVar15 = (uVar30 >> 0xd) + (uVar32 >> 0xd) * 0x20;
    FLOAT_1f800000 = *(float *)(iVar15 * 4 + iVar2);
    if (FLOAT_1f800000 != 0.0) {
      pfVar1 = (float *)&DAT_1f800004;
    }
    iVar5 = -1;
    if ((uVar30 & 0x1000) != 0) {
      iVar5 = 1;
    }
    uVar19 = iVar15 + iVar5 & 0xfffffc00;
    _DAT_1f800020 = uVar29;
    if ((int)uVar19 < 1) {
      fVar17 = *(float *)((iVar15 + iVar5) * 4 + iVar2);
      uVar19 = uVar32 & 0x1000;
      *pfVar1 = fVar17;
      if (fVar17 != 0.0) {
        pfVar1 = pfVar1 + 1;
      }
    }
    iVar7 = -0x20;
    if (uVar19 != 0) {
      iVar7 = 0x20;
    }
    if (((int)(iVar15 + iVar7 & 0xfffffc00U) < 1) &&
       (fVar17 = *(float *)((iVar15 + iVar7) * 4 + iVar2), *pfVar1 = fVar17, fVar17 != 0.0)) {
      pfVar1 = pfVar1 + 1;
    }
    uVar19 = iVar15 + iVar5 + iVar7;
    if (((int)(uVar19 & 0xfffffc00) < 1) &&
       (fVar17 = *(float *)(uVar19 * 4 + iVar2), *pfVar1 = fVar17, fVar17 != 0.0)) {
      pfVar1 = pfVar1 + 1;
    }
    *pfVar1 = 0.0;
    if (pfVar1 != &FLOAT_1f800000) {
      pfVar1 = &FLOAT_1f800000;
      while( true ) {
        fVar17 = *pfVar1;
        ppuVar50 = (uint **)(pfVar1 + -1);
        pfVar1 = pfVar1 + 1;
        if (fVar17 == 0.0) break;
LAB_8004db1c:
        ppuVar50 = (uint **)ppuVar50[1];
        puVar20 = ppuVar50[3];
        if (ppuVar50 != (uint **)0x0) {
          puVar3 = ppuVar50[4];
          puVar4 = ppuVar50[5];
          gte_ldsv_((int)puVar20 - uVar30,(int)puVar3 - uVar32,0);
          gte_sqr0_b(0);
          puVar36 = (ushort *)((uint)ppuVar50[2] | 0x80000000);
          if (ppuVar50[2] != (uint *)0x0) {
            uVar19 = (uint)*puVar36;
            iVar2 = gte_stMAC1();
            iVar15 = gte_stMAC2();
            if ((((int)((iVar2 + iVar15) - uVar19 * uVar19) < 0) &&
                ((int)((int)puVar4 - (uVar34 + uVar19)) < 1)) &&
               (-1 < (int)((int)puVar4 - (uVar29 - uVar19)))) {
              gte_ldR11R12(ppuVar50[8]);
              gte_ldR13R21(ppuVar50[9]);
              gte_ldR22R23(ppuVar50[10]);
              gte_ldR31R32(ppuVar50[0xb]);
              gte_ldR33(ppuVar50[0xc]);
              gte_ldtr(0,0,0);
              iVar2 = *(int *)((uint)*(byte *)(ppuVar50 + 0xf) * 4 +
                               (&DAT_80076378)[*(ushort *)((int)ppuVar50 + 0x36)] + 0x38);
              uVar19 = (uint)*(byte *)(iVar2 + 5);
              piVar9 = (int *)(*(uint *)(iVar2 + (uint)*(byte *)((int)ppuVar50 + 0x3e) * 8 + 0x24) &
                               0x1fffff | 0x80000000);
              piVar6 = piVar9 + puVar36[1] + 1;
              piVar13 = (int *)&DAT_1f800070;
              do {
                gte_rtps_b();
                iVar2 = *piVar9;
                piVar9 = piVar9 + 1;
                gte_ldVZ0((iVar2 >> 0x15) << (uVar19 & 0x1f));
                gte_ldVXY0((((iVar2 << 10) >> 0x15) << (uVar19 & 0x1f)) +
                           (((iVar2 << 0x14) >> 0x13) << (uVar19 & 0x1f)) * 0x10000);
                iVar2 = gte_stIR3();
                iVar15 = gte_stIR1();
                iVar5 = gte_stIR2();
                *piVar13 = iVar2 + (int)puVar20;
                piVar13[1] = (int)puVar3 - iVar15;
                piVar13[2] = (int)puVar4 - iVar5;
                piVar13 = piVar13 + 4;
                puVar8 = puVar36 + 2;
              } while (piVar9 != piVar6);
LAB_8004dc9c:
              while( true ) {
                uVar35 = *(uint *)puVar8;
                puVar37 = (undefined *)((int)puVar8 + 4);
                puVar38 = (undefined *)((int)puVar8 + 4);
                puVar39 = (undefined *)((int)puVar8 + 4);
                puVar40 = (undefined *)((int)puVar8 + 4);
                puVar41 = (undefined *)((int)puVar8 + 4);
                puVar42 = (undefined *)((int)puVar8 + 4);
                puVar43 = (undefined *)((int)puVar8 + 4);
                puVar44 = (undefined *)((int)puVar8 + 4);
                puVar45 = (undefined *)((int)puVar8 + 4);
                puVar47 = (undefined *)((int)puVar8 + 4);
                puVar48 = (undefined *)((int)puVar8 + 4);
                puVar46 = (undefined *)((int)puVar8 + 4);
                if ((int)uVar35 < 0) break;
                uVar19 = uVar35 >> 0x14 & 0x3f0;
                uVar14 = *(uint *)((int)&DAT_1f800080 + uVar19);
                uVar31 = *(uint *)((int)&DAT_1f800084 + uVar19);
                iVar24 = *(int *)((int)&DAT_1f800088 + uVar19);
                uVar19 = uVar35 >> 0xc & 0x3f0;
                iVar15 = *(int *)((int)&DAT_1f800080 + uVar19);
                iVar5 = *(int *)((int)&DAT_1f800084 + uVar19);
                iVar7 = *(int *)((int)&DAT_1f800088 + uVar19);
                uVar19 = uVar35 >> 4 & 0x3f0;
                iVar2 = *(int *)((int)&DAT_1f800088 + uVar19);
                if (uVar14 == uVar30) goto LAB_8004dd28;
                iVar25 = *(int *)((int)&DAT_1f800080 + uVar19) - uVar30;
                if ((int)(uVar14 - uVar30) < 0) goto LAB_8004dd18;
                if ((iVar25 < 1) ||
                   (puVar8 = (ushort *)((int)puVar8 + 4), (int)(iVar15 - uVar30) < 1))
                goto LAB_8004dd28;
              }
            }
          }
          goto LAB_8004db1c;
        }
      }
    }
    _DAT_1f800024 = uVar29 >> 4;
    uVar31 = uVar30 >> 4;
    uVar33 = uVar32 >> 4;
    uVar19 = _DAT_1f800024;
    uVar14 = uVar34 >> 0xc;
    while ((uVar14 != (uVar29 >> 0xc) - 1 && (_DAT_1f800024 == uVar19))) {
      uVar49 = uVar14 - 1;
      puVar8 = *(ushort **)(DAT_800785d4 + 8);
      iVar2 = uVar14 + 1;
      iVar15 = *puVar8 - uVar14;
      puVar10 = (ushort *)((uint)puVar8[iVar2] + (int)puVar8);
      uVar14 = uVar49;
      if ((puVar8[iVar2] != 0xffff) && (0 < iVar15)) {
        uVar49 = (uint)puVar10[(uVar32 >> 0xc) + 1];
        puVar8 = (ushort *)(uVar49 + (int)puVar8);
        if ((uVar49 != 0xffff) && (0 < (int)((uint)*puVar10 - (uVar32 >> 0xc)))) {
          uVar49 = (uint)puVar8[(uVar30 >> 0xc) + 1];
          if ((0 < (int)((uint)*puVar8 - (uVar30 >> 0xc))) && (uVar49 != 0xffff)) {
            puVar8 = (ushort *)(*(int *)(DAT_800785d4 + 0xc) + uVar49 * 2);
            uVar49 = *puVar8 & 0x7fff;
            while (puVar8 = puVar8 + 1, -1 < (int)uVar49) {
              puVar20 = (uint *)(uVar49 * 0xc + *(int *)(DAT_800785d4 + 0x10));
              uVar12 = *puVar20;
              iVar2 = (int)uVar12 >> 0x17;
              iVar15 = (int)(uVar12 << 9) >> 0x17;
              uVar12 = uVar12 & 0x3fff;
              iVar5 = uVar12 - uVar31;
              if (uVar12 != uVar31) {
                if (iVar5 < 0) {
                  if ((-1 < iVar5 + iVar2) || (-1 < iVar5 + iVar15)) goto LAB_8004d890;
                }
                else if ((iVar5 + iVar2 < 1) || (iVar5 + iVar15 < 1)) goto LAB_8004d890;
                goto LAB_8004d824;
              }
LAB_8004d890:
              uVar16 = puVar20[1];
              iVar5 = (int)uVar16 >> 0x17;
              iVar7 = (int)(uVar16 << 9) >> 0x17;
              uVar16 = uVar16 & 0x3fff;
              iVar24 = uVar16 - uVar33;
              if (uVar16 == uVar33) {
LAB_8004d8e0:
                uVar21 = puVar20[2];
                uVar18 = uVar21 & 0x3fff;
                if ((int)(uVar18 - (uVar34 >> 4)) < 1) {
                  uVar11 = uVar21 >> 0x10 & 0xff;
                  if (((int)((uVar19 - uVar18) - uVar11 | (uVar19 - uVar18) - (uVar21 >> 0x18)) < 1)
                     && ((uVar21 & 0x4000) == 0)) {
                    gte_ldsv_(iVar15,iVar7,uVar11);
                    gte_ldR11R12(iVar2);
                    gte_ldR22R23(iVar5);
                    gte_ldR33(uVar21 >> 0x18);
                    iVar24 = uVar31 - uVar12;
                    iVar25 = uVar33 - uVar16;
                    gte_op0_b(0);
                    iVar28 = gte_stMAC3();
                    iVar27 = gte_stMAC2();
                    iVar26 = gte_stMAC1();
                    iVar26 = iVar26 >> 2;
                    if (0 < iVar28) {
                      iVar27 = iVar27 >> 2;
                      iVar28 = iVar28 >> 2;
                      gte_ldIR1(iVar24);
                      gte_ldIR2(iVar25);
                      gte_ldR11R12(iVar2);
                      gte_ldR22R23(iVar5);
                      gte_op0(0);
                      iVar22 = gte_stMAC3();
                      if (-1 < iVar22) {
                        gte_ldIR1(iVar15);
                        gte_ldIR2(iVar7);
                        gte_ldR11R12(iVar24);
                        gte_ldR22R23(iVar25);
                        gte_op0(0);
                        iVar22 = gte_stMAC3();
                        if (-1 < iVar22) {
                          gte_ldIR1(iVar24 - iVar2);
                          gte_ldIR2(iVar25 - iVar5);
                          gte_ldR11R12(iVar15 - iVar2);
                          gte_ldR22R23(iVar7 - iVar5);
                          gte_op0(0);
                          iVar2 = gte_stMAC3();
                          if (-1 < iVar2) {
                            uVar18 = uVar18 + (((-(iVar25 * iVar27) - iVar24 * iVar26) * 0x10) /
                                               iVar28 >> 4);
                            if ((0 < (int)((uVar34 >> 4) - uVar18)) && ((int)(uVar19 - uVar18) < 0))
                            {
                              DAT_800757e4 = (uint **)0x0;
                              DAT_80075718 = 0xff;
                              uVar19 = uVar18;
                              DAT_80075808 = uVar49;
                              unknownVector.x = iVar26;
                              unknownVector.y = iVar27;
                              unknownVector.z = iVar28;
                              if (0 < (int)(*(int *)(DAT_800785d4 + 4) - uVar49)) {
                                DAT_80075718 = (uint)*(byte *)(*(int *)(DAT_800785d4 + 0x18) +
                                                              uVar49);
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
              else if (iVar24 < 0) {
                if ((-1 < iVar24 + iVar5) || (-1 < iVar24 + iVar7)) goto LAB_8004d8e0;
              }
              else if ((iVar24 + iVar5 < 1) || (iVar24 + iVar7 < 1)) goto LAB_8004d8e0;
LAB_8004d824:
              uVar49 = (uint)(short)*puVar8;
            }
          }
        }
      }
    }
    unknownPositionVector.z = 0;
    if (_DAT_1f800020 != uVar19 * 0x10) {
      unknownPositionVector.z = uVar19 * 0x10;
    }
  }
  return;
LAB_8004dd18:
  if ((-1 < iVar25) || (puVar8 = (ushort *)((int)puVar8 + 4), -1 < (int)(iVar15 - uVar30))) {
LAB_8004dd28:
    if (uVar31 != uVar32) {
      iVar25 = *(int *)((int)&DAT_1f800084 + uVar19) - uVar32;
      if ((int)(uVar31 - uVar32) < 0) {
        if ((iVar25 < 0) && (puVar8 = (ushort *)puVar46, (int)(iVar5 - uVar32) < 0))
        goto LAB_8004dc9c;
      }
      else if ((0 < iVar25) && (puVar8 = (ushort *)puVar37, 0 < (int)(iVar5 - uVar32)))
      goto LAB_8004dc9c;
    }
    puVar8 = (ushort *)puVar38;
    if ((-1 < (int)(iVar2 - uVar29 & iVar7 - uVar29 & iVar24 - uVar29)) &&
       (iVar25 = *(int *)((int)&DAT_1f800080 + uVar19) - uVar14, puVar8 = (ushort *)puVar39,
       -1 < (int)(uVar34 - iVar2 & uVar34 - iVar7 & uVar34 - iVar24))) {
      iVar26 = *(int *)((int)&DAT_1f800084 + uVar19) - uVar31;
      iVar15 = iVar15 - uVar14;
      iVar5 = iVar5 - uVar31;
      gte_ldsv_(iVar15,iVar5,iVar7 - iVar24);
      gte_ldR11R12(iVar25);
      gte_ldR22R23(iVar26);
      gte_ldR33(iVar2 - iVar24);
      iVar2 = uVar30 - uVar14;
      iVar7 = uVar32 - uVar31;
      gte_op0_b(0);
      iVar22 = gte_stMAC3();
      iVar28 = gte_stMAC2();
      iVar27 = gte_stMAC1();
      iVar27 = iVar27 >> 10;
      puVar8 = (ushort *)puVar40;
      if (0 < iVar22) {
        iVar28 = iVar28 >> 10;
        iVar22 = iVar22 >> 10;
        gte_ldIR1(iVar2);
        gte_ldIR2(iVar7);
        gte_ldR11R12(iVar25);
        gte_ldR22R23(iVar26);
        gte_op0(0);
        iVar23 = gte_stMAC3();
        puVar8 = (ushort *)puVar41;
        if (-1 < iVar23) {
          gte_ldIR1(iVar15);
          gte_ldIR2(iVar5);
          gte_ldR11R12(iVar2);
          gte_ldR22R23(iVar7);
          gte_op0(0);
          iVar23 = gte_stMAC3();
          puVar8 = (ushort *)puVar42;
          if (-1 < iVar23) {
            gte_ldIR1(iVar2 - iVar25);
            gte_ldIR2(iVar7 - iVar26);
            gte_ldR11R12(iVar15 - iVar25);
            gte_ldR22R23(iVar5 - iVar26);
            gte_op0(0);
            iVar15 = gte_stMAC3();
            puVar8 = (ushort *)puVar43;
            if (-1 < iVar15) {
              uVar19 = iVar24 + (((-(iVar7 * iVar28) - iVar2 * iVar27) * 0x10) / iVar22 >> 4);
              puVar8 = (ushort *)puVar44;
              if ((0 < (int)(uVar34 - uVar19)) &&
                 (puVar8 = (ushort *)puVar45, (int)(uVar29 - uVar19) < 0)) {
                DAT_80075808 = 0xffffffff;
                DAT_80075718 = 0xff;
                uVar29 = uVar19;
                puVar8 = (ushort *)puVar47;
                DAT_800757e4 = ppuVar50;
                unknownVector.x = iVar27;
                unknownVector.y = iVar28;
                unknownVector.z = iVar22;
                if ((uVar35 & 0xff) != 0xff) {
                  DAT_80075718 = **ppuVar50;
                  puVar8 = (ushort *)puVar48;
                }
              }
            }
          }
        }
      }
    }
  }
  goto LAB_8004dc9c;
}



int FUN_8004df24(uint *param_1)

{
  int iVar1;
  int iVar2;
  ushort *puVar3;
  int iVar4;
  ushort *puVar5;
  uint uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint *puVar10;
  uint uVar11;
  int iVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  int iVar16;
  int iVar17;
  int iVar18;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  int iVar19;
  undefined4 unaff_s7;
  uint uVar20;
  uint uVar21;
  uint uVar22;
  uint uVar23;
  uint uVar24;
  undefined4 unaff_s8;
  uint uVar25;
  uint uVar26;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077df8 = &DAT_80075264;
  DAT_80077dfc = auStackX_0;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  uVar24 = param_1[2];
  uVar22 = param_1[1];
  uVar20 = *param_1;
  iVar19 = 0;
  if (-1 < (int)(uVar24 | uVar22 | uVar20)) {
    uVar23 = uVar22 >> 4;
    uVar21 = uVar20 >> 4;
    uVar25 = uVar24 >> 0xc;
    while ((iVar19 < 1 && (uVar25 != 0xffffffff))) {
      uVar26 = uVar25 - 1;
      puVar3 = *(ushort **)(DAT_800785d4 + 8);
      iVar1 = uVar25 + 1;
      iVar2 = *puVar3 - uVar25;
      puVar5 = (ushort *)((uint)puVar3[iVar1] + (int)puVar3);
      uVar25 = uVar26;
      if ((puVar3[iVar1] != 0xffff) && (0 < iVar2)) {
        uVar26 = (uint)puVar5[(uVar22 >> 0xc) + 1];
        puVar3 = (ushort *)(uVar26 + (int)puVar3);
        if ((uVar26 != 0xffff) && (0 < (int)((uint)*puVar5 - (uVar22 >> 0xc)))) {
          uVar26 = (uint)puVar3[(uVar20 >> 0xc) + 1];
          if ((0 < (int)((uint)*puVar3 - (uVar20 >> 0xc))) && (uVar26 != 0xffff)) {
            puVar3 = (ushort *)(*(int *)(DAT_800785d4 + 0xc) + uVar26 * 2);
            uVar26 = *puVar3 & 0x7fff;
            while (puVar3 = puVar3 + 1, -1 < (int)uVar26) {
              puVar10 = (uint *)(uVar26 * 0xc + *(int *)(DAT_800785d4 + 0x10));
              uVar7 = *puVar10;
              iVar1 = (int)uVar7 >> 0x17;
              iVar2 = (int)(uVar7 << 9) >> 0x17;
              uVar7 = uVar7 & 0x3fff;
              iVar13 = uVar7 - uVar21;
              if (uVar7 != uVar21) {
                if (iVar13 < 0) {
                  if ((-1 < iVar13 + iVar1) || (-1 < iVar13 + iVar2)) goto LAB_8004e0b8;
                }
                else if ((iVar13 + iVar1 < 1) || (iVar13 + iVar2 < 1)) goto LAB_8004e0b8;
                goto LAB_8004e04c;
              }
LAB_8004e0b8:
              uVar8 = puVar10[1];
              iVar13 = (int)uVar8 >> 0x17;
              iVar4 = (int)(uVar8 << 9) >> 0x17;
              uVar8 = uVar8 & 0x3fff;
              iVar14 = uVar8 - uVar23;
              if (uVar8 == uVar23) {
LAB_8004e108:
                uVar11 = puVar10[2];
                uVar9 = uVar11 & 0x3fff;
                if (((int)(uVar9 - (uVar24 >> 4)) < 1) &&
                   (uVar6 = uVar11 >> 0x10 & 0xff,
                   (int)((iVar19 - uVar9) - uVar6 | (iVar19 - uVar9) - (uVar11 >> 0x18)) < 1)) {
                  gte_ldsv_(iVar2,iVar4,uVar6);
                  gte_ldR11R12(iVar1);
                  gte_ldR22R23(iVar13);
                  gte_ldR33(uVar11 >> 0x18);
                  iVar14 = uVar21 - uVar7;
                  iVar15 = uVar23 - uVar8;
                  gte_op0_b(0);
                  iVar18 = gte_stMAC3();
                  iVar17 = gte_stMAC2();
                  iVar16 = gte_stMAC1();
                  if (0 < iVar18) {
                    gte_ldIR1(iVar14);
                    gte_ldIR2(iVar15);
                    gte_ldR11R12(iVar1);
                    gte_ldR22R23(iVar13);
                    gte_op0(0);
                    iVar12 = gte_stMAC3();
                    if (-1 < iVar12) {
                      gte_ldIR1(iVar2);
                      gte_ldIR2(iVar4);
                      gte_ldR11R12(iVar14);
                      gte_ldR22R23(iVar15);
                      gte_op0(0);
                      iVar12 = gte_stMAC3();
                      if (-1 < iVar12) {
                        gte_ldIR1(iVar14 - iVar1);
                        gte_ldIR2(iVar15 - iVar13);
                        gte_ldR11R12(iVar2 - iVar1);
                        gte_ldR22R23(iVar4 - iVar13);
                        gte_op0(0);
                        iVar1 = gte_stMAC3();
                        if (-1 < iVar1) {
                          iVar1 = uVar9 + (((-(iVar15 * (iVar17 >> 2)) - iVar14 * (iVar16 >> 2)) *
                                           0x10) / (iVar18 >> 2) >> 4);
                          if ((0 < (int)((uVar24 >> 4) - iVar1)) && (iVar19 - iVar1 < 0)) {
                            DAT_80075844 = (uint)*(byte *)(*(int *)(DAT_800785d4 + 0x14) + uVar26);
                            iVar19 = iVar1;
                          }
                        }
                      }
                    }
                  }
                }
              }
              else if (iVar14 < 0) {
                if ((-1 < iVar14 + iVar13) || (-1 < iVar14 + iVar4)) goto LAB_8004e108;
              }
              else if ((iVar14 + iVar13 < 1) || (iVar14 + iVar4 < 1)) goto LAB_8004e108;
LAB_8004e04c:
              uVar26 = (uint)(short)*puVar3;
            }
          }
        }
      }
    }
  }
  iVar1 = iVar19 << 4;
  if (iVar19 < 1) {
    DAT_80075844 = 0xffffffff;
    iVar1 = 0;
  }
  return iVar1;
}



undefined4 FUN_8004e2e8(int *param_1,int param_2,uint param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  param_2 = param_2 + 0x164;
  iVar1 = *param_1 - spyro.position.x;
  iVar2 = iVar1 - param_2;
  if (iVar1 < 0) {
    iVar1 = -iVar1;
    iVar2 = iVar1 - param_2;
  }
  if (iVar2 < 1) {
    iVar2 = param_1[1] - spyro.position.y;
    iVar3 = iVar2 - param_2;
    if (iVar2 < 0) {
      iVar2 = -iVar2;
      iVar3 = iVar2 - param_2;
    }
    if (iVar3 < 1) {
      iVar3 = param_1[2] - spyro.position.z;
      iVar4 = iVar3 - param_2;
      if (iVar3 < 0) {
        iVar3 = -iVar3;
        iVar4 = iVar3 - param_2;
      }
      if (iVar4 < 1) {
        gte_ldsv_(iVar1,iVar2,iVar3);
        gte_sqr0(0);
        read_mt(iVar1,iVar2,iVar3);
        if ((iVar1 + iVar2 + iVar3) - param_2 * param_2 < 1) {
          param_3 = spyro._44_4_ | param_3;
          spyro.maybe_weirdDamageAnimRelated = (short)param_3;
          spyro.unkown4 = (short)(param_3 >> 0x10);
          return 1;
        }
      }
    }
  }
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4
MobyCollisionRelated(uint *param_1,int param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  ushort *puVar1;
  int *piVar2;
  undefined4 uVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int in_t0;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  undefined4 unaff_s8;
  float fVar12;
  int iVar13;
  undefined4 unaff_retaddr;
  float *pfVar14;
  undefined auStackX_0 [16];
  
  iVar13 = DAT_80075778;
  DAT_80077df8 = &DAT_80075264;
  uVar9 = *param_1;
  uVar10 = param_1[1];
  uVar11 = param_1[2];
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  if (-1 < (int)(uVar9 | uVar10 | uVar11)) {
    uVar4 = uVar9 >> 0xd;
    iVar5 = (uVar10 >> 0xd) * 0x20;
    iVar6 = uVar4 - 1;
    if (((uVar9 & 0x1000) != 0) && (iVar6 = uVar4 + 1, iVar6 == 0x20)) {
      iVar6 = -1;
    }
    iVar8 = iVar5 + -0x20;
    if (((uVar10 & 0x1000) != 0) && (iVar8 = iVar5 + 0x20, iVar8 == 0x400)) {
      iVar8 = -1;
    }
    FLOAT_1f800000 = (float)((uVar4 + iVar5) * 4 + DAT_80075778);
    piVar2 = (int *)&DAT_1f800004;
    if (-1 < iVar6) {
      _DAT_1f800004 = (iVar6 + iVar5) * 4 + DAT_80075778;
      piVar2 = (int *)&DAT_1f800008;
    }
    iVar5 = uVar4 + iVar8;
    if (-1 < iVar8) {
      iVar5 = iVar5 * 4 + DAT_80075778;
      *piVar2 = iVar5;
      piVar2 = piVar2 + 1;
    }
    if ((-1 < iVar6) && (iVar5 = iVar6 + iVar8, -1 < iVar8)) {
      iVar5 = iVar5 * 4 + iVar13;
      *piVar2 = iVar5;
      piVar2 = piVar2 + 1;
    }
    *piVar2 = 0;
    pfVar14 = &FLOAT_1f800000;
    while( true ) {
      fVar12 = *pfVar14;
      pfVar14 = pfVar14 + 1;
      iVar13 = (int)fVar12 + -4;
      if (fVar12 == 0.0) break;
      while( true ) {
        iVar13 = *(int *)(iVar13 + 4);
        if (iVar13 == 0) break;
        if (iVar13 != param_5) {
          iVar6 = *(int *)(iVar13 + 0x10) - uVar10;
          iVar7 = *(int *)(iVar13 + 0x14) - uVar11;
          gte_ldsv_(*(int *)(iVar13 + 0xc) - uVar9,iVar6,iVar7);
          puVar1 = *(ushort **)(iVar13 + 8);
          gte_sqr0_b(0);
          if (puVar1 != (ushort *)0x0) {
            read_mt(iVar8,iVar5,in_t0);
            if ((int)((iVar8 + iVar5 + in_t0) -
                     ((uint)*puVar1 + param_2) * ((uint)*puVar1 + param_2)) < 0) {
                    // WARNING: Could not recover jumptable at 0x8004e5b0. Too many branches
                    // WARNING: Treating indirect jump as call
              uVar3 = (*(code *)(&UNK_8004e5b8 + ((*(uint *)(puVar1 + 2) & 0xff00) >> 5)))
                                (iVar6,iVar7);
              return uVar3;
            }
          }
        }
      }
    }
  }
  return 0;
}



undefined8 DrawSkybox(int param_1,undefined4 *param_2,undefined4 *param_3)

{
  uint uVar1;
  int iVar2;
  undefined2 *puVar3;
  uint uVar4;
  uint uVar5;
  float fVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  uint uVar9;
  undefined4 *puVar10;
  undefined4 *puVar11;
  undefined4 uVar12;
  undefined4 unaff_s0;
  uint uVar13;
  undefined4 uVar14;
  undefined4 unaff_s1;
  uint *puVar15;
  uint *puVar16;
  undefined4 unaff_s2;
  uint uVar17;
  undefined4 unaff_s3;
  int iVar18;
  undefined4 unaff_s4;
  int iVar19;
  undefined4 unaff_s5;
  int iVar20;
  uint *puVar21;
  uint *puVar22;
  undefined4 unaff_s6;
  int iVar23;
  undefined4 unaff_s7;
  float *pfVar24;
  uint uVar25;
  undefined4 unaff_s8;
  undefined *puVar26;
  undefined *puVar27;
  undefined4 unaff_retaddr;
  int *piVar28;
  undefined auStackX_0 [16];
  
  DAT_80077df8 = &DAT_80075264;
  gte_ldR11R12(*param_2);
  gte_ldR13R21(param_2[1]);
  gte_ldR22R23(param_2[2]);
  gte_ldR31R32(param_2[3]);
  gte_ldR33(param_2[4]);
  gte_ldtr(0,0,0);
  puVar10 = &DAT_8006fcf4;
  puVar7 = DAT_80078a44;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  if (param_1 < 0) {
    puVar8 = DAT_80078a44 + DAT_80078a40;
  }
  else {
    puVar8 = *(undefined4 **)(DAT_80078a4c + param_1 * 4);
    puVar10 = &DAT_8006fcf4;
  }
  do {
    if (param_1 < 0) {
      puVar11 = (undefined4 *)*puVar7;
      if (puVar7 == puVar8) {
LAB_8004ece0:
        *puVar10 = 0;
        puVar3 = (undefined2 *)param_3[1];
        uVar5 = param_3[2];
        gte_ldR11R12(*param_3);
        gte_ldR13R21(puVar3);
        gte_ldR22R23(uVar5);
        gte_ldR31R32(param_3[3]);
        gte_ldR33(param_3[4]);
        piVar28 = &DAT_8006fcf4;
        puVar26 = (undefined *)((int)ptr_graphicsRelated + 4);
        uVar25 = 0;
        iVar2 = DAT_80075780 + -0x400;
        puVar27 = puVar26;
        do {
          do {
            iVar18 = *piVar28;
            piVar28 = piVar28 + 1;
            puVar15 = ptr_graphicsRelated;
            if (iVar18 == 0) {
LAB_8004ef78:
              iVar2 = ptr_maybe_graphicsArray2;
              ptr_graphicsRelated = (uint *)puVar27;
              if (puVar27 != puVar26) {
                puVar3 = *(undefined2 **)(ptr_maybe_graphicsArray2 + 0x3ff8);
                *puVar15 = uVar25 ^ 0x80000000;
                *(uint **)(iVar2 + 0x3ff8) = puVar15;
                if (puVar3 == (undefined2 *)0x0) {
                  *(undefined **)(iVar2 + 0x3ffc) = puVar26;
                }
                else {
                  uVar5 = (uint)puVar26 >> 0x10;
                  *puVar3 = (short)puVar26;
                  *(char *)(puVar3 + 1) = (char)((uint)puVar26 >> 0x10);
                }
              }
              return CONCAT44(uVar5,puVar3);
            }
            iVar23 = *(int *)(iVar18 + 8) >> 0x10;
            iVar20 = (int)(short)*(int *)(iVar18 + 8);
            iVar19 = (int)*(uint *)(iVar18 + 0xc) >> 0x10;
            puVar15 = (uint *)(iVar18 + 0x18);
            uVar17 = *(uint *)(iVar18 + 0xc) & 0xffff;
            uVar9 = *(uint *)(iVar18 + 0x10);
            pfVar24 = &FLOAT_1f800000;
            uVar13 = 0xffffffff;
            uVar5 = *puVar15;
            gte_ldVZ0((uVar5 >> 0x15) + iVar19);
            gte_ldVXY0((iVar20 - (uVar5 >> 10 & 0x7ff)) + (iVar23 - (uVar5 & 0x3ff)) * 0x10000);
            uVar1 = *(uint *)(iVar18 + 0x1c);
            puVar16 = (uint *)(iVar18 + 0x20);
            do {
              gte_rtps_b();
              uVar4 = uVar1 >> 0x15;
              uVar5 = (iVar20 - (uVar1 >> 10 & 0x7ff)) + (iVar23 - (uVar1 & 0x3ff)) * 0x10000;
              uVar1 = *puVar16;
              gte_ldVZ0(uVar4 + iVar19);
              puVar3 = (undefined2 *)gte_stSXY2();
              gte_ldVXY0(uVar5);
              fVar6 = (float)((int)puVar3 * 0x20);
              if ((int)(puVar3 + -0x8000) < 1) {
                fVar6 = (float)((int)fVar6 + 1);
              }
              if (-1 < (int)(puVar3 + -0x800000)) {
                fVar6 = (float)((int)fVar6 + 2);
              }
              if ((int)puVar3 * 0x10000 < 1) {
                fVar6 = (float)((int)fVar6 + 4);
              }
              puVar16 = puVar16 + 1;
              if (-1 < (int)puVar3 * 0x10000 + -0x2000000) {
                fVar6 = (float)((int)fVar6 + 8);
              }
              uVar13 = uVar13 & (uint)fVar6;
              *pfVar24 = fVar6;
              pfVar24 = pfVar24 + 1;
            } while (puVar16 != puVar15 + uVar17 + 2);
          } while ((uVar13 & 0xf) != 0);
          puVar21 = (uint *)((int)puVar15 + (uVar9 >> 0xe) + uVar17 * 4);
          puVar16 = puVar21;
          while( true ) {
            uVar1 = *puVar16;
            puVar22 = puVar16 + 2;
            if (puVar16 == puVar21 + (uVar9 & 0x1fff) * 2) break;
            if (iVar2 - (int)puVar27 < 1) {
              puVar3 = (undefined2 *)0x1;
              DAT_800758b0 = 1;
              puVar15 = ptr_graphicsRelated;
              goto LAB_8004ef78;
            }
            uVar13 = *(uint *)((uVar1 >> 0x14) + 0x1f800000);
            puVar3 = *(undefined2 **)((uVar1 >> 10 & 0x3fc) + 0x1f800000);
            uVar5 = *(uint *)((uVar1 & 0x3fc) + 0x1f800000);
            uVar1 = puVar16[1];
            puVar16 = puVar22;
            if ((uVar13 & (uint)puVar3 & uVar5 & 0x1f) == 0) {
              *ptr_graphicsRelated = uVar25 ^ (uint)puVar27;
              iVar18 = (int)uVar13 >> 5;
              puVar3 = (undefined2 *)((int)puVar3 >> 5);
              uVar5 = (int)uVar5 >> 5;
              *(int *)(puVar27 + 8) = iVar18;
              *(undefined2 **)(puVar27 + 0x10) = puVar3;
              *(uint *)(puVar27 + 0x18) = uVar5;
              uVar13 = uVar1 >> 0x14;
              uVar25 = uVar1 >> 10 & 0x3fc;
              ptr_graphicsRelated = (uint *)puVar27;
              if ((uVar13 == uVar25) && (uVar13 == (uVar1 & 0x3fc))) {
                uVar25 = 0x84000000;
                *(int *)(puVar27 + 4) = *(int *)((int)puVar15 + uVar13 + uVar17 * 4) + -0x10000000;
                *(int *)(puVar27 + 8) = iVar18;
                *(undefined2 **)(puVar27 + 0xc) = puVar3;
                *(uint *)(puVar27 + 0x10) = uVar5;
                puVar27 = puVar27 + 0x14;
              }
              else {
                uVar12 = *(undefined4 *)((int)puVar15 + uVar25 + uVar17 * 4);
                uVar14 = *(undefined4 *)((int)puVar15 + (uVar1 & 0x3fc) + uVar17 * 4);
                uVar25 = 0x86000000;
                *(undefined4 *)(puVar27 + 4) = *(undefined4 *)((int)puVar15 + uVar13 + uVar17 * 4);
                *(undefined4 *)(puVar27 + 0xc) = uVar12;
                *(undefined4 *)(puVar27 + 0x14) = uVar14;
                puVar27 = puVar27 + 0x1c;
              }
            }
          }
        } while( true );
      }
      puVar7 = puVar7 + 1;
    }
    else {
      if (*(byte *)puVar8 == 0xff) goto LAB_8004ece0;
      puVar11 = (undefined4 *)puVar7[*(byte *)puVar8];
      puVar8 = (undefined4 *)((int)puVar8 + 1);
    }
    gte_ldVXY0(*puVar11);
    gte_ldVZ0((int)puVar11[1] >> 0x10);
    gte_rtps_b();
    gte_stSZ3();
    iVar2 = gte_stMAC3();
    if (0 < iVar2 - (short)puVar11[1]) {
      *puVar10 = puVar11;
      puVar10 = puVar10 + 1;
    }
  } while( true );
}



undefined8 BalloonTransitionSkyChangeRelated(void)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  undefined2 *puVar5;
  undefined4 *puVar6;
  float fVar7;
  undefined4 uVar8;
  undefined4 *puVar9;
  uint uVar10;
  undefined4 *puVar11;
  undefined4 *puVar12;
  undefined4 unaff_s0;
  uint uVar13;
  undefined4 uVar14;
  undefined4 unaff_s1;
  uint *puVar15;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  int iVar16;
  undefined4 unaff_s4;
  int iVar17;
  undefined4 unaff_s5;
  int iVar18;
  uint *puVar19;
  uint *puVar20;
  undefined4 unaff_s6;
  int iVar21;
  undefined4 unaff_s7;
  float *pfVar22;
  uint uVar23;
  undefined4 unaff_s8;
  undefined *puVar24;
  undefined *puVar25;
  undefined4 unaff_retaddr;
  int *piVar26;
  undefined auStackX_0 [16];
  
  DAT_80077df8 = &DAT_80075264;
  gte_ldR11R12(gCamera6.R12R11);
  gte_ldR13R21(gCamera6.R21R13);
  gte_ldR22R23(gCamera6.R23R22);
  gte_ldR31R32(gCamera6.R32R31);
  gte_ldR33(gCamera6.R33);
  gte_ldtr(0,0,0);
  puVar11 = &DAT_8006fcf4;
  puVar9 = DAT_80078a44 + DAT_80078a40;
  puVar6 = DAT_80078a44;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  while (puVar12 = (undefined4 *)*puVar6, puVar6 != puVar9) {
    puVar6 = puVar6 + 1;
    gte_ldVXY0(*puVar12);
    gte_ldVZ0((int)puVar12[1] >> 0x10);
    gte_rtps_b();
    gte_stSZ3();
    iVar3 = gte_stMAC3();
    if (0 < iVar3 - (short)puVar12[1]) {
      *puVar11 = puVar12;
      puVar11 = puVar11 + 1;
    }
  }
  *puVar11 = 0;
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  piVar26 = &DAT_8006fcf4;
  puVar24 = (undefined *)((int)ptr_graphicsRelated + 4);
  uVar23 = 0;
  iVar3 = DAT_80075780 + -0x400;
  puVar5 = (undefined2 *)gCamera1.R21R13;
  uVar1 = gCamera1.R23R22;
  puVar25 = puVar24;
  do {
    do {
      iVar16 = *piVar26;
      piVar26 = piVar26 + 1;
      puVar15 = ptr_graphicsRelated;
      if (iVar16 == 0) {
LAB_8004f434:
        iVar3 = ptr_maybe_graphicsArray2;
        ptr_graphicsRelated = (uint *)puVar25;
        if (puVar25 != puVar24) {
          puVar5 = *(undefined2 **)(ptr_maybe_graphicsArray2 + 0x3ff8);
          *puVar15 = uVar23 ^ 0x80000000;
          *(uint **)(iVar3 + 0x3ff8) = puVar15;
          if (puVar5 == (undefined2 *)0x0) {
            *(undefined **)(iVar3 + 0x3ffc) = puVar24;
          }
          else {
            uVar1 = (uint)puVar24 >> 0x10;
            *puVar5 = (short)puVar24;
            *(char *)(puVar5 + 1) = (char)((uint)puVar24 >> 0x10);
          }
        }
        return CONCAT44(uVar1,puVar5);
      }
      iVar21 = *(int *)(iVar16 + 8) >> 0x10;
      iVar18 = (int)(short)*(int *)(iVar16 + 8);
      iVar17 = (int)*(uint *)(iVar16 + 0xc) >> 0x10;
      puVar19 = (uint *)(iVar16 + 0x18) + (*(uint *)(iVar16 + 0xc) & 0xffff);
      uVar10 = *(uint *)(iVar16 + 0x10);
      pfVar22 = &FLOAT_1f800000;
      uVar13 = 0xffffffff;
      puVar6 = &DAT_800724f4;
      gte_ldBFC((DAT_800757d4 >> 0x10 & 0xff) << 4);
      gte_ldRFC((DAT_800757d4 & 0xff) << 4);
      gte_ldGFC((DAT_800757d4 >> 8 & 0xff) << 4);
      gte_ldIR0(DAT_8007575c);
      puVar15 = puVar19 + 1;
      gte_ldRGB(*puVar19);
      do {
        gte_dpcs_b();
        uVar1 = *puVar15;
        uVar8 = gte_stRGB2();
        puVar15 = puVar15 + 1;
        *puVar6 = uVar8;
        gte_ldRGB(uVar1);
        puVar6 = puVar6 + 1;
      } while ((uint *)((int)puVar19 + (uVar10 >> 0xe) + 4) != puVar15);
      uVar1 = *(uint *)(iVar16 + 0x18);
      gte_ldVZ0((uVar1 >> 0x15) + iVar17);
      gte_ldVXY0((iVar18 - (uVar1 >> 10 & 0x7ff)) + (iVar21 - (uVar1 & 0x3ff)) * 0x10000);
      uVar2 = *(uint *)(iVar16 + 0x1c);
      puVar15 = (uint *)(iVar16 + 0x20);
      do {
        gte_rtps_b();
        uVar4 = uVar2 >> 0x15;
        uVar1 = (iVar18 - (uVar2 >> 10 & 0x7ff)) + (iVar21 - (uVar2 & 0x3ff)) * 0x10000;
        uVar2 = *puVar15;
        gte_ldVZ0(uVar4 + iVar17);
        puVar5 = (undefined2 *)gte_stSXY2();
        gte_ldVXY0(uVar1);
        fVar7 = (float)((int)puVar5 * 0x20);
        if ((int)(puVar5 + -0x8000) < 1) {
          fVar7 = (float)((int)fVar7 + 1);
        }
        if (-1 < (int)(puVar5 + -0x800000)) {
          fVar7 = (float)((int)fVar7 + 2);
        }
        if ((int)puVar5 * 0x10000 < 1) {
          fVar7 = (float)((int)fVar7 + 4);
        }
        puVar15 = puVar15 + 1;
        if (-1 < (int)puVar5 * 0x10000 + -0x2000000) {
          fVar7 = (float)((int)fVar7 + 8);
        }
        uVar13 = uVar13 & (uint)fVar7;
        *pfVar22 = fVar7;
        pfVar22 = pfVar22 + 1;
      } while (puVar15 != puVar19 + 2);
    } while ((uVar13 & 0xf) != 0);
    puVar19 = (uint *)((uVar10 >> 0xe) + (int)puVar19);
    puVar15 = puVar19;
    while( true ) {
      uVar13 = *puVar15;
      puVar20 = puVar15 + 2;
      if (puVar15 == puVar19 + (uVar10 & 0x1fff) * 2) break;
      if (iVar3 - (int)puVar25 < 1) {
        puVar5 = (undefined2 *)0x1;
        DAT_800758b0 = 1;
        puVar15 = ptr_graphicsRelated;
        goto LAB_8004f434;
      }
      uVar2 = *(uint *)((uVar13 >> 0x14) + 0x1f800000);
      puVar5 = *(undefined2 **)((uVar13 >> 10 & 0x3fc) + 0x1f800000);
      uVar1 = *(uint *)((uVar13 & 0x3fc) + 0x1f800000);
      uVar13 = puVar15[1];
      puVar15 = puVar20;
      if ((uVar2 & (uint)puVar5 & uVar1 & 0x1f) == 0) {
        *ptr_graphicsRelated = uVar23 ^ (uint)puVar25;
        iVar16 = (int)uVar2 >> 5;
        puVar5 = (undefined2 *)((int)puVar5 >> 5);
        uVar1 = (int)uVar1 >> 5;
        *(int *)(puVar25 + 8) = iVar16;
        *(undefined2 **)(puVar25 + 0x10) = puVar5;
        *(uint *)(puVar25 + 0x18) = uVar1;
        uVar2 = uVar13 >> 0x14;
        uVar23 = uVar13 >> 10 & 0x3fc;
        ptr_graphicsRelated = (uint *)puVar25;
        if ((uVar2 == uVar23) && (uVar2 == (uVar13 & 0x3fc))) {
          uVar23 = 0x84000000;
          *(int *)(puVar25 + 4) = *(int *)((int)&DAT_800724f4 + uVar2) + -0x10000000;
          *(int *)(puVar25 + 8) = iVar16;
          *(undefined2 **)(puVar25 + 0xc) = puVar5;
          *(uint *)(puVar25 + 0x10) = uVar1;
          puVar25 = puVar25 + 0x14;
        }
        else {
          uVar8 = *(undefined4 *)((int)&DAT_800724f4 + uVar23);
          uVar14 = *(undefined4 *)((int)&DAT_800724f4 + (uVar13 & 0x3fc));
          uVar23 = 0x86000000;
          *(undefined4 *)(puVar25 + 4) = *(undefined4 *)((int)&DAT_800724f4 + uVar2);
          *(undefined4 *)(puVar25 + 0xc) = uVar8;
          *(undefined4 *)(puVar25 + 0x14) = uVar14;
          puVar25 = puVar25 + 0x1c;
        }
      }
    }
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x8004fd20)
// WARNING: Removing unreachable block (ram,0x8004fd68)
// WARNING: Removing unreachable block (ram,0x8004fd58)

uint DrawPortalSkyBox(int *param_1,undefined4 *param_2,undefined4 *param_3)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  float fVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  undefined4 *puVar11;
  undefined4 *puVar12;
  undefined4 *puVar13;
  undefined4 *puVar14;
  undefined4 unaff_s0;
  uint uVar15;
  undefined4 unaff_s1;
  uint *puVar16;
  uint *puVar17;
  undefined4 unaff_s2;
  uint uVar18;
  undefined4 unaff_s3;
  int iVar19;
  undefined4 unaff_s4;
  int iVar20;
  undefined4 unaff_s5;
  int iVar21;
  undefined4 unaff_s6;
  int iVar22;
  undefined4 unaff_s7;
  float *pfVar23;
  uint uVar24;
  undefined4 unaff_s8;
  int iVar25;
  undefined4 unaff_retaddr;
  int *piVar26;
  undefined auStackX_0 [16];
  
  DAT_80077df8 = &DAT_80075264;
  gte_ldR11R12(*param_2);
  gte_ldR13R21(param_2[1]);
  gte_ldR22R23(param_2[2]);
  gte_ldR31R32(param_2[3]);
  gte_ldR33(param_2[4]);
  gte_ldtr(0,0,0);
  puVar11 = (undefined4 *)param_1[1];
  puVar13 = &DAT_8006fcf4;
  puVar12 = puVar11 + *param_1;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  while (puVar14 = (undefined4 *)*puVar11, puVar11 != puVar12) {
    puVar11 = puVar11 + 1;
    gte_ldVXY0(*puVar14);
    gte_ldVZ0((int)puVar14[1] >> 0x10);
    gte_rtps_b();
    gte_stSZ3();
    iVar3 = gte_stMAC3();
    if (0 < iVar3 - (short)puVar14[1]) {
      *puVar13 = puVar14;
      puVar13 = puVar13 + 1;
    }
  }
  *puVar13 = 0;
  uVar4 = param_3[1];
  gte_ldR11R12(*param_3);
  gte_ldR13R21(uVar4);
  gte_ldR22R23(param_3[2]);
  gte_ldR31R32(param_3[3]);
  gte_ldR33(param_3[4]);
  iVar25 = ptr_graphicsRelated + 4;
  iVar3 = DAT_8007aa0c;
  iVar8 = DAT_8007aa00;
  iVar9 = DAT_8007aa04;
  iVar10 = DAT_8007aa08;
  piVar26 = &DAT_8006fcf4;
  while( true ) {
    iVar19 = *piVar26;
    piVar26 = piVar26 + 1;
    if (iVar19 == 0) break;
    iVar22 = *(int *)(iVar19 + 8) >> 0x10;
    iVar21 = (int)(short)*(int *)(iVar19 + 8);
    iVar20 = (int)*(uint *)(iVar19 + 0xc) >> 0x10;
    puVar16 = (uint *)(iVar19 + 0x18);
    uVar18 = *(uint *)(iVar19 + 0xc) & 0xffff;
    uVar24 = *(uint *)(iVar19 + 0x10);
    pfVar23 = &FLOAT_1f800000;
    uVar15 = 0xffffffff;
    uVar4 = *puVar16;
    gte_ldVZ0((uVar4 >> 0x15) + iVar20);
    gte_ldVXY0((iVar21 - (uVar4 >> 10 & 0x7ff)) + (iVar22 - (uVar4 & 0x3ff)) * 0x10000);
    uVar2 = *(uint *)(iVar19 + 0x1c);
    puVar17 = (uint *)(iVar19 + 0x20);
    do {
      gte_rtps_b();
      uVar4 = uVar2 >> 0x15;
      uVar5 = uVar2 >> 10;
      uVar6 = uVar2 & 0x3ff;
      uVar2 = *puVar17;
      gte_ldVZ0(uVar4 + iVar20);
      uVar4 = gte_stSXY2();
      gte_ldVXY0((iVar21 - (uVar5 & 0x7ff)) + (iVar22 - uVar6) * 0x10000);
      fVar7 = (float)(uVar4 * 0x20);
      if ((int)(uVar4 - iVar8) < 1) {
        fVar7 = (float)((int)fVar7 + 1);
      }
      if (-1 < (int)(uVar4 - iVar9)) {
        fVar7 = (float)((int)fVar7 + 2);
      }
      if ((int)(uVar4 * 0x10000 - iVar3) < 1) {
        fVar7 = (float)((int)fVar7 + 4);
      }
      puVar17 = puVar17 + 1;
      if (-1 < (int)(uVar4 * 0x10000 - iVar10)) {
        fVar7 = (float)((int)fVar7 + 8);
      }
      uVar15 = uVar15 & (uint)fVar7;
      *pfVar23 = fVar7;
      pfVar23 = pfVar23 + 1;
    } while (puVar17 != puVar16 + uVar18 + 2);
    if ((uVar15 & 0xf) == 0) {
      puVar16 = (uint *)((int)puVar16 + (uVar24 >> 0xe) + uVar18 * 4);
      puVar17 = puVar16 + (uVar24 & 0x1fff) * 2;
      DAT_80077e2c = piVar26;
      while (uVar2 = *puVar16, puVar16 != puVar17) {
        puVar16 = puVar16 + 2;
        uVar4 = *(uint *)((uVar2 >> 10 & 0x3fc) + 0x1f800000);
        if ((*(uint *)((uVar2 >> 0x14) + 0x1f800000) & uVar4 &
             *(uint *)((uVar2 & 0x3fc) + 0x1f800000) & 0x1f) == 0) {
          uVar4 = FUN_8004f7e8();
        }
      }
      while (bVar1 = DAT_80075798 != &DAT_800704f4, DAT_80075798 = DAT_80075798 + -7, bVar1) {
        uVar4 = FUN_8004f7e8();
      }
      DAT_80075798 = &DAT_800704f4;
      piVar26 = DAT_80077e2c;
    }
  }
  ptr_graphicsRelated = iVar25;
  return uVar4;
}



void FUN_8004f7e8(void)

{
  undefined4 in_at;
  undefined4 in_v0;
  undefined4 in_v1;
  int iVar1;
  uint uVar2;
  int *in_t2;
  int in_t6;
  int in_t7;
  int unaff_s0;
  int unaff_s1;
  int unaff_s8;
  
  if (*in_t2 != 0) {
    gte_ldSXY0(in_t2[1]);
    gte_ldSXY1(in_t2[2]);
    gte_ldSXY2(in_at);
    gte_nclip();
    uVar2 = 0;
    iVar1 = gte_stMAC0();
    if (iVar1 < 1) {
      uVar2 = 8;
    }
    gte_ldSXY2(in_v0);
    gte_nclip();
    iVar1 = gte_stMAC0();
    if (iVar1 < 1) {
      uVar2 = uVar2 | 0x10;
    }
    gte_ldSXY2(in_v1);
    gte_nclip();
    iVar1 = gte_stMAC0();
    if (iVar1 < 1) {
      uVar2 = uVar2 | 0x20;
    }
                    // WARNING: Could not recover jumptable at 0x8004f888. Too many branches
                    // WARNING: Treating indirect jump as call
    (*(code *)(&UNK_8004f890 + uVar2))();
    return;
  }
  if ((in_t6 == in_t7) && (in_t6 == unaff_s0)) {
    *(int *)(unaff_s8 + 4) = in_t6 - unaff_s1;
    *(undefined4 *)(unaff_s8 + 8) = in_at;
    *(undefined4 *)(unaff_s8 + 0xc) = in_v0;
    *(undefined4 *)(unaff_s8 + 0x10) = in_v1;
    return;
  }
  *(undefined4 *)(unaff_s8 + 8) = in_at;
  *(undefined4 *)(unaff_s8 + 0x10) = in_v0;
  *(undefined4 *)(unaff_s8 + 0x18) = in_v1;
  *(int *)(unaff_s8 + 4) = in_t6;
  *(int *)(unaff_s8 + 0xc) = in_t7;
  *(int *)(unaff_s8 + 0x14) = unaff_s0;
  return;
}



undefined8 FUN_8004fdac(int param_1,int param_2,undefined4 param_3,uint param_4)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  int in_t2;
  int iVar5;
  
  gte_ldRGB(param_3);
  iVar1 = (int)(short)param_1;
  uVar2 = param_1 >> 0x10;
  iVar3 = (short)param_2 - iVar1;
  uVar4 = (param_2 >> 0x10) - uVar2;
  gte_ldfcdir((param_4 & 0xff) << 4,(param_4 >> 8 & 0xff) << 4,(param_4 >> 0x10 & 0xff) << 4);
  iVar5 = *(int *)(in_t2 + 0x10) * uVar4;
  gte_ldMAC1(iVar1);
  gte_ldMAC2(uVar2);
  gte_ldIR1(iVar3);
  gte_ldIR2(uVar4);
  iVar3 = *(int *)(in_t2 + 0xc) * iVar3 + iVar5;
  if (iVar3 != 0) {
    gte_ldIR0(((int)((*(int *)(in_t2 + 0xc) * iVar1 + *(int *)(in_t2 + 0x14) +
                     *(int *)(in_t2 + 0x10) * uVar2) * 0x80 + 0x40) / iVar3) * -0x20 + 0x10);
    gte_gpl12();
    gte_stMAC1();
    iVar5 = gte_stMAC2();
    gte_dpcs_b();
    uVar2 = 0x30000000;
    uVar4 = gte_stRGB2();
  }
  return CONCAT44(iVar5,uVar2 | uVar4);
}



void FUN_8004fea0(void)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  int iVar3;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  
  uVar1 = ptr_graphicsRelated;
  DAT_80077df8 = &DAT_80075264;
  iVar3 = 2;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  while (0 < iVar3) {
    iVar3 = iVar3 + -1;
    FUN_8004ff90();
  }
  puVar2 = &DAT_800704f4;
  while (puVar2 != &DAT_800704f4) {
    puVar2 = puVar2 + 4;
    FUN_8004ff90();
  }
  ptr_graphicsRelated = uVar1;
  return;
}



void FUN_8004ff90(void)

{
  int iVar1;
  undefined2 *puVar2;
  uint uVar3;
  undefined4 in_t1;
  int *in_t2;
  undefined4 in_t4;
  undefined4 in_t5;
  undefined4 in_t6;
  undefined4 *unaff_s2;
  int *unaff_s3;
  undefined4 unaff_s4;
  
  if (*in_t2 != 0) {
    gte_ldSXY1(in_t2[2]);
    gte_ldSXY0(in_t2[1]);
    gte_ldSXY2(in_t4);
    gte_nclip();
    iVar1 = gte_stMAC0();
    uVar3 = 0;
    if (iVar1 < 1) {
      uVar3 = 8;
    }
    gte_ldSXY2(in_t5);
    gte_nclip();
    iVar1 = gte_stMAC0();
    if (iVar1 < 1) {
      uVar3 = uVar3 | 0x10;
    }
    gte_ldSXY2(in_t6);
    gte_nclip();
    iVar1 = gte_stMAC0();
    if (iVar1 < 1) {
      uVar3 = uVar3 | 0x20;
    }
                    // WARNING: Could not recover jumptable at 0x80050020. Too many branches
                    // WARNING: Treating indirect jump as call
    (*(code *)(&UNK_80050028 + uVar3))();
    return;
  }
  *unaff_s2 = unaff_s4;
  unaff_s2[1] = in_t1;
  unaff_s2[2] = in_t4;
  unaff_s2[3] = in_t5;
  puVar2 = (undefined2 *)*unaff_s3;
  unaff_s2[4] = in_t6;
  *unaff_s3 = (int)unaff_s2;
  if (puVar2 == (undefined2 *)0x0) {
    unaff_s3[1] = (int)unaff_s2;
  }
  else {
    *puVar2 = (short)unaff_s2;
    *(char *)(puVar2 + 1) = (char)((uint)unaff_s2 >> 0x10);
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x80050b44)
// WARNING: Removing unreachable block (ram,0x80050b8c)
// WARNING: Removing unreachable block (ram,0x80050b7c)

uint PortalCrossFade(int *param_1,undefined4 *param_2,undefined4 *param_3)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  float fVar7;
  undefined4 uVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  undefined4 *puVar12;
  undefined4 *puVar13;
  undefined4 *puVar14;
  undefined4 *puVar15;
  undefined4 unaff_s0;
  uint uVar16;
  undefined4 unaff_s1;
  uint *puVar17;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  int iVar18;
  undefined4 unaff_s4;
  int iVar19;
  undefined4 unaff_s5;
  int iVar20;
  uint *puVar21;
  undefined4 unaff_s6;
  int iVar22;
  undefined4 unaff_s7;
  float *pfVar23;
  uint uVar24;
  undefined4 unaff_s8;
  int iVar25;
  undefined4 unaff_retaddr;
  int *piVar26;
  undefined auStackX_0 [16];
  
  DAT_80077df8 = &DAT_80075264;
  gte_ldR11R12(*param_2);
  gte_ldR13R21(param_2[1]);
  gte_ldR22R23(param_2[2]);
  gte_ldR31R32(param_2[3]);
  gte_ldR33(param_2[4]);
  gte_ldtr(0,0,0);
  puVar12 = (undefined4 *)param_1[1];
  puVar14 = &DAT_8006fcf4;
  puVar13 = puVar12 + *param_1;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  while (puVar15 = (undefined4 *)*puVar12, puVar12 != puVar13) {
    puVar12 = puVar12 + 1;
    gte_ldVXY0(*puVar15);
    gte_ldVZ0((int)puVar15[1] >> 0x10);
    gte_rtps_b();
    gte_stSZ3();
    iVar3 = gte_stMAC3();
    if (0 < iVar3 - (short)puVar15[1]) {
      *puVar14 = puVar15;
      puVar14 = puVar14 + 1;
    }
  }
  *puVar14 = 0;
  uVar4 = param_3[1];
  gte_ldR11R12(*param_3);
  gte_ldR13R21(uVar4);
  gte_ldR22R23(param_3[2]);
  gte_ldR31R32(param_3[3]);
  gte_ldR33(param_3[4]);
  iVar25 = ptr_graphicsRelated + 4;
  iVar3 = DAT_8007aa0c;
  iVar9 = DAT_8007aa00;
  iVar10 = DAT_8007aa04;
  iVar11 = DAT_8007aa08;
  piVar26 = &DAT_8006fcf4;
  while( true ) {
    iVar18 = *piVar26;
    piVar26 = piVar26 + 1;
    if (iVar18 == 0) break;
    iVar22 = *(int *)(iVar18 + 8) >> 0x10;
    iVar20 = (int)(short)*(int *)(iVar18 + 8);
    iVar19 = (int)*(uint *)(iVar18 + 0xc) >> 0x10;
    puVar21 = (uint *)(iVar18 + 0x18) + (*(uint *)(iVar18 + 0xc) & 0xffff);
    uVar24 = *(uint *)(iVar18 + 0x10);
    pfVar23 = &FLOAT_1f800000;
    uVar16 = 0xffffffff;
    puVar12 = &DAT_800724f4;
    gte_ldBFC((DAT_800757d4 >> 0x10 & 0xff) << 4);
    gte_ldRFC((DAT_800757d4 & 0xff) << 4);
    gte_ldGFC((DAT_800757d4 >> 8 & 0xff) << 4);
    gte_ldIR0(DAT_8007575c);
    puVar17 = puVar21 + 1;
    gte_ldRGB(*puVar21);
    do {
      gte_dpcs_b();
      uVar4 = *puVar17;
      uVar8 = gte_stRGB2();
      puVar17 = puVar17 + 1;
      *puVar12 = uVar8;
      gte_ldRGB(uVar4);
      puVar12 = puVar12 + 1;
    } while ((uint *)((int)puVar21 + (uVar24 >> 0xe) + 4) != puVar17);
    uVar4 = *(uint *)(iVar18 + 0x18);
    gte_ldVZ0((uVar4 >> 0x15) + iVar19);
    gte_ldVXY0((iVar20 - (uVar4 >> 10 & 0x7ff)) + (iVar22 - (uVar4 & 0x3ff)) * 0x10000);
    uVar2 = *(uint *)(iVar18 + 0x1c);
    puVar17 = (uint *)(iVar18 + 0x20);
    do {
      gte_rtps_b();
      uVar4 = uVar2 >> 0x15;
      uVar5 = uVar2 >> 10;
      uVar6 = uVar2 & 0x3ff;
      uVar2 = *puVar17;
      gte_ldVZ0(uVar4 + iVar19);
      uVar4 = gte_stSXY2();
      gte_ldVXY0((iVar20 - (uVar5 & 0x7ff)) + (iVar22 - uVar6) * 0x10000);
      fVar7 = (float)(uVar4 * 0x20);
      if ((int)(uVar4 - iVar9) < 1) {
        fVar7 = (float)((int)fVar7 + 1);
      }
      if (-1 < (int)(uVar4 - iVar10)) {
        fVar7 = (float)((int)fVar7 + 2);
      }
      if ((int)(uVar4 * 0x10000 - iVar3) < 1) {
        fVar7 = (float)((int)fVar7 + 4);
      }
      puVar17 = puVar17 + 1;
      if (-1 < (int)(uVar4 * 0x10000 - iVar11)) {
        fVar7 = (float)((int)fVar7 + 8);
      }
      uVar16 = uVar16 & (uint)fVar7;
      *pfVar23 = fVar7;
      pfVar23 = pfVar23 + 1;
    } while (puVar17 != puVar21 + 2);
    if ((uVar16 & 0xf) == 0) {
      puVar21 = (uint *)((uVar24 >> 0xe) + (int)puVar21);
      puVar17 = puVar21 + (uVar24 & 0x1fff) * 2;
      DAT_80077e2c = piVar26;
      while (uVar16 = *puVar21, puVar21 != puVar17) {
        puVar21 = puVar21 + 2;
        uVar4 = *(uint *)((uVar16 >> 10 & 0x3fc) + 0x1f800000);
        if ((*(uint *)((uVar16 >> 0x14) + 0x1f800000) & uVar4 &
             *(uint *)((uVar16 & 0x3fc) + 0x1f800000) & 0x1f) == 0) {
          uVar4 = FUN_8005060c();
        }
      }
      while (bVar1 = DAT_80075798 != &DAT_800704f4, DAT_80075798 = DAT_80075798 + -7, bVar1) {
        uVar4 = FUN_8005060c();
      }
      DAT_80075798 = &DAT_800704f4;
      piVar26 = DAT_80077e2c;
    }
  }
  ptr_graphicsRelated = iVar25;
  return uVar4;
}



void FUN_8005060c(void)

{
  undefined4 in_at;
  undefined4 in_v0;
  undefined4 in_v1;
  int iVar1;
  uint uVar2;
  int *in_t2;
  int in_t6;
  int in_t7;
  int unaff_s0;
  int unaff_s1;
  int unaff_s8;
  
  if (*in_t2 != 0) {
    gte_ldSXY0(in_t2[1]);
    gte_ldSXY1(in_t2[2]);
    gte_ldSXY2(in_at);
    gte_nclip();
    uVar2 = 0;
    iVar1 = gte_stMAC0();
    if (iVar1 < 1) {
      uVar2 = 8;
    }
    gte_ldSXY2(in_v0);
    gte_nclip();
    iVar1 = gte_stMAC0();
    if (iVar1 < 1) {
      uVar2 = uVar2 | 0x10;
    }
    gte_ldSXY2(in_v1);
    gte_nclip();
    iVar1 = gte_stMAC0();
    if (iVar1 < 1) {
      uVar2 = uVar2 | 0x20;
    }
                    // WARNING: Could not recover jumptable at 0x800506ac. Too many branches
                    // WARNING: Treating indirect jump as call
    (*(code *)(&UNK_800506b4 + uVar2))();
    return;
  }
  if ((in_t6 == in_t7) && (in_t6 == unaff_s0)) {
    *(int *)(unaff_s8 + 4) = in_t6 - unaff_s1;
    *(undefined4 *)(unaff_s8 + 8) = in_at;
    *(undefined4 *)(unaff_s8 + 0xc) = in_v0;
    *(undefined4 *)(unaff_s8 + 0x10) = in_v1;
    return;
  }
  *(undefined4 *)(unaff_s8 + 8) = in_at;
  *(undefined4 *)(unaff_s8 + 0x10) = in_v0;
  *(undefined4 *)(unaff_s8 + 0x18) = in_v1;
  *(int *)(unaff_s8 + 4) = in_t6;
  *(int *)(unaff_s8 + 0xc) = in_t7;
  *(int *)(unaff_s8 + 0x14) = unaff_s0;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void RenderAllSkyBoxes(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  undefined4 *puVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  int iVar16;
  int **ppiVar17;
  MATRIX local_190;
  MATRIX local_170;
  int local_150;
  int local_14c;
  int local_148;
  Vec3 local_140;
  int local_130;
  int local_12c;
  int local_128;
  int local_120;
  int local_11c;
  int local_118;
  undefined local_110;
  undefined local_10f;
  undefined local_10e;
  undefined auStack_108 [32];
  int local_e8 [2];
  int local_e0;
  int local_dc;
  int local_d8;
  int local_d0;
  int local_cc;
  int local_c8;
  undefined local_c0;
  undefined local_bf;
  undefined local_be;
  undefined auStack_b8 [32];
  int local_98;
  int local_90;
  int local_88;
  int local_80;
  int local_78;
  int local_70;
  uint local_68;
  int *local_60;
  int local_30;
  
  levelTimerNoPause_Loads = levelTimerNoPause_Loads + 2 & 0xfff;
  DAT_800758fc = DAT_800758fc + 2 & 0xfff;
  if (0x800 < DAT_800758fc) {
    DAT_800758fc = DAT_800758fc - 0x1000;
  }
  if (0x80 < (int)DAT_800758fc) {
    DAT_800758fc = 0x80;
  }
  memset((uchar *)&local_190,'\0',0x20);
  SetTransMatrix(&local_190);
  local_190.m[0][0] = 0x1000;
  local_190.m[1][1] = CosScaled((int)cameraAngle.pitch - DAT_800758fc);
  local_190.m[2][1] = SinScaled((int)cameraAngle.pitch - DAT_800758fc);
  local_190.m[1][2] = SinScaled((int)cameraAngle.pitch - DAT_800758fc);
  local_190.m[1][2] = -local_190.m[1][2];
  local_190.m[2][2] = CosScaled((int)cameraAngle.pitch - DAT_800758fc);
  memset((uchar *)&local_170,'\0',0x20);
  local_170.m[0][0] = CosScaled((int)cameraAngle.yaw + levelTimerNoPause_Loads);
  local_170.m[2][0] = SinScaled((int)cameraAngle.yaw + levelTimerNoPause_Loads);
  local_170.m[2][0] = -local_170.m[2][0];
  local_170.m[1][1] = 0x1000;
  local_170.m[0][2] = SinScaled((int)cameraAngle.yaw + levelTimerNoPause_Loads);
  local_170.m[2][2] = CosScaled((int)cameraAngle.yaw + levelTimerNoPause_Loads);
  MulMatrix(&local_190,&local_170);
  memset((uchar *)&local_170,'\0',0x20);
  local_170.m[0][0] = CosScaled((int)cameraAngle.roll);
  local_170.m[1][0] = SinScaled((int)cameraAngle.roll);
  local_170.m[1][0] = -local_170.m[1][0];
  local_170.m[0][1] = SinScaled((int)cameraAngle.roll);
  local_170.m[1][1] = CosScaled((int)cameraAngle.roll);
  local_170.m[2][2] = 0x1000;
  MulMatrix(&local_190,&local_170);
  ArrayCopy((int *)&local_170,&local_190,0x14);
  iVar1 = local_190.m[1][0] * 0x140;
  if (iVar1 < 0) {
    iVar1 = iVar1 + 0x1ff;
  }
  local_170.m[1][0] = (short)(iVar1 >> 9);
  iVar1 = local_190.m[1][1] * 0x140;
  if (iVar1 < 0) {
    iVar1 = iVar1 + 0x1ff;
  }
  local_170.m[1][1] = (short)(iVar1 >> 9);
  iVar1 = local_190.m[1][2] * 0x140;
  if (iVar1 < 0) {
    iVar1 = iVar1 + 0x1ff;
  }
  local_98 = 0;
  local_170.m[1][2] = (short)(iVar1 >> 9);
  if (0 < DAT_800758bc) {
    local_60 = &local_150;
    ppiVar17 = (int **)&DAT_80078640;
    local_30 = 0;
    do {
      if (((*ppiVar17)[5] < 0) || (*(char *)((int)&DAT_800771c8 + (*ppiVar17)[5]) != '\0')) {
        local_88 = 1;
        local_90 = 1;
        local_e8[0] = CosScaled(levelTimer * 0x10 + local_98 * 0x200);
        if (local_e8[0] < 0) {
          local_e8[0] = -local_e8[0];
        }
        local_e8[0] = local_e8[0] >> 1;
        local_e8[0] = PortalShimmer(*(undefined4 *)(**ppiVar17 + 0x10),0xffffff);
        Vec3Subtract(local_60,*ppiVar17 + 8,&cameraPosition.x);
        iVar1 = local_150;
        if (local_150 < 0) {
          iVar1 = -local_150;
        }
        iVar14 = local_14c;
        if (local_14c < 0) {
          iVar14 = -local_14c;
        }
        iVar13 = local_148;
        if (local_148 < 0) {
          iVar13 = -local_148;
        }
        iVar1 = Maybe_SizeOfDataEstimate(iVar1 + iVar14 + iVar13);
        if (iVar1 < 0xf) {
          local_68 = Vec3CalculateLengthE(local_60,flag3D);
        }
        else {
          Vec3ScaleDownByPowerOfTwo(local_60,iVar1 >> 1);
          local_68 = Vec3CalculateLengthE(local_60,flag3D);
          local_68 = local_68 << (iVar1 >> 1 & 0x1fU);
        }
        iVar1 = Maybe_SizeOfDataEstimate(local_68);
        iVar1 = iVar1 + -0xd;
        if (iVar1 < 0) {
          iVar1 = 0;
        }
        if ((DAT_8007591c != 0) && (0x4000 < (int)local_68)) {
          iVar13 = (int)(0x8000 - local_68) >> 2;
          iVar14 = iVar13;
          if (iVar13 < 0) {
            iVar14 = 0;
          }
          if (0x1000 < iVar13) {
            iVar14 = 0x1000;
          }
          local_e8[0] = PortalShimmer(_clearColor,local_e8[0],iVar14);
        }
        Vec3Zero(&local_140);
        iVar14 = 0;
        if (0 < (*ppiVar17)[1]) {
          iVar13 = 0x20;
          puVar11 = &DAT_80078dd8;
          do {
            DrawPortalRelated(puVar11,(int)*ppiVar17 + iVar13,iVar1);
            Vec3Add(&local_140,&local_140,(int)*ppiVar17 + iVar13);
            iVar14 = iVar14 + 1;
            iVar13 = iVar13 + 0xc;
            puVar11 = puVar11 + 3;
          } while (iVar14 < (*ppiVar17)[1]);
        }
        iVar14 = (*ppiVar17)[1];
        if (iVar14 == 0) {
          trap(0x1c00);
        }
        if ((iVar14 == -1) && (local_140.x == -0x80000000)) {
          trap(0x1800);
        }
        iVar13 = (*ppiVar17)[1];
        if (iVar13 == 0) {
          trap(0x1c00);
        }
        if ((iVar13 == -1) && (local_140.y == -0x80000000)) {
          trap(0x1800);
        }
        iVar2 = (*ppiVar17)[1];
        if (iVar2 == 0) {
          trap(0x1c00);
        }
        if ((iVar2 == -1) && (local_140.z == -0x80000000)) {
          trap(0x1800);
        }
        local_140.x = local_140.x / iVar14;
        local_140.y = local_140.y / iVar13;
        local_140.z = local_140.z / iVar2;
        Vec3Subtract(local_60,&cameraPosition.x,*ppiVar17 + 0xb);
        Vec3ScaleDownByPowerOfTwo(local_60,iVar1);
        piVar5 = *ppiVar17;
        iVar2 = 0x13f8;
        iVar14 = 0xf0;
        iVar13 = 0;
        uVar12 = 0;
        iVar15 = 0;
        iVar16 = 0;
        iVar1 = 0;
        DAT_80075934 = 0;
        local_78 = 0;
        local_70 = 0;
        DAT_80075798 = &DAT_800704f4;
        local_80 = (-local_150 * piVar5[2] - local_14c * piVar5[3]) - local_148 * piVar5[4];
        if (0 < (*ppiVar17)[1]) {
          iVar9 = 0;
          piVar5 = &DAT_80077eac;
          iVar10 = 0;
          do {
            iVar6 = iVar15 + 1;
            if (local_80 < 1) {
              iVar6 = iVar15 + -1;
              iVar3 = iVar6 * 2;
              if (iVar6 < 0) {
                iVar6 = (*ppiVar17)[1] + -1;
                goto LAB_80051284;
              }
            }
            else {
              iVar3 = iVar6 * 2;
              if (iVar6 == (*ppiVar17)[1]) {
                iVar6 = 0;
LAB_80051284:
                iVar3 = iVar6 << 1;
              }
            }
            iVar3 = iVar3 + iVar6;
            local_78 = local_78 + (&DAT_80078dd8)[iVar3];
            local_70 = local_70 + (&DAT_80078ddc)[iVar3];
            DAT_80075934 = DAT_80075934 + (&DAT_80078de0)[iVar3];
            if ((((&DAT_80078dd8)[iVar3] - 1 < 0x1ff) && ((&DAT_80078ddc)[iVar3] - 1 < 0xef)) &&
               (0 < (int)(&DAT_80078de0)[iVar3])) {
              uVar12 = 1;
            }
            iVar3 = (&DAT_80078dd8)[iVar6 * 3];
            if (iVar1 < iVar3) {
              iVar1 = iVar3;
            }
            if (iVar3 < iVar2) {
              iVar2 = iVar3;
            }
            iVar4 = (&DAT_80078ddc)[iVar6 * 3];
            if (iVar13 < iVar4) {
              iVar13 = iVar4;
            }
            if (iVar4 < iVar14) {
              iVar14 = iVar4;
            }
            iVar8 = *(int *)((int)&DAT_80078dd8 + iVar9);
            if (((iVar8 < 0x200) || (iVar3 < 0x200)) && ((0 < iVar8 || (0 < iVar3)))) {
              iVar7 = *(int *)((int)&DAT_80078ddc + iVar9);
              if (((iVar7 < 0xf0) || (iVar4 < 0xf0)) &&
                 ((iVar8 = iVar8 - iVar3, 0 < iVar7 || (0 < iVar4)))) {
                if (iVar8 < 0) {
                  iVar8 = -iVar8;
                }
                iVar7 = iVar7 - iVar4;
                if (2 < iVar8) {
                  local_90 = 0;
                }
                if (iVar7 < 0) {
                  iVar7 = -iVar7;
                }
                if (2 < iVar7) {
                  local_88 = 0;
                }
                *(undefined4 *)((int)&DAT_80077ea0 + iVar10) = 1;
                *(uint *)((int)&DAT_80077ea4 + iVar10) =
                     *(int *)((int)&DAT_80078ddc + iVar9) << 0x10 |
                     (uint)*(ushort *)((int)&DAT_80078dd8 + iVar9);
                *(uint *)((int)&DAT_80077ea8 + iVar10) =
                     (&DAT_80078ddc)[iVar6 * 3] << 0x10 |
                     (uint)*(ushort *)(&DAT_80078dd8 + iVar6 * 3);
                *piVar5 = *(int *)((int)&DAT_80078ddc + iVar9) - (&DAT_80078ddc)[iVar6 * 3];
                iVar3 = (&DAT_80078dd8)[iVar6 * 3] - *(int *)((int)&DAT_80078dd8 + iVar9);
                *(int *)((int)&DAT_80077eb0 + iVar10) = iVar3;
                iVar6 = *piVar5;
                iVar16 = iVar16 + 1;
                piVar5 = piVar5 + 6;
                *(int *)((int)&DAT_80077eb4 + iVar10) =
                     -iVar6 * *(int *)((int)&DAT_80078dd8 + iVar9) -
                     iVar3 * *(int *)((int)&DAT_80078ddc + iVar9);
                iVar10 = iVar10 + 0x18;
              }
            }
            iVar15 = iVar15 + 1;
            iVar9 = iVar9 + 0xc;
          } while (iVar15 < (*ppiVar17)[1]);
        }
        if (((local_90 == 0) && (local_88 == 0)) || (iVar16 == 0)) {
          iVar15 = (*ppiVar17)[1];
          iVar9 = local_78 / iVar15;
          if (iVar15 == 0) {
            trap(0x1c00);
          }
          if ((iVar15 == -1) && (local_78 == -0x80000000)) {
            trap(0x1800);
          }
          if (iVar15 == 0) {
            trap(0x1c00);
          }
          if ((iVar15 == -1) && (DAT_80075934 == -0x80000000)) {
            trap(0x1800);
          }
          iVar10 = local_70 / iVar15;
          if (iVar15 == 0) {
            trap(0x1c00);
          }
          if ((iVar15 == -1) && (local_70 == -0x80000000)) {
            trap(0x1800);
          }
          DAT_80075934 = DAT_80075934 / iVar15 >> 7;
          if (0xff < DAT_80075934) {
            DAT_80075934 = DAT_80075934 + 0x40;
          }
          if (0x7ff < DAT_80075934) {
            DAT_80075934 = 0x7ff;
          }
          if ((((((iVar2 < 0x200) && (iVar14 < 0xf0)) && (0 < iVar1)) &&
               ((0 < iVar13 && (0 < DAT_80075934)))) && (iVar16 != 0)) ||
             (((iVar2 < 1 && (iVar14 < 1)) &&
              ((0x1ff < iVar1 && ((0xef < iVar13 && (0 < DAT_80075934)))))))) {
            uVar12 = uVar12 | 2;
          }
          else {
            uVar12 = 0;
          }
          local_78 = iVar9;
          local_70 = iVar10;
          if ((uVar12 == 2) && ((int)local_68 < 0x1000)) {
            Vec3Subtract(&local_120,&local_140.x,&cameraPosition.x);
            local_130 = 0x1000;
            local_12c = 0;
            local_128 = 0;
            local_110 = (undefined)((ushort)cameraAngle.roll >> 4);
            local_10f = (undefined)((ushort)cameraAngle.pitch >> 4);
            local_10e = (undefined)((ushort)cameraAngle.yaw >> 4);
            UNK_MatrixOperation(&local_110,auStack_108,0);
            Vec3ApplyRotationMatrix(auStack_108,&local_130,&local_130);
            if (local_130 * local_120 + local_12c * local_11c + local_128 * local_118 < 0) {
              uVar12 = 0;
            }
          }
          if (uVar12 != 0) {
            if (iVar2 < 0) {
              iVar2 = 0;
            }
            if (iVar14 < 0) {
              iVar14 = 0;
            }
            if (0x200 < iVar1) {
              iVar1 = 0x200;
            }
            DAT_8007aa00 = iVar14 << 0x10;
            if (0xf0 < iVar13) {
              iVar13 = 0xf0;
            }
            DAT_8007aa04 = iVar13 << 0x10;
            DAT_8007aa08 = iVar1 << 0x10;
            DAT_8007aa0c = iVar2 << 0x10;
            (&DAT_80077ea0)[iVar16 * 6] = 0;
            if ((int)local_68 < 0x4000) {
              if ((int)local_68 < 0x3001) {
                piVar5 = (int *)(**ppiVar17 + 0x10);
              }
              else {
                DAT_8007575c = local_68 - 0x3000;
                DAT_800757d4 = PortalShimmer(*(undefined4 *)(**ppiVar17 + 0x10),local_e8[0]);
                piVar5 = &DAT_800757d4;
              }
            }
            else {
              piVar5 = local_e8;
            }
            FUN_8004fea0(piVar5);
          }
          iVar1 = 0x200;
          if ((int)local_68 < 0x4000) {
            iVar14 = 0;
            iVar13 = 0xf0;
            iVar2 = 0;
            uVar12 = 0;
            iVar15 = 0;
            DAT_80075798 = &DAT_800704f4;
            iVar16 = 0;
            if (0 < (*ppiVar17)[1]) {
              piVar5 = &DAT_80078dd8;
              iVar9 = 0;
              do {
                iVar6 = *piVar5;
                iVar10 = iVar6 + 2;
                if ((local_78 < iVar6) || (iVar10 = iVar6 + -2, iVar6 < local_78)) {
                  *piVar5 = iVar10;
                }
                iVar6 = *(int *)((int)&DAT_80078ddc + iVar9);
                iVar10 = iVar6 + 2;
                if ((local_70 < iVar6) || (iVar10 = iVar6 + -2, iVar6 < local_70)) {
                  *(int *)((int)&DAT_80078ddc + iVar9) = iVar10;
                }
                iVar10 = *piVar5;
                if (iVar14 < iVar10) {
                  iVar14 = iVar10;
                }
                if (iVar10 < iVar1) {
                  iVar1 = iVar10;
                }
                iVar10 = *(int *)((int)&DAT_80078ddc + iVar9);
                if (iVar2 < iVar10) {
                  iVar2 = iVar10;
                }
                if (iVar10 < iVar13) {
                  iVar13 = iVar10;
                }
                piVar5 = piVar5 + 3;
                iVar15 = iVar15 + 1;
                iVar9 = iVar9 + 0xc;
              } while (iVar15 < *(int *)(*(int *)((int)&DAT_80078640 + local_30) + 4));
            }
            iVar15 = 0;
            if (0 < (*ppiVar17)[1]) {
              iVar9 = 0;
              piVar5 = &DAT_80077eac;
              iVar10 = 0;
              do {
                iVar6 = iVar15 + 1;
                if (local_80 < 1) {
                  iVar6 = iVar15 + -1;
                  iVar3 = iVar6 * 2;
                  if (iVar6 < 0) {
                    iVar6 = (*ppiVar17)[1] + -1;
                    goto LAB_80051a90;
                  }
                }
                else {
                  iVar3 = iVar6 * 2;
                  if (iVar6 == (*ppiVar17)[1]) {
                    iVar6 = 0;
LAB_80051a90:
                    iVar3 = iVar6 << 1;
                  }
                }
                iVar3 = iVar3 + iVar6;
                if ((((&DAT_80078dd8)[iVar3] - 1 < 0x1ff) && ((&DAT_80078ddc)[iVar3] - 1 < 0xef)) &&
                   (0 < (int)(&DAT_80078de0)[iVar3])) {
                  uVar12 = 1;
                }
                if (((((*(int *)((int)&DAT_80078dd8 + iVar9) < 0x200) ||
                      ((int)(&DAT_80078dd8)[iVar6 * 3] < 0x200)) &&
                     ((0 < *(int *)((int)&DAT_80078dd8 + iVar9) ||
                      (0 < (int)(&DAT_80078dd8)[iVar6 * 3])))) &&
                    ((*(int *)((int)&DAT_80078ddc + iVar9) < 0xf0 ||
                     ((int)(&DAT_80078ddc)[iVar6 * 3] < 0xf0)))) &&
                   ((0 < *(int *)((int)&DAT_80078ddc + iVar9) ||
                    (0 < (int)(&DAT_80078ddc)[iVar6 * 3])))) {
                  *(undefined4 *)((int)&DAT_80077ea0 + iVar10) = 1;
                  *(uint *)((int)&DAT_80077ea4 + iVar10) =
                       *(int *)((int)&DAT_80078ddc + iVar9) << 0x10 |
                       (uint)*(ushort *)((int)&DAT_80078dd8 + iVar9);
                  *(uint *)((int)&DAT_80077ea8 + iVar10) =
                       (&DAT_80078ddc)[iVar6 * 3] << 0x10 |
                       (uint)*(ushort *)(&DAT_80078dd8 + iVar6 * 3);
                  *piVar5 = *(int *)((int)&DAT_80078ddc + iVar9) - (&DAT_80078ddc)[iVar6 * 3];
                  iVar3 = (&DAT_80078dd8)[iVar6 * 3] - *(int *)((int)&DAT_80078dd8 + iVar9);
                  *(int *)((int)&DAT_80077eb0 + iVar10) = iVar3;
                  iVar6 = *piVar5;
                  iVar16 = iVar16 + 1;
                  piVar5 = piVar5 + 6;
                  *(int *)((int)&DAT_80077eb4 + iVar10) =
                       -iVar6 * *(int *)((int)&DAT_80078dd8 + iVar9) -
                       iVar3 * *(int *)((int)&DAT_80078ddc + iVar9);
                  iVar10 = iVar10 + 0x18;
                }
                iVar15 = iVar15 + 1;
                iVar9 = iVar9 + 0xc;
              } while (iVar15 < *(int *)((&DAT_80078640)[local_98] + 4));
            }
            if (((((iVar1 < 0x200) && (iVar13 < 0xf0)) && (0 < iVar14)) &&
                (((0 < iVar2 && (0 < DAT_80075934)) && (iVar16 != 0)))) ||
               (((iVar1 < 1 && (iVar13 < 1)) &&
                ((0x1ff < iVar14 && ((0xef < iVar2 && (0 < DAT_80075934)))))))) {
              uVar12 = uVar12 | 2;
            }
            else {
              uVar12 = 0;
            }
            if ((uVar12 == 2) && ((int)local_68 < 0x1000)) {
              Vec3Subtract(&local_d0,&local_140.x,&cameraPosition.x);
              local_e0 = 0x1000;
              local_dc = 0;
              local_d8 = 0;
              local_c0 = (undefined)((ushort)cameraAngle.roll >> 4);
              local_bf = (undefined)((ushort)cameraAngle.pitch >> 4);
              local_be = (undefined)((ushort)cameraAngle.yaw >> 4);
              UNK_MatrixOperation(&local_c0,auStack_b8,0);
              Vec3ApplyRotationMatrix(auStack_b8,&local_e0,&local_e0);
              if (local_e0 * local_d0 + local_dc * local_cc + local_d8 * local_c8 < 0) {
                uVar12 = 0;
              }
            }
            if (uVar12 != 0) {
              if (iVar1 < 0) {
                iVar1 = 0;
              }
              if (iVar13 < 0) {
                iVar13 = 0;
              }
              if (0x200 < iVar14) {
                iVar14 = 0x200;
              }
              DAT_8007aa00 = iVar13 << 0x10;
              if (0xf0 < iVar2) {
                iVar2 = 0xf0;
              }
              DAT_8007aa04 = iVar2 << 0x10;
              DAT_8007aa08 = iVar14 << 0x10;
              DAT_8007aa0c = iVar1 << 0x10;
              (&DAT_80077ea0)[iVar16 * 6] = 0;
              if ((int)local_68 < 0x3001) {
                DrawPortalSkyBox(**ppiVar17,&local_190,&local_170);
              }
              else {
                DAT_8007575c = local_68 - 0x3000;
                DAT_800757d4 = PortalShimmer(*(undefined4 *)(**ppiVar17 + 0x10),local_e8[0]);
                PortalCrossFade(**ppiVar17,&local_190,&local_170);
              }
            }
          }
        }
      }
      ppiVar17 = ppiVar17 + 1;
      local_30 = local_30 + 4;
      local_98 = local_98 + 1;
    } while (local_98 < DAT_800758bc);
  }
  iVar1 = DAT_80076e24;
  if (DAT_800785b4 <= DAT_80076e24) {
    iVar1 = -1;
  }
  DrawSkybox(iVar1,&gCamera6,&gCamera1);
  return;
}



// WARNING: Instruction at (ram,0x8005210c) overlaps instruction at (ram,0x80052108)
// 

void UpdateLevelMobys(void)

{
  char cVar1;
  short sVar2;
  char *pcVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  undefined4 *puVar7;
  char *pcVar8;
  int iVar10;
  short **ppsVar11;
  short **ppsVar12;
  int iVar13;
  uint uVar14;
  int iVar15;
  short *psVar16;
  undefined4 *puVar17;
  char **ppcVar18;
  char **ppcVar19;
  char *pcVar9;
  
  puVar17 = &DAT_80077868;
  do {
    *puVar17 = 0;
    puVar7 = puVar17 + 2;
    puVar17[1] = 0;
    iVar6 = spyro.position.z;
    iVar5 = spyro.position.y;
    iVar4 = spyro.position.x;
    puVar17 = puVar7;
  } while (puVar7 != &DAT_80077888);
  puVar17 = &DAT_80077868;
  pcVar8 = ptr_startOfCurrentLevelMobys + -0x58;
  ppcVar18 = (char **)&DAT_800700f4;
LAB_80052040:
  do {
    while( true ) {
      while( true ) {
        ppcVar19 = ppcVar18;
        pcVar9 = pcVar8;
        pcVar3 = ptr_startOfCurrentLevelMobys;
        pcVar8 = pcVar9 + 0x58;
        ppcVar18 = ppcVar19;
        if (-1 < pcVar9[0xa0]) break;
        ppsVar12 = DAT_800757f8;
        if (pcVar9[0xa0] == -1) {
          while (ppsVar11 = ppsVar12, puVar17 != &DAT_80077888) {
            cVar1 = *(char *)puVar17;
            puVar17 = (undefined4 *)((int)puVar17 + 1);
            ppsVar12 = ppsVar11 + 1;
            if (cVar1 != '\0') {
              psVar16 = *ppsVar11;
              ppcVar18 = ppcVar19;
              do {
                sVar2 = *psVar16;
                psVar16 = psVar16 + 1;
                cVar1 = (pcVar3 + ((int)sVar2 & 0x7fffU) * 0x58)[0x48];
                *ppcVar18 = pcVar3 + ((int)sVar2 & 0x7fffU) * 0x58;
                ppcVar19 = ppcVar18 + 1;
                if (cVar1 < '\0') {
                  ppcVar19 = ppcVar18;
                }
                ppcVar18 = ppcVar19;
              } while (-1 < sVar2);
            }
          }
          *ppcVar19 = (char *)0x0;
          return;
        }
      }
      iVar10 = (int)pcVar9[0x9b];
      if (pcVar9[0xa9] == '\0') break;
      *ppcVar19 = pcVar8;
      ppcVar18 = ppcVar19 + 1;
      if (-1 < iVar10) {
        *(undefined *)((int)&DAT_80077868 + iVar10) = 1;
        ppcVar18 = ppcVar19;
      }
    }
    iVar13 = (int)pcVar9[0xaa];
    uVar14 = iVar13 * 0x400;
  } while (iVar13 == 0);
  if (-1 < (int)uVar14) goto code_r0x80052094;
  *ppcVar19 = pcVar8;
  goto code_r0x80052110;
code_r0x80052094:
  iVar15 = *(int *)(pcVar9 + 100) - iVar4;
  if ((0 < (int)(iVar15 + uVar14)) && (iVar15 + iVar13 * -0x400 < 0)) {
    gte_ldIR1(iVar15 >> 3);
    iVar15 = *(int *)(pcVar9 + 0x68) - iVar5;
    if ((0 < (int)(iVar15 + uVar14)) && (iVar15 + iVar13 * -0x400 < 0)) {
      gte_ldIR2(iVar15 >> 3);
      gte_ldIR3(0);
      gte_sqr0_b(0);
      if ((0 < (int)((*(int *)(pcVar9 + 0x6c) - iVar6) + uVar14)) &&
         ((*(int *)(pcVar9 + 0x6c) - iVar6) + iVar13 * -0x400 < 0)) {
        iVar13 = gte_stMAC1();
        iVar15 = gte_stMAC2();
        *ppcVar19 = pcVar8;
        if (0 < (int)(((uVar14 >> 3) * (uVar14 >> 3) - iVar13) - iVar15)) {
code_r0x80052110:
          ppcVar18 = ppcVar19 + 1;
          if (-1 < iVar10) {
            *(undefined *)((int)&DAT_80077868 + iVar10) = 1;
            ppcVar18 = ppcVar19;
          }
        }
      }
    }
  }
  goto LAB_80052040;
}



void Maybe_DrawingMobyParticlesRelated(void)

{
  char **ppcVar1;
  char **ppcVar2;
  char **ppcVar3;
  char *pcVar4;
  char *pcVar5;
  char **ppcVar6;
  char **ppcVar7;
  char **ppcVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  
  pcVar5 = ptr_startOfCurrentLevelMobys + -0x58;
  ppcVar1 = (char **)&DAT_8006fcf4;
  ppcVar2 = (char **)&DAT_80071ef4;
  ppcVar3 = (char **)&ptr_maybeTextObj;
  uVar9 = *(uint *)(ptr_startOfCurrentLevelMobys + 0x48);
  do {
    while( true ) {
      ppcVar8 = ppcVar3;
      ppcVar7 = ppcVar2;
      ppcVar6 = ppcVar1;
      pcVar4 = pcVar5;
      pcVar5 = pcVar4 + 0x58;
      uVar10 = *(uint *)(pcVar4 + 0xf8);
      ppcVar1 = ppcVar6;
      ppcVar2 = ppcVar7;
      ppcVar3 = ppcVar8;
      if ((int)(uVar9 << 0x18) < 0) break;
      uVar11 = uVar9 >> 0x10;
      if ((int)uVar9 >> 0x18 == 0) {
        *ppcVar8 = pcVar5;
        ppcVar3 = ppcVar8 + 1;
        uVar9 = uVar10;
        if ((uVar11 != 0xff) && (*(char *)((int)&DAT_800771c8 + uVar11) == '\0')) {
          pcVar4[0xa9] = '\0';
          ppcVar3 = ppcVar8;
        }
      }
      else {
        uVar11 = uVar11 & 0xff;
        if ((int)uVar9 < 0) {
          *ppcVar7 = pcVar5;
          ppcVar2 = ppcVar7 + 1;
          uVar9 = uVar10;
          if ((uVar11 != 0xff) && (*(char *)((int)&DAT_800771c8 + uVar11) == '\0')) {
            pcVar4[0xa9] = '\0';
            ppcVar2 = ppcVar7;
          }
        }
        else {
          *ppcVar6 = pcVar5;
          ppcVar1 = ppcVar6 + 1;
          uVar9 = uVar10;
          if ((uVar11 != 0xff) && (*(char *)((int)&DAT_800771c8 + uVar11) == '\0')) {
            pcVar4[0xa9] = '\0';
            ppcVar1 = ppcVar6;
          }
        }
      }
    }
    uVar11 = uVar9 & 0xff;
    uVar9 = uVar10;
  } while (uVar11 != 0xff);
  *ppcVar6 = (char *)0x0;
  *ppcVar7 = (char *)0x0;
  *ppcVar8 = (char *)0x0;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_800522c0(uint *param_1,uint param_2)

{
  undefined uVar1;
  undefined2 uVar2;
  undefined3 uVar3;
  undefined uVar4;
  byte bVar5;
  undefined4 uVar6;
  float fVar7;
  uint *puVar8;
  byte bVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  ushort *puVar15;
  uint uVar16;
  undefined4 unaff_retaddr;
  uint *puVar17;
  
  puVar17 = &DAT_8006fcf4;
  uVar10 = _DAT_1f800004;
LAB_800522e0:
  while( true ) {
    _DAT_1f800004 = uVar10;
    uVar16 = *param_1;
    param_1 = param_1 + 1;
    fVar7 = *(float *)(uVar16 + 0x40);
    if (uVar16 == 0) {
      puVar8 = &DAT_8006fcf4;
      uVar6 = unaff_retaddr;
      if (puVar17 != &DAT_8006fcf4) {
        do {
          DAT_80077de0 = uVar6;
          DAT_80077ddc = puVar17;
          DAT_80077de4 = (int *)puVar8[1];
          DAT_80077dd8 = puVar8 + 2;
          PlaySoundEffect(*puVar8,DAT_80077de4,8,DAT_80077de4 + 0x15);
          puVar8 = DAT_80077dd8;
          puVar17 = DAT_80077ddc;
          uVar6 = DAT_80077de0;
        } while (DAT_80077dd8 != DAT_80077ddc);
        return;
      }
      return;
    }
    uVar10 = *(uint *)(uVar16 + 0x3c);
    FLOAT_1f800000._1_1_ = (byte)((uint)fVar7 >> 8);
    uVar11 = ((uint)fVar7 & 0xff) + (uint)(FLOAT_1f800000._1_1_ >> (param_2 & 0x1f));
    uVar1 = (undefined)uVar11;
    FLOAT_1f800000._3_1_ = (undefined)((uint)fVar7 >> 0x18);
    uVar4 = FLOAT_1f800000._3_1_;
    if (uVar11 >> 6 != 0) break;
    if (-1 < (int)param_2) {
      FLOAT_1f800000._0_2_ = SUB42(fVar7,0);
      FLOAT_1f800000._0_3_ = (uint3)FLOAT_1f800000._0_2_;
      fVar7 = FLOAT_1f800000;
    }
    FLOAT_1f800000 = fVar7;
    FLOAT_1f800000 = (float)(CONCAT31(FLOAT_1f800000._1_3_,uVar1) & 0xffffff3f);
    _DAT_1f800004 = uVar10;
    *(float *)(uVar16 + 0x40) = FLOAT_1f800000;
    *(uint *)(uVar16 + 0x3c) = uVar10;
    uVar10 = _DAT_1f800004;
  }
  DAT_1f800004._1_1_ = (byte)(uVar10 >> 8);
  bVar9 = DAT_1f800004._1_1_;
  uVar11 = (uint)DAT_1f800004._1_1_;
  DAT_1f800006._1_1_ = (byte)(uVar10 >> 0x18);
  bVar5 = DAT_1f800006._1_1_;
  uVar12 = (uint)DAT_1f800006._1_1_;
  FLOAT_1f800000._1_3_ = (undefined3)((uint)fVar7 >> 8);
  uVar3 = FLOAT_1f800000._1_3_;
  if ((uVar10 & 0xff) == uVar11) {
    bVar9 = 0;
    if ((int)param_2 < 0) goto code_r0x80052334;
    goto LAB_8005234c;
  }
  _DAT_1f800004 = CONCAT31((int3)(uVar10 >> 8),bVar9);
  _DAT_1f800004 = CONCAT12(bVar5,DAT_1f800004);
  iVar14 = (&DAT_80076378)[*(ushort *)(uVar16 + 0x36)];
  puVar15 = *(ushort **)(uVar11 * 4 + iVar14 + 0x38);
  _DAT_1f800004 = CONCAT13(bVar5 + 1,_DAT_1f800004);
  FLOAT_1f800000 = (float)CONCAT13(uVar4,0x10000);
  FLOAT_1f800000 = (float)((uint)CONCAT21(FLOAT_1f800000._2_2_,*(char *)(puVar15 + 6)) << 8);
  if (*(char *)(puVar15 + 6) == '\0') {
    _DAT_1f800004 = CONCAT13(bVar5,_DAT_1f800004);
  }
  goto LAB_800523e0;
code_r0x80052334:
  FLOAT_1f800000._2_1_ = (byte)((uint)fVar7 >> 0x10);
  bVar9 = FLOAT_1f800000._2_1_;
  if ((FLOAT_1f800000._2_1_ == 0) ||
     (bVar9 = FLOAT_1f800000._2_1_ | 4, FLOAT_1f800000 = fVar7, ((uint)fVar7 & 0x20000) == 0)) {
LAB_8005234c:
    FLOAT_1f800000 = (float)(CONCAT31(uVar3,uVar1) & 0xffffff3f);
    DAT_1f800004 = (undefined2)uVar10;
    _DAT_1f800004 = CONCAT12(DAT_1f800006._1_1_,DAT_1f800004);
    iVar14 = (&DAT_80076378)[*(ushort *)(uVar16 + 0x36)];
    puVar15 = *(ushort **)(uVar11 * 4 + iVar14 + 0x38);
    iVar13 = uVar12 + 1;
    uVar1 = FLOAT_1f800000._3_1_;
    uVar2 = FLOAT_1f800000._0_2_;
    FLOAT_1f800000 =
         (float)(CONCAT13(FLOAT_1f800000._3_1_,CONCAT12(bVar9,FLOAT_1f800000._0_2_)) | 0x10000);
    _DAT_1f800004 = CONCAT13((char)iVar13,_DAT_1f800004);
    if (-1 < (int)(iVar13 - (uint)*puVar15)) {
      _DAT_1f800004 = (uint)_DAT_1f800004;
      FLOAT_1f800000 = (float)(CONCAT13(uVar1,CONCAT12(bVar9,uVar2)) | 0x30000);
    }
LAB_800523e0:
    uVar10 = _DAT_1f800004;
    *(float *)(uVar16 + 0x40) = FLOAT_1f800000;
    *(uint *)(uVar16 + 0x3c) = uVar10;
    iVar13 = (int)*(char *)((int)puVar15 + uVar12 * 8 + 0x27);
    puVar17[1] = uVar16;
    uVar10 = _DAT_1f800004;
    if (-1 < iVar13) {
      *puVar17 = (uint)*(byte *)(iVar13 + iVar14 + 4);
      puVar17 = puVar17 + 2;
      uVar10 = _DAT_1f800004;
    }
  }
  goto LAB_800522e0;
}



void SpawnDynamicObjects(void)

{
  char cVar1;
  int *piVar2;
  int *piVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  
  piVar2 = ptr_dynamicObjects;
  numberOfDynamicObjects = numberOfDynamicObjects + 1;
  cVar1 = *(char *)(ptr_dynamicObjects + 0x12);
  *(undefined *)(ptr_dynamicObjects + 0x12) = 0;
  piVar5 = ptr_dynamicObjects + 0x16;
  piVar3 = piVar5;
  if (cVar1 == -1) {
    *(undefined *)(ptr_dynamicObjects + 0x28) = 0xff;
  }
  else {
    do {
      piVar5 = piVar3;
      piVar3 = piVar5 + 0x16;
    } while (-1 < *(char *)(piVar5 + 0x12));
  }
  cVar1 = *(char *)(ptr_levelMobyData + -1);
  ptr_dynamicObjects = piVar5;
  *(undefined *)(ptr_levelMobyData + -1) = 0;
  iVar6 = ptr_levelMobyData + -0x18;
  iVar4 = iVar6;
  if (cVar1 == -1) {
    *(undefined *)(ptr_levelMobyData + -0x19) = 0xff;
  }
  else {
    do {
      iVar6 = iVar4;
      iVar4 = iVar6 + -0x18;
    } while (-1 < *(char *)(iVar6 + -1));
  }
  *piVar2 = ptr_levelMobyData + -0x18;
  ptr_levelMobyData = iVar6;
  return;
}



void DespawnObjects(int *param_1)

{
  int *piVar1;
  int iVar2;
  int *piVar3;
  undefined uVar4;
  int iVar5;
  int **ppiVar6;
  
  if (-1 < *(short *)(param_1 + 0xd)) {
    piVar3 = (int *)(*(short *)(param_1 + 0xd) * 4 + DAT_80075778 + -4);
    do {
      ppiVar6 = (int **)(piVar3 + 1);
      piVar3 = *ppiVar6;
    } while (piVar3 != param_1);
    *ppiVar6 = (int *)param_1[1];
  }
  if (0 < DAT_80075890 - (int)param_1) {
    *(undefined *)(param_1 + 0x12) = 0xfd;
    return;
  }
  numberOfDynamicObjects = numberOfDynamicObjects + -1;
  uVar4 = 0xfe;
  piVar3 = param_1;
  if (*(char *)(param_1 + 0x28) == -1) {
    piVar1 = param_1 + -0x16;
    do {
      piVar3 = piVar1;
      piVar1 = piVar3 + -0x16;
    } while (*(char *)(piVar3 + 0x12) == -2);
    piVar3 = piVar3 + 0x16;
    uVar4 = 0xff;
  }
  *(undefined *)(piVar3 + 0x12) = uVar4;
  if (-1 < (int)ptr_dynamicObjects - (int)piVar3) {
    ptr_dynamicObjects = piVar3;
  }
  iVar5 = *param_1;
  iVar2 = iVar5 + 0x18;
  uVar4 = 0xfe;
  if (*(char *)(iVar5 + -1) == -1) {
    iVar5 = iVar5 + 0x30;
    do {
      iVar2 = iVar5;
      iVar5 = iVar2 + 0x18;
    } while (*(char *)(iVar2 + -1) == -2);
    iVar2 = iVar2 + -0x18;
    uVar4 = 0xff;
  }
  *(undefined *)(iVar2 + -1) = uVar4;
  if (ptr_levelMobyData - iVar2 < 1) {
    ptr_levelMobyData = iVar2;
  }
  return;
}



void FUN_800526a8(int param_1)

{
  int iVar1;
  int iVar2;
  int *piVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  
  iVar1 = (&DAT_80076378)[*(ushort *)(param_1 + 0x36)];
  iVar2 = *(int *)((uint)*(byte *)(param_1 + 0x3c) * 4 + iVar1 + 0x38);
  uVar4 = *(uint *)(iVar2 + (uint)*(byte *)(param_1 + 0x3e) * 8 + 0x24);
  *(undefined *)(param_1 + 0x41) = *(undefined *)(iVar2 + 0xc);
  iVar2 = *(int *)(iVar1 + 0x14);
  *(undefined4 *)(param_1 + 8) = *(undefined4 *)(iVar1 + (uVar4 >> 0x13 & 0x1c) + 0x14);
  *(undefined2 *)(param_1 + 0x34) = 0xffff;
  iVar1 = DAT_80075778;
  if (iVar2 != 0) {
    iVar6 = 0;
    if (-1 < iVar2) {
      iVar6 = 0x400;
    }
    iVar6 = (*(uint *)(param_1 + 0xc) >> 0xd) + (*(uint *)(param_1 + 0x10) >> 0xd) * 0x20 + iVar6;
    *(short *)(param_1 + 0x34) = (short)iVar6;
    piVar3 = (int *)(iVar6 * 4 + iVar1);
    iVar1 = *piVar3;
    *piVar3 = param_1;
    *(int *)(param_1 + 4) = iVar1;
  }
  uVar4 = *(uint *)(param_1 + 0x44);
  uVar7 = 0x1000;
  uVar8 = 0;
  uVar9 = 0x1000;
  uVar10 = 0;
  uVar11 = 0x1000;
  gte_ldR11R12(0x1000);
  gte_ldR13R21(0);
  gte_ldR22R23(0x1000);
  gte_ldR31R32(0);
  gte_ldR33(0x1000);
  gte_ldtr(0,0,0);
  uVar5 = uVar4 >> 0xf & 0x1fe;
  if (uVar5 != 0) {
    uVar11 = (uint)*(ushort *)((int)sineWaveArray + uVar5 + 0x80);
    gte_ldVXY0(uVar11);
    gte_ldVZ0((uint)*(ushort *)((int)sineWaveArray + uVar5));
    gte_rtv0();
    uVar7 = gte_stIR1();
    iVar2 = gte_stIR2();
    uVar10 = gte_stIR3();
    gte_ldVXY0(-(uint)*(ushort *)((int)sineWaveArray + uVar5) & 0xffff);
    gte_ldVZ0(uVar11);
    gte_rtv0_b();
    uVar7 = uVar7 & 0xffff;
    uVar10 = uVar10 & 0xffff;
    uVar5 = gte_stIR1();
    iVar1 = gte_stIR2();
    uVar11 = gte_stIR3();
    uVar8 = (uVar5 & 0xffff) + iVar2 * 0x10000;
    uVar9 = iVar1 * 0x10000 + 0x1000;
    uVar11 = uVar11 & 0xffff;
    gte_ldR11R12(uVar7);
    gte_ldR13R21(uVar8);
    gte_ldR22R23(uVar9);
    gte_ldR31R32(uVar10);
    gte_ldR33(uVar11);
  }
  uVar5 = (uVar4 & 0xff00) >> 8;
  if ((uVar4 & 0xff00) != 0) {
    gte_ldVXY0((uint)(ushort)sineWaveArray[uVar5 + 0x40] << 0x10);
    gte_ldVZ0((uint)(ushort)sineWaveArray[uVar5]);
    gte_rtv0();
    iVar1 = gte_stIR1();
    uVar9 = gte_stIR2();
    iVar2 = gte_stIR3();
    gte_ldVXY0((uint)(ushort)sineWaveArray[uVar5] * -0x10000);
    gte_ldVZ0((uint)(ushort)sineWaveArray[uVar5 + 0x40]);
    gte_rtv0_b();
    uVar7 = uVar7 + iVar1 * 0x10000;
    uVar10 = uVar10 + iVar2 * 0x10000;
    uVar5 = gte_stIR1();
    iVar1 = gte_stIR2();
    uVar11 = gte_stIR3();
    uVar8 = (uVar8 & 0xffff0000) + (uVar5 & 0xffff);
    uVar9 = iVar1 * 0x10000 + (uVar9 & 0xffff);
    uVar11 = uVar11 & 0xffff;
    gte_ldR11R12(uVar7);
    gte_ldR13R21(uVar8);
    gte_ldR22R23(uVar9);
    gte_ldR31R32(uVar10);
    gte_ldR33(uVar11);
  }
  uVar4 = uVar4 & 0xff;
  if (uVar4 != 0) {
    gte_ldVZ0(0);
    gte_ldVXY0((uint)(ushort)sineWaveArray[uVar4] * 0x10000 +
               (uint)(ushort)sineWaveArray[uVar4 + 0x40]);
    gte_rtv0();
    uVar5 = gte_stIR1();
    iVar1 = gte_stIR2();
    uVar10 = gte_stIR3();
    gte_ldVXY0((-(uint)(ushort)sineWaveArray[uVar4] & 0xffff) +
               (uint)(ushort)sineWaveArray[uVar4 + 0x40] * 0x10000);
    gte_ldVZ0(0);
    gte_rtv0_b();
    uVar8 = (uVar8 & 0xffff) + iVar1 * 0x10000;
    iVar1 = gte_stIR1();
    uVar4 = gte_stIR2();
    iVar2 = gte_stIR3();
    uVar7 = iVar1 * 0x10000 + (uVar5 & 0xffff);
    uVar10 = iVar2 * 0x10000 + (uVar10 & 0xffff);
    uVar9 = (uVar9 & 0xffff0000) + (uVar4 & 0xffff);
  }
  *(uint *)(param_1 + 0x20) = uVar7;
  *(uint *)(param_1 + 0x24) = uVar8;
  *(uint *)(param_1 + 0x28) = uVar9;
  *(uint *)(param_1 + 0x2c) = uVar10;
  *(uint *)(param_1 + 0x30) = uVar11;
  return;
}



void FUN_800529cc(int param_1)

{
  *(undefined *)(param_1 + 0x4b) = 0;
  *(undefined *)(param_1 + 0x41) = 0;
  *(undefined4 *)(param_1 + 8) = 0;
  *(undefined2 *)(param_1 + 0x34) = 0xffff;
  return;
}



void UpdateMobyCollision(int param_1,uint param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int *piVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  
  if ((param_2 & 1) != 0) {
    uVar3 = *(uint *)(param_1 + 0x3c);
    if (*(char *)(param_1 + 0x40) == '\0') {
      uVar4 = uVar3 >> 0x10 & 0xff;
      uVar5 = uVar3;
    }
    else {
      uVar5 = uVar3 >> 8;
      uVar4 = uVar3 >> 0x18;
    }
    *(undefined4 *)(param_1 + 8) =
         *(undefined4 *)
          ((&DAT_80076378)[*(ushort *)(param_1 + 0x36)] +
           (*(uint *)(*(int *)((uVar5 & 0xff) * 4 + (&DAT_80076378)[*(ushort *)(param_1 + 0x36)] +
                              0x38) + uVar4 * 8 + 0x24) >> 0x13 & 0x1c) + 0x14);
  }
  iVar2 = DAT_80075778;
  if ((param_2 & 2) != 0) {
    uVar5 = (uint)*(short *)(param_1 + 0x34);
    uVar3 = (*(uint *)(param_1 + 0xc) >> 0xd) + (*(uint *)(param_1 + 0x10) >> 0xd) * 0x20 |
            uVar5 & 0x400;
    if ((uVar3 != uVar5) && (-1 < (int)(uVar5 * 4))) {
      iVar1 = uVar5 * 4 + DAT_80075778 + -4;
      do {
        piVar6 = (int *)(iVar1 + 4);
        iVar1 = *piVar6;
      } while (iVar1 != param_1);
      *piVar6 = *(int *)(param_1 + 4);
      *(short *)(param_1 + 0x34) = (short)uVar3;
      piVar6 = (int *)(uVar3 * 4 + iVar2);
      iVar2 = *piVar6;
      *piVar6 = param_1;
      *(int *)(param_1 + 4) = iVar2;
    }
  }
  if ((param_2 & 4) != 0) {
    uVar5 = *(uint *)(param_1 + 0x44);
    uVar7 = 0x1000;
    uVar8 = 0;
    uVar9 = 0x1000;
    uVar10 = 0;
    uVar4 = 0x1000;
    gte_ldR11R12(0x1000);
    gte_ldR13R21(0);
    gte_ldR22R23(0x1000);
    gte_ldR31R32(0);
    gte_ldR33(0x1000);
    gte_ldtr(0,0,0);
    uVar3 = uVar5 >> 0xf & 0x1fe;
    if (uVar3 != 0) {
      uVar4 = (uint)*(ushort *)((int)sineWaveArray + uVar3 + 0x80);
      gte_ldVXY0(uVar4);
      gte_ldVZ0((uint)*(ushort *)((int)sineWaveArray + uVar3));
      gte_rtv0();
      uVar7 = gte_stIR1();
      iVar1 = gte_stIR2();
      uVar10 = gte_stIR3();
      gte_ldVXY0(-(uint)*(ushort *)((int)sineWaveArray + uVar3) & 0xffff);
      gte_ldVZ0(uVar4);
      gte_rtv0_b();
      uVar7 = uVar7 & 0xffff;
      uVar10 = uVar10 & 0xffff;
      uVar3 = gte_stIR1();
      iVar2 = gte_stIR2();
      uVar4 = gte_stIR3();
      uVar8 = (uVar3 & 0xffff) + iVar1 * 0x10000;
      uVar9 = iVar2 * 0x10000 + 0x1000;
      uVar4 = uVar4 & 0xffff;
      gte_ldR11R12(uVar7);
      gte_ldR13R21(uVar8);
      gte_ldR22R23(uVar9);
      gte_ldR31R32(uVar10);
      gte_ldR33(uVar4);
    }
    uVar3 = (uVar5 & 0xff00) >> 8;
    if ((uVar5 & 0xff00) != 0) {
      gte_ldVXY0((uint)(ushort)sineWaveArray[uVar3 + 0x40] << 0x10);
      gte_ldVZ0((uint)(ushort)sineWaveArray[uVar3]);
      gte_rtv0();
      iVar2 = gte_stIR1();
      uVar9 = gte_stIR2();
      iVar1 = gte_stIR3();
      gte_ldVXY0((uint)(ushort)sineWaveArray[uVar3] * -0x10000);
      gte_ldVZ0((uint)(ushort)sineWaveArray[uVar3 + 0x40]);
      gte_rtv0_b();
      uVar7 = uVar7 + iVar2 * 0x10000;
      uVar10 = uVar10 + iVar1 * 0x10000;
      uVar3 = gte_stIR1();
      iVar2 = gte_stIR2();
      uVar4 = gte_stIR3();
      uVar8 = (uVar8 & 0xffff0000) + (uVar3 & 0xffff);
      uVar9 = iVar2 * 0x10000 + (uVar9 & 0xffff);
      uVar4 = uVar4 & 0xffff;
      gte_ldR11R12(uVar7);
      gte_ldR13R21(uVar8);
      gte_ldR22R23(uVar9);
      gte_ldR31R32(uVar10);
      gte_ldR33(uVar4);
    }
    uVar5 = uVar5 & 0xff;
    if (uVar5 != 0) {
      gte_ldVZ0(0);
      gte_ldVXY0((uint)(ushort)sineWaveArray[uVar5] * 0x10000 +
                 (uint)(ushort)sineWaveArray[uVar5 + 0x40]);
      gte_rtv0();
      uVar7 = gte_stIR1();
      iVar2 = gte_stIR2();
      uVar10 = gte_stIR3();
      gte_ldVXY0((-(uint)(ushort)sineWaveArray[uVar5] & 0xffff) +
                 (uint)(ushort)sineWaveArray[uVar5 + 0x40] * 0x10000);
      gte_ldVZ0(0);
      gte_rtv0_b();
      uVar8 = (uVar8 & 0xffff) + iVar2 * 0x10000;
      iVar2 = gte_stIR1();
      uVar3 = gte_stIR2();
      iVar1 = gte_stIR3();
      uVar7 = iVar2 * 0x10000 + (uVar7 & 0xffff);
      uVar10 = iVar1 * 0x10000 + (uVar10 & 0xffff);
      uVar9 = (uVar9 & 0xffff0000) + (uVar3 & 0xffff);
    }
    *(uint *)(param_1 + 0x20) = uVar7;
    *(uint *)(param_1 + 0x24) = uVar8;
    *(uint *)(param_1 + 0x28) = uVar9;
    *(uint *)(param_1 + 0x2c) = uVar10;
    *(uint *)(param_1 + 0x30) = uVar4;
  }
  return;
}



void FUN_80052d64(int param_1,int param_2,int *param_3)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  
  gte_ldR11R12(*(undefined4 *)(param_1 + 0x20));
  gte_ldR13R21(*(undefined4 *)(param_1 + 0x24));
  gte_ldR22R23(*(undefined4 *)(param_1 + 0x28));
  gte_ldR31R32(*(undefined4 *)(param_1 + 0x2c));
  gte_ldR33(*(undefined4 *)(param_1 + 0x30));
  gte_ldtr(0,0,0);
  uVar5 = *(uint *)(param_1 + 0x3c);
  uVar7 = (uint)*(byte *)(param_1 + 0x40);
  iVar2 = *(int *)((&DAT_80076378)[*(ushort *)(param_1 + 0x36)] + (uVar5 & 0xff) * 4 + 0x38);
  uVar1 = (uint)*(char *)(iVar2 + 5);
  iVar2 = *(int *)((*(uint *)(iVar2 + (uVar5 >> 0xd & 0x7f8) + 0x24) & 0x1fffff) + param_2 * 4);
  if (uVar7 == 0) {
    iVar3 = (iVar2 >> 0x15) << (uVar1 & 0x1f);
    iVar4 = ((iVar2 << 10) >> 0x15) << (uVar1 & 0x1f);
    iVar2 = ((iVar2 << 0x14) >> 0x13) << (uVar1 & 0x1f);
  }
  else {
    gte_ldIR0(0x40 - uVar7);
    gte_ldsv_((iVar2 >> 0x15) << (uVar1 & 0x1f),((iVar2 << 10) >> 0x15) << (uVar1 & 0x1f),
              ((iVar2 << 0x14) >> 0x13) << (uVar1 & 0x1f));
    iVar2 = *(int *)((*(uint *)(*(int *)((&DAT_80076378)[*(ushort *)(param_1 + 0x36)] +
                                         (uVar5 >> 6 & 0x3fc) + 0x38) + (uVar5 >> 0x15 & 0x7f8) +
                               0x24) & 0x1fffff) + param_2 * 4);
    gte_gpf0_b(0);
    iVar3 = (iVar2 >> 0x15) << (uVar1 & 0x1f);
    iVar4 = ((iVar2 << 10) >> 0x15) << (uVar1 & 0x1f);
    iVar2 = ((iVar2 << 0x14) >> 0x13) << (uVar1 & 0x1f);
    gte_ldIR0(uVar7);
    gte_ldsv_(iVar3,iVar4,iVar2);
    gte_gpl0();
    read_mt(iVar3,iVar4,iVar2);
    iVar3 = iVar3 >> 6;
    iVar4 = iVar4 >> 6;
    iVar2 = iVar2 >> 6;
  }
  gte_ldVZ0(iVar3);
  gte_ldVXY0(iVar4 + iVar2 * 0x10000);
  gte_rtps();
  iVar2 = *(int *)(param_1 + 0x10);
  iVar3 = *(int *)(param_1 + 0x14);
  iVar4 = gte_stIR3();
  iVar6 = gte_stIR1();
  iVar8 = gte_stIR2();
  *param_3 = iVar4 + *(int *)(param_1 + 0xc);
  param_3[1] = iVar2 - iVar6;
  param_3[2] = iVar3 - iVar8;
  return;
}



void FUN_80052f38(int param_1,int *param_2,int param_3,int param_4)

{
  byte bVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int *piVar6;
  byte *pbVar7;
  ushort *puVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  
  iVar2 = *(int *)(param_3 * 4 + DAT_80076378 + 0x38);
  uVar3 = *(uint *)(param_4 * 4 + iVar2 + 0x24);
  uVar9 = uVar3 >> 0x15 & 1;
  uVar3 = (uVar3 << 0xb) >> 10;
  piVar6 = *(int **)(iVar2 + 0x10);
  puVar8 = (ushort *)(uVar3 + 0x18);
  pbVar7 = (byte *)((*(uint *)(uVar3 + 8) >> 0x14) + (int)puVar8);
  iVar2 = 0;
  iVar4 = 0;
  iVar5 = 0;
  do {
    while (param_1 = param_1 + -1, uVar9 == 0) {
      bVar1 = *pbVar7;
      pbVar7 = pbVar7 + 1;
      uVar9 = bVar1 & 1;
      iVar10 = *(int *)(&DAT_8006d614 + (bVar1 & 0xfe) * 2) + *piVar6;
      iVar2 = iVar2 + (iVar10 >> 0x15);
      iVar4 = iVar4 + (iVar10 * 0x800 >> 0x15);
      iVar5 = iVar5 + (iVar10 * 0x400000 >> 0x15);
joined_r0x80053068:
      piVar6 = piVar6 + 1;
      if (param_1 == 0) goto LAB_800530b0;
    }
    uVar3 = (uint)(short)*puVar8;
    uVar9 = uVar3 & 0x4000;
    if (-1 < (int)uVar3) {
      iVar10 = *piVar6;
      iVar2 = iVar2 + ((int)(uVar3 << 0x12) >> 0x19) + (iVar10 >> 0x15);
      iVar4 = iVar4 + ((int)(uVar3 << 0x17) >> 0x19) + ((iVar10 << 0xb) >> 0x15);
      iVar5 = iVar5 + ((int)(uVar3 << 0x1c) >> 0x19) + ((iVar10 << 0x16) >> 0x15);
      puVar8 = puVar8 + 1;
      goto joined_r0x80053068;
    }
    uVar11 = (uint)puVar8[1];
    puVar8 = puVar8 + 2;
    piVar6 = piVar6 + 1;
    iVar2 = (int)(uVar3 << 0x12) >> 0x15;
    iVar4 = (int)(uVar11 << 0xc | uVar3 << 0x1c) >> 0x15;
    iVar5 = (int)(uVar11 << 0x16) >> 0x15;
  } while (param_1 != 0);
LAB_800530b0:
  *param_2 = iVar2;
  param_2[1] = iVar4;
  param_2[2] = iVar5;
  return;
}



void FUN_800530c0(int param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  bool bVar1;
  byte bVar2;
  char cVar3;
  uint *puVar4;
  int iVar5;
  undefined *puVar6;
  short sVar7;
  uint *puVar8;
  short sVar9;
  int iVar10;
  short sVar11;
  uint uVar12;
  uint uVar13;
  int in_t0;
  int in_t1;
  uint uVar14;
  int iVar15;
  undefined4 uVar16;
  undefined4 uVar17;
  undefined4 uVar18;
  float *pfVar19;
  float *pfVar20;
  code *UNRECOVERED_JUMPTABLE_00;
  
  gte_ldRBK(param_2);
  gte_ldR11R12(*(undefined4 *)(param_1 + 0x20));
  gte_ldR13R21(*(undefined4 *)(param_1 + 0x24));
  gte_ldR22R23(*(undefined4 *)(param_1 + 0x28));
  gte_ldR31R32(*(undefined4 *)(param_1 + 0x2c));
  gte_ldR33(*(undefined4 *)(param_1 + 0x30));
  gte_ldtr(*(uint *)(param_1 + 0xc) >> 2,*(uint *)(param_1 + 0x10) >> 2,
           *(uint *)(param_1 + 0x14) >> 2);
  iVar5 = *(int *)((*(uint *)(param_1 + 0x3c) & 0xff) * 4 +
                   (&DAT_80076378)[*(ushort *)(param_1 + 0x36)] + 0x38);
  puVar8 = (uint *)((*(uint *)(param_1 + 0x3c) >> 0xd & 0x7f8) + 0x24 + iVar5);
  uVar12 = (uint)*(byte *)(iVar5 + 5);
  puVar4 = (uint *)(*puVar8 & 0x1fffff);
  puVar8 = puVar4 + (puVar8[1] >> 0x18);
  iVar15 = 1;
  iVar10 = (uint)(*(byte *)(iVar5 + 8) >> 1) * 8;
  uVar14 = 0;
  uVar13 = *(byte *)(iVar5 + 6) + 1 + uVar12;
  pfVar19 = &FLOAT_1f800000;
  do {
    do {
      if (uVar14 == 0) {
        uVar14 = *puVar4;
        puVar4 = puVar4 + 1;
        param_4 = ((int)uVar14 >> 0x15) << (uVar12 & 0x1f);
        in_t0 = ((int)(uVar14 << 10) >> 0x15) << (uVar12 & 0x1f);
        in_t1 = ((int)(uVar14 << 0x14) >> 0x13) << (uVar12 & 0x1f);
      }
      else {
        uVar14 = (uint)*(short *)puVar8;
        puVar8 = (uint *)((int)puVar8 + 2);
        param_4 = param_4 + (((int)uVar14 >> 0xb) << (uVar13 & 0x1f));
        in_t0 = in_t0 - (((int)(uVar14 << 0x15) >> 0x1b) << (uVar13 & 0x1f));
        in_t1 = in_t1 - (((int)(uVar14 << 0x1a) >> 0x1b) << (uVar13 & 0x1f));
      }
      uVar14 = uVar14 & 1;
      bVar1 = iVar15 < 0;
      iVar15 = -iVar15;
    } while (bVar1);
    gte_ldIR3(param_4);
    gte_ldIR1(in_t0);
    gte_ldIR2(in_t1);
    pfVar20 = pfVar19 + 2;
    gte_rtir_b();
    uVar16 = gte_stMAC3();
    uVar17 = gte_stMAC1();
    uVar18 = gte_stMAC2();
    *(short *)pfVar19 = (short)uVar16;
    *(short *)((int)pfVar19 + 2) = -(short)uVar17;
    *(short *)(pfVar19 + 1) = -(short)uVar18;
    pfVar19 = pfVar20;
  } while (pfVar20 != (float *)(iVar10 + 0x1f800000));
  pfVar19 = &FLOAT_1f800000;
  pfVar20 = (float *)(iVar10 + 0x1f7ffff8);
  do {
    while( true ) {
      uVar14 = rand();
      puVar6 = (undefined *)AllocateParticleToBuffer(2);
      uVar16 = gte_stTRX();
      uVar17 = gte_stTRY();
      uVar18 = gte_stTRZ();
      sVar7 = (*(short *)pfVar19 >> 2) + (short)uVar16;
      sVar9 = (*(short *)((int)pfVar19 + 2) >> 2) + (short)uVar17;
      sVar11 = (*(short *)(pfVar19 + 1) >> 2) + (short)uVar18;
      *(short *)(puVar6 + 4) = sVar7;
      *(short *)(puVar6 + 6) = sVar9;
      *(short *)(puVar6 + 8) = sVar11;
      if ((uVar14 & 3) != 0) break;
      *(short *)(puVar6 + 10) = sVar7 + (short)((int)(uVar14 << 0x11) >> 0x1b);
      *(short *)(puVar6 + 0xc) = sVar9 + (short)((int)(uVar14 << 0x14) >> 0x1b);
      *(ushort *)(puVar6 + 0xe) = sVar11 - ((ushort)((uVar14 << 0x17) >> 0x1d) + 6);
      *puVar6 = 0x48;
      puVar6[1] = 1;
      puVar6[2] = (byte)(uVar14 >> 10) & 0x1f;
      puVar6[3] = 1;
      *(undefined4 *)(puVar6 + 0x10) = 0x5080f0f0;
      *(undefined4 *)(puVar6 + 0x14) = 0x24080c0;
      bVar1 = pfVar19 == pfVar20;
      pfVar19 = pfVar19 + 2;
      if (bVar1) {
                    // WARNING: Could not recover jumptable at 0x800533c8. Too many branches
                    // WARNING: Treating indirect jump as call
        (*UNRECOVERED_JUMPTABLE_00)();
        return;
      }
    }
    uVar16 = gte_stRBK();
    bVar2 = (byte)uVar14;
    puVar6[10] = (bVar2 & 3) + (char)uVar16;
    puVar6[0xb] = bVar2;
    cVar3 = (bVar2 & 7) * '\b' + '0';
    puVar6[0xc] = cVar3;
    puVar6[0xd] = cVar3;
    puVar6[0xe] = cVar3;
    puVar6[0xf] = 0x2e;
    puVar6[0x10] = 0;
    puVar6[0x11] = 4;
    *(short *)(puVar6 + 0x12) = (short)((int)(uVar14 << 0x11) >> 0x1d);
    *(short *)(puVar6 + 0x14) = (short)((int)(uVar14 << 0xe) >> 0x1d);
    *(short *)(puVar6 + 0x16) = (short)((int)(uVar14 << 0xb) >> 0x1d) + 2;
    *puVar6 = 0xb;
    puVar6[2] = 0;
    puVar6[3] = 1;
    bVar1 = pfVar19 != pfVar20;
    pfVar19 = pfVar19 + 2;
  } while (bVar1);
                    // WARNING: Could not recover jumptable at 0x80053348. Too many branches
                    // WARNING: Treating indirect jump as call
  (*UNRECOVERED_JUMPTABLE_00)();
  return;
}



void FUN_800533d0(int param_1)

{
  int iVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  
  gte_ldIR1(unknownVector.x);
  gte_ldIR3(unknownVector.z);
  gte_sqr0(0);
  uVar4 = *(uint *)(param_1 + 0x1c);
  iVar1 = gte_stMAC1();
  iVar3 = gte_stMAC3();
  uVar2 = iVar1 + iVar3;
  if ((int)uVar4 < 0) {
    gte_ldLZCS(uVar2);
    if (uVar2 != 0) {
      uVar4 = gte_stLZCR();
      uVar5 = (uVar4 & 0xfffffffe) - 0x18;
      iVar1 = uVar2 << (uVar5 & 0x1f);
      if ((int)uVar5 < 0) {
        iVar1 = (int)uVar2 >> (-uVar5 & 0x1f);
      }
      uVar2 = (uint)((int)SquareRootShapeScaledArray[iVar1 + -0x40] <<
                    ((int)(0x1f - (uVar4 & 0xfffffffe)) >> 1 & 0x1fU)) >> 0xc;
    }
    if ((int)(uVar2 - unknownVector.y) < 0) {
      if ((int)(uVar2 + unknownVector.y) < 0) {
        iVar3 = (unknownVector.y << 5) / (int)uVar2;
        iVar1 = 0x80;
      }
      else {
        iVar3 = (int)(uVar2 << 5) / -unknownVector.y;
        iVar1 = 0x40;
      }
    }
    else if ((int)(uVar2 + unknownVector.y) < 0) {
      iVar3 = (int)(uVar2 << 5) / -unknownVector.y;
      iVar1 = 0xc0;
    }
    else {
      iVar3 = (unknownVector.y << 5) / (int)uVar2;
      iVar1 = 0;
    }
    if (unknownVector.z - unknownVector.x < 0) {
      if (unknownVector.z + unknownVector.x < 0) {
        iVar7 = (unknownVector.x << 5) / unknownVector.z;
        iVar6 = 0x80;
      }
      else {
        iVar7 = (unknownVector.z << 5) / -unknownVector.x;
        iVar6 = 0x40;
      }
    }
    else if (unknownVector.z + unknownVector.x < 0) {
      iVar7 = (unknownVector.z << 5) / -unknownVector.x;
      iVar6 = 0xc0;
    }
    else {
      iVar7 = (unknownVector.x << 5) / unknownVector.z;
      iVar6 = 0;
    }
    uVar4 = ((uint)-(iVar7 + iVar6) >> 2 & 0x3f) << 0x10 | 0x80000000 |
            ((uint)-(iVar3 + iVar1) >> 2 & 0x3f) << 0x16 | (uint)unknownPositionVector.z >> 2;
  }
  *(uint *)(param_1 + 0x1c) = uVar4;
  return;
}



void AllocateParticleToBuffer(char particleSubType)

{
  uint randomNumber;
  char *nextFreeSlot;
  char *endPosition;
  code *return_in_a3_maybe;
  char currentType;
  
                    // //0x2000 size of particle list
                    // 
  endPosition = ptr_headOfParticleBuffer + 0x2000;
  if (ptr_nextFreeParticleSlotInBuffer == endPosition) {
    randomNumber = rand();
                    // WARNING: Could not recover jumptable at 0x800535b8. Too many branches
                    // WARNING: Treating indirect jump as call
    endPosition[((randomNumber & 0xff) + 1) * -0x20 + 1] = particleSubType;
    (*return_in_a3_maybe)();
    return;
  }
  currentType = ptr_nextFreeParticleSlotInBuffer[1];
  ptr_nextFreeParticleSlotInBuffer[1] = particleSubType;
  nextFreeSlot = ptr_nextFreeParticleSlotInBuffer + 0x20;
  if (currentType != -1) {
    do {
      ptr_nextFreeParticleSlotInBuffer = nextFreeSlot;
      if (ptr_nextFreeParticleSlotInBuffer == endPosition) {
        return;
      }
      nextFreeSlot = ptr_nextFreeParticleSlotInBuffer + 0x20;
    } while (-1 < ptr_nextFreeParticleSlotInBuffer[1]);
    return;
  }
  if (nextFreeSlot != endPosition) {
    ptr_nextFreeParticleSlotInBuffer[0x21] = -1;
  }
  ptr_nextFreeParticleSlotInBuffer = nextFreeSlot;
  return;
}



void FUN_80053608(char *param_1)

{
  bool bVar1;
  char *pcVar2;
  
  pcVar2 = ptr_nextFreeParticleSlotInBuffer;
  if ((param_1 + 0x20 != ptr_headOfParticleBuffer + 0x2000) && (param_1[0x21] != -1)) {
    param_1[1] = -2;
    if (-1 < (int)pcVar2 - (int)param_1) {
      ptr_nextFreeParticleSlotInBuffer = param_1;
    }
    return;
  }
  pcVar2 = param_1 + -0x20;
  if (param_1 != ptr_headOfParticleBuffer) {
    do {
      if (-1 < pcVar2[1]) break;
      bVar1 = pcVar2 != ptr_headOfParticleBuffer;
      pcVar2 = pcVar2 + -0x20;
    } while (bVar1);
  }
  if (-1 < (int)ptr_nextFreeParticleSlotInBuffer - (int)(pcVar2 + 0x20)) {
    ptr_nextFreeParticleSlotInBuffer = pcVar2 + 0x20;
  }
  pcVar2[0x21] = -1;
  return;
}



void FUN_800536a4(undefined4 *param_1)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  int iVar3;
  
  iVar3 = 0;
  param_1[5] = 0x7f7f7f7f;
  param_1[2] = 0;
  *param_1 = 0;
  param_1[1] = 0;
  param_1[6] = 1;
  param_1[7] = 1;
  puVar2 = param_1;
  do {
    uVar1 = param_1[3];
    iVar3 = iVar3 + 1;
    puVar2[0x12] = 0;
    puVar2[0x13] = 0;
    puVar2[0x14] = 0;
    puVar2[0x16] = 0x7f7f7f7f;
    puVar2[0x11] = uVar1;
    puVar2 = puVar2 + 6;
  } while (iVar3 < 4);
  return;
}



void FUN_80053708(undefined4 param_1,int *param_2)

{
  DAT_80075944 = '\x01' - DAT_80075944;
  ArrayCopy(param_2,param_1,0xa4);
  FUN_800536a4(param_1);
  return;
}



void FUN_8005375c(int param_1)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  do {
    iVar1 = param_1 + iVar2;
    iVar2 = iVar2 + 1;
    *(undefined *)(iVar1 + 0x24) = 0;
    *(undefined *)(iVar1 + 0x20) = 0x7f;
    *(undefined *)(iVar1 + 0x28) = 0xff;
  } while (iVar2 < 4);
  return;
}



// WARNING: Removing unreachable block (ram,0x80053848)
// WARNING: Removing unreachable block (ram,0x80053898)

undefined4 FUN_80053790(undefined4 *param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  undefined4 *puVar4;
  undefined4 uVar5;
  
  uVar5 = 1;
  iVar2 = 0;
  puVar4 = param_1;
  while ((*(byte *)(puVar4 + 8) + 0x30 < (uint)*(byte *)(puVar4 + 10) &&
         (iVar2 = iVar2 + 1, (int)(uint)*(byte *)(puVar4 + 9) < (int)(*(byte *)(puVar4 + 8) - 0x30))
         )) {
    puVar4 = (undefined4 *)((int)param_1 + iVar2);
    if (3 < iVar2) {
LAB_800537f4:
      iVar2 = 0;
      puVar4 = param_1;
      do {
        *(char *)((int)param_1 + iVar2 + 0x2c) = *(char *)((int)param_1 + iVar2 + 0x20) + '0';
        iVar1 = (uint)*(byte *)((int)param_1 + iVar2 + 0x28) -
                (uint)*(byte *)((int)param_1 + iVar2 + 0x2c);
        if (iVar1 == 0) {
          trap(0x1c00);
        }
        *(char *)((int)param_1 + iVar2 + 0x30) = *(char *)((int)param_1 + iVar2 + 0x20) + -0x30;
        *(short *)(puVar4 + 0xd) = (short)(0x4000 / iVar1);
        iVar1 = (uint)*(byte *)((int)param_1 + iVar2 + 0x30) -
                (uint)*(byte *)((int)param_1 + iVar2 + 0x24);
        if (iVar1 == 0) {
          trap(0x1c00);
        }
        iVar2 = iVar2 + 1;
        *(short *)(puVar4 + 0xf) = (short)(0x3f80 / iVar1);
        puVar4 = (undefined4 *)((int)puVar4 + 2);
      } while (iVar2 < 4);
      iVar1 = 3;
      iVar2 = (int)param_1 + 3;
      *param_1 = 0;
      param_1[1] = 0;
      param_1[2] = 0;
      param_1[6] = 1;
      param_1[7] = 1;
      do {
        *(undefined *)(iVar2 + 0x14) = 0x7f;
        iVar1 = iVar1 + -1;
        iVar2 = iVar2 + -1;
      } while (-1 < iVar1);
      iVar2 = 0;
      do {
        iVar3 = 3;
        iVar1 = (int)param_1 + 3;
        param_1[0x13] = 0;
        param_1[0x14] = 0;
        param_1[0x12] = 0;
        do {
          *(undefined *)(iVar1 + 0x58) = 0x7f;
          iVar3 = iVar3 + -1;
          iVar1 = iVar1 + -1;
        } while (-1 < iVar3);
        iVar2 = iVar2 + 0x18;
        param_1 = param_1 + 6;
      } while (iVar2 < 0x60);
      return uVar5;
    }
  }
  FUN_8005375c(param_1);
  uVar5 = 0;
  goto LAB_800537f4;
}



void FUN_80053940(byte *param_1,int param_2)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  
  iVar5 = 0;
  iVar4 = param_2;
  do {
    uVar2 = (uint)*param_1;
    uVar3 = (uint)*(byte *)(param_2 + iVar5 + 0x2c);
    if (uVar3 < uVar2) {
      iVar1 = ((int)((uVar2 - uVar3) * (uint)*(ushort *)(iVar4 + 0x34)) >> 7) + 0x7f;
      if (iVar1 < 0x100) {
LAB_800539d4:
        *param_1 = (byte)iVar1;
      }
      else {
        *param_1 = 0xff;
      }
    }
    else {
      uVar3 = (uint)*(byte *)(param_2 + iVar5 + 0x30);
      if (uVar2 < uVar3) {
        iVar1 = 0x7f - ((int)((uVar3 - uVar2) * (uint)*(ushort *)(iVar4 + 0x3c)) >> 7);
        if (-1 < iVar1) goto LAB_800539d4;
        *param_1 = 0;
      }
      else {
        *param_1 = 0x7f;
      }
    }
    param_1 = param_1 + 1;
    iVar5 = iVar5 + 1;
    iVar4 = iVar4 + 2;
    if (3 < iVar5) {
      return;
    }
  } while( true );
}



void ControlDemoModeSpyro(void)

{
  ushort uVar1;
  int iVar2;
  Buttons *pBVar3;
  int iVar4;
  Buttons BVar5;
  
  if (isDemoMode == 2) {
    uVar1 = CONCAT11(DAT_800786a2,DAT_800786a3);
    DAT_8007738c = DAT_800786a4;
    FUN_80053940(&DAT_8007738c,&currentButtonOneFrame);
    BVar5 = ~(uint)uVar1 &
            (L2_BUTTON|R2_BUTTON|L1_BUTTON|R1_BUTTON|TRIANGLE_BUTTON|CIRCLE_BUTTON|X_BUTTON|
             SQUARE_BUTTON|SELECT_BUTTON|L3_BUTTON|R3_BUTTON|START_BUTTON|UP_BUTTON|RIGHT_BUTTON|
             DOWN_BUTTON|LEFT_BUTTON) | (DAT_8007738c >> 0x10 & 0xff) << 0x10 |
            DAT_8007738c & 0xff000000;
    pBVar3 = ptr_demoModeInputs + 1;
    *ptr_demoModeInputs = BVar5;
    ptr_demoModeInputs = pBVar3;
  }
  else {
    BVar5 = *ptr_demoModeInputs;
    DAT_8007738c = CONCAT13((char)(BVar5 >> 0x18),CONCAT12((char)(BVar5 >> 0x10),0x7f7f));
    ptr_demoModeInputs = ptr_demoModeInputs + 1;
  }
  BVar5 = BVar5 & (L2_BUTTON|R2_BUTTON|L1_BUTTON|R1_BUTTON|TRIANGLE_BUTTON|CIRCLE_BUTTON|X_BUTTON|
                   SQUARE_BUTTON|SELECT_BUTTON|L3_BUTTON|R3_BUTTON|START_BUTTON|UP_BUTTON|
                   RIGHT_BUTTON|DOWN_BUTTON|LEFT_BUTTON);
  unk_movementRelated = 3;
  currentButtonOneFrame = ~currentButton & BVar5;
  DAT_8007737c = currentButton & ~BVar5;
  DAT_80077388 = (uint)((DAT_8007738c &
                        ~(L2_BUTTON|R2_BUTTON|L1_BUTTON|R1_BUTTON|TRIANGLE_BUTTON|CIRCLE_BUTTON|
                          X_BUTTON|SQUARE_BUTTON|SELECT_BUTTON|L3_BUTTON|R3_BUTTON|START_BUTTON|
                          UP_BUTTON|RIGHT_BUTTON|DOWN_BUTTON|LEFT_BUTTON)) != 0x7f7f0000);
  iVar4 = 0;
  pBVar3 = &DAT_800773d0;
  iVar2 = 0;
  currentButton = BVar5;
  do {
    *(Buttons *)((int)&DAT_800773c0 + iVar2) = currentButton;
    *(Buttons *)((int)&DAT_800773c4 + iVar2) = currentButtonOneFrame;
    *(Buttons *)((int)&DAT_800773c8 + iVar2) = DAT_8007737c;
    *(undefined4 *)((int)&DAT_800773bc + iVar2) = unk_movementRelated;
    iVar4 = iVar4 + 1;
    *pBVar3 = DAT_8007738c;
    pBVar3 = pBVar3 + 6;
    *(uint *)((int)&DAT_800773cc + iVar2) = DAT_80077388;
    iVar2 = iVar2 + 0x18;
  } while (iVar4 < 4);
  DAT_80077390 = 1;
  DAT_80077394 = 1;
  if (((currentButton & (UP_BUTTON|RIGHT_BUTTON|DOWN_BUTTON|LEFT_BUTTON)) != 0) ||
     ((DAT_8007738c &
      ~(L2_BUTTON|R2_BUTTON|L1_BUTTON|R1_BUTTON|TRIANGLE_BUTTON|CIRCLE_BUTTON|X_BUTTON|SQUARE_BUTTON
        |SELECT_BUTTON|L3_BUTTON|R3_BUTTON|START_BUTTON|UP_BUTTON|RIGHT_BUTTON|DOWN_BUTTON|
       LEFT_BUTTON)) != 0x7f7f0000)) {
    DAT_80077394 = 0;
  }
  if ((DAT_80077394 == 0) ||
     ((currentButton &
      (L2_BUTTON|R2_BUTTON|L1_BUTTON|R1_BUTTON|TRIANGLE_BUTTON|CIRCLE_BUTTON|X_BUTTON|SQUARE_BUTTON|
       UP_BUTTON|RIGHT_BUTTON|DOWN_BUTTON|LEFT_BUTTON)) != 0)) {
    DAT_80077390 = 0;
  }
  gameClockRelated2 = 2;
  return;
}



void Buttons(void)

{
  int iVar1;
  Buttons BVar2;
  Buttons BVar3;
  Buttons BVar4;
  uint uVar5;
  undefined4 local_18;
  
  levelTimer = levelTimer + 1;
  if (isLoading != 0) {
    loadingTimer = loadingTimer + 1;
  }
  if (isDemoMode != 0) {
    return;
  }
  iVar1 = PadGetState(0);
  if (iVar1 == 1) {
    DAT_800758e0 = 0;
  }
  if ((DAT_800758e0 == 0) &&
     ((PadSetAct(0,&vibrationStrength,2), iVar1 == 2 ||
      ((iVar1 == 6 && (iVar1 = PadSetActAlign(0,&DAT_8006fccc), iVar1 != 0)))))) {
    DAT_800758e0 = 1;
  }
  iVar1 = PadInfoMode(0,2,0);
  if (iVar1 == 0) {
    DAT_800756d8 = 0;
  }
  else {
    if ((DAT_80075730 != 0) && (iVar1 = PadSetMainMode(0,1,0), iVar1 != 0)) {
      DAT_80075730 = 0;
    }
    DAT_800756d8 = 1;
  }
  if ((isVibrationOn == 0) || (DAT_800756d8 == 0)) {
    DAT_80075904 = 0;
    maybe_vibrationTimer = 0;
    vibrationFlag = 0;
    DAT_8007584c = 0;
  }
  if (DAT_80075904 == 0) {
    if (maybe_vibrationTimer == 0) {
      if (vibrationFlag != 0) {
        vibrationStrength = 0;
        DAT_80075801 = (undefined)DAT_8007584c;
        goto LAB_80053e84;
      }
      vibrationStrength = 0;
    }
    else {
      vibrationStrength = 1;
    }
    DAT_80075801 = 0;
  }
  else {
    vibrationStrength = 1;
    DAT_80075801 = 0x78;
  }
LAB_80053e84:
  DAT_80075904 = DAT_80075904 + -1;
  if (DAT_80075904 < 0) {
    DAT_80075904 = 0;
  }
  maybe_vibrationTimer = maybe_vibrationTimer + -1;
  if (maybe_vibrationTimer < 0) {
    maybe_vibrationTimer = 0;
  }
  vibrationFlag = vibrationFlag + -1;
  if (vibrationFlag < 0) {
    vibrationFlag = 0;
  }
  if (DAT_800786a0 != '\0') {
    DAT_80075730 = 1;
    uVar5 = 0;
    goto LAB_80053f94;
  }
  if (DAT_800786a1 != 0x53) {
    if (DAT_800786a1 < 0x54) {
      uVar5 = 2;
      if (DAT_800786a1 != 0x41) {
        uVar5 = 1;
      }
      goto LAB_80053f94;
    }
    uVar5 = 1;
    if (DAT_800786a1 != 0x73) goto LAB_80053f94;
  }
  if (unk_movementRelated != 3) {
    FUN_8005375c(&currentButtonOneFrame);
    DAT_80077398 = DAT_800786a4;
    FUN_80053790(&currentButtonOneFrame);
  }
  uVar5 = 3;
LAB_80053f94:
  DAT_80077388 = 0;
  if (uVar5 < 2) {
    if (DAT_80075868 != '\0') {
      unk_movementRelated = uVar5;
    }
  }
  else {
    BVar4 = ~(uint)CONCAT11(DAT_800786a2,DAT_800786a3);
    if (uVar5 == 3) {
      local_18 = DAT_800786a4;
      FUN_80053940(&local_18,&currentButtonOneFrame);
      BVar2 = BVar4;
      if (DAT_800786a1 == 0x53) {
        BVar2 = BVar4 & ~(R2_BUTTON|L1_BUTTON|R1_BUTTON|TRIANGLE_BUTTON|SQUARE_BUTTON);
        if ((BVar4 & SQUARE_BUTTON) != 0) {
          BVar2 = BVar2 | R2_BUTTON;
        }
        if ((BVar4 & TRIANGLE_BUTTON) != 0) {
          BVar2 = BVar2 | R1_BUTTON;
        }
        if ((BVar4 & R1_BUTTON) != 0) {
          BVar2 = BVar2 | TRIANGLE_BUTTON;
        }
        if ((BVar4 & R2_BUTTON) != 0) {
          BVar2 = BVar2 | L1_BUTTON;
        }
        if ((BVar4 & L1_BUTTON) != 0) {
          BVar2 = BVar2 | SQUARE_BUTTON;
        }
      }
      BVar4 = BVar2;
      if ((BVar2 & (UP_BUTTON|RIGHT_BUTTON|DOWN_BUTTON|LEFT_BUTTON)) == 0) {
        if (local_18._2_1_ < 0xc1) {
          if (local_18._2_1_ < 0x40) {
            BVar4 = BVar2 | LEFT_BUTTON;
          }
        }
        else {
          BVar4 = BVar2 | RIGHT_BUTTON;
        }
        if (local_18._3_1_ < 0xc1) {
          if (local_18._3_1_ < 0x40) {
            BVar4 = BVar4 | UP_BUTTON;
          }
        }
        else {
          BVar4 = BVar4 | DOWN_BUTTON;
        }
        if ((local_18._2_1_ != 0x7f) || (local_18._3_1_ != 0x7f)) {
          DAT_80077388 = 1;
        }
      }
    }
    else {
      local_18 = 0x7f7f7f7f;
    }
    iVar1 = gameClockRelated2;
    BVar3 = ~currentButton & BVar4;
    BVar2 = currentButton & ~BVar4;
    if (DAT_80075868 == '\0') {
      if ((int)unk_movementRelated < 2) {
        unk_movementRelated = uVar5;
      }
    }
    else {
      if (gameClockRelated2 == 0) {
        DAT_80077390 = 1;
        DAT_80077394 = 1;
        currentButtonOneFrame = BVar3;
        DAT_8007737c = BVar2;
      }
      else {
        currentButtonOneFrame = currentButtonOneFrame | BVar3;
        DAT_8007737c = DAT_8007737c | BVar2;
      }
      DAT_8007738c = local_18;
      currentButton = BVar4;
      unk_movementRelated = uVar5;
      if (DAT_80077390 != 0) {
        if (((BVar4 & (UP_BUTTON|RIGHT_BUTTON|DOWN_BUTTON|LEFT_BUTTON)) != 0) ||
           ((uVar5 == 3 && ((local_18._2_1_ != '\x7f' || (local_18._3_1_ != '\x7f')))))) {
          DAT_80077394 = 0;
        }
        if ((DAT_80077394 == 0) ||
           ((BVar4 & (L2_BUTTON|R2_BUTTON|L1_BUTTON|R1_BUTTON|TRIANGLE_BUTTON|CIRCLE_BUTTON|X_BUTTON
                      |SQUARE_BUTTON|UP_BUTTON|RIGHT_BUTTON|DOWN_BUTTON|LEFT_BUTTON)) != 0)) {
          DAT_80077390 = 0;
        }
      }
    }
    if (gameClockRelated2 < 4) {
      (&DAT_800773bc)[gameClockRelated2 * 6] = uVar5;
      (&DAT_800773c0)[iVar1 * 6] = BVar4;
      (&DAT_800773c4)[iVar1 * 6] = BVar3;
      (&DAT_800773c8)[iVar1 * 6] = BVar2;
      (&DAT_800773cc)[iVar1 * 6] = DAT_80077388;
      (&DAT_800773d0)[iVar1 * 6] = DAT_8007738c;
    }
  }
  gameClockRelated2 = gameClockRelated2 + 1;
                    // WARNING: Read-only address (ram,0x800786a0) is written
                    // WARNING: Read-only address (ram,0x800786a1) is written
                    // WARNING: Read-only address (ram,0x800786a2) is written
                    // WARNING: Read-only address (ram,0x800786a3) is written
                    // WARNING: Read-only address (ram,0x800786a4) is written
  return;
}



void HudVisual(int param_1,int param_2,int ptr_toNumber,int param_4)

{
  byte bVar1;
  int iVar2;
  byte *pbVar3;
  byte *pbVar4;
  byte local_10 [16];
  
  pbVar3 = local_10;
  pbVar4 = local_10;
  if (ptr_toNumber != 0) {
    do {
      iVar2 = ptr_toNumber / 10;
      *pbVar3 = (char)ptr_toNumber + (char)iVar2 * -10;
      pbVar4 = pbVar3 + 1;
      ptr_toNumber = iVar2;
      pbVar3 = pbVar4;
    } while (iVar2 != 0);
  }
  if (pbVar4 == local_10) {
    local_10[0] = 0;
    pbVar4 = local_10 + 1;
  }
  iVar2 = 0;
  if (0 < param_2) {
    do {
      if (pbVar4 == local_10) {
        if (param_4 != 0) {
          (&DAT_8007803c)[param_1 * 0x58] = 0;
        }
      }
      else {
        pbVar4 = pbVar4 + -1;
        if (param_4 == 0) {
          (&DAT_80078035)[param_1 * 0x58] = *pbVar4;
        }
        else {
          bVar1 = *pbVar4;
          (&DAT_8007803c)[param_1 * 0x58] = 0xff;
          (&DAT_80078022)[param_1 * 0x2c] = bVar1 + 0x104;
        }
      }
      iVar2 = iVar2 + 1;
      param_1 = param_1 + 1;
    } while (iVar2 < param_2);
  }
  return;
}



void HudTransition(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  iVar1 = param_1;
  if (0 < param_2) {
    do {
      iVar2 = iVar2 + 1;
      (&DAT_80077ffc)[iVar1 * 0x16] = *(int *)(&DAT_8006e690 + iVar1 * 0xc) + param_3;
      iVar1 = param_1 + iVar2;
    } while (iVar2 < param_2);
  }
  return;
}



void FUN_8005445c(int param_1,int param_2,short param_3)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  iVar1 = param_1;
  if (0 < param_2) {
    do {
      iVar2 = iVar2 + 1;
      (&DAT_8007840e)[iVar1 * 4] = (&DAT_8006e71e)[iVar1 * 4] + param_3;
      iVar1 = param_1 + iVar2;
    } while (iVar2 < param_2);
  }
  return;
}



void HudNumSpin(int param_1,int param_2,int param_3)

{
  int iVar1;
  int iVar2;
  
  iVar1 = param_1 << 1;
  if (0 < param_2) {
    param_2 = param_2 + param_1;
    do {
      iVar1 = iVar1 * 4 + param_1 * 3;
      iVar2 = iVar1 * 8;
      if (((&DAT_80078032)[iVar2] != '\0') ||
         ((uint)(byte)(&DAT_80078035)[iVar2] != (int)(short)(&DAT_80078022)[iVar1 * 4] - 0x104U)) {
        (&DAT_80078032)[iVar2] = (char)param_3;
      }
      if (((&DAT_80078035)[param_1 * 0x58] != 0xff) && (param_3 == 0xc0)) {
        (&DAT_80078022)[param_1 * 0x2c] = (byte)(&DAT_80078035)[param_1 * 0x58] + 0x104;
        (&DAT_8007803c)[param_1 * 0x58] = 0xff;
      }
      param_1 = param_1 + 1;
      iVar1 = param_1 * 2;
    } while (param_1 < param_2);
  }
  return;
}



void FUN_80054578(void)

{
  amountOfGemsInCurrentLevel = levelGemsCollectedArray[levelID_Indexer];
  HudVisual(0,4,amountOfGemsInCurrentLevel,1);
  if ((hudChestState - 1 < 2) || (hudChestState == 4)) {
    hudChestState = 3;
    hudChestKeyframe = 0xd;
  }
  return;
}



void Maybe_HudInPauseMenu(int param_1)

{
  byte bVar1;
  undefined4 uVar2;
  int iVar3;
  undefined *puVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  int *dest;
  
  puVar4 = &DAT_80077fec;
  memset(&DAT_80077fec,'\0',0x420);
  iVar6 = 0;
  dest = &DAT_80077ff8;
  iVar5 = 0;
  iVar7 = 0;
  do {
    FUN_800529cc(puVar4);
    Vec3Copy(dest,(int *)(&DAT_8006e68c + iVar7));
    dest = dest + 0x16;
    puVar4 = puVar4 + 0x58;
    (&DAT_80078033)[iVar5] = 0x20;
    (&DAT_8007803c)[iVar5] = 0xff;
    (&DAT_80078035)[iVar5] = 0xff;
    (&DAT_8007803b)[iVar5] = 0xb;
    iVar5 = iVar5 + 0x58;
    iVar6 = iVar6 + 1;
    iVar7 = iVar7 + 0xc;
  } while (iVar6 < 0xc);
  memset((uchar *)&DAT_8007840c,'\0',0x100);
  iVar5 = 0;
  do {
    *(undefined2 *)((int)&DAT_8007840c + iVar5) = *(undefined2 *)((int)&DAT_8006e71c + iVar5);
    *(undefined2 *)((int)&DAT_8007840e + iVar5) = *(undefined2 *)((int)&DAT_8006e71e + iVar5);
    *(undefined2 *)((int)&DAT_80078410 + iVar5) = *(undefined2 *)((int)&DAT_8006e720 + iVar5);
    *(undefined2 *)((int)&DAT_80078412 + iVar5) = *(undefined2 *)((int)&DAT_8006e722 + iVar5);
    iVar5 = iVar5 + 8;
  } while (iVar5 < 0x60);
  DAT_80078182 = 0x1d7;
  DAT_8007828a = 0x1fa;
  DAT_80078392 = 0x3a;
  DAT_800783ea = 0xad;
  DAT_800783fa = 0x40;
  hudChestState = 1;
  hudDragonState = 1;
  hudLivesState = 1;
  hudEggsState = 1;
  hudAnimationState = 1;
  hudChestKeyframe = 0;
  hudDragonKeyframe = 0;
  hudLivesKeyframe = 0;
  DAT_80077fb0 = 0;
  DAT_80077fb1 = 0;
  timerHudStayDown = 0;
  DAT_80077fb8 = 0;
  DAT_80077fbc = 0;
  DAT_80077fc0 = 0;
  DAT_80077fc4 = 0;
  dragonCountCutsceneHUD = levelGemsCollectedArray[levelID_Indexer];
  DAT_80077fd4 = globalEggCount;
  DAT_80077fd8 = keys;
  DAT_80077fe0 = lifePellets;
  DAT_80077fd0 = lives;
  HudVisual(0,4,dragonCountCutsceneHUD,1);
  HudVisual(5,2,dragonCountCutsceneHUD,1);
  HudVisual(8,2,DAT_80077fd0,1);
  iVar5 = lifePellets;
  if (param_1 != 0) {
    DAT_80077fdc = 0;
    iVar6 = 0;
    if (0 < lifePellets) {
      iVar3 = 0;
      iVar7 = 0x60;
      do {
        iVar6 = iVar6 + 1;
        *(ushort *)((int)&DAT_8007840c + iVar7) =
             (ushort)(byte)(&DAT_8006e7b4)[iVar3] + (short)DAT_80078368 + -0x1d;
        uVar2 = DAT_8007836c;
        bVar1 = (&DAT_8006e7b5)[iVar3];
        iVar3 = iVar3 + 2;
        *(undefined2 *)((int)&DAT_80078410 + iVar7) = 8;
        *(undefined2 *)((int)&DAT_80078412 + iVar7) = 8;
        *(ushort *)((int)&DAT_8007840e + iVar7) = (ushort)bVar1 + (short)uVar2 + -0x1c;
        iVar7 = iVar7 + 8;
      } while (iVar6 < iVar5);
    }
  }
  return;
}



void Maybe_HudUpdates(void)

{
  byte bVar1;
  short sVar2;
  undefined4 uVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int local_28;
  undefined4 local_24;
  undefined4 local_20;
  
  uVar5 = hudChestHeadSpinTimer - gameSpeedMultiplyer;
  hudChestHeadSpinTimer = uVar5 & 0xff;
  hudChestHeadSpinTimer = (hudChestHeadSpinTimer + 1) % 9;
  DAT_80078192 = (undefined)uVar5;
  DAT_80078191 = (char)(sineWaveArray[hudChestHeadSpinTimer + 0x40] >> 9);
  if (hudChestState == '\0') {
    if (amountOfGemsInCurrentLevel != levelGemsCollectedArray[levelID_Indexer]) {
      hudChestState = '\x01';
      hudChestKeyframe = 0;
    }
  }
  else if (hudChestState == '\x01') {
    if (hudChestKeyframe == 0xd) {
      hudChestState = '\x02';
      hudChestKeyframe = 0;
      timerHudStayDown = 0;
      if (amountOfGemsInCurrentLevel == levelGemsCollectedArray[levelID_Indexer]) {
        timerHudStayDown = -0x28;
      }
    }
    else {
      sVar2 = *(short *)(&DAT_8006e77c + (uint)hudChestKeyframe * 2);
      hudChestKeyframe = hudChestKeyframe + 1;
LAB_80054d1c:
      HudTransition(0,5,(int)sVar2);
    }
  }
  else if (hudChestState == '\x02') {
    if ((amountOfGemsInCurrentLevel == levelGemsCollectedArray[levelID_Indexer]) &&
       (hudChestKeyframe == 0)) {
      timerHudStayDown = timerHudStayDown + 1;
      if (timerHudStayDown == 0x14) {
LAB_80054d50:
        hudChestState = '\x03';
        hudChestKeyframe = 0xd;
      }
    }
    else {
      timerHudStayDown = 0;
      if ((levelGemsCollectedArray[levelID_Indexer] - amountOfGemsInCurrentLevel < 3) ||
         (bVar1 = hudChestKeyframe - 0x20, (hudChestKeyframe & 0x1f) != 0)) {
        bVar1 = hudChestKeyframe - 0x10;
      }
      hudChestKeyframe = bVar1;
      HudVisual(0,4,amountOfGemsInCurrentLevel + 1,0);
      HudNumSpin(0,4,hudChestKeyframe);
      if (levelGemsCollectedArray[levelID_Indexer] - amountOfGemsInCurrentLevel < 0xc9) {
        if ((0x14 < levelGemsCollectedArray[levelID_Indexer] - amountOfGemsInCurrentLevel) ||
           (hudChestKeyframe == 0xc0)) {
          amountOfGemsInCurrentLevel = amountOfGemsInCurrentLevel + 1;
        }
      }
      else {
        amountOfGemsInCurrentLevel = amountOfGemsInCurrentLevel + 8;
      }
      if ((amountOfGemsInCurrentLevel == *(short *)(&DAT_8006f438 + levelID_Indexer * 2)) &&
         (hudChestKeyframe == 0)) {
        hudChestState = '\x04';
      }
    }
  }
  else if (hudChestState == '\x03') {
    if (amountOfGemsInCurrentLevel == levelGemsCollectedArray[levelID_Indexer]) {
      if (hudChestKeyframe != 0) {
        sVar2 = *(short *)(&DAT_8006e798 + (uint)(byte)(hudChestKeyframe - 1) * 2);
        hudChestKeyframe = hudChestKeyframe - 1;
        goto LAB_80054d1c;
      }
      hudChestState = '\0';
    }
    else {
      hudChestState = '\x01';
    }
  }
  else if ((hudChestState == '\x04') &&
          (timerHudStayDown = timerHudStayDown + gameSpeedMultiplyer, 0xef < timerHudStayDown))
  goto LAB_80054d50;
  DAT_8007829d = DAT_8007829d + 8;
  DAT_8007829a = (undefined)((ushort)sineWaveArray[DAT_8007829d + 0x40] >> 8);
  if (hudDragonState == '\x01') {
    if (hudDragonKeyframe == 0xd) {
      hudDragonState = '\x02';
      hudDragonKeyframe = 0;
      DAT_80077fb8 = -0x28;
    }
    else {
      sVar2 = *(short *)(&DAT_8006e77c + (uint)hudDragonKeyframe * 2);
      hudDragonKeyframe = hudDragonKeyframe + 1;
LAB_80054e98:
      HudTransition(5,3,(int)sVar2);
    }
  }
  else if (hudDragonState == '\x02') {
    DAT_80077fb8 = DAT_80077fb8 + 1;
    if (DAT_80077fb8 == 0x14) {
      hudDragonState = '\x03';
      hudDragonKeyframe = 0xd;
    }
  }
  else if (hudDragonState == '\x03') {
    if (hudDragonKeyframe != 0) {
      sVar2 = *(short *)(&DAT_8006e798 + (uint)(byte)(hudDragonKeyframe - 1) * 2);
      hudDragonKeyframe = hudDragonKeyframe - 1;
      goto LAB_80054e98;
    }
    hudDragonState = '\0';
  }
  DAT_800783a2 = (undefined)hudChestHeadSpinTimer;
  if (hudLivesState == '\0') {
    if ((DAT_80077fd0 != lives) || (DAT_80077fe0 != lifePellets)) {
      hudLivesState = '\x01';
      hudLivesKeyframe = 0;
    }
  }
  else if (hudLivesState == '\x01') {
    if (hudLivesKeyframe == 0xd) {
      hudLivesState = '\x02';
      hudLivesKeyframe = 0;
      DAT_80077fbc = 0;
      if ((DAT_80077fd0 == lives) && (DAT_80077fe0 == lifePellets)) {
        DAT_80077fbc = -0x28;
      }
    }
    else {
      sVar2 = *(short *)(&DAT_8006e77c + (uint)hudLivesKeyframe * 2);
      hudLivesKeyframe = hudLivesKeyframe + 1;
LAB_8005517c:
      HudTransition(8,3,(int)sVar2);
    }
  }
  else if (hudLivesState == '\x02') {
    if ((DAT_80077fd0 == lives) && (hudLivesKeyframe == 0)) {
      if (DAT_80077fe0 == lifePellets) {
        DAT_80077fbc = DAT_80077fbc + 1;
        if (DAT_80077fbc == 0x14) {
          hudLivesState = '\x03';
          hudLivesKeyframe = 0xd;
        }
      }
      else {
        DAT_80077fbc = 0;
        DAT_80077fe0 = lifePellets;
      }
    }
    else {
      DAT_80077fbc = 0;
      hudLivesKeyframe = hudLivesKeyframe - 0x10;
      HudVisual(8,2,DAT_80077fd0 + 1,0);
      HudNumSpin(8,2,hudLivesKeyframe);
      if (hudLivesKeyframe == 0xc0) {
        DAT_80077fd0 = DAT_80077fd0 + 1;
      }
    }
  }
  else if (hudLivesState == '\x03') {
    if ((DAT_80077fd0 == lives) && (DAT_80077fe0 == lifePellets)) {
      if (hudLivesKeyframe != 0) {
        sVar2 = *(short *)(&DAT_8006e798 + (uint)(byte)(hudLivesKeyframe - 1) * 2);
        hudLivesKeyframe = hudLivesKeyframe - 1;
        goto LAB_8005517c;
      }
      hudLivesState = '\0';
    }
    else {
      hudLivesState = '\x01';
      DAT_80077fe0 = lifePellets;
    }
  }
  iVar7 = 0;
  if (0 < DAT_80077fe0) {
    iVar6 = 0;
    iVar4 = 0x60;
    do {
      iVar7 = iVar7 + 1;
      *(ushort *)((int)&DAT_8007840c + iVar4) =
           (ushort)(byte)(&DAT_8006e7b4)[iVar6] + (short)DAT_80078368 + -0x1d;
      uVar3 = DAT_8007836c;
      bVar1 = (&DAT_8006e7b5)[iVar6];
      iVar6 = iVar6 + 2;
      *(undefined2 *)((int)&DAT_80078410 + iVar4) = 8;
      *(undefined2 *)((int)&DAT_80078412 + iVar4) = 8;
      *(ushort *)((int)&DAT_8007840e + iVar4) = (ushort)bVar1 + (short)uVar3 + -0x1c;
      iVar4 = iVar4 + 8;
    } while (iVar7 < DAT_80077fe0);
  }
  if (hudEggsState == 1) {
    if (DAT_80077fb0 == 0xd) {
      hudEggsState = 2;
      DAT_80077fc0 = 0;
      if ((DAT_80077fd4 == globalEggCount) && (DAT_80077fdc == 0)) {
        DAT_80077fc0 = -0x28;
      }
    }
    else {
      sVar2 = *(short *)(&DAT_8006e77c + (uint)DAT_80077fb0 * 2);
      DAT_80077fb0 = DAT_80077fb0 + 1;
LAB_800554a4:
      FUN_8005445c(0,0xc,-(int)sVar2);
    }
  }
  else if (hudEggsState < 2) {
    if ((hudEggsState == 0) && ((DAT_80077fd4 != globalEggCount || (DAT_80077fdc != 0)))) {
      hudEggsState = 1;
      DAT_80077fb0 = 0;
    }
  }
  else if (hudEggsState == 2) {
    if (DAT_80077fd4 == globalEggCount) {
      iVar7 = DAT_80077fd4;
      if (DAT_80077fdc == 0) {
        if (DAT_80077fc0 == 0x14) {
          hudEggsState = 3;
          DAT_80077fb0 = 0xd;
        }
      }
      else {
LAB_8005540c:
        DAT_80077fd4 = iVar7;
        DAT_80077fc0 = 0;
      }
    }
    else if (DAT_80077fc0 == 1) {
      local_28 = DAT_80077fd4 * 0x144 + -0x9c4;
      local_24 = 0x3f0;
      local_20 = 0x1000;
      (*ptr_OverlayCreateParticle)(0x10,0x4d,&local_28,0);
    }
    else {
      iVar7 = DAT_80077fd4 + 1;
      if (8 < DAT_80077fc0) goto LAB_8005540c;
    }
    DAT_80077fc0 = DAT_80077fc0 + 1;
  }
  else if (hudEggsState == 3) {
    if ((DAT_80077fd4 == globalEggCount) && (DAT_80077fdc == 0)) {
      if (DAT_80077fb0 != 0) {
        sVar2 = *(short *)(&DAT_8006e798 + (uint)(byte)(DAT_80077fb0 - 1) * 2);
        DAT_80077fb0 = DAT_80077fb0 - 1;
        goto LAB_800554a4;
      }
      hudEggsState = 0;
    }
    else {
      hudEggsState = 1;
    }
  }
  if (keys != 1) {
    DAT_80077fd8 = keys;
  }
  if (hudAnimationState == 1) {
    if (DAT_80077fb1 == 0xd) {
      hudAnimationState = 2;
      DAT_80077fc4 = 0;
      if (DAT_80077fd8 == keys) {
        DAT_80077fc4 = -0x28;
      }
      goto LAB_8005570c;
    }
    sVar2 = *(short *)(&DAT_8006e77c + (uint)DAT_80077fb1 * 2);
    DAT_80077fb1 = DAT_80077fb1 + 1;
LAB_80055700:
    HudTransition(0xb,1,-(int)sVar2);
  }
  else {
    if (hudAnimationState < 2) {
      if ((hudAnimationState != 0) || (DAT_80077fd8 == keys)) goto LAB_8005570c;
    }
    else {
      if (hudAnimationState == 2) {
        if (DAT_80077fd8 == keys) {
          if (DAT_80077fc4 == 0x14) {
            hudAnimationState = 3;
            DAT_80077fb1 = 0xd;
          }
        }
        else if (DAT_80077fc4 == 0) {
          iVar4 = 0;
          iVar7 = 0x6000000;
          do {
            iVar4 = iVar4 + 1;
            (*ptr_OverlayCreateParticle)(1,0xc,&DAT_800783b4,iVar7 + 0x8080);
            iVar7 = iVar7 + 0x1000000;
          } while (iVar4 < 6);
        }
        else if (0xb < DAT_80077fc4) {
          DAT_800783fd = '@';
          DAT_80077fc4 = 0;
          DAT_80077fd8 = keys;
        }
        DAT_80077fc4 = DAT_80077fc4 + 1;
        goto LAB_8005570c;
      }
      if (hudAnimationState != 3) goto LAB_8005570c;
      if (DAT_80077fd8 == keys) {
        if (DAT_80077fb1 == 0) {
          hudAnimationState = 0;
          goto LAB_8005570c;
        }
        sVar2 = *(short *)(&DAT_8006e798 + (uint)(byte)(DAT_80077fb1 - 1) * 2);
        DAT_80077fb1 = DAT_80077fb1 - 1;
        goto LAB_80055700;
      }
    }
    hudAnimationState = 1;
    DAT_80077fb1 = 0;
  }
LAB_8005570c:
  DAT_800783fd = DAT_800783fd + 4;
  DAT_800783f8 = (char)((ushort)sineWaveArray[DAT_800783fd + 0x40] >> 7);
  DAT_800783f9 = (char)((ushort)sineWaveArray[DAT_800783fd] >> 7);
  if (0x13 < lifePellets) {
    lives = lives + 1;
    if (99 < lives) {
      lives = 99;
    }
    lifePellets = lifePellets + -0x14;
  }
  return;
}



void maybe_SpawnGemNumberMoby(int param_1,int param_2)

{
  int iVar1;
  short extraout_var;
  short extraout_var_00;
  int *piVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  short local_24;
  
  iVar4 = 1;
  iVar6 = *(int *)(param_2 + 0xc);
  iVar5 = *(int *)(param_2 + 0x10);
  CosScaled(cameraAngle.yaw + -0x400);
  SinScaled(cameraAngle.yaw + -0x400);
  local_24 = 0x80;
  if (param_1 != 0) {
    do {
      iVar1 = param_1 / 10;
      piVar2 = (int *)(*ptr_OverlaySpawnDynamicObj)(param_1 % 10 + 0x104,0);
      piVar2[3] = iVar6;
      piVar2[4] = iVar5;
      iVar3 = *(int *)(param_2 + 0x14);
      iVar7 = (param_1 % 10) * iVar4;
      *(undefined *)(piVar2 + 0x11) = 0;
      *(undefined *)((int)piVar2 + 0x45) = 0;
      piVar2[5] = iVar3;
      iVar3 = *piVar2;
      *(char *)((int)piVar2 + 0x46) = (char)((ushort)cameraAngle.yaw >> 4);
      *(int *)(iVar3 + 8) = (int)extraout_var;
      *(int *)(iVar3 + 0xc) = (int)extraout_var_00;
      *(int *)(iVar3 + 0x10) = (int)local_24;
      iVar4 = iVar4 * 10;
      *(int *)(iVar3 + 4) = iVar7;
      local_24 = local_24 + -0x10;
      iVar6 = iVar6 - ((int)sineWaveArray[*(byte *)((int)piVar2 + 0x46)] >> 4);
      iVar5 = iVar5 + ((int)sineWaveArray[*(byte *)((int)piVar2 + 0x46) + 0x40] >> 4);
      param_1 = iVar1;
    } while (iVar1 != 0);
  }
  return;
}



void FUN_8005595c(void)

{
  uint local_48;
  undefined4 local_44;
  undefined2 local_40;
  undefined2 local_3e;
  undefined2 local_34;
  undefined4 local_24;
  undefined4 local_20;
  undefined4 local_1c;
  undefined2 local_18;
  undefined2 local_16;
  undefined2 local_14;
  undefined2 local_12;
  undefined2 local_10;
  
  SpuInit();
  maybeStartOfSoundBuffer = 0xc3;
  maybe_sfxRelated = 0x3fff;
  sfxVolume = 0x1000;
  DAT_80075f0c = 0x3ccc;
  DAT_80075f0e = 0x3ccc;
  musicVolume2 = 0x5000;
  musicVolume = 0x5000;
  DAT_80075f1a = 0x5000;
  DAT_800761d8 = 0xffffffff;
  SpuSetCommonAttr(&maybeStartOfSoundBuffer);
  local_44 = 0xff13;
  local_40 = 0x2fff;
  local_3e = 0x2fff;
  local_34 = 0x400;
  local_24 = 1;
  local_20 = 1;
  local_1c = 3;
  local_48 = 0xffffff;
  local_18 = 0;
  local_16 = 0;
  local_14 = 0;
  local_12 = 0;
  local_10 = 0xf;
  SpuSetVoiceAttr(&local_48);
  SpuSetKey(0,0xffffff);
  SpuSetTransferMode(0);
  memset((uchar *)sfxArray,'\0',0x2a0);
  speakerSetupOption = 0;
  return;
}



int PlaySoundEffect(uint sfxID,int *ptr_sourceMoby,uint playbackMode,int *param_4)

{
  byte angleDelta;
  int isPlaying;
  uint maybeCameraDistanceScaled;
  uint cameraAngle;
  ushort uVar1;
  int soundIdxCounterInBytes;
  int *puVar5;
  uint field4_minIdx;
  uint soundIdxCounter;
  int localSoundIdxInBytes;
  uint soundIdx;
  int maybeAudibleDistance;
  int maybeCameraDistance;
  uint soundIdxMask;
  undefined4 local_74;
  short volumeLeft;
  short volumeRight;
  short local_64;
  int local_5c;
  MaybeSoundEffectMetadata *local_58;
  int cameraDistanceVector [4];
  
  if (playbackMode == 8) {
    isPlaying = IsSoundAlreadyPlaying(ptr_sourceMoby,sfxID);
    if (isPlaying == 2) {
      return 0;
    }
                    // Probably difference to sound origin calculation to determine volume
    Vec3Subtract(cameraDistanceVector,ptr_sourceMoby + 3,&cameraPosition.x);
    Vec3ScaleDownByPowerOfTwo(cameraDistanceVector,4);
    maybeCameraDistanceScaled = Vec3CalculateLengthE(cameraDistanceVector,flag3D);
    maybeAudibleDistance = (uint)*(byte *)((int)ptr_sourceMoby + 0x55) << 10;
    maybeCameraDistance = maybeCameraDistanceScaled << 4;
    if (*(byte *)((int)ptr_sourceMoby + 0x55) == 0) {
      maybeAudibleDistance = 0x4000;
    }
    if (maybeAudibleDistance < maybeCameraDistance) {
      if (param_4 != (int *)0x0) {
        *(undefined *)param_4 = 0x7f;
      }
      return 0x7f;
    }
  }
  else if (((playbackMode < 9) && (playbackMode == 4)) &&
          (isPlaying = IsSoundAlreadyPlaying(ptr_sourceMoby,sfxID), isPlaying == 2)) {
    return 0;
  }
  field4_minIdx = 0x100;
  soundIdxCounter = 0;
  soundIdxCounterInBytes = 0;
  do {
    soundIdx = soundIdxCounter;
    if ((*(ushort *)((int)&sfxArray[0].flags + soundIdxCounterInBytes) & 0xc1) == 0) break;
    if ((&sfxArray[0].field4_0xc)[soundIdxCounterInBytes] < sfxArray[field4_minIdx].field4_0xc) {
      field4_minIdx = soundIdxCounter;
    }
    soundIdxCounter = soundIdxCounter + 1;
    soundIdxCounterInBytes = soundIdxCounterInBytes + 0x1c;
    soundIdx = 0xffffffff;
  } while ((int)soundIdxCounter < 0x18);
  if ((int)soundIdx < 0) {
    return 0;
  }
  if (soundIdx == 0x18) goto LAB_80056160;
  sfxArray[soundIdx].flags = (ushort)playbackMode | 1;
  sfxArray[soundIdx].ptr_mobyPlayingSound = ptr_sourceMoby;
  sfxArray[soundIdx].localSoundID = (char)sfxID;
  if ((DAT_800761dc & 2) == 0) {
    sfxArray[soundIdx].field3_0x8 = (uint)*(ushort *)((int)sfxMetadataArray + sfxID * 0x14 + 10);
  }
  else {
    DAT_800761dc = DAT_800761dc & 0xfffffffd;
    sfxArray[soundIdx].field3_0x8 = (uint)DAT_800761f4;
  }
  local_74 = 0x10093;
  soundIdxMask = 1 << (soundIdx & 0x1f);
  localSoundIdxInBytes = sfxID * 0x14;
  puVar5 = (int *)(sfxMetadataArray + sfxID * 5);
  local_5c = *puVar5;
  local_64 = *(short *)((int)puVar5 + 10);
  if (*(ushort *)(puVar5 + 3) != 0) {
    isPlaying = puVar5[4];
    if (isPlaying == 1) {
      isPlaying = rand();
      field4_minIdx = (uint)*(ushort *)(sfxMetadataArray + sfxID * 5 + 3);
      if (field4_minIdx == 0) {
        trap(0x1c00);
      }
      if ((field4_minIdx == 0xffffffff) && (isPlaying == -0x80000000)) {
        trap(0x1800);
      }
      local_64 = local_64 +
                 (short)(isPlaying % (int)field4_minIdx) *
                 *(short *)((int)sfxMetadataArray + localSoundIdxInBytes + 0xe);
    }
    else if (isPlaying < 2) {
      if (isPlaying == 0) {
        local_64 = local_64 - *(short *)((int)puVar5 + 0xe) * (*(ushort *)(puVar5 + 3) >> 1);
        isPlaying = rand();
        field4_minIdx = (uint)*(ushort *)(sfxMetadataArray + sfxID * 5 + 3);
        if (field4_minIdx == 0) {
          trap(0x1c00);
        }
        if ((field4_minIdx == 0xffffffff) && (isPlaying == -0x80000000)) {
          trap(0x1800);
        }
        local_64 = local_64 +
                   (short)(isPlaying % (int)field4_minIdx) *
                   *(short *)((int)sfxMetadataArray + localSoundIdxInBytes + 0xe);
      }
    }
    else if (isPlaying == 2) {
      isPlaying = rand();
      field4_minIdx = (uint)*(ushort *)(sfxMetadataArray + sfxID * 5 + 3);
      if (field4_minIdx == 0) {
        trap(0x1c00);
      }
      if ((field4_minIdx == 0xffffffff) && (isPlaying == -0x80000000)) {
        trap(0x1800);
      }
      local_64 = local_64 -
                 (short)(isPlaying % (int)field4_minIdx) *
                 *(short *)((int)sfxMetadataArray + localSoundIdxInBytes + 0xe);
    }
  }
  local_58 = sfxMetadataArray[sfxID * 5 + 1];
  uVar1 = sfxArray[soundIdxCounter].flags & 0x1c;
  if (uVar1 == 8) {
    if ((DAT_800761dc & 1) == 0) {
      volumeLeft = 0x3ccc;
      sfxArray[soundIdx].field7_0x10 = 0x3ccc;
      sfxArray[soundIdx].field8_0x12 = 0x3ccc;
      volumeRight = 0x3ccc;
    }
    else {
      DAT_800761dc = DAT_800761dc & 0xfffffffe;
      sfxArray[soundIdx].field7_0x10 = USHORT_800761e8;
      sfxArray[soundIdx].field8_0x12 = USHORT_800761ea;
      volumeRight = USHORT_800761ea;
      volumeLeft = USHORT_800761e8;
    }
    cameraAngle = ATan2Scaled(cameraPosition.x - sfxArray[soundIdx].ptr_mobyPlayingSound[3],
                              cameraPosition.y - sfxArray[soundIdx].ptr_mobyPlayingSound[4],0);
    angleDelta = Maybe_Calculate8BitDifference
                           ((int)((uint)(ushort)::cameraAngle.yaw << 0x10) >> 0x14,
                            cameraAngle & 0xff);
                    // Last parameter: SoundEffectArray[uVar7].field10_0x18
    CalculateStereoVolumes
              (&volumeLeft,maybeCameraDistance,angleDelta,maybeAudibleDistance,
               soundIdx * 0x1c + -0x7ff8a0c0);
  }
  else if (uVar1 < 9) {
    if (uVar1 == 4) {
LAB_80055ee8:
      if ((DAT_800761dc & 1) == 0) {
        sfxArray[soundIdx].field7_0x10 = 0x2000;
        sfxArray[soundIdx].field8_0x12 = 0x2000;
        volumeRight = 0x2000;
        volumeLeft = 0x2000;
        sfxArray[soundIdxCounter].volumeRight = 0x2000;
        sfxArray[soundIdxCounter].volumeLeft = 0x2000;
      }
      else {
        DAT_800761dc = DAT_800761dc & 0xfffffffe;
        sfxArray[soundIdx].field7_0x10 = USHORT_800761e8;
        sfxArray[soundIdx].field8_0x12 = USHORT_800761e8;
        volumeLeft = USHORT_800761e8;
        volumeRight = USHORT_800761ea;
        sfxArray[soundIdxCounter].volumeRight = USHORT_800761ea;
        sfxArray[soundIdxCounter].volumeLeft = USHORT_800761e8;
      }
    }
  }
  else if (uVar1 == 0x10) goto LAB_80055ee8;
  volumeLeft = (short)(volumeLeft * sfxVolume >> 0xc);
  volumeRight = (short)(volumeRight * sfxVolume >> 0xc);
  SpuSetVoiceAttr(&soundIdxMask);
  sfxArrayFlags = sfxArrayFlags | 1 << (soundIdx & 0x1f);
LAB_80056160:
  sfxArray[soundIdx].field10_0x18 = param_4;
  if (param_4 != (int *)0x0) {
    *(char *)param_4 = (char)soundIdx;
    if (sfxMetadataArray[sfxID * 5 + 1] == (MaybeSoundEffectMetadata *)0x0) {
      return 0;
    }
    sfxArray[soundIdx].flags = sfxArray[soundIdx].flags | 0x100;
  }
  return 0;
}



void FUN_80056200(uint param_1,int param_2)

{
  uint uVar1;
  
  uVar1 = param_1 & 0x7f;
  if ((uVar1 < 0x18) &&
     ((DAT_8007623c = DAT_8007623c | 1 << (param_1 & 0x1f), param_2 == 2 || (param_2 == 4)))) {
    if (sfxArray[uVar1].field10_0x18 != (int *)0x0) {
      *(undefined *)sfxArray[uVar1].field10_0x18 = 0x7f;
    }
    sfxArray[uVar1].flags = 0x40;
    sfxArray[uVar1].field10_0x18 = (int *)0x0;
    sfxArray[uVar1].ptr_mobyPlayingSound = (int *)0x0;
    sfxArray[uVar1].localSoundID = -1;
  }
  return;
}



void UNK_SuperchargeRelated(int *param_1,int param_2)

{
  SoundEffect *pSVar1;
  int iVar2;
  int **ppiVar3;
  ushort *puVar4;
  uint uVar5;
  uint uVar6;
  
  uVar6 = 0;
  uVar5 = 0;
  pSVar1 = sfxArray;
  puVar4 = &sfxArray[0].flags;
  ppiVar3 = &sfxArray[0].field10_0x18;
  iVar2 = 0;
  do {
    if ((pSVar1->ptr_mobyPlayingSound == param_1) &&
       ((param_2 == 1 || ((param_2 == 2 && ((*puVar4 & 0x100) != 0)))))) {
      uVar6 = uVar6 | 1 << (uVar5 & 0x1f);
      if (*ppiVar3 != (int *)0x0) {
        *(undefined *)*ppiVar3 = 0x7f;
      }
      *ppiVar3 = (int *)0x0;
      *puVar4 = 0x40;
      pSVar1->ptr_mobyPlayingSound = (int *)0x0;
      *(undefined4 *)((int)&sfxArray[0].field9_0x14 + iVar2) = 0;
      (&sfxArray[0].localSoundID)[iVar2] = -1;
    }
    pSVar1 = pSVar1 + 1;
    puVar4 = puVar4 + 0xe;
    ppiVar3 = ppiVar3 + 7;
    uVar5 = uVar5 + 1;
    iVar2 = iVar2 + 0x1c;
  } while ((int)uVar5 < 0x18);
  DAT_8007623c = DAT_8007623c | uVar6;
  return;
}



undefined4 Maybe_SoundEffectProcessing(void)

{
  ushort uVar1;
  uint uVar2;
  ushort uVar3;
  undefined *puVar4;
  int iVar5;
  short volR;
  uint uVar6;
  int iVar7;
  int iVar8;
  uint vNum;
  uint *puVar9;
  uint uVar10;
  int *piVar11;
  uint local_80;
  undefined4 local_7c;
  short local_78;
  short local_76;
  undefined2 local_6c;
  int aiStack_40 [4];
  byte local_30;
  
  uVar10 = 0;
  vNum = 0;
  puVar9 = &sfxArray[0].field3_0x8;
  piVar11 = &sfxArray[0].field9_0x14;
  iVar7 = 0;
  local_30 = (byte)((ushort)cameraAngle.yaw >> 4);
  do {
    uVar1 = *(ushort *)((int)&sfxArray[0].flags + iVar7);
    if ((uVar1 & 0x40) == 0) {
      uVar6 = 1 << (vNum & 0x1f);
      if ((uVar1 & 1) != 0) {
        uVar2 = SpuGetKeyStatus(uVar6);
        uVar1 = *(ushort *)((int)&sfxArray[0].flags + iVar7);
        uVar2 = uVar2 & 0xff;
        if ((uVar1 & 2) == 0) {
          if ((uVar2 == 1) || (uVar2 == 3)) {
            *(ushort *)((int)&sfxArray[0].flags + iVar7) = uVar1 | 2;
          }
LAB_8005647c:
          uVar1 = *(ushort *)((int)&sfxArray[0].flags + iVar7);
          uVar3 = uVar1 & 0x1c;
          if ((uVar1 & 1) != 0) {
            if (uVar3 == 8) {
              SpuGetVoiceVolume(vNum,(short *)((int)&sfxArray[0].volumeLeft + iVar7),
                                (short *)((int)&sfxArray[0].volumeRight + iVar7));
              iVar5 = *(int *)((int)&sfxArray[0].ptr_mobyPlayingSound + iVar7);
              uVar6 = (uint)*(byte *)(iVar5 + 0x55);
              iVar8 = uVar6 << 10;
              if (uVar6 == 0) {
                iVar8 = 0x4000;
              }
              Vec3Subtract(aiStack_40,(int *)(iVar5 + 0xc),&cameraPosition.x);
              uVar6 = Vec3CalculateLengthE(aiStack_40,flag3D);
              if (iVar8 <= (int)uVar6) {
                local_76 = *(short *)((int)&sfxArray[0].volumeRight + iVar7) >> 1;
                *(short *)((int)&sfxArray[0].volumeRight + iVar7) = local_76;
                uVar1 = *(ushort *)((int)&sfxArray[0].volumeLeft + iVar7);
                local_78 = (short)uVar1 >> 1;
                *(short *)((int)&sfxArray[0].volumeLeft + iVar7) = local_78;
                if ((local_76 < 0x40) &&
                   (uVar6 = 1 << (vNum & 0x1f), (int)((uint)uVar1 << 0x10) >> 0x11 < 0x40)) {
                  puVar4 = *(undefined **)((int)&sfxArray[0].field10_0x18 + iVar7);
                  goto LAB_800565b4;
                }
                *(short *)((int)&sfxArray[0].volumeLeft + iVar7) =
                     (short)(*(short *)((int)&sfxArray[0].volumeLeft + iVar7) * sfxVolume >> 0xc);
                volR = (short)(*(short *)((int)&sfxArray[0].volumeRight + iVar7) * sfxVolume >> 0xc)
                ;
                *(short *)((int)&sfxArray[0].volumeRight + iVar7) = volR;
                SpuSetVoiceVolume(vNum,*(short *)((int)&sfxArray[0].volumeLeft + iVar7),volR);
                goto LAB_80056794;
              }
              iVar5 = *(int *)((int)&sfxArray[0].ptr_mobyPlayingSound + iVar7);
              iVar5 = ATan2Scaled(*(int *)(iVar5 + 0xc) - cameraPosition.x,
                                  *(int *)(iVar5 + 0x10) - cameraPosition.y,0);
              CalculateStereoVolumes
                        (&local_78,uVar6,iVar5 - (uint)local_30 & 0xff,iVar8,iVar7 + -0x7ff8a0c0);
            }
            else if (uVar3 < 9) {
              if (uVar3 == 4) {
                local_76 = 0x2000;
                local_78 = 0x2000;
              }
            }
            else if (uVar3 == 0x10) {
              local_76 = *(short *)((int)&sfxArray[0].volumeRight + iVar7);
              local_78 = *(short *)((int)&sfxArray[0].volumeLeft + iVar7);
            }
            local_80 = 1 << (vNum & 0x1f);
            local_78 = (short)(local_78 * sfxVolume >> 0xc);
            local_76 = (short)(local_76 * sfxVolume >> 0xc);
            *puVar9 = *puVar9 + *piVar11;
            *piVar11 = 0;
            local_7c = 0x13;
            local_6c = (undefined2)*puVar9;
            SpuSetVoiceAttr(&local_80);
          }
        }
        else {
          if (uVar2 != 3) goto LAB_8005647c;
          puVar4 = *(undefined **)((int)&sfxArray[0].field10_0x18 + iVar7);
LAB_800565b4:
          uVar10 = uVar10 | uVar6;
          if (puVar4 != (undefined *)0x0) {
            *puVar4 = 0x7f;
          }
          *(undefined2 *)((int)&sfxArray[0].flags + iVar7) = 0x40;
          *(undefined4 *)((int)&sfxArray[0].field10_0x18 + iVar7) = 0;
          *(undefined4 *)((int)&sfxArray[0].ptr_mobyPlayingSound + iVar7) = 0;
          (&sfxArray[0].localSoundID)[iVar7] = -1;
        }
      }
    }
    else {
      *(undefined2 *)((int)&sfxArray[0].flags + iVar7) = 0;
    }
LAB_80056794:
    puVar9 = puVar9 + 7;
    piVar11 = piVar11 + 7;
    vNum = vNum + 1;
    iVar7 = iVar7 + 0x1c;
    if (0x17 < (int)vNum) {
      DAT_8007623c = DAT_8007623c | uVar10;
      return 0;
    }
  } while( true );
}



// param_1 is the track number to play. param_2 are the flags. When param_2 is 1, it starts from the
// beginning of the track. If it is 8, it continues from where it left off.

void PlayMusicTrack(int track_number,int flags)

{
  char cVar1;
  int musicplaying;
  u_char_conflict local_28 [8];
  CdlLOC aCStack_20 [2];
  u_char_conflict local_18;
  char local_17;
  
  if ((musicState & 0x80) != 0) {
    return;
  }
  if (flags == 2) {
LAB_8005693c:
    if ((musicState & 0x10) == 0) {
      if ((((musicRelatedSecondParam != 0) || (DAT_800776c4 != 0)) && (musicRelatedSecondParam != 4)
          ) && (musicRelatedSecondParam != 2)) {
        musicRelatedSecondParam = 2;
      }
    }
    else if (musicVolume == 0) {
      musicState = 0x40;
    }
    else {
      DAT_80076230 = -(int)musicVolume >> 3;
      DAT_800776c4 = 9;
      DAT_800761d8 = 0;
      musicState = 0x200;
    }
  }
  else {
    cVar1 = (char)track_number;
    if (flags < 3) {
      if (flags != 1) {
        return;
      }
      if (((musicState & 0x40) == 0) || (musicVolume == 0)) {
        musicplaying = 1;
        if (musicRelatedSecondParam != 0) goto LAB_80056b00;
        musicplaying = 1;
joined_r0x80056af8:
        if (DAT_800776c4 == 0) {
          return;
        }
LAB_80056b00:
        if (musicRelatedSecondParam == musicplaying) {
          return;
        }
        musicRelatedSecondParam = musicplaying;
        return;
      }
      local_28[0] = 200;
      CdControlB('\x0e',local_28,(u_char_conflict *)0x0);
      local_18 = '\x01';
      musicplaying = track_number;
      if (track_number < 0) {
        musicplaying = track_number + 7;
      }
      local_17 = cVar1 + (char)(musicplaying >> 3) * -8;
      CdControlB('\r',&local_18,(u_char_conflict *)0x0);
      CdIntToPos(cdSectorRelated[track_number * 2],aCStack_20);
      musicplaying = CdControlB('\x1b',&aCStack_20[0].minute,(u_char_conflict *)0x0);
    }
    else {
      if (flags == 4) goto LAB_8005693c;
      if (flags != 8) {
        return;
      }
      if (((musicState & 0x40) == 0) || (musicVolume == 0)) {
        musicplaying = 8;
        if (musicRelatedSecondParam != 0) goto LAB_80056b00;
        musicplaying = 8;
        goto joined_r0x80056af8;
      }
      local_28[0] = 200;
      CdControlB('\x0e',local_28,(u_char_conflict *)0x0);
      local_18 = '\x01';
      if (track_number < 0) {
        track_number = track_number + 7;
      }
      local_17 = cVar1 + (char)(track_number >> 3) * -8;
      CdControlB('\r',&local_18,(u_char_conflict *)0x0);
      CdIntToPos(DAT_800776b8,aCStack_20);
      musicplaying = CdControlB('\x1b',&aCStack_20[0].minute,(u_char_conflict *)0x0);
    }
    musicRelatedSecondParam = flags;
    if (musicplaying != 0) {
      DAT_800776c4 = 0;
      musicRelatedSecondParam = 0;
      musicState = 0x10;
      DAT_80076230 = musicVolume2 - musicVolume >> 3;
      DAT_800761d8 = musicVolume2;
    }
  }
  return;
}



void PauseMusicAndSFX(uint param_1)

{
  ushort uVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  
  uVar3 = 0;
  iVar4 = 0;
  do {
    if (((*(ushort *)((int)&sfxArray[0].flags + iVar4) & 0x83) != 0) &&
       (((int)(param_1 ^ 0xffffff) >> (uVar3 & 0x1f) & 1U) != 0)) {
      DAT_8007623c = DAT_8007623c | 1 << (uVar3 & 0x1f);
      uVar2 = uVar3 & 0x7f;
      uVar1 = sfxArray[uVar2].flags & 0x1c;
      if (uVar1 == 8) {
        if (sfxArray[uVar2].ptr_mobyPlayingSound != (int *)0x0) {
          *(undefined *)(sfxArray[uVar2].ptr_mobyPlayingSound + 0x15) = 0x7f;
        }
      }
      else if (((uVar1 < 9) && (uVar1 == 4)) && (sfxArray[uVar2].ptr_mobyPlayingSound != (int *)0x0)
              ) {
        *(undefined *)(sfxArray[uVar2].ptr_mobyPlayingSound + 0xa8) = 0x7f;
      }
      uVar2 = uVar3 & 0x7f;
      sfxArray[uVar2].flags = 0x40;
      sfxArray[uVar2].ptr_mobyPlayingSound = (int *)0x0;
      sfxArray[uVar2].field10_0x18 = (int *)0x0;
      sfxArray[uVar2].localSoundID = -1;
    }
    uVar3 = uVar3 + 1;
    iVar4 = iVar4 + 0x1c;
  } while ((int)uVar3 < 0x18);
  sfxArrayFlags = 0;
  PlayMusicTrack(0,4);
  return;
}



void CalculateStereoVolumes
               (short *volumeOutputStruct,int distance,byte angle,uint maxDistance,
               short *maybeSourceVolumeStruct)

{
  byte bVar1;
  short monoVolume;
  uint uVar2;
  uint uVar3;
  
  if (maxDistance != 0) {
    bVar1 = -angle;
    if ((byte)(angle - 0x40) < 0x80) {
      uVar2 = (uint)angle;
    }
    else {
      bVar1 = angle + 0x80;
      uVar2 = (uint)(byte)(0x80 - angle);
    }
    uVar3 = (uint)(distance << 8) / maxDistance;
    if (maxDistance == 0) {
      trap(0x1c00);
    }
    *volumeOutputStruct =
         (short)((int)((uint)bVar1 *
                      ((int)(((int)*maybeSourceVolumeStruct -
                             (uVar3 * (int)*maybeSourceVolumeStruct >> 8)) * 0x10000) >> 0x10)) >> 7
                );
    volumeOutputStruct[1] =
         (short)((int)(uVar2 * ((int)(((int)maybeSourceVolumeStruct[1] -
                                      (uVar3 * (int)maybeSourceVolumeStruct[1] >> 8)) * 0x10000) >>
                               0x10)) >> 7);
    if (*volumeOutputStruct < 0) {
      *volumeOutputStruct = 0;
    }
    else if (0x3fff < *volumeOutputStruct) {
      *volumeOutputStruct = 0x3fff;
    }
    if (volumeOutputStruct[1] < 0) {
      volumeOutputStruct[1] = 0;
    }
    else if (0x3fff < volumeOutputStruct[1]) {
      volumeOutputStruct[1] = 0x3fff;
    }
    if (speakerSetupOption != 0) {
      monoVolume = (short)((uint)((int)volumeOutputStruct[1] + (int)*volumeOutputStruct) >> 1);
      *volumeOutputStruct = monoVolume;
      volumeOutputStruct[1] = monoVolume;
    }
  }
  return;
}



// This function goes over a struct array that DAT_80075f30 is a part of.
// It checks if it contains an element with the same pointer adn other parameter value. It returns 0
// if it isn't, and depending on an unknown flag either 1 or 2 if it is. It could also be written
// like this:
// 
// int is_element_of_array(int* param1, uint param2)
// {
//  for(int i = 0; i < 24; i++)
//  {
//   if(DAT_80075f30[i].value1 == param1 && DAT_80075f30[i].value2 == param2)
//   {
//    // Not sure what this flag check is for.
//    if(DAT_80075f30[i].value3 % 0x100)
//     return 2;
//    else
//     return 1;
//   }
//  }
//  
//  return 0;
// }

int IsSoundAlreadyPlaying(int *ptr_sourceMoby,uint sfxID)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  iVar1 = 0;
  while ((ptr_sourceMoby != *(int **)((int)&sfxArray[0].ptr_mobyPlayingSound + iVar1) ||
         ((byte)(&sfxArray[0].localSoundID)[iVar1] != sfxID))) {
    iVar2 = iVar2 + 1;
    iVar1 = iVar1 + 0x1c;
    if (0x17 < iVar2) {
      return 0;
    }
  }
  if ((*(ushort *)((int)&sfxArray[0].flags + iVar1) & 0x100) == 0) {
    return 1;
  }
  return 2;
}



void FUN_80056e3c(void)

{
  int iVar1;
  uint uVar2;
  char *pcVar3;
  char local_20 [24];
  
  SpuGetAllKeysStatus(local_20);
  uVar2 = 0;
  iVar1 = 0;
  pcVar3 = local_20;
  do {
    if ((*pcVar3 == '\x01') && ((*(ushort *)((int)&sfxArray[0].flags + iVar1) & 0xc1) == 0)) {
      *(undefined2 *)((int)&sfxArray[0].flags + iVar1) = 0x40;
      DAT_8007623c = DAT_8007623c | 1 << (uVar2 & 0x1f);
    }
    iVar1 = iVar1 + 0x1c;
    uVar2 = uVar2 + 1;
    pcVar3 = pcVar3 + 1;
  } while ((int)uVar2 < 0x18);
  return;
}



void FUN_80056ed4(void)

{
  if ((levelTimerWhenActive & 0x3f) == 0) {
    FUN_80056e3c();
  }
  if (sfxArrayFlags != 0) {
    SpuSetKey(1,sfxArrayFlags & 0xffffff);
    sfxArrayFlags = 0;
  }
  if (DAT_8007623c != 0) {
    SpuSetKey(0,DAT_8007623c & 0xffffff);
    DAT_8007623c = 0;
  }
  return;
}



void ChangeLevelIDRelated(int param_1,uint param_2)

{
  undefined *puVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  LevelIDS *pLVar7;
  int *piVar8;
  int local_20;
  int local_1c;
  int local_18;
  
  puVar1 = *(undefined **)(param_1 * 4 + ptr_levelIDRelated);
  pLVar7 = (LevelIDS *)(puVar1 + 4);
  switch(*puVar1) {
  case 0:
    if ((param_2 == 1) && (0x200 < spyro.position.z - spyro.unkown_heightRelated)) {
      spyro.isOverGoop = 1;
    }
    else if (param_2 == 2) {
      spyro._44_4_ = spyro._44_4_ & 0x3ff | 0x400;
      DAT_80075728 = *(undefined4 *)(puVar1 + 8);
      spyro.maybe_drowningRelated = spyro.unkown_heightRelated;
      DAT_80078cf4 = pLVar7;
    }
    break;
  case 1:
    spyro._44_4_ = spyro._44_4_ & 0x3ff | 0x800;
    spyro.unkown32 = (int)pLVar7;
    break;
  case 2:
    if ((param_2 < 2) && (spyro.position.z - spyro.unkown_heightRelated < 0x191)) {
      *pLVar7 = 1;
    }
    break;
  case 4:
    spyro._44_4_ = spyro._44_4_ & 0x3ff | 0x2000;
    break;
  case 5:
    spyro._44_4_ = spyro._44_4_ & 0x3ff | 0x8000;
    (*ptr_OverlaySpawnDynamicObj)(0xea,0);
    break;
  case 6:
    if (-1 < spyro.health) {
      levelID = *pLVar7;
      if ((int)levelID < 0x41) {
        portalNumber = *(int *)(puVar1 + 8);
        canFlyIn = 1;
        if (levelIDPortalExit != ((int)levelIDPortalExit / 10) * 10) {
          portalToExitFromInHW = levelIDPortalExit;
        }
        piVar8 = &DAT_80078640 + portalNumber;
        Vec3Subtract(&local_20,(int *)&spyro,(int *)(*piVar8 + 0x2c));
        iVar6 = *piVar8;
        iVar4 = *(int *)(iVar6 + 8);
        iVar2 = *(int *)(iVar6 + 0xc);
        iVar3 = *(int *)(iVar6 + 0x10);
        if (*(int *)(iVar6 + 0x18) < 0) {
          levelLoadState = 0;
          gameState = GAMESTATE_LOADING;
          isLoading = 1;
          loadingScreenTimer = 0;
        }
        else {
          iVar6 = *(int *)(iVar6 + 0x18) * 0x58;
          ptr_startOfCurrentLevelMobys[iVar6 + 0x48] = '\x01';
          ptr_startOfCurrentLevelMobys[iVar6 + 0x52] = -1;
          piVar5 = (int *)(ptr_startOfCurrentLevelMobys + iVar6);
          iVar6 = *piVar5;
          if ((-local_20 * iVar4 - local_1c * iVar2) - local_18 * iVar3 < 0) {
            *(char *)((int)piVar5 + 0x49) = '\x01';
            *(int *)(iVar6 + 4) = -*(int *)(*piVar8 + 8) >> 1;
            *(int *)(iVar6 + 8) = -*(int *)(*piVar8 + 0xc) >> 1;
            iVar2 = -*(int *)(*piVar8 + 0x10);
          }
          else {
            *(char *)((int)piVar5 + 0x49) = '\0';
            *(int *)(iVar6 + 4) = *(int *)(*piVar8 + 8) >> 1;
            *(int *)(iVar6 + 8) = *(int *)(*piVar8 + 0xc) >> 1;
            iVar2 = *(int *)(*piVar8 + 0x10);
          }
          *(int *)(iVar6 + 0xc) = iVar2 >> 1;
        }
      }
      else {
        levelID = levelIDPortalExit;
      }
    }
    break;
  case 7:
    if ((param_2 == 2) && (*(int *)(&DAT_800777c0 + *pLVar7 * 4) != 0)) {
      spyro._44_4_ = spyro._44_4_ & 0x3ff | 0x26;
    }
  }
  return;
}



uint FUN_80057380(void)

{
  uint uVar1;
  
  if ((DAT_80075718 & 0x3f) == 0x3f) {
    uVar1 = 0xffffffff;
  }
  else {
    uVar1 = (uint)**(byte **)((DAT_80075718 & 0x3f) * 4 + ptr_levelIDRelated);
  }
  return uVar1;
}



// WARNING: Instruction at (ram,0x8005771c) overlaps instruction at (ram,0x80057718)
// 
// WARNING: Removing unreachable block (ram,0x80057714)
// WARNING: Type propagation algorithm not settling
// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void RenderAllParticles(void)

{
  ushort uVar1;
  int iVar2;
  int iVar3;
  undefined2 *puVar4;
  undefined4 uVar5;
  undefined uVar6;
  int iVar7;
  undefined4 uVar8;
  int iVar9;
  undefined4 uVar10;
  uint uVar11;
  int iVar12;
  uint uVar13;
  undefined4 uVar14;
  uint uVar15;
  int iVar16;
  int *piVar17;
  int iVar18;
  undefined4 uVar19;
  uint uVar20;
  undefined4 uVar21;
  int iVar22;
  undefined4 uVar23;
  undefined4 uVar24;
  int iVar25;
  undefined4 uVar26;
  int iVar27;
  float unaff_s0;
  undefined4 unaff_s1;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  int iVar28;
  int iVar29;
  int iVar30;
  undefined *puVar31;
  undefined2 uVar32;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  char *pcVar33;
  char *pcVar34;
  undefined auStackX_0 [16];
  
  iVar2 = ptr_maybe_graphicsArray2;
  _DAT_1f800020 = &DAT_80075264;
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  gte_ldtr(0,0,0);
  iVar28 = cameraPosition.x >> 2;
  iVar29 = cameraPosition.y >> 2;
  iVar30 = cameraPosition.z >> 2;
  gte_ldDQB(0);
  gte_ldDQA(0x100);
  puVar31 = (undefined *)(int)*(short *)ptr_headOfParticleBuffer;
  iVar27 = DAT_80075780 + -0x400;
  pcVar34 = ptr_headOfParticleBuffer;
  FLOAT_1f800000 = unaff_s0;
  _DAT_1f800004 = unaff_s1;
  _DAT_1f800008 = unaff_s2;
  _DAT_1f80000c = unaff_s3;
  _DAT_1f800010 = unaff_s4;
  _DAT_1f800014 = unaff_s5;
  _DAT_1f800018 = unaff_s6;
  _DAT_1f80001c = unaff_s7;
  _DAT_1f800024 = (undefined *)register0x00000074;
  _DAT_1f800028 = unaff_s8;
  _DAT_1f80002c = unaff_retaddr;
  while( true ) {
    while( true ) {
      while (pcVar33 = pcVar34, iVar3 = (int)puVar31 >> 8, (int)puVar31 < 0) {
        puVar31 = (undefined *)(int)*(short *)(pcVar33 + 0x20);
        pcVar34 = pcVar33 + 0x20;
        if (iVar3 == -1) {
          return;
        }
      }
      uVar32 = SUB42(ptr_graphicsRelated,0);
      uVar6 = (undefined)((uint)ptr_graphicsRelated >> 0x10);
      if (iVar3 == 0) break;
      if (iVar3 == 1) {
        if (iVar27 - (int)ptr_graphicsRelated < 1) {
          DAT_800758b0 = 1;
          return;
        }
        gte_ldVXY0((iVar29 - (*(uint *)(pcVar33 + 4) >> 0x10)) +
                   (iVar30 - (*(uint *)(pcVar33 + 8) & 0xffff)) * 0x10000);
        gte_ldVZ0((*(uint *)(pcVar33 + 4) & 0xffff) - iVar28);
        gte_rtps_b();
        puVar31 = (undefined *)(int)*(short *)(pcVar33 + 0x20);
        pcVar34 = pcVar33 + 0x20;
        pcVar33[3] = '\0';
        gte_ldVXY0((iVar29 - (*(uint *)(pcVar33 + 0xc) & 0xffff)) +
                   (iVar30 - (*(uint *)(pcVar33 + 0xc) >> 0x10)) * 0x10000);
        gte_ldVZ0((*(uint *)(pcVar33 + 8) >> 0x10) - iVar28);
        uVar11 = gte_stSZ3();
        iVar3 = gte_stSXY2();
        gte_rtps_b();
        uVar10 = *(undefined4 *)(pcVar33 + 0x10);
        if ((((uVar11 != 0) && ((int)(uVar11 - 0x2000) < 0)) &&
            ((0 < iVar3 + -0x10000 &&
             ((uVar15 = *(uint *)(pcVar33 + 0x14), iVar3 + -0x1000000 < 0 && (0 < iVar3 * 0x10000)))
             ))) && (iVar3 * 0x10000 + -0x2000000 < 0)) {
          uVar19 = gte_stSXY2();
          ptr_graphicsRelated[2] = iVar3;
          ptr_graphicsRelated[4] = uVar19;
          ptr_graphicsRelated[1] = uVar10;
          ptr_graphicsRelated[3] = uVar15;
          iVar3 = (uVar11 >> 5) - (uVar15 >> 0x18);
          if (0 < iVar3 + -2) {
            *ptr_graphicsRelated = 0x4000000;
            pcVar33[3] = '\x01';
            piVar17 = (int *)(iVar3 * 8 + iVar2);
            puVar4 = (undefined2 *)*piVar17;
            *piVar17 = (int)ptr_graphicsRelated;
            if (puVar4 == (undefined2 *)0x0) {
              piVar17[1] = (int)ptr_graphicsRelated;
              ptr_graphicsRelated = ptr_graphicsRelated + 5;
            }
            else {
              *puVar4 = uVar32;
              *(undefined *)(puVar4 + 1) = uVar6;
              ptr_graphicsRelated = ptr_graphicsRelated + 5;
            }
          }
        }
      }
      else if (iVar3 == 2) {
        uVar11 = *(uint *)(pcVar33 + 8);
        if (iVar27 - (int)ptr_graphicsRelated < 1) {
          DAT_800758b0 = 1;
          return;
        }
        gte_ldVZ0((*(uint *)(pcVar33 + 4) & 0xffff) - iVar28);
        pcVar33[3] = '\0';
        gte_ldVXY0((iVar29 - (*(uint *)(pcVar33 + 4) >> 0x10)) +
                   (iVar30 - (uVar11 & 0xffff)) * 0x10000);
        gte_rtps_b();
        iVar3 = *(int *)(&DAT_80076278 + ((uint)puVar31 & 0xff) * 4);
        uVar15 = uVar11 >> 0x10 & 0xff;
        uVar11 = (uVar11 >> 0x17) + 0x40 & 0x1fe;
        puVar31 = (undefined *)(int)*(short *)(pcVar33 + 0x20);
        pcVar34 = pcVar33 + 0x20;
        uVar13 = gte_stSZ3();
        iVar9 = gte_stSXY2();
        iVar7 = (int)*(short *)((int)sineWaveArray + uVar11);
        if (((-1 < (int)(uVar13 - 0x80)) && ((int)(uVar13 - 0x2000) < 0)) && (0 < iVar9 + -0x10000))
        {
          iVar12 = (int)*(short *)((int)sineWaveArray + uVar11 + 0x80);
          if (((iVar9 + -0x1000000 < 0) && (0 < iVar9 * 0x10000)) &&
             (iVar9 * 0x10000 + -0x2000000 < 0)) {
            gte_ldIR0(uVar15);
            gte_ldIR1(iVar7);
            gte_ldIR2(iVar12);
            read_mt(uVar15,iVar7,iVar12);
            gte_gpf0_b(0);
            pcVar33[3] = '\x01';
            gte_ldtr(uVar15 << 2,iVar7 << 2,iVar12 << 2);
            iVar7 = gte_stMAC1();
            iVar9 = gte_stMAC2();
            uVar11 = iVar7 >> 10;
            uVar15 = iVar9 >> 10;
            gte_ldVZ0(0);
            gte_ldVXY0((-uVar11 & 0xffff) + uVar15 * -0x10000);
            gte_ldVZ1(0);
            gte_ldVXY1((uVar15 & 0xffff) + uVar11 * -0x10000);
            gte_ldVZ2(0);
            gte_ldVXY2((-uVar15 & 0xffff) + uVar11 * 0x10000);
            uVar19 = gte_stR11R12();
            uVar21 = gte_stR13R21();
            uVar23 = gte_stR22R23();
            uVar24 = gte_stR31R32();
            uVar26 = gte_stR33();
            gte_ldR13R21(0);
            gte_ldR31R32(0);
            gte_ldR11R12(0x1000);
            gte_ldR33(0x1000);
            gte_ldR22R23(0xa00);
            gte_rtpt_b();
            uVar10 = *(undefined4 *)(pcVar33 + 0xc);
            iVar7 = (uVar13 >> 5) - (uint)(*(ushort *)(pcVar33 + 0x10) >> 8);
            if (-1 < iVar7) {
              iVar3 = iVar3 + (*(ushort *)(pcVar33 + 0x10) & 0xff) * 8;
              uVar13 = *(uint *)(iVar3 + 4);
              uVar20 = *(uint *)(iVar3 + 8);
              uVar5 = gte_stSXY0();
              gte_ldVXY0((uVar11 & 0xffff) + uVar15 * 0x10000);
              gte_ldVZ0(0);
              uVar8 = gte_stSXY1();
              uVar14 = gte_stSXY2();
              gte_rtps_b();
              ptr_graphicsRelated[2] = uVar5;
              ptr_graphicsRelated[4] = uVar8;
              ptr_graphicsRelated[6] = uVar14;
              ptr_graphicsRelated[1] = uVar10;
              *ptr_graphicsRelated = 0x9000000;
              ptr_graphicsRelated[3] = uVar13;
              ptr_graphicsRelated[9] = uVar20;
              ptr_graphicsRelated[7] = uVar13 & 0xff | uVar20 & 0xff00;
              uVar10 = gte_stSXY2();
              ptr_graphicsRelated[5] = uVar20 ^ uVar20 & 0xff00 | uVar13 & 0xff00;
              ptr_graphicsRelated[8] = uVar10;
              gte_ldR11R12(uVar19);
              gte_ldR13R21(uVar21);
              gte_ldR22R23(uVar23);
              gte_ldR31R32(uVar24);
              gte_ldR33(uVar26);
              gte_ldtr(0,0,0);
              piVar17 = (int *)(iVar7 * 8 + iVar2);
              puVar4 = (undefined2 *)*piVar17;
              *piVar17 = (int)ptr_graphicsRelated;
              if (puVar4 == (undefined2 *)0x0) {
                piVar17[1] = (int)ptr_graphicsRelated;
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
              else {
                *puVar4 = uVar32;
                *(undefined *)(puVar4 + 1) = uVar6;
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
            }
          }
        }
      }
      else if (iVar3 == 3) {
        uVar11 = *(uint *)(pcVar33 + 8);
        if (iVar27 - (int)ptr_graphicsRelated < 1) {
          DAT_800758b0 = 1;
          return;
        }
        gte_ldVZ0((*(uint *)(pcVar33 + 4) & 0xffff) - iVar28);
        gte_ldVXY0((iVar29 - (*(uint *)(pcVar33 + 4) >> 0x10)) +
                   (iVar30 - (uVar11 & 0xffff)) * 0x10000);
        pcVar33[3] = '\0';
        gte_rtps_b();
        iVar3 = *(int *)(&DAT_80076278 + ((uint)puVar31 & 0xff) * 4);
        gte_ldIR1(uVar11 >> 0x10 & 0xff);
        gte_ldIR2(uVar11 >> 0x18);
        puVar31 = (undefined *)(int)*(short *)(pcVar33 + 0x20);
        pcVar34 = pcVar33 + 0x20;
        uVar11 = gte_stSZ3();
        iVar7 = gte_stSXY2();
        if (((-1 < (int)(uVar11 - 0x80)) && ((int)(uVar11 - 0x2000) < 0)) && (0 < iVar7 + -0x10000))
        {
          if (((iVar7 + -0x1000000 < 0) && (0 < iVar7 * 0x10000)) &&
             (iVar7 * 0x10000 + -0x2000000 < 0)) {
            pcVar33[3] = '\x01';
            uVar15 = gte_stMAC0();
            gte_ldIR0(uVar15 >> 0xc);
            iVar9 = (uVar11 >> 5) - (uint)(*(ushort *)(pcVar33 + 0x10) >> 8);
            if (-1 < iVar9) {
              gte_gpf0_b(0);
              iVar3 = iVar3 + (*(ushort *)(pcVar33 + 0x10) & 0xff) * 8;
              uVar11 = *(uint *)(iVar3 + 4);
              uVar15 = *(uint *)(iVar3 + 8);
              uVar13 = gte_stMAC1();
              uVar20 = gte_stMAC2();
              iVar3 = iVar7 + (uVar13 >> 0xd) + (uVar20 >> 0xd) * 0x10000;
              ptr_graphicsRelated[1] = *(undefined4 *)(pcVar33 + 0xc);
              ptr_graphicsRelated[8] = iVar3;
              ptr_graphicsRelated[6] = iVar3 - (uVar13 >> 0xc);
              iVar3 = iVar3 + (uVar20 >> 0xc) * -0x10000;
              ptr_graphicsRelated[4] = iVar3;
              ptr_graphicsRelated[2] = iVar3 - (uVar13 >> 0xc);
              ptr_graphicsRelated[3] = uVar11;
              ptr_graphicsRelated[9] = uVar15;
              ptr_graphicsRelated[7] = uVar11 & 0xff | uVar15 & 0xff00;
              ptr_graphicsRelated[5] = uVar15 ^ uVar15 & 0xff00 | uVar11 & 0xff00;
              *ptr_graphicsRelated = 0x9000000;
              piVar17 = (int *)(iVar9 * 8 + iVar2);
              puVar4 = (undefined2 *)*piVar17;
              *piVar17 = (int)ptr_graphicsRelated;
              if (puVar4 == (undefined2 *)0x0) {
                piVar17[1] = (int)ptr_graphicsRelated;
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
              else {
                *puVar4 = uVar32;
                *(undefined *)(puVar4 + 1) = uVar6;
                ptr_graphicsRelated = ptr_graphicsRelated + 10;
              }
            }
          }
        }
      }
      else if (iVar3 == 4) {
        gte_ldtr((int)(short)*(int *)(pcVar33 + 4),*(int *)(pcVar33 + 4) >> 0x10,
                 (int)(short)*(int *)(pcVar33 + 8));
        gte_ldVXY0(0);
        gte_ldVZ0(0);
        if (iVar27 - (int)ptr_graphicsRelated < 1) {
          DAT_800758b0 = 1;
          return;
        }
        gte_rtps_b();
        puVar31 = (undefined *)(int)*(short *)(pcVar33 + 0x20);
        pcVar34 = pcVar33 + 0x20;
        pcVar33[3] = '\0';
        gte_ldtr(*(int *)(pcVar33 + 8) >> 0x10,(int)(short)*(int *)(pcVar33 + 0xc),
                 *(int *)(pcVar33 + 0xc) >> 0x10);
        uVar11 = gte_stSZ3();
        iVar3 = gte_stSXY2();
        gte_rtps_b();
        uVar10 = *(undefined4 *)(pcVar33 + 0x10);
        uVar15 = *(uint *)(pcVar33 + 0x14);
        gte_ldtr(0,0,0);
        if ((((0 < (int)(uVar11 - 0x40)) && ((int)(uVar11 - 0x800) < 0)) &&
            ((0 < iVar3 + -0x10000 && ((iVar3 + -0x1000000 < 0 && (0 < iVar3 * 0x10000)))))) &&
           (iVar3 * 0x10000 + -0x2000000 < 0)) {
          pcVar33[3] = '\x01';
          uVar19 = gte_stSXY2();
          ptr_graphicsRelated[2] = iVar3;
          ptr_graphicsRelated[4] = uVar19;
          ptr_graphicsRelated[1] = uVar10;
          ptr_graphicsRelated[3] = uVar15;
          iVar3 = (uVar11 >> 5) - (uVar15 >> 0x18);
          if (iVar3 < 0) {
            iVar3 = 0;
          }
          *ptr_graphicsRelated = 0x4000000;
          piVar17 = (int *)(iVar3 * 8 + iVar2);
          puVar4 = (undefined2 *)*piVar17;
          *piVar17 = (int)ptr_graphicsRelated;
          if (puVar4 == (undefined2 *)0x0) {
            piVar17[1] = (int)ptr_graphicsRelated;
            ptr_graphicsRelated = ptr_graphicsRelated + 5;
          }
          else {
            *puVar4 = uVar32;
            *(undefined *)(puVar4 + 1) = uVar6;
            ptr_graphicsRelated = ptr_graphicsRelated + 5;
          }
        }
      }
      else if (iVar3 == 5) {
        uVar15 = *(uint *)(pcVar33 + 8);
        uVar11 = (uint)puVar31 & 0xff;
        if (iVar27 - (int)ptr_graphicsRelated < 1) {
          DAT_800758b0 = 1;
          return;
        }
        uVar13 = (uVar15 >> 0x17) + 0x40 & 0x1fe;
        puVar31 = (undefined *)(int)*(short *)(pcVar33 + 0x20);
        pcVar34 = pcVar33 + 0x20;
        gte_ldIR0(uVar15 >> 0x10 & 0xff);
        gte_ldIR1((int)*(short *)((int)sineWaveArray + uVar13));
        gte_ldIR2((int)*(short *)((int)sineWaveArray + uVar13 + 0x80));
        gte_gpf0_b(0);
        uVar15 = (int)(uVar15 << 0x10) >> 0xe;
        gte_ldtr((*(int *)(pcVar33 + 4) << 0x10) >> 0xe,*(int *)(pcVar33 + 4) >> 0xe,uVar15);
        iVar3 = gte_stMAC1();
        iVar7 = gte_stMAC2();
        uVar13 = iVar3 >> 10;
        uVar20 = iVar7 >> 10;
        gte_ldVZ0(0);
        gte_ldVXY0((-uVar13 & 0xffff) + uVar20 * -0x10000);
        gte_ldVZ1(0);
        gte_ldVXY1((uVar20 & 0xffff) + uVar13 * -0x10000);
        gte_ldVZ2(0);
        gte_ldVXY2((-uVar20 & 0xffff) + uVar13 * 0x10000);
        uVar19 = gte_stR11R12();
        uVar21 = gte_stR13R21();
        uVar23 = gte_stR22R23();
        uVar24 = gte_stR31R32();
        uVar26 = gte_stR33();
        gte_ldR13R21(0);
        gte_ldR31R32(0);
        gte_ldR11R12(0x1000);
        gte_ldR33(0x1000);
        gte_ldR22R23(0xa00);
        gte_rtpt_b();
        uVar10 = *(undefined4 *)(pcVar33 + 0xc);
        iVar3 = (uVar15 >> 7) - (uint)(*(ushort *)(pcVar33 + 0x10) >> 8);
        if (-1 < iVar3) {
          iVar7 = *(int *)(&DAT_80076278 + uVar11 * 4) + (*(ushort *)(pcVar33 + 0x10) & 0xff) * 8;
          uVar11 = *(uint *)(iVar7 + 4);
          uVar15 = *(uint *)(iVar7 + 8);
          uVar5 = gte_stSXY0();
          gte_ldVXY0((uVar13 & 0xffff) + uVar20 * 0x10000);
          gte_ldVZ0(0);
          uVar8 = gte_stSXY1();
          uVar14 = gte_stSXY2();
          gte_rtps_b();
          ptr_graphicsRelated[2] = uVar5;
          ptr_graphicsRelated[4] = uVar8;
          ptr_graphicsRelated[6] = uVar14;
          ptr_graphicsRelated[1] = uVar10;
          *ptr_graphicsRelated = 0x9000000;
          ptr_graphicsRelated[3] = uVar11;
          ptr_graphicsRelated[9] = uVar15;
          ptr_graphicsRelated[7] = uVar11 & 0xff | uVar15 & 0xff00;
          uVar10 = gte_stSXY2();
          ptr_graphicsRelated[5] = uVar15 ^ uVar15 & 0xff00 | uVar11 & 0xff00;
          ptr_graphicsRelated[8] = uVar10;
          gte_ldR11R12(uVar19);
          gte_ldR13R21(uVar21);
          gte_ldR22R23(uVar23);
          gte_ldR31R32(uVar24);
          gte_ldR33(uVar26);
          gte_ldtr(0,0,0);
          piVar17 = (int *)(iVar3 * 8 + iVar2);
          puVar4 = (undefined2 *)*piVar17;
          *piVar17 = (int)ptr_graphicsRelated;
          if (puVar4 == (undefined2 *)0x0) {
            piVar17[1] = (int)ptr_graphicsRelated;
            ptr_graphicsRelated = ptr_graphicsRelated + 10;
          }
          else {
            *puVar4 = uVar32;
            *(undefined *)(puVar4 + 1) = uVar6;
            ptr_graphicsRelated = ptr_graphicsRelated + 10;
          }
        }
      }
      else {
        uVar11 = *(uint *)(pcVar33 + 8);
        if (iVar27 - (int)ptr_graphicsRelated < 1) {
          DAT_800758b0 = 1;
          return;
        }
        iVar3 = (*(uint *)(pcVar33 + 4) & 0xffff) - iVar28;
        pcVar33[3] = '\0';
        uVar15 = uVar11 >> 0x17 & 0x1fe;
        iVar18 = (int)*(short *)((int)sineWaveArray + uVar15 + 0x80);
        iVar7 = iVar29 - (*(uint *)(pcVar33 + 4) >> 0x10);
        iVar9 = (iVar30 - (uVar11 & 0xffff)) * 0x10000;
        gte_ldIR0(uVar11 >> 0x10 & 0xff);
        gte_ldIR1((int)*(short *)((int)sineWaveArray + uVar15));
        gte_ldIR2(iVar18);
        uVar11 = (uint)puVar31 & 0xff;
        gte_gpf0_b(0);
        iVar16 = gte_stMAC1();
        iVar12 = gte_stMAC2();
        puVar31 = (undefined *)(int)*(short *)(pcVar33 + 0x20);
        pcVar34 = pcVar33 + 0x20;
        iVar16 = iVar16 >> 0xc;
        iVar12 = iVar12 >> 0xc;
        gte_ldVXY0((iVar7 - iVar16) + iVar9);
        gte_ldVZ0(iVar3 + iVar12);
        gte_ldVXY1(iVar7 + iVar12 + iVar9);
        gte_ldVZ1(iVar3 + iVar16);
        gte_ldVXY2((iVar7 - iVar12) + iVar9);
        gte_ldVZ2(iVar3 - iVar16);
        iVar12 = iVar3 - iVar12;
        gte_rtpt_b();
        uVar1 = *(ushort *)(pcVar33 + 0x10);
        iVar25 = (uVar1 & 0xff) * 8 + *(int *)(&DAT_80076278 + uVar11 * 4);
        uVar11 = *(uint *)(iVar25 + 4);
        uVar15 = *(uint *)(iVar25 + 8);
        read_sxsy_fifo3(iVar3,iVar7,iVar9);
        gte_ldVXY0(iVar7 + iVar16 + iVar9);
        gte_ldVZ0(iVar12);
        read_sz_fifo3(iVar16,iVar18,iVar12);
        gte_rtps_b();
        ptr_graphicsRelated[1] = *(undefined4 *)(pcVar33 + 0xc);
        *ptr_graphicsRelated = 0x9000000;
        ptr_graphicsRelated[3] = uVar11;
        ptr_graphicsRelated[9] = uVar15;
        ptr_graphicsRelated[7] = uVar11 & 0xff | uVar15 & 0xff00;
        ptr_graphicsRelated[5] = uVar15 ^ uVar15 & 0xff00 | uVar11 & 0xff00;
        iVar25 = gte_stSXY2();
        iVar22 = gte_stSZ3();
        uVar11 = iVar16 + iVar18 + iVar12 + iVar22;
        if (((-1 < (int)(uVar11 - 0x200)) && ((int)(uVar11 - 0x8000) < 0)) &&
           (iVar12 = (uVar11 >> 7) - (uint)(uVar1 >> 8), -1 < iVar12)) {
          ptr_graphicsRelated[2] = iVar3;
          ptr_graphicsRelated[4] = iVar7;
          ptr_graphicsRelated[6] = iVar9;
          ptr_graphicsRelated[8] = iVar25;
          if (((((0 < iVar3 + -0x10000) || (0 < iVar7 + -0x10000)) ||
               ((0 < iVar9 + -0x10000 || (0 < iVar25 + -0x10000)))) &&
              (((iVar3 + -0x1000000 < 0 || (iVar7 + -0x1000000 < 0)) ||
               ((iVar9 + -0x1000000 < 0 || (iVar25 + -0x1000000 < 0)))))) &&
             (((0 < iVar3 * 0x10000 || (0 < iVar7 * 0x10000)) || (0 < iVar25 << 0x10)))) {
            piVar17 = (int *)(iVar12 * 8 + iVar2);
            pcVar33[3] = '\x01';
            puVar4 = (undefined2 *)*piVar17;
            *piVar17 = (int)ptr_graphicsRelated;
            if (puVar4 == (undefined2 *)0x0) {
              piVar17[1] = (int)ptr_graphicsRelated;
              ptr_graphicsRelated = ptr_graphicsRelated + 10;
            }
            else {
              *puVar4 = uVar32;
              *(undefined *)(puVar4 + 1) = uVar6;
              ptr_graphicsRelated = ptr_graphicsRelated + 10;
            }
          }
        }
      }
    }
    uVar11 = *(uint *)(pcVar33 + 8);
    if (iVar27 - (int)ptr_graphicsRelated < 1) break;
    gte_ldVXY0((iVar29 - (*(uint *)(pcVar33 + 4) >> 0x10)) + (iVar30 - (uVar11 & 0xffff)) * 0x10000)
    ;
    gte_ldVZ0((*(uint *)(pcVar33 + 4) & 0xffff) - iVar28);
    gte_rtps_b();
    puVar31 = (undefined *)(int)*(short *)(pcVar33 + 0x20);
    ptr_graphicsRelated[1] = *(undefined4 *)(pcVar33 + 0xc);
    pcVar33[3] = '\0';
    pcVar34 = pcVar33 + 0x20;
    uVar15 = gte_stSZ3();
    iVar3 = gte_stSXY2();
    if (((((uVar15 != 0) && ((int)(uVar15 - 0x2000) < 0)) && (0 < iVar3 + -0x10000)) &&
        ((iVar3 + -0x1000000 < 0 && (0 < iVar3 * 0x10000)))) && (iVar3 * 0x10000 + -0x2000000 < 0))
    {
      pcVar33[3] = '\x01';
      ptr_graphicsRelated[2] = iVar3;
      ptr_graphicsRelated[3] = iVar3 + 1;
      *ptr_graphicsRelated = 0x3000000;
      iVar3 = (uVar15 >> 5) - (uVar11 >> 0x10 & 0xff);
      if (0 < iVar3 + -2) {
        piVar17 = (int *)(iVar3 * 8 + iVar2);
        puVar4 = (undefined2 *)*piVar17;
        *piVar17 = (int)ptr_graphicsRelated;
        if (puVar4 == (undefined2 *)0x0) {
          piVar17[1] = (int)ptr_graphicsRelated;
          ptr_graphicsRelated = ptr_graphicsRelated + 4;
        }
        else {
          *puVar4 = uVar32;
          *(undefined *)(puVar4 + 1) = uVar6;
          ptr_graphicsRelated = ptr_graphicsRelated + 4;
        }
      }
    }
  }
  DAT_800758b0 = 1;
  return;
}



void DrawSparxGlow(void)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  int iVar9;
  int iVar10;
  undefined2 *puVar11;
  undefined4 *puVar12;
  uint uVar13;
  int *piVar14;
  int iVar15;
  int iVar16;
  int iVar17;
  byte bVar18;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  byte bVar19;
  undefined4 unaff_s2;
  uint uVar20;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  byte bVar21;
  undefined4 unaff_s5;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  
  iVar4 = cameraPosition.z;
  iVar3 = cameraPosition.y;
  iVar2 = cameraPosition.x;
  iVar1 = ptr_maybe_graphicsArray2;
  DAT_80077df8 = &DAT_80075264;
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  gte_ldtr(0,0,0);
  piVar5 = &DAT_80078800;
  iVar10 = 0x10;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
  do {
    iVar17 = *piVar5;
    piVar14 = (int *)piVar5[2];
    if (iVar17 != 0) {
      iVar6 = (*piVar14 + piVar5[5]) - iVar2;
      uVar8 = iVar3 - (piVar14[1] + piVar5[6]);
      iVar9 = iVar4 - (piVar14[2] + piVar5[7]);
      iVar7 = iVar6;
      if (iVar6 < 0) {
        iVar7 = -iVar6;
      }
      uVar13 = uVar8;
      if ((int)uVar8 < 0) {
        uVar13 = -uVar8;
      }
      iVar15 = iVar9;
      if (iVar9 < 0) {
        iVar15 = -iVar9;
      }
      uVar13 = uVar13 + iVar7 + iVar15;
      uVar20 = 0;
      if (0 < (int)uVar13) {
        uVar20 = uVar13 >> 0xd;
        if (0 < (int)(uVar20 - 4)) {
          uVar20 = 4;
        }
        iVar6 = iVar6 >> (uVar20 & 0x1f);
        uVar8 = (int)uVar8 >> (uVar20 & 0x1f);
        iVar9 = iVar9 >> (uVar20 & 0x1f);
      }
      gte_ldVZ0(iVar6);
      gte_ldVXY0(uVar8 & 0xffff | iVar9 << 0x10);
      gte_rtps();
      *ptr_graphicsRelated = 0x2000000;
      ptr_graphicsRelated[1] = 0xe1000220;
      ptr_graphicsRelated[2] = 0;
      iVar15 = gte_stSXY2();
      iVar9 = gte_stMAC3();
      iVar6 = iVar15 >> 0x10;
      iVar7 = (int)(short)iVar15;
      uVar8 = iVar9 << (uVar20 & 0x1f);
      iVar9 = (uVar8 >> 7) + piVar5[8];
      if (0 < iVar9) {
        if (0 < iVar9 + -0xff) {
          iVar9 = iVar9 + 0x40;
        }
        if (0 < iVar9 + -0x7ff) {
          iVar9 = 0x7ff;
        }
        piVar14 = (int *)(iVar9 * 8 + iVar1);
        bVar18 = iVar6 + -1 < 1;
        if (-1 < iVar6 + -0x100) {
          bVar18 = bVar18 | 2;
        }
        if (-1 < iVar7 + -0x200) {
          bVar18 = bVar18 | 4;
        }
        if (iVar7 < 1) {
          bVar18 = bVar18 | 8;
        }
        gte_ldIR0((piVar5[4] << 0xc) / (int)uVar8);
        puVar11 = (undefined2 *)*piVar14;
        *piVar14 = (int)ptr_graphicsRelated;
        if (puVar11 == (undefined2 *)0x0) {
          piVar14[1] = (int)ptr_graphicsRelated;
        }
        else {
          *puVar11 = (short)ptr_graphicsRelated;
          *(char *)(puVar11 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
        }
        ptr_graphicsRelated = ptr_graphicsRelated + 3;
        puVar12 = (undefined4 *)piVar5[1];
        gte_ldIR1(*puVar12);
        gte_ldIR2(puVar12[1]);
        puVar12 = puVar12 + 2;
        iVar17 = iVar17 + -1;
        gte_gpf12_b();
        uVar13 = piVar5[3];
        iVar9 = gte_stMAC1();
        iVar16 = gte_stMAC2();
        uVar8 = iVar9 + iVar7;
        iVar16 = iVar16 + iVar6;
        bVar19 = iVar16 + -1 < 1;
        if (-1 < iVar16 + -0x100) {
          bVar19 = bVar19 | 2;
        }
        if (-1 < (int)(uVar8 - 0x200)) {
          bVar19 = bVar19 | 4;
        }
        uVar20 = uVar8 & 0xffff | iVar16 * 0x10000;
        if ((int)uVar8 < 1) {
          bVar19 = bVar19 | 8;
        }
        do {
          gte_ldIR1(*puVar12);
          gte_ldIR2(puVar12[1]);
          *ptr_graphicsRelated = 0x6000000;
          gte_gpf12_b();
          ptr_graphicsRelated[2] = iVar15;
          ptr_graphicsRelated[1] = uVar13 & 0xffffff | 0x32000000;
          ptr_graphicsRelated[4] = uVar20;
          ptr_graphicsRelated[3] = 0;
          ptr_graphicsRelated[5] = 0;
          iVar9 = gte_stMAC1();
          iVar16 = gte_stMAC2();
          uVar8 = iVar9 + iVar7;
          iVar16 = iVar16 + iVar6;
          bVar21 = iVar16 + -1 < 1;
          if (-1 < iVar16 + -0x100) {
            bVar21 = bVar21 | 2;
          }
          if (-1 < (int)(uVar8 - 0x200)) {
            bVar21 = bVar21 | 4;
          }
          uVar20 = uVar8 & 0xffff | iVar16 * 0x10000;
          if ((int)uVar8 < 1) {
            bVar21 = bVar21 | 8;
          }
          ptr_graphicsRelated[6] = uVar20;
          if ((bVar18 & bVar19 & bVar21) == 0) {
            puVar11 = (undefined2 *)*piVar14;
            *piVar14 = (int)ptr_graphicsRelated;
            *puVar11 = (short)ptr_graphicsRelated;
            *(char *)(puVar11 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
            ptr_graphicsRelated = ptr_graphicsRelated + 7;
          }
          iVar17 = iVar17 + -1;
          puVar12 = puVar12 + 2;
          bVar19 = bVar21;
        } while (0 < iVar17);
      }
    }
    iVar10 = iVar10 + -1;
    piVar5 = piVar5 + 9;
  } while (0 < iVar10);
  return;
}



undefined8 FUN_800584c4(int param_1)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  undefined4 uVar7;
  undefined2 *puVar8;
  undefined4 *puVar9;
  int iVar10;
  undefined4 uVar11;
  uint uVar12;
  int iVar13;
  int iVar14;
  int iVar15;
  undefined4 uVar16;
  uint uVar17;
  uint uVar18;
  undefined4 uVar19;
  uint uVar20;
  int *piVar21;
  int *piVar22;
  
  iVar4 = cameraPosition.z;
  iVar3 = cameraPosition.y;
  iVar2 = cameraPosition.x;
  iVar1 = ptr_maybe_graphicsArray2;
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  gte_ldL11L12(gCamera1.R12R11);
  gte_ldL13L21(gCamera1.R21R13);
  gte_ldL22L23(gCamera1.R23R22);
  gte_ldL31L32(gCamera1.R32R31);
  gte_ldL33(gCamera1.R33);
  gte_ldtr(0,0,0);
  gte_ldDQB(0);
  gte_ldDQA(0x100);
  puVar9 = (undefined4 *)gCamera1.R21R13;
  uVar12 = gCamera1.R23R22;
  piVar21 = &DAT_800770f0;
  while (piVar22 = piVar21 + 6, piVar21 != (int *)&UNK_800771b0) {
    uVar5 = piVar21[9];
    uVar12 = (uVar5 & 0xff) - param_1;
    puVar9 = (undefined4 *)((int)uVar5 >> 0x18);
    if ((int)uVar12 < 1) {
      *(undefined *)(piVar21 + 9) = 0;
      piVar21 = piVar22;
    }
    else {
      *(char *)(piVar21 + 9) = (char)uVar12;
      uVar17 = uVar5 >> 8 & 0xff;
      iVar13 = uVar17 - uVar12;
      iVar14 = iVar13 * 0x100;
      if (iVar13 < 0) {
        iVar14 = iVar13 * -0x100;
      }
      uVar12 = (uVar5 >> 0x10 & 0xff) + (int)puVar9 * param_1;
      uVar5 = uVar12 & 0xff;
      *(char *)((int)piVar21 + 0x26) = (char)uVar12;
      puVar9 = (undefined4 *)(*piVar22 - iVar2 >> 2);
      gte_ldVXY0(iVar3 - piVar21[7] >> 2 & 0xffffU | (iVar4 - piVar21[8] >> 2) << 0x10);
      gte_ldVZ0(puVar9);
      gte_rtps_b();
      uVar18 = piVar21[0xb];
      uVar12 = piVar21[10];
      uVar20 = gte_stSZ3();
      iVar13 = gte_stSXY2();
      if (((((int)((uVar18 & 0xff00) - uVar20) < 1) || ((int)(uVar20 - 0x80) < 1)) ||
          (iVar13 + -0x10000 < 1)) ||
         (((-1 < iVar13 + -0x1000000 || (iVar13 * 0x10000 < 1)) ||
          (-1 < iVar13 * 0x10000 + -0x2000000)))) {
        *(undefined *)(piVar21 + 9) = 0;
        piVar21 = piVar22;
      }
      else {
        ptr_graphicsRelated[1] = uVar12 | 0x40000000;
        ptr_graphicsRelated[5] = uVar12 | 0x40000000;
        iVar14 = -(iVar14 / (int)uVar17);
        iVar15 = iVar14 + 0x100;
        iVar10 = (int)sineWaveArray[uVar5];
        iVar6 = (int)sineWaveArray[uVar5 + 0x40];
        gte_ldIR0(iVar15 * (uVar18 & 0xff));
        gte_ldIR2(iVar10);
        gte_ldIR1(iVar6);
        read_mt(iVar6,iVar10,iVar15);
        gte_gpf0_b(0);
        iVar13 = 0x1000;
        if (-1 < iVar14 + -0xf00) {
          iVar13 = iVar15;
        }
        gte_ldtr(iVar6 << 1,iVar10 << 1,iVar15 * 2);
        iVar14 = gte_stMAC1();
        iVar6 = gte_stMAC2();
        uVar12 = iVar14 >> 0x13;
        uVar5 = iVar6 >> 0x13;
        gte_ldVZ0(0);
        gte_ldVXY0((-uVar12 & 0xffff) + uVar5 * -0x10000);
        gte_ldVZ1(0);
        gte_ldVXY1((uVar5 & 0xffff) + uVar12 * -0x10000);
        gte_ldVZ2(0);
        gte_ldVXY2((-uVar5 & 0xffff) + uVar12 * 0x10000);
        gte_ldR13R21(0);
        gte_ldR31R32(0);
        gte_ldR11R12(iVar13);
        gte_ldR22R23(iVar13);
        gte_ldR33(iVar13);
        gte_rtpt_b();
        uVar7 = gte_stSXY0();
        gte_ldVXY0(uVar5 * 0x10000 + (uVar12 & 0xffff));
        gte_ldVZ0(0);
        uVar11 = gte_stSXY1();
        uVar16 = gte_stSXY2();
        gte_rtps_b();
        ptr_graphicsRelated[2] = uVar7;
        ptr_graphicsRelated[6] = uVar11;
        ptr_graphicsRelated[7] = uVar16;
        iVar14 = (uVar20 >> 5) - 6;
        if (iVar14 < 0) {
          iVar14 = 0;
        }
        *ptr_graphicsRelated = 0x3000000;
        if (0 < iVar14 + -0x100) {
          iVar14 = iVar14 + 0x46;
        }
        ptr_graphicsRelated[4] = (uint)ptr_graphicsRelated ^ 0x83000000;
        uVar7 = gte_stSXY2();
        piVar21 = (int *)(iVar14 * 8 + iVar1);
        ptr_graphicsRelated[3] = uVar7;
        uVar7 = gte_stL11L12();
        uVar11 = gte_stL13L21();
        uVar12 = gte_stL22L23();
        uVar16 = gte_stL31L32();
        uVar19 = gte_stL33();
        gte_ldR11R12(uVar7);
        gte_ldR13R21(uVar11);
        gte_ldR22R23(uVar12);
        gte_ldR31R32(uVar16);
        gte_ldR33(uVar19);
        gte_ldtr(0,0,0);
        puVar8 = (undefined2 *)*piVar21;
        *piVar21 = (int)ptr_graphicsRelated;
        puVar9 = ptr_graphicsRelated + 4;
        if (puVar8 == (undefined2 *)0x0) {
          piVar21[1] = (int)puVar9;
          ptr_graphicsRelated = ptr_graphicsRelated + 8;
          piVar21 = piVar22;
        }
        else {
          uVar12 = (uint)puVar9 >> 0x10;
          *puVar8 = (short)puVar9;
          *(char *)(puVar8 + 1) = (char)((uint)puVar9 >> 0x10);
          ptr_graphicsRelated = ptr_graphicsRelated + 8;
          piVar21 = piVar22;
        }
      }
    }
  }
  return CONCAT44(uVar12,puVar9);
}



int FUN_8005882c(void)

{
  undefined4 *puVar1;
  undefined4 *puVar2;
  int iVar3;
  
  puVar2 = &DAT_80077108;
  iVar3 = 0;
  do {
    puVar1 = puVar2 + 3;
    puVar2 = puVar2 + 6;
    if (*(char *)puVar1 == '\0') {
      return iVar3;
    }
    iVar3 = iVar3 + 1;
  } while (puVar2 != &DAT_800771c8);
  return -1;
}



void FUN_80058864(void)

{
  int *piVar1;
  int iVar2;
  undefined uVar3;
  int iVar4;
  undefined2 *puVar5;
  float *pfVar6;
  int iVar7;
  float *pfVar8;
  undefined4 *puVar9;
  int iVar10;
  float fVar11;
  float fVar12;
  undefined4 uVar13;
  undefined4 uVar14;
  undefined4 *puVar15;
  
  iVar2 = DAT_8007626c;
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  iVar4 = dragonStarPatriclePosition - cameraPosition.x;
  iVar7 = cameraPosition.y - DAT_80076250;
  iVar10 = cameraPosition.z - DAT_80076254;
  gte_ldIR3(iVar4);
  gte_ldIR1(iVar7);
  gte_ldIR2(iVar10);
  gte_rtir();
  read_mt(iVar4,iVar7,iVar10);
  gte_ldtr(iVar4,iVar7,iVar10);
  gte_ldR11R12(DAT_80076258);
  gte_ldR13R21(DAT_8007625c);
  gte_ldR22R23(DAT_80076260);
  gte_ldR31R32(DAT_80076264);
  gte_ldR33(DAT_80076268);
  gte_ldVXY0(0);
  gte_ldVZ0(0);
  gte_rtps_b();
  uVar14 = gte_stSXY2();
  iVar4 = 0x1c0;
  pfVar6 = &FLOAT_1f800000;
  do {
    pfVar8 = pfVar6;
    gte_ldVZ0(*(short *)((int)sineWaveArray + iVar4 + 0x80) * iVar2 >> 0xc);
    gte_ldVXY0(*(short *)((int)sineWaveArray + iVar4) * iVar2 >> 0xc);
    iVar4 = iVar4 + -0x40;
    gte_rtps_b();
    fVar11 = (float)gte_stSXY2();
    pfVar8[1] = fVar11;
    pfVar6 = pfVar8 + 1;
  } while (-1 < iVar4);
  pfVar8[-7] = fVar11;
  iVar4 = 0x1e0;
  pfVar6 = pfVar8 + 2;
  do {
    gte_ldVZ0(*(short *)((int)sineWaveArray + iVar4 + 0x80) * iVar2 >> 10);
    gte_ldVXY0(*(short *)((int)sineWaveArray + iVar4) * iVar2 >> 10);
    iVar4 = iVar4 + -0x40;
    gte_rtps_b();
    fVar11 = (float)gte_stSXY2();
    *pfVar6 = fVar11;
    piVar1 = ptr_primitivesArray;
    pfVar6 = pfVar6 + 1;
  } while (-1 < iVar4);
  ptr_graphicsRelated[2] = 0;
  ptr_graphicsRelated[1] = 0xe1000620;
  *ptr_graphicsRelated = 0x2000000;
  puVar5 = (undefined2 *)*piVar1;
  *piVar1 = (int)ptr_graphicsRelated;
  if (puVar5 == (undefined2 *)0x0) {
    piVar1[1] = (int)ptr_graphicsRelated;
  }
  else {
    *puVar5 = (short)ptr_graphicsRelated;
    *(char *)(puVar5 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
  }
  uVar3 = dragonStarParticleAnimation;
  ptr_graphicsRelated = ptr_graphicsRelated + 3;
  pfVar6 = &FLOAT_1f800000;
  puVar9 = (undefined4 *)&DAT_1f800024;
  do {
    fVar11 = *pfVar6;
    fVar12 = pfVar6[1];
    uVar13 = *puVar9;
    ptr_graphicsRelated[2] = fVar11;
    ptr_graphicsRelated[3] = fVar12;
    ptr_graphicsRelated[4] = uVar13;
    ptr_graphicsRelated[7] = fVar11;
    ptr_graphicsRelated[8] = fVar12;
    ptr_graphicsRelated[9] = uVar14;
    *(undefined *)(ptr_graphicsRelated + 1) = uVar3;
    *(undefined *)((int)ptr_graphicsRelated + 5) = uVar3;
    *(undefined *)((int)ptr_graphicsRelated + 6) = uVar3;
    *(undefined *)(ptr_graphicsRelated + 6) = uVar3;
    *(undefined *)((int)ptr_graphicsRelated + 0x19) = uVar3;
    *(undefined *)((int)ptr_graphicsRelated + 0x1a) = uVar3;
    *(undefined *)((int)ptr_graphicsRelated + 7) = 0x22;
    *(undefined *)((int)ptr_graphicsRelated + 0x1b) = 0x22;
    *ptr_graphicsRelated = 0x4000000;
    ptr_graphicsRelated[5] = 0x4000000;
    pfVar6 = pfVar6 + 1;
    puVar9 = puVar9 + 1;
    puVar5 = (undefined2 *)*piVar1;
    *piVar1 = (int)ptr_graphicsRelated;
    *puVar5 = (short)ptr_graphicsRelated;
    *(char *)(puVar5 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
    puVar15 = ptr_graphicsRelated + 5;
    puVar5 = (undefined2 *)*piVar1;
    *piVar1 = (int)puVar15;
    *puVar5 = (short)puVar15;
    *(char *)(puVar5 + 1) = (char)((uint)puVar15 >> 0x10);
    ptr_graphicsRelated = ptr_graphicsRelated + 10;
  } while (puVar9 != &DAT_1f800044);
  return;
}



int * FUN_80058ae8(void)

{
  int iVar1;
  int *piVar2;
  int *piVar3;
  int iVar4;
  
  iVar4 = 0;
  piVar2 = &DAT_80078800;
  iVar1 = 0;
  piVar3 = piVar2;
  do {
    if (*piVar2 == 0) {
      *piVar2 = 0x11;
      *(undefined **)((int)&DAT_80078804 + iVar1) = &DAT_8006e308;
      *(undefined4 *)((int)&DAT_80078820 + iVar1) = 0;
      return piVar3;
    }
    piVar3 = piVar3 + 9;
    piVar2 = piVar2 + 9;
    iVar4 = iVar4 + 1;
    iVar1 = iVar1 + 0x24;
  } while (iVar4 < 0x10);
  return (int *)0x0;
}



void SetToZero(undefined4 *param_1)

{
  *param_1 = 0;
  return;
}



void FUN_80058b68(void)

{
  int iVar1;
  
  iVar1 = 0x21c;
  do {
    *(undefined4 *)((int)&DAT_80078800 + iVar1) = 0;
    iVar1 = iVar1 + -0x24;
  } while (-1 < iVar1);
  iVar1 = 0xa8;
  do {
    *(undefined *)((int)&DAT_80077114 + iVar1) = 0;
    iVar1 = iVar1 + -0x18;
  } while (-1 < iVar1);
  return;
}



void DrawSparxGlowAndSomethingElse(void)

{
  DrawSparxGlow();
  FUN_800584c4(gameSpeedMultiplyer);
  return;
}



// Takes a game camera matrix and stores its effect on standard basis elements in the remaining
// unlabelled DATs?

void FUN_80058bd8(void)

{
  Vec3 local_20;
  
  Vec3Zero(&local_20);
  local_20.x = 0x1000;
  Vec3Rotate3ByCameraMatrix(&local_20.x,&local_20);
  Vec3IntToShort((short *)&DAT_800770e0,&local_20.x);
  Vec3Zero(&local_20);
  local_20.y = 0x1000;
  Vec3Rotate3ByCameraMatrix(&local_20.x,&local_20);
  Vec3IntToShort((short *)((int)&DAT_800770e4 + 2),&local_20.x);
  Vec3Zero(&local_20);
  local_20.z = -0x1000;
  Vec3Rotate3ByCameraMatrix(&local_20.x,&local_20);
  Vec3IntToShort((short *)&DAT_800770ec,&local_20.x);
  return;
}



void Maybe_ResetHudTimers(void)

{
  DAT_800770c8 = 0xfffff62b;
  DAT_800770cc = 0xfffff666;
  DAT_800770d0 = 0xfffff4e0;
  DAT_800770d4 = 0xfffff62b;
  DAT_800770d8 = 0xfffff666;
  DAT_800770dc = 0xfffff4e0;
  return;
}



void SetTextWobbleTimerSpeed(int speed)

{
  wobbleAndOpacityTimer = wobbleAndOpacityTimer + speed & 0xff;
  DAT_800770c8 = sineWaveArray[wobbleAndOpacityTimer + 0x40] * 0x7bf >> 0xb;
  DAT_800770d0 = 0xfffffc00;
  DAT_800770cc = sineWaveArray[wobbleAndOpacityTimer] * 0x18c9 >> 0xc;
  return;
}



undefined8 DrawFlame(void)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  int iVar9;
  int iVar10;
  undefined4 *puVar11;
  undefined4 uVar12;
  Vec3 *pVVar13;
  int iVar14;
  undefined2 *puVar15;
  int iVar16;
  int iVar17;
  undefined4 in_t6;
  undefined4 in_t7;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  uint uVar18;
  int *piVar19;
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  undefined4 unaff_s4;
  int iVar20;
  undefined4 unaff_s5;
  int *piVar21;
  undefined4 unaff_s6;
  undefined4 unaff_s7;
  int *piVar22;
  uint uVar23;
  uint uVar24;
  int iVar25;
  undefined *puVar26;
  undefined *puVar27;
  undefined4 unaff_s8;
  undefined4 unaff_retaddr;
  undefined auStackX_0 [16];
  undefined *puVar28;
  undefined *puVar29;
  
  iVar2 = DAT_80078764;
  iVar1 = ptr_maybe_graphicsArray2;
  DAT_80077df8 = &DAT_80075264;
  gte_ldR11R12(gCamera1.R12R11);
  gte_ldR13R21(gCamera1.R21R13);
  gte_ldR22R23(gCamera1.R23R22);
  gte_ldR31R32(gCamera1.R32R31);
  gte_ldR33(gCamera1.R33);
  gte_ldtr(0,0,0);
  gte_ldIR3(Vec3_800786c8.x - cameraPosition.x);
  gte_ldIR1(cameraPosition.y - Vec3_800786c8.y);
  gte_ldIR2(cameraPosition.z - Vec3_800786c8.z);
  gte_rtir();
  iVar7 = gte_stMAC3();
  uVar5 = gte_stMAC2();
  uVar3 = gte_stMAC1();
  gte_ldTRZ(iVar7);
  gte_ldTRY(uVar5);
  gte_ldTRX(uVar3);
  gte_ldR11R12(DAT_80078780);
  gte_ldR13R21(DAT_80078784);
  gte_ldR22R23(DAT_80078788);
  gte_ldR31R32(DAT_8007878c);
  gte_ldR33(DAT_80078790);
  iVar25 = 8;
  DAT_80077dd8 = unaff_s0;
  DAT_80077ddc = unaff_s1;
  DAT_80077de0 = unaff_s2;
  DAT_80077de4 = unaff_s3;
  DAT_80077de8 = unaff_s4;
  DAT_80077dec = unaff_s5;
  DAT_80077df0 = unaff_s6;
  DAT_80077df4 = unaff_s7;
  DAT_80077dfc = (undefined *)register0x00000074;
  DAT_80077e00 = unaff_s8;
  DAT_80077e04 = unaff_retaddr;
LAB_80058e84:
  do {
    iVar6 = iVar25;
    iVar25 = iVar6 + -1;
    if (iVar6 == 0) {
      return CONCAT44(iVar7,uVar5);
    }
    iVar10 = (int)*(char *)((int)&DAT_800786e4 + iVar6 + 3);
  } while (iVar10 < 1);
  puVar26 = &DAT_8006d94c;
  iVar7 = 0xc0;
  if (iVar6 + -5 < 0) {
    iVar8 = 0;
    iVar20 = iVar25;
  }
  else {
    iVar7 = 0x100;
    iVar20 = iVar6 + -5;
    iVar8 = 0x300;
    puVar26 = &DAT_8006d9cc;
  }
  uVar23 = *(uint *)(puVar26 + (iVar10 + -1) * 4);
  iVar10 = iVar7 * iVar20 + iVar8 + -0x7ff92558;
  puVar26 = (undefined *)0x0;
  piVar22 = (int *)(iVar10 + (uVar23 >> 0x18) * 8);
  piVar21 = (int *)((char)(&DAT_800786ef)[iVar6] * 8 + iVar10);
  if (((int)piVar22 - (int)piVar21 < 1) && (0 < (iVar10 + iVar7) - (int)piVar22))
  goto code_r0x80058f2c;
  goto LAB_8005920c;
code_r0x80058f2c:
  puVar26 = (undefined *)0x1;
  gte_ldVZ0((int)(short)*piVar22);
  gte_ldVXY0(-(*piVar22 >> 0x10) & 0xffffU | piVar22[1] * -0x10000);
  gte_rtps_b();
  iVar7 = (int)(short)piVar22[-4];
  iVar6 = piVar22[-4] >> 0x10;
  iVar10 = 0x2c;
  if (iVar2 != 0) {
    iVar10 = 0x40;
  }
  uVar5 = (uint)piVar22[-3] >> 0xf & 0x1fe;
  iVar9 = (int)(short)piVar22[-3];
  uVar18 = gte_stSZ3();
  uVar3 = gte_stSXY2();
  iVar16 = iVar10 * *(short *)((int)sineWaveArray + uVar5 + 0x80) >> 0xb;
  iVar10 = iVar10 * *(short *)((int)sineWaveArray + uVar5);
  iVar17 = iVar10 >> 0xb;
  uVar5 = iVar16 - iVar6;
  iVar14 = iVar17 - iVar9;
  iVar20 = iVar17 * -2;
  iVar8 = -iVar16;
  if (iVar2 != 0) {
    iVar8 = iVar8 >> 1;
    iVar17 = iVar10 >> 0xc;
  }
  gte_ldVZ0(iVar7);
  gte_ldVZ1(iVar7);
  gte_ldVZ2(iVar7);
  gte_ldVXY0(iVar17 - iVar6 & 0xffffU | (iVar8 - iVar9) * 0x10000);
  gte_ldVXY1(uVar5 & 0xffff | iVar14 * 0x10000);
  gte_ldVXY2(uVar5 + iVar16 * -2 & 0xffff | (iVar14 + iVar20) * 0x10000);
  puVar11 = &DAT_8006e1a8;
  gte_rtpt_b();
  if (iVar2 != 0) {
    puVar11 = &DAT_8006e1b8;
  }
  uVar4 = *puVar11;
  uVar5 = puVar11[1];
  iVar7 = puVar11[2];
  uVar12 = puVar11[3];
  iVar6 = (uVar18 >> 7) - 2;
  if (-1 < iVar6) {
    piVar19 = (int *)(iVar6 * 8 + iVar1);
    read_sxsy_fifo3(in_t6,in_t7,unaff_s0);
    gte_ldSXY0(uVar3);
    gte_ldSXY1(in_t7);
    gte_ldSXY2(in_t6);
    ptr_graphicsRelated[2] = uVar3;
    ptr_graphicsRelated[4] = in_t7;
    gte_nclip_b();
    ptr_graphicsRelated[6] = in_t6;
    ptr_graphicsRelated[1] = uVar4;
    ptr_graphicsRelated[3] = iVar7;
    ptr_graphicsRelated[5] = uVar5;
    iVar6 = gte_stMAC0();
    *ptr_graphicsRelated = 0x6000000;
    if (0 < iVar6) {
      puVar15 = (undefined2 *)*piVar19;
      *piVar19 = (int)ptr_graphicsRelated;
      if (puVar15 == (undefined2 *)0x0) {
        piVar19[1] = (int)ptr_graphicsRelated;
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
      else {
        *puVar15 = (short)ptr_graphicsRelated;
        *(char *)(puVar15 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
    }
    gte_ldSXY0(uVar3);
    gte_ldSXY1(in_t6);
    gte_ldSXY2(unaff_s0);
    ptr_graphicsRelated[2] = uVar3;
    ptr_graphicsRelated[4] = in_t6;
    gte_nclip_b();
    ptr_graphicsRelated[6] = unaff_s0;
    ptr_graphicsRelated[1] = uVar4;
    ptr_graphicsRelated[3] = uVar5;
    ptr_graphicsRelated[5] = uVar12;
    iVar6 = gte_stMAC0();
    *ptr_graphicsRelated = 0x6000000;
    if (0 < iVar6) {
      puVar15 = (undefined2 *)*piVar19;
      *piVar19 = (int)ptr_graphicsRelated;
      if (puVar15 == (undefined2 *)0x0) {
        piVar19[1] = (int)ptr_graphicsRelated;
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
      else {
        *puVar15 = (short)ptr_graphicsRelated;
        *(char *)(puVar15 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
    }
    gte_ldSXY0(uVar3);
    gte_ldSXY1(unaff_s0);
    gte_ldSXY2(in_t7);
    ptr_graphicsRelated[2] = uVar3;
    ptr_graphicsRelated[4] = unaff_s0;
    gte_nclip_b();
    ptr_graphicsRelated[6] = in_t7;
    ptr_graphicsRelated[1] = uVar4;
    ptr_graphicsRelated[3] = uVar12;
    ptr_graphicsRelated[5] = iVar7;
    iVar6 = gte_stMAC0();
    *ptr_graphicsRelated = 0x6000000;
    if (0 < iVar6) {
      puVar15 = (undefined2 *)*piVar19;
      *piVar19 = (int)ptr_graphicsRelated;
      if (puVar15 == (undefined2 *)0x0) {
        piVar19[1] = (int)ptr_graphicsRelated;
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
      else {
        *puVar15 = (short)ptr_graphicsRelated;
        *(char *)(puVar15 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
    }
    gte_ldSXY0(in_t6);
    gte_ldSXY1(in_t7);
    gte_ldSXY2(unaff_s0);
    ptr_graphicsRelated[2] = in_t6;
    ptr_graphicsRelated[4] = in_t7;
    gte_nclip_b();
    ptr_graphicsRelated[6] = unaff_s0;
    ptr_graphicsRelated[1] = uVar5;
    ptr_graphicsRelated[3] = iVar7;
    ptr_graphicsRelated[5] = uVar12;
    iVar7 = gte_stMAC0();
    *ptr_graphicsRelated = 0x6000000;
    if (0 < iVar7) {
      puVar15 = (undefined2 *)*piVar19;
      *piVar19 = (int)ptr_graphicsRelated;
      if (puVar15 == (undefined2 *)0x0) {
        piVar19[1] = (int)ptr_graphicsRelated;
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
      else {
        *puVar15 = (short)ptr_graphicsRelated;
        *(char *)(puVar15 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
        ptr_graphicsRelated = ptr_graphicsRelated + 7;
      }
    }
LAB_8005920c:
    uVar18 = uVar23 >> 8 & 0xff;
    uVar24 = uVar23 >> 0x10 & 0xff;
    uVar5 = (int)(piVar22 + -4) - (int)piVar21;
    uVar23 = uVar5 >> 3;
    piVar22 = piVar22 + -4;
    if (0 < (int)uVar5) {
      uVar18 = uVar18 + uVar23;
      uVar24 = uVar24 - uVar23;
      piVar22 = piVar21;
    }
    uVar5 = uVar18 * -5 + 0x80;
    uVar5 = uVar5 | uVar5 * 0x100 | uVar5 * 0x10000;
    uVar23 = uVar5 | 0x3e000000;
    pVVar13 = &Vec3_800786c8;
    if (iVar2 != 0) {
      pVVar13 = (Vec3 *)0x800786d0;
    }
    iVar7 = pVVar13[1].y + uVar18 * 0x500;
    iVar10 = pVVar13[1].z + uVar18 * 0x500;
    iVar20 = 0xa00;
    iVar8 = 0xa0a0a;
    iVar6 = 0;
    while( true ) {
      piVar21 = piVar22;
      iVar9 = (int)(short)*piVar21;
      uVar18 = (uint)piVar21[1] >> 0xf & 0x1fe;
      iVar14 = 8;
      if (0 < (int)uVar24) {
        puVar27 = puVar26 + iVar6;
        puVar28 = puVar26 + iVar6;
        puVar29 = puVar26 + iVar6;
        puVar26 = puVar26 + iVar6;
        if ((puVar27 != (undefined *)0x0) && (iVar14 = 0x2c, puVar26 = puVar28, iVar2 != 0)) {
          iVar14 = 0x40;
          puVar26 = puVar29;
        }
      }
      iVar16 = iVar14 * *(short *)((int)sineWaveArray + uVar18 + 0x80) >> 0xb;
      iVar17 = iVar14 * *(short *)((int)sineWaveArray + uVar18) >> 0xb;
      uVar18 = iVar16 - (*piVar21 >> 0x10);
      iVar14 = iVar17 - (short)piVar21[1];
      gte_ldVZ0(iVar9);
      gte_ldVZ1(iVar9);
      gte_ldVXY0(uVar18 & 0xffff | iVar14 * 0x10000);
      gte_ldVXY1(uVar18 + iVar16 * -2 & 0xffff | (iVar14 + iVar17 * -2) * 0x10000);
      gte_rtpt();
      ptr_graphicsRelated[2] = iVar6;
      ptr_graphicsRelated[5] = uVar5;
      ptr_graphicsRelated[3] = iVar7;
      ptr_graphicsRelated[6] = iVar10;
      ptr_graphicsRelated[1] = uVar23;
      ptr_graphicsRelated[4] = uVar23;
      *ptr_graphicsRelated = 0xc000000;
      iVar9 = gte_stSXY0();
      uVar5 = gte_stSXY1();
      iVar14 = gte_stSZ1();
      iVar16 = gte_stSZ2();
      if (iVar6 != 0) {
        ptr_graphicsRelated[8] = iVar9;
        ptr_graphicsRelated[0xb] = uVar5;
        iVar7 = iVar7 + iVar20;
        ptr_graphicsRelated[9] = iVar7;
        iVar10 = iVar10 + iVar20;
        ptr_graphicsRelated[0xc] = iVar10;
        uVar23 = uVar23 - iVar8;
        ptr_graphicsRelated[7] = uVar23;
        ptr_graphicsRelated[10] = uVar23;
        iVar6 = ((uint)(iVar14 + iVar16) >> 8) - 2;
        if (-1 < iVar6) {
          piVar22 = (int *)(iVar6 * 8 + iVar1);
          puVar15 = (undefined2 *)*piVar22;
          *piVar22 = (int)ptr_graphicsRelated;
          if (puVar15 == (undefined2 *)0x0) {
            piVar22[1] = (int)ptr_graphicsRelated;
            ptr_graphicsRelated = ptr_graphicsRelated + 0xd;
          }
          else {
            *puVar15 = (short)ptr_graphicsRelated;
            *(char *)(puVar15 + 1) = (char)((uint)ptr_graphicsRelated >> 0x10);
            ptr_graphicsRelated = ptr_graphicsRelated + 0xd;
          }
        }
      }
      iVar14 = uVar24 - 1;
      if ((int)uVar24 < 1) break;
      uVar24 = uVar24 - 2;
      iVar6 = iVar9;
      piVar22 = piVar21 + -4;
      if (iVar14 < 1) {
        iVar20 = 0x500;
        iVar8 = 0x50505;
        piVar22 = piVar21 + -2;
      }
    }
  }
  goto LAB_80058e84;
}



void FUN_80059474(int param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  uint *puVar3;
  uint *puVar4;
  
  respawnRot = (param_2 & 0xff) << 4;
  Vec3Copy(&respawnPosX,(int *)(param_1 + 0xc));
  puVar4 = &DAT_80077898;
  puVar3 = &DAT_800778b8;
  DAT_80077888 = 1;
  respawnPosZ = respawnPosZ + 0x164;
  DAT_8007788c = (&amountOfDragonsCollectedInLevels)[levelID_Indexer];
  DAT_80077890 = levelGemsCollectedArray[levelID_Indexer];
  DAT_80077894 = 0;
  ArrayCopy(&DAT_80077898,&DAT_800778b8,0x20);
  iVar2 = 0;
  do {
    uVar1 = *puVar3;
    puVar3 = puVar3 + 1;
    iVar2 = iVar2 + 1;
    *puVar4 = *puVar4 | uVar1;
    puVar4 = puVar4 + 1;
  } while (iVar2 < 8);
  DAT_800778ec = DAT_800778e8;
  return;
}



int FUN_8005956c(byte *param_1)

{
  byte bVar1;
  int iVar2;
  byte *pbVar3;
  
  iVar2 = 0;
  pbVar3 = param_1 + 0x58c;
  do {
    bVar1 = *param_1;
    param_1 = param_1 + 1;
    iVar2 = iVar2 + (uint)bVar1;
  } while (param_1 < pbVar3);
  return iVar2;
}



bool FUN_80059594(byte *param_1)

{
  byte bVar1;
  byte *pbVar2;
  byte *pbVar3;
  byte *pbVar4;
  byte *pbVar5;
  int iVar6;
  uint *puVar7;
  int *piVar8;
  uint *puVar9;
  
  levelIDPortalExit = (uint)*param_1;
  sfxVolume = (uint)param_1[1];
  maybe_sfxRelated = (sfxVolume * 0x3fff) / 10;
  sfxVolume = (int)(maybe_sfxRelated * 0x1000) / 0x3fff;
  musicVolume = (uint)param_1[2];
  maybeStartOfSoundBuffer = 0xc0;
  musicVolume2 = musicVolume << 0xb;
  musicVolume = (undefined2)musicVolume2;
  DAT_80075f1a = musicVolume;
  SpuSetCommonAttr(&maybeStartOfSoundBuffer);
  isVibrationOn = (uint)param_1[3];
  cameraMode = *(CameraMode *)(param_1 + 4);
  speakerSetupOption = (uint)param_1[8];
  DAT_80075838 = (uint)param_1[9];
  DAT_8007583c = (uint)param_1[10];
  lives = (uint)param_1[0xb];
  if (lives < 4) {
    lives = 4;
  }
  ArrayCopy(&DAT_80078618,param_1 + 0x10,0x14);
  iVar6 = 0;
  pbVar4 = &DAT_80078680;
  pbVar5 = param_1;
  do {
    pbVar3 = pbVar5 + 0x24;
    pbVar2 = pbVar4;
    do {
      *pbVar2 = *pbVar3;
      pbVar2 = pbVar2 + 1;
      pbVar3 = pbVar3 + 1;
    } while ((int)pbVar2 < (int)(pbVar4 + 5));
    pbVar5 = pbVar5 + 5;
    iVar6 = iVar6 + 1;
    pbVar4 = pbVar4 + 5;
  } while (iVar6 < 5);
  ArrayCopy((int *)&levelEnteredStruct,param_1 + 0x40,0x24);
  ArrayCopy((int *)&levelVortexExitStruct,param_1 + 100,0x24);
  iVar6 = 0;
  puVar9 = &levelEggsStruct;
  piVar8 = levelGemsCollectedArray;
  puVar7 = &amountOfDragonsCollectedInLevels;
  globalDragonCount = 0;
  globalGemCount = 0;
  globalEggCount = 0;
  pbVar5 = param_1;
  do {
    bVar1 = param_1[iVar6 + 0x88];
    *puVar7 = (uint)bVar1;
    globalDragonCount = globalDragonCount + (uint)bVar1;
    globalGemCount = globalGemCount + *(short *)(pbVar5 + 0xac);
    *piVar8 = (int)*(short *)(pbVar5 + 0xac);
    if (iVar6 < 0x12) {
      globalEggCount = globalEggCount + (uint)param_1[iVar6 + 0xf4];
      *puVar9 = (uint)param_1[iVar6 + 0xf4];
    }
    puVar9 = puVar9 + 1;
    piVar8 = piVar8 + 1;
    pbVar5 = pbVar5 + 2;
    iVar6 = iVar6 + 1;
    puVar7 = puVar7 + 1;
  } while (iVar6 < 0x24);
  iVar6 = 0;
  pbVar5 = param_1;
  do {
    (&unlockedHWs)[iVar6] = pbVar5[0x106];
    iVar6 = iVar6 + 1;
    pbVar5 = param_1 + iVar6;
  } while (iVar6 < 6);
  ArrayCopy((int *)collectablesStateFlags,param_1 + 0x10c,0x480);
  iVar6 = FUN_8005956c(param_1);
  return *(int *)(param_1 + 0x58c) == iVar6;
}



void FUN_80059864(uchar *param_1)

{
  undefined4 uVar1;
  int iVar2;
  uchar *puVar3;
  uchar *puVar4;
  int iVar5;
  uchar *puVar6;
  undefined4 *puVar7;
  uchar *puVar8;
  int *piVar9;
  int iVar10;
  undefined4 *puVar11;
  
  memset(param_1,'\0',0x600);
  *param_1 = (uchar)levelIDPortalExit;
  param_1[1] = (uchar)sfxVolume;
  param_1[2] = (uchar)musicVolume;
  param_1[3] = (uchar)isVibrationOn;
  *(CameraMode *)(param_1 + 4) = cameraMode;
  param_1[8] = (uchar)speakerSetupOption;
  param_1[9] = (uchar)DAT_80075838;
  param_1[10] = (uchar)DAT_8007583c;
  param_1[0xb] = (uchar)lives;
  ArrayCopy((int *)(param_1 + 0x10),&DAT_80078618,0x14);
  iVar10 = 0;
  puVar8 = &DAT_80078680;
  puVar6 = param_1;
  do {
    puVar3 = puVar6 + 0x24;
    puVar4 = puVar8;
    do {
      *puVar3 = *puVar4;
      puVar3 = puVar3 + 1;
      puVar4 = puVar4 + 1;
    } while ((int)puVar3 < (int)(puVar6 + 0x29));
    puVar8 = puVar8 + 5;
    iVar10 = iVar10 + 1;
    puVar6 = puVar6 + 5;
  } while (iVar10 < 5);
  ArrayCopy((int *)(param_1 + 0x40),&levelEnteredStruct,0x24);
  ArrayCopy((int *)(param_1 + 100),&levelVortexExitStruct,0x24);
  puVar11 = &levelEggsStruct;
  piVar9 = levelGemsCollectedArray;
  puVar7 = &amountOfDragonsCollectedInLevels;
  iVar10 = 0;
  puVar6 = param_1;
  do {
    uVar1 = *puVar7;
    puVar7 = puVar7 + 1;
    iVar5 = iVar10 + 1;
    param_1[iVar10 + 0x88] = (uchar)uVar1;
    iVar2 = *piVar9;
    piVar9 = piVar9 + 1;
    *(short *)(puVar6 + 0xac) = (short)iVar2;
    uVar1 = *puVar11;
    puVar11 = puVar11 + 1;
    param_1[iVar10 + 0xf4] = (uchar)uVar1;
    puVar6 = puVar6 + 2;
    iVar10 = iVar5;
  } while (iVar5 < 0x24);
  iVar10 = 0;
  puVar6 = param_1;
  do {
    puVar8 = &unlockedHWs + iVar10;
    iVar10 = iVar10 + 1;
    puVar6[0x106] = *puVar8;
    puVar6 = param_1 + iVar10;
  } while (iVar10 < 6);
  ArrayCopy((int *)(param_1 + 0x10c),collectablesStateFlags,0x480);
  uVar1 = FUN_8005956c(param_1);
  *(undefined4 *)(param_1 + 0x58c) = uVar1;
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined8 DrawSpyroShadow(void)

{
  bool bVar1;
  byte bVar2;
  byte bVar3;
  byte bVar4;
  int iVar5;
  uint uVar6;
  float *pfVar7;
  undefined4 *puVar8;
  int iVar9;
  float *pfVar10;
  byte *pbVar11;
  undefined4 uVar12;
  uint uVar13;
  undefined2 *puVar14;
  int *piVar15;
  undefined4 uVar16;
  uint uVar17;
  undefined4 uVar18;
  int iVar19;
  uint uVar20;
  short sVar21;
  float fVar22;
  float fVar23;
  int **ppiVar24;
  int iVar25;
  float fVar26;
  int iVar27;
  float fVar28;
  
  if (DAT_8007aa34 < 1) {
    gte_ldR11R12(gCamera1.R12R11);
    gte_ldR13R21(gCamera1.R21R13);
    gte_ldR22R23(gCamera1.R23R22);
    gte_ldR31R32(gCamera1.R32R31);
    gte_ldR33(gCamera1.R33);
    gte_ldtr(0,0,0);
    gte_ldVZ0(DAT_8007aa20 - cameraPosition.x);
    gte_ldVXY0((cameraPosition.y - DAT_8007aa24 & 0xffffU) +
               (cameraPosition.z - DAT_8007aa28) * 0x10000);
    gte_rtps();
    iVar25 = gte_stSXY2();
    iVar27 = gte_stSZ3();
    uVar18 = gte_stMAC3();
    uVar16 = gte_stMAC2();
    uVar12 = gte_stMAC1();
    gte_ldTRZ(uVar18);
    gte_ldTRY(uVar16);
    gte_ldTRX(uVar12);
    gte_ldVXY0((uint)(ushort)sineWaveArray[(byte)spyro.RelativeSparxAngle.roll + 0x40]);
    gte_ldVZ0((uint)(ushort)sineWaveArray[(byte)spyro.RelativeSparxAngle.roll]);
    gte_rtv0();
    uVar17 = gte_stIR1();
    iVar19 = gte_stIR2();
    uVar20 = gte_stIR3();
    gte_ldVXY0(-(uint)(ushort)sineWaveArray[(byte)spyro.RelativeSparxAngle.roll] & 0xffff);
    gte_ldVZ0((uint)(ushort)sineWaveArray[(byte)spyro.RelativeSparxAngle.roll + 0x40]);
    gte_rtv0_b();
    uVar6 = gte_stIR1();
    iVar9 = gte_stIR2();
    uVar13 = gte_stIR3();
    gte_ldR11R12((gCamera1.R12R11 & 0xffff0000U) + (uVar17 & 0xffff));
    gte_ldR13R21((uVar6 & 0xffff) + iVar19 * 0x10000);
    gte_ldR22R23((gCamera1.R23R22 & 0xffffU) + iVar9 * 0x10000);
    gte_ldR31R32((gCamera1.R32R31 & 0xffff0000U) + (uVar20 & 0xffff));
    gte_ldR33(uVar13 & 0xffff);
    uVar6 = (uint)(byte)spyro.maybe_AnimSpeedRelated;
    if (uVar6 == 0) {
      pfVar10 = (float *)((uint)(*(int *)(*(int *)(DAT_80076378 + (uint)(byte)spyro.currentAnim * 4
                                                  + 0x38) + (uint)(byte)spyro.currentKeyfame * 4 +
                                         0x24) << 0xb) >> 10);
    }
    else {
      iVar9 = 3;
      pfVar10 = &FLOAT_1f800000;
      do {
        gte_ldIR0(0x10 - uVar6);
        gte_ldsv_((uint)*(byte *)pfVar10,(uint)*(byte *)((int)pfVar10 + 1),
                  (uint)*(byte *)((int)pfVar10 + 2));
        bVar2 = *(byte *)(pfVar10 + 2);
        bVar3 = *(byte *)((int)pfVar10 + 9);
        gte_gpf0_b(0);
        bVar4 = *(byte *)((int)pfVar10 + 10);
        gte_ldIR0(uVar6);
        gte_ldsv_((uint)bVar2,(uint)bVar3,(uint)bVar4);
        iVar9 = iVar9 + -1;
        gte_gpl0_b(0);
        read_mt((uint)bVar2,(uint)bVar3,(uint)bVar4);
        *(byte *)pfVar10 = bVar2 >> 4;
        *(byte *)((int)pfVar10 + 1) = bVar3 >> 4;
        *(byte *)((int)pfVar10 + 2) = bVar4 >> 4;
        pfVar10 = (float *)((int)pfVar10 + 3);
      } while (0 < iVar9);
      pfVar10 = &FLOAT_1f800000;
    }
    pfVar7 = &FLOAT_1f800000;
    _DAT_1f800004 = pfVar10[1];
    FLOAT_1f800000 = *pfVar10;
    uVar6 = DAT_8007aa18 | DAT_8007aa1c;
    _DAT_1f800010 = DAT_8007aa14;
    _DAT_1f80000c = DAT_8007aa10;
    _DAT_1f800014 = DAT_8007aa10;
    puVar14 = &DAT_1f800080;
    _DAT_1f800008 = FLOAT_1f800000;
    do {
      uVar13 = (uint)*(byte *)pfVar7;
      uVar17 = (uint)*(byte *)((int)pfVar7 + 1);
      iVar9 = (int)*(char *)(pfVar7 + 3);
      iVar19 = (int)*(char *)((int)pfVar7 + 0xd);
      if (uVar6 != 0) {
        uVar13 = (int)(uVar13 * 3) >> 2;
        uVar17 = (int)(uVar17 * 3) >> 2;
        iVar9 = iVar9 * 3 >> 2;
        iVar19 = iVar19 * 3 >> 2;
      }
      *(char *)puVar14 = (char)uVar13;
      *(char *)((int)puVar14 + 1) = (char)(uVar13 + uVar17 >> 1);
      *(char *)(puVar14 + 8) = (char)iVar9;
      *(char *)((int)puVar14 + 0x11) = (char)(iVar9 + iVar19 >> 1);
      pfVar7 = (float *)((int)pfVar7 + 1);
      puVar14 = puVar14 + 1;
    } while (pfVar7 != (float *)&DAT_1f800008);
    puVar8 = &DAT_1f800090;
    piVar15 = &DAT_8006e268;
    pfVar10 = &FLOAT_1f800000;
    sVar21 = (short)DAT_8006e268;
    pbVar11 = (byte *)((int)&DAT_1f800080 + 1);
    iVar9 = DAT_8006e268;
    do {
      piVar15 = piVar15 + 1;
      gte_ldVZ0((int)((uint)(byte)DAT_1f800080 * (int)sVar21) >> 10);
      gte_ldVXY0(((int)((uint)(byte)DAT_1f800080 * (iVar9 >> 0x10)) >> 10 & 0xffffU) +
                 *(char *)puVar8 * 0x40000);
      puVar8 = (undefined4 *)((int)puVar8 + 1);
      gte_rtps_b();
      iVar9 = *piVar15;
      DAT_1f800080._0_1_ = *pbVar11;
      sVar21 = (short)iVar9;
      fVar22 = (float)gte_stSXY2();
      fVar23 = (float)gte_stSZ3();
      *pfVar10 = fVar22;
      pfVar10[1] = fVar23;
      iVar5 = DAT_8007aa2c;
      iVar19 = ptr_maybe_graphicsArray2;
      bVar1 = pfVar10 != (float *)&DAT_1f800078;
      pfVar10 = pfVar10 + 2;
      pbVar11 = pbVar11 + 1;
    } while (bVar1);
    pfVar10 = &FLOAT_1f800000;
    _DAT_1f800080 = FLOAT_1f800000;
    _DAT_1f800084 = _DAT_1f800004;
    while (fVar22 = *pfVar10, pfVar10 != (float *)&DAT_1f800080) {
      fVar23 = pfVar10[1];
      fVar26 = pfVar10[2];
      fVar28 = pfVar10[3];
      pfVar10 = pfVar10 + 2;
      ptr_graphicsRelated[4] = 0x32608080;
      ptr_graphicsRelated[5] = iVar25;
      ptr_graphicsRelated[6] = 0;
      ptr_graphicsRelated[7] = (int)fVar22;
      ptr_graphicsRelated[8] = 0;
      ptr_graphicsRelated[9] = (int)fVar26;
      ptr_graphicsRelated[2] = 0;
      ptr_graphicsRelated[1] = -0x1efff9c0;
      *ptr_graphicsRelated = ((uint)ptr_graphicsRelated ^ 0x82000000) + 0xc;
      ptr_graphicsRelated[3] = 0x6000000;
      iVar9 = ((int)fVar23 + (int)fVar28 + ((uint)((int)fVar23 + (int)fVar28) >> 1) + iVar27 >> 9) -
              iVar5;
      if (-1 < iVar9) {
        ppiVar24 = (int **)(iVar9 * 8 + iVar19);
        piVar15 = *ppiVar24;
        *ppiVar24 = ptr_graphicsRelated + 3;
        if (piVar15 == (int *)0x0) {
          ppiVar24[1] = ptr_graphicsRelated;
          ptr_graphicsRelated = ptr_graphicsRelated + 10;
        }
        else {
          *(short *)piVar15 = (short)ptr_graphicsRelated;
          *(char *)((int)piVar15 + 2) = (char)((uint)ptr_graphicsRelated >> 0x10);
          ptr_graphicsRelated = ptr_graphicsRelated + 10;
        }
      }
    }
    return CONCAT44(iVar25,&DAT_1f800080);
  }
  return CONCAT44(DAT_8007aa28,DAT_8007aa24);
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void FUN_80059f8c(void)

{
  char cVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  int iVar7;
  int *piVar8;
  uint uVar9;
  uint uVar10;
  undefined4 uVar11;
  undefined4 uVar12;
  uint uVar13;
  int iVar14;
  int iVar15;
  uint uVar16;
  int *piVar17;
  int *piVar18;
  uint uVar19;
  uint uVar20;
  undefined4 *puVar21;
  int iVar22;
  undefined2 *puVar23;
  uint uVar24;
  int iVar25;
  int *piVar26;
  
  piVar5 = DAT_80075f00;
  FLOAT_1f800000 = (float)((uint)cameraPosition.x >> 2);
  _DAT_1f800004 = (uint)cameraPosition.y >> 2;
  _DAT_1f800008 = (uint)cameraPosition.z >> 2;
  _DAT_1f80000c = gCamera1.R12R11;
  _DAT_1f800010 = gCamera1.R21R13;
  _DAT_1f800014 = gCamera1.R23R22;
  _DAT_1f800018 = gCamera1.R32R31;
  _DAT_1f80001c = gCamera1.R33;
  _DAT_1f800020 = DAT_80075ef8;
  _DAT_1f800024 = DAT_80075efc;
  _DAT_1f800028 = ptr_graphicsRelated;
  _DAT_1f80002c = ptr_maybe_graphicsArray2;
  piVar26 = &DAT_800724f4;
  while (piVar18 = piVar26, iVar4 = _DAT_1f80002c, uVar3 = _DAT_1f800024, iVar2 = _DAT_1f800020,
        piVar26 = piVar18 + 2, piVar18 != piVar5) {
    uVar19 = 0x1f800000;
    iVar6 = *piVar18;
    gte_ldR11R12(_DAT_1f80000c);
    gte_ldR13R21(_DAT_1f800010);
    gte_ldR22R23(_DAT_1f800014);
    gte_ldR31R32(_DAT_1f800018);
    gte_ldR33(_DAT_1f80001c);
    gte_ldtr(0,0,0);
    uVar10 = *(uint *)(iVar6 + 0x1c);
    if ((uVar10 & 0xffff) != 0) {
      gte_ldVXY0((_DAT_1f800008 - (uVar10 & 0xffff)) * 0x10000 +
                 (_DAT_1f800004 - (*(uint *)(iVar6 + 0x10) >> 2)));
      gte_ldVZ0((*(uint *)(iVar6 + 0xc) >> 2) - (int)FLOAT_1f800000);
      gte_rtps_b();
      iVar7 = piVar18[1];
      uVar9 = uVar10 >> 0x16 & 0x3f;
      uVar10 = uVar10 >> 0x10 & 0x3f;
      iVar15 = gte_stMAC3();
      uVar12 = gte_stMAC2();
      uVar11 = gte_stMAC1();
      gte_ldTRZ(iVar15);
      gte_ldTRY(uVar12);
      gte_ldTRX(uVar11);
      if (iVar15 + -0x1000 < 0) {
        DAT_1f800038 = _DAT_1f80000c;
        uVar20 = _DAT_1f800010;
        uVar16 = _DAT_1f800014;
        uVar24 = _DAT_1f800018;
        uVar13 = _DAT_1f80001c;
        if (uVar10 != 0) {
          gte_ldVXY0((uint)(ushort)sineWaveArray[uVar10 * 4 + 0x40] << 0x10);
          gte_ldVZ0((uint)(ushort)sineWaveArray[uVar10 * 4]);
          gte_rtv0();
          gte_stIR1();
          uVar16 = gte_stIR2();
          iVar15 = gte_stIR3();
          gte_ldVXY0((uint)(ushort)sineWaveArray[uVar10 * 4] * -0x10000);
          gte_ldVZ0((uint)(ushort)sineWaveArray[uVar10 * 4 + 0x40]);
          gte_rtv0_b();
          DAT_1f800038 = (_DAT_1f80000c & 0xffff) + uVar9 * 8;
          uVar19 = iVar15 * 0x10000;
          uVar24 = (_DAT_1f800018 & 0xffff) + uVar19;
          uVar10 = gte_stIR1();
          iVar15 = gte_stIR2();
          uVar13 = gte_stIR3();
          uVar20 = (_DAT_1f800010 & 0xffff0000) + (uVar10 & 0xffff);
          uVar16 = iVar15 * 0x10000 + (uVar16 & 0xffff);
          uVar13 = uVar13 & 0xffff;
          gte_ldR11R12(DAT_1f800038);
          gte_ldR13R21(uVar20);
          gte_ldR22R23(uVar16);
          gte_ldR31R32(uVar24);
          gte_ldR33(uVar13);
        }
        if (uVar9 != 0) {
          gte_ldVZ0(0);
          gte_ldVXY0((uint)(ushort)sineWaveArray[uVar9 * 4] * 0x10000 +
                     (uint)(ushort)sineWaveArray[uVar9 * 4 + 0x40]);
          gte_rtv0();
          uVar24 = gte_stIR1();
          iVar15 = gte_stIR2();
          uVar19 = gte_stIR3();
          gte_ldVXY0((-(uint)(ushort)sineWaveArray[uVar9 * 4] & 0xffff) +
                     (uint)(ushort)sineWaveArray[uVar9 * 4 + 0x40] * 0x10000);
          gte_ldVZ0(0);
          gte_rtv0_b();
          uVar20 = (uVar20 & 0xffff) + iVar15 * 0x10000;
          uVar19 = uVar19 & 0xffff;
          iVar15 = gte_stIR1();
          uVar10 = gte_stIR2();
          iVar14 = gte_stIR3();
          DAT_1f800038 = iVar15 * 0x10000 + (uVar24 & 0xffff);
          uVar24 = iVar14 * 0x10000 + uVar19;
          uVar16 = (uVar16 & 0xffff0000) + (uVar10 & 0xffff);
        }
        gte_ldR11R12(DAT_1f800038);
        gte_ldR13R21(uVar20);
        gte_ldR22R23(uVar16);
        gte_ldR31R32(uVar24);
        gte_ldR33(uVar13);
        iVar14 = gte_stSXY2();
        iVar25 = gte_stSZ3();
        gte_ldVXY0(0);
        gte_ldVZ0(iVar7);
        gte_ldVXY1(iVar7);
        gte_ldVZ1(0);
        gte_ldVXY2(0);
        gte_ldVZ2(-iVar7);
        iVar15 = gte_stTRZ();
        gte_rtpt_b();
        cVar1 = *(char *)(iVar6 + 0x47);
        uVar10 = 0x26808080;
        DAT_1f800030 = -(iVar15 + -0xc00);
        if (-1 < iVar15 + -0xc00) {
          uVar10 = DAT_1f800030 + 0x400 >> 3;
          DAT_1f800030 = uVar10 << 0x10;
          uVar10 = uVar10 | 0x26000000 | uVar10 << 8 | DAT_1f800030;
        }
        read_sxsy_fifo3(DAT_1f800030,uVar19,DAT_1f800038);
        gte_nclip_b();
        read_sz_fifo3(DAT_1f800030,uVar19,DAT_1f800038);
        iVar6 = gte_stMAC0();
        DAT_1f800034 = uVar19;
        DAT_1f800040 = DAT_1f800030;
        DAT_1f800044 = DAT_1f800030;
        DAT_1f800048 = uVar19;
        if (-1 < iVar6) {
          gte_ldVXY0(-iVar7 & 0xffff);
          gte_ldVZ0(0);
          gte_rtps_b();
          DAT_1f80004c = DAT_1f800038;
          DAT_1f800054 = DAT_1f800030;
          if ((((0 < iVar14) && (iVar14 + -0xf00000 < 0)) && (0 < (short)iVar14 + 8)) &&
             ((short)iVar14 + -0x208 < 0)) {
            DAT_1f80003c = gte_stSXY2();
            DAT_1f800050 = gte_stSZ3();
            piVar8 = (int *)&DAT_1f800030;
            iVar6 = gte_stTRZ();
            piVar18 = piVar8;
            if (0 < iVar6 + -0x400) {
              while (piVar17 = piVar18, (uint *)piVar17 != &DAT_1f800044) {
                piVar18 = piVar17 + 1;
                if (piVar17[5] - iVar25 < 0) {
                  *piVar17 = *piVar17 + 0x10000;
                }
                else if (piVar17[5] != iVar25) {
                  *piVar17 = *piVar17 + -0x10000;
                }
              }
            }
            while (iVar6 = *piVar8, (uint *)piVar8 != &DAT_1f800040) {
              iVar7 = piVar8[1];
              iVar15 = piVar8[5];
              iVar22 = piVar8[6];
              piVar8 = piVar8 + 1;
              _DAT_1f800028[1] = uVar10;
              _DAT_1f800028[2] = iVar14;
              _DAT_1f800028[3] = iVar2;
              _DAT_1f800028[5] = uVar3;
              _DAT_1f800028[7] = iVar2 + 0x1f00;
              _DAT_1f800028[4] = iVar6;
              _DAT_1f800028[6] = iVar7;
              *_DAT_1f800028 = 0x7000000;
              iVar6 = (iVar15 + iVar22 + ((uint)(iVar15 + iVar22) >> 1) + iVar25 >> 7) -
                      (cVar1 + -1);
              if (-1 < iVar6) {
                puVar21 = (undefined4 *)(iVar6 * 8 + iVar4);
                puVar23 = (undefined2 *)*puVar21;
                *puVar21 = _DAT_1f800028;
                if (puVar23 == (undefined2 *)0x0) {
                  puVar21[1] = _DAT_1f800028;
                  _DAT_1f800028 = _DAT_1f800028 + 8;
                }
                else {
                  *puVar23 = (short)_DAT_1f800028;
                  *(char *)(puVar23 + 1) = (char)((uint)_DAT_1f800028 >> 0x10);
                  _DAT_1f800028 = _DAT_1f800028 + 8;
                }
              }
            }
          }
        }
      }
    }
  }
  ptr_graphicsRelated = _DAT_1f800028;
  return;
}



void UpdateFunctionPointersBasedOnLevelID(void)

{
  switch(levelIDPortalExit) {
  case 0:
    ptr_EndOfOvl = &DAT_80082068;
    ptr_OverlaySpawnDynamicObj = &DAT_80080548;
    funcptr_OverlayUpdateMobys = &DAT_8007d8e0;
    ptr_OverlayCreateParticle = &DAT_80081568;
    ptr_OverlayUpdateParticles = &DAT_80080a0c;
    ptr_OverlayInitBalloonist = &DAT_8007adb8;
    ptr_OverlayBalloonistStayHere = &DAT_8007aef4;
    ptr_OverlayBalloonistSubstates = &DAT_8007af38;
    ptr_OverlayBalloonistVisuals = &DAT_8007ced8;
    break;
  case 1:
    ptr_EndOfOvl = &DAT_8007bff0;
    ptr_OverlaySpawnDynamicObj = &DAT_8007b070;
    funcptr_OverlayUpdateMobys = &DAT_8007ac8c;
    ptr_OverlayCreateParticle = &DAT_8007b8ac;
    ptr_OverlayUpdateParticles = &DAT_8007b144;
    break;
  case 2:
    ptr_EndOfOvl = &DAT_8007f490;
    ptr_OverlaySpawnDynamicObj = &DAT_8007d970;
    funcptr_OverlayUpdateMobys = &DAT_8007ad08;
    ptr_OverlayCreateParticle = &DAT_8007e990;
    ptr_OverlayUpdateParticles = &DAT_8007de34;
    break;
  case 3:
    ptr_EndOfOvl = &DAT_8007c7b0;
    ptr_OverlaySpawnDynamicObj = &DAT_8007b0ac;
    funcptr_OverlayUpdateMobys = &DAT_8007acc8;
    ptr_OverlayCreateParticle = &DAT_8007bc50;
    ptr_OverlayUpdateParticles = &DAT_8007b180;
    break;
  case 4:
    ptr_EndOfOvl = &DAT_8007c204;
    ptr_OverlaySpawnDynamicObj = &DAT_8007b08c;
    funcptr_OverlayUpdateMobys = &DAT_8007aca8;
    ptr_OverlayCreateParticle = &DAT_8007b9f0;
    ptr_OverlayUpdateParticles = &DAT_8007b160;
    break;
  case 7:
    ptr_EndOfOvl = &DAT_8007f2f4;
    ptr_OverlaySpawnDynamicObj = &DAT_8007d970;
    funcptr_OverlayUpdateMobys = &DAT_8007ad08;
    ptr_OverlayCreateParticle = &DAT_8007e8e4;
    ptr_OverlayUpdateParticles = &DAT_8007de34;
    break;
  case 9:
    ptr_EndOfOvl = &DAT_8007c204;
    ptr_OverlaySpawnDynamicObj = &DAT_8007b08c;
    funcptr_OverlayUpdateMobys = &DAT_8007aca8;
    ptr_OverlayCreateParticle = &DAT_8007b9f0;
    ptr_OverlayUpdateParticles = &DAT_8007b160;
    break;
  case 10:
    ptr_EndOfOvl = &DAT_80088620;
    ptr_OverlaySpawnDynamicObj = &DAT_800857cc;
    funcptr_OverlayUpdateMobys = &DAT_8007d9c8;
    ptr_OverlayCreateParticle = &DAT_800873e0;
    ptr_OverlayUpdateParticles = &DAT_80086134;
    ptr_OverlayInitBalloonist = &DAT_8007aea0;
    ptr_OverlayBalloonistStayHere = &DAT_8007afdc;
    ptr_OverlayBalloonistSubstates = &DAT_8007b020;
    ptr_OverlayBalloonistVisuals = &DAT_8007cfc0;
    break;
  case 0xb:
    ptr_EndOfOvl = &DAT_8008a3b8;
    ptr_OverlaySpawnDynamicObj = &DAT_8008772c;
    funcptr_OverlayUpdateMobys = &DAT_8007da78;
    ptr_OverlayCreateParticle = &DAT_800892c4;
    ptr_OverlayUpdateParticles = &DAT_80088098;
    ptr_OverlayInitBalloonist = &DAT_8007af50;
    ptr_OverlayBalloonistStayHere = &DAT_8007b08c;
    ptr_OverlayBalloonistSubstates = &DAT_8007b0d0;
    ptr_OverlayBalloonistVisuals = &DAT_8007d070;
    break;
  case 0xc:
    ptr_EndOfOvl = &DAT_80085594;
    ptr_OverlaySpawnDynamicObj = &DAT_80082960;
    funcptr_OverlayUpdateMobys = &DAT_8007ae40;
    ptr_OverlayCreateParticle = &DAT_800844a0;
    ptr_OverlayUpdateParticles = &DAT_80083274;
    break;
  case 0xd:
    ptr_EndOfOvl = &DAT_80089ecc;
    ptr_OverlaySpawnDynamicObj = &DAT_800872a4;
    funcptr_OverlayUpdateMobys = &DAT_8007da54;
    ptr_OverlayCreateParticle = &DAT_80088f68;
    ptr_OverlayUpdateParticles = &DAT_80087e20;
    ptr_OverlayInitBalloonist = &DAT_8007af2c;
    ptr_OverlayBalloonistStayHere = &DAT_8007b068;
    ptr_OverlayBalloonistSubstates = &DAT_8007b0ac;
    ptr_OverlayBalloonistVisuals = &DAT_8007d04c;
    break;
  case 0xe:
    ptr_EndOfOvl = &DAT_80084a10;
    ptr_OverlaySpawnDynamicObj = &DAT_80081da8;
    funcptr_OverlayUpdateMobys = &DAT_8007af94;
    ptr_OverlayCreateParticle = &DAT_8008391c;
    ptr_OverlayUpdateParticles = &DAT_800826f0;
    break;
  case 0xf:
    ptr_EndOfOvl = &DAT_80084ed0;
    ptr_OverlaySpawnDynamicObj = &DAT_8008249c;
    funcptr_OverlayUpdateMobys = &DAT_8007cfb4;
    ptr_OverlayCreateParticle = &DAT_80084128;
    ptr_OverlayUpdateParticles = &DAT_80083330;
    DAT_80075694 = &DAT_8007ae08;
    DAT_800757a8 = &DAT_8007aedc;
    ptr_OverlayFlightLevelCompleteFunc = &DAT_8007b1fc;
    DAT_8007567c = &DAT_8007b68c;
    DAT_800758c4 = &DAT_8007b4b0;
    break;
  case 0x14:
    ptr_EndOfOvl = &DAT_8008cfa4;
    ptr_OverlaySpawnDynamicObj = &DAT_8008a258;
    funcptr_OverlayUpdateMobys = &DAT_8007e3a0;
    ptr_OverlayCreateParticle = &DAT_8008bff0;
    ptr_OverlayUpdateParticles = &DAT_8008ae28;
    ptr_OverlayInitBalloonist = &DAT_8007b878;
    ptr_OverlayBalloonistStayHere = &DAT_8007b9b4;
    ptr_OverlayBalloonistSubstates = &DAT_8007b9f8;
    ptr_OverlayBalloonistVisuals = &DAT_8007d998;
    break;
  case 0x15:
    ptr_EndOfOvl = &DAT_8008d600;
    ptr_OverlaySpawnDynamicObj = &DAT_8008a4d0;
    funcptr_OverlayUpdateMobys = &DAT_8007e240;
    ptr_OverlayCreateParticle = &DAT_8008c540;
    ptr_OverlayUpdateParticles = &DAT_8008b1c0;
    ptr_OverlayInitBalloonist = &DAT_8007b718;
    ptr_OverlayBalloonistStayHere = &DAT_8007b854;
    ptr_OverlayBalloonistSubstates = &DAT_8007b898;
    ptr_OverlayBalloonistVisuals = &DAT_8007d838;
    break;
  case 0x16:
    ptr_EndOfOvl = &DAT_8008baf8;
    ptr_OverlaySpawnDynamicObj = &DAT_80088b88;
    funcptr_OverlayUpdateMobys = &DAT_8007e240;
    ptr_OverlayCreateParticle = &DAT_8008a9a8;
    ptr_OverlayUpdateParticles = &DAT_80089714;
    ptr_OverlayInitBalloonist = &DAT_8007b718;
    ptr_OverlayBalloonistStayHere = &DAT_8007b854;
    ptr_OverlayBalloonistSubstates = &DAT_8007b898;
    ptr_OverlayBalloonistVisuals = &DAT_8007d838;
    break;
  case 0x17:
    ptr_EndOfOvl = &DAT_80086260;
    ptr_OverlaySpawnDynamicObj = &DAT_80083608;
    funcptr_OverlayUpdateMobys = &DAT_8007b4c8;
    ptr_OverlayCreateParticle = &DAT_80085184;
    ptr_OverlayUpdateParticles = &DAT_80083f2c;
    break;
  case 0x18:
    ptr_EndOfOvl = &DAT_80087210;
    ptr_OverlaySpawnDynamicObj = &DAT_800845f0;
    funcptr_OverlayUpdateMobys = &DAT_8007aeb8;
    ptr_OverlayCreateParticle = &DAT_8008611c;
    ptr_OverlayUpdateParticles = &DAT_80084ef0;
    break;
  case 0x19:
    ptr_EndOfOvl = &DAT_80083bf0;
    ptr_OverlaySpawnDynamicObj = &DAT_800819bc;
    funcptr_OverlayUpdateMobys = &DAT_8007cfb4;
    ptr_OverlayCreateParticle = &DAT_80082f58;
    ptr_OverlayUpdateParticles = &DAT_80082300;
    DAT_80075694 = &DAT_8007ae08;
    DAT_800757a8 = &DAT_8007aedc;
    ptr_OverlayFlightLevelCompleteFunc = &DAT_8007b1fc;
    DAT_8007567c = &DAT_8007b68c;
    DAT_800758c4 = &DAT_8007b4b0;
    break;
  case 0x1e:
    ptr_EndOfOvl = &DAT_8008e608;
    ptr_OverlaySpawnDynamicObj = &DAT_8008b2c0;
    funcptr_OverlayUpdateMobys = &DAT_8007e398;
    ptr_OverlayCreateParticle = &DAT_8008d2d0;
    ptr_OverlayUpdateParticles = &DAT_8008be98;
    ptr_OverlayInitBalloonist = &DAT_8007b870;
    ptr_OverlayBalloonistStayHere = &DAT_8007b9ac;
    ptr_OverlayBalloonistSubstates = &DAT_8007b9f0;
    ptr_OverlayBalloonistVisuals = &DAT_8007d990;
    break;
  case 0x1f:
    ptr_EndOfOvl = &DAT_8008dec0;
    ptr_OverlaySpawnDynamicObj = &DAT_8008a36c;
    funcptr_OverlayUpdateMobys = &DAT_8007bb00;
    ptr_OverlayCreateParticle = &DAT_8008c9d8;
    ptr_OverlayUpdateParticles = &DAT_8008af54;
    break;
  case 0x20:
    ptr_EndOfOvl = &DAT_8008c73c;
    ptr_OverlaySpawnDynamicObj = &DAT_8008883c;
    funcptr_OverlayUpdateMobys = &DAT_8007b64c;
    ptr_OverlayCreateParticle = &DAT_8008b0b0;
    ptr_OverlayUpdateParticles = &DAT_80089454;
    break;
  case 0x21:
    ptr_EndOfOvl = &DAT_8008a8a0;
    ptr_OverlaySpawnDynamicObj = &DAT_80086dd8;
    funcptr_OverlayUpdateMobys = &DAT_8007b7a8;
    ptr_OverlayCreateParticle = &DAT_80089450;
    ptr_OverlayUpdateParticles = &DAT_80087b40;
    break;
  case 0x22:
    ptr_EndOfOvl = &DAT_8008749c;
    ptr_OverlaySpawnDynamicObj = &DAT_80083ab4;
    funcptr_OverlayUpdateMobys = &DAT_8007af28;
    ptr_OverlayCreateParticle = &DAT_80085f40;
    ptr_OverlayUpdateParticles = &DAT_80084830;
    break;
  case 0x23:
    ptr_EndOfOvl = &DAT_80084390;
    ptr_OverlaySpawnDynamicObj = &DAT_80081f0c;
    funcptr_OverlayUpdateMobys = &DAT_8007cfb4;
    ptr_OverlayCreateParticle = &DAT_800836f8;
    ptr_OverlayUpdateParticles = &DAT_80082aa0;
    DAT_80075694 = &DAT_8007ae08;
    DAT_800757a8 = &DAT_8007aedc;
    ptr_OverlayFlightLevelCompleteFunc = &DAT_8007b1fc;
    DAT_8007567c = &DAT_8007b68c;
    DAT_800758c4 = &DAT_8007b4b0;
    break;
  case 0x28:
    ptr_EndOfOvl = &DAT_8008ab70;
    ptr_OverlaySpawnDynamicObj = &DAT_80087ef0;
    funcptr_OverlayUpdateMobys = &DAT_8007e18c;
    ptr_OverlayCreateParticle = &DAT_80089ab8;
    ptr_OverlayUpdateParticles = &DAT_800888f8;
    ptr_OverlayInitBalloonist = &DAT_8007b664;
    ptr_OverlayBalloonistStayHere = &DAT_8007b7a0;
    ptr_OverlayBalloonistSubstates = &DAT_8007b7e4;
    ptr_OverlayBalloonistVisuals = &DAT_8007d784;
    break;
  case 0x29:
    ptr_EndOfOvl = &DAT_80087944;
    ptr_OverlaySpawnDynamicObj = &DAT_8008465c;
    funcptr_OverlayUpdateMobys = &DAT_8007b5dc;
    ptr_OverlayCreateParticle = &DAT_800866d8;
    ptr_OverlayUpdateParticles = &DAT_800853ac;
    break;
  case 0x2a:
    ptr_EndOfOvl = &DAT_80087130;
    ptr_OverlaySpawnDynamicObj = &DAT_80084718;
    funcptr_OverlayUpdateMobys = &DAT_8007afbc;
    ptr_OverlayCreateParticle = &DAT_800861cc;
    ptr_OverlayUpdateParticles = &DAT_80085084;
    break;
  case 0x2b:
    ptr_EndOfOvl = &DAT_80089848;
    ptr_OverlaySpawnDynamicObj = &DAT_80086b38;
    funcptr_OverlayUpdateMobys = &DAT_8007b698;
    ptr_OverlayCreateParticle = &DAT_8008869c;
    ptr_OverlayUpdateParticles = &DAT_80087400;
    break;
  case 0x2c:
    ptr_EndOfOvl = &DAT_8008a69c;
    ptr_OverlaySpawnDynamicObj = &DAT_800874fc;
    funcptr_OverlayUpdateMobys = &DAT_8007b770;
    ptr_OverlayCreateParticle = &DAT_800894b0;
    ptr_OverlayUpdateParticles = &DAT_80088178;
    break;
  case 0x2d:
    ptr_EndOfOvl = &DAT_80084844;
    ptr_OverlaySpawnDynamicObj = &DAT_8008223c;
    funcptr_OverlayUpdateMobys = &DAT_8007cfb4;
    ptr_OverlayCreateParticle = &DAT_80083bac;
    ptr_OverlayUpdateParticles = &DAT_80082f54;
    DAT_80075694 = &DAT_8007ae08;
    DAT_800757a8 = &DAT_8007aedc;
    ptr_OverlayFlightLevelCompleteFunc = &DAT_8007b1fc;
    DAT_8007567c = &DAT_8007b68c;
    DAT_800758c4 = &DAT_8007b4b0;
    break;
  case 0x32:
    ptr_EndOfOvl = &DAT_8008bb38;
    ptr_OverlaySpawnDynamicObj = &DAT_80088e24;
    funcptr_OverlayUpdateMobys = &DAT_8007e3c0;
    ptr_OverlayCreateParticle = &DAT_8008aa24;
    ptr_OverlayUpdateParticles = &DAT_800897fc;
    ptr_OverlayInitBalloonist = &DAT_8007b898;
    ptr_OverlayBalloonistStayHere = &DAT_8007b9d4;
    ptr_OverlayBalloonistSubstates = &DAT_8007ba18;
    ptr_OverlayBalloonistVisuals = &DAT_8007d9b8;
    break;
  case 0x33:
    ptr_EndOfOvl = &DAT_800880d4;
    ptr_OverlaySpawnDynamicObj = &DAT_80084b94;
    funcptr_OverlayUpdateMobys = &DAT_8007b4f8;
    ptr_OverlayCreateParticle = &DAT_80086d38;
    ptr_OverlayUpdateParticles = &DAT_800857fc;
    break;
  case 0x34:
    ptr_EndOfOvl = &DAT_8008771c;
    ptr_OverlaySpawnDynamicObj = &DAT_80084620;
    funcptr_OverlayUpdateMobys = &DAT_8007b4dc;
    ptr_OverlayCreateParticle = &DAT_80086438;
    ptr_OverlayUpdateParticles = &DAT_800850a0;
    break;
  case 0x35:
    ptr_EndOfOvl = &DAT_80089820;
    ptr_OverlaySpawnDynamicObj = &DAT_8008590c;
    funcptr_OverlayUpdateMobys = &DAT_8007b510;
    ptr_OverlayCreateParticle = &DAT_800881d8;
    ptr_OverlayUpdateParticles = &DAT_80086754;
    break;
  case 0x36:
    ptr_EndOfOvl = &DAT_80086348;
    ptr_OverlaySpawnDynamicObj = &DAT_800836a8;
    funcptr_OverlayUpdateMobys = &DAT_8007af50;
    ptr_OverlayCreateParticle = &DAT_80085254;
    ptr_OverlayUpdateParticles = &DAT_80084028;
    break;
  case 0x37:
    ptr_EndOfOvl = &DAT_80084934;
    ptr_OverlaySpawnDynamicObj = &DAT_80082028;
    funcptr_OverlayUpdateMobys = &DAT_8007cfb4;
    ptr_OverlayCreateParticle = &DAT_80083b8c;
    ptr_OverlayUpdateParticles = &DAT_80082d94;
    DAT_80075694 = &DAT_8007ae08;
    DAT_800757a8 = &DAT_8007aedc;
    ptr_OverlayFlightLevelCompleteFunc = &DAT_8007b1fc;
    DAT_8007567c = &DAT_8007b68c;
    DAT_800758c4 = &DAT_8007b4b0;
    break;
  case 0x3c:
    ptr_EndOfOvl = &DAT_80085ce0;
    ptr_OverlaySpawnDynamicObj = &DAT_80083568;
    funcptr_OverlayUpdateMobys = &DAT_8007d938;
    ptr_OverlayCreateParticle = &DAT_80084ea0;
    ptr_OverlayUpdateParticles = &DAT_80083ed8;
    ptr_OverlayInitBalloonist = &DAT_8007ae10;
    ptr_OverlayBalloonistStayHere = &DAT_8007af4c;
    ptr_OverlayBalloonistSubstates = &DAT_8007af90;
    ptr_OverlayBalloonistVisuals = &DAT_8007cf30;
    break;
  case 0x3d:
    ptr_EndOfOvl = &DAT_80088668;
    ptr_OverlaySpawnDynamicObj = &DAT_80085664;
    funcptr_OverlayUpdateMobys = &DAT_8007b528;
    ptr_OverlayCreateParticle = &DAT_8008747c;
    ptr_OverlayUpdateParticles = &DAT_80086144;
    break;
  case 0x3e:
    ptr_EndOfOvl = &DAT_80086004;
    ptr_OverlaySpawnDynamicObj = &DAT_80083108;
    funcptr_OverlayUpdateMobys = &DAT_8007ae5c;
    ptr_OverlayCreateParticle = &DAT_80084eac;
    ptr_OverlayUpdateParticles = &DAT_80083b4c;
    break;
  case 0x3f:
    ptr_EndOfOvl = &DAT_800854b4;
    ptr_OverlaySpawnDynamicObj = &DAT_80082f24;
    funcptr_OverlayUpdateMobys = &DAT_8007ad64;
    ptr_OverlayCreateParticle = &DAT_80084634;
    ptr_OverlayUpdateParticles = &DAT_800836f0;
    break;
  case 0x40:
    ptr_EndOfOvl = &DAT_80086264;
    ptr_OverlaySpawnDynamicObj = &DAT_80083690;
    funcptr_OverlayUpdateMobys = &DAT_8007ad4c;
    ptr_OverlayCreateParticle = &DAT_80085230;
    ptr_OverlayUpdateParticles = &DAT_800840fc;
    break;
  case 99:
    ptr_EndOfOvl = &DAT_8007c654;
    ptr_OverlaySpawnDynamicObj = &DAT_8007b0c0;
    funcptr_OverlayUpdateMobys = &DAT_8007acdc;
    ptr_OverlayCreateParticle = &DAT_8007bc44;
    ptr_OverlayUpdateParticles = &DAT_8007b194;
  }
  DAT_800785dc = ptr_EndOfOvl;
  return;
}



void FUN_8005b6f8(int param_1)

{
  int iVar1;
  
  DAT_800785f8 = DAT_800785fc + -0x2000;
  DAT_80076f54 = (uchar *)(DAT_800785fc + -0x6000);
  DAT_80076f58 = (uchar *)(DAT_800785fc + -0x6008);
  if (param_1 == 0) {
    iVar1 = -0x1c000;
  }
  else {
    iVar1 = -0x13000;
  }
  DAT_80076fd4 = DAT_80076f58 + iVar1;
  DAT_80076f50 = DAT_80076fd4 + iVar1;
  DAT_80076fd8 = DAT_80076f54;
  DAT_80076fdc = DAT_80076f58;
  DAT_800785e8 = DAT_80076f50;
  DAT_800785ec = DAT_80076fd4;
  maybe_ptr_levelTextureRelated = DAT_80076f58;
  DAT_800785f4 = DAT_80076f54;
  memset(DAT_80076f58,'\0',8);
  memset(DAT_800785f4,'\0',0x4000);
  return;
}



void FUN_8005b7d8(void)

{
  undefined4 uVar1;
  int *piVar2;
  int iVar3;
  
  iVar3 = 0;
  piVar2 = (int *)((DAT_8007a714 * -2 + -0x7fe00000) - DAT_800755a4);
  LoadCdData(WADStartSector,piVar2,DAT_8007a714,DAT_8007a710,600);
  DAT_800785fc = (int *)((-0x7fe00000 - DAT_800755a4) - *piVar2);
  ArrayCopy(DAT_800785fc,piVar2 + 0x200,*piVar2);
  do {
    if (piVar2[1] == 0) break;
    iVar3 = iVar3 + 1;
    uVar1 = FUN_800133e0((int)DAT_800785fc + piVar2[1] + -0x800);
    (&DAT_80076378)[piVar2[2]] = uVar1;
    piVar2 = piVar2 + 2;
  } while (iVar3 < 0x40);
  FUN_8005b6f8(0);
  return;
}



// WARNING: Removing unreachable block (ram,0x8005b9c8)
// Possible SNMAIN.OBJ/__SN_ENTRY_POINT

void start(void)

{
  int iVar1;
  undefined4 *puVar2;
  undefined4 unaff_s0;
  undefined4 unaff_s1;
  uint uVar3;
  undefined4 unaff_retaddr;
  undefined4 uVar4;
  
  puVar2 = &DAT_80075640;
  do {
    *puVar2 = 0;
    puVar2 = puVar2 + 1;
  } while (puVar2 < &OverlayStart);
  uVar3 = DAT_800755a8 - 8U | 0x80000000;
  DAT_800730c4 = ((DAT_800755a8 - 8U) - DAT_800755a4) - 0x7aa38;
  DAT_800730c0 = &OverlayStart;
  DAT_80075640 = unaff_retaddr;
  InitHeap((ulong *)&DAT_8007aa3c,DAT_800730c4);
  uVar4 = 0x8005b984;
  main();
  iVar1 = DAT_800730bc;
  trap(1);
  *(undefined4 *)(uVar3 - 0xc) = unaff_s0;
  *(undefined4 *)(uVar3 - 8) = unaff_s1;
  *(undefined4 *)(uVar3 - 4) = uVar4;
  if (iVar1 == 0) {
    DAT_800730bc = 1;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8005b9c8)

void __main(void)

{
  if (DAT_800730bc == 0) {
    DAT_800730bc = 1;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8005ba30)

void __do_global_dtors(void)

{
  return;
}



// Possible UT_ROFF.OBJ/SsUtReverbOff
// Possible S_I.OBJ/SpuInit

void SpuInit(void)

{
  _SpuInit();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _SpuInit(void)

{
  undefined2 *puVar1;
  int iVar2;
  int in_a0;
  
  ResetCallback();
  _spu_init();
  if (in_a0 == 0) {
    iVar2 = 0x17;
    puVar1 = &DAT_8007314a;
    do {
      *puVar1 = 0xc000;
      iVar2 = iVar2 + -1;
      puVar1 = puVar1 + -1;
    } while (-1 < iVar2);
  }
  SpuStart();
  DAT_800730f4 = 0;
  DAT_800730f8 = 0;
  DAT_80073104 = 0;
  DAT_80073108 = 0;
  DAT_8007310a = 0;
  DAT_8007310c = 0;
  DAT_80073110 = 0;
  DAT_800730fc = DAT_800735bc;
  _spu_FsetRXX(0xd1,DAT_800735bc,0);
  DAT_800735b0 = 0;
  DAT_800735b4 = 0;
  DAT_800735b8 = 0;
  _spu_trans_mode = 0;
  _spu_transMode = 0;
  DAT_800730ec = 0;
  DAT_80073118 = 0;
  DAT_80073114 = 0;
  DAT_8007354c = 0;
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void SpuStart(void)

{
  if (DAT_80073550 == 0) {
    DAT_80073550 = 1;
    EnterCriticalSection();
    _SpuDataCallback(_spu_FiDMA);
    DAT_800730e8 = OpenEvent(0xf0000009,0x20,0x2000,(func *)0x0);
    EnableEvent(DAT_800730e8);
    ExitCriticalSection();
  }
  return;
}



undefined4 _spu_init(int param_1)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined4 uVar3;
  uint uVar4;
  int iVar5;
  undefined2 *puVar6;
  
  *(uint *)PTR_DMA_DPCR_80073564 = *(uint *)PTR_DMA_DPCR_80073564 | 0xb0000;
  puVar1 = _spu_RXX;
  _spu_transMode = 0;
  DAT_80073574 = 0;
  _spu_tsa = 0;
  *(undefined2 *)(_spu_RXX + 0x180) = 0;
  *(undefined2 *)(puVar1 + 0x182) = 0;
  *(undefined2 *)(puVar1 + 0x1aa) = 0;
  _spu_Fw1ts();
  puVar1 = _spu_RXX;
  *(undefined2 *)(_spu_RXX + 0x180) = 0;
  *(undefined2 *)(puVar1 + 0x182) = 0;
  puVar2 = _spu_RXX;
  if ((*(ushort *)(puVar1 + 0x1ae) & 0x7ff) != 0) {
    uVar4 = 1;
    do {
      if (0xf00 < uVar4) {
        printf("SPU:T/O [%s]\n","wait (reset)");
        uVar3 = SPU_OBJ_DC(0);
        return uVar3;
      }
      uVar4 = uVar4 + 1;
    } while ((*(ushort *)(_spu_RXX + 0x1ae) & 0x7ff) != 0);
  }
  iVar5 = 0;
  puVar6 = &DAT_800777a8;
  DAT_80073578 = 2;
  _spu_mem_mode_plus = 3;
  soundSomething = 8;
  DAT_80073584 = 7;
  *(undefined2 *)(_spu_RXX + 0x1ac) = 4;
  *(undefined2 *)(puVar2 + 0x184) = 0;
  *(undefined2 *)(puVar2 + 0x186) = 0;
  *(undefined2 *)(puVar2 + 0x18c) = 0xffff;
  *(undefined2 *)(puVar2 + 0x18e) = 0xffff;
  *(undefined2 *)(puVar2 + 0x198) = 0;
  *(undefined2 *)(puVar2 + 0x19a) = 0;
  do {
    *puVar6 = 0;
    puVar1 = _spu_RXX;
    iVar5 = iVar5 + 1;
    puVar6 = puVar6 + 1;
  } while (iVar5 < 10);
  if (param_1 == 0) {
    _spu_tsa = 0x200;
    *(undefined2 *)(_spu_RXX + 400) = 0;
    *(undefined2 *)(puVar1 + 0x192) = 0;
    *(undefined2 *)(puVar1 + 0x194) = 0;
    *(undefined2 *)(puVar1 + 0x196) = 0;
    *(undefined2 *)(puVar1 + 0x1b0) = 0;
    *(undefined2 *)(puVar1 + 0x1b2) = 0;
    *(undefined2 *)(puVar1 + 0x1b4) = 0;
    *(undefined2 *)(puVar1 + 0x1b6) = 0;
    _spu_FwriteByIO(&DAT_80073594,0x10);
    iVar5 = 0;
    puVar6 = (undefined2 *)_spu_RXX;
    do {
      *puVar6 = 0;
      puVar6[1] = 0;
      puVar6[2] = 0x3fff;
      puVar6[3] = 0x200;
      puVar6[4] = 0;
      puVar6[5] = 0;
      puVar1 = _spu_RXX;
      iVar5 = iVar5 + 1;
      puVar6 = puVar6 + 8;
    } while (iVar5 < 0x18);
    *(undefined2 *)(_spu_RXX + 0x188) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18a) = 0xff;
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    puVar1 = _spu_RXX;
    *(undefined2 *)(_spu_RXX + 0x18c) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18e) = 0xff;
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
  }
  _spu_inTransfer = 1;
  *(undefined2 *)(_spu_RXX + 0x1aa) = 0xc000;
  _spu_transferCallback = 0;
  DAT_80073590 = 0;
  return 0;
}



undefined4 SPU_OBJ_DC(int param_1)

{
  undefined *puVar1;
  int iVar2;
  undefined2 *puVar3;
  int unaff_s0;
  
  puVar1 = _spu_RXX;
  puVar3 = &DAT_800777a8;
  DAT_80073578 = 2;
  _spu_mem_mode_plus = 3;
  soundSomething = 8;
  DAT_80073584 = 7;
  *(undefined2 *)(_spu_RXX + 0x1ac) = 4;
  *(undefined2 *)(puVar1 + 0x184) = 0;
  *(undefined2 *)(puVar1 + 0x186) = 0;
  *(undefined2 *)(puVar1 + 0x18c) = 0xffff;
  *(undefined2 *)(puVar1 + 0x18e) = 0xffff;
  *(undefined2 *)(puVar1 + 0x198) = 0;
  *(undefined2 *)(puVar1 + 0x19a) = 0;
  do {
    *puVar3 = 0;
    puVar1 = _spu_RXX;
    param_1 = param_1 + 1;
    puVar3 = puVar3 + 1;
  } while (param_1 < 10);
  if (unaff_s0 == 0) {
    _spu_tsa = 0x200;
    *(undefined2 *)(_spu_RXX + 400) = 0;
    *(undefined2 *)(puVar1 + 0x192) = 0;
    *(undefined2 *)(puVar1 + 0x194) = 0;
    *(undefined2 *)(puVar1 + 0x196) = 0;
    *(undefined2 *)(puVar1 + 0x1b0) = 0;
    *(undefined2 *)(puVar1 + 0x1b2) = 0;
    *(undefined2 *)(puVar1 + 0x1b4) = 0;
    *(undefined2 *)(puVar1 + 0x1b6) = 0;
    _spu_FwriteByIO(&DAT_80073594,0x10);
    iVar2 = 0;
    puVar3 = (undefined2 *)_spu_RXX;
    do {
      *puVar3 = 0;
      puVar3[1] = 0;
      puVar3[2] = 0x3fff;
      puVar3[3] = 0x200;
      puVar3[4] = 0;
      puVar3[5] = 0;
      puVar1 = _spu_RXX;
      iVar2 = iVar2 + 1;
      puVar3 = puVar3 + 8;
    } while (iVar2 < 0x18);
    *(undefined2 *)(_spu_RXX + 0x188) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18a) = 0xff;
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    puVar1 = _spu_RXX;
    *(undefined2 *)(_spu_RXX + 0x18c) = 0xffff;
    *(undefined2 *)(puVar1 + 0x18e) = 0xff;
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
    _spu_Fw1ts();
  }
  _spu_inTransfer = 1;
  *(undefined2 *)(_spu_RXX + 0x1aa) = 0xc000;
  _spu_transferCallback = 0;
  DAT_80073590 = 0;
  return 0;
}



// Possible SPU.OBJ/_spu_FwriteByIO

void _spu_FwriteByIO(undefined2 *param_1,uint param_2)

{
  ushort uVar1;
  undefined2 uVar2;
  ushort uVar3;
  bool bVar4;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  
  uVar1 = *(ushort *)(_spu_RXX + 0x1ae);
  *(undefined2 *)(_spu_RXX + 0x1a6) = _spu_tsa;
  _spu_Fw1ts();
  bVar4 = param_2 < 0x41;
  if (param_2 != 0) {
    do {
      puVar5 = _spu_RXX;
      uVar8 = 0x40;
      if (bVar4) {
        uVar8 = param_2;
      }
      iVar6 = 0;
      if (0 < (int)uVar8) {
        do {
          uVar2 = *param_1;
          param_1 = param_1 + 1;
          iVar6 = iVar6 + 2;
          *(undefined2 *)(puVar5 + 0x1a8) = uVar2;
        } while (iVar6 < (int)uVar8);
      }
      *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) & 0xffcf | 0x10;
      _spu_Fw1ts();
      if ((*(ushort *)(_spu_RXX + 0x1ae) & 0x400) != 0) {
        uVar7 = 1;
        do {
          if (0xf00 < uVar7) {
            printf("SPU:T/O [%s]\n","wait (wrdy H -> L)");
            SPU_OBJ_3AC();
            return;
          }
          uVar7 = uVar7 + 1;
        } while ((*(ushort *)(_spu_RXX + 0x1ae) & 0x400) != 0);
      }
      param_2 = param_2 - uVar8;
      _spu_Fw1ts();
      _spu_Fw1ts();
      bVar4 = param_2 < 0x41;
    } while (param_2 != 0);
  }
  puVar5 = _spu_RXX;
  *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) & 0xffcf;
  uVar3 = *(ushort *)(puVar5 + 0x1ae);
  uVar8 = 1;
  while( true ) {
    if ((uVar3 & 0x7ff) == (uVar1 & 0x7ff)) {
      return;
    }
    if (0xf00 < uVar8) break;
    uVar3 = *(ushort *)(_spu_RXX + 0x1ae);
    uVar8 = uVar8 + 1;
  }
  printf("SPU:T/O [%s]\n","wait (dmaf clear/W)");
  SPU_OBJ_440();
  return;
}



void SPU_OBJ_3AC(void)

{
  undefined2 uVar1;
  ushort uVar2;
  undefined *puVar3;
  int iVar4;
  uint uVar5;
  uint unaff_s0;
  uint unaff_s1;
  undefined2 *unaff_s2;
  ushort unaff_s3;
  
  do {
    do {
      unaff_s1 = unaff_s1 - unaff_s0;
      _spu_Fw1ts();
      _spu_Fw1ts();
      puVar3 = _spu_RXX;
      if (unaff_s1 == 0) {
        *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) & 0xffcf;
        uVar2 = *(ushort *)(puVar3 + 0x1ae);
        uVar5 = 1;
        while( true ) {
          if ((uVar2 & 0x7ff) == unaff_s3) {
            return;
          }
          if (0xf00 < uVar5) break;
          uVar2 = *(ushort *)(_spu_RXX + 0x1ae);
          uVar5 = uVar5 + 1;
        }
        printf("SPU:T/O [%s]\n","wait (dmaf clear/W)");
        SPU_OBJ_440();
        return;
      }
      unaff_s0 = 0x40;
      if (unaff_s1 < 0x41) {
        unaff_s0 = unaff_s1;
      }
      iVar4 = 0;
      if (0 < (int)unaff_s0) {
        do {
          uVar1 = *unaff_s2;
          unaff_s2 = unaff_s2 + 1;
          iVar4 = iVar4 + 2;
          *(undefined2 *)(puVar3 + 0x1a8) = uVar1;
        } while (iVar4 < (int)unaff_s0);
      }
      *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) & 0xffcf | 0x10;
      _spu_Fw1ts();
    } while ((*(ushort *)(_spu_RXX + 0x1ae) & 0x400) == 0);
    uVar5 = 1;
    do {
      if (0xf00 < uVar5) {
        printf("SPU:T/O [%s]\n","wait (wrdy H -> L)");
        SPU_OBJ_3AC();
        return;
      }
      uVar5 = uVar5 + 1;
    } while ((*(ushort *)(_spu_RXX + 0x1ae) & 0x400) != 0);
  } while( true );
}



void SPU_OBJ_440(void)

{
  return;
}



void _spu_FiDMA(void)

{
  undefined *puVar1;
  uint uVar2;
  
  if (DAT_800735a4 == 0) {
    _spu_Fw1ts();
  }
  puVar1 = _spu_RXX;
  *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) & 0xffcf;
  if ((*(ushort *)(puVar1 + 0x1aa) & 0x30) != 0) {
    uVar2 = 1;
    do {
      if (0xf00 < uVar2) break;
      uVar2 = uVar2 + 1;
    } while ((*(ushort *)(puVar1 + 0x1aa) & 0x30) != 0);
  }
  if (_spu_transferCallback == (code *)0x0) {
    DeliverEvent(0xf0000009,0x20);
    return;
  }
  (*_spu_transferCallback)();
  SPU_OBJ_510();
  return;
}



void SPU_OBJ_510(void)

{
  return;
}



void _spu_Fr_(undefined4 param_1,undefined2 param_2,int param_3)

{
  *(undefined2 *)(_spu_RXX + 0x1a6) = param_2;
  _spu_Fw1ts();
  *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 0x30;
  _spu_Fw1ts();
  _spu_FsetDelayR();
  *(undefined4 *)PTR_DMA_SPU_MADR_80073558 = param_1;
  *(uint *)PTR_DMA_SPU_BCR_8007355c = param_3 << 0x10 | 0x10;
  DAT_800735a4 = 1;
  *(undefined4 *)PTR_DMA_SPU_CHCR_80073560 = 0x1000200;
  return;
}



bool _spu_t(int param_1,uint param_2,uint param_3)

{
  ushort uVar1;
  undefined uVar2;
  uint uVar3;
  ushort uVar4;
  undefined4 uVar5;
  
  if (param_1 == 1) {
    DAT_800735a4 = 0;
    if (*(short *)(_spu_RXX + 0x1a6) != _spu_tsa) {
      uVar3 = 1;
      do {
        if (0xf00 < uVar3) {
          DAT_800735a4 = 0;
          return true;
        }
        uVar3 = uVar3 + 1;
      } while (*(short *)(_spu_RXX + 0x1a6) != _spu_tsa);
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) & 0xffcf | 0x20;
    uVar2 = SPU_OBJ_848();
    return (bool)uVar2;
  }
  if (param_1 < 2) {
    if (param_1 != 0) {
      uVar2 = SPU_OBJ_848();
      return (bool)uVar2;
    }
    DAT_800735a4 = 1;
    if (*(short *)(_spu_RXX + 0x1a6) != _spu_tsa) {
      uVar3 = 1;
      do {
        if (0xf00 < uVar3) {
          DAT_800735a4 = 1;
          return true;
        }
        uVar3 = uVar3 + 1;
      } while (*(short *)(_spu_RXX + 0x1a6) != _spu_tsa);
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 0x30;
    uVar2 = SPU_OBJ_848();
    return (bool)uVar2;
  }
  if (param_1 == 2) {
    _spu_tsa = (short)(param_2 >> (_spu_mem_mode_plus & 0x1f));
    *(short *)(_spu_RXX + 0x1a6) = _spu_tsa;
    uVar2 = SPU_OBJ_848();
    return (bool)uVar2;
  }
  if (param_1 == 3) {
    uVar4 = 0x20;
    if (DAT_800735a4 == 1) {
      uVar4 = 0x30;
    }
    uVar3 = 1;
    uVar1 = *(ushort *)(_spu_RXX + 0x1aa);
    while ((uVar1 & 0x30) != uVar4) {
      if (0xf00 < uVar3) {
        return true;
      }
      uVar3 = uVar3 + 1;
      uVar1 = *(ushort *)(_spu_RXX + 0x1aa);
    }
    if (DAT_800735a4 != 1) {
      _spu_FsetDelayW();
      DAT_800735ac = (param_3 >> 6) + (uint)((param_3 & 0x3f) != 0);
      DAT_800735a8 = param_2;
      *(uint *)PTR_DMA_SPU_MADR_80073558 = param_2;
      *(uint *)PTR_DMA_SPU_BCR_8007355c = DAT_800735ac << 0x10 | 0x10;
      uVar5 = 0x1000201;
      if (DAT_800735a4 == 1) {
        uVar5 = 0x1000200;
      }
      *(undefined4 *)PTR_DMA_SPU_CHCR_80073560 = uVar5;
      return false;
    }
    _spu_FsetDelayR();
    uVar2 = SPU_OBJ_7C0();
    return (bool)uVar2;
  }
  uVar2 = SPU_OBJ_848();
  return (bool)uVar2;
}



undefined4 SPU_OBJ_7C0(undefined4 param_1,undefined4 param_2,uint param_3)

{
  uint *unaff_s0;
  
  DAT_800735a8 = unaff_s0[-1];
  DAT_800735ac = (*unaff_s0 >> 6) + (uint)((*unaff_s0 & 0x3f) != 0);
  *(uint *)PTR_DMA_SPU_MADR_80073558 = DAT_800735a8;
  *(uint *)PTR_DMA_SPU_BCR_8007355c = DAT_800735ac << 0x10 | 0x10;
  param_3 = param_3 | 0x201;
  if (DAT_800735a4 == 1) {
    param_3 = 0x1000200;
  }
  *(uint *)PTR_DMA_SPU_CHCR_80073560 = param_3;
  return 0;
}



void SPU_OBJ_848(void)

{
  return;
}



uint _spu_Fw(uint param_1,uint param_2,uint param_3)

{
  uint uVar1;
  
  if (_spu_transMode == 0) {
    uVar1 = (uint)_spu_tsa << (_spu_mem_mode_plus & 0x1f);
    _spu_t(2,uVar1,param_3);
    _spu_t(1,uVar1,param_3);
    _spu_t(3,param_1,param_2);
    uVar1 = SPU_OBJ_8CC();
    return uVar1;
  }
  _spu_FwriteByIO(param_1,param_2);
  return param_2;
}



void SPU_OBJ_8CC(void)

{
  return;
}



uint _spu_Fr(uint param_1,uint param_2,uint param_3)

{
  uint uVar1;
  
  uVar1 = (uint)_spu_tsa << (_spu_mem_mode_plus & 0x1f);
  _spu_t(2,uVar1,param_3);
  _spu_t(0,uVar1,param_3);
  _spu_t(3,param_1,param_2);
  return param_2;
}



void _spu_FsetRXX(int param_1,uint param_2,int param_3)

{
  if (param_3 == 0) {
    *(short *)(_spu_RXX + param_1 * 2) = (short)param_2;
    SPU_OBJ_98C();
    return;
  }
  *(short *)(_spu_RXX + param_1 * 2) = (short)(param_2 >> (_spu_mem_mode_plus & 0x1f));
  return;
}



void SPU_OBJ_98C(void)

{
  return;
}



uint _spu_FsetRXXa(int param_1,uint param_2)

{
  uint uVar1;
  
  if (DAT_80073578 != 0) {
    if (soundSomething == 0) {
      trap(0x1c00);
    }
    if (param_2 % soundSomething != 0) {
      param_2 = param_2 + soundSomething & ~DAT_80073584;
    }
  }
  if (param_1 != -2) {
    if (param_1 == -1) {
      uVar1 = SPU_OBJ_A30();
      return uVar1;
    }
    *(short *)(_spu_RXX + param_1 * 2) = (short)(param_2 >> (_spu_mem_mode_plus & 0x1f));
    return param_2;
  }
  uVar1 = SPU_OBJ_A30();
  return uVar1;
}



void SPU_OBJ_A30(void)

{
  return;
}



uint _spu_FgetRXXa(int param_1,int param_2)

{
  uint uVar1;
  
  if (param_2 != -1) {
    uVar1 = SPU_OBJ_A6C();
    return uVar1;
  }
  return (uint)*(ushort *)(_spu_RXX + param_1 * 2);
}



void SPU_OBJ_A6C(void)

{
  return;
}



void _spu_FsetPCR(int param_1)

{
  *(uint *)PTR_DMA_DPCR_80073564 = *(uint *)PTR_DMA_DPCR_80073564 & 0xfff8ffff;
  if (param_1 != 0) {
    SPU_OBJ_AC4(0x30000);
    return;
  }
  *(uint *)PTR_DMA_DPCR_80073564 = *(uint *)PTR_DMA_DPCR_80073564 | 0x50000;
  return;
}



void SPU_OBJ_AC4(uint param_1)

{
  uint *in_v0;
  uint in_v1;
  
  *in_v0 = in_v1 | param_1;
  return;
}



void _spu_FsetDelayW(void)

{
  *(uint *)PTR_SPU_DELAY_80073568 = *(uint *)PTR_SPU_DELAY_80073568 & 0xf0ffffff | 0x20000000;
  return;
}



void _spu_FsetDelayR(void)

{
  *(uint *)PTR_SPU_DELAY_80073568 = *(uint *)PTR_SPU_DELAY_80073568 & 0xf0ffffff | 0x22000000;
  return;
}



// Possible SPU.OBJ/_spu_Fw1ts

void _spu_Fw1ts(void)

{
  func_0x8005c768();
  return;
}



void _SpuDataCallback(undefined4 param_1)

{
  DMACallback(4,param_1);
  return;
}



// Possible S_SVA.OBJ/SpuSetVoiceAttr

void SpuSetVoiceAttr(uint *arg)

{
  _SpuRSetVoiceAttr(arg,0,0x17,0);
  return;
}



void SpuSetKey(long on_off,ulong voice_bit)

{
  undefined *puVar1;
  uint uVar2;
  ushort uVar3;
  ushort uVar4;
  
  puVar1 = _spu_RXX;
  uVar2 = voice_bit & 0xffffff;
  uVar3 = (ushort)uVar2;
  uVar4 = (ushort)(uVar2 >> 0x10);
  if (on_off == 0) {
    if ((DAT_8007354c & 1) == 0) {
      *(ushort *)(_spu_RXX + 0x18c) = uVar3;
      *(ushort *)(puVar1 + 0x18e) = uVar4;
      DAT_800730ec = DAT_800730ec & ~uVar2;
    }
    else {
      DAT_80073118 = DAT_80073118 | 1;
      DAT_80073114 = DAT_80073114 & ~uVar2;
      if ((DAT_800777a8 & uVar2) != 0) {
        DAT_800777a8 = DAT_800777a8 & (ushort)~uVar2;
      }
      DAT_800777ac = uVar3;
      DAT_800777ae = uVar4;
      if (((uint)DAT_800777aa & uVar2 >> 0x10) != 0) {
        DAT_800777aa = DAT_800777aa & ~uVar4;
        S_SK_OBJ_1F4();
        return;
      }
    }
  }
  else if (on_off == 1) {
    if ((DAT_8007354c & 1) == 0) {
      *(ushort *)(_spu_RXX + 0x188) = uVar3;
      *(ushort *)(puVar1 + 0x18a) = uVar4;
      S_SK_OBJ_1EC();
      return;
    }
    DAT_80073118 = DAT_80073118 | 1;
    DAT_80073114 = DAT_80073114 | uVar2;
    if ((DAT_800777ac & uVar2) != 0) {
      DAT_800777ac = DAT_800777ac & ~uVar3;
    }
    DAT_800777a8 = uVar3;
    DAT_800777aa = uVar4;
    if (((uint)DAT_800777ae & uVar2 >> 0x10) != 0) {
      DAT_800777ae = DAT_800777ae & ~uVar4;
      S_SK_OBJ_1F4();
      return;
    }
  }
  return;
}



void S_SK_OBJ_1EC(void)

{
  undefined4 in_v0;
  
  DAT_800730ec = in_v0;
  return;
}



void S_SK_OBJ_1F4(void)

{
  return;
}



// WARNING: Removing unreachable block (ram,0x8005ca18)
// WARNING: Removing unreachable block (ram,0x8005ca54)
// WARNING: Removing unreachable block (ram,0x8005ca44)
// WARNING: Removing unreachable block (ram,0x8005ca4c)
// WARNING: Removing unreachable block (ram,0x8005ca5c)

long SpuGetKeyStatus(ulong voice_bit)

{
  uint uVar1;
  long lVar2;
  uint uVar3;
  
  uVar3 = 0;
  uVar1 = 1;
  do {
    if ((voice_bit & uVar1) != 0) {
      lVar2 = S_GKS_OBJ_2C(voice_bit,uVar3);
      return lVar2;
    }
    uVar3 = uVar3 + 1;
    uVar1 = 1 << (uVar3 & 0x1f);
  } while ((int)uVar3 < 0x18);
  lVar2 = S_GKS_OBJ_8C();
  return lVar2;
}



int S_GKS_OBJ_2C(undefined4 param_1,uint param_2)

{
  int iVar1;
  
  if (param_2 == 0xffffffff) {
    iVar1 = S_GKS_OBJ_8C();
    return iVar1;
  }
  if ((DAT_800730ec & 1 << (param_2 & 0x1f)) == 0) {
    iVar1 = (uint)(*(short *)(_spu_RXX + param_2 * 0x10 + 0xc) != 0) << 1;
  }
  else {
    iVar1 = 3;
    if (*(short *)(_spu_RXX + param_2 * 0x10 + 0xc) != 0) {
      iVar1 = S_GKS_OBJ_8C();
      return iVar1;
    }
  }
  return iVar1;
}



void S_GKS_OBJ_8C(void)

{
  return;
}



// Possible S_W.OBJ/SpuWrite

ulong SpuRead(uchar *addr,ulong size)

{
  if (0x7eff0 < size) {
    size = 0x7eff0;
  }
  _spu_Fr(addr,size);
  if (_spu_transferCallback == 0) {
    _spu_inTransfer = 0;
  }
  return size;
}



// Possible S_R.OBJ/SpuRead
// Possible S_W.OBJ/SpuWrite

ulong SpuWrite(uchar *addr,ulong size)

{
  if (0x7eff0 < size) {
    size = 0x7eff0;
  }
  _spu_Fw(addr,size);
  if (_spu_transferCallback == 0) {
    _spu_inTransfer = 0;
  }
  return size;
}



// WARNING: Possible PIC construction at 0x8005cb60: Changing call to branch
// WARNING: Removing unreachable block (ram,0x8005cb60)

ulong SpuSetTransferStartAddr(ulong addr)

{
  ulong uVar1;
  
  if (addr - 0x1010 < 0x7efe9) {
    _spu_tsa = _spu_FsetRXXa(0xffffffff);
    uVar1 = (uint)_spu_tsa << (_spu_mem_mode_plus & 0x1f);
  }
  else {
    uVar1 = 0;
  }
  return uVar1;
}



long SpuSetTransferMode(long mode)

{
  long lVar1;
  
  if ((mode != 0) && (mode == 1)) {
    lVar1 = S_STM_OBJ_1C();
    return lVar1;
  }
  _spu_trans_mode = mode;
  _spu_transMode = 0;
  return 0;
}



void S_STM_OBJ_1C(undefined4 param_1)

{
  undefined4 in_v0;
  
  _spu_trans_mode = param_1;
  _spu_transMode = in_v0;
  return;
}



long SpuIsTransferCompleted(long flag)

{
  bool bVar1;
  long lVar2;
  
  if ((_spu_trans_mode != 1) && (_spu_inTransfer != 1)) {
    lVar2 = TestEvent(DAT_800730e8);
    if (flag == 1) {
      bVar1 = lVar2 == 0;
      lVar2 = 1;
      if (bVar1) {
        do {
          lVar2 = TestEvent(DAT_800730e8);
        } while (lVar2 == 0);
        lVar2 = S_ITC_OBJ_88();
        return lVar2;
      }
    }
    else if (lVar2 != 1) {
      return lVar2;
    }
    _spu_inTransfer = lVar2;
    return lVar2;
  }
  lVar2 = S_ITC_OBJ_90();
  return lVar2;
}



void S_ITC_OBJ_88(void)

{
  undefined4 in_v0;
  
  _spu_inTransfer = in_v0;
  return;
}



void S_ITC_OBJ_90(void)

{
  return;
}



// Possible S_SCA.OBJ/SpuSetCommonAttr

void SpuSetCommonAttr(uint *attr)

{
  bool bVar1;
  ushort uVar2;
  ushort uVar3;
  ushort uVar4;
  uint uVar5;
  
  uVar3 = 0;
  uVar5 = *attr;
  bVar1 = uVar5 == 0;
  uVar4 = 0;
  if (bVar1) {
S_SCA_OBJ_30:
    switch(*(undefined2 *)(attr + 2)) {
    default:
S_SCA_OBJ_94:
      uVar3 = *(ushort *)(attr + 1);
      uVar2 = 0;
      break;
    case 1:
      uVar2 = 0x8000;
      break;
    case 2:
      uVar2 = 0x9000;
      break;
    case 3:
      uVar2 = 0xa000;
      break;
    case 4:
      uVar2 = 0xb000;
      break;
    case 5:
      uVar2 = 0xc000;
      break;
    case 6:
      uVar2 = 0xd000;
      break;
    case 7:
      uVar2 = 0xe000;
    }
    if (uVar2 != 0) {
      uVar3 = *(ushort *)(attr + 1);
      if (0x7f < (short)uVar3) {
        S_SCA_OBJ_CC(attr,uVar2,0x7f);
        return;
      }
      if ((short)uVar3 < 0) {
        uVar3 = 0;
      }
    }
    *(ushort *)(_spu_RXX + 0x180) = uVar3 & 0x7fff | uVar2;
  }
  else if ((uVar5 & 1) != 0) {
    if ((uVar5 & 4) != 0) goto S_SCA_OBJ_30;
    goto S_SCA_OBJ_94;
  }
  if (bVar1) {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)((int)attr + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar3 = 0x8000;
      break;
    case 2:
      uVar3 = 0x9000;
      break;
    case 3:
      uVar3 = 0xa000;
      break;
    case 4:
      uVar3 = 0xb000;
      break;
    case 5:
      uVar3 = 0xc000;
      break;
    case 6:
      uVar3 = 0xd000;
      break;
    case 7:
      uVar3 = 0xe000;
    }
  }
  else {
    if ((uVar5 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((uVar5 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    uVar4 = *(ushort *)((int)attr + 6);
    uVar3 = 0;
  }
  if (uVar3 != 0) {
    uVar4 = *(ushort *)((int)attr + 6);
    if (0x7f < (short)uVar4) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)uVar4 < 0) {
      uVar4 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = uVar4 & 0x7fff | uVar3;
S_SCA_OBJ_1A8:
  if ((bVar1) || ((uVar5 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(attr + 4);
  }
  if ((bVar1) || ((uVar5 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)((int)attr + 0x12);
  }
  if ((bVar1) || ((uVar5 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(attr + 7);
  }
  if ((bVar1) || ((uVar5 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)((int)attr + 0x1e);
  }
  if ((bVar1) || ((uVar5 & 0x100) != 0)) {
    if (attr[5] == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((bVar1) || ((uVar5 & 0x200) != 0)) {
    if (attr[6] == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((bVar1) || ((uVar5 & 0x1000) != 0)) {
    if (attr[8] == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((bVar1) || ((uVar5 & 0x2000) != 0)) {
    if (attr[9] == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_5C(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0x8000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x180) = uVar1 & 0x7fff | 0x8000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_64(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0x9000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x180) = uVar1 & 0x7fff | 0x9000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_6C(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xa000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x180) = uVar1 & 0x7fff | 0xa000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_74(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xb000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x180) = uVar1 & 0x7fff | 0xb000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_7C(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xc000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x180) = uVar1 & 0x7fff | 0xc000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_84(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xd000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x180) = uVar1 & 0x7fff | 0xd000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_8C(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 4);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_CC(param_1,0xe000,0x7f);
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x180) = uVar1 & 0x7fff | 0xe000;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8005ccfc)
// WARNING: Removing unreachable block (ram,0x8005cd10)
// WARNING: Removing unreachable block (ram,0x8005cd18)
// WARNING: Removing unreachable block (ram,0x8005cd20)
// WARNING: Removing unreachable block (ram,0x8005cd24)

void S_SCA_OBJ_94(int param_1)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  *(ushort *)(_spu_RXX + 0x180) = *(ushort *)(param_1 + 4) & 0x7fff;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_9C(int param_1,int param_2,ushort param_3)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  if (param_2 != 0) {
    param_3 = *(ushort *)(param_1 + 4);
    if (0x7f < (short)param_3) {
      S_SCA_OBJ_CC(param_1,param_2,0x7f);
      return;
    }
    if ((short)param_3 < 0) {
      param_3 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x180) = param_3 & 0x7fff | (ushort)param_2;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_CC(int param_1,ushort param_2,ushort param_3)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  *(ushort *)(_spu_RXX + 0x180) = param_3 & 0x7fff | param_2;
  if (in_t2 == 0) {
    if ((in_t1 & 2) == 0) goto S_SCA_OBJ_1A8;
    if ((in_t1 & 8) != 0) goto S_SCA_OBJ_F8;
S_SCA_OBJ_15C:
    in_t0 = *(ushort *)(param_1 + 6);
    uVar1 = 0;
  }
  else {
S_SCA_OBJ_F8:
    switch(*(undefined2 *)(param_1 + 10)) {
    default:
      goto S_SCA_OBJ_15C;
    case 1:
      uVar1 = 0x8000;
      break;
    case 2:
      uVar1 = 0x9000;
      break;
    case 3:
      uVar1 = 0xa000;
      break;
    case 4:
      uVar1 = 0xb000;
      break;
    case 5:
      uVar1 = 0xc000;
      break;
    case 6:
      uVar1 = 0xd000;
      break;
    case 7:
      uVar1 = 0xe000;
    }
  }
  if (uVar1 != 0) {
    in_t0 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)in_t0) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)in_t0 < 0) {
      in_t0 = 0;
    }
  }
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | uVar1;
S_SCA_OBJ_1A8:
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_124(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x182) = uVar1 & 0x7fff | 0x8000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_12C(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x182) = uVar1 & 0x7fff | 0x9000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_134(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x182) = uVar1 & 0x7fff | 0xa000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_13C(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x182) = uVar1 & 0x7fff | 0xb000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_144(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x182) = uVar1 & 0x7fff | 0xc000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_14C(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x182) = uVar1 & 0x7fff | 0xd000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_154(int param_1)

{
  ushort uVar1;
  uint in_t1;
  int in_t2;
  
  uVar1 = *(ushort *)(param_1 + 6);
  if (0x7f < (short)uVar1) {
    S_SCA_OBJ_194();
    return;
  }
  if ((short)uVar1 < 0) {
    uVar1 = 0;
  }
  *(ushort *)(_spu_RXX + 0x182) = uVar1 & 0x7fff | 0xe000;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8005cdc4)
// WARNING: Removing unreachable block (ram,0x8005cdd8)
// WARNING: Removing unreachable block (ram,0x8005cde0)
// WARNING: Removing unreachable block (ram,0x8005cde8)
// WARNING: Removing unreachable block (ram,0x8005cdec)

void S_SCA_OBJ_15C(int param_1)

{
  uint in_t1;
  int in_t2;
  
  *(ushort *)(_spu_RXX + 0x182) = *(ushort *)(param_1 + 6) & 0x7fff;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_164(int param_1,int param_2)

{
  ushort uVar1;
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  uVar1 = in_t0 & 0x7fff;
  if (param_2 != 0) {
    uVar1 = *(ushort *)(param_1 + 6);
    if (0x7f < (short)uVar1) {
      S_SCA_OBJ_194();
      return;
    }
    if ((short)uVar1 < 0) {
      uVar1 = 0;
    }
    uVar1 = uVar1 & 0x7fff;
  }
  *(ushort *)(_spu_RXX + 0x182) = uVar1 | (ushort)param_2;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_194(int param_1,ushort param_2)

{
  ushort in_t0;
  uint in_t1;
  int in_t2;
  
  *(ushort *)(_spu_RXX + 0x182) = in_t0 & 0x7fff | param_2;
  if ((in_t2 != 0) || ((in_t1 & 0x40) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b0) = *(undefined2 *)(param_1 + 0x10);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x80) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b2) = *(undefined2 *)(param_1 + 0x12);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x400) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b4) = *(undefined2 *)(param_1 + 0x1c);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x800) != 0)) {
    *(undefined2 *)(_spu_RXX + 0x1b6) = *(undefined2 *)(param_1 + 0x1e);
  }
  if ((in_t2 != 0) || ((in_t1 & 0x100) != 0)) {
    if (*(int *)(param_1 + 0x14) == 0) {
      S_SCA_OBJ_288();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 4;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_288(int param_1)

{
  int in_v0;
  undefined2 in_v1;
  uint in_t1;
  int in_t2;
  
  *(undefined2 *)(in_v0 + 0x1aa) = in_v1;
  if ((in_t2 != 0) || ((in_t1 & 0x200) != 0)) {
    if (*(int *)(param_1 + 0x18) == 0) {
      S_SCA_OBJ_2DC();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 1;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_2DC(int param_1)

{
  int in_v0;
  undefined2 in_v1;
  uint in_t1;
  int in_t2;
  
  *(undefined2 *)(in_v0 + 0x1aa) = in_v1;
  if ((in_t2 != 0) || ((in_t1 & 0x1000) != 0)) {
    if (*(int *)(param_1 + 0x20) == 0) {
      S_SCA_OBJ_330();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 8;
  }
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_330(int param_1)

{
  int in_v0;
  undefined2 in_v1;
  uint in_t1;
  int in_t2;
  
  *(undefined2 *)(in_v0 + 0x1aa) = in_v1;
  if ((in_t2 != 0) || ((in_t1 & 0x2000) != 0)) {
    if (*(int *)(param_1 + 0x24) == 0) {
      S_SCA_OBJ_384();
      return;
    }
    *(ushort *)(_spu_RXX + 0x1aa) = *(ushort *)(_spu_RXX + 0x1aa) | 2;
  }
  return;
}



void S_SCA_OBJ_384(void)

{
  int in_v0;
  undefined2 in_v1;
  
  *(undefined2 *)(in_v0 + 0x1aa) = in_v1;
  return;
}



// Possible SR_SV.OBJ/_SpuRSetVoiceAttr

undefined4 _SpuRSetVoiceAttr(uint *min_,uint max_,uint arg,uint param_4)

{
  bool bVar1;
  bool bVar2;
  undefined2 uVar3;
  undefined4 uVar4;
  uint uVar5;
  uint uVar6;
  ushort uVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  
  uVar10 = 0;
  uVar9 = 0;
  uVar8 = min_[1];
  bVar1 = max_ == arg;
  bVar2 = uVar8 == 0;
  if ((int)max_ < 0) {
    max_ = 0;
  }
  if ((int)max_ < 0x18) {
    if (0x17 < (int)arg) {
      arg = 0x17;
    }
    if ((-1 < (int)arg) && ((int)max_ <= (int)arg)) {
      do {
        if ((int)(arg + 1) <= (int)max_) {
          if (param_4 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
        if ((bVar1) || ((*min_ & 1 << (max_ & 0x1f)) != 0)) {
          if ((bVar2) || ((uVar8 & 0x10) != 0)) {
            *(undefined2 *)(_spu_RXX + max_ * 0x10 + 4) = *(undefined2 *)(min_ + 5);
          }
          if ((bVar2) || ((uVar8 & 0x40) != 0)) {
            (&DAT_8007311c)[max_] = *(undefined2 *)(min_ + 6);
          }
          if ((bVar2) || ((uVar8 & 0x20) != 0)) {
            uVar3 = _spu_note2pitch((ushort)(&DAT_8007311c)[max_] >> 8,(&DAT_8007311c)[max_] & 0xff,
                                    *(ushort *)((int)min_ + 0x16) >> 8,
                                    *(ushort *)((int)min_ + 0x16) & 0xff);
            *(undefined2 *)(_spu_RXX + max_ * 0x10 + 4) = uVar3;
          }
          if ((bVar2) || ((uVar8 & 0x20000) != 0)) {
            *(undefined2 *)(_spu_RXX + max_ * 0x10 + 8) = *(undefined2 *)((int)min_ + 0x3a);
          }
          if ((bVar2) || ((uVar8 & 0x40000) != 0)) {
            *(undefined2 *)(_spu_RXX + max_ * 0x10 + 10) = *(undefined2 *)(min_ + 0xf);
          }
          if (bVar2) {
SR_SV_OBJ_1C0:
            switch(*(undefined2 *)(min_ + 3)) {
            default:
SR_SV_OBJ_224:
              uVar10 = (uint)*(ushort *)(min_ + 2);
              uVar7 = 0;
              break;
            case 1:
              uVar7 = 0x8000;
              break;
            case 2:
              uVar7 = 0x9000;
              break;
            case 3:
              uVar7 = 0xa000;
              break;
            case 4:
              uVar7 = 0xb000;
              break;
            case 5:
              uVar7 = 0xc000;
              break;
            case 6:
              uVar7 = 0xd000;
              break;
            case 7:
              uVar7 = 0xe000;
            }
            if (uVar7 != 0) {
              uVar10 = (uint)*(short *)(min_ + 2);
              if (0x7f < (int)uVar10) {
                uVar4 = SR_SV_OBJ_25C();
                return uVar4;
              }
              if ((int)uVar10 < 0) {
                uVar10 = 0;
              }
            }
            *(ushort *)(_spu_RXX + max_ * 0x10) = (ushort)uVar10 & 0x7fff | uVar7;
          }
          else if ((uVar8 & 1) != 0) {
            if ((uVar8 & 4) != 0) goto SR_SV_OBJ_1C0;
            goto SR_SV_OBJ_224;
          }
          if (bVar2) {
SR_SV_OBJ_290:
            switch(*(undefined2 *)((int)min_ + 0xe)) {
            default:
SR_SV_OBJ_2F4:
              uVar9 = (uint)*(ushort *)((int)min_ + 10);
              uVar7 = 0;
              break;
            case 1:
              uVar7 = 0x8000;
              break;
            case 2:
              uVar7 = 0x9000;
              break;
            case 3:
              uVar7 = 0xa000;
              break;
            case 4:
              uVar7 = 0xb000;
              break;
            case 5:
              uVar7 = 0xc000;
              break;
            case 6:
              uVar7 = 0xd000;
              break;
            case 7:
              uVar7 = 0xe000;
            }
            if (uVar7 != 0) {
              uVar9 = (uint)*(short *)((int)min_ + 10);
              if (0x7f < (int)uVar9) {
                uVar4 = SR_SV_OBJ_32C();
                return uVar4;
              }
              if ((int)uVar9 < 0) {
                uVar9 = 0;
              }
            }
            *(ushort *)(_spu_RXX + max_ * 0x10 + 2) = (ushort)uVar9 & 0x7fff | uVar7;
          }
          else if ((uVar8 & 2) != 0) {
            if ((uVar8 & 8) != 0) goto SR_SV_OBJ_290;
            goto SR_SV_OBJ_2F4;
          }
          if ((bVar2) || ((uVar8 & 0x10000) != 0)) {
            _spu_FsetRXXa(max_ << 3 | 7,min_[8]);
          }
          if ((bVar2) || ((uVar8 & 0x80) != 0)) {
            _spu_FsetRXXa(max_ << 3 | 3,min_[7]);
          }
          if (bVar2) {
SR_SV_OBJ_39C:
            if ((min_[9] != 1) && (min_[9] == 5)) {
              uVar4 = SR_SV_OBJ_3C0();
              return uVar4;
            }
code_r0x8005d3ac:
            uVar5 = (uint)*(ushort *)(min_ + 0xc);
            if (0x7f < uVar5) {
              uVar5 = 0x7f;
            }
            *(ushort *)(_spu_RXX + max_ * 0x10 + 8) =
                 *(ushort *)(_spu_RXX + max_ * 0x10 + 8) & 0xff | (ushort)(uVar5 << 8);
          }
          else if ((uVar8 & 0x800) != 0) {
            if ((uVar8 & 0x100) != 0) goto SR_SV_OBJ_39C;
            goto code_r0x8005d3ac;
          }
          if ((bVar2) || ((uVar8 & 0x1000) != 0)) {
            uVar5 = (uint)*(ushort *)((int)min_ + 0x32);
            if (0xf < uVar5) {
              uVar5 = 0xf;
            }
            *(ushort *)(_spu_RXX + max_ * 0x10 + 8) =
                 *(ushort *)(_spu_RXX + max_ * 0x10 + 8) & 0xff0f | (ushort)(uVar5 << 4);
          }
          if ((bVar2) || ((uVar8 & 0x8000) != 0)) {
            uVar7 = *(ushort *)(min_ + 0xe);
            if (0xf < uVar7) {
              uVar7 = 0xf;
            }
            *(ushort *)(_spu_RXX + max_ * 0x10 + 8) =
                 uVar7 | *(ushort *)(_spu_RXX + max_ * 0x10 + 8) & 0xfff0;
          }
          if (bVar2) {
SR_SV_OBJ_4C4:
            uVar6 = min_[10];
            if (uVar6 == 3) {
              uVar5 = 0x100;
            }
            else if ((int)uVar6 < 4) {
              uVar5 = 0;
              if (uVar6 != 1) {
                uVar4 = SR_SV_OBJ_514();
                return uVar4;
              }
            }
            else {
              if (uVar6 == 5) {
                uVar4 = SR_SV_OBJ_514();
                return uVar4;
              }
              uVar5 = 0x300;
              if (uVar6 != 7) {
                uVar4 = SR_SV_OBJ_514();
                return uVar4;
              }
            }
code_r0x8005d500:
            uVar6 = (uint)*(ushort *)(min_ + 0xd);
            if (0x7f < uVar6) {
              uVar6 = 0x7f;
            }
            *(ushort *)(_spu_RXX + max_ * 0x10 + 10) =
                 *(ushort *)(_spu_RXX + max_ * 0x10 + 10) & 0x3f | (ushort)((uVar6 | uVar5) << 6);
          }
          else if ((uVar8 & 0x2000) != 0) {
            uVar5 = 0;
            if ((uVar8 & 0x200) != 0) goto SR_SV_OBJ_4C4;
            goto code_r0x8005d500;
          }
          if (bVar2) {
SR_SV_OBJ_574:
            if ((min_[0xb] != 3) && (min_[0xb] == 7)) {
              uVar4 = SR_SV_OBJ_598();
              return uVar4;
            }
          }
          else {
            if ((uVar8 & 0x4000) == 0) goto SR_SV_OBJ_5DC;
            if ((uVar8 & 0x400) != 0) goto SR_SV_OBJ_574;
          }
          uVar7 = *(ushort *)((int)min_ + 0x36);
          if (0x1f < uVar7) {
            uVar7 = 0x1f;
          }
          *(ushort *)(_spu_RXX + max_ * 0x10 + 10) =
               *(ushort *)(_spu_RXX + max_ * 0x10 + 10) & 0xffc0 | uVar7;
        }
SR_SV_OBJ_5DC:
        max_ = max_ + 1;
      } while( true );
    }
  }
  uVar4 = SR_SV_OBJ_608();
  return uVar4;
}



undefined4 SR_SV_OBJ_1EC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d1d8:
  uVar5 = 0x8000;
SR_SV_OBJ_22C:
  do {
    if (uVar5 != 0) {
      unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar5;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
      uVar5 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch(*(undefined2 *)(unaff_s0 + 3)) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      goto code_r0x8005d1d8;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_1F4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d1e0:
  uVar5 = 0x9000;
SR_SV_OBJ_22C:
  do {
    if (uVar5 != 0) {
      unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar5;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
      uVar5 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch(*(undefined2 *)(unaff_s0 + 3)) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      goto code_r0x8005d1e0;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_1FC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d1e8:
  uVar5 = 0xa000;
SR_SV_OBJ_22C:
  do {
    if (uVar5 != 0) {
      unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar5;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
      uVar5 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch(*(undefined2 *)(unaff_s0 + 3)) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      goto code_r0x8005d1e8;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_204(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d1f0:
  uVar5 = 0xb000;
SR_SV_OBJ_22C:
  do {
    if (uVar5 != 0) {
      unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar5;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
      uVar5 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch(*(undefined2 *)(unaff_s0 + 3)) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      goto code_r0x8005d1f0;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_20C(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d1f8:
  uVar5 = 0xc000;
SR_SV_OBJ_22C:
  do {
    if (uVar5 != 0) {
      unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar5;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
      uVar5 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch(*(undefined2 *)(unaff_s0 + 3)) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      goto code_r0x8005d1f8;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_214(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d200:
  uVar5 = 0xd000;
SR_SV_OBJ_22C:
  do {
    if (uVar5 != 0) {
      unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar5;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
      uVar5 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch(*(undefined2 *)(unaff_s0 + 3)) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      goto code_r0x8005d200;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_21C(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d208:
  uVar5 = 0xe000;
SR_SV_OBJ_22C:
  do {
    if (uVar5 != 0) {
      unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | uVar5;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
      uVar5 = 0;
      goto SR_SV_OBJ_22C;
    }
SR_SV_OBJ_1C0:
    switch(*(undefined2 *)(unaff_s0 + 3)) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      goto code_r0x8005d208;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_224(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint uVar6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d210:
  do {
    uVar6 = (uint)*(ushort *)(unaff_s0 + 2);
    uVar5 = 0;
SR_SV_OBJ_22C:
    if (uVar5 != 0) {
      uVar6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)uVar6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)uVar6 < 0) {
        uVar6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)uVar6 & 0x7fff | uVar5;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
  } while ((unaff_s1 & 4) == 0);
SR_SV_OBJ_1C0:
  switch(*(undefined2 *)(unaff_s0 + 3)) {
  default:
    goto code_r0x8005d210;
  case 1:
    uVar5 = 0x8000;
    break;
  case 2:
    uVar5 = 0x9000;
    break;
  case 3:
    uVar5 = 0xa000;
    break;
  case 4:
    uVar5 = 0xb000;
    break;
  case 5:
    uVar5 = 0xc000;
    break;
  case 6:
    uVar5 = 0xd000;
    break;
  case 7:
    uVar5 = 0xe000;
  }
  goto SR_SV_OBJ_22C;
}



undefined4
SR_SV_OBJ_22C(undefined4 param_1,int param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
code_r0x8005d218:
  do {
    if (param_2 != 0) {
      unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | (ushort)param_2;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
      param_2 = 0;
      goto code_r0x8005d218;
    }
SR_SV_OBJ_1C0:
    switch(*(undefined2 *)(unaff_s0 + 3)) {
    default:
      goto SR_SV_OBJ_224;
    case 1:
      param_2 = 0x8000;
      break;
    case 2:
      param_2 = 0x9000;
      break;
    case 3:
      param_2 = 0xa000;
      break;
    case 4:
      param_2 = 0xb000;
      break;
    case 5:
      param_2 = 0xc000;
      break;
    case 6:
      param_2 = 0xd000;
      break;
    case 7:
      param_2 = 0xe000;
    }
  } while( true );
}



undefined4
SR_SV_OBJ_25C(undefined4 param_1,ushort param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    *(ushort *)(_spu_RXX + unaff_s3 * 2) = (ushort)unaff_s6 & 0x7fff | param_2;
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_1C0;
    } while ((unaff_s1 & 1) == 0);
    if ((unaff_s1 & 4) == 0) {
SR_SV_OBJ_224:
      unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
      param_2 = 0;
    }
    else {
SR_SV_OBJ_1C0:
      switch(*(undefined2 *)(unaff_s0 + 3)) {
      default:
        goto SR_SV_OBJ_224;
      case 1:
        param_2 = 0x8000;
        break;
      case 2:
        param_2 = 0x9000;
        break;
      case 3:
        param_2 = 0xa000;
        break;
      case 4:
        param_2 = 0xb000;
        break;
      case 5:
        param_2 = 0xc000;
        break;
      case 6:
        param_2 = 0xd000;
        break;
      case 7:
        param_2 = 0xe000;
      }
    }
    if (param_2 != 0) {
      unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
      if (0x7f < (int)unaff_s6) {
        uVar2 = SR_SV_OBJ_25C();
        return uVar2;
      }
      if ((int)unaff_s6 < 0) {
        unaff_s6 = 0;
      }
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2BC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d2a8:
  uVar5 = 0x8000;
SR_SV_OBJ_2FC:
  do {
    if (uVar5 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar5 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      goto code_r0x8005d2a8;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2C4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d2b0:
  uVar5 = 0x9000;
SR_SV_OBJ_2FC:
  do {
    if (uVar5 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar5 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      goto code_r0x8005d2b0;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2CC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d2b8:
  uVar5 = 0xa000;
SR_SV_OBJ_2FC:
  do {
    if (uVar5 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar5 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      goto code_r0x8005d2b8;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2D4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d2c0:
  uVar5 = 0xb000;
SR_SV_OBJ_2FC:
  do {
    if (uVar5 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar5 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      goto code_r0x8005d2c0;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2DC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d2c8:
  uVar5 = 0xc000;
SR_SV_OBJ_2FC:
  do {
    if (uVar5 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar5 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      goto code_r0x8005d2c8;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2E4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d2d0:
  uVar5 = 0xd000;
SR_SV_OBJ_2FC:
  do {
    if (uVar5 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar5 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      goto code_r0x8005d2d0;
    case 7:
      uVar5 = 0xe000;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2EC(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d2d8:
  uVar5 = 0xe000;
SR_SV_OBJ_2FC:
  do {
    if (uVar5 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      uVar5 = 0;
      goto SR_SV_OBJ_2FC;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      uVar5 = 0x8000;
      break;
    case 2:
      uVar5 = 0x9000;
      break;
    case 3:
      uVar5 = 0xa000;
      break;
    case 4:
      uVar5 = 0xb000;
      break;
    case 5:
      uVar5 = 0xc000;
      break;
    case 6:
      uVar5 = 0xd000;
      break;
    case 7:
      goto code_r0x8005d2d8;
    }
  } while( true );
}



undefined4 SR_SV_OBJ_2F4(void)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint uVar6;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  int in_stack_00000010;
  
code_r0x8005d2e0:
  do {
    uVar6 = (uint)*(ushort *)((int)unaff_s0 + 10);
    uVar5 = 0;
SR_SV_OBJ_2FC:
    if (uVar5 != 0) {
      uVar6 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)uVar6) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)uVar6 < 0) {
        uVar6 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)uVar6 & 0x7fff | uVar5;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (in_stack_00000010 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
  } while ((unaff_s1 & 8) == 0);
SR_SV_OBJ_290:
  switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
  default:
    goto code_r0x8005d2e0;
  case 1:
    uVar5 = 0x8000;
    break;
  case 2:
    uVar5 = 0x9000;
    break;
  case 3:
    uVar5 = 0xa000;
    break;
  case 4:
    uVar5 = 0xb000;
    break;
  case 5:
    uVar5 = 0xc000;
    break;
  case 6:
    uVar5 = 0xd000;
    break;
  case 7:
    uVar5 = 0xe000;
  }
  goto SR_SV_OBJ_2FC;
}



undefined4
SR_SV_OBJ_2FC(undefined4 param_1,int param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
code_r0x8005d2e8:
  do {
    if (param_2 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | (ushort)param_2;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      param_2 = 0;
      goto code_r0x8005d2e8;
    }
SR_SV_OBJ_290:
    switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
    default:
      goto SR_SV_OBJ_2F4;
    case 1:
      param_2 = 0x8000;
      break;
    case 2:
      param_2 = 0x9000;
      break;
    case 3:
      param_2 = 0xa000;
      break;
    case 4:
      param_2 = 0xb000;
      break;
    case 5:
      param_2 = 0xc000;
      break;
    case 6:
      param_2 = 0xd000;
      break;
    case 7:
      param_2 = 0xe000;
    }
  } while( true );
}



undefined4
SR_SV_OBJ_32C(undefined4 param_1,ushort param_2,undefined4 param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 2) = (ushort)unaff_s5 & 0x7fff | param_2;
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_290;
    } while ((unaff_s1 & 2) == 0);
    if ((unaff_s1 & 8) == 0) {
SR_SV_OBJ_2F4:
      unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
      param_2 = 0;
    }
    else {
SR_SV_OBJ_290:
      switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
      default:
        goto SR_SV_OBJ_2F4;
      case 1:
        param_2 = 0x8000;
        break;
      case 2:
        param_2 = 0x9000;
        break;
      case 3:
        param_2 = 0xa000;
        break;
      case 4:
        param_2 = 0xb000;
        break;
      case 5:
        param_2 = 0xc000;
        break;
      case 6:
        param_2 = 0xd000;
        break;
      case 7:
        param_2 = 0xe000;
      }
    }
    if (param_2 != 0) {
      unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
      if (0x7f < (int)unaff_s5) {
        uVar2 = SR_SV_OBJ_32C();
        return uVar2;
      }
      if ((int)unaff_s5 < 0) {
        unaff_s5 = 0;
      }
    }
  } while( true );
}



undefined4
SR_SV_OBJ_3C0(undefined4 param_1,undefined4 param_2,uint param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  uint uVar2;
  undefined4 uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    uVar2 = (uint)*(ushort *)(unaff_s0 + 0xc);
    if (0x7f < uVar2) {
      uVar2 = 0x7f;
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
         *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff | (ushort)((uVar2 | param_3) << 8);
    do {
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar2 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar2) {
          uVar2 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xff0f | (ushort)(uVar2 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s3 * 2 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar2 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar2 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar2 = 0;
          if (uVar4 != 1) {
            uVar3 = SR_SV_OBJ_514();
            return uVar3;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar3 = SR_SV_OBJ_514();
            return uVar3;
          }
          uVar2 = 0x300;
          if (uVar4 != 7) {
            uVar3 = SR_SV_OBJ_514();
            return uVar3;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar4 | uVar2) << 6);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar3 = SR_SV_OBJ_598();
          return uVar3;
        }
code_r0x8005d584:
        uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar5) {
          uVar5 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar3 = SR_SV_OBJ_25C();
            return uVar3;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar3 = SR_SV_OBJ_32C();
            return uVar3;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_39C;
    } while ((unaff_s1 & 0x800) == 0);
    param_3 = 0;
    if ((unaff_s1 & 0x100) != 0) {
SR_SV_OBJ_39C:
      if (unaff_s0[9] == 1) {
        param_3 = 0;
      }
      else {
        param_3 = 0;
        if (unaff_s0[9] == 5) {
          uVar3 = SR_SV_OBJ_3C0();
          return uVar3;
        }
      }
    }
  } while( true );
}



undefined4
SR_SV_OBJ_514(undefined4 param_1,undefined4 param_2,uint param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  uint uVar2;
  undefined4 uVar3;
  ushort uVar4;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    uVar2 = (uint)*(ushort *)(unaff_s0 + 0xd);
    if (0x7f < uVar2) {
      uVar2 = 0x7f;
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
         *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0x3f | (ushort)((uVar2 | param_3) << 6);
    do {
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x4000) != 0) {
          if ((unaff_s1 & 0x400) != 0) goto SR_SV_OBJ_574;
          goto code_r0x8005d584;
        }
      }
      else {
SR_SV_OBJ_574:
        if ((unaff_s0[0xb] != 3) && (unaff_s0[0xb] == 7)) {
          uVar3 = SR_SV_OBJ_598();
          return uVar3;
        }
code_r0x8005d584:
        uVar4 = *(ushort *)((int)unaff_s0 + 0x36);
        if (0x1f < uVar4) {
          uVar4 = 0x1f;
        }
        *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
             *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar4;
      }
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar3 = SR_SV_OBJ_25C();
            return uVar3;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar4;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar4 = 0;
          break;
        case 1:
          uVar4 = 0x8000;
          break;
        case 2:
          uVar4 = 0x9000;
          break;
        case 3:
          uVar4 = 0xa000;
          break;
        case 4:
          uVar4 = 0xb000;
          break;
        case 5:
          uVar4 = 0xc000;
          break;
        case 6:
          uVar4 = 0xd000;
          break;
        case 7:
          uVar4 = 0xe000;
        }
        if (uVar4 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar3 = SR_SV_OBJ_32C();
            return uVar3;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 2) = (ushort)unaff_s5 & 0x7fff | uVar4;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar3 = SR_SV_OBJ_3C0();
          return uVar3;
        }
code_r0x8005d3ac:
        uVar2 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar2) {
          uVar2 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) =
             *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) & 0xff | (ushort)(uVar2 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar2 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar2) {
          uVar2 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) =
             *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) & 0xff0f | (ushort)(uVar2 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar4 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar4) {
          uVar4 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) =
             uVar4 | *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) & 0xfff0;
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_4C4;
    } while ((unaff_s1 & 0x2000) == 0);
    param_3 = 0;
    if ((unaff_s1 & 0x200) != 0) {
SR_SV_OBJ_4C4:
      uVar2 = unaff_s0[10];
      if (uVar2 == 3) {
        param_3 = 0x100;
      }
      else if ((int)uVar2 < 4) {
        param_3 = 0;
        if (uVar2 != 1) {
          uVar3 = SR_SV_OBJ_514();
          return uVar3;
        }
      }
      else {
        if (uVar2 == 5) {
          uVar3 = SR_SV_OBJ_514();
          return uVar3;
        }
        param_3 = 0x300;
        if (uVar2 != 7) {
          uVar3 = SR_SV_OBJ_514();
          return uVar3;
        }
      }
    }
  } while( true );
}



undefined4
SR_SV_OBJ_598(undefined4 param_1,undefined4 param_2,ushort param_3,undefined4 param_4,int param_5)

{
  undefined2 uVar1;
  undefined4 uVar2;
  uint uVar3;
  uint uVar4;
  ushort uVar5;
  uint *unaff_s0;
  uint unaff_s1;
  int unaff_s2;
  uint unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  int unaff_s7;
  int unaff_s8;
  
  do {
    uVar5 = *(ushort *)((int)unaff_s0 + 0x36);
    if (0x1f < uVar5) {
      uVar5 = 0x1f;
    }
    *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) =
         *(ushort *)(_spu_RXX + unaff_s3 * 2 + 10) & 0xffc0 | uVar5 | param_3;
    do {
      do {
        unaff_s4 = unaff_s4 + 1;
        if (unaff_s7 <= (int)unaff_s4) {
          if (param_5 == 0) {
            _spu_Fw1ts();
          }
          return 0;
        }
      } while ((unaff_s8 == 0) && ((*unaff_s0 & 1 << (unaff_s4 & 0x1f)) == 0));
      unaff_s3 = unaff_s4 * 8;
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = *(undefined2 *)(unaff_s0 + 5);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40) != 0)) {
        (&DAT_8007311c)[unaff_s4] = *(undefined2 *)(unaff_s0 + 6);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20) != 0)) {
        uVar1 = _spu_note2pitch((ushort)(&DAT_8007311c)[unaff_s4] >> 8,
                                (&DAT_8007311c)[unaff_s4] & 0xff,
                                *(ushort *)((int)unaff_s0 + 0x16) >> 8,
                                *(ushort *)((int)unaff_s0 + 0x16) & 0xff);
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 4) = uVar1;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x20000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 8) = *(undefined2 *)((int)unaff_s0 + 0x3a);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x40000) != 0)) {
        *(undefined2 *)(_spu_RXX + unaff_s4 * 0x10 + 10) = *(undefined2 *)(unaff_s0 + 0xf);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 1) != 0) {
          if ((unaff_s1 & 4) != 0) goto SR_SV_OBJ_1C0;
          goto SR_SV_OBJ_224;
        }
      }
      else {
SR_SV_OBJ_1C0:
        switch(*(undefined2 *)(unaff_s0 + 3)) {
        default:
SR_SV_OBJ_224:
          unaff_s6 = (uint)*(ushort *)(unaff_s0 + 2);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s6 = (uint)*(short *)(unaff_s0 + 2);
          if (0x7f < (int)unaff_s6) {
            uVar2 = SR_SV_OBJ_25C();
            return uVar2;
          }
          if ((int)unaff_s6 < 0) {
            unaff_s6 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10) = (ushort)unaff_s6 & 0x7fff | uVar5;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 2) != 0) {
          if ((unaff_s1 & 8) != 0) goto SR_SV_OBJ_290;
          goto SR_SV_OBJ_2F4;
        }
      }
      else {
SR_SV_OBJ_290:
        switch(*(undefined2 *)((int)unaff_s0 + 0xe)) {
        default:
SR_SV_OBJ_2F4:
          unaff_s5 = (uint)*(ushort *)((int)unaff_s0 + 10);
          uVar5 = 0;
          break;
        case 1:
          uVar5 = 0x8000;
          break;
        case 2:
          uVar5 = 0x9000;
          break;
        case 3:
          uVar5 = 0xa000;
          break;
        case 4:
          uVar5 = 0xb000;
          break;
        case 5:
          uVar5 = 0xc000;
          break;
        case 6:
          uVar5 = 0xd000;
          break;
        case 7:
          uVar5 = 0xe000;
        }
        if (uVar5 != 0) {
          unaff_s5 = (uint)*(short *)((int)unaff_s0 + 10);
          if (0x7f < (int)unaff_s5) {
            uVar2 = SR_SV_OBJ_32C();
            return uVar2;
          }
          if ((int)unaff_s5 < 0) {
            unaff_s5 = 0;
          }
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 2) = (ushort)unaff_s5 & 0x7fff | uVar5;
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x10000) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 7,unaff_s0[8]);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x80) != 0)) {
        _spu_FsetRXXa(unaff_s3 | 3,unaff_s0[7]);
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x800) != 0) {
          if ((unaff_s1 & 0x100) != 0) goto SR_SV_OBJ_39C;
          goto code_r0x8005d3ac;
        }
      }
      else {
SR_SV_OBJ_39C:
        if ((unaff_s0[9] != 1) && (unaff_s0[9] == 5)) {
          uVar2 = SR_SV_OBJ_3C0();
          return uVar2;
        }
code_r0x8005d3ac:
        uVar3 = (uint)*(ushort *)(unaff_s0 + 0xc);
        if (0x7f < uVar3) {
          uVar3 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) =
             *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) & 0xff | (ushort)(uVar3 << 8);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x1000) != 0)) {
        uVar3 = (uint)*(ushort *)((int)unaff_s0 + 0x32);
        if (0xf < uVar3) {
          uVar3 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) =
             *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) & 0xff0f | (ushort)(uVar3 << 4);
      }
      if ((unaff_s2 != 0) || ((unaff_s1 & 0x8000) != 0)) {
        uVar5 = *(ushort *)(unaff_s0 + 0xe);
        if (0xf < uVar5) {
          uVar5 = 0xf;
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) =
             uVar5 | *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 8) & 0xfff0;
      }
      if (unaff_s2 == 0) {
        if ((unaff_s1 & 0x2000) != 0) {
          uVar3 = 0;
          if ((unaff_s1 & 0x200) != 0) goto SR_SV_OBJ_4C4;
          goto code_r0x8005d500;
        }
      }
      else {
SR_SV_OBJ_4C4:
        uVar4 = unaff_s0[10];
        if (uVar4 == 3) {
          uVar3 = 0x100;
        }
        else if ((int)uVar4 < 4) {
          uVar3 = 0;
          if (uVar4 != 1) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
        else {
          if (uVar4 == 5) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
          uVar3 = 0x300;
          if (uVar4 != 7) {
            uVar2 = SR_SV_OBJ_514();
            return uVar2;
          }
        }
code_r0x8005d500:
        uVar4 = (uint)*(ushort *)(unaff_s0 + 0xd);
        if (0x7f < uVar4) {
          uVar4 = 0x7f;
        }
        *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 10) =
             *(ushort *)(_spu_RXX + unaff_s4 * 0x10 + 10) & 0x3f | (ushort)((uVar4 | uVar3) << 6);
      }
      if (unaff_s2 != 0) goto SR_SV_OBJ_574;
    } while ((unaff_s1 & 0x4000) == 0);
    param_3 = 0;
    if ((unaff_s1 & 0x400) != 0) {
SR_SV_OBJ_574:
      if (unaff_s0[0xb] == 3) {
        param_3 = 0;
      }
      else {
        param_3 = 0;
        if (unaff_s0[0xb] == 7) {
          uVar2 = SR_SV_OBJ_598();
          return uVar2;
        }
      }
    }
  } while( true );
}



void SR_SV_OBJ_608(void)

{
  return;
}



// Possible S_N2P.OBJ/_spu_2pitch

uint _spu_2pitch(int param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  int local_8;
  
  uVar1 = 0x103b;
  local_8 = param_1 * 0x103b;
  iVar3 = param_1 << 0xc;
  iVar2 = 0;
  if (param_2 >> 5 != 0) {
    local_8 = param_1 * 0x103b;
    do {
      iVar3 = local_8;
      uVar1 = uVar1 * 0x103b >> 0xc;
      local_8 = param_1 * uVar1;
      iVar2 = iVar2 + 1;
    } while (iVar2 < (int)(param_2 >> 5));
  }
  return iVar3 + ((uint)(local_8 - iVar3) >> 5) * (param_2 & 0x1f) >> 0xc;
}



// Possible S_N2P.OBJ/_spu_note2pitch

uint _spu_note2pitch(uint param_1,uint param_2,uint param_3,uint param_4)

{
  uint uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int local_8;
  
  iVar4 = ((param_3 & 0xffff) * 0x80 + (param_4 & 0xffff)) -
          ((param_1 & 0xffff) * 0x80 + (param_2 & 0xffff));
  iVar3 = iVar4;
  if (iVar4 < 0) {
    iVar3 = -iVar4;
  }
  uVar2 = iVar3 / 0x600;
  uVar1 = iVar3 % 0x600;
  if (-1 < iVar4) {
    uVar1 = S_N2P_OBJ_11C();
    return uVar1;
  }
  if (uVar1 != 0) {
    uVar2 = uVar2 + 1;
    uVar1 = 0x600 - uVar1;
  }
  uVar5 = 0x1000 >> (uVar2 & 0x1f) & 0xffff;
  uVar2 = 0x103b;
  local_8 = uVar5 * 0x103b;
  iVar4 = uVar5 << 0xc;
  iVar3 = 0;
  if ((int)uVar1 < 0) {
    uVar1 = -uVar1;
  }
  if (uVar1 >> 5 != 0) {
    local_8 = uVar5 * 0x103b;
    do {
      iVar4 = local_8;
      uVar2 = uVar2 * 0x103b >> 0xc;
      local_8 = uVar5 * uVar2;
      iVar3 = iVar3 + 1;
    } while (iVar3 < (int)(uVar1 >> 5));
  }
  uVar2 = iVar4 + ((uint)(local_8 - iVar4) >> 5) * (uVar1 & 0x1f) >> 0xc;
  uVar1 = uVar2 & 0xffff;
  if (0x3fff < uVar2) {
    uVar1 = 0x3fff;
  }
  return uVar1;
}



// Possible S_N2P.OBJ/S_N2P_OBJ_11C

uint S_N2P_OBJ_11C(void)

{
  uint in_v0;
  uint in_v1;
  uint uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  int local_res8;
  
  uVar3 = in_v0 & 0xffff;
  uVar1 = 0x103b;
  local_res8 = uVar3 * 0x103b;
  iVar4 = uVar3 << 0xc;
  iVar2 = 0;
  if ((int)in_v1 < 0) {
    in_v1 = -in_v1;
  }
  if (in_v1 >> 5 != 0) {
    local_res8 = uVar3 * 0x103b;
    do {
      iVar4 = local_res8;
      uVar1 = uVar1 * 0x103b >> 0xc;
      local_res8 = uVar3 * uVar1;
      iVar2 = iVar2 + 1;
    } while (iVar2 < (int)(in_v1 >> 5));
  }
  uVar3 = iVar4 + ((uint)(local_res8 - iVar4) >> 5) * (in_v1 & 0x1f) >> 0xc;
  uVar1 = uVar3 & 0xffff;
  if (0x3fff < uVar3) {
    uVar1 = 0x3fff;
  }
  return uVar1;
}



// Possible S_N2P.OBJ/_spu_pitch2note

uint _spu_pitch2note(uint param_1,uint param_2,uint param_3)

{
  uint uVar1;
  int iVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  
  uVar6 = 0xf;
  uVar1 = (int)(~param_3 & 0xffff) >> 0xf;
  do {
    if ((uVar1 & 1) == 0) {
      uVar1 = S_N2P_OBJ_208();
      return uVar1;
    }
    uVar6 = uVar6 - 1;
    uVar1 = (int)(~param_3 & 0xffff) >> (uVar6 & 0x1f);
  } while (-1 < (int)uVar6);
  iVar7 = 0;
  uVar1 = 0x1000;
  do {
    uVar4 = uVar1 * 0x103b >> 0xc;
    iVar3 = 0;
    iVar8 = 0;
    uVar5 = uVar4 - uVar1 >> 5;
    uVar6 = uVar5;
    do {
      if ((uVar1 + iVar8 >> 0xc <= (param_3 & 0xffff)) &&
         (iVar2 = iVar7 * 0x20 + iVar3, (param_3 & 0xffff) < uVar1 + uVar6 >> 0xc))
      goto S_N2P_OBJ_2B0;
      uVar6 = uVar6 + uVar5;
      iVar3 = iVar3 + 1;
      iVar8 = iVar8 + uVar5;
    } while (iVar3 < 0x20);
    iVar7 = iVar7 + 1;
    uVar1 = uVar4;
  } while (iVar7 < 0x30);
  iVar2 = 0x600;
S_N2P_OBJ_2B0:
  iVar7 = iVar2;
  if (iVar2 < 0) {
    iVar7 = iVar2 + 0x7f;
  }
  return ((param_1 & 0xffff) + (iVar7 >> 7) + -0x90) * 0x100 |
         (param_2 & 0xffff) + iVar2 + (iVar7 >> 7) * -0x80;
}



// Possible S_N2P.OBJ/S_N2P_OBJ_208

uint S_N2P_OBJ_208(uint param_1,uint param_2)

{
  int iVar1;
  uint in_v1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint in_t8;
  int iVar9;
  
  iVar8 = 1 << (in_v1 & 0x1f);
  uVar4 = 0x1000;
  iVar6 = 0;
  iVar9 = iVar8 * 0x1000;
  do {
    uVar4 = uVar4 * 0x103b >> 0xc;
    iVar2 = 0;
    iVar7 = 0;
    uVar5 = iVar8 * uVar4 - iVar9 >> 5;
    uVar3 = uVar5;
    do {
      if (((uint)(iVar9 + iVar7) >> 0xc <= (param_1 & 0xffff)) &&
         (iVar1 = iVar6 * 0x20 + iVar2, (param_1 & 0xffff) < iVar9 + uVar3 >> 0xc))
      goto S_N2P_OBJ_2B0;
      uVar3 = uVar3 + uVar5;
      iVar2 = iVar2 + 1;
      iVar7 = iVar7 + uVar5;
    } while (iVar2 < 0x20);
    iVar6 = iVar6 + 1;
    iVar9 = iVar8 * uVar4;
  } while (iVar6 < 0x30);
  iVar1 = 0x600;
S_N2P_OBJ_2B0:
  iVar6 = iVar1;
  if (iVar1 < 0) {
    iVar6 = iVar1 + 0x7f;
  }
  return ((in_t8 & 0xffff) + (iVar6 >> 7) + (in_v1 - 0xc) * 0xc) * 0x100 |
         (param_2 & 0xffff) + iVar1 + (iVar6 >> 7) * -0x80;
}



// Possible SR_GAKS.OBJ/SpuRGetAllKeysStatus

long SpuRGetAllKeysStatus(long min_,long max_,char *status)

{
  long lVar1;
  uint uVar2;
  char *pcVar3;
  
  uVar2 = min_;
  if (min_ < 0) {
    uVar2 = 0;
  }
  if (min_ < 0x18) {
    if (0x17 < max_) {
      max_ = 0x17;
    }
    if ((-1 < max_) && ((int)uVar2 <= max_)) {
      if ((int)uVar2 < max_ + 1) {
        pcVar3 = status + uVar2;
        do {
          if ((DAT_800730ec & 1 << (uVar2 & 0x1f)) != 0) {
            if (*(short *)(_spu_RXX + uVar2 * 0x10 + 0xc) == 0) {
              *pcVar3 = '\x03';
              lVar1 = SR_GAKS_OBJ_B4();
              return lVar1;
            }
            *pcVar3 = '\x01';
            lVar1 = SR_GAKS_OBJ_B4();
            return lVar1;
          }
          if (*(short *)(_spu_RXX + uVar2 * 0x10 + 0xc) != 0) {
            *pcVar3 = '\x02';
            lVar1 = SR_GAKS_OBJ_B4();
            return lVar1;
          }
          *pcVar3 = '\0';
          uVar2 = uVar2 + 1;
          pcVar3 = pcVar3 + 1;
        } while ((int)uVar2 < max_ + 1);
      }
      return 0;
    }
  }
  lVar1 = SR_GAKS_OBJ_C8();
  return lVar1;
}



// Possible SR_GAKS.OBJ/SR_GAKS_OBJ_B4

undefined4 SR_GAKS_OBJ_B4(undefined4 param_1,int param_2,undefined *param_3,uint param_4)

{
  undefined4 uVar1;
  int in_t0;
  undefined in_t1;
  undefined in_t2;
  
  while( true ) {
    param_4 = param_4 + 1;
    param_3 = param_3 + 1;
    if (param_2 <= (int)param_4) {
      return 0;
    }
    if ((DAT_800730ec & in_t0 << (param_4 & 0x1f)) != 0) break;
    if (*(short *)(_spu_RXX + param_4 * 0x10 + 0xc) != 0) {
      *param_3 = in_t1;
      uVar1 = SR_GAKS_OBJ_B4();
      return uVar1;
    }
    *param_3 = 0;
  }
  if (*(short *)(_spu_RXX + param_4 * 0x10 + 0xc) != 0) {
    *param_3 = (char)in_t0;
    uVar1 = SR_GAKS_OBJ_B4();
    return uVar1;
  }
  *param_3 = in_t2;
  uVar1 = SR_GAKS_OBJ_B4();
  return uVar1;
}



// Possible SR_GAKS.OBJ/SR_GAKS_OBJ_C8

void SR_GAKS_OBJ_C8(void)

{
  return;
}



// Possible SR_GAKS.OBJ/SpuGetAllKeysStatus

void SpuGetAllKeysStatus(char *status)

{
  uint uVar1;
  
  uVar1 = 0;
  do {
    if ((DAT_800730ec & 1 << (uVar1 & 0x1f)) != 0) {
      if (*(short *)(_spu_RXX + uVar1 * 0x10 + 0xc) != 0) {
        *status = '\x01';
        SR_GAKS_OBJ_140();
        return;
      }
      *status = '\x03';
      SR_GAKS_OBJ_140();
      return;
    }
    if (*(short *)(_spu_RXX + uVar1 * 0x10 + 0xc) != 0) {
      *status = '\x02';
      SR_GAKS_OBJ_140();
      return;
    }
    *status = '\0';
    uVar1 = uVar1 + 1;
    status = status + 1;
  } while ((int)uVar1 < 0x18);
  return;
}



// Possible SR_GAKS.OBJ/SR_GAKS_OBJ_140

void SR_GAKS_OBJ_140(undefined4 param_1,undefined *param_2,uint param_3,int param_4)

{
  undefined in_t0;
  undefined in_t1;
  int in_t2;
  
  while( true ) {
    param_3 = param_3 + 1;
    param_2 = param_2 + 1;
    if (in_t2 <= (int)param_3) {
      return;
    }
    if ((DAT_800730ec & param_4 << (param_3 & 0x1f)) != 0) break;
    if (*(short *)(_spu_RXX + param_3 * 0x10 + 0xc) != 0) {
      *param_2 = in_t0;
      SR_GAKS_OBJ_140();
      return;
    }
    *param_2 = 0;
  }
  if (*(short *)(_spu_RXX + param_3 * 0x10 + 0xc) != 0) {
    *param_2 = (char)param_4;
    SR_GAKS_OBJ_140();
    return;
  }
  *param_2 = in_t1;
  SR_GAKS_OBJ_140();
  return;
}



void SpuSetVoiceVolume(int vNum,short volL,short volR)

{
  ushort *puVar1;
  
  puVar1 = (ushort *)(_spu_RXX + vNum * 0x10);
  *puVar1 = volL & 0x7fff;
  puVar1[1] = volR & 0x7fff;
  _spu_Fw1ts();
  return;
}



void SpuGetVoiceVolume(int vNum,short *volL,short *volR)

{
  ushort uVar1;
  ushort uVar2;
  
  uVar1 = *(ushort *)(_spu_RXX + vNum * 0x10);
  uVar2 = *(ushort *)((int)(_spu_RXX + vNum * 0x10) + 2);
  if (0x3fff < uVar1) {
    *volL = uVar1 + 0x8000;
    S_GVV_OBJ_38();
    return;
  }
  *volL = uVar1;
  if (0x3fff < uVar2) {
    *volR = uVar2 + 0x8000;
    S_GVV_OBJ_58();
    return;
  }
  *volR = uVar2;
  return;
}



void S_GVV_OBJ_38(ushort param_1,undefined4 param_2,ushort *param_3)

{
  if (0x3fff < param_1) {
    *param_3 = param_1 + 0x8000;
    S_GVV_OBJ_58();
    return;
  }
  *param_3 = param_1;
  return;
}



void S_GVV_OBJ_58(void)

{
  return;
}



void InitHeap(ulong *param_1,ulong param_2)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



long LoadExec(char *param_1,ulong param_2,ulong param_3)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&LAB_000000a0)();
  return lVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _96_init(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



// Possible C114.OBJ/_96_remove

void _96_remove(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



void DeliverEvent(ulong param_1,ulong param_2)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



long OpenEvent(ulong param_1,long param_2,long param_3,func *func)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



long TestEvent(long param_1)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



long EnableEvent(long param_1)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



// Possible A36.OBJ/EnterCriticalSection

void EnterCriticalSection(void)

{
  syscall(0);
  return;
}



// Possible A37.OBJ/ExitCriticalSection

void ExitCriticalSection(void)

{
  syscall(0);
  return;
}



// WARNING: Possible PIC construction at 0x8005dc0c: Changing call to branch
// WARNING: Removing unreachable block (ram,0x8005dc0c)
// Possible VSYNC.OBJ/VSync

uint Vsync(int mode)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  
  uVar3 = *(int *)PTR_TMR_HRETRACE_VAL_800738c0 - Hcount & 0xffff;
  uVar1 = Vcount;
  if ((-1 < mode) && (uVar1 = uVar3, mode != 1)) {
    if (0 < mode) {
      uVar1 = func_0x8005dc48();
      return uVar1;
    }
    iVar2 = 0;
    if (0 < mode) {
      iVar2 = mode + -1;
    }
    v_wait(gameClockReference,iVar2);
    uVar3 = *(uint *)PTR_GPU_REG1_800738bc;
    v_wait(Vcount + 1,1);
    if (((uVar3 & 0x400000) != 0) && (-1 < (int)(uVar3 ^ *(uint *)PTR_GPU_REG1_800738bc))) {
      do {
      } while (((uVar3 ^ *(uint *)PTR_GPU_REG1_800738bc) & 0x80000000) == 0);
    }
    gameClockReference = Vcount;
    Hcount = *(int *)PTR_TMR_HRETRACE_VAL_800738c0;
  }
  return uVar1;
}



// Possible VSYNC.OBJ/v_wait

void v_wait(int param_1,int param_2)

{
  param_2 = param_2 << 0xf;
  do {
    if (param_1 <= Vcount) {
      return;
    }
    param_2 = param_2 + -1;
  } while (param_2 != -1);
  puts("VSync: timeout\n");
  ChangeClearPAD(0);
  ChangeClearRCnt(3,0);
  VSYNC_OBJ_1D4();
  return;
}



void VSYNC_OBJ_1D4(void)

{
  return;
}



void ChangeClearPAD(long param_1)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void ChangeClearRCnt(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000c0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int ResetCallback(void)

{
  int iVar1;
  
  iVar1 = (**(code **)(PTR_PTR_s__Id__intr_c_v_1_76_1997_02_12_12_800749ac + 0xc))();
  return iVar1;
}



void InterruptCallback(void)

{
  (**(code **)(PTR_PTR_s__Id__intr_c_v_1_76_1997_02_12_12_800749ac + 8))();
  return;
}



void DMACallback(void)

{
  (**(code **)(PTR_PTR_s__Id__intr_c_v_1_76_1997_02_12_12_800749ac + 4))();
  return;
}



int VSyncCallback(f *f)

{
  int iVar1;
  
  iVar1 = (**(code **)(PTR_PTR_s__Id__intr_c_v_1_76_1997_02_12_12_800749ac + 0x14))(4,f);
  return iVar1;
}



void VSyncCallbacks(void)

{
  (**(code **)(PTR_PTR_s__Id__intr_c_v_1_76_1997_02_12_12_800749ac + 0x14))();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int StopCallback(void)

{
  int iVar1;
  
  iVar1 = (**(code **)(PTR_PTR_s__Id__intr_c_v_1_76_1997_02_12_12_800749ac + 0x10))();
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int RestartCallback(void)

{
  int iVar1;
  
  iVar1 = (**(code **)(PTR_PTR_s__Id__intr_c_v_1_76_1997_02_12_12_800749ac + 0x18))();
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CheckCallback(void)

{
  return (uint)DAT_80073926;
}



undefined2 GetIntrMask(void)

{
  return *(undefined2 *)PTR_I_MASK_800749b4;
}



undefined2 SetIntrMask(undefined2 param_1)

{
  undefined2 uVar1;
  
  uVar1 = *(undefined2 *)PTR_I_MASK_800749b4;
  *(undefined2 *)PTR_I_MASK_800749b4 = param_1;
  return uVar1;
}



undefined2 * startIntr(void)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined2 *puVar3;
  int iVar4;
  undefined4 uVar5;
  
  puVar2 = PTR_I_MASK_800749b4;
  puVar1 = PTR_I_STAT_800749b0;
  puVar3 = (undefined2 *)0x0;
  if (DAT_80073924 == 0) {
    *(undefined2 *)PTR_I_MASK_800749b4 = 0;
    *(undefined2 *)puVar1 = *(undefined2 *)puVar2;
    *(undefined4 *)PTR_DMA_DPCR_800749b8 = 0x33333333;
    memclr(&DAT_80073924,0x41a);
    iVar4 = setjmp((__jmp_buf_tag *)&DAT_8007395c);
    if (iVar4 != 0) {
      trapIntr();
    }
    DAT_80073960 = &DAT_8007493c;
    HookEntryInt(&DAT_8007395c);
    DAT_80073924 = 1;
    uVar5 = startIntrVSync();
    *(undefined4 *)(PTR_PTR_s__Id__intr_c_v_1_76_1997_02_12_12_800749ac + 0x14) = uVar5;
    uVar5 = startIntrDMA();
    *(undefined4 *)(PTR_PTR_s__Id__intr_c_v_1_76_1997_02_12_12_800749ac + 4) = uVar5;
    _96_remove();
    puVar3 = &DAT_80073924;
    ExitCriticalSection();
  }
  return puVar3;
}



void trapIntr(void)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  uint uVar4;
  code **ppcVar5;
  
  if (DAT_80073924 == 0) {
    printf("unexpected interrupt(%04x)\n",(uint)*(ushort *)PTR_I_STAT_800749b0);
    ReturnFromException();
  }
  DAT_80073926 = 1;
  uVar2 = (uint)(*(ushort *)PTR_I_MASK_800749b4 & DAT_80073954 & *(ushort *)PTR_I_STAT_800749b0);
  if (uVar2 != 0) {
    do {
      ppcVar5 = (code **)&DAT_80073928;
      for (uVar4 = 0; (uVar2 != 0 && ((int)uVar4 < 0xb)); uVar4 = uVar4 + 1) {
        if ((uVar2 & 1) != 0) {
          *(ushort *)PTR_I_STAT_800749b0 = ~(ushort)(1 << (uVar4 & 0x1f));
          if (*ppcVar5 != (code *)0x0) {
            (**ppcVar5)();
          }
        }
        ppcVar5 = ppcVar5 + 1;
        uVar2 = uVar2 >> 1;
      }
      uVar2 = (uint)(*(ushort *)PTR_I_MASK_800749b4 & DAT_80073954 & *(ushort *)PTR_I_STAT_800749b0)
      ;
    } while (uVar2 != 0);
  }
  if ((*(ushort *)PTR_I_MASK_800749b4 & *(ushort *)PTR_I_STAT_800749b0) == 0) {
    DAT_800749bc = 0;
  }
  else {
    iVar3 = DAT_800749bc + 1;
    bVar1 = 0x800 < DAT_800749bc;
    DAT_800749bc = iVar3;
    if (bVar1) {
      printf("intr timeout(%04x:%04x)\n",(uint)*(ushort *)PTR_I_STAT_800749b0,
             (uint)*(ushort *)PTR_I_MASK_800749b4);
      DAT_800749bc = 0;
      *(undefined2 *)PTR_I_STAT_800749b0 = 0;
      INTR_OBJ_428();
      return;
    }
  }
  DAT_80073926 = 0;
  ReturnFromException();
  return;
}



void INTR_OBJ_428(void)

{
  DAT_80073926 = 0;
  ReturnFromException();
  return;
}



int setIntr(uint param_1,int param_2)

{
  ushort uVar1;
  ushort uVar2;
  int *piVar3;
  int iVar4;
  
  piVar3 = &DAT_80073928 + param_1;
  iVar4 = *piVar3;
  if ((param_2 != iVar4) && (DAT_80073924 != 0)) {
    uVar1 = *(ushort *)PTR_I_MASK_800749b4;
    *(undefined2 *)PTR_I_MASK_800749b4 = 0;
    if (param_2 != 0) {
      *piVar3 = param_2;
      DAT_80073954 = DAT_80073954 | (ushort)(1 << (param_1 & 0x1f));
      iVar4 = INTR_OBJ_514();
      return iVar4;
    }
    uVar2 = ~(ushort)(1 << (param_1 & 0x1f));
    *piVar3 = 0;
    DAT_80073954 = DAT_80073954 & uVar2;
    if (param_1 == 0) {
      ChangeClearPAD(1);
      ChangeClearRCnt(3,1);
    }
    if (param_1 == 4) {
      ChangeClearRCnt(0,1);
    }
    if (param_1 == 5) {
      ChangeClearRCnt(1,1);
    }
    if (param_1 == 6) {
      ChangeClearRCnt(2,1);
    }
    *(ushort *)PTR_I_MASK_800749b4 = uVar1 & uVar2;
  }
  return iVar4;
}



void INTR_OBJ_514(void)

{
  int unaff_s1;
  int unaff_s2;
  undefined2 unaff_s3;
  
  if (unaff_s1 == 0) {
    ChangeClearPAD((uint)(unaff_s2 == 0));
    ChangeClearRCnt(3,(uint)(unaff_s2 == 0));
  }
  if (unaff_s1 == 4) {
    ChangeClearRCnt(0,unaff_s2 == 0);
  }
  if (unaff_s1 == 5) {
    ChangeClearRCnt(1,unaff_s2 == 0);
  }
  if (unaff_s1 == 6) {
    ChangeClearRCnt(2,unaff_s2 == 0);
  }
  *(undefined2 *)PTR_I_MASK_800749b4 = unaff_s3;
  return;
}



undefined2 * stopIntr(void)

{
  undefined *puVar1;
  undefined *puVar2;
  undefined2 *puVar3;
  
  puVar3 = (undefined2 *)0x0;
  if (DAT_80073924 != 0) {
    EnterCriticalSection();
    puVar2 = PTR_I_MASK_800749b4;
    puVar1 = PTR_I_STAT_800749b0;
    DAT_80073956 = *(undefined2 *)PTR_I_MASK_800749b4;
    DAT_80073958 = *(undefined4 *)PTR_DMA_DPCR_800749b8;
    *(undefined2 *)PTR_I_MASK_800749b4 = 0;
    *(undefined2 *)puVar1 = *(undefined2 *)puVar2;
    *(uint *)PTR_DMA_DPCR_800749b8 = *(uint *)PTR_DMA_DPCR_800749b8 & 0x77777777;
    ResetEntryInt();
    DAT_80073924 = 0;
    puVar3 = &DAT_80073924;
  }
  return puVar3;
}



undefined4 restartIntr(void)

{
  undefined4 uVar1;
  
  if (DAT_80073924 == 0) {
    HookEntryInt(&DAT_8007395c);
    DAT_80073924 = 1;
    *(undefined2 *)PTR_I_MASK_800749b4 = DAT_80073956;
    *(undefined4 *)PTR_DMA_DPCR_800749b8 = DAT_80073958;
    ExitCriticalSection();
    uVar1 = INTR_OBJ_6D0();
    return uVar1;
  }
  return 0;
}



void INTR_OBJ_6D0(void)

{
  return;
}



void memclr(undefined4 *param_1,int param_2)

{
  int iVar1;
  
  iVar1 = param_2 + -1;
  if (param_2 != 0) {
    do {
      *param_1 = 0;
      iVar1 = iVar1 + -1;
      param_1 = param_1 + 1;
    } while (iVar1 != -1);
  }
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void ReturnFromException(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void ResetEntryInt(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void HookEntryInt(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



code * startIntrVSync(void)

{
  *(undefined4 *)PTR_TMR_HRETRACE_MODE_800749e4 = 0x107;
  Vcount = 0;
  memclr(&DAT_800749c0,8);
  InterruptCallback(0,trapIntrVSync);
  return setIntrVSync;
}



void trapIntrVSync(void)

{
  code **ppcVar1;
  int iVar2;
  
  iVar2 = 0;
  ppcVar1 = (code **)&DAT_800749c0;
  Vcount = Vcount + 1;
  do {
    if (*ppcVar1 != (code *)0x0) {
      (**ppcVar1)();
    }
    iVar2 = iVar2 + 1;
    ppcVar1 = ppcVar1 + 1;
  } while (iVar2 < 8);
  return;
}



void setIntrVSync(int param_1,int param_2)

{
  if (param_2 != (&DAT_800749c0)[param_1]) {
    (&DAT_800749c0)[param_1] = param_2;
  }
  return;
}



void memclr(undefined4 *param_1,int param_2)

{
  int iVar1;
  
  iVar1 = param_2 + -1;
  if (param_2 != 0) {
    do {
      *param_1 = 0;
      iVar1 = iVar1 + -1;
      param_1 = param_1 + 1;
    } while (iVar1 != -1);
  }
  return;
}



code * startIntrDMA(void)

{
  memclr(&DAT_800749ec,8);
  *(undefined4 *)PTR_DMA_DICR_800749e8 = 0;
  InterruptCallback(3,trapIntrDMA);
  return setIntrDMA;
}



void trapIntrDMA(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  code **ppcVar4;
  
  uVar3 = *(uint *)PTR_DMA_DICR_800749e8 >> 0x18 & 0x7f;
  if (uVar3 != 0) {
    do {
      ppcVar4 = (code **)&DAT_800749ec;
      for (iVar1 = 0; (uVar3 != 0 && (iVar1 < 7)); iVar1 = iVar1 + 1) {
        if ((uVar3 & 1) != 0) {
          *(uint *)PTR_DMA_DICR_800749e8 =
               *(uint *)PTR_DMA_DICR_800749e8 & (1 << (iVar1 + 0x18U & 0x1f) | 0xffffffU);
          if (*ppcVar4 != (code *)0x0) {
            (**ppcVar4)();
          }
        }
        ppcVar4 = ppcVar4 + 1;
        uVar3 = uVar3 >> 1;
      }
      uVar3 = *(uint *)PTR_DMA_DICR_800749e8 >> 0x18 & 0x7f;
    } while (uVar3 != 0);
  }
  if (((*(uint *)PTR_DMA_DICR_800749e8 & 0xff000000) == 0x80000000) ||
     ((*(uint *)PTR_DMA_DICR_800749e8 & 0x8000) != 0)) {
    printf("DMA bus error: code=%08x\n",*(undefined4 *)PTR_DMA_DICR_800749e8);
    iVar1 = 0;
    do {
      iVar2 = iVar1 + 1;
      printf("MADR[%d]=%08x\n",iVar1,*(undefined4 *)(PTR_DMA_MDEC_IN_MADR_80074a0c + iVar1 * 0x10));
      iVar1 = iVar2;
    } while (iVar2 < 7);
  }
  return;
}



int setIntrDMA(int param_1,int param_2)

{
  undefined *puVar1;
  int *piVar2;
  int iVar3;
  
  puVar1 = PTR_DMA_DICR_800749e8;
  piVar2 = &DAT_800749ec + param_1;
  iVar3 = *piVar2;
  if (param_2 != iVar3) {
    if (param_2 != 0) {
      *piVar2 = param_2;
      *(uint *)puVar1 = *(uint *)puVar1 & 0xffffff | 1 << (param_1 + 0x10U & 0x1f) | 0x800000U;
      iVar3 = INTR_DMA_OBJ_274();
      return iVar3;
    }
    *piVar2 = 0;
    *(uint *)puVar1 = (*(uint *)puVar1 & 0xffffff | 0x800000) & ~(1 << (param_1 + 0x10U & 0x1f));
  }
  return iVar3;
}



undefined4 INTR_DMA_OBJ_274(void)

{
  undefined4 in_a3;
  
  return in_a3;
}



void memclr(undefined4 *param_1,int param_2)

{
  int iVar1;
  
  iVar1 = param_2 + -1;
  if (param_2 != 0) {
    do {
      *param_1 = 0;
      iVar1 = iVar1 + -1;
      param_1 = param_1 + 1;
    } while (iVar1 != -1);
  }
  return;
}



u_short_conflict LoadTPage(u_long *pix,int tp,int abr,int x,int y,int w,int h)

{
  u_short_conflict uVar1;
  RECT local_20;
  
  local_20.x = (short)x;
  local_20.h = (short)h;
  local_20.y = (short)y;
  if (tp == 1) {
    local_20.w = (short)(w / 2);
    uVar1 = EXT_OBJ_A8();
    return uVar1;
  }
  if (tp < 2) {
    if (tp != 0) {
      uVar1 = EXT_OBJ_AC();
      return uVar1;
    }
    if (w < 0) {
      w = w + 3;
    }
    local_20.w = (short)(w >> 2);
    uVar1 = EXT_OBJ_A8(&local_20);
    return uVar1;
  }
  if (tp != 2) {
    uVar1 = EXT_OBJ_AC(&local_20);
    return uVar1;
  }
  local_20.w = (short)w;
  LoadImage(&local_20,pix);
  uVar1 = GetTPage(2,abr,x,y);
  return uVar1;
}



u_short_conflict EXT_OBJ_A8(void)

{
  u_short_conflict uVar1;
  u_long *in_t0;
  int unaff_s0;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  
  LoadImage((RECT *)&stack0x00000010,in_t0);
  uVar1 = GetTPage(unaff_s0,unaff_s2,unaff_s1,unaff_s3);
  return uVar1;
}



u_short_conflict EXT_OBJ_AC(RECT *param_1)

{
  u_short_conflict uVar1;
  u_long *in_t0;
  int unaff_s0;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  
  LoadImage(param_1,in_t0);
  uVar1 = GetTPage(unaff_s0,unaff_s2,unaff_s1,unaff_s3);
  return uVar1;
}



u_short_conflict LoadClut(u_long *clut,int x,int y)

{
  u_short_conflict uVar1;
  RECT local_18;
  
  local_18.w = 0x100;
  local_18.x = (short)x;
  local_18.y = (short)y;
  local_18.h = 1;
  LoadImage(&local_18,clut);
  uVar1 = GetClut(x,y);
  return uVar1;
}



u_short_conflict LoadClut2(u_long *clut,int x,int y)

{
  u_short_conflict uVar1;
  RECT local_18;
  
  local_18.w = 0x10;
  local_18.x = (short)x;
  local_18.y = (short)y;
  local_18.h = 1;
  LoadImage(&local_18,clut);
  uVar1 = GetClut(x,y);
  return uVar1;
}



DRAWENV * SetDefDrawEnv(DRAWENV *env,int x,int y,int w,int h)

{
  int iVar1;
  DRAWENV *pDVar2;
  
  iVar1 = GetVideoMode();
  (env->clip).x = (short)x;
  (env->clip).y = (short)y;
  (env->clip).w = (short)w;
  (env->tw).x = 0;
  (env->tw).y = 0;
  (env->tw).w = 0;
  (env->tw).h = 0;
  env->r0 = '\0';
  env->g0 = '\0';
  env->b0 = '\0';
  env->dtd = '\x01';
  (env->clip).h = (short)h;
  if (iVar1 != 0) {
    pDVar2 = (DRAWENV *)EXT_OBJ_234();
    return pDVar2;
  }
  env->dfe = h < 0x101;
  env->ofs[0] = (short)x;
  env->ofs[1] = (short)y;
  env->tpage = 10;
  env->isbg = '\0';
  return env;
}



void EXT_OBJ_234(void)

{
  undefined in_v0;
  int unaff_s1;
  undefined2 unaff_s3;
  undefined2 unaff_s4;
  
  *(undefined *)(unaff_s1 + 0x17) = in_v0;
  *(undefined2 *)(unaff_s1 + 8) = unaff_s3;
  *(undefined2 *)(unaff_s1 + 10) = unaff_s4;
  *(undefined2 *)(unaff_s1 + 0x14) = 10;
  *(undefined *)(unaff_s1 + 0x18) = 0;
  return;
}



DISPENV * SetDefDispEnv(DISPENV *env,int x,int y,int w,int h)

{
  (env->disp).x = (short)x;
  (env->disp).y = (short)y;
  (env->disp).w = (short)w;
  (env->screen).x = 0;
  (env->screen).y = 0;
  (env->screen).w = 0;
  (env->screen).h = 0;
  env->isrgb24 = '\0';
  env->isinter = '\0';
  env->pad1 = '\0';
  env->pad0 = '\0';
  (env->disp).h = (short)h;
  return env;
}



// Possible VMODE.OBJ/SetVideoMode

undefined4 SetVideoMode(undefined4 param_1)

{
  undefined4 uVar1;
  
  uVar1 = DAT_80074a10;
  DAT_80074a10 = param_1;
  return uVar1;
}



// Possible GS_125.OBJ/GsGetWorkBase
// Possible VMODE.OBJ/GetVideoMode

undefined4 GetVideoMode(void)

{
  return DAT_80074a10;
}



u_short_conflict GetTPage(int tp,int abr,int x,int y)

{
  return (ushort)((tp & 3U) << 7) | (ushort)((abr & 3U) << 5) | (ushort)((int)(y & 0x100U) >> 4) |
         (ushort)((int)(x & 0x3ffU) >> 6) | (ushort)((y & 0x200U) << 2);
}



u_short_conflict GetClut(int x,int y)

{
  return (ushort)(y << 6) | (ushort)(x >> 4) & 0x3f;
}



void DumpTPage(u_short_conflict tpage)

{
  (*(code *)PTR_printf_80074a60)
            ("tpage: (%d,%d,%d,%d)\n",tpage >> 7 & 3,tpage >> 5 & 3,(tpage & 0x1f) << 6,
             (tpage & 0x10) * 0x10 + (tpage >> 2 & 0x200));
  return;
}



void DumpClut(u_short clut)

{
  (*(code *)PTR_printf_80074a60)("clut: (%d,%d)\n",(clut & 0x3f) << 4,clut >> 6);
  return;
}



void * NextPrim(void *p)

{
                    // WARNING: Load size is inaccurate
  return (void *)(*p & 0xffffff | 0x80000000);
}



int IsEndPrim(void *p)

{
                    // WARNING: Load size is inaccurate
  return (uint)((*p & 0xffffff) == 0xffffff);
}



void AddPrim(void *ot,void *p)

{
                    // WARNING: Load size is inaccurate
                    // WARNING: Load size is inaccurate
  *(uint *)p = *p & 0xff000000 | *ot & 0xffffff;
                    // WARNING: Load size is inaccurate
  *(uint *)ot = *ot & 0xff000000 | (uint)p & 0xffffff;
  return;
}



void AddPrims(void *ot,void *p0,void *p1)

{
                    // WARNING: Load size is inaccurate
                    // WARNING: Load size is inaccurate
  *(uint *)p1 = *p1 & 0xff000000 | *ot & 0xffffff;
                    // WARNING: Load size is inaccurate
  *(uint *)ot = *ot & 0xff000000 | (uint)p0 & 0xffffff;
  return;
}



void CatPrim(void *p0,void *p1)

{
                    // WARNING: Load size is inaccurate
  *(uint *)p0 = *p0 & 0xff000000 | (uint)p1 & 0xffffff;
  return;
}



void TermPrim(void *p)

{
                    // WARNING: Load size is inaccurate
  *(uint *)p = *p | 0xffffff;
  return;
}



void SetSemiTrans(void *p,int abe)

{
  if (abe != 0) {
    PRIM_OBJ_200();
    return;
  }
  *(byte *)((int)p + 7) = *(byte *)((int)p + 7) & 0xfd;
  return;
}



void PRIM_OBJ_200(int param_1)

{
  undefined in_v0;
  
  *(undefined *)(param_1 + 7) = in_v0;
  return;
}



void SetShadeTex(void *p,int tge)

{
  if (tge != 0) {
    PRIM_OBJ_228();
    return;
  }
  *(byte *)((int)p + 7) = *(byte *)((int)p + 7) & 0xfe;
  return;
}



void PRIM_OBJ_228(int param_1)

{
  undefined in_v0;
  
  *(undefined *)(param_1 + 7) = in_v0;
  return;
}



void SetPolyF3(POLY_F3 *p)

{
  *(undefined *)((int)&p->tag + 3) = 4;
  p->code = ' ';
  return;
}



void SetPolyFT3(POLY_FT3 *p)

{
  *(undefined *)((int)&p->tag + 3) = 7;
  p->code = '$';
  return;
}



void SetPolyG3(POLY_G3 *p)

{
  *(undefined *)((int)&p->tag + 3) = 6;
  p->code = '0';
  return;
}



void SetPolyGT3(POLY_GT3 *p)

{
  *(undefined *)((int)&p->tag + 3) = 9;
  p->code = '4';
  return;
}



void SetPolyF4(POLY_F4 *p)

{
  *(undefined *)((int)&p->tag + 3) = 5;
  p->code = '(';
  return;
}



void SetPolyFT4(POLY_FT4 *p)

{
  *(undefined *)((int)&p->tag + 3) = 9;
  p->code = ',';
  return;
}



void SetPolyG4(POLY_G4 *p)

{
  *(undefined *)((int)&p->tag + 3) = 8;
  p->code = '8';
  return;
}



void SetPolyGT4(POLY_GT4 *p)

{
  *(undefined *)((int)&p->tag + 3) = 0xc;
  p->code = '<';
  return;
}



void SetSprt8(SPRT_8 *p)

{
  *(undefined *)((int)&p->tag + 3) = 3;
  p->code = 't';
  return;
}



void SetSprt16(SPRT_16 *p)

{
  *(undefined *)((int)&p->tag + 3) = 3;
  p->code = '|';
  return;
}



void SetSprt(SPRT *p)

{
  *(undefined *)((int)&p->tag + 3) = 4;
  p->code = 'd';
  return;
}



void SetTile1(TILE_1 *p)

{
  *(undefined *)((int)&p->tag + 3) = 2;
  p->code = 'h';
  return;
}



void SetTile8(TILE_8 *p)

{
  *(undefined *)((int)&p->tag + 3) = 2;
  p->code = 'p';
  return;
}



void SetTile16(TILE_16 *p)

{
  *(undefined *)((int)&p->tag + 3) = 2;
  p->code = 'x';
  return;
}



void SetTile(TILE *p)

{
  *(undefined *)((int)&p->tag + 3) = 3;
  p->code = '`';
  return;
}



void SetLineF2(LINE_F2 *p)

{
  *(undefined *)((int)&p->tag + 3) = 3;
  p->code = '@';
  return;
}



void SetLineG2(LINE_G2 *p)

{
  *(undefined *)((int)&p->tag + 3) = 4;
  p->code = 'P';
  return;
}



void SetLineF3(LINE_F3 *p)

{
  *(undefined *)((int)&p->tag + 3) = 5;
  p->code = 'H';
  p->pad = 0x55555555;
  return;
}



void SetLineG3(LINE_G3 *p)

{
  *(undefined *)((int)&p->tag + 3) = 7;
  p->code = 'X';
  p->pad = 0x55555555;
  return;
}



void SetLineF4(LINE_F4 *p)

{
  *(undefined *)((int)&p->tag + 3) = 6;
  p->code = 'L';
  p->pad = 0x55555555;
  return;
}



void SetLineG4(LINE_G4 *p)

{
  *(undefined *)((int)&p->tag + 3) = 9;
  p->code = '\\';
  p->pad = 0x55555555;
  return;
}



void SetDrawTPage(DR_TPAGE *p,int dfe,int dtd,int tpage)

{
  uint uVar1;
  uint uVar2;
  
  *(undefined *)((int)&p->tag + 3) = 1;
  uVar2 = 0xe1000000;
  if (dtd != 0) {
    uVar2 = 0xe1000200;
  }
  uVar1 = tpage & 0x9ff;
  if (dfe != 0) {
    uVar1 = uVar1 | 0x400;
  }
  p->code[0] = uVar2 | uVar1;
  return;
}



void SetDrawMove(DR_MOVE *p,RECT *rect,int x,int y)

{
  undefined uVar1;
  u_long uVar2;
  
  uVar1 = 5;
  if ((rect->w == 0) || (rect->h == 0)) {
    uVar1 = 0;
  }
  p->code[0] = 0x1000000;
  p->code[1] = 0x80000000;
  *(undefined *)((int)&p->tag + 3) = uVar1;
  uVar2 = *(u_long *)rect;
  p->code[3] = y << 0x10 | x & 0xffffU;
  p->code[2] = uVar2;
  p->code[4] = *(u_long *)&rect->w;
  return;
}



void SetDrawLoad(DR_LOAD *p,RECT *rect)

{
  uint uVar1;
  int iVar2;
  
  uVar1 = ((int)rect->w * (int)rect->h + 1) / 2;
  iVar2 = uVar1 + 4;
  if (0xc < uVar1) {
    iVar2 = 0;
  }
  *(char *)((int)&p->tag + 3) = (char)iVar2;
  p->code[0] = 0xa0000000;
  p->code[1] = *(u_long_conflict *)rect;
  p->code[2] = *(u_long_conflict *)&rect->w;
  p->code[iVar2 + -1] = 0x1000000;
  return;
}



int MargePrim(void *p0,void *p1)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = (uint)*(byte *)((int)p0 + 3) + (uint)*(byte *)((int)p1 + 3) + 1;
  if (uVar2 < 0x11) {
    *(char *)((int)p0 + 3) = (char)uVar2;
    *(undefined4 *)p1 = 0;
    iVar1 = PRIM_OBJ_52C();
    return iVar1;
  }
  return -1;
}



void PRIM_OBJ_52C(void)

{
  return;
}



void DumpDrawEnv(DRAWENV *env)

{
  ushort uVar1;
  
  (*(code *)PTR_printf_80074a60)
            ("clip (%3d,%3d)-(%d,%d)\n",(int)(env->clip).x,(int)(env->clip).y,(int)(env->clip).w,
             (int)(env->clip).h);
  (*(code *)PTR_printf_80074a60)("ofs  (%3d,%3d)\n",(int)env->ofs[0],(int)env->ofs[1]);
  (*(code *)PTR_printf_80074a60)
            ("tw   (%d,%d)-(%d,%d)\n",(int)(env->tw).x,(int)(env->tw).y,(int)(env->tw).w,
             (int)(env->tw).h);
  (*(code *)PTR_printf_80074a60)("dtd   %d\n",env->dtd);
  (*(code *)PTR_printf_80074a60)("dfe   %d\n",env->dfe);
  uVar1 = env->tpage;
  (*(code *)PTR_printf_80074a60)
            ("tpage: (%d,%d,%d,%d)\n",uVar1 >> 7 & 3,uVar1 >> 5 & 3,(uVar1 & 0x1f) << 6,
             (uVar1 & 0x10) * 0x10 + (uVar1 >> 2 & 0x200));
  return;
}



void DumpDispEnv(DISPENV *env)

{
  (*(code *)PTR_printf_80074a60)
            ("disp   (%3d,%3d)-(%d,%d)\n",(int)(env->disp).x,(int)(env->disp).y,(int)(env->disp).w,
             (int)(env->disp).h);
  (*(code *)PTR_printf_80074a60)
            ("screen (%3d,%3d)-(%d,%d)\n",(int)(env->screen).x,(int)(env->screen).y,
             (int)(env->screen).w,(int)(env->screen).h);
  (*(code *)PTR_printf_80074a60)("isinter %d\n",env->isinter);
  (*(code *)PTR_printf_80074a60)("isrgb24 %d\n",env->isrgb24);
  return;
}



int ResetGraph(int mode)

{
  int iVar1;
  uint uVar2;
  
  uVar2 = mode & 7;
  if (uVar2 != 3) {
    if (3 < uVar2) {
      if (uVar2 != 5) {
        iVar1 = SYS_OBJ_11C();
        return iVar1;
      }
      goto SYS_OBJ_70;
    }
    if (uVar2 != 0) {
      iVar1 = SYS_OBJ_11C();
      return iVar1;
    }
  }
  printf("ResetGraph:jtb=%08x,env=%08x\n",&PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a1c,
         &DAT_80074a64);
SYS_OBJ_70:
  memset(&DAT_80074a64,'\0',0x80);
  ResetCallback();
  GPU_cw((uint)PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c & 0xffffff);
  DAT_80074a64 = _reset(mode);
  DAT_80074a65 = 1;
  DAT_80074a68 = (undefined2)*(undefined4 *)(&DAT_80074ae4 + (uint)DAT_80074a64 * 4);
  DAT_80074a6a = (undefined2)*(undefined4 *)(&DAT_80074af8 + (uint)DAT_80074a64 * 4);
  memset((uchar *)&DAT_80074a74,0xff,0x5c);
  memset((uchar *)&DAT_80074ad0,0xff,0x14);
  iVar1 = SYS_OBJ_16C();
  return iVar1;
}



void SYS_OBJ_11C(void)

{
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("ResetGraph(%d)...\n");
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x34))(1);
  return;
}



void SYS_OBJ_16C(void)

{
  return;
}



uint SetGraphReverse(undefined4 param_1)

{
  uint uVar1;
  undefined4 uVar2;
  uint uVar3;
  
  uVar3 = (uint)DAT_80074a67;
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("SetGraphReverse(%d)...\n",param_1);
  }
  DAT_80074a67 = (byte)param_1;
  uVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x28))(8);
  if (DAT_80074a67 != '\0') {
    uVar3 = SYS_OBJ_210();
    return uVar3;
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x10))(uVar1 | 0x8000000);
  if (DAT_80074a64 == '\x02') {
    uVar2 = 0x20000504;
    if (DAT_80074a67 != '\0') {
      uVar2 = 0x20000501;
    }
    (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x10))(uVar2);
  }
  return uVar3;
}



void SYS_OBJ_210(uint param_1)

{
  uint in_v0;
  undefined4 uVar1;
  
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x10))(param_1 | in_v0);
  if (DAT_80074a64 == '\x02') {
    uVar1 = 0x20000504;
    if (DAT_80074a67 != '\0') {
      uVar1 = 0x20000501;
    }
    (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x10))(uVar1);
  }
  return;
}



int SetGraphDebug(int level)

{
  uint uVar1;
  
  uVar1 = (uint)DAT_80074a66;
  DAT_80074a66 = (byte)level;
  if ((level & 0xffU) != 0) {
    (*(code *)PTR_printf_80074a60)
              ("SetGraphDebug:level:%d,type:%d reverse:%d\n",level & 0xffU,DAT_80074a64,DAT_80074a67
              );
  }
  return uVar1;
}



byte SetGraphQueue(uint param_1)

{
  byte bVar1;
  
  bVar1 = DAT_80074a65;
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("SetGrapQue(%d)...\n",param_1);
  }
  if (param_1 != DAT_80074a65) {
    (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x34))(1);
    DAT_80074a65 = (byte)param_1;
    DMACallback(2,0);
  }
  return bVar1;
}



undefined GetGraphType(void)

{
  return DAT_80074a64;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int GetGraphDebug(void)

{
  return (uint)DAT_80074a66;
}



u_long_conflict DrawSyncCallback(func *func)

{
  u_long_conflict uVar1;
  
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("DrawSyncCallback(%08x)...\n",func);
  }
  uVar1 = (u_long_conflict)DAT_80074a70;
  DAT_80074a70 = func;
  return uVar1;
}



void SetDispMask(int mask)

{
  undefined4 uVar1;
  
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("SetDispMask(%d)...\n",mask);
  }
  if (mask == 0) {
    memset((uchar *)&DAT_80074ad0,0xff,0x14);
  }
  uVar1 = 0x3000001;
  if (mask != 0) {
    uVar1 = 0x3000000;
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x10))(uVar1);
  return;
}



int DrawSync(int mode)

{
  int iVar1;
  
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("DrawSync(%d)...\n",mode);
  }
  iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x3c))(mode);
  return iVar1;
}



// Possible SYS.OBJ/checkRECT

void checkRECT(undefined4 param_1,short *param_2)

{
  int iVar1;
  int iVar2;
  
  if (DAT_80074a66 != '\x01') {
    if (DAT_80074a66 == '\x02') {
      (*(code *)PTR_printf_80074a60)(&DAT_80011898,param_1);
      (*(code *)PTR_printf_80074a60)
                ("(%d,%d)-(%d,%d)\n",(int)*param_2,(int)param_2[1],(int)param_2[2],(int)param_2[3]);
      return;
    }
    SYS_OBJ_640();
    return;
  }
  iVar2 = (int)param_2[2];
  if ((iVar2 <= DAT_80074a68) && (iVar2 + *param_2 <= (int)DAT_80074a68)) {
    iVar1 = (int)param_2[1];
    if (((iVar1 <= DAT_80074a6a) &&
        (((iVar1 + param_2[3] <= (int)DAT_80074a6a && (0 < iVar2)) && (-1 < *param_2)))) &&
       ((-1 < iVar1 && (0 < param_2[3])))) {
      return;
    }
  }
  SYS_OBJ_604("%s:bad RECT");
  return;
}



void SYS_OBJ_604(void)

{
  short *unaff_s0;
  
  (*(code *)PTR_printf_80074a60)();
  (*(code *)PTR_printf_80074a60)
            ("(%d,%d)-(%d,%d)\n",(int)*unaff_s0,(int)unaff_s0[1],(int)unaff_s0[2]);
  return;
}



void SYS_OBJ_640(void)

{
  return;
}



int ClearImage(RECT *rect,u_char r,u_char g,u_char b)

{
  int iVar1;
  
  checkRECT("ClearImage",rect);
  iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 8))
                    (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0xc),rect
                     ,8,(uint)b << 0x10 | (uint)g << 8 | (uint)r);
  return iVar1;
}



int ClearImage2(RECT *rect,u_char_conflict r,u_char_conflict g,u_char_conflict b)

{
  int iVar1;
  
  checkRECT("ClearImage",rect);
  iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 8))
                    (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0xc),rect
                     ,8,(uint)b << 0x10 | (uint)g << 8 | 0x80000000 | (uint)r);
  return iVar1;
}



// Possible SYS.OBJ/LoadImage

int LoadImage(RECT *rect,u_long *p)

{
  int iVar1;
  
  checkRECT("LoadImage",rect);
  iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 8))
                    (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x20),
                     rect,8,p);
  return iVar1;
}



int StoreImage(RECT *rect,u_long *p)

{
  int iVar1;
  
  checkRECT("StoreImage",rect);
  iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 8))
                    (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x1c),
                     rect,8,p);
  return iVar1;
}



int MoveImage(RECT *rect,int x,int y)

{
  int iVar1;
  
  checkRECT("MoveImage",rect);
  iVar1 = -1;
  if (rect->w != 0) {
    if (rect->h == 0) {
      iVar1 = SYS_OBJ_8F4();
      return iVar1;
    }
    DAT_80074b18 = y << 0x10 | x & 0xffffU;
    DAT_80074b14._0_2_ = rect->x;
    DAT_80074b14._2_2_ = rect->y;
    DAT_80074b1c._0_2_ = rect->w;
    DAT_80074b1c._2_2_ = rect->h;
    iVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 8))
                      (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x18),
                       &DAT_80074b0c,0x14,0);
  }
  return iVar1;
}



void SYS_OBJ_8F4(void)

{
  return;
}



u_long * ClearOTag(u_long *ot,int n)

{
  int iVar1;
  
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("ClearOTag(%08x,%d)...\n",ot,n);
  }
  for (iVar1 = n + -1; iVar1 != 0; iVar1 = iVar1 + -1) {
    *(undefined *)((int)ot + 3) = 0;
    *ot = *ot & 0xff000000 | (uint)(ot + 1) & 0xffffff;
    ot = ot + 1;
  }
  *ot = 0x74b20;
  return ot;
}



u_long * ClearOTagR(u_long *ot,int n)

{
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("ClearOTagR(%08x,%d)...\n",ot,n);
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x2c))(ot,n);
  *ot = 0x74b20;
  return ot;
}



void DrawPrim(void *p)

{
  undefined uVar1;
  
  uVar1 = *(undefined *)((int)p + 3);
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x3c))(0);
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x14))((int)p + 4,uVar1);
  return;
}



void DrawOTag(u_long *p)

{
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("DrawOTag(%08x)...\n",p);
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 8))
            (*(undefined4 *)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x18),p,0,0);
  return;
}



DRAWENV * PutDrawEnv(DRAWENV *env)

{
  undefined *puVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  DRAWENV *pDVar6;
  DRAWENV *pDVar7;
  undefined4 *puVar8;
  
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("PutDrawEnv(%08x)...\n",env);
  }
  SetDrawEnv2(&env->dr_env,env);
  puVar1 = PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c;
  (env->dr_env).tag = (env->dr_env).tag | 0xffffff;
  (**(code **)(puVar1 + 8))(*(undefined4 *)(puVar1 + 0x18),&env->dr_env,0x40,0);
  pDVar7 = env;
  puVar2 = &DAT_80074a74;
  do {
    puVar8 = puVar2;
    pDVar6 = pDVar7;
    uVar3 = *(undefined4 *)&(pDVar6->clip).w;
    uVar4 = *(undefined4 *)pDVar6->ofs;
    uVar5 = *(undefined4 *)&pDVar6->tw;
    *puVar8 = *(undefined4 *)&pDVar6->clip;
    puVar8[1] = uVar3;
    puVar8[2] = uVar4;
    puVar8[3] = uVar5;
    pDVar7 = (DRAWENV *)&(pDVar6->tw).w;
    puVar2 = puVar8 + 4;
  } while (pDVar7 != (DRAWENV *)((env->dr_env).code + 0xc));
  uVar3 = *(undefined4 *)&pDVar6->tpage;
  uVar4 = *(undefined4 *)&pDVar6->isbg;
  puVar8[4] = *(undefined4 *)pDVar7;
  puVar8[5] = uVar3;
  puVar8[6] = uVar4;
  return env;
}



void DrawOTagEnv(u_long *p,DRAWENV *env)

{
  undefined *puVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  DRAWENV *pDVar6;
  DRAWENV *pDVar7;
  undefined4 *puVar8;
  
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("DrawOTagEnv(%08x,&08x)...\n",p,env);
  }
  SetDrawEnv2(&env->dr_env,env);
  puVar1 = PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c;
  (env->dr_env).tag = (env->dr_env).tag & 0xff000000 | (uint)p & 0xffffff;
  (**(code **)(puVar1 + 8))(*(undefined4 *)(puVar1 + 0x18),&env->dr_env,0x40,0);
  pDVar7 = env;
  puVar2 = &DAT_80074a74;
  do {
    puVar8 = puVar2;
    pDVar6 = pDVar7;
    uVar3 = *(undefined4 *)&(pDVar6->clip).w;
    uVar4 = *(undefined4 *)pDVar6->ofs;
    uVar5 = *(undefined4 *)&pDVar6->tw;
    *puVar8 = *(undefined4 *)&pDVar6->clip;
    puVar8[1] = uVar3;
    puVar8[2] = uVar4;
    puVar8[3] = uVar5;
    pDVar7 = (DRAWENV *)&(pDVar6->tw).w;
    puVar2 = puVar8 + 4;
  } while (pDVar7 != (DRAWENV *)((env->dr_env).code + 0xc));
  uVar3 = *(undefined4 *)&pDVar6->tpage;
  uVar4 = *(undefined4 *)&pDVar6->isbg;
  puVar8[4] = *(undefined4 *)pDVar7;
  puVar8[5] = uVar3;
  puVar8[6] = uVar4;
  return;
}



DRAWENV * GetDrawEnv(DRAWENV *env)

{
  memcpy((uchar *)env,(uchar *)&DAT_80074a74,0x5c);
  return env;
}



// WARNING: Possible PIC construction at 0x800600b4: Changing call to branch
// WARNING: Possible PIC construction at 0x80060198: Changing call to branch
// WARNING: Possible PIC construction at 0x800601f0: Changing call to branch
// WARNING: Possible PIC construction at 0x80060268: Changing call to branch
// WARNING: Possible PIC construction at 0x800602cc: Changing call to branch
// WARNING: Possible PIC construction at 0x80060438: Changing call to branch
// WARNING: Possible PIC construction at 0x80060458: Changing call to branch
// WARNING: Possible PIC construction at 0x80060270: Changing call to branch
// WARNING: Removing unreachable block (ram,0x80060458)
// WARNING: Removing unreachable block (ram,0x80060438)
// WARNING: Removing unreachable block (ram,0x800602cc)
// WARNING: Removing unreachable block (ram,0x80060268)
// WARNING: Removing unreachable block (ram,0x800601f0)
// WARNING: Removing unreachable block (ram,0x80060198)
// WARNING: Removing unreachable block (ram,0x800600b4)
// WARNING: Removing unreachable block (ram,0x80060270)
// Possible SYS.OBJ/PutDispEnv

ushort * PutDispEnv(ushort *param_1)

{
  ushort uVar1;
  bool bVar2;
  char cVar3;
  uint uVar4;
  ushort *puVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  uint uVar12;
  
  uVar12 = 0x8000000;
  if (1 < DAT_80074a66) {
    (*(code *)PTR_printf_80074a60)("PutDispEnv(%08x)...\n",param_1);
  }
  if (DAT_80074a64 - 1 < 2) {
    uVar4 = get_dx(param_1);
    uVar6 = (param_1[1] & 0xfff) << 0xc | uVar4 & 0xfff;
    uVar4 = 0x5000000;
  }
  else {
    uVar4 = (param_1[1] & 0x3ff) << 10 | *param_1 & 0x3ff;
    uVar6 = 0x5000000;
  }
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x10))(uVar4 | uVar6);
  if ((((DAT_80074ad8 == param_1[4]) && (DAT_80074ada == param_1[5])) &&
      (DAT_80074adc == param_1[6])) && (DAT_80074ade == param_1[7])) goto SYS_OBJ_1090;
  cVar3 = GetVideoMode();
  *(char *)(param_1 + 9) = cVar3;
  iVar7 = (int)(short)param_1[5];
  uVar4 = (short)param_1[4] * 10 + 0x260;
  if (cVar3 == '\0') {
    uVar6 = iVar7 + 0x10;
  }
  else {
    uVar6 = iVar7 + 0x13;
  }
  iVar8 = (int)(short)param_1[6];
  if (iVar8 != 0) {
    puVar5 = (ushort *)func_0x800601c8(iVar7,iVar8,uVar4 + iVar8 * 10);
    return puVar5;
  }
  uVar10 = (short)param_1[4] * 10 + 0xc60;
  uVar11 = uVar6 + (int)(short)param_1[7];
  if ((short)param_1[7] == 0) {
    uVar11 = uVar6 + 0xf0;
  }
  if ((int)uVar4 < 500) {
    uVar9 = 500;
  }
  else {
    uVar9 = 0xcda;
    if ((int)uVar4 < 0xcdb) {
      uVar9 = uVar4;
    }
  }
  uVar4 = uVar9 + 0x50;
  if (((int)(uVar9 + 0x50) <= (int)uVar10) && (uVar4 = 0xcda, (int)uVar10 < 0xcdb)) {
    uVar4 = uVar10;
  }
  if ((int)uVar6 < 0x10) {
    uVar6 = 0x10;
  }
  else {
    if (*(char *)(param_1 + 9) == '\0') {
      if ((int)uVar6 < 0x101) goto SUB_8006027c;
    }
    else if ((int)uVar6 < 0x137) {
      puVar5 = (ushort *)func_0x8006027c(uVar6);
      return puVar5;
    }
    uVar6 = 0x100;
    if (*(char *)(param_1 + 9) != '\0') {
      uVar6 = 0x136;
    }
  }
SUB_8006027c:
  uVar10 = uVar6 + 2;
  if ((int)(uVar6 + 2) <= (int)uVar11) {
    if (*(char *)(param_1 + 9) == '\0') {
      uVar10 = uVar11;
      if ((int)uVar11 < 0x103) goto SUB_800602d8;
    }
    else if ((int)uVar11 < 0x139) {
      puVar5 = (ushort *)func_0x800602d8(uVar6,uVar11);
      return puVar5;
    }
    uVar10 = 0x102;
    if (*(char *)(param_1 + 9) != '\0') {
      uVar10 = 0x138;
    }
  }
SUB_800602d8:
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x10))
            ((uVar4 & 0xfff) << 0xc | uVar9 & 0xfff | 0x6000000);
  (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x10))
            ((uVar10 & 0x3ff) << 10 | uVar6 & 0x3ff | 0x7000000);
SYS_OBJ_1090:
  if (((DAT_80074ae0 != *(int *)(param_1 + 8)) || (DAT_80074ad0 != *param_1)) ||
     ((DAT_80074ad2 != param_1[1] || ((DAT_80074ad4 != param_1[2] || (DAT_80074ad6 != param_1[3]))))
     )) {
    cVar3 = GetVideoMode();
    *(char *)(param_1 + 9) = cVar3;
    if (cVar3 == '\x01') {
      uVar12 = 0x8000008;
    }
    if (*(char *)((int)param_1 + 0x11) != '\0') {
      uVar12 = uVar12 | 0x10;
    }
    if (*(char *)(param_1 + 8) != '\0') {
      uVar12 = uVar12 | 0x20;
    }
    if (DAT_80074a67 != '\0') {
      uVar12 = uVar12 | 0x80;
    }
    uVar1 = param_1[2];
    if (0x118 < (short)uVar1) {
      if ((short)uVar1 < 0x161) {
        uVar12 = uVar12 | 1;
      }
      else {
        if ((short)uVar1 < 0x191) {
          puVar5 = (ushort *)func_0x80060464();
          return puVar5;
        }
        if ((short)uVar1 < 0x231) {
          uVar12 = uVar12 | 2;
        }
        else {
          uVar12 = uVar12 | 3;
        }
      }
    }
    bVar2 = (short)param_1[3] < 0x121;
    if (*(char *)(param_1 + 9) == '\0') {
      bVar2 = (short)param_1[3] < 0x101;
    }
    if (!bVar2) {
      uVar12 = uVar12 | 0x24;
    }
    (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x10))(uVar12);
  }
  memcpy((uchar *)&DAT_80074ad0,(uchar *)param_1,0x14);
  return param_1;
}



DISPENV * GetDispEnv(DISPENV *env)

{
  memcpy((uchar *)env,(uchar *)&DAT_80074ad0,0x14);
  return env;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int GetODE(void)

{
  uint uVar1;
  
  uVar1 = (**(code **)(PTR_PTR_s__Id__sys_c_v_1_129_1996_12_25_03_80074a5c + 0x38))();
  return uVar1 >> 0x1f;
}



void SetTexWindow(DR_TWIN *p,RECT *tw)

{
  u_long_conflict uVar1;
  
  *(undefined *)((int)&p->tag + 3) = 2;
  uVar1 = get_tw(tw);
  p->code[0] = uVar1;
  p->code[1] = 0;
  return;
}



void SetDrawArea(DR_AREA *p,RECT *r)

{
  u_long_conflict uVar1;
  
  *(undefined *)((int)&p->tag + 3) = 2;
  uVar1 = get_cs((int)r->x,(int)r->y);
  p->code[0] = uVar1;
  uVar1 = get_ce((int)(((uint)(ushort)r->x + (uint)(ushort)r->w + -1) * 0x10000) >> 0x10,
                 (int)(((uint)(ushort)r->y + (uint)(ushort)r->h + -1) * 0x10000) >> 0x10);
  p->code[1] = uVar1;
  return;
}



void SetDrawOffset(DR_OFFSET *p,u_short_conflict *ofs)

{
  u_long_conflict uVar1;
  
  *(undefined *)((int)&p->tag + 3) = 2;
  uVar1 = get_ofs((int)(short)*ofs,(int)(short)ofs[1]);
  p->code[0] = uVar1;
  p->code[1] = 0;
  return;
}



void SetPriority(int param_1,int param_2,int param_3)

{
  uint uVar1;
  
  *(undefined *)(param_1 + 3) = 2;
  uVar1 = 0xe6000000;
  if (param_2 != 0) {
    uVar1 = 0xe6000002;
  }
  if (param_3 != 0) {
    uVar1 = uVar1 | 1;
  }
  *(uint *)(param_1 + 4) = uVar1;
  *(undefined4 *)(param_1 + 8) = 0;
  return;
}



// Possible SYS.OBJ/SetDrawMode

void SetDrawMode(DR_MODE *p,int dfe,int dtd,int tpage,RECT *tw)

{
  u_long_conflict uVar1;
  
  *(undefined *)((int)&p->tag + 3) = 2;
  uVar1 = get_mode(dfe,dtd,tpage & 0xffff);
  p->code[0] = uVar1;
  uVar1 = get_tw(tw);
  p->code[1] = uVar1;
  return;
}



void SetDrawEnv(DR_ENV_conflict *dr_env,DRAWENV *env)

{
  short sVar1;
  short sVar2;
  u_long uVar3;
  int iVar4;
  char cVar5;
  u_long local_30;
  u_long local_2c;
  
  uVar3 = get_cs((int)(env->clip).x,(int)(env->clip).y);
  dr_env->code[0] = uVar3;
  uVar3 = get_ce((int)(((uint)(ushort)(env->clip).w + (uint)(ushort)(env->clip).x + -1) * 0x10000)
                 >> 0x10,(int)(((uint)(ushort)(env->clip).y + (uint)(ushort)(env->clip).h + -1) *
                              0x10000) >> 0x10);
  dr_env->code[1] = uVar3;
  uVar3 = get_ofs((int)env->ofs[0],(int)env->ofs[1]);
  dr_env->code[2] = uVar3;
  uVar3 = get_mode(env->dfe,env->dtd,env->tpage);
  dr_env->code[3] = uVar3;
  uVar3 = get_tw(&env->tw);
  dr_env->code[4] = uVar3;
  dr_env->code[5] = 0xe6000000;
  cVar5 = '\a';
  if (env->isbg != '\0') {
    sVar2 = (env->clip).w;
    sVar1 = 0;
    if ((-1 < sVar2) && (sVar1 = DAT_80074a68 + -1, (int)sVar2 <= DAT_80074a68 + -1)) {
      sVar1 = sVar2;
    }
    iVar4 = (int)(env->clip).h;
    if (iVar4 < 0) {
      sVar2 = 0;
    }
    else {
      sVar2 = DAT_80074a6a + -1;
      if (iVar4 <= DAT_80074a6a + -1) {
        SYS_OBJ_1578(iVar4);
        return;
      }
    }
    local_2c = CONCAT22(sVar2,sVar1);
    local_30 = CONCAT22((env->clip).y - env->ofs[1],(env->clip).x - env->ofs[0]);
    dr_env->code[6] = (uint)env->b0 << 0x10 | (uint)env->g0 << 8 | 0x60000000 | (uint)env->r0;
    dr_env->code[7] = local_30;
    dr_env->code[8] = local_2c;
    cVar5 = '\n';
  }
  *(char *)((int)&dr_env->tag + 3) = cVar5 + -1;
  return;
}



void SYS_OBJ_1578(void)

{
  undefined2 in_v0;
  int in_a3;
  int unaff_s0;
  int unaff_s1;
  short param_5;
  short sStack00000012;
  undefined2 param_6;
  
  _param_6 = CONCAT22(in_v0,param_6);
  _param_5 = CONCAT22(sStack00000012 - *(short *)(unaff_s0 + 10),param_5 - *(short *)(unaff_s0 + 8))
  ;
  *(uint *)(in_a3 * 4 + unaff_s1) =
       (uint)*(byte *)(unaff_s0 + 0x1b) << 0x10 | (uint)*(byte *)(unaff_s0 + 0x1a) << 8 | 0x60000000
       | (uint)*(byte *)(unaff_s0 + 0x19);
  *(undefined4 *)((in_a3 + 1) * 4 + unaff_s1) = _param_5;
  *(undefined4 *)((in_a3 + 2) * 4 + unaff_s1) = _param_6;
  *(char *)(unaff_s1 + 3) = (char)in_a3 + '\x02';
  return;
}



void SetDrawEnv2(int param_1,undefined4 *param_2)

{
  ushort uVar1;
  ushort uVar2;
  short sVar3;
  undefined4 uVar4;
  int iVar5;
  char cVar6;
  undefined4 local_30;
  undefined4 local_2c;
  
  uVar4 = get_cs((int)(short)*(ushort *)param_2,(int)(short)*(ushort *)((int)param_2 + 2));
  *(undefined4 *)(param_1 + 4) = uVar4;
  uVar4 = get_ce((int)(((uint)*(ushort *)(param_2 + 1) + (uint)*(ushort *)param_2 + -1) * 0x10000)
                 >> 0x10,(int)(((uint)*(ushort *)((int)param_2 + 2) +
                                (uint)*(ushort *)((int)param_2 + 6) + -1) * 0x10000) >> 0x10);
  *(undefined4 *)(param_1 + 8) = uVar4;
  uVar4 = get_ofs((int)(short)*(ushort *)(param_2 + 2),(int)(short)*(ushort *)((int)param_2 + 10));
  *(undefined4 *)(param_1 + 0xc) = uVar4;
  uVar4 = get_mode(*(undefined *)((int)param_2 + 0x17),*(undefined *)((int)param_2 + 0x16),
                   *(ushort *)(param_2 + 5));
  *(undefined4 *)(param_1 + 0x10) = uVar4;
  uVar4 = get_tw(param_2 + 3);
  *(undefined4 *)(param_1 + 0x14) = uVar4;
  *(undefined4 *)(param_1 + 0x18) = 0xe6000000;
  cVar6 = '\a';
  if (*(char *)(param_2 + 6) != '\0') {
    uVar4 = *param_2;
    uVar1 = *(ushort *)(param_2 + 1);
    uVar2 = 0;
    if ((-1 < (short)uVar1) && (uVar2 = DAT_80074a68 - 1, (int)(short)uVar1 <= DAT_80074a68 + -1)) {
      uVar2 = uVar1;
    }
    iVar5 = (int)(short)*(ushort *)((int)param_2 + 6);
    if (iVar5 < 0) {
      sVar3 = 0;
    }
    else {
      sVar3 = DAT_80074a6a + -1;
      if (iVar5 <= DAT_80074a6a + -1) {
        SYS_OBJ_1790(iVar5);
        return;
      }
    }
    local_2c = CONCAT22(sVar3,uVar2);
    if (((*(ushort *)param_2 & 0x3f) != 0) || ((uVar2 & 0x3f) != 0)) {
      local_30 = CONCAT22(*(ushort *)((int)param_2 + 2) - *(ushort *)((int)param_2 + 10),
                          *(ushort *)param_2 - *(ushort *)(param_2 + 2));
      *(uint *)(param_1 + 0x1c) =
           (uint)*(byte *)((int)param_2 + 0x1b) << 0x10 |
           (uint)*(byte *)((int)param_2 + 0x1a) << 8 | 0x60000000 |
           (uint)*(byte *)((int)param_2 + 0x19);
      *(undefined4 *)(param_1 + 0x20) = local_30;
      *(undefined4 *)(param_1 + 0x24) = local_2c;
      SYS_OBJ_18AC();
      return;
    }
    cVar6 = '\n';
    *(uint *)(param_1 + 0x1c) =
         (uint)*(byte *)((int)param_2 + 0x1b) << 0x10 |
         (uint)*(byte *)((int)param_2 + 0x1a) << 8 | 0x2000000 |
         (uint)*(byte *)((int)param_2 + 0x19);
    *(undefined4 *)(param_1 + 0x20) = uVar4;
    *(undefined4 *)(param_1 + 0x24) = local_2c;
  }
  *(char *)(param_1 + 3) = cVar6 + -1;
  return;
}



void SYS_OBJ_1790(void)

{
  undefined2 in_v0;
  int in_t0;
  int unaff_s0;
  int unaff_s1;
  short param_5;
  short sStack00000012;
  ushort param_6;
  
  _param_6 = CONCAT22(in_v0,param_6);
  if (((_param_5 & 0x3f) == 0) && ((param_6 & 0x3f) == 0)) {
    *(uint *)(in_t0 * 4 + unaff_s1) =
         (uint)*(byte *)(unaff_s0 + 0x1b) << 0x10 |
         (uint)*(byte *)(unaff_s0 + 0x1a) << 8 | 0x2000000 | (uint)*(byte *)(unaff_s0 + 0x19);
    *(uint *)((in_t0 + 1) * 4 + unaff_s1) = _param_5;
    *(undefined4 *)((in_t0 + 2) * 4 + unaff_s1) = _param_6;
    *(char *)(unaff_s1 + 3) = (char)in_t0 + '\x02';
    return;
  }
  _param_5 = CONCAT22(sStack00000012 - *(short *)(unaff_s0 + 10),param_5 - *(short *)(unaff_s0 + 8))
  ;
  *(uint *)(in_t0 * 4 + unaff_s1) =
       (uint)*(byte *)(unaff_s0 + 0x1b) << 0x10 | (uint)*(byte *)(unaff_s0 + 0x1a) << 8 | 0x60000000
       | (uint)*(byte *)(unaff_s0 + 0x19);
  *(uint *)((in_t0 + 1) * 4 + unaff_s1) = _param_5;
  *(undefined4 *)((in_t0 + 2) * 4 + unaff_s1) = _param_6;
  SYS_OBJ_18AC();
  return;
}



void SYS_OBJ_18AC(void)

{
  char in_t0;
  int unaff_s1;
  
  *(char *)(unaff_s1 + 3) = in_t0 + -1;
  return;
}



// Possible SYS.OBJ/get_mode

uint get_mode(int param_1,int param_2,uint param_3)

{
  uint uVar1;
  
  if (DAT_80074a64 - 1 < 2) {
    uVar1 = 0xe1000000;
    if (param_2 != 0) {
      uVar1 = 0xe1000800;
    }
    param_3 = param_3 & 0x27ff;
    if (param_1 != 0) {
      uVar1 = SYS_OBJ_191C();
      return uVar1;
    }
  }
  else {
    uVar1 = 0xe1000000;
    if (param_2 != 0) {
      uVar1 = 0xe1000200;
    }
    param_3 = param_3 & 0x9ff;
    if (param_1 != 0) {
      param_3 = param_3 | 0x400;
    }
  }
  return uVar1 | param_3;
}



uint SYS_OBJ_191C(void)

{
  uint in_v0;
  uint in_v1;
  
  return in_v1 | in_v0;
}



uint get_cs(short param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  
  if (param_1 < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = (int)DAT_80074a68 - 1;
    if ((int)param_1 <= DAT_80074a68 + -1) {
      uVar1 = SYS_OBJ_1964();
      return uVar1;
    }
  }
  if ((short)param_2 < 0) {
    param_2 = 0;
  }
  else {
    iVar2 = (int)DAT_80074a6a;
    if (iVar2 + -1 < (int)(short)param_2) {
      uVar1 = SYS_OBJ_19A4(iVar2,iVar2 + -1);
      return uVar1;
    }
  }
  if (1 < DAT_80074a64 - 1) {
    uVar1 = SYS_OBJ_19D8();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | uVar1 & 0xfff | 0xe3000000;
}



uint SYS_OBJ_1964(undefined4 param_1,uint param_2)

{
  uint in_v0;
  int iVar1;
  uint uVar2;
  
  if ((short)param_2 < 0) {
    param_2 = 0;
  }
  else {
    iVar1 = (int)DAT_80074a6a;
    if (iVar1 + -1 < (int)(short)param_2) {
      uVar2 = SYS_OBJ_19A4(iVar1,iVar1 + -1);
      return uVar2;
    }
  }
  if (1 < DAT_80074a64 - 1) {
    uVar2 = SYS_OBJ_19D8();
    return uVar2;
  }
  return (param_2 & 0xfff) << 0xc | in_v0 & 0xfff | 0xe3000000;
}



uint SYS_OBJ_19A4(undefined4 param_1,uint param_2,undefined4 param_3,uint param_4)

{
  uint uVar1;
  
  if (1 < DAT_80074a64 - 1) {
    uVar1 = SYS_OBJ_19D8();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | param_4 & 0xfff | 0xe3000000;
}



uint SYS_OBJ_19D8(void)

{
  uint in_v0;
  uint in_v1;
  
  return in_v1 | in_v0 | 0xe3000000;
}



uint get_ce(short param_1,uint param_2)

{
  uint uVar1;
  int iVar2;
  
  if (param_1 < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = (int)DAT_80074a68 - 1;
    if ((int)param_1 <= DAT_80074a68 + -1) {
      uVar1 = SYS_OBJ_1A30();
      return uVar1;
    }
  }
  if ((short)param_2 < 0) {
    param_2 = 0;
  }
  else {
    iVar2 = (int)DAT_80074a6a;
    if (iVar2 + -1 < (int)(short)param_2) {
      uVar1 = SYS_OBJ_1A70(iVar2,iVar2 + -1);
      return uVar1;
    }
  }
  if (1 < DAT_80074a64 - 1) {
    uVar1 = SYS_OBJ_1AA4();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | uVar1 & 0xfff | 0xe4000000;
}



uint SYS_OBJ_1A30(undefined4 param_1,uint param_2)

{
  uint in_v0;
  int iVar1;
  uint uVar2;
  
  if ((short)param_2 < 0) {
    param_2 = 0;
  }
  else {
    iVar1 = (int)DAT_80074a6a;
    if (iVar1 + -1 < (int)(short)param_2) {
      uVar2 = SYS_OBJ_1A70(iVar1,iVar1 + -1);
      return uVar2;
    }
  }
  if (1 < DAT_80074a64 - 1) {
    uVar2 = SYS_OBJ_1AA4();
    return uVar2;
  }
  return (param_2 & 0xfff) << 0xc | in_v0 & 0xfff | 0xe4000000;
}



uint SYS_OBJ_1A70(undefined4 param_1,uint param_2,undefined4 param_3,uint param_4)

{
  uint uVar1;
  
  if (1 < DAT_80074a64 - 1) {
    uVar1 = SYS_OBJ_1AA4();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | param_4 & 0xfff | 0xe4000000;
}



uint SYS_OBJ_1AA4(void)

{
  uint in_v0;
  uint in_v1;
  
  return in_v1 | in_v0 | 0xe4000000;
}



uint get_ofs(uint param_1,uint param_2)

{
  uint uVar1;
  
  if (1 < DAT_80074a64 - 1) {
    uVar1 = SYS_OBJ_1AF0();
    return uVar1;
  }
  return (param_2 & 0xfff) << 0xc | param_1 & 0xfff | 0xe5000000;
}



uint SYS_OBJ_1AF0(void)

{
  uint in_v0;
  uint in_v1;
  
  return in_v1 | in_v0 | 0xe5000000;
}



uint get_tw(byte *param_1)

{
  uint uVar1;
  
  if (param_1 == (byte *)0x0) {
    uVar1 = SYS_OBJ_1B78();
    return uVar1;
  }
  return (uint)(param_1[2] >> 3) << 0xf | (uint)(*param_1 >> 3) << 10 | 0xe2000000 |
         ((int)(-(int)*(short *)(param_1 + 6) & 0xffU) >> 3) << 5 |
         (int)(-(int)*(short *)(param_1 + 4) & 0xffU) >> 3;
}



void SYS_OBJ_1B78(void)

{
  return;
}



int get_dx(short *param_1)

{
  int iVar1;
  
  if (DAT_80074a64 == '\x01') {
    if (DAT_80074a67 != '\0') {
      iVar1 = SYS_OBJ_1C2C((int)*param_1);
      return iVar1;
    }
    return (int)*param_1;
  }
  if (DAT_80074a64 != '\x02') {
    iVar1 = SYS_OBJ_1C28();
    return iVar1;
  }
  if (DAT_80074a67 != '\0') {
    iVar1 = SYS_OBJ_1BC4((int)*param_1);
    return iVar1;
  }
  iVar1 = SYS_OBJ_1C2C();
  return iVar1;
}



void SYS_OBJ_1BC4(void)

{
  SYS_OBJ_1C2C();
  return;
}



int SYS_OBJ_1C28(short *param_1)

{
  return (int)*param_1;
}



void SYS_OBJ_1C2C(void)

{
  return;
}



undefined4 _status(void)

{
  return *(undefined4 *)PTR_GPU_REG1_80074b38;
}



int _otc(int param_1,int param_2)

{
  uint uVar1;
  int iVar2;
  
  *(uint *)PTR_DMA_DPCR_80074b54 = *(uint *)PTR_DMA_DPCR_80074b54 | 0x8000000;
  *(undefined4 *)PTR_DMA_OTC_CHCR_80074b50 = 0;
  *(int *)PTR_DMA_OTC_MADR_80074b48 = param_1 + param_2 * 4 + -4;
  *(int *)PTR_DMA_OTC_BCR_80074b4c = param_2;
  *(undefined4 *)PTR_DMA_OTC_CHCR_80074b50 = 0x11000002;
  set_alarm();
  uVar1 = *(uint *)PTR_DMA_OTC_CHCR_80074b50;
  while( true ) {
    if ((uVar1 & 0x1000000) == 0) {
      return param_2;
    }
    iVar2 = get_alarm();
    if (iVar2 != 0) break;
    uVar1 = *(uint *)PTR_DMA_OTC_CHCR_80074b50;
  }
  return -1;
}



undefined4 _clr(undefined4 *param_1,uint param_2)

{
  ushort uVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  
  iVar4 = (int)(short)*(ushort *)(param_1 + 1);
  if (iVar4 < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = DAT_80074a68 - 1;
    if (iVar4 <= DAT_80074a68 + -1) {
      uVar2 = SYS_OBJ_1D84(iVar4,iVar4);
      return uVar2;
    }
  }
  iVar4 = (int)(short)*(ushort *)((int)param_1 + 6);
  *(ushort *)(param_1 + 1) = uVar1;
  if (iVar4 < 0) {
    uVar1 = 0;
  }
  else {
    uVar1 = DAT_80074a6a - 1;
    if (iVar4 <= DAT_80074a6a + -1) {
      uVar2 = SYS_OBJ_1DC0(iVar4);
      return uVar2;
    }
  }
  *(ushort *)((int)param_1 + 6) = uVar1;
  if (((*(ushort *)param_1 & 0x3f) == 0) && ((*(ushort *)(param_1 + 1) & 0x3f) == 0)) {
    DAT_80075978 = 0x5ffffff;
    DAT_8007597c = 0xe6000000;
    DAT_80075984 = param_2 & 0xffffff | 0x2000000;
    DAT_80075980 = *(uint *)PTR_GPU_REG1_80074b38 & 0x7ff | (param_2 >> 0x1f) << 10 | 0xe1000000;
    DAT_80075988 = *param_1;
    DAT_8007598c = param_1[1];
    _cwc(&DAT_80075978);
    return 0;
  }
  DAT_80075978 = 0x807599c;
  DAT_80075990 = param_2 & 0xffffff | 0x60000000;
  DAT_80075988 = 0xe6000000;
  DAT_8007597c = 0xe3000000;
  DAT_80075980 = 0xe4ffffff;
  DAT_80075984 = 0xe5000000;
  DAT_8007598c = *(uint *)PTR_GPU_REG1_80074b38 & 0x7ff | (param_2 >> 0x1f) << 10 | 0xe1000000;
  DAT_80075994 = *param_1;
  DAT_80075998 = param_1[1];
  DAT_8007599c = 0x3ffffff;
  uVar3 = _param(3);
  DAT_800759a0 = uVar3 | 0xe3000000;
  uVar3 = _param(4);
  DAT_800759a4 = uVar3 | 0xe4000000;
  uVar3 = _param(5);
  DAT_800759a8 = uVar3 | 0xe5000000;
  uVar2 = SYS_OBJ_1F64();
  return uVar2;
}



undefined4 SYS_OBJ_1D84(void)

{
  ushort in_v0;
  undefined4 uVar1;
  uint uVar2;
  ushort uVar3;
  int iVar4;
  undefined4 *in_t0;
  uint in_t1;
  
  iVar4 = (int)(short)*(ushort *)((int)in_t0 + 6);
  *(ushort *)(in_t0 + 1) = in_v0;
  if (iVar4 < 0) {
    uVar3 = 0;
  }
  else {
    uVar3 = DAT_80074a6a - 1;
    if (iVar4 <= DAT_80074a6a + -1) {
      uVar1 = SYS_OBJ_1DC0(iVar4);
      return uVar1;
    }
  }
  *(ushort *)((int)in_t0 + 6) = uVar3;
  if (((*(ushort *)in_t0 & 0x3f) == 0) && ((*(ushort *)(in_t0 + 1) & 0x3f) == 0)) {
    DAT_80075978 = 0x5ffffff;
    DAT_8007597c = 0xe6000000;
    DAT_80075984 = in_t1 & 0xffffff | 0x2000000;
    DAT_80075980 = *(uint *)PTR_GPU_REG1_80074b38 & 0x7ff | (in_t1 >> 0x1f) << 10 | 0xe1000000;
    DAT_80075988 = *in_t0;
    DAT_8007598c = in_t0[1];
    _cwc(&DAT_80075978);
    return 0;
  }
  DAT_80075978 = 0x807599c;
  DAT_80075990 = in_t1 & 0xffffff | 0x60000000;
  DAT_80075988 = 0xe6000000;
  DAT_8007597c = 0xe3000000;
  DAT_80075980 = 0xe4ffffff;
  DAT_80075984 = 0xe5000000;
  DAT_8007598c = *(uint *)PTR_GPU_REG1_80074b38 & 0x7ff | (in_t1 >> 0x1f) << 10 | 0xe1000000;
  DAT_80075994 = *in_t0;
  DAT_80075998 = in_t0[1];
  DAT_8007599c = 0x3ffffff;
  uVar2 = _param(3);
  DAT_800759a0 = uVar2 | 0xe3000000;
  uVar2 = _param(4);
  DAT_800759a4 = uVar2 | 0xe4000000;
  uVar2 = _param(5);
  DAT_800759a8 = uVar2 | 0xe5000000;
  uVar1 = SYS_OBJ_1F64();
  return uVar1;
}



undefined4 SYS_OBJ_1DC0(void)

{
  uint uVar1;
  undefined4 uVar2;
  ushort in_v1;
  undefined4 *in_t0;
  uint in_t1;
  
  *(ushort *)((int)in_t0 + 6) = in_v1;
  if (((*(ushort *)in_t0 & 0x3f) == 0) && ((*(ushort *)(in_t0 + 1) & 0x3f) == 0)) {
    DAT_80075978 = 0x5ffffff;
    DAT_8007597c = 0xe6000000;
    DAT_80075984 = in_t1 & 0xffffff | 0x2000000;
    DAT_80075980 = *(uint *)PTR_GPU_REG1_80074b38 & 0x7ff | (in_t1 >> 0x1f) << 10 | 0xe1000000;
    DAT_80075988 = *in_t0;
    DAT_8007598c = in_t0[1];
    _cwc(&DAT_80075978);
    return 0;
  }
  DAT_80075978 = 0x807599c;
  DAT_80075990 = in_t1 & 0xffffff | 0x60000000;
  DAT_80075988 = 0xe6000000;
  DAT_8007597c = 0xe3000000;
  DAT_80075980 = 0xe4ffffff;
  DAT_80075984 = 0xe5000000;
  DAT_8007598c = *(uint *)PTR_GPU_REG1_80074b38 & 0x7ff | (in_t1 >> 0x1f) << 10 | 0xe1000000;
  DAT_80075994 = *in_t0;
  DAT_80075998 = in_t0[1];
  DAT_8007599c = 0x3ffffff;
  uVar1 = _param(3);
  DAT_800759a0 = uVar1 | 0xe3000000;
  uVar1 = _param(4);
  DAT_800759a4 = uVar1 | 0xe4000000;
  uVar1 = _param(5);
  DAT_800759a8 = uVar1 | 0xe5000000;
  uVar2 = SYS_OBJ_1F64();
  return uVar2;
}



undefined4 SYS_OBJ_1F64(void)

{
  _cwc(&DAT_80075978);
  return 0;
}



// WARNING: Removing unreachable block (ram,0x80061398)

undefined4 _dws(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  
  set_alarm();
  sVar5 = *(short *)(param_1 + 1);
  if (sVar5 < 0) {
    sVar5 = 0;
  }
  else if ((int)DAT_80074a68 < (int)sVar5) {
    uVar1 = SYS_OBJ_1FF4((int)DAT_80074a68);
    return uVar1;
  }
  sVar6 = *(short *)((int)param_1 + 6);
  iVar7 = (int)sVar6;
  *(short *)(param_1 + 1) = sVar5;
  if (iVar7 < 0) {
    sVar6 = 0;
    iVar2 = 0;
  }
  else {
    iVar2 = iVar7 << 0x10;
    if (DAT_80074a6a < iVar7) {
      uVar1 = SYS_OBJ_202C((int)DAT_80074a6a);
      return uVar1;
    }
  }
  *(short *)((int)param_1 + 6) = sVar6;
  iVar7 = (int)*(short *)(param_1 + 1) * (iVar2 >> 0x10) + 1;
  iVar2 = iVar7 - (iVar7 >> 0x1f) >> 5;
  if (0 < iVar7 / 2) {
    iVar7 = iVar7 / 2 + iVar2 * -0x10;
    uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    while( true ) {
      if ((uVar3 & 0x4000000) != 0) {
        *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000000;
        *(undefined4 *)PTR_GPU_REG0_80074b34 = 0x1000000;
        *(undefined4 *)PTR_GPU_REG0_80074b34 = 0xa0000000;
        *(undefined4 *)PTR_GPU_REG0_80074b34 = *param_1;
        *(undefined4 *)PTR_GPU_REG0_80074b34 = param_1[1];
        while (iVar7 = iVar7 + -1, iVar7 != -1) {
          uVar1 = *param_2;
          param_2 = param_2 + 1;
          *(undefined4 *)PTR_GPU_REG0_80074b34 = uVar1;
        }
        if (iVar2 != 0) {
          *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000002;
          *(undefined4 **)PTR_DMA_GPU_MADR_80074b3c = param_2;
          *(uint *)PTR_DMA_GPU_BCR_80074b40 = iVar2 << 0x10 | 0x10;
          *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x1000201;
        }
        return 0;
      }
      iVar4 = get_alarm();
      if (iVar4 != 0) break;
      uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    }
    return 0xffffffff;
  }
  uVar1 = SYS_OBJ_21A4();
  return uVar1;
}



undefined4 SYS_OBJ_1FF4(void)

{
  int iVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  undefined2 in_v1;
  short sVar5;
  int iVar6;
  undefined4 *unaff_s1;
  undefined4 *unaff_s2;
  int unaff_s5;
  
  sVar5 = *(short *)((int)unaff_s1 + 6);
  iVar6 = (int)sVar5;
  *(undefined2 *)(unaff_s1 + 1) = in_v1;
  if (iVar6 < 0) {
    sVar5 = 0;
    iVar1 = 0;
  }
  else {
    iVar1 = iVar6 << 0x10;
    if (DAT_80074a6a < iVar6) {
      uVar2 = SYS_OBJ_202C((int)DAT_80074a6a);
      return uVar2;
    }
  }
  *(short *)((int)unaff_s1 + 6) = sVar5;
  iVar6 = (int)*(short *)(unaff_s1 + 1) * (iVar1 >> 0x10) + 1;
  iVar1 = iVar6 - (iVar6 >> 0x1f) >> 5;
  if (0 < iVar6 / 2) {
    iVar6 = iVar6 / 2 + iVar1 * -0x10;
    uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    while( true ) {
      if ((uVar3 & 0x4000000) != 0) {
        uVar2 = 0xa0000000;
        *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000000;
        *(undefined4 *)PTR_GPU_REG0_80074b34 = 0x1000000;
        if (unaff_s5 != 0) {
          uVar2 = 0xb0000000;
        }
        *(undefined4 *)PTR_GPU_REG0_80074b34 = uVar2;
        *(undefined4 *)PTR_GPU_REG0_80074b34 = *unaff_s1;
        *(undefined4 *)PTR_GPU_REG0_80074b34 = unaff_s1[1];
        while (iVar6 = iVar6 + -1, iVar6 != -1) {
          uVar2 = *unaff_s2;
          unaff_s2 = unaff_s2 + 1;
          *(undefined4 *)PTR_GPU_REG0_80074b34 = uVar2;
        }
        if (iVar1 != 0) {
          *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000002;
          *(undefined4 **)PTR_DMA_GPU_MADR_80074b3c = unaff_s2;
          *(uint *)PTR_DMA_GPU_BCR_80074b40 = iVar1 << 0x10 | 0x10;
          *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x1000201;
        }
        return 0;
      }
      iVar4 = get_alarm();
      if (iVar4 != 0) break;
      uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    }
    return 0xffffffff;
  }
  uVar2 = SYS_OBJ_21A4();
  return uVar2;
}



undefined4 SYS_OBJ_202C(short param_1)

{
  undefined4 uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  undefined4 *unaff_s1;
  undefined4 *unaff_s2;
  int unaff_s5;
  
  *(short *)((int)unaff_s1 + 6) = param_1;
  iVar4 = (int)*(short *)(unaff_s1 + 1) * (int)param_1 + 1;
  iVar5 = iVar4 - (iVar4 >> 0x1f) >> 5;
  if (iVar4 / 2 < 1) {
    uVar1 = SYS_OBJ_21A4();
    return uVar1;
  }
  iVar4 = iVar4 / 2 + iVar5 * -0x10;
  uVar2 = *(uint *)PTR_GPU_REG1_80074b38;
  while( true ) {
    if ((uVar2 & 0x4000000) != 0) {
      uVar1 = 0xa0000000;
      *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000000;
      *(undefined4 *)PTR_GPU_REG0_80074b34 = 0x1000000;
      if (unaff_s5 != 0) {
        uVar1 = 0xb0000000;
      }
      *(undefined4 *)PTR_GPU_REG0_80074b34 = uVar1;
      *(undefined4 *)PTR_GPU_REG0_80074b34 = *unaff_s1;
      *(undefined4 *)PTR_GPU_REG0_80074b34 = unaff_s1[1];
      while (iVar4 = iVar4 + -1, iVar4 != -1) {
        uVar1 = *unaff_s2;
        unaff_s2 = unaff_s2 + 1;
        *(undefined4 *)PTR_GPU_REG0_80074b34 = uVar1;
      }
      if (iVar5 != 0) {
        *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000002;
        *(undefined4 **)PTR_DMA_GPU_MADR_80074b3c = unaff_s2;
        *(uint *)PTR_DMA_GPU_BCR_80074b40 = iVar5 << 0x10 | 0x10;
        *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x1000201;
      }
      return 0;
    }
    iVar3 = get_alarm();
    if (iVar3 != 0) break;
    uVar2 = *(uint *)PTR_GPU_REG1_80074b38;
  }
  return 0xffffffff;
}



void SYS_OBJ_21A4(void)

{
  return;
}



undefined4 _drs(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  short sVar5;
  short sVar6;
  int iVar7;
  
  set_alarm();
  sVar5 = *(short *)(param_1 + 1);
  if (sVar5 < 0) {
    sVar5 = 0;
  }
  else if ((int)DAT_80074a68 < (int)sVar5) {
    uVar1 = SYS_OBJ_222C((int)DAT_80074a68);
    return uVar1;
  }
  sVar6 = *(short *)((int)param_1 + 6);
  iVar7 = (int)sVar6;
  *(short *)(param_1 + 1) = sVar5;
  if (iVar7 < 0) {
    sVar6 = 0;
    iVar2 = 0;
  }
  else {
    iVar2 = iVar7 << 0x10;
    if (DAT_80074a6a < iVar7) {
      uVar1 = SYS_OBJ_2264((int)DAT_80074a6a);
      return uVar1;
    }
  }
  *(short *)((int)param_1 + 6) = sVar6;
  iVar7 = (int)*(short *)(param_1 + 1) * (iVar2 >> 0x10) + 1;
  iVar2 = iVar7 - (iVar7 >> 0x1f) >> 5;
  if (0 < iVar7 / 2) {
    iVar7 = iVar7 / 2 + iVar2 * -0x10;
    uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    while ((uVar3 & 0x4000000) == 0) {
      iVar4 = get_alarm();
      if (iVar4 != 0) {
        return 0xffffffff;
      }
      uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    }
    *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000000;
    *(undefined4 *)PTR_GPU_REG0_80074b34 = 0x1000000;
    *(undefined4 *)PTR_GPU_REG0_80074b34 = 0xc0000000;
    *(undefined4 *)PTR_GPU_REG0_80074b34 = *param_1;
    *(undefined4 *)PTR_GPU_REG0_80074b34 = param_1[1];
    uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    while( true ) {
      if ((uVar3 & 0x8000000) != 0) {
        while (iVar7 = iVar7 + -1, iVar7 != -1) {
          *param_2 = *(undefined4 *)PTR_GPU_REG0_80074b34;
          param_2 = param_2 + 1;
        }
        if (iVar2 != 0) {
          *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000003;
          *(undefined4 **)PTR_DMA_GPU_MADR_80074b3c = param_2;
          *(uint *)PTR_DMA_GPU_BCR_80074b40 = iVar2 << 0x10 | 0x10;
          *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x1000200;
        }
        return 0;
      }
      iVar4 = get_alarm();
      if (iVar4 != 0) break;
      uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    }
    return 0xffffffff;
  }
  uVar1 = SYS_OBJ_242C();
  return uVar1;
}



undefined4 SYS_OBJ_222C(void)

{
  int iVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  undefined2 in_v1;
  short sVar5;
  int iVar6;
  undefined4 *unaff_s1;
  undefined4 *unaff_s2;
  
  sVar5 = *(short *)((int)unaff_s1 + 6);
  iVar6 = (int)sVar5;
  *(undefined2 *)(unaff_s1 + 1) = in_v1;
  if (iVar6 < 0) {
    sVar5 = 0;
    iVar1 = 0;
  }
  else {
    iVar1 = iVar6 << 0x10;
    if (DAT_80074a6a < iVar6) {
      uVar2 = SYS_OBJ_2264((int)DAT_80074a6a);
      return uVar2;
    }
  }
  *(short *)((int)unaff_s1 + 6) = sVar5;
  iVar6 = (int)*(short *)(unaff_s1 + 1) * (iVar1 >> 0x10) + 1;
  iVar1 = iVar6 - (iVar6 >> 0x1f) >> 5;
  if (0 < iVar6 / 2) {
    iVar6 = iVar6 / 2 + iVar1 * -0x10;
    uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    while ((uVar3 & 0x4000000) == 0) {
      iVar4 = get_alarm();
      if (iVar4 != 0) {
        return 0xffffffff;
      }
      uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    }
    *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000000;
    *(undefined4 *)PTR_GPU_REG0_80074b34 = 0x1000000;
    *(undefined4 *)PTR_GPU_REG0_80074b34 = 0xc0000000;
    *(undefined4 *)PTR_GPU_REG0_80074b34 = *unaff_s1;
    *(undefined4 *)PTR_GPU_REG0_80074b34 = unaff_s1[1];
    uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    while( true ) {
      if ((uVar3 & 0x8000000) != 0) {
        while (iVar6 = iVar6 + -1, iVar6 != -1) {
          *unaff_s2 = *(undefined4 *)PTR_GPU_REG0_80074b34;
          unaff_s2 = unaff_s2 + 1;
        }
        if (iVar1 != 0) {
          *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000003;
          *(undefined4 **)PTR_DMA_GPU_MADR_80074b3c = unaff_s2;
          *(uint *)PTR_DMA_GPU_BCR_80074b40 = iVar1 << 0x10 | 0x10;
          *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x1000200;
        }
        return 0;
      }
      iVar4 = get_alarm();
      if (iVar4 != 0) break;
      uVar3 = *(uint *)PTR_GPU_REG1_80074b38;
    }
    return 0xffffffff;
  }
  uVar2 = SYS_OBJ_242C();
  return uVar2;
}



undefined4 SYS_OBJ_2264(short param_1)

{
  undefined4 uVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  int iVar5;
  undefined4 *unaff_s1;
  undefined4 *unaff_s2;
  
  *(short *)((int)unaff_s1 + 6) = param_1;
  iVar4 = (int)*(short *)(unaff_s1 + 1) * (int)param_1 + 1;
  iVar5 = iVar4 - (iVar4 >> 0x1f) >> 5;
  if (iVar4 / 2 < 1) {
    uVar1 = SYS_OBJ_242C();
    return uVar1;
  }
  iVar4 = iVar4 / 2 + iVar5 * -0x10;
  uVar2 = *(uint *)PTR_GPU_REG1_80074b38;
  while ((uVar2 & 0x4000000) == 0) {
    iVar3 = get_alarm();
    if (iVar3 != 0) {
      return 0xffffffff;
    }
    uVar2 = *(uint *)PTR_GPU_REG1_80074b38;
  }
  *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000000;
  *(undefined4 *)PTR_GPU_REG0_80074b34 = 0x1000000;
  *(undefined4 *)PTR_GPU_REG0_80074b34 = 0xc0000000;
  *(undefined4 *)PTR_GPU_REG0_80074b34 = *unaff_s1;
  *(undefined4 *)PTR_GPU_REG0_80074b34 = unaff_s1[1];
  uVar2 = *(uint *)PTR_GPU_REG1_80074b38;
  while( true ) {
    if ((uVar2 & 0x8000000) != 0) {
      while (iVar4 = iVar4 + -1, iVar4 != -1) {
        *unaff_s2 = *(undefined4 *)PTR_GPU_REG0_80074b34;
        unaff_s2 = unaff_s2 + 1;
      }
      if (iVar5 != 0) {
        *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000003;
        *(undefined4 **)PTR_DMA_GPU_MADR_80074b3c = unaff_s2;
        *(uint *)PTR_DMA_GPU_BCR_80074b40 = iVar5 << 0x10 | 0x10;
        *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x1000200;
      }
      return 0;
    }
    iVar3 = get_alarm();
    if (iVar3 != 0) break;
    uVar2 = *(uint *)PTR_GPU_REG1_80074b38;
  }
  return 0xffffffff;
}



void SYS_OBJ_242C(void)

{
  return;
}



void _ctl(uint param_1)

{
  *(uint *)PTR_GPU_REG1_80074b38 = param_1;
  (&DAT_800759bc)[param_1 >> 0x18] = (char)param_1;
  return;
}



undefined _getctl(int param_1)

{
  return (&DAT_800759bc)[param_1];
}



undefined4 _cwb(undefined4 *param_1,int param_2)

{
  undefined4 uVar1;
  int iVar2;
  
  iVar2 = param_2 + -1;
  *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000000;
  if (param_2 != 0) {
    do {
      uVar1 = *param_1;
      param_1 = param_1 + 1;
      iVar2 = iVar2 + -1;
      *(undefined4 *)PTR_GPU_REG0_80074b34 = uVar1;
    } while (iVar2 != -1);
  }
  return 0;
}



void _cwc(undefined4 param_1)

{
  *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x4000002;
  *(undefined4 *)PTR_DMA_GPU_MADR_80074b3c = param_1;
  *(undefined4 *)PTR_DMA_GPU_BCR_80074b40 = 0;
  *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x1000401;
  return;
}



uint _param(uint param_1)

{
  *(uint *)PTR_GPU_REG1_80074b38 = param_1 | 0x10000000;
  return *(uint *)PTR_GPU_REG0_80074b34 & 0xffffff;
}



void _addque(undefined4 param_1,undefined4 param_2,undefined4 param_3)

{
  _addque2(param_1,param_2,0,param_3);
  return;
}



void _addque2(void)

{
  set_alarm();
  SYS_OBJ_25C8();
  return;
}



uint SYS_OBJ_25C8(void)

{
  uint uVar1;
  int iVar2;
  undefined4 uVar3;
  undefined4 *unaff_s0;
  int unaff_s1;
  undefined4 unaff_s2;
  code *unaff_s3;
  
  while ((DAT_80074b68 + 1 & 0x3f) == DAT_80074b6c) {
    iVar2 = get_alarm();
    if (iVar2 != 0) {
      return 0xffffffff;
    }
    _exeque();
  }
  DAT_80074b70 = SetIntrMask(0);
  DAT_80074a6c = 1;
  if ((DAT_80074a65 == '\0') ||
     (((DAT_80074b68 == DAT_80074b6c && ((*(uint *)PTR_DMA_GPU_CHCR_80074b44 & 0x1000000) == 0)) &&
      (DAT_80074a70 == 0)))) {
    do {
    } while ((*(uint *)PTR_GPU_REG1_80074b38 & 0x4000000) == 0);
    (*unaff_s3)();
    DAT_80074b58 = unaff_s3;
    DAT_80074b5c = unaff_s0;
    DAT_80074b60 = unaff_s2;
    SetIntrMask(DAT_80074b70);
    uVar1 = SYS_OBJ_283C();
    return uVar1;
  }
  DMACallback(2,_exeque);
  if (unaff_s1 == 0) {
    *(undefined4 **)(&DAT_80078ea4 + DAT_80074b68 * 0x60) = unaff_s0;
    *(undefined4 *)(&DAT_80078ea8 + DAT_80074b68 * 0x60) = unaff_s2;
    *(code **)(&DAT_80078ea0 + DAT_80074b68 * 0x60) = unaff_s3;
    DAT_80074b68 = DAT_80074b68 + 1 & 0x3f;
    SetIntrMask(DAT_80074b70);
    _exeque();
    return DAT_80074b68 - DAT_80074b6c & 0x3f;
  }
  if (unaff_s1 < 0) {
    unaff_s1 = unaff_s1 + 3;
  }
  if (0 < unaff_s1 >> 2) {
    uVar3 = *unaff_s0;
    iVar2 = DAT_80074b68 * 0x60;
    *(undefined4 *)(&DAT_80078eac + iVar2) = uVar3;
    uVar1 = SYS_OBJ_26EC(&DAT_80078eac + iVar2,uVar3,1,unaff_s0 + 1);
    return uVar1;
  }
  *(undefined **)(&DAT_80078ea4 + DAT_80074b68 * 0x60) = &DAT_80078eac + DAT_80074b68 * 0x60;
  uVar1 = SYS_OBJ_27A8();
  return uVar1;
}



void SYS_OBJ_26EC(undefined4 param_1,undefined4 param_2,int param_3,undefined4 *param_4)

{
  int in_v0;
  undefined4 *puVar1;
  undefined4 uVar2;
  int in_t0;
  
  if (in_v0 < 0) {
    in_v0 = in_v0 + 3;
  }
  if (param_3 < in_v0 >> 2) {
    uVar2 = *param_4;
    puVar1 = (undefined4 *)(param_3 * 4 + DAT_80074b68 * 0x60 + in_t0);
    *puVar1 = uVar2;
    SYS_OBJ_26EC(puVar1,uVar2,param_3 + 1,param_4 + 1);
    return;
  }
  *(undefined **)(&DAT_80078ea4 + DAT_80074b68 * 0x60) = &DAT_80078eac + DAT_80074b68 * 0x60;
  SYS_OBJ_27A8();
  return;
}



uint SYS_OBJ_27A8(void)

{
  undefined4 unaff_s2;
  undefined4 unaff_s3;
  
  *(undefined4 *)(&DAT_80078ea8 + DAT_80074b68 * 0x60) = unaff_s2;
  *(undefined4 *)(&DAT_80078ea0 + DAT_80074b68 * 0x60) = unaff_s3;
  DAT_80074b68 = DAT_80074b68 + 1 & 0x3f;
  SetIntrMask(DAT_80074b70);
  _exeque();
  return DAT_80074b68 - DAT_80074b6c & 0x3f;
}



void SYS_OBJ_283C(void)

{
  return;
}



uint _exeque(void)

{
  uint uVar1;
  
  uVar1 = 1;
  if ((*(uint *)PTR_DMA_GPU_CHCR_80074b44 & 0x1000000) == 0) {
    DAT_80074b74 = SetIntrMask(0);
    if (DAT_80074b68 != DAT_80074b6c) {
      uVar1 = *(uint *)PTR_DMA_GPU_CHCR_80074b44;
      while ((uVar1 & 0x1000000) == 0) {
        if (((DAT_80074b6c + 1 & 0x3f) == DAT_80074b68) && (DAT_80074a70 == (code *)0x0)) {
          DMACallback(2,0);
        }
        uVar1 = *(uint *)PTR_GPU_REG1_80074b38;
        while ((uVar1 & 0x4000000) == 0) {
          uVar1 = *(uint *)PTR_GPU_REG1_80074b38;
        }
        (**(code **)(&DAT_80078ea0 + DAT_80074b6c * 0x60))
                  (*(undefined4 *)(&DAT_80078ea4 + DAT_80074b6c * 0x60),
                   *(undefined4 *)(&DAT_80078ea8 + DAT_80074b6c * 0x60));
        DAT_80074b58 = *(undefined4 *)(&DAT_80078ea0 + DAT_80074b6c * 0x60);
        DAT_80074b5c = *(undefined4 *)(&DAT_80078ea4 + DAT_80074b6c * 0x60);
        DAT_80074b60 = *(undefined4 *)(&DAT_80078ea8 + DAT_80074b6c * 0x60);
        DAT_80074b6c = DAT_80074b6c + 1 & 0x3f;
        if (DAT_80074b68 == DAT_80074b6c) break;
        uVar1 = *(uint *)PTR_DMA_GPU_CHCR_80074b44;
      }
    }
    SetIntrMask(DAT_80074b74);
    if ((((DAT_80074b68 == DAT_80074b6c) && ((*(uint *)PTR_DMA_GPU_CHCR_80074b44 & 0x1000000) == 0))
        && (DAT_80074a6c != 0)) && (DAT_80074a70 != (code *)0x0)) {
      DAT_80074a6c = 0;
      (*DAT_80074a70)();
    }
    uVar1 = DAT_80074b68 - DAT_80074b6c & 0x3f;
  }
  return uVar1;
}



undefined4 _reset(uint param_1)

{
  undefined4 uVar1;
  uint uVar2;
  
  DAT_80074b78 = SetIntrMask(0);
  DAT_80074b6c = 0;
  DAT_80074b68 = 0;
  uVar2 = param_1 & 7;
  if (uVar2 != 1) {
    if (uVar2 < 2) {
      if (uVar2 != 0) {
        uVar1 = SYS_OBJ_2C6C();
        return uVar1;
      }
SYS_OBJ_2BBC:
      *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x401;
      *(uint *)PTR_DMA_DPCR_80074b54 = *(uint *)PTR_DMA_DPCR_80074b54 | 0x800;
      *(undefined4 *)PTR_GPU_REG1_80074b38 = 0;
      memset(&DAT_800759bc,'\0',0x100);
      memset(&DAT_80078ea0,'\0',0x1800);
      uVar1 = SYS_OBJ_2C6C();
      return uVar1;
    }
    if (uVar2 != 3) {
      if (uVar2 == 5) goto SYS_OBJ_2BBC;
      goto code_r0x80061f10;
    }
  }
  *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x401;
  *(uint *)PTR_DMA_DPCR_80074b54 = *(uint *)PTR_DMA_DPCR_80074b54 | 0x800;
  *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x2000000;
  *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x1000000;
code_r0x80061f10:
  SetIntrMask(DAT_80074b78);
  uVar1 = 0;
  if ((param_1 & 7) == 0) {
    uVar1 = _version(param_1);
  }
  return uVar1;
}



undefined4 SYS_OBJ_2C6C(void)

{
  undefined4 uVar1;
  uint unaff_s0;
  
  SetIntrMask(DAT_80074b78);
  uVar1 = 0;
  if ((unaff_s0 & 7) == 0) {
    uVar1 = _version();
  }
  return uVar1;
}



uint _sync(int param_1)

{
  uint uVar1;
  
  if (param_1 == 0) {
    set_alarm();
    uVar1 = SYS_OBJ_2CDC();
    return uVar1;
  }
  uVar1 = DAT_80074b68 - DAT_80074b6c & 0x3f;
  if (uVar1 != 0) {
    _exeque();
  }
  if ((((*(uint *)PTR_DMA_GPU_CHCR_80074b44 & 0x1000000) != 0) ||
      ((*(uint *)PTR_GPU_REG1_80074b38 & 0x4000000) == 0)) && (uVar1 == 0)) {
    uVar1 = SYS_OBJ_2DD8();
    return uVar1;
  }
  return uVar1;
}



undefined4 SYS_OBJ_2CC4(void)

{
  int iVar1;
  undefined4 uVar2;
  
  _exeque();
  iVar1 = get_alarm();
  if (iVar1 == 0) {
    if (DAT_80074b68 != DAT_80074b6c) {
      uVar2 = SYS_OBJ_2CC4();
      return uVar2;
    }
    do {
      if (((*(uint *)PTR_DMA_GPU_CHCR_80074b44 & 0x1000000) == 0) &&
         ((*(uint *)PTR_GPU_REG1_80074b38 & 0x4000000) != 0)) {
        uVar2 = SYS_OBJ_2DD8();
        return uVar2;
      }
      iVar1 = get_alarm();
    } while (iVar1 == 0);
  }
  return 0xffffffff;
}



undefined4 SYS_OBJ_2CDC(void)

{
  undefined4 uVar1;
  int iVar2;
  
  if (DAT_80074b68 != DAT_80074b6c) {
    uVar1 = SYS_OBJ_2CC4();
    return uVar1;
  }
  while (((*(uint *)PTR_DMA_GPU_CHCR_80074b44 & 0x1000000) != 0 ||
         ((*(uint *)PTR_GPU_REG1_80074b38 & 0x4000000) == 0))) {
    iVar2 = get_alarm();
    if (iVar2 != 0) {
      return 0xffffffff;
    }
  }
  uVar1 = SYS_OBJ_2DD8();
  return uVar1;
}



void SYS_OBJ_2DD8(void)

{
  return;
}



void set_alarm(void)

{
  int iVar1;
  
  iVar1 = Vsync(0xffffffff);
  DAT_80074b7c = iVar1 + 0xf0;
  DAT_80074b80 = 0;
  return;
}



undefined4 get_alarm(void)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  
  iVar2 = Vsync(0xffffffff);
  iVar1 = DAT_80074b80;
  if ((iVar2 <= DAT_80074b7c) && (DAT_80074b80 = DAT_80074b80 + 1, iVar1 < 0xf0001)) {
    return 0;
  }
  printf("GPU timeout:que=%d,stat=%08x,chcr=%08x,madr=%08x,",DAT_80074b68 - DAT_80074b6c & 0x3f,
         *(undefined4 *)PTR_GPU_REG1_80074b38,*(undefined4 *)PTR_DMA_GPU_CHCR_80074b44,
         *(undefined4 *)PTR_DMA_GPU_MADR_80074b3c);
  printf("func=(%08x)(%08x,%08x)\n",DAT_80074b58,DAT_80074b5c,DAT_80074b60);
  DAT_80074b78 = SetIntrMask(0);
  DAT_80074b6c = 0;
  DAT_80074b68 = 0;
  *(undefined4 *)PTR_DMA_GPU_CHCR_80074b44 = 0x401;
  *(uint *)PTR_DMA_DPCR_80074b54 = *(uint *)PTR_DMA_DPCR_80074b54 | 0x800;
  *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x2000000;
  *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x1000000;
  SetIntrMask(DAT_80074b78);
  uVar3 = SYS_OBJ_2F7C();
  return uVar3;
}



void SYS_OBJ_2F7C(void)

{
  return;
}



undefined4 _version(uint param_1)

{
  undefined4 uVar1;
  
  *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x10000007;
  if ((*(uint *)PTR_GPU_REG0_80074b34 & 0xffffff) == 2) {
    if ((param_1 & 8) != 0) {
      *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x9000001;
      uVar1 = SYS_OBJ_3060();
      return uVar1;
    }
    return 3;
  }
  *(uint *)PTR_GPU_REG0_80074b34 = *(uint *)PTR_GPU_REG1_80074b38 & 0x3fff | 0xe1001000;
  if ((*(uint *)PTR_GPU_REG1_80074b38 & 0x1000) == 0) {
    uVar1 = SYS_OBJ_3060();
    return uVar1;
  }
  if ((param_1 & 8) == 0) {
    uVar1 = SYS_OBJ_3060();
    return uVar1;
  }
  *(undefined4 *)PTR_GPU_REG1_80074b38 = 0x20000504;
  uVar1 = SYS_OBJ_3060();
  return uVar1;
}



void SYS_OBJ_3060(void)

{
  return;
}



void * memset(uchar *param_1,uchar param_2,int param_3)

{
  void *pvVar1;
  
  pvVar1 = (void *)(param_3 + -1);
  if (param_3 != 0) {
    do {
      *param_1 = param_2;
      pvVar1 = (void *)((int)pvVar1 + -1);
      param_1 = param_1 + 1;
    } while (pvVar1 != (void *)0xffffffff);
  }
  return pvVar1;
}



void GPU_cw(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible MSC00.OBJ/InitGeom

void InitGeom(void)

{
  undefined4 unaff_retaddr;
  
  DAT_80074d04 = unaff_retaddr;
  _patch_gte();
  setCopReg(0,Status,Status | 0x40000000,0);
  gte_ldZSF3(0x155);
  gte_ldZSF4(0x100);
  gte_ldH(1000);
  gte_ldDQA(0xffffef9e);
  gte_ldDQB(0x1400000);
  gte_ldOFX(0);
  gte_ldOFY(0);
  return;
}



MATRIX * MulMatrix0(MATRIX *m0,MATRIX *m1,MATRIX *m2)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  
  gte_ldR11R12(*(undefined4 *)m0->m);
  gte_ldR13R21(*(undefined4 *)(m0->m + 2));
  gte_ldR22R23(*(undefined4 *)(m0->m[1] + 1));
  gte_ldR31R32(*(undefined4 *)m0->m[2]);
  gte_ldR33(*(undefined4 *)(m0->m[2] + 2));
  gte_ldVXY0((uint)(ushort)m1->m[0] | *(uint *)(m1->m + 2) & 0xffff0000);
  gte_ldVZ0(*(undefined4 *)m1->m[2]);
  gte_rtv0_b();
  uVar1 = gte_stIR1();
  iVar2 = gte_stIR2();
  uVar3 = gte_stIR3();
  gte_ldVXY0((uint)(ushort)m1->m[1] | *(int *)(m1->m[1] + 1) << 0x10);
  gte_ldVZ0((int)m1->m[2][1]);
  gte_rtv0_b();
  iVar4 = gte_stIR1();
  uVar5 = gte_stIR2();
  iVar6 = gte_stIR3();
  gte_ldVXY0((uint)(ushort)m1->m[2] | *(uint *)(m1->m[1] + 1) & 0xffff0000);
  gte_ldVZ0(*(undefined4 *)(m1->m[2] + 2));
  gte_rtv0_b();
  *(uint *)m2->m = iVar4 << 0x10 | uVar1 & 0xffff;
  *(uint *)m2->m[2] = iVar6 << 0x10 | uVar3 & 0xffff;
  uVar1 = gte_stIR1();
  iVar4 = gte_stIR2();
  *(uint *)(m2->m + 2) = uVar1 & 0xffff | iVar2 << 0x10;
  *(uint *)(m2->m[1] + 1) = iVar4 << 0x10 | uVar5 & 0xffff;
  gte_stIR3();
  return m2;
}



MATRIX * MulMatrix(MATRIX *m0,MATRIX *m1)

{
  uint uVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  
  gte_ldR11R12(*(undefined4 *)m0->m);
  gte_ldR13R21(*(undefined4 *)(m0->m + 2));
  gte_ldR22R23(*(undefined4 *)(m0->m[1] + 1));
  gte_ldR31R32(*(undefined4 *)m0->m[2]);
  gte_ldR33(*(undefined4 *)(m0->m[2] + 2));
  gte_ldVXY0((uint)(ushort)m1->m[0] | *(uint *)(m1->m + 2) & 0xffff0000);
  gte_ldVZ0(*(undefined4 *)m1->m[2]);
  gte_rtv0_b();
  uVar1 = gte_stIR1();
  iVar2 = gte_stIR2();
  uVar3 = gte_stIR3();
  gte_ldVXY0((uint)(ushort)m1->m[1] | *(int *)(m1->m[1] + 1) << 0x10);
  gte_ldVZ0((int)m1->m[2][1]);
  gte_rtv0_b();
  iVar4 = gte_stIR1();
  uVar5 = gte_stIR2();
  iVar6 = gte_stIR3();
  gte_ldVXY0((uint)(ushort)m1->m[2] | *(uint *)(m1->m[1] + 1) & 0xffff0000);
  gte_ldVZ0(*(undefined4 *)(m1->m[2] + 2));
  gte_rtv0_b();
  *(uint *)m0->m = iVar4 << 0x10 | uVar1 & 0xffff;
  *(uint *)m0->m[2] = iVar6 << 0x10 | uVar3 & 0xffff;
  uVar1 = gte_stIR1();
  iVar4 = gte_stIR2();
  *(uint *)(m0->m + 2) = uVar1 & 0xffff | iVar2 << 0x10;
  *(uint *)(m0->m[1] + 1) = iVar4 << 0x10 | uVar5 & 0xffff;
  gte_stIR3();
  return m0;
}



void SetTransMatrix(MATRIX *m)

{
  gte_ldtr(m->t[0],m->t[1],m->t[2]);
  return;
}



// Possible REG12.OBJ/SetGeomOffset

void SetGeomOffset(long ofx,long ofy)

{
  gte_ldOFX(ofx << 0x10);
  gte_ldOFY(ofy << 0x10);
  return;
}



// Possible REG13.OBJ/SetGeomScreen

void SetGeomScreen(long h)

{
  gte_ldH(h);
  return;
}



void _patch_gte(void)

{
  int iVar1;
  undefined4 *puVar2;
  undefined4 uVar3;
  undefined4 *puVar4;
  undefined4 unaff_retaddr;
  
  DAT_80075648 = unaff_retaddr;
  EnterCriticalSection();
  iVar1 = (*(code *)&SUB_000000b0)();
  puVar4 = &PATCHGTE_OBJ_68;
  puVar2 = *(undefined4 **)(iVar1 + 0x18);
  do {
    uVar3 = *puVar4;
    puVar4 = puVar4 + 1;
    *puVar2 = uVar3;
    puVar2 = puVar2 + 1;
  } while (puVar4 != (undefined4 *)FlushCache);
  FlushCache();
  ExitCriticalSection();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void FlushCache(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



void * memcpy(uchar *param_1,uchar *param_2,int param_3)

{
  uchar uVar1;
  uchar *puVar2;
  uchar *puVar3;
  
  puVar2 = (uchar *)0x0;
  if ((param_1 != (uchar *)0x0) && (puVar2 = param_1, puVar3 = param_1, 0 < param_3)) {
    do {
      uVar1 = *param_2;
      param_2 = param_2 + 1;
      param_3 = param_3 + -1;
      *puVar3 = uVar1;
      puVar3 = puVar3 + 1;
    } while (0 < param_3);
  }
  return puVar2;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int rand(void)

{
  srandSeed = srandSeed * 0x41c64e6d + 0x3039;
  return srandSeed >> 0x10 & 0x7fff;
}



// Possible GS_101.OBJ/GsSetNearClip
// Possible GS_102.OBJ/GsSetFarClip
// Possible GS_124.OBJ/GsSetWorkBase

void srand(uint param_1)

{
  srandSeed = param_1;
  return;
}



// WARNING: Possible PIC construction at 0x80062774: Changing call to branch
// WARNING: Removing unreachable block (ram,0x80062774)
// Possible STRLEN.OBJ/strlen

int strlen(char *__s)

{
  int length;
  char currentChar;
  
  length = 0;
  if (__s == (char *)0x0) {
    length = 0;
  }
  else {
    while (currentChar = *__s, __s = __s + 1, currentChar != '\0') {
      length = length + 1;
    }
  }
  return length;
}



int printf(char *fmt,...)

{
  int iVar1;
  undefined4 in_a1;
  undefined4 in_a2;
  undefined4 in_a3;
  undefined4 local_res4;
  undefined4 local_res8;
  undefined4 local_resc;
  
  local_res4 = in_a1;
  local_res8 = in_a2;
  local_resc = in_a3;
  iVar1 = prnt(1,fmt,&local_res4);
  return iVar1;
}



void prnt(undefined4 param_1,byte *param_2,int **param_3)

{
  uchar uVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  bool bVar5;
  void *pvVar6;
  int *piVar7;
  byte bVar8;
  uint uVar9;
  int *piVar10;
  int **ppiVar11;
  uchar **ppuVar12;
  char *__s;
  uint uVar13;
  int *piVar14;
  undefined *puVar15;
  byte *pbVar16;
  char cVar17;
  undefined auStack_88 [16];
  undefined local_78;
  undefined local_52 [2];
  uchar *local_50 [2];
  int *local_48;
  int local_40;
  int *local_38;
  char *local_30;
  
  if (param_2 == (byte *)0x0) {
    PRNT_OBJ_654();
    return;
  }
  local_30 = "0123456789abcdef";
  local_50[0] = (uchar *)0x0;
  do {
    bVar8 = *param_2;
    if (bVar8 == 0) {
PRNT_OBJ_60:
      PRNT_OBJ_654();
      return;
    }
    uVar13 = 0;
    bVar2 = false;
    bVar5 = false;
    bVar4 = false;
    bVar3 = false;
    if (bVar8 == 0x25) {
      piVar14 = (int *)0xffffffff;
      cVar17 = '\0';
      local_48 = (int *)0x0;
      local_40 = 0;
      local_38 = (int *)0x0;
      uVar9 = 0x25;
      pbVar16 = param_2;
code_r0x80062860:
      param_2 = pbVar16 + 1;
      ppiVar11 = param_3;
      switch(*param_2) {
      case 0:
        goto PRNT_OBJ_60;
      default:
        bVar8 = *param_2;
        local_50[0] = local_50[0] + 1;
        break;
      case 0x20:
        pbVar16 = param_2;
        if (cVar17 == '\0') {
          PRNT_OBJ_88();
          return;
        }
        goto code_r0x80062860;
      case 0x23:
        bVar5 = true;
        pbVar16 = param_2;
        goto code_r0x80062860;
      case 0x2a:
        ppiVar11 = param_3 + 1;
        local_38 = *param_3;
        param_3 = ppiVar11;
        pbVar16 = param_2;
        if (-1 < (int)local_38) goto code_r0x80062860;
        local_38 = (int *)-(int)local_38;
      case 0x2d:
        uVar13 = uVar13 | 0x10;
        param_3 = ppiVar11;
        pbVar16 = param_2;
        goto code_r0x80062860;
      case 0x2b:
        cVar17 = '+';
        pbVar16 = param_2;
        goto code_r0x80062860;
      case 0x2e:
        pbVar16 = pbVar16 + 2;
        bVar8 = *pbVar16;
        if (bVar8 == 0x2a) {
          PRNT_OBJ_178();
          return;
        }
        piVar14 = (int *)0x0;
        while ((bVar8 < 0x80 && (uVar9 = (uint)*pbVar16, ((&DAT_80074d15)[uVar9] & 4) != 0))) {
          pbVar16 = pbVar16 + 1;
          bVar8 = *pbVar16;
          piVar14 = (int *)((int)piVar14 * 10 + -0x30 + uVar9);
        }
        pbVar16 = pbVar16 + -1;
        if ((int)piVar14 < 0) {
          PRNT_OBJ_88();
          return;
        }
        goto code_r0x80062860;
      case 0x30:
        uVar13 = uVar13 | 0x20;
        pbVar16 = param_2;
        goto code_r0x80062860;
      case 0x31:
      case 0x32:
      case 0x33:
      case 0x34:
      case 0x35:
      case 0x36:
      case 0x37:
      case 0x38:
      case 0x39:
        local_38 = (int *)0x0;
        goto PRNT_OBJ_194;
      case 0x44:
        bVar3 = true;
      case 100:
      case 0x69:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_24C();
          return;
        }
        piVar7 = *param_3;
        uVar9 = 10;
        if ((int)piVar7 < 0) {
          PRNT_OBJ_3D4();
          return;
        }
code_r0x80062bac:
        local_48 = piVar14;
        if (-1 < (int)piVar14) {
          uVar13 = uVar13 & 0xffffffdf;
        }
        __s = (char *)local_50;
        if ((piVar7 != (int *)0x0) || (puVar15 = auStack_88 + -(int)__s, piVar14 != (int *)0x0))
        goto PRNT_OBJ_3FC;
        goto PRNT_OBJ_46C;
      case 0x4c:
        pbVar16 = param_2;
        goto code_r0x80062860;
      case 0x4f:
        bVar3 = true;
      case 0x6f:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_3D0(uVar9,8);
          return;
        }
        PRNT_OBJ_3D0(uVar9,8);
        return;
      case 0x55:
        bVar3 = true;
      case 0x75:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_3D0(uVar9,10);
          return;
        }
        PRNT_OBJ_3D0(uVar9,10);
        return;
      case 0x58:
        local_30 = "0123456789ABCDEF";
      case 0x78:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_3BC();
          return;
        }
        piVar7 = *param_3;
        uVar9 = 0x10;
        if (bVar5) {
          cVar17 = '\0';
          if (piVar7 != (int *)0x0) {
            bVar2 = true;
            goto code_r0x80062ba8;
          }
        }
        else {
code_r0x80062ba8:
          cVar17 = '\0';
        }
        goto code_r0x80062bac;
      case 99:
        local_78 = SUB41(*param_3,0);
        PRNT_OBJ_470();
        return;
      case 0x68:
        bVar4 = true;
        pbVar16 = param_2;
        goto code_r0x80062860;
      case 0x6c:
        goto PRNT_OBJ_1F8;
      case 0x6e:
        if ((!bVar3) && (bVar4)) {
          *(undefined2 *)*param_3 = local_50[0]._0_2_;
          PRNT_OBJ_64C();
          return;
        }
        **param_3 = (int)local_50[0];
        PRNT_OBJ_64C();
        return;
      case 0x70:
        PRNT_OBJ_3D0(uVar9,0x10);
        return;
      case 0x73:
        __s = (char *)*param_3;
        if ((uchar **)__s == (uchar **)0x0) {
          __s = "(null)";
        }
        if ((int)piVar14 < 0) {
          puVar15 = (undefined *)strlen(__s);
          cVar17 = '\0';
        }
        else {
          pvVar6 = memchr((uchar *)__s,'\0',(int)piVar14);
          puVar15 = (undefined *)((int)pvVar6 - (int)__s);
          if ((pvVar6 == (void *)0x0) || (cVar17 = '\0', (int)piVar14 < (int)puVar15)) {
            PRNT_OBJ_340();
            return;
          }
        }
        goto code_r0x80062c48;
      }
    }
    putchar(bVar8);
    param_2 = param_2 + 1;
  } while( true );
PRNT_OBJ_1F8:
  bVar3 = true;
  pbVar16 = param_2;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*param_2] & 4) != 0) {
PRNT_OBJ_194:
    bVar8 = *param_2;
    param_2 = param_2 + 1;
    local_38 = (int *)((int)local_38 * 10 + -0x30 + (uint)bVar8);
    if (0x7f < *param_2) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    ppuVar12 = (uchar **)__s;
    piVar14 = (int *)((uint)piVar7 / uVar9);
    if (uVar9 == 0) {
      trap(0x1c00);
    }
    uVar1 = local_30[(uint)piVar7 % uVar9];
    __s = (char *)((int)ppuVar12 + -1);
    *__s = uVar1;
    piVar7 = piVar14;
  } while (piVar14 != (int *)0x0);
  local_30 = "0123456789abcdef";
  if (bVar5) {
    puVar15 = auStack_88 + -(int)__s;
    if (uVar9 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)ppuVar12 + -2);
      *__s = '0';
    }
  }
  puVar15 = auStack_88 + -(int)__s;
PRNT_OBJ_46C:
  puVar15 = puVar15 + 0x38;
code_r0x80062c48:
  piVar14 = (int *)(puVar15 + local_40);
  if (cVar17 != '\0') {
    piVar14 = (int *)((int)piVar14 + 1);
  }
  if (bVar2) {
    piVar14 = (int *)((int)piVar14 + 2);
  }
  piVar7 = local_48;
  if ((int)local_48 < (int)piVar14) {
    piVar7 = piVar14;
  }
  if (((uVar13 == 0) && (local_38 != (int *)0x0)) && (piVar10 = piVar7, (int)piVar7 < (int)local_38)
     ) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)local_38);
  }
  if (cVar17 != '\0') {
    putchar(cVar17);
  }
  if (bVar2) {
    putchar('0');
    putchar(*param_2);
  }
  if ((uVar13 == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)local_38)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)local_38);
  }
  if ((int)piVar14 < (int)local_48) {
    do {
      putchar('0');
      piVar14 = (int *)((int)piVar14 + 1);
    } while ((int)piVar14 < (int)local_48);
  }
  if ((-1 < (int)(puVar15 + -1)) && (putchar(*__s), -1 < (int)(puVar15 + -2))) {
    PRNT_OBJ_590();
    return;
  }
  while (local_40 = local_40 + -1, -1 < local_40) {
    putchar('0');
  }
  if (((uVar13 & 0x10) != 0) && (piVar14 = piVar7, (int)piVar7 < (int)local_38)) {
    do {
      putchar(' ');
      piVar14 = (int *)((int)piVar14 + 1);
    } while ((int)piVar14 < (int)local_38);
  }
  piVar14 = local_38;
  if ((int)local_38 < (int)piVar7) {
    piVar14 = piVar7;
  }
  local_50[0] = local_50[0] + (int)piVar14;
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_50(void)

{
  uchar uVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  bool bVar5;
  void *pvVar6;
  int *piVar7;
  byte bVar8;
  uint uVar9;
  int **unaff_s1;
  int **ppiVar10;
  char *__s;
  uint uVar11;
  int *piVar12;
  int iVar13;
  byte *unaff_s7;
  byte *pbVar14;
  char cVar15;
  int *piVar16;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *param_11;
  int param_12;
  int *param_13;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
  do {
    bVar8 = *unaff_s7;
    if (bVar8 == 0) {
PRNT_OBJ_60:
      PRNT_OBJ_654();
      return;
    }
    uVar11 = 0;
    bVar2 = false;
    bVar5 = false;
    bVar4 = false;
    bVar3 = false;
    if (bVar8 == 0x25) {
      piVar12 = (int *)0xffffffff;
      cVar15 = '\0';
      param_11 = (int *)0x0;
      param_12 = 0;
      param_13 = (int *)0x0;
      uVar9 = 0x25;
      pbVar14 = unaff_s7;
code_r0x80062860:
      unaff_s7 = pbVar14 + 1;
      ppiVar10 = unaff_s1;
      switch(*unaff_s7) {
      case 0:
        goto PRNT_OBJ_60;
      default:
        bVar8 = *unaff_s7;
        _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
        break;
      case 0x20:
        pbVar14 = unaff_s7;
        if (cVar15 == '\0') {
          PRNT_OBJ_88();
          return;
        }
        goto code_r0x80062860;
      case 0x23:
        bVar5 = true;
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x2a:
        ppiVar10 = unaff_s1 + 1;
        param_13 = *unaff_s1;
        unaff_s1 = ppiVar10;
        pbVar14 = unaff_s7;
        if (-1 < (int)param_13) goto code_r0x80062860;
        param_13 = (int *)-(int)param_13;
      case 0x2d:
        uVar11 = uVar11 | 0x10;
        unaff_s1 = ppiVar10;
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x2b:
        cVar15 = '+';
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x2e:
        pbVar14 = pbVar14 + 2;
        bVar8 = *pbVar14;
        if (bVar8 == 0x2a) {
          PRNT_OBJ_178();
          return;
        }
        piVar12 = (int *)0x0;
        while ((bVar8 < 0x80 && (uVar9 = (uint)*pbVar14, ((&DAT_80074d15)[uVar9] & 4) != 0))) {
          pbVar14 = pbVar14 + 1;
          bVar8 = *pbVar14;
          piVar12 = (int *)((int)piVar12 * 10 + -0x30 + uVar9);
        }
        pbVar14 = pbVar14 + -1;
        if ((int)piVar12 < 0) {
          PRNT_OBJ_88();
          return;
        }
        goto code_r0x80062860;
      case 0x30:
        uVar11 = uVar11 | 0x20;
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x31:
      case 0x32:
      case 0x33:
      case 0x34:
      case 0x35:
      case 0x36:
      case 0x37:
      case 0x38:
      case 0x39:
        param_13 = (int *)0x0;
        goto PRNT_OBJ_194;
      case 0x44:
        bVar3 = true;
      case 100:
      case 0x69:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_24C();
          return;
        }
        piVar7 = *unaff_s1;
        uVar9 = 10;
        if ((int)piVar7 < 0) {
          PRNT_OBJ_3D4();
          return;
        }
code_r0x80062bac:
        param_11 = piVar12;
        if (-1 < (int)piVar12) {
          uVar11 = uVar11 & 0xffffffdf;
        }
        __s = (char *)&stack0x00000038;
        if ((piVar7 != (int *)0x0) || (iVar13 = (int)auStackX_0 - (int)__s, piVar12 != (int *)0x0))
        goto PRNT_OBJ_3FC;
        goto PRNT_OBJ_46C;
      case 0x4c:
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x4f:
        bVar3 = true;
      case 0x6f:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_3D0(uVar9,8);
          return;
        }
        PRNT_OBJ_3D0(uVar9,8);
        return;
      case 0x55:
        bVar3 = true;
      case 0x75:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_3D0(uVar9,10);
          return;
        }
        PRNT_OBJ_3D0(uVar9,10);
        return;
      case 0x58:
        in_stack_00000058 = "0123456789ABCDEF";
      case 0x78:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_3BC();
          return;
        }
        piVar7 = *unaff_s1;
        uVar9 = 0x10;
        if (bVar5) {
          cVar15 = '\0';
          if (piVar7 != (int *)0x0) {
            bVar2 = true;
            goto code_r0x80062ba8;
          }
        }
        else {
code_r0x80062ba8:
          cVar15 = '\0';
        }
        goto code_r0x80062bac;
      case 99:
        PRNT_OBJ_470();
        return;
      case 0x68:
        bVar4 = true;
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x6c:
        goto PRNT_OBJ_1F8;
      case 0x6e:
        if ((!bVar3) && (bVar4)) {
          *(undefined2 *)*unaff_s1 = uStack00000038;
          PRNT_OBJ_64C();
          return;
        }
        **unaff_s1 = (int)_uStack00000038;
        PRNT_OBJ_64C();
        return;
      case 0x70:
        PRNT_OBJ_3D0(uVar9,0x10);
        return;
      case 0x73:
        __s = (char *)*unaff_s1;
        if ((int *)__s == (int *)0x0) {
          __s = "(null)";
        }
        if ((int)piVar12 < 0) {
          iVar13 = strlen(__s);
          cVar15 = '\0';
        }
        else {
          pvVar6 = memchr((uchar *)__s,'\0',(int)piVar12);
          iVar13 = (int)pvVar6 - (int)__s;
          if ((pvVar6 == (void *)0x0) || (cVar15 = '\0', (int)piVar12 < iVar13)) {
            PRNT_OBJ_340();
            return;
          }
        }
        goto code_r0x80062c48;
      }
    }
    putchar(bVar8);
    unaff_s7 = unaff_s7 + 1;
  } while( true );
PRNT_OBJ_1F8:
  bVar3 = true;
  pbVar14 = unaff_s7;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar8 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    param_13 = (int *)((int)param_13 * 10 + -0x30 + (uint)bVar8);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar12 = (int *)__s;
    piVar16 = (int *)((uint)piVar7 / uVar9);
    if (uVar9 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar7 % uVar9];
    __s = (char *)((int)piVar12 + -1);
    *__s = uVar1;
    piVar7 = piVar16;
  } while (piVar16 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if (bVar5) {
    iVar13 = (int)auStackX_0 - (int)__s;
    if (uVar9 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar12 + -2);
      *__s = '0';
    }
  }
  iVar13 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar13 = iVar13 + 0x38;
code_r0x80062c48:
  piVar12 = (int *)(iVar13 + param_12);
  if (cVar15 != '\0') {
    piVar12 = (int *)((int)piVar12 + 1);
  }
  if (bVar2) {
    piVar12 = (int *)((int)piVar12 + 2);
  }
  piVar7 = param_11;
  if ((int)param_11 < (int)piVar12) {
    piVar7 = piVar12;
  }
  if (((uVar11 == 0) && (param_13 != (int *)0x0)) && (piVar16 = piVar7, (int)piVar7 < (int)param_13)
     ) {
    do {
      putchar(' ');
      piVar16 = (int *)((int)piVar16 + 1);
    } while ((int)piVar16 < (int)param_13);
  }
  if (cVar15 != '\0') {
    putchar(cVar15);
  }
  if (bVar2) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if ((uVar11 == 0x20) && (piVar16 = piVar7, (int)piVar7 < (int)param_13)) {
    do {
      putchar('0');
      piVar16 = (int *)((int)piVar16 + 1);
    } while ((int)piVar16 < (int)param_13);
  }
  if ((int)piVar12 < (int)param_11) {
    do {
      putchar('0');
      piVar12 = (int *)((int)piVar12 + 1);
    } while ((int)piVar12 < (int)param_11);
  }
  if ((-1 < iVar13 + -1) && (putchar(*__s), -1 < iVar13 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (param_12 = param_12 + -1, -1 < param_12) {
    putchar('0');
  }
  if (((uVar11 & 0x10) != 0) && (piVar12 = piVar7, (int)piVar7 < (int)param_13)) {
    do {
      putchar(' ');
      piVar12 = (int *)((int)piVar12 + 1);
    } while ((int)piVar12 < (int)param_13);
  }
  piVar12 = param_13;
  if ((int)param_13 < (int)piVar7) {
    piVar12 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar12);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_60(void)

{
  PRNT_OBJ_654();
  return;
}



void PRNT_OBJ_88(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int **unaff_s1;
  int **ppiVar6;
  char *__s;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar7;
  int iVar8;
  byte *unaff_s7;
  byte *pbVar9;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x80062860:
  do {
    pbVar9 = unaff_s7 + 1;
    ppiVar6 = unaff_s1;
    switch(*pbVar9) {
    case 0:
PRNT_OBJ_60:
      PRNT_OBJ_654();
      return;
    default:
      bVar4 = *pbVar9;
      _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
      do {
        putchar(bVar4);
        pbVar9 = pbVar9 + 1;
        bVar4 = *pbVar9;
        if (bVar4 == 0) goto PRNT_OBJ_60;
        unaff_s3 = 0;
      } while (bVar4 != 0x25);
      unaff_s4 = (int *)0xffffffff;
      unaff_s8 = 0;
      in_stack_00000040 = (int *)0x0;
      in_stack_00000048 = 0;
      in_stack_00000050 = (int *)0x0;
      param_1 = 0x25;
      unaff_s7 = pbVar9;
      break;
    case 0x20:
      unaff_s7 = pbVar9;
      if (unaff_s8 == 0) {
        PRNT_OBJ_88();
        return;
      }
      break;
    case 0x23:
      unaff_s3 = unaff_s3 | 8;
      unaff_s7 = pbVar9;
      break;
    case 0x2a:
      ppiVar6 = unaff_s1 + 1;
      in_stack_00000050 = *unaff_s1;
      unaff_s1 = ppiVar6;
      unaff_s7 = pbVar9;
      if (-1 < (int)in_stack_00000050) break;
      in_stack_00000050 = (int *)-(int)in_stack_00000050;
    case 0x2d:
      unaff_s3 = unaff_s3 | 0x10;
      unaff_s1 = ppiVar6;
      unaff_s7 = pbVar9;
      break;
    case 0x2b:
      unaff_s8 = 0x2b;
      unaff_s7 = pbVar9;
      break;
    case 0x2e:
      goto PRNT_OBJ_FC;
    case 0x30:
      unaff_s3 = unaff_s3 | 0x20;
      unaff_s7 = pbVar9;
      break;
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
      in_stack_00000050 = (int *)0x0;
      goto PRNT_OBJ_194;
    case 0x44:
      unaff_s3 = unaff_s3 | 1;
    case 100:
    case 0x69:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_24C();
        return;
      }
      piVar3 = *unaff_s1;
      uVar5 = 10;
      if ((int)piVar3 < 0) {
        PRNT_OBJ_3D4();
        return;
      }
code_r0x80062bac:
      in_stack_00000040 = unaff_s4;
      if (-1 < (int)unaff_s4) {
        unaff_s3 = unaff_s3 & 0xffffffdf;
      }
      __s = (char *)&stack0x00000038;
      if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s4 != (int *)0x0))
      goto PRNT_OBJ_3FC;
      goto PRNT_OBJ_46C;
    case 0x4c:
      unaff_s7 = pbVar9;
      break;
    case 0x4f:
      unaff_s3 = unaff_s3 | 1;
    case 0x6f:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,8);
        return;
      }
      PRNT_OBJ_3D0(param_1,8);
      return;
    case 0x55:
      unaff_s3 = unaff_s3 | 1;
    case 0x75:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,10);
        return;
      }
      PRNT_OBJ_3D0(param_1,10);
      return;
    case 0x58:
      in_stack_00000058 = "0123456789ABCDEF";
    case 0x78:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3BC();
        return;
      }
      piVar3 = *unaff_s1;
      uVar5 = 0x10;
      if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
        unaff_s8 = 0;
      }
      else {
        unaff_s8 = 0;
        if (piVar3 != (int *)0x0) {
          unaff_s3 = unaff_s3 | 0x40;
          goto code_r0x80062ba8;
        }
      }
      goto code_r0x80062bac;
    case 99:
      PRNT_OBJ_470();
      return;
    case 0x68:
      unaff_s3 = unaff_s3 | 4;
      unaff_s7 = pbVar9;
      break;
    case 0x6c:
      unaff_s3 = unaff_s3 | 1;
      unaff_s7 = pbVar9;
      break;
    case 0x6e:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        *(undefined2 *)*unaff_s1 = uStack00000038;
        PRNT_OBJ_64C();
        return;
      }
      **unaff_s1 = (int)_uStack00000038;
      PRNT_OBJ_64C();
      return;
    case 0x70:
      PRNT_OBJ_3D0(param_1,0x10);
      return;
    case 0x73:
      __s = (char *)*unaff_s1;
      if ((int *)__s == (int *)0x0) {
        __s = "(null)";
      }
      if ((int)unaff_s4 < 0) {
        iVar8 = strlen(__s);
        unaff_s8 = 0;
      }
      else {
        pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s4);
        iVar8 = (int)pvVar2 - (int)__s;
        if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar8)) {
          PRNT_OBJ_340();
          return;
        }
      }
      goto code_r0x80062c48;
    }
  } while( true );
PRNT_OBJ_FC:
  pbVar9 = unaff_s7 + 2;
  bVar4 = *pbVar9;
  if (bVar4 == 0x2a) {
    PRNT_OBJ_178();
    return;
  }
  unaff_s4 = (int *)0x0;
  while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
    pbVar9 = pbVar9 + 1;
    bVar4 = *pbVar9;
    unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
  }
  unaff_s7 = pbVar9 + -1;
  if ((int)unaff_s4 < 0) {
    PRNT_OBJ_88();
    return;
  }
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*pbVar9] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *pbVar9;
    pbVar9 = pbVar9 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *pbVar9) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*pbVar9);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_B8(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int **unaff_s1;
  int **ppiVar6;
  char *__s;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar7;
  int iVar8;
  byte *unaff_s7;
  byte *pbVar9;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x80062890:
  pbVar9 = unaff_s7;
  if (unaff_s8 == 0) {
    PRNT_OBJ_88();
    return;
  }
code_r0x80062860:
  unaff_s7 = pbVar9 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_60:
    PRNT_OBJ_654();
    return;
  default:
    bVar4 = *unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      putchar(bVar4);
      unaff_s7 = unaff_s7 + 1;
      bVar4 = *unaff_s7;
      if (bVar4 == 0) goto PRNT_OBJ_60;
      unaff_s3 = 0;
    } while (bVar4 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_00000040 = (int *)0x0;
    in_stack_00000048 = 0;
    in_stack_00000050 = (int *)0x0;
    param_1 = 0x25;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x20:
    goto code_r0x80062890;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000050 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
    in_stack_00000050 = (int *)-(int)in_stack_00000050;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2e:
    pbVar9 = pbVar9 + 2;
    bVar4 = *pbVar9;
    if (bVar4 == 0x2a) {
      PRNT_OBJ_178();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
      pbVar9 = pbVar9 + 1;
      bVar4 = *pbVar9;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar9 = pbVar9 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000050 = (int *)0x0;
    goto PRNT_OBJ_194;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_24C();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar3 < 0) {
      PRNT_OBJ_3D4();
      return;
    }
code_r0x80062bac:
    in_stack_00000040 = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    __s = (char *)&stack0x00000038;
    if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3FC;
    goto PRNT_OBJ_46C;
  case 0x4c:
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,8);
      return;
    }
    PRNT_OBJ_3D0(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,10);
      return;
    }
    PRNT_OBJ_3D0(param_1,10);
    return;
  case 0x58:
    in_stack_00000058 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3BC();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 0x10;
    if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
      unaff_s8 = 0;
    }
    else {
      unaff_s8 = 0;
      if (piVar3 != (int *)0x0) {
        unaff_s3 = unaff_s3 | 0x40;
        goto code_r0x80062ba8;
      }
    }
    goto code_r0x80062bac;
  case 99:
    PRNT_OBJ_470();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_64C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_64C();
    return;
  case 0x70:
    PRNT_OBJ_3D0(param_1,0x10);
    return;
  case 0x73:
    __s = (char *)*unaff_s1;
    if ((int *)__s == (int *)0x0) {
      __s = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar8 = strlen(__s);
      unaff_s8 = 0;
    }
    else {
      pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s4);
      iVar8 = (int)pvVar2 - (int)__s;
      if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar8)) {
        PRNT_OBJ_340();
        return;
      }
    }
    goto code_r0x80062c48;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar9 = unaff_s7;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_C8(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int **unaff_s1;
  int **ppiVar6;
  char *__s;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar7;
  int iVar8;
  byte *unaff_s7;
  byte *pbVar9;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x800628a0:
  unaff_s3 = unaff_s3 | 8;
  pbVar9 = unaff_s7;
code_r0x80062860:
  unaff_s7 = pbVar9 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_60:
    PRNT_OBJ_654();
    return;
  default:
    bVar4 = *unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      putchar(bVar4);
      unaff_s7 = unaff_s7 + 1;
      bVar4 = *unaff_s7;
      if (bVar4 == 0) goto PRNT_OBJ_60;
      unaff_s3 = 0;
    } while (bVar4 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_00000040 = (int *)0x0;
    in_stack_00000048 = 0;
    in_stack_00000050 = (int *)0x0;
    param_1 = 0x25;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x20:
    pbVar9 = unaff_s7;
    if (unaff_s8 == 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x23:
    goto code_r0x800628a0;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000050 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
    in_stack_00000050 = (int *)-(int)in_stack_00000050;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2e:
    pbVar9 = pbVar9 + 2;
    bVar4 = *pbVar9;
    if (bVar4 == 0x2a) {
      PRNT_OBJ_178();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
      pbVar9 = pbVar9 + 1;
      bVar4 = *pbVar9;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar9 = pbVar9 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000050 = (int *)0x0;
    goto PRNT_OBJ_194;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_24C();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar3 < 0) {
      PRNT_OBJ_3D4();
      return;
    }
code_r0x80062bac:
    in_stack_00000040 = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    __s = (char *)&stack0x00000038;
    if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3FC;
    goto PRNT_OBJ_46C;
  case 0x4c:
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,8);
      return;
    }
    PRNT_OBJ_3D0(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,10);
      return;
    }
    PRNT_OBJ_3D0(param_1,10);
    return;
  case 0x58:
    in_stack_00000058 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3BC();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 0x10;
    if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
      unaff_s8 = 0;
    }
    else {
      unaff_s8 = 0;
      if (piVar3 != (int *)0x0) {
        unaff_s3 = unaff_s3 | 0x40;
        goto code_r0x80062ba8;
      }
    }
    goto code_r0x80062bac;
  case 99:
    PRNT_OBJ_470();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_64C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_64C();
    return;
  case 0x70:
    PRNT_OBJ_3D0(param_1,0x10);
    return;
  case 0x73:
    __s = (char *)*unaff_s1;
    if ((int *)__s == (int *)0x0) {
      __s = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar8 = strlen(__s);
      unaff_s8 = 0;
    }
    else {
      pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s4);
      iVar8 = (int)pvVar2 - (int)__s;
      if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar8)) {
        PRNT_OBJ_340();
        return;
      }
    }
    goto code_r0x80062c48;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar9 = unaff_s7;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_D0(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  uint uVar3;
  byte bVar4;
  uint uVar5;
  int iVar6;
  int *unaff_s1;
  int *piVar7;
  undefined4 *puVar8;
  char *__s;
  uint unaff_s3;
  int unaff_s4;
  int iVar9;
  int iVar10;
  int iVar11;
  byte *unaff_s7;
  byte *pbVar12;
  uint unaff_s8;
  uint uVar13;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int in_stack_00000040;
  int in_stack_00000048;
  int param_11;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x800628a8:
  piVar7 = unaff_s1;
  param_11 = *piVar7;
  pbVar12 = unaff_s7;
  if (-1 < param_11) goto code_r0x80062860;
  param_11 = -param_11;
  goto PRNT_OBJ_EC;
code_r0x80062860:
  do {
    unaff_s7 = pbVar12 + 1;
    unaff_s1 = piVar7 + 1;
    switch(*unaff_s7) {
    case 0:
PRNT_OBJ_60:
      PRNT_OBJ_654();
      return;
    default:
      bVar4 = *unaff_s7;
      _uStack00000038 = _uStack00000038 + 1;
      do {
        putchar(bVar4);
        unaff_s7 = unaff_s7 + 1;
        bVar4 = *unaff_s7;
        if (bVar4 == 0) goto PRNT_OBJ_60;
        unaff_s3 = 0;
      } while (bVar4 != 0x25);
      unaff_s4 = -1;
      unaff_s8 = 0;
      in_stack_00000040 = 0;
      in_stack_00000048 = 0;
      param_11 = 0;
      param_1 = 0x25;
      pbVar12 = unaff_s7;
      break;
    case 0x20:
      pbVar12 = unaff_s7;
      if (unaff_s8 == 0) {
        PRNT_OBJ_88();
        return;
      }
      break;
    case 0x23:
      unaff_s3 = unaff_s3 | 8;
      pbVar12 = unaff_s7;
      break;
    case 0x2a:
      goto code_r0x800628a8;
    case 0x2b:
      unaff_s8 = 0x2b;
      pbVar12 = unaff_s7;
      break;
    case 0x2d:
PRNT_OBJ_EC:
      unaff_s3 = unaff_s3 | 0x10;
      pbVar12 = unaff_s7;
      break;
    case 0x2e:
      pbVar12 = pbVar12 + 2;
      bVar4 = *pbVar12;
      if (bVar4 == 0x2a) {
        PRNT_OBJ_178();
        return;
      }
      unaff_s4 = 0;
      while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar12, ((&DAT_80074d15)[param_1] & 4) != 0))) {
        pbVar12 = pbVar12 + 1;
        bVar4 = *pbVar12;
        unaff_s4 = unaff_s4 * 10 + -0x30 + param_1;
      }
      pbVar12 = pbVar12 + -1;
      if (unaff_s4 < 0) {
        PRNT_OBJ_88();
        return;
      }
      break;
    case 0x30:
      unaff_s3 = unaff_s3 | 0x20;
      pbVar12 = unaff_s7;
      break;
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
      param_11 = 0;
      goto PRNT_OBJ_194;
    case 0x44:
      unaff_s3 = unaff_s3 | 1;
    case 100:
    case 0x69:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_24C();
        return;
      }
      uVar3 = piVar7[1];
      uVar5 = 10;
      if ((int)uVar3 < 0) {
        PRNT_OBJ_3D4();
        return;
      }
      goto code_r0x80062bac;
    case 0x4c:
      pbVar12 = unaff_s7;
      break;
    case 0x4f:
      unaff_s3 = unaff_s3 | 1;
    case 0x6f:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,8);
        return;
      }
      PRNT_OBJ_3D0(param_1,8);
      return;
    case 0x55:
      unaff_s3 = unaff_s3 | 1;
    case 0x75:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,10);
        return;
      }
      PRNT_OBJ_3D0(param_1,10);
      return;
    case 0x58:
      in_stack_00000058 = "0123456789ABCDEF";
    case 0x78:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3BC();
        return;
      }
      uVar3 = piVar7[1];
      uVar5 = 0x10;
      if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
        unaff_s8 = 0;
      }
      else {
        unaff_s8 = 0;
        if (uVar3 != 0) {
          unaff_s3 = unaff_s3 | 0x40;
          goto code_r0x80062ba8;
        }
      }
code_r0x80062bac:
      in_stack_00000040 = unaff_s4;
      if (-1 < unaff_s4) {
        unaff_s3 = unaff_s3 & 0xffffffdf;
      }
      __s = (char *)&stack0x00000038;
      if ((uVar3 != 0) || (iVar11 = (int)auStackX_0 - (int)__s, unaff_s4 != 0)) goto PRNT_OBJ_3FC;
      goto PRNT_OBJ_46C;
    case 99:
      PRNT_OBJ_470();
      return;
    case 0x68:
      unaff_s3 = unaff_s3 | 4;
      pbVar12 = unaff_s7;
      break;
    case 0x6c:
      goto PRNT_OBJ_1F8;
    case 0x6e:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        *(undefined2 *)piVar7[1] = uStack00000038;
        PRNT_OBJ_64C();
        return;
      }
      *(int *)piVar7[1] = _uStack00000038;
      PRNT_OBJ_64C();
      return;
    case 0x70:
      PRNT_OBJ_3D0(param_1,0x10);
      return;
    case 0x73:
      __s = (char *)piVar7[1];
      if ((undefined4 *)__s == (undefined4 *)0x0) {
        __s = "(null)";
      }
      if (unaff_s4 < 0) {
        iVar11 = strlen(__s);
        unaff_s8 = 0;
      }
      else {
        pvVar2 = memchr((uchar *)__s,'\0',unaff_s4);
        iVar11 = (int)pvVar2 - (int)__s;
        if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, unaff_s4 < iVar11)) {
          PRNT_OBJ_340();
          return;
        }
      }
      goto code_r0x80062c48;
    }
  } while( true );
PRNT_OBJ_1F8:
  unaff_s3 = unaff_s3 | 1;
  pbVar12 = unaff_s7;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    param_11 = param_11 * 10 + -0x30 + (uint)bVar4;
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    puVar8 = (undefined4 *)__s;
    uVar13 = uVar3 / uVar5;
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[uVar3 % uVar5];
    __s = (char *)((int)puVar8 + -1);
    *__s = uVar1;
    uVar3 = uVar13;
  } while (uVar13 != 0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar11 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)puVar8 + -2);
      *__s = '0';
    }
  }
  iVar11 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar11 = iVar11 + 0x38;
code_r0x80062c48:
  iVar9 = iVar11 + in_stack_00000048;
  if (unaff_s8 != 0) {
    iVar9 = iVar9 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar9 = iVar9 + 2;
  }
  iVar10 = in_stack_00000040;
  if (in_stack_00000040 < iVar9) {
    iVar10 = iVar9;
  }
  if ((((unaff_s3 & 0x30) == 0) && (param_11 != 0)) && (iVar6 = iVar10, iVar10 < param_11)) {
    do {
      putchar(' ');
      iVar6 = iVar6 + 1;
    } while (iVar6 < param_11);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (iVar6 = iVar10, iVar10 < param_11)) {
    do {
      putchar('0');
      iVar6 = iVar6 + 1;
    } while (iVar6 < param_11);
  }
  if (iVar9 < in_stack_00000040) {
    do {
      putchar('0');
      iVar9 = iVar9 + 1;
    } while (iVar9 < in_stack_00000040);
  }
  if ((-1 < iVar11 + -1) && (putchar(*__s), -1 < iVar11 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (iVar11 = iVar10, iVar10 < param_11)) {
    do {
      putchar(' ');
      iVar11 = iVar11 + 1;
    } while (iVar11 < param_11);
  }
  iVar11 = param_11;
  if (param_11 < iVar10) {
    iVar11 = iVar10;
  }
  _uStack00000038 = _uStack00000038 + iVar11;
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_EC(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *__s;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar7;
  int iVar8;
  byte *unaff_s7;
  byte *pbVar9;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x800628c4:
  unaff_s3 = unaff_s3 | 0x10;
  ppiVar6 = unaff_s1;
  pbVar9 = unaff_s7;
code_r0x80062860:
  do {
    unaff_s7 = pbVar9 + 1;
    unaff_s1 = ppiVar6;
    switch(*unaff_s7) {
    case 0:
PRNT_OBJ_60:
      PRNT_OBJ_654();
      return;
    default:
      bVar4 = *unaff_s7;
      _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
      do {
        putchar(bVar4);
        unaff_s7 = unaff_s7 + 1;
        bVar4 = *unaff_s7;
        if (bVar4 == 0) goto PRNT_OBJ_60;
        unaff_s3 = 0;
      } while (bVar4 != 0x25);
      unaff_s4 = (int *)0xffffffff;
      unaff_s8 = 0;
      in_stack_00000040 = (int *)0x0;
      in_stack_00000048 = 0;
      in_stack_00000050 = (int *)0x0;
      param_1 = 0x25;
      pbVar9 = unaff_s7;
      break;
    case 0x20:
      pbVar9 = unaff_s7;
      if (unaff_s8 == 0) {
        PRNT_OBJ_88();
        return;
      }
      break;
    case 0x23:
      unaff_s3 = unaff_s3 | 8;
      pbVar9 = unaff_s7;
      break;
    case 0x2a:
      goto PRNT_OBJ_D0;
    case 0x2b:
      unaff_s8 = 0x2b;
      pbVar9 = unaff_s7;
      break;
    case 0x2d:
      goto code_r0x800628c4;
    case 0x2e:
      pbVar9 = pbVar9 + 2;
      bVar4 = *pbVar9;
      if (bVar4 == 0x2a) {
        PRNT_OBJ_178();
        return;
      }
      unaff_s4 = (int *)0x0;
      while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
        pbVar9 = pbVar9 + 1;
        bVar4 = *pbVar9;
        unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
      }
      pbVar9 = pbVar9 + -1;
      if ((int)unaff_s4 < 0) {
        PRNT_OBJ_88();
        return;
      }
      break;
    case 0x30:
      unaff_s3 = unaff_s3 | 0x20;
      pbVar9 = unaff_s7;
      break;
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
      in_stack_00000050 = (int *)0x0;
      goto PRNT_OBJ_194;
    case 0x44:
      unaff_s3 = unaff_s3 | 1;
    case 100:
    case 0x69:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_24C();
        return;
      }
      piVar3 = *ppiVar6;
      uVar5 = 10;
      if ((int)piVar3 < 0) {
        PRNT_OBJ_3D4();
        return;
      }
code_r0x80062bac:
      in_stack_00000040 = unaff_s4;
      if (-1 < (int)unaff_s4) {
        unaff_s3 = unaff_s3 & 0xffffffdf;
      }
      __s = (char *)&stack0x00000038;
      if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s4 != (int *)0x0))
      goto PRNT_OBJ_3FC;
      goto PRNT_OBJ_46C;
    case 0x4c:
      pbVar9 = unaff_s7;
      break;
    case 0x4f:
      unaff_s3 = unaff_s3 | 1;
    case 0x6f:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,8);
        return;
      }
      PRNT_OBJ_3D0(param_1,8);
      return;
    case 0x55:
      unaff_s3 = unaff_s3 | 1;
    case 0x75:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,10);
        return;
      }
      PRNT_OBJ_3D0(param_1,10);
      return;
    case 0x58:
      in_stack_00000058 = "0123456789ABCDEF";
    case 0x78:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3BC();
        return;
      }
      piVar3 = *ppiVar6;
      uVar5 = 0x10;
      if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
        unaff_s8 = 0;
      }
      else {
        unaff_s8 = 0;
        if (piVar3 != (int *)0x0) {
          unaff_s3 = unaff_s3 | 0x40;
          goto code_r0x80062ba8;
        }
      }
      goto code_r0x80062bac;
    case 99:
      PRNT_OBJ_470();
      return;
    case 0x68:
      unaff_s3 = unaff_s3 | 4;
      pbVar9 = unaff_s7;
      break;
    case 0x6c:
      unaff_s3 = unaff_s3 | 1;
      pbVar9 = unaff_s7;
      break;
    case 0x6e:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        *(undefined2 *)*ppiVar6 = uStack00000038;
        PRNT_OBJ_64C();
        return;
      }
      **ppiVar6 = (int)_uStack00000038;
      PRNT_OBJ_64C();
      return;
    case 0x70:
      PRNT_OBJ_3D0(param_1,0x10);
      return;
    case 0x73:
      __s = (char *)*ppiVar6;
      if ((int *)__s == (int *)0x0) {
        __s = "(null)";
      }
      if ((int)unaff_s4 < 0) {
        iVar8 = strlen(__s);
        unaff_s8 = 0;
      }
      else {
        pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s4);
        iVar8 = (int)pvVar2 - (int)__s;
        if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar8)) {
          PRNT_OBJ_340();
          return;
        }
      }
      goto code_r0x80062c48;
    }
  } while( true );
PRNT_OBJ_D0:
  unaff_s1 = ppiVar6 + 1;
  in_stack_00000050 = *ppiVar6;
  ppiVar6 = unaff_s1;
  pbVar9 = unaff_s7;
  if ((int)in_stack_00000050 < 0) goto code_r0x800628bc;
  goto code_r0x80062860;
code_r0x800628bc:
  in_stack_00000050 = (int *)-(int)in_stack_00000050;
  goto code_r0x800628c4;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_F4(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *__s;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar7;
  int iVar8;
  byte *unaff_s7;
  byte *pbVar9;
  char cVar10;
  int *piVar11;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x800628cc:
  cVar10 = '+';
  pbVar9 = unaff_s7;
code_r0x80062860:
  unaff_s7 = pbVar9 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_60:
    PRNT_OBJ_654();
    return;
  default:
    bVar4 = *unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      putchar(bVar4);
      unaff_s7 = unaff_s7 + 1;
      bVar4 = *unaff_s7;
      if (bVar4 == 0) goto PRNT_OBJ_60;
      unaff_s3 = 0;
    } while (bVar4 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    cVar10 = '\0';
    in_stack_00000040 = (int *)0x0;
    in_stack_00000048 = 0;
    in_stack_00000050 = (int *)0x0;
    param_1 = 0x25;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x20:
    pbVar9 = unaff_s7;
    if (cVar10 == '\0') {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000050 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
    in_stack_00000050 = (int *)-(int)in_stack_00000050;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2b:
    goto code_r0x800628cc;
  case 0x2e:
    pbVar9 = pbVar9 + 2;
    bVar4 = *pbVar9;
    if (bVar4 == 0x2a) {
      PRNT_OBJ_178();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
      pbVar9 = pbVar9 + 1;
      bVar4 = *pbVar9;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar9 = pbVar9 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000050 = (int *)0x0;
    goto PRNT_OBJ_194;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_24C();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar3 < 0) {
      PRNT_OBJ_3D4();
      return;
    }
code_r0x80062bac:
    in_stack_00000040 = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    __s = (char *)&stack0x00000038;
    if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3FC;
    goto PRNT_OBJ_46C;
  case 0x4c:
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,8);
      return;
    }
    PRNT_OBJ_3D0(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,10);
      return;
    }
    PRNT_OBJ_3D0(param_1,10);
    return;
  case 0x58:
    in_stack_00000058 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3BC();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 0x10;
    if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
      cVar10 = '\0';
    }
    else {
      cVar10 = '\0';
      if (piVar3 != (int *)0x0) {
        unaff_s3 = unaff_s3 | 0x40;
        goto code_r0x80062ba8;
      }
    }
    goto code_r0x80062bac;
  case 99:
    PRNT_OBJ_470();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_64C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_64C();
    return;
  case 0x70:
    PRNT_OBJ_3D0(param_1,0x10);
    return;
  case 0x73:
    __s = (char *)*unaff_s1;
    if ((int *)__s == (int *)0x0) {
      __s = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar8 = strlen(__s);
      cVar10 = '\0';
    }
    else {
      pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s4);
      iVar8 = (int)pvVar2 - (int)__s;
      if ((pvVar2 == (void *)0x0) || (cVar10 = '\0', (int)unaff_s4 < iVar8)) {
        PRNT_OBJ_340();
        return;
      }
    }
    goto code_r0x80062c48;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar9 = unaff_s7;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar11 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar11;
  } while (piVar11 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (cVar10 != '\0') {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar11 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000050);
  }
  if (cVar10 != '\0') {
    putchar(cVar10);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar11 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar11 = (int *)((int)piVar11 + 1);
    } while ((int)piVar11 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_FC(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int *piVar6;
  int **ppiVar7;
  int **unaff_s1;
  char *__s;
  uint unaff_s3;
  int iVar8;
  byte *unaff_s7;
  byte *pbVar9;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x800628d4:
  pbVar9 = unaff_s7 + 1;
  bVar4 = *pbVar9;
  if (bVar4 == 0x2a) {
    PRNT_OBJ_178();
    return;
  }
  piVar6 = (int *)0x0;
  while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
    pbVar9 = pbVar9 + 1;
    bVar4 = *pbVar9;
    piVar6 = (int *)((int)piVar6 * 10 + -0x30 + param_1);
  }
  unaff_s7 = pbVar9 + -1;
  if ((int)piVar6 < 0) {
    PRNT_OBJ_88();
    return;
  }
code_r0x80062860:
  unaff_s7 = unaff_s7 + 1;
  ppiVar7 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_60:
    PRNT_OBJ_654();
    return;
  default:
    bVar4 = *unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      putchar(bVar4);
      unaff_s7 = unaff_s7 + 1;
      bVar4 = *unaff_s7;
      if (bVar4 == 0) goto PRNT_OBJ_60;
      unaff_s3 = 0;
    } while (bVar4 != 0x25);
    piVar6 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_00000040 = (int *)0x0;
    in_stack_00000048 = 0;
    in_stack_00000050 = (int *)0x0;
    param_1 = 0x25;
    goto code_r0x80062860;
  case 0x20:
    if (unaff_s8 == 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    goto code_r0x80062860;
  case 0x2a:
    ppiVar7 = unaff_s1 + 1;
    in_stack_00000050 = *unaff_s1;
    unaff_s1 = ppiVar7;
    if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
    in_stack_00000050 = (int *)-(int)in_stack_00000050;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar7;
    goto code_r0x80062860;
  case 0x2b:
    unaff_s8 = 0x2b;
    goto code_r0x80062860;
  case 0x2e:
    goto code_r0x800628d4;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    goto code_r0x80062860;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000050 = (int *)0x0;
    goto PRNT_OBJ_194;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_24C();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar3 < 0) {
      PRNT_OBJ_3D4();
      return;
    }
code_r0x80062bac:
    in_stack_00000040 = piVar6;
    if (-1 < (int)piVar6) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    __s = (char *)&stack0x00000038;
    if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, piVar6 != (int *)0x0))
    goto PRNT_OBJ_3FC;
    goto PRNT_OBJ_46C;
  case 0x4c:
    goto code_r0x80062860;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,8);
      return;
    }
    PRNT_OBJ_3D0(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,10);
      return;
    }
    PRNT_OBJ_3D0(param_1,10);
    return;
  case 0x58:
    in_stack_00000058 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3BC();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 0x10;
    if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
      unaff_s8 = 0;
    }
    else {
      unaff_s8 = 0;
      if (piVar3 != (int *)0x0) {
        unaff_s3 = unaff_s3 | 0x40;
        goto code_r0x80062ba8;
      }
    }
    goto code_r0x80062bac;
  case 99:
    PRNT_OBJ_470();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    goto code_r0x80062860;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_64C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_64C();
    return;
  case 0x70:
    PRNT_OBJ_3D0(param_1,0x10);
    return;
  case 0x73:
    __s = (char *)*unaff_s1;
    if ((int *)__s == (int *)0x0) {
      __s = "(null)";
    }
    if ((int)piVar6 < 0) {
      iVar8 = strlen(__s);
      unaff_s8 = 0;
    }
    else {
      pvVar2 = memchr((uchar *)__s,'\0',(int)piVar6);
      iVar8 = (int)pvVar2 - (int)__s;
      if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)piVar6 < iVar8)) {
        PRNT_OBJ_340();
        return;
      }
    }
    goto code_r0x80062c48;
  }
  unaff_s3 = unaff_s3 | 1;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar6 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar6 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar6 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar6 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar6 = (int *)((int)piVar6 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar6 = (int *)((int)piVar6 + 2);
  }
  piVar3 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar6) {
    piVar3 = piVar6;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar3, (int)piVar3 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar3, (int)piVar3 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar6 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar6 = (int *)((int)piVar6 + 1);
    } while ((int)piVar6 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar6 = piVar3, (int)piVar3 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar6 = (int *)((int)piVar6 + 1);
    } while ((int)piVar6 < (int)in_stack_00000050);
  }
  piVar6 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar3) {
    piVar6 = piVar3;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar6);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_178(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int *unaff_s0;
  int **ppiVar6;
  int **unaff_s1;
  char *__s;
  uint unaff_s3;
  int *piVar7;
  int iVar8;
  byte *pbVar9;
  byte *unaff_s7;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
  do {
    if ((int)unaff_s0 < 0) {
      PRNT_OBJ_88();
      return;
    }
code_r0x80062860:
    pbVar9 = unaff_s7 + 1;
    ppiVar6 = unaff_s1;
    switch(*pbVar9) {
    case 0:
PRNT_OBJ_60:
      PRNT_OBJ_654();
      return;
    default:
      bVar4 = *pbVar9;
      _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
      do {
        putchar(bVar4);
        pbVar9 = pbVar9 + 1;
        bVar4 = *pbVar9;
        if (bVar4 == 0) goto PRNT_OBJ_60;
        unaff_s3 = 0;
      } while (bVar4 != 0x25);
      unaff_s0 = (int *)0xffffffff;
      unaff_s8 = 0;
      in_stack_00000040 = (int *)0x0;
      in_stack_00000048 = 0;
      in_stack_00000050 = (int *)0x0;
      param_1 = 0x25;
      unaff_s7 = pbVar9;
      goto code_r0x80062860;
    case 0x20:
      unaff_s7 = pbVar9;
      if (unaff_s8 == 0) {
        PRNT_OBJ_88();
        return;
      }
      goto code_r0x80062860;
    case 0x23:
      unaff_s3 = unaff_s3 | 8;
      unaff_s7 = pbVar9;
      goto code_r0x80062860;
    case 0x2a:
      ppiVar6 = unaff_s1 + 1;
      in_stack_00000050 = *unaff_s1;
      unaff_s1 = ppiVar6;
      unaff_s7 = pbVar9;
      if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
      in_stack_00000050 = (int *)-(int)in_stack_00000050;
    case 0x2d:
      unaff_s3 = unaff_s3 | 0x10;
      unaff_s1 = ppiVar6;
      unaff_s7 = pbVar9;
      goto code_r0x80062860;
    case 0x2b:
      unaff_s8 = 0x2b;
      unaff_s7 = pbVar9;
      goto code_r0x80062860;
    case 0x2e:
      pbVar9 = unaff_s7 + 2;
      bVar4 = *pbVar9;
      if (bVar4 == 0x2a) {
        PRNT_OBJ_178();
        return;
      }
      unaff_s0 = (int *)0x0;
      while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
        pbVar9 = pbVar9 + 1;
        bVar4 = *pbVar9;
        unaff_s0 = (int *)((int)unaff_s0 * 10 + -0x30 + param_1);
      }
      unaff_s7 = pbVar9 + -1;
      break;
    case 0x30:
      unaff_s3 = unaff_s3 | 0x20;
      unaff_s7 = pbVar9;
      goto code_r0x80062860;
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
      in_stack_00000050 = (int *)0x0;
      goto PRNT_OBJ_194;
    case 0x44:
      unaff_s3 = unaff_s3 | 1;
    case 100:
    case 0x69:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_24C();
        return;
      }
      piVar3 = *unaff_s1;
      uVar5 = 10;
      if ((int)piVar3 < 0) {
        PRNT_OBJ_3D4();
        return;
      }
code_r0x80062bac:
      in_stack_00000040 = unaff_s0;
      if (-1 < (int)unaff_s0) {
        unaff_s3 = unaff_s3 & 0xffffffdf;
      }
      __s = (char *)&stack0x00000038;
      if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s0 != (int *)0x0))
      goto PRNT_OBJ_3FC;
      goto PRNT_OBJ_46C;
    case 0x4c:
      unaff_s7 = pbVar9;
      goto code_r0x80062860;
    case 0x4f:
      unaff_s3 = unaff_s3 | 1;
    case 0x6f:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,8);
        return;
      }
      PRNT_OBJ_3D0(param_1,8);
      return;
    case 0x55:
      unaff_s3 = unaff_s3 | 1;
    case 0x75:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,10);
        return;
      }
      PRNT_OBJ_3D0(param_1,10);
      return;
    case 0x58:
      in_stack_00000058 = "0123456789ABCDEF";
    case 0x78:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3BC();
        return;
      }
      piVar3 = *unaff_s1;
      uVar5 = 0x10;
      if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
        unaff_s8 = 0;
      }
      else {
        unaff_s8 = 0;
        if (piVar3 != (int *)0x0) {
          unaff_s3 = unaff_s3 | 0x40;
          goto code_r0x80062ba8;
        }
      }
      goto code_r0x80062bac;
    case 99:
      PRNT_OBJ_470();
      return;
    case 0x68:
      unaff_s3 = unaff_s3 | 4;
      unaff_s7 = pbVar9;
      goto code_r0x80062860;
    case 0x6c:
      goto PRNT_OBJ_1F8;
    case 0x6e:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        *(undefined2 *)*unaff_s1 = uStack00000038;
        PRNT_OBJ_64C();
        return;
      }
      **unaff_s1 = (int)_uStack00000038;
      PRNT_OBJ_64C();
      return;
    case 0x70:
      PRNT_OBJ_3D0(param_1,0x10);
      return;
    case 0x73:
      __s = (char *)*unaff_s1;
      if ((int *)__s == (int *)0x0) {
        __s = "(null)";
      }
      if ((int)unaff_s0 < 0) {
        iVar8 = strlen(__s);
        unaff_s8 = 0;
      }
      else {
        pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s0);
        iVar8 = (int)pvVar2 - (int)__s;
        if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s0 < iVar8)) {
          PRNT_OBJ_340();
          return;
        }
      }
      goto code_r0x80062c48;
    }
  } while( true );
PRNT_OBJ_1F8:
  unaff_s3 = unaff_s3 | 1;
  unaff_s7 = pbVar9;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*pbVar9] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *pbVar9;
    pbVar9 = pbVar9 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *pbVar9) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*pbVar9);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_188(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *__s;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar7;
  int iVar8;
  byte *pbVar9;
  byte *unaff_s7;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x80062960:
  unaff_s3 = unaff_s3 | 0x20;
  pbVar9 = unaff_s7;
code_r0x80062860:
  unaff_s7 = pbVar9 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_60:
    PRNT_OBJ_654();
    return;
  default:
    bVar4 = *unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      putchar(bVar4);
      unaff_s7 = unaff_s7 + 1;
      bVar4 = *unaff_s7;
      if (bVar4 == 0) goto PRNT_OBJ_60;
      unaff_s3 = 0;
    } while (bVar4 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_00000040 = (int *)0x0;
    in_stack_00000048 = 0;
    in_stack_00000050 = (int *)0x0;
    param_1 = 0x25;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x20:
    pbVar9 = unaff_s7;
    if (unaff_s8 == 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000050 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
    in_stack_00000050 = (int *)-(int)in_stack_00000050;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2e:
    pbVar9 = pbVar9 + 2;
    bVar4 = *pbVar9;
    if (bVar4 == 0x2a) {
      PRNT_OBJ_178();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
      pbVar9 = pbVar9 + 1;
      bVar4 = *pbVar9;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar9 = pbVar9 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x30:
    goto code_r0x80062960;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000050 = (int *)0x0;
    goto PRNT_OBJ_194;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_24C();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar3 < 0) {
      PRNT_OBJ_3D4();
      return;
    }
code_r0x80062bac:
    in_stack_00000040 = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    __s = (char *)&stack0x00000038;
    if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3FC;
    goto PRNT_OBJ_46C;
  case 0x4c:
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,8);
      return;
    }
    PRNT_OBJ_3D0(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,10);
      return;
    }
    PRNT_OBJ_3D0(param_1,10);
    return;
  case 0x58:
    in_stack_00000058 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3BC();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 0x10;
    if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
      unaff_s8 = 0;
    }
    else {
      unaff_s8 = 0;
      if (piVar3 != (int *)0x0) {
        unaff_s3 = unaff_s3 | 0x40;
        goto code_r0x80062ba8;
      }
    }
    goto code_r0x80062bac;
  case 99:
    PRNT_OBJ_470();
    return;
  case 0x68:
    unaff_s3 = unaff_s3 | 4;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_64C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_64C();
    return;
  case 0x70:
    PRNT_OBJ_3D0(param_1,0x10);
    return;
  case 0x73:
    __s = (char *)*unaff_s1;
    if ((int *)__s == (int *)0x0) {
      __s = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar8 = strlen(__s);
      unaff_s8 = 0;
    }
    else {
      pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s4);
      iVar8 = (int)pvVar2 - (int)__s;
      if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar8)) {
        PRNT_OBJ_340();
        return;
      }
    }
    goto code_r0x80062c48;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar9 = unaff_s7;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_190(void)

{
  byte bVar1;
  byte *unaff_s7;
  int param_11;
  
  param_11 = 0;
  do {
    bVar1 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    param_11 = param_11 * 10 + -0x30 + (uint)bVar1;
    if (0x7f < *unaff_s7) break;
  } while (((&DAT_80074d15)[*unaff_s7] & 4) != 0);
  PRNT_OBJ_88();
  return;
}



void PRNT_OBJ_1E8(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *__s;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar7;
  int iVar8;
  byte *pbVar9;
  byte *unaff_s7;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x80062860:
  do {
    pbVar9 = unaff_s7;
    unaff_s7 = pbVar9 + 1;
    ppiVar6 = unaff_s1;
    switch(*unaff_s7) {
    case 0:
PRNT_OBJ_60:
      PRNT_OBJ_654();
      return;
    default:
      bVar4 = *unaff_s7;
      _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
      do {
        putchar(bVar4);
        unaff_s7 = unaff_s7 + 1;
        bVar4 = *unaff_s7;
        if (bVar4 == 0) goto PRNT_OBJ_60;
        unaff_s3 = 0;
      } while (bVar4 != 0x25);
      unaff_s4 = (int *)0xffffffff;
      unaff_s8 = 0;
      in_stack_00000040 = (int *)0x0;
      in_stack_00000048 = 0;
      in_stack_00000050 = (int *)0x0;
      param_1 = 0x25;
      break;
    case 0x20:
      if (unaff_s8 == 0) {
        PRNT_OBJ_88();
        return;
      }
      break;
    case 0x23:
      unaff_s3 = unaff_s3 | 8;
      break;
    case 0x2a:
      ppiVar6 = unaff_s1 + 1;
      in_stack_00000050 = *unaff_s1;
      unaff_s1 = ppiVar6;
      if (-1 < (int)in_stack_00000050) break;
      in_stack_00000050 = (int *)-(int)in_stack_00000050;
    case 0x2d:
      unaff_s3 = unaff_s3 | 0x10;
      unaff_s1 = ppiVar6;
      break;
    case 0x2b:
      unaff_s8 = 0x2b;
      break;
    case 0x2e:
      pbVar9 = pbVar9 + 2;
      bVar4 = *pbVar9;
      if (bVar4 == 0x2a) {
        PRNT_OBJ_178();
        return;
      }
      unaff_s4 = (int *)0x0;
      while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
        pbVar9 = pbVar9 + 1;
        bVar4 = *pbVar9;
        unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
      }
      unaff_s7 = pbVar9 + -1;
      if ((int)unaff_s4 < 0) {
        PRNT_OBJ_88();
        return;
      }
      break;
    case 0x30:
      unaff_s3 = unaff_s3 | 0x20;
      break;
    case 0x31:
    case 0x32:
    case 0x33:
    case 0x34:
    case 0x35:
    case 0x36:
    case 0x37:
    case 0x38:
    case 0x39:
      in_stack_00000050 = (int *)0x0;
      goto PRNT_OBJ_194;
    case 0x44:
      unaff_s3 = unaff_s3 | 1;
    case 100:
    case 0x69:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_24C();
        return;
      }
      piVar3 = *unaff_s1;
      uVar5 = 10;
      if ((int)piVar3 < 0) {
        PRNT_OBJ_3D4();
        return;
      }
code_r0x80062bac:
      in_stack_00000040 = unaff_s4;
      if (-1 < (int)unaff_s4) {
        unaff_s3 = unaff_s3 & 0xffffffdf;
      }
      __s = (char *)&stack0x00000038;
      if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s4 != (int *)0x0))
      goto PRNT_OBJ_3FC;
      goto PRNT_OBJ_46C;
    case 0x4f:
      unaff_s3 = unaff_s3 | 1;
    case 0x6f:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,8);
        return;
      }
      PRNT_OBJ_3D0(param_1,8);
      return;
    case 0x55:
      unaff_s3 = unaff_s3 | 1;
    case 0x75:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3D0(param_1,10);
        return;
      }
      PRNT_OBJ_3D0(param_1,10);
      return;
    case 0x58:
      in_stack_00000058 = "0123456789ABCDEF";
    case 0x78:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        PRNT_OBJ_3BC();
        return;
      }
      piVar3 = *unaff_s1;
      uVar5 = 0x10;
      if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
        unaff_s8 = 0;
      }
      else {
        unaff_s8 = 0;
        if (piVar3 != (int *)0x0) {
          unaff_s3 = unaff_s3 | 0x40;
          goto code_r0x80062ba8;
        }
      }
      goto code_r0x80062bac;
    case 99:
      PRNT_OBJ_470();
      return;
    case 0x68:
      unaff_s3 = unaff_s3 | 4;
      break;
    case 0x6c:
      goto PRNT_OBJ_1F8;
    case 0x6e:
      if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
        *(undefined2 *)*unaff_s1 = uStack00000038;
        PRNT_OBJ_64C();
        return;
      }
      **unaff_s1 = (int)_uStack00000038;
      PRNT_OBJ_64C();
      return;
    case 0x70:
      PRNT_OBJ_3D0(param_1,0x10);
      return;
    case 0x73:
      __s = (char *)*unaff_s1;
      if ((int *)__s == (int *)0x0) {
        __s = "(null)";
      }
      if ((int)unaff_s4 < 0) {
        iVar8 = strlen(__s);
        unaff_s8 = 0;
      }
      else {
        pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s4);
        iVar8 = (int)pvVar2 - (int)__s;
        if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar8)) {
          PRNT_OBJ_340();
          return;
        }
      }
      goto code_r0x80062c48;
    }
  } while( true );
PRNT_OBJ_1F8:
  unaff_s3 = unaff_s3 | 1;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_1F0(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *__s;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar7;
  int iVar8;
  byte *pbVar9;
  byte *unaff_s7;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x800629c8:
  unaff_s3 = unaff_s3 | 4;
  pbVar9 = unaff_s7;
code_r0x80062860:
  unaff_s7 = pbVar9 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_60:
    PRNT_OBJ_654();
    return;
  default:
    bVar4 = *unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      putchar(bVar4);
      unaff_s7 = unaff_s7 + 1;
      bVar4 = *unaff_s7;
      if (bVar4 == 0) goto PRNT_OBJ_60;
      unaff_s3 = 0;
    } while (bVar4 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_00000040 = (int *)0x0;
    in_stack_00000048 = 0;
    in_stack_00000050 = (int *)0x0;
    param_1 = 0x25;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x20:
    pbVar9 = unaff_s7;
    if (unaff_s8 == 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000050 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
    in_stack_00000050 = (int *)-(int)in_stack_00000050;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2e:
    pbVar9 = pbVar9 + 2;
    bVar4 = *pbVar9;
    if (bVar4 == 0x2a) {
      PRNT_OBJ_178();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
      pbVar9 = pbVar9 + 1;
      bVar4 = *pbVar9;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar9 = pbVar9 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000050 = (int *)0x0;
    goto PRNT_OBJ_194;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_24C();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar3 < 0) {
      PRNT_OBJ_3D4();
      return;
    }
code_r0x80062bac:
    in_stack_00000040 = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    __s = (char *)&stack0x00000038;
    if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3FC;
    goto PRNT_OBJ_46C;
  case 0x4c:
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,8);
      return;
    }
    PRNT_OBJ_3D0(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,10);
      return;
    }
    PRNT_OBJ_3D0(param_1,10);
    return;
  case 0x58:
    in_stack_00000058 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3BC();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 0x10;
    if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
      unaff_s8 = 0;
    }
    else {
      unaff_s8 = 0;
      if (piVar3 != (int *)0x0) {
        unaff_s3 = unaff_s3 | 0x40;
        goto code_r0x80062ba8;
      }
    }
    goto code_r0x80062bac;
  case 99:
    PRNT_OBJ_470();
    return;
  case 0x68:
    goto code_r0x800629c8;
  case 0x6c:
    break;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_64C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_64C();
    return;
  case 0x70:
    PRNT_OBJ_3D0(param_1,0x10);
    return;
  case 0x73:
    __s = (char *)*unaff_s1;
    if ((int *)__s == (int *)0x0) {
      __s = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar8 = strlen(__s);
      unaff_s8 = 0;
    }
    else {
      pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s4);
      iVar8 = (int)pvVar2 - (int)__s;
      if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar8)) {
        PRNT_OBJ_340();
        return;
      }
    }
    goto code_r0x80062c48;
  }
  unaff_s3 = unaff_s3 | 1;
  pbVar9 = unaff_s7;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_1F8(uint param_1)

{
  uchar uVar1;
  void *pvVar2;
  int *piVar3;
  byte bVar4;
  uint uVar5;
  int **ppiVar6;
  int **unaff_s1;
  char *__s;
  uint unaff_s3;
  int *unaff_s4;
  int *piVar7;
  int iVar8;
  byte *pbVar9;
  byte *unaff_s7;
  uint unaff_s8;
  int *piVar10;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x800629d0:
  unaff_s3 = unaff_s3 | 1;
  pbVar9 = unaff_s7;
code_r0x80062860:
  unaff_s7 = pbVar9 + 1;
  ppiVar6 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
PRNT_OBJ_60:
    PRNT_OBJ_654();
    return;
  default:
    bVar4 = *unaff_s7;
    _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
    do {
      putchar(bVar4);
      unaff_s7 = unaff_s7 + 1;
      bVar4 = *unaff_s7;
      if (bVar4 == 0) goto PRNT_OBJ_60;
      unaff_s3 = 0;
    } while (bVar4 != 0x25);
    unaff_s4 = (int *)0xffffffff;
    unaff_s8 = 0;
    in_stack_00000040 = (int *)0x0;
    in_stack_00000048 = 0;
    in_stack_00000050 = (int *)0x0;
    param_1 = 0x25;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x20:
    pbVar9 = unaff_s7;
    if (unaff_s8 == 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x23:
    unaff_s3 = unaff_s3 | 8;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2a:
    ppiVar6 = unaff_s1 + 1;
    in_stack_00000050 = *unaff_s1;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
    in_stack_00000050 = (int *)-(int)in_stack_00000050;
  case 0x2d:
    unaff_s3 = unaff_s3 | 0x10;
    unaff_s1 = ppiVar6;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2b:
    unaff_s8 = 0x2b;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x2e:
    pbVar9 = pbVar9 + 2;
    bVar4 = *pbVar9;
    if (bVar4 == 0x2a) {
      PRNT_OBJ_178();
      return;
    }
    unaff_s4 = (int *)0x0;
    while ((bVar4 < 0x80 && (param_1 = (uint)*pbVar9, ((&DAT_80074d15)[param_1] & 4) != 0))) {
      pbVar9 = pbVar9 + 1;
      bVar4 = *pbVar9;
      unaff_s4 = (int *)((int)unaff_s4 * 10 + -0x30 + param_1);
    }
    pbVar9 = pbVar9 + -1;
    if ((int)unaff_s4 < 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x30:
    unaff_s3 = unaff_s3 | 0x20;
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000050 = (int *)0x0;
    goto PRNT_OBJ_194;
  case 0x44:
    unaff_s3 = unaff_s3 | 1;
  case 100:
  case 0x69:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_24C();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 10;
    if ((int)piVar3 < 0) {
      PRNT_OBJ_3D4();
      return;
    }
code_r0x80062bac:
    in_stack_00000040 = unaff_s4;
    if (-1 < (int)unaff_s4) {
      unaff_s3 = unaff_s3 & 0xffffffdf;
    }
    __s = (char *)&stack0x00000038;
    if ((piVar3 != (int *)0x0) || (iVar8 = (int)auStackX_0 - (int)__s, unaff_s4 != (int *)0x0))
    goto PRNT_OBJ_3FC;
    goto PRNT_OBJ_46C;
  case 0x4c:
    pbVar9 = unaff_s7;
    goto code_r0x80062860;
  case 0x4f:
    unaff_s3 = unaff_s3 | 1;
  case 0x6f:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,8);
      return;
    }
    PRNT_OBJ_3D0(param_1,8);
    return;
  case 0x55:
    unaff_s3 = unaff_s3 | 1;
  case 0x75:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3D0(param_1,10);
      return;
    }
    PRNT_OBJ_3D0(param_1,10);
    return;
  case 0x58:
    in_stack_00000058 = "0123456789ABCDEF";
  case 0x78:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      PRNT_OBJ_3BC();
      return;
    }
    piVar3 = *unaff_s1;
    uVar5 = 0x10;
    if ((unaff_s3 & 8) == 0) {
code_r0x80062ba8:
      unaff_s8 = 0;
    }
    else {
      unaff_s8 = 0;
      if (piVar3 != (int *)0x0) {
        unaff_s3 = unaff_s3 | 0x40;
        goto code_r0x80062ba8;
      }
    }
    goto code_r0x80062bac;
  case 99:
    PRNT_OBJ_470();
    return;
  case 0x68:
    break;
  case 0x6c:
    goto code_r0x800629d0;
  case 0x6e:
    if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
      *(undefined2 *)*unaff_s1 = uStack00000038;
      PRNT_OBJ_64C();
      return;
    }
    **unaff_s1 = (int)_uStack00000038;
    PRNT_OBJ_64C();
    return;
  case 0x70:
    PRNT_OBJ_3D0(param_1,0x10);
    return;
  case 0x73:
    __s = (char *)*unaff_s1;
    if ((int *)__s == (int *)0x0) {
      __s = "(null)";
    }
    if ((int)unaff_s4 < 0) {
      iVar8 = strlen(__s);
      unaff_s8 = 0;
    }
    else {
      pvVar2 = memchr((uchar *)__s,'\0',(int)unaff_s4);
      iVar8 = (int)pvVar2 - (int)__s;
      if ((pvVar2 == (void *)0x0) || (unaff_s8 = 0, (int)unaff_s4 < iVar8)) {
        PRNT_OBJ_340();
        return;
      }
    }
    goto code_r0x80062c48;
  }
  unaff_s3 = unaff_s3 | 4;
  pbVar9 = unaff_s7;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar4 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar4);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar7 = (int *)__s;
    piVar10 = (int *)((uint)piVar3 / uVar5);
    if (uVar5 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar3 % uVar5];
    __s = (char *)((int)piVar7 + -1);
    *__s = uVar1;
    piVar3 = piVar10;
  } while (piVar10 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if ((unaff_s3 & 8) != 0) {
    iVar8 = (int)auStackX_0 - (int)__s;
    if (uVar5 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar7 + -2);
      *__s = '0';
    }
  }
  iVar8 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar8 = iVar8 + 0x38;
code_r0x80062c48:
  piVar3 = (int *)(iVar8 + in_stack_00000048);
  if (unaff_s8 != 0) {
    piVar3 = (int *)((int)piVar3 + 1);
  }
  if ((unaff_s3 & 0x40) != 0) {
    piVar3 = (int *)((int)piVar3 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar3) {
    piVar7 = piVar3;
  }
  if ((((unaff_s3 & 0x30) == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if (((unaff_s3 & 0x30) == 0x20) && (piVar10 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar10 = (int *)((int)piVar10 + 1);
    } while ((int)piVar10 < (int)in_stack_00000050);
  }
  if ((int)piVar3 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000040);
  }
  if ((-1 < iVar8 + -1) && (putchar(*__s), -1 < iVar8 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (piVar3 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar3 = (int *)((int)piVar3 + 1);
    } while ((int)piVar3 < (int)in_stack_00000050);
  }
  piVar3 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar3 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar3);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_200(void)

{
  undefined4 *unaff_s1;
  undefined uStack00000010;
  
  uStack00000010 = (undefined)*unaff_s1;
  PRNT_OBJ_470();
  return;
}



// WARNING: Removing unreachable block (ram,0x80062be0)
// WARNING: Removing unreachable block (ram,0x80062c28)
// WARNING: Removing unreachable block (ram,0x80062c38)
// WARNING: Removing unreachable block (ram,0x80062a04)
// WARNING: Removing unreachable block (ram,0x80062a0c)

void PRNT_OBJ_21C(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint *unaff_s1;
  undefined4 *puVar4;
  uint unaff_s3;
  int unaff_s4;
  int iVar5;
  int iVar6;
  char *unaff_s7;
  uint unaff_s8;
  uint uVar7;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000048;
  int in_stack_00000050;
  int in_stack_00000058;
  undefined auStack_38 [56];
  
  uVar3 = *unaff_s1;
  if ((int)uVar3 < 0) {
    PRNT_OBJ_3D4();
    return;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar4 = &stack0x00000038;
  if ((uVar3 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar4, unaff_s4 != 0)) {
    do {
      uVar7 = uVar3 / 10;
      puVar4 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar4 = *(char *)(in_stack_00000058 + uVar3 % 10);
      uVar3 = uVar7;
    } while (uVar7 != 0);
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
  }
  iVar5 = iVar2 + 0x38 + in_stack_00000048;
  if (unaff_s8 != 0) {
    iVar5 = iVar5 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar5 = iVar5 + 2;
  }
  iVar6 = unaff_s4;
  if (unaff_s4 < iVar5) {
    iVar6 = iVar5;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar6, in_stack_00000050 != 0)) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar1 = iVar6;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar('0');
    }
  }
  for (; iVar5 < unaff_s4; iVar5 = iVar5 + 1) {
    putchar('0');
  }
  if ((-1 < iVar2 + 0x37) && (putchar(*(char *)puVar4), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  iVar2 = iVar6;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  if (in_stack_00000050 < iVar6) {
    in_stack_00000050 = iVar6;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000050;
  PRNT_OBJ_64C();
  return;
}



// WARNING: Removing unreachable block (ram,0x80062be0)
// WARNING: Removing unreachable block (ram,0x80062c28)
// WARNING: Removing unreachable block (ram,0x80062c38)

void PRNT_OBJ_220(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint *unaff_s1;
  undefined4 *puVar4;
  uint unaff_s3;
  int unaff_s4;
  int iVar5;
  int iVar6;
  char *unaff_s7;
  uint unaff_s8;
  uint uVar7;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000048;
  int in_stack_00000050;
  int in_stack_00000058;
  undefined auStack_38 [56];
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_24C();
    return;
  }
  uVar3 = *unaff_s1;
  if ((int)uVar3 < 0) {
    PRNT_OBJ_3D4();
    return;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar4 = &stack0x00000038;
  if ((uVar3 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar4, unaff_s4 != 0)) {
    do {
      uVar7 = uVar3 / 10;
      puVar4 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar4 = *(char *)(in_stack_00000058 + uVar3 % 10);
      uVar3 = uVar7;
    } while (uVar7 != 0);
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
  }
  iVar5 = iVar2 + 0x38 + in_stack_00000048;
  if (unaff_s8 != 0) {
    iVar5 = iVar5 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar5 = iVar5 + 2;
  }
  iVar6 = unaff_s4;
  if (unaff_s4 < iVar5) {
    iVar6 = iVar5;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar6, in_stack_00000050 != 0)) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar1 = iVar6;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar('0');
    }
  }
  for (; iVar5 < unaff_s4; iVar5 = iVar5 + 1) {
    putchar('0');
  }
  if ((-1 < iVar2 + 0x37) && (putchar(*(char *)puVar4), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  iVar2 = iVar6;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  if (in_stack_00000050 < iVar6) {
    in_stack_00000050 = iVar6;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000050;
  PRNT_OBJ_64C();
  return;
}



// WARNING: Removing unreachable block (ram,0x80062be0)
// WARNING: Removing unreachable block (ram,0x80062c28)
// WARNING: Removing unreachable block (ram,0x80062c38)

void PRNT_OBJ_24C(void)

{
  int iVar1;
  int iVar2;
  uint in_v1;
  undefined4 *puVar3;
  uint unaff_s3;
  int unaff_s4;
  int iVar4;
  int iVar5;
  char *unaff_s7;
  uint unaff_s8;
  uint uVar6;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000048;
  int in_stack_00000050;
  int in_stack_00000058;
  undefined auStack_38 [56];
  
  if ((int)in_v1 < 0) {
    PRNT_OBJ_3D4();
    return;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar3 = &stack0x00000038;
  if ((in_v1 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar3, unaff_s4 != 0)) {
    do {
      uVar6 = in_v1 / 10;
      puVar3 = (undefined4 *)((int)puVar3 + -1);
      *(char *)puVar3 = *(char *)(in_stack_00000058 + in_v1 % 10);
      in_v1 = uVar6;
    } while (uVar6 != 0);
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar3;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar3;
    }
  }
  iVar4 = iVar2 + 0x38 + in_stack_00000048;
  if (unaff_s8 != 0) {
    iVar4 = iVar4 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar4 = iVar4 + 2;
  }
  iVar5 = unaff_s4;
  if (unaff_s4 < iVar4) {
    iVar5 = iVar4;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar5, in_stack_00000050 != 0)) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar1 = iVar5;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar('0');
    }
  }
  for (; iVar4 < unaff_s4; iVar4 = iVar4 + 1) {
    putchar('0');
  }
  if ((-1 < iVar2 + 0x37) && (putchar(*(char *)puVar3), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  iVar2 = iVar5;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  if (in_stack_00000050 < iVar5) {
    in_stack_00000050 = iVar5;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000050;
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_264(void)

{
  undefined4 *unaff_s1;
  uint unaff_s3;
  undefined2 param_11;
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    *(undefined2 *)*unaff_s1 = param_11;
    PRNT_OBJ_64C();
    return;
  }
  *(undefined4 *)*unaff_s1 = _param_11;
  PRNT_OBJ_64C();
  return;
}



// WARNING: Removing unreachable block (ram,0x80062a88)
// WARNING: Removing unreachable block (ram,0x80062a90)

void PRNT_OBJ_2A0(undefined4 param_1)

{
  PRNT_OBJ_3D0(param_1,8);
  return;
}



void PRNT_OBJ_2A4(undefined4 param_1)

{
  uint unaff_s3;
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_3D0(param_1,8);
    return;
  }
  PRNT_OBJ_3D0(param_1,8);
  return;
}



void PRNT_OBJ_2D8(undefined4 param_1)

{
  PRNT_OBJ_3D0(param_1,0x10);
  return;
}



// WARNING: Removing unreachable block (ram,0x80062c54)
// WARNING: Removing unreachable block (ram,0x80062cc4)

void PRNT_OBJ_2E8(void)

{
  int iVar1;
  void *pvVar2;
  int iVar3;
  uchar **unaff_s1;
  char *__s;
  uint unaff_s3;
  int unaff_s4;
  int iVar4;
  int iVar5;
  char *unaff_s7;
  int in_stack_00000040;
  int in_stack_00000048;
  int in_stack_00000050;
  
  __s = (char *)*unaff_s1;
  if ((uchar *)__s == (uchar *)0x0) {
    __s = "(null)";
  }
  if (unaff_s4 < 0) {
    iVar5 = strlen(__s);
  }
  else {
    pvVar2 = memchr((uchar *)__s,'\0',unaff_s4);
    iVar5 = (int)pvVar2 - (int)__s;
    if ((pvVar2 == (void *)0x0) || (unaff_s4 < iVar5)) {
      PRNT_OBJ_340();
      return;
    }
  }
  iVar4 = iVar5 + in_stack_00000048;
  if ((unaff_s3 & 0x40) != 0) {
    iVar4 = iVar4 + 2;
  }
  iVar3 = in_stack_00000040;
  if (in_stack_00000040 < iVar4) {
    iVar3 = iVar4;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar3, in_stack_00000050 != 0)) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar1 = iVar3;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar('0');
    }
  }
  for (; iVar4 < in_stack_00000040; iVar4 = iVar4 + 1) {
    putchar('0');
  }
  if ((-1 < iVar5 + -1) && (putchar(*__s), -1 < iVar5 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar3 < in_stack_00000050; iVar3 = iVar3 + 1) {
      putchar(' ');
    }
  }
  PRNT_OBJ_64C();
  return;
}



// WARNING: Removing unreachable block (ram,0x80062c54)
// WARNING: Removing unreachable block (ram,0x80062cc4)

void PRNT_OBJ_340(void)

{
  int iVar1;
  int iVar2;
  char *unaff_s2;
  uint unaff_s3;
  int iVar3;
  int unaff_s6;
  char *unaff_s7;
  int in_stack_00000040;
  int in_stack_00000048;
  int in_stack_00000050;
  
  iVar3 = unaff_s6 + in_stack_00000048;
  if ((unaff_s3 & 0x40) != 0) {
    iVar3 = iVar3 + 2;
  }
  iVar2 = in_stack_00000040;
  if (in_stack_00000040 < iVar3) {
    iVar2 = iVar3;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar2, in_stack_00000050 != 0)) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar1 = iVar2;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar('0');
    }
  }
  for (; iVar3 < in_stack_00000040; iVar3 = iVar3 + 1) {
    putchar('0');
  }
  if ((-1 < unaff_s6 + -1) && (putchar(*unaff_s2), -1 < unaff_s6 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  PRNT_OBJ_64C();
  return;
}



// WARNING: Removing unreachable block (ram,0x80062b30)
// WARNING: Removing unreachable block (ram,0x80062b38)

void PRNT_OBJ_348(undefined4 param_1)

{
  PRNT_OBJ_3D0(param_1,10);
  return;
}



void PRNT_OBJ_34C(undefined4 param_1)

{
  uint unaff_s3;
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_3D0(param_1,10);
    return;
  }
  PRNT_OBJ_3D0(param_1,10);
  return;
}



// WARNING: Removing unreachable block (ram,0x80062c54)
// WARNING: Removing unreachable block (ram,0x80062be0)
// WARNING: Removing unreachable block (ram,0x80062c28)
// WARNING: Removing unreachable block (ram,0x80062c38)
// WARNING: Removing unreachable block (ram,0x80062cc4)

void PRNT_OBJ_380(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint *unaff_s1;
  undefined4 *puVar4;
  uint unaff_s3;
  int unaff_s4;
  int iVar5;
  int iVar6;
  char *unaff_s7;
  uint uVar7;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000048;
  int in_stack_00000050;
  char *param_11;
  undefined auStack_38 [56];
  
  param_11 = "0123456789ABCDEF";
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_3BC();
    return;
  }
  uVar3 = *unaff_s1;
  if (((unaff_s3 & 8) != 0) && (uVar3 != 0)) {
    unaff_s3 = unaff_s3 | 0x40;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar4 = &stack0x00000038;
  if ((uVar3 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar4, unaff_s4 != 0)) {
    do {
      uVar7 = uVar3 / 0x10;
      puVar4 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar4 = "0123456789ABCDEF"[uVar3 % 0x10];
      uVar3 = uVar7;
    } while (uVar7 != 0);
    param_11 = "0123456789abcdef";
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
  }
  iVar5 = iVar2 + 0x38 + in_stack_00000048;
  if ((unaff_s3 & 0x40) != 0) {
    iVar5 = iVar5 + 2;
  }
  iVar6 = unaff_s4;
  if (unaff_s4 < iVar5) {
    iVar6 = iVar5;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar6, in_stack_00000050 != 0)) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar1 = iVar6;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar('0');
    }
  }
  for (; iVar5 < unaff_s4; iVar5 = iVar5 + 1) {
    putchar('0');
  }
  if ((-1 < iVar2 + 0x37) && (putchar(*(char *)puVar4), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  iVar2 = iVar6;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  if (in_stack_00000050 < iVar6) {
    in_stack_00000050 = iVar6;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000050;
  PRNT_OBJ_64C();
  return;
}



// WARNING: Removing unreachable block (ram,0x80062c54)
// WARNING: Removing unreachable block (ram,0x80062be0)
// WARNING: Removing unreachable block (ram,0x80062c28)
// WARNING: Removing unreachable block (ram,0x80062c38)
// WARNING: Removing unreachable block (ram,0x80062cc4)

void PRNT_OBJ_38C(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  uint *unaff_s1;
  undefined4 *puVar4;
  uint unaff_s3;
  int unaff_s4;
  int iVar5;
  int iVar6;
  char *unaff_s7;
  uint uVar7;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000048;
  int in_stack_00000050;
  int in_stack_00000058;
  undefined auStack_38 [56];
  
  if (((unaff_s3 & 1) == 0) && ((unaff_s3 & 4) != 0)) {
    PRNT_OBJ_3BC();
    return;
  }
  uVar3 = *unaff_s1;
  if (((unaff_s3 & 8) != 0) && (uVar3 != 0)) {
    unaff_s3 = unaff_s3 | 0x40;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar4 = &stack0x00000038;
  if ((uVar3 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar4, unaff_s4 != 0)) {
    do {
      uVar7 = uVar3 / 0x10;
      puVar4 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar4 = *(char *)(in_stack_00000058 + uVar3 % 0x10);
      uVar3 = uVar7;
    } while (uVar7 != 0);
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar4;
    }
  }
  iVar5 = iVar2 + 0x38 + in_stack_00000048;
  if ((unaff_s3 & 0x40) != 0) {
    iVar5 = iVar5 + 2;
  }
  iVar6 = unaff_s4;
  if (unaff_s4 < iVar5) {
    iVar6 = iVar5;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar6, in_stack_00000050 != 0)) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar1 = iVar6;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar('0');
    }
  }
  for (; iVar5 < unaff_s4; iVar5 = iVar5 + 1) {
    putchar('0');
  }
  if ((-1 < iVar2 + 0x37) && (putchar(*(char *)puVar4), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  iVar2 = iVar6;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  if (in_stack_00000050 < iVar6) {
    in_stack_00000050 = iVar6;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000050;
  PRNT_OBJ_64C();
  return;
}



// WARNING: Removing unreachable block (ram,0x80062c54)
// WARNING: Removing unreachable block (ram,0x80062be0)
// WARNING: Removing unreachable block (ram,0x80062c28)
// WARNING: Removing unreachable block (ram,0x80062c38)
// WARNING: Removing unreachable block (ram,0x80062cc4)

void PRNT_OBJ_3BC(void)

{
  int iVar1;
  int in_v0;
  int iVar2;
  uint in_v1;
  undefined4 *puVar3;
  uint unaff_s3;
  int unaff_s4;
  int iVar4;
  int iVar5;
  char *unaff_s7;
  uint uVar6;
  undefined auStackX_1 [15];
  int in_stack_00000038;
  int in_stack_00000048;
  int in_stack_00000050;
  int in_stack_00000058;
  undefined auStack_38 [56];
  
  if ((in_v0 != 0) && (in_v1 != 0)) {
    unaff_s3 = unaff_s3 | 0x40;
  }
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar3 = &stack0x00000038;
  if ((in_v1 != 0) || (iVar2 = (int)&stack0x00000000 - (int)puVar3, unaff_s4 != 0)) {
    do {
      uVar6 = in_v1 / 0x10;
      puVar3 = (undefined4 *)((int)puVar3 + -1);
      *(char *)puVar3 = *(char *)(in_stack_00000058 + in_v1 % 0x10);
      in_v1 = uVar6;
    } while (uVar6 != 0);
    if ((unaff_s3 & 8) == 0) {
      iVar2 = (int)&stack0x00000000 - (int)puVar3;
    }
    else {
      iVar2 = (int)&stack0x00000000 - (int)puVar3;
    }
  }
  iVar4 = iVar2 + 0x38 + in_stack_00000048;
  if ((unaff_s3 & 0x40) != 0) {
    iVar4 = iVar4 + 2;
  }
  iVar5 = unaff_s4;
  if (unaff_s4 < iVar4) {
    iVar5 = iVar4;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar5, in_stack_00000050 != 0)) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar1 = iVar5;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < in_stack_00000050; iVar1 = iVar1 + 1) {
      putchar('0');
    }
  }
  if (iVar4 < unaff_s4) {
    do {
      putchar('0');
      iVar4 = iVar4 + 1;
    } while (iVar4 < unaff_s4);
  }
  if ((-1 < iVar2 + 0x37) && (putchar(*(char *)puVar3), -1 < iVar2 + 0x36)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  iVar2 = iVar5;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  if (in_stack_00000050 < iVar5) {
    in_stack_00000050 = iVar5;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000050;
  PRNT_OBJ_64C();
  return;
}



// WARNING: Removing unreachable block (ram,0x80062c54)
// WARNING: Removing unreachable block (ram,0x80062cc4)

void PRNT_OBJ_3D0(undefined4 param_1,uint param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  uint in_v1;
  undefined4 *puVar4;
  undefined4 *puVar5;
  uint unaff_s3;
  int unaff_s4;
  int iVar6;
  int iVar7;
  char *unaff_s7;
  uint uVar8;
  undefined auStackX_0 [16];
  int in_stack_00000038;
  int in_stack_00000048;
  int in_stack_00000050;
  int in_stack_00000058;
  undefined auStack_38 [56];
  
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar5 = &stack0x00000038;
  if ((in_v1 != 0) || (iVar3 = (int)auStackX_0 - (int)puVar5, unaff_s4 != 0)) {
    do {
      puVar4 = puVar5;
      uVar8 = in_v1 / param_2;
      if (param_2 == 0) {
        trap(0x1c00);
      }
      cVar1 = *(char *)(in_stack_00000058 + in_v1 % param_2);
      puVar5 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar5 = cVar1;
      in_v1 = uVar8;
    } while (uVar8 != 0);
    if ((unaff_s3 & 8) != 0) {
      iVar3 = (int)auStackX_0 - (int)puVar5;
      if (param_2 != 8) goto PRNT_OBJ_46C;
      if (cVar1 != '0') {
        puVar5 = (undefined4 *)((int)puVar4 + -2);
        *(char *)puVar5 = '0';
      }
    }
    iVar3 = (int)auStackX_0 - (int)puVar5;
  }
PRNT_OBJ_46C:
  iVar6 = iVar3 + 0x38 + in_stack_00000048;
  if ((unaff_s3 & 0x40) != 0) {
    iVar6 = iVar6 + 2;
  }
  iVar7 = unaff_s4;
  if (unaff_s4 < iVar6) {
    iVar7 = iVar6;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar2 = iVar7, in_stack_00000050 != 0)) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar2 = iVar7;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar('0');
    }
  }
  if (iVar6 < unaff_s4) {
    do {
      putchar('0');
      iVar6 = iVar6 + 1;
    } while (iVar6 < unaff_s4);
  }
  if ((-1 < iVar3 + 0x37) && (putchar(*(char *)puVar5), -1 < iVar3 + 0x36)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  iVar3 = iVar7;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar3 < in_stack_00000050; iVar3 = iVar3 + 1) {
      putchar(' ');
    }
  }
  if (in_stack_00000050 < iVar7) {
    in_stack_00000050 = iVar7;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000050;
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_3D4(undefined4 param_1,uint param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  uint in_v1;
  undefined4 *puVar4;
  undefined4 *puVar5;
  uint unaff_s3;
  int unaff_s4;
  int iVar6;
  int iVar7;
  char *unaff_s7;
  uint unaff_s8;
  uint uVar8;
  undefined auStackX_0 [16];
  int in_stack_00000038;
  int in_stack_00000048;
  int in_stack_00000050;
  int param_14;
  undefined auStack_38 [56];
  
  if (-1 < unaff_s4) {
    unaff_s3 = unaff_s3 & 0xffffffdf;
  }
  puVar5 = &stack0x00000038;
  if ((in_v1 != 0) || (iVar3 = (int)auStackX_0 - (int)puVar5, unaff_s4 != 0)) {
    do {
      puVar4 = puVar5;
      uVar8 = in_v1 / param_2;
      if (param_2 == 0) {
        trap(0x1c00);
      }
      cVar1 = *(char *)(param_14 + in_v1 % param_2);
      puVar5 = (undefined4 *)((int)puVar4 + -1);
      *(char *)puVar5 = cVar1;
      in_v1 = uVar8;
    } while (uVar8 != 0);
    if ((unaff_s3 & 8) != 0) {
      iVar3 = (int)auStackX_0 - (int)puVar5;
      if (param_2 != 8) goto PRNT_OBJ_46C;
      if (cVar1 != '0') {
        puVar5 = (undefined4 *)((int)puVar4 + -2);
        *(char *)puVar5 = '0';
      }
    }
    iVar3 = (int)auStackX_0 - (int)puVar5;
  }
PRNT_OBJ_46C:
  iVar6 = iVar3 + 0x38 + in_stack_00000048;
  if (unaff_s8 != 0) {
    iVar6 = iVar6 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar6 = iVar6 + 2;
  }
  iVar7 = unaff_s4;
  if (unaff_s4 < iVar6) {
    iVar7 = iVar6;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar2 = iVar7, in_stack_00000050 != 0)) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar2 = iVar7;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar2 < in_stack_00000050; iVar2 = iVar2 + 1) {
      putchar('0');
    }
  }
  if (iVar6 < unaff_s4) {
    do {
      putchar('0');
      iVar6 = iVar6 + 1;
    } while (iVar6 < unaff_s4);
  }
  if ((-1 < iVar3 + 0x37) && (putchar(*(char *)puVar5), -1 < iVar3 + 0x36)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  iVar3 = iVar7;
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar3 < in_stack_00000050; iVar3 = iVar3 + 1) {
      putchar(' ');
    }
  }
  if (in_stack_00000050 < iVar7) {
    in_stack_00000050 = iVar7;
  }
  in_stack_00000038 = in_stack_00000038 + in_stack_00000050;
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_470(void)

{
  int iVar1;
  int iVar2;
  char *unaff_s2;
  uint unaff_s3;
  int iVar3;
  int unaff_s6;
  char *unaff_s7;
  uint unaff_s8;
  int param_11;
  int param_12;
  int param_13;
  
  iVar3 = unaff_s6 + param_12;
  if (unaff_s8 != 0) {
    iVar3 = iVar3 + 1;
  }
  if ((unaff_s3 & 0x40) != 0) {
    iVar3 = iVar3 + 2;
  }
  iVar2 = param_11;
  if (param_11 < iVar3) {
    iVar2 = iVar3;
  }
  if (((unaff_s3 & 0x30) == 0) && (iVar1 = iVar2, param_13 != 0)) {
    for (; iVar1 < param_13; iVar1 = iVar1 + 1) {
      putchar(' ');
    }
  }
  if ((unaff_s8 & 0xff) != 0) {
    putchar((char)unaff_s8);
  }
  if ((unaff_s3 & 0x40) != 0) {
    putchar('0');
    putchar(*unaff_s7);
  }
  iVar1 = iVar2;
  if ((unaff_s3 & 0x30) == 0x20) {
    for (; iVar1 < param_13; iVar1 = iVar1 + 1) {
      putchar('0');
    }
  }
  for (; iVar3 < param_11; iVar3 = iVar3 + 1) {
    putchar('0');
  }
  if ((-1 < unaff_s6 + -1) && (putchar(*unaff_s2), -1 < unaff_s6 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (param_12 = param_12 + -1, -1 < param_12) {
    putchar('0');
  }
  if ((unaff_s3 & 0x10) != 0) {
    for (; iVar2 < param_13; iVar2 = iVar2 + 1) {
      putchar(' ');
    }
  }
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_590(void)

{
  int unaff_s0;
  char *unaff_s2;
  uint unaff_s3;
  int unaff_s5;
  int param_12;
  int param_13;
  
  putchar(*unaff_s2);
  if (-1 < unaff_s0 + -1) {
    PRNT_OBJ_590();
    return;
  }
  while (param_12 = param_12 + -1, -1 < param_12) {
    putchar('0');
  }
  if (((unaff_s3 & 0x10) != 0) && (unaff_s5 < param_13)) {
    do {
      putchar(' ');
      unaff_s5 = unaff_s5 + 1;
    } while (unaff_s5 < param_13);
  }
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_634(void)

{
  char cVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  bool bVar5;
  void *pvVar6;
  int *piVar7;
  byte bVar8;
  uint uVar9;
  int **ppiVar10;
  int **unaff_s1;
  char *__s;
  uint uVar11;
  int *piVar12;
  int iVar13;
  byte *pbVar14;
  byte *unaff_s7;
  char cVar15;
  int *piVar16;
  undefined auStackX_0 [16];
  undefined2 param_11;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
code_r0x80062e0c:
  bVar8 = *unaff_s7;
  _param_11 = _param_11 + 1;
  do {
    putchar(bVar8);
    unaff_s7 = unaff_s7 + 1;
    bVar8 = *unaff_s7;
    if (bVar8 == 0) goto PRNT_OBJ_60;
    uVar11 = 0;
    bVar2 = false;
    bVar5 = false;
    bVar4 = false;
    bVar3 = false;
  } while (bVar8 != 0x25);
  piVar12 = (int *)0xffffffff;
  cVar15 = '\0';
  in_stack_00000040 = (int *)0x0;
  in_stack_00000048 = 0;
  in_stack_00000050 = (int *)0x0;
  uVar9 = 0x25;
  pbVar14 = unaff_s7;
code_r0x80062860:
  unaff_s7 = pbVar14 + 1;
  ppiVar10 = unaff_s1;
  switch(*unaff_s7) {
  case 0:
    goto PRNT_OBJ_60;
  case 0x20:
    pbVar14 = unaff_s7;
    if (cVar15 == '\0') {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x23:
    bVar5 = true;
    pbVar14 = unaff_s7;
    goto code_r0x80062860;
  case 0x2a:
    ppiVar10 = unaff_s1 + 1;
    in_stack_00000050 = *unaff_s1;
    unaff_s1 = ppiVar10;
    pbVar14 = unaff_s7;
    if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
    in_stack_00000050 = (int *)-(int)in_stack_00000050;
  case 0x2d:
    uVar11 = uVar11 | 0x10;
    unaff_s1 = ppiVar10;
    pbVar14 = unaff_s7;
    goto code_r0x80062860;
  case 0x2b:
    cVar15 = '+';
    pbVar14 = unaff_s7;
    goto code_r0x80062860;
  case 0x2e:
    pbVar14 = pbVar14 + 2;
    bVar8 = *pbVar14;
    if (bVar8 == 0x2a) {
      PRNT_OBJ_178();
      return;
    }
    piVar12 = (int *)0x0;
    while ((bVar8 < 0x80 && (uVar9 = (uint)*pbVar14, ((&DAT_80074d15)[uVar9] & 4) != 0))) {
      pbVar14 = pbVar14 + 1;
      bVar8 = *pbVar14;
      piVar12 = (int *)((int)piVar12 * 10 + -0x30 + uVar9);
    }
    pbVar14 = pbVar14 + -1;
    if ((int)piVar12 < 0) {
      PRNT_OBJ_88();
      return;
    }
    goto code_r0x80062860;
  case 0x30:
    uVar11 = uVar11 | 0x20;
    pbVar14 = unaff_s7;
    goto code_r0x80062860;
  case 0x31:
  case 0x32:
  case 0x33:
  case 0x34:
  case 0x35:
  case 0x36:
  case 0x37:
  case 0x38:
  case 0x39:
    in_stack_00000050 = (int *)0x0;
    goto PRNT_OBJ_194;
  case 0x44:
    bVar3 = true;
  case 100:
  case 0x69:
    if ((!bVar3) && (bVar4)) {
      PRNT_OBJ_24C();
      return;
    }
    piVar7 = *unaff_s1;
    uVar9 = 10;
    if ((int)piVar7 < 0) {
      PRNT_OBJ_3D4();
      return;
    }
code_r0x80062bac:
    in_stack_00000040 = piVar12;
    if (-1 < (int)piVar12) {
      uVar11 = uVar11 & 0xffffffdf;
    }
    __s = (char *)&stack0x00000038;
    if ((piVar7 != (int *)0x0) || (iVar13 = (int)auStackX_0 - (int)__s, piVar12 != (int *)0x0))
    goto PRNT_OBJ_3FC;
    goto PRNT_OBJ_46C;
  case 0x4c:
    pbVar14 = unaff_s7;
    goto code_r0x80062860;
  case 0x4f:
    bVar3 = true;
  case 0x6f:
    if ((!bVar3) && (bVar4)) {
      PRNT_OBJ_3D0(uVar9,8);
      return;
    }
    PRNT_OBJ_3D0(uVar9,8);
    return;
  case 0x55:
    bVar3 = true;
  case 0x75:
    if ((!bVar3) && (bVar4)) {
      PRNT_OBJ_3D0(uVar9,10);
      return;
    }
    PRNT_OBJ_3D0(uVar9,10);
    return;
  case 0x58:
    in_stack_00000058 = "0123456789ABCDEF";
  case 0x78:
    if ((!bVar3) && (bVar4)) {
      PRNT_OBJ_3BC();
      return;
    }
    piVar7 = *unaff_s1;
    uVar9 = 0x10;
    if (bVar5) {
      cVar15 = '\0';
      if (piVar7 != (int *)0x0) {
        bVar2 = true;
        goto code_r0x80062ba8;
      }
    }
    else {
code_r0x80062ba8:
      cVar15 = '\0';
    }
    goto code_r0x80062bac;
  case 99:
    PRNT_OBJ_470();
    return;
  case 0x68:
    bVar4 = true;
    pbVar14 = unaff_s7;
    goto code_r0x80062860;
  case 0x6c:
    goto PRNT_OBJ_1F8;
  case 0x6e:
    if ((!bVar3) && (bVar4)) {
      *(undefined2 *)*unaff_s1 = param_11;
      PRNT_OBJ_64C();
      return;
    }
    **unaff_s1 = _param_11;
    PRNT_OBJ_64C();
    return;
  case 0x70:
    PRNT_OBJ_3D0(uVar9,0x10);
    return;
  case 0x73:
    __s = (char *)*unaff_s1;
    if ((int *)__s == (int *)0x0) {
      __s = "(null)";
    }
    if ((int)piVar12 < 0) {
      iVar13 = strlen(__s);
      cVar15 = '\0';
    }
    else {
      pvVar6 = memchr((uchar *)__s,'\0',(int)piVar12);
      iVar13 = (int)pvVar6 - (int)__s;
      if ((pvVar6 == (void *)0x0) || (cVar15 = '\0', (int)piVar12 < iVar13)) {
        PRNT_OBJ_340();
        return;
      }
    }
    goto code_r0x80062c48;
  }
  goto code_r0x80062e0c;
PRNT_OBJ_1F8:
  bVar3 = true;
  pbVar14 = unaff_s7;
  goto code_r0x80062860;
PRNT_OBJ_60:
  PRNT_OBJ_654();
  return;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar8 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar8);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar12 = (int *)__s;
    piVar16 = (int *)((uint)piVar7 / uVar9);
    if (uVar9 == 0) {
      trap(0x1c00);
    }
    cVar1 = in_stack_00000058[(uint)piVar7 % uVar9];
    __s = (char *)((int)piVar12 + -1);
    *__s = cVar1;
    piVar7 = piVar16;
  } while (piVar16 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if (bVar5) {
    iVar13 = (int)auStackX_0 - (int)__s;
    if (uVar9 != 8) goto PRNT_OBJ_46C;
    if (cVar1 != '0') {
      __s = (char *)((int)piVar12 + -2);
      *__s = '0';
    }
  }
  iVar13 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar13 = iVar13 + 0x38;
code_r0x80062c48:
  piVar12 = (int *)(iVar13 + in_stack_00000048);
  if (cVar15 != '\0') {
    piVar12 = (int *)((int)piVar12 + 1);
  }
  if (bVar2) {
    piVar12 = (int *)((int)piVar12 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar12) {
    piVar7 = piVar12;
  }
  if (((uVar11 == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar16 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar16 = (int *)((int)piVar16 + 1);
    } while ((int)piVar16 < (int)in_stack_00000050);
  }
  if (cVar15 != '\0') {
    putchar(cVar15);
  }
  if (bVar2) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if ((uVar11 == 0x20) && (piVar16 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar16 = (int *)((int)piVar16 + 1);
    } while ((int)piVar16 < (int)in_stack_00000050);
  }
  if ((int)piVar12 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar12 = (int *)((int)piVar12 + 1);
    } while ((int)piVar12 < (int)in_stack_00000040);
  }
  if ((-1 < iVar13 + -1) && (putchar(*__s), -1 < iVar13 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((uVar11 & 0x10) != 0) && (piVar12 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar12 = (int *)((int)piVar12 + 1);
    } while ((int)piVar12 < (int)in_stack_00000050);
  }
  piVar12 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar12 = piVar7;
  }
  _param_11 = _param_11 + (int)piVar12;
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_64C(void)

{
  uchar uVar1;
  bool bVar2;
  bool bVar3;
  bool bVar4;
  bool bVar5;
  void *pvVar6;
  int *piVar7;
  byte bVar8;
  uint uVar9;
  int **ppiVar10;
  int **unaff_s1;
  char *__s;
  uint uVar11;
  int *piVar12;
  int iVar13;
  byte *pbVar14;
  byte *unaff_s7;
  char cVar15;
  int *piVar16;
  undefined auStackX_0 [16];
  undefined2 uStack00000038;
  int *in_stack_00000040;
  int in_stack_00000048;
  int *in_stack_00000050;
  char *in_stack_00000058;
  undefined auStack_38 [56];
  
  do {
    unaff_s7 = unaff_s7 + 1;
    bVar8 = *unaff_s7;
    if (bVar8 == 0) {
PRNT_OBJ_60:
      PRNT_OBJ_654();
      return;
    }
    uVar11 = 0;
    bVar2 = false;
    bVar5 = false;
    bVar4 = false;
    bVar3 = false;
    if (bVar8 == 0x25) {
      piVar12 = (int *)0xffffffff;
      cVar15 = '\0';
      in_stack_00000040 = (int *)0x0;
      in_stack_00000048 = 0;
      in_stack_00000050 = (int *)0x0;
      uVar9 = 0x25;
      pbVar14 = unaff_s7;
code_r0x80062860:
      unaff_s7 = pbVar14 + 1;
      ppiVar10 = unaff_s1;
      switch(*unaff_s7) {
      case 0:
        goto PRNT_OBJ_60;
      default:
        bVar8 = *unaff_s7;
        _uStack00000038 = (uchar *)((int)_uStack00000038 + 1);
        break;
      case 0x20:
        pbVar14 = unaff_s7;
        if (cVar15 == '\0') {
          PRNT_OBJ_88();
          return;
        }
        goto code_r0x80062860;
      case 0x23:
        bVar5 = true;
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x2a:
        ppiVar10 = unaff_s1 + 1;
        in_stack_00000050 = *unaff_s1;
        unaff_s1 = ppiVar10;
        pbVar14 = unaff_s7;
        if (-1 < (int)in_stack_00000050) goto code_r0x80062860;
        in_stack_00000050 = (int *)-(int)in_stack_00000050;
      case 0x2d:
        uVar11 = uVar11 | 0x10;
        unaff_s1 = ppiVar10;
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x2b:
        cVar15 = '+';
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x2e:
        pbVar14 = pbVar14 + 2;
        bVar8 = *pbVar14;
        if (bVar8 == 0x2a) {
          PRNT_OBJ_178();
          return;
        }
        piVar12 = (int *)0x0;
        while ((bVar8 < 0x80 && (uVar9 = (uint)*pbVar14, ((&DAT_80074d15)[uVar9] & 4) != 0))) {
          pbVar14 = pbVar14 + 1;
          bVar8 = *pbVar14;
          piVar12 = (int *)((int)piVar12 * 10 + -0x30 + uVar9);
        }
        pbVar14 = pbVar14 + -1;
        if ((int)piVar12 < 0) {
          PRNT_OBJ_88();
          return;
        }
        goto code_r0x80062860;
      case 0x30:
        uVar11 = uVar11 | 0x20;
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x31:
      case 0x32:
      case 0x33:
      case 0x34:
      case 0x35:
      case 0x36:
      case 0x37:
      case 0x38:
      case 0x39:
        in_stack_00000050 = (int *)0x0;
        goto PRNT_OBJ_194;
      case 0x44:
        bVar3 = true;
      case 100:
      case 0x69:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_24C();
          return;
        }
        piVar7 = *unaff_s1;
        uVar9 = 10;
        if ((int)piVar7 < 0) {
          PRNT_OBJ_3D4();
          return;
        }
code_r0x80062bac:
        in_stack_00000040 = piVar12;
        if (-1 < (int)piVar12) {
          uVar11 = uVar11 & 0xffffffdf;
        }
        __s = (char *)&stack0x00000038;
        if ((piVar7 != (int *)0x0) || (iVar13 = (int)auStackX_0 - (int)__s, piVar12 != (int *)0x0))
        goto PRNT_OBJ_3FC;
        goto PRNT_OBJ_46C;
      case 0x4c:
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x4f:
        bVar3 = true;
      case 0x6f:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_3D0(uVar9,8);
          return;
        }
        PRNT_OBJ_3D0(uVar9,8);
        return;
      case 0x55:
        bVar3 = true;
      case 0x75:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_3D0(uVar9,10);
          return;
        }
        PRNT_OBJ_3D0(uVar9,10);
        return;
      case 0x58:
        in_stack_00000058 = "0123456789ABCDEF";
      case 0x78:
        if ((!bVar3) && (bVar4)) {
          PRNT_OBJ_3BC();
          return;
        }
        piVar7 = *unaff_s1;
        uVar9 = 0x10;
        if (bVar5) {
          cVar15 = '\0';
          if (piVar7 != (int *)0x0) {
            bVar2 = true;
            goto code_r0x80062ba8;
          }
        }
        else {
code_r0x80062ba8:
          cVar15 = '\0';
        }
        goto code_r0x80062bac;
      case 99:
        PRNT_OBJ_470();
        return;
      case 0x68:
        bVar4 = true;
        pbVar14 = unaff_s7;
        goto code_r0x80062860;
      case 0x6c:
        goto PRNT_OBJ_1F8;
      case 0x6e:
        if ((!bVar3) && (bVar4)) {
          *(undefined2 *)*unaff_s1 = uStack00000038;
          PRNT_OBJ_64C();
          return;
        }
        **unaff_s1 = (int)_uStack00000038;
        PRNT_OBJ_64C();
        return;
      case 0x70:
        PRNT_OBJ_3D0(uVar9,0x10);
        return;
      case 0x73:
        __s = (char *)*unaff_s1;
        if ((int *)__s == (int *)0x0) {
          __s = "(null)";
        }
        if ((int)piVar12 < 0) {
          iVar13 = strlen(__s);
          cVar15 = '\0';
        }
        else {
          pvVar6 = memchr((uchar *)__s,'\0',(int)piVar12);
          iVar13 = (int)pvVar6 - (int)__s;
          if ((pvVar6 == (void *)0x0) || (cVar15 = '\0', (int)piVar12 < iVar13)) {
            PRNT_OBJ_340();
            return;
          }
        }
        goto code_r0x80062c48;
      }
    }
    putchar(bVar8);
  } while( true );
PRNT_OBJ_1F8:
  bVar3 = true;
  pbVar14 = unaff_s7;
  goto code_r0x80062860;
  while (((&DAT_80074d15)[*unaff_s7] & 4) != 0) {
PRNT_OBJ_194:
    bVar8 = *unaff_s7;
    unaff_s7 = unaff_s7 + 1;
    in_stack_00000050 = (int *)((int)in_stack_00000050 * 10 + -0x30 + (uint)bVar8);
    if (0x7f < *unaff_s7) break;
  }
  PRNT_OBJ_88();
  return;
PRNT_OBJ_3FC:
  do {
    piVar12 = (int *)__s;
    piVar16 = (int *)((uint)piVar7 / uVar9);
    if (uVar9 == 0) {
      trap(0x1c00);
    }
    uVar1 = in_stack_00000058[(uint)piVar7 % uVar9];
    __s = (char *)((int)piVar12 + -1);
    *__s = uVar1;
    piVar7 = piVar16;
  } while (piVar16 != (int *)0x0);
  in_stack_00000058 = "0123456789abcdef";
  if (bVar5) {
    iVar13 = (int)auStackX_0 - (int)__s;
    if (uVar9 != 8) goto PRNT_OBJ_46C;
    if (uVar1 != '0') {
      __s = (char *)((int)piVar12 + -2);
      *__s = '0';
    }
  }
  iVar13 = (int)auStackX_0 - (int)__s;
PRNT_OBJ_46C:
  iVar13 = iVar13 + 0x38;
code_r0x80062c48:
  piVar12 = (int *)(iVar13 + in_stack_00000048);
  if (cVar15 != '\0') {
    piVar12 = (int *)((int)piVar12 + 1);
  }
  if (bVar2) {
    piVar12 = (int *)((int)piVar12 + 2);
  }
  piVar7 = in_stack_00000040;
  if ((int)in_stack_00000040 < (int)piVar12) {
    piVar7 = piVar12;
  }
  if (((uVar11 == 0) && (in_stack_00000050 != (int *)0x0)) &&
     (piVar16 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar16 = (int *)((int)piVar16 + 1);
    } while ((int)piVar16 < (int)in_stack_00000050);
  }
  if (cVar15 != '\0') {
    putchar(cVar15);
  }
  if (bVar2) {
    putchar('0');
    putchar(*unaff_s7);
  }
  if ((uVar11 == 0x20) && (piVar16 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar('0');
      piVar16 = (int *)((int)piVar16 + 1);
    } while ((int)piVar16 < (int)in_stack_00000050);
  }
  if ((int)piVar12 < (int)in_stack_00000040) {
    do {
      putchar('0');
      piVar12 = (int *)((int)piVar12 + 1);
    } while ((int)piVar12 < (int)in_stack_00000040);
  }
  if ((-1 < iVar13 + -1) && (putchar(*__s), -1 < iVar13 + -2)) {
    PRNT_OBJ_590();
    return;
  }
  while (in_stack_00000048 = in_stack_00000048 + -1, -1 < in_stack_00000048) {
    putchar('0');
  }
  if (((uVar11 & 0x10) != 0) && (piVar12 = piVar7, (int)piVar7 < (int)in_stack_00000050)) {
    do {
      putchar(' ');
      piVar12 = (int *)((int)piVar12 + 1);
    } while ((int)piVar12 < (int)in_stack_00000050);
  }
  piVar12 = in_stack_00000050;
  if ((int)in_stack_00000050 < (int)piVar7) {
    piVar12 = piVar7;
  }
  _uStack00000038 = (uchar *)((int)_uStack00000038 + (int)piVar12);
  PRNT_OBJ_64C();
  return;
}



void PRNT_OBJ_654(void)

{
  return;
}



// Possible CTYPE.OBJ/toupper

char toupper(char param_1)

{
  if (((&DAT_80074d15)[(byte)param_1] & 2) != 0) {
    param_1 = param_1 + -0x20;
  }
  return param_1;
}



// Possible CTYPE.OBJ/tolower

char tolower(char param_1)

{
  if (((&DAT_80074d15)[(byte)param_1] & 1) != 0) {
    param_1 = param_1 + ' ';
  }
  return param_1;
}



void * memchr(uchar *param_1,uchar param_2,int param_3)

{
  void *pvVar1;
  
  if ((param_1 != (uchar *)0x0) && (0 < param_3)) {
    pvVar1 = (void *)MEMCHR_OBJ_20(param_1,param_2,param_3 + -1);
    return pvVar1;
  }
  return (void *)0x0;
}



undefined4 MEMCHR_OBJ_20(char *param_1,char param_2,int param_3)

{
  char cVar1;
  undefined4 uVar2;
  
  if (-1 < param_3) {
    do {
      cVar1 = *param_1;
      param_1 = param_1 + 1;
      if (cVar1 == param_2) {
        uVar2 = MEMCHR_OBJ_48();
        return uVar2;
      }
      param_3 = param_3 + -1;
    } while (-1 < param_3);
  }
  return 0;
}



void MEMCHR_OBJ_48(void)

{
  return;
}



void putchar(char param_1)

{
  uint uVar1;
  char local_10 [8];
  
  uVar1 = (uint)(byte)param_1;
  local_10[0] = param_1;
  if (uVar1 == 9) {
    putchar(' ');
    if ((DAT_80075ac8 & 7) != 0) {
      PUTCHAR_OBJ_3C();
      return;
    }
  }
  else {
    if (uVar1 == 10) {
      putchar('\r');
      DAT_80075ac8 = 0;
      PUTCHAR_OBJ_98(1);
      return;
    }
    if (((&DAT_80074d15)[uVar1] & 0x97) != 0) {
      DAT_80075ac8 = DAT_80075ac8 + 1;
    }
    write(1,local_10,1);
  }
  return;
}



void PUTCHAR_OBJ_3C(void)

{
  putchar(' ');
  if ((DAT_80075ac8 & 7) != 0) {
    PUTCHAR_OBJ_3C();
    return;
  }
  return;
}



void PUTCHAR_OBJ_98(long param_1)

{
  write(param_1,&stack0x00000010,1);
  return;
}



// Possible A53.OBJ/write

long write(long param_1,void *param_2,long param_3)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



int sprintf(char *buffer,char *fmt,...)

{
  int **ppiVar1;
  char *pcVar2;
  char *pcVar3;
  void *pvVar4;
  char *pcVar5;
  int *piVar6;
  uchar *puVar7;
  byte bVar8;
  uint uVar9;
  int *in_a2;
  undefined4 in_a3;
  int *__s;
  int iVar10;
  char *local_res4;
  int *local_res8;
  undefined4 local_resc;
  byte local_39;
  undefined4 local_38;
  int *local_34;
  int *local_30;
  int **local_28;
  
  iVar10 = 0;
  bVar8 = *fmt;
  ppiVar1 = &local_res8;
  local_res8 = in_a2;
  local_resc = in_a3;
  while (bVar8 != 0) {
    local_28 = ppiVar1;
    if (bVar8 != 0x25) {
SPRINTF_OBJ_764:
      buffer[iVar10] = bVar8;
      iVar10 = SPRINTF_OBJ_804();
      return iVar10;
    }
    local_38 = DAT_80074d98;
    local_34 = (int *)DAT_80074d9c;
    local_30 = (int *)DAT_80074da0;
    uVar9 = (uint)(byte)fmt[1];
    if (uVar9 == 0x2d) {
      local_38 = DAT_80074d98 | 1;
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    if (uVar9 == 0x2b) {
      local_38 = DAT_80074d98 | 2;
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    if (uVar9 == 0x20) {
      local_38._2_2_ = (undefined2)(DAT_80074d98 >> 0x10);
      local_38._0_1_ = (byte)DAT_80074d98;
      local_38._0_2_ = CONCAT11(fmt[1],(byte)local_38);
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    if (uVar9 == 0x23) {
      local_38 = DAT_80074d98 | 4;
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    if (uVar9 == 0x30) {
      local_38 = DAT_80074d98 | 8;
      iVar10 = SPRINTF_OBJ_90();
      return iVar10;
    }
    pcVar5 = fmt;
    if (uVar9 == 0x2a) {
      local_28 = ppiVar1 + 1;
      local_34 = *ppiVar1;
      if ((int)local_34 < 0) {
        local_34 = (int *)-(int)local_34;
        local_38 = DAT_80074d98 | 1;
      }
      iVar10 = SPRINTF_OBJ_1C0(fmt,fmt[2]);
      return iVar10;
    }
    while (local_res4 = pcVar5 + 1, pcVar2 = local_res4, uVar9 - 0x30 < 10) {
      local_34 = (int *)((int)local_34 * 10 + -0x30 + uVar9);
      uVar9 = (uint)(byte)pcVar5[2];
      pcVar5 = local_res4;
    }
    if (uVar9 == 0x2e) {
      uVar9 = (uint)(byte)pcVar5[2];
      pcVar3 = pcVar5 + 2;
      if (uVar9 == 0x2a) {
        local_28 = ppiVar1 + 1;
        local_30 = *ppiVar1;
        iVar10 = SPRINTF_OBJ_260(local_res4,pcVar5[3]);
        return iVar10;
      }
      while (local_res4 = pcVar3, uVar9 - 0x30 < 10) {
        local_30 = (int *)((int)local_30 * 10 + -0x30 + uVar9);
        pcVar3 = local_res4 + 1;
        uVar9 = (uint)(byte)local_res4[1];
      }
      fmt = pcVar2;
      if (-1 < (int)local_30) {
        local_38 = DAT_80074d98 | 0x10;
      }
    }
    bVar8 = (byte)uVar9;
    __s = &local_38;
    if ((local_38 & 1) != 0) {
      local_38 = local_38 & 0xfffffff7;
    }
    switch(uVar9) {
    case 0x4c:
      local_38 = local_38 | 0x80;
      iVar10 = SPRINTF_OBJ_2A4(fmt,local_res4[1]);
      return iVar10;
    default:
      if (uVar9 == 0x25) goto SPRINTF_OBJ_764;
      goto SPRINTF_OBJ_824;
    case 99:
      local_28 = ppiVar1 + 1;
      iVar10 = SPRINTF_OBJ_770();
      return iVar10;
    case 100:
    case 0x69:
      local_28 = ppiVar1 + 1;
      piVar6 = *ppiVar1;
      if ((local_38 & 0x20) != 0) {
        piVar6 = (int *)(int)(short)piVar6;
      }
      if ((int)piVar6 < 0) {
        local_38._0_2_ = CONCAT11(0x2d,(byte)local_38);
        iVar10 = SPRINTF_OBJ_38C(-(int)piVar6);
        return iVar10;
      }
      if ((local_38 & 2) != 0) {
        local_38._0_2_ = CONCAT11(0x2b,(byte)local_38);
        iVar10 = SPRINTF_OBJ_38C();
        return iVar10;
      }
      goto code_r0x80063360;
    case 0x68:
      iVar10 = SPRINTF_OBJ_2EC();
      return iVar10;
    case 0x6c:
      iVar10 = SPRINTF_OBJ_2EC();
      return iVar10;
    case 0x6e:
      local_28 = ppiVar1 + 1;
      if ((local_38 & 0x20) != 0) {
        *(short *)*ppiVar1 = (short)iVar10;
        iVar10 = SPRINTF_OBJ_804();
        return iVar10;
      }
      **ppiVar1 = iVar10;
      iVar10 = SPRINTF_OBJ_804();
      return iVar10;
    case 0x6f:
      local_28 = ppiVar1 + 1;
      piVar6 = *ppiVar1;
      if ((local_38 & 0x20) != 0) {
        piVar6 = (int *)((uint)piVar6 & 0xffff);
      }
      if ((local_38 & 0x10) == 0) {
        if ((local_38 & 8) != 0) {
          local_30 = local_34;
        }
        if ((int)local_30 < 1) {
          local_30 = (int *)0x1;
        }
      }
      uVar9 = 0;
      for (; piVar6 != (int *)0x0; piVar6 = (int *)((uint)piVar6 >> 3)) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = ((byte)piVar6 & 7) + 0x30;
        uVar9 = uVar9 + 1;
      }
      if ((((local_38 & 4) != 0) && (uVar9 != 0)) && (*(byte *)__s != 0x30)) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
        uVar9 = uVar9 + 1;
      }
      if ((int)uVar9 < (int)local_30) {
        do {
          __s = (int *)((int)__s + -1);
          *(byte *)__s = 0x30;
          uVar9 = uVar9 + 1;
        } while ((int)uVar9 < (int)local_30);
        iVar10 = SPRINTF_OBJ_770();
        return iVar10;
      }
      break;
    case 0x70:
      local_30 = (int *)0x8;
      local_38 = local_38 | 0x50;
    case 0x58:
      iVar10 = SPRINTF_OBJ_590();
      return iVar10;
    case 0x73:
      local_28 = ppiVar1 + 1;
      __s = *ppiVar1;
      if ((local_38 & 4) == 0) {
        if ((local_38 & 0x10) == 0) {
          strlen((char *)__s);
          iVar10 = SPRINTF_OBJ_770();
          return iVar10;
        }
        pvVar4 = memchr((uchar *)__s,'\0',(int)local_30);
        uVar9 = (int)pvVar4 - (int)__s;
        if (pvVar4 == (void *)0x0) {
          iVar10 = SPRINTF_OBJ_770();
          return iVar10;
        }
      }
      else {
        uVar9 = (uint)*(byte *)__s;
        __s = (int *)((int)__s + 1);
        if (((local_38 & 0x10) != 0) && ((int)local_30 < (int)uVar9)) {
          iVar10 = SPRINTF_OBJ_770();
          return iVar10;
        }
      }
      break;
    case 0x75:
      piVar6 = *ppiVar1;
      if ((local_38 & 0x20) != 0) {
        piVar6 = (int *)((uint)piVar6 & 0xffff);
      }
      local_38._0_2_ = (ushort)(byte)local_38;
code_r0x80063360:
      local_28 = ppiVar1 + 1;
      if ((local_38 & 0x10) == 0) {
        if (((local_38 & 8) != 0) && (local_30 = local_34, local_38._1_1_ != 0)) {
          local_30 = (int *)((int)local_34 + -1);
        }
        if ((int)local_30 < 1) {
          local_30 = (int *)0x1;
        }
      }
      uVar9 = 0;
      while (piVar6 != (int *)0x0) {
        __s = (int *)((int)__s + -1);
        uVar9 = uVar9 + 1;
        *(byte *)__s = (char)piVar6 + (char)(int *)((uint)piVar6 / 10) * -10 + 0x30;
        piVar6 = (int *)((uint)piVar6 / 10);
      }
      for (; (int)uVar9 < (int)local_30; uVar9 = uVar9 + 1) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
      }
      if (local_38._1_1_ != 0) {
        *(byte *)((int)__s + -1) = local_38._1_1_;
        iVar10 = SPRINTF_OBJ_770();
        return iVar10;
      }
      break;
    case 0x78:
      local_28 = ppiVar1 + 1;
      piVar6 = *ppiVar1;
      if ((local_38 & 0x20) != 0) {
        piVar6 = (int *)((uint)piVar6 & 0xffff);
      }
      if ((local_38 & 0x10) == 0) {
        if (((local_38 & 8) != 0) && (local_30 = local_34, (local_38 & 4) != 0)) {
          local_30 = (int *)((int)local_34 + -2);
        }
        if ((int)local_30 < 1) {
          local_30 = (int *)0x1;
        }
      }
      uVar9 = 0;
      for (; piVar6 != (int *)0x0; piVar6 = (int *)((uint)piVar6 >> 4)) {
        __s = (int *)((int)__s + -1);
        uVar9 = uVar9 + 1;
        *(char *)__s = "0123456789abcdef"[(uint)piVar6 & 0xf];
      }
      for (; (int)uVar9 < (int)local_30; uVar9 = uVar9 + 1) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
      }
      if ((local_38 & 4) != 0) {
        *(byte *)((int)__s + -1) = bVar8;
        *(byte *)((int)__s + -2) = 0x30;
        iVar10 = SPRINTF_OBJ_770();
        return iVar10;
      }
    }
    puVar7 = (uchar *)(buffer + iVar10);
    if (((int)uVar9 < (int)local_34) && ((local_38 & 1) == 0)) {
      pcVar5 = buffer + iVar10;
      do {
        *pcVar5 = ' ';
        pcVar5 = pcVar5 + 1;
        local_34 = (int *)((int)local_34 + -1);
        iVar10 = iVar10 + 1;
      } while ((int)uVar9 < (int)local_34);
      puVar7 = (uchar *)(buffer + iVar10);
    }
    memmove(puVar7,(uchar *)__s,uVar9);
    iVar10 = iVar10 + uVar9;
    if ((int)uVar9 < (int)local_34) {
      pcVar5 = buffer + iVar10;
      do {
        *pcVar5 = ' ';
        pcVar5 = pcVar5 + 1;
        uVar9 = uVar9 + 1;
        iVar10 = iVar10 + 1;
      } while ((int)uVar9 < (int)local_34);
    }
    fmt = local_res4 + 1;
    ppiVar1 = local_28;
    bVar8 = local_res4[1];
  }
SPRINTF_OBJ_824:
  buffer[iVar10] = '\0';
  return iVar10;
}



int SPRINTF_OBJ_90(undefined4 param_1,undefined4 param_2,uint param_3)

{
  int iVar1;
  void *pvVar2;
  uint in_v1;
  undefined *puVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *__s;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar8;
  int in_stack_0000024c;
  int iVar9;
  int iVar10;
  
  do {
    uVar6 = (uint)*(byte *)(in_stack_0000024c + 1);
    if (uVar6 == unaff_s5) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar6 == unaff_s6) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar6 == unaff_s4) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar6 == param_3) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar6 == in_v1) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    iVar1 = in_stack_0000024c;
    if (uVar6 == 0x2a) {
      iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c,*(undefined *)(in_stack_0000024c + 2));
      return iVar1;
    }
    while (iVar9 = iVar1 + 1, uVar6 - 0x30 < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + uVar6;
      uVar6 = (uint)*(byte *)(iVar1 + 2);
      iVar1 = iVar9;
    }
    iVar10 = iVar9;
    if (uVar6 == 0x2e) {
      uVar6 = (uint)*(byte *)(iVar1 + 2);
      iVar10 = iVar1 + 2;
      if (uVar6 == 0x2a) {
        iVar1 = SPRINTF_OBJ_260(iVar9,*(undefined *)(iVar1 + 3));
        return iVar1;
      }
      while (uVar6 - 0x30 < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + uVar6;
        uVar6 = (uint)*(byte *)(iVar10 + 1);
        iVar10 = iVar10 + 1;
      }
      in_stack_0000024c = iVar9;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = in_stack_00000210 | 0x10;
      }
    }
    bVar7 = (byte)uVar6;
    __s = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(uVar6) {
    case 0x4c:
      iVar1 = SPRINTF_OBJ_2A4(in_stack_0000024c,*(undefined *)(iVar10 + 1));
      return iVar1;
    default:
      if (uVar6 != 0x25) goto SPRINTF_OBJ_824;
      goto SPRINTF_OBJ_764;
    case 99:
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    case 100:
    case 0x69:
      piVar4 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar4 = (int *)(int)(short)piVar4;
      }
      if ((int)piVar4 < 0) {
        iVar1 = SPRINTF_OBJ_38C(-(int)piVar4);
        return iVar1;
      }
      if ((in_stack_00000210 & 2) != 0) {
        iVar1 = SPRINTF_OBJ_38C();
        return iVar1;
      }
      goto code_r0x80063360;
    case 0x68:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6c:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6e:
      if ((in_stack_00000210 & 0x20) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar1 = SPRINTF_OBJ_804();
        return iVar1;
      }
      **in_stack_00000220 = unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    case 0x6f:
      ppiVar8 = in_stack_00000220 + 1;
      piVar4 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if ((in_stack_00000210 & 8) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = ((byte)piVar4 & 7) + 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((((in_stack_00000210 & 4) != 0) && (uVar6 != 0)) && (*(byte *)__s != 0x30)) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((int)uVar6 < in_stack_00000218) {
        do {
          __s = (int *)((int)__s + -1);
          *(byte *)__s = 0x30;
          uVar6 = uVar6 + 1;
        } while ((int)uVar6 < in_stack_00000218);
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
      break;
    case 0x70:
    case 0x58:
      iVar1 = SPRINTF_OBJ_590();
      return iVar1;
    case 0x73:
      ppiVar8 = in_stack_00000220 + 1;
      __s = *in_stack_00000220;
      if ((in_stack_00000210 & 4) == 0) {
        if ((in_stack_00000210 & 0x10) == 0) {
          strlen((char *)__s);
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
        pvVar2 = memchr((uchar *)__s,'\0',in_stack_00000218);
        uVar6 = (int)pvVar2 - (int)__s;
        if (pvVar2 == (void *)0x0) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      else {
        uVar6 = (uint)*(byte *)__s;
        __s = (int *)((int)__s + 1);
        if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar6)) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      break;
    case 0x75:
      piVar4 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x80063360:
      ppiVar8 = in_stack_00000220 + 1;
      bVar7 = (byte)(in_stack_00000210 >> 8);
      if ((in_stack_00000210 & 0x10) == 0) {
        if (((in_stack_00000210 & 8) != 0) && (in_stack_00000218 = in_stack_00000214, bVar7 != 0)) {
          in_stack_00000218 = in_stack_00000214 + -1;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      while (piVar4 != (int *)0x0) {
        __s = (int *)((int)__s + -1);
        uVar6 = uVar6 + 1;
        *(byte *)__s = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
        piVar4 = (int *)((uint)piVar4 / 10);
      }
      for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
      }
      if (bVar7 != 0) {
        *(byte *)((int)__s + -1) = bVar7;
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
      break;
    case 0x78:
      ppiVar8 = in_stack_00000220 + 1;
      piVar4 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if (((in_stack_00000210 & 8) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
        __s = (int *)((int)__s + -1);
        uVar6 = uVar6 + 1;
        *(char *)__s = "0123456789abcdef"[(uint)piVar4 & 0xf];
      }
      for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
      }
      if ((in_stack_00000210 & 4) != 0) {
        *(byte *)((int)__s + -1) = bVar7;
        *(byte *)((int)__s + -2) = 0x30;
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
    }
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar6 < in_stack_00000214);
      puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar5,(uchar *)__s,uVar6);
    unaff_s2 = unaff_s2 + uVar6;
    if ((int)uVar6 < in_stack_00000214) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        uVar6 = uVar6 + 1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar6 < in_stack_00000214);
    }
    in_stack_0000024c = iVar10 + 1;
    bVar7 = *(byte *)(iVar10 + 1);
    if (bVar7 == 0) {
SPRINTF_OBJ_824:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (bVar7 != 0x25) {
SPRINTF_OBJ_764:
      *(byte *)(unaff_s3 + unaff_s2) = bVar7;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    param_3 = 0x23;
    in_v1 = 0x30;
    in_stack_00000210 = DAT_80074d98;
    in_stack_00000214 = DAT_80074d9c;
    in_stack_00000218 = DAT_80074da0;
    in_stack_00000220 = ppiVar8;
  } while( true );
}



int SPRINTF_OBJ_1C0(int param_1,uint param_2)

{
  uint in_v0;
  void *pvVar1;
  undefined *puVar2;
  int *piVar3;
  uchar *puVar4;
  uint uVar5;
  int *__s;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar6;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar7;
  int in_stack_0000024c;
  int iVar8;
  int iVar9;
  
  do {
    iVar8 = in_stack_0000024c;
    if (param_2 == in_v0) {
      param_2 = (uint)*(byte *)(in_stack_0000024c + 1);
      iVar9 = in_stack_0000024c;
      if (param_2 == 0x2a) {
        iVar8 = SPRINTF_OBJ_260(in_stack_0000024c,*(undefined *)(in_stack_0000024c + 2));
        return iVar8;
      }
      while (iVar8 = iVar9 + 1, param_2 - 0x30 < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
        param_2 = (uint)*(byte *)(iVar9 + 2);
        iVar9 = iVar8;
      }
      param_1 = in_stack_0000024c;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = in_stack_00000210 | 0x10;
      }
    }
    __s = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(param_2) {
    case 0x4c:
      iVar8 = SPRINTF_OBJ_2A4(param_1,*(undefined *)(iVar8 + 1));
      return iVar8;
    default:
      if (param_2 != 0x25) goto SPRINTF_OBJ_824;
      goto SPRINTF_OBJ_764;
    case 99:
      iVar8 = SPRINTF_OBJ_770();
      return iVar8;
    case 100:
    case 0x69:
      piVar3 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar3 = (int *)(int)(short)piVar3;
      }
      if ((int)piVar3 < 0) {
        iVar8 = SPRINTF_OBJ_38C(-(int)piVar3);
        return iVar8;
      }
      if ((in_stack_00000210 & 2) != 0) {
        iVar8 = SPRINTF_OBJ_38C();
        return iVar8;
      }
      goto code_r0x80063360;
    case 0x68:
      iVar8 = SPRINTF_OBJ_2EC();
      return iVar8;
    case 0x6c:
      iVar8 = SPRINTF_OBJ_2EC();
      return iVar8;
    case 0x6e:
      if ((in_stack_00000210 & 0x20) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar8 = SPRINTF_OBJ_804();
        return iVar8;
      }
      **in_stack_00000220 = unaff_s2;
      iVar8 = SPRINTF_OBJ_804();
      return iVar8;
    case 0x6f:
      ppiVar7 = in_stack_00000220 + 1;
      piVar3 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar3 = (int *)((uint)piVar3 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if ((in_stack_00000210 & 8) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar5 = 0;
      for (; piVar3 != (int *)0x0; piVar3 = (int *)((uint)piVar3 >> 3)) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = ((byte)piVar3 & 7) + 0x30;
        uVar5 = uVar5 + 1;
      }
      if ((((in_stack_00000210 & 4) != 0) && (uVar5 != 0)) && (*(byte *)__s != 0x30)) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
        uVar5 = uVar5 + 1;
      }
      if ((int)uVar5 < in_stack_00000218) {
        do {
          __s = (int *)((int)__s + -1);
          *(byte *)__s = 0x30;
          uVar5 = uVar5 + 1;
        } while ((int)uVar5 < in_stack_00000218);
        iVar8 = SPRINTF_OBJ_770();
        return iVar8;
      }
      break;
    case 0x70:
    case 0x58:
      iVar8 = SPRINTF_OBJ_590();
      return iVar8;
    case 0x73:
      ppiVar7 = in_stack_00000220 + 1;
      __s = *in_stack_00000220;
      if ((in_stack_00000210 & 4) == 0) {
        if ((in_stack_00000210 & 0x10) == 0) {
          strlen((char *)__s);
          iVar8 = SPRINTF_OBJ_770();
          return iVar8;
        }
        pvVar1 = memchr((uchar *)__s,'\0',in_stack_00000218);
        uVar5 = (int)pvVar1 - (int)__s;
        if (pvVar1 == (void *)0x0) {
          iVar8 = SPRINTF_OBJ_770();
          return iVar8;
        }
      }
      else {
        uVar5 = (uint)*(byte *)__s;
        __s = (int *)((int)__s + 1);
        if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar5)) {
          iVar8 = SPRINTF_OBJ_770();
          return iVar8;
        }
      }
      break;
    case 0x75:
      piVar3 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar3 = (int *)((uint)piVar3 & 0xffff);
      }
      in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x80063360:
      ppiVar7 = in_stack_00000220 + 1;
      bVar6 = (byte)(in_stack_00000210 >> 8);
      if ((in_stack_00000210 & 0x10) == 0) {
        if (((in_stack_00000210 & 8) != 0) && (in_stack_00000218 = in_stack_00000214, bVar6 != 0)) {
          in_stack_00000218 = in_stack_00000214 + -1;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar5 = 0;
      while (piVar3 != (int *)0x0) {
        __s = (int *)((int)__s + -1);
        uVar5 = uVar5 + 1;
        *(byte *)__s = (char)piVar3 + (char)(int *)((uint)piVar3 / 10) * -10 + 0x30;
        piVar3 = (int *)((uint)piVar3 / 10);
      }
      for (; (int)uVar5 < in_stack_00000218; uVar5 = uVar5 + 1) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
      }
      if (bVar6 != 0) {
        *(byte *)((int)__s + -1) = bVar6;
        iVar8 = SPRINTF_OBJ_770();
        return iVar8;
      }
      break;
    case 0x78:
      ppiVar7 = in_stack_00000220 + 1;
      piVar3 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar3 = (int *)((uint)piVar3 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if (((in_stack_00000210 & 8) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar5 = 0;
      for (; piVar3 != (int *)0x0; piVar3 = (int *)((uint)piVar3 >> 4)) {
        __s = (int *)((int)__s + -1);
        uVar5 = uVar5 + 1;
        *(char *)__s = "0123456789abcdef"[(uint)piVar3 & 0xf];
      }
      for (; (int)uVar5 < in_stack_00000218; uVar5 = uVar5 + 1) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
      }
      if ((in_stack_00000210 & 4) != 0) {
        *(byte *)((int)__s + -1) = (byte)param_2;
        *(byte *)((int)__s + -2) = 0x30;
        iVar8 = SPRINTF_OBJ_770();
        return iVar8;
      }
    }
    puVar4 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar5 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      puVar2 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar2 = (char)unaff_s4;
        puVar2 = puVar2 + 1;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar5 < in_stack_00000214);
      puVar4 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar4,(uchar *)__s,uVar5);
    unaff_s2 = unaff_s2 + uVar5;
    if ((int)uVar5 < in_stack_00000214) {
      puVar2 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar2 = (char)unaff_s4;
        puVar2 = puVar2 + 1;
        uVar5 = uVar5 + 1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar5 < in_stack_00000214);
    }
    param_1 = iVar8 + 1;
    param_2 = (uint)*(byte *)(iVar8 + 1);
    if (param_2 == 0) {
SPRINTF_OBJ_824:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (param_2 != 0x25) {
SPRINTF_OBJ_764:
      *(char *)(unaff_s3 + unaff_s2) = (char)param_2;
      iVar8 = SPRINTF_OBJ_804();
      return iVar8;
    }
    param_2 = (uint)*(byte *)(iVar8 + 2);
    if (param_2 == unaff_s5) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    if (param_2 == unaff_s6) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    if (param_2 == unaff_s4) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    if (param_2 == 0x23) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    if (param_2 == 0x30) {
      iVar8 = SPRINTF_OBJ_90();
      return iVar8;
    }
    in_stack_00000214 = DAT_80074d9c;
    in_stack_0000024c = iVar8 + 2;
    if (param_2 == 0x2a) {
      iVar8 = SPRINTF_OBJ_1C0(param_1,*(undefined *)(iVar8 + 3));
      return iVar8;
    }
    while (in_v0 = 0x2e, in_stack_00000210 = DAT_80074d98, in_stack_00000218 = DAT_80074da0,
          in_stack_00000220 = ppiVar7, param_2 - 0x30 < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
      param_2 = (uint)*(byte *)(in_stack_0000024c + 1);
      in_stack_0000024c = in_stack_0000024c + 1;
    }
  } while( true );
}



int SPRINTF_OBJ_260(int param_1,uint param_2)

{
  void *pvVar1;
  int iVar2;
  undefined *puVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *__s;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar8;
  int in_stack_0000024c;
  
  do {
    iVar2 = param_1;
    ppiVar8 = in_stack_00000220;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = in_stack_00000210 | 0x10;
    }
    do {
      __s = (int *)&stack0x00000210;
      if ((in_stack_00000210 & 1) != 0) {
        in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
      }
      switch(param_2) {
      case 0x4c:
        iVar2 = SPRINTF_OBJ_2A4(iVar2,*(undefined *)(in_stack_0000024c + 1));
        return iVar2;
      default:
        if (param_2 != 0x25) goto SPRINTF_OBJ_824;
        goto SPRINTF_OBJ_764;
      case 99:
        iVar2 = SPRINTF_OBJ_770();
        return iVar2;
      case 100:
      case 0x69:
        piVar4 = *ppiVar8;
        if ((in_stack_00000210 & 0x20) != 0) {
          piVar4 = (int *)(int)(short)piVar4;
        }
        if ((int)piVar4 < 0) {
          iVar2 = SPRINTF_OBJ_38C(-(int)piVar4);
          return iVar2;
        }
        if ((in_stack_00000210 & 2) != 0) {
          iVar2 = SPRINTF_OBJ_38C();
          return iVar2;
        }
        goto code_r0x80063360;
      case 0x68:
        iVar2 = SPRINTF_OBJ_2EC();
        return iVar2;
      case 0x6c:
        iVar2 = SPRINTF_OBJ_2EC();
        return iVar2;
      case 0x6e:
        if ((in_stack_00000210 & 0x20) != 0) {
          *(short *)*ppiVar8 = (short)unaff_s2;
          iVar2 = SPRINTF_OBJ_804();
          return iVar2;
        }
        **ppiVar8 = unaff_s2;
        iVar2 = SPRINTF_OBJ_804();
        return iVar2;
      case 0x6f:
        in_stack_00000220 = ppiVar8 + 1;
        piVar4 = *ppiVar8;
        if ((in_stack_00000210 & 0x20) != 0) {
          piVar4 = (int *)((uint)piVar4 & 0xffff);
        }
        if ((in_stack_00000210 & 0x10) == 0) {
          if ((in_stack_00000210 & 8) != 0) {
            in_stack_00000218 = in_stack_00000214;
          }
          if (in_stack_00000218 < 1) {
            in_stack_00000218 = 1;
          }
        }
        uVar6 = 0;
        for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
          __s = (int *)((int)__s + -1);
          *(byte *)__s = ((byte)piVar4 & 7) + 0x30;
          uVar6 = uVar6 + 1;
        }
        if ((((in_stack_00000210 & 4) != 0) && (uVar6 != 0)) && (*(byte *)__s != 0x30)) {
          __s = (int *)((int)__s + -1);
          *(byte *)__s = 0x30;
          uVar6 = uVar6 + 1;
        }
        if ((int)uVar6 < in_stack_00000218) {
          do {
            __s = (int *)((int)__s + -1);
            *(byte *)__s = 0x30;
            uVar6 = uVar6 + 1;
          } while ((int)uVar6 < in_stack_00000218);
          iVar2 = SPRINTF_OBJ_770();
          return iVar2;
        }
        break;
      case 0x70:
      case 0x58:
        iVar2 = SPRINTF_OBJ_590();
        return iVar2;
      case 0x73:
        in_stack_00000220 = ppiVar8 + 1;
        __s = *ppiVar8;
        if ((in_stack_00000210 & 4) == 0) {
          if ((in_stack_00000210 & 0x10) == 0) {
            strlen((char *)__s);
            iVar2 = SPRINTF_OBJ_770();
            return iVar2;
          }
          pvVar1 = memchr((uchar *)__s,'\0',in_stack_00000218);
          uVar6 = (int)pvVar1 - (int)__s;
          if (pvVar1 == (void *)0x0) {
            iVar2 = SPRINTF_OBJ_770();
            return iVar2;
          }
        }
        else {
          uVar6 = (uint)*(byte *)__s;
          __s = (int *)((int)__s + 1);
          if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar6)) {
            iVar2 = SPRINTF_OBJ_770();
            return iVar2;
          }
        }
        break;
      case 0x75:
        piVar4 = *ppiVar8;
        if ((in_stack_00000210 & 0x20) != 0) {
          piVar4 = (int *)((uint)piVar4 & 0xffff);
        }
        in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x80063360:
        in_stack_00000220 = ppiVar8 + 1;
        bVar7 = (byte)(in_stack_00000210 >> 8);
        if ((in_stack_00000210 & 0x10) == 0) {
          if (((in_stack_00000210 & 8) != 0) && (in_stack_00000218 = in_stack_00000214, bVar7 != 0))
          {
            in_stack_00000218 = in_stack_00000214 + -1;
          }
          if (in_stack_00000218 < 1) {
            in_stack_00000218 = 1;
          }
        }
        uVar6 = 0;
        while (piVar4 != (int *)0x0) {
          __s = (int *)((int)__s + -1);
          uVar6 = uVar6 + 1;
          *(byte *)__s = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
          piVar4 = (int *)((uint)piVar4 / 10);
        }
        for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
          __s = (int *)((int)__s + -1);
          *(byte *)__s = 0x30;
        }
        if (bVar7 != 0) {
          *(byte *)((int)__s + -1) = bVar7;
          iVar2 = SPRINTF_OBJ_770();
          return iVar2;
        }
        break;
      case 0x78:
        in_stack_00000220 = ppiVar8 + 1;
        piVar4 = *ppiVar8;
        if ((in_stack_00000210 & 0x20) != 0) {
          piVar4 = (int *)((uint)piVar4 & 0xffff);
        }
        if ((in_stack_00000210 & 0x10) == 0) {
          if (((in_stack_00000210 & 8) != 0) &&
             (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
            in_stack_00000218 = in_stack_00000214 + -2;
          }
          if (in_stack_00000218 < 1) {
            in_stack_00000218 = 1;
          }
        }
        uVar6 = 0;
        for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
          __s = (int *)((int)__s + -1);
          uVar6 = uVar6 + 1;
          *(char *)__s = "0123456789abcdef"[(uint)piVar4 & 0xf];
        }
        for (; (int)uVar6 < in_stack_00000218; uVar6 = uVar6 + 1) {
          __s = (int *)((int)__s + -1);
          *(byte *)__s = 0x30;
        }
        if ((in_stack_00000210 & 4) != 0) {
          *(byte *)((int)__s + -1) = (byte)param_2;
          *(byte *)((int)__s + -2) = 0x30;
          iVar2 = SPRINTF_OBJ_770();
          return iVar2;
        }
      }
      puVar5 = (uchar *)(unaff_s3 + unaff_s2);
      if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
        puVar3 = (undefined *)(unaff_s2 + unaff_s3);
        do {
          *puVar3 = (char)unaff_s4;
          puVar3 = puVar3 + 1;
          in_stack_00000214 = in_stack_00000214 + -1;
          unaff_s2 = unaff_s2 + 1;
        } while ((int)uVar6 < in_stack_00000214);
        puVar5 = (uchar *)(unaff_s3 + unaff_s2);
      }
      memmove(puVar5,(uchar *)__s,uVar6);
      unaff_s2 = unaff_s2 + uVar6;
      if ((int)uVar6 < in_stack_00000214) {
        puVar3 = (undefined *)(unaff_s2 + unaff_s3);
        do {
          *puVar3 = (char)unaff_s4;
          puVar3 = puVar3 + 1;
          uVar6 = uVar6 + 1;
          unaff_s2 = unaff_s2 + 1;
        } while ((int)uVar6 < in_stack_00000214);
      }
      iVar2 = in_stack_0000024c + 1;
      param_2 = (uint)*(byte *)(in_stack_0000024c + 1);
      if (param_2 == 0) {
SPRINTF_OBJ_824:
        *(undefined *)(unaff_s3 + unaff_s2) = 0;
        return unaff_s2;
      }
      if (param_2 != 0x25) {
SPRINTF_OBJ_764:
        *(char *)(unaff_s3 + unaff_s2) = (char)param_2;
        iVar2 = SPRINTF_OBJ_804();
        return iVar2;
      }
      param_2 = (uint)*(byte *)(in_stack_0000024c + 2);
      if (param_2 == unaff_s5) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      if (param_2 == unaff_s6) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      if (param_2 == unaff_s4) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      if (param_2 == 0x23) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      if (param_2 == 0x30) {
        iVar2 = SPRINTF_OBJ_90();
        return iVar2;
      }
      in_stack_00000214 = DAT_80074d9c;
      param_1 = in_stack_0000024c + 2;
      if (param_2 == 0x2a) {
        iVar2 = SPRINTF_OBJ_1C0(iVar2,*(undefined *)(in_stack_0000024c + 3));
        return iVar2;
      }
      while (param_2 - 0x30 < 10) {
        in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
        param_2 = (uint)*(byte *)(param_1 + 1);
        param_1 = param_1 + 1;
      }
      in_stack_00000210 = DAT_80074d98;
      in_stack_00000218 = DAT_80074da0;
      ppiVar8 = in_stack_00000220;
      in_stack_0000024c = param_1;
    } while (param_2 != 0x2e);
    param_2 = (uint)*(byte *)(param_1 + 1);
    iVar2 = param_1;
    if (param_2 == 0x2a) {
      iVar2 = SPRINTF_OBJ_260(param_1,*(undefined *)(param_1 + 2));
      return iVar2;
    }
    while (in_stack_0000024c = iVar2 + 1, param_2 - 0x30 < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
      param_2 = (uint)*(byte *)(iVar2 + 2);
      iVar2 = in_stack_0000024c;
    }
  } while( true );
}



int SPRINTF_OBJ_2A4(int param_1,uint param_2)

{
  void *pvVar1;
  int iVar2;
  int in_v1;
  undefined *puVar3;
  int *piVar4;
  uchar *puVar5;
  uint uVar6;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar7;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar8;
  int iVar9;
  int in_stack_0000024c;
  
  do {
    switch(in_v1) {
    case 0:
      iVar2 = SPRINTF_OBJ_2A4(param_1,*(undefined *)(in_stack_0000024c + 1));
      return iVar2;
    default:
      if (param_2 == 0x25) goto SPRINTF_OBJ_764;
      goto SPRINTF_OBJ_824;
    case 0x17:
      *(byte *)((int)unaff_s1 + -1) = (byte)*in_stack_00000220;
      iVar2 = SPRINTF_OBJ_770();
      return iVar2;
    case 0x18:
    case 0x1d:
      piVar4 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar4 = (int *)(int)(short)piVar4;
      }
      if ((int)piVar4 < 0) {
        iVar2 = SPRINTF_OBJ_38C(-(int)piVar4);
        return iVar2;
      }
      if ((in_stack_00000210 & 2) != 0) {
        iVar2 = SPRINTF_OBJ_38C();
        return iVar2;
      }
      goto code_r0x80063360;
    case 0x1c:
      iVar2 = SPRINTF_OBJ_2EC();
      return iVar2;
    case 0x20:
      iVar2 = SPRINTF_OBJ_2EC();
      return iVar2;
    case 0x22:
      if ((in_stack_00000210 & 0x20) == 0) {
        **in_stack_00000220 = unaff_s2;
        iVar2 = SPRINTF_OBJ_804();
        return iVar2;
      }
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar2 = SPRINTF_OBJ_804();
      return iVar2;
    case 0x23:
      ppiVar8 = in_stack_00000220 + 1;
      piVar4 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if ((in_stack_00000210 & 8) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 3)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = ((byte)piVar4 & 7) + 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((((in_stack_00000210 & 4) != 0) && (uVar6 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar6 = uVar6 + 1;
      }
      if ((int)uVar6 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar6 = uVar6 + 1;
        } while ((int)uVar6 < in_stack_00000218);
        iVar2 = SPRINTF_OBJ_770();
        return iVar2;
      }
      break;
    case 0x24:
    case 0xc:
      iVar2 = SPRINTF_OBJ_590();
      return iVar2;
    case 0x27:
      ppiVar8 = in_stack_00000220 + 1;
      unaff_s1 = *in_stack_00000220;
      if ((in_stack_00000210 & 4) == 0) {
        if ((in_stack_00000210 & 0x10) == 0) {
          strlen((char *)unaff_s1);
          iVar2 = SPRINTF_OBJ_770();
          return iVar2;
        }
        pvVar1 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
        uVar6 = (int)pvVar1 - (int)unaff_s1;
        if (pvVar1 == (void *)0x0) {
          iVar2 = SPRINTF_OBJ_770();
          return iVar2;
        }
      }
      else {
        uVar6 = (uint)*(byte *)unaff_s1;
        unaff_s1 = (int *)((int)unaff_s1 + 1);
        if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar6)) {
          iVar2 = SPRINTF_OBJ_770();
          return iVar2;
        }
      }
      break;
    case 0x29:
      piVar4 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x80063360:
      ppiVar8 = in_stack_00000220 + 1;
      if ((in_stack_00000210 & 0x10) == 0) {
        if (((in_stack_00000210 & 8) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (char)(in_stack_00000210 >> 8) != '\0')) {
          in_stack_00000218 = in_stack_00000214 + -1;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      while (piVar4 != (int *)0x0) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar6 = uVar6 + 1;
        *(byte *)unaff_s1 = (char)piVar4 + (char)(int *)((uint)piVar4 / 10) * -10 + 0x30;
        piVar4 = (int *)((uint)piVar4 / 10);
      }
      if ((int)uVar6 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar6 = uVar6 + 1;
        } while ((int)uVar6 < in_stack_00000218);
      }
      bVar7 = (byte)(in_stack_00000210 >> 8);
      if (bVar7 != 0) {
        *(byte *)((int)unaff_s1 + -1) = bVar7;
        iVar2 = SPRINTF_OBJ_770();
        return iVar2;
      }
      break;
    case 0x2c:
      ppiVar8 = in_stack_00000220 + 1;
      piVar4 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar4 = (int *)((uint)piVar4 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if (((in_stack_00000210 & 8) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar6 = 0;
      for (; piVar4 != (int *)0x0; piVar4 = (int *)((uint)piVar4 >> 4)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar6 = uVar6 + 1;
        *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar4 & 0xf];
      }
      if ((int)uVar6 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar6 = uVar6 + 1;
        } while ((int)uVar6 < in_stack_00000218);
      }
      if ((in_stack_00000210 & 4) != 0) {
        *(byte *)((int)unaff_s1 + -1) = (byte)param_2;
        *(byte *)((int)unaff_s1 + -2) = 0x30;
        iVar2 = SPRINTF_OBJ_770();
        return iVar2;
      }
    }
    puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar6 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar6 < in_stack_00000214);
      puVar5 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar5,(uchar *)unaff_s1,uVar6);
    unaff_s2 = unaff_s2 + uVar6;
    if ((int)uVar6 < in_stack_00000214) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        uVar6 = uVar6 + 1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar6 < in_stack_00000214);
    }
    param_2 = (uint)*(byte *)(in_stack_0000024c + 1);
    if (param_2 == 0) {
SPRINTF_OBJ_824:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (param_2 != 0x25) {
SPRINTF_OBJ_764:
      *(char *)(unaff_s3 + unaff_s2) = (char)param_2;
      iVar2 = SPRINTF_OBJ_804();
      return iVar2;
    }
    param_2 = (uint)*(byte *)(in_stack_0000024c + 2);
    if (param_2 == unaff_s5) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    if (param_2 == unaff_s6) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    if (param_2 == unaff_s4) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    if (param_2 == 0x23) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    if (param_2 == 0x30) {
      iVar2 = SPRINTF_OBJ_90();
      return iVar2;
    }
    in_stack_00000214 = DAT_80074d9c;
    iVar2 = in_stack_0000024c + 2;
    if (param_2 == 0x2a) {
      iVar2 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
      return iVar2;
    }
    while (param_2 - 0x30 < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
      param_2 = (uint)*(byte *)(iVar2 + 1);
      iVar2 = iVar2 + 1;
    }
    param_1 = in_stack_0000024c + 1;
    in_stack_00000210 = DAT_80074d98;
    in_stack_00000218 = DAT_80074da0;
    in_stack_0000024c = iVar2;
    if (param_2 == 0x2e) {
      param_2 = (uint)*(byte *)(iVar2 + 1);
      iVar9 = iVar2;
      if (param_2 == 0x2a) {
        iVar2 = SPRINTF_OBJ_260(iVar2,*(undefined *)(iVar2 + 2));
        return iVar2;
      }
      while (in_stack_0000024c = iVar9 + 1, param_2 - 0x30 < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
        param_2 = (uint)*(byte *)(iVar9 + 2);
        iVar9 = in_stack_0000024c;
      }
      param_1 = iVar2;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = DAT_80074d98 | 0x10;
      }
    }
    unaff_s1 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    in_v1 = param_2 - 0x4c;
    in_stack_00000220 = ppiVar8;
  } while( true );
}



void SPRINTF_OBJ_2C8(void)

{
  SPRINTF_OBJ_2EC();
  return;
}



void SPRINTF_OBJ_2D4(void)

{
  SPRINTF_OBJ_2EC();
  return;
}



void SPRINTF_OBJ_2E0(undefined4 param_1)

{
  int in_stack_0000024c;
  
  SPRINTF_OBJ_2A4(param_1,*(undefined *)(in_stack_0000024c + 1));
  return;
}



void SPRINTF_OBJ_2EC(undefined4 param_1)

{
  int in_stack_0000024c;
  
  SPRINTF_OBJ_2A4(param_1,*(undefined *)(in_stack_0000024c + 1));
  return;
}



int SPRINTF_OBJ_30C(void)

{
  int iVar1;
  void *pvVar2;
  undefined *puVar3;
  int iVar4;
  int *piVar5;
  uchar *puVar6;
  uint uVar7;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar8;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar9;
  int in_stack_0000024c;
  
code_r0x800632e0:
  piVar5 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar5 = (int *)(int)(short)piVar5;
  }
  if ((int)piVar5 < 0) {
    iVar1 = SPRINTF_OBJ_38C(-(int)piVar5);
    return iVar1;
  }
  if ((in_stack_00000210 & 2) != 0) {
    iVar1 = SPRINTF_OBJ_38C();
    return iVar1;
  }
code_r0x80063360:
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (char)(in_stack_00000210 >> 8) != '\0')) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar7 = 0;
  while (piVar5 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar7 = uVar7 + 1;
    *(byte *)unaff_s1 = (char)piVar5 + (char)(int *)((uint)piVar5 / 10) * -10 + 0x30;
    piVar5 = (int *)((uint)piVar5 / 10);
  }
  if ((int)uVar7 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar7 = uVar7 + 1;
    } while ((int)uVar7 < in_stack_00000218);
  }
  bVar8 = (byte)(in_stack_00000210 >> 8);
  if (bVar8 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar8;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  do {
    puVar6 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar7 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar7 < in_stack_00000214);
      puVar6 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar6,(uchar *)unaff_s1,uVar7);
    unaff_s2 = unaff_s2 + uVar7;
    if ((int)uVar7 < in_stack_00000214) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        uVar7 = uVar7 + 1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar7 < in_stack_00000214);
    }
    bVar8 = *(byte *)(in_stack_0000024c + 1);
    if (bVar8 == 0) {
SPRINTF_OBJ_824:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (bVar8 != 0x25) {
SPRINTF_OBJ_764:
      *(byte *)(unaff_s3 + unaff_s2) = bVar8;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    uVar7 = (uint)*(byte *)(in_stack_0000024c + 2);
    if (uVar7 == unaff_s5) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == unaff_s6) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == unaff_s4) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == 0x23) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == 0x30) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    in_stack_00000214 = DAT_80074d9c;
    iVar1 = in_stack_0000024c + 2;
    if (uVar7 == 0x2a) {
      iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
      return iVar1;
    }
    while (uVar7 - 0x30 < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + uVar7;
      uVar7 = (uint)*(byte *)(iVar1 + 1);
      iVar1 = iVar1 + 1;
    }
    iVar4 = in_stack_0000024c + 1;
    in_stack_00000210 = DAT_80074d98;
    in_stack_00000218 = DAT_80074da0;
    in_stack_0000024c = iVar1;
    if (uVar7 == 0x2e) {
      uVar7 = (uint)*(byte *)(iVar1 + 1);
      iVar4 = iVar1;
      if (uVar7 == 0x2a) {
        iVar1 = SPRINTF_OBJ_260(iVar1,*(undefined *)(iVar1 + 2));
        return iVar1;
      }
      while (in_stack_0000024c = iVar4 + 1, uVar7 - 0x30 < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + uVar7;
        uVar7 = (uint)*(byte *)(iVar4 + 2);
        iVar4 = in_stack_0000024c;
      }
      iVar4 = iVar1;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = DAT_80074d98 | 0x10;
      }
    }
    bVar8 = (byte)uVar7;
    unaff_s1 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(uVar7) {
    case 0x4c:
      iVar1 = SPRINTF_OBJ_2A4(iVar4,*(undefined *)(in_stack_0000024c + 1));
      return iVar1;
    default:
      if (uVar7 != 0x25) goto SPRINTF_OBJ_824;
      goto SPRINTF_OBJ_764;
    case 99:
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    case 100:
    case 0x69:
      goto code_r0x800632e0;
    case 0x68:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6c:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6e:
      if ((in_stack_00000210 & 0x20) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar1 = SPRINTF_OBJ_804();
        return iVar1;
      }
      **in_stack_00000220 = unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    case 0x6f:
      ppiVar9 = in_stack_00000220 + 1;
      piVar5 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar5 = (int *)((uint)piVar5 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if ((in_stack_00000210 & 8) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar7 = 0;
      for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 3)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = ((byte)piVar5 & 7) + 0x30;
        uVar7 = uVar7 + 1;
      }
      if ((((in_stack_00000210 & 4) != 0) && (uVar7 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar7 = uVar7 + 1;
      }
      in_stack_00000220 = ppiVar9;
      if ((int)uVar7 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar7 = uVar7 + 1;
        } while ((int)uVar7 < in_stack_00000218);
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
      break;
    case 0x70:
    case 0x58:
      iVar1 = SPRINTF_OBJ_590();
      return iVar1;
    case 0x73:
      ppiVar9 = in_stack_00000220 + 1;
      unaff_s1 = *in_stack_00000220;
      if ((in_stack_00000210 & 4) == 0) {
        if ((in_stack_00000210 & 0x10) == 0) {
          strlen((char *)unaff_s1);
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
        pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
        uVar7 = (int)pvVar2 - (int)unaff_s1;
        in_stack_00000220 = ppiVar9;
        if (pvVar2 == (void *)0x0) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      else {
        uVar7 = (uint)*(byte *)unaff_s1;
        unaff_s1 = (int *)((int)unaff_s1 + 1);
        in_stack_00000220 = ppiVar9;
        if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar7)) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      break;
    case 0x75:
      goto SPRINTF_OBJ_35C;
    case 0x78:
      piVar5 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar5 = (int *)((uint)piVar5 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if (((in_stack_00000210 & 8) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar7 = 0;
      for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 4)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar7 = uVar7 + 1;
        *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar5 & 0xf];
      }
      for (; (int)uVar7 < in_stack_00000218; uVar7 = uVar7 + 1) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
      }
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 & 4) != 0) {
        *(byte *)((int)unaff_s1 + -1) = bVar8;
        *(byte *)((int)unaff_s1 + -2) = 0x30;
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
    }
  } while( true );
SPRINTF_OBJ_35C:
  piVar5 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar5 = (int *)((uint)piVar5 & 0xffff);
  }
  in_stack_00000210 = in_stack_00000210 & 0xff;
  goto code_r0x80063360;
}



int SPRINTF_OBJ_35C(void)

{
  int iVar1;
  void *pvVar2;
  undefined *puVar3;
  int iVar4;
  int *piVar5;
  uchar *puVar6;
  uint uVar7;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar8;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar9;
  int in_stack_0000024c;
  
code_r0x80063330:
  piVar5 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar5 = (int *)((uint)piVar5 & 0xffff);
  }
  in_stack_00000210 = in_stack_00000210 & 0xff;
code_r0x80063360:
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (char)(in_stack_00000210 >> 8) != '\0')) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar7 = 0;
  while (piVar5 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar7 = uVar7 + 1;
    *(byte *)unaff_s1 = (char)piVar5 + (char)(int *)((uint)piVar5 / 10) * -10 + 0x30;
    piVar5 = (int *)((uint)piVar5 / 10);
  }
  if ((int)uVar7 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar7 = uVar7 + 1;
    } while ((int)uVar7 < in_stack_00000218);
  }
  bVar8 = (byte)(in_stack_00000210 >> 8);
  if (bVar8 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar8;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  do {
    puVar6 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar7 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar7 < in_stack_00000214);
      puVar6 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar6,(uchar *)unaff_s1,uVar7);
    unaff_s2 = unaff_s2 + uVar7;
    if ((int)uVar7 < in_stack_00000214) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        uVar7 = uVar7 + 1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar7 < in_stack_00000214);
    }
    bVar8 = *(byte *)(in_stack_0000024c + 1);
    if (bVar8 == 0) {
SPRINTF_OBJ_824:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (bVar8 != 0x25) {
SPRINTF_OBJ_764:
      *(byte *)(unaff_s3 + unaff_s2) = bVar8;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    uVar7 = (uint)*(byte *)(in_stack_0000024c + 2);
    if (uVar7 == unaff_s5) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == unaff_s6) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == unaff_s4) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == 0x23) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == 0x30) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    in_stack_00000214 = DAT_80074d9c;
    iVar1 = in_stack_0000024c + 2;
    if (uVar7 == 0x2a) {
      iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
      return iVar1;
    }
    while (uVar7 - 0x30 < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + uVar7;
      uVar7 = (uint)*(byte *)(iVar1 + 1);
      iVar1 = iVar1 + 1;
    }
    iVar4 = in_stack_0000024c + 1;
    in_stack_00000210 = DAT_80074d98;
    in_stack_00000218 = DAT_80074da0;
    in_stack_0000024c = iVar1;
    if (uVar7 == 0x2e) {
      uVar7 = (uint)*(byte *)(iVar1 + 1);
      iVar4 = iVar1;
      if (uVar7 == 0x2a) {
        iVar1 = SPRINTF_OBJ_260(iVar1,*(undefined *)(iVar1 + 2));
        return iVar1;
      }
      while (in_stack_0000024c = iVar4 + 1, uVar7 - 0x30 < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + uVar7;
        uVar7 = (uint)*(byte *)(iVar4 + 2);
        iVar4 = in_stack_0000024c;
      }
      iVar4 = iVar1;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = DAT_80074d98 | 0x10;
      }
    }
    bVar8 = (byte)uVar7;
    unaff_s1 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(uVar7) {
    case 0x4c:
      iVar1 = SPRINTF_OBJ_2A4(iVar4,*(undefined *)(in_stack_0000024c + 1));
      return iVar1;
    default:
      if (uVar7 != 0x25) goto SPRINTF_OBJ_824;
      goto SPRINTF_OBJ_764;
    case 99:
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    case 100:
    case 0x69:
      goto SPRINTF_OBJ_30C;
    case 0x68:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6c:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6e:
      if ((in_stack_00000210 & 0x20) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar1 = SPRINTF_OBJ_804();
        return iVar1;
      }
      **in_stack_00000220 = unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    case 0x6f:
      ppiVar9 = in_stack_00000220 + 1;
      piVar5 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar5 = (int *)((uint)piVar5 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if ((in_stack_00000210 & 8) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar7 = 0;
      for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 3)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = ((byte)piVar5 & 7) + 0x30;
        uVar7 = uVar7 + 1;
      }
      if ((((in_stack_00000210 & 4) != 0) && (uVar7 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar7 = uVar7 + 1;
      }
      in_stack_00000220 = ppiVar9;
      if ((int)uVar7 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar7 = uVar7 + 1;
        } while ((int)uVar7 < in_stack_00000218);
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
      break;
    case 0x70:
    case 0x58:
      iVar1 = SPRINTF_OBJ_590();
      return iVar1;
    case 0x73:
      ppiVar9 = in_stack_00000220 + 1;
      unaff_s1 = *in_stack_00000220;
      if ((in_stack_00000210 & 4) == 0) {
        if ((in_stack_00000210 & 0x10) == 0) {
          strlen((char *)unaff_s1);
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
        pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
        uVar7 = (int)pvVar2 - (int)unaff_s1;
        in_stack_00000220 = ppiVar9;
        if (pvVar2 == (void *)0x0) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      else {
        uVar7 = (uint)*(byte *)unaff_s1;
        unaff_s1 = (int *)((int)unaff_s1 + 1);
        in_stack_00000220 = ppiVar9;
        if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar7)) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      break;
    case 0x75:
      goto code_r0x80063330;
    case 0x78:
      piVar5 = *in_stack_00000220;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar5 = (int *)((uint)piVar5 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if (((in_stack_00000210 & 8) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar7 = 0;
      for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 4)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar7 = uVar7 + 1;
        *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar5 & 0xf];
      }
      for (; (int)uVar7 < in_stack_00000218; uVar7 = uVar7 + 1) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
      }
      in_stack_00000220 = in_stack_00000220 + 1;
      if ((in_stack_00000210 & 4) != 0) {
        *(byte *)((int)unaff_s1 + -1) = bVar8;
        *(byte *)((int)unaff_s1 + -2) = 0x30;
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
    }
  } while( true );
SPRINTF_OBJ_30C:
  piVar5 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar5 = (int *)(int)(short)piVar5;
  }
  if ((int)piVar5 < 0) {
    iVar1 = SPRINTF_OBJ_38C(-(int)piVar5);
    return iVar1;
  }
  if ((in_stack_00000210 & 2) != 0) {
    iVar1 = SPRINTF_OBJ_38C();
    return iVar1;
  }
  goto code_r0x80063360;
}



int SPRINTF_OBJ_38C(int *param_1)

{
  int iVar1;
  void *pvVar2;
  undefined *puVar3;
  int iVar4;
  int *piVar5;
  uchar *puVar6;
  uint uVar7;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar8;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar9;
  int **ppiVar10;
  int in_stack_0000024c;
  
code_r0x80063360:
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (char)(in_stack_00000210 >> 8) != '\0')) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar7 = 0;
  while (param_1 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar7 = uVar7 + 1;
    *(byte *)unaff_s1 = (char)param_1 + (char)(int *)((uint)param_1 / 10) * -10 + 0x30;
    param_1 = (int *)((uint)param_1 / 10);
  }
  if ((int)uVar7 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar7 = uVar7 + 1;
    } while ((int)uVar7 < in_stack_00000218);
  }
  bVar8 = (byte)(in_stack_00000210 >> 8);
  ppiVar10 = in_stack_00000220;
  if (bVar8 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar8;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  do {
    puVar6 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar7 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        in_stack_00000214 = in_stack_00000214 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar7 < in_stack_00000214);
      puVar6 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar6,(uchar *)unaff_s1,uVar7);
    unaff_s2 = unaff_s2 + uVar7;
    if ((int)uVar7 < in_stack_00000214) {
      puVar3 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar3 = (char)unaff_s4;
        puVar3 = puVar3 + 1;
        uVar7 = uVar7 + 1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar7 < in_stack_00000214);
    }
    bVar8 = *(byte *)(in_stack_0000024c + 1);
    if (bVar8 == 0) {
SPRINTF_OBJ_824:
      *(undefined *)(unaff_s3 + unaff_s2) = 0;
      return unaff_s2;
    }
    if (bVar8 != 0x25) {
SPRINTF_OBJ_764:
      *(byte *)(unaff_s3 + unaff_s2) = bVar8;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    uVar7 = (uint)*(byte *)(in_stack_0000024c + 2);
    if (uVar7 == unaff_s5) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == unaff_s6) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == unaff_s4) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == 0x23) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar7 == 0x30) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    in_stack_00000214 = DAT_80074d9c;
    iVar1 = in_stack_0000024c + 2;
    if (uVar7 == 0x2a) {
      iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
      return iVar1;
    }
    while (uVar7 - 0x30 < 10) {
      in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + uVar7;
      uVar7 = (uint)*(byte *)(iVar1 + 1);
      iVar1 = iVar1 + 1;
    }
    iVar4 = in_stack_0000024c + 1;
    in_stack_00000210 = DAT_80074d98;
    in_stack_00000218 = DAT_80074da0;
    in_stack_0000024c = iVar1;
    if (uVar7 == 0x2e) {
      uVar7 = (uint)*(byte *)(iVar1 + 1);
      iVar4 = iVar1;
      if (uVar7 == 0x2a) {
        iVar1 = SPRINTF_OBJ_260(iVar1,*(undefined *)(iVar1 + 2));
        return iVar1;
      }
      while (in_stack_0000024c = iVar4 + 1, uVar7 - 0x30 < 10) {
        in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + uVar7;
        uVar7 = (uint)*(byte *)(iVar4 + 2);
        iVar4 = in_stack_0000024c;
      }
      iVar4 = iVar1;
      if (-1 < in_stack_00000218) {
        in_stack_00000210 = DAT_80074d98 | 0x10;
      }
    }
    bVar8 = (byte)uVar7;
    unaff_s1 = (int *)&stack0x00000210;
    if ((in_stack_00000210 & 1) != 0) {
      in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
    }
    switch(uVar7) {
    case 0x4c:
      iVar1 = SPRINTF_OBJ_2A4(iVar4,*(undefined *)(in_stack_0000024c + 1));
      return iVar1;
    default:
      if (uVar7 != 0x25) goto SPRINTF_OBJ_824;
      goto SPRINTF_OBJ_764;
    case 99:
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    case 100:
    case 0x69:
      goto SPRINTF_OBJ_30C;
    case 0x68:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6c:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6e:
      if ((in_stack_00000210 & 0x20) != 0) {
        *(short *)*ppiVar10 = (short)unaff_s2;
        iVar1 = SPRINTF_OBJ_804();
        return iVar1;
      }
      **ppiVar10 = unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    case 0x6f:
      ppiVar9 = ppiVar10 + 1;
      piVar5 = *ppiVar10;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar5 = (int *)((uint)piVar5 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if ((in_stack_00000210 & 8) != 0) {
          in_stack_00000218 = in_stack_00000214;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar7 = 0;
      for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 3)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = ((byte)piVar5 & 7) + 0x30;
        uVar7 = uVar7 + 1;
      }
      if ((((in_stack_00000210 & 4) != 0) && (uVar7 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar7 = uVar7 + 1;
      }
      ppiVar10 = ppiVar9;
      if ((int)uVar7 < in_stack_00000218) {
        do {
          unaff_s1 = (int *)((int)unaff_s1 + -1);
          *(byte *)unaff_s1 = 0x30;
          uVar7 = uVar7 + 1;
        } while ((int)uVar7 < in_stack_00000218);
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
      break;
    case 0x70:
    case 0x58:
      iVar1 = SPRINTF_OBJ_590();
      return iVar1;
    case 0x73:
      ppiVar9 = ppiVar10 + 1;
      unaff_s1 = *ppiVar10;
      if ((in_stack_00000210 & 4) == 0) {
        if ((in_stack_00000210 & 0x10) == 0) {
          strlen((char *)unaff_s1);
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
        pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
        uVar7 = (int)pvVar2 - (int)unaff_s1;
        ppiVar10 = ppiVar9;
        if (pvVar2 == (void *)0x0) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      else {
        uVar7 = (uint)*(byte *)unaff_s1;
        unaff_s1 = (int *)((int)unaff_s1 + 1);
        ppiVar10 = ppiVar9;
        if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar7)) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      break;
    case 0x75:
      in_stack_00000220 = ppiVar10 + 1;
      param_1 = *ppiVar10;
      if ((in_stack_00000210 & 0x20) != 0) {
        param_1 = (int *)((uint)param_1 & 0xffff);
      }
      in_stack_00000210 = in_stack_00000210 & 0xff;
      goto code_r0x80063360;
    case 0x78:
      piVar5 = *ppiVar10;
      if ((in_stack_00000210 & 0x20) != 0) {
        piVar5 = (int *)((uint)piVar5 & 0xffff);
      }
      if ((in_stack_00000210 & 0x10) == 0) {
        if (((in_stack_00000210 & 8) != 0) &&
           (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
          in_stack_00000218 = in_stack_00000214 + -2;
        }
        if (in_stack_00000218 < 1) {
          in_stack_00000218 = 1;
        }
      }
      uVar7 = 0;
      for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 4)) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        uVar7 = uVar7 + 1;
        *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar5 & 0xf];
      }
      for (; (int)uVar7 < in_stack_00000218; uVar7 = uVar7 + 1) {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
      }
      ppiVar10 = ppiVar10 + 1;
      if ((in_stack_00000210 & 4) != 0) {
        *(byte *)((int)unaff_s1 + -1) = bVar8;
        *(byte *)((int)unaff_s1 + -2) = 0x30;
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
    }
  } while( true );
SPRINTF_OBJ_30C:
  in_stack_00000220 = ppiVar10 + 1;
  param_1 = *ppiVar10;
  if ((in_stack_00000210 & 0x20) != 0) {
    param_1 = (int *)(int)(short)param_1;
  }
  if ((int)param_1 < 0) {
    iVar1 = SPRINTF_OBJ_38C(-(int)param_1);
    return iVar1;
  }
  if ((in_stack_00000210 & 2) != 0) {
    iVar1 = SPRINTF_OBJ_38C();
    return iVar1;
  }
  goto code_r0x80063360;
}



int SPRINTF_OBJ_474(void)

{
  int iVar1;
  void *pvVar2;
  undefined *puVar3;
  int iVar4;
  int *piVar5;
  uchar *puVar6;
  uint uVar7;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar8;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar9;
  int in_stack_0000024c;
  
code_r0x80063448:
  ppiVar9 = in_stack_00000220 + 1;
  piVar5 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar5 = (int *)((uint)piVar5 & 0xffff);
  }
  if ((in_stack_00000210 & 0x10) == 0) {
    if ((in_stack_00000210 & 8) != 0) {
      in_stack_00000218 = in_stack_00000214;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar7 = 0;
  for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 3)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = ((byte)piVar5 & 7) + 0x30;
    uVar7 = uVar7 + 1;
  }
  if ((((in_stack_00000210 & 4) != 0) && (uVar7 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
    uVar7 = uVar7 + 1;
  }
  in_stack_00000220 = ppiVar9;
  if ((int)uVar7 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar7 = uVar7 + 1;
    } while ((int)uVar7 < in_stack_00000218);
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
code_r0x80063744:
  puVar6 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)uVar7 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    puVar3 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar3 = (char)unaff_s4;
      puVar3 = puVar3 + 1;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar7 < in_stack_00000214);
    puVar6 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar6,(uchar *)unaff_s1,uVar7);
  unaff_s2 = unaff_s2 + uVar7;
  if ((int)uVar7 < in_stack_00000214) {
    puVar3 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar3 = (char)unaff_s4;
      puVar3 = puVar3 + 1;
      uVar7 = uVar7 + 1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar7 < in_stack_00000214);
  }
  bVar8 = *(byte *)(in_stack_0000024c + 1);
  if (bVar8 == 0) {
SPRINTF_OBJ_824:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (bVar8 != 0x25) {
SPRINTF_OBJ_764:
    *(byte *)(unaff_s3 + unaff_s2) = bVar8;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  }
  uVar7 = (uint)*(byte *)(in_stack_0000024c + 2);
  if (uVar7 == unaff_s5) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar7 == unaff_s6) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar7 == unaff_s4) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar7 == 0x23) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar7 == 0x30) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  in_stack_00000214 = DAT_80074d9c;
  iVar1 = in_stack_0000024c + 2;
  if (uVar7 == 0x2a) {
    iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
    return iVar1;
  }
  while (uVar7 - 0x30 < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + uVar7;
    uVar7 = (uint)*(byte *)(iVar1 + 1);
    iVar1 = iVar1 + 1;
  }
  iVar4 = in_stack_0000024c + 1;
  in_stack_00000210 = DAT_80074d98;
  in_stack_00000218 = DAT_80074da0;
  in_stack_0000024c = iVar1;
  if (uVar7 == 0x2e) {
    uVar7 = (uint)*(byte *)(iVar1 + 1);
    iVar4 = iVar1;
    if (uVar7 == 0x2a) {
      iVar1 = SPRINTF_OBJ_260(iVar1,*(undefined *)(iVar1 + 2));
      return iVar1;
    }
    while (in_stack_0000024c = iVar4 + 1, uVar7 - 0x30 < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + uVar7;
      uVar7 = (uint)*(byte *)(iVar4 + 2);
      iVar4 = in_stack_0000024c;
    }
    iVar4 = iVar1;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = DAT_80074d98 | 0x10;
    }
  }
  bVar8 = (byte)uVar7;
  unaff_s1 = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(uVar7) {
  case 0x4c:
    iVar1 = SPRINTF_OBJ_2A4(iVar4,*(undefined *)(in_stack_0000024c + 1));
    return iVar1;
  default:
    if (uVar7 != 0x25) goto SPRINTF_OBJ_824;
    goto SPRINTF_OBJ_764;
  case 99:
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  case 100:
  case 0x69:
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)(int)(short)piVar5;
    }
    if ((int)piVar5 < 0) {
      iVar1 = SPRINTF_OBJ_38C(-(int)piVar5);
      return iVar1;
    }
    if ((in_stack_00000210 & 2) != 0) {
      iVar1 = SPRINTF_OBJ_38C();
      return iVar1;
    }
    break;
  case 0x68:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6c:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6e:
    if ((in_stack_00000210 & 0x20) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    **in_stack_00000220 = unaff_s2;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  case 0x6f:
    goto code_r0x80063448;
  case 0x70:
  case 0x58:
    iVar1 = SPRINTF_OBJ_590();
    return iVar1;
  case 0x73:
    ppiVar9 = in_stack_00000220 + 1;
    unaff_s1 = *in_stack_00000220;
    if ((in_stack_00000210 & 4) == 0) {
      if ((in_stack_00000210 & 0x10) == 0) {
        strlen((char *)unaff_s1);
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
      pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
      uVar7 = (int)pvVar2 - (int)unaff_s1;
      in_stack_00000220 = ppiVar9;
      if (pvVar2 == (void *)0x0) {
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
    }
    else {
      uVar7 = (uint)*(byte *)unaff_s1;
      unaff_s1 = (int *)((int)unaff_s1 + 1);
      in_stack_00000220 = ppiVar9;
      if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar7)) {
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
    }
    goto code_r0x80063744;
  case 0x75:
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)((uint)piVar5 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto SPRINTF_OBJ_588;
  }
  bVar8 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) && (in_stack_00000218 = in_stack_00000214, bVar8 != 0)) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar7 = 0;
  while (piVar5 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar7 = uVar7 + 1;
    *(byte *)unaff_s1 = (char)piVar5 + (char)(int *)((uint)piVar5 / 10) * -10 + 0x30;
    piVar5 = (int *)((uint)piVar5 / 10);
  }
  for (; (int)uVar7 < in_stack_00000218; uVar7 = uVar7 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  if (bVar8 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar8;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  goto code_r0x80063744;
SPRINTF_OBJ_588:
  piVar5 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar5 = (int *)((uint)piVar5 & 0xffff);
  }
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
      in_stack_00000218 = in_stack_00000214 + -2;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar7 = 0;
  for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 4)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar7 = uVar7 + 1;
    *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar5 & 0xf];
  }
  for (; (int)uVar7 < in_stack_00000218; uVar7 = uVar7 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 & 4) != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar8;
    *(byte *)((int)unaff_s1 + -2) = 0x30;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  goto code_r0x80063744;
}



void SPRINTF_OBJ_564(void)

{
  SPRINTF_OBJ_590();
  return;
}



void SPRINTF_OBJ_578(void)

{
  SPRINTF_OBJ_590();
  return;
}



int SPRINTF_OBJ_588(undefined4 param_1,uint param_2)

{
  int iVar1;
  void *pvVar2;
  undefined *puVar3;
  int iVar4;
  int *piVar5;
  uchar *puVar6;
  char cVar7;
  uint uVar8;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar9;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar10;
  int in_stack_0000024c;
  
code_r0x8006355c:
  ppiVar10 = in_stack_00000220 + 1;
  piVar5 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar5 = (int *)((uint)piVar5 & 0xffff);
  }
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
      in_stack_00000218 = in_stack_00000214 + -2;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar8 = 0;
  for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 4)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar8 = uVar8 + 1;
    *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar5 & 0xf];
  }
  if ((int)uVar8 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar8 = uVar8 + 1;
    } while ((int)uVar8 < in_stack_00000218);
  }
  in_stack_00000220 = ppiVar10;
  if ((in_stack_00000210 & 4) != 0) {
    *(byte *)((int)unaff_s1 + -1) = (byte)param_2;
    *(byte *)((int)unaff_s1 + -2) = 0x30;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
code_r0x80063744:
  puVar6 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)uVar8 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    puVar3 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar3 = (char)unaff_s4;
      puVar3 = puVar3 + 1;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar8 < in_stack_00000214);
    puVar6 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar6,(uchar *)unaff_s1,uVar8);
  unaff_s2 = unaff_s2 + uVar8;
  if ((int)uVar8 < in_stack_00000214) {
    puVar3 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar3 = (char)unaff_s4;
      puVar3 = puVar3 + 1;
      uVar8 = uVar8 + 1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar8 < in_stack_00000214);
  }
  cVar7 = *(char *)(in_stack_0000024c + 1);
  if (cVar7 == '\0') {
SPRINTF_OBJ_824:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (cVar7 != '%') {
SPRINTF_OBJ_764:
    *(char *)(unaff_s3 + unaff_s2) = cVar7;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  }
  param_2 = (uint)*(byte *)(in_stack_0000024c + 2);
  if (param_2 == unaff_s5) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == unaff_s6) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == unaff_s4) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == 0x23) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == 0x30) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  in_stack_00000214 = DAT_80074d9c;
  iVar1 = in_stack_0000024c + 2;
  if (param_2 == 0x2a) {
    iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
    return iVar1;
  }
  while (param_2 - 0x30 < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
    param_2 = (uint)*(byte *)(iVar1 + 1);
    iVar1 = iVar1 + 1;
  }
  iVar4 = in_stack_0000024c + 1;
  in_stack_00000210 = DAT_80074d98;
  in_stack_00000218 = DAT_80074da0;
  in_stack_0000024c = iVar1;
  if (param_2 == 0x2e) {
    param_2 = (uint)*(byte *)(iVar1 + 1);
    iVar4 = iVar1;
    if (param_2 == 0x2a) {
      iVar1 = SPRINTF_OBJ_260(iVar1,*(undefined *)(iVar1 + 2));
      return iVar1;
    }
    while (in_stack_0000024c = iVar4 + 1, param_2 - 0x30 < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
      param_2 = (uint)*(byte *)(iVar4 + 2);
      iVar4 = in_stack_0000024c;
    }
    iVar4 = iVar1;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = DAT_80074d98 | 0x10;
    }
  }
  cVar7 = (char)param_2;
  unaff_s1 = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(param_2) {
  case 0x4c:
    iVar1 = SPRINTF_OBJ_2A4(iVar4,*(undefined *)(in_stack_0000024c + 1));
    return iVar1;
  default:
    if (param_2 != 0x25) goto SPRINTF_OBJ_824;
    goto SPRINTF_OBJ_764;
  case 99:
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  case 100:
  case 0x69:
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)(int)(short)piVar5;
    }
    if ((int)piVar5 < 0) {
      iVar1 = SPRINTF_OBJ_38C(-(int)piVar5);
      return iVar1;
    }
    if ((in_stack_00000210 & 2) != 0) {
      iVar1 = SPRINTF_OBJ_38C();
      return iVar1;
    }
    break;
  case 0x68:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6c:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6e:
    if ((in_stack_00000210 & 0x20) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    **in_stack_00000220 = unaff_s2;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  case 0x6f:
    ppiVar10 = in_stack_00000220 + 1;
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)((uint)piVar5 & 0xffff);
    }
    if ((in_stack_00000210 & 0x10) == 0) {
      if ((in_stack_00000210 & 8) != 0) {
        in_stack_00000218 = in_stack_00000214;
      }
      if (in_stack_00000218 < 1) {
        in_stack_00000218 = 1;
      }
    }
    uVar8 = 0;
    for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 3)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = ((byte)piVar5 & 7) + 0x30;
      uVar8 = uVar8 + 1;
    }
    if ((((in_stack_00000210 & 4) != 0) && (uVar8 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar8 = uVar8 + 1;
    }
    in_stack_00000220 = ppiVar10;
    if ((int)uVar8 < in_stack_00000218) {
      do {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar8 = uVar8 + 1;
      } while ((int)uVar8 < in_stack_00000218);
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
    goto code_r0x80063744;
  case 0x70:
  case 0x58:
    iVar1 = SPRINTF_OBJ_590();
    return iVar1;
  case 0x73:
    goto SPRINTF_OBJ_6A0;
  case 0x75:
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)((uint)piVar5 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto code_r0x8006355c;
  }
  bVar9 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) && (in_stack_00000218 = in_stack_00000214, bVar9 != 0)) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar8 = 0;
  while (piVar5 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar8 = uVar8 + 1;
    *(byte *)unaff_s1 = (char)piVar5 + (char)(int *)((uint)piVar5 / 10) * -10 + 0x30;
    piVar5 = (int *)((uint)piVar5 / 10);
  }
  for (; (int)uVar8 < in_stack_00000218; uVar8 = uVar8 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  if (bVar9 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar9;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  goto code_r0x80063744;
SPRINTF_OBJ_6A0:
  ppiVar10 = in_stack_00000220 + 1;
  unaff_s1 = *in_stack_00000220;
  if ((in_stack_00000210 & 4) == 0) {
    if ((in_stack_00000210 & 0x10) == 0) {
      strlen((char *)unaff_s1);
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
    pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
    uVar8 = (int)pvVar2 - (int)unaff_s1;
    in_stack_00000220 = ppiVar10;
    if (pvVar2 == (void *)0x0) {
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
  }
  else {
    uVar8 = (uint)*(byte *)unaff_s1;
    unaff_s1 = (int *)((int)unaff_s1 + 1);
    in_stack_00000220 = ppiVar10;
    if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar8)) {
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
  }
  goto code_r0x80063744;
}



int SPRINTF_OBJ_590(undefined4 param_1,uint param_2,undefined4 param_3,char *param_4)

{
  int iVar1;
  void *pvVar2;
  undefined *puVar3;
  int iVar4;
  int *piVar5;
  uchar *puVar6;
  char cVar7;
  uint uVar8;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar9;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar10;
  int in_stack_0000024c;
  
code_r0x80063564:
  ppiVar10 = in_stack_00000220 + 1;
  piVar5 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar5 = (int *)((uint)piVar5 & 0xffff);
  }
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
      in_stack_00000218 = in_stack_00000214 + -2;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar8 = 0;
  for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 4)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar8 = uVar8 + 1;
    *(char *)unaff_s1 = param_4[(uint)piVar5 & 0xf];
  }
  if ((int)uVar8 < in_stack_00000218) {
    do {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar8 = uVar8 + 1;
    } while ((int)uVar8 < in_stack_00000218);
  }
  in_stack_00000220 = ppiVar10;
  if ((in_stack_00000210 & 4) != 0) {
    *(byte *)((int)unaff_s1 + -1) = (byte)param_2;
    *(byte *)((int)unaff_s1 + -2) = 0x30;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
code_r0x80063744:
  puVar6 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)uVar8 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    puVar3 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar3 = (char)unaff_s4;
      puVar3 = puVar3 + 1;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar8 < in_stack_00000214);
    puVar6 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar6,(uchar *)unaff_s1,uVar8);
  unaff_s2 = unaff_s2 + uVar8;
  if ((int)uVar8 < in_stack_00000214) {
    puVar3 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar3 = (char)unaff_s4;
      puVar3 = puVar3 + 1;
      uVar8 = uVar8 + 1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar8 < in_stack_00000214);
  }
  cVar7 = *(char *)(in_stack_0000024c + 1);
  if (cVar7 == '\0') {
SPRINTF_OBJ_824:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (cVar7 != '%') {
SPRINTF_OBJ_764:
    *(char *)(unaff_s3 + unaff_s2) = cVar7;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  }
  param_2 = (uint)*(byte *)(in_stack_0000024c + 2);
  if (param_2 == unaff_s5) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == unaff_s6) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == unaff_s4) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == 0x23) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (param_2 == 0x30) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  in_stack_00000214 = DAT_80074d9c;
  iVar1 = in_stack_0000024c + 2;
  if (param_2 == 0x2a) {
    iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
    return iVar1;
  }
  while (param_2 - 0x30 < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + param_2;
    param_2 = (uint)*(byte *)(iVar1 + 1);
    iVar1 = iVar1 + 1;
  }
  iVar4 = in_stack_0000024c + 1;
  in_stack_00000210 = DAT_80074d98;
  in_stack_00000218 = DAT_80074da0;
  in_stack_0000024c = iVar1;
  if (param_2 == 0x2e) {
    param_2 = (uint)*(byte *)(iVar1 + 1);
    iVar4 = iVar1;
    if (param_2 == 0x2a) {
      iVar1 = SPRINTF_OBJ_260(iVar1,*(undefined *)(iVar1 + 2));
      return iVar1;
    }
    while (in_stack_0000024c = iVar4 + 1, param_2 - 0x30 < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + param_2;
      param_2 = (uint)*(byte *)(iVar4 + 2);
      iVar4 = in_stack_0000024c;
    }
    iVar4 = iVar1;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = DAT_80074d98 | 0x10;
    }
  }
  cVar7 = (char)param_2;
  unaff_s1 = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(param_2) {
  case 0x4c:
    iVar1 = SPRINTF_OBJ_2A4(iVar4,*(undefined *)(in_stack_0000024c + 1));
    return iVar1;
  default:
    if (param_2 != 0x25) goto SPRINTF_OBJ_824;
    goto SPRINTF_OBJ_764;
  case 99:
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  case 100:
  case 0x69:
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)(int)(short)piVar5;
    }
    if ((int)piVar5 < 0) {
      iVar1 = SPRINTF_OBJ_38C(-(int)piVar5);
      return iVar1;
    }
    if ((in_stack_00000210 & 2) != 0) {
      iVar1 = SPRINTF_OBJ_38C();
      return iVar1;
    }
    break;
  case 0x68:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6c:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6e:
    if ((in_stack_00000210 & 0x20) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    **in_stack_00000220 = unaff_s2;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  case 0x6f:
    ppiVar10 = in_stack_00000220 + 1;
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)((uint)piVar5 & 0xffff);
    }
    if ((in_stack_00000210 & 0x10) == 0) {
      if ((in_stack_00000210 & 8) != 0) {
        in_stack_00000218 = in_stack_00000214;
      }
      if (in_stack_00000218 < 1) {
        in_stack_00000218 = 1;
      }
    }
    uVar8 = 0;
    for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 3)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = ((byte)piVar5 & 7) + 0x30;
      uVar8 = uVar8 + 1;
    }
    if ((((in_stack_00000210 & 4) != 0) && (uVar8 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      uVar8 = uVar8 + 1;
    }
    in_stack_00000220 = ppiVar10;
    if ((int)uVar8 < in_stack_00000218) {
      do {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        uVar8 = uVar8 + 1;
      } while ((int)uVar8 < in_stack_00000218);
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
    goto code_r0x80063744;
  case 0x70:
  case 0x58:
    iVar1 = SPRINTF_OBJ_590();
    return iVar1;
  case 0x73:
    goto SPRINTF_OBJ_6A0;
  case 0x75:
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)((uint)piVar5 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto SPRINTF_OBJ_588;
  }
  bVar9 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) && (in_stack_00000218 = in_stack_00000214, bVar9 != 0)) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar8 = 0;
  while (piVar5 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    uVar8 = uVar8 + 1;
    *(byte *)unaff_s1 = (char)piVar5 + (char)(int *)((uint)piVar5 / 10) * -10 + 0x30;
    piVar5 = (int *)((uint)piVar5 / 10);
  }
  for (; (int)uVar8 < in_stack_00000218; uVar8 = uVar8 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  if (bVar9 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar9;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  goto code_r0x80063744;
SPRINTF_OBJ_588:
  param_4 = "0123456789abcdef";
  goto code_r0x80063564;
SPRINTF_OBJ_6A0:
  ppiVar10 = in_stack_00000220 + 1;
  unaff_s1 = *in_stack_00000220;
  if ((in_stack_00000210 & 4) == 0) {
    if ((in_stack_00000210 & 0x10) == 0) {
      strlen((char *)unaff_s1);
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
    pvVar2 = memchr((uchar *)unaff_s1,'\0',in_stack_00000218);
    uVar8 = (int)pvVar2 - (int)unaff_s1;
    in_stack_00000220 = ppiVar10;
    if (pvVar2 == (void *)0x0) {
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
  }
  else {
    uVar8 = (uint)*(byte *)unaff_s1;
    unaff_s1 = (int *)((int)unaff_s1 + 1);
    in_stack_00000220 = ppiVar10;
    if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar8)) {
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
  }
  goto code_r0x80063744;
}



void SPRINTF_OBJ_680(void)

{
  int unaff_s1;
  undefined4 *in_stack_00000220;
  
  *(char *)(unaff_s1 + -1) = (char)*in_stack_00000220;
  SPRINTF_OBJ_770();
  return;
}



int SPRINTF_OBJ_6A0(void)

{
  int iVar1;
  void *pvVar2;
  undefined *puVar3;
  int iVar4;
  int *piVar5;
  uchar *puVar6;
  uint uVar7;
  int *__s;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar8;
  uint in_stack_00000210;
  int in_stack_00000214;
  int in_stack_00000218;
  int **in_stack_00000220;
  int **ppiVar9;
  int in_stack_0000024c;
  
code_r0x80063674:
  ppiVar9 = in_stack_00000220 + 1;
  __s = *in_stack_00000220;
  if ((in_stack_00000210 & 4) == 0) {
    if ((in_stack_00000210 & 0x10) == 0) {
      strlen((char *)__s);
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
    pvVar2 = memchr((uchar *)__s,'\0',in_stack_00000218);
    uVar7 = (int)pvVar2 - (int)__s;
    in_stack_00000220 = ppiVar9;
    if (pvVar2 == (void *)0x0) {
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
  }
  else {
    uVar7 = (uint)*(byte *)__s;
    __s = (int *)((int)__s + 1);
    in_stack_00000220 = ppiVar9;
    if (((in_stack_00000210 & 0x10) != 0) && (in_stack_00000218 < (int)uVar7)) {
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
  }
code_r0x80063744:
  puVar6 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)uVar7 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    puVar3 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar3 = (char)unaff_s4;
      puVar3 = puVar3 + 1;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar7 < in_stack_00000214);
    puVar6 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar6,(uchar *)__s,uVar7);
  unaff_s2 = unaff_s2 + uVar7;
  if ((int)uVar7 < in_stack_00000214) {
    puVar3 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar3 = (char)unaff_s4;
      puVar3 = puVar3 + 1;
      uVar7 = uVar7 + 1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)uVar7 < in_stack_00000214);
  }
  bVar8 = *(byte *)(in_stack_0000024c + 1);
  if (bVar8 == 0) {
SPRINTF_OBJ_824:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (bVar8 != 0x25) {
SPRINTF_OBJ_764:
    *(byte *)(unaff_s3 + unaff_s2) = bVar8;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  }
  uVar7 = (uint)*(byte *)(in_stack_0000024c + 2);
  if (uVar7 == unaff_s5) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar7 == unaff_s6) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar7 == unaff_s4) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar7 == 0x23) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar7 == 0x30) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  in_stack_00000214 = DAT_80074d9c;
  iVar1 = in_stack_0000024c + 2;
  if (uVar7 == 0x2a) {
    iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
    return iVar1;
  }
  while (uVar7 - 0x30 < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + uVar7;
    uVar7 = (uint)*(byte *)(iVar1 + 1);
    iVar1 = iVar1 + 1;
  }
  iVar4 = in_stack_0000024c + 1;
  in_stack_00000210 = DAT_80074d98;
  in_stack_00000218 = DAT_80074da0;
  in_stack_0000024c = iVar1;
  if (uVar7 == 0x2e) {
    uVar7 = (uint)*(byte *)(iVar1 + 1);
    iVar4 = iVar1;
    if (uVar7 == 0x2a) {
      iVar1 = SPRINTF_OBJ_260(iVar1,*(undefined *)(iVar1 + 2));
      return iVar1;
    }
    while (in_stack_0000024c = iVar4 + 1, uVar7 - 0x30 < 10) {
      in_stack_00000218 = in_stack_00000218 * 10 + -0x30 + uVar7;
      uVar7 = (uint)*(byte *)(iVar4 + 2);
      iVar4 = in_stack_0000024c;
    }
    iVar4 = iVar1;
    if (-1 < in_stack_00000218) {
      in_stack_00000210 = DAT_80074d98 | 0x10;
    }
  }
  bVar8 = (byte)uVar7;
  __s = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(uVar7) {
  case 0x4c:
    iVar1 = SPRINTF_OBJ_2A4(iVar4,*(undefined *)(in_stack_0000024c + 1));
    return iVar1;
  default:
    if (uVar7 != 0x25) goto SPRINTF_OBJ_824;
    goto SPRINTF_OBJ_764;
  case 99:
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  case 100:
  case 0x69:
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)(int)(short)piVar5;
    }
    if ((int)piVar5 < 0) {
      iVar1 = SPRINTF_OBJ_38C(-(int)piVar5);
      return iVar1;
    }
    if ((in_stack_00000210 & 2) != 0) {
      iVar1 = SPRINTF_OBJ_38C();
      return iVar1;
    }
    break;
  case 0x68:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6c:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6e:
    if ((in_stack_00000210 & 0x20) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    **in_stack_00000220 = unaff_s2;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  case 0x6f:
    ppiVar9 = in_stack_00000220 + 1;
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)((uint)piVar5 & 0xffff);
    }
    if ((in_stack_00000210 & 0x10) == 0) {
      if ((in_stack_00000210 & 8) != 0) {
        in_stack_00000218 = in_stack_00000214;
      }
      if (in_stack_00000218 < 1) {
        in_stack_00000218 = 1;
      }
    }
    uVar7 = 0;
    for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 3)) {
      __s = (int *)((int)__s + -1);
      *(byte *)__s = ((byte)piVar5 & 7) + 0x30;
      uVar7 = uVar7 + 1;
    }
    if ((((in_stack_00000210 & 4) != 0) && (uVar7 != 0)) && (*(byte *)__s != 0x30)) {
      __s = (int *)((int)__s + -1);
      *(byte *)__s = 0x30;
      uVar7 = uVar7 + 1;
    }
    in_stack_00000220 = ppiVar9;
    if ((int)uVar7 < in_stack_00000218) {
      do {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
        uVar7 = uVar7 + 1;
      } while ((int)uVar7 < in_stack_00000218);
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
    goto code_r0x80063744;
  case 0x70:
  case 0x58:
    iVar1 = SPRINTF_OBJ_590();
    return iVar1;
  case 0x73:
    goto code_r0x80063674;
  case 0x75:
    piVar5 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar5 = (int *)((uint)piVar5 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto SPRINTF_OBJ_588;
  }
  bVar8 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) && (in_stack_00000218 = in_stack_00000214, bVar8 != 0)) {
      in_stack_00000218 = in_stack_00000214 + -1;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar7 = 0;
  while (piVar5 != (int *)0x0) {
    __s = (int *)((int)__s + -1);
    uVar7 = uVar7 + 1;
    *(byte *)__s = (char)piVar5 + (char)(int *)((uint)piVar5 / 10) * -10 + 0x30;
    piVar5 = (int *)((uint)piVar5 / 10);
  }
  for (; (int)uVar7 < in_stack_00000218; uVar7 = uVar7 + 1) {
    __s = (int *)((int)__s + -1);
    *(byte *)__s = 0x30;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  if (bVar8 != 0) {
    *(byte *)((int)__s + -1) = bVar8;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  goto code_r0x80063744;
SPRINTF_OBJ_588:
  piVar5 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar5 = (int *)((uint)piVar5 & 0xffff);
  }
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) &&
       (in_stack_00000218 = in_stack_00000214, (in_stack_00000210 & 4) != 0)) {
      in_stack_00000218 = in_stack_00000214 + -2;
    }
    if (in_stack_00000218 < 1) {
      in_stack_00000218 = 1;
    }
  }
  uVar7 = 0;
  for (; piVar5 != (int *)0x0; piVar5 = (int *)((uint)piVar5 >> 4)) {
    __s = (int *)((int)__s + -1);
    uVar7 = uVar7 + 1;
    *(char *)__s = "0123456789abcdef"[(uint)piVar5 & 0xf];
  }
  for (; (int)uVar7 < in_stack_00000218; uVar7 = uVar7 + 1) {
    __s = (int *)((int)__s + -1);
    *(byte *)__s = 0x30;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 & 4) != 0) {
    *(byte *)((int)__s + -1) = bVar8;
    *(byte *)((int)__s + -2) = 0x30;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  goto code_r0x80063744;
}



void SPRINTF_OBJ_724(void)

{
  undefined4 unaff_s2;
  uint in_stack_00000210;
  undefined4 *in_stack_00000220;
  
  if ((in_stack_00000210 & 0x20) != 0) {
    *(short *)(undefined4 *)*in_stack_00000220 = (short)unaff_s2;
    SPRINTF_OBJ_804();
    return;
  }
  *(undefined4 *)*in_stack_00000220 = unaff_s2;
  SPRINTF_OBJ_804();
  return;
}



void SPRINTF_OBJ_758(undefined4 param_1,int param_2)

{
  int unaff_s2;
  int unaff_s3;
  
  if (param_2 == 0x25) {
    *(undefined *)(unaff_s3 + unaff_s2) = 0x25;
    SPRINTF_OBJ_804();
    return;
  }
  *(undefined *)(unaff_s3 + unaff_s2) = 0;
  return;
}



int SPRINTF_OBJ_770(void)

{
  int iVar1;
  int iVar2;
  void *pvVar3;
  undefined *puVar4;
  int iVar5;
  int *piVar6;
  uchar *puVar7;
  uint uVar8;
  uint unaff_s0;
  int *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar9;
  uint in_stack_00000210;
  int in_stack_00000214;
  int **ppiVar10;
  int **in_stack_00000220;
  int in_stack_0000024c;
  
code_r0x80063744:
  puVar7 = (uchar *)(unaff_s3 + unaff_s2);
  if (((int)unaff_s0 < in_stack_00000214) && ((in_stack_00000210 & 1) == 0)) {
    puVar4 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar4 = (char)unaff_s4;
      puVar4 = puVar4 + 1;
      in_stack_00000214 = in_stack_00000214 + -1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)unaff_s0 < in_stack_00000214);
    puVar7 = (uchar *)(unaff_s3 + unaff_s2);
  }
  memmove(puVar7,(uchar *)unaff_s1,unaff_s0);
  unaff_s2 = unaff_s2 + unaff_s0;
  if ((int)unaff_s0 < in_stack_00000214) {
    puVar4 = (undefined *)(unaff_s2 + unaff_s3);
    do {
      *puVar4 = (char)unaff_s4;
      puVar4 = puVar4 + 1;
      unaff_s0 = unaff_s0 + 1;
      unaff_s2 = unaff_s2 + 1;
    } while ((int)unaff_s0 < in_stack_00000214);
  }
  bVar9 = *(byte *)(in_stack_0000024c + 1);
  if (bVar9 == 0) {
SPRINTF_OBJ_824:
    *(undefined *)(unaff_s3 + unaff_s2) = 0;
    return unaff_s2;
  }
  if (bVar9 != 0x25) {
SPRINTF_OBJ_764:
    *(byte *)(unaff_s3 + unaff_s2) = bVar9;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  }
  uVar8 = (uint)*(byte *)(in_stack_0000024c + 2);
  if (uVar8 == unaff_s5) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar8 == unaff_s6) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar8 == unaff_s4) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar8 == 0x23) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  if (uVar8 == 0x30) {
    iVar1 = SPRINTF_OBJ_90();
    return iVar1;
  }
  in_stack_00000214 = DAT_80074d9c;
  iVar1 = in_stack_0000024c + 2;
  if (uVar8 == 0x2a) {
    iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
    return iVar1;
  }
  while (uVar8 - 0x30 < 10) {
    in_stack_00000214 = in_stack_00000214 * 10 + -0x30 + uVar8;
    uVar8 = (uint)*(byte *)(iVar1 + 1);
    iVar1 = iVar1 + 1;
  }
  iVar5 = in_stack_0000024c + 1;
  in_stack_00000210 = DAT_80074d98;
  iVar2 = DAT_80074da0;
  in_stack_0000024c = iVar1;
  if (uVar8 == 0x2e) {
    uVar8 = (uint)*(byte *)(iVar1 + 1);
    iVar5 = iVar1;
    if (uVar8 == 0x2a) {
      iVar1 = SPRINTF_OBJ_260(iVar1,*(undefined *)(iVar1 + 2));
      return iVar1;
    }
    while (in_stack_0000024c = iVar5 + 1, uVar8 - 0x30 < 10) {
      iVar2 = iVar2 * 10 + -0x30 + uVar8;
      uVar8 = (uint)*(byte *)(iVar5 + 2);
      iVar5 = in_stack_0000024c;
    }
    iVar5 = iVar1;
    if (-1 < iVar2) {
      in_stack_00000210 = DAT_80074d98 | 0x10;
    }
  }
  bVar9 = (byte)uVar8;
  unaff_s1 = (int *)&stack0x00000210;
  if ((in_stack_00000210 & 1) != 0) {
    in_stack_00000210 = in_stack_00000210 & 0xfffffff7;
  }
  switch(uVar8) {
  case 0x4c:
    iVar1 = SPRINTF_OBJ_2A4(iVar5,*(undefined *)(in_stack_0000024c + 1));
    return iVar1;
  default:
    if (uVar8 != 0x25) goto SPRINTF_OBJ_824;
    goto SPRINTF_OBJ_764;
  case 99:
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  case 100:
  case 0x69:
    piVar6 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar6 = (int *)(int)(short)piVar6;
    }
    if ((int)piVar6 < 0) {
      iVar1 = SPRINTF_OBJ_38C(-(int)piVar6);
      return iVar1;
    }
    if ((in_stack_00000210 & 2) != 0) {
      iVar1 = SPRINTF_OBJ_38C();
      return iVar1;
    }
    break;
  case 0x68:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6c:
    iVar1 = SPRINTF_OBJ_2EC();
    return iVar1;
  case 0x6e:
    if ((in_stack_00000210 & 0x20) != 0) {
      *(short *)*in_stack_00000220 = (short)unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    **in_stack_00000220 = unaff_s2;
    iVar1 = SPRINTF_OBJ_804();
    return iVar1;
  case 0x6f:
    ppiVar10 = in_stack_00000220 + 1;
    piVar6 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar6 = (int *)((uint)piVar6 & 0xffff);
    }
    if ((in_stack_00000210 & 0x10) == 0) {
      if ((in_stack_00000210 & 8) != 0) {
        iVar2 = in_stack_00000214;
      }
      if (iVar2 < 1) {
        iVar2 = 1;
      }
    }
    unaff_s0 = 0;
    for (; piVar6 != (int *)0x0; piVar6 = (int *)((uint)piVar6 >> 3)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = ((byte)piVar6 & 7) + 0x30;
      unaff_s0 = unaff_s0 + 1;
    }
    if ((((in_stack_00000210 & 4) != 0) && (unaff_s0 != 0)) && (*(byte *)unaff_s1 != 0x30)) {
      unaff_s1 = (int *)((int)unaff_s1 + -1);
      *(byte *)unaff_s1 = 0x30;
      unaff_s0 = unaff_s0 + 1;
    }
    in_stack_00000220 = ppiVar10;
    if ((int)unaff_s0 < iVar2) {
      do {
        unaff_s1 = (int *)((int)unaff_s1 + -1);
        *(byte *)unaff_s1 = 0x30;
        unaff_s0 = unaff_s0 + 1;
      } while ((int)unaff_s0 < iVar2);
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    }
    goto code_r0x80063744;
  case 0x70:
  case 0x58:
    iVar1 = SPRINTF_OBJ_590();
    return iVar1;
  case 0x73:
    ppiVar10 = in_stack_00000220 + 1;
    unaff_s1 = *in_stack_00000220;
    if ((in_stack_00000210 & 4) == 0) {
      if ((in_stack_00000210 & 0x10) == 0) {
        strlen((char *)unaff_s1);
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
      pvVar3 = memchr((uchar *)unaff_s1,'\0',iVar2);
      unaff_s0 = (int)pvVar3 - (int)unaff_s1;
      in_stack_00000220 = ppiVar10;
      if (pvVar3 == (void *)0x0) {
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
    }
    else {
      unaff_s0 = (uint)*(byte *)unaff_s1;
      unaff_s1 = (int *)((int)unaff_s1 + 1);
      in_stack_00000220 = ppiVar10;
      if (((in_stack_00000210 & 0x10) != 0) && (iVar2 < (int)unaff_s0)) {
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
    }
    goto code_r0x80063744;
  case 0x75:
    piVar6 = *in_stack_00000220;
    if ((in_stack_00000210 & 0x20) != 0) {
      piVar6 = (int *)((uint)piVar6 & 0xffff);
    }
    in_stack_00000210 = in_stack_00000210 & 0xff;
    break;
  case 0x78:
    goto SPRINTF_OBJ_588;
  }
  bVar9 = (byte)(in_stack_00000210 >> 8);
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) && (iVar2 = in_stack_00000214, bVar9 != 0)) {
      iVar2 = in_stack_00000214 + -1;
    }
    if (iVar2 < 1) {
      iVar2 = 1;
    }
  }
  unaff_s0 = 0;
  while (piVar6 != (int *)0x0) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    unaff_s0 = unaff_s0 + 1;
    *(byte *)unaff_s1 = (char)piVar6 + (char)(int *)((uint)piVar6 / 10) * -10 + 0x30;
    piVar6 = (int *)((uint)piVar6 / 10);
  }
  for (; (int)unaff_s0 < iVar2; unaff_s0 = unaff_s0 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  if (bVar9 != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar9;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  goto code_r0x80063744;
SPRINTF_OBJ_588:
  piVar6 = *in_stack_00000220;
  if ((in_stack_00000210 & 0x20) != 0) {
    piVar6 = (int *)((uint)piVar6 & 0xffff);
  }
  if ((in_stack_00000210 & 0x10) == 0) {
    if (((in_stack_00000210 & 8) != 0) && (iVar2 = in_stack_00000214, (in_stack_00000210 & 4) != 0))
    {
      iVar2 = in_stack_00000214 + -2;
    }
    if (iVar2 < 1) {
      iVar2 = 1;
    }
  }
  unaff_s0 = 0;
  for (; piVar6 != (int *)0x0; piVar6 = (int *)((uint)piVar6 >> 4)) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    unaff_s0 = unaff_s0 + 1;
    *(char *)unaff_s1 = "0123456789abcdef"[(uint)piVar6 & 0xf];
  }
  for (; (int)unaff_s0 < iVar2; unaff_s0 = unaff_s0 + 1) {
    unaff_s1 = (int *)((int)unaff_s1 + -1);
    *(byte *)unaff_s1 = 0x30;
  }
  in_stack_00000220 = in_stack_00000220 + 1;
  if ((in_stack_00000210 & 4) != 0) {
    *(byte *)((int)unaff_s1 + -1) = bVar9;
    *(byte *)((int)unaff_s1 + -2) = 0x30;
    iVar1 = SPRINTF_OBJ_770();
    return iVar1;
  }
  goto code_r0x80063744;
}



int SPRINTF_OBJ_804(void)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  void *pvVar4;
  undefined *puVar5;
  int iVar6;
  int *piVar7;
  uchar *puVar8;
  uint uVar9;
  int *__s;
  int unaff_s2;
  int unaff_s3;
  uint unaff_s4;
  uint unaff_s5;
  uint unaff_s6;
  byte bVar10;
  int **ppiVar11;
  int **in_stack_00000220;
  int iVar12;
  int in_stack_0000024c;
  
  while( true ) {
    bVar10 = *(byte *)(in_stack_0000024c + 1);
    if (bVar10 == 0) break;
    if (bVar10 != 0x25) {
SPRINTF_OBJ_764:
      *(byte *)(unaff_s3 + unaff_s2) = bVar10;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    }
    uVar9 = (uint)*(byte *)(in_stack_0000024c + 2);
    if (uVar9 == unaff_s5) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar9 == unaff_s6) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar9 == unaff_s4) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar9 == 0x23) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    if (uVar9 == 0x30) {
      iVar1 = SPRINTF_OBJ_90();
      return iVar1;
    }
    iVar1 = DAT_80074d9c;
    iVar12 = in_stack_0000024c + 2;
    if (uVar9 == 0x2a) {
      iVar1 = SPRINTF_OBJ_1C0(in_stack_0000024c + 1,*(undefined *)(in_stack_0000024c + 3));
      return iVar1;
    }
    while (uVar9 - 0x30 < 10) {
      iVar1 = iVar1 * 10 + -0x30 + uVar9;
      uVar9 = (uint)*(byte *)(iVar12 + 1);
      iVar12 = iVar12 + 1;
    }
    iVar6 = in_stack_0000024c + 1;
    uVar3 = DAT_80074d98;
    iVar2 = DAT_80074da0;
    in_stack_0000024c = iVar12;
    if (uVar9 == 0x2e) {
      uVar9 = (uint)*(byte *)(iVar12 + 1);
      iVar6 = iVar12;
      if (uVar9 == 0x2a) {
        iVar1 = SPRINTF_OBJ_260(iVar12,*(undefined *)(iVar12 + 2));
        return iVar1;
      }
      while (in_stack_0000024c = iVar6 + 1, uVar9 - 0x30 < 10) {
        iVar2 = iVar2 * 10 + -0x30 + uVar9;
        uVar9 = (uint)*(byte *)(iVar6 + 2);
        iVar6 = in_stack_0000024c;
      }
      iVar6 = iVar12;
      if (-1 < iVar2) {
        uVar3 = DAT_80074d98 | 0x10;
      }
    }
    bVar10 = (byte)uVar9;
    __s = (int *)&stack0x00000210;
    if ((uVar3 & 1) != 0) {
      uVar3 = uVar3 & 0xfffffff7;
    }
    switch(uVar9) {
    case 0x4c:
      iVar1 = SPRINTF_OBJ_2A4(iVar6,*(undefined *)(in_stack_0000024c + 1));
      return iVar1;
    default:
      if (uVar9 == 0x25) goto SPRINTF_OBJ_764;
      goto SPRINTF_OBJ_824;
    case 99:
      iVar1 = SPRINTF_OBJ_770();
      return iVar1;
    case 100:
    case 0x69:
      piVar7 = *in_stack_00000220;
      if ((uVar3 & 0x20) != 0) {
        piVar7 = (int *)(int)(short)piVar7;
      }
      if ((int)piVar7 < 0) {
        iVar1 = SPRINTF_OBJ_38C(-(int)piVar7);
        return iVar1;
      }
      if ((uVar3 & 2) != 0) {
        iVar1 = SPRINTF_OBJ_38C();
        return iVar1;
      }
      goto code_r0x80063360;
    case 0x68:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6c:
      iVar1 = SPRINTF_OBJ_2EC();
      return iVar1;
    case 0x6e:
      if ((uVar3 & 0x20) != 0) {
        *(short *)*in_stack_00000220 = (short)unaff_s2;
        iVar1 = SPRINTF_OBJ_804();
        return iVar1;
      }
      **in_stack_00000220 = unaff_s2;
      iVar1 = SPRINTF_OBJ_804();
      return iVar1;
    case 0x6f:
      ppiVar11 = in_stack_00000220 + 1;
      piVar7 = *in_stack_00000220;
      if ((uVar3 & 0x20) != 0) {
        piVar7 = (int *)((uint)piVar7 & 0xffff);
      }
      if ((uVar3 & 0x10) == 0) {
        if ((uVar3 & 8) != 0) {
          iVar2 = iVar1;
        }
        if (iVar2 < 1) {
          iVar2 = 1;
        }
      }
      uVar9 = 0;
      for (; piVar7 != (int *)0x0; piVar7 = (int *)((uint)piVar7 >> 3)) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = ((byte)piVar7 & 7) + 0x30;
        uVar9 = uVar9 + 1;
      }
      if ((((uVar3 & 4) != 0) && (uVar9 != 0)) && (*(byte *)__s != 0x30)) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
        uVar9 = uVar9 + 1;
      }
      if ((int)uVar9 < iVar2) {
        do {
          __s = (int *)((int)__s + -1);
          *(byte *)__s = 0x30;
          uVar9 = uVar9 + 1;
        } while ((int)uVar9 < iVar2);
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
      break;
    case 0x70:
    case 0x58:
      iVar1 = SPRINTF_OBJ_590();
      return iVar1;
    case 0x73:
      ppiVar11 = in_stack_00000220 + 1;
      __s = *in_stack_00000220;
      if ((uVar3 & 4) == 0) {
        if ((uVar3 & 0x10) == 0) {
          strlen((char *)__s);
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
        pvVar4 = memchr((uchar *)__s,'\0',iVar2);
        uVar9 = (int)pvVar4 - (int)__s;
        if (pvVar4 == (void *)0x0) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      else {
        uVar9 = (uint)*(byte *)__s;
        __s = (int *)((int)__s + 1);
        if (((uVar3 & 0x10) != 0) && (iVar2 < (int)uVar9)) {
          iVar1 = SPRINTF_OBJ_770();
          return iVar1;
        }
      }
      break;
    case 0x75:
      piVar7 = *in_stack_00000220;
      if ((uVar3 & 0x20) != 0) {
        piVar7 = (int *)((uint)piVar7 & 0xffff);
      }
      uVar3 = uVar3 & 0xff;
code_r0x80063360:
      ppiVar11 = in_stack_00000220 + 1;
      bVar10 = (byte)(uVar3 >> 8);
      if ((uVar3 & 0x10) == 0) {
        if (((uVar3 & 8) != 0) && (iVar2 = iVar1, bVar10 != 0)) {
          iVar2 = iVar1 + -1;
        }
        if (iVar2 < 1) {
          iVar2 = 1;
        }
      }
      uVar9 = 0;
      while (piVar7 != (int *)0x0) {
        __s = (int *)((int)__s + -1);
        uVar9 = uVar9 + 1;
        *(byte *)__s = (char)piVar7 + (char)(int *)((uint)piVar7 / 10) * -10 + 0x30;
        piVar7 = (int *)((uint)piVar7 / 10);
      }
      for (; (int)uVar9 < iVar2; uVar9 = uVar9 + 1) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
      }
      if (bVar10 != 0) {
        *(byte *)((int)__s + -1) = bVar10;
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
      break;
    case 0x78:
      ppiVar11 = in_stack_00000220 + 1;
      piVar7 = *in_stack_00000220;
      if ((uVar3 & 0x20) != 0) {
        piVar7 = (int *)((uint)piVar7 & 0xffff);
      }
      if ((uVar3 & 0x10) == 0) {
        if (((uVar3 & 8) != 0) && (iVar2 = iVar1, (uVar3 & 4) != 0)) {
          iVar2 = iVar1 + -2;
        }
        if (iVar2 < 1) {
          iVar2 = 1;
        }
      }
      uVar9 = 0;
      for (; piVar7 != (int *)0x0; piVar7 = (int *)((uint)piVar7 >> 4)) {
        __s = (int *)((int)__s + -1);
        uVar9 = uVar9 + 1;
        *(char *)__s = "0123456789abcdef"[(uint)piVar7 & 0xf];
      }
      for (; (int)uVar9 < iVar2; uVar9 = uVar9 + 1) {
        __s = (int *)((int)__s + -1);
        *(byte *)__s = 0x30;
      }
      if ((uVar3 & 4) != 0) {
        *(byte *)((int)__s + -1) = bVar10;
        *(byte *)((int)__s + -2) = 0x30;
        iVar1 = SPRINTF_OBJ_770();
        return iVar1;
      }
    }
    puVar8 = (uchar *)(unaff_s3 + unaff_s2);
    if (((int)uVar9 < iVar1) && ((uVar3 & 1) == 0)) {
      puVar5 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar5 = (char)unaff_s4;
        puVar5 = puVar5 + 1;
        iVar1 = iVar1 + -1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar9 < iVar1);
      puVar8 = (uchar *)(unaff_s3 + unaff_s2);
    }
    memmove(puVar8,(uchar *)__s,uVar9);
    unaff_s2 = unaff_s2 + uVar9;
    in_stack_00000220 = ppiVar11;
    if ((int)uVar9 < iVar1) {
      puVar5 = (undefined *)(unaff_s2 + unaff_s3);
      do {
        *puVar5 = (char)unaff_s4;
        puVar5 = puVar5 + 1;
        uVar9 = uVar9 + 1;
        unaff_s2 = unaff_s2 + 1;
      } while ((int)uVar9 < iVar1);
    }
  }
SPRINTF_OBJ_824:
  *(undefined *)(unaff_s3 + unaff_s2) = 0;
  return unaff_s2;
}



void * memmove(uchar *param_1,uchar *param_2,int param_3)

{
  bool bVar1;
  uchar uVar2;
  void *pvVar3;
  uchar *puVar4;
  int iVar5;
  uchar *puVar6;
  
  if (param_1 < param_2) {
    iVar5 = param_3 + -1;
    if (0 < param_3) {
      do {
        uVar2 = *param_2;
        param_2 = param_2 + 1;
        *param_1 = uVar2;
        bVar1 = 0 < iVar5;
        param_1 = param_1 + 1;
        iVar5 = iVar5 + -1;
      } while (bVar1);
    }
  }
  else {
    iVar5 = param_3 + -1;
    if (0 < param_3) {
      puVar6 = param_1 + iVar5;
      puVar4 = param_2 + iVar5;
      do {
        uVar2 = *puVar4;
        puVar4 = puVar4 + -1;
        *puVar6 = uVar2;
        bVar1 = 0 < iVar5;
        puVar6 = puVar6 + -1;
        iVar5 = iVar5 + -1;
      } while (bVar1);
      pvVar3 = (void *)MEMMOVE_OBJ_64();
      return pvVar3;
    }
  }
  return param_1;
}



undefined4 MEMMOVE_OBJ_64(undefined4 param_1)

{
  return param_1;
}



// Possible PUTS.OBJ/puts

int puts(char *__s)

{
  char cVar1;
  int in_v0;
  int iVar2;
  
  if (__s == (char *)0x0) {
    iVar2 = PUTS_OBJ_2C();
    return iVar2;
  }
  while( true ) {
    cVar1 = *__s;
    __s = __s + 1;
    if (cVar1 == '\0') break;
    putchar(cVar1);
  }
  return in_v0;
}



void PUTS_OBJ_2C(void)

{
  char cVar1;
  char *unaff_s0;
  
  while( true ) {
    cVar1 = *unaff_s0;
    unaff_s0 = unaff_s0 + 1;
    if (cVar1 == '\0') break;
    putchar(cVar1);
  }
  return;
}



int setjmp(__jmp_buf_tag *__env)

{
  int unaff_s0;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  ulong unaff_s4;
  ulong unaff_s5;
  ulong unaff_s6;
  ulong unaff_s7;
  int unaff_s8;
  int unaff_retaddr;
  undefined auStackX_0 [16];
  
  __env->__jmpbuf[0] = unaff_retaddr;
  (__env->__saved_mask).__val[4] = (ulong)&DAT_80075264;
  __env->__jmpbuf[1] = (int)register0x00000074;
  __env->__jmpbuf[2] = unaff_s8;
  __env->__jmpbuf[3] = unaff_s0;
  __env->__jmpbuf[4] = unaff_s1;
  __env->__jmpbuf[5] = unaff_s2;
  __env->__mask_was_saved = unaff_s3;
  (__env->__saved_mask).__val[0] = unaff_s4;
  (__env->__saved_mask).__val[1] = unaff_s5;
  (__env->__saved_mask).__val[2] = unaff_s6;
  (__env->__saved_mask).__val[3] = unaff_s7;
  return 0;
}



void longjmp(__jmp_buf_tag *__env,int __val)

{
  return;
}



void exit(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdInit(void)

{
  int iVar1;
  int iVar2;
  
  iVar2 = 4;
  do {
    iVar1 = CdReset(1);
    iVar2 = iVar2 + -1;
    if (iVar1 == 1) {
      CdSyncCallback(def_cbsync);
      CdReadyCallback(def_cbready);
      CdReadCallback(def_cbread);
      CdReadMode(0);
      iVar2 = EVENT_OBJ_84();
      return iVar2;
    }
  } while (iVar2 != -1);
  printf("CdInit: Init failed\n");
  return 0;
}



void EVENT_OBJ_84(void)

{
  return;
}



void def_cbsync(void)

{
  DeliverEvent(0xf0000003,0x20);
  return;
}



void def_cbready(void)

{
  DeliverEvent(0xf0000003,0x40);
  return;
}



void def_cbread(void)

{
  DeliverEvent(0xf0000003,0x40);
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdStatus(void)

{
  return (uint)DAT_80074e44;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdMode(void)

{
  return (uint)DAT_80074e54;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

int CdLastCom(void)

{
  return (uint)DAT_80074e55;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

CdlLOC * CdLastPos(void)

{
  return (CdlLOC *)&DAT_80074e50;
}



int CdReset(int mode)

{
  int iVar1;
  int iVar2;
  
  if (mode == 2) {
    CD_initintr();
    iVar1 = SYS_OBJ_98();
    return iVar1;
  }
  iVar1 = CD_init();
  iVar2 = 0;
  if ((iVar1 == 0) && (iVar2 = 1, mode == 1)) {
    iVar1 = CD_initvol();
    iVar2 = 0;
    if (iVar1 == 0) {
      iVar2 = 1;
    }
  }
  return iVar2;
}



void SYS_OBJ_98(void)

{
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD

void CdFlush(void)

{
  CD_flush();
  return;
}



int CdSetDebug(int level)

{
  int iVar1;
  
  iVar1 = DAT_80074e40;
  DAT_80074e40 = level;
  return iVar1;
}



char * CdComstr(u_char_conflict com)

{
  char *pcVar1;
  
  if (com < 0x1c) {
    pcVar1 = (char *)SYS_OBJ_110();
    return pcVar1;
  }
  return "none";
}



void SYS_OBJ_110(void)

{
  return;
}



char * CdIntstr(u_char_conflict intr)

{
  char *pcVar1;
  
  if (intr < 7) {
    pcVar1 = (char *)SYS_OBJ_144();
    return pcVar1;
  }
  return "none";
}



void SYS_OBJ_144(void)

{
  return;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD

int CdSync(int mode,u_char_conflict *result)

{
  int iVar1;
  
  iVar1 = CD_Sync();
  return iVar1;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD

int CdReady(int mode,u_char_conflict *result)

{
  int iVar1;
  
  iVar1 = CD_ready();
  return iVar1;
}



CdlCB CdSyncCallback(CdlCB func)

{
  CdlCB pCVar1;
  
  pCVar1 = DAT_80074e34;
  DAT_80074e34 = func;
  return pCVar1;
}



CdlCB CdReadyCallback(CdlCB func)

{
  CdlCB pCVar1;
  
  pCVar1 = DAT_80074e38;
  DAT_80074e38 = func;
  return pCVar1;
}



int CdControl(u_char_conflict com,u_char_conflict *param,u_char_conflict *result)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  
  uVar1 = DAT_80074e34;
  iVar3 = 3;
  while( true ) {
    DAT_80074e34 = 0;
    if ((com != 1) && ((DAT_80074e44 & 0x10) != 0)) {
      CD_cw(1,0,0,0);
    }
    if ((((param == (u_char_conflict *)0x0) || (*(int *)(&DAT_80074dac + (uint)com * 4) == 0)) ||
        (iVar2 = CD_cw(2,param,result,0), iVar2 == 0)) &&
       (DAT_80074e34 = uVar1, iVar2 = CD_cw(com,param,result,0), iVar2 == 0)) break;
    iVar3 = iVar3 + -1;
    if (iVar3 == -1) {
      DAT_80074e34 = uVar1;
      return 0;
    }
  }
  return 1;
}



int CdControlF(u_char_conflict com,u_char_conflict *param)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  
  uVar1 = DAT_80074e34;
  iVar3 = 3;
  while( true ) {
    DAT_80074e34 = 0;
    if ((com != 1) && ((DAT_80074e44 & 0x10) != 0)) {
      CD_cw(1,0,0,0);
    }
    if ((((param == (u_char_conflict *)0x0) || (*(int *)(&DAT_80074dac + (uint)com * 4) == 0)) ||
        (iVar2 = CD_cw(2,param,0,0), iVar2 == 0)) &&
       (DAT_80074e34 = uVar1, iVar2 = CD_cw(com,param,0,1), iVar2 == 0)) break;
    iVar3 = iVar3 + -1;
    if (iVar3 == -1) {
      DAT_80074e34 = uVar1;
      return 0;
    }
  }
  return 1;
}



int CdControlB(u_char_conflict com,u_char_conflict *param,u_char_conflict *result)

{
  undefined4 uVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  uVar1 = DAT_80074e34;
  iVar4 = 3;
  do {
    DAT_80074e34 = 0;
    if ((com != 1) && ((DAT_80074e44 & 0x10) != 0)) {
      CD_cw(1,0,0,0);
    }
    if (((param == (u_char_conflict *)0x0) || (*(int *)(&DAT_80074dac + (uint)com * 4) == 0)) ||
       (iVar2 = CD_cw(2,param,result,0), iVar2 == 0)) {
      DAT_80074e34 = uVar1;
      iVar2 = CD_cw(com,param,result,0);
      iVar3 = 0;
      if (iVar2 == 0) break;
    }
    iVar4 = iVar4 + -1;
    iVar3 = -1;
    DAT_80074e34 = uVar1;
  } while (iVar4 != -1);
  if (iVar3 != 0) {
    return 0;
  }
  CD_Sync(0,result);
  iVar4 = SYS_OBJ_538();
  return iVar4;
}



void SYS_OBJ_538(void)

{
  return;
}



int CdMix(CdlATV *vol)

{
  CD_vol();
  return 1;
}



int CdGetSector(void *madr,int size)

{
  int iVar1;
  
  iVar1 = CD_getsector();
  return (uint)(iVar1 == 0);
}



int CdGetSector2(void *madr,int size)

{
  int iVar1;
  
  iVar1 = CD_getsector2();
  return (uint)(iVar1 == 0);
}



_func_50 * CdDataCallback(func *func)

{
  _func_50 *p_Var1;
  
  p_Var1 = (_func_50 *)DMACallback(3,func);
  return p_Var1;
}



// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD

int CdDataSync(int mode)

{
  int iVar1;
  
  iVar1 = CD_datasync(mode);
  return iVar1;
}



CdlLOC * CdIntToPos(int i,CdlLOC *p)

{
  int iVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = (i + 0x96) / 0x4b;
  iVar2 = (i + 0x96) % 0x4b;
  iVar1 = iVar3 / 0x3c;
  iVar3 = iVar3 % 0x3c;
  p->sector = (char)iVar2 + (char)(iVar2 / 10) * '\x06';
  p->second = (char)iVar3 + (char)(iVar3 / 10) * '\x06';
  p->minute = (char)iVar1 + (char)(iVar1 / 10) * '\x06';
  return p;
}



int CdPosToInt(CdlLOC *p)

{
  return (((uint)(p->minute >> 4) * 10 + (p->minute & 0xf)) * 0x3c +
         (uint)(p->second >> 4) * 10 + (p->second & 0xf)) * 0x4b +
         (uint)(p->sector >> 4) * 10 + (p->sector & 0xf) + -0x96;
}



undefined4 getintr(void)

{
  undefined4 uVar1;
  
  *PTR_CDROM_REG0_800750fc = 1;
  if ((*PTR_CDROM_REG3_80075108 & 7) != 0) {
    uVar1 = BIOS_OBJ_64();
    return uVar1;
  }
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

undefined4 BIOS_OBJ_64(byte *param_1)

{
  undefined uVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  undefined *puVar4;
  undefined1 *puVar5;
  int iVar6;
  uint unaff_s1;
  byte param_5;
  byte param_7;
  byte param_11;
  
  while (iVar6 = 0, param_5 != (*param_1 & 7)) {
    param_5 = *param_1 & 7;
  }
  puVar3 = (undefined4 *)&stack0x00000018;
  do {
    if ((*PTR_CDROM_REG0_800750fc & 0x20) == 0) break;
    iVar6 = iVar6 + 1;
    *(undefined *)puVar3 = *PTR_CDROM_REG1_80075100;
    puVar3 = (undefined4 *)((int)puVar3 + 1);
  } while (iVar6 < 8);
  if (iVar6 < 8) {
    puVar4 = (undefined *)((int)&stack0x00000018 + iVar6);
    do {
      *puVar4 = 0;
      puVar4 = puVar4 + 1;
    } while ((int)puVar4 < (int)&stack0x00000020);
  }
  *PTR_CDROM_REG0_800750fc = 1;
  *PTR_CDROM_REG3_80075108 = 7;
  *PTR_CDROM_REG2_80075104 = 7;
  if ((param_5 != 3) || (*(int *)(&DAT_80074ffc + (uint)DAT_80074e55 * 4) != 0)) {
    if (((_DAT_80074e44 & 0x10) == 0) && ((param_7 & 0x10) != 0)) {
      DAT_80074e4c = DAT_80074e4c + 1;
    }
    _DAT_80074e44 = (uint)param_7;
    DAT_80074e48 = (uint)param_11;
    unaff_s1 = _DAT_80074e44 & 0x1d;
  }
  if (((param_5 == 5) && (0 < DAT_80074e40)) && (printf("DiskError: "), 0 < DAT_80074e40)) {
    printf("com=%s,code=(%02x:%02x)\n",(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],_DAT_80074e44,
           DAT_80074e48);
  }
  switch(param_5) {
  case 1:
    DAT_80075115 = 1;
    if (unaff_s1 != 0) {
      if (iVar6 == 1) {
        unaff_s1 = 0;
      }
      DAT_80075115 = 1;
      if (unaff_s1 != 0) {
        DAT_80075115 = 5;
      }
    }
    puVar5 = &DAT_80075ad8;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar6 = 7;
    do {
      uVar1 = *(undefined *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar6 = iVar6 + -1;
      *puVar5 = uVar1;
      puVar5 = puVar5 + 1;
    } while (iVar6 != -1);
    *PTR_CDROM_REG0_800750fc = 0;
    *PTR_CDROM_REG3_80075108 = 0;
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  case 2:
    DAT_80075114 = 2;
    if (unaff_s1 != 0) {
      DAT_80075114 = 5;
    }
    puVar5 = &DAT_80075ad0;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar6 = 7;
    do {
      uVar1 = *(undefined *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar6 = iVar6 + -1;
      *puVar5 = uVar1;
      puVar5 = puVar5 + 1;
    } while (iVar6 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  case 3:
    break;
  case 4:
    puVar5 = &DAT_80075ae0;
    DAT_80075116 = 4;
    puVar3 = (undefined4 *)&stack0x00000018;
    DAT_80075115 = 4;
    iVar6 = 7;
    do {
      uVar1 = *(undefined *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar6 = iVar6 + -1;
      *puVar5 = uVar1;
      puVar5 = puVar5 + 1;
    } while (iVar6 != -1);
    puVar5 = &DAT_80075ad8;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar6 = 7;
    do {
      uVar1 = *(undefined *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar6 = iVar6 + -1;
      *puVar5 = uVar1;
      puVar5 = puVar5 + 1;
    } while (iVar6 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  case 5:
    puVar5 = &DAT_80075ad0;
    puVar3 = (undefined4 *)&stack0x00000018;
    DAT_80075115 = 5;
    DAT_80075114 = 5;
    iVar6 = 7;
    do {
      uVar1 = *(undefined *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar6 = iVar6 + -1;
      *puVar5 = uVar1;
      puVar5 = puVar5 + 1;
    } while (iVar6 != -1);
    puVar5 = &DAT_80075ad8;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar6 = 7;
    do {
      uVar1 = *(undefined *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar6 = iVar6 + -1;
      *puVar5 = uVar1;
      puVar5 = puVar5 + 1;
    } while (iVar6 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  default:
    puts("CDROM: unknown intr");
    printf("(%d)\n",(uint)param_5);
    return 0;
  }
  if (unaff_s1 != 0) {
    DAT_80075114 = 5;
    puVar5 = &DAT_80075ad0;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar6 = 7;
    do {
      uVar1 = *(undefined *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar6 = iVar6 + -1;
      *puVar5 = uVar1;
      puVar5 = puVar5 + 1;
    } while (iVar6 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  }
  if (*(int *)(&DAT_80074efc + (uint)DAT_80074e55 * 4) == 0) {
    DAT_80075114 = 2;
    puVar5 = &DAT_80075ad0;
    puVar3 = (undefined4 *)&stack0x00000018;
    iVar6 = 7;
    do {
      uVar1 = *(undefined *)puVar3;
      puVar3 = (undefined4 *)((int)puVar3 + 1);
      iVar6 = iVar6 + -1;
      *puVar5 = uVar1;
      puVar5 = puVar5 + 1;
    } while (iVar6 != -1);
    uVar2 = BIOS_OBJ_570();
    return uVar2;
  }
  DAT_80075114 = 3;
  puVar5 = &DAT_80075ad0;
  puVar3 = (undefined4 *)&stack0x00000018;
  iVar6 = 7;
  do {
    uVar1 = *(undefined *)puVar3;
    puVar3 = (undefined4 *)((int)puVar3 + 1);
    iVar6 = iVar6 + -1;
    *puVar5 = uVar1;
    puVar5 = puVar5 + 1;
  } while (iVar6 != -1);
  uVar2 = BIOS_OBJ_570();
  return uVar2;
}



// WARNING: Removing unreachable block (ram,0x800645c8)

void BIOS_OBJ_26C(void)

{
  undefined uVar1;
  undefined1 *puVar2;
  int iVar3;
  undefined *puVar4;
  int unaff_s1;
  
  if (unaff_s1 != 0) {
    DAT_80075114 = 5;
    puVar2 = &DAT_80075ad0;
    puVar4 = &stack0x00000018;
    iVar3 = 7;
    do {
      uVar1 = *puVar4;
      puVar4 = puVar4 + 1;
      iVar3 = iVar3 + -1;
      *puVar2 = uVar1;
      puVar2 = puVar2 + 1;
    } while (iVar3 != -1);
    BIOS_OBJ_570();
    return;
  }
  if (*(int *)(&DAT_80074efc + (uint)DAT_80074e55 * 4) != 0) {
    DAT_80075114 = 3;
    puVar2 = &DAT_80075ad0;
    puVar4 = &stack0x00000018;
    iVar3 = 7;
    do {
      uVar1 = *puVar4;
      puVar4 = puVar4 + 1;
      iVar3 = iVar3 + -1;
      *puVar2 = uVar1;
      puVar2 = puVar2 + 1;
    } while (iVar3 != -1);
    BIOS_OBJ_570();
    return;
  }
  DAT_80075114 = 2;
  puVar2 = &DAT_80075ad0;
  puVar4 = &stack0x00000018;
  iVar3 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar3 = iVar3 + -1;
    *puVar2 = uVar1;
    puVar2 = puVar2 + 1;
  } while (iVar3 != -1);
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_36C(void)

{
  undefined uVar1;
  undefined1 *puVar2;
  int iVar3;
  undefined *puVar4;
  int unaff_s1;
  
  DAT_80075114 = 2;
  if (unaff_s1 != 0) {
    DAT_80075114 = 5;
  }
  puVar2 = &DAT_80075ad0;
  puVar4 = &stack0x00000018;
  iVar3 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar3 = iVar3 + -1;
    *puVar2 = uVar1;
    puVar2 = puVar2 + 1;
  } while (iVar3 != -1);
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_3B8(void)

{
  undefined uVar1;
  undefined1 *puVar2;
  int iVar3;
  undefined *puVar4;
  int unaff_s0;
  int unaff_s1;
  
  DAT_80075115 = 1;
  if (unaff_s1 != 0) {
    if (unaff_s0 == 1) {
      unaff_s1 = 0;
    }
    DAT_80075115 = 1;
    if (unaff_s1 != 0) {
      DAT_80075115 = 5;
    }
  }
  puVar2 = &DAT_80075ad8;
  puVar4 = &stack0x00000018;
  iVar3 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar3 = iVar3 + -1;
    *puVar2 = uVar1;
    puVar2 = puVar2 + 1;
  } while (iVar3 != -1);
  *PTR_CDROM_REG0_800750fc = 0;
  *PTR_CDROM_REG3_80075108 = 0;
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_43C(void)

{
  undefined uVar1;
  int iVar2;
  undefined1 *puVar3;
  undefined *puVar4;
  
  puVar3 = &DAT_80075ae0;
  DAT_80075116 = 4;
  puVar4 = &stack0x00000018;
  DAT_80075115 = 4;
  iVar2 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar2 = iVar2 + -1;
    *puVar3 = uVar1;
    puVar3 = puVar3 + 1;
  } while (iVar2 != -1);
  puVar3 = &DAT_80075ad8;
  puVar4 = &stack0x00000018;
  iVar2 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar2 = iVar2 + -1;
    *puVar3 = uVar1;
    puVar3 = puVar3 + 1;
  } while (iVar2 != -1);
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_4C0(void)

{
  undefined uVar1;
  int iVar2;
  undefined1 *puVar3;
  undefined *puVar4;
  
  puVar3 = &DAT_80075ad0;
  puVar4 = &stack0x00000018;
  DAT_80075115 = 5;
  DAT_80075114 = 5;
  iVar2 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar2 = iVar2 + -1;
    *puVar3 = uVar1;
    puVar3 = puVar3 + 1;
  } while (iVar2 != -1);
  puVar3 = &DAT_80075ad8;
  puVar4 = &stack0x00000018;
  iVar2 = 7;
  do {
    uVar1 = *puVar4;
    puVar4 = puVar4 + 1;
    iVar2 = iVar2 + -1;
    *puVar3 = uVar1;
    puVar3 = puVar3 + 1;
  } while (iVar2 != -1);
  BIOS_OBJ_570();
  return;
}



void BIOS_OBJ_570(void)

{
  return;
}



// Possible BIOS.OBJ/CD_sync

undefined4 CD_Sync(int param_1,undefined *param_2)

{
  byte bVar1;
  undefined uVar2;
  bool bVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  undefined1 *puVar7;
  
  iVar4 = Vsync(0xffffffff);
  DAT_80075ae8 = iVar4 + 0x3c0;
  DAT_80075aec = 0;
  DAT_80075af0 = "CD_sync";
  do {
    iVar4 = Vsync(0xffffffff);
    if ((DAT_80075ae8 < iVar4) ||
       (iVar4 = DAT_80075aec + 1, bVar3 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar4, bVar3)) {
      puts("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
             (&PTR_s_NoIntr_80074edc)[DAT_80075114],(&PTR_s_NoIntr_80074edc)[DAT_80075115]);
      CD_flush();
      uVar5 = BIOS_OBJ_6B4();
      return uVar5;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_800750fc;
      while( true ) {
        uVar6 = getintr();
        if (uVar6 == 0) break;
        if (((uVar6 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
          (*DAT_80074e38)(DAT_80075115,&DAT_80075ad8);
        }
        if (((uVar6 & 2) != 0) && (DAT_80074e34 != (code *)0x0)) {
          (*DAT_80074e34)(DAT_80075114,&DAT_80075ad0);
          uVar5 = BIOS_OBJ_6E4();
          return uVar5;
        }
      }
      *PTR_CDROM_REG0_800750fc = bVar1 & 3;
    }
    if ((DAT_80075114 == 2) || (DAT_80075114 == 5)) {
      DAT_80075114 = 2;
      puVar7 = &DAT_80075ad0;
      iVar4 = 7;
      if (param_2 != (undefined *)0x0) {
        do {
          uVar2 = *puVar7;
          puVar7 = puVar7 + 1;
          iVar4 = iVar4 + -1;
          *param_2 = uVar2;
          param_2 = param_2 + 1;
        } while (iVar4 != -1);
      }
      uVar5 = BIOS_OBJ_7DC();
      return uVar5;
    }
    if (param_1 != 0) {
      return 0;
    }
  } while( true );
}



undefined4 BIOS_OBJ_6B4(void)

{
  byte bVar1;
  undefined uVar2;
  bool bVar3;
  int in_v0;
  int iVar4;
  uint uVar5;
  undefined4 uVar6;
  undefined1 *puVar7;
  byte *unaff_s2;
  int unaff_s3;
  undefined *unaff_s4;
  int unaff_s5;
  undefined *unaff_s6;
  
  while( true ) {
    if (in_v0 != 0) {
      return 0xffffffff;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_800750fc;
      while( true ) {
        uVar5 = getintr();
        if (uVar5 == 0) break;
        if (((uVar5 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
          (*DAT_80074e38)(*unaff_s4,&DAT_80075ad8);
        }
        if (((uVar5 & 2) != 0) && (DAT_80074e34 != (code *)0x0)) {
          (*DAT_80074e34)(*unaff_s2,&DAT_80075ad0);
          uVar6 = BIOS_OBJ_6E4();
          return uVar6;
        }
      }
      *PTR_CDROM_REG0_800750fc = bVar1 & 3;
    }
    if ((*unaff_s2 == 2) || (*unaff_s2 == 5)) {
      *unaff_s2 = 2;
      puVar7 = &DAT_80075ad0;
      iVar4 = 7;
      if (unaff_s6 != (undefined *)0x0) {
        do {
          uVar2 = *puVar7;
          puVar7 = puVar7 + 1;
          iVar4 = iVar4 + -1;
          *unaff_s6 = uVar2;
          unaff_s6 = unaff_s6 + 1;
        } while (iVar4 != -1);
      }
      uVar6 = BIOS_OBJ_7DC();
      return uVar6;
    }
    if (unaff_s5 != 0) {
      return 0;
    }
    iVar4 = Vsync(0xffffffff);
    if ((DAT_80075ae8 < iVar4) ||
       (iVar4 = DAT_80075aec + 1, bVar3 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar4, bVar3))
    break;
    in_v0 = 0;
  }
  puts("CD timeout: ");
  printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
         *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s3));
  CD_flush();
  uVar6 = BIOS_OBJ_6B4();
  return uVar6;
}



undefined4 BIOS_OBJ_6E4(void)

{
  undefined uVar1;
  bool bVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  undefined1 *puVar6;
  byte unaff_s1;
  byte *unaff_s2;
  int unaff_s3;
  undefined *unaff_s4;
  int unaff_s5;
  undefined *unaff_s6;
  
  do {
    while( true ) {
      uVar3 = getintr();
      if (uVar3 == 0) break;
      if (((uVar3 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
        (*DAT_80074e38)(*unaff_s4,&DAT_80075ad8);
      }
      if (((uVar3 & 2) != 0) && (DAT_80074e34 != (code *)0x0)) {
        (*DAT_80074e34)(*unaff_s2,&DAT_80075ad0);
        uVar4 = BIOS_OBJ_6E4();
        return uVar4;
      }
    }
    *PTR_CDROM_REG0_800750fc = unaff_s1;
    do {
      if ((*unaff_s2 == 2) || (*unaff_s2 == 5)) {
        *unaff_s2 = 2;
        puVar6 = &DAT_80075ad0;
        iVar5 = 7;
        if (unaff_s6 != (undefined *)0x0) {
          do {
            uVar1 = *puVar6;
            puVar6 = puVar6 + 1;
            iVar5 = iVar5 + -1;
            *unaff_s6 = uVar1;
            unaff_s6 = unaff_s6 + 1;
          } while (iVar5 != -1);
        }
        uVar4 = BIOS_OBJ_7DC();
        return uVar4;
      }
      if (unaff_s5 != 0) {
        return 0;
      }
      iVar5 = Vsync(0xffffffff);
      if ((DAT_80075ae8 < iVar5) ||
         (iVar5 = DAT_80075aec + 1, bVar2 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar5, bVar2)) {
        puts("CD timeout: ");
        printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
               *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s3));
        CD_flush();
        uVar4 = BIOS_OBJ_6B4();
        return uVar4;
      }
      iVar5 = CheckCallback();
    } while (iVar5 == 0);
    unaff_s1 = *PTR_CDROM_REG0_800750fc & 3;
  } while( true );
}



void BIOS_OBJ_7DC(void)

{
  return;
}



undefined4 CD_ready(int param_1,undefined *param_2)

{
  byte bVar1;
  undefined uVar2;
  bool bVar3;
  int iVar4;
  undefined4 uVar5;
  uint uVar6;
  undefined1 *puVar7;
  
  iVar4 = Vsync(0xffffffff);
  DAT_80075ae8 = iVar4 + 0x3c0;
  DAT_80075aec = 0;
  DAT_80075af0 = "CD_ready";
  while( true ) {
    iVar4 = Vsync(0xffffffff);
    if ((DAT_80075ae8 < iVar4) ||
       (iVar4 = DAT_80075aec + 1, bVar3 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar4, bVar3)) {
      puts("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
             (&PTR_s_NoIntr_80074edc)[DAT_80075114],(&PTR_s_NoIntr_80074edc)[DAT_80075115]);
      CD_flush();
      uVar5 = BIOS_OBJ_93C();
      return uVar5;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_800750fc;
      while( true ) {
        uVar6 = getintr();
        if (uVar6 == 0) break;
        if (((uVar6 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
          (*DAT_80074e38)(DAT_80075115,&DAT_80075ad8);
        }
        if (((uVar6 & 2) != 0) && (DAT_80074e34 != (code *)0x0)) {
          (*DAT_80074e34)(DAT_80075114,&DAT_80075ad0);
          uVar5 = BIOS_OBJ_96C();
          return uVar5;
        }
      }
      *PTR_CDROM_REG0_800750fc = bVar1 & 3;
    }
    if (DAT_80075116 != '\0') break;
    if (DAT_80075115 != 0) {
      DAT_80075115 = 0;
      puVar7 = &DAT_80075ad8;
      iVar4 = 7;
      if (param_2 != (undefined *)0x0) {
        do {
          uVar2 = *puVar7;
          puVar7 = puVar7 + 1;
          iVar4 = iVar4 + -1;
          *param_2 = uVar2;
          param_2 = param_2 + 1;
        } while (iVar4 != -1);
      }
      goto BIOS_OBJ_A94;
    }
    if (param_1 != 0) {
      return 0;
    }
  }
  DAT_80075116 = '\0';
  puVar7 = &DAT_80075ae0;
  if (param_2 != (undefined *)0x0) {
    iVar4 = 7;
    do {
      uVar2 = *puVar7;
      puVar7 = puVar7 + 1;
      iVar4 = iVar4 + -1;
      *param_2 = uVar2;
      param_2 = param_2 + 1;
    } while (iVar4 != -1);
    uVar5 = BIOS_OBJ_AA4();
    return uVar5;
  }
BIOS_OBJ_A94:
  uVar5 = BIOS_OBJ_AA4();
  return uVar5;
}



undefined4 BIOS_OBJ_93C(void)

{
  byte bVar1;
  undefined uVar2;
  bool bVar3;
  int in_v0;
  int iVar4;
  uint uVar5;
  undefined4 uVar6;
  undefined1 *puVar7;
  byte *unaff_s2;
  char *unaff_s3;
  undefined *unaff_s4;
  int unaff_s5;
  undefined *unaff_s6;
  int unaff_s7;
  
  while( true ) {
    if (in_v0 != 0) {
      return 0xffffffff;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_800750fc;
      while( true ) {
        uVar5 = getintr();
        if (uVar5 == 0) break;
        if (((uVar5 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
          (*DAT_80074e38)(*unaff_s6,&DAT_80075ad8);
        }
        if (((uVar5 & 2) != 0) && (DAT_80074e34 != (code *)0x0)) {
          (*DAT_80074e34)(*unaff_s2,&DAT_80075ad0);
          uVar6 = BIOS_OBJ_96C();
          return uVar6;
        }
      }
      *PTR_CDROM_REG0_800750fc = bVar1 & 3;
    }
    if (*unaff_s3 != '\0') break;
    if (unaff_s3[-1] != '\0') {
      unaff_s3[-1] = '\0';
      puVar7 = &DAT_80075ad8;
      iVar4 = 7;
      if (unaff_s4 != (undefined *)0x0) {
        do {
          uVar2 = *puVar7;
          puVar7 = puVar7 + 1;
          iVar4 = iVar4 + -1;
          *unaff_s4 = uVar2;
          unaff_s4 = unaff_s4 + 1;
        } while (iVar4 != -1);
      }
      goto BIOS_OBJ_A94;
    }
    if (unaff_s7 != 0) {
      return 0;
    }
    iVar4 = Vsync(0xffffffff);
    if ((DAT_80075ae8 < iVar4) ||
       (iVar4 = DAT_80075aec + 1, bVar3 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar4, bVar3)) {
      puts("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
             *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s5));
      CD_flush();
      uVar6 = BIOS_OBJ_93C();
      return uVar6;
    }
    in_v0 = 0;
  }
  *unaff_s3 = '\0';
  puVar7 = &DAT_80075ae0;
  if (unaff_s4 != (undefined *)0x0) {
    iVar4 = 7;
    do {
      uVar2 = *puVar7;
      puVar7 = puVar7 + 1;
      iVar4 = iVar4 + -1;
      *unaff_s4 = uVar2;
      unaff_s4 = unaff_s4 + 1;
    } while (iVar4 != -1);
    uVar6 = BIOS_OBJ_AA4();
    return uVar6;
  }
BIOS_OBJ_A94:
  uVar6 = BIOS_OBJ_AA4();
  return uVar6;
}



undefined4 BIOS_OBJ_96C(void)

{
  undefined uVar1;
  bool bVar2;
  uint uVar3;
  undefined4 uVar4;
  int iVar5;
  undefined1 *puVar6;
  byte unaff_s1;
  byte *unaff_s2;
  char *unaff_s3;
  undefined *unaff_s4;
  int unaff_s5;
  undefined *unaff_s6;
  int unaff_s7;
  
  do {
    while( true ) {
      uVar3 = getintr();
      if (uVar3 == 0) break;
      if (((uVar3 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
        (*DAT_80074e38)(*unaff_s6,&DAT_80075ad8);
      }
      if (((uVar3 & 2) != 0) && (DAT_80074e34 != (code *)0x0)) {
        (*DAT_80074e34)(*unaff_s2,&DAT_80075ad0);
        uVar4 = BIOS_OBJ_96C();
        return uVar4;
      }
    }
    *PTR_CDROM_REG0_800750fc = unaff_s1;
    do {
      if (*unaff_s3 != '\0') {
        *unaff_s3 = '\0';
        puVar6 = &DAT_80075ae0;
        if (unaff_s4 != (undefined *)0x0) {
          iVar5 = 7;
          do {
            uVar1 = *puVar6;
            puVar6 = puVar6 + 1;
            iVar5 = iVar5 + -1;
            *unaff_s4 = uVar1;
            unaff_s4 = unaff_s4 + 1;
          } while (iVar5 != -1);
          uVar4 = BIOS_OBJ_AA4();
          return uVar4;
        }
        goto BIOS_OBJ_A94;
      }
      if (unaff_s3[-1] != '\0') {
        unaff_s3[-1] = '\0';
        puVar6 = &DAT_80075ad8;
        iVar5 = 7;
        if (unaff_s4 != (undefined *)0x0) {
          do {
            uVar1 = *puVar6;
            puVar6 = puVar6 + 1;
            iVar5 = iVar5 + -1;
            *unaff_s4 = uVar1;
            unaff_s4 = unaff_s4 + 1;
          } while (iVar5 != -1);
        }
BIOS_OBJ_A94:
        uVar4 = BIOS_OBJ_AA4();
        return uVar4;
      }
      if (unaff_s7 != 0) {
        return 0;
      }
      iVar5 = Vsync(0xffffffff);
      if ((DAT_80075ae8 < iVar5) ||
         (iVar5 = DAT_80075aec + 1, bVar2 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar5, bVar2)) {
        puts("CD timeout: ");
        printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
               *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s5));
        CD_flush();
        uVar4 = BIOS_OBJ_93C();
        return uVar4;
      }
      iVar5 = CheckCallback();
    } while (iVar5 == 0);
    unaff_s1 = *PTR_CDROM_REG0_800750fc & 3;
  } while( true );
}



void BIOS_OBJ_AA4(void)

{
  return;
}



// Possible BIOS.OBJ/CD_cw

int CD_cw(byte param_1,undefined *param_2,undefined *param_3,int param_4)

{
  undefined uVar1;
  byte bVar2;
  bool bVar3;
  int iVar4;
  uint uVar5;
  undefined *puVar6;
  int iVar7;
  undefined1 *puVar8;
  
  if (1 < DAT_80074e40) {
    printf("%s...\n",(&PTR_s_CdlSync_80074e5c)[param_1]);
  }
  if ((*(int *)(&DAT_8007507c + (uint)param_1 * 4) == 0) || (param_2 != (undefined *)0x0)) {
    CD_Sync(0,0);
    if (param_1 == 2) {
      iVar4 = 0;
      puVar6 = param_2;
      do {
        (&DAT_80074e50)[iVar4] = *puVar6;
        iVar4 = iVar4 + 1;
        puVar6 = puVar6 + 1;
      } while (iVar4 < 4);
    }
    if (param_1 == 0xe) {
      DAT_80074e54 = *param_2;
    }
    iVar4 = (uint)param_1 * 4;
    DAT_80075114 = 0;
    if (*(int *)(&DAT_80074f7c + iVar4) != 0) {
      DAT_80075115 = 0;
    }
    *PTR_CDROM_REG0_800750fc = 0;
    iVar7 = 0;
    if (0 < *(int *)(&DAT_8007507c + iVar4)) {
      do {
        uVar1 = *param_2;
        param_2 = param_2 + 1;
        *PTR_CDROM_REG2_80075104 = uVar1;
        iVar7 = iVar7 + 1;
      } while (iVar7 < *(int *)(&DAT_8007507c + iVar4));
    }
    DAT_80074e55 = param_1;
    *PTR_CDROM_REG1_80075100 = param_1;
    iVar4 = 0;
    if (param_4 == 0) {
      iVar4 = Vsync(0xffffffff);
      DAT_80075ae8 = iVar4 + 0x3c0;
      DAT_80075aec = 0;
      DAT_80075af0 = "CD_cw";
      while (DAT_80075114 == 0) {
        iVar4 = Vsync(0xffffffff);
        if ((DAT_80075ae8 < iVar4) ||
           (iVar4 = DAT_80075aec + 1, bVar3 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar4, bVar3))
        {
          puts("CD timeout: ");
          printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
                 (&PTR_s_NoIntr_80074edc)[DAT_80075114],(&PTR_s_NoIntr_80074edc)[DAT_80075115]);
          CD_flush();
          iVar4 = BIOS_OBJ_DAC();
          return iVar4;
        }
        iVar4 = CheckCallback();
        if (iVar4 != 0) {
          bVar2 = *PTR_CDROM_REG0_800750fc;
          while( true ) {
            uVar5 = getintr();
            if (uVar5 == 0) break;
            if (((uVar5 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
              (*DAT_80074e38)(DAT_80075115,&DAT_80075ad8);
            }
            if (((uVar5 & 2) != 0) && (DAT_80074e34 != (code *)0x0)) {
              (*DAT_80074e34)(DAT_80075114,&DAT_80075ad0);
              iVar4 = BIOS_OBJ_DDC();
              return iVar4;
            }
          }
          *PTR_CDROM_REG0_800750fc = bVar2 & 3;
        }
      }
      puVar8 = &DAT_80075ad0;
      if (param_3 != (undefined *)0x0) {
        iVar4 = 7;
        do {
          uVar1 = *puVar8;
          puVar8 = puVar8 + 1;
          iVar4 = iVar4 + -1;
          *param_3 = uVar1;
          param_3 = param_3 + 1;
        } while (iVar4 != -1);
      }
      iVar4 = -(uint)(DAT_80075114 == 5);
    }
  }
  else {
    iVar4 = -2;
    if (0 < DAT_80074e40) {
      printf("%s: no param\n",(&PTR_s_CdlSync_80074e5c)[param_1]);
      iVar4 = BIOS_OBJ_EC8();
      return iVar4;
    }
  }
  return iVar4;
}



int BIOS_OBJ_DAC(void)

{
  byte bVar1;
  undefined uVar2;
  bool bVar3;
  int in_v0;
  int iVar4;
  uint uVar5;
  undefined1 *puVar6;
  byte *unaff_s2;
  int unaff_s3;
  undefined *unaff_s4;
  undefined *unaff_s5;
  
  while( true ) {
    if (in_v0 != 0) {
      return -1;
    }
    iVar4 = CheckCallback();
    if (iVar4 != 0) {
      bVar1 = *PTR_CDROM_REG0_800750fc;
      while( true ) {
        uVar5 = getintr();
        if (uVar5 == 0) break;
        if (((uVar5 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
          (*DAT_80074e38)(*unaff_s4,&DAT_80075ad8);
        }
        if (((uVar5 & 2) != 0) && (DAT_80074e34 != (code *)0x0)) {
          (*DAT_80074e34)(*unaff_s2,&DAT_80075ad0);
          iVar4 = BIOS_OBJ_DDC();
          return iVar4;
        }
      }
      *PTR_CDROM_REG0_800750fc = bVar1 & 3;
    }
    if (*unaff_s2 != 0) {
      puVar6 = &DAT_80075ad0;
      if (unaff_s5 != (undefined *)0x0) {
        iVar4 = 7;
        do {
          uVar2 = *puVar6;
          puVar6 = puVar6 + 1;
          iVar4 = iVar4 + -1;
          *unaff_s5 = uVar2;
          unaff_s5 = unaff_s5 + 1;
        } while (iVar4 != -1);
      }
      return -(uint)(DAT_80075114 == '\x05');
    }
    iVar4 = Vsync(0xffffffff);
    if ((DAT_80075ae8 < iVar4) ||
       (iVar4 = DAT_80075aec + 1, bVar3 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar4, bVar3))
    break;
    in_v0 = 0;
  }
  puts("CD timeout: ");
  printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
         *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s3));
  CD_flush();
  iVar4 = BIOS_OBJ_DAC();
  return iVar4;
}



int BIOS_OBJ_DDC(void)

{
  undefined uVar1;
  bool bVar2;
  uint uVar3;
  int iVar4;
  undefined1 *puVar5;
  byte unaff_s1;
  byte *unaff_s2;
  int unaff_s3;
  undefined *unaff_s4;
  undefined *unaff_s5;
  
  do {
    while( true ) {
      uVar3 = getintr();
      if (uVar3 == 0) break;
      if (((uVar3 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
        (*DAT_80074e38)(*unaff_s4,&DAT_80075ad8);
      }
      if (((uVar3 & 2) != 0) && (DAT_80074e34 != (code *)0x0)) {
        (*DAT_80074e34)(*unaff_s2,&DAT_80075ad0);
        iVar4 = BIOS_OBJ_DDC();
        return iVar4;
      }
    }
    *PTR_CDROM_REG0_800750fc = unaff_s1;
    do {
      if (*unaff_s2 != 0) {
        puVar5 = &DAT_80075ad0;
        if (unaff_s5 != (undefined *)0x0) {
          iVar4 = 7;
          do {
            uVar1 = *puVar5;
            puVar5 = puVar5 + 1;
            iVar4 = iVar4 + -1;
            *unaff_s5 = uVar1;
            unaff_s5 = unaff_s5 + 1;
          } while (iVar4 != -1);
        }
        return -(uint)(DAT_80075114 == '\x05');
      }
      iVar4 = Vsync(0xffffffff);
      if ((DAT_80075ae8 < iVar4) ||
         (iVar4 = DAT_80075aec + 1, bVar2 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar4, bVar2)) {
        puts("CD timeout: ");
        printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
               *(undefined4 *)((uint)*unaff_s2 * 4 + unaff_s3));
        CD_flush();
        iVar4 = BIOS_OBJ_DAC();
        return iVar4;
      }
      iVar4 = CheckCallback();
    } while (iVar4 == 0);
    unaff_s1 = *PTR_CDROM_REG0_800750fc & 3;
  } while( true );
}



void BIOS_OBJ_EC8(void)

{
  return;
}



// Possible BIOS.OBJ/CD_vol

undefined4 CD_vol(undefined *param_1)

{
  *PTR_CDROM_REG0_800750fc = 2;
  *PTR_CDROM_REG2_80075104 = *param_1;
  *PTR_CDROM_REG3_80075108 = param_1[1];
  *PTR_CDROM_REG0_800750fc = 3;
  *PTR_CDROM_REG1_80075100 = param_1[2];
  *PTR_CDROM_REG2_80075104 = param_1[3];
  *PTR_CDROM_REG3_80075108 = 0x20;
  return 0;
}



void CD_flush(void)

{
  byte bVar1;
  
  *PTR_CDROM_REG0_800750fc = 1;
  bVar1 = *PTR_CDROM_REG3_80075108;
  while ((bVar1 & 7) != 0) {
    *PTR_CDROM_REG0_800750fc = 1;
    *PTR_CDROM_REG3_80075108 = 7;
    *PTR_CDROM_REG2_80075104 = 7;
    bVar1 = *PTR_CDROM_REG3_80075108;
  }
  DAT_80075116 = 0;
  DAT_80075115 = 0;
  DAT_80075114 = 2;
  *PTR_CDROM_REG0_800750fc = 0;
  *PTR_CDROM_REG3_80075108 = 0;
  *(undefined4 *)PTR_COMMON_DELAY_8007510c = 0x1325;
  return;
}



undefined4 CD_initvol(void)

{
  undefined *puVar1;
  
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_80075110;
  if ((*(short *)(PTR_VOICE_00_LEFT_RIGHT_80075110 + 0x1b8) == 0) &&
     (*(short *)(PTR_VOICE_00_LEFT_RIGHT_80075110 + 0x1ba) == 0)) {
    *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80075110 + 0x180) = 0x3fff;
    *(undefined2 *)(puVar1 + 0x182) = 0x3fff;
  }
  puVar1 = PTR_VOICE_00_LEFT_RIGHT_80075110;
  *(undefined2 *)(PTR_VOICE_00_LEFT_RIGHT_80075110 + 0x1b0) = 0x3fff;
  *(undefined2 *)(puVar1 + 0x1b2) = 0x3fff;
  *(undefined2 *)(puVar1 + 0x1aa) = 0xc001;
  *PTR_CDROM_REG0_800750fc = 2;
  *PTR_CDROM_REG2_80075104 = 0x80;
  *PTR_CDROM_REG3_80075108 = 0;
  *PTR_CDROM_REG0_800750fc = 3;
  *PTR_CDROM_REG1_80075100 = 0x80;
  *PTR_CDROM_REG2_80075104 = 0;
  *PTR_CDROM_REG3_80075108 = 0x20;
  return 0;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

void CD_initintr(void)

{
  DAT_80074e38 = 0;
  DAT_80074e34 = 0;
  DAT_80074e48 = 0;
  _DAT_80074e44 = 0;
  ResetCallback();
  InterruptCallback(2,callback);
  return;
}



// WARNING: Globals starting with '_' overlap smaller symbols at the same address

int CD_init(void)

{
  byte bVar1;
  int iVar2;
  int iVar3;
  
  puts("CD_init:");
  printf("addr=%08x\n",&PTR_DAT_80075118);
  DAT_80074e55 = 0;
  DAT_80074e54 = 0;
  DAT_80074e38 = 0;
  DAT_80074e34 = 0;
  DAT_80074e48 = 0;
  _DAT_80074e44 = 0;
  ResetCallback();
  InterruptCallback(2,callback);
  *PTR_CDROM_REG0_800750fc = 1;
  bVar1 = *PTR_CDROM_REG3_80075108;
  while ((bVar1 & 7) != 0) {
    *PTR_CDROM_REG0_800750fc = 1;
    *PTR_CDROM_REG3_80075108 = 7;
    *PTR_CDROM_REG2_80075104 = 7;
    bVar1 = *PTR_CDROM_REG3_80075108;
  }
  DAT_80075116 = 0;
  DAT_80075115 = 0;
  DAT_80075114 = 2;
  *PTR_CDROM_REG0_800750fc = 0;
  *PTR_CDROM_REG3_80075108 = 0;
  *(undefined4 *)PTR_COMMON_DELAY_8007510c = 0x1325;
  CD_cw(1,0,0,0);
  if ((_DAT_80074e44 & 0x10) != 0) {
    CD_cw(1,0,0,0);
  }
  iVar2 = CD_cw(10,0,0,0);
  iVar3 = -1;
  if (iVar2 == 0) {
    iVar2 = CD_cw(0xc,0,0,0);
    iVar3 = -1;
    if (iVar2 == 0) {
      iVar3 = CD_Sync(0,0);
      iVar3 = -(uint)(iVar3 != 2);
    }
  }
  return iVar3;
}



// Possible BIOS.OBJ/CD_datasync

int CD_datasync(int mode)

{
  int iVar1;
  int iVar2;
  
  iVar1 = Vsync(0xffffffff);
  DAT_80075ae8 = iVar1 + 0x3c0;
  DAT_80075aec = 0;
  DAT_80075af0 = "CD_datasync";
  while (iVar2 = Vsync(0xffffffff), iVar1 = DAT_80075aec, iVar2 <= DAT_80075ae8) {
    DAT_80075aec = DAT_80075aec + 1;
    if (0x3c0000 < iVar1) break;
    iVar1 = 0;
    if (((*(uint *)PTR_DMA_CDROM_CHCR_80075140 & 0x1000000) == 0) || (iVar1 = 1, mode != 0)) {
      return iVar1;
    }
  }
  puts("CD timeout: ");
  printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,(&PTR_s_CdlSync_80074e5c)[DAT_80074e55],
         (&PTR_s_NoIntr_80074edc)[DAT_80075114],(&PTR_s_NoIntr_80074edc)[DAT_80075115]);
  CD_flush();
  iVar1 = BIOS_OBJ_14A4();
  return iVar1;
}



undefined4 BIOS_OBJ_14A4(void)

{
  bool bVar1;
  int iVar2;
  int in_v0;
  undefined4 uVar3;
  int unaff_s0;
  byte *unaff_s1;
  int unaff_s2;
  int unaff_s3;
  
  while (((uVar3 = 0xffffffff, in_v0 == 0 &&
          (uVar3 = 0, (*(uint *)PTR_DMA_CDROM_CHCR_80075140 & 0x1000000) != 0)) &&
         (uVar3 = 1, unaff_s2 == 0))) {
    iVar2 = Vsync(0xffffffff);
    if ((DAT_80075ae8 < iVar2) ||
       (iVar2 = DAT_80075aec + 1, bVar1 = 0x3c0000 < DAT_80075aec, DAT_80075aec = iVar2, bVar1)) {
      puts("CD timeout: ");
      printf("%s:(%s) Sync=%s, Ready=%s\n",DAT_80075af0,
             *(undefined4 *)((uint)DAT_80074e55 * 4 + unaff_s3),
             *(undefined4 *)((uint)*unaff_s1 * 4 + unaff_s0));
      CD_flush();
      uVar3 = BIOS_OBJ_14A4();
      return uVar3;
    }
    in_v0 = 0;
  }
  return uVar3;
}



// Possible BIOS.OBJ/CD_getsector

undefined4 CD_getsector(undefined4 param_1,uint param_2)

{
  uint uVar1;
  
  *PTR_CDROM_REG0_800750fc = 0;
  *PTR_CDROM_REG3_80075108 = 0x80;
  *(undefined4 *)PTR_CDROM_DELAY_80075130 = 0x20943;
  *(undefined4 *)PTR_COMMON_DELAY_8007510c = 0x1323;
  *(uint *)PTR_DMA_DPCR_80075134 = *(uint *)PTR_DMA_DPCR_80075134 | 0x8000;
  *(undefined4 *)PTR_DMA_CDROM_MADR_80075138 = param_1;
  *(uint *)PTR_DMA_CDROM_BCR_8007513c = param_2 | 0x10000;
  do {
  } while ((*PTR_CDROM_REG0_800750fc & 0x40) == 0);
  *(undefined4 *)PTR_DMA_CDROM_CHCR_80075140 = 0x11000000;
  uVar1 = *(uint *)PTR_DMA_CDROM_CHCR_80075140;
  while ((uVar1 & 0x1000000) != 0) {
    uVar1 = *(uint *)PTR_DMA_CDROM_CHCR_80075140;
  }
  *(undefined4 *)PTR_COMMON_DELAY_8007510c = 0x1325;
  return 0;
}



undefined4 CD_getsector2(undefined4 param_1,uint param_2)

{
  byte bVar1;
  
  *PTR_CDROM_REG0_800750fc = 0;
  *PTR_CDROM_REG3_80075108 = 0x80;
  *(undefined4 *)PTR_CDROM_DELAY_80075130 = 0x21020843;
  *(undefined4 *)PTR_COMMON_DELAY_8007510c = 0x1325;
  *(uint *)PTR_DMA_DPCR_80075134 = *(uint *)PTR_DMA_DPCR_80075134 | 0x8000;
  *(undefined4 *)PTR_DMA_CDROM_MADR_80075138 = param_1;
  *(uint *)PTR_DMA_CDROM_BCR_8007513c = param_2 | 0x10000;
  bVar1 = *PTR_CDROM_REG0_800750fc;
  while ((bVar1 & 0x40) == 0) {
    bVar1 = *PTR_CDROM_REG0_800750fc;
  }
  *(undefined4 *)PTR_DMA_CDROM_CHCR_80075140 = 0x11400100;
  return 0;
}



// Possible GS_101.OBJ/GsSetNearClip
// Possible GS_102.OBJ/GsSetFarClip
// Possible GS_124.OBJ/GsSetWorkBase

void CD_set_test_parmnum(undefined4 param_1)

{
  DAT_800750e0 = param_1;
  return;
}



void callback(void)

{
  byte bVar1;
  uint uVar2;
  
  bVar1 = *PTR_CDROM_REG0_800750fc;
  do {
    uVar2 = getintr();
    if (uVar2 == 0) {
      *PTR_CDROM_REG0_800750fc = bVar1 & 3;
      return;
    }
    if (((uVar2 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
      (*DAT_80074e38)(DAT_80075115,&DAT_80075ad8);
    }
  } while (((uVar2 & 2) == 0) || (DAT_80074e34 == (code *)0x0));
  (*DAT_80074e34)(DAT_80075114,&DAT_80075ad0);
  BIOS_OBJ_1728();
  return;
}



void BIOS_OBJ_1728(void)

{
  uint uVar1;
  undefined *unaff_s1;
  undefined unaff_s2;
  undefined *unaff_s3;
  
  do {
    uVar1 = getintr();
    if (uVar1 == 0) {
      *PTR_CDROM_REG0_800750fc = unaff_s2;
      return;
    }
    if (((uVar1 & 4) != 0) && (DAT_80074e38 != (code *)0x0)) {
      (*DAT_80074e38)(*unaff_s1,&DAT_80075ad8);
    }
  } while (((uVar1 & 2) == 0) || (DAT_80074e34 == (code *)0x0));
  (*DAT_80074e34)(*unaff_s3,&DAT_80075ad0);
  BIOS_OBJ_1728();
  return;
}



void cb_read(char param_1,undefined4 param_2)

{
  int iVar1;
  undefined4 uVar2;
  CdlLOC aCStack_18 [4];
  
  DAT_8007517c = param_2;
  if (param_1 == '\x01') {
    if (0 < DAT_8007515c) {
      if (DAT_80075158 == 0x200) {
        if ((DAT_80075178 & 1) != 0) {
          CdDataCallback((func *)0x0);
          CdGetSector2(aCStack_18,3);
          CdDataSync(0);
          CdDataCallback(cb_data);
          CDREAD_OBJ_A4();
          return;
        }
        CdGetSector(aCStack_18,3);
        iVar1 = CdPosToInt(aCStack_18);
        if (iVar1 != DAT_80075168) {
          puts("CdRead: sector error\n");
          DAT_8007515c = -1;
        }
      }
      if ((DAT_80075178 & 1) != 0) {
        CdGetSector2(DAT_80075150,DAT_80075158);
        CDREAD_OBJ_1A4();
        return;
      }
      CdGetSector(DAT_80075150,DAT_80075158);
      DAT_80075150 = (void *)((int)DAT_80075150 + DAT_80075158 * 4);
      DAT_8007515c = DAT_8007515c + -1;
      DAT_80075168 = DAT_80075168 + 1;
      CDREAD_OBJ_1A4();
      return;
    }
  }
  else {
    DAT_8007515c = -1;
  }
  DAT_80075160 = Vsync(0xffffffff);
  if (DAT_8007515c < 0) {
    cd_read_retry(1);
  }
  iVar1 = Vsync(0xffffffff);
  if (DAT_80075164 + 0x4b0 < iVar1) {
    DAT_8007515c = -1;
  }
  if ((DAT_8007515c == 0) || (iVar1 = Vsync(0xffffffff), DAT_80075164 + 0x4b0 < iVar1)) {
    CdSyncCallback(DAT_8007516c);
    CdReadyCallback(DAT_80075170);
    if ((DAT_80075178 & 1) != 0) {
      CdDataCallback(DAT_80075174);
    }
    CdControlF('\t',(u_char_conflict *)0x0);
    if (DAT_80075144 != (code *)0x0) {
      uVar2 = 5;
      if (DAT_8007515c == 0) {
        uVar2 = 2;
      }
      (*DAT_80075144)(uVar2,param_2);
    }
  }
  return;
}



void CDREAD_OBJ_A4(void)

{
  int iVar1;
  
  iVar1 = CdPosToInt((CdlLOC *)&stack0x00000010);
  if (iVar1 != DAT_80075168) {
    puts("CdRead: sector error\n");
    DAT_8007515c = -1;
  }
  if ((DAT_80075178 & 1) != 0) {
    CdGetSector2(DAT_80075150,DAT_80075158);
    CDREAD_OBJ_1A4();
    return;
  }
  CdGetSector(DAT_80075150,DAT_80075158);
  DAT_80075150 = (void *)((int)DAT_80075150 + DAT_80075158 * 4);
  DAT_8007515c = DAT_8007515c + -1;
  DAT_80075168 = DAT_80075168 + 1;
  CDREAD_OBJ_1A4();
  return;
}



void CDREAD_OBJ_1A4(void)

{
  int iVar1;
  undefined4 uVar2;
  
  DAT_80075160 = Vsync(0xffffffff);
  if (DAT_8007515c < 0) {
    cd_read_retry(1);
  }
  iVar1 = Vsync(0xffffffff);
  if (DAT_80075164 + 0x4b0 < iVar1) {
    DAT_8007515c = -1;
  }
  if ((DAT_8007515c == 0) || (iVar1 = Vsync(0xffffffff), DAT_80075164 + 0x4b0 < iVar1)) {
    CdSyncCallback(DAT_8007516c);
    CdReadyCallback(DAT_80075170);
    if ((DAT_80075178 & 1) != 0) {
      CdDataCallback(DAT_80075174);
    }
    CdControlF('\t',(u_char_conflict *)0x0);
    if (DAT_80075144 != (code *)0x0) {
      uVar2 = 5;
      if (DAT_8007515c == 0) {
        uVar2 = 2;
      }
      (*DAT_80075144)(uVar2);
    }
  }
  return;
}



void cb_data(void)

{
  DAT_80075150 = DAT_80075150 + DAT_80075158 * 4;
  DAT_8007515c = DAT_8007515c + -1;
  DAT_80075168 = DAT_80075168 + 1;
  if (DAT_8007515c == 0) {
    CdSyncCallback(DAT_8007516c);
    CdReadyCallback(DAT_80075170);
    if ((DAT_80075178 & 1) != 0) {
      CdDataCallback(DAT_80075174);
    }
    CdControlF('\t',(u_char_conflict *)0x0);
    if (DAT_80075144 != (code *)0x0) {
      (*DAT_80075144)(2,DAT_8007517c);
    }
  }
  return;
}



undefined4 cd_read_retry(int param_1)

{
  uint uVar1;
  undefined4 uVar2;
  CdlLOC *pCVar3;
  int iVar4;
  uint uVar5;
  u_char_conflict local_18 [8];
  
  CdSyncCallback((CdlCB)0x0);
  CdReadyCallback((CdlCB)0x0);
  if ((DAT_80075178 & 1) != 0) {
    CdDataCallback((func *)0x0);
  }
  uVar1 = CdStatus();
  if ((uVar1 & 0x10) != 0) {
    uVar1 = Vsync(0xffffffff);
    if ((uVar1 & 0x3f) == 0) {
      puts("CdRead: Shell open...\n");
    }
    CdControlF('\x01',(u_char_conflict *)0x0);
    DAT_80075164 = Vsync(0xffffffff);
    DAT_8007515c = 0xffffffff;
    uVar2 = CDREAD_OBJ_5C0();
    return uVar2;
  }
  if (param_1 != 0) {
    puts("CdRead: retry...\n");
    CdControl('\t',(u_char_conflict *)0x0,(u_char_conflict *)0x0);
    pCVar3 = CdLastPos();
    iVar4 = CdControl('\x02',&pCVar3->minute,(u_char_conflict *)0x0);
    if (iVar4 == 0) {
      DAT_8007515c = 0xffffffff;
      uVar2 = CDREAD_OBJ_5C0();
      return uVar2;
    }
  }
  CdFlush();
  local_18[0] = (u_char_conflict)DAT_80075154;
  uVar5 = DAT_80075154 & 0xff;
  uVar1 = CdMode();
  if (((uVar5 != uVar1) || (param_1 != 0)) &&
     (iVar4 = CdControl('\x0e',local_18,(u_char_conflict *)0x0), iVar4 == 0)) {
    DAT_8007515c = 0xffffffff;
    uVar2 = CDREAD_OBJ_5C0();
    return uVar2;
  }
  pCVar3 = CdLastPos();
  DAT_80075168 = CdPosToInt(pCVar3);
  CdReadyCallback(cb_read);
  if ((DAT_80075178 & 1) != 0) {
    CdDataCallback(cb_data);
  }
  DAT_80075150 = DAT_8007514c;
  CdControlF('\x06',(u_char_conflict *)0x0);
  DAT_8007515c = DAT_80075148;
  DAT_80075160 = Vsync(0xffffffff);
  return DAT_8007515c;
}



undefined4 CDREAD_OBJ_5C0(void)

{
  return DAT_8007515c;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void CdReadBreak(void)

{
  if ((DAT_80075178 & 1) != 0) {
    CdDataSync(0);
  }
  DAT_8007515c = 0;
  CdSyncCallback(DAT_8007516c);
  CdReadyCallback(DAT_80075170);
  if ((DAT_80075178 & 1) != 0) {
    CdDataCallback(DAT_80075174);
  }
  CdControlF('\t',(u_char_conflict *)0x0);
  return;
}



int CdRead(int sectors,u_long *buf,int mode)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  
  if ((mode & 0x30U) == 0) {
    uVar1 = 0x200;
  }
  else {
    uVar1 = 0x249;
    if ((mode & 0x30U) != 0x20) {
      DAT_80075154 = mode;
      iVar2 = CDREAD_OBJ_6B8();
      return iVar2;
    }
  }
  DAT_80075154 = mode | 0x20;
  DAT_80075148 = sectors;
  DAT_8007514c = buf;
  DAT_80075158 = uVar1;
  DAT_8007516c = CdSyncCallback((CdlCB)0x0);
  DAT_80075170 = CdReadyCallback((CdlCB)0x0);
  if ((DAT_80075178 & 1) != 0) {
    DAT_80075174 = CdDataCallback((func *)0x0);
  }
  DAT_80075164 = Vsync(0xffffffff);
  uVar3 = CdStatus();
  if ((uVar3 & 0xe0) != 0) {
    CdControlB('\t',(u_char_conflict *)0x0,(u_char_conflict *)0x0);
  }
  iVar2 = cd_read_retry(0);
  return (uint)(0 < iVar2);
}



bool CDREAD_OBJ_6B8(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  undefined4 in_v0;
  uint uVar1;
  int iVar2;
  
  DAT_80075154 = DAT_80075154 | 0x20;
  DAT_80075148 = param_4;
  DAT_8007514c = param_2;
  DAT_80075158 = in_v0;
  DAT_8007516c = CdSyncCallback((CdlCB)0x0);
  DAT_80075170 = CdReadyCallback((CdlCB)0x0);
  if ((DAT_80075178 & 1) != 0) {
    DAT_80075174 = CdDataCallback((func *)0x0);
  }
  DAT_80075164 = Vsync(0xffffffff);
  uVar1 = CdStatus();
  if ((uVar1 & 0xe0) != 0) {
    CdControlB('\t',(u_char_conflict *)0x0,(u_char_conflict *)0x0);
  }
  iVar2 = cd_read_retry(0);
  return 0 < iVar2;
}



int CdReadSync(int mode,u_char_conflict *result)

{
  int iVar1;
  int iVar2;
  
  while( true ) {
    iVar1 = Vsync(0xffffffff);
    iVar2 = -1;
    if ((iVar1 <= DAT_80075164 + 0x4b0) &&
       ((DAT_8007515c < 0 ||
        (iVar1 = Vsync(0xffffffff), iVar2 = DAT_8007515c, DAT_80075160 + 0x3c < iVar1)))) break;
    if ((mode != 0) || (iVar2 < 1)) {
      CdReady(1,result);
      return iVar2;
    }
  }
  cd_read_retry(1);
  iVar2 = CDREAD_OBJ_810();
  return iVar2;
}



int CDREAD_OBJ_810(void)

{
  int iVar1;
  int unaff_s0;
  int *unaff_s1;
  int unaff_s2;
  u_char_conflict *unaff_s3;
  
  while( true ) {
    do {
      if ((unaff_s2 != 0) || (unaff_s0 < 1)) {
        CdReady(1,unaff_s3);
        return unaff_s0;
      }
      iVar1 = Vsync(0xffffffff);
      unaff_s0 = -1;
    } while (*unaff_s1 + 0x4b0 < iVar1);
    if ((unaff_s1[-2] < 0) || (iVar1 = Vsync(0xffffffff), unaff_s1[-1] + 0x3c < iVar1)) break;
    unaff_s0 = unaff_s1[-2];
  }
  cd_read_retry(1);
  iVar1 = CDREAD_OBJ_810();
  return iVar1;
}



CdlCB CdReadCallback(CdlCB func)

{
  CdlCB pCVar1;
  
  pCVar1 = DAT_80075144;
  DAT_80075144 = func;
  return pCVar1;
}



int CdReadMode(int mode)

{
  int iVar1;
  
  iVar1 = DAT_80075178;
  DAT_80075178 = mode;
  return iVar1;
}



void MemCardInit(long flg)

{
  DAT_80075b4c = 0;
  DAT_80075b90 = 0;
  _card_open(flg);
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD

void MemCardEnd(void)

{
  _card_close();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void MemCardStart(void)

{
  UserFuncInit();
  DAT_80075b50 = 0;
  DAT_80075b54 = 0;
  DAT_80075b58 = 0;
  DAT_80075b60 = 0xffffffff;
  _card_start();
  VSyncCallbacks(7,_callback_handler);
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void MemCardStop(void)

{
  do {
  } while (DAT_80075b50 != 0);
  VSyncCallbacks(7,0);
  _card_stop();
  return;
}



long MemCardExist(long chan)

{
  long lVar1;
  
  if (DAT_80075b50 == 0) {
    DAT_80075b50 = 1;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b5c = chan;
    UserFuncOpen(_card_exist_back);
    lVar1 = LIBMCRD_OBJ_15C();
    return lVar1;
  }
  printf("Access Denied. : event multipul open\n");
  return 0;
}



void LIBMCRD_OBJ_15C(void)

{
  return;
}



undefined4 _card_exist_back(int *param_1)

{
  undefined4 uVar1;
  int iVar2;
  uint uVar3;
  
  iVar2 = *param_1;
  if (iVar2 == 0) {
    DAT_80075afc = 0;
    DAT_80075af8 = 0;
    _clr_card_event();
    *param_1 = 10;
LIBMCRD_OBJ_1D0:
    _card_info(DAT_80075b5c);
    *param_1 = *param_1 + 1;
    uVar1 = LIBMCRD_OBJ_330();
    return uVar1;
  }
  if (-1 < iVar2) {
    if (iVar2 == 10) goto LIBMCRD_OBJ_1D0;
    if (iVar2 != 0xb) {
      uVar1 = LIBMCRD_OBJ_334();
      return uVar1;
    }
    iVar2 = _chk_card_event();
    if (iVar2 != 0) {
      DAT_80075afc = _get_card_event();
      if (DAT_80075afc == 1) {
        DAT_80075af8 = DAT_80075af8 + 1;
        if (DAT_80075af8 < 0x10) {
          *param_1 = 10;
          uVar1 = LIBMCRD_OBJ_330();
          return uVar1;
        }
      }
      else {
        if (DAT_80075afc < 2) {
          if (DAT_80075afc == 0) {
            uVar3 = 1 << (DAT_80075b5c & 0x1f);
            DAT_80075afc = 0;
            if ((DAT_80075b4c & uVar3) == 0) {
              DAT_80075afc = 4;
              DAT_80075b4c = DAT_80075b4c | uVar3;
            }
            uVar1 = LIBMCRD_OBJ_310(DAT_80075afc);
            return uVar1;
          }
          uVar1 = LIBMCRD_OBJ_2E4();
          return uVar1;
        }
        if (DAT_80075afc == 4) {
          uVar1 = LIBMCRD_OBJ_308(4);
          return uVar1;
        }
      }
      DAT_80075b4c = DAT_80075b4c & ~(1 << (DAT_80075b5c & 0x1f));
      DAT_80075b54 = _rslt_to_code(DAT_80075afc);
      uVar1 = LIBMCRD_OBJ_334();
      return uVar1;
    }
  }
  return 0;
}



void LIBMCRD_OBJ_2E4(void)

{
  int in_v0;
  
  DAT_80075b4c = DAT_80075b4c & ~(in_v0 << (DAT_80075b5c & 0x1f));
  DAT_80075b54 = _rslt_to_code(DAT_80075afc);
  LIBMCRD_OBJ_334();
  return;
}



void LIBMCRD_OBJ_308(void)

{
  undefined4 in_v1;
  
  DAT_80075b4c = in_v1;
  DAT_80075b54 = _rslt_to_code();
  LIBMCRD_OBJ_334();
  return;
}



void LIBMCRD_OBJ_310(void)

{
  DAT_80075b54 = _rslt_to_code();
  LIBMCRD_OBJ_334();
  return;
}



undefined4 LIBMCRD_OBJ_330(void)

{
  return 0;
}



void LIBMCRD_OBJ_334(void)

{
  return;
}



long MemCardAccept(long chan)

{
  long lVar1;
  
  if (DAT_80075b50 == 0) {
    DAT_80075b50 = 2;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b5c = chan;
    UserFuncOpen(_card_accept_back);
    lVar1 = LIBMCRD_OBJ_3B8();
    return lVar1;
  }
  printf("Access Denied. : event multipul open\n");
  return 0;
}



void LIBMCRD_OBJ_3B8(void)

{
  return;
}



undefined4 _card_accept_back(int *param_1)

{
  int iVar1;
  undefined4 uVar2;
  
  switch(*param_1) {
  case 0:
    DAT_80075b08 = 0;
    DAT_80075b04 = 0;
    DAT_80075b00 = 0;
    UserFuncOpen(_card_exist_back);
    *param_1 = 10;
    uVar2 = LIBMCRD_OBJ_5BC();
    return uVar2;
  default:
    uVar2 = 0;
    break;
  case 10:
    if (DAT_80075b54 == 0) {
      *param_1 = 0x1e;
      uVar2 = LIBMCRD_OBJ_5BC();
      return uVar2;
    }
    uVar2 = 1;
    if (DAT_80075b54 == 3) {
      DAT_80075b08 = 1;
      _clr_card_event();
      _card_clear(DAT_80075b5c);
      *param_1 = 0x15;
      uVar2 = LIBMCRD_OBJ_5BC();
      return uVar2;
    }
    break;
  case 0x15:
    iVar1 = _chk_card_event_x();
    uVar2 = 0;
    if (iVar1 != 0) {
      _get_card_event_x();
      *param_1 = 0x1e;
      goto LIBMCRD_OBJ_4B0;
    }
    break;
  case 0x1e:
LIBMCRD_OBJ_4B0:
    _clr_card_event();
    _card_load(DAT_80075b5c);
    *param_1 = *param_1 + 1;
    uVar2 = LIBMCRD_OBJ_5BC();
    return uVar2;
  case 0x1f:
    iVar1 = _chk_card_event();
    uVar2 = 0;
    if (iVar1 != 0) {
      DAT_80075b04 = _get_card_event();
      if (DAT_80075b04 == 1) {
        DAT_80075b00 = DAT_80075b00 + 1;
        if (DAT_80075b00 < 0x10) {
          *param_1 = 0;
          uVar2 = LIBMCRD_OBJ_5BC();
          return uVar2;
        }
      }
      else {
        if (DAT_80075b04 < 2) {
          if (DAT_80075b04 != 0) {
            uVar2 = LIBMCRD_OBJ_594();
            return uVar2;
          }
          DAT_80075b54 = -(uint)(DAT_80075b08 != 0) & 3;
          uVar2 = LIBMCRD_OBJ_5C0();
          return uVar2;
        }
        if (DAT_80075b04 == 4) {
          DAT_80075b54 = DAT_80075b04;
          uVar2 = LIBMCRD_OBJ_5C0();
          return uVar2;
        }
      }
      DAT_80075b54 = _rslt_to_code(DAT_80075b04);
      uVar2 = LIBMCRD_OBJ_5C0();
      return uVar2;
    }
  }
  return uVar2;
}



void LIBMCRD_OBJ_404(void)

{
  undefined4 *unaff_s0;
  
  DAT_80075b08 = 0;
  DAT_80075b04 = 0;
  DAT_80075b00 = 0;
  UserFuncOpen(_card_exist_back);
  *unaff_s0 = 10;
  LIBMCRD_OBJ_5BC();
  return;
}



void LIBMCRD_OBJ_438(void)

{
  undefined4 *unaff_s0;
  
  if (DAT_80075b54 == 0) {
    *unaff_s0 = 0x1e;
    LIBMCRD_OBJ_5BC();
    return;
  }
  if (DAT_80075b54 == 3) {
    DAT_80075b08 = 1;
    _clr_card_event();
    _card_clear(DAT_80075b5c);
    *unaff_s0 = 0x15;
    LIBMCRD_OBJ_5BC();
    return;
  }
  return;
}



undefined4 LIBMCRD_OBJ_490(void)

{
  int iVar1;
  undefined4 uVar2;
  int *unaff_s0;
  
  iVar1 = _chk_card_event_x();
  if (iVar1 != 0) {
    _get_card_event_x();
    *unaff_s0 = 0x1e;
    _clr_card_event();
    _card_load(DAT_80075b5c);
    *unaff_s0 = *unaff_s0 + 1;
    uVar2 = LIBMCRD_OBJ_5BC();
    return uVar2;
  }
  return 0;
}



void LIBMCRD_OBJ_4B0(void)

{
  int *unaff_s0;
  
  _clr_card_event();
  _card_load(DAT_80075b5c);
  *unaff_s0 = *unaff_s0 + 1;
  LIBMCRD_OBJ_5BC();
  return;
}



undefined4 LIBMCRD_OBJ_4DC(void)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 *unaff_s0;
  
  iVar1 = _chk_card_event();
  if (iVar1 == 0) {
    return 0;
  }
  DAT_80075b04 = _get_card_event();
  if (DAT_80075b04 == 1) {
    DAT_80075b00 = DAT_80075b00 + 1;
    if (DAT_80075b00 < 0x10) {
      *unaff_s0 = 0;
      uVar2 = LIBMCRD_OBJ_5BC();
      return uVar2;
    }
  }
  else {
    if (DAT_80075b04 < 2) {
      if (DAT_80075b04 != 0) {
        uVar2 = LIBMCRD_OBJ_594();
        return uVar2;
      }
      DAT_80075b54 = -(uint)(DAT_80075b08 != 0) & 3;
      uVar2 = LIBMCRD_OBJ_5C0();
      return uVar2;
    }
    if (DAT_80075b04 == 4) {
      DAT_80075b54 = DAT_80075b04;
      uVar2 = LIBMCRD_OBJ_5C0();
      return uVar2;
    }
  }
  DAT_80075b54 = _rslt_to_code(DAT_80075b04);
  uVar2 = LIBMCRD_OBJ_5C0();
  return uVar2;
}



void LIBMCRD_OBJ_594(void)

{
  DAT_80075b54 = _rslt_to_code(DAT_80075b04);
  LIBMCRD_OBJ_5C0();
  return;
}



undefined4 LIBMCRD_OBJ_5BC(void)

{
  return 0;
}



void LIBMCRD_OBJ_5C0(void)

{
  return;
}



long MemCardOpen(long chan,char *fnam,ulong flag)

{
  long lVar1;
  int iVar2;
  ulong local_20 [2];
  
  iVar2 = 0;
  if (-1 < DAT_80075b60) {
    printf("Access Denied. : file already open.\n");
    lVar1 = LIBMCRD_OBJ_730();
    return lVar1;
  }
  _make_file_discrpt(chan,&DAT_80075b70);
  strcat(&DAT_80075b70,fnam);
  DAT_80075b5c = chan;
  while( true ) {
    DAT_80075b60 = open(&DAT_80075b70,flag | 0x8000);
    if (-1 < DAT_80075b60) {
      return 0;
    }
    DAT_80075ba0 = MemCardCallback((MemCB)0x0);
    if (DAT_80075b50 != 0) break;
    DAT_80075b50 = 2;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b5c = chan;
    UserFuncOpen(_card_accept_back);
    MemCardSync(0,(ulong *)0x0,local_20);
    MemCardCallback(DAT_80075ba0);
    if ((local_20[0] != 3) && ((local_20[0] != 2 || (iVar2 = iVar2 + 1, 0xf < iVar2)))) {
      if (local_20[0] == 0) {
        local_20[0] = 5;
      }
      return local_20[0];
    }
  }
  printf("Access Denied. : event multipul open\n");
  lVar1 = LIBMCRD_OBJ_6DC(0);
  return lVar1;
}



ulong LIBMCRD_OBJ_6DC(long param_1)

{
  int iVar1;
  char *unaff_s0;
  int unaff_s1;
  undefined4 unaff_s2;
  ulong unaff_s3;
  uint unaff_s4;
  ulong param_5;
  
  while( true ) {
    MemCardSync(param_1,(ulong *)0x0,&stack0x00000010);
    MemCardCallback(DAT_80075ba0);
    if ((param_5 != 3) && ((param_5 != unaff_s3 || (unaff_s1 = unaff_s1 + 1, 0xf < unaff_s1)))) {
      if (param_5 == 0) {
        param_5 = 5;
      }
      return param_5;
    }
    DAT_80075b60 = open(unaff_s0,unaff_s4 | 0x8000);
    if (-1 < DAT_80075b60) {
      return 0;
    }
    DAT_80075ba0 = MemCardCallback((MemCB)0x0);
    if (DAT_80075b50 != 0) break;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b50 = unaff_s3;
    DAT_80075b5c = unaff_s2;
    UserFuncOpen(_card_accept_back);
    param_1 = 0;
  }
  printf("Access Denied. : event multipul open\n");
  iVar1 = LIBMCRD_OBJ_6DC(0);
  return iVar1;
}



void LIBMCRD_OBJ_730(void)

{
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void MemCardClose(void)

{
  if (-1 < DAT_80075b60) {
    close(DAT_80075b60);
    DAT_80075b60 = -1;
  }
  return;
}



long MemCardReadData(long *adrs,long ofs,long bytes)

{
  long lVar1;
  
  if (DAT_80075b60 < 0) {
    lVar1 = LIBMCRD_OBJ_840("Access Denied. : file not open.\n");
    return lVar1;
  }
  if (DAT_80075b50 != 0) {
    lVar1 = LIBMCRD_OBJ_840("Access Denied. : event multipul open\n");
    return lVar1;
  }
  if ((bytes & 0x7fU) == 0) {
    DAT_80075b50 = 5;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b64 = ofs;
    DAT_80075b68 = bytes;
    DAT_80075b6c = adrs;
    UserFuncOpen(_card_read_data);
    lVar1 = LIBMCRD_OBJ_84C();
    return lVar1;
  }
  printf("Access Denied. : invalid data size ( not 128bytes unit\n");
  return 0;
}



undefined4 LIBMCRD_OBJ_840(char *param_1)

{
  printf(param_1);
  return 0;
}



void LIBMCRD_OBJ_84C(void)

{
  return;
}



undefined4 _card_read_data(int *param_1)

{
  undefined4 uVar1;
  __off_t _Var2;
  ssize_t sVar3;
  int iVar4;
  
  iVar4 = *param_1;
  if (iVar4 != 10) {
    if (10 < iVar4) {
      if (iVar4 == 0x14) {
        _clr_card_event();
        do {
          sVar3 = read(DAT_80075b60,DAT_80075b6c,DAT_80075b68);
        } while (sVar3 != 0);
        *param_1 = 0x1e;
        uVar1 = LIBMCRD_OBJ_990();
        return uVar1;
      }
      if (iVar4 != 0x1e) {
        uVar1 = LIBMCRD_OBJ_994();
        return uVar1;
      }
      iVar4 = _chk_card_event();
      if (iVar4 == 0) {
        return 0;
      }
      iVar4 = _get_card_event();
      if ((iVar4 == 1) && (DAT_80075188 = DAT_80075188 + 1, DAT_80075188 < 0x10)) {
        *param_1 = 10;
        uVar1 = LIBMCRD_OBJ_990();
        return uVar1;
      }
      DAT_80075b54 = _rslt_to_code();
      uVar1 = LIBMCRD_OBJ_994();
      return uVar1;
    }
    if (iVar4 != 0) {
      uVar1 = LIBMCRD_OBJ_994();
      return uVar1;
    }
    DAT_80075188 = 0;
    *param_1 = 10;
  }
  do {
    _Var2 = lseek(DAT_80075b60,DAT_80075b64,0);
  } while (_Var2 != DAT_80075b64);
  *param_1 = 0x14;
  uVar1 = LIBMCRD_OBJ_990();
  return uVar1;
}



undefined4 LIBMCRD_OBJ_990(void)

{
  return 0;
}



void LIBMCRD_OBJ_994(void)

{
  return;
}



long MemCardWriteData(long *adrs,long ofs,long bytes)

{
  long lVar1;
  
  if (DAT_80075b60 < 0) {
    lVar1 = LIBMCRD_OBJ_A50("Access Denied. : file not open.\n");
    return lVar1;
  }
  if (DAT_80075b50 != 0) {
    lVar1 = LIBMCRD_OBJ_A50("Access Denied. : event multipul open\n");
    return lVar1;
  }
  if ((bytes & 0x7fU) == 0) {
    DAT_80075b50 = 6;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b64 = ofs;
    DAT_80075b68 = bytes;
    DAT_80075b6c = adrs;
    UserFuncOpen(_card_write_data);
    lVar1 = LIBMCRD_OBJ_A5C();
    return lVar1;
  }
  printf("Access Denied. : invalid data size\n");
  return 0;
}



undefined4 LIBMCRD_OBJ_A50(char *param_1)

{
  printf(param_1);
  return 0;
}



void LIBMCRD_OBJ_A5C(void)

{
  return;
}



undefined4 _card_write_data(int *param_1)

{
  undefined4 uVar1;
  __off_t _Var2;
  long lVar3;
  int iVar4;
  
  iVar4 = *param_1;
  if (iVar4 != 10) {
    if (10 < iVar4) {
      if (iVar4 == 0x14) {
        _clr_card_event();
        do {
          lVar3 = write(DAT_80075b60,DAT_80075b6c,DAT_80075b68);
        } while (lVar3 != 0);
        *param_1 = 0x1e;
        uVar1 = LIBMCRD_OBJ_BA0();
        return uVar1;
      }
      if (iVar4 != 0x1e) {
        uVar1 = LIBMCRD_OBJ_BA4();
        return uVar1;
      }
      iVar4 = _chk_card_event();
      if (iVar4 == 0) {
        return 0;
      }
      iVar4 = _get_card_event();
      if ((iVar4 == 1) && (DAT_8007518c = DAT_8007518c + 1, DAT_8007518c < 0x10)) {
        *param_1 = 10;
        uVar1 = LIBMCRD_OBJ_BA0();
        return uVar1;
      }
      DAT_80075b54 = _rslt_to_code();
      uVar1 = LIBMCRD_OBJ_BA4();
      return uVar1;
    }
    if (iVar4 != 0) {
      uVar1 = LIBMCRD_OBJ_BA4();
      return uVar1;
    }
    DAT_8007518c = 0;
    *param_1 = 10;
  }
  do {
    _Var2 = lseek(DAT_80075b60,DAT_80075b64,0);
  } while (_Var2 != DAT_80075b64);
  *param_1 = 0x14;
  uVar1 = LIBMCRD_OBJ_BA0();
  return uVar1;
}



undefined4 LIBMCRD_OBJ_BA0(void)

{
  return 0;
}



void LIBMCRD_OBJ_BA4(void)

{
  return;
}



long MemCardReadFile(long chan,char *fnam,long *adrs,long ofs,long bytes)

{
  long lVar1;
  
  if (DAT_80075b50 != 0) {
    lVar1 = LIBMCRD_OBJ_C90("Access Denied. : system busy\n");
    return lVar1;
  }
  if ((bytes & 0x7fU) == 0) {
    _make_file_discrpt(chan,&DAT_80075b70);
    strcat(&DAT_80075b70,fnam);
    DAT_80075b50 = 3;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b68 = bytes;
    DAT_80075b5c = chan;
    DAT_80075b64 = ofs;
    DAT_80075b6c = adrs;
    UserFuncOpen(_card_read_file);
    lVar1 = LIBMCRD_OBJ_C9C();
    return lVar1;
  }
  printf("Access Denied. : invalid data size\n");
  return 0;
}



undefined4 LIBMCRD_OBJ_C90(char *param_1)

{
  printf(param_1);
  return 0;
}



void LIBMCRD_OBJ_C9C(void)

{
  return;
}



undefined4 _card_read_file(undefined4 *param_1)

{
  __off_t _Var1;
  ssize_t sVar2;
  int iVar3;
  undefined4 uVar4;
  
  switch(*param_1) {
  case 0:
    DAT_80075190 = 0;
    UserFuncOpen(_card_exist_back);
    *param_1 = 10;
    uVar4 = LIBMCRD_OBJ_E5C();
    return uVar4;
  default:
    uVar4 = 0;
    break;
  case 10:
    uVar4 = 1;
    if (DAT_80075b54 == 0) {
      DAT_80075b60 = open(&DAT_80075b70,0x8001);
      if (DAT_80075b60 < 0) {
        DAT_80075b54 = 5;
        uVar4 = LIBMCRD_OBJ_E60();
        return uVar4;
      }
      goto LIBMCRD_OBJ_D74;
    }
    break;
  case 0xb:
LIBMCRD_OBJ_D74:
    do {
      _Var1 = lseek(DAT_80075b60,DAT_80075b64,0);
    } while (_Var1 != DAT_80075b64);
    *param_1 = 0x14;
    uVar4 = LIBMCRD_OBJ_E5C();
    return uVar4;
  case 0x14:
    _clr_card_event();
    do {
      sVar2 = read(DAT_80075b60,DAT_80075b6c,DAT_80075b68);
    } while (sVar2 != 0);
    *param_1 = 0x1e;
    uVar4 = LIBMCRD_OBJ_E5C();
    return uVar4;
  case 0x1e:
    iVar3 = _chk_card_event();
    uVar4 = 0;
    if (iVar3 != 0) {
      iVar3 = _get_card_event();
      if ((iVar3 == 1) && (DAT_80075190 = DAT_80075190 + 1, DAT_80075190 < 0x10)) {
        *param_1 = 0xb;
        uVar4 = LIBMCRD_OBJ_E5C();
        return uVar4;
      }
      DAT_80075b54 = _rslt_to_code();
      close(DAT_80075b60);
      DAT_80075b60 = 0xffffffff;
      uVar4 = LIBMCRD_OBJ_E60();
      return uVar4;
    }
  }
  return uVar4;
}



void LIBMCRD_OBJ_D08(void)

{
  undefined4 *unaff_s1;
  
  DAT_80075190 = 0;
  UserFuncOpen(_card_exist_back);
  *unaff_s1 = 10;
  LIBMCRD_OBJ_E5C();
  return;
}



undefined4 LIBMCRD_OBJ_D2C(void)

{
  undefined4 uVar1;
  __off_t _Var2;
  undefined4 *unaff_s1;
  
  if (DAT_80075b54 != 0) {
    return 1;
  }
  DAT_80075b60 = open(&DAT_80075b70,0x8001);
  if (-1 < DAT_80075b60) {
    do {
      _Var2 = lseek(DAT_80075b60,DAT_80075b64,0);
    } while (_Var2 != DAT_80075b64);
    *unaff_s1 = 0x14;
    uVar1 = LIBMCRD_OBJ_E5C();
    return uVar1;
  }
  DAT_80075b54 = 5;
  uVar1 = LIBMCRD_OBJ_E60();
  return uVar1;
}



void LIBMCRD_OBJ_D6C(void)

{
  __off_t _Var1;
  undefined4 *unaff_s1;
  
  do {
    _Var1 = lseek(DAT_80075b60,DAT_80075b64,0);
  } while (_Var1 != DAT_80075b64);
  *unaff_s1 = 0x14;
  LIBMCRD_OBJ_E5C();
  return;
}



void LIBMCRD_OBJ_D9C(void)

{
  ssize_t sVar1;
  undefined4 *unaff_s1;
  
  _clr_card_event();
  do {
    sVar1 = read(DAT_80075b60,DAT_80075b6c,DAT_80075b68);
  } while (sVar1 != 0);
  *unaff_s1 = 0x1e;
  LIBMCRD_OBJ_E5C();
  return;
}



undefined4 LIBMCRD_OBJ_DD0(void)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 *unaff_s1;
  
  iVar1 = _chk_card_event();
  if (iVar1 == 0) {
    return 0;
  }
  iVar1 = _get_card_event();
  if ((iVar1 == 1) && (DAT_80075190 = DAT_80075190 + 1, DAT_80075190 < 0x10)) {
    *unaff_s1 = 0xb;
    uVar2 = LIBMCRD_OBJ_E5C();
    return uVar2;
  }
  DAT_80075b54 = _rslt_to_code();
  close(DAT_80075b60);
  DAT_80075b60 = 0xffffffff;
  uVar2 = LIBMCRD_OBJ_E60();
  return uVar2;
}



undefined4 LIBMCRD_OBJ_E5C(void)

{
  return 0;
}



void LIBMCRD_OBJ_E60(void)

{
  return;
}



long MemCardWriteFile(long chan,char *fnam,long *adrs,long ofs,long bytes)

{
  long lVar1;
  
  if (DAT_80075b50 != 0) {
    lVar1 = LIBMCRD_OBJ_F4C("Access Denied. : system busy\n");
    return lVar1;
  }
  if ((bytes & 0x7fU) == 0) {
    _make_file_discrpt(chan,&DAT_80075b70);
    strcat(&DAT_80075b70,fnam);
    DAT_80075b50 = 4;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b68 = bytes;
    DAT_80075b5c = chan;
    DAT_80075b64 = ofs;
    DAT_80075b6c = adrs;
    UserFuncOpen(_card_write_file);
    lVar1 = LIBMCRD_OBJ_F58();
    return lVar1;
  }
  printf("Access Denied. : invalid data size\n");
  return 0;
}



undefined4 LIBMCRD_OBJ_F4C(char *param_1)

{
  printf(param_1);
  return 0;
}



void LIBMCRD_OBJ_F58(void)

{
  return;
}



undefined4 _card_write_file(undefined4 *param_1)

{
  __off_t _Var1;
  long lVar2;
  int iVar3;
  undefined4 uVar4;
  
  switch(*param_1) {
  case 0:
    DAT_80075194 = 0;
    UserFuncOpen(_card_exist_back);
    *param_1 = 10;
    uVar4 = LIBMCRD_OBJ_1118();
    return uVar4;
  default:
    uVar4 = 0;
    break;
  case 10:
    uVar4 = 1;
    if (DAT_80075b54 == 0) {
      DAT_80075b60 = open(&DAT_80075b70,0x8001);
      if (DAT_80075b60 < 0) {
        DAT_80075b54 = 5;
        uVar4 = LIBMCRD_OBJ_111C();
        return uVar4;
      }
      goto LIBMCRD_OBJ_1030;
    }
    break;
  case 0xb:
LIBMCRD_OBJ_1030:
    do {
      _Var1 = lseek(DAT_80075b60,DAT_80075b64,0);
    } while (_Var1 != DAT_80075b64);
    *param_1 = 0x14;
    uVar4 = LIBMCRD_OBJ_1118();
    return uVar4;
  case 0x14:
    _clr_card_event();
    do {
      lVar2 = write(DAT_80075b60,DAT_80075b6c,DAT_80075b68);
    } while (lVar2 != 0);
    *param_1 = 0x1e;
    uVar4 = LIBMCRD_OBJ_1118();
    return uVar4;
  case 0x1e:
    iVar3 = _chk_card_event();
    uVar4 = 0;
    if (iVar3 != 0) {
      iVar3 = _get_card_event();
      if ((iVar3 == 1) && (DAT_80075194 = DAT_80075194 + 1, DAT_80075194 < 0x10)) {
        *param_1 = 0xb;
        uVar4 = LIBMCRD_OBJ_1118();
        return uVar4;
      }
      DAT_80075b54 = _rslt_to_code();
      close(DAT_80075b60);
      DAT_80075b60 = 0xffffffff;
      uVar4 = LIBMCRD_OBJ_111C();
      return uVar4;
    }
  }
  return uVar4;
}



void LIBMCRD_OBJ_FC4(void)

{
  undefined4 *unaff_s1;
  
  DAT_80075194 = 0;
  UserFuncOpen(_card_exist_back);
  *unaff_s1 = 10;
  LIBMCRD_OBJ_1118();
  return;
}



undefined4 LIBMCRD_OBJ_FE8(void)

{
  undefined4 uVar1;
  __off_t _Var2;
  undefined4 *unaff_s1;
  
  if (DAT_80075b54 != 0) {
    return 1;
  }
  DAT_80075b60 = open(&DAT_80075b70,0x8001);
  if (-1 < DAT_80075b60) {
    do {
      _Var2 = lseek(DAT_80075b60,DAT_80075b64,0);
    } while (_Var2 != DAT_80075b64);
    *unaff_s1 = 0x14;
    uVar1 = LIBMCRD_OBJ_1118();
    return uVar1;
  }
  DAT_80075b54 = 5;
  uVar1 = LIBMCRD_OBJ_111C();
  return uVar1;
}



void LIBMCRD_OBJ_1028(void)

{
  __off_t _Var1;
  undefined4 *unaff_s1;
  
  do {
    _Var1 = lseek(DAT_80075b60,DAT_80075b64,0);
  } while (_Var1 != DAT_80075b64);
  *unaff_s1 = 0x14;
  LIBMCRD_OBJ_1118();
  return;
}



void LIBMCRD_OBJ_1058(void)

{
  long lVar1;
  undefined4 *unaff_s1;
  
  _clr_card_event();
  do {
    lVar1 = write(DAT_80075b60,DAT_80075b6c,DAT_80075b68);
  } while (lVar1 != 0);
  *unaff_s1 = 0x1e;
  LIBMCRD_OBJ_1118();
  return;
}



undefined4 LIBMCRD_OBJ_108C(void)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 *unaff_s1;
  
  iVar1 = _chk_card_event();
  if (iVar1 == 0) {
    return 0;
  }
  iVar1 = _get_card_event();
  if ((iVar1 == 1) && (DAT_80075194 = DAT_80075194 + 1, DAT_80075194 < 0x10)) {
    *unaff_s1 = 0xb;
    uVar2 = LIBMCRD_OBJ_1118();
    return uVar2;
  }
  DAT_80075b54 = _rslt_to_code();
  close(DAT_80075b60);
  DAT_80075b60 = 0xffffffff;
  uVar2 = LIBMCRD_OBJ_111C();
  return uVar2;
}



undefined4 LIBMCRD_OBJ_1118(void)

{
  return 0;
}



void LIBMCRD_OBJ_111C(void)

{
  return;
}



// WARNING: Removing unreachable block (ram,0x8006753c)

long MemCardGetDirentry(long chan,char *name,DIRENTRY *pdir,long *files,long ofs,long max)

{
  undefined4 *puVar1;
  long lVar2;
  DIRENTRY *pDVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 uVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  undefined4 *puVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  char acStack_90 [32];
  undefined4 auStack_70 [10];
  ulong local_48 [2];
  long *local_40;
  undefined4 *local_38;
  
  local_40 = files;
  if (DAT_80075b50 != 0) {
    printf("Access Denied. : system busy\n");
    lVar2 = LIBMCRD_OBJ_1374();
    return lVar2;
  }
  _make_file_discrpt(chan,acStack_90);
  strcat(acStack_90,name);
  iVar11 = 0;
  iVar10 = 0;
  local_48[0] = 0;
  DAT_80075b4c = DAT_80075b4c | 1 << (DAT_80075b5c & 0x1f);
  lVar2 = 0;
  if (0 < ofs + max) {
    local_38 = auStack_70 + 8;
    iVar12 = 0;
    do {
      if (iVar10 == 0) {
        while (pDVar3 = firstfile(acStack_90,(DIRENTRY *)auStack_70), pDVar3 == (DIRENTRY *)0x0) {
          DAT_80075ba0 = MemCardCallback((MemCB)0x0);
          if (DAT_80075b50 != 0) {
            printf("Access Denied. : event multipul open\n");
            lVar2 = LIBMCRD_OBJ_1284(0);
            return lVar2;
          }
          DAT_80075b50 = 2;
          DAT_80075b54 = 0;
          DAT_80075b58 = 0;
          DAT_80075b5c = chan;
          UserFuncOpen(_card_accept_back);
          MemCardSync(0,(ulong *)0x0,local_48);
          MemCardCallback(DAT_80075ba0);
          if (local_48[0] == 0) goto LIBMCRD_OBJ_1360;
          iVar11 = iVar11 + 1;
          if (0xf < iVar11) {
            lVar2 = LIBMCRD_OBJ_1374();
            return lVar2;
          }
        }
      }
      else {
        pDVar3 = nextfile((DIRENTRY *)auStack_70);
        if (pDVar3 == (DIRENTRY *)0x0) break;
      }
      if ((ofs <= iVar10) && (pdir != (DIRENTRY *)0x0)) {
        puVar8 = auStack_70;
        puVar1 = (undefined4 *)(pdir + iVar12);
        do {
          puVar9 = puVar1;
          puVar7 = puVar8;
          uVar4 = puVar7[1];
          uVar5 = puVar7[2];
          uVar6 = puVar7[3];
          *puVar9 = *puVar7;
          puVar9[1] = uVar4;
          puVar9[2] = uVar5;
          puVar9[3] = uVar6;
          puVar8 = puVar7 + 4;
          puVar1 = puVar9 + 4;
        } while (puVar8 != local_38);
        uVar4 = puVar7[5];
        puVar9[4] = *puVar8;
        puVar9[5] = uVar4;
        iVar12 = iVar12 + 0x28;
        lVar2 = lVar2 + 1;
      }
      iVar10 = iVar10 + 1;
    } while (iVar10 < ofs + max);
  }
LIBMCRD_OBJ_1360:
  if (local_40 != (long *)0x0) {
    *local_40 = lVar2;
  }
  return 0;
}



undefined4 LIBMCRD_OBJ_1284(long param_1)

{
  undefined4 *puVar1;
  DIRENTRY *pDVar2;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  int unaff_s0;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  undefined4 unaff_s5;
  int unaff_s6;
  int *unaff_s7;
  int unaff_s8;
  ulong param_11;
  int *in_stack_00000060;
  undefined4 *in_stack_00000068;
  int in_stack_000000b4;
  
  while( true ) {
    MemCardSync(param_1,(ulong *)0x0,&stack0x00000058);
    MemCardCallback(DAT_80075ba0);
    if (param_11 == 0) break;
    unaff_s2 = unaff_s2 + 1;
    if (0xf < unaff_s2) {
      uVar3 = LIBMCRD_OBJ_1374();
      return uVar3;
    }
    while (pDVar2 = firstfile(&stack0x00000010,(DIRENTRY *)&stack0x00000030),
          pDVar2 != (DIRENTRY *)0x0) {
      while( true ) {
        if ((unaff_s8 <= unaff_s1) && (unaff_s6 != 0)) {
          puVar7 = (undefined4 *)&stack0x00000030;
          puVar1 = (undefined4 *)(unaff_s3 + unaff_s6);
          do {
            puVar8 = puVar1;
            puVar6 = puVar7;
            uVar3 = puVar6[1];
            uVar4 = puVar6[2];
            uVar5 = puVar6[3];
            *puVar8 = *puVar6;
            puVar8[1] = uVar3;
            puVar8[2] = uVar4;
            puVar8[3] = uVar5;
            puVar7 = puVar6 + 4;
            puVar1 = puVar8 + 4;
          } while (puVar7 != in_stack_00000068);
          uVar3 = puVar6[5];
          puVar8[4] = *puVar7;
          puVar8[5] = uVar3;
          unaff_s3 = unaff_s3 + 0x28;
          unaff_s4 = unaff_s4 + 1;
        }
        unaff_s1 = unaff_s1 + 1;
        if (unaff_s8 + in_stack_000000b4 <= unaff_s1) goto LIBMCRD_OBJ_1360;
        if (unaff_s1 == 0) break;
        pDVar2 = nextfile((DIRENTRY *)&stack0x00000030);
        if (pDVar2 == (DIRENTRY *)0x0) goto LIBMCRD_OBJ_1360;
      }
    }
    DAT_80075ba0 = MemCardCallback((MemCB)0x0);
    if (*unaff_s7 != 0) {
      printf("Access Denied. : event multipul open\n");
      uVar3 = LIBMCRD_OBJ_1284(0);
      return uVar3;
    }
    *unaff_s7 = 2;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b5c = unaff_s5;
    UserFuncOpen(_card_accept_back);
    param_1 = 0;
    unaff_s0 = 0;
  }
  if (unaff_s0 != 0) {
    uVar3 = LIBMCRD_OBJ_12E8();
    return uVar3;
  }
LIBMCRD_OBJ_1360:
  if (in_stack_00000060 != (int *)0x0) {
    *in_stack_00000060 = unaff_s4;
  }
  return 0;
}



// WARNING: Removing unreachable block (ram,0x8006753c)

undefined4 LIBMCRD_OBJ_12E8(void)

{
  undefined4 *puVar1;
  DIRENTRY *pDVar2;
  uint in_v0;
  undefined4 uVar3;
  undefined4 uVar4;
  undefined4 uVar5;
  undefined4 *puVar6;
  undefined4 *puVar7;
  undefined4 *puVar8;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  int unaff_s4;
  undefined4 unaff_s5;
  int unaff_s6;
  int *unaff_s7;
  int unaff_s8;
  ulong in_stack_00000058;
  int *param_17;
  undefined4 *param_18;
  int param_19;
  
  do {
    while( true ) {
      if ((in_v0 == 0) && (unaff_s6 != 0)) {
        puVar7 = (undefined4 *)&stack0x00000030;
        puVar1 = (undefined4 *)(unaff_s3 + unaff_s6);
        do {
          puVar8 = puVar1;
          puVar6 = puVar7;
          uVar3 = puVar6[1];
          uVar4 = puVar6[2];
          uVar5 = puVar6[3];
          *puVar8 = *puVar6;
          puVar8[1] = uVar3;
          puVar8[2] = uVar4;
          puVar8[3] = uVar5;
          puVar7 = puVar6 + 4;
          puVar1 = puVar8 + 4;
        } while (puVar7 != param_18);
        uVar3 = puVar6[5];
        puVar8[4] = *puVar7;
        puVar8[5] = uVar3;
        unaff_s3 = unaff_s3 + 0x28;
        unaff_s4 = unaff_s4 + 1;
      }
      unaff_s1 = unaff_s1 + 1;
      if (unaff_s8 + param_19 <= unaff_s1) goto LIBMCRD_OBJ_1360;
      if (unaff_s1 != 0) break;
      while( true ) {
        pDVar2 = firstfile(&stack0x00000010,(DIRENTRY *)&stack0x00000030);
        in_v0 = (uint)(0 < unaff_s8);
        if (pDVar2 != (DIRENTRY *)0x0) break;
        DAT_80075ba0 = MemCardCallback((MemCB)0x0);
        if (*unaff_s7 != 0) {
          printf("Access Denied. : event multipul open\n");
          uVar3 = LIBMCRD_OBJ_1284(0);
          return uVar3;
        }
        *unaff_s7 = 2;
        DAT_80075b54 = 0;
        DAT_80075b58 = 0;
        DAT_80075b5c = unaff_s5;
        UserFuncOpen(_card_accept_back);
        MemCardSync(0,(ulong *)0x0,&stack0x00000058);
        MemCardCallback(DAT_80075ba0);
        if (in_stack_00000058 == 0) goto LIBMCRD_OBJ_1360;
        unaff_s2 = unaff_s2 + 1;
        if (0xf < unaff_s2) {
          uVar3 = LIBMCRD_OBJ_1374();
          return uVar3;
        }
      }
    }
    pDVar2 = nextfile((DIRENTRY *)&stack0x00000030);
    in_v0 = (uint)(unaff_s1 < unaff_s8);
  } while (pDVar2 != (DIRENTRY *)0x0);
LIBMCRD_OBJ_1360:
  if (param_17 != (int *)0x0) {
    *param_17 = unaff_s4;
  }
  return 0;
}



void LIBMCRD_OBJ_1374(void)

{
  return;
}



MemCB MemCardCallback(MemCB func)

{
  MemCB pMVar1;
  
  pMVar1 = DAT_80075b90;
  DAT_80075b90 = func;
  return pMVar1;
}



// WARNING: Removing unreachable block (ram,0x80067694)

long MemCardSync(long mode,ulong *cmds,ulong *rslt)

{
  ulong uVar1;
  long lVar2;
  
  uVar1 = DAT_80075b50;
  if ((DAT_80075b50 != 0) || (lVar2 = -1, DAT_80075b58 != 0)) {
    if (mode == 0) {
      if (DAT_80075b58 == 0) {
        do {
        } while( true );
      }
    }
    else if (DAT_80075b58 == 0) {
      if (rslt != (ulong *)0x0) {
        *rslt = DAT_80075b54;
      }
      if (cmds == (ulong *)0x0) {
        return 0;
      }
      *cmds = uVar1;
      lVar2 = LIBMCRD_OBJ_14A4();
      return lVar2;
    }
    if (rslt != (ulong *)0x0) {
      *rslt = DAT_80075b98;
    }
    if (cmds != (ulong *)0x0) {
      *cmds = DAT_80075b94;
    }
    DAT_80075b58 = 0;
    lVar2 = 1;
  }
  return lVar2;
}



undefined4 LIBMCRD_OBJ_1460(undefined4 param_1,undefined4 *param_2,undefined4 *param_3)

{
  if (param_3 != (undefined4 *)0x0) {
    *param_3 = DAT_80075b98;
  }
  if (param_2 != (undefined4 *)0x0) {
    *param_2 = DAT_80075b94;
  }
  DAT_80075b58 = 0;
  return 1;
}



void LIBMCRD_OBJ_14A4(void)

{
  return;
}



long MemCardCreateFile(long chan,char *fnam,long blocks)

{
  long lVar1;
  int iVar2;
  int iVar3;
  char acStack_40 [32];
  int local_20;
  
  iVar3 = 0;
  if (DAT_80075b50 != 0) {
    printf("Access Denied. : system busy\n");
    lVar1 = LIBMCRD_OBJ_16B8();
    return lVar1;
  }
  _make_file_discrpt(chan,acStack_40);
  strcat(acStack_40,fnam);
  DAT_80075b4c = DAT_80075b4c | 1 << (DAT_80075b5c & 0x1f);
  iVar2 = open(acStack_40,1);
  if (-1 < iVar2) {
    close(iVar2);
    lVar1 = LIBMCRD_OBJ_16B8();
    return lVar1;
  }
  while( true ) {
    iVar2 = open(acStack_40,blocks << 0x10 | 0x200);
    if (-1 < iVar2) {
      close(iVar2);
      return 0;
    }
    DAT_80075ba0 = MemCardCallback((MemCB)0x0);
    if (DAT_80075b50 != 0) {
      printf("Access Denied. : event multipul open\n");
      lVar1 = LIBMCRD_OBJ_15EC();
      return lVar1;
    }
    DAT_80075b50 = 2;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b5c = chan;
    UserFuncOpen(_card_accept_back);
    if ((DAT_80075b50 != 0) || (DAT_80075b58 != 0)) {
      if (DAT_80075b58 == 0) {
        do {
        } while( true );
      }
      DAT_80075b58 = 0;
      local_20 = DAT_80075b98;
    }
    MemCardCallback(DAT_80075ba0);
    if (local_20 == 0) break;
    if ((local_20 != 3) && ((local_20 != 2 || (iVar3 = iVar3 + 1, 0xf < iVar3)))) {
      if (local_20 == 0) {
        local_20 = 5;
      }
      lVar1 = LIBMCRD_OBJ_16B8();
      return lVar1;
    }
  }
  lVar1 = LIBMCRD_OBJ_16B8();
  return lVar1;
}



undefined4 LIBMCRD_OBJ_15EC(void)

{
  bool bVar1;
  int iVar2;
  undefined4 uVar3;
  int *unaff_s0;
  int unaff_s1;
  undefined4 unaff_s2;
  int unaff_s3;
  int unaff_s4;
  int param_11;
  
  while( true ) {
    if ((*unaff_s0 != 0) || (unaff_s0[2] != 0)) {
      iVar2 = unaff_s0[2];
      do {
        bVar1 = iVar2 == 0;
        iVar2 = DAT_80075b58;
      } while (bVar1);
      DAT_80075b58 = 0;
      param_11 = DAT_80075b98;
    }
    MemCardCallback(DAT_80075ba0);
    if (param_11 == 0) {
      uVar3 = LIBMCRD_OBJ_16B8();
      return uVar3;
    }
    if ((param_11 != 3) && ((param_11 != unaff_s3 || (unaff_s1 = unaff_s1 + 1, 0xf < unaff_s1)))) {
      if (param_11 == 0) {
        param_11 = 5;
      }
      uVar3 = LIBMCRD_OBJ_16B8();
      return uVar3;
    }
    iVar2 = open(&stack0x00000010,unaff_s4 << 0x10 | 0x200);
    if (-1 < iVar2) {
      close(iVar2);
      return 0;
    }
    DAT_80075ba0 = MemCardCallback((MemCB)0x0);
    if (*unaff_s0 != 0) break;
    *unaff_s0 = unaff_s3;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b5c = unaff_s2;
    UserFuncOpen(_card_accept_back);
  }
  printf("Access Denied. : event multipul open\n");
  uVar3 = LIBMCRD_OBJ_15EC();
  return uVar3;
}



void LIBMCRD_OBJ_16B8(void)

{
  return;
}



long MemCardDeleteFile(long chan,char *fnam)

{
  long lVar1;
  int iVar2;
  char acStack_40 [32];
  long lStack_20;
  
  iVar2 = 0;
  if (DAT_80075b50 != 0) {
    printf("Access Denied. : system busy\n");
    lVar1 = LIBMCRD_OBJ_189C();
    return lVar1;
  }
  _make_file_discrpt(chan,acStack_40);
  strcat(acStack_40,fnam);
  DAT_80075b4c = DAT_80075b4c | 1 << (DAT_80075b5c & 0x1f);
  do {
    lStack_20 = erase(acStack_40);
    if (lStack_20 != 0) {
      return 0;
    }
    DAT_80075ba0 = MemCardCallback((MemCB)0x0);
    if (DAT_80075b50 != 0) {
      printf("Access Denied. : event multipul open\n");
      lVar1 = LIBMCRD_OBJ_17E0();
      return lVar1;
    }
    DAT_80075b50 = 2;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b5c = chan;
    UserFuncOpen(_card_accept_back);
    if ((DAT_80075b50 != 0) || (DAT_80075b58 != 0)) {
      if (DAT_80075b58 == 0) {
        do {
        } while( true );
      }
      DAT_80075b58 = 0;
      lStack_20 = DAT_80075b98;
    }
    MemCardCallback(DAT_80075ba0);
  } while ((lStack_20 == 3) || ((lStack_20 == 2 && (iVar2 = iVar2 + 1, iVar2 < 0x10))));
  if (lStack_20 == 0) {
    lStack_20 = 5;
  }
  lVar1 = LIBMCRD_OBJ_189C();
  return lVar1;
}



undefined4 LIBMCRD_OBJ_17E0(void)

{
  bool bVar1;
  int iVar2;
  undefined4 uVar3;
  int *unaff_s0;
  int unaff_s1;
  int unaff_s2;
  undefined4 unaff_s3;
  long param_11;
  
  while( true ) {
    if ((*unaff_s0 != 0) || (unaff_s0[2] != 0)) {
      iVar2 = unaff_s0[2];
      do {
        bVar1 = iVar2 == 0;
        iVar2 = DAT_80075b58;
      } while (bVar1);
      DAT_80075b58 = 0;
      param_11 = DAT_80075b98;
    }
    MemCardCallback(DAT_80075ba0);
    if ((param_11 != 3) && ((param_11 != unaff_s2 || (unaff_s1 = unaff_s1 + 1, 0xf < unaff_s1)))) {
      if (param_11 == 0) {
        param_11 = 5;
      }
      uVar3 = LIBMCRD_OBJ_189C();
      return uVar3;
    }
    param_11 = erase(&stack0x00000010);
    if (param_11 != 0) {
      return 0;
    }
    DAT_80075ba0 = MemCardCallback((MemCB)0x0);
    if (*unaff_s0 != 0) break;
    *unaff_s0 = unaff_s2;
    DAT_80075b54 = 0;
    DAT_80075b58 = 0;
    DAT_80075b5c = unaff_s3;
    UserFuncOpen(_card_accept_back);
  }
  printf("Access Denied. : event multipul open\n");
  uVar3 = LIBMCRD_OBJ_17E0();
  return uVar3;
}



void LIBMCRD_OBJ_189C(void)

{
  return;
}



// Possible LIBMCRD.OBJ/MemCardFormat

undefined4 _card_format(undefined4 param_1)

{
  undefined4 uVar1;
  char acStack_48 [64];
  
  if (DAT_80075b50 == 0) {
    DAT_80075b4c = DAT_80075b4c | 1 << (DAT_80075b5c & 0x1f);
    _make_file_discrpt(param_1,acStack_48);
    _clr_card_event();
    format(acStack_48);
    uVar1 = _get_card_event_x();
    _rslt_to_code(uVar1);
    uVar1 = LIBMCRD_OBJ_1944();
    return uVar1;
  }
  printf("Access Denied. : system busy\n");
  return 0xffffffff;
}



void LIBMCRD_OBJ_1944(void)

{
  return;
}



long MemCardUnformat(long chan)

{
  long lVar1;
  undefined *puVar2;
  int iVar3;
  int iVar4;
  uchar auStack_90 [127];
  undefined local_11;
  
  if (DAT_80075b50 != 0) {
    printf("Access Denied. : system busy\n");
    lVar1 = LIBMCRD_OBJ_19F8();
    return lVar1;
  }
  iVar4 = 0x7f;
  puVar2 = &local_11;
  do {
    *puVar2 = 0xff;
    iVar4 = iVar4 + -1;
    puVar2 = puVar2 + -1;
  } while (-1 < iVar4);
  iVar4 = 0;
  do {
    _clr_card_event();
    _new_card();
    _card_write(chan,iVar4,auStack_90);
    iVar3 = _get_card_event_x();
    iVar4 = iVar4 + 1;
    if (iVar3 != 0) {
      lVar1 = LIBMCRD_OBJ_19F8();
      return lVar1;
    }
  } while (iVar4 < 0xf);
  return 1;
}



void LIBMCRD_OBJ_19F8(void)

{
  return;
}



undefined4 _rslt_to_code(int param_1)

{
  undefined4 uVar1;
  
  uVar1 = 0;
  if (param_1 == 1) {
    uVar1 = 2;
  }
  else if (param_1 < 2) {
    if (param_1 != 0) {
      uVar1 = LIBMCRD_OBJ_1A60();
      return uVar1;
    }
  }
  else {
    if (param_1 == 2) {
      uVar1 = LIBMCRD_OBJ_1A60();
      return uVar1;
    }
    uVar1 = 3;
    if (param_1 != 4) {
      uVar1 = LIBMCRD_OBJ_1A60();
      return uVar1;
    }
  }
  return uVar1;
}



void LIBMCRD_OBJ_1A60(void)

{
  return;
}



void _callback_handler(void)

{
  undefined4 uVar1;
  undefined4 uVar2;
  int iVar3;
  
  iVar3 = UserFuncComplete();
  if (iVar3 == 0) {
    UserFuncExecute();
    iVar3 = UserFuncComplete();
    uVar2 = DAT_80075b54;
    uVar1 = DAT_80075b50;
    if (iVar3 != 0) {
      DAT_80075b58 = 1;
      DAT_80075b94 = DAT_80075b50;
      DAT_80075b98 = DAT_80075b54;
      DAT_80075b50 = 0;
      DAT_80075b54 = 0;
      if (DAT_80075b90 != (code *)0x0) {
        (*DAT_80075b90)(uVar1,uVar2);
      }
    }
  }
  return;
}



void _make_file_discrpt(int param_1,uint param_2)

{
  uint uVar1;
  uint *puVar2;
  char cVar3;
  int iVar4;
  
  uVar1 = param_2 + 3 & 3;
  puVar2 = (uint *)((param_2 + 3) - uVar1);
  *puVar2 = *puVar2 & -1 << (uVar1 + 1) * 8 | 0x30307562U >> (3 - uVar1) * 8;
  uVar1 = param_2 & 3;
  *(uint *)(param_2 - uVar1) =
       *(uint *)(param_2 - uVar1) & 0xffffffffU >> (4 - uVar1) * 8 | 0x30307562 << uVar1 * 8;
  *(undefined *)(param_2 + 4) = 0x3a;
  *(undefined *)(param_2 + 5) = 0;
  iVar4 = param_1;
  if (param_1 < 0) {
    iVar4 = param_1 + 0xf;
  }
  cVar3 = (char)(iVar4 >> 4);
  *(char *)(param_2 + 2) = cVar3 + '0';
  *(char *)(param_2 + 3) = (char)param_1 + cVar3 * -0x10 + '0';
  return;
}



undefined4 funcEvSpIOE(void)

{
  DAT_80075b2c = 1;
  return 0;
}



undefined4 funcEvSpError(void)

{
  DAT_80075b30 = 1;
  return 0;
}



undefined4 funcEvSpTimeout(void)

{
  DAT_80075b34 = 1;
  return 0;
}



undefined4 funcEvSpNewcard(void)

{
  DAT_80075b38 = 1;
  return 0;
}



undefined4 funcEvSpIOEx(void)

{
  DAT_80075b3c = 1;
  return 0;
}



undefined4 funcEvSpErrorx(void)

{
  DAT_80075b40 = 1;
  return 0;
}



undefined4 funcEvSpTimeoutx(void)

{
  DAT_80075b44 = 1;
  return 0;
}



undefined4 funcEvSpNewcardx(void)

{
  DAT_80075b48 = 1;
  return 0;
}



// Possible LIBMCRD.OBJ/_card_open

void _card_open(long flg)

{
  InitCARD();
  StartCARD();
  _bu_init();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible LIBMCRD.OBJ/_card_start

void _card_start(void)

{
  int iVar1;
  
  iVar1 = EnterCriticalSection();
  DAT_80075b0c = OpenEvent(0xf4000001,4,0x1000,funcEvSpIOE);
  DAT_80075b10 = OpenEvent(0xf4000001,0x8000,0x1000,funcEvSpError);
  DAT_80075b14 = OpenEvent(0xf4000001,0x100,0x1000,funcEvSpTimeout);
  DAT_80075b18 = OpenEvent(0xf4000001,0x2000,0x1000,funcEvSpNewcard);
  DAT_80075b1c = OpenEvent(0xf0000011,4,0x1000,funcEvSpIOEx);
  DAT_80075b20 = OpenEvent(0xf0000011,0x8000,0x1000,funcEvSpErrorx);
  DAT_80075b24 = OpenEvent(0xf0000011,0x100,0x1000,funcEvSpTimeoutx);
  DAT_80075b28 = OpenEvent(0xf0000011,0x2000,0x1000,funcEvSpNewcardx);
  EnableEvent(DAT_80075b0c);
  EnableEvent(DAT_80075b10);
  EnableEvent(DAT_80075b14);
  EnableEvent(DAT_80075b18);
  EnableEvent(DAT_80075b1c);
  EnableEvent(DAT_80075b20);
  EnableEvent(DAT_80075b24);
  EnableEvent(DAT_80075b28);
  _clr_card_event();
  if (iVar1 == 1) {
    ExitCriticalSection();
  }
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD
// Possible LIBMCRD.OBJ/_card_close

void _card_close(void)

{
  StopCARD();
  return;
}



void _card_stop(void)

{
  int iVar1;
  
  iVar1 = EnterCriticalSection();
  CloseEvent(DAT_80075b0c);
  CloseEvent(DAT_80075b10);
  CloseEvent(DAT_80075b14);
  CloseEvent(DAT_80075b18);
  CloseEvent(DAT_80075b1c);
  CloseEvent(DAT_80075b20);
  CloseEvent(DAT_80075b24);
  CloseEvent(DAT_80075b28);
  if (iVar1 == 1) {
    ExitCriticalSection();
  }
  return;
}



void _clr_card_event(void)

{
  TestEvent(DAT_80075b0c);
  TestEvent(DAT_80075b10);
  TestEvent(DAT_80075b14);
  TestEvent(DAT_80075b18);
  TestEvent(DAT_80075b1c);
  TestEvent(DAT_80075b20);
  TestEvent(DAT_80075b24);
  TestEvent(DAT_80075b28);
  DAT_80075b38 = 0;
  DAT_80075b34 = 0;
  DAT_80075b30 = 0;
  DAT_80075b2c = 0;
  DAT_80075b48 = 0;
  DAT_80075b44 = 0;
  DAT_80075b40 = 0;
  DAT_80075b3c = 0;
  return;
}



int _get_card_event(void)

{
  int iVar1;
  
  do {
    iVar1 = DAT_80075b2c + DAT_80075b30 * 2 + DAT_80075b34 * 4 + DAT_80075b38 * 8;
  } while (iVar1 == 0);
  TestEvent(DAT_80075b1c);
  TestEvent(DAT_80075b20);
  TestEvent(DAT_80075b24);
  TestEvent(DAT_80075b28);
  DAT_80075b38 = 0;
  DAT_80075b34 = 0;
  DAT_80075b30 = 0;
  DAT_80075b2c = 0;
  return iVar1 >> 1;
}



int _get_card_event_x(void)

{
  int iVar1;
  
  do {
    iVar1 = DAT_80075b3c + DAT_80075b40 * 2 + DAT_80075b44 * 4 + DAT_80075b48 * 8;
  } while (iVar1 == 0);
  TestEvent(DAT_80075b0c);
  TestEvent(DAT_80075b10);
  TestEvent(DAT_80075b14);
  TestEvent(DAT_80075b18);
  DAT_80075b48 = 0;
  DAT_80075b44 = 0;
  DAT_80075b40 = 0;
  DAT_80075b3c = 0;
  return iVar1 >> 1;
}



int _chk_card_event(void)

{
  return DAT_80075b2c + DAT_80075b30 * 2 + DAT_80075b34 * 4 + DAT_80075b38 * 8;
}



int _chk_card_event_x(void)

{
  return DAT_80075b3c + DAT_80075b40 * 2 + DAT_80075b44 * 4 + DAT_80075b48 * 8;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _bu_init(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000a0)();
  return;
}



long CloseEvent(long param_1)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



int open(char *__file,int __oflag,...)

{
  int iVar1;
  
                    // WARNING: Treating indirect jump as call
  iVar1 = (*(code *)&SUB_000000b0)();
  return iVar1;
}



__off_t lseek(int __fd,__off_t __offset,int __whence)

{
  __off_t _Var1;
  
                    // WARNING: Treating indirect jump as call
  _Var1 = (*(code *)&SUB_000000b0)();
  return _Var1;
}



ssize_t read(int __fd,void *__buf,size_t __nbytes)

{
  ssize_t sVar1;
  
                    // WARNING: Treating indirect jump as call
  sVar1 = (*(code *)&SUB_000000b0)();
  return sVar1;
}



int close(int __fd)

{
  int iVar1;
  
                    // WARNING: Treating indirect jump as call
  iVar1 = (*(code *)&SUB_000000b0)();
  return iVar1;
}



long format(char *param_1)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



DIRENTRY * nextfile(DIRENTRY *param_1)

{
  DIRENTRY *pDVar1;
  
                    // WARNING: Treating indirect jump as call
  pDVar1 = (DIRENTRY *)(*(code *)&SUB_000000b0)();
  return pDVar1;
}



long erase(char *param_1)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



// WARNING: Removing unreachable block (ram,0x80068628)
// WARNING: Removing unreachable block (ram,0x80068660)
// WARNING: Removing unreachable block (ram,0x80068664)
// WARNING: Removing unreachable block (ram,0x80068674)
// WARNING: Removing unreachable block (ram,0x80068618)
// WARNING: Removing unreachable block (ram,0x80068688)
// WARNING: Removing unreachable block (ram,0x80068698)
// WARNING: Removing unreachable block (ram,0x8006869c)

DIRENTRY * firstfile(char *param_1,DIRENTRY *param_2)

{
  char cVar1;
  int in_zero;
  int iVar2;
  DIRENTRY *pDVar3;
  char **ppcVar4;
  char *pcVar5;
  char **ppcVar6;
  
  pcVar5 = &DAT_80075bb0;
  cVar1 = *param_1;
  while (':' < cVar1) {
    cVar1 = *param_1;
    param_1 = param_1 + 1;
    *pcVar5 = cVar1;
    pcVar5 = pcVar5 + 1;
    cVar1 = *param_1;
  }
  *pcVar5 = '\0';
  ppcVar6 = *(char ***)(in_zero + 0x150);
  ppcVar4 = ppcVar6 + (*(uint *)(in_zero + 0x154) / 0x50) * 0x14;
  while( true ) {
    if (ppcVar4 <= ppcVar6) {
      pDVar3 = (DIRENTRY *)FIRST_OBJ_180();
      return pDVar3;
    }
    if ((*ppcVar6 != (char *)0x0) && (iVar2 = strcmp(*ppcVar6,&DAT_80075bb0), iVar2 == 0)) break;
    ppcVar6 = ppcVar6 + 0x14;
  }
  DAT_80075ba8 = ppcVar6[0xd];
  pDVar3 = (DIRENTRY *)FIRST_OBJ_D0();
  return pDVar3;
}



void FIRST_OBJ_D0(void)

{
  int in_zero;
  int iVar1;
  int in_v1;
  char **ppcVar2;
  char **ppcVar3;
  
  if (in_v1 == 0) {
    FIRST_OBJ_180();
    return;
  }
  ppcVar3 = *(char ***)(in_zero + 0x150);
  ppcVar2 = ppcVar3 + (*(uint *)(in_zero + 0x154) / 0x50) * 0x14;
  while( true ) {
    if (ppcVar2 <= ppcVar3) {
      firstfile2();
      return;
    }
    if ((*ppcVar3 != (char *)0x0) && (iVar1 = strcmp(*ppcVar3,&DAT_80075bb0), iVar1 == 0)) break;
    ppcVar3 = ppcVar3 + 0x14;
  }
  ppcVar3[0xd] = (char *)FIRST_OBJ_19C;
  FIRST_OBJ_174();
  return;
}



void FIRST_OBJ_174(void)

{
  firstfile2();
  return;
}



void FIRST_OBJ_180(void)

{
  return;
}



void FIRST_OBJ_19C(int *param_1,undefined4 param_2,undefined4 param_3)

{
  code *pcVar1;
  int in_zero;
  int iVar2;
  char **ppcVar3;
  char **ppcVar4;
  
  if (*param_1 == 0) {
    *param_1 = 1;
  }
  pcVar1 = DAT_80075ba8;
  ppcVar4 = *(char ***)(in_zero + 0x150);
  ppcVar3 = ppcVar4 + (*(uint *)(in_zero + 0x154) / 0x50) * 0x14;
  while( true ) {
    if (ppcVar3 <= ppcVar4) {
      (*DAT_80075ba8)(param_1,param_2,param_3);
      return;
    }
    if ((*ppcVar4 != (char *)0x0) && (iVar2 = strcmp(*ppcVar4,&DAT_80075bb0), iVar2 == 0)) break;
    ppcVar4 = ppcVar4 + 0x14;
  }
  ppcVar4[0xd] = (char *)pcVar1;
  FIRST_OBJ_25C();
  return;
}



void FIRST_OBJ_25C(void)

{
  (*DAT_80075ba8)();
  return;
}



// Possible A66.OBJ/firstfile

void firstfile2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



char * strcat(char *param_1,char *param_2)

{
  char cVar1;
  int iVar2;
  int iVar3;
  char *pcVar4;
  
  if ((param_1 != (char *)0x0) && (param_2 != (char *)0x0)) {
    iVar2 = strlen(param_1);
    iVar3 = strlen(param_2);
    if (param_1 + iVar2 != param_2 + iVar3) {
      cVar1 = *param_1;
      pcVar4 = param_1 + 1;
      while (cVar1 != '\0') {
        cVar1 = *pcVar4;
        pcVar4 = pcVar4 + 1;
      }
      pcVar4 = pcVar4 + -1;
      do {
        cVar1 = *param_2;
        param_2 = param_2 + 1;
        *pcVar4 = cVar1;
        pcVar4 = pcVar4 + 1;
      } while (cVar1 != '\0');
      pcVar4 = (char *)STRCAT_OBJ_8C();
      return pcVar4;
    }
  }
  return (char *)0x0;
}



void STRCAT_OBJ_8C(void)

{
  return;
}



int strcmp(char *param_1,char *param_2)

{
  byte bVar1;
  int iVar2;
  
  if ((param_1 == (char *)0x0) || (param_2 == (char *)0x0)) {
    if (param_1 != param_2) {
      if (param_1 != (char *)0x0) {
        return 1;
      }
      iVar2 = STRCMP_OBJ_5C();
      return iVar2;
    }
  }
  else {
    do {
      bVar1 = *param_1;
      if (bVar1 != *param_2) {
        return (uint)(byte)*param_1 - (uint)(byte)*param_2;
      }
      param_1 = (char *)((byte *)param_1 + 1);
      param_2 = (char *)((byte *)param_2 + 1);
    } while (bVar1 != 0);
  }
  iVar2 = STRCMP_OBJ_5C();
  return iVar2;
}



void STRCMP_OBJ_5C(void)

{
  return;
}



long _card_info(long chan)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&LAB_000000a0)();
  return lVar1;
}



long _card_load(long chan)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&LAB_000000a0)();
  return lVar1;
}



long _card_write(long chan,long block,uchar *buf)

{
  long lVar1;
  
                    // WARNING: Treating indirect jump as call
  lVar1 = (*(code *)&SUB_000000b0)();
  return lVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void _new_card(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void _card_clear(long param_1)

{
  _new_card();
  _card_write(param_1,0x3f,(uchar *)0x0);
  return;
}



// Possible INIT.OBJ/InitCARD

void InitCARD(undefined4 param_1)

{
  int iVar1;
  
  ChangeClearPAD(0);
  EnterCriticalSection();
  iVar1 = ReadInitPadFlag();
  if (iVar1 == 0) {
    param_1 = 0;
  }
  InitCARD2(param_1);
  ExitCriticalSection();
  return;
}



// Possible INIT.OBJ/StartCARD

void StartCARD(void)

{
  EnterCriticalSection();
  StartCARD2();
  ChangeClearPAD(0);
  ExitCriticalSection();
  return;
}



// Possible INIT.OBJ/StopCARD

void StopCARD(void)

{
  StopCARD2();
  FUN_80068eb0();
  return;
}



void SetInitPadFlag(undefined4 param_1)

{
  DAT_800751a0 = param_1;
  return;
}



// Possible GS_125.OBJ/GsGetWorkBase

undefined4 ReadInitPadFlag(void)

{
  return DAT_800751a0;
}



void PAD_init(undefined4 param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  _remove_ChgclrPAD();
  EnterCriticalSection();
  _patch_pad();
  ExitCriticalSection();
  ChangeClearPAD(0);
  PAD_OBJ_1A4();
  PAD_init2(param_1,param_2,param_3,param_4);
  DAT_800751a0 = 1;
  return;
}



long InitPAD(char *param_1,long param_2,char *param_3,long param_4)

{
  _remove_ChgclrPAD();
  EnterCriticalSection();
  _patch_pad();
  ExitCriticalSection();
  ChangeClearPAD(0);
  PAD_OBJ_1A4();
  InitPAD2(param_1,param_2,param_3,param_4);
  DAT_800751a0 = 1;
  return 1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

long StartPAD(void)

{
  StartPAD2();
  ChangeClearPAD(0);
  EnablePAD();
  return 1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void StopPAD(void)

{
  DisablePAD();
  StopPAD2();
  PAD_OBJ_21C();
  DAT_800751a0 = 0;
  return;
}



undefined4 PAD_OBJ_1A4(void)

{
  EnterCriticalSection();
  DAT_80075bdc = PAD_OBJ_254;
  DAT_80075be0 = PAD_OBJ_2BC;
  DAT_80075bd8 = 0;
  DAT_80075be4 = 0;
  SysDeqIntRP(1,&DAT_80075bd8);
  SysEnqIntRP(1,&DAT_80075bd8);
  ExitCriticalSection();
  return 1;
}



undefined4 PAD_OBJ_21C(void)

{
  EnterCriticalSection();
  SysDeqIntRP(1,&DAT_80075bd8);
  ExitCriticalSection();
  return 1;
}



undefined4 PAD_OBJ_254(void)

{
  int local_10;
  
  *(undefined2 *)(PTR_JOY_MCD_DATA_800751a4 + 10) = 0;
  local_10 = 9;
  do {
    local_10 = local_10 + -1;
  } while (local_10 != -1);
  return 0;
}



undefined4 PAD_OBJ_2BC(void)

{
  undefined4 uVar1;
  
  uVar1 = 0;
  if (((*(uint *)(PTR_I_STAT_800751a8 + 4) & 1) != 0) &&
     (uVar1 = 1, (*(uint *)PTR_I_STAT_800751a8 & 1) == 0)) {
    uVar1 = 0;
  }
  return uVar1;
}



void InitPAD2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void StartPAD2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void StopPAD2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void PAD_init2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void SysEnqIntRP(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000c0)();
  return;
}



void SysDeqIntRP(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&LAB_000000c0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void EnablePAD(void)

{
                    // WARNING: Could not recover jumptable at 0x80068d7c. Too many branches
                    // WARNING: Treating indirect jump as call
  (*DAT_80075bf0)();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked

void DisablePAD(void)

{
                    // WARNING: Could not recover jumptable at 0x80068d90. Too many branches
                    // WARNING: Treating indirect jump as call
  (*DAT_80075bf4)();
  return;
}



void _patch_pad(void)

{
  int iVar1;
  int iVar2;
  undefined4 unaff_retaddr;
  
  DAT_80075be8 = unaff_retaddr;
  EnterCriticalSection();
  iVar1 = (*(code *)&SUB_000000b0)();
  iVar1 = *(int *)(iVar1 + 0x16c);
  iVar2 = 0xb;
  DAT_80075bf0 = iVar1 + 0x884;
  DAT_80075bf4 = iVar1 + 0x894;
  do {
    *(undefined4 *)(iVar1 + 0x594) = 0;
    iVar1 = iVar1 + 4;
    iVar2 = iVar2 + -1;
  } while (iVar2 != 0);
  FlushCache();
  return;
}



void _remove_ChgclrPAD(void)

{
  int iVar1;
  undefined4 *puVar2;
  int iVar3;
  undefined4 unaff_retaddr;
  
  DAT_80075bf8 = unaff_retaddr;
  EnterCriticalSection();
  iVar1 = (*(code *)&SUB_000000b0)();
  iVar3 = 9;
  puVar2 = (undefined4 *)(*(int *)(iVar1 + 0x16c) + 0x62c);
  do {
    *puVar2 = 0;
    puVar2 = puVar2 + 1;
    iVar3 = iVar3 + -1;
  } while (iVar3 != 0);
  FlushCache();
  ExitCriticalSection();
  return;
}



void InitCARD2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void StartCARD2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



void StopCARD2(void)

{
                    // WARNING: Treating indirect jump as call
  (*(code *)&SUB_000000b0)();
  return;
}



// Possible END.OBJ/_ExitCard

void FUN_80068eb0(void)

{
  int iVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  undefined4 unaff_retaddr;
  
  DAT_80075658 = unaff_retaddr;
  EnterCriticalSection();
  iVar1 = (*(code *)&SUB_000000b0)();
  puVar3 = &DAT_80068f18;
  iVar1 = *(int *)(iVar1 + 0x18);
  do {
    uVar2 = *puVar3;
    puVar3 = puVar3 + 1;
    *(undefined4 *)(iVar1 + 0x70) = uVar2;
    iVar1 = iVar1 + 4;
  } while (puVar3 != (undefined4 *)&UNK_80068f24);
  FlushCache();
  ExitCriticalSection();
  return;
}



void UserFuncInit(void)

{
  DAT_800751b0 = 0xffffffff;
  return;
}



void UserFuncOpen(undefined4 param_1)

{
  undefined4 *puVar1;
  int iVar2;
  int iVar3;
  
  iVar3 = DAT_800751b0 + 1;
  if (3 < iVar3) {
    printf("libmcrd: event overflow\n");
    USERFUNC_OBJ_84();
    return;
  }
  iVar2 = 3;
  puVar1 = &DAT_80075c14 + iVar3 * 4;
  DAT_800751b0 = iVar3;
  (&DAT_80075c48)[iVar3] = param_1;
  do {
    *puVar1 = 0;
    iVar2 = iVar2 + -1;
    puVar1 = puVar1 + -1;
  } while (-1 < iVar2);
  return;
}



void USERFUNC_OBJ_84(void)

{
  return;
}



void UserFuncExecute(void)

{
  int iVar1;
  
  if ((-1 < DAT_800751b0) &&
     (iVar1 = (*(code *)(&DAT_80075c48)[DAT_800751b0])(&UNK_80075c08 + DAT_800751b0 * 0x10),
     iVar1 != 0)) {
    DAT_800751b0 = DAT_800751b0 + -1;
  }
  return;
}



uint UserFuncComplete(void)

{
  return DAT_800751b0 >> 0x1f;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD

int PadChkVsync(void)

{
  int iVar1;
  
  iVar1 = _padChkVsync();
  return iVar1;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD

void PadStartCom(void)

{
  _padStartCom();
  return;
}



// WARNING: Unknown calling convention -- yet parameter storage is locked
// Possible GS_106.OBJ/GsSetProjection
// Possible _OP_VDEL.OBJ/__builtin_vec_delete
// Possible _OP_VNEW.OBJ/__builtin_vec_new
// Possible SSNOFF.OBJ/SsSetNoiseOff
// Possible SSQUIT.OBJ/SsQuit
// Possible SEND.OBJ/SendPAD

void PadStopCom(void)

{
  _padStopCom();
  return;
}



uint PadChkMtap(int param_1)

{
  uint uVar1;
  
  if (DAT_80075208 == 0) {
    uVar1 = PADENTRY_OBJ_A4();
    return uVar1;
  }
  return (uint)(*(char *)((param_1 >> 4) * 0xf0 + DAT_800751f0 + 0xe8) == '\b');
}



void PADENTRY_OBJ_A4(void)

{
  return;
}



int PadGetState(int port)

{
  byte bVar1;
  int iVar2;
  uint uVar3;
  
  iVar2 = (*DAT_800751d0)();
  if (((*(uint *)(iVar2 + 0x34) & 0xffff0000) == 0) &&
     (((iVar2 == *(int *)(iVar2 + 0x10) || (*(char *)(iVar2 + 0x38) == '\0')) &&
      (**(char **)(iVar2 + 0x30) == '\0')))) {
    uVar3 = (uint)*(byte *)(iVar2 + 0x49);
  }
  else {
    bVar1 = *(byte *)(iVar2 + 0x49);
    if (bVar1 == 3) {
      iVar2 = PADENTRY_OBJ_15C();
      return iVar2;
    }
    if (bVar1 < 4) {
      uVar3 = 1;
      if (bVar1 != 2) {
        iVar2 = PADENTRY_OBJ_158();
        return iVar2;
      }
    }
    else {
      uVar3 = 4;
      if (bVar1 != 6) {
        iVar2 = PADENTRY_OBJ_158();
        return iVar2;
      }
    }
  }
  return uVar3;
}



undefined PADENTRY_OBJ_158(int param_1)

{
  return *(undefined *)(param_1 + 0x49);
}



void PADENTRY_OBJ_15C(void)

{
  return;
}



int PadInfoMode(int param_1,int param_2,int param_3)

{
  int iVar1;
  
  iVar1 = (*DAT_800751d0)();
  if (param_2 == 3) {
    iVar1 = PADENTRY_OBJ_250();
    return iVar1;
  }
  if (3 < param_2) {
    if (param_2 != 4) {
      if (param_2 != 100) {
        iVar1 = PADENTRY_OBJ_250();
        return iVar1;
      }
      iVar1 = PADENTRY_OBJ_250();
      return iVar1;
    }
    if (param_3 < 0) {
      iVar1 = PADENTRY_OBJ_250();
      return iVar1;
    }
    if (param_3 < (int)(uint)*(byte *)(iVar1 + 0xe3)) {
      iVar1 = PADENTRY_OBJ_250();
      return iVar1;
    }
    return 0;
  }
  if (param_2 == 1) {
    iVar1 = PADENTRY_OBJ_250();
    return iVar1;
  }
  if (param_2 != 2) {
    iVar1 = PADENTRY_OBJ_250();
    return iVar1;
  }
  iVar1 = PADENTRY_OBJ_250();
  return iVar1;
}



void PADENTRY_OBJ_250(void)

{
  return;
}



int PadInfoAct(int param_1,int param_2,int param_3)

{
  int iVar1;
  
  iVar1 = (*DAT_800751d0)();
  if (-1 < param_2) {
    if (param_2 < (int)(uint)*(byte *)(iVar1 + 0xe9)) {
      switch(param_3) {
      case 1:
        iVar1 = PADENTRY_OBJ_324();
        return iVar1;
      case 2:
        iVar1 = PADENTRY_OBJ_324();
        return iVar1;
      case 3:
        iVar1 = PADENTRY_OBJ_324();
        return iVar1;
      case 4:
        iVar1 = PADENTRY_OBJ_324();
        return iVar1;
      case 5:
        iVar1 = PADENTRY_OBJ_324();
        return iVar1;
      }
    }
    return 0;
  }
  iVar1 = PADENTRY_OBJ_324();
  return iVar1;
}



void PADENTRY_OBJ_2E4(void)

{
  PADENTRY_OBJ_324();
  return;
}



void PADENTRY_OBJ_2F0(void)

{
  PADENTRY_OBJ_324();
  return;
}



void PADENTRY_OBJ_2FC(void)

{
  PADENTRY_OBJ_324();
  return;
}



void PADENTRY_OBJ_308(void)

{
  PADENTRY_OBJ_324();
  return;
}



void PADENTRY_OBJ_314(void)

{
  PADENTRY_OBJ_324();
  return;
}



void PADENTRY_OBJ_324(void)

{
  return;
}



int PadInfoComb(int param_1,int param_2,int param_3)

{
  int iVar1;
  
  iVar1 = (*DAT_800751d0)();
  if (param_2 < 0) {
    iVar1 = PADENTRY_OBJ_3CC();
    return iVar1;
  }
  if (param_2 < (int)(uint)*(byte *)(iVar1 + 0xea)) {
    if (param_3 < 0) {
      iVar1 = PADENTRY_OBJ_3CC();
      return iVar1;
    }
    if (param_3 < (int)(uint)*(byte *)(*(int *)(iVar1 + 8) + param_2 * 8)) {
      iVar1 = PADENTRY_OBJ_3CC();
      return iVar1;
    }
  }
  return 0;
}



void PADENTRY_OBJ_3CC(void)

{
  return;
}



int PadSetActAlign(int param_1,uchar *param_2)

{
  undefined4 uVar1;
  int iVar2;
  
  uVar1 = (*DAT_800751d0)();
  iVar2 = _padSetActAlign(uVar1,param_2);
  return iVar2;
}



int PadSetMainMode(int socket,int offs,int lock)

{
  undefined4 uVar1;
  int iVar2;
  
  uVar1 = (*DAT_800751d0)();
  iVar2 = _padSetMainMode(uVar1,offs & 0xff,lock & 0xff);
  return iVar2;
}



void PadSetAct(int param_1,uchar *param_2,int param_3)

{
  undefined4 uVar1;
  
  uVar1 = (*DAT_800751d0)();
  _padSetAct(uVar1,param_2,param_3);
  return;
}



uint PadEnableCom(uint mode)

{
  uint uVar1;
  
  uVar1 = DAT_80075210 << 1 | (uint)(DAT_8007520c == 0);
  if (uVar1 != mode) {
    DAT_800751f4 = 0;
    if ((mode & 1) == 0) {
      DAT_8007520c = 1;
    }
    else {
      DAT_8007520c = 0;
      if (0x95 < DAT_80075c68) {
        (*DAT_800751c0)(DAT_800751f0);
      }
      DAT_80075c68 = 0;
    }
    if ((mode & 2) == 0) {
      DAT_80075210 = 0;
    }
    else {
      DAT_80075210 = 1;
      if (0x95 < DAT_80075c6c) {
        (*DAT_800751c0)(DAT_800751f0 + 0xf0);
      }
      DAT_80075c6c = 0;
    }
    DAT_800751f4 = 1;
  }
  return uVar1;
}



void _padSetVsyncParam(void)

{
  DAT_80075c5c = &LAB_8006969c;
  DAT_80075c60 = &LAB_80069634;
  DAT_80075c58 = 0;
  DAT_80075c64 = 0;
  return;
}



undefined4 _padChkVsync(void)

{
  undefined4 uVar1;
  
  uVar1 = DAT_80075224;
  DAT_80075224 = 0;
  return uVar1;
}



void _padStartCom(void)

{
  undefined *puVar1;
  
  DAT_800751f4 = 0;
  EnterCriticalSection();
  SysDeqIntRP(2,&DAT_80075c58);
  SysEnqIntRP(2,&DAT_80075c58);
  puVar1 = PTR_I_STAT_8007521c;
  *(undefined4 *)PTR_I_STAT_8007521c = 0xfffffffe;
  *(uint *)(puVar1 + 4) = *(uint *)(puVar1 + 4) | 1;
  ChangeClearRCnt(3,0);
  ExitCriticalSection();
  (*DAT_800751c0)(DAT_800751f0);
  (*DAT_800751c0)(DAT_800751f0 + 0xf0);
  DAT_80075c6c = 0;
  DAT_80075c68 = 0;
  DAT_800751f4 = 1;
  return;
}



void _padStopCom(void)

{
  EnterCriticalSection();
  ChangeClearRCnt(3,1);
  SysDeqIntRP(2,&DAT_80075c58);
  ExitCriticalSection();
  return;
}



undefined8 _padInitSioMode(int param_1)

{
  code *pcVar1;
  undefined *puVar2;
  int iVar3;
  undefined2 uVar4;
  undefined *puVar5;
  undefined4 uVar6;
  
  puVar5 = PTR_JOY_MCD_DATA_80075220;
  *(undefined2 *)(PTR_JOY_MCD_DATA_80075220 + 10) = 0x40;
  *(undefined2 *)(puVar5 + 10) = 0;
  *(undefined2 *)(puVar5 + 8) = 0xd;
  *(undefined2 *)(puVar5 + 0xe) = 0x88;
  uVar6 = 0x91;
  if (*(char *)(param_1 + 0xe8) == '\b') {
    uVar6 = 0x50;
  }
  setRC2wait(uVar6);
  uVar4 = 0x1003;
  if (DAT_800751fc != 0) {
    uVar4 = 0x3003;
  }
  iVar3 = DAT_800751fc * 4;
  *(undefined2 *)(PTR_JOY_MCD_DATA_80075220 + 10) = uVar4;
  iVar3 = *(int *)(&DAT_80075214 + iVar3);
  pcVar1 = DAT_800751dc;
  if (-1 < iVar3) {
    while (DAT_800751dc = pcVar1, 0 < iVar3) {
      iVar3 = *(int *)(&DAT_80075214 + DAT_800751fc * 4) + -1;
      *(int *)(&DAT_80075214 + DAT_800751fc * 4) = iVar3;
      (*DAT_800751dc)(*(int *)(param_1 + 0xc) + iVar3 * 0xf0);
      pcVar1 = DAT_800751dc;
      iVar3 = *(int *)(&DAT_80075214 + DAT_800751fc * 4);
    }
    if (*(int *)(&DAT_80075214 + DAT_800751fc * 4) == 0) {
      *(int *)(&DAT_80075214 + DAT_800751fc * 4) = -1;
      (*pcVar1)(param_1);
      (*DAT_800751e0)(param_1);
    }
  }
  puVar2 = PTR_JOY_MCD_DATA_80075220;
  puVar5 = PTR_JOY_MCD_DATA_80075220;
  if ((*(ushort *)(PTR_JOY_MCD_DATA_80075220 + 4) & 0x200) != 0) {
    *(ushort *)(PTR_JOY_MCD_DATA_80075220 + 10) = *(ushort *)(PTR_JOY_MCD_DATA_80075220 + 10) | 0x10
    ;
    puVar5 = PTR_I_STAT_8007521c;
    if ((*(ushort *)(puVar2 + 4) & 0x200) != 0) {
      *puVar2 = 1;
      _padWaitRXready();
      uVar6 = 0;
      puVar5 = (undefined *)(uint)(byte)*PTR_JOY_MCD_DATA_80075220;
      goto LAB_80069b2c;
    }
    *(undefined4 *)PTR_I_STAT_8007521c = 0xffffff7f;
  }
  if ((*(char *)(param_1 + 0x50) == '\0') || (uVar6 = 0, *(char *)(param_1 + 0x36) == '\0')) {
    puVar5 = *(undefined **)(param_1 + 0x3c);
    uVar6 = 1;
    *puVar5 = 0;
  }
LAB_80069b2c:
  return CONCAT44(puVar5,uVar6);
}



void PADMAIN_OBJ_650(void)

{
  code **ppcVar1;
  int iVar2;
  
  ppcVar1 = (code **)(&PTR_PADIF_OBJ_0_80075240 + DAT_80075200);
  DAT_80075200 = DAT_80075200 + 1;
  iVar2 = (**ppcVar1)();
  if (iVar2 < 0) {
    (*DAT_800751bc)();
  }
  else {
    if (DAT_80075200 != 0) {
      setRC2wait(0x3c);
      iVar2 = _padClrIntSio0();
      if (iVar2 == 0) {
        (*DAT_800751bc)(0xfffffffd);
      }
    }
    if (4 < DAT_80075200) {
      DAT_80075200 = DAT_80075200 + -1;
    }
  }
  return;
}



uint _padSioRW(int param_1,int param_2)

{
  byte bVar1;
  ushort uVar2;
  byte bVar3;
  undefined *puVar4;
  int iVar5;
  uint uVar6;
  undefined2 uVar7;
  
  puVar4 = PTR_I_STAT_8007521c;
  bVar3 = (byte)param_2;
  if (param_2 < 0) {
    bVar1 = *PTR_JOY_MCD_DATA_80075220;
    *(undefined *)(param_1 + 0x44) = 0xff;
    *(undefined *)(param_1 + 0x45) = 1;
    **(byte **)(param_1 + 0x40) = ~bVar3;
    uVar2 = *(ushort *)(PTR_JOY_MCD_DATA_80075220 + 4);
    while ((uVar2 & 1) == 0) {
      uVar2 = *(ushort *)(PTR_JOY_MCD_DATA_80075220 + 4);
    }
    do {
      iVar5 = chkRC2wait();
    } while (iVar5 == 0);
    *PTR_JOY_MCD_DATA_80075220 = ~bVar3;
  }
  else {
    uVar7 = 0x88;
    if (((int)(uint)**(byte **)(param_1 + 0x3c) >> 4 == 8) &&
       (uVar7 = 0x88, 8 < *(byte *)(param_1 + 0x44))) {
      uVar7 = 0x22;
    }
    _startTime = (uint)(ushort)TMR_SYSCLOCK_VAL;
    uVar2 = *(ushort *)(PTR_JOY_MCD_DATA_80075220 + 4);
    _waitTime = 0x1ae;
    while ((uVar2 & 2) == 0) {
      uVar2 = *(ushort *)(PTR_JOY_MCD_DATA_80075220 + 4);
    }
    bVar1 = *PTR_JOY_MCD_DATA_80075220;
    *(undefined2 *)(PTR_JOY_MCD_DATA_80075220 + 0xe) = uVar7;
    uVar6 = *(uint *)puVar4;
    while ((uVar6 & 0x80) == 0) {
      iVar5 = chkRC2wait();
      if (iVar5 != 0) {
        return 0xffffffec;
      }
      uVar6 = *(uint *)PTR_I_STAT_8007521c;
    }
    *PTR_JOY_MCD_DATA_80075220 = bVar3;
    *(char *)(param_1 + 0x45) = *(char *)(param_1 + 0x45) + '\x01';
    *(byte *)(*(int *)(param_1 + 0x3c) + (uint)*(byte *)(param_1 + 0x44)) = bVar1;
    *(char *)(param_1 + 0x44) = *(char *)(param_1 + 0x44) + '\x01';
  }
  return (uint)bVar1;
}



uint _padSioRW2(int param_1,undefined param_2)

{
  byte bVar1;
  uint uVar2;
  int iVar3;
  undefined2 uVar4;
  
  uVar4 = 0x88;
  if (((int)(uint)**(byte **)(param_1 + 0x3c) >> 4 == 8) && (8 < *(byte *)(param_1 + 0x44))) {
    uVar4 = 0x22;
  }
  do {
  } while ((*(ushort *)(PTR_JOY_MCD_DATA_80075220 + 4) & 2) == 0);
  setRC2wait(400);
  bVar1 = *PTR_JOY_MCD_DATA_80075220;
  if ((*(char *)(param_1 + 0x44) == '\0') && ((int)(uint)bVar1 >> 4 == 8)) {
    *(undefined2 *)(PTR_JOY_MCD_DATA_80075220 + 0xe) = 0x22;
  }
  else {
    *(undefined2 *)(PTR_JOY_MCD_DATA_80075220 + 0xe) = uVar4;
  }
  uVar2 = *(uint *)PTR_I_STAT_8007521c;
  while( true ) {
    if ((uVar2 & 0x80) != 0) {
      if ((*(char *)(param_1 + 0xe8) != '\b') && (DAT_80075200 == 2)) {
        setRC2wait(0x3c);
        do {
          iVar3 = chkRC2wait();
        } while (iVar3 == 0);
      }
      *PTR_JOY_MCD_DATA_80075220 = param_2;
      *(char *)(param_1 + 0x45) = *(char *)(param_1 + 0x45) + '\x01';
      if (*(char *)(param_1 + 0x44) != -1) {
        *(byte *)(*(int *)(param_1 + 0x3c) + (uint)*(byte *)(param_1 + 0x44)) = bVar1;
      }
      *(char *)(param_1 + 0x44) = *(char *)(param_1 + 0x44) + '\x01';
      return (uint)bVar1;
    }
    uVar2 = (uint)(ushort)TMR_SYSCLOCK_VAL;
    if (uVar2 < _startTime) {
      if ((ushort)TMR_SYSCLOCK_MAX == 0) {
        uVar2 = uVar2 + 0x10000;
      }
      else {
        uVar2 = (ushort)TMR_SYSCLOCK_MAX + uVar2;
      }
    }
    if ((((ushort)TMR_SYSCLOCK_MODE & 0x200) != 0) && (_waitTime <= uVar2 - _startTime)) break;
    if (_waitTime <= uVar2 - _startTime >> 3) {
      return 0xfffffffe;
    }
    uVar2 = *(uint *)PTR_I_STAT_8007521c;
  }
  return 0xfffffffe;
}



undefined4 _padClrIntSio0(void)

{
  ushort uVar1;
  undefined *puVar2;
  int iVar3;
  
  puVar2 = PTR_JOY_MCD_DATA_80075220;
  *(undefined4 *)PTR_I_STAT_8007521c = 0xffffff7f;
  uVar1 = *(ushort *)(puVar2 + 4);
  while( true ) {
    if ((uVar1 & 0x80) == 0) {
      *(ushort *)(PTR_JOY_MCD_DATA_80075220 + 10) =
           *(ushort *)(PTR_JOY_MCD_DATA_80075220 + 10) | 0x10;
      return 1;
    }
    iVar3 = chkRC2wait();
    if (iVar3 != 0) break;
    uVar1 = *(ushort *)(PTR_JOY_MCD_DATA_80075220 + 4);
  }
  return 0;
}



void _padWaitRXready(void)

{
  do {
  } while ((*(ushort *)(PTR_JOY_MCD_DATA_80075220 + 4) & 2) == 0);
  return;
}



void _padSetAct(int param_1,undefined4 param_2,undefined param_3)

{
  *(undefined4 *)(param_1 + 0x28) = param_2;
  *(undefined *)(param_1 + 0x34) = param_3;
  return;
}



void _padSetCmd(int param_1,undefined param_2,undefined4 param_3,undefined param_4)

{
  *(undefined *)(param_1 + 0x36) = param_2;
  *(undefined4 *)(param_1 + 0x2c) = param_3;
  *(undefined *)(param_1 + 0x35) = param_4;
  return;
}



void _padSendAtLoadInfo(int param_1)

{
  byte bVar1;
  
  bVar1 = *(byte *)(param_1 + 0x46);
  if (bVar1 == 3) {
    PADCMD_OBJ_8E0(param_1,*(undefined *)(param_1 + 0xe4));
    PADCMD_OBJ_90();
    return;
  }
  if (bVar1 < 4) {
    if (bVar1 != 2) {
      PADCMD_OBJ_90();
      return;
    }
    PADCMD_OBJ_8CC();
    PADCMD_OBJ_90();
    return;
  }
  if (bVar1 != 4) {
    PADCMD_OBJ_90();
    return;
  }
  PADCMD_OBJ_920(param_1,*(undefined *)(param_1 + 0x47));
  return;
}



void PADCMD_OBJ_90(void)

{
  return;
}



undefined4 _padRecvAtLoadInfo(int param_1)

{
  byte bVar1;
  undefined uVar2;
  byte bVar3;
  undefined4 uVar4;
  int iVar5;
  
  bVar1 = *(byte *)(param_1 + 0x46);
  if (bVar1 == 3) {
    bVar1 = *(byte *)(*(int *)(param_1 + 0x3c) + 4);
    bVar3 = *(byte *)(*(int *)(param_1 + 0x3c) + 5);
    *(undefined *)(param_1 + 0x47) = 0;
    *(ushort *)(param_1 + 0xe6) = (ushort)bVar3 + (ushort)bVar1 * 0x100;
    uVar4 = PADCMD_OBJ_1D8();
    return uVar4;
  }
  if (bVar1 < 4) {
    if (bVar1 != 2) {
      uVar4 = PADCMD_OBJ_1DC();
      return uVar4;
    }
    *(undefined *)(param_1 + 0xe3) = *(undefined *)(*(int *)(param_1 + 0x3c) + 3);
    uVar2 = *(undefined *)(*(int *)(param_1 + 0x3c) + 4);
    *(undefined2 *)(param_1 + 0xe6) = 0;
    *(undefined *)(param_1 + 0xe4) = uVar2;
    *(undefined *)(param_1 + 0xe9) = *(undefined *)(*(int *)(param_1 + 0x3c) + 5);
    uVar2 = *(undefined *)(*(int *)(param_1 + 0x3c) + 6);
    *(undefined4 *)(param_1 + 0xec) = 0;
    *(undefined *)(param_1 + 0xea) = uVar2;
    uVar4 = PADCMD_OBJ_1D8();
    return uVar4;
  }
  if (bVar1 != 4) {
    uVar4 = PADCMD_OBJ_1DC();
    return uVar4;
  }
  bVar3 = *(char *)(param_1 + 0x47) + 1;
  bVar1 = *(byte *)(*(int *)(param_1 + 0x3c) + 4);
  *(byte *)(param_1 + 0x47) = bVar3;
  *(uint *)(param_1 + 0xec) = *(int *)(param_1 + 0xec) + 8 + (bVar1 + 3 & 0x1fc);
  if (bVar3 < *(byte *)(param_1 + 0xea)) {
    return 0;
  }
  iVar5 = _padGetActSize(param_1);
  if (0x80 < iVar5) {
    *(undefined *)(param_1 + 0x46) = 0xfe;
    *(undefined *)(param_1 + 0x49) = 2;
    uVar4 = PADCMD_OBJ_18C();
    return uVar4;
  }
  *(undefined *)(param_1 + 0x46) = 0xff;
  _padLoadActInfo(param_1,param_1 + 99);
  *(undefined *)(param_1 + 0x46) = 2;
  uVar4 = PADCMD_OBJ_18C();
  return uVar4;
}



undefined4 PADCMD_OBJ_18C(void)

{
  return 0;
}



undefined4 PADCMD_OBJ_1D8(void)

{
  return 1;
}



void PADCMD_OBJ_1DC(void)

{
  return;
}



int _padGetActSize(int param_1)

{
  return ((int)(*(byte *)(param_1 + 0xe3) + 1) >> 1) * 4 +
         ((uint)*(byte *)(param_1 + 0xe9) * 5 + 3 & 0xffc) + 4 + *(int *)(param_1 + 0xec);
}



undefined4 _padLoadActInfo(int *param_1,int param_2)

{
  undefined4 uVar1;
  int iVar2;
  
  if (param_2 != 0) {
    uVar1 = 0;
    if (param_1[1] == 0) {
      iVar2 = (*DAT_800751d8)();
      uVar1 = 1;
      if (iVar2 != 0) goto PADCMD_OBJ_26C;
      *(undefined *)((int)param_1 + 0x49) = 4;
      *(undefined *)((int)param_1 + 0x46) = 1;
      param_1[5] = (int)PADCMD_OBJ_2F8;
      param_1[6] = (int)PADCMD_OBJ_3A0;
      iVar2 = (param_2 + 3 >> 2) * 4;
      *param_1 = iVar2;
      *(undefined *)((int)param_1 + 0x47) = 0;
      iVar2 = iVar2 + ((int)(*(byte *)((int)param_1 + 0xe3) + 1) >> 1) * 4;
      param_1[1] = iVar2;
      param_1[2] = iVar2 + ((uint)*(byte *)((int)param_1 + 0xe9) * 5 + 3 & 0xffc);
    }
    return uVar1;
  }
PADCMD_OBJ_26C:
  uVar1 = PADCMD_OBJ_2E4();
  return uVar1;
}



void PADCMD_OBJ_2E4(void)

{
  return;
}



void PADCMD_OBJ_2F8(int param_1)

{
  byte bVar1;
  
  bVar1 = *(byte *)(param_1 + 0x46);
  if (bVar1 == 3) {
    PADCMD_OBJ_900(param_1,*(undefined *)(param_1 + 0x47));
    PADCMD_OBJ_390();
    return;
  }
  if (bVar1 < 4) {
    if (bVar1 != 2) {
      PADCMD_OBJ_390();
      return;
    }
    PADCMD_OBJ_8E0(param_1,*(undefined *)(param_1 + 0x47));
    PADCMD_OBJ_390();
    return;
  }
  if (bVar1 != 4) {
    PADCMD_OBJ_390();
    return;
  }
  if (*(char *)(param_1 + 0x48) == '\0') {
    PADCMD_OBJ_920(param_1,*(undefined *)(param_1 + 0x47));
    PADCMD_OBJ_390();
    return;
  }
  PADCMD_OBJ_940();
  return;
}



void PADCMD_OBJ_390(void)

{
  return;
}



undefined4 PADCMD_OBJ_3A0(int *param_1)

{
  undefined uVar1;
  byte bVar2;
  undefined4 uVar3;
  int iVar4;
  undefined *puVar5;
  
  bVar2 = *(byte *)((int)param_1 + 0x46);
  if (bVar2 == 3) {
    puVar5 = (undefined *)(param_1[1] + (uint)*(byte *)((int)param_1 + 0x47) * 5);
    *puVar5 = *(undefined *)(param_1[0xf] + 4);
    puVar5[1] = *(byte *)(param_1[0xf] + 5) & 0x7f;
    puVar5[2] = *(undefined *)(param_1[0xf] + 6);
    puVar5[3] = *(undefined *)(param_1[0xf] + 7);
    puVar5[4] = (char)((int)(uint)*(byte *)(param_1[0xf] + 5) >> 7);
    bVar2 = *(char *)((int)param_1 + 0x47) + 1;
    *(byte *)((int)param_1 + 0x47) = bVar2;
    if (*(byte *)((int)param_1 + 0xe9) <= bVar2) {
      *(undefined *)((int)param_1 + 0x47) = 0;
      *(undefined *)(param_1 + 0x12) = 0;
      uVar3 = PADCMD_OBJ_608();
      return uVar3;
    }
  }
  else if (bVar2 < 4) {
    if (bVar2 != 2) {
      uVar3 = PADCMD_OBJ_60C();
      return uVar3;
    }
    *(ushort *)((uint)*(byte *)((int)param_1 + 0x47) * 2 + *param_1) =
         (ushort)*(byte *)(param_1[0xf] + 5) + (ushort)*(byte *)(param_1[0xf] + 4) * 0x100;
    bVar2 = *(char *)((int)param_1 + 0x47) + 1;
    *(byte *)((int)param_1 + 0x47) = bVar2;
    if (*(byte *)((int)param_1 + 0xe3) <= bVar2) {
      *(undefined *)((int)param_1 + 0x47) = 0;
      uVar3 = PADCMD_OBJ_608();
      return uVar3;
    }
  }
  else {
    if (bVar2 != 4) {
      uVar3 = PADCMD_OBJ_60C();
      return uVar3;
    }
    puVar5 = (undefined *)(param_1[2] + (uint)*(byte *)((int)param_1 + 0x47) * 8);
    if (*(char *)(param_1 + 0x12) == '\0') {
      uVar1 = *(undefined *)(param_1[0xf] + 4);
      *(undefined *)(param_1 + 0x12) = uVar1;
      *puVar5 = uVar1;
      iVar4 = param_1[0xf];
      if (*(char *)((int)param_1 + 0x47) == '\0') {
        uVar3 = PADCMD_OBJ_538();
        return uVar3;
      }
      DAT_80075c78 = (undefined *)(*(int *)(puVar5 + -4) + ((byte)puVar5[-8] + 3 & 0x1fc));
      *(undefined **)(puVar5 + 4) = DAT_80075c78;
      uVar3 = PADCMD_OBJ_560(2,param_1,iVar4 + 5);
      return uVar3;
    }
    puVar5 = (undefined *)(param_1[0xf] + 2);
    iVar4 = 5;
    do {
      iVar4 = iVar4 + -1;
      if (*(char *)(param_1 + 0x12) == '\0') goto PADCMD_OBJ_5CC;
      uVar1 = *puVar5;
      puVar5 = puVar5 + 1;
      *DAT_80075c78 = uVar1;
      DAT_80075c78 = DAT_80075c78 + 1;
      *(char *)(param_1 + 0x12) = *(char *)(param_1 + 0x12) + -1;
    } while (iVar4 != -1);
    if (*(char *)(param_1 + 0x12) == '\0') {
PADCMD_OBJ_5CC:
      bVar2 = *(char *)((int)param_1 + 0x47) + 1;
      *(byte *)((int)param_1 + 0x47) = bVar2;
      if (*(byte *)((int)param_1 + 0xea) <= bVar2) {
        *(undefined *)((int)param_1 + 0x49) = 6;
        *(undefined *)((int)param_1 + 0x46) = 0xfe;
        uVar3 = PADCMD_OBJ_60C();
        return uVar3;
      }
      *(undefined *)(param_1 + 0x12) = 0;
      uVar3 = PADCMD_OBJ_5C4();
      return uVar3;
    }
  }
  return 0;
}



void PADCMD_OBJ_538(int param_1,undefined4 param_2,undefined4 param_3,int param_4)

{
  int in_v0;
  int in_v1;
  
  DAT_80075c78 = in_v1 + in_v0;
  *(int *)(param_4 + 4) = DAT_80075c78;
  PADCMD_OBJ_560(param_1 + -1);
  return;
}



undefined4 PADCMD_OBJ_560(int param_1,int param_2,undefined *param_3)

{
  undefined uVar1;
  byte bVar2;
  undefined4 uVar3;
  
  if (param_1 != -1) {
    do {
      param_1 = param_1 + -1;
      if (*(char *)(param_2 + 0x48) == '\0') goto PADCMD_OBJ_5CC;
      uVar1 = *param_3;
      param_3 = param_3 + 1;
      *DAT_80075c78 = uVar1;
      DAT_80075c78 = DAT_80075c78 + 1;
      *(char *)(param_2 + 0x48) = *(char *)(param_2 + 0x48) + -1;
    } while (param_1 != -1);
  }
  if (*(char *)(param_2 + 0x48) != '\0') {
    return 0;
  }
PADCMD_OBJ_5CC:
  bVar2 = *(char *)(param_2 + 0x47) + 1;
  *(byte *)(param_2 + 0x47) = bVar2;
  if (bVar2 < *(byte *)(param_2 + 0xea)) {
    *(undefined *)(param_2 + 0x48) = 0;
    uVar3 = PADCMD_OBJ_5C4();
    return uVar3;
  }
  *(undefined *)(param_2 + 0x49) = 6;
  *(undefined *)(param_2 + 0x46) = 0xfe;
  uVar3 = PADCMD_OBJ_60C();
  return uVar3;
}



undefined4 PADCMD_OBJ_5C4(void)

{
  return 0;
}



undefined4 PADCMD_OBJ_608(void)

{
  return 1;
}



void PADCMD_OBJ_60C(void)

{
  return;
}



bool _padSetActAlign(int param_1,undefined4 param_2)

{
  int iVar1;
  
  iVar1 = (*DAT_800751d8)();
  if (iVar1 == 0) {
    *(undefined *)(param_1 + 0x46) = 1;
    *(code **)(param_1 + 0x14) = PADCMD_OBJ_67C;
    *(undefined4 *)(param_1 + 0x20) = param_2;
    *(code **)(param_1 + 0x18) = PADCMD_OBJ_698;
  }
  return iVar1 == 0;
}



void PADCMD_OBJ_67C(int param_1)

{
  *(undefined *)(param_1 + 0x36) = 0x4d;
  *(undefined *)(param_1 + 0x35) = 6;
  *(undefined4 *)(param_1 + 0x2c) = *(undefined4 *)(param_1 + 0x20);
  return;
}



undefined4 PADCMD_OBJ_698(int param_1)

{
  byte bVar1;
  undefined4 uVar2;
  int iVar3;
  int iVar4;
  byte *pbVar5;
  int iVar6;
  uint uVar7;
  uint uVar8;
  int iVar9;
  
  uVar7 = 0;
  if (*(char *)(param_1 + 0xe9) != '\0') {
    iVar9 = 0;
    do {
      pbVar5 = *(byte **)(param_1 + 0x20);
      iVar6 = 0;
      iVar3 = 5;
      do {
        bVar1 = *pbVar5;
        pbVar5 = pbVar5 + 1;
        if (bVar1 == uVar7) {
          iVar6 = iVar6 + 1;
        }
        iVar3 = iVar3 + -1;
      } while (-1 < iVar3);
      uVar8 = (uint)*(byte *)(iVar9 + *(int *)(param_1 + 4) + 2);
      pbVar5 = *(byte **)(param_1 + 0x20);
      iVar4 = 0;
      iVar3 = param_1;
      if (uVar8 == 0) {
        uVar8 = 1;
      }
      do {
        bVar1 = *pbVar5;
        pbVar5 = pbVar5 + 1;
        if (bVar1 == uVar7) {
          if (iVar6 < (int)uVar8) {
            *(undefined *)(iVar3 + 0x5d) = 0xff;
            uVar2 = PADCMD_OBJ_72C();
            return uVar2;
          }
          *(char *)(iVar3 + 0x5d) = (char)uVar7;
        }
        iVar4 = iVar4 + 1;
        iVar3 = iVar3 + 1;
      } while (iVar4 < 6);
      uVar7 = uVar7 + 1;
      iVar9 = iVar9 + 5;
    } while ((int)uVar7 < (int)(uint)*(byte *)(param_1 + 0xe9));
  }
  *(undefined *)(param_1 + 0x46) = 0xfe;
  return 0;
}



undefined4 PADCMD_OBJ_72C(int param_1,byte *param_2,int param_3,int param_4)

{
  byte bVar1;
  undefined4 uVar2;
  int iVar3;
  int in_v1;
  byte *pbVar4;
  uint in_t0;
  uint in_t1;
  int in_t2;
  undefined in_t3;
  
  while( true ) {
    do {
      in_v1 = in_v1 + 1;
      param_3 = param_3 + 1;
      if (5 < in_v1) {
        in_t0 = in_t0 + 1;
        in_t2 = in_t2 + 5;
        if ((int)(uint)*(byte *)(param_1 + 0xe9) <= (int)in_t0) {
          *(undefined *)(param_1 + 0x46) = 0xfe;
          return 0;
        }
        pbVar4 = *(byte **)(param_1 + 0x20);
        param_4 = 0;
        iVar3 = 5;
        do {
          bVar1 = *pbVar4;
          pbVar4 = pbVar4 + 1;
          if (bVar1 == in_t0) {
            param_4 = param_4 + 1;
          }
          iVar3 = iVar3 + -1;
        } while (-1 < iVar3);
        in_t1 = (uint)*(byte *)(in_t2 + *(int *)(param_1 + 4) + 2);
        param_2 = *(byte **)(param_1 + 0x20);
        in_v1 = 0;
        param_3 = param_1;
        if (in_t1 == 0) {
          in_t1 = 1;
        }
      }
      bVar1 = *param_2;
      param_2 = param_2 + 1;
    } while (bVar1 != in_t0);
    if (param_4 < (int)in_t1) break;
    *(char *)(param_3 + 0x5d) = (char)in_t0;
  }
  *(undefined *)(param_3 + 0x5d) = in_t3;
  uVar2 = PADCMD_OBJ_72C();
  return uVar2;
}



bool _padSetMainMode(int param_1,char param_2,undefined param_3)

{
  int iVar1;
  
  iVar1 = (*DAT_800751d8)();
  if (iVar1 == 0) {
    *(undefined *)(param_1 + 0x46) = 1;
    *(code **)(param_1 + 0x14) = PADCMD_OBJ_7F8;
    *(code **)(param_1 + 0x18) = PADCMD_OBJ_84C;
    *(char *)(param_1 + 0x51) = param_2;
    *(undefined *)(param_1 + 0x52) = param_3;
    *(bool *)(param_1 + 0x53) = param_2 == *(char *)(param_1 + 0xe4);
  }
  return iVar1 == 0;
}



void PADCMD_OBJ_7F8(int param_1)

{
  if (*(char *)(param_1 + 0x46) == '\x02') {
    *(undefined *)(param_1 + 0x36) = 0x44;
    *(int *)(param_1 + 0x2c) = param_1 + 0x51;
    *(undefined *)(param_1 + 0x35) = 2;
    PADCMD_OBJ_844();
    return;
  }
  if (*(char *)(param_1 + 0x46) != '\x03') {
    PADCMD_OBJ_844();
    return;
  }
  *(undefined *)(param_1 + 0x36) = 0x4d;
  *(int *)(param_1 + 0x2c) = param_1 + 0x5d;
  *(undefined *)(param_1 + 0x35) = 6;
  return;
}



void PADCMD_OBJ_844(void)

{
  return;
}



undefined4 PADCMD_OBJ_84C(int param_1)

{
  undefined4 uVar1;
  
  if (*(char *)(param_1 + 0x53) == '\0') {
    (*DAT_800751c0)();
    return 0;
  }
  if (*(char *)(param_1 + 0x46) == '\x02') {
    uVar1 = PADCMD_OBJ_89C();
    return uVar1;
  }
  *(undefined *)(param_1 + 0x46) = 0xfe;
  uVar1 = PADCMD_OBJ_898();
  return uVar1;
}



undefined4 PADCMD_OBJ_898(void)

{
  return 0;
}



void PADCMD_OBJ_89C(void)

{
  return;
}



void _padCmdParaMode(int param_1,undefined param_2)

{
  *(undefined *)(param_1 + 0x36) = 0x43;
  *(int *)(param_1 + 0x2c) = param_1 + 0x24;
  *(undefined *)(param_1 + 0x24) = param_2;
  *(undefined *)(param_1 + 0x35) = 1;
  return;
}



void PADCMD_OBJ_8CC(int param_1)

{
  *(undefined *)(param_1 + 0x36) = 0x45;
  *(undefined4 *)(param_1 + 0x2c) = 0;
  *(undefined *)(param_1 + 0x35) = 0;
  return;
}



void PADCMD_OBJ_8E0(int param_1,undefined param_2)

{
  *(undefined *)(param_1 + 0x36) = 0x4c;
  *(int *)(param_1 + 0x2c) = param_1 + 0x24;
  *(undefined *)(param_1 + 0x24) = param_2;
  *(undefined *)(param_1 + 0x35) = 1;
  return;
}



void PADCMD_OBJ_900(int param_1,undefined param_2)

{
  *(undefined *)(param_1 + 0x36) = 0x46;
  *(int *)(param_1 + 0x2c) = param_1 + 0x24;
  *(undefined *)(param_1 + 0x24) = param_2;
  *(undefined *)(param_1 + 0x35) = 1;
  return;
}



void PADCMD_OBJ_920(int param_1,undefined param_2)

{
  *(undefined *)(param_1 + 0x36) = 0x47;
  *(int *)(param_1 + 0x2c) = param_1 + 0x24;
  *(undefined *)(param_1 + 0x24) = param_2;
  *(undefined *)(param_1 + 0x35) = 1;
  return;
}



void PADCMD_OBJ_940(int param_1)

{
  *(undefined *)(param_1 + 0x36) = 0x4b;
  *(undefined4 *)(param_1 + 0x2c) = 0;
  *(undefined *)(param_1 + 0x35) = 0;
  return;
}



void PADIF_OBJ_0(undefined4 param_1)

{
  DAT_8007523c = (*DAT_800751d4)();
  _padSioRW(param_1,0xfffffffe);
  return;
}



void PADIF_OBJ_40(int param_1)

{
  undefined uVar1;
  
  if ((DAT_800751fc == DAT_8007520c) && (DAT_800751f8 != 0)) {
    (*DAT_800751ec)();
    (*DAT_800751e8)();
  }
  if (DAT_8007523c != 0) {
    (*DAT_800751d4)(*(undefined4 *)(param_1 + 0xc));
    (*DAT_800751d4)(*(int *)(param_1 + 0xc) + 0xf0);
  }
  if (*(char *)(param_1 + 0x36) == '\0') {
    uVar1 = 0x42;
  }
  else {
    uVar1 = *(undefined *)(param_1 + 0x36);
  }
  _padSioRW2(param_1,uVar1);
  return;
}



uint PADIF_OBJ_118(int param_1)

{
  uint uVar1;
  uint uVar2;
  undefined4 uVar3;
  
  if (DAT_8007523c != 0) {
    (*DAT_800751d4)(*(int *)(param_1 + 0xc) + 0x1e0);
    (*DAT_800751d4)(*(int *)(param_1 + 0xc) + 0x2d0);
  }
  uVar3 = 0;
  if (*(char *)(param_1 + 0x36) == '\0') {
    uVar3 = DAT_80075208;
  }
  uVar1 = _padSioRW2(param_1,uVar3);
  if (-1 < (int)uVar1) {
    uVar2 = uVar1 & 0xf;
    if ((uVar1 & 0xf0) == 0) {
      uVar1 = 0xfffffff7;
    }
    else {
      DAT_80075234 = uVar2 << 1;
      uVar1 = 0;
      if (uVar2 == 0) {
        DAT_80075234 = 0x20;
        uVar1 = 0;
      }
    }
  }
  return uVar1;
}



int PADIF_OBJ_1D8(int param_1)

{
  undefined uVar1;
  int iVar2;
  int iVar3;
  bool bVar4;
  
  bVar4 = false;
  if (**(byte **)(param_1 + 0x3c) >> 4 == 8) {
    bVar4 = *(char *)(param_1 + 0x36) == '\0';
  }
  uVar1 = (*DAT_800751c4)(param_1,bVar4);
  iVar2 = _padSioRW2(param_1,uVar1);
  iVar3 = iVar2;
  if (((iVar2 != 0x5a) && (iVar2 != 0)) && (iVar3 = -9, iVar2 < 0)) {
    iVar3 = iVar2;
  }
  return iVar3;
}



int PADIF_OBJ_264(int param_1)

{
  byte bVar1;
  undefined uVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  int iVar6;
  int unaff_s3;
  bool bVar7;
  
  (*DAT_800751c8)();
  bVar7 = false;
  if ((DAT_80075208 != 0) && ((int)(uint)**(byte **)(param_1 + 0x3c) >> 4 == 8)) {
    bVar7 = *(char *)(param_1 + 0x36) == '\0';
  }
  if (bVar7 != false) {
    iVar4 = -1;
    iVar6 = -0xf0;
    do {
      DAT_80075234 = DAT_80075234 + -1;
      if (DAT_80075234 < 1) break;
      if (-1 < iVar4) {
        (*DAT_800751c8)(*(int *)(param_1 + 0xc) + iVar6);
      }
      uVar2 = (*DAT_800751c4)(param_1,1);
      iVar3 = _padSioRW2(param_1,uVar2);
      if (iVar3 < 0) {
        return iVar3;
      }
      setRC2wait(0x3c);
      iVar3 = _padClrIntSio0();
      iVar4 = iVar4 + 1;
      if (iVar3 == 0) {
        return -3;
      }
      iVar6 = iVar6 + 0xf0;
    } while (iVar4 < 4);
  }
  if (1 < DAT_80075234) {
    piVar5 = (int *)(&DAT_80075214 + (uint)(DAT_800751fc == 0) * 4);
    iVar4 = (uint)(DAT_800751fc == 0) * 0xf0;
    do {
      iVar6 = *piVar5;
      if (iVar6 < 0) break;
      if (0 < iVar6) {
        unaff_s3 = *(int *)(iVar4 + DAT_800751f0 + 0xc) + iVar6 * 0xf0 + -0xf0;
        (*DAT_800751dc)(unaff_s3);
      }
      iVar6 = *piVar5;
      if (iVar6 == 3) {
        (*DAT_800751dc)(unaff_s3 + -0xf0);
        iVar6 = 1;
LAB_8006aec8:
        *piVar5 = iVar6;
      }
      else if (iVar6 < 4) {
        if ((iVar6 < 2) && (-1 < iVar6)) {
          unaff_s3 = DAT_800751f0 + iVar4;
          (*DAT_800751dc)(unaff_s3);
          (*DAT_800751e0)(unaff_s3);
          iVar6 = -1;
          goto LAB_8006aec8;
        }
      }
      else if (iVar6 == 4) {
        *piVar5 = 3;
      }
      uVar2 = (*DAT_800751c4)(param_1,bVar7);
      iVar6 = _padSioRW(param_1,uVar2);
      if (iVar6 < 0) {
        return iVar6;
      }
      setRC2wait(0x3c);
      iVar6 = _padClrIntSio0();
      if (iVar6 == 0) {
        return -3;
      }
      DAT_80075234 = DAT_80075234 + -1;
    } while (1 < DAT_80075234);
  }
  while( true ) {
    DAT_80075234 = DAT_80075234 + -1;
    if (DAT_80075234 < 1) {
      _padWaitRXready();
      bVar1 = *(byte *)(param_1 + 0x44);
      *(byte *)(param_1 + 0x44) = bVar1 + 1;
      *(undefined *)((uint)bVar1 + *(int *)(param_1 + 0x3c)) = *PTR_JOY_MCD_DATA_80075238;
      (*DAT_800751bc)(0);
      return 0;
    }
    uVar2 = (*DAT_800751c4)(param_1,bVar7);
    iVar4 = _padSioRW(param_1,uVar2);
    if (iVar4 < 0) break;
    setRC2wait(0x3c);
    iVar4 = _padClrIntSio0();
    if (iVar4 == 0) {
      return -3;
    }
  }
  return iVar4;
}



void PadInitDirect(uchar *param_1,uchar *param_2)

{
  int iVar1;
  undefined4 *puVar2;
  undefined *puVar3;
  undefined *puVar4;
  undefined *puVar5;
  int iVar6;
  undefined *puVar7;
  
  DAT_800751f4 = 0;
  DAT_80075208 = 0;
  _padInitDirSeq();
  puVar7 = &DAT_80075d18;
  DAT_800751bc = PADPORTD_OBJ_1C8;
  DAT_800751c0 = PADPORTD_OBJ_160;
  DAT_800751c4 = PADPORTD_OBJ_2CC;
  DAT_800751c8 = PADPORTD_OBJ_388;
  DAT_800751cc = PADPORTD_OBJ_604;
  DAT_800751d0 = PADPORTD_OBJ_63C;
  DAT_800751f0 = &DAT_80075d18;
  DAT_800751e0 = PADPORTD_OBJ_2BC;
  bzero(&DAT_80075d18,0x1e0);
  iVar6 = 0;
  puVar2 = &DAT_80075d58;
  puVar5 = &DAT_80075cd0;
  puVar4 = &DAT_80075c88;
  DAT_80075d48 = param_1;
  DAT_80075e38 = param_2;
  do {
    puVar3 = puVar7 + 0x5d;
    puVar2[-0xd] = 0;
    puVar2[-0xc] = puVar7;
    *(undefined *)puVar2[-4] = 0xff;
    iVar1 = 5;
    *(undefined *)(puVar2[-4] + 1) = 0;
    puVar2[-1] = puVar4;
    *puVar2 = puVar5;
    do {
      *puVar3 = 0xff;
      iVar1 = iVar1 + -1;
      puVar3 = puVar3 + 1;
    } while (-1 < iVar1);
    puVar5 = puVar5 + 0x23;
    puVar4 = puVar4 + 0x23;
    iVar6 = iVar6 + 1;
    puVar2 = puVar2 + 0x3c;
    puVar7 = puVar7 + 0xf0;
  } while (iVar6 < 2);
  _padSetVsyncParam();
  DAT_800751f4 = 1;
  return;
}



void PADPORTD_OBJ_160(undefined4 *param_1)

{
  int iVar1;
  undefined *puVar2;
  
  if (*(char *)((int)param_1 + 0x49) != '\0') {
    puVar2 = (undefined *)((int)param_1 + 0x5d);
    iVar1 = 5;
    *(undefined *)((int)param_1 + 0x49) = 0;
    *(undefined *)((int)param_1 + 0x46) = 0;
    *(undefined2 *)((int)param_1 + 0xe6) = 0;
    param_1[5] = 0;
    param_1[6] = 0;
    *(undefined *)((int)param_1 + 0xe3) = 0;
    *(undefined *)(param_1 + 0x39) = 0;
    *(undefined2 *)((int)param_1 + 0xe6) = 0;
    *(undefined *)((int)param_1 + 0xe9) = 0;
    *(undefined *)((int)param_1 + 0xea) = 0;
    *param_1 = 0;
    param_1[1] = 0;
    param_1[2] = 0;
    do {
      *puVar2 = 0xff;
      iVar1 = iVar1 + -1;
      puVar2 = puVar2 + 1;
    } while (-1 < iVar1);
  }
  return;
}



void PADPORTD_OBJ_1C8(int param_1)

{
  int iVar1;
  
  iVar1 = DAT_800751fc * 0xf0;
  if (param_1 != -9) {
    if (param_1 == 0) {
      *(undefined4 *)(&DAT_80075214 + DAT_800751fc * 4) = 0;
      PADPORTD_OBJ_23C();
      return;
    }
    _dirFailAuto(&DAT_80075d18 + iVar1);
    PADPORTD_OBJ_2BC(&DAT_80075d18 + iVar1);
  }
  DAT_80075200 = 0;
  *(undefined2 *)(PTR_JOY_MCD_DATA_80075254 + 10) = 0;
  DAT_800751fc = DAT_800751fc + 1;
  if (DAT_80075210 < DAT_800751fc) {
    return;
  }
  _padInitSioMode(&DAT_80075d18 + DAT_800751fc * 0xf0);
  PADPORTD_OBJ_298();
  return;
}



// WARNING: Removing unreachable block (ram,0x8006b208)
// WARNING: Removing unreachable block (ram,0x8006b228)
// WARNING: Removing unreachable block (ram,0x8006b230)
// WARNING: Removing unreachable block (ram,0x8006b23c)

void PADPORTD_OBJ_23C(void)

{
  int unaff_s1;
  
  DAT_80075200 = 0;
  *(undefined2 *)(PTR_JOY_MCD_DATA_80075254 + 10) = 0;
  DAT_800751fc = DAT_800751fc + 1;
  if (DAT_80075210 < DAT_800751fc) {
    return;
  }
  _padInitSioMode(DAT_800751fc * 0xf0 + unaff_s1);
  PADPORTD_OBJ_298();
  return;
}



void PADPORTD_OBJ_298(undefined4 param_1,int param_2)

{
  int in_v0;
  int iVar1;
  int unaff_s1;
  int unaff_s2;
  int unaff_s3;
  
  while( true ) {
    if (in_v0 != 0) {
      return;
    }
    iVar1 = DAT_800751fc * 0xf0 + unaff_s1;
    if (param_2 != unaff_s3) {
      if (param_2 == 0) {
        *(undefined4 *)(DAT_800751fc * 4 + unaff_s2) = 0;
        PADPORTD_OBJ_23C();
        return;
      }
      _dirFailAuto(iVar1);
      PADPORTD_OBJ_2BC(iVar1);
    }
    DAT_80075200 = 0;
    *(undefined2 *)(PTR_JOY_MCD_DATA_80075254 + 10) = 0;
    DAT_800751fc = DAT_800751fc + 1;
    in_v0 = 1;
    if (DAT_800751fc <= DAT_80075210) break;
    param_2 = 0xffff;
  }
  _padInitSioMode(DAT_800751fc * 0xf0 + unaff_s1);
  PADPORTD_OBJ_298();
  return;
}



void PADPORTD_OBJ_2BC(int param_1)

{
  undefined uVar1;
  
  uVar1 = *(undefined *)(param_1 + 0x36);
  *(undefined *)(param_1 + 0x36) = 0;
  *(undefined *)(param_1 + 0x37) = uVar1;
  return;
}



undefined4 PADPORTD_OBJ_2CC(int param_1)

{
  undefined4 uVar1;
  int iVar2;
  
  iVar2 = *(byte *)(param_1 + 0x45) - 3;
  if (*(char *)(param_1 + 0x36) == '\0') {
    if (((5 < iVar2) || (uVar1 = 0, *(char *)(param_1 + iVar2 + 0x57) != '\0')) &&
       (uVar1 = 0, iVar2 < (int)(uint)*(byte *)(param_1 + 0x34))) {
      uVar1 = PADPORTD_OBJ_380();
      return uVar1;
    }
  }
  else {
    if (*(char *)(param_1 + 0x36) != 'M') {
      uVar1 = PADPORTD_OBJ_35C();
      return uVar1;
    }
    uVar1 = 0xff;
    if (iVar2 < (int)(uint)*(byte *)(param_1 + 0x35)) {
      uVar1 = PADPORTD_OBJ_330();
      return uVar1;
    }
  }
  return uVar1;
}



void PADPORTD_OBJ_330(void)

{
  PADPORTD_OBJ_380();
  return;
}



undefined PADPORTD_OBJ_35C(int param_1)

{
  undefined uVar1;
  int in_v1;
  
  uVar1 = 0;
  if (in_v1 < (int)(uint)*(byte *)(param_1 + 0x35)) {
    uVar1 = *(undefined *)(*(int *)(param_1 + 0x2c) + in_v1);
  }
  return uVar1;
}



void PADPORTD_OBJ_380(void)

{
  return;
}



// WARNING: Removing unreachable block (ram,0x8006b474)
// WARNING: Removing unreachable block (ram,0x8006b4a0)
// WARNING: Removing unreachable block (ram,0x8006b4b4)
// WARNING: Removing unreachable block (ram,0x8006b4c0)
// WARNING: Removing unreachable block (ram,0x8006b4d0)
// WARNING: Removing unreachable block (ram,0x8006b4e0)
// WARNING: Removing unreachable block (ram,0x8006b4e4)

void PADPORTD_OBJ_388(int param_1)

{
  int iVar1;
  byte *pbVar2;
  byte *pbVar3;
  byte bVar4;
  uint uVar5;
  uint uVar6;
  int iVar7;
  
  bzero((uchar *)(param_1 + 0x57),6);
  if ((*(short *)(param_1 + 0xe6) == 0) || (*(int *)(param_1 + 0x28) == 0)) {
    if (((*(byte *)(param_1 + 0xe8) - 4 < 2) || (*(byte *)(param_1 + 0xe8) == 7)) &&
       ((*(short *)(param_1 + 0xe6) == 0 && (1 < *(byte *)(param_1 + 0x34))))) {
      if ((((**(byte **)(param_1 + 0x28) & 0xc0) == 0x40) &&
          (((*(byte **)(param_1 + 0x28))[1] & 1) != 0)) && (vibrationRelated + 10 < 0x3d)) {
        *(undefined *)(param_1 + 0x58) = 1;
        *(undefined *)(param_1 + 0x57) = 1;
        vibrationRelated = vibrationRelated + 10;
        PADPORTD_OBJ_5F4();
        return;
      }
    }
    else {
      if (*(char *)(param_1 + 0xe8) == '\x03') {
        *(undefined *)(param_1 + 0x57) = 1;
        PADPORTD_OBJ_5F4();
        return;
      }
      if (*(short *)(param_1 + 0xe6) == 0) {
        iVar7 = 5;
        param_1 = param_1 + 5;
        do {
          *(undefined *)(param_1 + 0x57) = 1;
          iVar7 = iVar7 + -1;
          param_1 = param_1 + -1;
        } while (-1 < iVar7);
      }
    }
  }
  else {
    uVar6 = 6;
    if (*(byte *)(param_1 + 0x34) < 7) {
      uVar6 = (uint)*(byte *)(param_1 + 0x34);
    }
    uVar5 = 0;
    if (*(char *)(param_1 + 0xe9) != '\0') {
      iVar7 = 0;
      do {
        bVar4 = 1;
        if (*(char *)(iVar7 + *(int *)(param_1 + 4) + 2) != '\0') {
          bVar4 = 0xff;
        }
        pbVar3 = (byte *)(param_1 + 0x5d);
        pbVar2 = *(byte **)(param_1 + 0x28);
        iVar1 = 0;
        if (uVar6 != 0) {
          do {
            if ((*pbVar3 == uVar5) && ((*pbVar2 & bVar4) != 0)) {
              PADPORTD_OBJ_45C(pbVar2,pbVar3,1);
              return;
            }
            pbVar3 = pbVar3 + 1;
            iVar1 = iVar1 + 1;
            pbVar2 = pbVar2 + 1;
          } while (iVar1 < (int)uVar6);
        }
        uVar5 = uVar5 + 1;
        iVar7 = iVar7 + 5;
        if ((int)(uint)*(byte *)(param_1 + 0xe9) <= (int)uVar5) {
          PADPORTD_OBJ_5F4();
          return;
        }
      } while( true );
    }
  }
  return;
}



// WARNING: Removing unreachable block (ram,0x8006b4c0)
// WARNING: Removing unreachable block (ram,0x8006b4d0)
// WARNING: Removing unreachable block (ram,0x8006b4e0)
// WARNING: Removing unreachable block (ram,0x8006b4e4)

void PADPORTD_OBJ_45C(undefined4 param_1,undefined4 param_2,int param_3)

{
  int iVar1;
  byte *pbVar2;
  byte *pbVar3;
  byte bVar4;
  uint in_t0;
  int in_t1;
  int in_t2;
  int unaff_s0;
  
  do {
    do {
      if ((param_3 != 0) &&
         (iVar1 = vibrationRelated + (uint)*(byte *)(in_t2 + *(int *)(unaff_s0 + 4) + 3),
         iVar1 < 0x3d)) {
        vibrationRelated = iVar1;
        PADPORTD_OBJ_4A8();
        return;
      }
      in_t0 = in_t0 + 1;
      in_t2 = in_t2 + 5;
      if ((int)(uint)*(byte *)(unaff_s0 + 0xe9) <= (int)in_t0) {
        PADPORTD_OBJ_5F4();
        return;
      }
      param_3 = 0;
      bVar4 = 1;
      if (*(char *)(in_t2 + *(int *)(unaff_s0 + 4) + 2) != '\0') {
        bVar4 = 0xff;
      }
      pbVar3 = (byte *)(unaff_s0 + 0x5d);
      pbVar2 = *(byte **)(unaff_s0 + 0x28);
      iVar1 = 0;
    } while (in_t1 == 0);
    do {
      if ((*pbVar3 == in_t0) && ((*pbVar2 & bVar4) != 0)) {
        PADPORTD_OBJ_45C(pbVar2,pbVar3,1);
        return;
      }
      pbVar3 = pbVar3 + 1;
      iVar1 = iVar1 + 1;
      pbVar2 = pbVar2 + 1;
    } while (iVar1 < in_t1);
  } while( true );
}



// WARNING: Removing unreachable block (ram,0x8006b474)
// WARNING: Removing unreachable block (ram,0x8006b4a0)
// WARNING: Removing unreachable block (ram,0x8006b4b4)

void PADPORTD_OBJ_4A8(undefined4 param_1,undefined4 param_2,int param_3)

{
  int iVar1;
  undefined *puVar2;
  byte *pbVar3;
  byte *pbVar4;
  byte bVar5;
  uint in_t0;
  int in_t1;
  int in_t2;
  undefined in_t3;
  int unaff_s0;
  
  if (param_3 != 0) {
    pbVar4 = (byte *)(unaff_s0 + 0x5d);
    puVar2 = (undefined *)(unaff_s0 + 0x57);
    iVar1 = 0;
    if (in_t1 != 0) {
      do {
        bVar5 = *pbVar4;
        pbVar4 = pbVar4 + 1;
        if (bVar5 == in_t0) {
          *puVar2 = in_t3;
        }
        iVar1 = iVar1 + 1;
        puVar2 = puVar2 + 1;
      } while (iVar1 < in_t1);
    }
  }
  do {
    do {
      in_t0 = in_t0 + 1;
      in_t2 = in_t2 + 5;
      if ((int)(uint)*(byte *)(unaff_s0 + 0xe9) <= (int)in_t0) {
        PADPORTD_OBJ_5F4();
        return;
      }
      bVar5 = 1;
      if (*(char *)(in_t2 + *(int *)(unaff_s0 + 4) + 2) != '\0') {
        bVar5 = 0xff;
      }
      pbVar3 = (byte *)(unaff_s0 + 0x5d);
      pbVar4 = *(byte **)(unaff_s0 + 0x28);
      iVar1 = 0;
    } while (in_t1 == 0);
    do {
      if ((*pbVar3 == in_t0) && ((*pbVar4 & bVar5) != 0)) {
        PADPORTD_OBJ_45C(pbVar4,pbVar3,1);
        return;
      }
      pbVar3 = pbVar3 + 1;
      iVar1 = iVar1 + 1;
      pbVar4 = pbVar4 + 1;
    } while (iVar1 < in_t1);
  } while( true );
}



void PADPORTD_OBJ_5F4(void)

{
  return;
}



int PADPORTD_OBJ_604(undefined *param_1)

{
  undefined *puVar1;
  int iVar2;
  int iVar3;
  
  iVar2 = 0;
  iVar3 = 0x10;
  puVar1 = &DAT_80075d18;
  do {
    if (param_1 == puVar1) {
      return iVar3;
    }
    iVar3 = iVar3 + 0x10;
    iVar2 = iVar2 + 1;
    puVar1 = puVar1 + 0xf0;
  } while (iVar2 < 2);
  return 0xff;
}



undefined * PADPORTD_OBJ_63C(uint param_1)

{
  undefined *puVar1;
  
  puVar1 = &DAT_80075d18;
  if ((param_1 & 0xf0) != 0) {
    puVar1 = &DAT_80075e08;
  }
  return puVar1;
}



void * bzero(uchar *param_1,int param_2)

{
  void *pvVar1;
  uchar *puVar2;
  uchar *puVar3;
  
  puVar2 = (uchar *)0x0;
  if (param_1 != (uchar *)0x0) {
    puVar3 = param_1;
    if (param_2 < 1) {
      pvVar1 = (void *)BZERO_OBJ_28();
      return pvVar1;
    }
    do {
      *puVar3 = '\0';
      param_2 = param_2 + -1;
      puVar3 = puVar3 + 1;
      puVar2 = param_1;
    } while (0 < param_2);
  }
  return puVar2;
}



void BZERO_OBJ_28(void)

{
  return;
}



void _padInitDirSeq(void)

{
  DAT_800751d4 = PADSEQD_OBJ_34;
  DAT_800751d8 = PADSEQD_OBJ_448;
  DAT_800751dc = PADSEQD_OBJ_108;
  return;
}



undefined4 PADSEQD_OBJ_34(int param_1)

{
  byte bVar1;
  undefined4 uVar2;
  
  if ((**(char **)(param_1 + 0x3c) == -0xd) && (*(char *)(param_1 + 0xe8) == '\0')) {
PADSEQD_OBJ_C0:
    _padCmdParaMode(param_1,0);
    uVar2 = PADSEQD_OBJ_F8();
    return uVar2;
  }
  bVar1 = *(byte *)(param_1 + 0x46);
  if (bVar1 == 1) {
    _padCmdParaMode(param_1,1);
    uVar2 = PADSEQD_OBJ_F8();
    return uVar2;
  }
  if (bVar1 < 2) {
    if (bVar1 != 0) {
      uVar2 = PADSEQD_OBJ_D0();
      return uVar2;
    }
  }
  else {
    if (bVar1 == 0xfe) goto PADSEQD_OBJ_C0;
    if (bVar1 != 0xff) {
      uVar2 = PADSEQD_OBJ_D0();
      return uVar2;
    }
  }
  return 0;
}



undefined4 PADSEQD_OBJ_D0(int param_1)

{
  undefined4 uVar1;
  
  if (*(code **)(param_1 + 0x14) != (code *)0x0) {
    (**(code **)(param_1 + 0x14))();
    uVar1 = PADSEQD_OBJ_F8();
    return uVar1;
  }
  _padSendAtLoadInfo();
  return 0;
}



undefined4 PADSEQD_OBJ_F8(void)

{
  return 0;
}



void PADSEQD_OBJ_108(int param_1)

{
  char cVar1;
  byte bVar2;
  int iVar3;
  
  cVar1 = *(char *)(param_1 + 0xe8);
  bVar2 = **(byte **)(param_1 + 0x3c) >> 4;
  *(byte *)(param_1 + 0xe8) = bVar2;
  if (bVar2 == 0xf) {
    *(char *)(param_1 + 0xe8) = cVar1;
    PADSEQD_OBJ_1A0();
    return;
  }
  **(undefined **)(param_1 + 0x30) = 0;
  *(undefined *)(*(int *)(param_1 + 0x30) + 1) = **(undefined **)(param_1 + 0x3c);
  iVar3 = 2;
  if (2 < *(byte *)(param_1 + 0x44)) {
    do {
      *(undefined *)(*(int *)(param_1 + 0x30) + iVar3) =
           *(undefined *)(*(int *)(param_1 + 0x3c) + iVar3);
      iVar3 = iVar3 + 1;
    } while (iVar3 < (int)(uint)*(byte *)(param_1 + 0x44));
  }
  if (((*(char *)(*(int *)(param_1 + 0x3c) + 1) == '\0') &&
      (((*(char *)(param_1 + 0x46) != '\x01' || (*(int *)(param_1 + 0x14) != 0)) &&
       (*(char *)(param_1 + 0x50) == '\0')))) ||
     ((((iVar3 = PADSEQD_OBJ_448(param_1), iVar3 == 0 && (*(char *)(param_1 + 0x37) == '\0')) &&
       (*(char *)(param_1 + 0x4a) == '\0')) && (*(char *)(param_1 + 0xe8) != cVar1)))) {
    (*DAT_800751c0)(param_1);
  }
  *(undefined *)(param_1 + 0x4a) = 0;
  if (((byte)(*(char *)(param_1 + 0x46) - 2U) < 0xfc) && (**(char **)(param_1 + 0x3c) != -0xd)) {
    (*DAT_800751c0)(param_1);
  }
  bVar2 = *(byte *)(param_1 + 0x46);
  if (((bVar2 == 0) || (bVar2 == 0xff)) || (*(char *)(param_1 + 0x36) != '\0')) {
    if (bVar2 == 1) {
      *(undefined *)(param_1 + 0x47) = 0;
      *(char *)(param_1 + 0x46) = *(char *)(param_1 + 0x46) + '\x01';
      PADSEQD_OBJ_358();
      return;
    }
    if (bVar2 < 2) {
      if (bVar2 != 0) {
        PADSEQD_OBJ_320();
        return;
      }
      if (*(char *)(param_1 + 0xe8) != '\0') {
        *(undefined *)(param_1 + 0x49) = 1;
        PADSEQD_OBJ_30C();
        return;
      }
    }
    else {
      if (bVar2 == 0xfe) {
        *(undefined *)(param_1 + 0x46) = 0xff;
        PADSEQD_OBJ_358();
        return;
      }
      if (bVar2 != 0xff) {
        PADSEQD_OBJ_320();
        return;
      }
    }
  }
  return;
}



void PADSEQD_OBJ_1A0(void)

{
  byte bVar1;
  int iVar2;
  int unaff_s0;
  uint unaff_s1;
  
  if (((*(char *)(*(int *)(unaff_s0 + 0x3c) + 1) == '\0') &&
      (((*(char *)(unaff_s0 + 0x46) != '\x01' || (*(int *)(unaff_s0 + 0x14) != 0)) &&
       (*(char *)(unaff_s0 + 0x50) == '\0')))) ||
     ((((iVar2 = PADSEQD_OBJ_448(), iVar2 == 0 && (*(char *)(unaff_s0 + 0x37) == '\0')) &&
       (*(char *)(unaff_s0 + 0x4a) == '\0')) && (*(byte *)(unaff_s0 + 0xe8) != unaff_s1)))) {
    (*DAT_800751c0)();
  }
  *(undefined *)(unaff_s0 + 0x4a) = 0;
  if (((byte)(*(char *)(unaff_s0 + 0x46) - 2U) < 0xfc) && (**(char **)(unaff_s0 + 0x3c) != -0xd)) {
    (*DAT_800751c0)();
  }
  bVar1 = *(byte *)(unaff_s0 + 0x46);
  if (((bVar1 == 0) || (bVar1 == 0xff)) || (*(char *)(unaff_s0 + 0x36) != '\0')) {
    if (bVar1 == 1) {
      *(undefined *)(unaff_s0 + 0x47) = 0;
      *(char *)(unaff_s0 + 0x46) = *(char *)(unaff_s0 + 0x46) + '\x01';
      PADSEQD_OBJ_358();
      return;
    }
    if (bVar1 < 2) {
      if (bVar1 != 0) {
        PADSEQD_OBJ_320();
        return;
      }
      if (*(char *)(unaff_s0 + 0xe8) != '\0') {
        *(undefined *)(unaff_s0 + 0x49) = 1;
        PADSEQD_OBJ_30C();
        return;
      }
    }
    else {
      if (bVar1 == 0xfe) {
        *(undefined *)(unaff_s0 + 0x46) = 0xff;
        PADSEQD_OBJ_358();
        return;
      }
      if (bVar1 != 0xff) {
        PADSEQD_OBJ_320();
        return;
      }
    }
  }
  return;
}



void PADSEQD_OBJ_30C(void)

{
  char in_v0;
  int unaff_s0;
  
  *(char *)(unaff_s0 + 0x46) = in_v0 + '\x01';
  PADSEQD_OBJ_358();
  return;
}



void PADSEQD_OBJ_320(void)

{
  char cVar1;
  int unaff_s0;
  
  if (*(code **)(unaff_s0 + 0x18) != (code *)0x0) {
    (**(code **)(unaff_s0 + 0x18))();
    PADSEQD_OBJ_348();
    return;
  }
  cVar1 = _padRecvAtLoadInfo();
  *(char *)(unaff_s0 + 0x46) = *(char *)(unaff_s0 + 0x46) + cVar1;
  return;
}



void PADSEQD_OBJ_348(void)

{
  char in_v0;
  int unaff_s0;
  
  *(char *)(unaff_s0 + 0x46) = *(char *)(unaff_s0 + 0x46) + in_v0;
  return;
}



void PADSEQD_OBJ_358(void)

{
  return;
}



void _dirFailAuto(int param_1)

{
  byte bVar1;
  
  *(int *)(param_1 + 0x4c) = *(int *)(param_1 + 0x4c) + 1;
  if (*(char *)(param_1 + 0x46) == '\0') {
PADSEQD_OBJ_404:
    if (**(char **)(param_1 + 0x3c) != -0xd) {
      **(undefined **)(param_1 + 0x30) = 0xff;
      *(undefined *)(*(int *)(param_1 + 0x30) + 1) = 0;
      *(undefined *)(param_1 + 0xe8) = 0;
    }
    return;
  }
  if (*(char *)(param_1 + 0x46) == '\x01') {
    bVar1 = *(byte *)(param_1 + 0x4a);
    if (1 < bVar1) {
      *(undefined *)(param_1 + 0x49) = 2;
      *(undefined *)(param_1 + 0x46) = 0xff;
      PADSEQD_OBJ_438();
      return;
    }
  }
  else {
    bVar1 = *(byte *)(param_1 + 0x4a);
    if (3 < bVar1) {
      if (*(char *)(param_1 + 0x49) != '\0') {
        (*DAT_800751c0)(param_1);
      }
      goto PADSEQD_OBJ_404;
    }
  }
  *(byte *)(param_1 + 0x4a) = bVar1 + 1;
  PADSEQD_OBJ_438();
  return;
}



void PADSEQD_OBJ_438(void)

{
  return;
}



undefined4 PADSEQD_OBJ_448(int param_1)

{
  undefined4 uVar1;
  
  if ((*(short *)(param_1 + 0xe6) == 0) || (uVar1 = 0, *(char *)(param_1 + 0x46) != -1)) {
    uVar1 = 1;
  }
  return uVar1;
}



void setRC2wait(undefined4 param_1)

{
  _waitTime = param_1;
  _startTime = (uint)(ushort)TMR_SYSCLOCK_VAL;
  return;
}



bool chkRC2wait(void)

{
  uint uVar1;
  
  uVar1 = (uint)(ushort)TMR_SYSCLOCK_VAL;
  if (uVar1 < _startTime) {
    if ((ushort)TMR_SYSCLOCK_MAX == 0) {
      uVar1 = uVar1 + 0x10000;
    }
    else {
      uVar1 = uVar1 + (ushort)TMR_SYSCLOCK_MAX;
    }
  }
  if (((ushort)TMR_SYSCLOCK_MODE & 0x200) == 0) {
    uVar1 = uVar1 - _startTime >> 3;
  }
  else {
    uVar1 = uVar1 - _startTime;
  }
  return _waitTime <= uVar1;
}



void Artisans_InitBalloonist(int **param_1)

{
  int aiStack_20 [4];
  
  gameState = GAMESTATE_BALLOONIST;
  balloonistState = 0;
  DAT_800777ec = 0;
  balloonistCursorPlacement = 0;
                    // WARNING: Read-only address (ram,0x8007784c) is written
  isInDragonState = 1;
  DAT_8007579c = 1;
  DAT_80077850 = ptr_startOfCurrentLevelMobys + **param_1 * 0x58;
  DAT_8007784c = param_1;
  DAT_80077820 = ATan2Scaled(cameraPosition.x - (int)param_1[3],cameraPosition.y - (int)param_1[4],1
                            );
  Vec3Subtract(aiStack_20,&cameraPosition.x,(int *)(param_1 + 3));
  DAT_80077824 = Vec3CalculateLengthE(aiStack_20,flag2D);
  DAT_80077828 = cameraPosition.z;
  DAT_8007783c = 0x52e;
  DAT_80077838 = (uint)*(byte *)((int)param_1 + 0x46) * 0x10 - 0x312 & 0xfff;
  DAT_80077840 = (int)param_1[5] + 0x58f;
  return;
}



void Artisans_BalloonistStayHere(void)

{
  ExitFairyOrBalloonist();
  spyro.headAngle.pitch = 0;
  spyro.headAngle.pad2 = 0;
  spyro.unkown1._1_1_ = 0;
  if (ptr_SparxMoby != 0) {
    *(undefined *)(ptr_SparxMoby + 0x50) = 0x10;
  }
  return;
}



void Artisans_BalloonistChecksAndUpdates(void)

{
  undefined4 uVar1;
  LevelIDS LVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int *outputArray;
  uint local_78;
  uint local_74;
  int local_70;
  short local_68;
  short local_66;
  short local_64;
  uint local_60;
  uint local_5c;
  int local_58;
  uint local_50;
  uint local_4c;
  int local_48;
  uint local_40;
  uint local_3c;
  int local_38;
  uint local_30;
  uint local_2c;
  int local_28;
  
  if (balloonistState < 4) {
    DAT_800700f8 = 0;
    DAT_800700f4 = DAT_8007784c;
    FUN_800522c0(&DAT_800700f4,0);
  }
  switch(balloonistState) {
  case 0:
    if (0x5f < DAT_800777ec) {
      iVar6 = CosScaled(DAT_80077838);
      cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar6 * DAT_8007783c >> 0xc);
      iVar6 = SinScaled(DAT_80077838);
      cameraPosition.z = DAT_80077840;
      cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar6 * DAT_8007783c >> 0xc);
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      balloonistState = 1;
      DAT_800777ec = 0;
      spyro.RelativeSparxAngle.roll = (char)((int)DAT_8007781c >> 4);
      spyro.nextAnim = '\0';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    iVar6 = SinScaled((DAT_800777ec << 0xb) / 0x60 + -0x400);
    iVar6 = iVar6 + 0x1000;
    if (DAT_800777ec == gameSpeedMultiplyer) {
      if (ptr_SparxMoby != (int *)0x0) {
        *(undefined *)(ptr_SparxMoby + 0x14) = 0;
        *(undefined *)((int)ptr_SparxMoby + 0x51) = 0;
        if (*(int *)(*ptr_SparxMoby + 0xc) != 0) {
          SetToZero();
          *(undefined4 *)(*ptr_SparxMoby + 0xc) = 0;
        }
      }
      backupSuperFlameTimer = superFlameTimer;
      Unk_UpdateSpyroAfterEvents(1);
      spyro.currentAnim = '\x01';
      spyro.nextAnim = '\x01';
      spyro.nextKeyframe = '\x01';
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = 0x4a0;
      DAT_80077810 = 0;
      DAT_80077814 = 0x164;
      Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&DAT_8007780c,&DAT_8007780c);
      Vec3Add(&DAT_8007780c,&DAT_8007780c,DAT_8007784c + 0xc);
      DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      DAT_8007781c = ATan2Scaled(local_78,local_74,1);
    }
    if (DAT_800777ec < 0x18) {
      iVar3 = SinScaled((DAT_800777ec << 0xb) / 0x18 + -0x400);
      iVar3 = iVar3 + 0x1000;
      if ((DAT_8007781c - DAT_80077818 & 0xfff) < 0x801) {
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
      }
      else {
LAB_artisans__8007b494:
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 - (iVar4 * iVar3 >> 0xd);
      }
LAB_artisans__8007b4b4:
      spyro.RelativeSparxAngle.roll = (char)(iVar3 >> 4);
      uVar1._0_1_ = '\b';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
LAB_artisans__8007b4c4:
      spyro._88_4_ = uVar1;
    }
    else {
      if (0x47 < DAT_800777ec) {
        iVar3 = SinScaled(((DAT_800777ec + -0x48) * 0x800) / 0x18 + -0x400);
        iVar3 = iVar3 + 0x1000;
        if (DAT_800777ec - gameSpeedMultiplyer < 0x48) {
          DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
          spyro.nextAnim = '\x03';
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\b';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          DAT_8007781c = (uint)*(byte *)(DAT_8007784c + 0x46) * 0x10 - 0x800 & 0xfff;
        }
        if (0x800 < (DAT_8007781c - DAT_80077818 & 0xfff)) goto LAB_artisans__8007b494;
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
        goto LAB_artisans__8007b4b4;
      }
      iVar3 = SinScaled(((DAT_800777ec + -0x18) * 0x800) / 0x30 + -0x400);
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      Vec3Scale(&local_78,&local_78,iVar3 + 0x1000);
      Vec3ScaleDownByPowerOfTwo((int *)&local_78,0xd);
      Vec3Add(&spyro,&DAT_80077800,&local_78);
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      spyro._88_4_ = (int)uVar5 >> 1;
      if ((int)spyro._88_4_ < 4) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      uVar1._0_1_ = '\x10';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
      if (0x10 < (int)spyro._88_4_) goto LAB_artisans__8007b4c4;
    }
    spyro.RelativeSparxAngle.yaw = '\0';
    spyro.RelativeSparxAngle.pitch = '\0';
    spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
    UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
    FUN_80049fac(1);
    FlameButAlsoNotFlame(gameSpeedMultiplyer);
    if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
    }
    else {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
    }
    iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
    iVar4 = CosScaled(iVar3);
    cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar4 * iVar7 >> 0xc);
    iVar3 = SinScaled(iVar3);
    local_78 = 0x220;
    local_70 = 0x340;
    local_74 = 0;
    cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar3 * iVar7 >> 0xc);
    cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
    Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&local_78,&local_78);
    Vec3Add(&local_78,&local_78,DAT_8007784c + 0xc);
    Vec3Subtract((int *)&local_78,(int *)&local_78,&cameraPosition.x);
    if (DAT_800777ec < 0x20) {
      local_68 = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      local_66 = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      local_64 = (short)iVar6;
      iVar6 = FUN_8001796c((int)local_68,(int)cameraAngle.roll);
      cameraAngle.roll = cameraAngle.roll + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_66,(int)cameraAngle.pitch);
      cameraAngle.pitch = cameraAngle.pitch + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_64,(int)cameraAngle.yaw);
      cameraAngle.yaw = cameraAngle.yaw + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
    }
    else {
      cameraAngle.roll = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      cameraAngle.yaw = (short)iVar6;
    }
    (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
    Maybe_SoundEffectProcessing();
    break;
  case 1:
    if (balloonistDialogue < 0x1e) {
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x51) {
        return;
      }
      iVar6 = balloonistDialogue % 6;
      if (iVar6 == 0) {
        iVar3 = balloonistDialogue + 1;
      }
      else if (iVar6 < 3) {
        if ((balloonistDialogue < 3) && (requirementArtisans < 2)) {
          (*ptr_OverlayBalloonistStayHere)();
          iVar3 = balloonistDialogue;
        }
        else if (balloonistDialogue == 0xe) {
          do {
            iVar6 = rand();
            iVar6 = iVar6 % 5;
            if ((iVar6 == 0) && (DAT_80076fec == 0)) {
              iVar3 = 0x21;
LAB_artisans__8007babc:
              balloonistDialogue = iVar3;
            }
            else {
              if ((iVar6 == 1) && (DAT_80077004 == 0)) {
                iVar3 = 0x22;
                goto LAB_artisans__8007babc;
              }
              if ((iVar6 == 2) && (DAT_80077008 == 0)) {
                iVar3 = 0x23;
                goto LAB_artisans__8007babc;
              }
              if (((iVar6 == 3) && (iVar3 = 0x24, DAT_80077018 < 2)) ||
                 ((iVar6 == 4 && (iVar3 = 0x25, DAT_80077024 == 0)))) goto LAB_artisans__8007babc;
            }
            iVar3 = balloonistDialogue;
          } while (balloonistDialogue == 0xe);
        }
        else {
          balloonistDialogue = 0x1e;
          iVar3 = balloonistDialogue;
        }
      }
      else if (iVar6 == 3) {
        iVar3 = balloonistDialogue + 2;
      }
      else {
        iVar3 = 0x1f;
        if (iVar6 == 4) {
          iVar3 = balloonistDialogue + 1;
        }
      }
      balloonistDialogue = iVar3;
      DAT_800777ec = 0;
      return;
    }
    if (balloonistDialogue == 0x1e) {
      iVar6 = 1;
      do {
        if ((&unlockedHWs)[iVar6] != '\x02') break;
        iVar6 = iVar6 + 1;
      } while (iVar6 < 6);
      if ((currentButtonOneFrame & UP_BUTTON) == 0) {
        if ((currentButtonOneFrame & DOWN_BUTTON) != 0) {
          balloonistCursorPlacement = balloonistCursorPlacement + 1;
          if (iVar6 <= balloonistCursorPlacement) {
            balloonistCursorPlacement = 0;
          }
          goto LAB_artisans__8007bbc8;
        }
      }
      else {
        balloonistCursorPlacement = balloonistCursorPlacement + -1;
        if (balloonistCursorPlacement < 0) {
          balloonistCursorPlacement = iVar6 + -1;
        }
LAB_artisans__8007bbc8:
        DAT_800777ec = 0x20;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        levelID = balloonistCursorPlacement * 10;
        if (levelIDPortalExit <= (int)levelID) {
          levelID = levelID + ARTISANS_ID;
        }
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)levelID / 10 + -1;
        return;
      }
    }
    else {
      if (1 < balloonistDialogue - 0x1fU) {
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
          return;
        }
        if (DAT_800777ec < 0x51) {
          return;
        }
        if ((balloonistDialogue == 0x24) || (balloonistDialogue == 0x26)) {
          balloonistCursorPlacement = 0;
          balloonistDialogue = 0x1e;
          balloonistRandomGreeting = 1;
          return;
        }
        if (balloonistDialogue == 0x25) {
          DAT_800777ec = 0;
          balloonistDialogue = 0x26;
          return;
        }
        if (balloonistDialogue == 0x21) {
          LVar2 = STONE_HILL_ID;
        }
        else if (balloonistDialogue == 0x22) {
          LVar2 = DRY_CANYON_ID;
        }
        else {
          LVar2 = CLIFF_TOWN_ID;
          if (balloonistDialogue != 0x23) goto LAB_artisans__8007bea4;
        }
        levelID = LVar2;
LAB_artisans__8007bea4:
        balloonistDropoffLocation = balloonistDialogue + -0x1b;
        DAT_800777ec = 0;
        balloonistDialogue = 0x20;
        return;
      }
      if ((currentButtonOneFrame & (UP_BUTTON|DOWN_BUTTON)) != 0) {
        DAT_800777ec = 0x20;
        balloonistCursorPlacement = 1 - balloonistCursorPlacement;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        if (balloonistDialogue != 0x1f) {
          balloonistState = 2;
          DAT_800777ec = 0;
          return;
        }
        levelID = levelIDPortalExit + ARTISANS_ID;
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)(levelIDPortalExit + ARTISANS_ID) / 10 + -1;
        return;
      }
      if (balloonistDialogue != 0x1f) {
        balloonistCursorPlacement = 0;
        balloonistDialogue = 0x1e;
        balloonistRandomGreeting = 1;
        return;
      }
    }
    (*ptr_OverlayBalloonistStayHere)();
    break;
  case 2:
    if (DAT_800777ec < 0x66) {
      iVar6 = SinScaled((DAT_800777ec * 0x800) / 0x66 + -0x400);
      iVar6 = iVar6 + 0x1000;
      if (DAT_800777ec == gameSpeedMultiplyer) {
        *(undefined *)((int)DAT_80077850 + 0x4a) = 0xff;
        DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                   cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
        Vec3Subtract((int *)&local_60,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
        DAT_80077824 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        DAT_8007782c = (int)cameraAngle.roll;
        DAT_80077830 = (int)cameraAngle.pitch;
        DAT_80077834 = (int)cameraAngle.yaw;
        DAT_80077828 = cameraPosition.z;
        DAT_8007783c = 0xe00;
        DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 - 0x480 & 0xfff;
        DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
        DAT_80077848 = *(int *)(DAT_8007784c + 0x14) + 0x488;
        Vec3Copy(&DAT_80077800,(int *)&spyro);
        Vec3Copy(&DAT_8007780c,(int *)(DAT_8007784c + 0xc));
        spyro.currentKeyfame = spyro.nextKeyframe;
        spyro.nextAnim = '\x05';
        spyro.nextKeyframe = '\0';
        spyro.maybe_AnimSpeedRelated = '\0';
        spyro.animSpeed = '\a';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (DAT_800777ec < 0x30) {
        spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec) / 0x30;
        spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec) / 0x30;
        iVar3 = SinScaled(DAT_800777ec << 5);
        spyro.position.z = DAT_80077808 + (iVar3 * 10) / 0x24;
        spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
        UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
        FUN_80049fac(1);
      }
      else {
        if (DAT_800777ec - gameSpeedMultiplyer < 0x30) {
          DAT_80077808 = DAT_80077808 + 0x325;
          DAT_80077800 = DAT_8007780c;
          DAT_80077804 = DAT_80077810;
          Vec3Copy(&DAT_8007780c,(int *)((int)DAT_80077850 + 0xc));
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\x04';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
        }
        iVar3 = DAT_800777ec + -0x36;
        if (0x35 < DAT_800777ec - gameSpeedMultiplyer) {
          spyro.animSpeed = '\a';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * iVar3) / 0x30;
          spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * iVar3) / 0x30;
          iVar3 = SinScaled(iVar3 * 0x20);
          spyro.position.z = DAT_80077808 + (iVar3 >> 2);
        }
      }
      if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_60,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      uVar5 = Vec3CalculateLengthE((int *)&local_60,flag2D);
      iVar3 = ATan2Scaled(uVar5,-local_58,1);
      local_66 = (short)iVar3;
      iVar3 = ATan2Scaled(local_60,local_5c,1);
      local_64 = (short)iVar3;
      iVar3 = FUN_8001796c((int)local_66,DAT_80077830);
      cameraAngle.pitch = (short)DAT_80077830 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      iVar3 = FUN_8001796c((int)local_64,DAT_80077834);
      cameraAngle.yaw = (short)DAT_80077834 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      *(int *)((int)DAT_80077850 + 0x14) =
           DAT_80077844 + ((DAT_80077848 - DAT_80077844) * iVar6 >> 0xd);
    }
    else {
      balloonistState = 3;
      DAT_800777ec = 0;
    }
    break;
  case 3:
    if (0x7f < DAT_800777ec) {
      DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                 cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
      Vec3Subtract((int *)&local_50,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
      DAT_80077824 = Vec3CalculateLengthE((int *)&local_50,flag2D);
      DAT_80077828 = cameraPosition.z;
      DAT_8007783c = 0x800;
      levelLoadState = 0;
      portalNumber = 0xffffffff;
      canFlyIn = 0;
      portalToExitFromInHW = 0;
      DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 + 0x390 & 0xfff;
      balloonistState = 4;
      DAT_800777ec = 0;
      DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
      LevelTransitionRelated(1);
      ArrayCopy((int *)&DAT_80071e9c,DAT_80077850,0x58);
      DAT_80077850 = &DAT_80071e9c;
      if (DAT_800785e8 < 0x80200000) {
        outputArray = (int *)(DAT_80078a44 + -0x400c);
      }
      else {
        outputArray = (int *)&DAT_801fe000;
      }
      ArrayCopy(outputArray,DAT_800769f8,0x4000);
      iVar3 = (int)DAT_800769f8;
      iVar6 = outputArray[0xe] - (int)DAT_800769f8;
      DAT_800769f8 = outputArray;
      outputArray[0xe] = (int)outputArray + iVar6;
      *(int *)(DAT_800769f8[0xe] + 0x14) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x14) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x18) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x18) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x24) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x24) - iVar3);
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      spyro.position.x = DAT_8007780c;
      DAT_80077828 = cameraPosition.z;
      spyro.position.y = DAT_80077810;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      spyro.nextAnim = '\0';
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.unkown3 = '\x03';
      spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    }
    if (DAT_800777ec < 0x40) {
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0xc00);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    else {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * 0x4b;
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0x800);
      cameraPosition.z = DAT_80077828 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    Vec3Subtract((int *)&local_50,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_50,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_48,1);
    cameraAngle.pitch = (short)iVar6;
    local_30 = local_50;
    local_2c = local_4c;
    goto LAB_artisans__8007cc80;
  case 5:
    if (levelLoadState < 0xd) {
      LevelTransitionRelated(1);
    }
    if (DAT_800777ec < 0x100) {
      iVar6 = SinScaled(((DAT_800777ec << 0xb) >> 8) + -0x400);
      iVar6 = iVar6 + 0x1000;
      if ((DAT_80077820 - DAT_80077838 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_8007783c + ((int)((DAT_80077824 - DAT_8007783c) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077840 + ((DAT_80077828 - DAT_80077840) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_40,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      local_38 = (local_38 + 0x200) - (iVar6 >> 4);
      uVar5 = Vec3CalculateLengthE((int *)&local_40,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_38,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_40,local_3c,1);
      cameraAngle.yaw = (short)iVar6;
    }
    else if (levelLoadState == 0xd) {
      balloonistState = 6;
      DAT_800777ec = 0;
      LevelTransitionRelated(1);
    }
    break;
  case 6:
    if (0x7f < DAT_800777ec) {
      balloonistState = 7;
      DAT_800777ec = 0;
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = *(int *)(&DAT_8006eadc + balloonistDropoffLocation * 8);
      DAT_80077810 = *(int *)(&DAT_8006eae0 + balloonistDropoffLocation * 8);
      DAT_80077814 = spyro.position.z;
      iVar6 = MobyUpdatePosition(&DAT_8007780c,0x10000);
      DAT_80077814 = iVar6 + 0x164;
      spyro.nextAnim = '\x05';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x06';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      DAT_80077828 = cameraPosition.z;
    }
    if (DAT_800777ec < 0x40) {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * -0x4b;
      iVar6 = SinScaled(DAT_800777ec * -0x10);
      cameraPosition.z = DAT_80077828 + (iVar6 * 3 >> 2);
    }
    else {
      if (DAT_800777ec - gameSpeedMultiplyer < 0x40) {
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14) + -0x4b;
      }
      iVar6 = SinScaled(DAT_800777ec * -0x10 + 0x400);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + (iVar6 * 3 >> 2);
    }
    Vec3Subtract((int *)&local_30,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_30,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_28,1);
    cameraAngle.pitch = (short)iVar6;
LAB_artisans__8007cc80:
    iVar6 = ATan2Scaled(local_30,local_2c,1);
    cameraAngle.yaw = (short)iVar6;
    spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    spyro.RelativeSparxAngle.roll = *(char *)((int)DAT_80077850 + 0x46) + -0x80;
    break;
  case 7:
    if (DAT_800777ec < 0x40) {
      spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec >> 6);
      spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec >> 6);
      iVar6 = SinScaled(DAT_800777ec * 0x18 + 0x200);
      spyro.position.z = DAT_80077814 + (iVar6 * (DAT_80077808 - DAT_80077814)) / 0xb50;
      spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      FUN_80049fac(1);
      if (0x1f < DAT_800777ec) {
        *(int *)((int)DAT_80077850 + 0x14) =
             *(int *)((int)DAT_80077850 + 0x14) + DAT_800777ec * gameSpeedMultiplyer;
      }
    }
    else {
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      Unk_UpdateSpyroAfterEvents(1);
      spyro.isMovementLocked = 0x10;
      DAT_80076ea0 = &spyro;
      maybe_cameraRelated = 0;
      unk_cameraRelatedLocking = 0;
      flyInAnimation = &DAT_8006c8bc;
      unk_camera_related_angle = spyro.angle.yaw;
      CameraRotation(&cameraPosition);
      ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
      DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
      ChangeFlyInCamera();
      Maybe_HudInPauseMenu(0);
      gameState = GAMESTATE_GAMEPLAY;
      DAT_8007579c = 1;
      isInDragonState = 0;
      Maybe_ResetHudTimers();
    }
  }
                    // WARNING: Read-only address (ram,0x80076fec) is written
                    // WARNING: Read-only address (ram,0x80077004) is written
                    // WARNING: Read-only address (ram,0x80077008) is written
                    // WARNING: Read-only address (ram,0x80077018) is written
                    // WARNING: Read-only address (ram,0x80077024) is written
                    // WARNING: Read-only address (ram,0x8007784c) is written
  return;
}



void Artisans_BalloonistVisualsFunc(void)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  byte *text;
  char *pcVar6;
  undefined *puVar7;
  uint uVar8;
  uint uVar9;
  byte **ppbVar10;
  int local_e0;
  undefined4 local_dc;
  undefined4 local_d8;
  int local_d0;
  undefined4 local_cc;
  undefined4 local_c8;
  byte abStack_c0 [32];
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int local_80;
  int local_7c;
  undefined4 local_78;
  int local_70;
  int local_6c;
  undefined4 local_68;
  int local_60;
  int local_5c;
  undefined4 local_58;
  int local_50;
  int local_4c;
  undefined4 local_48;
  byte abStack_40 [40];
  
  uVar9 = ptr_hudMobys;
  if (balloonistState < 4) {
    if (balloonistState < 2) {
      sprintf((char *)abStack_c0,s__s_THE_BALLOONIST_artisans__8007aa5c,
              (&PTR_s_RETURN_HOME_8006f880)[levelIDPortalExit / 10]);
      iVar2 = strlen((char *)abStack_c0);
      local_e0 = iVar2 * -8 + 0x108;
      local_dc = 0xcc;
      local_d8 = 0x1100;
      local_d0 = 0x10;
      local_cc = 1;
      local_c8 = 0x1400;
      DrawTextAll(abStack_c0,&local_e0,&local_d0,0x12,'\v');
      iVar2 = uVar9 - 0x58;
      if ((int)ptr_hudMobys <= iVar2) {
        iVar3 = 0;
        do {
          *(char *)(iVar2 + 0x46) =
               (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
          iVar2 = iVar2 + -0x58;
          iVar3 = iVar3 + 0xc;
        } while ((int)ptr_hudMobys <= iVar2);
      }
    }
    iVar2 = balloonistState;
    if (balloonistState == 1) {
      if (balloonistDialogue - 0x1eU < 3) {
        if (balloonistDialogue == 0x1e) {
          local_70 = 0xe;
          local_68 = 0x1600;
          local_78 = 0x1400;
          local_80 = 0xf0;
          local_6c = balloonistState;
          local_7c = 0x24;
          if (balloonistRandomGreeting == 0) {
            pcVar6 = s_HOP_ON__SPYRO__artisans__8007aa70;
          }
          else if (balloonistRandomGreeting == 1) {
            pcVar6 = s_NEED_A_LIFT__artisans__8007aa80;
          }
          else {
            pcVar6 = s_WHERE_TO__SPYRO__artisans__8007aa90;
          }
          DrawTextAll((byte *)pcVar6,&local_80,&local_70,0x10,'\v');
          local_80 = 0x110;
          uVar9 = ptr_hudMobys - 0x58;
          local_7c = local_7c + 0x14;
          DrawTextAll((byte *)s_STAY_HERE_artisans__8007aaa4,&local_80,&local_70,0x10,'\v');
          local_7c = local_7c + 0xf;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          iVar3 = 1;
          iVar2 = 0;
          do {
            if ((levelIDPortalExit / 10 + -1 != iVar2) && ((&unlockedHWs)[iVar2] == '\x02')) {
              local_80 = 0x110;
              uVar9 = ptr_hudMobys - 0x58;
              DrawTextAll((&PTR_s_ARTISANS_8006f7d4)[iVar2],&local_80,&local_70,0x10,'\v');
              local_7c = local_7c + 0xf;
              if ((balloonistCursorPlacement == iVar3) && (ptr_hudMobys <= uVar9)) {
                iVar4 = 0;
                do {
                  *(char *)(uVar9 + 0x46) =
                       (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar4 & 0xff) + 0x40] >> 8);
                  uVar9 = uVar9 - 0x58;
                  iVar4 = iVar4 + 0xc;
                } while (ptr_hudMobys <= uVar9);
              }
              iVar3 = iVar3 + 1;
            }
            iVar2 = iVar2 + 1;
          } while (iVar2 < 6);
          DrawTextBox(0xe0,0x1d8,0x19,iVar3 * 0xf + 0x33);
          DrawLine(0xf0,0x2e,0x1a0,0x2e);
          local_80 = 0xf4;
          local_78 = 0x1100;
          local_7c = balloonistCursorPlacement * 0xf + 0x36;
          DrawArrow(&local_80,DAT_800777ec,0);
        }
        else if (balloonistDialogue - 0x1fU < 2) {
          DrawTextBox(0x48,0x1b8,0x1c,0x66);
          DrawLine(100,0x37,0x184,0x37);
          local_60 = 0x60;
          local_58 = 0x1100;
          local_5c = balloonistCursorPlacement * 0x13 + 0x43;
          DrawArrow(&local_60,DAT_800777ec,0);
          local_50 = 0x10;
          local_48 = 0x1400;
          local_5c = 0x2c;
          local_4c = iVar2;
          local_58 = 0x1100;
          local_60 = 0x60;
          if (balloonistDialogue == 0x1f) {
            pcVar6 = s_ARE_YOU_READY_TO_GO__artisans__8007aab0;
          }
          else {
            pcVar6 = s_WOULD_YOU_LIKE_TO_GO__artisans__8007aac8;
          }
          DrawTextAll((byte *)pcVar6,&local_60,&local_50,0x12,'\v');
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          local_5c = local_5c + 0x19;
          DrawTextAll((byte *)s_STAY_HERE_artisans__8007aaa4,&local_60,&local_50,0x12,'\v');
          local_5c = local_5c + 0x13;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          if (balloonistDialogue == 0x1f) {
            puVar7 = (&PTR_s_ARTISANS_8006f7d4)[levelIDPortalExit / 10];
          }
          else {
            puVar7 = (&PTR_s_PEACE_KEEPERS_8006f7d8)[levelID + ((int)levelID / 10) * -4];
          }
          sprintf((char *)abStack_40,s_GO_TO__s_artisans__8007aae0,puVar7);
          DrawTextAll(abStack_40,&local_60,&local_50,0x12,'\v');
          if ((balloonistCursorPlacement == 1) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
        }
      }
      else {
        DrawTextBox(0x48,0x1b8,0x1c,0x68);
        uVar9 = ptr_hudMobys;
        local_9c = 0x2c;
        local_98 = 0x1100;
        local_90 = 0x10;
        local_8c = iVar2;
        local_88 = 0x1400;
        uVar8 = (uint)(byte)(&DAT_8006f89c)[balloonistDialogue];
        if (uVar8 < (byte)(&DAT_8006f89d)[balloonistDialogue]) {
          ppbVar10 = &PTR_s_IF_YOU_PROVE_YOUR_8006f8c4 + uVar8;
          do {
            local_a0 = 0x5e;
            text = *ppbVar10;
            ppbVar10 = ppbVar10 + 1;
            DrawTextAll(text,&local_a0,&local_90,0x12,'\v');
            local_9c = local_9c + 0x12;
            uVar8 = uVar8 + 1;
          } while ((int)uVar8 < (int)(uint)(byte)(&DAT_8006f89d)[balloonistDialogue]);
        }
        if (((int)DAT_800777ec < 0x50) &&
           (uVar8 = uVar9 + DAT_800777ec * -0x58, (int)ptr_hudMobys <= (int)uVar8)) {
          ptr_hudMobys = uVar8;
        }
        iVar2 = uVar9 - 0x58;
        if ((int)ptr_hudMobys <= iVar2) {
          iVar3 = 0;
          do {
            *(char *)(iVar2 + 0x46) =
                 (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
            iVar2 = iVar2 + -0x58;
            iVar3 = iVar3 + 0xc;
          } while ((int)ptr_hudMobys <= iVar2);
        }
        if (0x4f < (int)DAT_800777ec) {
          local_a0 = 0x19c;
          local_9c = 0x60;
          local_98 = 0x1100;
          DrawArrow(&local_a0,DAT_800777ec,0);
        }
      }
    }
    Maybe_DrawingMobyParticlesRelated();
    RenderObjs();
    if (balloonistState < 2) {
      ptr_maybeTextObj = 0;
      CopyHudToShaded();
      DrawShadedMobys();
    }
  }
  else {
    Maybe_DrawingMobyParticlesRelated();
    iVar2 = DAT_80077850;
    piVar5 = &DAT_8006fcf4;
    if (DAT_8006fcf4 != 0) {
      piVar1 = &DAT_8006fcf8;
      do {
        piVar5 = piVar1;
        piVar1 = piVar5 + 1;
      } while (*piVar5 != 0);
    }
    piVar5[1] = 0;
    *piVar5 = iVar2;
    RenderObjs();
  }
  RenderWorld();
  RenderAllSkyBoxes();
  RenderAllParticles();
  return;
}


/*
Unable to decompile 'Artisans_UpdateMobys'
Cause: Exception while decompiling artisans::8007d9c8: process: timeout

*/


int ** Artisans_SpawnDynamicObj(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  int **ppiVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  short sVar7;
  uint uVar8;
  Spyro *pSVar9;
  int *piVar10;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar3 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar3 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar3 + 0x56) = (char)uVar8;
  if (param_1 < 0x102) {
    if (0xfe < param_1) {
LAB_artisans__80085c4c:
      piVar10 = *ppiVar3;
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppiVar3);
      uVar8 = rand();
      uVar4 = rand();
      uVar4 = uVar4 & 0x7ff;
      iVar6 = CosScaled(uVar4);
      iVar5 = CosScaled(uVar8 & 0xfff);
      *(short *)piVar10 = (short)((iVar6 >> 5) * iVar5 >> 0xc);
      iVar6 = CosScaled(uVar4);
      iVar5 = SinScaled(uVar8 & 0xfff);
      *(short *)((int)piVar10 + 2) = (short)((iVar6 >> 5) * iVar5 >> 0xc);
      iVar6 = SinScaled(uVar4);
      *(short *)(piVar10 + 1) = (short)(iVar6 >> 5);
      if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
        *(short *)piVar10 = *(short *)piVar10 + (short)(spyro.airMomentum.x >> 6);
        *(short *)((int)piVar10 + 2) =
             *(short *)((int)piVar10 + 2) + (short)(spyro.airMomentum.y >> 6);
        *(short *)(piVar10 + 1) = *(short *)(piVar10 + 1) + (short)(spyro.airMomentum.z >> 6);
      }
      ppiVar3[3] = ppiVar3[3] + *(short *)piVar10;
      ppiVar3[4] = ppiVar3[4] + *(short *)((int)piVar10 + 2);
      ppiVar3[5] = ppiVar3[5] + *(short *)(piVar10 + 1);
      iVar6 = rand();
      *(ushort *)((int)piVar10 + 6) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)(piVar10 + 2) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)((int)piVar10 + 10) = (ushort)iVar6 & 0xf;
      piVar10[4] = *(int *)(param_2 + 0x14) + -0x40;
      uVar8 = rand();
      piVar10[3] = 0x40 - (uVar8 & 0xf);
      if (2 < *(ushort *)((int)ppiVar3 + 0x36) - 0x135) {
        return ppiVar3;
      }
      bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
      ppiVar3[0x13] = (int *)0xa18618;
LAB_artisans__80085dec:
      *(byte *)((int)ppiVar3 + 0x4b) = bVar2 | 0x80;
      return ppiVar3;
    }
    if (param_1 == 0x4c) {
LAB_artisans__800860ac:
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
      FUN_800529cc(ppiVar3);
      return ppiVar3;
    }
    if (param_1 < 0x4d) {
      if (param_1 == 0xf) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        piVar10[2] = 0x8c;
        *(undefined *)(piVar10 + 4) = 3;
        *(undefined *)(piVar10 + 5) = 0xff;
        *piVar10 = 0;
        piVar10[1] = 0;
        *(undefined *)((int)piVar10 + 0xe) = 0;
        *(undefined *)((int)piVar10 + 0xf) = 0;
        *(undefined *)((int)piVar10 + 0x11) = 0;
        *(undefined *)((int)piVar10 + 0x12) = 0;
        *(undefined *)((int)piVar10 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x49) = 2;
        *(undefined *)(ppiVar3 + 0x14) = 0x18;
        *(undefined *)((int)ppiVar3 + 0x52) = 0x10;
        *(undefined *)(ppiVar3 + 0x11) = 0x20;
        *(undefined *)((int)ppiVar3 + 0x45) = 0;
        *(undefined *)((int)ppiVar3 + 0x46) = 0;
        if (param_2 != 0) {
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        }
        FUN_800526a8(ppiVar3);
        bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *(undefined *)((int)ppiVar3 + 0x4f) = 1;
        goto LAB_artisans__80085dec;
      }
      if (param_1 < 0x10) {
        if (param_1 == 0xe) goto LAB_artisans__80085aac;
      }
      else {
        if (param_1 == 0x10) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          FUN_800526a8(ppiVar3);
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          ppiVar3[5] = ppiVar3[5] + 0x80;
          Vec3Copy(piVar10 + 1,(int *)(ppiVar3 + 3));
          *(undefined *)((int)piVar10 + 0x13) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(short *)(piVar10 + 5) = 0x708;
          return ppiVar3;
        }
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar3);
          return ppiVar3;
        }
      }
    }
    else {
      if (param_1 == 0x78) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        *(undefined *)((int)ppiVar3 + 0x49) = 0;
        *piVar10 = 0;
        *(undefined2 *)(piVar10 + 2) = 0;
        *(undefined2 *)((int)piVar10 + 6) = 0;
        *(undefined2 *)(piVar10 + 1) = 0;
        piVar10[3] = 0;
        piVar10[4] = 0;
        if (param_2 == 0) {
          return ppiVar3;
        }
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        return ppiVar3;
      }
      if (param_1 < 0x79) {
        if ((param_1 < 0x58) && (0x52 < param_1)) {
LAB_artisans__80085aac:
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *piVar10 = 0;
          piVar10[1] = 0;
          piVar10[2] = 0x8c;
          *(undefined *)((int)piVar10 + 0xe) = 0;
          *(undefined *)((int)piVar10 + 0xf) = 0;
          *(undefined *)((int)piVar10 + 0x11) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(undefined *)((int)piVar10 + 0x13) = 0;
          uVar1 = 3;
          if (*(short *)(param_2 + 0x36) == 0xd) {
            uVar1 = 2;
          }
          *(undefined *)(piVar10 + 4) = uVar1;
          *(undefined *)(piVar10 + 5) = 0xff;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x40;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          FUN_800529cc(ppiVar3);
          ppiVar3[7] = (int *)0xffffffff;
          Vec3Copy(aiStack_48,(int *)(ppiVar3 + 3));
          local_40 = local_40 + 0x400;
          MobyUpdatePosition(aiStack_48,0x10000);
          FUN_800533d0(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          if (*(short *)((int)ppiVar3 + 0x36) == 0xe) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 0xc;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x53) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 1;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x54) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 2;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x55) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 3;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x56) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 4;
          }
          if (*(short *)((int)ppiVar3 + 0x36) != 0x57) {
            return ppiVar3;
          }
          *(undefined *)((int)ppiVar3 + 0x4f) = 5;
          return ppiVar3;
        }
      }
      else if (param_1 == 0xfb) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        *(undefined *)(ppiVar3 + 0x14) = 0x20;
        *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
        FUN_800529cc(ppiVar3);
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *(undefined *)((int)ppiVar3 + 0x4f) = 0xe;
        if (dragonState == 3) {
          uVar1 = 0x14;
        }
        else {
          uVar1 = 0x30;
          if (dragonState != 1) goto LAB_artisans__80085e58;
        }
        *(undefined *)((int)ppiVar3 + 0x57) = uVar1;
LAB_artisans__80085e58:
        uVar8 = rand();
        iVar6 = (uVar8 & 7) * 4;
        local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar6);
        local_34 = 0;
        local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar6);
        Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
        uVar8 = rand();
        local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
        Vec3Add(ppiVar3 + 3,param_2 + 0xc,&local_38);
        Vec3Copy(piVar10,&local_38);
        Vec3ScaleDownByPowerOfTwo(piVar10,2);
        uVar8 = rand();
        *piVar10 = *piVar10 + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar10[1] = piVar10[1] + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar10[2] = piVar10[2] + -0x7f + (uVar8 & 0xff);
        iVar6 = rand();
        *(char *)(ppiVar3 + 0x11) = (char)iVar6;
        iVar6 = rand();
        *(char *)((int)ppiVar3 + 0x45) = (char)iVar6;
        iVar6 = rand();
        *(char *)((int)ppiVar3 + 0x46) = (char)iVar6;
        iVar6 = rand();
        *(byte *)(piVar10 + 4) = (byte)iVar6 & 0xf;
        iVar6 = rand();
        *(byte *)((int)piVar10 + 0x11) = (byte)iVar6 & 0xf;
        iVar6 = rand();
        *(byte *)((int)piVar10 + 0x12) = (byte)iVar6 & 0xf;
        piVar10[3] = *(int *)(param_2 + 0x14);
        iVar6 = rand();
        *(byte *)((int)piVar10 + 0x13) = ((byte)iVar6 & 3) + 0x10;
        return ppiVar3;
      }
    }
  }
  else {
    if (param_1 == 0x195) {
LAB_artisans__80086038:
      InitArrayRelated(ppiVar3);
      if (param_2 == 0) {
        pSVar9 = &spyro;
      }
      else {
        pSVar9 = (Spyro *)(param_2 + 0xc);
      }
      Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
      ppiVar3[5] = ppiVar3[5] + 0x80;
      piVar10 = (int *)MobyUpdatePosition(ppiVar3 + 3,0x800);
      iVar6 = (int)piVar10 - (int)ppiVar3[5];
      if (iVar6 < 0) {
        iVar6 = -iVar6;
      }
      if (iVar6 < 0x800) {
        ppiVar3[5] = piVar10;
      }
      else {
        ppiVar3[5] = ppiVar3[5] + -0x80;
      }
      goto LAB_artisans__80086100;
    }
    if (param_1 < 0x196) {
      if (param_1 == 0x115) {
LAB_artisans__80085fb8:
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800529cc(ppiVar3);
        *(undefined *)((int)ppiVar3 + 0x4f) = 2;
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *piVar10 = 0x40;
        return ppiVar3;
      }
      if (param_1 < 0x116) {
        if ((param_1 < 0x10e) && (0x103 < param_1)) goto LAB_artisans__80085fb8;
      }
      else {
        if (param_1 == 0x147) goto LAB_artisans__80085fb8;
        if (param_1 == 0x18e) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0xff;
          ppiVar3[3] = (int *)0x1cc;
          ppiVar3[4] = (int *)&DAT_00000028;
          ppiVar3[5] = (int *)0x1000;
          FUN_800529cc(ppiVar3);
          *(undefined *)((int)ppiVar3 + 0x47) = 0x20;
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 0;
          return ppiVar3;
        }
      }
    }
    else if (param_1 < 0x1c4) {
      if (0x1a9 < param_1) goto LAB_artisans__800860ac;
      if (0x1a6 < param_1) goto LAB_artisans__80085c4c;
    }
    else if (param_1 == 0x1dd) goto LAB_artisans__80086038;
  }
  InitArrayRelated(ppiVar3);
  pSVar9 = (Spyro *)(param_2 + 0xc);
  if (param_2 == 0) {
    pSVar9 = &spyro;
  }
  Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
LAB_artisans__80086100:
  FUN_800526a8(ppiVar3);
  return ppiVar3;
}



void Artisans_UpdateParticles(int param_1)

{
  byte bVar1;
  bool bVar2;
  char cVar3;
  short sVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  char cVar9;
  short sVar10;
  short sVar11;
  char *pcVar12;
  int iVar13;
  char *pcVar14;
  short *result;
  char *pcVar15;
  int local_90;
  int local_8c;
  int local_88;
  int local_80;
  int local_7c;
  int local_78;
  undefined4 local_70;
  undefined4 local_6c;
  int local_68;
  int local_64;
  int local_60;
  int local_58;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    local_58 = param_1 << 1;
    cVar3 = (char)param_1;
    pcVar12 = ptr_headOfParticleBuffer + 1;
    pcVar15 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar14 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar14) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + (char)local_58;
        pcVar12[0xb] = pcVar12[0xb] + cVar3 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        pcVar12[0xc] = pcVar12[0xc] + cVar3 * -4;
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar3 * -4;
        goto LAB_artisans__80087370;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar3 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar3 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar3 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar12[0xd] = pcVar12[0xd] + cVar3 * -4;
        goto LAB_artisans__80087370;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar3 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar3 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar3 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar3 * -4;
        goto LAB_artisans__80087370;
      case '\x06':
        Vec3Copy(&local_90,*(int **)(pcVar12 + 0x17));
        iVar6 = (uint)(byte)pcVar12[1] << 6;
        iVar13 = local_88 + *(short *)(pcVar12 + 0x1d) * 0x40;
        iVar7 = iVar6;
        if (*(short *)(pcVar12 + 0x1b) < iVar6) {
          iVar7 = (int)*(short *)(pcVar12 + 0x1b);
        }
        iVar5 = CosScaled(iVar6);
        local_90 = local_90 + (iVar7 * iVar5 >> 0xc);
        iVar6 = SinScaled(iVar6);
        local_8c = local_8c + (iVar7 * iVar6 >> 0xc);
        local_88 = *(short *)(pcVar12 + 7) * 4 + 0x40;
        if ((iVar13 < local_88) || (200 < (byte)pcVar12[1])) goto LAB_artisans__80087388;
        Vec3ScaleDownBy4(result,&local_90);
        pcVar12[1] = pcVar12[1] + '\x01';
        break;
      case '\t':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[9] = pcVar12[9] + (char)local_58;
        goto LAB_artisans__80087370;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_artisans__80087388;
        Vec3Copy(&local_80,(int *)&spyro);
        iVar7 = CosScaled((int)*(short *)(pcVar12 + 0x17));
        local_80 = local_80 + (iVar7 >> 4);
        iVar7 = SinScaled((int)*(short *)(pcVar12 + 0x17));
        local_7c = local_7c + (iVar7 >> 4);
        local_78 = local_78 + 0x100;
        Vec3ScaleDownBy4(result,&local_80);
        sVar10 = *(short *)(pcVar12 + 0x17);
        *(short *)(pcVar12 + 0x17) = sVar10 + 0x40;
        iVar7 = CosScaled((int)(short)(sVar10 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar7 < 0) {
          iVar7 = -iVar7;
        }
        pcVar12[9] = (char)(iVar7 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar14 + 0x12);
        pcVar12[0xb] = pcVar12[0xb] + -8;
        pcVar12[0xc] = pcVar12[0xc] + -8;
        pcVar12[0xd] = pcVar12[0xd] + -8;
        if (pcVar12[0xb] == '\0') goto LAB_artisans__80087388;
        goto LAB_artisans__80087378;
      case '\f':
        pcVar12[10] = pcVar12[10] + '\b';
        pcVar12[9] = pcVar12[9] + '\x02';
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -8;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -8;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -8;
        }
        if ((*(uint *)(pcVar12 + 0xb) & 0xffffff) != 0) goto LAB_artisans__80087378;
        goto LAB_artisans__80087388;
      case '\x0e':
        Vec3ShortAdd(result,result,pcVar15);
        sVar10 = *(short *)(pcVar12 + 0x17);
        if (sVar10 < 1) {
          if (sVar10 < 0) {
            sVar4 = 1;
            goto LAB_artisans__80086688;
          }
        }
        else {
          sVar4 = -1;
LAB_artisans__80086688:
          *(short *)(pcVar12 + 0x17) = sVar10 + sVar4;
        }
        sVar10 = *(short *)(pcVar12 + 0x19);
        if (sVar10 < 1) {
          sVar4 = 1;
          if (sVar10 < 0) goto LAB_artisans__800866ac;
        }
        else {
          sVar4 = -1;
LAB_artisans__800866ac:
          *(short *)(pcVar12 + 0x19) = sVar10 + sVar4;
        }
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar12[9] + local_58;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        if (0xff < iVar7) {
          iVar7 = 0xff;
        }
        pcVar12[9] = (char)iVar7;
        if (0 < (int)((uint)(byte)pcVar12[0xb] - param_1)) {
          bVar1 = pcVar12[1];
          cVar9 = (char)((uint)(byte)pcVar12[0xb] - param_1);
          pcVar12[0xb] = cVar9;
          pcVar12[0xc] = cVar9;
          pcVar12[0xd] = cVar9;
          pcVar12[1] = (char)((uint)bVar1 + param_1);
          bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x80;
          goto LAB_artisans__80087370;
        }
        goto LAB_artisans__80087388;
      case '\x16':
        Vec3ShortAdd(result,result,pcVar15);
        sVar10 = *(short *)(pcVar12 + 0x17);
        if (sVar10 < 1) {
          if (sVar10 < 0) {
            sVar4 = 1;
            goto LAB_artisans__80086768;
          }
        }
        else {
          sVar4 = -1;
LAB_artisans__80086768:
          *(short *)(pcVar12 + 0x17) = sVar10 + sVar4;
        }
        sVar10 = *(short *)(pcVar12 + 0x19);
        if (sVar10 < 1) {
          sVar4 = 1;
          if (sVar10 < 0) goto LAB_artisans__8008678c;
        }
        else {
          sVar4 = -1;
LAB_artisans__8008678c:
          *(short *)(pcVar12 + 0x19) = sVar10 + sVar4;
        }
        pcVar12[10] = pcVar12[10] + pcVar12[0x1d];
        iVar7 = (uint)(byte)pcVar12[0xd] - gameSpeedMultiplyer;
        if (0 < iVar7) {
          bVar1 = pcVar12[1];
          cVar9 = (char)(iVar7 >> 1);
          pcVar12[0xb] = cVar9;
          pcVar12[0xc] = cVar9;
          pcVar12[0xd] = (char)iVar7;
          pcVar12[1] = (char)((uint)bVar1 + param_1);
          bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x40;
          goto LAB_artisans__80087370;
        }
        goto LAB_artisans__80087388;
      case '\x18':
        if ((byte)pcVar12[0xb] < 0xf0) {
          pcVar12[0xb] = pcVar12[0xb] + 4;
        }
        if ((byte)pcVar12[0xc] < 0xf0) {
          pcVar12[0xc] = pcVar12[0xc] + 4;
        }
        if ((byte)pcVar12[0xd] < 0xf0) {
          pcVar12[0xd] = pcVar12[0xd] + 4;
        }
        pcVar12[0x1b] = pcVar12[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar7 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar7 = dragonTimerCurrentState;
        }
        *(short *)(pcVar12 + 0x17) = (short)((int)((uint)(byte)pcVar12[0x1c] * (0x48 - iVar7)) >> 3)
        ;
        iVar7 = ((int)((0x20 - (uint)(byte)pcVar12[0x1c]) * iVar7) >> 4) + 8;
        *(short *)(pcVar12 + 0x19) = (short)iVar7;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar12[0x1b] + 0x40] * (iVar7 * 0x10000 >> 0x10) >>
                    0xc);
        sVar10 = sineWaveArray[(byte)pcVar12[0x1b]];
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0x15) + *(short *)(pcVar12 + 0x17) + 0x20;
        *(short *)(pcVar12 + 5) =
             *(short *)(pcVar12 + 0x13) +
             (short)((int)sVar10 * (int)*(short *)(pcVar12 + 0x19) >> 0xc);
        break;
      case '\x1e':
        pcVar12[9] = pcVar12[9] + '\x01';
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x1d);
        cVar9 = (char)local_58;
        pcVar12[0xc] = pcVar12[0xc] - cVar9;
        pcVar12[0xb] = pcVar12[0xb] - cVar9;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        pcVar12[0xd] = pcVar12[0xd] - cVar9;
        if (0x1f < ((uint)bVar1 + param_1 & 0xff)) goto LAB_artisans__80087388;
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar12[0xb] - param_1;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + (char)local_58;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar12[0xb] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar12[0xc] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar12[0xc] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar12[0xd] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        bVar1 = pcVar12[1];
        pcVar12[0xd] = (char)iVar7;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_artisans__80087370;
      case 'B':
        iVar7 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar12[1] & 1U) != 0) {
              *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
              *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
              *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
              if ((pcVar12[1] & 2U) != 0) {
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0x13) = *(short *)(pcVar12 + 0x13) + -1 + ((ushort)iVar6 & 2);
              }
            }
            iVar7 = iVar7 + 1;
            pcVar12[1] = pcVar12[1] + '\x01';
          } while (iVar7 < param_1);
        }
        bVar2 = (byte)pcVar12[1] < 0x18;
        goto LAB_artisans__80087370;
      case 'F':
        local_70._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_70._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_6c = CONCAT22(local_6c._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_70;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_70._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        iVar7 = rand();
        local_70._0_2_ = (short)local_70 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar10 = local_70._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_70 = CONCAT22(sVar10,(short)local_70);
        if ((pcVar12[1] & 1U) != 0) {
          local_6c = CONCAT22(local_6c._2_2_,(short)local_6c + -1);
        }
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_70;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar9 = pcVar12[1];
        pcVar12[1] = cVar9 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_6c;
        if ((0x1f < (byte)(cVar9 + 1U)) || (pcVar12[2] == '\0')) goto LAB_artisans__80087388;
        cVar9 = pcVar12[0xf];
        pcVar12[0xf] = cVar9 - 3U;
        if ((byte)(cVar9 - 3U) < 0x80) {
          pcVar12[0xf] = -0x80;
        }
        cVar9 = pcVar12[0x10];
        pcVar12[0x10] = cVar9 - 4U;
        if ((byte)(cVar9 - 4U) < 0x60) {
          pcVar12[0x10] = '`';
        }
        cVar9 = pcVar12[0x13];
        pcVar12[0x11] = '\0';
        pcVar12[0x13] = cVar9 - 3U;
        if ((byte)(cVar9 - 3U) < 0xc0) {
          pcVar12[0x13] = -0x40;
        }
        cVar9 = pcVar12[0x14];
        pcVar12[0x14] = cVar9 - 4U;
        if ((byte)(cVar9 - 4U) < 0x80) {
          pcVar12[0x14] = -0x80;
        }
        cVar9 = pcVar12[0x15];
        pcVar12[0x15] = cVar9 - 6U;
        if ((byte)(cVar9 - 6U) < 0x20) {
          pcVar12[0x15] = ' ';
        }
        break;
      case 'G':
        cVar9 = pcVar12[1];
        pcVar12[1] = cVar9 + 1U;
        if ((0x1f < (byte)(cVar9 + 1U)) || (pcVar12[2] == '\0')) goto LAB_artisans__80087388;
        local_68 = (int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3);
        local_64 = (int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5);
        local_60 = (int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7);
        uVar8 = rand();
        local_68 = local_68 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_64 = local_64 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_60 = local_60 + -1 + (uVar8 & 2);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_68;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + (short)local_64;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_60;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 9) - (short)local_68;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 0xb) - (short)local_64;
        pcVar12[0x13] = pcVar12[0x13] + -2;
        pcVar12[0x15] = pcVar12[0x15] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -2;
        pcVar12[0x10] = pcVar12[0x10] + -3;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0xd) - (short)local_60;
        pcVar12[0x11] = pcVar12[0x11] + -3;
        break;
      case 'H':
        cVar9 = pcVar12[1];
        pcVar12[1] = cVar9 + 1U;
        if ((0x2f < (byte)(cVar9 + 1U)) || (pcVar12[2] == '\0')) goto LAB_artisans__80087388;
        local_70 = (int)*(short *)(pcVar12 + 3) - (int)*(short *)(pcVar12 + 9) >> 1;
        local_6c = (int)*(short *)(pcVar12 + 5) - (int)*(short *)(pcVar12 + 0xb) >> 1;
        local_68 = (int)*(short *)(pcVar12 + 7) - (int)*(short *)(pcVar12 + 0xd) >> 1;
        uVar8 = rand();
        local_70 = local_70 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_6c = local_6c + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_68 = local_68 + -1 + (uVar8 & 2);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_70;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + (short)local_6c;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)local_68;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 3) + (short)local_70 * -2;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 5) + (short)local_6c * -2;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 7) + (short)local_68 * -2;
        break;
      case 'M':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar4 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_6c = CONCAT22(local_6c._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar4;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        sVar4 = sVar4 + 1;
        local_70 = CONCAT22(sVar4,sVar11);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar4;
        cVar9 = pcVar12[1];
        pcVar12[1] = cVar9 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
        if (0x1f < (byte)(cVar9 + 1U)) goto LAB_artisans__80087388;
        break;
      case 'N':
        cVar9 = pcVar12[1];
        pcVar12[1] = cVar9 + 1U;
        if ((0x27 < (byte)(cVar9 + 1U)) || (pcVar12[2] == '\0')) goto LAB_artisans__80087388;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        iVar7 = rand();
        *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar7 & 2);
        uVar8 = rand();
        iVar7 = (*(ushort *)(pcVar12 + 0x13) - 1) + (uVar8 & 2);
        *(short *)(pcVar12 + 0x13) = (short)iVar7;
        if (2 < iVar7 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar12 + 0x13) = 2;
        }
        if (*(short *)(pcVar12 + 0x13) < -4) {
          *(undefined2 *)(pcVar12 + 0x13) = 0xfffc;
        }
        pcVar12[0xb] = pcVar12[0xb] + -2;
        pcVar12[0xd] = pcVar12[0xd] + -1;
        pcVar12[0xc] = pcVar12[0xc] + -2;
        break;
      case 'O':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        local_70 = CONCAT22(sVar10,sVar11);
        sVar4 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_6c = CONCAT22(local_6c._2_2_,sVar4);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar10;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar4;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar9 = pcVar12[1];
        pcVar12[1] = cVar9 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar4;
        if ((0x17 < (byte)(cVar9 + 1U)) || (pcVar12[2] == '\0')) goto LAB_artisans__80087388;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        pcVar12[0x13] = pcVar12[0x13] + -3;
        pcVar12[0x10] = pcVar12[0x10] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -4;
        if (5 < (byte)pcVar12[0x15]) {
          pcVar12[0x15] = pcVar12[0x15] - 6;
        }
        break;
      case 'P':
        sVar11 = *(short *)(pcVar12 + 9) - *(short *)(pcVar12 + 3);
        sVar4 = *(short *)(pcVar12 + 0xb) - *(short *)(pcVar12 + 5);
        local_70 = CONCAT22(sVar4,sVar11);
        sVar10 = *(short *)(pcVar12 + 7);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar4;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (*(short *)(pcVar12 + 0xd) - sVar10);
        sVar10 = (*(short *)(pcVar12 + 0xd) - sVar10) + -1;
        local_6c = CONCAT22(local_6c._2_2_,sVar10);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar4;
        cVar9 = pcVar12[1];
        pcVar12[1] = cVar9 + 1U;
        bVar2 = (byte)(cVar9 + 1U) < 0x20;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
LAB_artisans__80087370:
        if (bVar2) {
LAB_artisans__80087378:
          if (pcVar12[2] != '\0') break;
        }
LAB_artisans__80087388:
        FUN_80053608(pcVar14);
      }
      pcVar12 = pcVar12 + 0x20;
      pcVar15 = pcVar15 + 0x20;
      result = result + 0x10;
      pcVar14 = pcVar14 + 0x20;
    } while (*pcVar12 != -1);
  }
  return;
}



void Artisans_CreateParticle(int param_1,undefined4 param_2,Vec2 *param_3,int *param_4)

{
  bool bVar1;
  undefined uVar2;
  short extraout_var;
  undefined *ptr_maybeToParticle;
  undefined *puVar3;
  uint uVar4;
  short extraout_var_00;
  short extraout_var_01;
  int iVar5;
  uint uVar6;
  short sVar7;
  int iVar8;
  int *piVar9;
  int iVar10;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int aiStack_80 [4];
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  int local_4c;
  int local_48;
  int local_40;
  int local_30;
  
  iVar10 = 0;
  if (0 < param_1) {
    local_30 = 0;
    local_40 = param_1;
    do {
      uVar2 = (undefined)param_2;
      switch(param_2) {
      case 0:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
        *ptr_maybeToParticle = uVar2;
        ptr_maybeToParticle[2] = 0;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 0x18),param_4);
        *(undefined2 *)(ptr_maybeToParticle + 0x1e) = 0;
        ptr_maybeToParticle[10] = 0x18;
        iVar5 = rand();
        ptr_maybeToParticle[0xf] = 0x2e;
        ptr_maybeToParticle[0xb] = (char)iVar5;
        ptr_maybeToParticle[0xc] = 0x80;
        ptr_maybeToParticle[0xd] = 0x80;
        ptr_maybeToParticle[0xe] = 0x80;
        goto LAB_artisans__80087df4;
      case 1:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
        *ptr_maybeToParticle = uVar2;
        ptr_maybeToParticle[2] = 0;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(ptr_maybeToParticle + 0x1e) = 0;
        if (bVar1) {
          uVar2 = 8;
        }
        else {
          uVar2 = 0x10;
        }
        ptr_maybeToParticle[10] = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[0xb] = (char)iVar5;
        uVar2 = 0x60;
        goto LAB_artisans__80087ddc;
      case 2:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
        *ptr_maybeToParticle = uVar2;
        ptr_maybeToParticle[2] = 0;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
        uVar6 = rand();
        local_90 = (uVar6 & 0x3f) - 0x20;
        uVar6 = rand();
        local_8c = (uVar6 & 0x3f) - 0x20;
        local_88 = 0x1e;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 0x18),&local_90);
        *(undefined2 *)(ptr_maybeToParticle + 0x1e) = 0;
        ptr_maybeToParticle[10] = 0x20;
        iVar5 = rand();
        ptr_maybeToParticle[0xf] = 0x2e;
        ptr_maybeToParticle[0xb] = (char)iVar5;
        ptr_maybeToParticle[0xc] = 0x80;
        ptr_maybeToParticle[0xd] = 0x80;
        ptr_maybeToParticle[0xe] = 0x80;
        goto LAB_artisans__80087df4;
      case 6:
        piVar9 = (int *)param_3->x;
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(3);
        *ptr_maybeToParticle = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[2] = (byte)iVar5 & 0xf;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3[1].y);
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 4) =
             *(short *)(ptr_maybeToParticle + 4) + -0x3f + ((ushort)iVar5 & 0x7e);
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 6) =
             *(short *)(ptr_maybeToParticle + 6) + -0x3f + ((ushort)iVar5 & 0x7e);
        iVar5 = rand();
        *(int **)(ptr_maybeToParticle + 0x18) = &param_3[1].y;
        *(ushort *)(ptr_maybeToParticle + 8) =
             *(short *)(ptr_maybeToParticle + 8) + -0x100 + ((ushort)iVar5 & 0x1ff);
        *(short *)(ptr_maybeToParticle + 0x1c) = (short)piVar9[1];
        iVar5 = *piVar9;
        ptr_maybeToParticle[10] = 0x20;
        ptr_maybeToParticle[0xb] = 0x14;
        *(short *)(ptr_maybeToParticle + 0x1e) = (short)(iVar5 >> 6);
        if (*(char *)((int)&param_3[9].x + 1) == '\0') {
          if (levelIDPortalExit != 0x32) {
            ptr_maybeToParticle[0xc] = 0x80;
            goto LAB_artisans__80087724;
          }
switchD_artisans__80087698_caseD_1:
          ptr_maybeToParticle[0xc] = 0x80;
LAB_artisans__80087714:
          ptr_maybeToParticle[0xd] = 0x80;
          ptr_maybeToParticle[0xe] = 0;
          goto switchD_artisans__80087698_caseD_8;
        }
        uVar6 = rand();
        switch(uVar6 & 7) {
        case 0:
          ptr_maybeToParticle[0xc] = 0x80;
          ptr_maybeToParticle[0xd] = 0;
          ptr_maybeToParticle[0xe] = 0;
          goto switchD_artisans__80087698_caseD_8;
        case 1:
          goto switchD_artisans__80087698_caseD_1;
        case 2:
          ptr_maybeToParticle[0xc] = 0;
          goto LAB_artisans__80087714;
        case 3:
          ptr_maybeToParticle[0xc] = 0;
LAB_artisans__80087724:
          ptr_maybeToParticle[0xd] = 0x80;
          break;
        case 4:
          ptr_maybeToParticle[0xc] = 0;
          ptr_maybeToParticle[0xd] = 0;
          break;
        case 5:
          ptr_maybeToParticle[0xc] = 0x80;
          ptr_maybeToParticle[0xd] = 0;
          break;
        case 6:
          ptr_maybeToParticle[0xc] = 0x80;
          ptr_maybeToParticle[0xd] = 0x40;
          ptr_maybeToParticle[0xe] = 0;
          goto switchD_artisans__80087698_caseD_8;
        case 7:
          ptr_maybeToParticle[0xc] = 0;
          ptr_maybeToParticle[0xd] = 0x40;
          break;
        default:
          goto switchD_artisans__80087698_caseD_8;
        }
        ptr_maybeToParticle[0xe] = 0x80;
switchD_artisans__80087698_caseD_8:
        ptr_maybeToParticle[0xf] = 0x2c;
        ptr_maybeToParticle[0x11] = 0;
        ptr_maybeToParticle[0x10] = 0;
        break;
      case 9:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
        *ptr_maybeToParticle = uVar2;
        ptr_maybeToParticle[2] = 0;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 0x18),param_4);
        *(undefined2 *)(ptr_maybeToParticle + 0x1e) = 0;
        ptr_maybeToParticle[10] = 0x18;
        iVar5 = rand();
        ptr_maybeToParticle[0xb] = (char)iVar5;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar2 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              ptr_maybeToParticle[0xc] = 0x80;
              ptr_maybeToParticle[0xd] = 0x80;
              ptr_maybeToParticle[0xe] = 0x80;
              goto LAB_artisans__800877ec;
            }
            ptr_maybeToParticle[0xc] = 0xe0;
          }
          else {
            ptr_maybeToParticle[0xc] = 0xf0;
            uVar2 = 0x60;
          }
          ptr_maybeToParticle[0xd] = uVar2;
          ptr_maybeToParticle[0xe] = 0;
        }
        else {
          ptr_maybeToParticle[0xc] = 0xff;
          ptr_maybeToParticle[0xd] = 0;
          ptr_maybeToParticle[0xe] = 0;
        }
LAB_artisans__800877ec:
        ptr_maybeToParticle[0xf] = 0x2e;
        goto LAB_artisans__80087df4;
      case 10:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(3);
        *ptr_maybeToParticle = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[2] = (byte)iVar5 & 0x1f;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),(int *)&spyro);
        ptr_maybeToParticle[10] = 0x18;
        ptr_maybeToParticle[0xb] = 0xf;
        ptr_maybeToParticle[0xc] = (&DAT_8006e438)[local_30];
        ptr_maybeToParticle[0xd] = (&DAT_8006e439)[local_30];
        uVar2 = (&DAT_8006e43a)[local_30];
        ptr_maybeToParticle[0xf] = 0x2c;
        ptr_maybeToParticle[0x11] = 4;
        ptr_maybeToParticle[0x10] = 0;
        ptr_maybeToParticle[0xe] = uVar2;
        *(short *)(ptr_maybeToParticle + 0x18) = (short)(((local_40 - iVar10) * 0x1000) / 5);
        break;
      case 0xc:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
        *ptr_maybeToParticle = uVar2;
        ptr_maybeToParticle[3] = 1;
        ptr_maybeToParticle[0x11] = 4;
        sVar7 = *(short *)((int)&param_3[6].y + 2);
        if (sVar7 == 0x22) {
          Vec3Copy(aiStack_80,&param_3[1].y);
        }
        else if ((sVar7 == 0xad) || (sVar7 == 0xb5)) {
          iVar5 = (int)param_4 >> 0x18;
          if (iVar5 < 6) {
            puVar3 = (undefined *)0x8006e4e0;
            goto LAB_artisans__80087998;
          }
          ptr_maybeToParticle[1] = 5;
          ptr_maybeToParticle[0x11] = 0x16;
          Vec3Copy(aiStack_80,(int *)(iVar5 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar7 == 0x78) {
            puVar3 = &DAT_8006e570;
          }
          else {
            puVar3 = &DAT_8006e498;
            iVar5 = iVar10;
LAB_artisans__80087998:
            puVar3 = puVar3 + iVar5 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 4,puVar3,aiStack_80);
          Vec3Add(aiStack_80,aiStack_80,&param_3[1].y);
        }
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),aiStack_80);
        ptr_maybeToParticle[0xd] = (char)((uint)param_4 >> 8);
        ptr_maybeToParticle[0xc] = (char)param_4;
        ptr_maybeToParticle[0xe] = (char)((uint)param_4 >> 0x10);
        ptr_maybeToParticle[0xf] = 0x2e;
        iVar5 = rand();
        ptr_maybeToParticle[10] = ((byte)iVar5 & 7) + 0x10;
        iVar5 = rand();
        ptr_maybeToParticle[0xb] = (char)iVar5;
        ptr_maybeToParticle[0x10] = 0;
        break;
      case 0xe:
        iVar5 = Vec2EstimateOctagonalDistance(param_3,(Vec2 *)&cameraPosition);
        if (iVar5 < 0x8000) {
          ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
          *ptr_maybeToParticle = uVar2;
          ptr_maybeToParticle[2] = 0;
          ptr_maybeToParticle[3] = 1;
          Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
          Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 0x18),param_4);
          *(undefined2 *)(ptr_maybeToParticle + 0x1e) = 0;
          ptr_maybeToParticle[10] = 0x40;
          iVar8 = rand();
          ptr_maybeToParticle[0xb] = (char)iVar8;
          if (iVar5 < 0x6001) {
            uVar2 = 0x80;
          }
          else {
            uVar2 = (undefined)(0x8000 - iVar5 >> 6);
          }
          ptr_maybeToParticle[0xf] = 0x2e;
          ptr_maybeToParticle[0xc] = uVar2;
          ptr_maybeToParticle[0xd] = uVar2;
          ptr_maybeToParticle[0xe] = uVar2;
          goto LAB_artisans__80087df4;
        }
        break;
      case 0x16:
        iVar5 = Vec2EstimateOctagonalDistance(param_3,(Vec2 *)&cameraPosition);
        if (iVar5 < 0x8000) {
          ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
          *ptr_maybeToParticle = uVar2;
          iVar8 = rand();
          ptr_maybeToParticle[2] = (byte)iVar8 & 0xf;
          ptr_maybeToParticle[3] = 1;
          Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
          uVar6 = rand();
          *(short *)(ptr_maybeToParticle + 4) =
               *(short *)(ptr_maybeToParticle + 4) +
               (short)((int)(((uVar6 & 0xfff) - 0x7ff) * 300) >> 0xc);
          uVar6 = rand();
          *(short *)(ptr_maybeToParticle + 6) =
               *(short *)(ptr_maybeToParticle + 6) +
               (short)((int)(((uVar6 & 0xfff) - 0x7ff) * 300) >> 0xc);
          uVar6 = rand();
          param_4 = (int *)((int)param_4 + ((uVar6 & 0x1e) - 0xf) & 0xff);
          *(short *)(ptr_maybeToParticle + 0x18) =
               (short)(sineWaveArray[(int)(param_4 + 0x10)] * 7 >> 0xb);
          sVar7 = sineWaveArray[(int)param_4];
          *(undefined2 *)(ptr_maybeToParticle + 0x1c) = 8;
          *(short *)(ptr_maybeToParticle + 0x1a) = (short)(sVar7 * 7 >> 0xb);
          iVar8 = rand();
          *(ushort *)(ptr_maybeToParticle + 0x1e) = ((ushort)iVar8 & 2) - 1;
          ptr_maybeToParticle[10] = 0xe0;
          iVar8 = rand();
          ptr_maybeToParticle[0xb] = (char)iVar8;
          if (iVar5 < 0x6001) {
            iVar5 = 0x40;
          }
          else {
            iVar5 = 0x8000 - iVar5 >> 7;
          }
          uVar2 = (undefined)(iVar5 >> 1);
          ptr_maybeToParticle[0xc] = uVar2;
          ptr_maybeToParticle[0xd] = uVar2;
          ptr_maybeToParticle[0xe] = (char)iVar5;
          ptr_maybeToParticle[0xf] = 0x2e;
          ptr_maybeToParticle[0x11] = 0xc;
          ptr_maybeToParticle[0x10] = 0;
        }
        break;
      case 0x18:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
        *ptr_maybeToParticle = uVar2;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 0x12),&param_3->x);
        ptr_maybeToParticle[10] = 0x30;
        ptr_maybeToParticle[0x11] = 8;
        *(short *)(ptr_maybeToParticle + 0x18) = (short)(iVar10 << 5);
        ptr_maybeToParticle[0xc] = 0x80;
        ptr_maybeToParticle[0xd] = 0x80;
        ptr_maybeToParticle[0xe] = 0x80;
        uVar2 = (undefined)(iVar10 << 4);
        ptr_maybeToParticle[0xb] = uVar2;
        ptr_maybeToParticle[0xf] = 0x2e;
        ptr_maybeToParticle[0x10] = 0;
        *(undefined2 *)(ptr_maybeToParticle + 0x1a) = 0x10;
        ptr_maybeToParticle[0x1c] = uVar2;
        ptr_maybeToParticle[0x1d] = (char)iVar10;
        break;
      case 0x1e:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
        *ptr_maybeToParticle = uVar2;
        ptr_maybeToParticle[2] = 0;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
        iVar5 = rand();
        *(short *)(ptr_maybeToParticle + 0x1e) = (short)iVar5 + (short)(iVar5 / 2) * -2 + 1;
        ptr_maybeToParticle[10] = 8;
        iVar5 = rand();
        ptr_maybeToParticle[0xb] = (char)iVar5;
        uVar2 = 0x40;
        goto LAB_artisans__80087ddc;
      case 0x21:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(2);
        *ptr_maybeToParticle = uVar2;
        ptr_maybeToParticle[2] = 0;
        ptr_maybeToParticle[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_70,(int *)&spyro);
          local_68 = spyro.unkown_heightRelated;
          uVar6 = rand();
          local_70 = local_70 + -0x1f + (uVar6 & 0x3e);
          uVar6 = rand();
          local_6c = local_6c + -0x1f + (uVar6 & 0x3e);
        }
        else {
          local_70 = 0x164;
          local_6c = 0;
          local_68 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_70,&local_70);
          Vec3Add(&local_70,&local_70,&spyro);
        }
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&local_70);
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 0x18),&param_3->x);
        *(undefined2 *)(ptr_maybeToParticle + 0x1e) = 0;
        ptr_maybeToParticle[10] = 0x10;
        iVar5 = rand();
        ptr_maybeToParticle[0xb] = (char)iVar5;
        uVar2 = 0x20;
LAB_artisans__80087ddc:
        ptr_maybeToParticle[0xf] = 0x2e;
        ptr_maybeToParticle[0xc] = uVar2;
        ptr_maybeToParticle[0xd] = uVar2;
        ptr_maybeToParticle[0xe] = uVar2;
LAB_artisans__80087df4:
        ptr_maybeToParticle[0x11] = 4;
        ptr_maybeToParticle[0x10] = 0;
        break;
      case 0x42:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(0);
        *ptr_maybeToParticle = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[2] = (byte)iVar5 & 0xf;
        ptr_maybeToParticle[3] = 1;
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 4) = (short)(param_3->x >> 2) + ((ushort)iVar5 & 0xf) + -8
        ;
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 6) = (short)(param_3->y >> 2) + ((ushort)iVar5 & 0xf) + -8
        ;
        iVar5 = rand();
        iVar8 = param_3[1].x;
        *(undefined2 *)(ptr_maybeToParticle + 0x10) = 0;
        *(undefined2 *)(ptr_maybeToParticle + 0x12) = 0;
        *(undefined2 *)(ptr_maybeToParticle + 0x14) = 0;
        ptr_maybeToParticle[10] = 2;
        *(ushort *)(ptr_maybeToParticle + 8) = (short)(iVar8 >> 2) + ((ushort)iVar5 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          ptr_maybeToParticle[0xc] = 0xff;
          goto LAB_artisans__80087f08;
        }
        uVar6 = rand();
        switch(uVar6 & 7) {
        case 0:
          ptr_maybeToParticle[0xc] = 0xff;
          ptr_maybeToParticle[0xd] = 0;
          ptr_maybeToParticle[0xe] = 0;
          break;
        case 1:
          ptr_maybeToParticle[0xc] = 0xff;
          goto LAB_artisans__80087f08;
        case 2:
          ptr_maybeToParticle[0xc] = 0;
LAB_artisans__80087f08:
          ptr_maybeToParticle[0xd] = 0xff;
          ptr_maybeToParticle[0xe] = 0;
          break;
        case 3:
          ptr_maybeToParticle[0xc] = 0;
          ptr_maybeToParticle[0xd] = 0xff;
          goto LAB_artisans__80087f50;
        case 4:
          ptr_maybeToParticle[0xc] = 0;
          ptr_maybeToParticle[0xd] = 0;
          goto LAB_artisans__80087f50;
        case 5:
          ptr_maybeToParticle[0xc] = 0xff;
          ptr_maybeToParticle[0xd] = 0;
          goto LAB_artisans__80087f50;
        case 6:
          ptr_maybeToParticle[0xc] = 0xff;
          ptr_maybeToParticle[0xd] = 0x80;
          ptr_maybeToParticle[0xe] = 0;
          break;
        case 7:
          ptr_maybeToParticle[0xc] = 0;
          ptr_maybeToParticle[0xd] = 0x80;
LAB_artisans__80087f50:
          ptr_maybeToParticle[0xe] = 0xff;
        }
        ptr_maybeToParticle[0xf] = 0x40;
        break;
      case 0x46:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(1);
        *ptr_maybeToParticle = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[2] = (byte)iVar5 & 0xf;
        ptr_maybeToParticle[3] = 1;
        uVar6 = rand();
        local_60 = (int)((int)param_4 * ((uVar6 & 0xfff) - 0x800)) >> 0xc;
        uVar6 = rand();
        local_5c = (int)((int)param_4 * ((uVar6 & 0xfff) - 0x800)) >> 0xc;
        uVar6 = rand();
        local_58 = (int)((int)param_4 * (uVar6 & 0xfff)) >> 0xc;
        *(short *)(ptr_maybeToParticle + 4) = (short)(param_3->x >> 2) + (short)local_60 * 4;
        *(short *)(ptr_maybeToParticle + 6) = (short)(param_3->y >> 2) + (short)local_5c * 4;
        sVar7 = (short)local_58;
        *(short *)(ptr_maybeToParticle + 8) = (short)(param_3[1].x >> 2) + sVar7 * 4;
        *(short *)(ptr_maybeToParticle + 10) =
             *(short *)(ptr_maybeToParticle + 4) + (short)local_60 * 2;
        *(short *)(ptr_maybeToParticle + 0xc) =
             *(short *)(ptr_maybeToParticle + 6) + (short)local_5c * 2;
        goto LAB_artisans__8008858c;
      case 0x47:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(1);
        *ptr_maybeToParticle = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[2] = (byte)iVar5 & 7;
        ptr_maybeToParticle[3] = 1;
        uVar6 = rand();
        local_60 = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_5c = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_58 = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(ptr_maybeToParticle + 4) = (short)(param_3->x >> 2) + (short)local_60 * 4;
        *(short *)(ptr_maybeToParticle + 6) = (short)(param_3->y >> 2) + (short)local_5c * 4;
        *(short *)(ptr_maybeToParticle + 8) = (short)(param_3[1].x >> 2) + (short)local_58 * 4;
        *(short *)(ptr_maybeToParticle + 10) = *(short *)(ptr_maybeToParticle + 4) + (short)local_60
        ;
        *(short *)(ptr_maybeToParticle + 0xc) =
             *(short *)(ptr_maybeToParticle + 6) + (short)local_5c;
        ptr_maybeToParticle[0x17] = 2;
        ptr_maybeToParticle[0x10] = 0xe0;
        ptr_maybeToParticle[0x11] = 0xe0;
        ptr_maybeToParticle[0x12] = 0x60;
        ptr_maybeToParticle[0x14] = 0xff;
        ptr_maybeToParticle[0x15] = 0xff;
        ptr_maybeToParticle[0x16] = 0xff;
        ptr_maybeToParticle[0x13] = 0x50;
        *(short *)(ptr_maybeToParticle + 0xe) =
             *(short *)(ptr_maybeToParticle + 8) + (short)local_58;
        break;
      case 0x4d:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(4);
        *ptr_maybeToParticle = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[2] = (byte)iVar5 & 0xf;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 10),&param_3->x);
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
        uVar6 = rand();
        CosScaled(uVar6 & 0xfff);
        *(short *)(ptr_maybeToParticle + 4) = *(short *)(ptr_maybeToParticle + 4) + extraout_var;
        uVar4 = rand();
        SinScaled(uVar4 & 0x7ff);
        *(short *)(ptr_maybeToParticle + 6) = *(short *)(ptr_maybeToParticle + 6) + extraout_var_00;
        SinScaled(uVar6 & 0xfff);
        ptr_maybeToParticle[0x17] = 0x7f;
        ptr_maybeToParticle[0x11] = 0x40;
        ptr_maybeToParticle[0x12] = 0x60;
        ptr_maybeToParticle[0x16] = 0xc0;
        ptr_maybeToParticle[0x13] = 0x50;
        ptr_maybeToParticle[0x10] = 0x80;
        ptr_maybeToParticle[0x14] = 0xff;
        ptr_maybeToParticle[0x15] = 0x80;
        *(short *)(ptr_maybeToParticle + 8) = *(short *)(ptr_maybeToParticle + 8) + extraout_var_01;
        break;
      case 0x4e:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(0);
        *ptr_maybeToParticle = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[2] = (byte)iVar5 & 0x1f;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 4) =
             *(short *)(ptr_maybeToParticle + 4) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 6) =
             *(short *)(ptr_maybeToParticle + 6) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 8) =
             *(short *)(ptr_maybeToParticle + 8) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 0x10) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 0x12) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(ptr_maybeToParticle + 0x14) = -((ushort)iVar5 & 1);
        iVar5 = rand();
        ptr_maybeToParticle[0xc] = (byte)iVar5 | 0x80;
        uVar6 = rand();
        uVar6 = (uVar6 & 0x7f) + 0x60;
        ptr_maybeToParticle[0xd] = (char)uVar6;
        if ((byte)ptr_maybeToParticle[0xc] < uVar6) {
          ptr_maybeToParticle[0xd] = ptr_maybeToParticle[0xc];
        }
        iVar5 = rand();
        ptr_maybeToParticle[0xe] = ((byte)iVar5 & 0x3f) + 0x40;
        ptr_maybeToParticle[0xf] = 0x40;
        ptr_maybeToParticle[10] = 2;
        break;
      case 0x4f:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(1);
        *ptr_maybeToParticle = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[2] = (byte)iVar5 & 0xf;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 10),&param_3->x);
        Vec3Add(&local_60,param_3,param_4);
        uVar6 = rand();
        local_60 = local_60 + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_5c = local_5c + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_58 = local_58 + -0x40 + (uVar6 & 0x7f);
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&local_60);
        ptr_maybeToParticle[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar5 = rand();
          ptr_maybeToParticle[0x10] = (byte)iVar5 | 0xc0;
          iVar5 = rand();
          ptr_maybeToParticle[0x11] = ((byte)iVar5 & 0x3f) + 0xa0;
          ptr_maybeToParticle[0x12] = 0;
          iVar5 = rand();
          ptr_maybeToParticle[0x14] = (byte)iVar5 | 0xe0;
          iVar5 = rand();
          ptr_maybeToParticle[0x15] = (byte)iVar5 | 0xe0;
          ptr_maybeToParticle[0x16] = 0x80;
        }
        else {
          iVar5 = rand();
          ptr_maybeToParticle[0x10] = (byte)iVar5 | 0xc0;
          iVar5 = rand();
          ptr_maybeToParticle[0x11] = ((byte)iVar5 & 0x3f) + 0x40;
          iVar5 = rand();
          ptr_maybeToParticle[0x12] = ((byte)iVar5 & 0x3f) + 0x40;
          iVar5 = rand();
          ptr_maybeToParticle[0x14] = (byte)iVar5 | 0xe0;
          iVar5 = rand();
          ptr_maybeToParticle[0x15] = ((byte)iVar5 & 0x1f) + 0xa0;
          iVar5 = rand();
          ptr_maybeToParticle[0x16] = ((byte)iVar5 & 0x1f) + 0xa0;
        }
        ptr_maybeToParticle[0x13] = 0x50;
        break;
      case 0x50:
        ptr_maybeToParticle = (undefined *)AllocateParticleToBuffer(1);
        *ptr_maybeToParticle = uVar2;
        iVar5 = rand();
        ptr_maybeToParticle[2] = (byte)iVar5 & 0xf;
        ptr_maybeToParticle[3] = 1;
        Vec3ScaleDownBy4((short *)(ptr_maybeToParticle + 4),&param_3->x);
        uVar6 = rand();
        local_50 = (int)((int)param_4 * ((uVar6 & 0xfff) - 0x800)) >> 0xc;
        uVar6 = rand();
        local_4c = (int)((int)param_4 * ((uVar6 & 0xfff) - 0x800)) >> 0xc;
        uVar6 = rand();
        local_48 = (int)((int)param_4 * (uVar6 & 0xfff)) >> 0xc;
        *(short *)(ptr_maybeToParticle + 4) =
             *(short *)(ptr_maybeToParticle + 4) + (short)local_50 * 4;
        *(short *)(ptr_maybeToParticle + 6) =
             *(short *)(ptr_maybeToParticle + 6) + (short)local_4c * 4;
        sVar7 = (short)local_48;
        *(short *)(ptr_maybeToParticle + 8) = *(short *)(ptr_maybeToParticle + 8) + sVar7 * 4;
        *(short *)(ptr_maybeToParticle + 10) =
             *(short *)(ptr_maybeToParticle + 4) + (short)local_50 * 2;
        *(short *)(ptr_maybeToParticle + 0xc) =
             *(short *)(ptr_maybeToParticle + 6) + (short)local_4c * 2;
LAB_artisans__8008858c:
        ptr_maybeToParticle[0x17] = 2;
        ptr_maybeToParticle[0x10] = 0xe0;
        ptr_maybeToParticle[0x11] = 0xc0;
        ptr_maybeToParticle[0x13] = 0x50;
        ptr_maybeToParticle[0x12] = 0;
        ptr_maybeToParticle[0x14] = 0xff;
        ptr_maybeToParticle[0x15] = 0xff;
        ptr_maybeToParticle[0x16] = 0x80;
        *(short *)(ptr_maybeToParticle + 0xe) = *(short *)(ptr_maybeToParticle + 8) + sVar7 * 2;
      }
      local_30 = local_30 + 4;
      iVar10 = iVar10 + 1;
    } while (iVar10 < local_40);
  }
  return;
}



void FUN_beast__8007b7a0(void)

{
  ExitFairyOrBalloonist();
  spyro.headAngle.pitch = 0;
  spyro.headAngle.pad2 = 0;
  spyro.unkown1._1_1_ = 0;
  if (ptr_SparxMoby != 0) {
    *(undefined *)(ptr_SparxMoby + 0x50) = 0x10;
  }
  return;
}



void FUN_beast__8007b7e4(void)

{
  undefined4 uVar1;
  LevelIDS LVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int *outputArray;
  uint local_78;
  uint local_74;
  int local_70;
  short local_68;
  short local_66;
  short local_64;
  uint local_60;
  uint local_5c;
  int local_58;
  uint local_50;
  uint local_4c;
  int local_48;
  uint local_40;
  uint local_3c;
  int local_38;
  uint local_30;
  uint local_2c;
  int local_28;
  
  if (balloonistState < 4) {
    DAT_800700f8 = 0;
    DAT_800700f4 = DAT_8007784c;
    FUN_800522c0(&DAT_800700f4,0);
  }
  switch(balloonistState) {
  case 0:
    if (0x5f < DAT_800777ec) {
      iVar6 = CosScaled(DAT_80077838);
      cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar6 * DAT_8007783c >> 0xc);
      iVar6 = SinScaled(DAT_80077838);
      cameraPosition.z = DAT_80077840;
      cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar6 * DAT_8007783c >> 0xc);
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      balloonistState = 1;
      DAT_800777ec = 0;
      spyro.RelativeSparxAngle.roll = (char)((int)DAT_8007781c >> 4);
      spyro.nextAnim = '\0';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    iVar6 = SinScaled((DAT_800777ec << 0xb) / 0x60 + -0x400);
    iVar6 = iVar6 + 0x1000;
    if (DAT_800777ec == gameSpeedMultiplyer) {
      if (ptr_SparxMoby != (int *)0x0) {
        *(undefined *)(ptr_SparxMoby + 0x14) = 0;
        *(undefined *)((int)ptr_SparxMoby + 0x51) = 0;
        if (*(int *)(*ptr_SparxMoby + 0xc) != 0) {
          SetToZero();
          *(undefined4 *)(*ptr_SparxMoby + 0xc) = 0;
        }
      }
      backupSuperFlameTimer = superFlameTimer;
      Unk_UpdateSpyroAfterEvents(1);
      spyro.currentAnim = '\x01';
      spyro.nextAnim = '\x01';
      spyro.nextKeyframe = '\x01';
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = 0x4a0;
      DAT_80077810 = 0;
      DAT_80077814 = 0x164;
      Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&DAT_8007780c,&DAT_8007780c);
      Vec3Add(&DAT_8007780c,&DAT_8007780c,DAT_8007784c + 0xc);
      DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      DAT_8007781c = ATan2Scaled(local_78,local_74,1);
    }
    if (DAT_800777ec < 0x18) {
      iVar3 = SinScaled((DAT_800777ec << 0xb) / 0x18 + -0x400);
      iVar3 = iVar3 + 0x1000;
      if ((DAT_8007781c - DAT_80077818 & 0xfff) < 0x801) {
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
      }
      else {
LAB_beast__8007bc58:
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 - (iVar4 * iVar3 >> 0xd);
      }
LAB_beast__8007bc78:
      spyro.RelativeSparxAngle.roll = (char)(iVar3 >> 4);
      uVar1._0_1_ = '\b';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
LAB_beast__8007bc88:
      spyro._88_4_ = uVar1;
    }
    else {
      if (0x47 < DAT_800777ec) {
        iVar3 = SinScaled(((DAT_800777ec + -0x48) * 0x800) / 0x18 + -0x400);
        iVar3 = iVar3 + 0x1000;
        if (DAT_800777ec - gameSpeedMultiplyer < 0x48) {
          DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
          spyro.nextAnim = '\x03';
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\b';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          DAT_8007781c = (uint)*(byte *)(DAT_8007784c + 0x46) * 0x10 - 0x800 & 0xfff;
        }
        if (0x800 < (DAT_8007781c - DAT_80077818 & 0xfff)) goto LAB_beast__8007bc58;
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
        goto LAB_beast__8007bc78;
      }
      iVar3 = SinScaled(((DAT_800777ec + -0x18) * 0x800) / 0x30 + -0x400);
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      Vec3Scale(&local_78,&local_78,iVar3 + 0x1000);
      Vec3ScaleDownByPowerOfTwo((int *)&local_78,0xd);
      Vec3Add(&spyro,&DAT_80077800,&local_78);
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      spyro._88_4_ = (int)uVar5 >> 1;
      if ((int)spyro._88_4_ < 4) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      uVar1._0_1_ = '\x10';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
      if (0x10 < (int)spyro._88_4_) goto LAB_beast__8007bc88;
    }
    spyro.RelativeSparxAngle.yaw = '\0';
    spyro.RelativeSparxAngle.pitch = '\0';
    spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
    UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
    FUN_80049fac(1);
    FlameButAlsoNotFlame(gameSpeedMultiplyer);
    if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
    }
    else {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
    }
    iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
    iVar4 = CosScaled(iVar3);
    cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar4 * iVar7 >> 0xc);
    iVar3 = SinScaled(iVar3);
    local_78 = 0x220;
    local_70 = 0x340;
    local_74 = 0;
    cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar3 * iVar7 >> 0xc);
    cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
    Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&local_78,&local_78);
    Vec3Add(&local_78,&local_78,DAT_8007784c + 0xc);
    Vec3Subtract((int *)&local_78,(int *)&local_78,&cameraPosition.x);
    if (DAT_800777ec < 0x20) {
      local_68 = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      local_66 = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      local_64 = (short)iVar6;
      iVar6 = FUN_8001796c((int)local_68,(int)cameraAngle.roll);
      cameraAngle.roll = cameraAngle.roll + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_66,(int)cameraAngle.pitch);
      cameraAngle.pitch = cameraAngle.pitch + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_64,(int)cameraAngle.yaw);
      cameraAngle.yaw = cameraAngle.yaw + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
    }
    else {
      cameraAngle.roll = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      cameraAngle.yaw = (short)iVar6;
    }
    (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
    Maybe_SoundEffectProcessing();
    break;
  case 1:
    if (balloonistDialogue < 0x1e) {
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x51) {
        return;
      }
      iVar6 = balloonistDialogue % 6;
      if (iVar6 == 0) {
        iVar3 = balloonistDialogue + 1;
      }
      else if (iVar6 < 3) {
        if ((balloonistDialogue < 3) && (requirementArtisans < 2)) {
          (*ptr_OverlayBalloonistStayHere)();
          iVar3 = balloonistDialogue;
        }
        else if (balloonistDialogue == 0xe) {
          do {
            iVar6 = rand();
            iVar6 = iVar6 % 5;
            if ((iVar6 == 0) && (DAT_80076fec == 0)) {
              iVar3 = 0x21;
LAB_beast__8007c280:
              balloonistDialogue = iVar3;
            }
            else {
              if ((iVar6 == 1) && (DAT_80077004 == 0)) {
                iVar3 = 0x22;
                goto LAB_beast__8007c280;
              }
              if ((iVar6 == 2) && (DAT_80077008 == 0)) {
                iVar3 = 0x23;
                goto LAB_beast__8007c280;
              }
              if (((iVar6 == 3) && (iVar3 = 0x24, DAT_80077018 < 2)) ||
                 ((iVar6 == 4 && (iVar3 = 0x25, DAT_80077024 == 0)))) goto LAB_beast__8007c280;
            }
            iVar3 = balloonistDialogue;
          } while (balloonistDialogue == 0xe);
        }
        else {
          balloonistDialogue = 0x1e;
          iVar3 = balloonistDialogue;
        }
      }
      else if (iVar6 == 3) {
        iVar3 = balloonistDialogue + 2;
      }
      else {
        iVar3 = 0x1f;
        if (iVar6 == 4) {
          iVar3 = balloonistDialogue + 1;
        }
      }
      balloonistDialogue = iVar3;
      DAT_800777ec = 0;
      return;
    }
    if (balloonistDialogue == 0x1e) {
      iVar6 = 1;
      do {
        if ((&unlockedHWs)[iVar6] != '\x02') break;
        iVar6 = iVar6 + 1;
      } while (iVar6 < 6);
      if ((currentButtonOneFrame & UP_BUTTON) == 0) {
        if ((currentButtonOneFrame & DOWN_BUTTON) != 0) {
          balloonistCursorPlacement = balloonistCursorPlacement + 1;
          if (iVar6 <= balloonistCursorPlacement) {
            balloonistCursorPlacement = 0;
          }
          goto LAB_beast__8007c38c;
        }
      }
      else {
        balloonistCursorPlacement = balloonistCursorPlacement + -1;
        if (balloonistCursorPlacement < 0) {
          balloonistCursorPlacement = iVar6 + -1;
        }
LAB_beast__8007c38c:
        DAT_800777ec = 0x20;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        levelID = balloonistCursorPlacement * 10;
        if (levelIDPortalExit <= (int)levelID) {
          levelID = levelID + ARTISANS_ID;
        }
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)levelID / 10 + -1;
        return;
      }
    }
    else {
      if (1 < balloonistDialogue - 0x1fU) {
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
          return;
        }
        if (DAT_800777ec < 0x51) {
          return;
        }
        if ((balloonistDialogue == 0x24) || (balloonistDialogue == 0x26)) {
          balloonistCursorPlacement = 0;
          balloonistDialogue = 0x1e;
          balloonistRandomGreeting = 1;
          return;
        }
        if (balloonistDialogue == 0x25) {
          DAT_800777ec = 0;
          balloonistDialogue = 0x26;
          return;
        }
        if (balloonistDialogue == 0x21) {
          LVar2 = STONE_HILL_ID;
        }
        else if (balloonistDialogue == 0x22) {
          LVar2 = DRY_CANYON_ID;
        }
        else {
          LVar2 = CLIFF_TOWN_ID;
          if (balloonistDialogue != 0x23) goto LAB_beast__8007c668;
        }
        levelID = LVar2;
LAB_beast__8007c668:
        balloonistDropoffLocation = balloonistDialogue + -0x1b;
        DAT_800777ec = 0;
        balloonistDialogue = 0x20;
        return;
      }
      if ((currentButtonOneFrame & (UP_BUTTON|DOWN_BUTTON)) != 0) {
        DAT_800777ec = 0x20;
        balloonistCursorPlacement = 1 - balloonistCursorPlacement;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        if (balloonistDialogue != 0x1f) {
          balloonistState = 2;
          DAT_800777ec = 0;
          return;
        }
        levelID = levelIDPortalExit + ARTISANS_ID;
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)(levelIDPortalExit + ARTISANS_ID) / 10 + -1;
        return;
      }
      if (balloonistDialogue != 0x1f) {
        balloonistCursorPlacement = 0;
        balloonistDialogue = 0x1e;
        balloonistRandomGreeting = 1;
        return;
      }
    }
    (*ptr_OverlayBalloonistStayHere)();
    break;
  case 2:
    if (DAT_800777ec < 0x66) {
      iVar6 = SinScaled((DAT_800777ec * 0x800) / 0x66 + -0x400);
      iVar6 = iVar6 + 0x1000;
      if (DAT_800777ec == gameSpeedMultiplyer) {
        *(undefined *)((int)DAT_80077850 + 0x4a) = 0xff;
        DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                   cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
        Vec3Subtract((int *)&local_60,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
        DAT_80077824 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        DAT_8007782c = (int)cameraAngle.roll;
        DAT_80077830 = (int)cameraAngle.pitch;
        DAT_80077834 = (int)cameraAngle.yaw;
        DAT_80077828 = cameraPosition.z;
        DAT_8007783c = 0xe00;
        DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 - 0x480 & 0xfff;
        DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
        DAT_80077848 = *(int *)(DAT_8007784c + 0x14) + 0x488;
        Vec3Copy(&DAT_80077800,(int *)&spyro);
        Vec3Copy(&DAT_8007780c,(int *)(DAT_8007784c + 0xc));
        spyro.currentKeyfame = spyro.nextKeyframe;
        spyro.nextAnim = '\x05';
        spyro.nextKeyframe = '\0';
        spyro.maybe_AnimSpeedRelated = '\0';
        spyro.animSpeed = '\a';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (DAT_800777ec < 0x30) {
        spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec) / 0x30;
        spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec) / 0x30;
        iVar3 = SinScaled(DAT_800777ec << 5);
        spyro.position.z = DAT_80077808 + (iVar3 * 10) / 0x24;
        spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
        UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
        FUN_80049fac(1);
      }
      else {
        if (DAT_800777ec - gameSpeedMultiplyer < 0x30) {
          DAT_80077808 = DAT_80077808 + 0x325;
          DAT_80077800 = DAT_8007780c;
          DAT_80077804 = DAT_80077810;
          Vec3Copy(&DAT_8007780c,(int *)((int)DAT_80077850 + 0xc));
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\x04';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
        }
        iVar3 = DAT_800777ec + -0x36;
        if (0x35 < DAT_800777ec - gameSpeedMultiplyer) {
          spyro.animSpeed = '\a';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * iVar3) / 0x30;
          spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * iVar3) / 0x30;
          iVar3 = SinScaled(iVar3 * 0x20);
          spyro.position.z = DAT_80077808 + (iVar3 >> 2);
        }
      }
      if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_60,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      uVar5 = Vec3CalculateLengthE((int *)&local_60,flag2D);
      iVar3 = ATan2Scaled(uVar5,-local_58,1);
      local_66 = (short)iVar3;
      iVar3 = ATan2Scaled(local_60,local_5c,1);
      local_64 = (short)iVar3;
      iVar3 = FUN_8001796c((int)local_66,DAT_80077830);
      cameraAngle.pitch = (short)DAT_80077830 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      iVar3 = FUN_8001796c((int)local_64,DAT_80077834);
      cameraAngle.yaw = (short)DAT_80077834 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      *(int *)((int)DAT_80077850 + 0x14) =
           DAT_80077844 + ((DAT_80077848 - DAT_80077844) * iVar6 >> 0xd);
    }
    else {
      balloonistState = 3;
      DAT_800777ec = 0;
    }
    break;
  case 3:
    if (0x7f < DAT_800777ec) {
      DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                 cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
      Vec3Subtract((int *)&local_50,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
      DAT_80077824 = Vec3CalculateLengthE((int *)&local_50,flag2D);
      DAT_80077828 = cameraPosition.z;
      DAT_8007783c = 0x800;
      levelLoadState = 0;
      portalNumber = 0xffffffff;
      canFlyIn = 0;
      portalToExitFromInHW = 0;
      DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 + 0x390 & 0xfff;
      balloonistState = 4;
      DAT_800777ec = 0;
      DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
      LevelTransitionRelated(1);
      ArrayCopy((int *)&DAT_80071e9c,DAT_80077850,0x58);
      DAT_80077850 = &DAT_80071e9c;
      if (DAT_800785e8 < 0x80200000) {
        outputArray = (int *)(DAT_80078a44 + -0x400c);
      }
      else {
        outputArray = (int *)&DAT_801fe000;
      }
      ArrayCopy(outputArray,DAT_800769f8,0x4000);
      iVar3 = (int)DAT_800769f8;
      iVar6 = outputArray[0xe] - (int)DAT_800769f8;
      DAT_800769f8 = outputArray;
      outputArray[0xe] = (int)outputArray + iVar6;
      *(int *)(DAT_800769f8[0xe] + 0x14) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x14) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x18) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x18) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x24) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x24) - iVar3);
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      spyro.position.x = DAT_8007780c;
      DAT_80077828 = cameraPosition.z;
      spyro.position.y = DAT_80077810;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      spyro.nextAnim = '\0';
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.unkown3 = '\x03';
      spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    }
    if (DAT_800777ec < 0x40) {
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0xc00);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    else {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * 0x4b;
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0x800);
      cameraPosition.z = DAT_80077828 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    Vec3Subtract((int *)&local_50,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_50,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_48,1);
    cameraAngle.pitch = (short)iVar6;
    local_30 = local_50;
    local_2c = local_4c;
    goto LAB_beast__8007d444;
  case 5:
    if (levelLoadState < 0xd) {
      LevelTransitionRelated(1);
    }
    if (DAT_800777ec < 0x100) {
      iVar6 = SinScaled(((DAT_800777ec << 0xb) >> 8) + -0x400);
      iVar6 = iVar6 + 0x1000;
      if ((DAT_80077820 - DAT_80077838 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_8007783c + ((int)((DAT_80077824 - DAT_8007783c) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077840 + ((DAT_80077828 - DAT_80077840) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_40,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      local_38 = (local_38 + 0x200) - (iVar6 >> 4);
      uVar5 = Vec3CalculateLengthE((int *)&local_40,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_38,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_40,local_3c,1);
      cameraAngle.yaw = (short)iVar6;
    }
    else if (levelLoadState == 0xd) {
      balloonistState = 6;
      DAT_800777ec = 0;
      LevelTransitionRelated(1);
    }
    break;
  case 6:
    if (0x7f < DAT_800777ec) {
      balloonistState = 7;
      DAT_800777ec = 0;
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = *(int *)(&DAT_8006eadc + balloonistDropoffLocation * 8);
      DAT_80077810 = *(int *)(&DAT_8006eae0 + balloonistDropoffLocation * 8);
      DAT_80077814 = spyro.position.z;
      iVar6 = MobyUpdatePosition(&DAT_8007780c,0x10000);
      DAT_80077814 = iVar6 + 0x164;
      spyro.nextAnim = '\x05';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x06';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      DAT_80077828 = cameraPosition.z;
    }
    if (DAT_800777ec < 0x40) {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * -0x4b;
      iVar6 = SinScaled(DAT_800777ec * -0x10);
      cameraPosition.z = DAT_80077828 + (iVar6 * 3 >> 2);
    }
    else {
      if (DAT_800777ec - gameSpeedMultiplyer < 0x40) {
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14) + -0x4b;
      }
      iVar6 = SinScaled(DAT_800777ec * -0x10 + 0x400);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + (iVar6 * 3 >> 2);
    }
    Vec3Subtract((int *)&local_30,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_30,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_28,1);
    cameraAngle.pitch = (short)iVar6;
LAB_beast__8007d444:
    iVar6 = ATan2Scaled(local_30,local_2c,1);
    cameraAngle.yaw = (short)iVar6;
    spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    spyro.RelativeSparxAngle.roll = *(char *)((int)DAT_80077850 + 0x46) + -0x80;
    break;
  case 7:
    if (DAT_800777ec < 0x40) {
      spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec >> 6);
      spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec >> 6);
      iVar6 = SinScaled(DAT_800777ec * 0x18 + 0x200);
      spyro.position.z = DAT_80077814 + (iVar6 * (DAT_80077808 - DAT_80077814)) / 0xb50;
      spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      FUN_80049fac(1);
      if (0x1f < DAT_800777ec) {
        *(int *)((int)DAT_80077850 + 0x14) =
             *(int *)((int)DAT_80077850 + 0x14) + DAT_800777ec * gameSpeedMultiplyer;
      }
    }
    else {
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      Unk_UpdateSpyroAfterEvents(1);
      spyro.isMovementLocked = 0x10;
      DAT_80076ea0 = &spyro;
      maybe_cameraRelated = 0;
      unk_cameraRelatedLocking = 0;
      flyInAnimation = &DAT_8006c8bc;
      unk_camera_related_angle = spyro.angle.yaw;
      CameraRotation(&cameraPosition);
      ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
      DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
      ChangeFlyInCamera();
      Maybe_HudInPauseMenu(0);
      gameState = GAMESTATE_GAMEPLAY;
      DAT_8007579c = 1;
      isInDragonState = 0;
      Maybe_ResetHudTimers();
    }
  }
                    // WARNING: Read-only address (ram,0x80076fec) is written
                    // WARNING: Read-only address (ram,0x80077004) is written
                    // WARNING: Read-only address (ram,0x80077008) is written
                    // WARNING: Read-only address (ram,0x80077018) is written
                    // WARNING: Read-only address (ram,0x80077024) is written
                    // WARNING: Read-only address (ram,0x8007784c) is written
  return;
}



void BeastBalloonistRelated(void)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  byte *text;
  char *pcVar6;
  undefined *puVar7;
  uint uVar8;
  uint uVar9;
  byte **ppbVar10;
  int local_e0;
  undefined4 local_dc;
  undefined4 local_d8;
  int local_d0;
  undefined4 local_cc;
  undefined4 local_c8;
  byte abStack_c0 [32];
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int local_80;
  int local_7c;
  undefined4 local_78;
  int local_70;
  int local_6c;
  undefined4 local_68;
  int local_60;
  int local_5c;
  undefined4 local_58;
  int local_50;
  int local_4c;
  undefined4 local_48;
  byte abStack_40 [40];
  
  uVar9 = ptr_hudMobys;
  if (balloonistState < 4) {
    if (balloonistState < 2) {
      sprintf((char *)abStack_c0,s__s_THE_BALLOONIST_beast__8007aa5c,
              (&PTR_s_RETURN_HOME_8006f880)[levelIDPortalExit / 10]);
      iVar2 = strlen((char *)abStack_c0);
      local_e0 = iVar2 * -8 + 0x108;
      local_dc = 0xcc;
      local_d8 = 0x1100;
      local_d0 = 0x10;
      local_cc = 1;
      local_c8 = 0x1400;
      DrawTextAll(abStack_c0,&local_e0,&local_d0,0x12,'\v');
      iVar2 = uVar9 - 0x58;
      if ((int)ptr_hudMobys <= iVar2) {
        iVar3 = 0;
        do {
          *(char *)(iVar2 + 0x46) =
               (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
          iVar2 = iVar2 + -0x58;
          iVar3 = iVar3 + 0xc;
        } while ((int)ptr_hudMobys <= iVar2);
      }
    }
    iVar2 = balloonistState;
    if (balloonistState == 1) {
      if (balloonistDialogue - 0x1eU < 3) {
        if (balloonistDialogue == 0x1e) {
          local_70 = 0xe;
          local_68 = 0x1600;
          local_78 = 0x1400;
          local_80 = 0xf0;
          local_6c = balloonistState;
          local_7c = 0x24;
          if (balloonistRandomGreeting == 0) {
            pcVar6 = s_HOP_ON__SPYRO__beast__8007aa70;
          }
          else if (balloonistRandomGreeting == 1) {
            pcVar6 = s_NEED_A_LIFT__beast__8007aa80;
          }
          else {
            pcVar6 = s_WHERE_TO__SPYRO__beast__8007aa90;
          }
          DrawTextAll((byte *)pcVar6,&local_80,&local_70,0x10,'\v');
          local_80 = 0x110;
          uVar9 = ptr_hudMobys - 0x58;
          local_7c = local_7c + 0x14;
          DrawTextAll((byte *)s_STAY_HERE_beast__8007aaa4,&local_80,&local_70,0x10,'\v');
          local_7c = local_7c + 0xf;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          iVar3 = 1;
          iVar2 = 0;
          do {
            if ((levelIDPortalExit / 10 + -1 != iVar2) && ((&unlockedHWs)[iVar2] == '\x02')) {
              local_80 = 0x110;
              uVar9 = ptr_hudMobys - 0x58;
              DrawTextAll((&PTR_s_ARTISANS_8006f7d4)[iVar2],&local_80,&local_70,0x10,'\v');
              local_7c = local_7c + 0xf;
              if ((balloonistCursorPlacement == iVar3) && (ptr_hudMobys <= uVar9)) {
                iVar4 = 0;
                do {
                  *(char *)(uVar9 + 0x46) =
                       (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar4 & 0xff) + 0x40] >> 8);
                  uVar9 = uVar9 - 0x58;
                  iVar4 = iVar4 + 0xc;
                } while (ptr_hudMobys <= uVar9);
              }
              iVar3 = iVar3 + 1;
            }
            iVar2 = iVar2 + 1;
          } while (iVar2 < 6);
          DrawTextBox(0xe0,0x1d8,0x19,iVar3 * 0xf + 0x33);
          DrawLine(0xf0,0x2e,0x1a0,0x2e);
          local_80 = 0xf4;
          local_78 = 0x1100;
          local_7c = balloonistCursorPlacement * 0xf + 0x36;
          DrawArrow(&local_80,DAT_800777ec,0);
        }
        else if (balloonistDialogue - 0x1fU < 2) {
          DrawTextBox(0x48,0x1b8,0x1c,0x66);
          DrawLine(100,0x37,0x184,0x37);
          local_60 = 0x60;
          local_58 = 0x1100;
          local_5c = balloonistCursorPlacement * 0x13 + 0x43;
          DrawArrow(&local_60,DAT_800777ec,0);
          local_50 = 0x10;
          local_48 = 0x1400;
          local_5c = 0x2c;
          local_4c = iVar2;
          local_58 = 0x1100;
          local_60 = 0x60;
          if (balloonistDialogue == 0x1f) {
            pcVar6 = s_ARE_YOU_READY_TO_GO__beast__8007aab0;
          }
          else {
            pcVar6 = s_WOULD_YOU_LIKE_TO_GO__beast__8007aac8;
          }
          DrawTextAll((byte *)pcVar6,&local_60,&local_50,0x12,'\v');
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          local_5c = local_5c + 0x19;
          DrawTextAll((byte *)s_STAY_HERE_beast__8007aaa4,&local_60,&local_50,0x12,'\v');
          local_5c = local_5c + 0x13;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          if (balloonistDialogue == 0x1f) {
            puVar7 = (&PTR_s_ARTISANS_8006f7d4)[levelIDPortalExit / 10];
          }
          else {
            puVar7 = (&PTR_s_PEACE_KEEPERS_8006f7d8)[levelID + ((int)levelID / 10) * -4];
          }
          sprintf((char *)abStack_40,s_GO_TO__s_beast__8007aae0,puVar7);
          DrawTextAll(abStack_40,&local_60,&local_50,0x12,'\v');
          if ((balloonistCursorPlacement == 1) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
        }
      }
      else {
        DrawTextBox(0x48,0x1b8,0x1c,0x68);
        uVar9 = ptr_hudMobys;
        local_9c = 0x2c;
        local_98 = 0x1100;
        local_90 = 0x10;
        local_8c = iVar2;
        local_88 = 0x1400;
        uVar8 = (uint)(byte)(&DAT_8006f89c)[balloonistDialogue];
        if (uVar8 < (byte)(&DAT_8006f89d)[balloonistDialogue]) {
          ppbVar10 = &PTR_s_IF_YOU_PROVE_YOUR_8006f8c4 + uVar8;
          do {
            local_a0 = 0x5e;
            text = *ppbVar10;
            ppbVar10 = ppbVar10 + 1;
            DrawTextAll(text,&local_a0,&local_90,0x12,'\v');
            local_9c = local_9c + 0x12;
            uVar8 = uVar8 + 1;
          } while ((int)uVar8 < (int)(uint)(byte)(&DAT_8006f89d)[balloonistDialogue]);
        }
        if (((int)DAT_800777ec < 0x50) &&
           (uVar8 = uVar9 + DAT_800777ec * -0x58, (int)ptr_hudMobys <= (int)uVar8)) {
          ptr_hudMobys = uVar8;
        }
        iVar2 = uVar9 - 0x58;
        if ((int)ptr_hudMobys <= iVar2) {
          iVar3 = 0;
          do {
            *(char *)(iVar2 + 0x46) =
                 (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
            iVar2 = iVar2 + -0x58;
            iVar3 = iVar3 + 0xc;
          } while ((int)ptr_hudMobys <= iVar2);
        }
        if (0x4f < (int)DAT_800777ec) {
          local_a0 = 0x19c;
          local_9c = 0x60;
          local_98 = 0x1100;
          DrawArrow(&local_a0,DAT_800777ec,0);
        }
      }
    }
    Maybe_DrawingMobyParticlesRelated();
    RenderObjs();
    if (balloonistState < 2) {
      ptr_maybeTextObj = 0;
      CopyHudToShaded();
      DrawShadedMobys();
    }
  }
  else {
    Maybe_DrawingMobyParticlesRelated();
    iVar2 = DAT_80077850;
    piVar5 = &DAT_8006fcf4;
    if (DAT_8006fcf4 != 0) {
      piVar1 = &DAT_8006fcf8;
      do {
        piVar5 = piVar1;
        piVar1 = piVar5 + 1;
      } while (*piVar5 != 0);
    }
    piVar5[1] = 0;
    *piVar5 = iVar2;
    RenderObjs();
  }
  RenderWorld();
  RenderAllSkyBoxes();
  RenderAllParticles();
  return;
}


/*
Unable to decompile 'FUN_beast__8007e18c'
Cause: Exception while decompiling beast::8007e18c: process: timeout

*/


int ** FUN_beast__80087ef0(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  int **ppiVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  short sVar7;
  uint uVar8;
  Spyro *pSVar9;
  int *piVar10;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar3 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar3 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar3 + 0x56) = (char)uVar8;
  if (param_1 < 0x102) {
    if (0xfe < param_1) {
LAB_beast__800883f0:
      piVar10 = *ppiVar3;
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppiVar3);
      uVar8 = rand();
      uVar4 = rand();
      uVar4 = uVar4 & 0x7ff;
      iVar5 = CosScaled(uVar4);
      iVar6 = CosScaled(uVar8 & 0xfff);
      *(short *)piVar10 = (short)((iVar5 >> 5) * iVar6 >> 0xc);
      iVar5 = CosScaled(uVar4);
      iVar6 = SinScaled(uVar8 & 0xfff);
      *(short *)((int)piVar10 + 2) = (short)((iVar5 >> 5) * iVar6 >> 0xc);
      iVar5 = SinScaled(uVar4);
      *(short *)(piVar10 + 1) = (short)(iVar5 >> 5);
      if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
        *(short *)piVar10 = *(short *)piVar10 + (short)(spyro.airMomentum.x >> 6);
        *(short *)((int)piVar10 + 2) =
             *(short *)((int)piVar10 + 2) + (short)(spyro.airMomentum.y >> 6);
        *(short *)(piVar10 + 1) = *(short *)(piVar10 + 1) + (short)(spyro.airMomentum.z >> 6);
      }
      ppiVar3[3] = ppiVar3[3] + *(short *)piVar10;
      ppiVar3[4] = ppiVar3[4] + *(short *)((int)piVar10 + 2);
      ppiVar3[5] = ppiVar3[5] + *(short *)(piVar10 + 1);
      iVar5 = rand();
      *(ushort *)((int)piVar10 + 6) = (ushort)iVar5 & 0xf;
      iVar5 = rand();
      *(ushort *)(piVar10 + 2) = (ushort)iVar5 & 0xf;
      iVar5 = rand();
      *(ushort *)((int)piVar10 + 10) = (ushort)iVar5 & 0xf;
      piVar10[4] = *(int *)(param_2 + 0x14) + -0x40;
      uVar8 = rand();
      piVar10[3] = 0x40 - (uVar8 & 0xf);
      if (2 < *(ushort *)((int)ppiVar3 + 0x36) - 0x135) {
        return ppiVar3;
      }
      bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
      ppiVar3[0x13] = (int *)0xa18618;
LAB_beast__80088590:
      *(byte *)((int)ppiVar3 + 0x4b) = bVar2 | 0x80;
      return ppiVar3;
    }
    if (param_1 == 0x4c) {
LAB_beast__80088870:
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
      FUN_800529cc(ppiVar3);
      return ppiVar3;
    }
    if (param_1 < 0x4d) {
      if (param_1 == 0x10) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        ppiVar3[5] = ppiVar3[5] + 0x80;
        Vec3Copy(piVar10 + 1,(int *)(ppiVar3 + 3));
        *(undefined *)((int)piVar10 + 0x13) = 0;
        *(undefined *)((int)piVar10 + 0x12) = 0;
        *(short *)(piVar10 + 5) = 0x708;
        return ppiVar3;
      }
      if (param_1 < 0x11) {
        if (param_1 == 0xe) {
LAB_beast__80088218:
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *piVar10 = 0;
          piVar10[1] = 0;
          piVar10[2] = 0x8c;
          *(undefined *)((int)piVar10 + 0xe) = 0;
          *(undefined *)((int)piVar10 + 0xf) = 0;
          *(undefined *)((int)piVar10 + 0x11) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(undefined *)((int)piVar10 + 0x13) = 0;
          uVar1 = 3;
          if (*(short *)(param_2 + 0x36) == 0xd) {
            uVar1 = 2;
          }
          *(undefined *)(piVar10 + 4) = uVar1;
          *(undefined *)(piVar10 + 5) = 0xff;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x40;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          FUN_800529cc(ppiVar3);
          ppiVar3[7] = (int *)0xffffffff;
          Vec3Copy(aiStack_48,(int *)(ppiVar3 + 3));
          local_40 = local_40 + 0x400;
          MobyUpdatePosition(aiStack_48,0x10000);
          FUN_800533d0(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          if (*(short *)((int)ppiVar3 + 0x36) == 0xe) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 0xc;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x53) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 1;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x54) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 2;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x55) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 3;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x56) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 4;
          }
          if (*(short *)((int)ppiVar3 + 0x36) != 0x57) {
            return ppiVar3;
          }
          *(undefined *)((int)ppiVar3 + 0x4f) = 5;
          return ppiVar3;
        }
        if (param_1 == 0xf) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          piVar10[2] = 0x8c;
          *(undefined *)(piVar10 + 4) = 3;
          *(undefined *)(piVar10 + 5) = 0xff;
          *piVar10 = 0;
          piVar10[1] = 0;
          *(undefined *)((int)piVar10 + 0xe) = 0;
          *(undefined *)((int)piVar10 + 0xf) = 0;
          *(undefined *)((int)piVar10 + 0x11) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(undefined *)((int)piVar10 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x10;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800526a8(ppiVar3);
          bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 1;
          goto LAB_beast__80088590;
        }
      }
      else {
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar3);
          return ppiVar3;
        }
        if (((0x21 < param_1) && (param_1 < 0x46)) && (0x42 < param_1)) goto LAB_beast__800883f0;
      }
    }
    else {
      if (param_1 == 0x97) goto LAB_beast__800883f0;
      if (param_1 < 0x98) {
        if (0x52 < param_1) {
          if (param_1 < 0x58) goto LAB_beast__80088218;
          if (param_1 == 0x78) {
            piVar10 = *ppiVar3;
            InitArrayRelated(ppiVar3);
            FUN_800526a8(ppiVar3);
            *(undefined *)((int)ppiVar3 + 0x49) = 0;
            *piVar10 = 0;
            *(undefined2 *)(piVar10 + 2) = 0;
            *(undefined2 *)((int)piVar10 + 6) = 0;
            *(undefined2 *)(piVar10 + 1) = 0;
            piVar10[3] = 0;
            piVar10[4] = 0;
            if (param_2 == 0) {
              return ppiVar3;
            }
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
            return ppiVar3;
          }
        }
      }
      else {
        if (param_1 < 0x9a) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          FUN_800529cc(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 0xd;
          return ppiVar3;
        }
        if (param_1 == 0xfb) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          FUN_800529cc(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 0xe;
          if (dragonState == 3) {
            uVar1 = 0x14;
          }
          else {
            uVar1 = 0x30;
            if (dragonState != 1) goto LAB_beast__800885fc;
          }
          *(undefined *)((int)ppiVar3 + 0x57) = uVar1;
LAB_beast__800885fc:
          uVar8 = rand();
          iVar5 = (uVar8 & 7) * 4;
          local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar5);
          local_34 = 0;
          local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar5);
          Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
          uVar8 = rand();
          local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
          Vec3Add(ppiVar3 + 3,param_2 + 0xc,&local_38);
          Vec3Copy(piVar10,&local_38);
          Vec3ScaleDownByPowerOfTwo(piVar10,2);
          uVar8 = rand();
          *piVar10 = *piVar10 + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar10[1] = piVar10[1] + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar10[2] = piVar10[2] + -0x7f + (uVar8 & 0xff);
          iVar5 = rand();
          *(char *)(ppiVar3 + 0x11) = (char)iVar5;
          iVar5 = rand();
          *(char *)((int)ppiVar3 + 0x45) = (char)iVar5;
          iVar5 = rand();
          *(char *)((int)ppiVar3 + 0x46) = (char)iVar5;
          iVar5 = rand();
          *(byte *)(piVar10 + 4) = (byte)iVar5 & 0xf;
          iVar5 = rand();
          *(byte *)((int)piVar10 + 0x11) = (byte)iVar5 & 0xf;
          iVar5 = rand();
          *(byte *)((int)piVar10 + 0x12) = (byte)iVar5 & 0xf;
          piVar10[3] = *(int *)(param_2 + 0x14);
          iVar5 = rand();
          *(byte *)((int)piVar10 + 0x13) = ((byte)iVar5 & 3) + 0x10;
          return ppiVar3;
        }
      }
    }
LAB_beast__80088898:
    InitArrayRelated(ppiVar3);
    pSVar9 = (Spyro *)(param_2 + 0xc);
    if (param_2 == 0) {
LAB_beast__800888b0:
      pSVar9 = &spyro;
    }
  }
  else {
    if (param_1 != 0x188) {
      if (param_1 < 0x189) {
        if (param_1 == 0x115) {
LAB_beast__8008875c:
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          FUN_800529cc(ppiVar3);
          *(undefined *)((int)ppiVar3 + 0x4f) = 2;
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *piVar10 = 0x40;
          return ppiVar3;
        }
        if (param_1 < 0x116) {
          if ((param_1 < 0x10e) && (0x103 < param_1)) goto LAB_beast__8008875c;
        }
        else if (0x134 < param_1) {
          if (param_1 < 0x138) goto LAB_beast__800883f0;
          if (param_1 == 0x147) goto LAB_beast__8008875c;
        }
      }
      else if (param_1 < 0x1c4) {
        if (0x1a9 < param_1) goto LAB_beast__80088870;
        if (param_1 == 0x18e) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0xff;
          ppiVar3[3] = (int *)0x1cc;
          ppiVar3[4] = (int *)&DAT_00000028;
          ppiVar3[5] = (int *)0x1000;
          FUN_800529cc(ppiVar3);
          *(undefined *)((int)ppiVar3 + 0x47) = 0x20;
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 0;
          return ppiVar3;
        }
        if ((0x18d < param_1) && (0x1a6 < param_1)) goto LAB_beast__800883f0;
      }
      else if ((param_1 < 0x1fd) && (0x1fa < param_1)) {
        InitArrayRelated(ppiVar3);
        if (param_2 == 0) {
          pSVar9 = &spyro;
        }
        else {
          pSVar9 = (Spyro *)(param_2 + 0xc);
        }
        Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
        ppiVar3[5] = ppiVar3[5] + 0x80;
        piVar10 = (int *)MobyUpdatePosition(ppiVar3 + 3,0x800);
        iVar5 = (int)piVar10 - (int)ppiVar3[5];
        if (iVar5 < 0) {
          iVar5 = -iVar5;
        }
        if (iVar5 < 0x800) {
          ppiVar3[5] = piVar10;
        }
        else {
          ppiVar3[5] = ppiVar3[5] + -0x80;
        }
        goto LAB_beast__800888c4;
      }
      goto LAB_beast__80088898;
    }
    InitArrayRelated(ppiVar3);
    *(undefined *)((int)ppiVar3 + 0x47) = 5;
    if (param_2 == 0) goto LAB_beast__800888b0;
    pSVar9 = (Spyro *)(param_2 + 0xc);
  }
  Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
LAB_beast__800888c4:
  FUN_800526a8(ppiVar3);
  return ppiVar3;
}



void FUN_beast__800888f8(int param_1)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  short sVar10;
  short sVar11;
  char *pcVar12;
  int iVar13;
  char *pcVar14;
  short *result;
  char *pcVar15;
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  undefined4 local_50;
  undefined4 local_4c;
  int local_48;
  int local_44;
  int local_40;
  int local_38;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    local_38 = param_1 << 1;
    cVar4 = (char)param_1;
    pcVar12 = ptr_headOfParticleBuffer + 1;
    pcVar15 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar14 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar14) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + (char)local_38;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_beast__80089a48;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_beast__80089a48;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_beast__80089a48;
      case '\x06':
        Vec3Copy(&local_70,*(int **)(pcVar12 + 0x17));
        iVar7 = (uint)(byte)pcVar12[1] << 6;
        iVar13 = local_68 + *(short *)(pcVar12 + 0x1d) * 0x40;
        iVar8 = iVar7;
        if (*(short *)(pcVar12 + 0x1b) < iVar7) {
          iVar8 = (int)*(short *)(pcVar12 + 0x1b);
        }
        iVar6 = CosScaled(iVar7);
        local_70 = local_70 + (iVar8 * iVar6 >> 0xc);
        iVar7 = SinScaled(iVar7);
        local_6c = local_6c + (iVar8 * iVar7 >> 0xc);
        local_68 = *(short *)(pcVar12 + 7) * 4 + 0x40;
        if ((iVar13 < local_68) || (200 < (byte)pcVar12[1])) goto LAB_beast__80089a60;
        Vec3ScaleDownBy4(result,&local_70);
        pcVar12[1] = pcVar12[1] + '\x01';
        break;
      case '\t':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[9] = pcVar12[9] + (char)local_38;
        goto LAB_beast__80089a48;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_beast__80089a60;
        Vec3Copy(&local_60,(int *)&spyro);
        iVar8 = CosScaled((int)*(short *)(pcVar12 + 0x17));
        local_60 = local_60 + (iVar8 >> 4);
        iVar8 = SinScaled((int)*(short *)(pcVar12 + 0x17));
        local_5c = local_5c + (iVar8 >> 4);
        local_58 = local_58 + 0x100;
        Vec3ScaleDownBy4(result,&local_60);
        sVar10 = *(short *)(pcVar12 + 0x17);
        *(short *)(pcVar12 + 0x17) = sVar10 + 0x40;
        iVar8 = CosScaled((int)(short)(sVar10 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar8 < 0) {
          iVar8 = -iVar8;
        }
        pcVar12[9] = (char)(iVar8 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar14 + 0x12);
        pcVar12[0xb] = pcVar12[0xb] + -8;
        pcVar12[0xc] = pcVar12[0xc] + -8;
        pcVar12[0xd] = pcVar12[0xd] + -8;
        if (pcVar12[0xb] == '\0') goto LAB_beast__80089a60;
        goto LAB_beast__80089a50;
      case '\f':
        pcVar12[10] = pcVar12[10] + '\b';
        pcVar12[9] = pcVar12[9] + '\x02';
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -8;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -8;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -8;
        }
        if ((*(uint *)(pcVar12 + 0xb) & 0xffffff) != 0) goto LAB_beast__80089a50;
        goto LAB_beast__80089a60;
      case '\x10':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + (char)local_38;
        pcVar12[0xb] = pcVar12[0xb] + -4;
        pcVar12[0xc] = pcVar12[0xc] + -4;
        pcVar12[0xd] = pcVar12[0xd] + -4;
        if (pcVar12[0xb] != '\0') goto LAB_beast__80089a50;
        goto LAB_beast__80089a60;
      case '\x11':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + (char)local_38;
        if (8 < (byte)pcVar12[1]) {
          pcVar12[0xb] = pcVar12[0xb] + -0x20;
        }
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        bVar3 = (byte)(cVar2 + 1U) < 0xc;
        pcVar12[0xc] = pcVar12[0xc] + -8;
        pcVar12[0xd] = pcVar12[0xd] + -4;
        goto LAB_beast__80089a48;
      case '\x18':
        if ((byte)pcVar12[0xb] < 0xf0) {
          pcVar12[0xb] = pcVar12[0xb] + 4;
        }
        if ((byte)pcVar12[0xc] < 0xf0) {
          pcVar12[0xc] = pcVar12[0xc] + 4;
        }
        if ((byte)pcVar12[0xd] < 0xf0) {
          pcVar12[0xd] = pcVar12[0xd] + 4;
        }
        pcVar12[0x1b] = pcVar12[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar8 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar8 = dragonTimerCurrentState;
        }
        *(short *)(pcVar12 + 0x17) = (short)((int)((uint)(byte)pcVar12[0x1c] * (0x48 - iVar8)) >> 3)
        ;
        iVar8 = ((int)((0x20 - (uint)(byte)pcVar12[0x1c]) * iVar8) >> 4) + 8;
        *(short *)(pcVar12 + 0x19) = (short)iVar8;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar12[0x1b] + 0x40] * (iVar8 * 0x10000 >> 0x10) >>
                    0xc);
        sVar10 = sineWaveArray[(byte)pcVar12[0x1b]];
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0x15) + *(short *)(pcVar12 + 0x17) + 0x20;
        *(short *)(pcVar12 + 5) =
             *(short *)(pcVar12 + 0x13) +
             (short)((int)sVar10 * (int)*(short *)(pcVar12 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar8 = (uint)(byte)pcVar12[0xb] - param_1;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + (char)local_38;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xb] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xc] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xc] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xd] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        bVar1 = pcVar12[1];
        pcVar12[0xd] = (char)iVar8;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_beast__80089a48;
      case 'B':
        iVar8 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar12[1] & 1U) != 0) {
              *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
              *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
              *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
              if ((pcVar12[1] & 2U) != 0) {
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x13) = *(short *)(pcVar12 + 0x13) + -1 + ((ushort)iVar7 & 2);
              }
            }
            iVar8 = iVar8 + 1;
            pcVar12[1] = pcVar12[1] + '\x01';
          } while (iVar8 < param_1);
        }
        bVar3 = (byte)pcVar12[1] < 0x18;
        goto LAB_beast__80089a48;
      case 'F':
        local_50._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_50._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_4c = CONCAT22(local_4c._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_50;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_50._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        iVar8 = rand();
        local_50._0_2_ = (short)local_50 + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        sVar10 = local_50._2_2_ + -1 + ((ushort)iVar8 & 2);
        local_50 = CONCAT22(sVar10,(short)local_50);
        if ((pcVar12[1] & 1U) != 0) {
          local_4c = CONCAT22(local_4c._2_2_,(short)local_4c + -1);
        }
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_50;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_4c;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_beast__80089a60;
        cVar2 = pcVar12[0xf];
        pcVar12[0xf] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0x80) {
          pcVar12[0xf] = -0x80;
        }
        cVar2 = pcVar12[0x10];
        pcVar12[0x10] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x60) {
          pcVar12[0x10] = '`';
        }
        cVar2 = pcVar12[0x13];
        pcVar12[0x11] = '\0';
        pcVar12[0x13] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0xc0) {
          pcVar12[0x13] = -0x40;
        }
        cVar2 = pcVar12[0x14];
        pcVar12[0x14] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x80) {
          pcVar12[0x14] = -0x80;
        }
        cVar2 = pcVar12[0x15];
        pcVar12[0x15] = cVar2 - 6U;
        if ((byte)(cVar2 - 6U) < 0x20) {
          pcVar12[0x15] = ' ';
        }
        break;
      case 'G':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_beast__80089a60;
        local_48 = (int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3);
        local_44 = (int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5);
        local_40 = (int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7);
        uVar9 = rand();
        local_48 = local_48 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_44 = local_44 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_48;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + (short)local_44;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_40;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 9) - (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 0xb) - (short)local_44;
        pcVar12[0x13] = pcVar12[0x13] + -2;
        pcVar12[0x15] = pcVar12[0x15] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -2;
        pcVar12[0x10] = pcVar12[0x10] + -3;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0xd) - (short)local_40;
        pcVar12[0x11] = pcVar12[0x11] + -3;
        break;
      case 'H':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x2f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_beast__80089a60;
        local_50 = (int)*(short *)(pcVar12 + 3) - (int)*(short *)(pcVar12 + 9) >> 1;
        local_4c = (int)*(short *)(pcVar12 + 5) - (int)*(short *)(pcVar12 + 0xb) >> 1;
        local_48 = (int)*(short *)(pcVar12 + 7) - (int)*(short *)(pcVar12 + 0xd) >> 1;
        uVar9 = rand();
        local_50 = local_50 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_4c = local_4c + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_48 = local_48 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_50;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + (short)local_4c;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)local_48;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 3) + (short)local_50 * -2;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 5) + (short)local_4c * -2;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 7) + (short)local_48 * -2;
        break;
      case 'M':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_4c = CONCAT22(local_4c._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        sVar5 = sVar5 + 1;
        local_50 = CONCAT22(sVar5,sVar11);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
        if (0x1f < (byte)(cVar2 + 1U)) goto LAB_beast__80089a60;
        break;
      case 'N':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x27 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_beast__80089a60;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar8 & 2);
        uVar9 = rand();
        iVar8 = (*(ushort *)(pcVar12 + 0x13) - 1) + (uVar9 & 2);
        *(short *)(pcVar12 + 0x13) = (short)iVar8;
        if (2 < iVar8 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar12 + 0x13) = 2;
        }
        if (*(short *)(pcVar12 + 0x13) < -4) {
          *(undefined2 *)(pcVar12 + 0x13) = 0xfffc;
        }
        pcVar12[0xb] = pcVar12[0xb] + -2;
        pcVar12[0xd] = pcVar12[0xd] + -1;
        pcVar12[0xc] = pcVar12[0xc] + -2;
        break;
      case 'O':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        local_50 = CONCAT22(sVar10,sVar11);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_4c = CONCAT22(local_4c._2_2_,sVar5);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar10;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar5;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_beast__80089a60;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        pcVar12[0x13] = pcVar12[0x13] + -3;
        pcVar12[0x10] = pcVar12[0x10] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -4;
        if (5 < (byte)pcVar12[0x15]) {
          pcVar12[0x15] = pcVar12[0x15] - 6;
        }
        break;
      case 'P':
        sVar11 = *(short *)(pcVar12 + 9) - *(short *)(pcVar12 + 3);
        sVar5 = *(short *)(pcVar12 + 0xb) - *(short *)(pcVar12 + 5);
        local_50 = CONCAT22(sVar5,sVar11);
        sVar10 = *(short *)(pcVar12 + 7);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (*(short *)(pcVar12 + 0xd) - sVar10);
        sVar10 = (*(short *)(pcVar12 + 0xd) - sVar10) + -1;
        local_4c = CONCAT22(local_4c._2_2_,sVar10);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        bVar3 = (byte)(cVar2 + 1U) < 0x20;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
LAB_beast__80089a48:
        if (bVar3) {
LAB_beast__80089a50:
          if (pcVar12[2] != '\0') break;
        }
LAB_beast__80089a60:
        FUN_80053608(pcVar14);
      }
      pcVar12 = pcVar12 + 0x20;
      pcVar15 = pcVar15 + 0x20;
      result = result + 0x10;
      pcVar14 = pcVar14 + 0x20;
    } while (*pcVar12 != -1);
  }
  return;
}



void FUN_beast__80089ab8(int param_1,undefined4 param_2,int **param_3,int *param_4)

{
  bool bVar1;
  undefined uVar2;
  short extraout_var;
  undefined *puVar3;
  uint uVar4;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  short sVar8;
  int *piVar9;
  int iVar10;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int aiStack_80 [4];
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  int local_4c;
  int local_48;
  int local_40;
  int local_30;
  
  iVar10 = 0;
  if (0 < param_1) {
    local_30 = 0;
    local_40 = param_1;
    do {
      uVar2 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar2;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xf] = 0x2e;
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_beast__8008a344;
      case 1:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar2;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        if (bVar1) {
          uVar2 = 8;
        }
        else {
          uVar2 = 0x10;
        }
        puVar5[10] = uVar2;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar2 = 0x60;
        goto LAB_beast__8008a32c;
      case 2:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar2;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_90 = (uVar7 & 0x3f) - 0x20;
        uVar7 = rand();
        local_8c = (uVar7 & 0x3f) - 0x20;
        local_88 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),&local_90);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x20;
        iVar6 = rand();
        puVar5[0xf] = 0x2e;
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_beast__8008a344;
      case 6:
        piVar9 = *param_3;
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar2;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)(param_3 + 3));
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(int ***)(puVar5 + 0x18) = param_3 + 3;
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x100 + ((ushort)iVar6 & 0x1ff);
        *(short *)(puVar5 + 0x1c) = (short)piVar9[1];
        iVar6 = *piVar9;
        puVar5[10] = 0x20;
        puVar5[0xb] = 0x14;
        *(short *)(puVar5 + 0x1e) = (short)(iVar6 >> 6);
        if (*(char *)((int)param_3 + 0x49) == '\0') {
          if (levelIDPortalExit != 0x32) {
            puVar5[0xc] = 0x80;
            goto LAB_beast__80089dfc;
          }
switchD_beast__80089d70_caseD_1:
          puVar5[0xc] = 0x80;
LAB_beast__80089dec:
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          goto switchD_beast__80089d70_caseD_8;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          goto switchD_beast__80089d70_caseD_8;
        case 1:
          goto switchD_beast__80089d70_caseD_1;
        case 2:
          puVar5[0xc] = 0;
          goto LAB_beast__80089dec;
        case 3:
          puVar5[0xc] = 0;
LAB_beast__80089dfc:
          puVar5[0xd] = 0x80;
          break;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          break;
        case 5:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          break;
        case 6:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0x40;
          puVar5[0xe] = 0;
          goto switchD_beast__80089d70_caseD_8;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x40;
          break;
        default:
          goto switchD_beast__80089d70_caseD_8;
        }
        puVar5[0xe] = 0x80;
switchD_beast__80089d70_caseD_8:
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 0;
        puVar5[0x10] = 0;
        break;
      case 9:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar2;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar2 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar5[0xc] = 0x80;
              puVar5[0xd] = 0x80;
              puVar5[0xe] = 0x80;
              goto LAB_beast__80089ec4;
            }
            puVar5[0xc] = 0xe0;
          }
          else {
            puVar5[0xc] = 0xf0;
            uVar2 = 0x60;
          }
          puVar5[0xd] = uVar2;
          puVar5[0xe] = 0;
        }
        else {
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
        }
LAB_beast__80089ec4:
        puVar5[0xf] = 0x2e;
        goto LAB_beast__8008a344;
      case 10:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar2;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)&spyro);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_8006e438)[local_30];
        puVar5[0xd] = (&DAT_8006e439)[local_30];
        uVar2 = (&DAT_8006e43a)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar2;
        *(short *)(puVar5 + 0x18) = (short)(((local_40 - iVar10) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar2;
        puVar5[3] = 1;
        puVar5[0x11] = 4;
        sVar8 = *(short *)((int)param_3 + 0x36);
        if (sVar8 == 0x22) {
          Vec3Copy(aiStack_80,(int *)(param_3 + 3));
        }
        else if ((sVar8 == 0xad) || (sVar8 == 0xb5)) {
          iVar6 = (int)param_4 >> 0x18;
          if (iVar6 < 6) {
            puVar3 = (undefined *)0x8006e4e0;
            goto LAB_beast__8008a070;
          }
          puVar5[1] = 5;
          puVar5[0x11] = 0x16;
          Vec3Copy(aiStack_80,(int *)(iVar6 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar8 == 0x78) {
            puVar3 = &DAT_8006e570;
          }
          else {
            puVar3 = &DAT_8006e498;
            iVar6 = iVar10;
LAB_beast__8008a070:
            puVar3 = puVar3 + iVar6 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar3,aiStack_80);
          Vec3Add(aiStack_80,aiStack_80,param_3 + 3);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),aiStack_80);
        puVar5[0xd] = (char)((uint)param_4 >> 8);
        puVar5[0xc] = (char)param_4;
        puVar5[0xe] = (char)((uint)param_4 >> 0x10);
        puVar5[0xf] = 0x2e;
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 7) + 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0x10] = 0;
        break;
      case 0x10:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar2;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),(int *)(param_3 + 3));
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = (char)*param_4;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        iVar6 = param_4[1];
        puVar5[0xf] = 0x2e;
        uVar2 = (undefined)(iVar6 << 3);
        puVar5[0xc] = uVar2;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xd] = uVar2;
        puVar5[0xe] = puVar5[0xc];
        break;
      case 0x11:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar2;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),(int *)(param_3 + 3));
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = (char)*param_4;
        puVar5[0xd] = (char)param_4[1];
        iVar6 = param_4[2];
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = (char)iVar6;
        break;
      case 0x18:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar2;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),(int *)param_3);
        puVar5[10] = 0x30;
        puVar5[0x11] = 8;
        *(short *)(puVar5 + 0x18) = (short)(iVar10 << 5);
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        uVar2 = (undefined)(iVar10 << 4);
        puVar5[0xb] = uVar2;
        puVar5[0xf] = 0x2e;
        puVar5[0x10] = 0;
        *(undefined2 *)(puVar5 + 0x1a) = 0x10;
        puVar5[0x1c] = uVar2;
        puVar5[0x1d] = (char)iVar10;
        break;
      case 0x21:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar2;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_70,(int *)&spyro);
          local_68 = spyro.unkown_heightRelated;
          uVar7 = rand();
          local_70 = local_70 + -0x1f + (uVar7 & 0x3e);
          uVar7 = rand();
          local_6c = local_6c + -0x1f + (uVar7 & 0x3e);
        }
        else {
          local_70 = 0x164;
          local_6c = 0;
          local_68 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_70,&local_70);
          Vec3Add(&local_70,&local_70,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_70);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),(int *)param_3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar2 = 0x20;
LAB_beast__8008a32c:
        puVar5[0xf] = 0x2e;
        puVar5[0xc] = uVar2;
        puVar5[0xd] = uVar2;
        puVar5[0xe] = uVar2;
LAB_beast__8008a344:
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x42:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar2;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        piVar9 = param_3[2];
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)((int)piVar9 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_beast__8008a458;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_beast__8008a458;
        case 2:
          puVar5[0xc] = 0;
LAB_beast__8008a458:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_beast__8008a4a0;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_beast__8008a4a0;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_beast__8008a4a0;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_beast__8008a4a0:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar2;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        uVar7 = rand();
        local_60 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_5c = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_58 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_60 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_5c * 4;
        sVar8 = (short)local_58;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + sVar8 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_60 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_5c * 2;
        goto LAB_beast__8008aadc;
      case 0x47:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar2;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        uVar7 = rand();
        local_60 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_5c = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_58 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_60 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_5c * 4;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + (short)local_58 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_60;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_5c;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_58;
        break;
      case 0x4d:
        puVar5 = (undefined *)AllocateParticleToBuffer(4);
        *puVar5 = uVar2;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        CosScaled(uVar7 & 0xfff);
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + extraout_var;
        uVar4 = rand();
        SinScaled(uVar4 & 0x7ff);
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + extraout_var_00;
        SinScaled(uVar7 & 0xfff);
        puVar5[0x17] = 0x7f;
        puVar5[0x11] = 0x40;
        puVar5[0x12] = 0x60;
        puVar5[0x16] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x10] = 0x80;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0x80;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar2;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar6 & 1);
        iVar6 = rand();
        puVar5[0xc] = (byte)iVar6 | 0x80;
        uVar7 = rand();
        uVar7 = (uVar7 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar7;
        if ((byte)puVar5[0xc] < uVar7) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar6 = rand();
        puVar5[0xe] = ((byte)iVar6 & 0x3f) + 0x40;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar2;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3Add(&local_60,param_3,param_4);
        uVar7 = rand();
        local_60 = local_60 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_5c = local_5c + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_58 = local_58 + -0x40 + (uVar7 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_60);
        puVar5[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0xa0;
          puVar5[0x12] = 0;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = (byte)iVar6 | 0xe0;
          puVar5[0x16] = 0x80;
        }
        else {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x12] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = ((byte)iVar6 & 0x1f) + 0xa0;
          iVar6 = rand();
          puVar5[0x16] = ((byte)iVar6 & 0x1f) + 0xa0;
        }
        puVar5[0x13] = 0x50;
        break;
      case 0x50:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar2;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_50 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_4c = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_48 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + (short)local_50 * 4;
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + (short)local_4c * 4;
        sVar8 = (short)local_48;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + sVar8 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_50 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_4c * 2;
LAB_beast__8008aadc:
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + sVar8 * 2;
      }
      local_30 = local_30 + 4;
      iVar10 = iVar10 + 1;
    } while (iVar10 < local_40);
  }
  return;
}



int ** FUN_blowhard__80083ab4(int param_1,int param_2)

{
  char cVar1;
  undefined uVar2;
  byte bVar3;
  short sVar4;
  int **ppiVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  uint uVar9;
  Spyro *pSVar10;
  int *piVar11;
  Vec2 *vecA;
  int aiStack_58 [2];
  int local_50;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar5 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar5 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar5 + 0x56) = (char)uVar8;
  if (param_1 < 0x9a) {
    if (0x97 < param_1) {
      InitArrayRelated(ppiVar5);
      *(undefined *)(ppiVar5 + 0x14) = 0x20;
      *(undefined *)((int)ppiVar5 + 0x52) = 0xff;
      FUN_800529cc(ppiVar5);
      *(undefined *)(ppiVar5 + 0x13) = 0;
      *(undefined *)((int)ppiVar5 + 0x4d) = 0;
      *(undefined *)((int)ppiVar5 + 0x4e) = 0;
      *(undefined *)((int)ppiVar5 + 0x4f) = 0xd;
      return ppiVar5;
    }
    if (param_1 == 0x27) {
      piVar11 = *ppiVar5;
      InitArrayRelated(ppiVar5);
      Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppiVar5);
      iVar6 = ATan2Scaled(cameraPosition.x - (int)ppiVar5[3],cameraPosition.y - (int)ppiVar5[4],0);
      *(char *)((int)ppiVar5 + 0x46) = (char)iVar6;
      ppiVar5[5] = ppiVar5[5] + -0x100;
      *piVar11 = 0x40;
      piVar11[1] = param_2;
      piVar11[2] = 1;
      return ppiVar5;
    }
    if (param_1 < 0x28) {
      if (param_1 == 0x10) {
        piVar11 = *ppiVar5;
        InitArrayRelated(ppiVar5);
        FUN_800526a8(ppiVar5);
        Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
        ppiVar5[5] = ppiVar5[5] + 0x80;
        Vec3Copy(piVar11 + 1,(int *)(ppiVar5 + 3));
        *(undefined *)((int)piVar11 + 0x13) = 0;
        *(undefined *)((int)piVar11 + 0x12) = 0;
        *(short *)(piVar11 + 5) = 0x708;
        return ppiVar5;
      }
      if (param_1 < 0x11) {
        if (param_1 == 0xe) {
LAB_blowhard__800841b8:
          piVar11 = *ppiVar5;
          InitArrayRelated(ppiVar5);
          *piVar11 = 0;
          piVar11[1] = 0;
          piVar11[2] = 0x8c;
          *(undefined *)((int)piVar11 + 0xe) = 0;
          *(undefined *)((int)piVar11 + 0xf) = 0;
          *(undefined *)((int)piVar11 + 0x11) = 0;
          *(undefined *)((int)piVar11 + 0x12) = 0;
          *(undefined *)((int)piVar11 + 0x13) = 0;
          uVar2 = 3;
          if (*(short *)(param_2 + 0x36) == 0xd) {
            uVar2 = 2;
          }
          *(undefined *)(piVar11 + 4) = uVar2;
          *(undefined *)(piVar11 + 5) = 0xff;
          *(undefined *)(ppiVar5 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar5 + 0x52) = 0x40;
          *(undefined *)((int)ppiVar5 + 0x49) = 2;
          *(undefined *)(ppiVar5 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar5 + 0x45) = 0;
          *(undefined *)((int)ppiVar5 + 0x46) = 0;
          Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
          FUN_800529cc(ppiVar5);
          ppiVar5[7] = (int *)0xffffffff;
          Vec3Copy(aiStack_48,(int *)(ppiVar5 + 3));
          local_40 = local_40 + 0x400;
          MobyUpdatePosition(aiStack_48,0x10000);
          FUN_800533d0(ppiVar5);
          *(undefined *)(ppiVar5 + 0x13) = 0;
          *(undefined *)((int)ppiVar5 + 0x4d) = 0;
          *(undefined *)((int)ppiVar5 + 0x4e) = 0;
          if (*(short *)((int)ppiVar5 + 0x36) == 0xe) {
            *(undefined *)((int)ppiVar5 + 0x4f) = 0xc;
          }
          sVar4 = *(short *)((int)ppiVar5 + 0x36);
          if (sVar4 == 0x53) {
            *(undefined *)((int)ppiVar5 + 0x4f) = 1;
            sVar4 = *(short *)((int)ppiVar5 + 0x36);
          }
          if (sVar4 == 0x54) {
            *(undefined *)((int)ppiVar5 + 0x4f) = 2;
          }
          sVar4 = *(short *)((int)ppiVar5 + 0x36);
          if (sVar4 == 0x55) {
            *(undefined *)((int)ppiVar5 + 0x4f) = 3;
            sVar4 = *(short *)((int)ppiVar5 + 0x36);
          }
          if (sVar4 == 0x56) {
            *(undefined *)((int)ppiVar5 + 0x4f) = 4;
          }
          if (*(short *)((int)ppiVar5 + 0x36) != 0x57) {
            return ppiVar5;
          }
          *(undefined *)((int)ppiVar5 + 0x4f) = 5;
          return ppiVar5;
        }
        if (param_1 == 0xf) {
          piVar11 = *ppiVar5;
          InitArrayRelated(ppiVar5);
          piVar11[2] = 0x8c;
          *(undefined *)(piVar11 + 4) = 3;
          *(undefined *)(piVar11 + 5) = 0xff;
          *piVar11 = 0;
          piVar11[1] = 0;
          *(undefined *)((int)piVar11 + 0xe) = 0;
          *(undefined *)((int)piVar11 + 0xf) = 0;
          *(undefined *)((int)piVar11 + 0x11) = 0;
          *(undefined *)((int)piVar11 + 0x12) = 0;
          *(undefined *)((int)piVar11 + 0x13) = 0;
          *(undefined *)((int)ppiVar5 + 0x49) = 2;
          *(undefined *)(ppiVar5 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar5 + 0x52) = 0x10;
          *(undefined *)(ppiVar5 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar5 + 0x45) = 0;
          *(undefined *)((int)ppiVar5 + 0x46) = 0;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800526a8(ppiVar5);
          bVar3 = *(byte *)((int)ppiVar5 + 0x4b);
          *(undefined *)(ppiVar5 + 0x13) = 0;
          *(undefined *)((int)ppiVar5 + 0x4d) = 0;
          *(undefined *)((int)ppiVar5 + 0x4e) = 0;
          *(undefined *)((int)ppiVar5 + 0x4f) = 1;
          goto LAB_blowhard__80084534;
        }
      }
      else {
        if (param_1 == 0x25) {
          piVar11 = *ppiVar5;
          InitArrayRelated(ppiVar5);
          ppiVar5[7] = (int *)0xffffffff;
          Vec3Copy(aiStack_58,(int *)(ppiVar5 + 3));
          local_50 = local_50 + 0x400;
          MobyUpdatePosition(aiStack_58,0x10000);
          FUN_800533d0(ppiVar5);
          bVar3 = *(byte *)(param_2 + 0x48);
          if (bVar3 == 0x52) {
            *(undefined *)(piVar11 + 4) = 2;
            sVar4 = 0x100;
LAB_blowhard__80083e64:
            *(short *)(piVar11 + 1) = sVar4;
            sVar4 = 0x2000;
LAB_blowhard__80083e6c:
            *(short *)((int)piVar11 + 6) = sVar4;
          }
          else if (bVar3 < 0x53) {
            if (bVar3 == 0x48) {
              *(undefined *)(piVar11 + 4) = 1;
              *(short *)(piVar11 + 1) = 0x40;
              sVar4 = 0xe00;
              goto LAB_blowhard__80083e6c;
            }
          }
          else if (bVar3 == 0x5c) {
            *(undefined *)(piVar11 + 4) = 3;
            sVar4 = 0x140;
            goto LAB_blowhard__80083e64;
          }
          ppiVar5[3] = (int *)(*(int *)(param_2 + 0xc) +
                              ((int)sineWaveArray[*(byte *)(param_2 + 0x46) + 0x40] >> 2));
          ppiVar5[4] = (int *)(*(int *)(param_2 + 0x10) +
                              ((int)sineWaveArray[*(byte *)(param_2 + 0x46)] >> 2));
          ppiVar5[5] = *(int **)(param_2 + 0x14);
          *piVar11 = param_2;
          piVar11[3] = 0;
          *(undefined *)(ppiVar5 + 0x12) = 0;
          uVar2 = *(undefined *)
                   (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar5 + 0x36)] + 0x38) + 0xc);
          *(undefined *)((int)ppiVar5 + 0x3d) = 0;
          *(undefined *)(ppiVar5 + 0xf) = 0;
          *(undefined *)((int)ppiVar5 + 0x3f) = 0;
          *(undefined *)((int)ppiVar5 + 0x3e) = 0;
          *(undefined *)((int)ppiVar5 + 0x41) = uVar2;
          goto LAB_blowhard__800847fc;
        }
        if (0x25 < param_1) {
          piVar11 = *ppiVar5;
          InitArrayRelated(ppiVar5);
          vecA = (Vec2 *)(ppiVar5 + 3);
          Vec3Copy((int *)vecA,(int *)(param_2 + 0xc));
          if (*(short *)(param_2 + 0x36) == 0x26) {
            uVar2 = *(undefined *)(param_2 + 0x46);
            *(undefined *)(ppiVar5 + 0x12) = 3;
            *(undefined *)(ppiVar5 + 0x10) = 0;
            *(undefined *)((int)ppiVar5 + 0x46) = uVar2;
            uVar2 = *(undefined *)
                     (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar5 + 0x36)] + 0x44) + 0xc);
            *(undefined *)(ppiVar5 + 0xf) = 3;
            *(undefined *)((int)ppiVar5 + 0x3d) = 3;
            *(undefined *)((int)ppiVar5 + 0x41) = uVar2;
            iVar6 = 3;
          }
          else {
            if (5 < *(byte *)(param_2 + 0x3f)) {
              iVar6 = CosScaled((uint)*(byte *)(param_2 + 0x46) << 4);
              ppiVar5[3] = (int *)((int)ppiVar5[3] + (iVar6 >> 2));
              iVar6 = SinScaled((uint)*(byte *)(param_2 + 0x46) << 4);
              ppiVar5[4] = (int *)((int)ppiVar5[4] + (iVar6 >> 2));
              ppiVar5[5] = ppiVar5[5] + 0x4b;
              *(undefined *)((int)ppiVar5 + 0x46) = *(undefined *)(param_2 + 0x46);
              uVar8 = Vec2EstimateOctagonalDistance(vecA,(Vec2 *)&spyro);
              iVar6 = ATan2Scaled(uVar8,spyro.position.z - (int)ppiVar5[5],0);
              uVar8 = iVar6 - (uint)*(byte *)(param_2 + 0x45) & 0xff;
              if (0x80 < uVar8) {
                uVar8 = uVar8 - 0x100;
              }
              uVar9 = uVar8;
              if ((int)uVar8 < -0x10) {
                uVar9 = 0xfffffff0;
              }
              cVar1 = (char)uVar9;
              if (0x10 < (int)uVar8) {
                cVar1 = '\x10';
              }
              *(byte *)((int)ppiVar5 + 0x45) = *(byte *)(param_2 + 0x45) + cVar1;
              *piVar11 = 0x80;
              *(undefined *)(ppiVar5 + 0x12) = 2;
              *(undefined *)(ppiVar5 + 0x10) = 0;
              uVar2 = *(undefined *)
                       (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar5 + 0x36)] + 0x40) + 0xc);
              *(undefined *)(ppiVar5 + 0xf) = 2;
              *(undefined *)((int)ppiVar5 + 0x3d) = 2;
              *(undefined *)((int)ppiVar5 + 0x41) = uVar2;
              (*ptr_OverlayCreateParticle)(4,7,vecA,0x10);
              goto LAB_blowhard__800847fc;
            }
            if (*(byte *)(param_2 + 0x3f) < 2) {
              ppiVar5[5] = ppiVar5[5] + 0x60;
              *(undefined *)((int)ppiVar5 + 0x46) = *(undefined *)(param_2 + 0x46);
            }
            else {
              ppiVar5[5] = ppiVar5[5] + 0x4b;
              uVar2 = *(undefined *)(param_2 + 0x46);
              *(undefined *)(ppiVar5 + 0x12) = 1;
              *(undefined *)(ppiVar5 + 0x10) = 0;
              *(undefined *)((int)ppiVar5 + 0x46) = uVar2;
              uVar2 = *(undefined *)
                       (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar5 + 0x36)] + 0x3c) + 0xc);
              *(undefined *)(ppiVar5 + 0xf) = 1;
              *(undefined *)((int)ppiVar5 + 0x3d) = 1;
              *(undefined *)((int)ppiVar5 + 0x41) = uVar2;
            }
            iVar6 = 2;
          }
          *piVar11 = iVar6;
          goto LAB_blowhard__800847fc;
        }
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar5);
          *(undefined *)(ppiVar5 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar5 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar5);
          return ppiVar5;
        }
      }
    }
    else if (param_1 < 0x58) {
      if (0x52 < param_1) goto LAB_blowhard__800841b8;
      if (0x42 < param_1) {
        if (param_1 < 0x46) goto LAB_blowhard__80084394;
        if (param_1 == 0x4c) goto LAB_blowhard__800847a8;
      }
    }
    else {
      if (param_1 == 0x78) {
        piVar11 = *ppiVar5;
        InitArrayRelated(ppiVar5);
        FUN_800526a8(ppiVar5);
        *(undefined *)((int)ppiVar5 + 0x49) = 0;
        *piVar11 = 0;
        *(undefined2 *)(piVar11 + 2) = 0;
        *(undefined2 *)((int)piVar11 + 6) = 0;
        *(undefined2 *)(piVar11 + 1) = 0;
        piVar11[3] = 0;
        piVar11[4] = 0;
        if (param_2 == 0) {
          return ppiVar5;
        }
        Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
        return ppiVar5;
      }
      if (param_1 == 0x97) goto LAB_blowhard__80084394;
    }
  }
  else if (param_1 < 0x138) {
    if (0x134 < param_1) {
LAB_blowhard__80084394:
      piVar11 = *ppiVar5;
      InitArrayRelated(ppiVar5);
      *(undefined *)(ppiVar5 + 0x14) = 0x20;
      Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppiVar5);
      uVar8 = rand();
      uVar9 = rand();
      uVar9 = uVar9 & 0x7ff;
      iVar6 = CosScaled(uVar9);
      iVar7 = CosScaled(uVar8 & 0xfff);
      *(short *)piVar11 = (short)((iVar6 >> 5) * iVar7 >> 0xc);
      iVar6 = CosScaled(uVar9);
      iVar7 = SinScaled(uVar8 & 0xfff);
      *(short *)((int)piVar11 + 2) = (short)((iVar6 >> 5) * iVar7 >> 0xc);
      iVar6 = SinScaled(uVar9);
      *(short *)(piVar11 + 1) = (short)(iVar6 >> 5);
      if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
        *(short *)piVar11 = *(short *)piVar11 + (short)(spyro.airMomentum.x >> 6);
        *(short *)((int)piVar11 + 2) =
             *(short *)((int)piVar11 + 2) + (short)(spyro.airMomentum.y >> 6);
        *(short *)(piVar11 + 1) = *(short *)(piVar11 + 1) + (short)(spyro.airMomentum.z >> 6);
      }
      ppiVar5[3] = ppiVar5[3] + *(short *)piVar11;
      ppiVar5[4] = ppiVar5[4] + *(short *)((int)piVar11 + 2);
      ppiVar5[5] = ppiVar5[5] + *(short *)(piVar11 + 1);
      iVar6 = rand();
      *(ushort *)((int)piVar11 + 6) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)(piVar11 + 2) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)((int)piVar11 + 10) = (ushort)iVar6 & 0xf;
      piVar11[4] = *(int *)(param_2 + 0x14) + -0x40;
      uVar8 = rand();
      piVar11[3] = 0x40 - (uVar8 & 0xf);
      if (2 < *(ushort *)((int)ppiVar5 + 0x36) - 0x135) {
        return ppiVar5;
      }
      bVar3 = *(byte *)((int)ppiVar5 + 0x4b);
      ppiVar5[0x13] = (int *)0xa18618;
LAB_blowhard__80084534:
      *(byte *)((int)ppiVar5 + 0x4b) = bVar3 | 0x80;
      return ppiVar5;
    }
    if (param_1 < 0x102) {
      if (0xfe < param_1) goto LAB_blowhard__80084394;
      if (param_1 == 0xfb) {
        piVar11 = *ppiVar5;
        InitArrayRelated(ppiVar5);
        *(undefined *)(ppiVar5 + 0x14) = 0x20;
        *(undefined *)((int)ppiVar5 + 0x52) = 0xff;
        FUN_800529cc(ppiVar5);
        *(undefined *)(ppiVar5 + 0x13) = 0;
        *(undefined *)((int)ppiVar5 + 0x4d) = 0;
        *(undefined *)((int)ppiVar5 + 0x4e) = 0;
        *(undefined *)((int)ppiVar5 + 0x4f) = 0xe;
        if (dragonState == 3) {
          uVar2 = 0x14;
        }
        else {
          uVar2 = 0x30;
          if (dragonState != 1) goto LAB_blowhard__800845a0;
        }
        *(undefined *)((int)ppiVar5 + 0x57) = uVar2;
LAB_blowhard__800845a0:
        uVar8 = rand();
        iVar6 = (uVar8 & 7) * 4;
        local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar6);
        local_34 = 0;
        local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar6);
        Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
        uVar8 = rand();
        local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
        Vec3Add(ppiVar5 + 3,param_2 + 0xc,&local_38);
        Vec3Copy(piVar11,&local_38);
        Vec3ScaleDownByPowerOfTwo(piVar11,2);
        uVar8 = rand();
        *piVar11 = *piVar11 + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar11[1] = piVar11[1] + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar11[2] = piVar11[2] + -0x7f + (uVar8 & 0xff);
        iVar6 = rand();
        *(char *)(ppiVar5 + 0x11) = (char)iVar6;
        iVar6 = rand();
        *(char *)((int)ppiVar5 + 0x45) = (char)iVar6;
        iVar6 = rand();
        *(char *)((int)ppiVar5 + 0x46) = (char)iVar6;
        iVar6 = rand();
        *(byte *)(piVar11 + 4) = (byte)iVar6 & 0xf;
        iVar6 = rand();
        *(byte *)((int)piVar11 + 0x11) = (byte)iVar6 & 0xf;
        iVar6 = rand();
        *(byte *)((int)piVar11 + 0x12) = (byte)iVar6 & 0xf;
        piVar11[3] = *(int *)(param_2 + 0x14);
        iVar6 = rand();
        *(byte *)((int)piVar11 + 0x13) = ((byte)iVar6 & 3) + 0x10;
        return ppiVar5;
      }
    }
    else if ((0x103 < param_1) && ((param_1 < 0x10e || (param_1 == 0x115))))
    goto LAB_blowhard__80084700;
  }
  else if (param_1 < 0x1c4) {
    if (0x1a9 < param_1) {
LAB_blowhard__800847a8:
      InitArrayRelated(ppiVar5);
      *(undefined *)(ppiVar5 + 0x14) = 0x20;
      *(undefined *)((int)ppiVar5 + 0x52) = 0xff;
      FUN_800529cc(ppiVar5);
      return ppiVar5;
    }
    if (param_1 == 0x147) {
LAB_blowhard__80084700:
      piVar11 = *ppiVar5;
      InitArrayRelated(ppiVar5);
      FUN_800529cc(ppiVar5);
      *(undefined *)((int)ppiVar5 + 0x4f) = 2;
      *(undefined *)(ppiVar5 + 0x13) = 0;
      *(undefined *)((int)ppiVar5 + 0x4d) = 0;
      *(undefined *)((int)ppiVar5 + 0x4e) = 0;
      *piVar11 = 0x40;
      return ppiVar5;
    }
    if (param_1 == 0x195) goto LAB_blowhard__80084734;
  }
  else if (param_1 == 0x1dd) {
LAB_blowhard__80084734:
    InitArrayRelated(ppiVar5);
    if (param_2 == 0) {
      pSVar10 = &spyro;
    }
    else {
      pSVar10 = (Spyro *)(param_2 + 0xc);
    }
    Vec3Copy((int *)(ppiVar5 + 3),(int *)pSVar10);
    ppiVar5[5] = ppiVar5[5] + 0x80;
    piVar11 = (int *)MobyUpdatePosition(ppiVar5 + 3,0x800);
    iVar6 = (int)piVar11 - (int)ppiVar5[5];
    if (iVar6 < 0) {
      iVar6 = -iVar6;
    }
    if (iVar6 < 0x800) {
      ppiVar5[5] = piVar11;
    }
    else {
      ppiVar5[5] = ppiVar5[5] + -0x80;
    }
    goto LAB_blowhard__800847fc;
  }
  InitArrayRelated(ppiVar5);
  if (param_2 == 0) {
    pSVar10 = &spyro;
  }
  else {
    pSVar10 = (Spyro *)(param_2 + 0xc);
  }
  Vec3Copy((int *)(ppiVar5 + 3),(int *)pSVar10);
LAB_blowhard__800847fc:
  FUN_800526a8(ppiVar5);
  return ppiVar5;
}



void FUN_blowhard__80084830(int param_1)

{
  byte bVar1;
  bool bVar2;
  char cVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  short sVar10;
  short sVar11;
  int iVar12;
  char *pcVar13;
  char *pcVar14;
  short *result;
  char *pcVar15;
  int local_90;
  int local_8c;
  int local_88;
  int aiStack_80 [4];
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  undefined4 local_50;
  undefined4 local_4c;
  int local_48;
  int local_44;
  int local_40;
  int *local_38;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    cVar3 = (char)param_1;
    local_38 = &local_70;
    pcVar13 = ptr_headOfParticleBuffer + 1;
    pcVar15 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar14 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar14) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + cVar3 * '\x02';
        pcVar13[0xc] = pcVar13[0xc] + cVar3 * -4;
        pcVar13[0xb] = pcVar13[0xb] + cVar3 * -4;
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar13[0xd] = pcVar13[0xd] + cVar3 * -4;
        goto LAB_blowhard__80085ed0;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        pcVar13[9] = pcVar13[9] + cVar3 * '\x04';
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[0xc] = pcVar13[0xc] + cVar3 * -4;
        pcVar13[0xb] = pcVar13[0xb] + cVar3 * -4;
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar13[0xd] = pcVar13[0xd] + cVar3 * -4;
        goto LAB_blowhard__80085ed0;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        pcVar13[9] = pcVar13[9] + cVar3 * '\x04';
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[0xc] = pcVar13[0xc] + cVar3 * -4;
        pcVar13[0xb] = pcVar13[0xb] + cVar3 * -4;
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar13[0xd] = pcVar13[0xd] + cVar3 * -4;
        goto LAB_blowhard__80085ed0;
      case '\x06':
        Vec3Copy(&local_90,*(int **)(pcVar13 + 0x17));
        iVar7 = (uint)(byte)pcVar13[1] << 6;
        iVar12 = local_88 + *(short *)(pcVar13 + 0x1d) * 0x40;
        iVar8 = iVar7;
        if (*(short *)(pcVar13 + 0x1b) < iVar7) {
          iVar8 = (int)*(short *)(pcVar13 + 0x1b);
        }
        iVar6 = CosScaled(iVar7);
        local_90 = local_90 + (iVar8 * iVar6 >> 0xc);
        iVar7 = SinScaled(iVar7);
        local_8c = local_8c + (iVar8 * iVar7 >> 0xc);
        local_88 = *(short *)(pcVar13 + 7) * 4 + 0x40;
        if ((iVar12 < local_88) || (200 < (byte)pcVar13[1])) goto LAB_blowhard__80085ee8;
        Vec3ScaleDownBy4(result,&local_90);
        pcVar13[1] = pcVar13[1] + '\x01';
        break;
      case '\a':
        if ((0x18 < (byte)pcVar13[1]) || (pcVar13[2] == '\0')) goto LAB_blowhard__80085ee8;
        bVar1 = pcVar13[1];
        pcVar13[10] = pcVar13[10] + pcVar13[0x1d];
        if (bVar1 < 0xd) {
          cVar4 = bVar1 << 2;
        }
        else {
          cVar4 = ('\x18' - bVar1) * '\x04';
        }
        pcVar13[9] = cVar4;
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + *(short *)(pcVar13 + 0x17);
        pcVar13[1] = pcVar13[1] + '\x01';
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + *(short *)(pcVar13 + 0x19);
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + *(short *)(pcVar13 + 0x1b);
        break;
      case '\b':
        Vec3ShortScaleUpBy4(aiStack_80,result);
        if (pcVar13[2] != '\0') {
          Vec3Copy(local_38,(int *)(ptr_startOfCurrentLevelMobys +
                                   (uint)(byte)pcVar13[0x1d] * 0x58 + 0xc));
          iVar8 = CosScaled((uint)(byte)pcVar13[1] << 7);
          local_70 = local_70 + (iVar8 >> 1);
          iVar8 = SinScaled((uint)(byte)pcVar13[1] << 7);
          local_6c = local_6c + (iVar8 >> 1);
          iVar8 = CosScaled((uint)(byte)pcVar13[1] * 0x80 + -0x100);
          local_68 = local_68 + (iVar8 >> 2);
          Vec3Subtract(local_38,local_38,aiStack_80);
          uVar9 = Vec3CalculateLengthE(local_38,flag3D);
          if ((0x400 < (int)uVar9) && ((byte)pcVar13[1] < 0x41)) {
            Vec3ScaleDownByFraction(local_38,uVar9,0x80);
            Vec3Add(aiStack_80,aiStack_80,local_38);
            Vec3ScaleDownBy4(result,aiStack_80);
            pcVar13[1] = pcVar13[1] + '\x01';
            Vec3Subtract(&local_70,aiStack_80,&cameraPosition.x);
            iVar8 = local_70;
            if (local_70 < 0) {
              iVar8 = -local_70;
            }
            iVar7 = local_6c;
            if (local_6c < 0) {
              iVar7 = -local_6c;
            }
            iVar12 = local_68;
            if (local_68 < 0) {
              iVar12 = -local_68;
            }
            iVar12 = iVar8 + iVar7 + iVar12;
            if (*pcVar13 == '\x03') {
              if (0x3000 < iVar12) {
                pcVar13[9] = '\x04';
                pcVar13[0xe] = '@';
                *pcVar13 = '\0';
                pcVar13[0xb] = pcVar13[0xb] << 1;
                pcVar13[0xc] = pcVar13[0xc] << 1;
                pcVar13[0xd] = pcVar13[0xd] << 1;
              }
            }
            else if (iVar12 < 0x2800) {
              *pcVar13 = '\x03';
              pcVar13[0x10] = '\x04';
              pcVar13[0xe] = ',';
              pcVar13[0xf] = '\0';
              pcVar13[0xb] = (byte)pcVar13[0xb] >> 1;
              pcVar13[0xc] = (byte)pcVar13[0xc] >> 1;
              pcVar13[0xd] = (byte)pcVar13[0xd] >> 1;
              iVar8 = rand();
              pcVar13[9] = ((byte)iVar8 & 0xf) + 0x18;
              iVar8 = rand();
              pcVar13[10] = ((byte)iVar8 & 7) + 0xf;
            }
            break;
          }
        }
        goto LAB_blowhard__80085ee8;
      case '\t':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar13[9] = pcVar13[9] + cVar3 * '\x02';
        goto LAB_blowhard__80085ed0;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_blowhard__80085ee8;
        Vec3Copy(&local_60,(int *)&spyro);
        iVar8 = CosScaled((int)*(short *)(pcVar13 + 0x17));
        local_60 = local_60 + (iVar8 >> 4);
        iVar8 = SinScaled((int)*(short *)(pcVar13 + 0x17));
        local_5c = local_5c + (iVar8 >> 4);
        local_58 = local_58 + 0x100;
        Vec3ScaleDownBy4(result,&local_60);
        sVar10 = *(short *)(pcVar13 + 0x17);
        *(short *)(pcVar13 + 0x17) = sVar10 + 0x40;
        iVar8 = CosScaled((int)(short)(sVar10 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar8 < 0) {
          iVar8 = -iVar8;
        }
        pcVar13[9] = (char)(iVar8 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar14 + 0x12);
        pcVar13[0xb] = pcVar13[0xb] + -8;
        pcVar13[0xc] = pcVar13[0xc] + -8;
        pcVar13[0xd] = pcVar13[0xd] + -8;
        if (pcVar13[0xb] == '\0') goto LAB_blowhard__80085ee8;
        goto LAB_blowhard__80085ed8;
      case '\f':
        pcVar13[10] = pcVar13[10] + '\b';
        pcVar13[9] = pcVar13[9] + '\x02';
        if (pcVar13[0xb] != '\0') {
          pcVar13[0xb] = pcVar13[0xb] + -8;
        }
        if (pcVar13[0xc] != '\0') {
          pcVar13[0xc] = pcVar13[0xc] + -8;
        }
        if (pcVar13[0xd] != '\0') {
          pcVar13[0xd] = pcVar13[0xd] + -8;
        }
        if ((*(uint *)(pcVar13 + 0xb) & 0xffffff) != 0) goto LAB_blowhard__80085ed8;
        goto LAB_blowhard__80085ee8;
      case '\x10':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + cVar3 * '\x02';
        pcVar13[0xb] = pcVar13[0xb] + -4;
        pcVar13[0xc] = pcVar13[0xc] + -4;
        pcVar13[0xd] = pcVar13[0xd] + -4;
        if (pcVar13[0xb] != '\0') goto LAB_blowhard__80085ed8;
        goto LAB_blowhard__80085ee8;
      case '\x11':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + cVar3 * '\x02';
        if (8 < (byte)pcVar13[1]) {
          pcVar13[0xb] = pcVar13[0xb] + -0x20;
        }
        cVar4 = pcVar13[1];
        pcVar13[1] = cVar4 + 1U;
        bVar2 = (byte)(cVar4 + 1U) < 0xc;
        pcVar13[0xc] = pcVar13[0xc] + -8;
        pcVar13[0xd] = pcVar13[0xd] + -4;
        goto LAB_blowhard__80085ed0;
      case '\x15':
        pcVar13[0x17] = pcVar13[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar9 = (uint)(byte)pcVar13[0x18] + gameSpeedMultiplyer;
        pcVar13[0x18] = (char)uVar9;
        *(short *)(pcVar13 + 3) =
             *(short *)(pcVar13 + 0x11) +
             (short)((int)((int)sineWaveArray[(byte)pcVar13[0x17] + 0x40] * (uVar9 & 0xff)) >> 0xc);
        iVar8 = (int)sineWaveArray[(byte)pcVar13[0x17]] * (uint)(byte)pcVar13[0x18];
        sVar10 = (short)gameSpeedMultiplyer;
        bVar1 = pcVar13[0x18];
        pcVar13[10] = pcVar13[10] + '\x04';
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar10 * 6;
        sVar10 = *(short *)(pcVar13 + 0x13);
        goto LAB_blowhard__800851e4;
      case '\x18':
        if ((byte)pcVar13[0xb] < 0xf0) {
          pcVar13[0xb] = pcVar13[0xb] + 4;
        }
        if ((byte)pcVar13[0xc] < 0xf0) {
          pcVar13[0xc] = pcVar13[0xc] + 4;
        }
        if ((byte)pcVar13[0xd] < 0xf0) {
          pcVar13[0xd] = pcVar13[0xd] + 4;
        }
        pcVar13[0x1b] = pcVar13[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar8 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar8 = dragonTimerCurrentState;
        }
        *(short *)(pcVar13 + 0x17) = (short)((int)((uint)(byte)pcVar13[0x1c] * (0x48 - iVar8)) >> 3)
        ;
        iVar8 = ((int)((0x20 - (uint)(byte)pcVar13[0x1c]) * iVar8) >> 4) + 8;
        *(short *)(pcVar13 + 0x19) = (short)iVar8;
        *(short *)(pcVar13 + 3) =
             *(short *)(pcVar13 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar13[0x1b] + 0x40] * (iVar8 * 0x10000 >> 0x10) >>
                    0xc);
        sVar10 = sineWaveArray[(byte)pcVar13[0x1b]];
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 0x15) + *(short *)(pcVar13 + 0x17) + 0x20;
        *(short *)(pcVar13 + 5) =
             *(short *)(pcVar13 + 0x13) +
             (short)((int)sVar10 * (int)*(short *)(pcVar13 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        iVar8 = (uint)(byte)pcVar13[0xb] - param_1;
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + cVar3 * '\x02';
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar13[0xb] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar13[0xc] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar13[0xc] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar13[0xd] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        bVar1 = pcVar13[1];
        pcVar13[0xd] = (char)iVar8;
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_blowhard__80085ed0;
      case 'A':
        local_50._0_2_ = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        local_50._2_2_ = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_4c = CONCAT22(local_4c._2_2_,sVar10);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + (short)local_50;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + local_50._2_2_;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar10;
        iVar8 = rand();
        local_50._0_2_ = (short)local_50 + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        sVar10 = local_50._2_2_ + -1 + ((ushort)iVar8 & 2);
        local_50 = CONCAT22(sVar10,(short)local_50);
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + (short)local_50;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar10;
        cVar4 = pcVar13[1];
        sVar10 = *(short *)(pcVar13 + 0xd) + (short)local_4c;
        pcVar13[1] = cVar4 + 1U;
        bVar2 = (byte)(cVar4 + 1U) < 8;
        goto LAB_blowhard__80085ecc;
      case 'B':
        iVar8 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar13[1] & 1U) != 0) {
              *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + *(short *)(pcVar13 + 0xf);
              *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + *(short *)(pcVar13 + 0x11);
              *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + *(short *)(pcVar13 + 0x13);
              if ((pcVar13[1] & 2U) != 0) {
                iVar7 = rand();
                *(ushort *)(pcVar13 + 0xf) = *(short *)(pcVar13 + 0xf) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar13 + 0x11) = *(short *)(pcVar13 + 0x11) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar13 + 0x13) = *(short *)(pcVar13 + 0x13) + -1 + ((ushort)iVar7 & 2);
              }
            }
            iVar8 = iVar8 + 1;
            pcVar13[1] = pcVar13[1] + '\x01';
          } while (iVar8 < param_1);
        }
        bVar2 = (byte)pcVar13[1] < 0x18;
        goto LAB_blowhard__80085ed0;
      case 'F':
        local_50._0_2_ = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        local_50._2_2_ = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_4c = CONCAT22(local_4c._2_2_,sVar10);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + (short)local_50;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + local_50._2_2_;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar10;
        iVar8 = rand();
        local_50._0_2_ = (short)local_50 + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        sVar10 = local_50._2_2_ + -1 + ((ushort)iVar8 & 2);
        local_50 = CONCAT22(sVar10,(short)local_50);
        if ((pcVar13[1] & 1U) != 0) {
          local_4c = CONCAT22(local_4c._2_2_,(short)local_4c + -1);
        }
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + (short)local_50;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar10;
        cVar4 = pcVar13[1];
        pcVar13[1] = cVar4 + 1U;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + (short)local_4c;
        if ((0x1f < (byte)(cVar4 + 1U)) || (pcVar13[2] == '\0')) goto LAB_blowhard__80085ee8;
        cVar4 = pcVar13[0xf];
        pcVar13[0xf] = cVar4 - 3U;
        if ((byte)(cVar4 - 3U) < 0x80) {
          pcVar13[0xf] = -0x80;
        }
        cVar4 = pcVar13[0x10];
        pcVar13[0x10] = cVar4 - 4U;
        if ((byte)(cVar4 - 4U) < 0x60) {
          pcVar13[0x10] = '`';
        }
        cVar4 = pcVar13[0x13];
        pcVar13[0x11] = '\0';
        pcVar13[0x13] = cVar4 - 3U;
        if ((byte)(cVar4 - 3U) < 0xc0) {
          pcVar13[0x13] = -0x40;
        }
        cVar4 = pcVar13[0x14];
        pcVar13[0x14] = cVar4 - 4U;
        if ((byte)(cVar4 - 4U) < 0x80) {
          pcVar13[0x14] = -0x80;
        }
        cVar4 = pcVar13[0x15];
        pcVar13[0x15] = cVar4 - 6U;
        if ((byte)(cVar4 - 6U) < 0x20) {
          pcVar13[0x15] = ' ';
        }
        break;
      case 'G':
        cVar4 = pcVar13[1];
        pcVar13[1] = cVar4 + 1U;
        if ((0x1f < (byte)(cVar4 + 1U)) || (pcVar13[2] == '\0')) goto LAB_blowhard__80085ee8;
        local_48 = (int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3);
        local_44 = (int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5);
        local_40 = (int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7);
        uVar9 = rand();
        local_48 = local_48 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_44 = local_44 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + (short)local_48;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + (short)local_44;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + (short)local_40;
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 9) - (short)local_48;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 0xb) - (short)local_44;
        pcVar13[0x13] = pcVar13[0x13] + -2;
        pcVar13[0x15] = pcVar13[0x15] + -4;
        pcVar13[0x14] = pcVar13[0x14] + -2;
        pcVar13[0x10] = pcVar13[0x10] + -3;
        pcVar13[0xf] = pcVar13[0xf] + -3;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 0xd) - (short)local_40;
        pcVar13[0x11] = pcVar13[0x11] + -3;
        break;
      case 'H':
        cVar4 = pcVar13[1];
        pcVar13[1] = cVar4 + 1U;
        if ((0x2f < (byte)(cVar4 + 1U)) || (pcVar13[2] == '\0')) goto LAB_blowhard__80085ee8;
        local_50 = (int)*(short *)(pcVar13 + 3) - (int)*(short *)(pcVar13 + 9) >> 1;
        local_4c = (int)*(short *)(pcVar13 + 5) - (int)*(short *)(pcVar13 + 0xb) >> 1;
        local_48 = (int)*(short *)(pcVar13 + 7) - (int)*(short *)(pcVar13 + 0xd) >> 1;
        uVar9 = rand();
        local_50 = local_50 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_4c = local_4c + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_48 = local_48 + -1 + (uVar9 & 2);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + (short)local_50;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + (short)local_4c;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + (short)local_48;
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 3) + (short)local_50 * -2;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 5) + (short)local_4c * -2;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 7) + (short)local_48 * -2;
        break;
      case 'L':
        pcVar13[0x17] = pcVar13[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar9 = (uint)(byte)pcVar13[0x18] + gameSpeedMultiplyer;
        pcVar13[0x18] = (char)uVar9;
        *(short *)(pcVar13 + 3) =
             *(short *)(pcVar13 + 0xf) +
             (short)((int)((int)sineWaveArray[(byte)pcVar13[0x17] + 0x40] * (uVar9 & 0xff)) >> 0xc);
        iVar8 = (int)sineWaveArray[(byte)pcVar13[0x17]] * (uint)(byte)pcVar13[0x18];
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + (short)gameSpeedMultiplyer * 6;
        bVar1 = pcVar13[0x18];
        sVar10 = *(short *)(pcVar13 + 0x11);
LAB_blowhard__800851e4:
        *(short *)(pcVar13 + 5) = sVar10 + (short)(iVar8 >> 0xc);
        if (0xc0 < bVar1) goto LAB_blowhard__80085ee8;
        break;
      case 'M':
        sVar11 = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        sVar5 = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_4c = CONCAT22(local_4c._2_2_,sVar10);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + sVar11;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + sVar5;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar10;
        sVar5 = sVar5 + 1;
        local_50 = CONCAT22(sVar5,sVar11);
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + sVar11;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar5;
        cVar4 = pcVar13[1];
        pcVar13[1] = cVar4 + 1U;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + sVar10;
        if (0x1f < (byte)(cVar4 + 1U)) goto LAB_blowhard__80085ee8;
        break;
      case 'N':
        cVar4 = pcVar13[1];
        pcVar13[1] = cVar4 + 1U;
        if ((0x27 < (byte)(cVar4 + 1U)) || (pcVar13[2] == '\0')) goto LAB_blowhard__80085ee8;
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + *(short *)(pcVar13 + 0xf);
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + *(short *)(pcVar13 + 0x11);
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + *(short *)(pcVar13 + 0x13);
        iVar8 = rand();
        *(ushort *)(pcVar13 + 0xf) = *(short *)(pcVar13 + 0xf) + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        *(ushort *)(pcVar13 + 0x11) = *(short *)(pcVar13 + 0x11) + -1 + ((ushort)iVar8 & 2);
        uVar9 = rand();
        iVar8 = (*(ushort *)(pcVar13 + 0x13) - 1) + (uVar9 & 2);
        *(short *)(pcVar13 + 0x13) = (short)iVar8;
        if (2 < iVar8 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar13 + 0x13) = 2;
        }
        if (*(short *)(pcVar13 + 0x13) < -4) {
          *(undefined2 *)(pcVar13 + 0x13) = 0xfffc;
        }
        pcVar13[0xb] = pcVar13[0xb] + -2;
        pcVar13[0xd] = pcVar13[0xd] + -1;
        pcVar13[0xc] = pcVar13[0xc] + -2;
        break;
      case 'O':
        sVar11 = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1);
        local_50 = CONCAT22(sVar10,sVar11);
        sVar5 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_4c = CONCAT22(local_4c._2_2_,sVar5);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + sVar11;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + sVar10;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar5;
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + sVar11;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar10;
        cVar4 = pcVar13[1];
        pcVar13[1] = cVar4 + 1U;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar4 + 1U)) || (pcVar13[2] == '\0')) goto LAB_blowhard__80085ee8;
        pcVar13[0xf] = pcVar13[0xf] + -3;
        pcVar13[0x13] = pcVar13[0x13] + -3;
        pcVar13[0x10] = pcVar13[0x10] + -4;
        pcVar13[0x14] = pcVar13[0x14] + -4;
        if (5 < (byte)pcVar13[0x15]) {
          pcVar13[0x15] = pcVar13[0x15] - 6;
        }
        break;
      case 'P':
        sVar11 = *(short *)(pcVar13 + 9) - *(short *)(pcVar13 + 3);
        sVar5 = *(short *)(pcVar13 + 0xb) - *(short *)(pcVar13 + 5);
        local_50 = CONCAT22(sVar5,sVar11);
        sVar10 = *(short *)(pcVar13 + 7);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + sVar11;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + sVar5;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + (*(short *)(pcVar13 + 0xd) - sVar10);
        sVar10 = (*(short *)(pcVar13 + 0xd) - sVar10) + -1;
        local_4c = CONCAT22(local_4c._2_2_,sVar10);
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + sVar11;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar5;
        cVar4 = pcVar13[1];
        sVar10 = *(short *)(pcVar13 + 0xd) + sVar10;
        pcVar13[1] = cVar4 + 1U;
        bVar2 = (byte)(cVar4 + 1U) < 0x20;
LAB_blowhard__80085ecc:
        *(short *)(pcVar13 + 0xd) = sVar10;
LAB_blowhard__80085ed0:
        if (bVar2) {
LAB_blowhard__80085ed8:
          if (pcVar13[2] != '\0') break;
        }
LAB_blowhard__80085ee8:
        FUN_80053608(pcVar14);
      }
      pcVar13 = pcVar13 + 0x20;
      pcVar15 = pcVar15 + 0x20;
      result = result + 0x10;
      pcVar14 = pcVar14 + 0x20;
    } while (*pcVar13 != -1);
  }
  return;
}



void FUN_blowhard__80085f40(int param_1,undefined4 param_2,int **param_3,int *param_4)

{
  bool bVar1;
  char *pcVar2;
  undefined uVar3;
  char cVar4;
  short extraout_var;
  undefined *puVar5;
  uint uVar6;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar7;
  int iVar8;
  uint uVar9;
  undefined uVar10;
  short sVar11;
  int *piVar12;
  int **b;
  int *piVar13;
  int iVar14;
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int aiStack_90 [2];
  int local_88;
  int aiStack_80 [4];
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  int local_4c;
  int local_48;
  int local_40;
  int local_30;
  
  iVar14 = 0;
  if (0 < param_1) {
    local_30 = 0;
    piVar13 = param_4;
    local_40 = param_1;
    do {
      uVar10 = (undefined)param_2;
      cVar4 = (char)param_4;
      switch(param_2) {
      case 0:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[2] = 0;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x18),param_4);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x18;
        iVar8 = rand();
        puVar7[0xf] = 0x2e;
        uVar3 = 4;
        puVar7[0xb] = (char)iVar8;
        puVar7[0xc] = 0x80;
        puVar7[0xd] = 0x80;
        puVar7[0xe] = 0x80;
        goto LAB_blowhard__80086b2c;
      case 1:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[2] = 0;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        if (bVar1) {
          uVar10 = 8;
        }
        else {
          uVar10 = 0x10;
        }
        puVar7[10] = uVar10;
        iVar8 = rand();
        puVar7[0xb] = (char)iVar8;
        uVar10 = 0x60;
        goto LAB_blowhard__80086b14;
      case 2:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[2] = 0;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        uVar9 = rand();
        local_a0 = (uVar9 & 0x3f) - 0x20;
        uVar9 = rand();
        local_9c = (uVar9 & 0x3f) - 0x20;
        local_98 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar7 + 0x18),&local_a0);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x20;
        iVar8 = rand();
        puVar7[0xf] = 0x2e;
        uVar3 = 4;
        puVar7[0xb] = (char)iVar8;
        puVar7[0xc] = 0x80;
        puVar7[0xd] = 0x80;
        puVar7[0xe] = 0x80;
        goto LAB_blowhard__80086b2c;
      case 6:
        piVar12 = *param_3;
        puVar7 = (undefined *)AllocateParticleToBuffer(3);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 0xf;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)(param_3 + 3));
        iVar8 = rand();
        *(ushort *)(puVar7 + 4) = *(short *)(puVar7 + 4) + -0x3f + ((ushort)iVar8 & 0x7e);
        iVar8 = rand();
        *(ushort *)(puVar7 + 6) = *(short *)(puVar7 + 6) + -0x3f + ((ushort)iVar8 & 0x7e);
        iVar8 = rand();
        *(int ***)(puVar7 + 0x18) = param_3 + 3;
        *(ushort *)(puVar7 + 8) = *(short *)(puVar7 + 8) + -0x100 + ((ushort)iVar8 & 0x1ff);
        *(short *)(puVar7 + 0x1c) = (short)piVar12[1];
        iVar8 = *piVar12;
        puVar7[10] = 0x20;
        puVar7[0xb] = 0x14;
        *(short *)(puVar7 + 0x1e) = (short)(iVar8 >> 6);
        if (*(char *)((int)param_3 + 0x49) == '\0') {
          if (levelIDPortalExit != 0x32) {
            puVar7[0xc] = 0x80;
            goto LAB_blowhard__80086284;
          }
switchD_blowhard__800861f8_caseD_1:
          puVar7[0xc] = 0x80;
LAB_blowhard__80086274:
          puVar7[0xd] = 0x80;
          puVar7[0xe] = 0;
          goto switchD_blowhard__800861f8_caseD_8;
        }
        uVar9 = rand();
        switch(uVar9 & 7) {
        case 0:
          puVar7[0xc] = 0x80;
          puVar7[0xd] = 0;
          puVar7[0xe] = 0;
          goto switchD_blowhard__800861f8_caseD_8;
        case 1:
          goto switchD_blowhard__800861f8_caseD_1;
        case 2:
          puVar7[0xc] = 0;
          goto LAB_blowhard__80086274;
        case 3:
          puVar7[0xc] = 0;
LAB_blowhard__80086284:
          puVar7[0xd] = 0x80;
          break;
        case 4:
          puVar7[0xc] = 0;
          puVar7[0xd] = 0;
          break;
        case 5:
          puVar7[0xc] = 0x80;
          puVar7[0xd] = 0;
          break;
        case 6:
          puVar7[0xc] = 0x80;
          puVar7[0xd] = 0x40;
          puVar7[0xe] = 0;
          goto switchD_blowhard__800861f8_caseD_8;
        case 7:
          puVar7[0xc] = 0;
          puVar7[0xd] = 0x40;
          break;
        default:
          goto switchD_blowhard__800861f8_caseD_8;
        }
        puVar7[0xe] = 0x80;
switchD_blowhard__800861f8_caseD_8:
        puVar7[0xf] = 0x2c;
        puVar7[0x11] = 0;
        puVar7[0x10] = 0;
        break;
      case 7:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 0xf;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        if (param_4 != (int *)0x0) {
          uVar9 = rand();
          *(short *)(puVar7 + 4) =
               *(short *)(puVar7 + 4) + (short)((int)param_4 * ((uVar9 & 0xfe) - 0x7f) >> 8);
          uVar9 = rand();
          *(short *)(puVar7 + 6) =
               *(short *)(puVar7 + 6) + (short)((int)param_4 * ((uVar9 & 0xfe) - 0x7f) >> 8);
          uVar9 = rand();
          *(short *)(puVar7 + 8) =
               *(short *)(puVar7 + 8) + (short)((int)param_4 * ((uVar9 & 0xfe) - 0x30) >> 8);
        }
        puVar7[10] = puVar7[2] << 2;
        iVar8 = rand();
        puVar7[0xb] = (char)iVar8;
        iVar8 = rand();
        *(ushort *)(puVar7 + 0x18) = ((ushort)iVar8 & 0xe) - 7;
        iVar8 = rand();
        *(ushort *)(puVar7 + 0x1a) = ((ushort)iVar8 & 0xe) - 7;
        iVar8 = rand();
        *(ushort *)(puVar7 + 0x1c) = ((ushort)iVar8 & 0xe) - 7;
        iVar8 = rand();
        puVar7[0xf] = 0x2e;
        uVar3 = 4;
        *(ushort *)(puVar7 + 0x1e) = ((ushort)iVar8 & 0xf) + 6;
        puVar7[0xc] = 0x80;
        puVar7[0xd] = 0x80;
        puVar7[0xe] = 0x80;
        goto LAB_blowhard__80086b2c;
      case 8:
        puVar7 = (undefined *)AllocateParticleToBuffer(3);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 3;
        puVar7[3] = 1;
        uVar9 = rand();
        FUN_80052d64(param_3,uVar9 & 1,aiStack_90);
        Vec3ScaleDownBy4((short *)(puVar7 + 4),aiStack_90);
        iVar8 = rand();
        *(ushort *)(puVar7 + 4) = *(short *)(puVar7 + 4) + -7 + ((ushort)iVar8 & 0xe);
        iVar8 = rand();
        *(ushort *)(puVar7 + 6) = *(short *)(puVar7 + 6) + -7 + ((ushort)iVar8 & 0xe);
        iVar8 = rand();
        b = param_3 + 3;
        *(ushort *)(puVar7 + 8) = *(short *)(puVar7 + 8) + -7 + ((ushort)iVar8 & 0xe);
        Vec3Subtract(aiStack_90,aiStack_90,(int *)b);
        local_88 = local_88 + -900;
        VecNormalize(aiStack_90,0x80,b,piVar13);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x18),aiStack_90);
        pcVar2 = ptr_startOfCurrentLevelMobys;
        puVar7[0x1f] = 0;
        puVar7[0x1e] = (char)(((int)param_4 - (int)pcVar2) * -0x45d1745d >> 3);
        iVar8 = rand();
        puVar7[10] = ((byte)iVar8 & 0xf) + 0x18;
        iVar8 = rand();
        puVar7[0xb] = ((byte)iVar8 & 7) + 0xf;
        puVar7[0xf] = 0x2c;
        puVar7[0x11] = 4;
        puVar7[0x10] = 0;
        uVar9 = rand();
        uVar9 = uVar9 & 3;
        if (uVar9 == 2) {
          uVar10 = 0x40;
          uVar3 = 0x7f;
          puVar7[0xc] = 0x40;
          goto LAB_blowhard__80086890;
        }
        if (uVar9 < 3) {
          puVar7[0xc] = 0x7f;
          puVar7[0xd] = 0x7f;
          puVar7[0xe] = 0x20;
        }
        else if (uVar9 == 3) {
          puVar7[0xc] = 0x7f;
          puVar7[0xd] = 0x7f;
          puVar7[0xe] = 0x7f;
        }
        break;
      case 9:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[2] = 0;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x18),param_4);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x18;
        iVar8 = rand();
        puVar7[0xb] = (char)iVar8;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar10 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar7[0xc] = 0x80;
              puVar7[0xd] = 0x80;
              puVar7[0xe] = 0x80;
              goto LAB_blowhard__80086610;
            }
            puVar7[0xc] = 0xe0;
          }
          else {
            puVar7[0xc] = 0xf0;
            uVar10 = 0x60;
          }
          puVar7[0xd] = uVar10;
          puVar7[0xe] = 0;
        }
        else {
          puVar7[0xc] = 0xff;
          puVar7[0xd] = 0;
          puVar7[0xe] = 0;
        }
LAB_blowhard__80086610:
        puVar7[0xf] = 0x2e;
        uVar3 = 4;
        goto LAB_blowhard__80086b2c;
      case 10:
        puVar7 = (undefined *)AllocateParticleToBuffer(3);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 0x1f;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)&spyro);
        puVar7[10] = 0x18;
        puVar7[0xb] = 0xf;
        puVar7[0xc] = (&DAT_8006e438)[local_30];
        puVar7[0xd] = (&DAT_8006e439)[local_30];
        uVar10 = (&DAT_8006e43a)[local_30];
        puVar7[0xf] = 0x2c;
        puVar7[0x11] = 4;
        puVar7[0x10] = 0;
        puVar7[0xe] = uVar10;
        *(short *)(puVar7 + 0x18) = (short)(((local_40 - iVar14) * 0x1000) / 5);
        break;
      case 0xc:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[3] = 1;
        puVar7[0x11] = 4;
        sVar11 = *(short *)((int)param_3 + 0x36);
        if (sVar11 == 0x22) {
          Vec3Copy(aiStack_80,(int *)(param_3 + 3));
        }
        else if ((sVar11 == 0xad) || (sVar11 == 0xb5)) {
          iVar8 = (int)param_4 >> 0x18;
          if (iVar8 < 6) {
            puVar5 = (undefined *)0x8006e4e0;
            goto LAB_blowhard__800867bc;
          }
          puVar7[1] = 5;
          puVar7[0x11] = 0x16;
          Vec3Copy(aiStack_80,(int *)(iVar8 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar11 == 0x78) {
            puVar5 = &DAT_8006e570;
          }
          else {
            puVar5 = &DAT_8006e498;
            iVar8 = iVar14;
LAB_blowhard__800867bc:
            puVar5 = puVar5 + iVar8 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar5,aiStack_80);
          Vec3Add(aiStack_80,aiStack_80,param_3 + 3);
        }
        Vec3ScaleDownBy4((short *)(puVar7 + 4),aiStack_80);
        puVar7[0xd] = (char)((uint)param_4 >> 8);
        puVar7[0xc] = cVar4;
        puVar7[0xe] = (char)((uint)param_4 >> 0x10);
        puVar7[0xf] = 0x2e;
        iVar8 = rand();
        puVar7[10] = ((byte)iVar8 & 7) + 0x10;
        iVar8 = rand();
        puVar7[0xb] = (char)iVar8;
        puVar7[0x10] = 0;
        break;
      case 0x10:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[2] = 0;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x18),(int *)(param_3 + 3));
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = (char)*param_4;
        iVar8 = rand();
        puVar7[0xb] = (char)iVar8;
        iVar8 = param_4[1];
        puVar7[0xf] = 0x2e;
        uVar3 = (undefined)(iVar8 << 3);
        puVar7[0xc] = uVar3;
        uVar10 = puVar7[0xc];
        puVar7[0x11] = 4;
        puVar7[0x10] = 0;
LAB_blowhard__80086890:
        puVar7[0xd] = uVar3;
        puVar7[0xe] = uVar10;
        break;
      case 0x11:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[2] = 0;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x18),(int *)(param_3 + 3));
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x18;
        iVar8 = rand();
        puVar7[0xb] = (char)iVar8;
        puVar7[0xc] = (char)*param_4;
        puVar7[0xd] = (char)param_4[1];
        iVar8 = param_4[2];
        puVar7[0xf] = 0x2e;
        puVar7[0x11] = 4;
        puVar7[0x10] = 0;
        puVar7[0xe] = (char)iVar8;
        break;
      case 0x15:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x12),(int *)param_3);
        cVar4 = cVar4 * '\x02';
        if (0xf < ((uint)param_4 & 0x1f)) {
          cVar4 = cVar4 + -0x80;
        }
        puVar7[0x18] = cVar4;
        puVar7[0x19] = 8;
        puVar7[0xc] = ~(byte)(((uint)param_4 & 0xf) << 4);
        cVar4 = (char)((uint)param_4 & 0xf);
        puVar7[0xe] = cVar4 * -8 + -0x80;
        puVar7[10] = cVar4 * -2 + '0';
        puVar7[0xf] = 0x2e;
        uVar3 = 2;
        puVar7[0xd] = 0xff;
        puVar7[0xb] = (char)((int)param_4 << 1);
        goto LAB_blowhard__80086b2c;
      case 0x18:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x12),(int *)param_3);
        puVar7[10] = 0x30;
        puVar7[0x11] = 8;
        *(short *)(puVar7 + 0x18) = (short)(iVar14 << 5);
        puVar7[0xc] = 0x80;
        puVar7[0xd] = 0x80;
        puVar7[0xe] = 0x80;
        uVar10 = (undefined)(iVar14 << 4);
        puVar7[0xb] = uVar10;
        puVar7[0xf] = 0x2e;
        puVar7[0x10] = 0;
        *(undefined2 *)(puVar7 + 0x1a) = 0x10;
        puVar7[0x1c] = uVar10;
        puVar7[0x1d] = (char)iVar14;
        break;
      case 0x21:
        puVar7 = (undefined *)AllocateParticleToBuffer(2);
        *puVar7 = uVar10;
        puVar7[2] = 0;
        puVar7[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_70,(int *)&spyro);
          local_68 = spyro.unkown_heightRelated;
          uVar9 = rand();
          local_70 = local_70 + -0x1f + (uVar9 & 0x3e);
          uVar9 = rand();
          local_6c = local_6c + -0x1f + (uVar9 & 0x3e);
        }
        else {
          local_70 = 0x164;
          local_6c = 0;
          local_68 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_70,&local_70);
          Vec3Add(&local_70,&local_70,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar7 + 4),&local_70);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x18),(int *)param_3);
        *(undefined2 *)(puVar7 + 0x1e) = 0;
        puVar7[10] = 0x10;
        iVar8 = rand();
        puVar7[0xb] = (char)iVar8;
        uVar10 = 0x20;
LAB_blowhard__80086b14:
        puVar7[0xf] = 0x2e;
        uVar3 = 4;
        puVar7[0xc] = uVar10;
        puVar7[0xd] = uVar10;
        puVar7[0xe] = uVar10;
LAB_blowhard__80086b2c:
        puVar7[0x11] = uVar3;
        puVar7[0x10] = 0;
        break;
      case 0x41:
        puVar7 = (undefined *)AllocateParticleToBuffer(1);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 3;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)(param_3 + 3));
        iVar8 = rand();
        *(ushort *)(puVar7 + 4) = *(short *)(puVar7 + 4) + -0x3f + ((ushort)iVar8 & 0x7e);
        iVar8 = rand();
        *(ushort *)(puVar7 + 6) = *(short *)(puVar7 + 6) + -0x3f + ((ushort)iVar8 & 0x7e);
        iVar8 = rand();
        puVar7[0x17] = 0;
        puVar7[0x10] = 0x80;
        puVar7[0x11] = 0x80;
        puVar7[0x12] = 0x80;
        puVar7[0x14] = 0xc0;
        puVar7[0x15] = 0xc0;
        puVar7[0x16] = 0xc0;
        *(ushort *)(puVar7 + 8) = *(short *)(puVar7 + 8) + 0x136 + ((ushort)iVar8 & 0xf);
        puVar7[0x13] = 0x50;
        *(undefined2 *)(puVar7 + 0xc) = *(undefined2 *)(puVar7 + 6);
        *(undefined2 *)(puVar7 + 10) = *(undefined2 *)(puVar7 + 4);
        *(short *)(puVar7 + 0xe) = *(short *)(puVar7 + 8) + -0x20;
        break;
      case 0x42:
        puVar7 = (undefined *)AllocateParticleToBuffer(0);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 0xf;
        puVar7[3] = 1;
        iVar8 = rand();
        *(ushort *)(puVar7 + 4) = (short)((int)*param_3 >> 2) + ((ushort)iVar8 & 0xf) + -8;
        iVar8 = rand();
        *(ushort *)(puVar7 + 6) = (short)((int)param_3[1] >> 2) + ((ushort)iVar8 & 0xf) + -8;
        iVar8 = rand();
        piVar12 = param_3[2];
        puVar7[10] = 2;
        *(undefined2 *)(puVar7 + 0x10) = 0;
        *(undefined2 *)(puVar7 + 0x12) = 0;
        *(undefined2 *)(puVar7 + 0x14) = 0;
        *(ushort *)(puVar7 + 8) = (short)((int)piVar12 >> 2) + ((ushort)iVar8 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar7[0xc] = 0xff;
          goto LAB_blowhard__80086d04;
        }
        uVar9 = rand();
        switch(uVar9 & 7) {
        case 0:
          puVar7[0xc] = 0xff;
          puVar7[0xd] = 0;
          puVar7[0xe] = 0;
          break;
        case 1:
          puVar7[0xc] = 0xff;
          goto LAB_blowhard__80086d04;
        case 2:
          puVar7[0xc] = 0;
LAB_blowhard__80086d04:
          puVar7[0xd] = 0xff;
          puVar7[0xe] = 0;
          break;
        case 3:
          puVar7[0xc] = 0;
          puVar7[0xd] = 0xff;
          goto LAB_blowhard__80086d4c;
        case 4:
          puVar7[0xc] = 0;
          puVar7[0xd] = 0;
          goto LAB_blowhard__80086d4c;
        case 5:
          puVar7[0xc] = 0xff;
          puVar7[0xd] = 0;
          goto LAB_blowhard__80086d4c;
        case 6:
          puVar7[0xc] = 0xff;
          puVar7[0xd] = 0x80;
          puVar7[0xe] = 0;
          break;
        case 7:
          puVar7[0xc] = 0;
          puVar7[0xd] = 0x80;
LAB_blowhard__80086d4c:
          puVar7[0xe] = 0xff;
        }
        puVar7[0xf] = 0x40;
        break;
      case 0x46:
        puVar7 = (undefined *)AllocateParticleToBuffer(1);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 0xf;
        puVar7[3] = 1;
        uVar9 = rand();
        local_60 = (int)((int)param_4 * ((uVar9 & 0xfff) - 0x800)) >> 0xc;
        uVar9 = rand();
        local_5c = (int)((int)param_4 * ((uVar9 & 0xfff) - 0x800)) >> 0xc;
        uVar9 = rand();
        local_58 = (int)((int)param_4 * (uVar9 & 0xfff)) >> 0xc;
        *(short *)(puVar7 + 4) = (short)((int)*param_3 >> 2) + (short)local_60 * 4;
        *(short *)(puVar7 + 6) = (short)((int)param_3[1] >> 2) + (short)local_5c * 4;
        sVar11 = (short)local_58;
        *(short *)(puVar7 + 8) = (short)((int)param_3[2] >> 2) + sVar11 * 4;
        *(short *)(puVar7 + 10) = *(short *)(puVar7 + 4) + (short)local_60 * 2;
        *(short *)(puVar7 + 0xc) = *(short *)(puVar7 + 6) + (short)local_5c * 2;
        goto LAB_blowhard__80087408;
      case 0x47:
        puVar7 = (undefined *)AllocateParticleToBuffer(1);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 7;
        puVar7[3] = 1;
        uVar9 = rand();
        local_60 = (int)(((uVar9 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar9 = rand();
        local_5c = (int)(((uVar9 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar9 = rand();
        local_58 = (int)(((uVar9 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar7 + 4) = (short)((int)*param_3 >> 2) + (short)local_60 * 4;
        *(short *)(puVar7 + 6) = (short)((int)param_3[1] >> 2) + (short)local_5c * 4;
        *(short *)(puVar7 + 8) = (short)((int)param_3[2] >> 2) + (short)local_58 * 4;
        *(short *)(puVar7 + 10) = *(short *)(puVar7 + 4) + (short)local_60;
        *(short *)(puVar7 + 0xc) = *(short *)(puVar7 + 6) + (short)local_5c;
        puVar7[0x10] = 0xe0;
        puVar7[0x11] = 0xe0;
        puVar7[0x12] = 0x60;
        puVar7[0x17] = 2;
        puVar7[0x14] = 0xff;
        puVar7[0x15] = 0xff;
        puVar7[0x16] = 0xff;
        puVar7[0x13] = 0x50;
        *(short *)(puVar7 + 0xe) = *(short *)(puVar7 + 8) + (short)local_58;
        break;
      case 0x4c:
        puVar7 = (undefined *)AllocateParticleToBuffer(0);
        *puVar7 = uVar10;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar7 + 0x10),(int *)param_3);
        cVar4 = cVar4 * '\x02';
        if (0xf < ((uint)param_4 & 0x1f)) {
          cVar4 = cVar4 + -0x80;
        }
        puVar7[0x18] = cVar4;
        puVar7[0x19] = 8;
        puVar7[0xc] = ~(byte)(((uint)param_4 & 0xf) << 4);
        puVar7[0xe] = (char)((uint)param_4 & 0xf) * -8 + -0x80;
        puVar7[0xd] = 0xff;
        goto LAB_blowhard__800871a8;
      case 0x4d:
        puVar7 = (undefined *)AllocateParticleToBuffer(4);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar7 + 10),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        uVar9 = rand();
        CosScaled(uVar9 & 0xfff);
        *(short *)(puVar7 + 4) = *(short *)(puVar7 + 4) + extraout_var;
        uVar6 = rand();
        SinScaled(uVar6 & 0x7ff);
        *(short *)(puVar7 + 6) = *(short *)(puVar7 + 6) + extraout_var_00;
        SinScaled(uVar9 & 0xfff);
        puVar7[0x17] = 0x7f;
        puVar7[0x11] = 0x40;
        puVar7[0x12] = 0x60;
        puVar7[0x16] = 0xc0;
        puVar7[0x13] = 0x50;
        puVar7[0x10] = 0x80;
        puVar7[0x14] = 0xff;
        puVar7[0x15] = 0x80;
        *(short *)(puVar7 + 8) = *(short *)(puVar7 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar7 = (undefined *)AllocateParticleToBuffer(0);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 0x1f;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        iVar8 = rand();
        *(ushort *)(puVar7 + 4) = *(short *)(puVar7 + 4) + -0x20 + ((ushort)iVar8 & 0x3f);
        iVar8 = rand();
        *(ushort *)(puVar7 + 6) = *(short *)(puVar7 + 6) + -0x20 + ((ushort)iVar8 & 0x3f);
        iVar8 = rand();
        *(ushort *)(puVar7 + 8) = *(short *)(puVar7 + 8) + -0x20 + ((ushort)iVar8 & 0x3f);
        iVar8 = rand();
        *(ushort *)(puVar7 + 0x10) = ((ushort)iVar8 & 2) - 1;
        iVar8 = rand();
        *(ushort *)(puVar7 + 0x12) = ((ushort)iVar8 & 2) - 1;
        iVar8 = rand();
        *(ushort *)(puVar7 + 0x14) = -((ushort)iVar8 & 1);
        iVar8 = rand();
        puVar7[0xc] = (byte)iVar8 | 0x80;
        uVar9 = rand();
        uVar9 = (uVar9 & 0x7f) + 0x60;
        puVar7[0xd] = (char)uVar9;
        if ((byte)puVar7[0xc] < uVar9) {
          puVar7[0xd] = puVar7[0xc];
        }
        iVar8 = rand();
        puVar7[0xe] = ((byte)iVar8 & 0x3f) + 0x40;
LAB_blowhard__800871a8:
        puVar7[0xf] = 0x40;
        puVar7[10] = 2;
        break;
      case 0x4f:
        puVar7 = (undefined *)AllocateParticleToBuffer(1);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 0xf;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 10),(int *)param_3);
        Vec3Add(&local_60,param_3,param_4);
        uVar9 = rand();
        local_60 = local_60 + -0x20 + (uVar9 & 0x3f);
        uVar9 = rand();
        local_5c = local_5c + -0x20 + (uVar9 & 0x3f);
        uVar9 = rand();
        local_58 = local_58 + -0x40 + (uVar9 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar7 + 4),&local_60);
        puVar7[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar8 = rand();
          puVar7[0x10] = (byte)iVar8 | 0xc0;
          iVar8 = rand();
          puVar7[0x11] = ((byte)iVar8 & 0x3f) + 0xa0;
          puVar7[0x12] = 0;
          iVar8 = rand();
          puVar7[0x14] = (byte)iVar8 | 0xe0;
          iVar8 = rand();
          puVar7[0x15] = (byte)iVar8 | 0xe0;
          puVar7[0x16] = 0x80;
        }
        else {
          iVar8 = rand();
          puVar7[0x10] = (byte)iVar8 | 0xc0;
          iVar8 = rand();
          puVar7[0x11] = ((byte)iVar8 & 0x3f) + 0x40;
          iVar8 = rand();
          puVar7[0x12] = ((byte)iVar8 & 0x3f) + 0x40;
          iVar8 = rand();
          puVar7[0x14] = (byte)iVar8 | 0xe0;
          iVar8 = rand();
          puVar7[0x15] = ((byte)iVar8 & 0x1f) + 0xa0;
          iVar8 = rand();
          puVar7[0x16] = ((byte)iVar8 & 0x1f) + 0xa0;
        }
        puVar7[0x13] = 0x50;
        break;
      case 0x50:
        puVar7 = (undefined *)AllocateParticleToBuffer(1);
        *puVar7 = uVar10;
        iVar8 = rand();
        puVar7[2] = (byte)iVar8 & 0xf;
        puVar7[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar7 + 4),(int *)param_3);
        uVar9 = rand();
        local_50 = (int)((int)param_4 * ((uVar9 & 0xfff) - 0x800)) >> 0xc;
        uVar9 = rand();
        local_4c = (int)((int)param_4 * ((uVar9 & 0xfff) - 0x800)) >> 0xc;
        uVar9 = rand();
        local_48 = (int)((int)param_4 * (uVar9 & 0xfff)) >> 0xc;
        *(short *)(puVar7 + 4) = *(short *)(puVar7 + 4) + (short)local_50 * 4;
        *(short *)(puVar7 + 6) = *(short *)(puVar7 + 6) + (short)local_4c * 4;
        sVar11 = (short)local_48;
        *(short *)(puVar7 + 8) = *(short *)(puVar7 + 8) + sVar11 * 4;
        *(short *)(puVar7 + 10) = *(short *)(puVar7 + 4) + (short)local_50 * 2;
        *(short *)(puVar7 + 0xc) = *(short *)(puVar7 + 6) + (short)local_4c * 2;
LAB_blowhard__80087408:
        puVar7[0x10] = 0xe0;
        puVar7[0x11] = 0xc0;
        puVar7[0x13] = 0x50;
        puVar7[0x17] = 2;
        puVar7[0x12] = 0;
        puVar7[0x14] = 0xff;
        puVar7[0x15] = 0xff;
        puVar7[0x16] = 0x80;
        *(short *)(puVar7 + 0xe) = *(short *)(puVar7 + 8) + sVar11 * 2;
      }
      local_30 = local_30 + 4;
      iVar14 = iVar14 + 1;
    } while (iVar14 < local_40);
  }
  return;
}



int ** FUN_bog__80084718(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  int **ppiVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  short sVar7;
  uint uVar8;
  Spyro *pSVar9;
  int *piVar10;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar3 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar3 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar3 + 0x56) = (char)uVar8;
  if (param_1 < 0x10e) {
    if (0x103 < param_1) goto LAB_bog__80084f34;
    if (param_1 == 0x4c) {
LAB_bog__80084ffc:
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
      FUN_800529cc(ppiVar3);
      return ppiVar3;
    }
    if (param_1 < 0x4d) {
      if (param_1 == 0x10) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        ppiVar3[5] = ppiVar3[5] + 0x80;
        Vec3Copy(piVar10 + 1,(int *)(ppiVar3 + 3));
        *(undefined *)((int)piVar10 + 0x13) = 0;
        *(undefined *)((int)piVar10 + 0x12) = 0;
        *(short *)(piVar10 + 5) = 0x708;
        return ppiVar3;
      }
      if (param_1 < 0x11) {
        if (param_1 == 0xe) goto LAB_bog__80084a28;
        if (param_1 == 0xf) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          piVar10[2] = 0x8c;
          *(undefined *)(piVar10 + 4) = 3;
          *(undefined *)(piVar10 + 5) = 0xff;
          *piVar10 = 0;
          piVar10[1] = 0;
          *(undefined *)((int)piVar10 + 0xe) = 0;
          *(undefined *)((int)piVar10 + 0xf) = 0;
          *(undefined *)((int)piVar10 + 0x11) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(undefined *)((int)piVar10 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x10;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800526a8(ppiVar3);
          bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 1;
          goto LAB_bog__80084d68;
        }
      }
      else {
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar3);
          return ppiVar3;
        }
        if (((0x21 < param_1) && (param_1 < 0x46)) && (0x42 < param_1)) goto LAB_bog__80084bc8;
      }
    }
    else {
      if (param_1 == 0x78) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        *(undefined *)((int)ppiVar3 + 0x49) = 0;
        *piVar10 = 0;
        *(undefined2 *)(piVar10 + 2) = 0;
        *(undefined2 *)((int)piVar10 + 6) = 0;
        *(undefined2 *)(piVar10 + 1) = 0;
        piVar10[3] = 0;
        piVar10[4] = 0;
        if (param_2 == 0) {
          return ppiVar3;
        }
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        return ppiVar3;
      }
      if (param_1 < 0x79) {
        if ((param_1 < 0x58) && (0x52 < param_1)) {
LAB_bog__80084a28:
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *piVar10 = 0;
          piVar10[1] = 0;
          piVar10[2] = 0x8c;
          *(undefined *)((int)piVar10 + 0xe) = 0;
          *(undefined *)((int)piVar10 + 0xf) = 0;
          *(undefined *)((int)piVar10 + 0x11) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(undefined *)((int)piVar10 + 0x13) = 0;
          uVar1 = 3;
          if (*(short *)(param_2 + 0x36) == 0xd) {
            uVar1 = 2;
          }
          *(undefined *)(piVar10 + 4) = uVar1;
          *(undefined *)(piVar10 + 5) = 0xff;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x40;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          FUN_800529cc(ppiVar3);
          ppiVar3[7] = (int *)0xffffffff;
          Vec3Copy(aiStack_48,(int *)(ppiVar3 + 3));
          local_40 = local_40 + 0x400;
          MobyUpdatePosition(aiStack_48,0x10000);
          FUN_800533d0(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          if (*(short *)((int)ppiVar3 + 0x36) == 0xe) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 0xc;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x53) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 1;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x54) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 2;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x55) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 3;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x56) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 4;
          }
          if (*(short *)((int)ppiVar3 + 0x36) != 0x57) {
            return ppiVar3;
          }
          *(undefined *)((int)ppiVar3 + 0x4f) = 5;
          return ppiVar3;
        }
      }
      else {
        if (param_1 == 0xfb) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          FUN_800529cc(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 0xe;
          if (dragonState == 3) {
            uVar1 = 0x14;
          }
          else {
            uVar1 = 0x30;
            if (dragonState != 1) goto LAB_bog__80084dd4;
          }
          *(undefined *)((int)ppiVar3 + 0x57) = uVar1;
LAB_bog__80084dd4:
          uVar8 = rand();
          iVar5 = (uVar8 & 7) * 4;
          local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar5);
          local_34 = 0;
          local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar5);
          Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
          uVar8 = rand();
          local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
          Vec3Add(ppiVar3 + 3,param_2 + 0xc,&local_38);
          Vec3Copy(piVar10,&local_38);
          Vec3ScaleDownByPowerOfTwo(piVar10,2);
          uVar8 = rand();
          *piVar10 = *piVar10 + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar10[1] = piVar10[1] + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar10[2] = piVar10[2] + -0x7f + (uVar8 & 0xff);
          iVar5 = rand();
          *(char *)(ppiVar3 + 0x11) = (char)iVar5;
          iVar5 = rand();
          *(char *)((int)ppiVar3 + 0x45) = (char)iVar5;
          iVar5 = rand();
          *(char *)((int)ppiVar3 + 0x46) = (char)iVar5;
          iVar5 = rand();
          *(byte *)(piVar10 + 4) = (byte)iVar5 & 0xf;
          iVar5 = rand();
          *(byte *)((int)piVar10 + 0x11) = (byte)iVar5 & 0xf;
          iVar5 = rand();
          *(byte *)((int)piVar10 + 0x12) = (byte)iVar5 & 0xf;
          piVar10[3] = *(int *)(param_2 + 0x14);
          iVar5 = rand();
          *(byte *)((int)piVar10 + 0x13) = ((byte)iVar5 & 3) + 0x10;
          return ppiVar3;
        }
        if (((0xfa < param_1) && (param_1 < 0x102)) && (0xfe < param_1)) goto LAB_bog__80084bc8;
      }
    }
    goto LAB_bog__80085024;
  }
  if (param_1 == 400) {
LAB_bog__80084f88:
    InitArrayRelated(ppiVar3);
    if (param_2 == 0) {
      pSVar9 = &spyro;
    }
    else {
      pSVar9 = (Spyro *)(param_2 + 0xc);
    }
    Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
    ppiVar3[5] = ppiVar3[5] + 0x80;
    piVar10 = (int *)MobyUpdatePosition(ppiVar3 + 3,0x800);
    iVar5 = (int)piVar10 - (int)ppiVar3[5];
    if (iVar5 < 0) {
      iVar5 = -iVar5;
    }
    if (iVar5 < 0x800) {
      ppiVar3[5] = piVar10;
    }
    else {
      ppiVar3[5] = ppiVar3[5] + -0x80;
    }
    goto LAB_bog__80085050;
  }
  if (param_1 < 0x191) {
    if (param_1 < 0x138) {
      if (0x134 < param_1) {
LAB_bog__80084bc8:
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        *(undefined *)(ppiVar3 + 0x14) = 0x20;
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        FUN_800526a8(ppiVar3);
        uVar8 = rand();
        uVar4 = rand();
        uVar4 = uVar4 & 0x7ff;
        iVar5 = CosScaled(uVar4);
        iVar6 = CosScaled(uVar8 & 0xfff);
        *(short *)piVar10 = (short)((iVar5 >> 5) * iVar6 >> 0xc);
        iVar5 = CosScaled(uVar4);
        iVar6 = SinScaled(uVar8 & 0xfff);
        *(short *)((int)piVar10 + 2) = (short)((iVar5 >> 5) * iVar6 >> 0xc);
        iVar5 = SinScaled(uVar4);
        *(short *)(piVar10 + 1) = (short)(iVar5 >> 5);
        if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
          *(short *)piVar10 = *(short *)piVar10 + (short)(spyro.airMomentum.x >> 6);
          *(short *)((int)piVar10 + 2) =
               *(short *)((int)piVar10 + 2) + (short)(spyro.airMomentum.y >> 6);
          *(short *)(piVar10 + 1) = *(short *)(piVar10 + 1) + (short)(spyro.airMomentum.z >> 6);
        }
        ppiVar3[3] = ppiVar3[3] + *(short *)piVar10;
        ppiVar3[4] = ppiVar3[4] + *(short *)((int)piVar10 + 2);
        ppiVar3[5] = ppiVar3[5] + *(short *)(piVar10 + 1);
        iVar5 = rand();
        *(ushort *)((int)piVar10 + 6) = (ushort)iVar5 & 0xf;
        iVar5 = rand();
        *(ushort *)(piVar10 + 2) = (ushort)iVar5 & 0xf;
        iVar5 = rand();
        *(ushort *)((int)piVar10 + 10) = (ushort)iVar5 & 0xf;
        piVar10[4] = *(int *)(param_2 + 0x14) + -0x40;
        uVar8 = rand();
        piVar10[3] = 0x40 - (uVar8 & 0xf);
        if (2 < *(ushort *)((int)ppiVar3 + 0x36) - 0x135) {
          return ppiVar3;
        }
        bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
        ppiVar3[0x13] = (int *)0xa18618;
LAB_bog__80084d68:
        *(byte *)((int)ppiVar3 + 0x4b) = bVar2 | 0x80;
        return ppiVar3;
      }
      if (param_1 == 0x115) goto LAB_bog__80084f34;
      goto LAB_bog__80085024;
    }
    if (param_1 == 0x147) {
LAB_bog__80084f34:
      piVar10 = *ppiVar3;
      InitArrayRelated(ppiVar3);
      FUN_800529cc(ppiVar3);
      *(undefined *)((int)ppiVar3 + 0x4f) = 2;
      *(undefined *)(ppiVar3 + 0x13) = 0;
      *(undefined *)((int)ppiVar3 + 0x4d) = 0;
      *(undefined *)((int)ppiVar3 + 0x4e) = 0;
      *piVar10 = 0x40;
      return ppiVar3;
    }
    if (param_1 != 0x188) goto LAB_bog__80085024;
    InitArrayRelated(ppiVar3);
    *(undefined *)((int)ppiVar3 + 0x47) = 5;
    if (param_2 == 0) goto LAB_bog__8008503c;
    pSVar9 = (Spyro *)(param_2 + 0xc);
  }
  else {
    if (param_1 < 0x1aa) {
      if (0x1a6 < param_1) goto LAB_bog__80084bc8;
      if (param_1 == 0x195) goto LAB_bog__80084f88;
    }
    else {
      if (param_1 < 0x1c4) goto LAB_bog__80084ffc;
      if (param_1 == 0x1dd) goto LAB_bog__80084f88;
    }
LAB_bog__80085024:
    InitArrayRelated(ppiVar3);
    pSVar9 = (Spyro *)(param_2 + 0xc);
    if (param_2 == 0) {
LAB_bog__8008503c:
      pSVar9 = &spyro;
    }
  }
  Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
LAB_bog__80085050:
  FUN_800526a8(ppiVar3);
  return ppiVar3;
}



void FUN_bog__80085084(int param_1)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  short sVar9;
  short sVar10;
  char *pcVar11;
  char *pcVar12;
  short *result;
  char *pcVar13;
  int local_50;
  int local_4c;
  int local_48;
  undefined4 local_40;
  undefined4 local_3c;
  int local_38;
  int local_34;
  int local_30;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    cVar4 = (char)param_1;
    pcVar11 = ptr_headOfParticleBuffer + 1;
    pcVar13 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar12 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar12) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[9] = pcVar11[9] + cVar4 * '\x02';
        pcVar11[0xc] = pcVar11[0xc] + cVar4 * -4;
        pcVar11[0xb] = pcVar11[0xb] + cVar4 * -4;
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar11[0xd] = pcVar11[0xd] + cVar4 * -4;
        goto LAB_bog__80086164;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        pcVar11[9] = pcVar11[9] + cVar4 * '\x04';
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[0xc] = pcVar11[0xc] + cVar4 * -4;
        pcVar11[0xb] = pcVar11[0xb] + cVar4 * -4;
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar11[0xd] = pcVar11[0xd] + cVar4 * -4;
        goto LAB_bog__80086164;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        pcVar11[9] = pcVar11[9] + cVar4 * '\x04';
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[0xc] = pcVar11[0xc] + cVar4 * -4;
        pcVar11[0xb] = pcVar11[0xb] + cVar4 * -4;
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar11[0xd] = pcVar11[0xd] + cVar4 * -4;
        goto LAB_bog__80086164;
      case '\t':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar11[9] = pcVar11[9] + cVar4 * '\x02';
        goto LAB_bog__80086164;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_bog__8008617c;
        Vec3Copy(&local_50,(int *)&spyro);
        iVar7 = CosScaled((int)*(short *)(pcVar11 + 0x17));
        local_50 = local_50 + (iVar7 >> 4);
        iVar7 = SinScaled((int)*(short *)(pcVar11 + 0x17));
        local_4c = local_4c + (iVar7 >> 4);
        local_48 = local_48 + 0x100;
        Vec3ScaleDownBy4(result,&local_50);
        sVar9 = *(short *)(pcVar11 + 0x17);
        *(short *)(pcVar11 + 0x17) = sVar9 + 0x40;
        iVar7 = CosScaled((int)(short)(sVar9 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar7 < 0) {
          iVar7 = -iVar7;
        }
        pcVar11[9] = (char)(iVar7 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar12 + 0x12);
        pcVar11[0xb] = pcVar11[0xb] + -8;
        pcVar11[0xc] = pcVar11[0xc] + -8;
        pcVar11[0xd] = pcVar11[0xd] + -8;
        if (pcVar11[0xb] == '\0') goto LAB_bog__8008617c;
        goto LAB_bog__8008616c;
      case '\f':
        pcVar11[10] = pcVar11[10] + '\b';
        pcVar11[9] = pcVar11[9] + '\x02';
        if (pcVar11[0xb] != '\0') {
          pcVar11[0xb] = pcVar11[0xb] + -8;
        }
        if (pcVar11[0xc] != '\0') {
          pcVar11[0xc] = pcVar11[0xc] + -8;
        }
        if (pcVar11[0xd] != '\0') {
          pcVar11[0xd] = pcVar11[0xd] + -8;
        }
        if ((*(uint *)(pcVar11 + 0xb) & 0xffffff) != 0) goto LAB_bog__8008616c;
        goto LAB_bog__8008617c;
      case '\x15':
        pcVar11[0x17] = pcVar11[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar8 = (uint)(byte)pcVar11[0x18] + gameSpeedMultiplyer;
        pcVar11[0x18] = (char)uVar8;
        *(short *)(pcVar11 + 3) =
             *(short *)(pcVar11 + 0x11) +
             (short)((int)((int)sineWaveArray[(byte)pcVar11[0x17] + 0x40] * (uVar8 & 0xff)) >> 0xc);
        iVar7 = (int)sineWaveArray[(byte)pcVar11[0x17]] * (uint)(byte)pcVar11[0x18];
        sVar9 = (short)gameSpeedMultiplyer;
        bVar1 = pcVar11[0x18];
        pcVar11[10] = pcVar11[10] + '\x04';
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar9 * 6;
        sVar9 = *(short *)(pcVar11 + 0x13);
        goto LAB_bog__80085574;
      case '\x18':
        if ((byte)pcVar11[0xb] < 0xf0) {
          pcVar11[0xb] = pcVar11[0xb] + 4;
        }
        if ((byte)pcVar11[0xc] < 0xf0) {
          pcVar11[0xc] = pcVar11[0xc] + 4;
        }
        if ((byte)pcVar11[0xd] < 0xf0) {
          pcVar11[0xd] = pcVar11[0xd] + 4;
        }
        pcVar11[0x1b] = pcVar11[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar7 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar7 = dragonTimerCurrentState;
        }
        *(short *)(pcVar11 + 0x17) = (short)((int)((uint)(byte)pcVar11[0x1c] * (0x48 - iVar7)) >> 3)
        ;
        iVar7 = ((int)((0x20 - (uint)(byte)pcVar11[0x1c]) * iVar7) >> 4) + 8;
        *(short *)(pcVar11 + 0x19) = (short)iVar7;
        *(short *)(pcVar11 + 3) =
             *(short *)(pcVar11 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar11[0x1b] + 0x40] * (iVar7 * 0x10000 >> 0x10) >>
                    0xc);
        sVar9 = sineWaveArray[(byte)pcVar11[0x1b]];
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 0x15) + *(short *)(pcVar11 + 0x17) + 0x20;
        *(short *)(pcVar11 + 5) =
             *(short *)(pcVar11 + 0x13) +
             (short)((int)sVar9 * (int)*(short *)(pcVar11 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar11[0xb] - param_1;
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[9] = pcVar11[9] + cVar4 * '\x02';
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar11[0xb] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar11[0xc] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar11[0xc] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar11[0xd] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        bVar1 = pcVar11[1];
        pcVar11[0xd] = (char)iVar7;
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_bog__80086164;
      case 'B':
        iVar7 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar11[1] & 1U) != 0) {
              *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + *(short *)(pcVar11 + 0xf);
              *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + *(short *)(pcVar11 + 0x11);
              *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + *(short *)(pcVar11 + 0x13);
              if ((pcVar11[1] & 2U) != 0) {
                iVar6 = rand();
                *(ushort *)(pcVar11 + 0xf) = *(short *)(pcVar11 + 0xf) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar11 + 0x11) = *(short *)(pcVar11 + 0x11) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar11 + 0x13) = *(short *)(pcVar11 + 0x13) + -1 + ((ushort)iVar6 & 2);
              }
            }
            iVar7 = iVar7 + 1;
            pcVar11[1] = pcVar11[1] + '\x01';
          } while (iVar7 < param_1);
        }
        bVar3 = (byte)pcVar11[1] < 0x18;
        goto LAB_bog__80086164;
      case 'F':
        local_40._0_2_ = (short)((int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3) >> 1);
        local_40._2_2_ = (short)((int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7) >> 1);
        local_3c = CONCAT22(local_3c._2_2_,sVar9);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + (short)local_40;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + local_40._2_2_;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar9;
        iVar7 = rand();
        local_40._0_2_ = (short)local_40 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_40._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_40 = CONCAT22(sVar9,(short)local_40);
        if ((pcVar11[1] & 1U) != 0) {
          local_3c = CONCAT22(local_3c._2_2_,(short)local_3c + -1);
        }
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + (short)local_40;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar9;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + (short)local_3c;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_bog__8008617c;
        cVar2 = pcVar11[0xf];
        pcVar11[0xf] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0x80) {
          pcVar11[0xf] = -0x80;
        }
        cVar2 = pcVar11[0x10];
        pcVar11[0x10] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x60) {
          pcVar11[0x10] = '`';
        }
        cVar2 = pcVar11[0x13];
        pcVar11[0x11] = '\0';
        pcVar11[0x13] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0xc0) {
          pcVar11[0x13] = -0x40;
        }
        cVar2 = pcVar11[0x14];
        pcVar11[0x14] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x80) {
          pcVar11[0x14] = -0x80;
        }
        cVar2 = pcVar11[0x15];
        pcVar11[0x15] = cVar2 - 6U;
        if ((byte)(cVar2 - 6U) < 0x20) {
          pcVar11[0x15] = ' ';
        }
        break;
      case 'G':
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_bog__8008617c;
        local_38 = (int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3);
        local_34 = (int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5);
        local_30 = (int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7);
        uVar8 = rand();
        local_38 = local_38 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_34 = local_34 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_30 = local_30 + -1 + (uVar8 & 2);
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + (short)local_38;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + (short)local_34;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + (short)local_30;
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 9) - (short)local_38;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 0xb) - (short)local_34;
        pcVar11[0x13] = pcVar11[0x13] + -2;
        pcVar11[0x15] = pcVar11[0x15] + -4;
        pcVar11[0x14] = pcVar11[0x14] + -2;
        pcVar11[0x10] = pcVar11[0x10] + -3;
        pcVar11[0xf] = pcVar11[0xf] + -3;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 0xd) - (short)local_30;
        pcVar11[0x11] = pcVar11[0x11] + -3;
        break;
      case 'H':
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        if ((0x2f < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_bog__8008617c;
        local_40 = (int)*(short *)(pcVar11 + 3) - (int)*(short *)(pcVar11 + 9) >> 1;
        local_3c = (int)*(short *)(pcVar11 + 5) - (int)*(short *)(pcVar11 + 0xb) >> 1;
        local_38 = (int)*(short *)(pcVar11 + 7) - (int)*(short *)(pcVar11 + 0xd) >> 1;
        uVar8 = rand();
        local_40 = local_40 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_3c = local_3c + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_38 = local_38 + -1 + (uVar8 & 2);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + (short)local_40;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + (short)local_3c;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + (short)local_38;
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 3) + (short)local_40 * -2;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 5) + (short)local_3c * -2;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 7) + (short)local_38 * -2;
        break;
      case 'L':
        pcVar11[0x17] = pcVar11[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar8 = (uint)(byte)pcVar11[0x18] + gameSpeedMultiplyer;
        pcVar11[0x18] = (char)uVar8;
        *(short *)(pcVar11 + 3) =
             *(short *)(pcVar11 + 0xf) +
             (short)((int)((int)sineWaveArray[(byte)pcVar11[0x17] + 0x40] * (uVar8 & 0xff)) >> 0xc);
        iVar7 = (int)sineWaveArray[(byte)pcVar11[0x17]] * (uint)(byte)pcVar11[0x18];
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + (short)gameSpeedMultiplyer * 6;
        bVar1 = pcVar11[0x18];
        sVar9 = *(short *)(pcVar11 + 0x11);
LAB_bog__80085574:
        *(short *)(pcVar11 + 5) = sVar9 + (short)(iVar7 >> 0xc);
        if (bVar1 < 0xc1) break;
        goto LAB_bog__8008617c;
      case 'M':
        sVar10 = (short)((int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3) >> 1);
        sVar5 = (short)((int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7) >> 1);
        local_3c = CONCAT22(local_3c._2_2_,sVar9);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + sVar10;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + sVar5;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar9;
        sVar5 = sVar5 + 1;
        local_40 = CONCAT22(sVar5,sVar10);
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + sVar10;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar5;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + sVar9;
        if (0x1f < (byte)(cVar2 + 1U)) goto LAB_bog__8008617c;
        break;
      case 'N':
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        if ((0x27 < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_bog__8008617c;
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + *(short *)(pcVar11 + 0xf);
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + *(short *)(pcVar11 + 0x11);
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + *(short *)(pcVar11 + 0x13);
        iVar7 = rand();
        *(ushort *)(pcVar11 + 0xf) = *(short *)(pcVar11 + 0xf) + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        *(ushort *)(pcVar11 + 0x11) = *(short *)(pcVar11 + 0x11) + -1 + ((ushort)iVar7 & 2);
        uVar8 = rand();
        iVar7 = (*(ushort *)(pcVar11 + 0x13) - 1) + (uVar8 & 2);
        *(short *)(pcVar11 + 0x13) = (short)iVar7;
        if (2 < iVar7 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar11 + 0x13) = 2;
        }
        if (*(short *)(pcVar11 + 0x13) < -4) {
          *(undefined2 *)(pcVar11 + 0x13) = 0xfffc;
        }
        pcVar11[0xb] = pcVar11[0xb] + -2;
        pcVar11[0xd] = pcVar11[0xd] + -1;
        pcVar11[0xc] = pcVar11[0xc] + -2;
        break;
      case 'O':
        sVar10 = (short)((int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5) >> 1);
        local_40 = CONCAT22(sVar9,sVar10);
        sVar5 = (short)((int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7) >> 1);
        local_3c = CONCAT22(local_3c._2_2_,sVar5);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + sVar10;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + sVar9;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar5;
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + sVar10;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar9;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_bog__8008617c;
        pcVar11[0xf] = pcVar11[0xf] + -3;
        pcVar11[0x13] = pcVar11[0x13] + -3;
        pcVar11[0x10] = pcVar11[0x10] + -4;
        pcVar11[0x14] = pcVar11[0x14] + -4;
        if (5 < (byte)pcVar11[0x15]) {
          pcVar11[0x15] = pcVar11[0x15] - 6;
        }
        break;
      case 'P':
        sVar10 = *(short *)(pcVar11 + 9) - *(short *)(pcVar11 + 3);
        sVar5 = *(short *)(pcVar11 + 0xb) - *(short *)(pcVar11 + 5);
        local_40 = CONCAT22(sVar5,sVar10);
        sVar9 = *(short *)(pcVar11 + 7);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + sVar10;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + sVar5;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + (*(short *)(pcVar11 + 0xd) - sVar9);
        sVar9 = (*(short *)(pcVar11 + 0xd) - sVar9) + -1;
        local_3c = CONCAT22(local_3c._2_2_,sVar9);
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + sVar10;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar5;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        bVar3 = (byte)(cVar2 + 1U) < 0x20;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + sVar9;
LAB_bog__80086164:
        if (bVar3) {
LAB_bog__8008616c:
          if (pcVar11[2] != '\0') break;
        }
LAB_bog__8008617c:
        FUN_80053608(pcVar12);
      }
      pcVar11 = pcVar11 + 0x20;
      pcVar13 = pcVar13 + 0x20;
      result = result + 0x10;
      pcVar12 = pcVar12 + 0x20;
    } while (*pcVar11 != -1);
  }
  return;
}



void FUN_bog__800861cc(int param_1,undefined4 param_2,int *param_3,int *param_4)

{
  bool bVar1;
  char cVar2;
  short extraout_var;
  undefined *puVar3;
  uint uVar4;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  undefined uVar8;
  short sVar9;
  int iVar10;
  int iVar11;
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int aiStack_90 [4];
  int local_80;
  int local_7c;
  int local_78;
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  uint local_48;
  int local_40;
  int local_30;
  
  iVar11 = 0;
  if (0 < param_1) {
    local_48 = (uint)param_4 & 0xf;
    local_40 = local_48 << 1;
    local_30 = 0;
    local_50 = param_1;
    do {
      uVar8 = (undefined)param_2;
      cVar2 = (char)param_4;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xf] = 0x2e;
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_bog__80086884;
      case 1:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        if (bVar1) {
          uVar8 = 8;
        }
        else {
          uVar8 = 0x10;
        }
        puVar5[10] = uVar8;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x60;
        goto LAB_bog__8008686c;
      case 2:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        uVar7 = rand();
        local_a0 = (uVar7 & 0x3f) - 0x20;
        uVar7 = rand();
        local_9c = (uVar7 & 0x3f) - 0x20;
        local_98 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),&local_a0);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x20;
        iVar6 = rand();
        puVar5[0xf] = 0x2e;
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_bog__80086884;
      case 9:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar8 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar5[0xc] = 0x80;
              puVar5[0xd] = 0x80;
              puVar5[0xe] = 0x80;
              goto LAB_bog__80086458;
            }
            puVar5[0xc] = 0xe0;
          }
          else {
            puVar5[0xc] = 0xf0;
            uVar8 = 0x60;
          }
          puVar5[0xd] = uVar8;
          puVar5[0xe] = 0;
        }
        else {
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
        }
LAB_bog__80086458:
        puVar5[0xf] = 0x2e;
        goto LAB_bog__80086884;
      case 10:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)&spyro);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_8006e438)[local_30];
        puVar5[0xd] = (&DAT_8006e439)[local_30];
        uVar8 = (&DAT_8006e43a)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar8;
        *(short *)(puVar5 + 0x18) = (short)(((local_50 - iVar11) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        puVar5[0x11] = 4;
        sVar9 = *(short *)((int)param_3 + 0x36);
        if (sVar9 == 0x22) {
          Vec3Copy(aiStack_90,param_3 + 3);
        }
        else if ((sVar9 == 0xad) || (sVar9 == 0xb5)) {
          iVar6 = (int)param_4 >> 0x18;
          if (iVar6 < 6) {
            puVar3 = (undefined *)0x8006e4e0;
            goto LAB_bog__80086604;
          }
          puVar5[1] = 5;
          puVar5[0x11] = 0x16;
          Vec3Copy(aiStack_90,(int *)(iVar6 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar9 == 0x78) {
            puVar3 = &DAT_8006e570;
          }
          else {
            puVar3 = &DAT_8006e498;
            iVar6 = iVar11;
LAB_bog__80086604:
            puVar3 = puVar3 + iVar6 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar3,aiStack_90);
          Vec3Add(aiStack_90,aiStack_90,param_3 + 3);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),aiStack_90);
        puVar5[0xd] = (char)((uint)param_4 >> 8);
        puVar5[0xc] = cVar2;
        puVar5[0xe] = (char)((uint)param_4 >> 0x10);
        puVar5[0xf] = 0x2e;
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 7) + 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0x10] = 0;
        break;
      case 0x15:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),param_3);
        cVar2 = cVar2 * '\x02';
        if (0xf < ((uint)param_4 & 0x1f)) {
          cVar2 = cVar2 + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        puVar5[0xe] = (char)local_48 * -8 + -0x80;
        puVar5[0x10] = 0;
        puVar5[10] = '0' - (char)local_40;
        puVar5[0xb] = (char)((int)param_4 << 1);
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 2;
        break;
      case 0x18:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),param_3);
        puVar5[10] = 0x30;
        puVar5[0x11] = 8;
        *(short *)(puVar5 + 0x18) = (short)(iVar11 << 5);
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        uVar8 = (undefined)(iVar11 << 4);
        puVar5[0xb] = uVar8;
        puVar5[0xf] = 0x2e;
        puVar5[0x10] = 0;
        *(undefined2 *)(puVar5 + 0x1a) = 0x10;
        puVar5[0x1c] = uVar8;
        puVar5[0x1d] = (char)iVar11;
        break;
      case 0x21:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_80,(int *)&spyro);
          local_78 = spyro.unkown_heightRelated;
          uVar7 = rand();
          local_80 = local_80 + -0x1f + (uVar7 & 0x3e);
          uVar7 = rand();
          local_7c = local_7c + -0x1f + (uVar7 & 0x3e);
        }
        else {
          local_80 = 0x164;
          local_7c = 0;
          local_78 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_80,&local_80);
          Vec3Add(&local_80,&local_80,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_80);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x20;
LAB_bog__8008686c:
        puVar5[0xf] = 0x2e;
        puVar5[0xc] = uVar8;
        puVar5[0xd] = uVar8;
        puVar5[0xe] = uVar8;
LAB_bog__80086884:
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x42:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = (short)(*param_3 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = (short)(param_3[1] >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        iVar10 = param_3[2];
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)(iVar10 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_bog__80086998;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_bog__80086998;
        case 2:
          puVar5[0xc] = 0;
LAB_bog__80086998:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_bog__800869e0;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_bog__800869e0;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_bog__800869e0;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_bog__800869e0:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        uVar7 = rand();
        local_70 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_6c = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_68 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = (short)(*param_3 >> 2) + (short)local_70 * 4;
        *(short *)(puVar5 + 6) = (short)(param_3[1] >> 2) + (short)local_6c * 4;
        sVar9 = (short)local_68;
        *(short *)(puVar5 + 8) = (short)(param_3[2] >> 2) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_70 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_6c * 2;
        goto LAB_bog__8008709c;
      case 0x47:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        uVar7 = rand();
        local_70 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_6c = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_68 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)(*param_3 >> 2) + (short)local_70 * 4;
        *(short *)(puVar5 + 6) = (short)(param_3[1] >> 2) + (short)local_6c * 4;
        *(short *)(puVar5 + 8) = (short)(param_3[2] >> 2) + (short)local_68 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_70;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_6c;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_68;
        break;
      case 0x4c:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x10),param_3);
        if (((uint)param_4 & 0x1f) < 0x10) {
          cVar2 = (char)((int)param_4 << 1);
        }
        else {
          cVar2 = cVar2 * '\x02' + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        cVar2 = (char)local_48 * -8 + -0x80;
        goto LAB_bog__80086e30;
      case 0x4d:
        puVar5 = (undefined *)AllocateParticleToBuffer(4);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        uVar7 = rand();
        CosScaled(uVar7 & 0xfff);
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + extraout_var;
        uVar4 = rand();
        SinScaled(uVar4 & 0x7ff);
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + extraout_var_00;
        SinScaled(uVar7 & 0xfff);
        puVar5[0x17] = 0x7f;
        puVar5[0x11] = 0x40;
        puVar5[0x12] = 0x60;
        puVar5[0x16] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x10] = 0x80;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0x80;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar6 & 1);
        iVar6 = rand();
        puVar5[0xc] = (byte)iVar6 | 0x80;
        uVar7 = rand();
        uVar7 = (uVar7 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar7;
        if ((byte)puVar5[0xc] < uVar7) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar6 = rand();
        cVar2 = ((byte)iVar6 & 0x3f) + 0x40;
LAB_bog__80086e30:
        puVar5[0xe] = cVar2;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),param_3);
        Vec3Add(&local_70,param_3,param_4);
        uVar7 = rand();
        local_70 = local_70 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_6c = local_6c + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_68 = local_68 + -0x40 + (uVar7 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_70);
        puVar5[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0xa0;
          puVar5[0x12] = 0;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = (byte)iVar6 | 0xe0;
          puVar5[0x16] = 0x80;
        }
        else {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x12] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = ((byte)iVar6 & 0x1f) + 0xa0;
          iVar6 = rand();
          puVar5[0x16] = ((byte)iVar6 & 0x1f) + 0xa0;
        }
        puVar5[0x13] = 0x50;
        break;
      case 0x50:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        uVar7 = rand();
        local_60 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_5c = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_58 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + (short)local_60 * 4;
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + (short)local_5c * 4;
        sVar9 = (short)local_58;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_60 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_5c * 2;
LAB_bog__8008709c:
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + sVar9 * 2;
      }
      local_30 = local_30 + 4;
      iVar11 = iVar11 + 1;
    } while (iVar11 < local_50);
  }
  return;
}



void FUN_cliff__8007b854(void)

{
  ExitFairyOrBalloonist();
  spyro.headAngle.pitch = 0;
  spyro.headAngle.pad2 = 0;
  spyro.unkown1._1_1_ = 0;
  if (ptr_SparxMoby != 0) {
    *(undefined *)(ptr_SparxMoby + 0x50) = 0x10;
  }
  return;
}



void FUN_cliff__8007b898(void)

{
  undefined4 uVar1;
  LevelIDS LVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int *outputArray;
  uint local_78;
  uint local_74;
  int local_70;
  short local_68;
  short local_66;
  short local_64;
  uint local_60;
  uint local_5c;
  int local_58;
  uint local_50;
  uint local_4c;
  int local_48;
  uint local_40;
  uint local_3c;
  int local_38;
  uint local_30;
  uint local_2c;
  int local_28;
  
  if (balloonistState < 4) {
    DAT_800700f8 = 0;
    DAT_800700f4 = DAT_8007784c;
    FUN_800522c0(&DAT_800700f4,0);
  }
  switch(balloonistState) {
  case 0:
    if (0x5f < DAT_800777ec) {
      iVar6 = CosScaled(DAT_80077838);
      cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar6 * DAT_8007783c >> 0xc);
      iVar6 = SinScaled(DAT_80077838);
      cameraPosition.z = DAT_80077840;
      cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar6 * DAT_8007783c >> 0xc);
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      balloonistState = 1;
      DAT_800777ec = 0;
      spyro.RelativeSparxAngle.roll = (char)((int)DAT_8007781c >> 4);
      spyro.nextAnim = '\0';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    iVar6 = SinScaled((DAT_800777ec << 0xb) / 0x60 + -0x400);
    iVar6 = iVar6 + 0x1000;
    if (DAT_800777ec == gameSpeedMultiplyer) {
      if (ptr_SparxMoby != (int *)0x0) {
        *(undefined *)(ptr_SparxMoby + 0x14) = 0;
        *(undefined *)((int)ptr_SparxMoby + 0x51) = 0;
        if (*(int *)(*ptr_SparxMoby + 0xc) != 0) {
          SetToZero();
          *(undefined4 *)(*ptr_SparxMoby + 0xc) = 0;
        }
      }
      backupSuperFlameTimer = superFlameTimer;
      Unk_UpdateSpyroAfterEvents(1);
      spyro.currentAnim = '\x01';
      spyro.nextAnim = '\x01';
      spyro.nextKeyframe = '\x01';
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = 0x4a0;
      DAT_80077810 = 0;
      DAT_80077814 = 0x164;
      Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&DAT_8007780c,&DAT_8007780c);
      Vec3Add(&DAT_8007780c,&DAT_8007780c,DAT_8007784c + 0xc);
      DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      DAT_8007781c = ATan2Scaled(local_78,local_74,1);
    }
    if (DAT_800777ec < 0x18) {
      iVar3 = SinScaled((DAT_800777ec << 0xb) / 0x18 + -0x400);
      iVar3 = iVar3 + 0x1000;
      if ((DAT_8007781c - DAT_80077818 & 0xfff) < 0x801) {
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
      }
      else {
LAB_cliff__8007bd0c:
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 - (iVar4 * iVar3 >> 0xd);
      }
LAB_cliff__8007bd2c:
      spyro.RelativeSparxAngle.roll = (char)(iVar3 >> 4);
      uVar1._0_1_ = '\b';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
LAB_cliff__8007bd3c:
      spyro._88_4_ = uVar1;
    }
    else {
      if (0x47 < DAT_800777ec) {
        iVar3 = SinScaled(((DAT_800777ec + -0x48) * 0x800) / 0x18 + -0x400);
        iVar3 = iVar3 + 0x1000;
        if (DAT_800777ec - gameSpeedMultiplyer < 0x48) {
          DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
          spyro.nextAnim = '\x03';
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\b';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          DAT_8007781c = (uint)*(byte *)(DAT_8007784c + 0x46) * 0x10 - 0x800 & 0xfff;
        }
        if (0x800 < (DAT_8007781c - DAT_80077818 & 0xfff)) goto LAB_cliff__8007bd0c;
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
        goto LAB_cliff__8007bd2c;
      }
      iVar3 = SinScaled(((DAT_800777ec + -0x18) * 0x800) / 0x30 + -0x400);
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      Vec3Scale(&local_78,&local_78,iVar3 + 0x1000);
      Vec3ScaleDownByPowerOfTwo((int *)&local_78,0xd);
      Vec3Add(&spyro,&DAT_80077800,&local_78);
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      spyro._88_4_ = (int)uVar5 >> 1;
      if ((int)spyro._88_4_ < 4) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      uVar1._0_1_ = '\x10';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
      if (0x10 < (int)spyro._88_4_) goto LAB_cliff__8007bd3c;
    }
    spyro.RelativeSparxAngle.yaw = '\0';
    spyro.RelativeSparxAngle.pitch = '\0';
    spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
    UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
    FUN_80049fac(1);
    FlameButAlsoNotFlame(gameSpeedMultiplyer);
    if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
    }
    else {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
    }
    iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
    iVar4 = CosScaled(iVar3);
    cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar4 * iVar7 >> 0xc);
    iVar3 = SinScaled(iVar3);
    local_78 = 0x220;
    local_70 = 0x340;
    local_74 = 0;
    cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar3 * iVar7 >> 0xc);
    cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
    Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&local_78,&local_78);
    Vec3Add(&local_78,&local_78,DAT_8007784c + 0xc);
    Vec3Subtract((int *)&local_78,(int *)&local_78,&cameraPosition.x);
    if (DAT_800777ec < 0x20) {
      local_68 = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      local_66 = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      local_64 = (short)iVar6;
      iVar6 = FUN_8001796c((int)local_68,(int)cameraAngle.roll);
      cameraAngle.roll = cameraAngle.roll + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_66,(int)cameraAngle.pitch);
      cameraAngle.pitch = cameraAngle.pitch + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_64,(int)cameraAngle.yaw);
      cameraAngle.yaw = cameraAngle.yaw + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
    }
    else {
      cameraAngle.roll = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      cameraAngle.yaw = (short)iVar6;
    }
    (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
    Maybe_SoundEffectProcessing();
    break;
  case 1:
    if (balloonistDialogue < 0x1e) {
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x51) {
        return;
      }
      iVar6 = balloonistDialogue % 6;
      if (iVar6 == 0) {
        iVar3 = balloonistDialogue + 1;
      }
      else if (iVar6 < 3) {
        if ((balloonistDialogue < 3) && (requirementArtisans < 2)) {
          (*ptr_OverlayBalloonistStayHere)();
          iVar3 = balloonistDialogue;
        }
        else if (balloonistDialogue == 0xe) {
          do {
            iVar6 = rand();
            iVar6 = iVar6 % 5;
            if ((iVar6 == 0) && (DAT_80076fec == 0)) {
              iVar3 = 0x21;
LAB_cliff__8007c334:
              balloonistDialogue = iVar3;
            }
            else {
              if ((iVar6 == 1) && (DAT_80077004 == 0)) {
                iVar3 = 0x22;
                goto LAB_cliff__8007c334;
              }
              if ((iVar6 == 2) && (DAT_80077008 == 0)) {
                iVar3 = 0x23;
                goto LAB_cliff__8007c334;
              }
              if (((iVar6 == 3) && (iVar3 = 0x24, DAT_80077018 < 2)) ||
                 ((iVar6 == 4 && (iVar3 = 0x25, DAT_80077024 == 0)))) goto LAB_cliff__8007c334;
            }
            iVar3 = balloonistDialogue;
          } while (balloonistDialogue == 0xe);
        }
        else {
          balloonistDialogue = 0x1e;
          iVar3 = balloonistDialogue;
        }
      }
      else if (iVar6 == 3) {
        iVar3 = balloonistDialogue + 2;
      }
      else {
        iVar3 = 0x1f;
        if (iVar6 == 4) {
          iVar3 = balloonistDialogue + 1;
        }
      }
      balloonistDialogue = iVar3;
      DAT_800777ec = 0;
      return;
    }
    if (balloonistDialogue == 0x1e) {
      iVar6 = 1;
      do {
        if ((&unlockedHWs)[iVar6] != '\x02') break;
        iVar6 = iVar6 + 1;
      } while (iVar6 < 6);
      if ((currentButtonOneFrame & UP_BUTTON) == 0) {
        if ((currentButtonOneFrame & DOWN_BUTTON) != 0) {
          balloonistCursorPlacement = balloonistCursorPlacement + 1;
          if (iVar6 <= balloonistCursorPlacement) {
            balloonistCursorPlacement = 0;
          }
          goto LAB_cliff__8007c440;
        }
      }
      else {
        balloonistCursorPlacement = balloonistCursorPlacement + -1;
        if (balloonistCursorPlacement < 0) {
          balloonistCursorPlacement = iVar6 + -1;
        }
LAB_cliff__8007c440:
        DAT_800777ec = 0x20;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        levelID = balloonistCursorPlacement * 10;
        if (levelIDPortalExit <= (int)levelID) {
          levelID = levelID + ARTISANS_ID;
        }
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)levelID / 10 + -1;
        return;
      }
    }
    else {
      if (1 < balloonistDialogue - 0x1fU) {
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
          return;
        }
        if (DAT_800777ec < 0x51) {
          return;
        }
        if ((balloonistDialogue == 0x24) || (balloonistDialogue == 0x26)) {
          balloonistCursorPlacement = 0;
          balloonistDialogue = 0x1e;
          balloonistRandomGreeting = 1;
          return;
        }
        if (balloonistDialogue == 0x25) {
          DAT_800777ec = 0;
          balloonistDialogue = 0x26;
          return;
        }
        if (balloonistDialogue == 0x21) {
          LVar2 = STONE_HILL_ID;
        }
        else if (balloonistDialogue == 0x22) {
          LVar2 = DRY_CANYON_ID;
        }
        else {
          LVar2 = CLIFF_TOWN_ID;
          if (balloonistDialogue != 0x23) goto LAB_cliff__8007c71c;
        }
        levelID = LVar2;
LAB_cliff__8007c71c:
        balloonistDropoffLocation = balloonistDialogue + -0x1b;
        DAT_800777ec = 0;
        balloonistDialogue = 0x20;
        return;
      }
      if ((currentButtonOneFrame & (UP_BUTTON|DOWN_BUTTON)) != 0) {
        DAT_800777ec = 0x20;
        balloonistCursorPlacement = 1 - balloonistCursorPlacement;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        if (balloonistDialogue != 0x1f) {
          balloonistState = 2;
          DAT_800777ec = 0;
          return;
        }
        levelID = levelIDPortalExit + ARTISANS_ID;
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)(levelIDPortalExit + ARTISANS_ID) / 10 + -1;
        return;
      }
      if (balloonistDialogue != 0x1f) {
        balloonistCursorPlacement = 0;
        balloonistDialogue = 0x1e;
        balloonistRandomGreeting = 1;
        return;
      }
    }
    (*ptr_OverlayBalloonistStayHere)();
    break;
  case 2:
    if (DAT_800777ec < 0x66) {
      iVar6 = SinScaled((DAT_800777ec * 0x800) / 0x66 + -0x400);
      iVar6 = iVar6 + 0x1000;
      if (DAT_800777ec == gameSpeedMultiplyer) {
        *(undefined *)((int)DAT_80077850 + 0x4a) = 0xff;
        DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                   cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
        Vec3Subtract((int *)&local_60,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
        DAT_80077824 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        DAT_8007782c = (int)cameraAngle.roll;
        DAT_80077830 = (int)cameraAngle.pitch;
        DAT_80077834 = (int)cameraAngle.yaw;
        DAT_80077828 = cameraPosition.z;
        DAT_8007783c = 0xe00;
        DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 - 0x480 & 0xfff;
        DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
        DAT_80077848 = *(int *)(DAT_8007784c + 0x14) + 0x488;
        Vec3Copy(&DAT_80077800,(int *)&spyro);
        Vec3Copy(&DAT_8007780c,(int *)(DAT_8007784c + 0xc));
        spyro.currentKeyfame = spyro.nextKeyframe;
        spyro.nextAnim = '\x05';
        spyro.nextKeyframe = '\0';
        spyro.maybe_AnimSpeedRelated = '\0';
        spyro.animSpeed = '\a';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (DAT_800777ec < 0x30) {
        spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec) / 0x30;
        spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec) / 0x30;
        iVar3 = SinScaled(DAT_800777ec << 5);
        spyro.position.z = DAT_80077808 + (iVar3 * 10) / 0x24;
        spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
        UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
        FUN_80049fac(1);
      }
      else {
        if (DAT_800777ec - gameSpeedMultiplyer < 0x30) {
          DAT_80077808 = DAT_80077808 + 0x325;
          DAT_80077800 = DAT_8007780c;
          DAT_80077804 = DAT_80077810;
          Vec3Copy(&DAT_8007780c,(int *)((int)DAT_80077850 + 0xc));
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\x04';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
        }
        iVar3 = DAT_800777ec + -0x36;
        if (0x35 < DAT_800777ec - gameSpeedMultiplyer) {
          spyro.animSpeed = '\a';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * iVar3) / 0x30;
          spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * iVar3) / 0x30;
          iVar3 = SinScaled(iVar3 * 0x20);
          spyro.position.z = DAT_80077808 + (iVar3 >> 2);
        }
      }
      if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_60,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      uVar5 = Vec3CalculateLengthE((int *)&local_60,flag2D);
      iVar3 = ATan2Scaled(uVar5,-local_58,1);
      local_66 = (short)iVar3;
      iVar3 = ATan2Scaled(local_60,local_5c,1);
      local_64 = (short)iVar3;
      iVar3 = FUN_8001796c((int)local_66,DAT_80077830);
      cameraAngle.pitch = (short)DAT_80077830 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      iVar3 = FUN_8001796c((int)local_64,DAT_80077834);
      cameraAngle.yaw = (short)DAT_80077834 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      *(int *)((int)DAT_80077850 + 0x14) =
           DAT_80077844 + ((DAT_80077848 - DAT_80077844) * iVar6 >> 0xd);
    }
    else {
      balloonistState = 3;
      DAT_800777ec = 0;
    }
    break;
  case 3:
    if (0x7f < DAT_800777ec) {
      DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                 cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
      Vec3Subtract((int *)&local_50,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
      DAT_80077824 = Vec3CalculateLengthE((int *)&local_50,flag2D);
      DAT_80077828 = cameraPosition.z;
      DAT_8007783c = 0x800;
      levelLoadState = 0;
      portalNumber = 0xffffffff;
      canFlyIn = 0;
      portalToExitFromInHW = 0;
      DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 + 0x390 & 0xfff;
      balloonistState = 4;
      DAT_800777ec = 0;
      DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
      LevelTransitionRelated(1);
      ArrayCopy((int *)&DAT_80071e9c,DAT_80077850,0x58);
      DAT_80077850 = &DAT_80071e9c;
      if (DAT_800785e8 < 0x80200000) {
        outputArray = (int *)(DAT_80078a44 + -0x400c);
      }
      else {
        outputArray = (int *)&DAT_801fe000;
      }
      ArrayCopy(outputArray,DAT_800769f8,0x4000);
      iVar3 = (int)DAT_800769f8;
      iVar6 = outputArray[0xe] - (int)DAT_800769f8;
      DAT_800769f8 = outputArray;
      outputArray[0xe] = (int)outputArray + iVar6;
      *(int *)(DAT_800769f8[0xe] + 0x14) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x14) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x18) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x18) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x24) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x24) - iVar3);
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      spyro.position.x = DAT_8007780c;
      DAT_80077828 = cameraPosition.z;
      spyro.position.y = DAT_80077810;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      spyro.nextAnim = '\0';
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.unkown3 = '\x03';
      spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    }
    if (DAT_800777ec < 0x40) {
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0xc00);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    else {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * 0x4b;
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0x800);
      cameraPosition.z = DAT_80077828 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    Vec3Subtract((int *)&local_50,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_50,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_48,1);
    cameraAngle.pitch = (short)iVar6;
    local_30 = local_50;
    local_2c = local_4c;
    goto LAB_cliff__8007d4f8;
  case 5:
    if (levelLoadState < 0xd) {
      LevelTransitionRelated(1);
    }
    if (DAT_800777ec < 0x100) {
      iVar6 = SinScaled(((DAT_800777ec << 0xb) >> 8) + -0x400);
      iVar6 = iVar6 + 0x1000;
      if ((DAT_80077820 - DAT_80077838 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_8007783c + ((int)((DAT_80077824 - DAT_8007783c) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077840 + ((DAT_80077828 - DAT_80077840) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_40,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      local_38 = (local_38 + 0x200) - (iVar6 >> 4);
      uVar5 = Vec3CalculateLengthE((int *)&local_40,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_38,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_40,local_3c,1);
      cameraAngle.yaw = (short)iVar6;
    }
    else if (levelLoadState == 0xd) {
      balloonistState = 6;
      DAT_800777ec = 0;
      LevelTransitionRelated(1);
    }
    break;
  case 6:
    if (0x7f < DAT_800777ec) {
      balloonistState = 7;
      DAT_800777ec = 0;
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = *(int *)(&DAT_8006eadc + balloonistDropoffLocation * 8);
      DAT_80077810 = *(int *)(&DAT_8006eae0 + balloonistDropoffLocation * 8);
      DAT_80077814 = spyro.position.z;
      iVar6 = MobyUpdatePosition(&DAT_8007780c,0x10000);
      DAT_80077814 = iVar6 + 0x164;
      spyro.nextAnim = '\x05';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x06';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      DAT_80077828 = cameraPosition.z;
    }
    if (DAT_800777ec < 0x40) {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * -0x4b;
      iVar6 = SinScaled(DAT_800777ec * -0x10);
      cameraPosition.z = DAT_80077828 + (iVar6 * 3 >> 2);
    }
    else {
      if (DAT_800777ec - gameSpeedMultiplyer < 0x40) {
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14) + -0x4b;
      }
      iVar6 = SinScaled(DAT_800777ec * -0x10 + 0x400);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + (iVar6 * 3 >> 2);
    }
    Vec3Subtract((int *)&local_30,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_30,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_28,1);
    cameraAngle.pitch = (short)iVar6;
LAB_cliff__8007d4f8:
    iVar6 = ATan2Scaled(local_30,local_2c,1);
    cameraAngle.yaw = (short)iVar6;
    spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    spyro.RelativeSparxAngle.roll = *(char *)((int)DAT_80077850 + 0x46) + -0x80;
    break;
  case 7:
    if (DAT_800777ec < 0x40) {
      spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec >> 6);
      spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec >> 6);
      iVar6 = SinScaled(DAT_800777ec * 0x18 + 0x200);
      spyro.position.z = DAT_80077814 + (iVar6 * (DAT_80077808 - DAT_80077814)) / 0xb50;
      spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      FUN_80049fac(1);
      if (0x1f < DAT_800777ec) {
        *(int *)((int)DAT_80077850 + 0x14) =
             *(int *)((int)DAT_80077850 + 0x14) + DAT_800777ec * gameSpeedMultiplyer;
      }
    }
    else {
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      Unk_UpdateSpyroAfterEvents(1);
      spyro.isMovementLocked = 0x10;
      DAT_80076ea0 = &spyro;
      maybe_cameraRelated = 0;
      unk_cameraRelatedLocking = 0;
      flyInAnimation = &DAT_8006c8bc;
      unk_camera_related_angle = spyro.angle.yaw;
      CameraRotation(&cameraPosition);
      ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
      DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
      ChangeFlyInCamera();
      Maybe_HudInPauseMenu(0);
      gameState = GAMESTATE_GAMEPLAY;
      DAT_8007579c = 1;
      isInDragonState = 0;
      Maybe_ResetHudTimers();
    }
  }
                    // WARNING: Read-only address (ram,0x80076fec) is written
                    // WARNING: Read-only address (ram,0x80077004) is written
                    // WARNING: Read-only address (ram,0x80077008) is written
                    // WARNING: Read-only address (ram,0x80077018) is written
                    // WARNING: Read-only address (ram,0x80077024) is written
                    // WARNING: Read-only address (ram,0x8007784c) is written
  return;
}


/*
Unable to decompile 'Hollow_UpdateMobys'
Cause: Exception while decompiling dark_hollow::8007ae40: process: timeout

*/


int ** Hollow_SpawnDynamicObj(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  int **ppiVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  short sVar7;
  uint uVar8;
  Spyro *pSVar9;
  int *piVar10;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar3 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar3 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar3 + 0x56) = (char)uVar8;
  if (param_1 < 0x10e) {
    if (0x103 < param_1) goto LAB_dark_hollow__80083144;
    if (param_1 < 0x58) {
      if (0x52 < param_1) {
LAB_dark_hollow__80082c38:
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        *piVar10 = 0;
        piVar10[1] = 0;
        piVar10[2] = 0x8c;
        *(undefined *)((int)piVar10 + 0xe) = 0;
        *(undefined *)((int)piVar10 + 0xf) = 0;
        *(undefined *)((int)piVar10 + 0x11) = 0;
        *(undefined *)((int)piVar10 + 0x12) = 0;
        *(undefined *)((int)piVar10 + 0x13) = 0;
        uVar1 = 3;
        if (*(short *)(param_2 + 0x36) == 0xd) {
          uVar1 = 2;
        }
        *(undefined *)(piVar10 + 4) = uVar1;
        *(undefined *)(piVar10 + 5) = 0xff;
        *(undefined *)(ppiVar3 + 0x14) = 0x18;
        *(undefined *)((int)ppiVar3 + 0x52) = 0x40;
        *(undefined *)((int)ppiVar3 + 0x49) = 2;
        *(undefined *)(ppiVar3 + 0x11) = 0x20;
        *(undefined *)((int)ppiVar3 + 0x45) = 0;
        *(undefined *)((int)ppiVar3 + 0x46) = 0;
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        FUN_800529cc(ppiVar3);
        ppiVar3[7] = (int *)0xffffffff;
        Vec3Copy(aiStack_48,(int *)(ppiVar3 + 3));
        local_40 = local_40 + 0x400;
        MobyUpdatePosition(aiStack_48,0x10000);
        FUN_800533d0(ppiVar3);
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        if (*(short *)((int)ppiVar3 + 0x36) == 0xe) {
          *(undefined *)((int)ppiVar3 + 0x4f) = 0xc;
        }
        sVar7 = *(short *)((int)ppiVar3 + 0x36);
        if (sVar7 == 0x53) {
          *(undefined *)((int)ppiVar3 + 0x4f) = 1;
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
        }
        if (sVar7 == 0x54) {
          *(undefined *)((int)ppiVar3 + 0x4f) = 2;
        }
        sVar7 = *(short *)((int)ppiVar3 + 0x36);
        if (sVar7 == 0x55) {
          *(undefined *)((int)ppiVar3 + 0x4f) = 3;
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
        }
        if (sVar7 == 0x56) {
          *(undefined *)((int)ppiVar3 + 0x4f) = 4;
        }
        if (*(short *)((int)ppiVar3 + 0x36) != 0x57) {
          return ppiVar3;
        }
        *(undefined *)((int)ppiVar3 + 0x4f) = 5;
        return ppiVar3;
      }
      if (param_1 == 0x10) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        ppiVar3[5] = ppiVar3[5] + 0x80;
        Vec3Copy(piVar10 + 1,(int *)(ppiVar3 + 3));
        *(undefined *)((int)piVar10 + 0x13) = 0;
        *(undefined *)((int)piVar10 + 0x12) = 0;
        *(short *)(piVar10 + 5) = 0x708;
        return ppiVar3;
      }
      if (param_1 < 0x11) {
        if (param_1 == 0xe) goto LAB_dark_hollow__80082c38;
        if (param_1 == 0xf) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          piVar10[2] = 0x8c;
          *(undefined *)(piVar10 + 4) = 3;
          *(undefined *)(piVar10 + 5) = 0xff;
          *piVar10 = 0;
          piVar10[1] = 0;
          *(undefined *)((int)piVar10 + 0xe) = 0;
          *(undefined *)((int)piVar10 + 0xf) = 0;
          *(undefined *)((int)piVar10 + 0x11) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(undefined *)((int)piVar10 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x10;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800526a8(ppiVar3);
          bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 1;
          goto LAB_dark_hollow__80082f78;
        }
      }
      else {
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar3);
          return ppiVar3;
        }
        if (param_1 == 0x4c) goto LAB_dark_hollow__800831ec;
      }
    }
    else {
      if (param_1 == 0xfb) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        *(undefined *)(ppiVar3 + 0x14) = 0x20;
        *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
        FUN_800529cc(ppiVar3);
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *(undefined *)((int)ppiVar3 + 0x4f) = 0xe;
        if (dragonState == 3) {
          uVar1 = 0x14;
        }
        else {
          uVar1 = 0x30;
          if (dragonState != 1) goto LAB_dark_hollow__80082fe4;
        }
        *(undefined *)((int)ppiVar3 + 0x57) = uVar1;
LAB_dark_hollow__80082fe4:
        uVar8 = rand();
        iVar5 = (uVar8 & 7) * 4;
        local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar5);
        local_34 = 0;
        local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar5);
        Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
        uVar8 = rand();
        local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
        Vec3Add(ppiVar3 + 3,param_2 + 0xc,&local_38);
        Vec3Copy(piVar10,&local_38);
        Vec3ScaleDownByPowerOfTwo(piVar10,2);
        uVar8 = rand();
        *piVar10 = *piVar10 + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar10[1] = piVar10[1] + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar10[2] = piVar10[2] + -0x7f + (uVar8 & 0xff);
        iVar5 = rand();
        *(char *)(ppiVar3 + 0x11) = (char)iVar5;
        iVar5 = rand();
        *(char *)((int)ppiVar3 + 0x45) = (char)iVar5;
        iVar5 = rand();
        *(char *)((int)ppiVar3 + 0x46) = (char)iVar5;
        iVar5 = rand();
        *(byte *)(piVar10 + 4) = (byte)iVar5 & 0xf;
        iVar5 = rand();
        *(byte *)((int)piVar10 + 0x11) = (byte)iVar5 & 0xf;
        iVar5 = rand();
        *(byte *)((int)piVar10 + 0x12) = (byte)iVar5 & 0xf;
        piVar10[3] = *(int *)(param_2 + 0x14);
        iVar5 = rand();
        *(byte *)((int)piVar10 + 0x13) = ((byte)iVar5 & 3) + 0x10;
        return ppiVar3;
      }
      if (param_1 < 0xfc) {
        if (param_1 == 0x78) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          FUN_800526a8(ppiVar3);
          *(undefined *)((int)ppiVar3 + 0x49) = 0;
          *piVar10 = 0;
          *(undefined2 *)(piVar10 + 2) = 0;
          *(undefined2 *)((int)piVar10 + 6) = 0;
          *(undefined2 *)(piVar10 + 1) = 0;
          piVar10[3] = 0;
          piVar10[4] = 0;
          if (param_2 == 0) {
            return ppiVar3;
          }
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          return ppiVar3;
        }
      }
      else if ((param_1 < 0x102) && (0xfe < param_1)) goto LAB_dark_hollow__80082dd8;
    }
  }
  else {
    if (param_1 == 0x195) {
LAB_dark_hollow__80083178:
      InitArrayRelated(ppiVar3);
      if (param_2 == 0) {
        pSVar9 = &spyro;
      }
      else {
        pSVar9 = (Spyro *)(param_2 + 0xc);
      }
      Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
      ppiVar3[5] = ppiVar3[5] + 0x80;
      piVar10 = (int *)MobyUpdatePosition(ppiVar3 + 3,0x800);
      iVar5 = (int)piVar10 - (int)ppiVar3[5];
      if (iVar5 < 0) {
        iVar5 = -iVar5;
      }
      if (iVar5 < 0x800) {
        ppiVar3[5] = piVar10;
      }
      else {
        ppiVar3[5] = ppiVar3[5] + -0x80;
      }
      goto LAB_dark_hollow__80083240;
    }
    if (param_1 < 0x196) {
      if (param_1 < 0x138) {
        if (0x134 < param_1) {
LAB_dark_hollow__80082dd8:
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          FUN_800526a8(ppiVar3);
          uVar8 = rand();
          uVar4 = rand();
          uVar4 = uVar4 & 0x7ff;
          iVar5 = CosScaled(uVar4);
          iVar6 = CosScaled(uVar8 & 0xfff);
          *(short *)piVar10 = (short)((iVar5 >> 5) * iVar6 >> 0xc);
          iVar5 = CosScaled(uVar4);
          iVar6 = SinScaled(uVar8 & 0xfff);
          *(short *)((int)piVar10 + 2) = (short)((iVar5 >> 5) * iVar6 >> 0xc);
          iVar5 = SinScaled(uVar4);
          *(short *)(piVar10 + 1) = (short)(iVar5 >> 5);
          if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
            *(short *)piVar10 = *(short *)piVar10 + (short)(spyro.airMomentum.x >> 6);
            *(short *)((int)piVar10 + 2) =
                 *(short *)((int)piVar10 + 2) + (short)(spyro.airMomentum.y >> 6);
            *(short *)(piVar10 + 1) = *(short *)(piVar10 + 1) + (short)(spyro.airMomentum.z >> 6);
          }
          ppiVar3[3] = ppiVar3[3] + *(short *)piVar10;
          ppiVar3[4] = ppiVar3[4] + *(short *)((int)piVar10 + 2);
          ppiVar3[5] = ppiVar3[5] + *(short *)(piVar10 + 1);
          iVar5 = rand();
          *(ushort *)((int)piVar10 + 6) = (ushort)iVar5 & 0xf;
          iVar5 = rand();
          *(ushort *)(piVar10 + 2) = (ushort)iVar5 & 0xf;
          iVar5 = rand();
          *(ushort *)((int)piVar10 + 10) = (ushort)iVar5 & 0xf;
          piVar10[4] = *(int *)(param_2 + 0x14) + -0x40;
          uVar8 = rand();
          piVar10[3] = 0x40 - (uVar8 & 0xf);
          if (2 < *(ushort *)((int)ppiVar3 + 0x36) - 0x135) {
            return ppiVar3;
          }
          bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
          ppiVar3[0x13] = (int *)0xa18618;
LAB_dark_hollow__80082f78:
          *(byte *)((int)ppiVar3 + 0x4b) = bVar2 | 0x80;
          return ppiVar3;
        }
        if (param_1 == 0x115) goto LAB_dark_hollow__80083144;
      }
      else if (param_1 == 0x147) {
LAB_dark_hollow__80083144:
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800529cc(ppiVar3);
        *(undefined *)((int)ppiVar3 + 0x4f) = 2;
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *piVar10 = 0x40;
        return ppiVar3;
      }
    }
    else if (param_1 < 0x1c4) {
      if (0x1a9 < param_1) {
LAB_dark_hollow__800831ec:
        InitArrayRelated(ppiVar3);
        *(undefined *)(ppiVar3 + 0x14) = 0x20;
        *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
        FUN_800529cc(ppiVar3);
        return ppiVar3;
      }
      if (0x1a6 < param_1) goto LAB_dark_hollow__80082dd8;
    }
    else if (param_1 == 0x1dd) goto LAB_dark_hollow__80083178;
  }
  InitArrayRelated(ppiVar3);
  pSVar9 = (Spyro *)(param_2 + 0xc);
  if (param_2 == 0) {
    pSVar9 = &spyro;
  }
  Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
LAB_dark_hollow__80083240:
  FUN_800526a8(ppiVar3);
  return ppiVar3;
}



void Hollow_UpdateParticles(int param_1)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  short sVar10;
  short sVar11;
  char *pcVar12;
  int iVar13;
  char *pcVar14;
  short *result;
  char *pcVar15;
  int local_68;
  int local_64;
  int local_60;
  int local_58;
  int local_54;
  int local_50;
  undefined4 local_48;
  undefined4 local_44;
  int local_40;
  int local_3c;
  int local_38;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    cVar4 = (char)param_1;
    pcVar12 = ptr_headOfParticleBuffer + 1;
    pcVar15 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar14 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar14) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar4 * '\x02';
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_dark_hollow__80084430;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_dark_hollow__80084430;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_dark_hollow__80084430;
      case '\x06':
        Vec3Copy(&local_68,*(int **)(pcVar12 + 0x17));
        iVar7 = (uint)(byte)pcVar12[1] << 6;
        iVar13 = local_60 + *(short *)(pcVar12 + 0x1d) * 0x40;
        iVar8 = iVar7;
        if (*(short *)(pcVar12 + 0x1b) < iVar7) {
          iVar8 = (int)*(short *)(pcVar12 + 0x1b);
        }
        iVar6 = CosScaled(iVar7);
        local_68 = local_68 + (iVar8 * iVar6 >> 0xc);
        iVar7 = SinScaled(iVar7);
        local_64 = local_64 + (iVar8 * iVar7 >> 0xc);
        local_60 = *(short *)(pcVar12 + 7) * 4 + 0x40;
        if ((iVar13 < local_60) || (200 < (byte)pcVar12[1])) goto LAB_dark_hollow__80084448;
        Vec3ScaleDownBy4(result,&local_68);
        pcVar12[1] = pcVar12[1] + '\x01';
        break;
      case '\t':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[9] = pcVar12[9] + cVar4 * '\x02';
        goto LAB_dark_hollow__80084430;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_dark_hollow__80084448;
        Vec3Copy(&local_58,(int *)&spyro);
        iVar8 = CosScaled((int)*(short *)(pcVar12 + 0x17));
        local_58 = local_58 + (iVar8 >> 4);
        iVar8 = SinScaled((int)*(short *)(pcVar12 + 0x17));
        local_54 = local_54 + (iVar8 >> 4);
        local_50 = local_50 + 0x100;
        Vec3ScaleDownBy4(result,&local_58);
        sVar10 = *(short *)(pcVar12 + 0x17);
        *(short *)(pcVar12 + 0x17) = sVar10 + 0x40;
        iVar8 = CosScaled((int)(short)(sVar10 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar8 < 0) {
          iVar8 = -iVar8;
        }
        pcVar12[9] = (char)(iVar8 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar14 + 0x12);
        pcVar12[0xb] = pcVar12[0xb] + -8;
        pcVar12[0xc] = pcVar12[0xc] + -8;
        pcVar12[0xd] = pcVar12[0xd] + -8;
        if (pcVar12[0xb] == '\0') goto LAB_dark_hollow__80084448;
        goto LAB_dark_hollow__80084438;
      case '\f':
        pcVar12[10] = pcVar12[10] + '\b';
        pcVar12[9] = pcVar12[9] + '\x02';
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -8;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -8;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -8;
        }
        if ((*(uint *)(pcVar12 + 0xb) & 0xffffff) != 0) goto LAB_dark_hollow__80084438;
        goto LAB_dark_hollow__80084448;
      case '\x15':
        pcVar12[0x17] = pcVar12[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar9 = (uint)(byte)pcVar12[0x18] + gameSpeedMultiplyer;
        pcVar12[0x18] = (char)uVar9;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0x11) +
             (short)((int)((int)sineWaveArray[(byte)pcVar12[0x17] + 0x40] * (uVar9 & 0xff)) >> 0xc);
        iVar8 = (int)sineWaveArray[(byte)pcVar12[0x17]] * (uint)(byte)pcVar12[0x18];
        sVar10 = (short)gameSpeedMultiplyer;
        bVar1 = pcVar12[0x18];
        pcVar12[10] = pcVar12[10] + '\x04';
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10 * 6;
        sVar10 = *(short *)(pcVar12 + 0x13);
        goto LAB_dark_hollow__80083840;
      case '\x18':
        if ((byte)pcVar12[0xb] < 0xf0) {
          pcVar12[0xb] = pcVar12[0xb] + 4;
        }
        if ((byte)pcVar12[0xc] < 0xf0) {
          pcVar12[0xc] = pcVar12[0xc] + 4;
        }
        if ((byte)pcVar12[0xd] < 0xf0) {
          pcVar12[0xd] = pcVar12[0xd] + 4;
        }
        pcVar12[0x1b] = pcVar12[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar8 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar8 = dragonTimerCurrentState;
        }
        *(short *)(pcVar12 + 0x17) = (short)((int)((uint)(byte)pcVar12[0x1c] * (0x48 - iVar8)) >> 3)
        ;
        iVar8 = ((int)((0x20 - (uint)(byte)pcVar12[0x1c]) * iVar8) >> 4) + 8;
        *(short *)(pcVar12 + 0x19) = (short)iVar8;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar12[0x1b] + 0x40] * (iVar8 * 0x10000 >> 0x10) >>
                    0xc);
        sVar10 = sineWaveArray[(byte)pcVar12[0x1b]];
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0x15) + *(short *)(pcVar12 + 0x17) + 0x20;
        *(short *)(pcVar12 + 5) =
             *(short *)(pcVar12 + 0x13) +
             (short)((int)sVar10 * (int)*(short *)(pcVar12 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar8 = (uint)(byte)pcVar12[0xb] - param_1;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar4 * '\x02';
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xb] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xc] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xc] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xd] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        bVar1 = pcVar12[1];
        pcVar12[0xd] = (char)iVar8;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_dark_hollow__80084430;
      case 'B':
        iVar8 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar12[1] & 1U) != 0) {
              *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
              *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
              *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
              if ((pcVar12[1] & 2U) != 0) {
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x13) = *(short *)(pcVar12 + 0x13) + -1 + ((ushort)iVar7 & 2);
              }
            }
            iVar8 = iVar8 + 1;
            pcVar12[1] = pcVar12[1] + '\x01';
          } while (iVar8 < param_1);
        }
        bVar3 = (byte)pcVar12[1] < 0x18;
        goto LAB_dark_hollow__80084430;
      case 'F':
        local_48._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_48._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_48._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        iVar8 = rand();
        local_48._0_2_ = (short)local_48 + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        sVar10 = local_48._2_2_ + -1 + ((ushort)iVar8 & 2);
        local_48 = CONCAT22(sVar10,(short)local_48);
        if ((pcVar12[1] & 1U) != 0) {
          local_44 = CONCAT22(local_44._2_2_,(short)local_44 + -1);
        }
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_48;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_44;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_dark_hollow__80084448;
        cVar2 = pcVar12[0xf];
        pcVar12[0xf] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0x80) {
          pcVar12[0xf] = -0x80;
        }
        cVar2 = pcVar12[0x10];
        pcVar12[0x10] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x60) {
          pcVar12[0x10] = '`';
        }
        cVar2 = pcVar12[0x13];
        pcVar12[0x11] = '\0';
        pcVar12[0x13] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0xc0) {
          pcVar12[0x13] = -0x40;
        }
        cVar2 = pcVar12[0x14];
        pcVar12[0x14] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x80) {
          pcVar12[0x14] = -0x80;
        }
        cVar2 = pcVar12[0x15];
        pcVar12[0x15] = cVar2 - 6U;
        if ((byte)(cVar2 - 6U) < 0x20) {
          pcVar12[0x15] = ' ';
        }
        break;
      case 'G':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_dark_hollow__80084448;
        local_40 = (int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3);
        local_3c = (int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5);
        local_38 = (int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_3c = local_3c + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_38 = local_38 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_40;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + (short)local_3c;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_38;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 9) - (short)local_40;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 0xb) - (short)local_3c;
        pcVar12[0x13] = pcVar12[0x13] + -2;
        pcVar12[0x15] = pcVar12[0x15] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -2;
        pcVar12[0x10] = pcVar12[0x10] + -3;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0xd) - (short)local_38;
        pcVar12[0x11] = pcVar12[0x11] + -3;
        break;
      case 'H':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x2f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_dark_hollow__80084448;
        local_48 = (int)*(short *)(pcVar12 + 3) - (int)*(short *)(pcVar12 + 9) >> 1;
        local_44 = (int)*(short *)(pcVar12 + 5) - (int)*(short *)(pcVar12 + 0xb) >> 1;
        local_40 = (int)*(short *)(pcVar12 + 7) - (int)*(short *)(pcVar12 + 0xd) >> 1;
        uVar9 = rand();
        local_48 = local_48 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_44 = local_44 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + (short)local_44;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)local_40;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 3) + (short)local_48 * -2;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 5) + (short)local_44 * -2;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 7) + (short)local_40 * -2;
        break;
      case 'L':
        pcVar12[0x17] = pcVar12[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar9 = (uint)(byte)pcVar12[0x18] + gameSpeedMultiplyer;
        pcVar12[0x18] = (char)uVar9;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0xf) +
             (short)((int)((int)sineWaveArray[(byte)pcVar12[0x17] + 0x40] * (uVar9 & 0xff)) >> 0xc);
        iVar8 = (int)sineWaveArray[(byte)pcVar12[0x17]] * (uint)(byte)pcVar12[0x18];
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)gameSpeedMultiplyer * 6;
        bVar1 = pcVar12[0x18];
        sVar10 = *(short *)(pcVar12 + 0x11);
LAB_dark_hollow__80083840:
        *(short *)(pcVar12 + 5) = sVar10 + (short)(iVar8 >> 0xc);
        if (bVar1 < 0xc1) break;
        goto LAB_dark_hollow__80084448;
      case 'M':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        sVar5 = sVar5 + 1;
        local_48 = CONCAT22(sVar5,sVar11);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
        if (0x1f < (byte)(cVar2 + 1U)) goto LAB_dark_hollow__80084448;
        break;
      case 'N':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x27 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_dark_hollow__80084448;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar8 & 2);
        uVar9 = rand();
        iVar8 = (*(ushort *)(pcVar12 + 0x13) - 1) + (uVar9 & 2);
        *(short *)(pcVar12 + 0x13) = (short)iVar8;
        if (2 < iVar8 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar12 + 0x13) = 2;
        }
        if (*(short *)(pcVar12 + 0x13) < -4) {
          *(undefined2 *)(pcVar12 + 0x13) = 0xfffc;
        }
        pcVar12[0xb] = pcVar12[0xb] + -2;
        pcVar12[0xd] = pcVar12[0xd] + -1;
        pcVar12[0xc] = pcVar12[0xc] + -2;
        break;
      case 'O':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        local_48 = CONCAT22(sVar10,sVar11);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar5);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar10;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar5;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_dark_hollow__80084448;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        pcVar12[0x13] = pcVar12[0x13] + -3;
        pcVar12[0x10] = pcVar12[0x10] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -4;
        if (5 < (byte)pcVar12[0x15]) {
          pcVar12[0x15] = pcVar12[0x15] - 6;
        }
        break;
      case 'P':
        sVar11 = *(short *)(pcVar12 + 9) - *(short *)(pcVar12 + 3);
        sVar5 = *(short *)(pcVar12 + 0xb) - *(short *)(pcVar12 + 5);
        local_48 = CONCAT22(sVar5,sVar11);
        sVar10 = *(short *)(pcVar12 + 7);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (*(short *)(pcVar12 + 0xd) - sVar10);
        sVar10 = (*(short *)(pcVar12 + 0xd) - sVar10) + -1;
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        bVar3 = (byte)(cVar2 + 1U) < 0x20;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
LAB_dark_hollow__80084430:
        if (bVar3) {
LAB_dark_hollow__80084438:
          if (pcVar12[2] != '\0') break;
        }
LAB_dark_hollow__80084448:
        FUN_80053608(pcVar14);
      }
      pcVar12 = pcVar12 + 0x20;
      pcVar15 = pcVar15 + 0x20;
      result = result + 0x10;
      pcVar14 = pcVar14 + 0x20;
    } while (*pcVar12 != -1);
  }
  return;
}



void Hollow_CreateParticle(int param_1,undefined4 param_2,int **param_3,int *param_4)

{
  bool bVar1;
  char cVar2;
  short extraout_var;
  undefined *puVar3;
  uint uVar4;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  undefined uVar8;
  short sVar9;
  int *piVar10;
  int iVar11;
  int local_a8;
  int local_a4;
  undefined4 local_a0;
  int aiStack_98 [4];
  int local_88;
  int local_84;
  int local_80;
  int local_78;
  int local_74;
  int local_70;
  int local_68;
  int local_64;
  int local_60;
  int local_58;
  int local_50;
  uint local_48;
  int local_40;
  int local_30;
  
  iVar11 = 0;
  if (0 < param_1) {
    local_50 = (int)param_4 >> 0x18;
    local_48 = (uint)param_4 & 0xf;
    local_40 = local_48 << 1;
    local_30 = 0;
    local_58 = param_1;
    do {
      uVar8 = (undefined)param_2;
      cVar2 = (char)param_4;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_dark_hollow__80084ce4;
      case 1:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        if (bVar1) {
          uVar8 = 8;
        }
        else {
          uVar8 = 0x10;
        }
        puVar5[10] = uVar8;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x60;
        goto LAB_dark_hollow__80084cd0;
      case 2:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_a8 = (uVar7 & 0x3f) - 0x20;
        uVar7 = rand();
        local_a4 = (uVar7 & 0x3f) - 0x20;
        local_a0 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),&local_a8);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x20;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_dark_hollow__80084ce4;
      case 6:
        piVar10 = *param_3;
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)(param_3 + 3));
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(int ***)(puVar5 + 0x18) = param_3 + 3;
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x100 + ((ushort)iVar6 & 0x1ff);
        *(short *)(puVar5 + 0x1c) = (short)piVar10[1];
        iVar6 = *piVar10;
        puVar5[10] = 0x20;
        puVar5[0xb] = 0x14;
        *(short *)(puVar5 + 0x1e) = (short)(iVar6 >> 6);
        if (*(char *)((int)param_3 + 0x49) == '\0') {
          if (levelIDPortalExit != 0x32) {
            puVar5[0xc] = 0x80;
            goto LAB_dark_hollow__800847f4;
          }
switchD_dark_hollow__80084768_caseD_1:
          puVar5[0xc] = 0x80;
LAB_dark_hollow__800847e4:
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          goto switchD_dark_hollow__80084768_caseD_8;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          goto switchD_dark_hollow__80084768_caseD_8;
        case 1:
          goto switchD_dark_hollow__80084768_caseD_1;
        case 2:
          puVar5[0xc] = 0;
          goto LAB_dark_hollow__800847e4;
        case 3:
          puVar5[0xc] = 0;
LAB_dark_hollow__800847f4:
          puVar5[0xd] = 0x80;
          break;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          break;
        case 5:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          break;
        case 6:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0x40;
          puVar5[0xe] = 0;
          goto switchD_dark_hollow__80084768_caseD_8;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x40;
          break;
        default:
          goto switchD_dark_hollow__80084768_caseD_8;
        }
        puVar5[0xe] = 0x80;
switchD_dark_hollow__80084768_caseD_8:
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 0;
        puVar5[0x10] = 0;
        break;
      case 9:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar8 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar5[0xc] = 0x80;
              puVar5[0xd] = 0x80;
              puVar5[0xe] = 0x80;
              goto LAB_dark_hollow__80084ce4;
            }
            puVar5[0xc] = 0xe0;
          }
          else {
            puVar5[0xc] = 0xf0;
            uVar8 = 0x60;
          }
          puVar5[0xd] = uVar8;
          puVar5[0xe] = 0;
        }
        else {
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
        }
        goto LAB_dark_hollow__80084ce4;
      case 10:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)&spyro);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_8006e438)[local_30];
        puVar5[0xd] = (&DAT_8006e439)[local_30];
        uVar8 = (&DAT_8006e43a)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar8;
        *(short *)(puVar5 + 0x18) = (short)(((local_58 - iVar11) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        puVar5[3] = 1;
        *puVar5 = uVar8;
        puVar5[0x11] = 4;
        sVar9 = *(short *)((int)param_3 + 0x36);
        if (sVar9 == 0x22) {
          Vec3Copy(aiStack_98,(int *)(param_3 + 3));
        }
        else if ((sVar9 == 0xad) || (sVar9 == 0xb5)) {
          if (local_50 < 6) {
            puVar3 = (undefined *)0x8006e4e0;
            iVar6 = local_50;
            goto LAB_dark_hollow__80084a68;
          }
          puVar5[1] = 5;
          puVar5[0x11] = 0x16;
          Vec3Copy(aiStack_98,(int *)(local_50 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar9 == 0x78) {
            puVar3 = &DAT_8006e570;
          }
          else {
            puVar3 = &DAT_8006e498;
            iVar6 = iVar11;
LAB_dark_hollow__80084a68:
            puVar3 = puVar3 + iVar6 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar3,aiStack_98);
          Vec3Add(aiStack_98,aiStack_98,param_3 + 3);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),aiStack_98);
        puVar5[0xd] = (char)((uint)param_4 >> 8);
        puVar5[0xc] = cVar2;
        puVar5[0xe] = (char)((uint)param_4 >> 0x10);
        puVar5[0xf] = 0x2e;
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 7) + 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0x10] = 0;
        break;
      case 0x15:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),(int *)param_3);
        cVar2 = cVar2 * '\x02';
        if (0xf < ((uint)param_4 & 0x1f)) {
          cVar2 = cVar2 + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        puVar5[0xe] = (char)local_48 * -8 + -0x80;
        puVar5[0x10] = 0;
        puVar5[10] = '0' - (char)local_40;
        puVar5[0xb] = (char)((int)param_4 << 1);
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 2;
        break;
      case 0x18:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),(int *)param_3);
        puVar5[10] = 0x30;
        puVar5[0x11] = 8;
        *(short *)(puVar5 + 0x18) = (short)(iVar11 << 5);
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        uVar8 = (undefined)(iVar11 << 4);
        puVar5[0xb] = uVar8;
        puVar5[0xf] = 0x2e;
        puVar5[0x10] = 0;
        *(undefined2 *)(puVar5 + 0x1a) = 0x10;
        puVar5[0x1c] = uVar8;
        puVar5[0x1d] = (char)iVar11;
        break;
      case 0x21:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_88,(int *)&spyro);
          local_80 = spyro.unkown_heightRelated;
          uVar7 = rand();
          local_88 = local_88 + -0x1f + (uVar7 & 0x3e);
          uVar7 = rand();
          local_84 = local_84 + -0x1f + (uVar7 & 0x3e);
        }
        else {
          local_88 = 0x164;
          local_84 = 0;
          local_80 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_88,&local_88);
          Vec3Add(&local_88,&local_88,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_88);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),(int *)param_3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x20;
LAB_dark_hollow__80084cd0:
        puVar5[0xc] = uVar8;
        puVar5[0xd] = uVar8;
        puVar5[0xe] = uVar8;
LAB_dark_hollow__80084ce4:
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x42:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        piVar10 = param_3[2];
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)((int)piVar10 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_dark_hollow__80084dfc;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_dark_hollow__80084dfc;
        case 2:
          puVar5[0xc] = 0;
LAB_dark_hollow__80084dfc:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_dark_hollow__80084e44;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_dark_hollow__80084e44;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_dark_hollow__80084e44;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_dark_hollow__80084e44:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        uVar7 = rand();
        local_78 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_74 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_70 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_78 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_74 * 4;
        sVar9 = (short)local_70;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_78 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_74 * 2;
        goto LAB_dark_hollow__80085500;
      case 0x47:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        uVar7 = rand();
        local_78 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_74 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_70 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_78 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_74 * 4;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + (short)local_70 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_78;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_74;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_70;
        break;
      case 0x4c:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x10),(int *)param_3);
        if (((uint)param_4 & 0x1f) < 0x10) {
          cVar2 = (char)((int)param_4 << 1);
        }
        else {
          cVar2 = cVar2 * '\x02' + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        cVar2 = (char)local_48 * -8 + -0x80;
        goto LAB_dark_hollow__80085294;
      case 0x4d:
        puVar5 = (undefined *)AllocateParticleToBuffer(4);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        CosScaled(uVar7 & 0xfff);
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + extraout_var;
        uVar4 = rand();
        SinScaled(uVar4 & 0x7ff);
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + extraout_var_00;
        SinScaled(uVar7 & 0xfff);
        puVar5[0x17] = 0x7f;
        puVar5[0x11] = 0x40;
        puVar5[0x12] = 0x60;
        puVar5[0x16] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x10] = 0x80;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0x80;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar6 & 1);
        iVar6 = rand();
        puVar5[0xc] = (byte)iVar6 | 0x80;
        uVar7 = rand();
        uVar7 = (uVar7 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar7;
        if ((byte)puVar5[0xc] < uVar7) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar6 = rand();
        cVar2 = ((byte)iVar6 & 0x3f) + 0x40;
LAB_dark_hollow__80085294:
        puVar5[0xe] = cVar2;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3Add(&local_78,param_3,param_4);
        uVar7 = rand();
        local_78 = local_78 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_74 = local_74 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_70 = local_70 + -0x40 + (uVar7 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_78);
        puVar5[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0xa0;
          puVar5[0x12] = 0;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = (byte)iVar6 | 0xe0;
          puVar5[0x16] = 0x80;
        }
        else {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x12] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = ((byte)iVar6 & 0x1f) + 0xa0;
          iVar6 = rand();
          puVar5[0x16] = ((byte)iVar6 & 0x1f) + 0xa0;
        }
        puVar5[0x13] = 0x50;
        break;
      case 0x50:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_68 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_64 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_60 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + (short)local_68 * 4;
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + (short)local_64 * 4;
        sVar9 = (short)local_60;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_68 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_64 * 2;
LAB_dark_hollow__80085500:
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + sVar9 * 2;
      }
      local_30 = local_30 + 4;
      iVar11 = iVar11 + 1;
    } while (iVar11 < local_58);
  }
  return;
}



void FUN_dream__8007b898(int **param_1)

{
  int aiStack_20 [4];
  
  gameState = GAMESTATE_BALLOONIST;
  balloonistState = 0;
  DAT_800777ec = 0;
  balloonistCursorPlacement = 0;
                    // WARNING: Read-only address (ram,0x8007784c) is written
  isInDragonState = 1;
  DAT_8007579c = 1;
  DAT_80077850 = ptr_startOfCurrentLevelMobys + **param_1 * 0x58;
  DAT_8007784c = param_1;
  DAT_80077820 = ATan2Scaled(cameraPosition.x - (int)param_1[3],cameraPosition.y - (int)param_1[4],1
                            );
  Vec3Subtract(aiStack_20,&cameraPosition.x,(int *)(param_1 + 3));
  DAT_80077824 = Vec3CalculateLengthE(aiStack_20,flag2D);
  DAT_80077828 = cameraPosition.z;
  DAT_8007783c = 0x52e;
  DAT_80077838 = (uint)*(byte *)((int)param_1 + 0x46) * 0x10 - 0x312 & 0xfff;
  DAT_80077840 = (int)param_1[5] + 0x58f;
  return;
}



void FUN_dream__8007b9d4(void)

{
  ExitFairyOrBalloonist();
  spyro.headAngle.pitch = 0;
  spyro.headAngle.pad2 = 0;
  spyro.unkown1._1_1_ = 0;
  if (ptr_SparxMoby != 0) {
    *(undefined *)(ptr_SparxMoby + 0x50) = 0x10;
  }
  return;
}



void FUN_dream__8007ba18(void)

{
  undefined4 uVar1;
  LevelIDS LVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int *outputArray;
  uint local_78;
  uint local_74;
  int local_70;
  short local_68;
  short local_66;
  short local_64;
  uint local_60;
  uint local_5c;
  int local_58;
  uint local_50;
  uint local_4c;
  int local_48;
  uint local_40;
  uint local_3c;
  int local_38;
  uint local_30;
  uint local_2c;
  int local_28;
  
  if (balloonistState < 4) {
    DAT_800700f8 = 0;
    DAT_800700f4 = DAT_8007784c;
    FUN_800522c0(&DAT_800700f4,0);
  }
  switch(balloonistState) {
  case 0:
    if (0x5f < DAT_800777ec) {
      iVar6 = CosScaled(DAT_80077838);
      cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar6 * DAT_8007783c >> 0xc);
      iVar6 = SinScaled(DAT_80077838);
      cameraPosition.z = DAT_80077840;
      cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar6 * DAT_8007783c >> 0xc);
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      balloonistState = 1;
      DAT_800777ec = 0;
      spyro.RelativeSparxAngle.roll = (char)((int)DAT_8007781c >> 4);
      spyro.nextAnim = '\0';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    iVar6 = SinScaled((DAT_800777ec << 0xb) / 0x60 + -0x400);
    iVar6 = iVar6 + 0x1000;
    if (DAT_800777ec == gameSpeedMultiplyer) {
      if (ptr_SparxMoby != (int *)0x0) {
        *(undefined *)(ptr_SparxMoby + 0x14) = 0;
        *(undefined *)((int)ptr_SparxMoby + 0x51) = 0;
        if (*(int *)(*ptr_SparxMoby + 0xc) != 0) {
          SetToZero();
          *(undefined4 *)(*ptr_SparxMoby + 0xc) = 0;
        }
      }
      backupSuperFlameTimer = superFlameTimer;
      Unk_UpdateSpyroAfterEvents(1);
      spyro.currentAnim = '\x01';
      spyro.nextAnim = '\x01';
      spyro.nextKeyframe = '\x01';
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = 0x4a0;
      DAT_80077810 = 0;
      DAT_80077814 = 0x164;
      Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&DAT_8007780c,&DAT_8007780c);
      Vec3Add(&DAT_8007780c,&DAT_8007780c,DAT_8007784c + 0xc);
      DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      DAT_8007781c = ATan2Scaled(local_78,local_74,1);
    }
    if (DAT_800777ec < 0x18) {
      iVar3 = SinScaled((DAT_800777ec << 0xb) / 0x18 + -0x400);
      iVar3 = iVar3 + 0x1000;
      if ((DAT_8007781c - DAT_80077818 & 0xfff) < 0x801) {
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
      }
      else {
LAB_dream__8007be8c:
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 - (iVar4 * iVar3 >> 0xd);
      }
LAB_dream__8007beac:
      spyro.RelativeSparxAngle.roll = (char)(iVar3 >> 4);
      uVar1._0_1_ = '\b';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
LAB_dream__8007bebc:
      spyro._88_4_ = uVar1;
    }
    else {
      if (0x47 < DAT_800777ec) {
        iVar3 = SinScaled(((DAT_800777ec + -0x48) * 0x800) / 0x18 + -0x400);
        iVar3 = iVar3 + 0x1000;
        if (DAT_800777ec - gameSpeedMultiplyer < 0x48) {
          DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
          spyro.nextAnim = '\x03';
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\b';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          DAT_8007781c = (uint)*(byte *)(DAT_8007784c + 0x46) * 0x10 - 0x800 & 0xfff;
        }
        if (0x800 < (DAT_8007781c - DAT_80077818 & 0xfff)) goto LAB_dream__8007be8c;
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
        goto LAB_dream__8007beac;
      }
      iVar3 = SinScaled(((DAT_800777ec + -0x18) * 0x800) / 0x30 + -0x400);
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      Vec3Scale(&local_78,&local_78,iVar3 + 0x1000);
      Vec3ScaleDownByPowerOfTwo((int *)&local_78,0xd);
      Vec3Add(&spyro,&DAT_80077800,&local_78);
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      spyro._88_4_ = (int)uVar5 >> 1;
      if ((int)spyro._88_4_ < 4) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      uVar1._0_1_ = '\x10';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
      if (0x10 < (int)spyro._88_4_) goto LAB_dream__8007bebc;
    }
    spyro.RelativeSparxAngle.yaw = '\0';
    spyro.RelativeSparxAngle.pitch = '\0';
    spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
    UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
    FUN_80049fac(1);
    FlameButAlsoNotFlame(gameSpeedMultiplyer);
    if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
    }
    else {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
    }
    iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
    iVar4 = CosScaled(iVar3);
    cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar4 * iVar7 >> 0xc);
    iVar3 = SinScaled(iVar3);
    local_78 = 0x220;
    local_70 = 0x340;
    local_74 = 0;
    cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar3 * iVar7 >> 0xc);
    cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
    Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&local_78,&local_78);
    Vec3Add(&local_78,&local_78,DAT_8007784c + 0xc);
    Vec3Subtract((int *)&local_78,(int *)&local_78,&cameraPosition.x);
    if (DAT_800777ec < 0x20) {
      local_68 = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      local_66 = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      local_64 = (short)iVar6;
      iVar6 = FUN_8001796c((int)local_68,(int)cameraAngle.roll);
      cameraAngle.roll = cameraAngle.roll + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_66,(int)cameraAngle.pitch);
      cameraAngle.pitch = cameraAngle.pitch + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_64,(int)cameraAngle.yaw);
      cameraAngle.yaw = cameraAngle.yaw + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
    }
    else {
      cameraAngle.roll = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      cameraAngle.yaw = (short)iVar6;
    }
    (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
    Maybe_SoundEffectProcessing();
    break;
  case 1:
    if (balloonistDialogue < 0x1e) {
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x51) {
        return;
      }
      iVar6 = balloonistDialogue % 6;
      if (iVar6 == 0) {
        iVar3 = balloonistDialogue + 1;
      }
      else if (iVar6 < 3) {
        if ((balloonistDialogue < 3) && (requirementArtisans < 2)) {
          (*ptr_OverlayBalloonistStayHere)();
          iVar3 = balloonistDialogue;
        }
        else if (balloonistDialogue == 0xe) {
          do {
            iVar6 = rand();
            iVar6 = iVar6 % 5;
            if ((iVar6 == 0) && (DAT_80076fec == 0)) {
              iVar3 = 0x21;
LAB_dream__8007c4b4:
              balloonistDialogue = iVar3;
            }
            else {
              if ((iVar6 == 1) && (DAT_80077004 == 0)) {
                iVar3 = 0x22;
                goto LAB_dream__8007c4b4;
              }
              if ((iVar6 == 2) && (DAT_80077008 == 0)) {
                iVar3 = 0x23;
                goto LAB_dream__8007c4b4;
              }
              if (((iVar6 == 3) && (iVar3 = 0x24, DAT_80077018 < 2)) ||
                 ((iVar6 == 4 && (iVar3 = 0x25, DAT_80077024 == 0)))) goto LAB_dream__8007c4b4;
            }
            iVar3 = balloonistDialogue;
          } while (balloonistDialogue == 0xe);
        }
        else {
          balloonistDialogue = 0x1e;
          iVar3 = balloonistDialogue;
        }
      }
      else if (iVar6 == 3) {
        iVar3 = balloonistDialogue + 2;
      }
      else {
        iVar3 = 0x1f;
        if (iVar6 == 4) {
          iVar3 = balloonistDialogue + 1;
        }
      }
      balloonistDialogue = iVar3;
      DAT_800777ec = 0;
      return;
    }
    if (balloonistDialogue == 0x1e) {
      iVar6 = 1;
      do {
        if ((&unlockedHWs)[iVar6] != '\x02') break;
        iVar6 = iVar6 + 1;
      } while (iVar6 < 6);
      if ((currentButtonOneFrame & UP_BUTTON) == 0) {
        if ((currentButtonOneFrame & DOWN_BUTTON) != 0) {
          balloonistCursorPlacement = balloonistCursorPlacement + 1;
          if (iVar6 <= balloonistCursorPlacement) {
            balloonistCursorPlacement = 0;
          }
          goto LAB_dream__8007c5c0;
        }
      }
      else {
        balloonistCursorPlacement = balloonistCursorPlacement + -1;
        if (balloonistCursorPlacement < 0) {
          balloonistCursorPlacement = iVar6 + -1;
        }
LAB_dream__8007c5c0:
        DAT_800777ec = 0x20;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        levelID = balloonistCursorPlacement * 10;
        if (levelIDPortalExit <= (int)levelID) {
          levelID = levelID + ARTISANS_ID;
        }
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)levelID / 10 + -1;
        return;
      }
    }
    else {
      if (1 < balloonistDialogue - 0x1fU) {
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
          return;
        }
        if (DAT_800777ec < 0x51) {
          return;
        }
        if ((balloonistDialogue == 0x24) || (balloonistDialogue == 0x26)) {
          balloonistCursorPlacement = 0;
          balloonistDialogue = 0x1e;
          balloonistRandomGreeting = 1;
          return;
        }
        if (balloonistDialogue == 0x25) {
          DAT_800777ec = 0;
          balloonistDialogue = 0x26;
          return;
        }
        if (balloonistDialogue == 0x21) {
          LVar2 = STONE_HILL_ID;
        }
        else if (balloonistDialogue == 0x22) {
          LVar2 = DRY_CANYON_ID;
        }
        else {
          LVar2 = CLIFF_TOWN_ID;
          if (balloonistDialogue != 0x23) goto LAB_dream__8007c89c;
        }
        levelID = LVar2;
LAB_dream__8007c89c:
        balloonistDropoffLocation = balloonistDialogue + -0x1b;
        DAT_800777ec = 0;
        balloonistDialogue = 0x20;
        return;
      }
      if ((currentButtonOneFrame & (UP_BUTTON|DOWN_BUTTON)) != 0) {
        DAT_800777ec = 0x20;
        balloonistCursorPlacement = 1 - balloonistCursorPlacement;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        if (balloonistDialogue != 0x1f) {
          balloonistState = 2;
          DAT_800777ec = 0;
          return;
        }
        levelID = levelIDPortalExit + ARTISANS_ID;
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)(levelIDPortalExit + ARTISANS_ID) / 10 + -1;
        return;
      }
      if (balloonistDialogue != 0x1f) {
        balloonistCursorPlacement = 0;
        balloonistDialogue = 0x1e;
        balloonistRandomGreeting = 1;
        return;
      }
    }
    (*ptr_OverlayBalloonistStayHere)();
    break;
  case 2:
    if (DAT_800777ec < 0x66) {
      iVar6 = SinScaled((DAT_800777ec * 0x800) / 0x66 + -0x400);
      iVar6 = iVar6 + 0x1000;
      if (DAT_800777ec == gameSpeedMultiplyer) {
        *(undefined *)((int)DAT_80077850 + 0x4a) = 0xff;
        DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                   cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
        Vec3Subtract((int *)&local_60,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
        DAT_80077824 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        DAT_8007782c = (int)cameraAngle.roll;
        DAT_80077830 = (int)cameraAngle.pitch;
        DAT_80077834 = (int)cameraAngle.yaw;
        DAT_80077828 = cameraPosition.z;
        DAT_8007783c = 0xe00;
        DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 - 0x480 & 0xfff;
        DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
        DAT_80077848 = *(int *)(DAT_8007784c + 0x14) + 0x488;
        Vec3Copy(&DAT_80077800,(int *)&spyro);
        Vec3Copy(&DAT_8007780c,(int *)(DAT_8007784c + 0xc));
        spyro.currentKeyfame = spyro.nextKeyframe;
        spyro.nextAnim = '\x05';
        spyro.nextKeyframe = '\0';
        spyro.maybe_AnimSpeedRelated = '\0';
        spyro.animSpeed = '\a';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (DAT_800777ec < 0x30) {
        spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec) / 0x30;
        spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec) / 0x30;
        iVar3 = SinScaled(DAT_800777ec << 5);
        spyro.position.z = DAT_80077808 + (iVar3 * 10) / 0x24;
        spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
        UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
        FUN_80049fac(1);
      }
      else {
        if (DAT_800777ec - gameSpeedMultiplyer < 0x30) {
          DAT_80077808 = DAT_80077808 + 0x325;
          DAT_80077800 = DAT_8007780c;
          DAT_80077804 = DAT_80077810;
          Vec3Copy(&DAT_8007780c,(int *)((int)DAT_80077850 + 0xc));
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\x04';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
        }
        iVar3 = DAT_800777ec + -0x36;
        if (0x35 < DAT_800777ec - gameSpeedMultiplyer) {
          spyro.animSpeed = '\a';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * iVar3) / 0x30;
          spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * iVar3) / 0x30;
          iVar3 = SinScaled(iVar3 * 0x20);
          spyro.position.z = DAT_80077808 + (iVar3 >> 2);
        }
      }
      if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_60,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      uVar5 = Vec3CalculateLengthE((int *)&local_60,flag2D);
      iVar3 = ATan2Scaled(uVar5,-local_58,1);
      local_66 = (short)iVar3;
      iVar3 = ATan2Scaled(local_60,local_5c,1);
      local_64 = (short)iVar3;
      iVar3 = FUN_8001796c((int)local_66,DAT_80077830);
      cameraAngle.pitch = (short)DAT_80077830 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      iVar3 = FUN_8001796c((int)local_64,DAT_80077834);
      cameraAngle.yaw = (short)DAT_80077834 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      *(int *)((int)DAT_80077850 + 0x14) =
           DAT_80077844 + ((DAT_80077848 - DAT_80077844) * iVar6 >> 0xd);
    }
    else {
      balloonistState = 3;
      DAT_800777ec = 0;
    }
    break;
  case 3:
    if (0x7f < DAT_800777ec) {
      DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                 cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
      Vec3Subtract((int *)&local_50,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
      DAT_80077824 = Vec3CalculateLengthE((int *)&local_50,flag2D);
      DAT_80077828 = cameraPosition.z;
      DAT_8007783c = 0x800;
      levelLoadState = 0;
      portalNumber = 0xffffffff;
      canFlyIn = 0;
      portalToExitFromInHW = 0;
      DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 + 0x390 & 0xfff;
      balloonistState = 4;
      DAT_800777ec = 0;
      DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
      LevelTransitionRelated(1);
      ArrayCopy((int *)&DAT_80071e9c,DAT_80077850,0x58);
      DAT_80077850 = &DAT_80071e9c;
      if (DAT_800785e8 < 0x80200000) {
        outputArray = (int *)(DAT_80078a44 + -0x400c);
      }
      else {
        outputArray = (int *)&DAT_801fe000;
      }
      ArrayCopy(outputArray,DAT_800769f8,0x4000);
      iVar3 = (int)DAT_800769f8;
      iVar6 = outputArray[0xe] - (int)DAT_800769f8;
      DAT_800769f8 = outputArray;
      outputArray[0xe] = (int)outputArray + iVar6;
      *(int *)(DAT_800769f8[0xe] + 0x14) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x14) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x18) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x18) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x24) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x24) - iVar3);
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      spyro.position.x = DAT_8007780c;
      DAT_80077828 = cameraPosition.z;
      spyro.position.y = DAT_80077810;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      spyro.nextAnim = '\0';
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.unkown3 = '\x03';
      spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    }
    if (DAT_800777ec < 0x40) {
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0xc00);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    else {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * 0x4b;
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0x800);
      cameraPosition.z = DAT_80077828 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    Vec3Subtract((int *)&local_50,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_50,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_48,1);
    cameraAngle.pitch = (short)iVar6;
    local_30 = local_50;
    local_2c = local_4c;
    goto LAB_dream__8007d678;
  case 5:
    if (levelLoadState < 0xd) {
      LevelTransitionRelated(1);
    }
    if (DAT_800777ec < 0x100) {
      iVar6 = SinScaled(((DAT_800777ec << 0xb) >> 8) + -0x400);
      iVar6 = iVar6 + 0x1000;
      if ((DAT_80077820 - DAT_80077838 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_8007783c + ((int)((DAT_80077824 - DAT_8007783c) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077840 + ((DAT_80077828 - DAT_80077840) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_40,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      local_38 = (local_38 + 0x200) - (iVar6 >> 4);
      uVar5 = Vec3CalculateLengthE((int *)&local_40,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_38,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_40,local_3c,1);
      cameraAngle.yaw = (short)iVar6;
    }
    else if (levelLoadState == 0xd) {
      balloonistState = 6;
      DAT_800777ec = 0;
      LevelTransitionRelated(1);
    }
    break;
  case 6:
    if (0x7f < DAT_800777ec) {
      balloonistState = 7;
      DAT_800777ec = 0;
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = *(int *)(&DAT_8006eadc + balloonistDropoffLocation * 8);
      DAT_80077810 = *(int *)(&DAT_8006eae0 + balloonistDropoffLocation * 8);
      DAT_80077814 = spyro.position.z;
      iVar6 = MobyUpdatePosition(&DAT_8007780c,0x10000);
      DAT_80077814 = iVar6 + 0x164;
      spyro.nextAnim = '\x05';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x06';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      DAT_80077828 = cameraPosition.z;
    }
    if (DAT_800777ec < 0x40) {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * -0x4b;
      iVar6 = SinScaled(DAT_800777ec * -0x10);
      cameraPosition.z = DAT_80077828 + (iVar6 * 3 >> 2);
    }
    else {
      if (DAT_800777ec - gameSpeedMultiplyer < 0x40) {
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14) + -0x4b;
      }
      iVar6 = SinScaled(DAT_800777ec * -0x10 + 0x400);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + (iVar6 * 3 >> 2);
    }
    Vec3Subtract((int *)&local_30,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_30,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_28,1);
    cameraAngle.pitch = (short)iVar6;
LAB_dream__8007d678:
    iVar6 = ATan2Scaled(local_30,local_2c,1);
    cameraAngle.yaw = (short)iVar6;
    spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    spyro.RelativeSparxAngle.roll = *(char *)((int)DAT_80077850 + 0x46) + -0x80;
    break;
  case 7:
    if (DAT_800777ec < 0x40) {
      spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec >> 6);
      spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec >> 6);
      iVar6 = SinScaled(DAT_800777ec * 0x18 + 0x200);
      spyro.position.z = DAT_80077814 + (iVar6 * (DAT_80077808 - DAT_80077814)) / 0xb50;
      spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      FUN_80049fac(1);
      if (0x1f < DAT_800777ec) {
        *(int *)((int)DAT_80077850 + 0x14) =
             *(int *)((int)DAT_80077850 + 0x14) + DAT_800777ec * gameSpeedMultiplyer;
      }
    }
    else {
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      Unk_UpdateSpyroAfterEvents(1);
      spyro.isMovementLocked = 0x10;
      DAT_80076ea0 = &spyro;
      maybe_cameraRelated = 0;
      unk_cameraRelatedLocking = 0;
      flyInAnimation = &DAT_8006c8bc;
      unk_camera_related_angle = spyro.angle.yaw;
      CameraRotation(&cameraPosition);
      ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
      DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
      ChangeFlyInCamera();
      Maybe_HudInPauseMenu(0);
      gameState = GAMESTATE_GAMEPLAY;
      DAT_8007579c = 1;
      isInDragonState = 0;
      Maybe_ResetHudTimers();
    }
  }
                    // WARNING: Read-only address (ram,0x80076fec) is written
                    // WARNING: Read-only address (ram,0x80077004) is written
                    // WARNING: Read-only address (ram,0x80077008) is written
                    // WARNING: Read-only address (ram,0x80077018) is written
                    // WARNING: Read-only address (ram,0x80077024) is written
                    // WARNING: Read-only address (ram,0x8007784c) is written
  return;
}



void FUN_dream__8007d9b8(void)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  byte *text;
  char *pcVar6;
  undefined *puVar7;
  uint uVar8;
  uint uVar9;
  byte **ppbVar10;
  int local_e0;
  undefined4 local_dc;
  undefined4 local_d8;
  int local_d0;
  undefined4 local_cc;
  undefined4 local_c8;
  byte abStack_c0 [32];
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int local_80;
  int local_7c;
  undefined4 local_78;
  int local_70;
  int local_6c;
  undefined4 local_68;
  int local_60;
  int local_5c;
  undefined4 local_58;
  int local_50;
  int local_4c;
  undefined4 local_48;
  byte abStack_40 [40];
  
  uVar9 = ptr_hudMobys;
  if (balloonistState < 4) {
    if (balloonistState < 2) {
      sprintf((char *)abStack_c0,s__s_THE_BALLOONIST_dream__8007aa5c,
              (&PTR_s_RETURN_HOME_8006f880)[levelIDPortalExit / 10]);
      iVar2 = strlen((char *)abStack_c0);
      local_e0 = iVar2 * -8 + 0x108;
      local_dc = 0xcc;
      local_d8 = 0x1100;
      local_d0 = 0x10;
      local_cc = 1;
      local_c8 = 0x1400;
      DrawTextAll(abStack_c0,&local_e0,&local_d0,0x12,'\v');
      iVar2 = uVar9 - 0x58;
      if ((int)ptr_hudMobys <= iVar2) {
        iVar3 = 0;
        do {
          *(char *)(iVar2 + 0x46) =
               (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
          iVar2 = iVar2 + -0x58;
          iVar3 = iVar3 + 0xc;
        } while ((int)ptr_hudMobys <= iVar2);
      }
    }
    iVar2 = balloonistState;
    if (balloonistState == 1) {
      if (balloonistDialogue - 0x1eU < 3) {
        if (balloonistDialogue == 0x1e) {
          local_70 = 0xe;
          local_68 = 0x1600;
          local_78 = 0x1400;
          local_80 = 0xf0;
          local_6c = balloonistState;
          local_7c = 0x24;
          if (balloonistRandomGreeting == 0) {
            pcVar6 = s_HOP_ON__SPYRO__dream__8007aa70;
          }
          else if (balloonistRandomGreeting == 1) {
            pcVar6 = s_NEED_A_LIFT__dream__8007aa80;
          }
          else {
            pcVar6 = s_WHERE_TO__SPYRO__dream__8007aa90;
          }
          DrawTextAll((byte *)pcVar6,&local_80,&local_70,0x10,'\v');
          local_80 = 0x110;
          uVar9 = ptr_hudMobys - 0x58;
          local_7c = local_7c + 0x14;
          DrawTextAll((byte *)s_STAY_HERE_dream__8007aaa4,&local_80,&local_70,0x10,'\v');
          local_7c = local_7c + 0xf;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          iVar3 = 1;
          iVar2 = 0;
          do {
            if ((levelIDPortalExit / 10 + -1 != iVar2) && ((&unlockedHWs)[iVar2] == '\x02')) {
              local_80 = 0x110;
              uVar9 = ptr_hudMobys - 0x58;
              DrawTextAll((&PTR_s_ARTISANS_8006f7d4)[iVar2],&local_80,&local_70,0x10,'\v');
              local_7c = local_7c + 0xf;
              if ((balloonistCursorPlacement == iVar3) && (ptr_hudMobys <= uVar9)) {
                iVar4 = 0;
                do {
                  *(char *)(uVar9 + 0x46) =
                       (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar4 & 0xff) + 0x40] >> 8);
                  uVar9 = uVar9 - 0x58;
                  iVar4 = iVar4 + 0xc;
                } while (ptr_hudMobys <= uVar9);
              }
              iVar3 = iVar3 + 1;
            }
            iVar2 = iVar2 + 1;
          } while (iVar2 < 6);
          DrawTextBox(0xe0,0x1d8,0x19,iVar3 * 0xf + 0x33);
          DrawLine(0xf0,0x2e,0x1a0,0x2e);
          local_80 = 0xf4;
          local_78 = 0x1100;
          local_7c = balloonistCursorPlacement * 0xf + 0x36;
          DrawArrow(&local_80,DAT_800777ec,0);
        }
        else if (balloonistDialogue - 0x1fU < 2) {
          DrawTextBox(0x48,0x1b8,0x1c,0x66);
          DrawLine(100,0x37,0x184,0x37);
          local_60 = 0x60;
          local_58 = 0x1100;
          local_5c = balloonistCursorPlacement * 0x13 + 0x43;
          DrawArrow(&local_60,DAT_800777ec,0);
          local_50 = 0x10;
          local_48 = 0x1400;
          local_5c = 0x2c;
          local_4c = iVar2;
          local_58 = 0x1100;
          local_60 = 0x60;
          if (balloonistDialogue == 0x1f) {
            pcVar6 = s_ARE_YOU_READY_TO_GO__dream__8007aab0;
          }
          else {
            pcVar6 = s_WOULD_YOU_LIKE_TO_GO__dream__8007aac8;
          }
          DrawTextAll((byte *)pcVar6,&local_60,&local_50,0x12,'\v');
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          local_5c = local_5c + 0x19;
          DrawTextAll((byte *)s_STAY_HERE_dream__8007aaa4,&local_60,&local_50,0x12,'\v');
          local_5c = local_5c + 0x13;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          if (balloonistDialogue == 0x1f) {
            puVar7 = (&PTR_s_ARTISANS_8006f7d4)[levelIDPortalExit / 10];
          }
          else {
            puVar7 = (&PTR_s_PEACE_KEEPERS_8006f7d8)[levelID + ((int)levelID / 10) * -4];
          }
          sprintf((char *)abStack_40,s_GO_TO__s_dream__8007aae0,puVar7);
          DrawTextAll(abStack_40,&local_60,&local_50,0x12,'\v');
          if ((balloonistCursorPlacement == 1) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
        }
      }
      else {
        DrawTextBox(0x48,0x1b8,0x1c,0x68);
        uVar9 = ptr_hudMobys;
        local_9c = 0x2c;
        local_98 = 0x1100;
        local_90 = 0x10;
        local_8c = iVar2;
        local_88 = 0x1400;
        uVar8 = (uint)(byte)(&DAT_8006f89c)[balloonistDialogue];
        if (uVar8 < (byte)(&DAT_8006f89d)[balloonistDialogue]) {
          ppbVar10 = &PTR_s_IF_YOU_PROVE_YOUR_8006f8c4 + uVar8;
          do {
            local_a0 = 0x5e;
            text = *ppbVar10;
            ppbVar10 = ppbVar10 + 1;
            DrawTextAll(text,&local_a0,&local_90,0x12,'\v');
            local_9c = local_9c + 0x12;
            uVar8 = uVar8 + 1;
          } while ((int)uVar8 < (int)(uint)(byte)(&DAT_8006f89d)[balloonistDialogue]);
        }
        if (((int)DAT_800777ec < 0x50) &&
           (uVar8 = uVar9 + DAT_800777ec * -0x58, (int)ptr_hudMobys <= (int)uVar8)) {
          ptr_hudMobys = uVar8;
        }
        iVar2 = uVar9 - 0x58;
        if ((int)ptr_hudMobys <= iVar2) {
          iVar3 = 0;
          do {
            *(char *)(iVar2 + 0x46) =
                 (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
            iVar2 = iVar2 + -0x58;
            iVar3 = iVar3 + 0xc;
          } while ((int)ptr_hudMobys <= iVar2);
        }
        if (0x4f < (int)DAT_800777ec) {
          local_a0 = 0x19c;
          local_9c = 0x60;
          local_98 = 0x1100;
          DrawArrow(&local_a0,DAT_800777ec,0);
        }
      }
    }
    Maybe_DrawingMobyParticlesRelated();
    RenderObjs();
    if (balloonistState < 2) {
      ptr_maybeTextObj = 0;
      CopyHudToShaded();
      DrawShadedMobys();
    }
  }
  else {
    Maybe_DrawingMobyParticlesRelated();
    iVar2 = DAT_80077850;
    piVar5 = &DAT_8006fcf4;
    if (DAT_8006fcf4 != 0) {
      piVar1 = &DAT_8006fcf8;
      do {
        piVar5 = piVar1;
        piVar1 = piVar5 + 1;
      } while (*piVar5 != 0);
    }
    piVar5[1] = 0;
    *piVar5 = iVar2;
    RenderObjs();
  }
  RenderWorld();
  RenderAllSkyBoxes();
  RenderAllParticles();
  return;
}


/*
Unable to decompile 'FUN_dream__8007e3c0'
Cause: Exception while decompiling dream::8007e3c0: process: timeout

*/

/*
Unable to decompile 'FUN_dry__80080788'
Cause: Exception while decompiling dry::80080788: process: timeout

*/

/*
Unable to decompile 'Gnasty_UpdateMobys'
Cause: Exception while decompiling gnasty::8007ad64: process: timeout

*/


short ** Gnasty_SpawnDynamicObj(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  short **ppsVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  short sVar7;
  uint uVar8;
  Spyro *pSVar9;
  undefined4 *puVar10;
  short *psVar11;
  int aiStack_30 [2];
  int local_28;
  
  ppsVar3 = (short **)SpawnDynamicObjects();
  *(short *)((int)ppsVar3 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppsVar3 + 0x56) = (char)uVar8;
  if (param_1 < 0x102) {
    if (0xfe < param_1) {
LAB_gnasty__80083414:
      psVar11 = *ppsVar3;
      InitArrayRelated(ppsVar3);
      *(undefined *)(ppsVar3 + 0x14) = 0x20;
      Vec3Copy((int *)(ppsVar3 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppsVar3);
      uVar8 = rand();
      uVar4 = rand();
      uVar4 = uVar4 & 0x7ff;
      iVar5 = CosScaled(uVar4);
      iVar6 = CosScaled(uVar8 & 0xfff);
      *psVar11 = (short)((iVar5 >> 5) * iVar6 >> 0xc);
      iVar5 = CosScaled(uVar4);
      iVar6 = SinScaled(uVar8 & 0xfff);
      psVar11[1] = (short)((iVar5 >> 5) * iVar6 >> 0xc);
      iVar5 = SinScaled(uVar4);
      psVar11[2] = (short)(iVar5 >> 5);
      if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
        *psVar11 = *psVar11 + (short)(spyro.airMomentum.x >> 6);
        psVar11[1] = psVar11[1] + (short)(spyro.airMomentum.y >> 6);
        psVar11[2] = psVar11[2] + (short)(spyro.airMomentum.z >> 6);
      }
      ppsVar3[3] = ppsVar3[3] + *psVar11 * 2;
      ppsVar3[4] = ppsVar3[4] + psVar11[1] * 2;
      ppsVar3[5] = ppsVar3[5] + psVar11[2] * 2;
      iVar5 = rand();
      psVar11[3] = (ushort)iVar5 & 0xf;
      iVar5 = rand();
      psVar11[4] = (ushort)iVar5 & 0xf;
      iVar5 = rand();
      psVar11[5] = (ushort)iVar5 & 0xf;
      *(int *)(psVar11 + 8) = *(int *)(param_2 + 0x14) + -0x40;
      uVar8 = rand();
      *(uint *)(psVar11 + 6) = 0x40 - (uVar8 & 0xf);
      if (2 < *(ushort *)((int)ppsVar3 + 0x36) - 0x135) {
        return ppsVar3;
      }
      bVar2 = *(byte *)((int)ppsVar3 + 0x4b);
      ppsVar3[0x13] = (short *)0xa18618;
LAB_gnasty__800835b4:
      *(byte *)((int)ppsVar3 + 0x4b) = bVar2 | 0x80;
      return ppsVar3;
    }
    if (param_1 == 0x4c) {
LAB_gnasty__80083668:
      InitArrayRelated(ppsVar3);
      *(undefined *)(ppsVar3 + 0x14) = 0x20;
      *(undefined *)((int)ppsVar3 + 0x52) = 0xff;
      FUN_800529cc(ppsVar3);
      return ppsVar3;
    }
    if (param_1 < 0x4d) {
      if (param_1 == 0x10) {
        psVar11 = *ppsVar3;
        InitArrayRelated(ppsVar3);
        FUN_800526a8(ppsVar3);
        Vec3Copy((int *)(ppsVar3 + 3),(int *)(param_2 + 0xc));
        ppsVar3[5] = ppsVar3[5] + 0x100;
        Vec3Copy((int *)(psVar11 + 2),(int *)(ppsVar3 + 3));
        *(undefined *)((int)psVar11 + 0x13) = 0;
        *(undefined *)(psVar11 + 9) = 0;
        psVar11[10] = 0x708;
        return ppsVar3;
      }
      if (param_1 < 0x11) {
        if (param_1 == 0xe) {
LAB_gnasty__8008323c:
          puVar10 = (undefined4 *)*ppsVar3;
          InitArrayRelated(ppsVar3);
          *puVar10 = 0;
          puVar10[1] = 0;
          puVar10[2] = 0x8c;
          *(undefined *)((int)puVar10 + 0xe) = 0;
          *(undefined *)((int)puVar10 + 0xf) = 0;
          *(undefined *)((int)puVar10 + 0x11) = 0;
          *(undefined *)((int)puVar10 + 0x12) = 0;
          *(undefined *)((int)puVar10 + 0x13) = 0;
          uVar1 = 3;
          if (*(short *)(param_2 + 0x36) == 0xd) {
            uVar1 = 2;
          }
          *(undefined *)(puVar10 + 4) = uVar1;
          *(undefined *)(puVar10 + 5) = 0xff;
          *(undefined *)(ppsVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppsVar3 + 0x52) = 0x40;
          *(undefined *)((int)ppsVar3 + 0x49) = 2;
          *(undefined *)(ppsVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppsVar3 + 0x45) = 0;
          *(undefined *)((int)ppsVar3 + 0x46) = 0;
          Vec3Copy((int *)(ppsVar3 + 3),(int *)(param_2 + 0xc));
          FUN_800529cc(ppsVar3);
          ppsVar3[7] = (short *)0xffffffff;
          Vec3Copy(aiStack_30,(int *)(ppsVar3 + 3));
          local_28 = local_28 + 0x400;
          MobyUpdatePosition(aiStack_30,0x10000);
          FUN_800533d0(ppsVar3);
          *(undefined *)(ppsVar3 + 0x13) = 0;
          *(undefined *)((int)ppsVar3 + 0x4d) = 0;
          *(undefined *)((int)ppsVar3 + 0x4e) = 0;
          if (*(short *)((int)ppsVar3 + 0x36) == 0xe) {
            *(undefined *)((int)ppsVar3 + 0x4f) = 0xc;
          }
          sVar7 = *(short *)((int)ppsVar3 + 0x36);
          if (sVar7 == 0x53) {
            *(undefined *)((int)ppsVar3 + 0x4f) = 1;
            sVar7 = *(short *)((int)ppsVar3 + 0x36);
          }
          if (sVar7 == 0x54) {
            *(undefined *)((int)ppsVar3 + 0x4f) = 2;
          }
          sVar7 = *(short *)((int)ppsVar3 + 0x36);
          if (sVar7 == 0x55) {
            *(undefined *)((int)ppsVar3 + 0x4f) = 3;
            sVar7 = *(short *)((int)ppsVar3 + 0x36);
          }
          if (sVar7 == 0x56) {
            *(undefined *)((int)ppsVar3 + 0x4f) = 4;
          }
          if (*(short *)((int)ppsVar3 + 0x36) != 0x57) {
            return ppsVar3;
          }
          *(undefined *)((int)ppsVar3 + 0x4f) = 5;
          return ppsVar3;
        }
        if (param_1 == 0xf) {
          puVar10 = (undefined4 *)*ppsVar3;
          InitArrayRelated(ppsVar3);
          puVar10[2] = 0x8c;
          *(undefined *)(puVar10 + 4) = 3;
          *(undefined *)(puVar10 + 5) = 0xff;
          *puVar10 = 0;
          puVar10[1] = 0;
          *(undefined *)((int)puVar10 + 0xe) = 0;
          *(undefined *)((int)puVar10 + 0xf) = 0;
          *(undefined *)((int)puVar10 + 0x11) = 0;
          *(undefined *)((int)puVar10 + 0x12) = 0;
          *(undefined *)((int)puVar10 + 0x13) = 0;
          *(undefined *)((int)ppsVar3 + 0x49) = 2;
          *(undefined *)(ppsVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppsVar3 + 0x52) = 0x10;
          *(undefined *)(ppsVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppsVar3 + 0x45) = 0;
          *(undefined *)((int)ppsVar3 + 0x46) = 0;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppsVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800526a8(ppsVar3);
          bVar2 = *(byte *)((int)ppsVar3 + 0x4b);
          *(undefined *)(ppsVar3 + 0x13) = 0;
          *(undefined *)((int)ppsVar3 + 0x4d) = 0;
          *(undefined *)((int)ppsVar3 + 0x4e) = 0;
          *(undefined *)((int)ppsVar3 + 0x4f) = 1;
          goto LAB_gnasty__800835b4;
        }
      }
      else {
        if (param_1 == 0x22) {
          InitArrayRelated(ppsVar3);
          *(undefined *)(ppsVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppsVar3 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppsVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppsVar3);
          return ppsVar3;
        }
        if (((0x21 < param_1) && (param_1 < 0x46)) && (0x42 < param_1)) goto LAB_gnasty__80083414;
      }
    }
    else {
      if (param_1 == 0x78) {
        puVar10 = (undefined4 *)*ppsVar3;
        InitArrayRelated(ppsVar3);
        FUN_800526a8(ppsVar3);
        *(undefined *)((int)ppsVar3 + 0x49) = 0;
        *puVar10 = 0;
        *(undefined2 *)(puVar10 + 2) = 0;
        *(undefined2 *)((int)puVar10 + 6) = 0;
        *(undefined2 *)(puVar10 + 1) = 0;
        puVar10[3] = 0;
        puVar10[4] = 0;
        if (param_2 == 0) {
          return ppsVar3;
        }
        Vec3Copy((int *)(ppsVar3 + 3),(int *)(param_2 + 0xc));
        return ppsVar3;
      }
      if (param_1 < 0x79) {
        if ((param_1 < 0x58) && (0x52 < param_1)) goto LAB_gnasty__8008323c;
      }
      else {
        if (param_1 == 0x97) goto LAB_gnasty__80083414;
        if ((0x96 < param_1) && (param_1 < 0x9a)) {
          InitArrayRelated(ppsVar3);
          *(undefined *)(ppsVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppsVar3 + 0x52) = 0xff;
          FUN_800529cc(ppsVar3);
          *(undefined *)(ppsVar3 + 0x13) = 0;
          *(undefined *)((int)ppsVar3 + 0x4d) = 0;
          *(undefined *)((int)ppsVar3 + 0x4e) = 0;
          *(undefined *)((int)ppsVar3 + 0x4f) = 0xd;
          return ppsVar3;
        }
      }
    }
  }
  else {
    if (param_1 == 0x147) {
LAB_gnasty__800835c0:
      puVar10 = (undefined4 *)*ppsVar3;
      InitArrayRelated(ppsVar3);
      FUN_800529cc(ppsVar3);
      *(undefined *)((int)ppsVar3 + 0x4f) = 2;
      *(undefined *)(ppsVar3 + 0x13) = 0;
      *(undefined *)((int)ppsVar3 + 0x4d) = 0;
      *(undefined *)((int)ppsVar3 + 0x4e) = 0;
      *puVar10 = 0x40;
      return ppsVar3;
    }
    if (param_1 < 0x148) {
      if (param_1 == 0x115) goto LAB_gnasty__800835c0;
      if (param_1 < 0x116) {
        if ((param_1 < 0x10e) && (0x103 < param_1)) goto LAB_gnasty__800835c0;
      }
      else if ((param_1 < 0x138) && (0x134 < param_1)) goto LAB_gnasty__80083414;
    }
    else if (param_1 < 0x1c4) {
      if (0x1a9 < param_1) goto LAB_gnasty__80083668;
      if ((param_1 < 0x16d) && (0x16a < param_1)) goto LAB_gnasty__800835f4;
    }
    else if ((param_1 < 0x1fd) && (0x1fa < param_1)) {
LAB_gnasty__800835f4:
      InitArrayRelated(ppsVar3);
      if (param_2 == 0) {
        pSVar9 = &spyro;
      }
      else {
        pSVar9 = (Spyro *)(param_2 + 0xc);
      }
      Vec3Copy((int *)(ppsVar3 + 3),(int *)pSVar9);
      ppsVar3[5] = ppsVar3[5] + 0x100;
      psVar11 = (short *)MobyUpdatePosition(ppsVar3 + 3,0x800);
      iVar5 = (int)psVar11 - (int)ppsVar3[5];
      if (iVar5 < 0) {
        iVar5 = -iVar5;
      }
      if (iVar5 < 0x800) {
        ppsVar3[5] = psVar11;
      }
      else {
        ppsVar3[5] = ppsVar3[5] + -0x100;
      }
      goto LAB_gnasty__800836bc;
    }
  }
  InitArrayRelated(ppsVar3);
  pSVar9 = (Spyro *)(param_2 + 0xc);
  if (param_2 == 0) {
    pSVar9 = &spyro;
  }
  Vec3Copy((int *)(ppsVar3 + 3),(int *)pSVar9);
LAB_gnasty__800836bc:
  FUN_800526a8(ppsVar3);
  return ppsVar3;
}



void Gnasty_UpdateParticles(int param_1)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  char cVar4;
  char cVar5;
  short sVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  short sVar10;
  short sVar11;
  char *pcVar12;
  char *pcVar13;
  short *result;
  char *pcVar14;
  int local_58;
  int local_54;
  int local_50;
  undefined4 local_48;
  undefined4 local_44;
  int local_40;
  int local_3c;
  int local_38;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    cVar5 = (char)param_1;
    cVar4 = cVar5 * '\x02';
    pcVar12 = ptr_headOfParticleBuffer + 1;
    pcVar14 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar13 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar13) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar5 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar5 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar5 * -4;
        goto LAB_gnasty__80083e10;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar5 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar5 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar5 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar12[0xd] = pcVar12[0xd] + cVar5 * -4;
        goto LAB_gnasty__80083e10;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar5 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar5 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar5 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar5 * -4;
        goto LAB_gnasty__80083e10;
      case '\t':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[9] = pcVar12[9] + cVar4;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_gnasty__80083e10;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_gnasty__80084590;
        Vec3Copy(&local_58,(int *)&spyro);
        iVar8 = CosScaled((int)*(short *)(pcVar12 + 0x17));
        local_58 = local_58 + (iVar8 >> 4);
        iVar8 = SinScaled((int)*(short *)(pcVar12 + 0x17));
        local_54 = local_54 + (iVar8 >> 4);
        local_50 = local_50 + 0x100;
        Vec3ScaleDownBy4(result,&local_58);
        sVar10 = *(short *)(pcVar12 + 0x17);
        *(short *)(pcVar12 + 0x17) = sVar10 + 0x40;
        iVar8 = CosScaled((int)(short)(sVar10 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar8 < 0) {
          iVar8 = -iVar8;
        }
        pcVar12[9] = (char)(iVar8 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar13 + 0x12);
        pcVar12[0xb] = pcVar12[0xb] + -8;
        pcVar12[0xc] = pcVar12[0xc] + -8;
        pcVar12[0xd] = pcVar12[0xd] + -8;
        if (pcVar12[0xb] == '\0') goto LAB_gnasty__80084590;
        goto LAB_gnasty__80083e18;
      case '\f':
        pcVar12[10] = pcVar12[10] + '\b';
        pcVar12[9] = pcVar12[9] + '\x02';
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -8;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -8;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -8;
        }
        if ((*(uint *)(pcVar12 + 0xb) & 0xffffff) != 0) goto LAB_gnasty__80083e18;
        goto LAB_gnasty__80084590;
      case '\x10':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar4;
        pcVar12[0xb] = pcVar12[0xb] + -4;
        pcVar12[0xc] = pcVar12[0xc] + -4;
        pcVar12[0xd] = pcVar12[0xd] + -4;
        if (pcVar12[0xb] != '\0') goto LAB_gnasty__80083e18;
        goto LAB_gnasty__80084590;
      case '\x11':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar4;
        if (8 < (byte)pcVar12[1]) {
          pcVar12[0xb] = pcVar12[0xb] + -0x20;
        }
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        bVar3 = (byte)(cVar2 + 1U) < 0xc;
        pcVar12[0xc] = pcVar12[0xc] + -8;
        pcVar12[0xd] = pcVar12[0xd] + -4;
        goto LAB_gnasty__80083e10;
      case '\x19':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[9] = pcVar12[9] + cVar4;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        if (0x1f < ((uint)bVar1 + param_1 & 0xff)) goto LAB_gnasty__80084590;
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar8 = (uint)(byte)pcVar12[0xb] - param_1;
        pcVar12[9] = pcVar12[9] + cVar4;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xb] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xc] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xc] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xd] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        bVar1 = pcVar12[1];
        pcVar12[0xd] = (char)iVar8;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_gnasty__80083e10;
      case 'B':
        iVar8 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar12[1] & 1U) != 0) {
              *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
              *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
              *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
              if ((pcVar12[1] & 2U) != 0) {
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x13) = *(short *)(pcVar12 + 0x13) + -1 + ((ushort)iVar7 & 2);
              }
            }
            iVar8 = iVar8 + 1;
            pcVar12[1] = pcVar12[1] + '\x01';
          } while (iVar8 < param_1);
        }
        bVar3 = (byte)pcVar12[1] < 0x18;
LAB_gnasty__80083e10:
        if (bVar3) {
LAB_gnasty__80083e18:
          if (pcVar12[2] != '\0') break;
        }
LAB_gnasty__80084590:
        FUN_80053608(pcVar13);
        break;
      case 'F':
        local_48._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_48._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_48._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        iVar8 = rand();
        local_48._0_2_ = (short)local_48 + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        sVar10 = local_48._2_2_ + -1 + ((ushort)iVar8 & 2);
        local_48 = CONCAT22(sVar10,(short)local_48);
        if ((pcVar12[1] & 1U) != 0) {
          local_44 = CONCAT22(local_44._2_2_,(short)local_44 + -1);
        }
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_48;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_44;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_gnasty__80084590;
        cVar2 = pcVar12[0xf];
        pcVar12[0xf] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0x80) {
          pcVar12[0xf] = -0x80;
        }
        cVar2 = pcVar12[0x10];
        pcVar12[0x10] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x60) {
          pcVar12[0x10] = '`';
        }
        cVar2 = pcVar12[0x13];
        pcVar12[0x11] = '\0';
        pcVar12[0x13] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0xc0) {
          pcVar12[0x13] = -0x40;
        }
        cVar2 = pcVar12[0x14];
        pcVar12[0x14] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x80) {
          pcVar12[0x14] = -0x80;
        }
        cVar2 = pcVar12[0x15];
        pcVar12[0x15] = cVar2 - 6U;
        if ((byte)(cVar2 - 6U) < 0x20) {
          pcVar12[0x15] = ' ';
        }
        break;
      case 'G':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_gnasty__80084590;
        local_40 = (int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3);
        local_3c = (int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5);
        local_38 = (int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_3c = local_3c + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_38 = local_38 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_40;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + (short)local_3c;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_38;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 9) - (short)local_40;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 0xb) - (short)local_3c;
        pcVar12[0x13] = pcVar12[0x13] + -2;
        pcVar12[0x15] = pcVar12[0x15] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -2;
        pcVar12[0x10] = pcVar12[0x10] + -3;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0xd) - (short)local_38;
        pcVar12[0x11] = pcVar12[0x11] + -3;
        break;
      case 'H':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x2f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_gnasty__80084590;
        local_48 = (int)*(short *)(pcVar12 + 3) - (int)*(short *)(pcVar12 + 9) >> 1;
        local_44 = (int)*(short *)(pcVar12 + 5) - (int)*(short *)(pcVar12 + 0xb) >> 1;
        local_40 = (int)*(short *)(pcVar12 + 7) - (int)*(short *)(pcVar12 + 0xd) >> 1;
        uVar9 = rand();
        local_48 = local_48 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_44 = local_44 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + (short)local_44;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)local_40;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 3) + (short)local_48 * -2;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 5) + (short)local_44 * -2;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 7) + (short)local_40 * -2;
        break;
      case 'M':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar6 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar6;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        sVar6 = sVar6 + 1;
        local_48 = CONCAT22(sVar6,sVar11);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar6;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
        if (0x1f < (byte)(cVar2 + 1U)) goto LAB_gnasty__80084590;
        break;
      case 'N':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x27 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_gnasty__80084590;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar8 & 2);
        uVar9 = rand();
        iVar8 = (*(ushort *)(pcVar12 + 0x13) - 1) + (uVar9 & 2);
        *(short *)(pcVar12 + 0x13) = (short)iVar8;
        if (2 < iVar8 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar12 + 0x13) = 2;
        }
        if (*(short *)(pcVar12 + 0x13) < -4) {
          *(undefined2 *)(pcVar12 + 0x13) = 0xfffc;
        }
        pcVar12[0xb] = pcVar12[0xb] + -2;
        pcVar12[0xd] = pcVar12[0xd] + -1;
        pcVar12[0xc] = pcVar12[0xc] + -2;
        break;
      case 'O':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        local_48 = CONCAT22(sVar10,sVar11);
        sVar6 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar6);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar10;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar6;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar6;
        if ((0x17 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_gnasty__80084590;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        pcVar12[0x13] = pcVar12[0x13] + -3;
        pcVar12[0x10] = pcVar12[0x10] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -4;
        if (5 < (byte)pcVar12[0x15]) {
          pcVar12[0x15] = pcVar12[0x15] - 6;
        }
      }
      pcVar12 = pcVar12 + 0x20;
      pcVar14 = pcVar14 + 0x20;
      result = result + 0x10;
      pcVar13 = pcVar13 + 0x20;
    } while (*pcVar12 != -1);
  }
  return;
}



void Gnasty_CreateParticle(int param_1,undefined4 param_2,int *param_3,int *param_4)

{
  bool bVar1;
  short sVar2;
  undefined uVar3;
  short extraout_var;
  uint uVar4;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  int iVar8;
  undefined *puVar9;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int aiStack_80 [4];
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  int local_48;
  int local_40;
  int local_30;
  
  local_48 = 0;
  if (0 < param_1) {
    local_40 = (int)param_4 >> 0x18;
    local_30 = 0;
    local_50 = param_1;
    do {
      uVar3 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar3;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        puVar5[0xf] = 0x2e;
        goto LAB_gnasty__80084d7c;
      case 1:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar3;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        if (bVar1) {
          uVar3 = 8;
        }
        else {
          uVar3 = 0x10;
        }
        puVar5[10] = uVar3;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar3 = 0x60;
        goto LAB_gnasty__80084d68;
      case 2:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar3;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        uVar7 = rand();
        local_90 = (uVar7 & 0x3f) - 0x20;
        uVar7 = rand();
        local_8c = (uVar7 & 0x3f) - 0x20;
        local_88 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),&local_90);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x20;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        puVar5[0xf] = 0x2e;
        goto LAB_gnasty__80084d7c;
      case 9:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar3;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar3 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar5[0xc] = 0x80;
              puVar5[0xd] = 0x80;
              puVar5[0xe] = 0x80;
              goto LAB_gnasty__80084d78;
            }
            puVar5[0xc] = 0xe0;
          }
          else {
            puVar5[0xc] = 0xf0;
            uVar3 = 0x60;
          }
          puVar5[0xd] = uVar3;
          puVar5[0xe] = 0;
        }
        else {
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
        }
        goto LAB_gnasty__80084d78;
      case 10:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar3;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)&spyro);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_8006e438)[local_30];
        puVar5[0xd] = (&DAT_8006e439)[local_30];
        uVar3 = (&DAT_8006e43a)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar3;
        *(short *)(puVar5 + 0x18) = (short)(((local_50 - local_48) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar3;
        puVar5[3] = 1;
        puVar5[0x11] = 4;
        sVar2 = *(short *)((int)param_3 + 0x36);
        if (sVar2 == 0x22) {
          Vec3Copy(aiStack_80,param_3 + 3);
        }
        else {
          if ((sVar2 == 0xad) || (sVar2 == 0xb5)) {
            if (5 < local_40) {
              puVar5[1] = 5;
              puVar5[0x11] = 0x16;
              Vec3Copy(aiStack_80,(int *)(local_40 * 0xc + -0x7ff91b20));
              goto LAB_gnasty__80084a9c;
            }
            puVar9 = (undefined *)(local_40 * 0xc + -0x7ff91b20);
          }
          else if (sVar2 == 0x78) {
            puVar9 = &DAT_8006e570;
          }
          else {
            puVar9 = &DAT_8006e498 + local_48 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar9,aiStack_80);
          Vec3Add(aiStack_80,aiStack_80,param_3 + 3);
        }
LAB_gnasty__80084a9c:
        Vec3ScaleDownBy4((short *)(puVar5 + 4),aiStack_80);
        puVar5[0xd] = (char)((uint)param_4 >> 8);
        puVar5[0xc] = (char)param_4;
        puVar5[0xe] = (char)((uint)param_4 >> 0x10);
        puVar5[0xf] = 0x2e;
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 7) + 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0x10] = 0;
        break;
      case 0x10:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar3;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_3 + 3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = (char)*param_4;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar3 = (undefined)(param_4[1] << 3);
        puVar5[0xc] = uVar3;
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xd] = uVar3;
        puVar5[0xe] = puVar5[0xc];
        break;
      case 0x11:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar3;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_3 + 3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = (char)*param_4;
        puVar5[0xd] = (char)param_4[1];
        iVar6 = param_4[2];
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = (char)iVar6;
        break;
      case 0x19:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar3;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_3 + 3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        iVar6 = param_3[6];
        if (iVar6 < 0x1cd) {
          if (iVar6 < 0x191) {
            uVar3 = 0xe0;
            if (iVar6 < 0x141) {
              puVar5[0xc] = 0x80;
              puVar5[0xd] = 0x80;
              puVar5[0xe] = 0x80;
              goto LAB_gnasty__80084c7c;
            }
            puVar5[0xc] = 0xe0;
          }
          else {
            puVar5[0xc] = 0xf0;
            uVar3 = 0x60;
          }
          puVar5[0xd] = uVar3;
          puVar5[0xe] = 0;
        }
        else {
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
        }
LAB_gnasty__80084c7c:
        puVar5[0xf] = 0x2e;
        goto LAB_gnasty__80084d7c;
      case 0x21:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar3;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_70,(int *)&spyro);
          local_68 = spyro.unkown_heightRelated;
          uVar7 = rand();
          local_70 = local_70 + -0x1f + (uVar7 & 0x3e);
          uVar7 = rand();
          local_6c = local_6c + -0x1f + (uVar7 & 0x3e);
        }
        else {
          local_70 = 0x164;
          local_6c = 0;
          local_68 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_70,&local_70);
          Vec3Add(&local_70,&local_70,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_70);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar3 = 0x20;
LAB_gnasty__80084d68:
        puVar5[0xc] = uVar3;
        puVar5[0xd] = uVar3;
        puVar5[0xe] = uVar3;
LAB_gnasty__80084d78:
        puVar5[0xf] = 0x2e;
LAB_gnasty__80084d7c:
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x42:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar3;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = (short)(*param_3 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = (short)(param_3[1] >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        iVar8 = param_3[2];
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)(iVar8 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_gnasty__80084e90;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_gnasty__80084e90;
        case 2:
          puVar5[0xc] = 0;
LAB_gnasty__80084e90:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_gnasty__80084ed8;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_gnasty__80084ed8;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_gnasty__80084ed8;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_gnasty__80084ed8:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar3;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        uVar7 = rand();
        local_60 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_5c = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_58 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = (short)(*param_3 >> 2) + (short)local_60 * 4;
        *(short *)(puVar5 + 6) = (short)(param_3[1] >> 2) + (short)local_5c * 4;
        *(short *)(puVar5 + 8) = (short)(param_3[2] >> 2) + (short)local_58 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_60 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_5c * 2;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_58 * 2;
        break;
      case 0x47:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar3;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        uVar7 = rand();
        local_60 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_5c = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_58 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)(*param_3 >> 2) + (short)local_60 * 4;
        *(short *)(puVar5 + 6) = (short)(param_3[1] >> 2) + (short)local_5c * 4;
        *(short *)(puVar5 + 8) = (short)(param_3[2] >> 2) + (short)local_58 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_60;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_5c;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_58;
        break;
      case 0x4d:
        puVar5 = (undefined *)AllocateParticleToBuffer(4);
        *puVar5 = uVar3;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        uVar7 = rand();
        CosScaled(uVar7 & 0xfff);
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + extraout_var;
        uVar4 = rand();
        SinScaled(uVar4 & 0x7ff);
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + extraout_var_00;
        SinScaled(uVar7 & 0xfff);
        puVar5[0x17] = 0x7f;
        puVar5[0x11] = 0x40;
        puVar5[0x12] = 0x60;
        puVar5[0x16] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x10] = 0x80;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0x80;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar3;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar6 & 1);
        iVar6 = rand();
        puVar5[0xc] = (byte)iVar6 | 0x80;
        uVar7 = rand();
        uVar7 = (uVar7 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar7;
        if ((byte)puVar5[0xc] < uVar7) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar6 = rand();
        puVar5[0xe] = ((byte)iVar6 & 0x3f) + 0x40;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar3;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),param_3);
        Vec3Add(&local_60,param_3,param_4);
        uVar7 = rand();
        local_60 = local_60 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_5c = local_5c + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_58 = local_58 + -0x40 + (uVar7 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_60);
        puVar5[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0xa0;
          puVar5[0x12] = 0;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = (byte)iVar6 | 0xe0;
          puVar5[0x16] = 0x80;
        }
        else {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x12] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = ((byte)iVar6 & 0x1f) + 0xa0;
          iVar6 = rand();
          puVar5[0x16] = ((byte)iVar6 & 0x1f) + 0xa0;
        }
        puVar5[0x13] = 0x50;
      }
      local_30 = local_30 + 4;
      local_48 = local_48 + 1;
    } while (local_48 < local_50);
  }
  return;
}



void Gnexus_InitBalloonist(int **param_1)

{
  int aiStack_20 [4];
  
  gameState = GAMESTATE_BALLOONIST;
  balloonistState = 0;
  DAT_800777ec = 0;
  balloonistCursorPlacement = 0;
                    // WARNING: Read-only address (ram,0x8007784c) is written
  isInDragonState = 1;
  DAT_8007579c = 1;
  DAT_80077850 = ptr_startOfCurrentLevelMobys + **param_1 * 0x58;
  DAT_8007784c = param_1;
  DAT_80077820 = ATan2Scaled(cameraPosition.x - (int)param_1[3],cameraPosition.y - (int)param_1[4],1
                            );
  Vec3Subtract(aiStack_20,&cameraPosition.x,(int *)(param_1 + 3));
  DAT_80077824 = Vec3CalculateLengthE(aiStack_20,flag2D);
  DAT_80077828 = cameraPosition.z;
  DAT_8007783c = 0x52e;
  DAT_80077838 = (uint)*(byte *)((int)param_1 + 0x46) * 0x10 - 0x312 & 0xfff;
  DAT_80077840 = (int)param_1[5] + 0x58f;
  return;
}



void Gnexus_BalloonistStayHere(void)

{
  ExitFairyOrBalloonist();
  spyro.headAngle.pitch = 0;
  spyro.headAngle.pad2 = 0;
  spyro.unkown1._1_1_ = 0;
  if (ptr_SparxMoby != 0) {
    *(undefined *)(ptr_SparxMoby + 0x50) = 0x10;
  }
  return;
}



void Gnexus_BalloonistChecksAndUpdates(void)

{
  undefined4 uVar1;
  LevelIDS LVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int *outputArray;
  uint local_78;
  uint local_74;
  int local_70;
  short local_68;
  short local_66;
  short local_64;
  uint local_60;
  uint local_5c;
  int local_58;
  uint local_50;
  uint local_4c;
  int local_48;
  uint local_40;
  uint local_3c;
  int local_38;
  uint local_30;
  uint local_2c;
  int local_28;
  
  if (balloonistState < 4) {
    DAT_800700f8 = 0;
    DAT_800700f4 = DAT_8007784c;
    FUN_800522c0(&DAT_800700f4,0);
  }
  switch(balloonistState) {
  case 0:
    if (0x5f < DAT_800777ec) {
      iVar6 = CosScaled(DAT_80077838);
      cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar6 * DAT_8007783c >> 0xc);
      iVar6 = SinScaled(DAT_80077838);
      cameraPosition.z = DAT_80077840;
      cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar6 * DAT_8007783c >> 0xc);
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      balloonistState = 1;
      DAT_800777ec = 0;
      spyro.RelativeSparxAngle.roll = (char)((int)DAT_8007781c >> 4);
      spyro.nextAnim = '\0';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    iVar6 = SinScaled((DAT_800777ec << 0xb) / 0x60 + -0x400);
    iVar6 = iVar6 + 0x1000;
    if (DAT_800777ec == gameSpeedMultiplyer) {
      if (ptr_SparxMoby != (int *)0x0) {
        *(undefined *)(ptr_SparxMoby + 0x14) = 0;
        *(undefined *)((int)ptr_SparxMoby + 0x51) = 0;
        if (*(int *)(*ptr_SparxMoby + 0xc) != 0) {
          SetToZero();
          *(undefined4 *)(*ptr_SparxMoby + 0xc) = 0;
        }
      }
      backupSuperFlameTimer = superFlameTimer;
      Unk_UpdateSpyroAfterEvents(1);
      spyro.currentAnim = '\x01';
      spyro.nextAnim = '\x01';
      spyro.nextKeyframe = '\x01';
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = 0x4a0;
      DAT_80077810 = 0;
      DAT_80077814 = 0x164;
      Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&DAT_8007780c,&DAT_8007780c);
      Vec3Add(&DAT_8007780c,&DAT_8007780c,DAT_8007784c + 0xc);
      DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      DAT_8007781c = ATan2Scaled(local_78,local_74,1);
    }
    if (DAT_800777ec < 0x18) {
      iVar3 = SinScaled((DAT_800777ec << 0xb) / 0x18 + -0x400);
      iVar3 = iVar3 + 0x1000;
      if ((DAT_8007781c - DAT_80077818 & 0xfff) < 0x801) {
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
      }
      else {
LAB_gnexus__8007b404:
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 - (iVar4 * iVar3 >> 0xd);
      }
LAB_gnexus__8007b424:
      spyro.RelativeSparxAngle.roll = (char)(iVar3 >> 4);
      uVar1._0_1_ = '\b';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
LAB_gnexus__8007b434:
      spyro._88_4_ = uVar1;
    }
    else {
      if (0x47 < DAT_800777ec) {
        iVar3 = SinScaled(((DAT_800777ec + -0x48) * 0x800) / 0x18 + -0x400);
        iVar3 = iVar3 + 0x1000;
        if (DAT_800777ec - gameSpeedMultiplyer < 0x48) {
          DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
          spyro.nextAnim = '\x03';
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\b';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          DAT_8007781c = (uint)*(byte *)(DAT_8007784c + 0x46) * 0x10 - 0x800 & 0xfff;
        }
        if (0x800 < (DAT_8007781c - DAT_80077818 & 0xfff)) goto LAB_gnexus__8007b404;
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
        goto LAB_gnexus__8007b424;
      }
      iVar3 = SinScaled(((DAT_800777ec + -0x18) * 0x800) / 0x30 + -0x400);
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      Vec3Scale(&local_78,&local_78,iVar3 + 0x1000);
      Vec3ScaleDownByPowerOfTwo((int *)&local_78,0xd);
      Vec3Add(&spyro,&DAT_80077800,&local_78);
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      spyro._88_4_ = (int)uVar5 >> 1;
      if ((int)spyro._88_4_ < 4) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      uVar1._0_1_ = '\x10';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
      if (0x10 < (int)spyro._88_4_) goto LAB_gnexus__8007b434;
    }
    spyro.RelativeSparxAngle.yaw = '\0';
    spyro.RelativeSparxAngle.pitch = '\0';
    spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
    UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
    FUN_80049fac(1);
    FlameButAlsoNotFlame(gameSpeedMultiplyer);
    if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
    }
    else {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
    }
    iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
    iVar4 = CosScaled(iVar3);
    cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar4 * iVar7 >> 0xc);
    iVar3 = SinScaled(iVar3);
    local_78 = 0x220;
    local_70 = 0x340;
    local_74 = 0;
    cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar3 * iVar7 >> 0xc);
    cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
    Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&local_78,&local_78);
    Vec3Add(&local_78,&local_78,DAT_8007784c + 0xc);
    Vec3Subtract((int *)&local_78,(int *)&local_78,&cameraPosition.x);
    if (DAT_800777ec < 0x20) {
      local_68 = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      local_66 = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      local_64 = (short)iVar6;
      iVar6 = FUN_8001796c((int)local_68,(int)cameraAngle.roll);
      cameraAngle.roll = cameraAngle.roll + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_66,(int)cameraAngle.pitch);
      cameraAngle.pitch = cameraAngle.pitch + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_64,(int)cameraAngle.yaw);
      cameraAngle.yaw = cameraAngle.yaw + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
    }
    else {
      cameraAngle.roll = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      cameraAngle.yaw = (short)iVar6;
    }
    (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
    Maybe_SoundEffectProcessing();
    break;
  case 1:
    if (balloonistDialogue < 0x1e) {
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x51) {
        return;
      }
      iVar6 = balloonistDialogue % 6;
      if (iVar6 == 0) {
        iVar3 = balloonistDialogue + 1;
      }
      else if (iVar6 < 3) {
        if ((balloonistDialogue < 3) && (requirementArtisans < 2)) {
          (*ptr_OverlayBalloonistStayHere)();
          iVar3 = balloonistDialogue;
        }
        else if (balloonistDialogue == 0xe) {
          do {
            iVar6 = rand();
            iVar6 = iVar6 % 5;
            if ((iVar6 == 0) && (DAT_80076fec == 0)) {
              iVar3 = 0x21;
LAB_gnexus__8007ba2c:
              balloonistDialogue = iVar3;
            }
            else {
              if ((iVar6 == 1) && (DAT_80077004 == 0)) {
                iVar3 = 0x22;
                goto LAB_gnexus__8007ba2c;
              }
              if ((iVar6 == 2) && (DAT_80077008 == 0)) {
                iVar3 = 0x23;
                goto LAB_gnexus__8007ba2c;
              }
              if (((iVar6 == 3) && (iVar3 = 0x24, DAT_80077018 < 2)) ||
                 ((iVar6 == 4 && (iVar3 = 0x25, DAT_80077024 == 0)))) goto LAB_gnexus__8007ba2c;
            }
            iVar3 = balloonistDialogue;
          } while (balloonistDialogue == 0xe);
        }
        else {
          balloonistDialogue = 0x1e;
          iVar3 = balloonistDialogue;
        }
      }
      else if (iVar6 == 3) {
        iVar3 = balloonistDialogue + 2;
      }
      else {
        iVar3 = 0x1f;
        if (iVar6 == 4) {
          iVar3 = balloonistDialogue + 1;
        }
      }
      balloonistDialogue = iVar3;
      DAT_800777ec = 0;
      return;
    }
    if (balloonistDialogue == 0x1e) {
      iVar6 = 1;
      do {
        if ((&unlockedHWs)[iVar6] != '\x02') break;
        iVar6 = iVar6 + 1;
      } while (iVar6 < 6);
      if ((currentButtonOneFrame & UP_BUTTON) == 0) {
        if ((currentButtonOneFrame & DOWN_BUTTON) != 0) {
          balloonistCursorPlacement = balloonistCursorPlacement + 1;
          if (iVar6 <= balloonistCursorPlacement) {
            balloonistCursorPlacement = 0;
          }
          goto LAB_gnexus__8007bb38;
        }
      }
      else {
        balloonistCursorPlacement = balloonistCursorPlacement + -1;
        if (balloonistCursorPlacement < 0) {
          balloonistCursorPlacement = iVar6 + -1;
        }
LAB_gnexus__8007bb38:
        DAT_800777ec = 0x20;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        levelID = balloonistCursorPlacement * 10;
        if (levelIDPortalExit <= (int)levelID) {
          levelID = levelID + ARTISANS_ID;
        }
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)levelID / 10 + -1;
        return;
      }
    }
    else {
      if (1 < balloonistDialogue - 0x1fU) {
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
          return;
        }
        if (DAT_800777ec < 0x51) {
          return;
        }
        if ((balloonistDialogue == 0x24) || (balloonistDialogue == 0x26)) {
          balloonistCursorPlacement = 0;
          balloonistDialogue = 0x1e;
          balloonistRandomGreeting = 1;
          return;
        }
        if (balloonistDialogue == 0x25) {
          DAT_800777ec = 0;
          balloonistDialogue = 0x26;
          return;
        }
        if (balloonistDialogue == 0x21) {
          LVar2 = STONE_HILL_ID;
        }
        else if (balloonistDialogue == 0x22) {
          LVar2 = DRY_CANYON_ID;
        }
        else {
          LVar2 = CLIFF_TOWN_ID;
          if (balloonistDialogue != 0x23) goto LAB_gnexus__8007be14;
        }
        levelID = LVar2;
LAB_gnexus__8007be14:
        balloonistDropoffLocation = balloonistDialogue + -0x1b;
        DAT_800777ec = 0;
        balloonistDialogue = 0x20;
        return;
      }
      if ((currentButtonOneFrame & (UP_BUTTON|DOWN_BUTTON)) != 0) {
        DAT_800777ec = 0x20;
        balloonistCursorPlacement = 1 - balloonistCursorPlacement;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        if (balloonistDialogue != 0x1f) {
          balloonistState = 2;
          DAT_800777ec = 0;
          return;
        }
        levelID = levelIDPortalExit + ARTISANS_ID;
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)(levelIDPortalExit + ARTISANS_ID) / 10 + -1;
        return;
      }
      if (balloonistDialogue != 0x1f) {
        balloonistCursorPlacement = 0;
        balloonistDialogue = 0x1e;
        balloonistRandomGreeting = 1;
        return;
      }
    }
    (*ptr_OverlayBalloonistStayHere)();
    break;
  case 2:
    if (DAT_800777ec < 0x66) {
      iVar6 = SinScaled((DAT_800777ec * 0x800) / 0x66 + -0x400);
      iVar6 = iVar6 + 0x1000;
      if (DAT_800777ec == gameSpeedMultiplyer) {
        *(undefined *)((int)DAT_80077850 + 0x4a) = 0xff;
        DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                   cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
        Vec3Subtract((int *)&local_60,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
        DAT_80077824 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        DAT_8007782c = (int)cameraAngle.roll;
        DAT_80077830 = (int)cameraAngle.pitch;
        DAT_80077834 = (int)cameraAngle.yaw;
        DAT_80077828 = cameraPosition.z;
        DAT_8007783c = 0xe00;
        DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 - 0x480 & 0xfff;
        DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
        DAT_80077848 = *(int *)(DAT_8007784c + 0x14) + 0x488;
        Vec3Copy(&DAT_80077800,(int *)&spyro);
        Vec3Copy(&DAT_8007780c,(int *)(DAT_8007784c + 0xc));
        spyro.currentKeyfame = spyro.nextKeyframe;
        spyro.nextAnim = '\x05';
        spyro.nextKeyframe = '\0';
        spyro.maybe_AnimSpeedRelated = '\0';
        spyro.animSpeed = '\a';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (DAT_800777ec < 0x30) {
        spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec) / 0x30;
        spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec) / 0x30;
        iVar3 = SinScaled(DAT_800777ec << 5);
        spyro.position.z = DAT_80077808 + (iVar3 * 10) / 0x24;
        spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
        UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
        FUN_80049fac(1);
      }
      else {
        if (DAT_800777ec - gameSpeedMultiplyer < 0x30) {
          DAT_80077808 = DAT_80077808 + 0x325;
          DAT_80077800 = DAT_8007780c;
          DAT_80077804 = DAT_80077810;
          Vec3Copy(&DAT_8007780c,(int *)((int)DAT_80077850 + 0xc));
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\x04';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
        }
        iVar3 = DAT_800777ec + -0x36;
        if (0x35 < DAT_800777ec - gameSpeedMultiplyer) {
          spyro.animSpeed = '\a';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * iVar3) / 0x30;
          spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * iVar3) / 0x30;
          iVar3 = SinScaled(iVar3 * 0x20);
          spyro.position.z = DAT_80077808 + (iVar3 >> 2);
        }
      }
      if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_60,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      uVar5 = Vec3CalculateLengthE((int *)&local_60,flag2D);
      iVar3 = ATan2Scaled(uVar5,-local_58,1);
      local_66 = (short)iVar3;
      iVar3 = ATan2Scaled(local_60,local_5c,1);
      local_64 = (short)iVar3;
      iVar3 = FUN_8001796c((int)local_66,DAT_80077830);
      cameraAngle.pitch = (short)DAT_80077830 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      iVar3 = FUN_8001796c((int)local_64,DAT_80077834);
      cameraAngle.yaw = (short)DAT_80077834 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      *(int *)((int)DAT_80077850 + 0x14) =
           DAT_80077844 + ((DAT_80077848 - DAT_80077844) * iVar6 >> 0xd);
    }
    else {
      balloonistState = 3;
      DAT_800777ec = 0;
    }
    break;
  case 3:
    if (0x7f < DAT_800777ec) {
      DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                 cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
      Vec3Subtract((int *)&local_50,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
      DAT_80077824 = Vec3CalculateLengthE((int *)&local_50,flag2D);
      DAT_80077828 = cameraPosition.z;
      DAT_8007783c = 0x800;
      levelLoadState = 0;
      portalNumber = 0xffffffff;
      canFlyIn = 0;
      portalToExitFromInHW = 0;
      DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 + 0x390 & 0xfff;
      balloonistState = 4;
      DAT_800777ec = 0;
      DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
      LevelTransitionRelated(1);
      ArrayCopy((int *)&DAT_80071e9c,DAT_80077850,0x58);
      DAT_80077850 = &DAT_80071e9c;
      if (DAT_800785e8 < 0x80200000) {
        outputArray = (int *)(DAT_80078a44 + -0x400c);
      }
      else {
        outputArray = (int *)&DAT_801fe000;
      }
      ArrayCopy(outputArray,DAT_800769f8,0x4000);
      iVar3 = (int)DAT_800769f8;
      iVar6 = outputArray[0xe] - (int)DAT_800769f8;
      DAT_800769f8 = outputArray;
      outputArray[0xe] = (int)outputArray + iVar6;
      *(int *)(DAT_800769f8[0xe] + 0x14) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x14) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x18) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x18) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x24) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x24) - iVar3);
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      spyro.position.x = DAT_8007780c;
      DAT_80077828 = cameraPosition.z;
      spyro.position.y = DAT_80077810;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      spyro.nextAnim = '\0';
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.unkown3 = '\x03';
      spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    }
    if (DAT_800777ec < 0x40) {
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0xc00);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    else {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * 0x4b;
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0x800);
      cameraPosition.z = DAT_80077828 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    Vec3Subtract((int *)&local_50,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_50,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_48,1);
    cameraAngle.pitch = (short)iVar6;
    local_30 = local_50;
    local_2c = local_4c;
    goto LAB_gnexus__8007cbf0;
  case 5:
    if (levelLoadState < 0xd) {
      LevelTransitionRelated(1);
    }
    if (DAT_800777ec < 0x100) {
      iVar6 = SinScaled(((DAT_800777ec << 0xb) >> 8) + -0x400);
      iVar6 = iVar6 + 0x1000;
      if ((DAT_80077820 - DAT_80077838 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_8007783c + ((int)((DAT_80077824 - DAT_8007783c) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077840 + ((DAT_80077828 - DAT_80077840) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_40,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      local_38 = (local_38 + 0x200) - (iVar6 >> 4);
      uVar5 = Vec3CalculateLengthE((int *)&local_40,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_38,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_40,local_3c,1);
      cameraAngle.yaw = (short)iVar6;
    }
    else if (levelLoadState == 0xd) {
      balloonistState = 6;
      DAT_800777ec = 0;
      LevelTransitionRelated(1);
    }
    break;
  case 6:
    if (0x7f < DAT_800777ec) {
      balloonistState = 7;
      DAT_800777ec = 0;
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = *(int *)(&DAT_8006eadc + balloonistDropoffLocation * 8);
      DAT_80077810 = *(int *)(&DAT_8006eae0 + balloonistDropoffLocation * 8);
      DAT_80077814 = spyro.position.z;
      iVar6 = MobyUpdatePosition(&DAT_8007780c,0x10000);
      DAT_80077814 = iVar6 + 0x164;
      spyro.nextAnim = '\x05';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x06';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      DAT_80077828 = cameraPosition.z;
    }
    if (DAT_800777ec < 0x40) {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * -0x4b;
      iVar6 = SinScaled(DAT_800777ec * -0x10);
      cameraPosition.z = DAT_80077828 + (iVar6 * 3 >> 2);
    }
    else {
      if (DAT_800777ec - gameSpeedMultiplyer < 0x40) {
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14) + -0x4b;
      }
      iVar6 = SinScaled(DAT_800777ec * -0x10 + 0x400);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + (iVar6 * 3 >> 2);
    }
    Vec3Subtract((int *)&local_30,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_30,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_28,1);
    cameraAngle.pitch = (short)iVar6;
LAB_gnexus__8007cbf0:
    iVar6 = ATan2Scaled(local_30,local_2c,1);
    cameraAngle.yaw = (short)iVar6;
    spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    spyro.RelativeSparxAngle.roll = *(char *)((int)DAT_80077850 + 0x46) + -0x80;
    break;
  case 7:
    if (DAT_800777ec < 0x40) {
      spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec >> 6);
      spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec >> 6);
      iVar6 = SinScaled(DAT_800777ec * 0x18 + 0x200);
      spyro.position.z = DAT_80077814 + (iVar6 * (DAT_80077808 - DAT_80077814)) / 0xb50;
      spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      FUN_80049fac(1);
      if (0x1f < DAT_800777ec) {
        *(int *)((int)DAT_80077850 + 0x14) =
             *(int *)((int)DAT_80077850 + 0x14) + DAT_800777ec * gameSpeedMultiplyer;
      }
    }
    else {
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      Unk_UpdateSpyroAfterEvents(1);
      spyro.isMovementLocked = 0x10;
      DAT_80076ea0 = &spyro;
      maybe_cameraRelated = 0;
      unk_cameraRelatedLocking = 0;
      flyInAnimation = &DAT_8006c8bc;
      unk_camera_related_angle = spyro.angle.yaw;
      CameraRotation(&cameraPosition);
      ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
      DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
      ChangeFlyInCamera();
      Maybe_HudInPauseMenu(0);
      gameState = GAMESTATE_GAMEPLAY;
      DAT_8007579c = 1;
      isInDragonState = 0;
      Maybe_ResetHudTimers();
    }
  }
                    // WARNING: Read-only address (ram,0x80076fec) is written
                    // WARNING: Read-only address (ram,0x80077004) is written
                    // WARNING: Read-only address (ram,0x80077008) is written
                    // WARNING: Read-only address (ram,0x80077018) is written
                    // WARNING: Read-only address (ram,0x80077024) is written
                    // WARNING: Read-only address (ram,0x8007784c) is written
  return;
}



void Gnexus_BalloonistVisualsFunc(void)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  byte *text;
  char *pcVar6;
  undefined *puVar7;
  uint uVar8;
  uint uVar9;
  byte **ppbVar10;
  int local_e0;
  undefined4 local_dc;
  undefined4 local_d8;
  int local_d0;
  undefined4 local_cc;
  undefined4 local_c8;
  byte abStack_c0 [32];
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int local_80;
  int local_7c;
  undefined4 local_78;
  int local_70;
  int local_6c;
  undefined4 local_68;
  int local_60;
  int local_5c;
  undefined4 local_58;
  int local_50;
  int local_4c;
  undefined4 local_48;
  byte abStack_40 [40];
  
  uVar9 = ptr_hudMobys;
  if (balloonistState < 4) {
    if (balloonistState < 2) {
      sprintf((char *)abStack_c0,s__s_THE_BALLOONIST_gnexus__8007aa5c,
              (&PTR_s_RETURN_HOME_8006f880)[levelIDPortalExit / 10]);
      iVar2 = strlen((char *)abStack_c0);
      local_e0 = iVar2 * -8 + 0x108;
      local_dc = 0xcc;
      local_d8 = 0x1100;
      local_d0 = 0x10;
      local_cc = 1;
      local_c8 = 0x1400;
      DrawTextAll(abStack_c0,&local_e0,&local_d0,0x12,'\v');
      iVar2 = uVar9 - 0x58;
      if ((int)ptr_hudMobys <= iVar2) {
        iVar3 = 0;
        do {
          *(char *)(iVar2 + 0x46) =
               (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
          iVar2 = iVar2 + -0x58;
          iVar3 = iVar3 + 0xc;
        } while ((int)ptr_hudMobys <= iVar2);
      }
    }
    iVar2 = balloonistState;
    if (balloonistState == 1) {
      if (balloonistDialogue - 0x1eU < 3) {
        if (balloonistDialogue == 0x1e) {
          local_70 = 0xe;
          local_68 = 0x1600;
          local_78 = 0x1400;
          local_80 = 0xf0;
          local_6c = balloonistState;
          local_7c = 0x24;
          if (balloonistRandomGreeting == 0) {
            pcVar6 = s_HOP_ON__SPYRO__gnexus__8007aa70;
          }
          else if (balloonistRandomGreeting == 1) {
            pcVar6 = s_NEED_A_LIFT__gnexus__8007aa80;
          }
          else {
            pcVar6 = s_WHERE_TO__SPYRO__gnexus__8007aa90;
          }
          DrawTextAll((byte *)pcVar6,&local_80,&local_70,0x10,'\v');
          local_80 = 0x110;
          uVar9 = ptr_hudMobys - 0x58;
          local_7c = local_7c + 0x14;
          DrawTextAll((byte *)s_STAY_HERE_gnexus__8007aaa4,&local_80,&local_70,0x10,'\v');
          local_7c = local_7c + 0xf;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          iVar3 = 1;
          iVar2 = 0;
          do {
            if ((levelIDPortalExit / 10 + -1 != iVar2) && ((&unlockedHWs)[iVar2] == '\x02')) {
              local_80 = 0x110;
              uVar9 = ptr_hudMobys - 0x58;
              DrawTextAll((&PTR_s_ARTISANS_8006f7d4)[iVar2],&local_80,&local_70,0x10,'\v');
              local_7c = local_7c + 0xf;
              if ((balloonistCursorPlacement == iVar3) && (ptr_hudMobys <= uVar9)) {
                iVar4 = 0;
                do {
                  *(char *)(uVar9 + 0x46) =
                       (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar4 & 0xff) + 0x40] >> 8);
                  uVar9 = uVar9 - 0x58;
                  iVar4 = iVar4 + 0xc;
                } while (ptr_hudMobys <= uVar9);
              }
              iVar3 = iVar3 + 1;
            }
            iVar2 = iVar2 + 1;
          } while (iVar2 < 6);
          DrawTextBox(0xe0,0x1d8,0x19,iVar3 * 0xf + 0x33);
          DrawLine(0xf0,0x2e,0x1a0,0x2e);
          local_80 = 0xf4;
          local_78 = 0x1100;
          local_7c = balloonistCursorPlacement * 0xf + 0x36;
          DrawArrow(&local_80,DAT_800777ec,0);
        }
        else if (balloonistDialogue - 0x1fU < 2) {
          DrawTextBox(0x48,0x1b8,0x1c,0x66);
          DrawLine(100,0x37,0x184,0x37);
          local_60 = 0x60;
          local_58 = 0x1100;
          local_5c = balloonistCursorPlacement * 0x13 + 0x43;
          DrawArrow(&local_60,DAT_800777ec,0);
          local_50 = 0x10;
          local_48 = 0x1400;
          local_5c = 0x2c;
          local_4c = iVar2;
          local_58 = 0x1100;
          local_60 = 0x60;
          if (balloonistDialogue == 0x1f) {
            pcVar6 = s_ARE_YOU_READY_TO_GO__gnexus__8007aab0;
          }
          else {
            pcVar6 = s_WOULD_YOU_LIKE_TO_GO__gnexus__8007aac8;
          }
          DrawTextAll((byte *)pcVar6,&local_60,&local_50,0x12,'\v');
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          local_5c = local_5c + 0x19;
          DrawTextAll((byte *)s_STAY_HERE_gnexus__8007aaa4,&local_60,&local_50,0x12,'\v');
          local_5c = local_5c + 0x13;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          if (balloonistDialogue == 0x1f) {
            puVar7 = (&PTR_s_ARTISANS_8006f7d4)[levelIDPortalExit / 10];
          }
          else {
            puVar7 = (&PTR_s_PEACE_KEEPERS_8006f7d8)[levelID + ((int)levelID / 10) * -4];
          }
          sprintf((char *)abStack_40,s_GO_TO__s_gnexus__8007aae0,puVar7);
          DrawTextAll(abStack_40,&local_60,&local_50,0x12,'\v');
          if ((balloonistCursorPlacement == 1) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
        }
      }
      else {
        DrawTextBox(0x48,0x1b8,0x1c,0x68);
        uVar9 = ptr_hudMobys;
        local_9c = 0x2c;
        local_98 = 0x1100;
        local_90 = 0x10;
        local_8c = iVar2;
        local_88 = 0x1400;
        uVar8 = (uint)(byte)(&DAT_8006f89c)[balloonistDialogue];
        if (uVar8 < (byte)(&DAT_8006f89d)[balloonistDialogue]) {
          ppbVar10 = &PTR_s_IF_YOU_PROVE_YOUR_8006f8c4 + uVar8;
          do {
            local_a0 = 0x5e;
            text = *ppbVar10;
            ppbVar10 = ppbVar10 + 1;
            DrawTextAll(text,&local_a0,&local_90,0x12,'\v');
            local_9c = local_9c + 0x12;
            uVar8 = uVar8 + 1;
          } while ((int)uVar8 < (int)(uint)(byte)(&DAT_8006f89d)[balloonistDialogue]);
        }
        if (((int)DAT_800777ec < 0x50) &&
           (uVar8 = uVar9 + DAT_800777ec * -0x58, (int)ptr_hudMobys <= (int)uVar8)) {
          ptr_hudMobys = uVar8;
        }
        iVar2 = uVar9 - 0x58;
        if ((int)ptr_hudMobys <= iVar2) {
          iVar3 = 0;
          do {
            *(char *)(iVar2 + 0x46) =
                 (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
            iVar2 = iVar2 + -0x58;
            iVar3 = iVar3 + 0xc;
          } while ((int)ptr_hudMobys <= iVar2);
        }
        if (0x4f < (int)DAT_800777ec) {
          local_a0 = 0x19c;
          local_9c = 0x60;
          local_98 = 0x1100;
          DrawArrow(&local_a0,DAT_800777ec,0);
        }
      }
    }
    Maybe_DrawingMobyParticlesRelated();
    RenderObjs();
    if (balloonistState < 2) {
      ptr_maybeTextObj = 0;
      CopyHudToShaded();
      DrawShadedMobys();
    }
  }
  else {
    Maybe_DrawingMobyParticlesRelated();
    iVar2 = DAT_80077850;
    piVar5 = &DAT_8006fcf4;
    if (DAT_8006fcf4 != 0) {
      piVar1 = &DAT_8006fcf8;
      do {
        piVar5 = piVar1;
        piVar1 = piVar5 + 1;
      } while (*piVar5 != 0);
    }
    piVar5[1] = 0;
    *piVar5 = iVar2;
    RenderObjs();
  }
  RenderWorld();
  RenderAllSkyBoxes();
  RenderAllParticles();
  return;
}


/*
Unable to decompile 'Gnexus_UpdateMobys'
Cause: Exception while decompiling gnexus::8007d938: process: timeout

*/


int ** Gnexus_SpawnDynamicObj(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  int **ppiVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  short sVar7;
  uint uVar8;
  Spyro *pSVar9;
  int *piVar10;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar3 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar3 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar3 + 0x56) = (char)uVar8;
  if (param_1 < 0x102) {
    if (0xfe < param_1) {
LAB_gnexus__800839f0:
      piVar10 = *ppiVar3;
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppiVar3);
      uVar8 = rand();
      uVar4 = rand();
      uVar4 = uVar4 & 0x7ff;
      iVar6 = CosScaled(uVar4);
      iVar5 = CosScaled(uVar8 & 0xfff);
      *(short *)piVar10 = (short)((iVar6 >> 5) * iVar5 >> 0xc);
      iVar6 = CosScaled(uVar4);
      iVar5 = SinScaled(uVar8 & 0xfff);
      *(short *)((int)piVar10 + 2) = (short)((iVar6 >> 5) * iVar5 >> 0xc);
      iVar6 = SinScaled(uVar4);
      *(short *)(piVar10 + 1) = (short)(iVar6 >> 5);
      if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
        *(short *)piVar10 = *(short *)piVar10 + (short)(spyro.airMomentum.x >> 6);
        *(short *)((int)piVar10 + 2) =
             *(short *)((int)piVar10 + 2) + (short)(spyro.airMomentum.y >> 6);
        *(short *)(piVar10 + 1) = *(short *)(piVar10 + 1) + (short)(spyro.airMomentum.z >> 6);
      }
      ppiVar3[3] = ppiVar3[3] + *(short *)piVar10;
      ppiVar3[4] = ppiVar3[4] + *(short *)((int)piVar10 + 2);
      ppiVar3[5] = ppiVar3[5] + *(short *)(piVar10 + 1);
      iVar6 = rand();
      *(ushort *)((int)piVar10 + 6) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)(piVar10 + 2) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)((int)piVar10 + 10) = (ushort)iVar6 & 0xf;
      piVar10[4] = *(int *)(param_2 + 0x14) + -0x40;
      uVar8 = rand();
      piVar10[3] = 0x40 - (uVar8 & 0xf);
      if (2 < *(ushort *)((int)ppiVar3 + 0x36) - 0x135) {
        return ppiVar3;
      }
      bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
      ppiVar3[0x13] = (int *)0xa18618;
LAB_gnexus__80083b90:
      *(byte *)((int)ppiVar3 + 0x4b) = bVar2 | 0x80;
      return ppiVar3;
    }
    if (param_1 == 0x4c) {
LAB_gnexus__80083e50:
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
      FUN_800529cc(ppiVar3);
      return ppiVar3;
    }
    if (param_1 < 0x4d) {
      if (param_1 == 0xf) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        piVar10[2] = 0x8c;
        *(undefined *)(piVar10 + 4) = 3;
        *(undefined *)(piVar10 + 5) = 0xff;
        *piVar10 = 0;
        piVar10[1] = 0;
        *(undefined *)((int)piVar10 + 0xe) = 0;
        *(undefined *)((int)piVar10 + 0xf) = 0;
        *(undefined *)((int)piVar10 + 0x11) = 0;
        *(undefined *)((int)piVar10 + 0x12) = 0;
        *(undefined *)((int)piVar10 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x49) = 2;
        *(undefined *)(ppiVar3 + 0x14) = 0x18;
        *(undefined *)((int)ppiVar3 + 0x52) = 0x10;
        *(undefined *)(ppiVar3 + 0x11) = 0x20;
        *(undefined *)((int)ppiVar3 + 0x45) = 0;
        *(undefined *)((int)ppiVar3 + 0x46) = 0;
        if (param_2 != 0) {
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        }
        FUN_800526a8(ppiVar3);
        bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *(undefined *)((int)ppiVar3 + 0x4f) = 1;
        goto LAB_gnexus__80083b90;
      }
      if (param_1 < 0x10) {
        if (param_1 == 0xe) goto LAB_gnexus__80083850;
      }
      else {
        if (param_1 == 0x10) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          FUN_800526a8(ppiVar3);
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          ppiVar3[5] = ppiVar3[5] + 0x80;
          Vec3Copy(piVar10 + 1,(int *)(ppiVar3 + 3));
          *(undefined *)((int)piVar10 + 0x13) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(short *)(piVar10 + 5) = 0x708;
          return ppiVar3;
        }
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar3);
          return ppiVar3;
        }
      }
    }
    else {
      if (param_1 == 0x78) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        *(undefined *)((int)ppiVar3 + 0x49) = 0;
        *piVar10 = 0;
        *(undefined2 *)(piVar10 + 2) = 0;
        *(undefined2 *)((int)piVar10 + 6) = 0;
        *(undefined2 *)(piVar10 + 1) = 0;
        piVar10[3] = 0;
        piVar10[4] = 0;
        if (param_2 == 0) {
          return ppiVar3;
        }
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        return ppiVar3;
      }
      if (param_1 < 0x79) {
        if ((param_1 < 0x58) && (0x52 < param_1)) {
LAB_gnexus__80083850:
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *piVar10 = 0;
          piVar10[1] = 0;
          piVar10[2] = 0x8c;
          *(undefined *)((int)piVar10 + 0xe) = 0;
          *(undefined *)((int)piVar10 + 0xf) = 0;
          *(undefined *)((int)piVar10 + 0x11) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(undefined *)((int)piVar10 + 0x13) = 0;
          uVar1 = 3;
          if (*(short *)(param_2 + 0x36) == 0xd) {
            uVar1 = 2;
          }
          *(undefined *)(piVar10 + 4) = uVar1;
          *(undefined *)(piVar10 + 5) = 0xff;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x40;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          FUN_800529cc(ppiVar3);
          ppiVar3[7] = (int *)0xffffffff;
          Vec3Copy(aiStack_48,(int *)(ppiVar3 + 3));
          local_40 = local_40 + 0x400;
          MobyUpdatePosition(aiStack_48,0x10000);
          FUN_800533d0(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          if (*(short *)((int)ppiVar3 + 0x36) == 0xe) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 0xc;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x53) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 1;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x54) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 2;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x55) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 3;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x56) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 4;
          }
          if (*(short *)((int)ppiVar3 + 0x36) != 0x57) {
            return ppiVar3;
          }
          *(undefined *)((int)ppiVar3 + 0x4f) = 5;
          return ppiVar3;
        }
      }
      else if (param_1 == 0xfb) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        *(undefined *)(ppiVar3 + 0x14) = 0x20;
        *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
        FUN_800529cc(ppiVar3);
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *(undefined *)((int)ppiVar3 + 0x4f) = 0xe;
        if (dragonState == 3) {
          uVar1 = 0x14;
        }
        else {
          uVar1 = 0x30;
          if (dragonState != 1) goto LAB_gnexus__80083bfc;
        }
        *(undefined *)((int)ppiVar3 + 0x57) = uVar1;
LAB_gnexus__80083bfc:
        uVar8 = rand();
        iVar6 = (uVar8 & 7) * 4;
        local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar6);
        local_34 = 0;
        local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar6);
        Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
        uVar8 = rand();
        local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
        Vec3Add(ppiVar3 + 3,param_2 + 0xc,&local_38);
        Vec3Copy(piVar10,&local_38);
        Vec3ScaleDownByPowerOfTwo(piVar10,2);
        uVar8 = rand();
        *piVar10 = *piVar10 + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar10[1] = piVar10[1] + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar10[2] = piVar10[2] + -0x7f + (uVar8 & 0xff);
        iVar6 = rand();
        *(char *)(ppiVar3 + 0x11) = (char)iVar6;
        iVar6 = rand();
        *(char *)((int)ppiVar3 + 0x45) = (char)iVar6;
        iVar6 = rand();
        *(char *)((int)ppiVar3 + 0x46) = (char)iVar6;
        iVar6 = rand();
        *(byte *)(piVar10 + 4) = (byte)iVar6 & 0xf;
        iVar6 = rand();
        *(byte *)((int)piVar10 + 0x11) = (byte)iVar6 & 0xf;
        iVar6 = rand();
        *(byte *)((int)piVar10 + 0x12) = (byte)iVar6 & 0xf;
        piVar10[3] = *(int *)(param_2 + 0x14);
        iVar6 = rand();
        *(byte *)((int)piVar10 + 0x13) = ((byte)iVar6 & 3) + 0x10;
        return ppiVar3;
      }
    }
  }
  else {
    if (param_1 == 0x147) {
LAB_gnexus__80083d5c:
      piVar10 = *ppiVar3;
      InitArrayRelated(ppiVar3);
      FUN_800529cc(ppiVar3);
      *(undefined *)((int)ppiVar3 + 0x4f) = 2;
      *(undefined *)(ppiVar3 + 0x13) = 0;
      *(undefined *)((int)ppiVar3 + 0x4d) = 0;
      *(undefined *)((int)ppiVar3 + 0x4e) = 0;
      *piVar10 = 0x40;
      return ppiVar3;
    }
    if (param_1 < 0x148) {
      if (param_1 == 0x115) goto LAB_gnexus__80083d5c;
      if (param_1 < 0x116) {
        if ((param_1 < 0x10e) && (0x103 < param_1)) goto LAB_gnexus__80083d5c;
      }
      else if ((param_1 < 0x138) && (0x134 < param_1)) goto LAB_gnexus__800839f0;
    }
    else if (param_1 < 0x1c4) {
      if (0x1a9 < param_1) goto LAB_gnexus__80083e50;
      if (param_1 == 0x18e) {
        InitArrayRelated(ppiVar3);
        *(undefined *)(ppiVar3 + 0x14) = 0xff;
        ppiVar3[3] = (int *)0x1cc;
        ppiVar3[4] = (int *)&DAT_00000028;
        ppiVar3[5] = (int *)0x1000;
        FUN_800529cc(ppiVar3);
        *(undefined *)((int)ppiVar3 + 0x47) = 0x20;
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *(undefined *)((int)ppiVar3 + 0x4f) = 0;
        return ppiVar3;
      }
      if (param_1 == 0x195) goto LAB_gnexus__80083ddc;
    }
    else if (param_1 == 0x1dd) {
LAB_gnexus__80083ddc:
      InitArrayRelated(ppiVar3);
      if (param_2 == 0) {
        pSVar9 = &spyro;
      }
      else {
        pSVar9 = (Spyro *)(param_2 + 0xc);
      }
      Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
      ppiVar3[5] = ppiVar3[5] + 0x80;
      piVar10 = (int *)MobyUpdatePosition(ppiVar3 + 3,0x800);
      iVar6 = (int)piVar10 - (int)ppiVar3[5];
      if (iVar6 < 0) {
        iVar6 = -iVar6;
      }
      if (iVar6 < 0x800) {
        ppiVar3[5] = piVar10;
      }
      else {
        ppiVar3[5] = ppiVar3[5] + -0x80;
      }
      goto LAB_gnexus__80083ea4;
    }
  }
  InitArrayRelated(ppiVar3);
  pSVar9 = (Spyro *)(param_2 + 0xc);
  if (param_2 == 0) {
    pSVar9 = &spyro;
  }
  Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
LAB_gnexus__80083ea4:
  FUN_800526a8(ppiVar3);
  return ppiVar3;
}



void Gnexus_UpdateParticles(int param_1)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  short sVar9;
  short sVar10;
  char *pcVar11;
  char *pcVar12;
  short *result;
  char *pcVar13;
  int local_50;
  int local_4c;
  int local_48;
  undefined4 local_40;
  undefined4 local_3c;
  int local_38;
  int local_34;
  int local_30;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    cVar4 = (char)param_1;
    pcVar11 = ptr_headOfParticleBuffer + 1;
    pcVar13 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar12 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar12) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[9] = pcVar11[9] + cVar4 * '\x02';
        pcVar11[0xc] = pcVar11[0xc] + cVar4 * -4;
        pcVar11[0xb] = pcVar11[0xb] + cVar4 * -4;
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar11[0xd] = pcVar11[0xd] + cVar4 * -4;
        goto LAB_gnexus__80084e38;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        pcVar11[9] = pcVar11[9] + cVar4 * '\x04';
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[0xc] = pcVar11[0xc] + cVar4 * -4;
        pcVar11[0xb] = pcVar11[0xb] + cVar4 * -4;
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar11[0xd] = pcVar11[0xd] + cVar4 * -4;
        goto LAB_gnexus__80084e38;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        pcVar11[9] = pcVar11[9] + cVar4 * '\x04';
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[0xc] = pcVar11[0xc] + cVar4 * -4;
        pcVar11[0xb] = pcVar11[0xb] + cVar4 * -4;
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar11[0xd] = pcVar11[0xd] + cVar4 * -4;
        goto LAB_gnexus__80084e38;
      case '\t':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar11[9] = pcVar11[9] + cVar4 * '\x02';
        goto LAB_gnexus__80084e38;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_gnexus__80084e50;
        Vec3Copy(&local_50,(int *)&spyro);
        iVar7 = CosScaled((int)*(short *)(pcVar11 + 0x17));
        local_50 = local_50 + (iVar7 >> 4);
        iVar7 = SinScaled((int)*(short *)(pcVar11 + 0x17));
        local_4c = local_4c + (iVar7 >> 4);
        local_48 = local_48 + 0x100;
        Vec3ScaleDownBy4(result,&local_50);
        sVar9 = *(short *)(pcVar11 + 0x17);
        *(short *)(pcVar11 + 0x17) = sVar9 + 0x40;
        iVar7 = CosScaled((int)(short)(sVar9 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar7 < 0) {
          iVar7 = -iVar7;
        }
        pcVar11[9] = (char)(iVar7 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar12 + 0x12);
        pcVar11[0xb] = pcVar11[0xb] + -8;
        pcVar11[0xc] = pcVar11[0xc] + -8;
        pcVar11[0xd] = pcVar11[0xd] + -8;
        if (pcVar11[0xb] == '\0') goto LAB_gnexus__80084e50;
        goto LAB_gnexus__80084e40;
      case '\f':
        pcVar11[10] = pcVar11[10] + '\b';
        pcVar11[9] = pcVar11[9] + '\x02';
        if (pcVar11[0xb] != '\0') {
          pcVar11[0xb] = pcVar11[0xb] + -8;
        }
        if (pcVar11[0xc] != '\0') {
          pcVar11[0xc] = pcVar11[0xc] + -8;
        }
        if (pcVar11[0xd] != '\0') {
          pcVar11[0xd] = pcVar11[0xd] + -8;
        }
        if ((*(uint *)(pcVar11 + 0xb) & 0xffffff) != 0) goto LAB_gnexus__80084e40;
        goto LAB_gnexus__80084e50;
      case '\x18':
        if ((byte)pcVar11[0xb] < 0xf0) {
          pcVar11[0xb] = pcVar11[0xb] + 4;
        }
        if ((byte)pcVar11[0xc] < 0xf0) {
          pcVar11[0xc] = pcVar11[0xc] + 4;
        }
        if ((byte)pcVar11[0xd] < 0xf0) {
          pcVar11[0xd] = pcVar11[0xd] + 4;
        }
        pcVar11[0x1b] = pcVar11[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar7 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar7 = dragonTimerCurrentState;
        }
        *(short *)(pcVar11 + 0x17) = (short)((int)((uint)(byte)pcVar11[0x1c] * (0x48 - iVar7)) >> 3)
        ;
        iVar7 = ((int)((0x20 - (uint)(byte)pcVar11[0x1c]) * iVar7) >> 4) + 8;
        *(short *)(pcVar11 + 0x19) = (short)iVar7;
        *(short *)(pcVar11 + 3) =
             *(short *)(pcVar11 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar11[0x1b] + 0x40] * (iVar7 * 0x10000 >> 0x10) >>
                    0xc);
        sVar9 = sineWaveArray[(byte)pcVar11[0x1b]];
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 0x15) + *(short *)(pcVar11 + 0x17) + 0x20;
        *(short *)(pcVar11 + 5) =
             *(short *)(pcVar11 + 0x13) +
             (short)((int)sVar9 * (int)*(short *)(pcVar11 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar11[0xb] - param_1;
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[9] = pcVar11[9] + cVar4 * '\x02';
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar11[0xb] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar11[0xc] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar11[0xc] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar11[0xd] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        bVar1 = pcVar11[1];
        pcVar11[0xd] = (char)iVar7;
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_gnexus__80084e38;
      case 'B':
        iVar7 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar11[1] & 1U) != 0) {
              *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + *(short *)(pcVar11 + 0xf);
              *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + *(short *)(pcVar11 + 0x11);
              *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + *(short *)(pcVar11 + 0x13);
              if ((pcVar11[1] & 2U) != 0) {
                iVar6 = rand();
                *(ushort *)(pcVar11 + 0xf) = *(short *)(pcVar11 + 0xf) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar11 + 0x11) = *(short *)(pcVar11 + 0x11) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar11 + 0x13) = *(short *)(pcVar11 + 0x13) + -1 + ((ushort)iVar6 & 2);
              }
            }
            iVar7 = iVar7 + 1;
            pcVar11[1] = pcVar11[1] + '\x01';
          } while (iVar7 < param_1);
        }
        bVar3 = (byte)pcVar11[1] < 0x18;
        goto LAB_gnexus__80084e38;
      case 'F':
        local_40._0_2_ = (short)((int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3) >> 1);
        local_40._2_2_ = (short)((int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7) >> 1);
        local_3c = CONCAT22(local_3c._2_2_,sVar9);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + (short)local_40;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + local_40._2_2_;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar9;
        iVar7 = rand();
        local_40._0_2_ = (short)local_40 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_40._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_40 = CONCAT22(sVar9,(short)local_40);
        if ((pcVar11[1] & 1U) != 0) {
          local_3c = CONCAT22(local_3c._2_2_,(short)local_3c + -1);
        }
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + (short)local_40;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar9;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + (short)local_3c;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_gnexus__80084e50;
        cVar2 = pcVar11[0xf];
        pcVar11[0xf] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0x80) {
          pcVar11[0xf] = -0x80;
        }
        cVar2 = pcVar11[0x10];
        pcVar11[0x10] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x60) {
          pcVar11[0x10] = '`';
        }
        cVar2 = pcVar11[0x13];
        pcVar11[0x11] = '\0';
        pcVar11[0x13] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0xc0) {
          pcVar11[0x13] = -0x40;
        }
        cVar2 = pcVar11[0x14];
        pcVar11[0x14] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x80) {
          pcVar11[0x14] = -0x80;
        }
        cVar2 = pcVar11[0x15];
        pcVar11[0x15] = cVar2 - 6U;
        if ((byte)(cVar2 - 6U) < 0x20) {
          pcVar11[0x15] = ' ';
        }
        break;
      case 'G':
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_gnexus__80084e50;
        local_38 = (int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3);
        local_34 = (int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5);
        local_30 = (int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7);
        uVar8 = rand();
        local_38 = local_38 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_34 = local_34 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_30 = local_30 + -1 + (uVar8 & 2);
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + (short)local_38;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + (short)local_34;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + (short)local_30;
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 9) - (short)local_38;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 0xb) - (short)local_34;
        pcVar11[0x13] = pcVar11[0x13] + -2;
        pcVar11[0x15] = pcVar11[0x15] + -4;
        pcVar11[0x14] = pcVar11[0x14] + -2;
        pcVar11[0x10] = pcVar11[0x10] + -3;
        pcVar11[0xf] = pcVar11[0xf] + -3;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 0xd) - (short)local_30;
        pcVar11[0x11] = pcVar11[0x11] + -3;
        break;
      case 'H':
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        if ((0x2f < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_gnexus__80084e50;
        local_40 = (int)*(short *)(pcVar11 + 3) - (int)*(short *)(pcVar11 + 9) >> 1;
        local_3c = (int)*(short *)(pcVar11 + 5) - (int)*(short *)(pcVar11 + 0xb) >> 1;
        local_38 = (int)*(short *)(pcVar11 + 7) - (int)*(short *)(pcVar11 + 0xd) >> 1;
        uVar8 = rand();
        local_40 = local_40 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_3c = local_3c + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_38 = local_38 + -1 + (uVar8 & 2);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + (short)local_40;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + (short)local_3c;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + (short)local_38;
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 3) + (short)local_40 * -2;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 5) + (short)local_3c * -2;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 7) + (short)local_38 * -2;
        break;
      case 'M':
        sVar10 = (short)((int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3) >> 1);
        sVar5 = (short)((int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7) >> 1);
        local_3c = CONCAT22(local_3c._2_2_,sVar9);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + sVar10;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + sVar5;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar9;
        sVar5 = sVar5 + 1;
        local_40 = CONCAT22(sVar5,sVar10);
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + sVar10;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar5;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + sVar9;
        if (0x1f < (byte)(cVar2 + 1U)) goto LAB_gnexus__80084e50;
        break;
      case 'N':
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        if ((0x27 < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_gnexus__80084e50;
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + *(short *)(pcVar11 + 0xf);
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + *(short *)(pcVar11 + 0x11);
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + *(short *)(pcVar11 + 0x13);
        iVar7 = rand();
        *(ushort *)(pcVar11 + 0xf) = *(short *)(pcVar11 + 0xf) + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        *(ushort *)(pcVar11 + 0x11) = *(short *)(pcVar11 + 0x11) + -1 + ((ushort)iVar7 & 2);
        uVar8 = rand();
        iVar7 = (*(ushort *)(pcVar11 + 0x13) - 1) + (uVar8 & 2);
        *(short *)(pcVar11 + 0x13) = (short)iVar7;
        if (2 < iVar7 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar11 + 0x13) = 2;
        }
        if (*(short *)(pcVar11 + 0x13) < -4) {
          *(undefined2 *)(pcVar11 + 0x13) = 0xfffc;
        }
        pcVar11[0xb] = pcVar11[0xb] + -2;
        pcVar11[0xd] = pcVar11[0xd] + -1;
        pcVar11[0xc] = pcVar11[0xc] + -2;
        break;
      case 'O':
        sVar10 = (short)((int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5) >> 1);
        local_40 = CONCAT22(sVar9,sVar10);
        sVar5 = (short)((int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7) >> 1);
        local_3c = CONCAT22(local_3c._2_2_,sVar5);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + sVar10;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + sVar9;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar5;
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + sVar10;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar9;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_gnexus__80084e50;
        pcVar11[0xf] = pcVar11[0xf] + -3;
        pcVar11[0x13] = pcVar11[0x13] + -3;
        pcVar11[0x10] = pcVar11[0x10] + -4;
        pcVar11[0x14] = pcVar11[0x14] + -4;
        if (5 < (byte)pcVar11[0x15]) {
          pcVar11[0x15] = pcVar11[0x15] - 6;
        }
        break;
      case 'P':
        sVar10 = *(short *)(pcVar11 + 9) - *(short *)(pcVar11 + 3);
        sVar5 = *(short *)(pcVar11 + 0xb) - *(short *)(pcVar11 + 5);
        local_40 = CONCAT22(sVar5,sVar10);
        sVar9 = *(short *)(pcVar11 + 7);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + sVar10;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + sVar5;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + (*(short *)(pcVar11 + 0xd) - sVar9);
        sVar9 = (*(short *)(pcVar11 + 0xd) - sVar9) + -1;
        local_3c = CONCAT22(local_3c._2_2_,sVar9);
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + sVar10;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar5;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        bVar3 = (byte)(cVar2 + 1U) < 0x20;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + sVar9;
LAB_gnexus__80084e38:
        if (bVar3) {
LAB_gnexus__80084e40:
          if (pcVar11[2] != '\0') break;
        }
LAB_gnexus__80084e50:
        FUN_80053608(pcVar12);
      }
      pcVar11 = pcVar11 + 0x20;
      pcVar13 = pcVar13 + 0x20;
      result = result + 0x10;
      pcVar12 = pcVar12 + 0x20;
    } while (*pcVar11 != -1);
  }
  return;
}



void Gnexus_CreateParticle(int param_1,undefined4 param_2,int *param_3,int *param_4)

{
  bool bVar1;
  short extraout_var;
  undefined *puVar2;
  uint uVar3;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar4;
  int iVar5;
  uint uVar6;
  undefined uVar7;
  short sVar8;
  int iVar9;
  int iVar10;
  int local_98;
  int local_94;
  undefined4 local_90;
  int aiStack_88 [4];
  int local_78;
  int local_74;
  int local_70;
  int local_68;
  int local_64;
  int local_60;
  int local_58;
  int local_54;
  int local_50;
  int local_48;
  int local_40;
  int local_30;
  
  iVar10 = 0;
  if (0 < param_1) {
    local_40 = (int)param_4 >> 0x18;
    local_30 = 0;
    local_48 = param_1;
    do {
      uVar7 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar4 = (undefined *)AllocateParticleToBuffer(2);
        *puVar4 = uVar7;
        puVar4[2] = 0;
        puVar4[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar4 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar4 + 0x18),param_4);
        *(undefined2 *)(puVar4 + 0x1e) = 0;
        puVar4[10] = 0x18;
        iVar5 = rand();
        puVar4[0xf] = 0x2e;
        puVar4[0xb] = (char)iVar5;
        puVar4[0xc] = 0x80;
        puVar4[0xd] = 0x80;
        puVar4[0xe] = 0x80;
        goto LAB_gnexus__800854b4;
      case 1:
        puVar4 = (undefined *)AllocateParticleToBuffer(2);
        *puVar4 = uVar7;
        puVar4[2] = 0;
        puVar4[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar4 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar4 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar4 + 0x1e) = 0;
        if (bVar1) {
          uVar7 = 8;
        }
        else {
          uVar7 = 0x10;
        }
        puVar4[10] = uVar7;
        iVar5 = rand();
        puVar4[0xb] = (char)iVar5;
        uVar7 = 0x60;
        goto LAB_gnexus__8008549c;
      case 2:
        puVar4 = (undefined *)AllocateParticleToBuffer(2);
        *puVar4 = uVar7;
        puVar4[2] = 0;
        puVar4[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar4 + 4),param_3);
        uVar6 = rand();
        local_98 = (uVar6 & 0x3f) - 0x20;
        uVar6 = rand();
        local_94 = (uVar6 & 0x3f) - 0x20;
        local_90 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar4 + 0x18),&local_98);
        *(undefined2 *)(puVar4 + 0x1e) = 0;
        puVar4[10] = 0x20;
        iVar5 = rand();
        puVar4[0xf] = 0x2e;
        puVar4[0xb] = (char)iVar5;
        puVar4[0xc] = 0x80;
        puVar4[0xd] = 0x80;
        puVar4[0xe] = 0x80;
        goto LAB_gnexus__800854b4;
      case 9:
        puVar4 = (undefined *)AllocateParticleToBuffer(2);
        *puVar4 = uVar7;
        puVar4[2] = 0;
        puVar4[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar4 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar4 + 0x18),param_4);
        *(undefined2 *)(puVar4 + 0x1e) = 0;
        puVar4[10] = 0x18;
        iVar5 = rand();
        puVar4[0xb] = (char)iVar5;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar7 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar4[0xc] = 0x80;
              puVar4[0xd] = 0x80;
              puVar4[0xe] = 0x80;
              goto LAB_gnexus__80085124;
            }
            puVar4[0xc] = 0xe0;
          }
          else {
            puVar4[0xc] = 0xf0;
            uVar7 = 0x60;
          }
          puVar4[0xd] = uVar7;
          puVar4[0xe] = 0;
        }
        else {
          puVar4[0xc] = 0xff;
          puVar4[0xd] = 0;
          puVar4[0xe] = 0;
        }
LAB_gnexus__80085124:
        puVar4[0xf] = 0x2e;
        goto LAB_gnexus__800854b4;
      case 10:
        puVar4 = (undefined *)AllocateParticleToBuffer(3);
        *puVar4 = uVar7;
        iVar5 = rand();
        puVar4[2] = (byte)iVar5 & 0x1f;
        puVar4[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar4 + 4),(int *)&spyro);
        puVar4[10] = 0x18;
        puVar4[0xb] = 0xf;
        puVar4[0xc] = (&DAT_8006e438)[local_30];
        puVar4[0xd] = (&DAT_8006e439)[local_30];
        uVar7 = (&DAT_8006e43a)[local_30];
        puVar4[0xf] = 0x2c;
        puVar4[0x11] = 4;
        puVar4[0x10] = 0;
        puVar4[0xe] = uVar7;
        *(short *)(puVar4 + 0x18) = (short)(((local_48 - iVar10) * 0x1000) / 5);
        break;
      case 0xc:
        puVar4 = (undefined *)AllocateParticleToBuffer(2);
        *puVar4 = uVar7;
        puVar4[3] = 1;
        puVar4[0x11] = 4;
        sVar8 = *(short *)((int)param_3 + 0x36);
        if (sVar8 == 0x22) {
          Vec3Copy(aiStack_88,param_3 + 3);
        }
        else if ((sVar8 == 0xad) || (sVar8 == 0xb5)) {
          if (local_40 < 6) {
            puVar2 = (undefined *)0x8006e4e0;
            iVar5 = local_40;
            goto LAB_gnexus__800852d8;
          }
          puVar4[1] = 5;
          puVar4[0x11] = 0x16;
          Vec3Copy(aiStack_88,(int *)(local_40 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar8 == 0x78) {
            puVar2 = &DAT_8006e570;
          }
          else {
            puVar2 = &DAT_8006e498;
            iVar5 = iVar10;
LAB_gnexus__800852d8:
            puVar2 = puVar2 + iVar5 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar2,aiStack_88);
          Vec3Add(aiStack_88,aiStack_88,param_3 + 3);
        }
        Vec3ScaleDownBy4((short *)(puVar4 + 4),aiStack_88);
        puVar4[0xd] = (char)((uint)param_4 >> 8);
        puVar4[0xc] = (char)param_4;
        puVar4[0xe] = (char)((uint)param_4 >> 0x10);
        puVar4[0xf] = 0x2e;
        iVar5 = rand();
        puVar4[10] = ((byte)iVar5 & 7) + 0x10;
        iVar5 = rand();
        puVar4[0xb] = (char)iVar5;
        puVar4[0x10] = 0;
        break;
      case 0x18:
        puVar4 = (undefined *)AllocateParticleToBuffer(2);
        *puVar4 = uVar7;
        puVar4[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar4 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar4 + 0x12),param_3);
        puVar4[10] = 0x30;
        puVar4[0x11] = 8;
        *(short *)(puVar4 + 0x18) = (short)(iVar10 << 5);
        puVar4[0xc] = 0x80;
        puVar4[0xd] = 0x80;
        puVar4[0xe] = 0x80;
        uVar7 = (undefined)(iVar10 << 4);
        puVar4[0xb] = uVar7;
        puVar4[0xf] = 0x2e;
        puVar4[0x10] = 0;
        *(undefined2 *)(puVar4 + 0x1a) = 0x10;
        puVar4[0x1c] = uVar7;
        puVar4[0x1d] = (char)iVar10;
        break;
      case 0x21:
        puVar4 = (undefined *)AllocateParticleToBuffer(2);
        *puVar4 = uVar7;
        puVar4[2] = 0;
        puVar4[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_78,(int *)&spyro);
          local_70 = spyro.unkown_heightRelated;
          uVar6 = rand();
          local_78 = local_78 + -0x1f + (uVar6 & 0x3e);
          uVar6 = rand();
          local_74 = local_74 + -0x1f + (uVar6 & 0x3e);
        }
        else {
          local_78 = 0x164;
          local_74 = 0;
          local_70 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_78,&local_78);
          Vec3Add(&local_78,&local_78,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar4 + 4),&local_78);
        Vec3ScaleDownBy4((short *)(puVar4 + 0x18),param_3);
        *(undefined2 *)(puVar4 + 0x1e) = 0;
        puVar4[10] = 0x10;
        iVar5 = rand();
        puVar4[0xb] = (char)iVar5;
        uVar7 = 0x20;
LAB_gnexus__8008549c:
        puVar4[0xf] = 0x2e;
        puVar4[0xc] = uVar7;
        puVar4[0xd] = uVar7;
        puVar4[0xe] = uVar7;
LAB_gnexus__800854b4:
        puVar4[0x11] = 4;
        puVar4[0x10] = 0;
        break;
      case 0x42:
        puVar4 = (undefined *)AllocateParticleToBuffer(0);
        *puVar4 = uVar7;
        iVar5 = rand();
        puVar4[2] = (byte)iVar5 & 0xf;
        puVar4[3] = 1;
        iVar5 = rand();
        *(ushort *)(puVar4 + 4) = (short)(*param_3 >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        *(ushort *)(puVar4 + 6) = (short)(param_3[1] >> 2) + ((ushort)iVar5 & 0xf) + -8;
        iVar5 = rand();
        iVar9 = param_3[2];
        *(undefined2 *)(puVar4 + 0x10) = 0;
        *(undefined2 *)(puVar4 + 0x12) = 0;
        *(undefined2 *)(puVar4 + 0x14) = 0;
        puVar4[10] = 2;
        *(ushort *)(puVar4 + 8) = (short)(iVar9 >> 2) + ((ushort)iVar5 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar4[0xc] = 0xff;
          goto LAB_gnexus__800855c8;
        }
        uVar6 = rand();
        switch(uVar6 & 7) {
        case 0:
          puVar4[0xc] = 0xff;
          puVar4[0xd] = 0;
          puVar4[0xe] = 0;
          break;
        case 1:
          puVar4[0xc] = 0xff;
          goto LAB_gnexus__800855c8;
        case 2:
          puVar4[0xc] = 0;
LAB_gnexus__800855c8:
          puVar4[0xd] = 0xff;
          puVar4[0xe] = 0;
          break;
        case 3:
          puVar4[0xc] = 0;
          puVar4[0xd] = 0xff;
          goto LAB_gnexus__80085610;
        case 4:
          puVar4[0xc] = 0;
          puVar4[0xd] = 0;
          goto LAB_gnexus__80085610;
        case 5:
          puVar4[0xc] = 0xff;
          puVar4[0xd] = 0;
          goto LAB_gnexus__80085610;
        case 6:
          puVar4[0xc] = 0xff;
          puVar4[0xd] = 0x80;
          puVar4[0xe] = 0;
          break;
        case 7:
          puVar4[0xc] = 0;
          puVar4[0xd] = 0x80;
LAB_gnexus__80085610:
          puVar4[0xe] = 0xff;
        }
        puVar4[0xf] = 0x40;
        break;
      case 0x46:
        puVar4 = (undefined *)AllocateParticleToBuffer(1);
        *puVar4 = uVar7;
        iVar5 = rand();
        puVar4[2] = (byte)iVar5 & 0xf;
        puVar4[3] = 1;
        uVar6 = rand();
        local_68 = (int)((int)param_4 * ((uVar6 & 0xfff) - 0x800)) >> 0xc;
        uVar6 = rand();
        local_64 = (int)((int)param_4 * ((uVar6 & 0xfff) - 0x800)) >> 0xc;
        uVar6 = rand();
        local_60 = (int)((int)param_4 * (uVar6 & 0xfff)) >> 0xc;
        *(short *)(puVar4 + 4) = (short)(*param_3 >> 2) + (short)local_68 * 4;
        *(short *)(puVar4 + 6) = (short)(param_3[1] >> 2) + (short)local_64 * 4;
        sVar8 = (short)local_60;
        *(short *)(puVar4 + 8) = (short)(param_3[2] >> 2) + sVar8 * 4;
        *(short *)(puVar4 + 10) = *(short *)(puVar4 + 4) + (short)local_68 * 2;
        *(short *)(puVar4 + 0xc) = *(short *)(puVar4 + 6) + (short)local_64 * 2;
        goto LAB_gnexus__80085c4c;
      case 0x47:
        puVar4 = (undefined *)AllocateParticleToBuffer(1);
        *puVar4 = uVar7;
        iVar5 = rand();
        puVar4[2] = (byte)iVar5 & 7;
        puVar4[3] = 1;
        uVar6 = rand();
        local_68 = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_64 = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar6 = rand();
        local_60 = (int)(((uVar6 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar4 + 4) = (short)(*param_3 >> 2) + (short)local_68 * 4;
        *(short *)(puVar4 + 6) = (short)(param_3[1] >> 2) + (short)local_64 * 4;
        *(short *)(puVar4 + 8) = (short)(param_3[2] >> 2) + (short)local_60 * 4;
        *(short *)(puVar4 + 10) = *(short *)(puVar4 + 4) + (short)local_68;
        *(short *)(puVar4 + 0xc) = *(short *)(puVar4 + 6) + (short)local_64;
        puVar4[0x17] = 2;
        puVar4[0x10] = 0xe0;
        puVar4[0x11] = 0xe0;
        puVar4[0x12] = 0x60;
        puVar4[0x14] = 0xff;
        puVar4[0x15] = 0xff;
        puVar4[0x16] = 0xff;
        puVar4[0x13] = 0x50;
        *(short *)(puVar4 + 0xe) = *(short *)(puVar4 + 8) + (short)local_60;
        break;
      case 0x4d:
        puVar4 = (undefined *)AllocateParticleToBuffer(4);
        *puVar4 = uVar7;
        iVar5 = rand();
        puVar4[2] = (byte)iVar5 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar4 + 10),param_3);
        Vec3ScaleDownBy4((short *)(puVar4 + 4),param_3);
        uVar6 = rand();
        CosScaled(uVar6 & 0xfff);
        *(short *)(puVar4 + 4) = *(short *)(puVar4 + 4) + extraout_var;
        uVar3 = rand();
        SinScaled(uVar3 & 0x7ff);
        *(short *)(puVar4 + 6) = *(short *)(puVar4 + 6) + extraout_var_00;
        SinScaled(uVar6 & 0xfff);
        puVar4[0x17] = 0x7f;
        puVar4[0x11] = 0x40;
        puVar4[0x12] = 0x60;
        puVar4[0x16] = 0xc0;
        puVar4[0x13] = 0x50;
        puVar4[0x10] = 0x80;
        puVar4[0x14] = 0xff;
        puVar4[0x15] = 0x80;
        *(short *)(puVar4 + 8) = *(short *)(puVar4 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar4 = (undefined *)AllocateParticleToBuffer(0);
        *puVar4 = uVar7;
        iVar5 = rand();
        puVar4[2] = (byte)iVar5 & 0x1f;
        puVar4[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar4 + 4),param_3);
        iVar5 = rand();
        *(ushort *)(puVar4 + 4) = *(short *)(puVar4 + 4) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar4 + 6) = *(short *)(puVar4 + 6) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar4 + 8) = *(short *)(puVar4 + 8) + -0x20 + ((ushort)iVar5 & 0x3f);
        iVar5 = rand();
        *(ushort *)(puVar4 + 0x10) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar4 + 0x12) = ((ushort)iVar5 & 2) - 1;
        iVar5 = rand();
        *(ushort *)(puVar4 + 0x14) = -((ushort)iVar5 & 1);
        iVar5 = rand();
        puVar4[0xc] = (byte)iVar5 | 0x80;
        uVar6 = rand();
        uVar6 = (uVar6 & 0x7f) + 0x60;
        puVar4[0xd] = (char)uVar6;
        if ((byte)puVar4[0xc] < uVar6) {
          puVar4[0xd] = puVar4[0xc];
        }
        iVar5 = rand();
        puVar4[0xe] = ((byte)iVar5 & 0x3f) + 0x40;
        puVar4[0xf] = 0x40;
        puVar4[10] = 2;
        break;
      case 0x4f:
        puVar4 = (undefined *)AllocateParticleToBuffer(1);
        *puVar4 = uVar7;
        iVar5 = rand();
        puVar4[2] = (byte)iVar5 & 0xf;
        puVar4[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar4 + 10),param_3);
        Vec3Add(&local_68,param_3,param_4);
        uVar6 = rand();
        local_68 = local_68 + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_64 = local_64 + -0x20 + (uVar6 & 0x3f);
        uVar6 = rand();
        local_60 = local_60 + -0x40 + (uVar6 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar4 + 4),&local_68);
        puVar4[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar5 = rand();
          puVar4[0x10] = (byte)iVar5 | 0xc0;
          iVar5 = rand();
          puVar4[0x11] = ((byte)iVar5 & 0x3f) + 0xa0;
          puVar4[0x12] = 0;
          iVar5 = rand();
          puVar4[0x14] = (byte)iVar5 | 0xe0;
          iVar5 = rand();
          puVar4[0x15] = (byte)iVar5 | 0xe0;
          puVar4[0x16] = 0x80;
        }
        else {
          iVar5 = rand();
          puVar4[0x10] = (byte)iVar5 | 0xc0;
          iVar5 = rand();
          puVar4[0x11] = ((byte)iVar5 & 0x3f) + 0x40;
          iVar5 = rand();
          puVar4[0x12] = ((byte)iVar5 & 0x3f) + 0x40;
          iVar5 = rand();
          puVar4[0x14] = (byte)iVar5 | 0xe0;
          iVar5 = rand();
          puVar4[0x15] = ((byte)iVar5 & 0x1f) + 0xa0;
          iVar5 = rand();
          puVar4[0x16] = ((byte)iVar5 & 0x1f) + 0xa0;
        }
        puVar4[0x13] = 0x50;
        break;
      case 0x50:
        puVar4 = (undefined *)AllocateParticleToBuffer(1);
        *puVar4 = uVar7;
        iVar5 = rand();
        puVar4[2] = (byte)iVar5 & 0xf;
        puVar4[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar4 + 4),param_3);
        uVar6 = rand();
        local_58 = (int)((int)param_4 * ((uVar6 & 0xfff) - 0x800)) >> 0xc;
        uVar6 = rand();
        local_54 = (int)((int)param_4 * ((uVar6 & 0xfff) - 0x800)) >> 0xc;
        uVar6 = rand();
        local_50 = (int)((int)param_4 * (uVar6 & 0xfff)) >> 0xc;
        *(short *)(puVar4 + 4) = *(short *)(puVar4 + 4) + (short)local_58 * 4;
        *(short *)(puVar4 + 6) = *(short *)(puVar4 + 6) + (short)local_54 * 4;
        sVar8 = (short)local_50;
        *(short *)(puVar4 + 8) = *(short *)(puVar4 + 8) + sVar8 * 4;
        *(short *)(puVar4 + 10) = *(short *)(puVar4 + 4) + (short)local_58 * 2;
        *(short *)(puVar4 + 0xc) = *(short *)(puVar4 + 6) + (short)local_54 * 2;
LAB_gnexus__80085c4c:
        puVar4[0x17] = 2;
        puVar4[0x10] = 0xe0;
        puVar4[0x11] = 0xc0;
        puVar4[0x13] = 0x50;
        puVar4[0x12] = 0;
        puVar4[0x14] = 0xff;
        puVar4[0x15] = 0xff;
        puVar4[0x16] = 0x80;
        *(short *)(puVar4 + 0xe) = *(short *)(puVar4 + 8) + sVar8 * 2;
      }
      local_30 = local_30 + 4;
      iVar10 = iVar10 + 1;
    } while (iVar10 < local_48);
  }
  return;
}


/*
Unable to decompile 'Loot_MobyUpdateLoop'
Cause: Exception while decompiling loot::8007ad4c: process: timeout

*/

/*
Unable to decompile 'FUN_loot__800806dc'
Cause: Exception while decompiling loot::800806dc: process: timeout

*/


void MagicInitBalloonist(int **param_1)

{
  int aiStack_20 [4];
  
  gameState = GAMESTATE_BALLOONIST;
  balloonistState = 0;
  DAT_800777ec = 0;
  balloonistCursorPlacement = 0;
                    // WARNING: Read-only address (ram,0x8007784c) is written
  isInDragonState = 1;
  DAT_8007579c = 1;
  DAT_80077850 = ptr_startOfCurrentLevelMobys + **param_1 * 0x58;
  DAT_8007784c = param_1;
  DAT_80077820 = ATan2Scaled(cameraPosition.x - (int)param_1[3],cameraPosition.y - (int)param_1[4],1
                            );
  Vec3Subtract(aiStack_20,&cameraPosition.x,(int *)(param_1 + 3));
  DAT_80077824 = Vec3CalculateLengthE(aiStack_20,flag2D);
  DAT_80077828 = cameraPosition.z;
  DAT_8007783c = 0x52e;
  DAT_80077838 = (uint)*(byte *)((int)param_1 + 0x46) * 0x10 - 0x312 & 0xfff;
  DAT_80077840 = (int)param_1[5] + 0x58f;
  return;
}



void MagicBalloonistStayHere(void)

{
  ExitFairyOrBalloonist();
  spyro.headAngle.pitch = 0;
  spyro.headAngle.pad2 = 0;
  spyro.unkown1._1_1_ = 0;
  if (ptr_SparxMoby != 0) {
    *(undefined *)(ptr_SparxMoby + 0x50) = 0x10;
  }
  return;
}



void MagicBalloonistSubstateFunc(void)

{
  undefined4 uVar1;
  LevelIDS LVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int *outputArray;
  uint local_78;
  uint local_74;
  int local_70;
  short local_68;
  short local_66;
  short local_64;
  uint local_60;
  uint local_5c;
  int local_58;
  uint local_50;
  uint local_4c;
  int local_48;
  uint local_40;
  uint local_3c;
  int local_38;
  uint local_30;
  uint local_2c;
  int local_28;
  
  if (balloonistState < 4) {
    DAT_800700f8 = 0;
    DAT_800700f4 = DAT_8007784c;
    FUN_800522c0(&DAT_800700f4,0);
  }
  switch(balloonistState) {
  case 0:
    if (0x5f < DAT_800777ec) {
      iVar6 = CosScaled(DAT_80077838);
      cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar6 * DAT_8007783c >> 0xc);
      iVar6 = SinScaled(DAT_80077838);
      cameraPosition.z = DAT_80077840;
      cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar6 * DAT_8007783c >> 0xc);
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      balloonistState = 1;
      DAT_800777ec = 0;
      spyro.RelativeSparxAngle.roll = (char)((int)DAT_8007781c >> 4);
      spyro.nextAnim = '\0';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    iVar6 = SinScaled((DAT_800777ec << 0xb) / 0x60 + -0x400);
    iVar6 = iVar6 + 0x1000;
    if (DAT_800777ec == gameSpeedMultiplyer) {
      if (ptr_SparxMoby != (int *)0x0) {
        *(undefined *)(ptr_SparxMoby + 0x14) = 0;
        *(undefined *)((int)ptr_SparxMoby + 0x51) = 0;
        if (*(int *)(*ptr_SparxMoby + 0xc) != 0) {
          SetToZero();
          *(undefined4 *)(*ptr_SparxMoby + 0xc) = 0;
        }
      }
      backupSuperFlameTimer = superFlameTimer;
      Unk_UpdateSpyroAfterEvents(1);
      spyro.currentAnim = '\x01';
      spyro.nextAnim = '\x01';
      spyro.nextKeyframe = '\x01';
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = 0x4a0;
      DAT_80077810 = 0;
      DAT_80077814 = 0x164;
      Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&DAT_8007780c,&DAT_8007780c);
      Vec3Add(&DAT_8007780c,&DAT_8007780c,DAT_8007784c + 0xc);
      DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      DAT_8007781c = ATan2Scaled(local_78,local_74,1);
    }
    if (DAT_800777ec < 0x18) {
      iVar3 = SinScaled((DAT_800777ec << 0xb) / 0x18 + -0x400);
      iVar3 = iVar3 + 0x1000;
      if ((DAT_8007781c - DAT_80077818 & 0xfff) < 0x801) {
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
      }
      else {
LAB_magic__8007be64:
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 - (iVar4 * iVar3 >> 0xd);
      }
LAB_magic__8007be84:
      spyro.RelativeSparxAngle.roll = (char)(iVar3 >> 4);
      uVar1._0_1_ = '\b';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
LAB_magic__8007be94:
      spyro._88_4_ = uVar1;
    }
    else {
      if (0x47 < DAT_800777ec) {
        iVar3 = SinScaled(((DAT_800777ec + -0x48) * 0x800) / 0x18 + -0x400);
        iVar3 = iVar3 + 0x1000;
        if (DAT_800777ec - gameSpeedMultiplyer < 0x48) {
          DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
          spyro.nextAnim = '\x03';
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\b';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          DAT_8007781c = (uint)*(byte *)(DAT_8007784c + 0x46) * 0x10 - 0x800 & 0xfff;
        }
        if (0x800 < (DAT_8007781c - DAT_80077818 & 0xfff)) goto LAB_magic__8007be64;
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
        goto LAB_magic__8007be84;
      }
      iVar3 = SinScaled(((DAT_800777ec + -0x18) * 0x800) / 0x30 + -0x400);
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      Vec3Scale(&local_78,&local_78,iVar3 + 0x1000);
      Vec3ScaleDownByPowerOfTwo((int *)&local_78,0xd);
      Vec3Add(&spyro,&DAT_80077800,&local_78);
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      spyro._88_4_ = (int)uVar5 >> 1;
      if ((int)spyro._88_4_ < 4) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      uVar1._0_1_ = '\x10';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
      if (0x10 < (int)spyro._88_4_) goto LAB_magic__8007be94;
    }
    spyro.RelativeSparxAngle.yaw = '\0';
    spyro.RelativeSparxAngle.pitch = '\0';
    spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
    UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
    FUN_80049fac(1);
    FlameButAlsoNotFlame(gameSpeedMultiplyer);
    if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
    }
    else {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
    }
    iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
    iVar4 = CosScaled(iVar3);
    cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar4 * iVar7 >> 0xc);
    iVar3 = SinScaled(iVar3);
    local_78 = 0x220;
    local_70 = 0x340;
    local_74 = 0;
    cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar3 * iVar7 >> 0xc);
    cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
    Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&local_78,&local_78);
    Vec3Add(&local_78,&local_78,DAT_8007784c + 0xc);
    Vec3Subtract((int *)&local_78,(int *)&local_78,&cameraPosition.x);
    if (DAT_800777ec < 0x20) {
      local_68 = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      local_66 = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      local_64 = (short)iVar6;
      iVar6 = FUN_8001796c((int)local_68,(int)cameraAngle.roll);
      cameraAngle.roll = cameraAngle.roll + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_66,(int)cameraAngle.pitch);
      cameraAngle.pitch = cameraAngle.pitch + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_64,(int)cameraAngle.yaw);
      cameraAngle.yaw = cameraAngle.yaw + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
    }
    else {
      cameraAngle.roll = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      cameraAngle.yaw = (short)iVar6;
    }
    (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
    Maybe_SoundEffectProcessing();
    break;
  case 1:
    if (balloonistDialogue < 0x1e) {
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x51) {
        return;
      }
      iVar6 = balloonistDialogue % 6;
      if (iVar6 == 0) {
        iVar3 = balloonistDialogue + 1;
      }
      else if (iVar6 < 3) {
        if ((balloonistDialogue < 3) && (requirementArtisans < 2)) {
          (*ptr_OverlayBalloonistStayHere)();
          iVar3 = balloonistDialogue;
        }
        else if (balloonistDialogue == 0xe) {
          do {
            iVar6 = rand();
            iVar6 = iVar6 % 5;
            if ((iVar6 == 0) && (DAT_80076fec == 0)) {
              iVar3 = 0x21;
LAB_magic__8007c48c:
              balloonistDialogue = iVar3;
            }
            else {
              if ((iVar6 == 1) && (DAT_80077004 == 0)) {
                iVar3 = 0x22;
                goto LAB_magic__8007c48c;
              }
              if ((iVar6 == 2) && (DAT_80077008 == 0)) {
                iVar3 = 0x23;
                goto LAB_magic__8007c48c;
              }
              if (((iVar6 == 3) && (iVar3 = 0x24, DAT_80077018 < 2)) ||
                 ((iVar6 == 4 && (iVar3 = 0x25, DAT_80077024 == 0)))) goto LAB_magic__8007c48c;
            }
            iVar3 = balloonistDialogue;
          } while (balloonistDialogue == 0xe);
        }
        else {
          balloonistDialogue = 0x1e;
          iVar3 = balloonistDialogue;
        }
      }
      else if (iVar6 == 3) {
        iVar3 = balloonistDialogue + 2;
      }
      else {
        iVar3 = 0x1f;
        if (iVar6 == 4) {
          iVar3 = balloonistDialogue + 1;
        }
      }
      balloonistDialogue = iVar3;
      DAT_800777ec = 0;
      return;
    }
    if (balloonistDialogue == 0x1e) {
      iVar6 = 1;
      do {
        if ((&unlockedHWs)[iVar6] != '\x02') break;
        iVar6 = iVar6 + 1;
      } while (iVar6 < 6);
      if ((currentButtonOneFrame & UP_BUTTON) == 0) {
        if ((currentButtonOneFrame & DOWN_BUTTON) != 0) {
          balloonistCursorPlacement = balloonistCursorPlacement + 1;
          if (iVar6 <= balloonistCursorPlacement) {
            balloonistCursorPlacement = 0;
          }
          goto LAB_magic__8007c598;
        }
      }
      else {
        balloonistCursorPlacement = balloonistCursorPlacement + -1;
        if (balloonistCursorPlacement < 0) {
          balloonistCursorPlacement = iVar6 + -1;
        }
LAB_magic__8007c598:
        DAT_800777ec = 0x20;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        levelID = balloonistCursorPlacement * 10;
        if (levelIDPortalExit <= (int)levelID) {
          levelID = levelID + ARTISANS_ID;
        }
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)levelID / 10 + -1;
        return;
      }
    }
    else {
      if (1 < balloonistDialogue - 0x1fU) {
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
          return;
        }
        if (DAT_800777ec < 0x51) {
          return;
        }
        if ((balloonistDialogue == 0x24) || (balloonistDialogue == 0x26)) {
          balloonistCursorPlacement = 0;
          balloonistDialogue = 0x1e;
          balloonistRandomGreeting = 1;
          return;
        }
        if (balloonistDialogue == 0x25) {
          DAT_800777ec = 0;
          balloonistDialogue = 0x26;
          return;
        }
        if (balloonistDialogue == 0x21) {
          LVar2 = STONE_HILL_ID;
        }
        else if (balloonistDialogue == 0x22) {
          LVar2 = DRY_CANYON_ID;
        }
        else {
          LVar2 = CLIFF_TOWN_ID;
          if (balloonistDialogue != 0x23) goto LAB_magic__8007c874;
        }
        levelID = LVar2;
LAB_magic__8007c874:
        balloonistDropoffLocation = balloonistDialogue + -0x1b;
        DAT_800777ec = 0;
        balloonistDialogue = 0x20;
        return;
      }
      if ((currentButtonOneFrame & (UP_BUTTON|DOWN_BUTTON)) != 0) {
        DAT_800777ec = 0x20;
        balloonistCursorPlacement = 1 - balloonistCursorPlacement;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        if (balloonistDialogue != 0x1f) {
          balloonistState = 2;
          DAT_800777ec = 0;
          return;
        }
        levelID = levelIDPortalExit + ARTISANS_ID;
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)(levelIDPortalExit + ARTISANS_ID) / 10 + -1;
        return;
      }
      if (balloonistDialogue != 0x1f) {
        balloonistCursorPlacement = 0;
        balloonistDialogue = 0x1e;
        balloonistRandomGreeting = 1;
        return;
      }
    }
    (*ptr_OverlayBalloonistStayHere)();
    break;
  case 2:
    if (DAT_800777ec < 0x66) {
      iVar6 = SinScaled((DAT_800777ec * 0x800) / 0x66 + -0x400);
      iVar6 = iVar6 + 0x1000;
      if (DAT_800777ec == gameSpeedMultiplyer) {
        *(undefined *)((int)DAT_80077850 + 0x4a) = 0xff;
        DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                   cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
        Vec3Subtract((int *)&local_60,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
        DAT_80077824 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        DAT_8007782c = (int)cameraAngle.roll;
        DAT_80077830 = (int)cameraAngle.pitch;
        DAT_80077834 = (int)cameraAngle.yaw;
        DAT_80077828 = cameraPosition.z;
        DAT_8007783c = 0xe00;
        DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 - 0x480 & 0xfff;
        DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
        DAT_80077848 = *(int *)(DAT_8007784c + 0x14) + 0x488;
        Vec3Copy(&DAT_80077800,(int *)&spyro);
        Vec3Copy(&DAT_8007780c,(int *)(DAT_8007784c + 0xc));
        spyro.currentKeyfame = spyro.nextKeyframe;
        spyro.nextAnim = '\x05';
        spyro.nextKeyframe = '\0';
        spyro.maybe_AnimSpeedRelated = '\0';
        spyro.animSpeed = '\a';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (DAT_800777ec < 0x30) {
        spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec) / 0x30;
        spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec) / 0x30;
        iVar3 = SinScaled(DAT_800777ec << 5);
        spyro.position.z = DAT_80077808 + (iVar3 * 10) / 0x24;
        spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
        UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
        FUN_80049fac(1);
      }
      else {
        if (DAT_800777ec - gameSpeedMultiplyer < 0x30) {
          DAT_80077808 = DAT_80077808 + 0x325;
          DAT_80077800 = DAT_8007780c;
          DAT_80077804 = DAT_80077810;
          Vec3Copy(&DAT_8007780c,(int *)((int)DAT_80077850 + 0xc));
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\x04';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
        }
        iVar3 = DAT_800777ec + -0x36;
        if (0x35 < DAT_800777ec - gameSpeedMultiplyer) {
          spyro.animSpeed = '\a';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * iVar3) / 0x30;
          spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * iVar3) / 0x30;
          iVar3 = SinScaled(iVar3 * 0x20);
          spyro.position.z = DAT_80077808 + (iVar3 >> 2);
        }
      }
      if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_60,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      uVar5 = Vec3CalculateLengthE((int *)&local_60,flag2D);
      iVar3 = ATan2Scaled(uVar5,-local_58,1);
      local_66 = (short)iVar3;
      iVar3 = ATan2Scaled(local_60,local_5c,1);
      local_64 = (short)iVar3;
      iVar3 = FUN_8001796c((int)local_66,DAT_80077830);
      cameraAngle.pitch = (short)DAT_80077830 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      iVar3 = FUN_8001796c((int)local_64,DAT_80077834);
      cameraAngle.yaw = (short)DAT_80077834 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      *(int *)((int)DAT_80077850 + 0x14) =
           DAT_80077844 + ((DAT_80077848 - DAT_80077844) * iVar6 >> 0xd);
    }
    else {
      balloonistState = 3;
      DAT_800777ec = 0;
    }
    break;
  case 3:
    if (0x7f < DAT_800777ec) {
      DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                 cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
      Vec3Subtract((int *)&local_50,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
      DAT_80077824 = Vec3CalculateLengthE((int *)&local_50,flag2D);
      DAT_80077828 = cameraPosition.z;
      DAT_8007783c = 0x800;
      levelLoadState = 0;
      portalNumber = 0xffffffff;
      canFlyIn = 0;
      portalToExitFromInHW = 0;
      DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 + 0x390 & 0xfff;
      balloonistState = 4;
      DAT_800777ec = 0;
      DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
      LevelTransitionRelated(1);
      ArrayCopy((int *)&DAT_80071e9c,DAT_80077850,0x58);
      DAT_80077850 = &DAT_80071e9c;
      if (DAT_800785e8 < 0x80200000) {
        outputArray = (int *)(DAT_80078a44 + -0x400c);
      }
      else {
        outputArray = (int *)&DAT_801fe000;
      }
      ArrayCopy(outputArray,DAT_800769f8,0x4000);
      iVar3 = (int)DAT_800769f8;
      iVar6 = outputArray[0xe] - (int)DAT_800769f8;
      DAT_800769f8 = outputArray;
      outputArray[0xe] = (int)outputArray + iVar6;
      *(int *)(DAT_800769f8[0xe] + 0x14) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x14) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x18) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x18) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x24) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x24) - iVar3);
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      spyro.position.x = DAT_8007780c;
      DAT_80077828 = cameraPosition.z;
      spyro.position.y = DAT_80077810;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      spyro.nextAnim = '\0';
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.unkown3 = '\x03';
      spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    }
    if (DAT_800777ec < 0x40) {
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0xc00);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    else {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * 0x4b;
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0x800);
      cameraPosition.z = DAT_80077828 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    Vec3Subtract((int *)&local_50,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_50,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_48,1);
    cameraAngle.pitch = (short)iVar6;
    local_30 = local_50;
    local_2c = local_4c;
    goto LAB_magic__8007d650;
  case 5:
    if (levelLoadState < 0xd) {
      LevelTransitionRelated(1);
    }
    if (DAT_800777ec < 0x100) {
      iVar6 = SinScaled(((DAT_800777ec << 0xb) >> 8) + -0x400);
      iVar6 = iVar6 + 0x1000;
      if ((DAT_80077820 - DAT_80077838 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_8007783c + ((int)((DAT_80077824 - DAT_8007783c) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077840 + ((DAT_80077828 - DAT_80077840) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_40,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      local_38 = (local_38 + 0x200) - (iVar6 >> 4);
      uVar5 = Vec3CalculateLengthE((int *)&local_40,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_38,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_40,local_3c,1);
      cameraAngle.yaw = (short)iVar6;
    }
    else if (levelLoadState == 0xd) {
      balloonistState = 6;
      DAT_800777ec = 0;
      LevelTransitionRelated(1);
    }
    break;
  case 6:
    if (0x7f < DAT_800777ec) {
      balloonistState = 7;
      DAT_800777ec = 0;
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = *(int *)(&DAT_8006eadc + balloonistDropoffLocation * 8);
      DAT_80077810 = *(int *)(&DAT_8006eae0 + balloonistDropoffLocation * 8);
      DAT_80077814 = spyro.position.z;
      iVar6 = MobyUpdatePosition(&DAT_8007780c,0x10000);
      DAT_80077814 = iVar6 + 0x164;
      spyro.nextAnim = '\x05';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x06';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      DAT_80077828 = cameraPosition.z;
    }
    if (DAT_800777ec < 0x40) {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * -0x4b;
      iVar6 = SinScaled(DAT_800777ec * -0x10);
      cameraPosition.z = DAT_80077828 + (iVar6 * 3 >> 2);
    }
    else {
      if (DAT_800777ec - gameSpeedMultiplyer < 0x40) {
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14) + -0x4b;
      }
      iVar6 = SinScaled(DAT_800777ec * -0x10 + 0x400);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + (iVar6 * 3 >> 2);
    }
    Vec3Subtract((int *)&local_30,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_30,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_28,1);
    cameraAngle.pitch = (short)iVar6;
LAB_magic__8007d650:
    iVar6 = ATan2Scaled(local_30,local_2c,1);
    cameraAngle.yaw = (short)iVar6;
    spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    spyro.RelativeSparxAngle.roll = *(char *)((int)DAT_80077850 + 0x46) + -0x80;
    break;
  case 7:
    if (DAT_800777ec < 0x40) {
      spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec >> 6);
      spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec >> 6);
      iVar6 = SinScaled(DAT_800777ec * 0x18 + 0x200);
      spyro.position.z = DAT_80077814 + (iVar6 * (DAT_80077808 - DAT_80077814)) / 0xb50;
      spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      FUN_80049fac(1);
      if (0x1f < DAT_800777ec) {
        *(int *)((int)DAT_80077850 + 0x14) =
             *(int *)((int)DAT_80077850 + 0x14) + DAT_800777ec * gameSpeedMultiplyer;
      }
    }
    else {
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      Unk_UpdateSpyroAfterEvents(1);
      spyro.isMovementLocked = 0x10;
      DAT_80076ea0 = &spyro;
      maybe_cameraRelated = 0;
      unk_cameraRelatedLocking = 0;
      flyInAnimation = &DAT_8006c8bc;
      unk_camera_related_angle = spyro.angle.yaw;
      CameraRotation(&cameraPosition);
      ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
      DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
      ChangeFlyInCamera();
      Maybe_HudInPauseMenu(0);
      gameState = GAMESTATE_GAMEPLAY;
      DAT_8007579c = 1;
      isInDragonState = 0;
      Maybe_ResetHudTimers();
    }
  }
                    // WARNING: Read-only address (ram,0x80076fec) is written
                    // WARNING: Read-only address (ram,0x80077004) is written
                    // WARNING: Read-only address (ram,0x80077008) is written
                    // WARNING: Read-only address (ram,0x80077018) is written
                    // WARNING: Read-only address (ram,0x80077024) is written
                    // WARNING: Read-only address (ram,0x8007784c) is written
  return;
}



void MagicBalloonistVisualsFunc(void)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  byte *text;
  char *pcVar6;
  undefined *puVar7;
  uint uVar8;
  uint uVar9;
  byte **ppbVar10;
  int local_e0;
  undefined4 local_dc;
  undefined4 local_d8;
  int local_d0;
  undefined4 local_cc;
  undefined4 local_c8;
  byte abStack_c0 [32];
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int local_80;
  int local_7c;
  undefined4 local_78;
  int local_70;
  int local_6c;
  undefined4 local_68;
  int local_60;
  int local_5c;
  undefined4 local_58;
  int local_50;
  int local_4c;
  undefined4 local_48;
  byte abStack_40 [40];
  
  uVar9 = ptr_hudMobys;
  if (balloonistState < 4) {
    if (balloonistState < 2) {
      sprintf((char *)abStack_c0,s__s_THE_BALLOONIST_magic__8007aa5c,
              (&PTR_s_RETURN_HOME_8006f880)[levelIDPortalExit / 10]);
      iVar2 = strlen((char *)abStack_c0);
      local_e0 = iVar2 * -8 + 0x108;
      local_dc = 0xcc;
      local_d8 = 0x1100;
      local_d0 = 0x10;
      local_cc = 1;
      local_c8 = 0x1400;
      DrawTextAll(abStack_c0,&local_e0,&local_d0,0x12,'\v');
      iVar2 = uVar9 - 0x58;
      if ((int)ptr_hudMobys <= iVar2) {
        iVar3 = 0;
        do {
          *(char *)(iVar2 + 0x46) =
               (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
          iVar2 = iVar2 + -0x58;
          iVar3 = iVar3 + 0xc;
        } while ((int)ptr_hudMobys <= iVar2);
      }
    }
    iVar2 = balloonistState;
    if (balloonistState == 1) {
      if (balloonistDialogue - 0x1eU < 3) {
        if (balloonistDialogue == 0x1e) {
          local_70 = 0xe;
          local_68 = 0x1600;
          local_78 = 0x1400;
          local_80 = 0xf0;
          local_6c = balloonistState;
          local_7c = 0x24;
          if (balloonistRandomGreeting == 0) {
            pcVar6 = s_HOP_ON__SPYRO__magic__8007aa70;
          }
          else if (balloonistRandomGreeting == 1) {
            pcVar6 = s_NEED_A_LIFT__magic__8007aa80;
          }
          else {
            pcVar6 = s_WHERE_TO__SPYRO__magic__8007aa90;
          }
          DrawTextAll((byte *)pcVar6,&local_80,&local_70,0x10,'\v');
          local_80 = 0x110;
          uVar9 = ptr_hudMobys - 0x58;
          local_7c = local_7c + 0x14;
          DrawTextAll((byte *)s_STAY_HERE_magic__8007aaa4,&local_80,&local_70,0x10,'\v');
          local_7c = local_7c + 0xf;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          iVar3 = 1;
          iVar2 = 0;
          do {
            if ((levelIDPortalExit / 10 + -1 != iVar2) && ((&unlockedHWs)[iVar2] == '\x02')) {
              local_80 = 0x110;
              uVar9 = ptr_hudMobys - 0x58;
              DrawTextAll((&PTR_s_ARTISANS_8006f7d4)[iVar2],&local_80,&local_70,0x10,'\v');
              local_7c = local_7c + 0xf;
              if ((balloonistCursorPlacement == iVar3) && (ptr_hudMobys <= uVar9)) {
                iVar4 = 0;
                do {
                  *(char *)(uVar9 + 0x46) =
                       (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar4 & 0xff) + 0x40] >> 8);
                  uVar9 = uVar9 - 0x58;
                  iVar4 = iVar4 + 0xc;
                } while (ptr_hudMobys <= uVar9);
              }
              iVar3 = iVar3 + 1;
            }
            iVar2 = iVar2 + 1;
          } while (iVar2 < 6);
          DrawTextBox(0xe0,0x1d8,0x19,iVar3 * 0xf + 0x33);
          DrawLine(0xf0,0x2e,0x1a0,0x2e);
          local_80 = 0xf4;
          local_78 = 0x1100;
          local_7c = balloonistCursorPlacement * 0xf + 0x36;
          DrawArrow(&local_80,DAT_800777ec,0);
        }
        else if (balloonistDialogue - 0x1fU < 2) {
          DrawTextBox(0x48,0x1b8,0x1c,0x66);
          DrawLine(100,0x37,0x184,0x37);
          local_60 = 0x60;
          local_58 = 0x1100;
          local_5c = balloonistCursorPlacement * 0x13 + 0x43;
          DrawArrow(&local_60,DAT_800777ec,0);
          local_50 = 0x10;
          local_48 = 0x1400;
          local_5c = 0x2c;
          local_4c = iVar2;
          local_58 = 0x1100;
          local_60 = 0x60;
          if (balloonistDialogue == 0x1f) {
            pcVar6 = s_ARE_YOU_READY_TO_GO__magic__8007aab0;
          }
          else {
            pcVar6 = s_WOULD_YOU_LIKE_TO_GO__magic__8007aac8;
          }
          DrawTextAll((byte *)pcVar6,&local_60,&local_50,0x12,'\v');
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          local_5c = local_5c + 0x19;
          DrawTextAll((byte *)s_STAY_HERE_magic__8007aaa4,&local_60,&local_50,0x12,'\v');
          local_5c = local_5c + 0x13;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          if (balloonistDialogue == 0x1f) {
            puVar7 = (&PTR_s_ARTISANS_8006f7d4)[levelIDPortalExit / 10];
          }
          else {
            puVar7 = (&PTR_s_PEACE_KEEPERS_8006f7d8)[levelID + ((int)levelID / 10) * -4];
          }
          sprintf((char *)abStack_40,s_GO_TO__s_magic__8007aae0,puVar7);
          DrawTextAll(abStack_40,&local_60,&local_50,0x12,'\v');
          if ((balloonistCursorPlacement == 1) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
        }
      }
      else {
        DrawTextBox(0x48,0x1b8,0x1c,0x68);
        uVar9 = ptr_hudMobys;
        local_9c = 0x2c;
        local_98 = 0x1100;
        local_90 = 0x10;
        local_8c = iVar2;
        local_88 = 0x1400;
        uVar8 = (uint)(byte)(&DAT_8006f89c)[balloonistDialogue];
        if (uVar8 < (byte)(&DAT_8006f89d)[balloonistDialogue]) {
          ppbVar10 = &PTR_s_IF_YOU_PROVE_YOUR_8006f8c4 + uVar8;
          do {
            local_a0 = 0x5e;
            text = *ppbVar10;
            ppbVar10 = ppbVar10 + 1;
            DrawTextAll(text,&local_a0,&local_90,0x12,'\v');
            local_9c = local_9c + 0x12;
            uVar8 = uVar8 + 1;
          } while ((int)uVar8 < (int)(uint)(byte)(&DAT_8006f89d)[balloonistDialogue]);
        }
        if (((int)DAT_800777ec < 0x50) &&
           (uVar8 = uVar9 + DAT_800777ec * -0x58, (int)ptr_hudMobys <= (int)uVar8)) {
          ptr_hudMobys = uVar8;
        }
        iVar2 = uVar9 - 0x58;
        if ((int)ptr_hudMobys <= iVar2) {
          iVar3 = 0;
          do {
            *(char *)(iVar2 + 0x46) =
                 (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
            iVar2 = iVar2 + -0x58;
            iVar3 = iVar3 + 0xc;
          } while ((int)ptr_hudMobys <= iVar2);
        }
        if (0x4f < (int)DAT_800777ec) {
          local_a0 = 0x19c;
          local_9c = 0x60;
          local_98 = 0x1100;
          DrawArrow(&local_a0,DAT_800777ec,0);
        }
      }
    }
    Maybe_DrawingMobyParticlesRelated();
    RenderObjs();
    if (balloonistState < 2) {
      ptr_maybeTextObj = 0;
      CopyHudToShaded();
      DrawShadedMobys();
    }
  }
  else {
    Maybe_DrawingMobyParticlesRelated();
    iVar2 = DAT_80077850;
    piVar5 = &DAT_8006fcf4;
    if (DAT_8006fcf4 != 0) {
      piVar1 = &DAT_8006fcf8;
      do {
        piVar5 = piVar1;
        piVar1 = piVar5 + 1;
      } while (*piVar5 != 0);
    }
    piVar5[1] = 0;
    *piVar5 = iVar2;
    RenderObjs();
  }
  RenderWorld();
  RenderAllSkyBoxes();
  RenderAllParticles();
  return;
}


/*
Unable to decompile 'Magic_UpdateMobys'
Cause: Exception while decompiling magic::8007e398: process: timeout

*/


int ** FUN_magic__8008b2c0(int param_1,int param_2)

{
  char cVar1;
  undefined uVar2;
  byte bVar3;
  int **ppiVar4;
  int iVar5;
  int iVar6;
  short sVar7;
  uint uVar8;
  uint uVar9;
  Spyro *pSVar10;
  int *piVar11;
  Vec2 *vecA;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar4 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar4 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar4 + 0x56) = (char)uVar8;
  if (param_1 < 0x102) {
    if (0xfe < param_1) {
LAB_magic__8008b990:
      piVar11 = *ppiVar4;
      InitArrayRelated(ppiVar4);
      *(undefined *)(ppiVar4 + 0x14) = 0x20;
      Vec3Copy((int *)(ppiVar4 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppiVar4);
      uVar8 = rand();
      uVar9 = rand();
      uVar9 = uVar9 & 0x7ff;
      iVar5 = CosScaled(uVar9);
      iVar6 = CosScaled(uVar8 & 0xfff);
      *(short *)piVar11 = (short)((iVar5 >> 5) * iVar6 >> 0xc);
      iVar5 = CosScaled(uVar9);
      iVar6 = SinScaled(uVar8 & 0xfff);
      *(short *)((int)piVar11 + 2) = (short)((iVar5 >> 5) * iVar6 >> 0xc);
      iVar5 = SinScaled(uVar9);
      *(short *)(piVar11 + 1) = (short)(iVar5 >> 5);
      if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
        *(short *)piVar11 = *(short *)piVar11 + (short)(spyro.airMomentum.x >> 6);
        *(short *)((int)piVar11 + 2) =
             *(short *)((int)piVar11 + 2) + (short)(spyro.airMomentum.y >> 6);
        *(short *)(piVar11 + 1) = *(short *)(piVar11 + 1) + (short)(spyro.airMomentum.z >> 6);
      }
      ppiVar4[3] = ppiVar4[3] + *(short *)piVar11;
      ppiVar4[4] = ppiVar4[4] + *(short *)((int)piVar11 + 2);
      ppiVar4[5] = ppiVar4[5] + *(short *)(piVar11 + 1);
      iVar5 = rand();
      *(ushort *)((int)piVar11 + 6) = (ushort)iVar5 & 0xf;
      iVar5 = rand();
      *(ushort *)(piVar11 + 2) = (ushort)iVar5 & 0xf;
      iVar5 = rand();
      *(ushort *)((int)piVar11 + 10) = (ushort)iVar5 & 0xf;
      piVar11[4] = *(int *)(param_2 + 0x14) + -0x40;
      uVar8 = rand();
      piVar11[3] = 0x40 - (uVar8 & 0xf);
      if (2 < *(ushort *)((int)ppiVar4 + 0x36) - 0x135) {
        return ppiVar4;
      }
      bVar3 = *(byte *)((int)ppiVar4 + 0x4b);
      ppiVar4[0x13] = (int *)0xa18618;
LAB_magic__8008bb30:
      *(byte *)((int)ppiVar4 + 0x4b) = bVar3 | 0x80;
      return ppiVar4;
    }
    if (param_1 < 0x46) {
      if (0x42 < param_1) goto LAB_magic__8008b990;
      if (param_1 == 0x10) {
        piVar11 = *ppiVar4;
        InitArrayRelated(ppiVar4);
        FUN_800526a8(ppiVar4);
        Vec3Copy((int *)(ppiVar4 + 3),(int *)(param_2 + 0xc));
        ppiVar4[5] = ppiVar4[5] + 0x80;
        Vec3Copy(piVar11 + 1,(int *)(ppiVar4 + 3));
        *(undefined *)((int)piVar11 + 0x13) = 0;
        *(undefined *)((int)piVar11 + 0x12) = 0;
        *(short *)(piVar11 + 5) = 0x708;
        return ppiVar4;
      }
      if (param_1 < 0x11) {
        if (param_1 == 0xe) goto LAB_magic__8008b7f0;
        if (param_1 == 0xf) {
          piVar11 = *ppiVar4;
          InitArrayRelated(ppiVar4);
          piVar11[2] = 0x8c;
          *(undefined *)(piVar11 + 4) = 3;
          *(undefined *)(piVar11 + 5) = 0xff;
          *piVar11 = 0;
          piVar11[1] = 0;
          *(undefined *)((int)piVar11 + 0xe) = 0;
          *(undefined *)((int)piVar11 + 0xf) = 0;
          *(undefined *)((int)piVar11 + 0x11) = 0;
          *(undefined *)((int)piVar11 + 0x12) = 0;
          *(undefined *)((int)piVar11 + 0x13) = 0;
          *(undefined *)((int)ppiVar4 + 0x49) = 2;
          *(undefined *)(ppiVar4 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar4 + 0x52) = 0x10;
          *(undefined *)(ppiVar4 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar4 + 0x45) = 0;
          *(undefined *)((int)ppiVar4 + 0x46) = 0;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar4 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800526a8(ppiVar4);
          bVar3 = *(byte *)((int)ppiVar4 + 0x4b);
          *(undefined *)(ppiVar4 + 0x13) = 0;
          *(undefined *)((int)ppiVar4 + 0x4d) = 0;
          *(undefined *)((int)ppiVar4 + 0x4e) = 0;
          *(undefined *)((int)ppiVar4 + 0x4f) = 1;
          goto LAB_magic__8008bb30;
        }
      }
      else {
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar4);
          *(undefined *)(ppiVar4 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar4 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar4 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar4);
          return ppiVar4;
        }
        if (param_1 == 0x26) {
          piVar11 = *ppiVar4;
          InitArrayRelated(ppiVar4);
          vecA = (Vec2 *)(ppiVar4 + 3);
          Vec3Copy((int *)vecA,(int *)(param_2 + 0xc));
          if (*(short *)(param_2 + 0x36) == 0x26) {
            uVar2 = *(undefined *)(param_2 + 0x46);
            *(undefined *)(ppiVar4 + 0x12) = 3;
            *(undefined *)(ppiVar4 + 0x10) = 0;
            *(undefined *)((int)ppiVar4 + 0x46) = uVar2;
            uVar2 = *(undefined *)
                     (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar4 + 0x36)] + 0x44) + 0xc);
            *(undefined *)(ppiVar4 + 0xf) = 3;
            *(undefined *)((int)ppiVar4 + 0x3d) = 3;
            *(undefined *)((int)ppiVar4 + 0x41) = uVar2;
            iVar5 = 3;
          }
          else {
            if (5 < *(byte *)(param_2 + 0x3f)) {
              iVar5 = CosScaled((uint)*(byte *)(param_2 + 0x46) << 4);
              ppiVar4[3] = (int *)((int)ppiVar4[3] + (iVar5 >> 2));
              iVar5 = SinScaled((uint)*(byte *)(param_2 + 0x46) << 4);
              ppiVar4[4] = (int *)((int)ppiVar4[4] + (iVar5 >> 2));
              ppiVar4[5] = ppiVar4[5] + 0x4b;
              *(undefined *)((int)ppiVar4 + 0x46) = *(undefined *)(param_2 + 0x46);
              uVar8 = Vec2EstimateOctagonalDistance(vecA,(Vec2 *)&spyro);
              iVar5 = ATan2Scaled(uVar8,spyro.position.z - (int)ppiVar4[5],0);
              uVar8 = iVar5 - (uint)*(byte *)(param_2 + 0x45) & 0xff;
              if (0x80 < uVar8) {
                uVar8 = uVar8 - 0x100;
              }
              uVar9 = uVar8;
              if ((int)uVar8 < -0x10) {
                uVar9 = 0xfffffff0;
              }
              cVar1 = (char)uVar9;
              if (0x10 < (int)uVar8) {
                cVar1 = '\x10';
              }
              *(byte *)((int)ppiVar4 + 0x45) = *(byte *)(param_2 + 0x45) + cVar1;
              *piVar11 = 0x80;
              *(undefined *)(ppiVar4 + 0x12) = 2;
              *(undefined *)(ppiVar4 + 0x10) = 0;
              uVar2 = *(undefined *)
                       (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar4 + 0x36)] + 0x40) + 0xc);
              *(undefined *)(ppiVar4 + 0xf) = 2;
              *(undefined *)((int)ppiVar4 + 0x3d) = 2;
              *(undefined *)((int)ppiVar4 + 0x41) = uVar2;
              (*ptr_OverlayCreateParticle)(4,7,vecA,0x10);
              goto LAB_magic__8008be64;
            }
            if (*(byte *)(param_2 + 0x3f) < 2) {
              ppiVar4[5] = ppiVar4[5] + 0x60;
              *(undefined *)((int)ppiVar4 + 0x46) = *(undefined *)(param_2 + 0x46);
            }
            else {
              ppiVar4[5] = ppiVar4[5] + 0x4b;
              uVar2 = *(undefined *)(param_2 + 0x46);
              *(undefined *)(ppiVar4 + 0x12) = 1;
              *(undefined *)(ppiVar4 + 0x10) = 0;
              *(undefined *)((int)ppiVar4 + 0x46) = uVar2;
              uVar2 = *(undefined *)
                       (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar4 + 0x36)] + 0x3c) + 0xc);
              *(undefined *)(ppiVar4 + 0xf) = 1;
              *(undefined *)((int)ppiVar4 + 0x3d) = 1;
              *(undefined *)((int)ppiVar4 + 0x41) = uVar2;
            }
            iVar5 = 2;
          }
          *piVar11 = iVar5;
          goto LAB_magic__8008be64;
        }
      }
    }
    else if (param_1 < 0x58) {
      if (0x52 < param_1) {
LAB_magic__8008b7f0:
        piVar11 = *ppiVar4;
        InitArrayRelated(ppiVar4);
        *piVar11 = 0;
        piVar11[1] = 0;
        piVar11[2] = 0x8c;
        *(undefined *)((int)piVar11 + 0xe) = 0;
        *(undefined *)((int)piVar11 + 0xf) = 0;
        *(undefined *)((int)piVar11 + 0x11) = 0;
        *(undefined *)((int)piVar11 + 0x12) = 0;
        *(undefined *)((int)piVar11 + 0x13) = 0;
        uVar2 = 3;
        if (*(short *)(param_2 + 0x36) == 0xd) {
          uVar2 = 2;
        }
        *(undefined *)(piVar11 + 4) = uVar2;
        *(undefined *)(piVar11 + 5) = 0xff;
        *(undefined *)(ppiVar4 + 0x14) = 0x18;
        *(undefined *)((int)ppiVar4 + 0x52) = 0x40;
        *(undefined *)((int)ppiVar4 + 0x49) = 2;
        *(undefined *)(ppiVar4 + 0x11) = 0x20;
        *(undefined *)((int)ppiVar4 + 0x45) = 0;
        *(undefined *)((int)ppiVar4 + 0x46) = 0;
        Vec3Copy((int *)(ppiVar4 + 3),(int *)(param_2 + 0xc));
        FUN_800529cc(ppiVar4);
        ppiVar4[7] = (int *)0xffffffff;
        Vec3Copy(aiStack_48,(int *)(ppiVar4 + 3));
        local_40 = local_40 + 0x400;
        MobyUpdatePosition(aiStack_48,0x10000);
        FUN_800533d0(ppiVar4);
        *(undefined *)(ppiVar4 + 0x13) = 0;
        *(undefined *)((int)ppiVar4 + 0x4d) = 0;
        *(undefined *)((int)ppiVar4 + 0x4e) = 0;
        if (*(short *)((int)ppiVar4 + 0x36) == 0xe) {
          *(undefined *)((int)ppiVar4 + 0x4f) = 0xc;
        }
        sVar7 = *(short *)((int)ppiVar4 + 0x36);
        if (sVar7 == 0x53) {
          *(undefined *)((int)ppiVar4 + 0x4f) = 1;
          sVar7 = *(short *)((int)ppiVar4 + 0x36);
        }
        if (sVar7 == 0x54) {
          *(undefined *)((int)ppiVar4 + 0x4f) = 2;
        }
        sVar7 = *(short *)((int)ppiVar4 + 0x36);
        if (sVar7 == 0x55) {
          *(undefined *)((int)ppiVar4 + 0x4f) = 3;
          sVar7 = *(short *)((int)ppiVar4 + 0x36);
        }
        if (sVar7 == 0x56) {
          *(undefined *)((int)ppiVar4 + 0x4f) = 4;
        }
        if (*(short *)((int)ppiVar4 + 0x36) != 0x57) {
          return ppiVar4;
        }
        *(undefined *)((int)ppiVar4 + 0x4f) = 5;
        return ppiVar4;
      }
      if (param_1 == 0x4c) goto LAB_magic__8008be10;
    }
    else {
      if (param_1 == 0x78) {
        piVar11 = *ppiVar4;
        InitArrayRelated(ppiVar4);
        FUN_800526a8(ppiVar4);
        *(undefined *)((int)ppiVar4 + 0x49) = 0;
        *piVar11 = 0;
        *(undefined2 *)(piVar11 + 2) = 0;
        *(undefined2 *)((int)piVar11 + 6) = 0;
        *(undefined2 *)(piVar11 + 1) = 0;
        piVar11[3] = 0;
        piVar11[4] = 0;
        if (param_2 == 0) {
          return ppiVar4;
        }
        Vec3Copy((int *)(ppiVar4 + 3),(int *)(param_2 + 0xc));
        return ppiVar4;
      }
      if (param_1 == 0xfb) {
        piVar11 = *ppiVar4;
        InitArrayRelated(ppiVar4);
        *(undefined *)(ppiVar4 + 0x14) = 0x20;
        *(undefined *)((int)ppiVar4 + 0x52) = 0xff;
        FUN_800529cc(ppiVar4);
        *(undefined *)(ppiVar4 + 0x13) = 0;
        *(undefined *)((int)ppiVar4 + 0x4d) = 0;
        *(undefined *)((int)ppiVar4 + 0x4e) = 0;
        *(undefined *)((int)ppiVar4 + 0x4f) = 0xe;
        if (dragonState == 3) {
          uVar2 = 0x14;
        }
        else {
          uVar2 = 0x30;
          if (dragonState != 1) goto LAB_magic__8008bb9c;
        }
        *(undefined *)((int)ppiVar4 + 0x57) = uVar2;
LAB_magic__8008bb9c:
        uVar8 = rand();
        iVar5 = (uVar8 & 7) * 4;
        local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar5);
        local_34 = 0;
        local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar5);
        Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
        uVar8 = rand();
        local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
        uVar8 = rand();
        local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
        Vec3Add(ppiVar4 + 3,param_2 + 0xc,&local_38);
        Vec3Copy(piVar11,&local_38);
        Vec3ScaleDownByPowerOfTwo(piVar11,2);
        uVar8 = rand();
        *piVar11 = *piVar11 + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar11[1] = piVar11[1] + -0x7f + (uVar8 & 0xff);
        uVar8 = rand();
        piVar11[2] = piVar11[2] + -0x7f + (uVar8 & 0xff);
        iVar5 = rand();
        *(char *)(ppiVar4 + 0x11) = (char)iVar5;
        iVar5 = rand();
        *(char *)((int)ppiVar4 + 0x45) = (char)iVar5;
        iVar5 = rand();
        *(char *)((int)ppiVar4 + 0x46) = (char)iVar5;
        iVar5 = rand();
        *(byte *)(piVar11 + 4) = (byte)iVar5 & 0xf;
        iVar5 = rand();
        *(byte *)((int)piVar11 + 0x11) = (byte)iVar5 & 0xf;
        iVar5 = rand();
        *(byte *)((int)piVar11 + 0x12) = (byte)iVar5 & 0xf;
        piVar11[3] = *(int *)(param_2 + 0x14);
        iVar5 = rand();
        *(byte *)((int)piVar11 + 0x13) = ((byte)iVar5 & 3) + 0x10;
        return ppiVar4;
      }
    }
LAB_magic__8008be38:
    InitArrayRelated(ppiVar4);
    pSVar10 = (Spyro *)(param_2 + 0xc);
    if (param_2 == 0) {
LAB_magic__8008be50:
      pSVar10 = &spyro;
    }
  }
  else {
    if (param_1 != 0x188) {
      if (param_1 < 0x189) {
        if (param_1 == 0x115) {
LAB_magic__8008bcfc:
          piVar11 = *ppiVar4;
          InitArrayRelated(ppiVar4);
          FUN_800529cc(ppiVar4);
          *(undefined *)((int)ppiVar4 + 0x4f) = 2;
          *(undefined *)(ppiVar4 + 0x13) = 0;
          *(undefined *)((int)ppiVar4 + 0x4d) = 0;
          *(undefined *)((int)ppiVar4 + 0x4e) = 0;
          *piVar11 = 0x40;
          return ppiVar4;
        }
        if (param_1 < 0x116) {
          if ((param_1 < 0x10e) && (0x103 < param_1)) goto LAB_magic__8008bcfc;
        }
        else if (0x134 < param_1) {
          if (param_1 < 0x138) goto LAB_magic__8008b990;
          if (param_1 == 0x147) goto LAB_magic__8008bcfc;
        }
      }
      else if (param_1 < 0x1aa) {
        if (0x1a6 < param_1) goto LAB_magic__8008b990;
        if (param_1 == 0x18e) {
          InitArrayRelated(ppiVar4);
          *(undefined *)(ppiVar4 + 0x14) = 0xff;
          ppiVar4[3] = (int *)0x1cc;
          ppiVar4[4] = (int *)&DAT_00000028;
          ppiVar4[5] = (int *)0x1000;
          FUN_800529cc(ppiVar4);
          *(undefined *)((int)ppiVar4 + 0x47) = 0x20;
          *(undefined *)(ppiVar4 + 0x13) = 0;
          *(undefined *)((int)ppiVar4 + 0x4d) = 0;
          *(undefined *)((int)ppiVar4 + 0x4e) = 0;
          *(undefined *)((int)ppiVar4 + 0x4f) = 0;
          return ppiVar4;
        }
        if (param_1 == 0x195) goto LAB_magic__8008bd9c;
      }
      else {
        if (param_1 < 0x1c4) {
LAB_magic__8008be10:
          InitArrayRelated(ppiVar4);
          *(undefined *)(ppiVar4 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar4 + 0x52) = 0xff;
          FUN_800529cc(ppiVar4);
          return ppiVar4;
        }
        if (param_1 == 0x1dd) {
LAB_magic__8008bd9c:
          InitArrayRelated(ppiVar4);
          if (param_2 == 0) {
            pSVar10 = &spyro;
          }
          else {
            pSVar10 = (Spyro *)(param_2 + 0xc);
          }
          Vec3Copy((int *)(ppiVar4 + 3),(int *)pSVar10);
          ppiVar4[5] = ppiVar4[5] + 0x80;
          piVar11 = (int *)MobyUpdatePosition(ppiVar4 + 3,0x800);
          iVar5 = (int)piVar11 - (int)ppiVar4[5];
          if (iVar5 < 0) {
            iVar5 = -iVar5;
          }
          if (iVar5 < 0x800) {
            ppiVar4[5] = piVar11;
          }
          else {
            ppiVar4[5] = ppiVar4[5] + -0x80;
          }
          goto LAB_magic__8008be64;
        }
      }
      goto LAB_magic__8008be38;
    }
    InitArrayRelated(ppiVar4);
    *(undefined *)((int)ppiVar4 + 0x47) = 5;
    if (param_2 == 0) goto LAB_magic__8008be50;
    pSVar10 = (Spyro *)(param_2 + 0xc);
  }
  Vec3Copy((int *)(ppiVar4 + 3),(int *)pSVar10);
LAB_magic__8008be64:
  FUN_800526a8(ppiVar4);
  return ppiVar4;
}



void Magic_UpdateParticles(int param_1)

{
  byte bVar1;
  bool bVar2;
  char cVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  short sVar9;
  short sVar10;
  int iVar11;
  char *pcVar12;
  char *pcVar13;
  short *result;
  char *pcVar14;
  int aiStack_88 [4];
  int local_78;
  int local_74;
  int local_70;
  int local_68;
  int local_64;
  int local_60;
  undefined4 local_58;
  undefined4 local_54;
  int local_50;
  int local_4c;
  int local_48;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    cVar3 = (char)param_1;
    pcVar12 = ptr_headOfParticleBuffer + 1;
    pcVar14 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar13 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar13) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar3 * '\x02';
        pcVar12[0xc] = pcVar12[0xc] + cVar3 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar3 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar3 * -4;
        goto LAB_magic__8008d264;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar3 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar3 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar3 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar12[0xd] = pcVar12[0xd] + cVar3 * -4;
        goto LAB_magic__8008d264;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar3 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar3 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar3 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar3 * -4;
        goto LAB_magic__8008d264;
      case '\a':
        if ((0x18 < (byte)pcVar12[1]) || (pcVar12[2] == '\0')) goto LAB_magic__8008d27c;
        bVar1 = pcVar12[1];
        pcVar12[10] = pcVar12[10] + pcVar12[0x1d];
        if (bVar1 < 0xd) {
          cVar4 = bVar1 << 2;
        }
        else {
          cVar4 = ('\x18' - bVar1) * '\x04';
        }
        pcVar12[9] = cVar4;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0x17);
        pcVar12[1] = pcVar12[1] + '\x01';
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x19);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x1b);
        break;
      case '\b':
        Vec3ShortScaleUpBy4(aiStack_88,result);
        if (pcVar12[2] != '\0') {
          Vec3Copy(&local_78,
                   (int *)(ptr_startOfCurrentLevelMobys + (uint)(byte)pcVar12[0x1d] * 0x58 + 0xc));
          iVar7 = CosScaled((uint)(byte)pcVar12[1] << 7);
          local_78 = local_78 + (iVar7 >> 1);
          iVar7 = SinScaled((uint)(byte)pcVar12[1] << 7);
          local_74 = local_74 + (iVar7 >> 1);
          iVar7 = CosScaled((uint)(byte)pcVar12[1] * 0x80 + -0x100);
          local_70 = local_70 + (iVar7 >> 2);
          Vec3Subtract(&local_78,&local_78,aiStack_88);
          uVar8 = Vec3CalculateLengthE(&local_78,flag3D);
          if ((0x400 < (int)uVar8) && ((byte)pcVar12[1] < 0x41)) {
            Vec3ScaleDownByFraction(&local_78,uVar8,0x80);
            Vec3Add(aiStack_88,aiStack_88,&local_78);
            Vec3ScaleDownBy4(result,aiStack_88);
            pcVar12[1] = pcVar12[1] + '\x01';
            Vec3Subtract(&local_78,aiStack_88,&cameraPosition.x);
            iVar7 = local_78;
            if (local_78 < 0) {
              iVar7 = -local_78;
            }
            iVar6 = local_74;
            if (local_74 < 0) {
              iVar6 = -local_74;
            }
            iVar11 = local_70;
            if (local_70 < 0) {
              iVar11 = -local_70;
            }
            iVar11 = iVar7 + iVar6 + iVar11;
            if (*pcVar12 == '\x03') {
              if (0x3000 < iVar11) {
                pcVar12[9] = '\x04';
                pcVar12[0xe] = '@';
                *pcVar12 = '\0';
                pcVar12[0xb] = pcVar12[0xb] << 1;
                pcVar12[0xc] = pcVar12[0xc] << 1;
                pcVar12[0xd] = pcVar12[0xd] << 1;
              }
            }
            else if (iVar11 < 0x2800) {
              *pcVar12 = '\x03';
              pcVar12[0x10] = '\x04';
              pcVar12[0xe] = ',';
              pcVar12[0xf] = '\0';
              pcVar12[0xb] = (byte)pcVar12[0xb] >> 1;
              pcVar12[0xc] = (byte)pcVar12[0xc] >> 1;
              pcVar12[0xd] = (byte)pcVar12[0xd] >> 1;
              iVar7 = rand();
              pcVar12[9] = ((byte)iVar7 & 0xf) + 0x18;
              iVar7 = rand();
              pcVar12[10] = ((byte)iVar7 & 7) + 0xf;
            }
            break;
          }
        }
        goto LAB_magic__8008d27c;
      case '\t':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[9] = pcVar12[9] + cVar3 * '\x02';
        goto LAB_magic__8008d264;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_magic__8008d27c;
        Vec3Copy(&local_68,(int *)&spyro);
        iVar7 = CosScaled((int)*(short *)(pcVar12 + 0x17));
        local_68 = local_68 + (iVar7 >> 4);
        iVar7 = SinScaled((int)*(short *)(pcVar12 + 0x17));
        local_64 = local_64 + (iVar7 >> 4);
        local_60 = local_60 + 0x100;
        Vec3ScaleDownBy4(result,&local_68);
        sVar9 = *(short *)(pcVar12 + 0x17);
        *(short *)(pcVar12 + 0x17) = sVar9 + 0x40;
        iVar7 = CosScaled((int)(short)(sVar9 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar7 < 0) {
          iVar7 = -iVar7;
        }
        pcVar12[9] = (char)(iVar7 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar13 + 0x12);
        pcVar12[0xb] = pcVar12[0xb] + -8;
        pcVar12[0xc] = pcVar12[0xc] + -8;
        pcVar12[0xd] = pcVar12[0xd] + -8;
        if (pcVar12[0xb] == '\0') goto LAB_magic__8008d27c;
        goto LAB_magic__8008d26c;
      case '\f':
        pcVar12[10] = pcVar12[10] + '\b';
        pcVar12[9] = pcVar12[9] + '\x02';
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -8;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -8;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -8;
        }
        if ((*(uint *)(pcVar12 + 0xb) & 0xffffff) != 0) goto LAB_magic__8008d26c;
        goto LAB_magic__8008d27c;
      case '\x16':
        Vec3ShortAdd(result,result,pcVar14);
        sVar9 = *(short *)(pcVar12 + 0x17);
        if (sVar9 < 1) {
          if (sVar9 < 0) {
            sVar5 = 1;
            goto LAB_magic__8008c5c8;
          }
        }
        else {
          sVar5 = -1;
LAB_magic__8008c5c8:
          *(short *)(pcVar12 + 0x17) = sVar9 + sVar5;
        }
        sVar9 = *(short *)(pcVar12 + 0x19);
        if (sVar9 < 1) {
          sVar5 = 1;
          if (sVar9 < 0) goto LAB_magic__8008c5ec;
        }
        else {
          sVar5 = -1;
LAB_magic__8008c5ec:
          *(short *)(pcVar12 + 0x19) = sVar9 + sVar5;
        }
        pcVar12[10] = pcVar12[10] + pcVar12[0x1d];
        iVar7 = (uint)(byte)pcVar12[0xd] - gameSpeedMultiplyer;
        if (0 < iVar7) {
          bVar1 = pcVar12[1];
          cVar4 = (char)(iVar7 >> 1);
          pcVar12[0xb] = cVar4;
          pcVar12[0xc] = cVar4;
          pcVar12[0xd] = (char)iVar7;
          pcVar12[1] = (char)((uint)bVar1 + param_1);
          bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x40;
          goto LAB_magic__8008d264;
        }
        goto LAB_magic__8008d27c;
      case '\x18':
        if ((byte)pcVar12[0xb] < 0xf0) {
          pcVar12[0xb] = pcVar12[0xb] + 4;
        }
        if ((byte)pcVar12[0xc] < 0xf0) {
          pcVar12[0xc] = pcVar12[0xc] + 4;
        }
        if ((byte)pcVar12[0xd] < 0xf0) {
          pcVar12[0xd] = pcVar12[0xd] + 4;
        }
        pcVar12[0x1b] = pcVar12[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar7 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar7 = dragonTimerCurrentState;
        }
        *(short *)(pcVar12 + 0x17) = (short)((int)((uint)(byte)pcVar12[0x1c] * (0x48 - iVar7)) >> 3)
        ;
        iVar7 = ((int)((0x20 - (uint)(byte)pcVar12[0x1c]) * iVar7) >> 4) + 8;
        *(short *)(pcVar12 + 0x19) = (short)iVar7;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar12[0x1b] + 0x40] * (iVar7 * 0x10000 >> 0x10) >>
                    0xc);
        sVar9 = sineWaveArray[(byte)pcVar12[0x1b]];
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0x15) + *(short *)(pcVar12 + 0x17) + 0x20;
        *(short *)(pcVar12 + 5) =
             *(short *)(pcVar12 + 0x13) +
             (short)((int)sVar9 * (int)*(short *)(pcVar12 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar14);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar12[0xb] - param_1;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar3 * '\x02';
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar12[0xb] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar12[0xc] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar12[0xc] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar12[0xd] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        bVar1 = pcVar12[1];
        pcVar12[0xd] = (char)iVar7;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_magic__8008d264;
      case 'A':
        local_58._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_58._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar9);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_58;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_58._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar9;
        iVar7 = rand();
        local_58._0_2_ = (short)local_58 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_58._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_58 = CONCAT22(sVar9,(short)local_58);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_58;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar9;
        cVar4 = pcVar12[1];
        sVar9 = *(short *)(pcVar12 + 0xd) + (short)local_54;
        pcVar12[1] = cVar4 + 1U;
        bVar2 = (byte)(cVar4 + 1U) < 8;
        goto LAB_magic__8008d260;
      case 'B':
        iVar7 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar12[1] & 1U) != 0) {
              *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
              *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
              *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
              if ((pcVar12[1] & 2U) != 0) {
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar12 + 0x13) = *(short *)(pcVar12 + 0x13) + -1 + ((ushort)iVar6 & 2);
              }
            }
            iVar7 = iVar7 + 1;
            pcVar12[1] = pcVar12[1] + '\x01';
          } while (iVar7 < param_1);
        }
        bVar2 = (byte)pcVar12[1] < 0x18;
        goto LAB_magic__8008d264;
      case 'F':
        local_58._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_58._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar9);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_58;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_58._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar9;
        iVar7 = rand();
        local_58._0_2_ = (short)local_58 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_58._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_58 = CONCAT22(sVar9,(short)local_58);
        if ((pcVar12[1] & 1U) != 0) {
          local_54 = CONCAT22(local_54._2_2_,(short)local_54 + -1);
        }
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_58;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar9;
        cVar4 = pcVar12[1];
        pcVar12[1] = cVar4 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_54;
        if ((0x1f < (byte)(cVar4 + 1U)) || (pcVar12[2] == '\0')) goto LAB_magic__8008d27c;
        cVar4 = pcVar12[0xf];
        pcVar12[0xf] = cVar4 - 3U;
        if ((byte)(cVar4 - 3U) < 0x80) {
          pcVar12[0xf] = -0x80;
        }
        cVar4 = pcVar12[0x10];
        pcVar12[0x10] = cVar4 - 4U;
        if ((byte)(cVar4 - 4U) < 0x60) {
          pcVar12[0x10] = '`';
        }
        cVar4 = pcVar12[0x13];
        pcVar12[0x11] = '\0';
        pcVar12[0x13] = cVar4 - 3U;
        if ((byte)(cVar4 - 3U) < 0xc0) {
          pcVar12[0x13] = -0x40;
        }
        cVar4 = pcVar12[0x14];
        pcVar12[0x14] = cVar4 - 4U;
        if ((byte)(cVar4 - 4U) < 0x80) {
          pcVar12[0x14] = -0x80;
        }
        cVar4 = pcVar12[0x15];
        pcVar12[0x15] = cVar4 - 6U;
        if ((byte)(cVar4 - 6U) < 0x20) {
          pcVar12[0x15] = ' ';
        }
        break;
      case 'G':
        cVar4 = pcVar12[1];
        pcVar12[1] = cVar4 + 1U;
        if ((0x1f < (byte)(cVar4 + 1U)) || (pcVar12[2] == '\0')) goto LAB_magic__8008d27c;
        local_50 = (int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3);
        local_4c = (int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5);
        local_48 = (int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7);
        uVar8 = rand();
        local_50 = local_50 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_4c = local_4c + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_48 = local_48 + -1 + (uVar8 & 2);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_50;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + (short)local_4c;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_48;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 9) - (short)local_50;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 0xb) - (short)local_4c;
        pcVar12[0x13] = pcVar12[0x13] + -2;
        pcVar12[0x15] = pcVar12[0x15] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -2;
        pcVar12[0x10] = pcVar12[0x10] + -3;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0xd) - (short)local_48;
        pcVar12[0x11] = pcVar12[0x11] + -3;
        break;
      case 'H':
        cVar4 = pcVar12[1];
        pcVar12[1] = cVar4 + 1U;
        if ((0x2f < (byte)(cVar4 + 1U)) || (pcVar12[2] == '\0')) goto LAB_magic__8008d27c;
        local_58 = (int)*(short *)(pcVar12 + 3) - (int)*(short *)(pcVar12 + 9) >> 1;
        local_54 = (int)*(short *)(pcVar12 + 5) - (int)*(short *)(pcVar12 + 0xb) >> 1;
        local_50 = (int)*(short *)(pcVar12 + 7) - (int)*(short *)(pcVar12 + 0xd) >> 1;
        uVar8 = rand();
        local_58 = local_58 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_54 = local_54 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_50 = local_50 + -1 + (uVar8 & 2);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_58;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + (short)local_54;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)local_50;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 3) + (short)local_58 * -2;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 5) + (short)local_54 * -2;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 7) + (short)local_50 * -2;
        break;
      case 'M':
        sVar10 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar9);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar10;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar9;
        sVar5 = sVar5 + 1;
        local_58 = CONCAT22(sVar5,sVar10);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar10;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar4 = pcVar12[1];
        pcVar12[1] = cVar4 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar9;
        if (0x1f < (byte)(cVar4 + 1U)) goto LAB_magic__8008d27c;
        break;
      case 'N':
        cVar4 = pcVar12[1];
        pcVar12[1] = cVar4 + 1U;
        if ((0x27 < (byte)(cVar4 + 1U)) || (pcVar12[2] == '\0')) goto LAB_magic__8008d27c;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        iVar7 = rand();
        *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar7 & 2);
        uVar8 = rand();
        iVar7 = (*(ushort *)(pcVar12 + 0x13) - 1) + (uVar8 & 2);
        *(short *)(pcVar12 + 0x13) = (short)iVar7;
        if (2 < iVar7 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar12 + 0x13) = 2;
        }
        if (*(short *)(pcVar12 + 0x13) < -4) {
          *(undefined2 *)(pcVar12 + 0x13) = 0xfffc;
        }
        pcVar12[0xb] = pcVar12[0xb] + -2;
        pcVar12[0xd] = pcVar12[0xd] + -1;
        pcVar12[0xc] = pcVar12[0xc] + -2;
        break;
      case 'O':
        sVar10 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        local_58 = CONCAT22(sVar9,sVar10);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar5);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar10;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar9;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar5;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar10;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar9;
        cVar4 = pcVar12[1];
        pcVar12[1] = cVar4 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar4 + 1U)) || (pcVar12[2] == '\0')) goto LAB_magic__8008d27c;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        pcVar12[0x13] = pcVar12[0x13] + -3;
        pcVar12[0x10] = pcVar12[0x10] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -4;
        if (5 < (byte)pcVar12[0x15]) {
          pcVar12[0x15] = pcVar12[0x15] - 6;
        }
        break;
      case 'P':
        sVar10 = *(short *)(pcVar12 + 9) - *(short *)(pcVar12 + 3);
        sVar5 = *(short *)(pcVar12 + 0xb) - *(short *)(pcVar12 + 5);
        local_58 = CONCAT22(sVar5,sVar10);
        sVar9 = *(short *)(pcVar12 + 7);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar10;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (*(short *)(pcVar12 + 0xd) - sVar9);
        sVar9 = (*(short *)(pcVar12 + 0xd) - sVar9) + -1;
        local_54 = CONCAT22(local_54._2_2_,sVar9);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar10;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar4 = pcVar12[1];
        sVar9 = *(short *)(pcVar12 + 0xd) + sVar9;
        pcVar12[1] = cVar4 + 1U;
        bVar2 = (byte)(cVar4 + 1U) < 0x20;
LAB_magic__8008d260:
        *(short *)(pcVar12 + 0xd) = sVar9;
LAB_magic__8008d264:
        if (bVar2) {
LAB_magic__8008d26c:
          if (pcVar12[2] != '\0') break;
        }
LAB_magic__8008d27c:
        FUN_80053608(pcVar13);
      }
      pcVar12 = pcVar12 + 0x20;
      pcVar14 = pcVar14 + 0x20;
      result = result + 0x10;
      pcVar13 = pcVar13 + 0x20;
    } while (*pcVar12 != -1);
  }
  return;
}



void MagicDrawParticles(int param_1,undefined4 param_2,Vec2 *param_3,int *param_4)

{
  bool bVar1;
  char *pcVar2;
  undefined uVar3;
  short extraout_var;
  undefined *puVar4;
  uint uVar5;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar6;
  int iVar7;
  uint uVar8;
  short sVar9;
  int iVar10;
  int *b;
  int *source;
  int iVar11;
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int aiStack_90 [2];
  int local_88;
  int aiStack_80 [4];
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  int local_4c;
  int local_48;
  int local_40;
  int local_30;
  
  iVar11 = 0;
  if (0 < param_1) {
    local_30 = 0;
    source = param_4;
    local_40 = param_1;
    do {
      uVar3 = (undefined)param_2;
      switch(param_2) {
      case 0:
        puVar6 = (undefined *)AllocateParticleToBuffer(2);
        *puVar6 = uVar3;
        puVar6[2] = 0;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
        Vec3ScaleDownBy4((short *)(puVar6 + 0x18),source);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x18;
        iVar7 = rand();
        puVar6[0xf] = 0x2e;
        puVar6[0xb] = (char)iVar7;
        puVar6[0xc] = 0x80;
        puVar6[0xd] = 0x80;
        puVar6[0xe] = 0x80;
        goto LAB_magic__8008dd18;
      case 1:
        puVar6 = (undefined *)AllocateParticleToBuffer(2);
        *puVar6 = uVar3;
        puVar6[2] = 0;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
        Vec3ScaleDownBy4((short *)(puVar6 + 0x18),source);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        if (bVar1) {
          uVar3 = 8;
        }
        else {
          uVar3 = 0x10;
        }
        puVar6[10] = uVar3;
        iVar7 = rand();
        puVar6[0xb] = (char)iVar7;
        uVar3 = 0x60;
        goto LAB_magic__8008dd00;
      case 2:
        puVar6 = (undefined *)AllocateParticleToBuffer(2);
        *puVar6 = uVar3;
        puVar6[2] = 0;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
        uVar8 = rand();
        local_a0 = (uVar8 & 0x3f) - 0x20;
        uVar8 = rand();
        local_9c = (uVar8 & 0x3f) - 0x20;
        local_98 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar6 + 0x18),&local_a0);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x20;
        iVar7 = rand();
        puVar6[0xf] = 0x2e;
        puVar6[0xb] = (char)iVar7;
        puVar6[0xc] = 0x80;
        puVar6[0xd] = 0x80;
        puVar6[0xe] = 0x80;
        goto LAB_magic__8008dd18;
      case 7:
        puVar6 = (undefined *)AllocateParticleToBuffer(2);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 0xf;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
        if (source != (int *)0x0) {
          uVar8 = rand();
          *(short *)(puVar6 + 4) =
               *(short *)(puVar6 + 4) + (short)((int)source * ((uVar8 & 0xfe) - 0x7f) >> 8);
          uVar8 = rand();
          *(short *)(puVar6 + 6) =
               *(short *)(puVar6 + 6) + (short)((int)source * ((uVar8 & 0xfe) - 0x7f) >> 8);
          uVar8 = rand();
          *(short *)(puVar6 + 8) =
               *(short *)(puVar6 + 8) + (short)((int)source * ((uVar8 & 0xfe) - 0x30) >> 8);
        }
        puVar6[10] = puVar6[2] << 2;
        iVar7 = rand();
        puVar6[0xb] = (char)iVar7;
        iVar7 = rand();
        *(ushort *)(puVar6 + 0x18) = ((ushort)iVar7 & 0xe) - 7;
        iVar7 = rand();
        *(ushort *)(puVar6 + 0x1a) = ((ushort)iVar7 & 0xe) - 7;
        iVar7 = rand();
        *(ushort *)(puVar6 + 0x1c) = ((ushort)iVar7 & 0xe) - 7;
        iVar7 = rand();
        puVar6[0xf] = 0x2e;
        *(ushort *)(puVar6 + 0x1e) = ((ushort)iVar7 & 0xf) + 6;
        puVar6[0xc] = 0x80;
        puVar6[0xd] = 0x80;
        puVar6[0xe] = 0x80;
        goto LAB_magic__8008dd18;
      case 8:
        puVar6 = (undefined *)AllocateParticleToBuffer(3);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 3;
        puVar6[3] = 1;
        uVar8 = rand();
        FUN_80052d64(param_3,uVar8 & 1,aiStack_90);
        Vec3ScaleDownBy4((short *)(puVar6 + 4),aiStack_90);
        iVar7 = rand();
        *(ushort *)(puVar6 + 4) = *(short *)(puVar6 + 4) + -7 + ((ushort)iVar7 & 0xe);
        iVar7 = rand();
        *(ushort *)(puVar6 + 6) = *(short *)(puVar6 + 6) + -7 + ((ushort)iVar7 & 0xe);
        iVar7 = rand();
        b = &param_3[1].y;
        *(ushort *)(puVar6 + 8) = *(short *)(puVar6 + 8) + -7 + ((ushort)iVar7 & 0xe);
        Vec3Subtract(aiStack_90,aiStack_90,b);
        local_88 = local_88 + -900;
        VecNormalize(aiStack_90,0x80,b,param_4);
        Vec3ScaleDownBy4((short *)(puVar6 + 0x18),aiStack_90);
        pcVar2 = ptr_startOfCurrentLevelMobys;
        puVar6[0x1f] = 0;
        puVar6[0x1e] = (char)(((int)source - (int)pcVar2) * -0x45d1745d >> 3);
        iVar7 = rand();
        puVar6[10] = ((byte)iVar7 & 0xf) + 0x18;
        iVar7 = rand();
        puVar6[0xb] = ((byte)iVar7 & 7) + 0xf;
        puVar6[0xf] = 0x2c;
        puVar6[0x11] = 4;
        puVar6[0x10] = 0;
        uVar8 = rand();
        uVar8 = uVar8 & 3;
        if (uVar8 == 2) {
          puVar6[0xc] = 0x40;
          puVar6[0xd] = 0x7f;
          puVar6[0xe] = 0x40;
        }
        else if (uVar8 < 3) {
          puVar6[0xc] = 0x7f;
          puVar6[0xd] = 0x7f;
          puVar6[0xe] = 0x20;
        }
        else if (uVar8 == 3) {
          puVar6[0xc] = 0x7f;
          puVar6[0xd] = 0x7f;
          puVar6[0xe] = 0x7f;
        }
        break;
      case 9:
        puVar6 = (undefined *)AllocateParticleToBuffer(2);
        *puVar6 = uVar3;
        puVar6[2] = 0;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
        Vec3ScaleDownBy4((short *)(puVar6 + 0x18),source);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x18;
        iVar7 = rand();
        puVar6[0xb] = (char)iVar7;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar3 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar6[0xc] = 0x80;
              puVar6[0xd] = 0x80;
              puVar6[0xe] = 0x80;
              goto LAB_magic__8008d818;
            }
            puVar6[0xc] = 0xe0;
          }
          else {
            puVar6[0xc] = 0xf0;
            uVar3 = 0x60;
          }
          puVar6[0xd] = uVar3;
          puVar6[0xe] = 0;
        }
        else {
          puVar6[0xc] = 0xff;
          puVar6[0xd] = 0;
          puVar6[0xe] = 0;
        }
LAB_magic__8008d818:
        puVar6[0xf] = 0x2e;
        goto LAB_magic__8008dd18;
      case 10:
        puVar6 = (undefined *)AllocateParticleToBuffer(3);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 0x1f;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),(int *)&spyro);
        puVar6[10] = 0x18;
        puVar6[0xb] = 0xf;
        puVar6[0xc] = (&DAT_8006e438)[local_30];
        puVar6[0xd] = (&DAT_8006e439)[local_30];
        uVar3 = (&DAT_8006e43a)[local_30];
        puVar6[0xf] = 0x2c;
        puVar6[0x11] = 4;
        puVar6[0x10] = 0;
        puVar6[0xe] = uVar3;
        *(short *)(puVar6 + 0x18) = (short)(((local_40 - iVar11) * 0x1000) / 5);
        break;
      case 0xc:
        puVar6 = (undefined *)AllocateParticleToBuffer(2);
        *puVar6 = uVar3;
        puVar6[3] = 1;
        puVar6[0x11] = 4;
        sVar9 = *(short *)((int)&param_3[6].y + 2);
        if (sVar9 == 0x22) {
          Vec3Copy(aiStack_80,&param_3[1].y);
        }
        else if ((sVar9 == 0xad) || (sVar9 == 0xb5)) {
          iVar7 = (int)source >> 0x18;
          if (iVar7 < 6) {
            puVar4 = (undefined *)0x8006e4e0;
            goto LAB_magic__8008d9c4;
          }
          puVar6[1] = 5;
          puVar6[0x11] = 0x16;
          Vec3Copy(aiStack_80,(int *)(iVar7 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar9 == 0x78) {
            puVar4 = &DAT_8006e570;
          }
          else {
            puVar4 = &DAT_8006e498;
            iVar7 = iVar11;
LAB_magic__8008d9c4:
            puVar4 = puVar4 + iVar7 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 4,puVar4,aiStack_80);
          Vec3Add(aiStack_80,aiStack_80,&param_3[1].y);
        }
        Vec3ScaleDownBy4((short *)(puVar6 + 4),aiStack_80);
        puVar6[0xd] = (char)((uint)source >> 8);
        puVar6[0xc] = (char)source;
        puVar6[0xe] = (char)((uint)source >> 0x10);
        puVar6[0xf] = 0x2e;
        iVar7 = rand();
        puVar6[10] = ((byte)iVar7 & 7) + 0x10;
        iVar7 = rand();
        puVar6[0xb] = (char)iVar7;
        puVar6[0x10] = 0;
        break;
      case 0x16:
        iVar7 = Vec2EstimateOctagonalDistance(param_3,(Vec2 *)&cameraPosition);
        if (iVar7 < 0x8000) {
          puVar6 = (undefined *)AllocateParticleToBuffer(2);
          *puVar6 = uVar3;
          iVar10 = rand();
          puVar6[2] = (byte)iVar10 & 0xf;
          puVar6[3] = 1;
          Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
          uVar8 = rand();
          *(short *)(puVar6 + 4) =
               *(short *)(puVar6 + 4) + (short)((int)(((uVar8 & 0xfff) - 0x7ff) * 300) >> 0xc);
          uVar8 = rand();
          *(short *)(puVar6 + 6) =
               *(short *)(puVar6 + 6) + (short)((int)(((uVar8 & 0xfff) - 0x7ff) * 300) >> 0xc);
          uVar8 = rand();
          source = (int *)((int)source + ((uVar8 & 0x1e) - 0xf) & 0xff);
          *(short *)(puVar6 + 0x18) = (short)(sineWaveArray[(int)(source + 0x10)] * 7 >> 0xb);
          sVar9 = sineWaveArray[(int)source];
          *(undefined2 *)(puVar6 + 0x1c) = 8;
          *(short *)(puVar6 + 0x1a) = (short)(sVar9 * 7 >> 0xb);
          iVar10 = rand();
          *(ushort *)(puVar6 + 0x1e) = ((ushort)iVar10 & 2) - 1;
          puVar6[10] = 0xe0;
          iVar10 = rand();
          puVar6[0xb] = (char)iVar10;
          if (iVar7 < 0x6001) {
            iVar7 = 0x40;
          }
          else {
            iVar7 = 0x8000 - iVar7 >> 7;
          }
          uVar3 = (undefined)(iVar7 >> 1);
          puVar6[0xc] = uVar3;
          puVar6[0xd] = uVar3;
          puVar6[0xe] = (char)iVar7;
          puVar6[0xf] = 0x2e;
          puVar6[0x11] = 0xc;
          puVar6[0x10] = 0;
        }
        break;
      case 0x18:
        puVar6 = (undefined *)AllocateParticleToBuffer(2);
        *puVar6 = uVar3;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
        Vec3ScaleDownBy4((short *)(puVar6 + 0x12),&param_3->x);
        puVar6[10] = 0x30;
        puVar6[0x11] = 8;
        *(short *)(puVar6 + 0x18) = (short)(iVar11 << 5);
        puVar6[0xc] = 0x80;
        puVar6[0xd] = 0x80;
        puVar6[0xe] = 0x80;
        uVar3 = (undefined)(iVar11 << 4);
        puVar6[0xb] = uVar3;
        puVar6[0xf] = 0x2e;
        puVar6[0x10] = 0;
        *(undefined2 *)(puVar6 + 0x1a) = 0x10;
        puVar6[0x1c] = uVar3;
        puVar6[0x1d] = (char)iVar11;
        break;
      case 0x21:
        puVar6 = (undefined *)AllocateParticleToBuffer(2);
        *puVar6 = uVar3;
        puVar6[2] = 0;
        puVar6[3] = 1;
        if (source == (int *)0x0) {
          Vec3Copy(&local_70,(int *)&spyro);
          local_68 = spyro.unkown_heightRelated;
          uVar8 = rand();
          local_70 = local_70 + -0x1f + (uVar8 & 0x3e);
          uVar8 = rand();
          local_6c = local_6c + -0x1f + (uVar8 & 0x3e);
        }
        else {
          local_70 = 0x164;
          local_6c = 0;
          local_68 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_70,&local_70);
          Vec3Add(&local_70,&local_70,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&local_70);
        Vec3ScaleDownBy4((short *)(puVar6 + 0x18),&param_3->x);
        *(undefined2 *)(puVar6 + 0x1e) = 0;
        puVar6[10] = 0x10;
        iVar7 = rand();
        puVar6[0xb] = (char)iVar7;
        uVar3 = 0x20;
LAB_magic__8008dd00:
        puVar6[0xf] = 0x2e;
        puVar6[0xc] = uVar3;
        puVar6[0xd] = uVar3;
        puVar6[0xe] = uVar3;
LAB_magic__8008dd18:
        puVar6[0x11] = 4;
        puVar6[0x10] = 0;
        break;
      case 0x41:
        puVar6 = (undefined *)AllocateParticleToBuffer(1);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 3;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3[1].y);
        iVar7 = rand();
        *(ushort *)(puVar6 + 4) = *(short *)(puVar6 + 4) + -0x3f + ((ushort)iVar7 & 0x7e);
        iVar7 = rand();
        *(ushort *)(puVar6 + 6) = *(short *)(puVar6 + 6) + -0x3f + ((ushort)iVar7 & 0x7e);
        iVar7 = rand();
        puVar6[0x17] = 0;
        puVar6[0x10] = 0x80;
        puVar6[0x11] = 0x80;
        puVar6[0x12] = 0x80;
        puVar6[0x14] = 0xc0;
        puVar6[0x15] = 0xc0;
        puVar6[0x16] = 0xc0;
        *(ushort *)(puVar6 + 8) = *(short *)(puVar6 + 8) + 0x136 + ((ushort)iVar7 & 0xf);
        puVar6[0x13] = 0x50;
        *(undefined2 *)(puVar6 + 0xc) = *(undefined2 *)(puVar6 + 6);
        *(undefined2 *)(puVar6 + 10) = *(undefined2 *)(puVar6 + 4);
        *(short *)(puVar6 + 0xe) = *(short *)(puVar6 + 8) + -0x20;
        break;
      case 0x42:
        puVar6 = (undefined *)AllocateParticleToBuffer(0);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 0xf;
        puVar6[3] = 1;
        iVar7 = rand();
        *(ushort *)(puVar6 + 4) = (short)(param_3->x >> 2) + ((ushort)iVar7 & 0xf) + -8;
        iVar7 = rand();
        *(ushort *)(puVar6 + 6) = (short)(param_3->y >> 2) + ((ushort)iVar7 & 0xf) + -8;
        iVar7 = rand();
        iVar10 = param_3[1].x;
        *(undefined2 *)(puVar6 + 0x10) = 0;
        *(undefined2 *)(puVar6 + 0x12) = 0;
        *(undefined2 *)(puVar6 + 0x14) = 0;
        puVar6[10] = 2;
        *(ushort *)(puVar6 + 8) = (short)(iVar10 >> 2) + ((ushort)iVar7 & 0xf) + -8;
        if ((source == (int *)0x1) || ((source == (int *)0x0 && (2 < spyro.health)))) {
          puVar6[0xc] = 0xff;
          goto LAB_magic__8008def0;
        }
        uVar8 = rand();
        switch(uVar8 & 7) {
        case 0:
          puVar6[0xc] = 0xff;
          puVar6[0xd] = 0;
          puVar6[0xe] = 0;
          break;
        case 1:
          puVar6[0xc] = 0xff;
          goto LAB_magic__8008def0;
        case 2:
          puVar6[0xc] = 0;
LAB_magic__8008def0:
          puVar6[0xd] = 0xff;
          puVar6[0xe] = 0;
          break;
        case 3:
          puVar6[0xc] = 0;
          puVar6[0xd] = 0xff;
          goto LAB_magic__8008df38;
        case 4:
          puVar6[0xc] = 0;
          puVar6[0xd] = 0;
          goto LAB_magic__8008df38;
        case 5:
          puVar6[0xc] = 0xff;
          puVar6[0xd] = 0;
          goto LAB_magic__8008df38;
        case 6:
          puVar6[0xc] = 0xff;
          puVar6[0xd] = 0x80;
          puVar6[0xe] = 0;
          break;
        case 7:
          puVar6[0xc] = 0;
          puVar6[0xd] = 0x80;
LAB_magic__8008df38:
          puVar6[0xe] = 0xff;
        }
        puVar6[0xf] = 0x40;
        break;
      case 0x46:
        puVar6 = (undefined *)AllocateParticleToBuffer(1);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 0xf;
        puVar6[3] = 1;
        uVar8 = rand();
        local_60 = (int)((int)source * ((uVar8 & 0xfff) - 0x800)) >> 0xc;
        uVar8 = rand();
        local_5c = (int)((int)source * ((uVar8 & 0xfff) - 0x800)) >> 0xc;
        uVar8 = rand();
        local_58 = (int)((int)source * (uVar8 & 0xfff)) >> 0xc;
        *(short *)(puVar6 + 4) = (short)(param_3->x >> 2) + (short)local_60 * 4;
        *(short *)(puVar6 + 6) = (short)(param_3->y >> 2) + (short)local_5c * 4;
        sVar9 = (short)local_58;
        *(short *)(puVar6 + 8) = (short)(param_3[1].x >> 2) + sVar9 * 4;
        *(short *)(puVar6 + 10) = *(short *)(puVar6 + 4) + (short)local_60 * 2;
        *(short *)(puVar6 + 0xc) = *(short *)(puVar6 + 6) + (short)local_5c * 2;
        goto LAB_magic__8008e574;
      case 0x47:
        puVar6 = (undefined *)AllocateParticleToBuffer(1);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 7;
        puVar6[3] = 1;
        uVar8 = rand();
        local_60 = (int)(((uVar8 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar8 = rand();
        local_5c = (int)(((uVar8 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar8 = rand();
        local_58 = (int)(((uVar8 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar6 + 4) = (short)(param_3->x >> 2) + (short)local_60 * 4;
        *(short *)(puVar6 + 6) = (short)(param_3->y >> 2) + (short)local_5c * 4;
        *(short *)(puVar6 + 8) = (short)(param_3[1].x >> 2) + (short)local_58 * 4;
        *(short *)(puVar6 + 10) = *(short *)(puVar6 + 4) + (short)local_60;
        *(short *)(puVar6 + 0xc) = *(short *)(puVar6 + 6) + (short)local_5c;
        puVar6[0x17] = 2;
        puVar6[0x10] = 0xe0;
        puVar6[0x11] = 0xe0;
        puVar6[0x12] = 0x60;
        puVar6[0x14] = 0xff;
        puVar6[0x15] = 0xff;
        puVar6[0x16] = 0xff;
        puVar6[0x13] = 0x50;
        *(short *)(puVar6 + 0xe) = *(short *)(puVar6 + 8) + (short)local_58;
        break;
      case 0x4d:
        puVar6 = (undefined *)AllocateParticleToBuffer(4);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar6 + 10),&param_3->x);
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
        uVar8 = rand();
        CosScaled(uVar8 & 0xfff);
        *(short *)(puVar6 + 4) = *(short *)(puVar6 + 4) + extraout_var;
        uVar5 = rand();
        SinScaled(uVar5 & 0x7ff);
        *(short *)(puVar6 + 6) = *(short *)(puVar6 + 6) + extraout_var_00;
        SinScaled(uVar8 & 0xfff);
        puVar6[0x17] = 0x7f;
        puVar6[0x11] = 0x40;
        puVar6[0x12] = 0x60;
        puVar6[0x16] = 0xc0;
        puVar6[0x13] = 0x50;
        puVar6[0x10] = 0x80;
        puVar6[0x14] = 0xff;
        puVar6[0x15] = 0x80;
        *(short *)(puVar6 + 8) = *(short *)(puVar6 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar6 = (undefined *)AllocateParticleToBuffer(0);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 0x1f;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
        iVar7 = rand();
        *(ushort *)(puVar6 + 4) = *(short *)(puVar6 + 4) + -0x20 + ((ushort)iVar7 & 0x3f);
        iVar7 = rand();
        *(ushort *)(puVar6 + 6) = *(short *)(puVar6 + 6) + -0x20 + ((ushort)iVar7 & 0x3f);
        iVar7 = rand();
        *(ushort *)(puVar6 + 8) = *(short *)(puVar6 + 8) + -0x20 + ((ushort)iVar7 & 0x3f);
        iVar7 = rand();
        *(ushort *)(puVar6 + 0x10) = ((ushort)iVar7 & 2) - 1;
        iVar7 = rand();
        *(ushort *)(puVar6 + 0x12) = ((ushort)iVar7 & 2) - 1;
        iVar7 = rand();
        *(ushort *)(puVar6 + 0x14) = -((ushort)iVar7 & 1);
        iVar7 = rand();
        puVar6[0xc] = (byte)iVar7 | 0x80;
        uVar8 = rand();
        uVar8 = (uVar8 & 0x7f) + 0x60;
        puVar6[0xd] = (char)uVar8;
        if ((byte)puVar6[0xc] < uVar8) {
          puVar6[0xd] = puVar6[0xc];
        }
        iVar7 = rand();
        puVar6[0xe] = ((byte)iVar7 & 0x3f) + 0x40;
        puVar6[0xf] = 0x40;
        puVar6[10] = 2;
        break;
      case 0x4f:
        puVar6 = (undefined *)AllocateParticleToBuffer(1);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 0xf;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 10),&param_3->x);
        Vec3Add(&local_60,param_3,source);
        uVar8 = rand();
        local_60 = local_60 + -0x20 + (uVar8 & 0x3f);
        uVar8 = rand();
        local_5c = local_5c + -0x20 + (uVar8 & 0x3f);
        uVar8 = rand();
        local_58 = local_58 + -0x40 + (uVar8 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&local_60);
        puVar6[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar7 = rand();
          puVar6[0x10] = (byte)iVar7 | 0xc0;
          iVar7 = rand();
          puVar6[0x11] = ((byte)iVar7 & 0x3f) + 0xa0;
          puVar6[0x12] = 0;
          iVar7 = rand();
          puVar6[0x14] = (byte)iVar7 | 0xe0;
          iVar7 = rand();
          puVar6[0x15] = (byte)iVar7 | 0xe0;
          puVar6[0x16] = 0x80;
        }
        else {
          iVar7 = rand();
          puVar6[0x10] = (byte)iVar7 | 0xc0;
          iVar7 = rand();
          puVar6[0x11] = ((byte)iVar7 & 0x3f) + 0x40;
          iVar7 = rand();
          puVar6[0x12] = ((byte)iVar7 & 0x3f) + 0x40;
          iVar7 = rand();
          puVar6[0x14] = (byte)iVar7 | 0xe0;
          iVar7 = rand();
          puVar6[0x15] = ((byte)iVar7 & 0x1f) + 0xa0;
          iVar7 = rand();
          puVar6[0x16] = ((byte)iVar7 & 0x1f) + 0xa0;
        }
        puVar6[0x13] = 0x50;
        break;
      case 0x50:
        puVar6 = (undefined *)AllocateParticleToBuffer(1);
        *puVar6 = uVar3;
        iVar7 = rand();
        puVar6[2] = (byte)iVar7 & 0xf;
        puVar6[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar6 + 4),&param_3->x);
        uVar8 = rand();
        local_50 = (int)((int)source * ((uVar8 & 0xfff) - 0x800)) >> 0xc;
        uVar8 = rand();
        local_4c = (int)((int)source * ((uVar8 & 0xfff) - 0x800)) >> 0xc;
        uVar8 = rand();
        local_48 = (int)((int)source * (uVar8 & 0xfff)) >> 0xc;
        *(short *)(puVar6 + 4) = *(short *)(puVar6 + 4) + (short)local_50 * 4;
        *(short *)(puVar6 + 6) = *(short *)(puVar6 + 6) + (short)local_4c * 4;
        sVar9 = (short)local_48;
        *(short *)(puVar6 + 8) = *(short *)(puVar6 + 8) + sVar9 * 4;
        *(short *)(puVar6 + 10) = *(short *)(puVar6 + 4) + (short)local_50 * 2;
        *(short *)(puVar6 + 0xc) = *(short *)(puVar6 + 6) + (short)local_4c * 2;
LAB_magic__8008e574:
        puVar6[0x17] = 2;
        puVar6[0x10] = 0xe0;
        puVar6[0x11] = 0xc0;
        puVar6[0x13] = 0x50;
        puVar6[0x12] = 0;
        puVar6[0x14] = 0xff;
        puVar6[0x15] = 0xff;
        puVar6[0x16] = 0x80;
        *(short *)(puVar6 + 0xe) = *(short *)(puVar6 + 8) + sVar9 * 2;
      }
      local_30 = local_30 + 4;
      iVar11 = iVar11 + 1;
    } while (iVar11 < local_40);
  }
  return;
}


/*
Unable to decompile 'Wizard_UpdateMobys'
Cause: Exception while decompiling peak::8007b7a8: process: timeout

*/


int ** Wizard_SpawnDynamicObjects(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  int **ppiVar3;
  int iVar4;
  int iVar5;
  char cVar6;
  short sVar7;
  uint uVar8;
  uint uVar9;
  Spyro *pSVar10;
  int *piVar11;
  Vec2 *vecA;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar3 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar3 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar3 + 0x56) = (char)uVar8;
  if (param_1 < 0x10e) {
    if (0x103 < param_1) goto LAB_peak__8008782c;
    if (param_1 < 0x46) {
      if (0x42 < param_1) goto LAB_peak__800874c0;
      if (param_1 == 0x10) {
        piVar11 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        ppiVar3[5] = ppiVar3[5] + 0x80;
        Vec3Copy(piVar11 + 1,(int *)(ppiVar3 + 3));
        *(undefined *)((int)piVar11 + 0x13) = 0;
        *(undefined *)((int)piVar11 + 0x12) = 0;
        *(short *)(piVar11 + 5) = 0x708;
        return ppiVar3;
      }
      if (param_1 < 0x11) {
        if (param_1 == 0xe) goto LAB_peak__80087320;
        if (param_1 == 0xf) {
          piVar11 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          piVar11[2] = 0x8c;
          *(undefined *)(piVar11 + 4) = 3;
          *(undefined *)(piVar11 + 5) = 0xff;
          *piVar11 = 0;
          piVar11[1] = 0;
          *(undefined *)((int)piVar11 + 0xe) = 0;
          *(undefined *)((int)piVar11 + 0xf) = 0;
          *(undefined *)((int)piVar11 + 0x11) = 0;
          *(undefined *)((int)piVar11 + 0x12) = 0;
          *(undefined *)((int)piVar11 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x10;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800526a8(ppiVar3);
          bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 1;
          goto LAB_peak__80087660;
        }
      }
      else {
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar3);
          return ppiVar3;
        }
        if (param_1 == 0x26) {
          piVar11 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          vecA = (Vec2 *)(ppiVar3 + 3);
          Vec3Copy((int *)vecA,(int *)(param_2 + 0xc));
          if (*(short *)(param_2 + 0x36) == 0x26) {
            uVar1 = *(undefined *)(param_2 + 0x46);
            *(undefined *)(ppiVar3 + 0x12) = 3;
            *(undefined *)(ppiVar3 + 0x10) = 0;
            *(undefined *)((int)ppiVar3 + 0x46) = uVar1;
            uVar1 = *(undefined *)
                     (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar3 + 0x36)] + 0x44) + 0xc);
            *(undefined *)(ppiVar3 + 0xf) = 3;
            *(undefined *)((int)ppiVar3 + 0x3d) = 3;
            *(undefined *)((int)ppiVar3 + 0x41) = uVar1;
            iVar4 = 3;
          }
          else {
            if (5 < *(byte *)(param_2 + 0x3f)) {
              iVar4 = CosScaled((uint)*(byte *)(param_2 + 0x46) << 4);
              ppiVar3[3] = (int *)((int)ppiVar3[3] + (iVar4 >> 2));
              iVar4 = SinScaled((uint)*(byte *)(param_2 + 0x46) << 4);
              ppiVar3[4] = (int *)((int)ppiVar3[4] + (iVar4 >> 2));
              ppiVar3[5] = ppiVar3[5] + 0x4b;
              *(undefined *)((int)ppiVar3 + 0x46) = *(undefined *)(param_2 + 0x46);
              uVar8 = Vec2EstimateOctagonalDistance(vecA,(Vec2 *)&spyro);
              iVar4 = ATan2Scaled(uVar8,spyro.position.z - (int)ppiVar3[5],0);
              uVar8 = iVar4 - (uint)*(byte *)(param_2 + 0x45) & 0xff;
              if (0x80 < uVar8) {
                uVar8 = uVar8 - 0x100;
              }
              uVar9 = uVar8;
              if ((int)uVar8 < -0x10) {
                uVar9 = 0xfffffff0;
              }
              cVar6 = (char)uVar9;
              if (0x10 < (int)uVar8) {
                cVar6 = '\x10';
              }
              *(byte *)((int)ppiVar3 + 0x45) = *(byte *)(param_2 + 0x45) + cVar6;
              *piVar11 = 0x80;
              *(undefined *)(ppiVar3 + 0x12) = 2;
              *(undefined *)(ppiVar3 + 0x10) = 0;
              uVar1 = *(undefined *)
                       (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar3 + 0x36)] + 0x40) + 0xc);
              *(undefined *)(ppiVar3 + 0xf) = 2;
              *(undefined *)((int)ppiVar3 + 0x3d) = 2;
              *(undefined *)((int)ppiVar3 + 0x41) = uVar1;
              (*ptr_OverlayCreateParticle)(4,7,vecA,0x10);
              goto LAB_peak__80087b0c;
            }
            if (*(byte *)(param_2 + 0x3f) < 2) {
              ppiVar3[5] = ppiVar3[5] + 0x60;
              *(undefined *)((int)ppiVar3 + 0x46) = *(undefined *)(param_2 + 0x46);
            }
            else {
              ppiVar3[5] = ppiVar3[5] + 0x4b;
              uVar1 = *(undefined *)(param_2 + 0x46);
              *(undefined *)(ppiVar3 + 0x12) = 1;
              *(undefined *)(ppiVar3 + 0x10) = 0;
              *(undefined *)((int)ppiVar3 + 0x46) = uVar1;
              uVar1 = *(undefined *)
                       (*(int *)((&DAT_80076378)[*(short *)((int)ppiVar3 + 0x36)] + 0x3c) + 0xc);
              *(undefined *)(ppiVar3 + 0xf) = 1;
              *(undefined *)((int)ppiVar3 + 0x3d) = 1;
              *(undefined *)((int)ppiVar3 + 0x41) = uVar1;
            }
            iVar4 = 2;
          }
          *piVar11 = iVar4;
          goto LAB_peak__80087b0c;
        }
      }
    }
    else {
      if (param_1 == 0x78) {
        piVar11 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        *(undefined *)((int)ppiVar3 + 0x49) = 0;
        *piVar11 = 0;
        *(undefined2 *)(piVar11 + 2) = 0;
        *(undefined2 *)((int)piVar11 + 6) = 0;
        *(undefined2 *)(piVar11 + 1) = 0;
        piVar11[3] = 0;
        piVar11[4] = 0;
        if (param_2 == 0) {
          return ppiVar3;
        }
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        return ppiVar3;
      }
      if (param_1 < 0x79) {
        if (param_1 == 0x4c) {
LAB_peak__80087ab4:
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          FUN_800529cc(ppiVar3);
          return ppiVar3;
        }
        if (((0x4b < param_1) && (param_1 < 0x58)) && (0x52 < param_1)) {
LAB_peak__80087320:
          piVar11 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *piVar11 = 0;
          piVar11[1] = 0;
          piVar11[2] = 0x8c;
          *(undefined *)((int)piVar11 + 0xe) = 0;
          *(undefined *)((int)piVar11 + 0xf) = 0;
          *(undefined *)((int)piVar11 + 0x11) = 0;
          *(undefined *)((int)piVar11 + 0x12) = 0;
          *(undefined *)((int)piVar11 + 0x13) = 0;
          uVar1 = 3;
          if (*(short *)(param_2 + 0x36) == 0xd) {
            uVar1 = 2;
          }
          *(undefined *)(piVar11 + 4) = uVar1;
          *(undefined *)(piVar11 + 5) = 0xff;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x40;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          FUN_800529cc(ppiVar3);
          ppiVar3[7] = (int *)0xffffffff;
          Vec3Copy(aiStack_48,(int *)(ppiVar3 + 3));
          local_40 = local_40 + 0x400;
          MobyUpdatePosition(aiStack_48,0x10000);
          FUN_800533d0(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          if (*(short *)((int)ppiVar3 + 0x36) == 0xe) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 0xc;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x53) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 1;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x54) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 2;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x55) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 3;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x56) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 4;
          }
          if (*(short *)((int)ppiVar3 + 0x36) != 0x57) {
            return ppiVar3;
          }
          *(undefined *)((int)ppiVar3 + 0x4f) = 5;
          return ppiVar3;
        }
      }
      else {
        if (param_1 == 0xfb) {
          piVar11 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          FUN_800529cc(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 0xe;
          if (dragonState == 3) {
            uVar1 = 0x14;
          }
          else {
            uVar1 = 0x30;
            if (dragonState != 1) goto LAB_peak__800876cc;
          }
          *(undefined *)((int)ppiVar3 + 0x57) = uVar1;
LAB_peak__800876cc:
          uVar8 = rand();
          iVar4 = (uVar8 & 7) * 4;
          local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar4);
          local_34 = 0;
          local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar4);
          Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
          uVar8 = rand();
          local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
          Vec3Add(ppiVar3 + 3,param_2 + 0xc,&local_38);
          Vec3Copy(piVar11,&local_38);
          Vec3ScaleDownByPowerOfTwo(piVar11,2);
          uVar8 = rand();
          *piVar11 = *piVar11 + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar11[1] = piVar11[1] + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar11[2] = piVar11[2] + -0x7f + (uVar8 & 0xff);
          iVar4 = rand();
          *(char *)(ppiVar3 + 0x11) = (char)iVar4;
          iVar4 = rand();
          *(char *)((int)ppiVar3 + 0x45) = (char)iVar4;
          iVar4 = rand();
          *(char *)((int)ppiVar3 + 0x46) = (char)iVar4;
          iVar4 = rand();
          *(byte *)(piVar11 + 4) = (byte)iVar4 & 0xf;
          iVar4 = rand();
          *(byte *)((int)piVar11 + 0x11) = (byte)iVar4 & 0xf;
          iVar4 = rand();
          *(byte *)((int)piVar11 + 0x12) = (byte)iVar4 & 0xf;
          piVar11[3] = *(int *)(param_2 + 0x14);
          iVar4 = rand();
          *(byte *)((int)piVar11 + 0x13) = ((byte)iVar4 & 3) + 0x10;
          return ppiVar3;
        }
        if (((0xfa < param_1) && (param_1 < 0x102)) && (0xfe < param_1)) goto LAB_peak__800874c0;
      }
    }
LAB_peak__80087adc:
    InitArrayRelated(ppiVar3);
    if (param_2 == 0) {
LAB_peak__80087af4:
      pSVar10 = &spyro;
    }
    else {
      pSVar10 = (Spyro *)(param_2 + 0xc);
    }
  }
  else {
    if (param_1 != 0x188) {
      if (param_1 < 0x189) {
        if (param_1 < 0x138) {
          if (0x134 < param_1) {
LAB_peak__800874c0:
            piVar11 = *ppiVar3;
            InitArrayRelated(ppiVar3);
            *(undefined *)(ppiVar3 + 0x14) = 0x20;
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
            FUN_800526a8(ppiVar3);
            uVar8 = rand();
            uVar9 = rand();
            uVar9 = uVar9 & 0x7ff;
            iVar4 = CosScaled(uVar9);
            iVar5 = CosScaled(uVar8 & 0xfff);
            *(short *)piVar11 = (short)((iVar4 >> 5) * iVar5 >> 0xc);
            iVar4 = CosScaled(uVar9);
            iVar5 = SinScaled(uVar8 & 0xfff);
            *(short *)((int)piVar11 + 2) = (short)((iVar4 >> 5) * iVar5 >> 0xc);
            iVar4 = SinScaled(uVar9);
            *(short *)(piVar11 + 1) = (short)(iVar4 >> 5);
            if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
              *(short *)piVar11 = *(short *)piVar11 + (short)(spyro.airMomentum.x >> 6);
              *(short *)((int)piVar11 + 2) =
                   *(short *)((int)piVar11 + 2) + (short)(spyro.airMomentum.y >> 6);
              *(short *)(piVar11 + 1) = *(short *)(piVar11 + 1) + (short)(spyro.airMomentum.z >> 6);
            }
            ppiVar3[3] = ppiVar3[3] + *(short *)piVar11;
            ppiVar3[4] = ppiVar3[4] + *(short *)((int)piVar11 + 2);
            ppiVar3[5] = ppiVar3[5] + *(short *)(piVar11 + 1);
            iVar4 = rand();
            *(ushort *)((int)piVar11 + 6) = (ushort)iVar4 & 0xf;
            iVar4 = rand();
            *(ushort *)(piVar11 + 2) = (ushort)iVar4 & 0xf;
            iVar4 = rand();
            *(ushort *)((int)piVar11 + 10) = (ushort)iVar4 & 0xf;
            piVar11[4] = *(int *)(param_2 + 0x14) + -0x40;
            uVar8 = rand();
            piVar11[3] = 0x40 - (uVar8 & 0xf);
            if (2 < *(ushort *)((int)ppiVar3 + 0x36) - 0x135) {
              return ppiVar3;
            }
            bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
            ppiVar3[0x13] = (int *)0xa18618;
LAB_peak__80087660:
            *(byte *)((int)ppiVar3 + 0x4b) = bVar2 | 0x80;
            return ppiVar3;
          }
          if (param_1 == 0x115) {
LAB_peak__8008782c:
            piVar11 = *ppiVar3;
            InitArrayRelated(ppiVar3);
            FUN_800529cc(ppiVar3);
            *(undefined *)((int)ppiVar3 + 0x4f) = 2;
            *(undefined *)(ppiVar3 + 0x13) = 0;
            *(undefined *)((int)ppiVar3 + 0x4d) = 0;
            *(undefined *)((int)ppiVar3 + 0x4e) = 0;
            *piVar11 = 0x40;
            return ppiVar3;
          }
          if (param_1 == 0x127) {
            piVar11 = *ppiVar3;
            InitArrayRelated(ppiVar3);
            ppiVar3[3] = (int *)(*(int *)(param_2 + 0xc) +
                                ((int)((uint)(ushort)sineWaveArray[*(byte *)(param_2 + 0x46) + 0x40]
                                      << 0x10) >> 0x11));
            ppiVar3[4] = (int *)(*(int *)(param_2 + 0x10) +
                                ((int)((uint)(ushort)sineWaveArray[*(byte *)(param_2 + 0x46)] <<
                                      0x10) >> 0x11));
            ppiVar3[5] = (int *)(*(int *)(param_2 + 0x14) + 0x300);
            iVar4 = ATan2Scaled(spyro.position.x - (int)ppiVar3[3],
                                spyro.position.y - (int)ppiVar3[4],0);
            uVar8 = iVar4 - (uint)*(byte *)(param_2 + 0x46) & 0xff;
            if (0x80 < uVar8) {
              uVar8 = uVar8 - 0x100;
            }
            uVar9 = uVar8;
            if ((int)uVar8 < -0x20) {
              uVar9 = 0xffffffe0;
            }
            cVar6 = (char)uVar9;
            if (0x20 < (int)uVar8) {
              cVar6 = ' ';
            }
            *(byte *)((int)ppiVar3 + 0x46) = *(byte *)(param_2 + 0x46) + cVar6;
            uVar8 = Vec2EstimateOctagonalDistance((Vec2 *)(ppiVar3 + 3),(Vec2 *)&spyro);
            iVar4 = ATan2Scaled(uVar8,spyro.unkown_heightRelated - (int)(ppiVar3[5] + -0x59),0);
            uVar8 = iVar4 - (uint)*(byte *)(param_2 + 0x45) & 0xff;
            if (0x80 < uVar8) {
              uVar8 = uVar8 - 0x100;
            }
            uVar9 = uVar8;
            if ((int)uVar8 < -0x30) {
              uVar9 = 0xffffffd0;
            }
            cVar6 = (char)uVar9;
            if (0x30 < (int)uVar8) {
              cVar6 = '0';
            }
            *(byte *)((int)ppiVar3 + 0x45) = *(byte *)(param_2 + 0x45) + cVar6;
            piVar11[1] = 0x5a;
            *piVar11 = 0;
            goto LAB_peak__80087b0c;
          }
        }
        else {
          if (param_1 == 0x13e) {
            piVar11 = *ppiVar3;
            InitArrayRelated(ppiVar3);
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
            uVar8 = rand();
            *piVar11 = (uVar8 & 0x7e) - 0x3f;
            uVar8 = rand();
            piVar11[1] = (uVar8 & 0x7e) - 0x3f;
            uVar8 = rand();
            piVar11[2] = (uVar8 & 0x7e) - 0x10;
            uVar8 = rand();
            piVar11[3] = (uVar8 & 0x1f) + 0x20;
            goto LAB_peak__80087b0c;
          }
          if (param_1 == 0x147) goto LAB_peak__8008782c;
        }
      }
      else if (param_1 < 0x1aa) {
        if (0x1a6 < param_1) goto LAB_peak__800874c0;
        if (param_1 == 0x195) {
LAB_peak__80087a40:
          InitArrayRelated(ppiVar3);
          if (param_2 == 0) {
            pSVar10 = &spyro;
          }
          else {
            pSVar10 = (Spyro *)(param_2 + 0xc);
          }
          Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar10);
          ppiVar3[5] = ppiVar3[5] + 0x80;
          piVar11 = (int *)MobyUpdatePosition(ppiVar3 + 3,0x800);
          iVar4 = (int)piVar11 - (int)ppiVar3[5];
          if (iVar4 < 0) {
            iVar4 = -iVar4;
          }
          if (iVar4 < 0x800) {
            ppiVar3[5] = piVar11;
          }
          else {
            ppiVar3[5] = ppiVar3[5] + -0x80;
          }
          goto LAB_peak__80087b0c;
        }
      }
      else {
        if (param_1 < 0x1c4) goto LAB_peak__80087ab4;
        if (param_1 == 0x1dd) goto LAB_peak__80087a40;
      }
      goto LAB_peak__80087adc;
    }
    InitArrayRelated(ppiVar3);
    *(undefined *)((int)ppiVar3 + 0x47) = 5;
    if (param_2 == 0) goto LAB_peak__80087af4;
    pSVar10 = (Spyro *)(param_2 + 0xc);
  }
  Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar10);
LAB_peak__80087b0c:
  FUN_800526a8(ppiVar3);
  return ppiVar3;
}



void Wizard_UpdateParticles(int param_1)

{
  byte bVar1;
  bool bVar2;
  char cVar3;
  short sVar4;
  int iVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  short sVar9;
  short sVar10;
  undefined4 *puVar11;
  int *dest;
  undefined4 uVar12;
  char *pcVar13;
  int iVar14;
  char *pcVar15;
  short *result;
  int local_b8;
  int local_b4;
  int local_b0;
  int local_a8;
  int local_a4;
  int local_a0;
  int aiStack_98 [4];
  int aiStack_88 [4];
  int local_78;
  int local_74;
  int local_70;
  int local_68;
  int local_64;
  int local_60;
  undefined4 local_58;
  undefined4 local_54;
  int local_50;
  int local_4c;
  int local_48;
  int local_40;
  short *local_30;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    local_40 = param_1 << 2;
    pcVar13 = ptr_headOfParticleBuffer + 1;
    local_30 = (short *)(ptr_headOfParticleBuffer + 0x18);
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar15 = ptr_headOfParticleBuffer;
    do {
      cVar3 = (char)param_1;
      switch(*pcVar15) {
      case '\0':
        Vec3ShortAdd(result,result,local_30);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + cVar3 * '\x02';
        cVar3 = (char)local_40;
        pcVar13[0xc] = pcVar13[0xc] - cVar3;
        pcVar13[0xb] = pcVar13[0xb] - cVar3;
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar13[0xd] = pcVar13[0xd] - cVar3;
        goto LAB_peak__800893d4;
      case '\x01':
        Vec3ShortAdd(result,result,local_30);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        cVar3 = (char)local_40;
        pcVar13[9] = pcVar13[9] + cVar3;
        pcVar13[0xb] = pcVar13[0xb] - cVar3;
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        pcVar13[0xc] = pcVar13[0xc] - cVar3;
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar13[0xd] = pcVar13[0xd] - cVar3;
        goto LAB_peak__800893d4;
      case '\x02':
        Vec3ShortAdd(result,result,local_30);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        cVar3 = (char)local_40;
        pcVar13[9] = pcVar13[9] + cVar3;
        pcVar13[0xb] = pcVar13[0xb] - cVar3;
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        pcVar13[0xc] = pcVar13[0xc] - cVar3;
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar13[0xd] = pcVar13[0xd] - cVar3;
        goto LAB_peak__800893d4;
      case '\x04':
        Vec3ShortScaleUpBy4(&local_b8,result);
        if ((*(ushort *)(pcVar13 + 0x1d) & 8) == 0) {
          if ((*(ushort *)(pcVar13 + 0x1d) & 1) == 0) {
            Vec3Copy(&local_a8,(int *)(*(int *)(pcVar13 + 0x17) + 0xc));
            iVar7 = CosScaled((uint)(byte)pcVar13[1] << 7);
            local_a8 = local_a8 + (iVar7 >> 2);
            iVar7 = SinScaled((uint)(byte)pcVar13[1] << 7);
            local_a4 = local_a4 + (iVar7 >> 2);
            iVar7 = CosScaled((uint)(byte)pcVar13[1] * 0x80 + 0x200);
            local_a0 = local_a0 + (iVar7 >> 2);
            Vec3Subtract(&local_a8,&local_a8,&local_b8);
            uVar8 = Vec3CalculateLengthE(&local_a8,flag3D);
            if ((0x400 < (int)uVar8) && ((byte)pcVar13[1] < 0x41)) {
              uVar12 = 0x100;
LAB_peak__800880dc:
              Vec3ScaleDownByFraction(&local_a8,uVar8,uVar12);
              goto LAB_peak__800880e8;
            }
            puVar11 = (undefined4 *)**(undefined4 **)(pcVar13 + 0x17);
            if (puVar11[5] == 1) {
              puVar11[5] = 2;
              *puVar11 = 0x20;
            }
            iVar7 = rand();
            *(ushort *)(pcVar13 + 0x1d) = ((ushort)iVar7 & 6) + 1;
            Vec3ScaleDownBy4(local_30,(int *)(*(int *)(pcVar13 + 0x17) + 0xc));
            iVar7 = rand();
            pcVar13[1] = '\0';
            *(ushort *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + ((ushort)iVar7 & 0x7f);
          }
          else {
            if ((byte)pcVar13[1] < 0x30) {
              Vec3ShortScaleUpBy4(&local_a8,local_30);
              if ((*(ushort *)(pcVar13 + 0x1d) & 2) == 0) {
                iVar7 = CosScaled((uint)(byte)pcVar13[1] << 7);
                local_a8 = local_a8 - ((int)((uint)(byte)pcVar13[1] * iVar7) >> 7);
              }
              else {
                iVar7 = CosScaled((uint)(byte)pcVar13[1] << 7);
                local_a8 = local_a8 + ((int)((uint)(byte)pcVar13[1] * iVar7) >> 7);
              }
              if ((*(ushort *)(pcVar13 + 0x1d) & 4) == 0) {
                iVar7 = SinScaled((uint)(byte)pcVar13[1] << 7);
                local_a4 = local_a4 - ((int)((uint)(byte)pcVar13[1] * iVar7) >> 7);
              }
              else {
                iVar7 = SinScaled((uint)(byte)pcVar13[1] << 7);
                local_a4 = local_a4 + ((int)((uint)(byte)pcVar13[1] * iVar7) >> 7);
              }
              local_a0 = local_a0 + (uint)(byte)pcVar13[1] * 0x20;
              Vec3Subtract(&local_a8,&local_a8,&local_b8);
              uVar8 = Vec3CalculateLengthE(&local_a8,flag3D);
              if (0x80 < (int)uVar8) {
                uVar12 = 0x80;
                goto LAB_peak__800880dc;
              }
LAB_peak__800880e8:
              Vec3Add(&local_b8,&local_b8,&local_a8);
              goto LAB_peak__800880f4;
            }
            pcVar13[1] = '\0';
            iVar7 = rand();
            *(ushort *)(pcVar13 + 0x17) = ((ushort)iVar7 & 6) - 3;
            iVar7 = rand();
            *(ushort *)(pcVar13 + 0x19) = ((ushort)iVar7 & 6) - 3;
            *(undefined2 *)(pcVar13 + 0x1b) = 0;
            *(undefined2 *)(pcVar13 + 0x1d) = 8;
          }
        }
        else {
          if (0x2f < (byte)pcVar13[1]) goto LAB_peak__800893ec;
          iVar7 = rand();
          *(ushort *)(pcVar13 + 0x17) = *(short *)(pcVar13 + 0x17) + -3 + ((ushort)iVar7 & 6);
          iVar7 = rand();
          sVar9 = *(short *)(pcVar13 + 0x1b);
          *(short *)(pcVar13 + 0x1b) = sVar9 + 1;
          *(ushort *)(pcVar13 + 0x19) = *(short *)(pcVar13 + 0x19) + -3 + ((ushort)iVar7 & 6);
          if (0x10 < (short)(sVar9 + 1)) {
            *(undefined2 *)(pcVar13 + 0x1b) = 0x10;
          }
          local_b8 = local_b8 + *(short *)(pcVar13 + 0x17);
          local_b4 = local_b4 + *(short *)(pcVar13 + 0x19);
          local_b0 = local_b0 - *(short *)(pcVar13 + 0x1b);
LAB_peak__800880f4:
          Vec3ScaleDownBy4(result,&local_b8);
          pcVar13[1] = pcVar13[1] + '\x01';
        }
        Vec3Subtract(&local_a8,&local_b8,&cameraPosition.x);
        iVar7 = local_a8;
        if (local_a8 < 0) {
          iVar7 = -local_a8;
        }
        iVar6 = local_a4;
        if (local_a4 < 0) {
          iVar6 = -local_a4;
        }
        iVar14 = local_a0;
        if (local_a0 < 0) {
          iVar14 = -local_a0;
        }
        iVar14 = iVar7 + iVar6 + iVar14;
        if (*pcVar13 == '\x03') {
          if (0x3000 < iVar14) {
            pcVar13[0xb] = -1;
            pcVar13[0xc] = -1;
            pcVar13[0xd] = -1;
            pcVar13[9] = '\x04';
            *pcVar13 = '\0';
            pcVar13[0xe] = '@';
          }
        }
        else if (iVar14 < 0x2800) {
          *pcVar13 = '\x03';
          pcVar13[0xb] = -0x80;
          pcVar13[0xc] = -0x80;
          pcVar13[0xd] = -0x80;
          pcVar13[0x10] = '\x04';
          pcVar13[0xe] = ',';
          pcVar13[0xf] = '\0';
          iVar7 = rand();
          pcVar13[9] = ((byte)iVar7 & 0xf) + 0x18;
          iVar7 = rand();
          pcVar13[10] = ((byte)iVar7 & 7) + 0xf;
        }
        break;
      case '\x05':
        if ((0x2f < (byte)pcVar13[1]) || (dest = aiStack_98, pcVar13[2] == '\0'))
        goto LAB_peak__800893ec;
        Vec3ShortScaleUpBy4(dest,result);
        iVar7 = rand();
        *(ushort *)(pcVar13 + 0x17) = *(short *)(pcVar13 + 0x17) + -3 + ((ushort)iVar7 & 6);
        iVar7 = rand();
        *(ushort *)(pcVar13 + 0x19) = *(short *)(pcVar13 + 0x19) + -3 + ((ushort)iVar7 & 6);
        *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + -1;
        Vec3ShortScaleUpBy4(aiStack_88,local_30);
        Vec3ScaleDownByPowerOfTwo(aiStack_88,2);
        Vec3Add(dest,dest,aiStack_88);
LAB_peak__80088354:
        Vec3ScaleDownBy4(result,dest);
        pcVar13[1] = pcVar13[1] + '\x01';
        break;
      case '\x06':
        dest = &local_78;
        Vec3Copy(dest,*(int **)(pcVar13 + 0x17));
        iVar6 = (uint)(byte)pcVar13[1] << 6;
        iVar14 = local_70 + *(short *)(pcVar13 + 0x1d) * 0x40;
        iVar7 = iVar6;
        if (*(short *)(pcVar13 + 0x1b) < iVar6) {
          iVar7 = (int)*(short *)(pcVar13 + 0x1b);
        }
        iVar5 = CosScaled(iVar6);
        local_78 = local_78 + (iVar7 * iVar5 >> 0xc);
        iVar6 = SinScaled(iVar6);
        local_74 = local_74 + (iVar7 * iVar6 >> 0xc);
        local_70 = *(short *)(pcVar13 + 7) * 4 + 0x40;
        if ((local_70 <= iVar14) && ((byte)pcVar13[1] < 0xc9)) goto LAB_peak__80088354;
        goto LAB_peak__800893ec;
      case '\a':
        if ((0x18 < (byte)pcVar13[1]) || (pcVar13[2] == '\0')) goto LAB_peak__800893ec;
        bVar1 = pcVar13[1];
        pcVar13[10] = pcVar13[10] + pcVar13[0x1d];
        if (bVar1 < 0xd) {
          cVar3 = bVar1 << 2;
        }
        else {
          cVar3 = ('\x18' - bVar1) * '\x04';
        }
        pcVar13[9] = cVar3;
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + *(short *)(pcVar13 + 0x17);
        pcVar13[1] = pcVar13[1] + '\x01';
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + *(short *)(pcVar13 + 0x19);
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + *(short *)(pcVar13 + 0x1b);
        break;
      case '\t':
        Vec3ShortAdd(result,result,local_30);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        bVar1 = pcVar13[1];
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar13[9] = pcVar13[9] + cVar3 * '\x02';
        goto LAB_peak__800893d4;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_peak__800893ec;
        Vec3Copy(&local_68,(int *)&spyro);
        iVar7 = CosScaled((int)*(short *)(pcVar13 + 0x17));
        local_68 = local_68 + (iVar7 >> 4);
        iVar7 = SinScaled((int)*(short *)(pcVar13 + 0x17));
        local_64 = local_64 + (iVar7 >> 4);
        local_60 = local_60 + 0x100;
        Vec3ScaleDownBy4(result,&local_68);
        sVar9 = *(short *)(pcVar13 + 0x17);
        *(short *)(pcVar13 + 0x17) = sVar9 + 0x40;
        iVar7 = CosScaled((int)(short)(sVar9 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar7 < 0) {
          iVar7 = -iVar7;
        }
        pcVar13[9] = (char)(iVar7 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar15 + 0x12);
        pcVar13[0xb] = pcVar13[0xb] + -8;
        pcVar13[0xc] = pcVar13[0xc] + -8;
        pcVar13[0xd] = pcVar13[0xd] + -8;
        if (pcVar13[0xb] == '\0') goto LAB_peak__800893ec;
        goto LAB_peak__800893dc;
      case '\f':
        pcVar13[10] = pcVar13[10] + '\b';
        pcVar13[9] = pcVar13[9] + '\x02';
        if (pcVar13[0xb] != '\0') {
          pcVar13[0xb] = pcVar13[0xb] + -8;
        }
        if (pcVar13[0xc] != '\0') {
          pcVar13[0xc] = pcVar13[0xc] + -8;
        }
        if (pcVar13[0xd] != '\0') {
          pcVar13[0xd] = pcVar13[0xd] + -8;
        }
        if ((*(uint *)(pcVar13 + 0xb) & 0xffffff) != 0) goto LAB_peak__800893dc;
        goto LAB_peak__800893ec;
      case '\x15':
        pcVar13[0x17] = pcVar13[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar8 = (uint)(byte)pcVar13[0x18] + gameSpeedMultiplyer;
        pcVar13[0x18] = (char)uVar8;
        *(short *)(pcVar13 + 3) =
             *(short *)(pcVar13 + 0x11) +
             (short)((int)((int)sineWaveArray[(byte)pcVar13[0x17] + 0x40] * (uVar8 & 0xff)) >> 0xc);
        iVar7 = (int)sineWaveArray[(byte)pcVar13[0x17]] * (uint)(byte)pcVar13[0x18];
        sVar9 = (short)gameSpeedMultiplyer;
        bVar1 = pcVar13[0x18];
        pcVar13[10] = pcVar13[10] + '\x04';
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar9 * 6;
        sVar9 = *(short *)(pcVar13 + 0x13);
        goto LAB_peak__800886e8;
      case '\x18':
        if ((byte)pcVar13[0xb] < 0xf0) {
          pcVar13[0xb] = pcVar13[0xb] + 4;
        }
        if ((byte)pcVar13[0xc] < 0xf0) {
          pcVar13[0xc] = pcVar13[0xc] + 4;
        }
        if ((byte)pcVar13[0xd] < 0xf0) {
          pcVar13[0xd] = pcVar13[0xd] + 4;
        }
        pcVar13[0x1b] = pcVar13[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar7 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar7 = dragonTimerCurrentState;
        }
        *(short *)(pcVar13 + 0x17) = (short)((int)((uint)(byte)pcVar13[0x1c] * (0x48 - iVar7)) >> 3)
        ;
        iVar7 = ((int)((0x20 - (uint)(byte)pcVar13[0x1c]) * iVar7) >> 4) + 8;
        *(short *)(pcVar13 + 0x19) = (short)iVar7;
        *(short *)(pcVar13 + 3) =
             *(short *)(pcVar13 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar13[0x1b] + 0x40] * (iVar7 * 0x10000 >> 0x10) >>
                    0xc);
        sVar9 = sineWaveArray[(byte)pcVar13[0x1b]];
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 0x15) + *(short *)(pcVar13 + 0x17) + 0x20;
        *(short *)(pcVar13 + 5) =
             *(short *)(pcVar13 + 0x13) +
             (short)((int)sVar9 * (int)*(short *)(pcVar13 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,local_30);
        if (*(short *)(pcVar13 + 0x1d) != 0) {
          *(short *)(pcVar13 + 0x1b) = *(short *)(pcVar13 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar13[0xb] - param_1;
        *(short *)(pcVar13 + 0x1d) = 1 - *(short *)(pcVar13 + 0x1d);
        pcVar13[9] = pcVar13[9] + cVar3 * '\x02';
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar13[0xb] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar13[0xc] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar13[0xc] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar13[0xd] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        bVar1 = pcVar13[1];
        pcVar13[0xd] = (char)iVar7;
        pcVar13[1] = (char)((uint)bVar1 + param_1);
        bVar2 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_peak__800893d4;
      case 'A':
        local_58._0_2_ = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        local_58._2_2_ = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar9);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + (short)local_58;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + local_58._2_2_;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar9;
        iVar7 = rand();
        local_58._0_2_ = (short)local_58 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_58._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_58 = CONCAT22(sVar9,(short)local_58);
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + (short)local_58;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar9;
        cVar3 = pcVar13[1];
        sVar9 = *(short *)(pcVar13 + 0xd) + (short)local_54;
        pcVar13[1] = cVar3 + 1U;
        bVar2 = (byte)(cVar3 + 1U) < 8;
        goto LAB_peak__800893d0;
      case 'B':
        iVar7 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar13[1] & 1U) != 0) {
              *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + *(short *)(pcVar13 + 0xf);
              *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + *(short *)(pcVar13 + 0x11);
              *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + *(short *)(pcVar13 + 0x13);
              if ((pcVar13[1] & 2U) != 0) {
                iVar6 = rand();
                *(ushort *)(pcVar13 + 0xf) = *(short *)(pcVar13 + 0xf) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar13 + 0x11) = *(short *)(pcVar13 + 0x11) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar13 + 0x13) = *(short *)(pcVar13 + 0x13) + -1 + ((ushort)iVar6 & 2);
              }
            }
            iVar7 = iVar7 + 1;
            pcVar13[1] = pcVar13[1] + '\x01';
          } while (iVar7 < param_1);
        }
        bVar2 = (byte)pcVar13[1] < 0x18;
        goto LAB_peak__800893d4;
      case 'F':
        local_58._0_2_ = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        local_58._2_2_ = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar9);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + (short)local_58;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + local_58._2_2_;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar9;
        iVar7 = rand();
        local_58._0_2_ = (short)local_58 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_58._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_58 = CONCAT22(sVar9,(short)local_58);
        if ((pcVar13[1] & 1U) != 0) {
          local_54 = CONCAT22(local_54._2_2_,(short)local_54 + -1);
        }
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + (short)local_58;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar9;
        cVar3 = pcVar13[1];
        pcVar13[1] = cVar3 + 1U;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + (short)local_54;
        if ((0x1f < (byte)(cVar3 + 1U)) || (pcVar13[2] == '\0')) goto LAB_peak__800893ec;
        cVar3 = pcVar13[0xf];
        pcVar13[0xf] = cVar3 - 3U;
        if ((byte)(cVar3 - 3U) < 0x80) {
          pcVar13[0xf] = -0x80;
        }
        cVar3 = pcVar13[0x10];
        pcVar13[0x10] = cVar3 - 4U;
        if ((byte)(cVar3 - 4U) < 0x60) {
          pcVar13[0x10] = '`';
        }
        cVar3 = pcVar13[0x13];
        pcVar13[0x11] = '\0';
        pcVar13[0x13] = cVar3 - 3U;
        if ((byte)(cVar3 - 3U) < 0xc0) {
          pcVar13[0x13] = -0x40;
        }
        cVar3 = pcVar13[0x14];
        pcVar13[0x14] = cVar3 - 4U;
        if ((byte)(cVar3 - 4U) < 0x80) {
          pcVar13[0x14] = -0x80;
        }
        cVar3 = pcVar13[0x15];
        pcVar13[0x15] = cVar3 - 6U;
        if ((byte)(cVar3 - 6U) < 0x20) {
          pcVar13[0x15] = ' ';
        }
        break;
      case 'G':
        cVar3 = pcVar13[1];
        pcVar13[1] = cVar3 + 1U;
        if ((0x1f < (byte)(cVar3 + 1U)) || (pcVar13[2] == '\0')) goto LAB_peak__800893ec;
        local_50 = (int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3);
        local_4c = (int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5);
        local_48 = (int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7);
        uVar8 = rand();
        local_50 = local_50 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_4c = local_4c + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_48 = local_48 + -1 + (uVar8 & 2);
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + (short)local_50;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + (short)local_4c;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + (short)local_48;
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 9) - (short)local_50;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 0xb) - (short)local_4c;
        pcVar13[0x13] = pcVar13[0x13] + -2;
        pcVar13[0x15] = pcVar13[0x15] + -4;
        pcVar13[0x14] = pcVar13[0x14] + -2;
        pcVar13[0x10] = pcVar13[0x10] + -3;
        pcVar13[0xf] = pcVar13[0xf] + -3;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 0xd) - (short)local_48;
        pcVar13[0x11] = pcVar13[0x11] + -3;
        break;
      case 'H':
        cVar3 = pcVar13[1];
        pcVar13[1] = cVar3 + 1U;
        if ((0x2f < (byte)(cVar3 + 1U)) || (pcVar13[2] == '\0')) goto LAB_peak__800893ec;
        local_58 = (int)*(short *)(pcVar13 + 3) - (int)*(short *)(pcVar13 + 9) >> 1;
        local_54 = (int)*(short *)(pcVar13 + 5) - (int)*(short *)(pcVar13 + 0xb) >> 1;
        local_50 = (int)*(short *)(pcVar13 + 7) - (int)*(short *)(pcVar13 + 0xd) >> 1;
        uVar8 = rand();
        local_58 = local_58 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_54 = local_54 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_50 = local_50 + -1 + (uVar8 & 2);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + (short)local_58;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + (short)local_54;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + (short)local_50;
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 3) + (short)local_58 * -2;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 5) + (short)local_54 * -2;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 7) + (short)local_50 * -2;
        break;
      case 'L':
        pcVar13[0x17] = pcVar13[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar8 = (uint)(byte)pcVar13[0x18] + gameSpeedMultiplyer;
        pcVar13[0x18] = (char)uVar8;
        *(short *)(pcVar13 + 3) =
             *(short *)(pcVar13 + 0xf) +
             (short)((int)((int)sineWaveArray[(byte)pcVar13[0x17] + 0x40] * (uVar8 & 0xff)) >> 0xc);
        iVar7 = (int)sineWaveArray[(byte)pcVar13[0x17]] * (uint)(byte)pcVar13[0x18];
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + (short)gameSpeedMultiplyer * 6;
        bVar1 = pcVar13[0x18];
        sVar9 = *(short *)(pcVar13 + 0x11);
LAB_peak__800886e8:
        *(short *)(pcVar13 + 5) = sVar9 + (short)(iVar7 >> 0xc);
        if (0xc0 < bVar1) goto LAB_peak__800893ec;
        break;
      case 'M':
        sVar10 = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        sVar4 = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar9);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + sVar10;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + sVar4;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar9;
        sVar4 = sVar4 + 1;
        local_58 = CONCAT22(sVar4,sVar10);
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + sVar10;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar4;
        cVar3 = pcVar13[1];
        pcVar13[1] = cVar3 + 1U;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + sVar9;
        if (0x1f < (byte)(cVar3 + 1U)) goto LAB_peak__800893ec;
        break;
      case 'N':
        cVar3 = pcVar13[1];
        pcVar13[1] = cVar3 + 1U;
        if ((0x27 < (byte)(cVar3 + 1U)) || (pcVar13[2] == '\0')) goto LAB_peak__800893ec;
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + *(short *)(pcVar13 + 0xf);
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + *(short *)(pcVar13 + 0x11);
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + *(short *)(pcVar13 + 0x13);
        iVar7 = rand();
        *(ushort *)(pcVar13 + 0xf) = *(short *)(pcVar13 + 0xf) + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        *(ushort *)(pcVar13 + 0x11) = *(short *)(pcVar13 + 0x11) + -1 + ((ushort)iVar7 & 2);
        uVar8 = rand();
        iVar7 = (*(ushort *)(pcVar13 + 0x13) - 1) + (uVar8 & 2);
        *(short *)(pcVar13 + 0x13) = (short)iVar7;
        if (2 < iVar7 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar13 + 0x13) = 2;
        }
        if (*(short *)(pcVar13 + 0x13) < -4) {
          *(undefined2 *)(pcVar13 + 0x13) = 0xfffc;
        }
        pcVar13[0xb] = pcVar13[0xb] + -2;
        pcVar13[0xd] = pcVar13[0xd] + -1;
        pcVar13[0xc] = pcVar13[0xc] + -2;
        break;
      case 'O':
        sVar10 = (short)((int)*(short *)(pcVar13 + 9) - (int)*(short *)(pcVar13 + 3) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar13 + 0xb) - (int)*(short *)(pcVar13 + 5) >> 1);
        local_58 = CONCAT22(sVar9,sVar10);
        sVar4 = (short)((int)*(short *)(pcVar13 + 0xd) - (int)*(short *)(pcVar13 + 7) >> 1);
        local_54 = CONCAT22(local_54._2_2_,sVar4);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + sVar10;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + sVar9;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + sVar4;
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + sVar10;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar9;
        cVar3 = pcVar13[1];
        pcVar13[1] = cVar3 + 1U;
        *(short *)(pcVar13 + 0xd) = *(short *)(pcVar13 + 0xd) + sVar4;
        if ((0x17 < (byte)(cVar3 + 1U)) || (pcVar13[2] == '\0')) goto LAB_peak__800893ec;
        pcVar13[0xf] = pcVar13[0xf] + -3;
        pcVar13[0x13] = pcVar13[0x13] + -3;
        pcVar13[0x10] = pcVar13[0x10] + -4;
        pcVar13[0x14] = pcVar13[0x14] + -4;
        if (5 < (byte)pcVar13[0x15]) {
          pcVar13[0x15] = pcVar13[0x15] - 6;
        }
        break;
      case 'P':
        sVar10 = *(short *)(pcVar13 + 9) - *(short *)(pcVar13 + 3);
        sVar4 = *(short *)(pcVar13 + 0xb) - *(short *)(pcVar13 + 5);
        local_58 = CONCAT22(sVar4,sVar10);
        sVar9 = *(short *)(pcVar13 + 7);
        *(short *)(pcVar13 + 3) = *(short *)(pcVar13 + 3) + sVar10;
        *(short *)(pcVar13 + 5) = *(short *)(pcVar13 + 5) + sVar4;
        *(short *)(pcVar13 + 7) = *(short *)(pcVar13 + 7) + (*(short *)(pcVar13 + 0xd) - sVar9);
        sVar9 = (*(short *)(pcVar13 + 0xd) - sVar9) + -1;
        local_54 = CONCAT22(local_54._2_2_,sVar9);
        *(short *)(pcVar13 + 9) = *(short *)(pcVar13 + 9) + sVar10;
        *(short *)(pcVar13 + 0xb) = *(short *)(pcVar13 + 0xb) + sVar4;
        cVar3 = pcVar13[1];
        sVar9 = *(short *)(pcVar13 + 0xd) + sVar9;
        pcVar13[1] = cVar3 + 1U;
        bVar2 = (byte)(cVar3 + 1U) < 0x20;
LAB_peak__800893d0:
        *(short *)(pcVar13 + 0xd) = sVar9;
LAB_peak__800893d4:
        if (bVar2) {
LAB_peak__800893dc:
          if (pcVar13[2] != '\0') break;
        }
LAB_peak__800893ec:
        FUN_80053608(pcVar15);
      }
      pcVar13 = pcVar13 + 0x20;
      result = result + 0x10;
      local_30 = local_30 + 0x10;
      pcVar15 = pcVar15 + 0x20;
    } while (*pcVar13 != -1);
  }
  return;
}



void Wizard_CreateParticle(int param_1,undefined4 param_2,int **param_3,int *param_4)

{
  bool bVar1;
  char cVar2;
  short extraout_var;
  undefined *puVar3;
  uint uVar4;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  undefined uVar8;
  short sVar9;
  int *piVar10;
  int iVar11;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int aiStack_80 [4];
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  int local_4c;
  int local_48;
  int local_40;
  int local_30;
  
  iVar11 = 0;
  if (0 < param_1) {
    local_30 = 0;
    local_40 = param_1;
    do {
      uVar8 = (undefined)param_2;
      cVar2 = (char)param_4;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xf] = 0x2e;
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_peak__80089f28;
      case 1:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        if (bVar1) {
          uVar8 = 8;
        }
        else {
          uVar8 = 0x10;
        }
        puVar5[10] = uVar8;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x60;
        goto LAB_peak__80089f10;
      case 2:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_90 = (uVar7 & 0x3f) - 0x20;
        uVar7 = rand();
        local_8c = (uVar7 & 0x3f) - 0x20;
        local_88 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),&local_90);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x20;
        iVar6 = rand();
        puVar5[0xf] = 0x2e;
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_peak__80089f28;
      case 4:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(int **)(puVar5 + 0x18) = param_4;
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 0xf) + 0x18;
        iVar6 = rand();
        puVar5[0xb] = ((byte)iVar6 & 7) + 0xf;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        puVar5[0xf] = 0x2c;
        goto LAB_peak__80089f28;
      case 5:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x1f + ((ushort)iVar6 & 0x3e);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x1f + ((ushort)iVar6 & 0x3e);
        iVar6 = rand();
        *(undefined2 *)(puVar5 + 0x18) = 0;
        *(undefined2 *)(puVar5 + 0x1a) = 0;
        *(undefined2 *)(puVar5 + 0x1c) = 0;
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x1f + ((ushort)iVar6 & 0x3e);
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 7) + 0xc;
        iVar6 = rand();
        puVar5[0xb] = ((byte)iVar6 & 7) + 10;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        puVar5[0xf] = 0x2c;
        goto LAB_peak__80089f28;
      case 6:
        piVar10 = *param_3;
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)(param_3 + 3));
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(int ***)(puVar5 + 0x18) = param_3 + 3;
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x100 + ((ushort)iVar6 & 0x1ff);
        *(short *)(puVar5 + 0x1c) = (short)piVar10[1];
        iVar6 = *piVar10;
        puVar5[10] = 0x20;
        puVar5[0xb] = 0x14;
        *(short *)(puVar5 + 0x1e) = (short)(iVar6 >> 6);
        if (*(char *)((int)param_3 + 0x49) == '\0') {
          if (levelIDPortalExit != 0x32) {
            puVar5[0xc] = 0x80;
            goto LAB_peak__80089918;
          }
switchD_peak__8008988c_caseD_1:
          puVar5[0xc] = 0x80;
LAB_peak__80089908:
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          goto switchD_peak__8008988c_caseD_8;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          goto switchD_peak__8008988c_caseD_8;
        case 1:
          goto switchD_peak__8008988c_caseD_1;
        case 2:
          puVar5[0xc] = 0;
          goto LAB_peak__80089908;
        case 3:
          puVar5[0xc] = 0;
LAB_peak__80089918:
          puVar5[0xd] = 0x80;
          break;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          break;
        case 5:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          break;
        case 6:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0x40;
          puVar5[0xe] = 0;
          goto switchD_peak__8008988c_caseD_8;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x40;
          break;
        default:
          goto switchD_peak__8008988c_caseD_8;
        }
        puVar5[0xe] = 0x80;
switchD_peak__8008988c_caseD_8:
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 0;
        puVar5[0x10] = 0;
        break;
      case 7:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        if (param_4 != (int *)0x0) {
          uVar7 = rand();
          *(short *)(puVar5 + 4) =
               *(short *)(puVar5 + 4) + (short)((int)param_4 * ((uVar7 & 0xfe) - 0x7f) >> 8);
          uVar7 = rand();
          *(short *)(puVar5 + 6) =
               *(short *)(puVar5 + 6) + (short)((int)param_4 * ((uVar7 & 0xfe) - 0x7f) >> 8);
          uVar7 = rand();
          *(short *)(puVar5 + 8) =
               *(short *)(puVar5 + 8) + (short)((int)param_4 * ((uVar7 & 0xfe) - 0x30) >> 8);
        }
        puVar5[10] = puVar5[2] << 2;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x18) = ((ushort)iVar6 & 0xe) - 7;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x1a) = ((ushort)iVar6 & 0xe) - 7;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x1c) = ((ushort)iVar6 & 0xe) - 7;
        iVar6 = rand();
        puVar5[0xf] = 0x2e;
        *(ushort *)(puVar5 + 0x1e) = ((ushort)iVar6 & 0xf) + 6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_peak__80089f28;
      case 9:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar8 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar5[0xc] = 0x80;
              puVar5[0xd] = 0x80;
              puVar5[0xe] = 0x80;
              goto LAB_peak__80089afc;
            }
            puVar5[0xc] = 0xe0;
          }
          else {
            puVar5[0xc] = 0xf0;
            uVar8 = 0x60;
          }
          puVar5[0xd] = uVar8;
          puVar5[0xe] = 0;
        }
        else {
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
        }
LAB_peak__80089afc:
        puVar5[0xf] = 0x2e;
        goto LAB_peak__80089f28;
      case 10:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)&spyro);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_8006e438)[local_30];
        puVar5[0xd] = (&DAT_8006e439)[local_30];
        uVar8 = (&DAT_8006e43a)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar8;
        *(short *)(puVar5 + 0x18) = (short)(((local_40 - iVar11) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        puVar5[0x11] = 4;
        sVar9 = *(short *)((int)param_3 + 0x36);
        if (sVar9 == 0x22) {
          Vec3Copy(aiStack_80,(int *)(param_3 + 3));
        }
        else if ((sVar9 == 0xad) || (sVar9 == 0xb5)) {
          iVar6 = (int)param_4 >> 0x18;
          if (iVar6 < 6) {
            puVar3 = (undefined *)0x8006e4e0;
            goto LAB_peak__80089ca8;
          }
          puVar5[1] = 5;
          puVar5[0x11] = 0x16;
          Vec3Copy(aiStack_80,(int *)(iVar6 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar9 == 0x78) {
            puVar3 = &DAT_8006e570;
          }
          else {
            puVar3 = &DAT_8006e498;
            iVar6 = iVar11;
LAB_peak__80089ca8:
            puVar3 = puVar3 + iVar6 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar3,aiStack_80);
          Vec3Add(aiStack_80,aiStack_80,param_3 + 3);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),aiStack_80);
        puVar5[0xd] = (char)((uint)param_4 >> 8);
        puVar5[0xc] = cVar2;
        puVar5[0xe] = (char)((uint)param_4 >> 0x10);
        puVar5[0xf] = 0x2e;
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 7) + 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0x10] = 0;
        break;
      case 0x15:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),(int *)param_3);
        cVar2 = cVar2 * '\x02';
        if (0xf < ((uint)param_4 & 0x1f)) {
          cVar2 = cVar2 + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xc] = ~(byte)(((uint)param_4 & 0xf) << 4);
        cVar2 = (char)((uint)param_4 & 0xf);
        puVar5[0xe] = cVar2 * -8 + -0x80;
        puVar5[10] = cVar2 * -2 + '0';
        puVar5[0xb] = (char)((int)param_4 << 1);
        puVar5[0xd] = 0xff;
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 2;
        puVar5[0x10] = 0;
        break;
      case 0x18:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),(int *)param_3);
        puVar5[10] = 0x30;
        puVar5[0x11] = 8;
        *(short *)(puVar5 + 0x18) = (short)(iVar11 << 5);
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        uVar8 = (undefined)(iVar11 << 4);
        puVar5[0xb] = uVar8;
        puVar5[0xf] = 0x2e;
        puVar5[0x10] = 0;
        *(undefined2 *)(puVar5 + 0x1a) = 0x10;
        puVar5[0x1c] = uVar8;
        puVar5[0x1d] = (char)iVar11;
        break;
      case 0x21:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_70,(int *)&spyro);
          local_68 = spyro.unkown_heightRelated;
          uVar7 = rand();
          local_70 = local_70 + -0x1f + (uVar7 & 0x3e);
          uVar7 = rand();
          local_6c = local_6c + -0x1f + (uVar7 & 0x3e);
        }
        else {
          local_70 = 0x164;
          local_6c = 0;
          local_68 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_70,&local_70);
          Vec3Add(&local_70,&local_70,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_70);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),(int *)param_3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x20;
LAB_peak__80089f10:
        puVar5[0xf] = 0x2e;
        puVar5[0xc] = uVar8;
        puVar5[0xd] = uVar8;
        puVar5[0xe] = uVar8;
LAB_peak__80089f28:
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x41:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 3;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)(param_3 + 3));
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        puVar5[0x17] = 0;
        puVar5[0x10] = 0x80;
        puVar5[0x11] = 0x80;
        puVar5[0x12] = 0x80;
        puVar5[0x14] = 0xc0;
        puVar5[0x15] = 0xc0;
        puVar5[0x16] = 0xc0;
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + 0x136 + ((ushort)iVar6 & 0xf);
        puVar5[0x13] = 0x50;
        *(undefined2 *)(puVar5 + 0xc) = *(undefined2 *)(puVar5 + 6);
        *(undefined2 *)(puVar5 + 10) = *(undefined2 *)(puVar5 + 4);
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + -0x20;
        break;
      case 0x42:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        piVar10 = param_3[2];
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)((int)piVar10 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_peak__8008a100;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_peak__8008a100;
        case 2:
          puVar5[0xc] = 0;
LAB_peak__8008a100:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_peak__8008a148;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_peak__8008a148;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_peak__8008a148;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_peak__8008a148:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        uVar7 = rand();
        local_60 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_5c = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_58 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_60 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_5c * 4;
        sVar9 = (short)local_58;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_60 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_5c * 2;
        goto LAB_peak__8008a80c;
      case 0x47:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        uVar7 = rand();
        local_60 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_5c = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_58 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_60 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_5c * 4;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + (short)local_58 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_60;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_5c;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_58;
        break;
      case 0x4c:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x10),(int *)param_3);
        cVar2 = cVar2 * '\x02';
        if (0xf < ((uint)param_4 & 0x1f)) {
          cVar2 = cVar2 + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xc] = ~(byte)(((uint)param_4 & 0xf) << 4);
        puVar5[0xe] = (char)((uint)param_4 & 0xf) * -8 + -0x80;
        puVar5[0xf] = 0x40;
        puVar5[0xd] = 0xff;
        puVar5[10] = 2;
        break;
      case 0x4d:
        puVar5 = (undefined *)AllocateParticleToBuffer(4);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        CosScaled(uVar7 & 0xfff);
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + extraout_var;
        uVar4 = rand();
        SinScaled(uVar4 & 0x7ff);
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + extraout_var_00;
        SinScaled(uVar7 & 0xfff);
        puVar5[0x17] = 0x7f;
        puVar5[0x11] = 0x40;
        puVar5[0x12] = 0x60;
        puVar5[0x16] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x10] = 0x80;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0x80;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar6 & 1);
        iVar6 = rand();
        puVar5[0xc] = (byte)iVar6 | 0x80;
        uVar7 = rand();
        uVar7 = (uVar7 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar7;
        if ((byte)puVar5[0xc] < uVar7) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar6 = rand();
        puVar5[0xe] = ((byte)iVar6 & 0x3f) + 0x40;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3Add(&local_60,param_3,param_4);
        uVar7 = rand();
        local_60 = local_60 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_5c = local_5c + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_58 = local_58 + -0x40 + (uVar7 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_60);
        puVar5[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0xa0;
          puVar5[0x12] = 0;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = (byte)iVar6 | 0xe0;
          puVar5[0x16] = 0x80;
        }
        else {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x12] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = ((byte)iVar6 & 0x1f) + 0xa0;
          iVar6 = rand();
          puVar5[0x16] = ((byte)iVar6 & 0x1f) + 0xa0;
        }
        puVar5[0x13] = 0x50;
        break;
      case 0x50:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_50 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_4c = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_48 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + (short)local_50 * 4;
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + (short)local_4c * 4;
        sVar9 = (short)local_48;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_50 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_4c * 2;
LAB_peak__8008a80c:
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + sVar9 * 2;
      }
      local_30 = local_30 + 4;
      iVar11 = iVar11 + 1;
    } while (iVar11 < local_40);
  }
  return;
}



void FUN_stone__8007af50(int **param_1)

{
  int aiStack_20 [4];
  
  gameState = GAMESTATE_BALLOONIST;
  balloonistState = 0;
  DAT_800777ec = 0;
  balloonistCursorPlacement = 0;
                    // WARNING: Read-only address (ram,0x8007784c) is written
  isInDragonState = 1;
  DAT_8007579c = 1;
  DAT_80077850 = ptr_startOfCurrentLevelMobys + **param_1 * 0x58;
  DAT_8007784c = param_1;
  DAT_80077820 = ATan2Scaled(cameraPosition.x - (int)param_1[3],cameraPosition.y - (int)param_1[4],1
                            );
  Vec3Subtract(aiStack_20,&cameraPosition.x,(int *)(param_1 + 3));
  DAT_80077824 = Vec3CalculateLengthE(aiStack_20,flag2D);
  DAT_80077828 = cameraPosition.z;
  DAT_8007783c = 0x52e;
  DAT_80077838 = (uint)*(byte *)((int)param_1 + 0x46) * 0x10 - 0x312 & 0xfff;
  DAT_80077840 = (int)param_1[5] + 0x58f;
  return;
}



void FUN_stone__8007b08c(void)

{
  ExitFairyOrBalloonist();
  spyro.headAngle.pitch = 0;
  spyro.headAngle.pad2 = 0;
  spyro.unkown1._1_1_ = 0;
  if (ptr_SparxMoby != 0) {
    *(undefined *)(ptr_SparxMoby + 0x50) = 0x10;
  }
  return;
}



void FUN_stone__8007b0d0(void)

{
  undefined4 uVar1;
  LevelIDS LVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int *outputArray;
  uint local_78;
  uint local_74;
  int local_70;
  short local_68;
  short local_66;
  short local_64;
  uint local_60;
  uint local_5c;
  int local_58;
  uint local_50;
  uint local_4c;
  int local_48;
  uint local_40;
  uint local_3c;
  int local_38;
  uint local_30;
  uint local_2c;
  int local_28;
  
  if (balloonistState < 4) {
    DAT_800700f8 = 0;
    DAT_800700f4 = DAT_8007784c;
    FUN_800522c0(&DAT_800700f4,0);
  }
  switch(balloonistState) {
  case 0:
    if (0x5f < DAT_800777ec) {
      iVar6 = CosScaled(DAT_80077838);
      cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar6 * DAT_8007783c >> 0xc);
      iVar6 = SinScaled(DAT_80077838);
      cameraPosition.z = DAT_80077840;
      cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar6 * DAT_8007783c >> 0xc);
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      balloonistState = 1;
      DAT_800777ec = 0;
      spyro.RelativeSparxAngle.roll = (char)((int)DAT_8007781c >> 4);
      spyro.nextAnim = '\0';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    iVar6 = SinScaled((DAT_800777ec << 0xb) / 0x60 + -0x400);
    iVar6 = iVar6 + 0x1000;
    if (DAT_800777ec == gameSpeedMultiplyer) {
      if (ptr_SparxMoby != (int *)0x0) {
        *(undefined *)(ptr_SparxMoby + 0x14) = 0;
        *(undefined *)((int)ptr_SparxMoby + 0x51) = 0;
        if (*(int *)(*ptr_SparxMoby + 0xc) != 0) {
          SetToZero();
          *(undefined4 *)(*ptr_SparxMoby + 0xc) = 0;
        }
      }
      backupSuperFlameTimer = superFlameTimer;
      Unk_UpdateSpyroAfterEvents(1);
      spyro.currentAnim = '\x01';
      spyro.nextAnim = '\x01';
      spyro.nextKeyframe = '\x01';
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = 0x4a0;
      DAT_80077810 = 0;
      DAT_80077814 = 0x164;
      Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&DAT_8007780c,&DAT_8007780c);
      Vec3Add(&DAT_8007780c,&DAT_8007780c,DAT_8007784c + 0xc);
      DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      DAT_8007781c = ATan2Scaled(local_78,local_74,1);
    }
    if (DAT_800777ec < 0x18) {
      iVar3 = SinScaled((DAT_800777ec << 0xb) / 0x18 + -0x400);
      iVar3 = iVar3 + 0x1000;
      if ((DAT_8007781c - DAT_80077818 & 0xfff) < 0x801) {
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
      }
      else {
LAB_stone__8007b544:
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 - (iVar4 * iVar3 >> 0xd);
      }
LAB_stone__8007b564:
      spyro.RelativeSparxAngle.roll = (char)(iVar3 >> 4);
      uVar1._0_1_ = '\b';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
LAB_stone__8007b574:
      spyro._88_4_ = uVar1;
    }
    else {
      if (0x47 < DAT_800777ec) {
        iVar3 = SinScaled(((DAT_800777ec + -0x48) * 0x800) / 0x18 + -0x400);
        iVar3 = iVar3 + 0x1000;
        if (DAT_800777ec - gameSpeedMultiplyer < 0x48) {
          DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
          spyro.nextAnim = '\x03';
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\b';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          DAT_8007781c = (uint)*(byte *)(DAT_8007784c + 0x46) * 0x10 - 0x800 & 0xfff;
        }
        if (0x800 < (DAT_8007781c - DAT_80077818 & 0xfff)) goto LAB_stone__8007b544;
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
        goto LAB_stone__8007b564;
      }
      iVar3 = SinScaled(((DAT_800777ec + -0x18) * 0x800) / 0x30 + -0x400);
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      Vec3Scale(&local_78,&local_78,iVar3 + 0x1000);
      Vec3ScaleDownByPowerOfTwo((int *)&local_78,0xd);
      Vec3Add(&spyro,&DAT_80077800,&local_78);
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      spyro._88_4_ = (int)uVar5 >> 1;
      if ((int)spyro._88_4_ < 4) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      uVar1._0_1_ = '\x10';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
      if (0x10 < (int)spyro._88_4_) goto LAB_stone__8007b574;
    }
    spyro.RelativeSparxAngle.yaw = '\0';
    spyro.RelativeSparxAngle.pitch = '\0';
    spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
    UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
    FUN_80049fac(1);
    FlameButAlsoNotFlame(gameSpeedMultiplyer);
    if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
    }
    else {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
    }
    iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
    iVar4 = CosScaled(iVar3);
    cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar4 * iVar7 >> 0xc);
    iVar3 = SinScaled(iVar3);
    local_78 = 0x220;
    local_70 = 0x340;
    local_74 = 0;
    cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar3 * iVar7 >> 0xc);
    cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
    Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&local_78,&local_78);
    Vec3Add(&local_78,&local_78,DAT_8007784c + 0xc);
    Vec3Subtract((int *)&local_78,(int *)&local_78,&cameraPosition.x);
    if (DAT_800777ec < 0x20) {
      local_68 = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      local_66 = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      local_64 = (short)iVar6;
      iVar6 = FUN_8001796c((int)local_68,(int)cameraAngle.roll);
      cameraAngle.roll = cameraAngle.roll + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_66,(int)cameraAngle.pitch);
      cameraAngle.pitch = cameraAngle.pitch + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_64,(int)cameraAngle.yaw);
      cameraAngle.yaw = cameraAngle.yaw + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
    }
    else {
      cameraAngle.roll = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      cameraAngle.yaw = (short)iVar6;
    }
    (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
    Maybe_SoundEffectProcessing();
    break;
  case 1:
    if (balloonistDialogue < 0x1e) {
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x51) {
        return;
      }
      iVar6 = balloonistDialogue % 6;
      if (iVar6 == 0) {
        iVar3 = balloonistDialogue + 1;
      }
      else if (iVar6 < 3) {
        if ((balloonistDialogue < 3) && (requirementArtisans < 2)) {
          (*ptr_OverlayBalloonistStayHere)();
          iVar3 = balloonistDialogue;
        }
        else if (balloonistDialogue == 0xe) {
          do {
            iVar6 = rand();
            iVar6 = iVar6 % 5;
            if ((iVar6 == 0) && (DAT_80076fec == 0)) {
              iVar3 = 0x21;
LAB_stone__8007bb6c:
              balloonistDialogue = iVar3;
            }
            else {
              if ((iVar6 == 1) && (DAT_80077004 == 0)) {
                iVar3 = 0x22;
                goto LAB_stone__8007bb6c;
              }
              if ((iVar6 == 2) && (DAT_80077008 == 0)) {
                iVar3 = 0x23;
                goto LAB_stone__8007bb6c;
              }
              if (((iVar6 == 3) && (iVar3 = 0x24, DAT_80077018 < 2)) ||
                 ((iVar6 == 4 && (iVar3 = 0x25, DAT_80077024 == 0)))) goto LAB_stone__8007bb6c;
            }
            iVar3 = balloonistDialogue;
          } while (balloonistDialogue == 0xe);
        }
        else {
          balloonistDialogue = 0x1e;
          iVar3 = balloonistDialogue;
        }
      }
      else if (iVar6 == 3) {
        iVar3 = balloonistDialogue + 2;
      }
      else {
        iVar3 = 0x1f;
        if (iVar6 == 4) {
          iVar3 = balloonistDialogue + 1;
        }
      }
      balloonistDialogue = iVar3;
      DAT_800777ec = 0;
      return;
    }
    if (balloonistDialogue == 0x1e) {
      iVar6 = 1;
      do {
        if ((&unlockedHWs)[iVar6] != '\x02') break;
        iVar6 = iVar6 + 1;
      } while (iVar6 < 6);
      if ((currentButtonOneFrame & UP_BUTTON) == 0) {
        if ((currentButtonOneFrame & DOWN_BUTTON) != 0) {
          balloonistCursorPlacement = balloonistCursorPlacement + 1;
          if (iVar6 <= balloonistCursorPlacement) {
            balloonistCursorPlacement = 0;
          }
          goto LAB_stone__8007bc78;
        }
      }
      else {
        balloonistCursorPlacement = balloonistCursorPlacement + -1;
        if (balloonistCursorPlacement < 0) {
          balloonistCursorPlacement = iVar6 + -1;
        }
LAB_stone__8007bc78:
        DAT_800777ec = 0x20;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        levelID = balloonistCursorPlacement * 10;
        if (levelIDPortalExit <= (int)levelID) {
          levelID = levelID + ARTISANS_ID;
        }
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)levelID / 10 + -1;
        return;
      }
    }
    else {
      if (1 < balloonistDialogue - 0x1fU) {
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
          return;
        }
        if (DAT_800777ec < 0x51) {
          return;
        }
        if ((balloonistDialogue == 0x24) || (balloonistDialogue == 0x26)) {
          balloonistCursorPlacement = 0;
          balloonistDialogue = 0x1e;
          balloonistRandomGreeting = 1;
          return;
        }
        if (balloonistDialogue == 0x25) {
          DAT_800777ec = 0;
          balloonistDialogue = 0x26;
          return;
        }
        if (balloonistDialogue == 0x21) {
          LVar2 = STONE_HILL_ID;
        }
        else if (balloonistDialogue == 0x22) {
          LVar2 = DRY_CANYON_ID;
        }
        else {
          LVar2 = CLIFF_TOWN_ID;
          if (balloonistDialogue != 0x23) goto LAB_stone__8007bf54;
        }
        levelID = LVar2;
LAB_stone__8007bf54:
        balloonistDropoffLocation = balloonistDialogue + -0x1b;
        DAT_800777ec = 0;
        balloonistDialogue = 0x20;
        return;
      }
      if ((currentButtonOneFrame & (UP_BUTTON|DOWN_BUTTON)) != 0) {
        DAT_800777ec = 0x20;
        balloonistCursorPlacement = 1 - balloonistCursorPlacement;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        if (balloonistDialogue != 0x1f) {
          balloonistState = 2;
          DAT_800777ec = 0;
          return;
        }
        levelID = levelIDPortalExit + ARTISANS_ID;
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)(levelIDPortalExit + ARTISANS_ID) / 10 + -1;
        return;
      }
      if (balloonistDialogue != 0x1f) {
        balloonistCursorPlacement = 0;
        balloonistDialogue = 0x1e;
        balloonistRandomGreeting = 1;
        return;
      }
    }
    (*ptr_OverlayBalloonistStayHere)();
    break;
  case 2:
    if (DAT_800777ec < 0x66) {
      iVar6 = SinScaled((DAT_800777ec * 0x800) / 0x66 + -0x400);
      iVar6 = iVar6 + 0x1000;
      if (DAT_800777ec == gameSpeedMultiplyer) {
        *(undefined *)((int)DAT_80077850 + 0x4a) = 0xff;
        DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                   cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
        Vec3Subtract((int *)&local_60,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
        DAT_80077824 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        DAT_8007782c = (int)cameraAngle.roll;
        DAT_80077830 = (int)cameraAngle.pitch;
        DAT_80077834 = (int)cameraAngle.yaw;
        DAT_80077828 = cameraPosition.z;
        DAT_8007783c = 0xe00;
        DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 - 0x480 & 0xfff;
        DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
        DAT_80077848 = *(int *)(DAT_8007784c + 0x14) + 0x488;
        Vec3Copy(&DAT_80077800,(int *)&spyro);
        Vec3Copy(&DAT_8007780c,(int *)(DAT_8007784c + 0xc));
        spyro.currentKeyfame = spyro.nextKeyframe;
        spyro.nextAnim = '\x05';
        spyro.nextKeyframe = '\0';
        spyro.maybe_AnimSpeedRelated = '\0';
        spyro.animSpeed = '\a';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (DAT_800777ec < 0x30) {
        spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec) / 0x30;
        spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec) / 0x30;
        iVar3 = SinScaled(DAT_800777ec << 5);
        spyro.position.z = DAT_80077808 + (iVar3 * 10) / 0x24;
        spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
        UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
        FUN_80049fac(1);
      }
      else {
        if (DAT_800777ec - gameSpeedMultiplyer < 0x30) {
          DAT_80077808 = DAT_80077808 + 0x325;
          DAT_80077800 = DAT_8007780c;
          DAT_80077804 = DAT_80077810;
          Vec3Copy(&DAT_8007780c,(int *)((int)DAT_80077850 + 0xc));
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\x04';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
        }
        iVar3 = DAT_800777ec + -0x36;
        if (0x35 < DAT_800777ec - gameSpeedMultiplyer) {
          spyro.animSpeed = '\a';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * iVar3) / 0x30;
          spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * iVar3) / 0x30;
          iVar3 = SinScaled(iVar3 * 0x20);
          spyro.position.z = DAT_80077808 + (iVar3 >> 2);
        }
      }
      if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_60,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      uVar5 = Vec3CalculateLengthE((int *)&local_60,flag2D);
      iVar3 = ATan2Scaled(uVar5,-local_58,1);
      local_66 = (short)iVar3;
      iVar3 = ATan2Scaled(local_60,local_5c,1);
      local_64 = (short)iVar3;
      iVar3 = FUN_8001796c((int)local_66,DAT_80077830);
      cameraAngle.pitch = (short)DAT_80077830 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      iVar3 = FUN_8001796c((int)local_64,DAT_80077834);
      cameraAngle.yaw = (short)DAT_80077834 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      *(int *)((int)DAT_80077850 + 0x14) =
           DAT_80077844 + ((DAT_80077848 - DAT_80077844) * iVar6 >> 0xd);
    }
    else {
      balloonistState = 3;
      DAT_800777ec = 0;
    }
    break;
  case 3:
    if (0x7f < DAT_800777ec) {
      DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                 cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
      Vec3Subtract((int *)&local_50,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
      DAT_80077824 = Vec3CalculateLengthE((int *)&local_50,flag2D);
      DAT_80077828 = cameraPosition.z;
      DAT_8007783c = 0x800;
      levelLoadState = 0;
      portalNumber = 0xffffffff;
      canFlyIn = 0;
      portalToExitFromInHW = 0;
      DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 + 0x390 & 0xfff;
      balloonistState = 4;
      DAT_800777ec = 0;
      DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
      LevelTransitionRelated(1);
      ArrayCopy((int *)&DAT_80071e9c,DAT_80077850,0x58);
      DAT_80077850 = &DAT_80071e9c;
      if (DAT_800785e8 < 0x80200000) {
        outputArray = (int *)(DAT_80078a44 + -0x400c);
      }
      else {
        outputArray = (int *)&DAT_801fe000;
      }
      ArrayCopy(outputArray,DAT_800769f8,0x4000);
      iVar3 = (int)DAT_800769f8;
      iVar6 = outputArray[0xe] - (int)DAT_800769f8;
      DAT_800769f8 = outputArray;
      outputArray[0xe] = (int)outputArray + iVar6;
      *(int *)(DAT_800769f8[0xe] + 0x14) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x14) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x18) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x18) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x24) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x24) - iVar3);
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      spyro.position.x = DAT_8007780c;
      DAT_80077828 = cameraPosition.z;
      spyro.position.y = DAT_80077810;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      spyro.nextAnim = '\0';
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.unkown3 = '\x03';
      spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    }
    if (DAT_800777ec < 0x40) {
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0xc00);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    else {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * 0x4b;
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0x800);
      cameraPosition.z = DAT_80077828 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    Vec3Subtract((int *)&local_50,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_50,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_48,1);
    cameraAngle.pitch = (short)iVar6;
    local_30 = local_50;
    local_2c = local_4c;
    goto LAB_stone__8007cd30;
  case 5:
    if (levelLoadState < 0xd) {
      LevelTransitionRelated(1);
    }
    if (DAT_800777ec < 0x100) {
      iVar6 = SinScaled(((DAT_800777ec << 0xb) >> 8) + -0x400);
      iVar6 = iVar6 + 0x1000;
      if ((DAT_80077820 - DAT_80077838 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_8007783c + ((int)((DAT_80077824 - DAT_8007783c) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077840 + ((DAT_80077828 - DAT_80077840) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_40,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      local_38 = (local_38 + 0x200) - (iVar6 >> 4);
      uVar5 = Vec3CalculateLengthE((int *)&local_40,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_38,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_40,local_3c,1);
      cameraAngle.yaw = (short)iVar6;
    }
    else if (levelLoadState == 0xd) {
      balloonistState = 6;
      DAT_800777ec = 0;
      LevelTransitionRelated(1);
    }
    break;
  case 6:
    if (0x7f < DAT_800777ec) {
      balloonistState = 7;
      DAT_800777ec = 0;
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = *(int *)(&DAT_8006eadc + balloonistDropoffLocation * 8);
      DAT_80077810 = *(int *)(&DAT_8006eae0 + balloonistDropoffLocation * 8);
      DAT_80077814 = spyro.position.z;
      iVar6 = MobyUpdatePosition(&DAT_8007780c,0x10000);
      DAT_80077814 = iVar6 + 0x164;
      spyro.nextAnim = '\x05';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x06';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      DAT_80077828 = cameraPosition.z;
    }
    if (DAT_800777ec < 0x40) {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * -0x4b;
      iVar6 = SinScaled(DAT_800777ec * -0x10);
      cameraPosition.z = DAT_80077828 + (iVar6 * 3 >> 2);
    }
    else {
      if (DAT_800777ec - gameSpeedMultiplyer < 0x40) {
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14) + -0x4b;
      }
      iVar6 = SinScaled(DAT_800777ec * -0x10 + 0x400);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + (iVar6 * 3 >> 2);
    }
    Vec3Subtract((int *)&local_30,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_30,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_28,1);
    cameraAngle.pitch = (short)iVar6;
LAB_stone__8007cd30:
    iVar6 = ATan2Scaled(local_30,local_2c,1);
    cameraAngle.yaw = (short)iVar6;
    spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    spyro.RelativeSparxAngle.roll = *(char *)((int)DAT_80077850 + 0x46) + -0x80;
    break;
  case 7:
    if (DAT_800777ec < 0x40) {
      spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec >> 6);
      spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec >> 6);
      iVar6 = SinScaled(DAT_800777ec * 0x18 + 0x200);
      spyro.position.z = DAT_80077814 + (iVar6 * (DAT_80077808 - DAT_80077814)) / 0xb50;
      spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      FUN_80049fac(1);
      if (0x1f < DAT_800777ec) {
        *(int *)((int)DAT_80077850 + 0x14) =
             *(int *)((int)DAT_80077850 + 0x14) + DAT_800777ec * gameSpeedMultiplyer;
      }
    }
    else {
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      Unk_UpdateSpyroAfterEvents(1);
      spyro.isMovementLocked = 0x10;
      DAT_80076ea0 = &spyro;
      maybe_cameraRelated = 0;
      unk_cameraRelatedLocking = 0;
      flyInAnimation = &DAT_8006c8bc;
      unk_camera_related_angle = spyro.angle.yaw;
      CameraRotation(&cameraPosition);
      ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
      DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
      ChangeFlyInCamera();
      Maybe_HudInPauseMenu(0);
      gameState = GAMESTATE_GAMEPLAY;
      DAT_8007579c = 1;
      isInDragonState = 0;
      Maybe_ResetHudTimers();
    }
  }
                    // WARNING: Read-only address (ram,0x80076fec) is written
                    // WARNING: Read-only address (ram,0x80077004) is written
                    // WARNING: Read-only address (ram,0x80077008) is written
                    // WARNING: Read-only address (ram,0x80077018) is written
                    // WARNING: Read-only address (ram,0x80077024) is written
                    // WARNING: Read-only address (ram,0x8007784c) is written
  return;
}



void FUN_stone__8007d070(void)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  byte *text;
  char *pcVar6;
  undefined *puVar7;
  uint uVar8;
  uint uVar9;
  byte **ppbVar10;
  int local_e0;
  undefined4 local_dc;
  undefined4 local_d8;
  int local_d0;
  undefined4 local_cc;
  undefined4 local_c8;
  byte abStack_c0 [32];
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int local_80;
  int local_7c;
  undefined4 local_78;
  int local_70;
  int local_6c;
  undefined4 local_68;
  int local_60;
  int local_5c;
  undefined4 local_58;
  int local_50;
  int local_4c;
  undefined4 local_48;
  byte abStack_40 [40];
  
  uVar9 = ptr_hudMobys;
  if (balloonistState < 4) {
    if (balloonistState < 2) {
      sprintf((char *)abStack_c0,s__s_THE_BALLOONIST_stone__8007aa5c,
              (&PTR_s_RETURN_HOME_8006f880)[levelIDPortalExit / 10]);
      iVar2 = strlen((char *)abStack_c0);
      local_e0 = iVar2 * -8 + 0x108;
      local_dc = 0xcc;
      local_d8 = 0x1100;
      local_d0 = 0x10;
      local_cc = 1;
      local_c8 = 0x1400;
      DrawTextAll(abStack_c0,&local_e0,&local_d0,0x12,'\v');
      iVar2 = uVar9 - 0x58;
      if ((int)ptr_hudMobys <= iVar2) {
        iVar3 = 0;
        do {
          *(char *)(iVar2 + 0x46) =
               (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
          iVar2 = iVar2 + -0x58;
          iVar3 = iVar3 + 0xc;
        } while ((int)ptr_hudMobys <= iVar2);
      }
    }
    iVar2 = balloonistState;
    if (balloonistState == 1) {
      if (balloonistDialogue - 0x1eU < 3) {
        if (balloonistDialogue == 0x1e) {
          local_70 = 0xe;
          local_68 = 0x1600;
          local_78 = 0x1400;
          local_80 = 0xf0;
          local_6c = balloonistState;
          local_7c = 0x24;
          if (balloonistRandomGreeting == 0) {
            pcVar6 = s_HOP_ON__SPYRO__stone__8007aa70;
          }
          else if (balloonistRandomGreeting == 1) {
            pcVar6 = s_NEED_A_LIFT__stone__8007aa80;
          }
          else {
            pcVar6 = s_WHERE_TO__SPYRO__stone__8007aa90;
          }
          DrawTextAll((byte *)pcVar6,&local_80,&local_70,0x10,'\v');
          local_80 = 0x110;
          uVar9 = ptr_hudMobys - 0x58;
          local_7c = local_7c + 0x14;
          DrawTextAll((byte *)s_STAY_HERE_stone__8007aaa4,&local_80,&local_70,0x10,'\v');
          local_7c = local_7c + 0xf;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          iVar3 = 1;
          iVar2 = 0;
          do {
            if ((levelIDPortalExit / 10 + -1 != iVar2) && ((&unlockedHWs)[iVar2] == '\x02')) {
              local_80 = 0x110;
              uVar9 = ptr_hudMobys - 0x58;
              DrawTextAll((&PTR_s_ARTISANS_8006f7d4)[iVar2],&local_80,&local_70,0x10,'\v');
              local_7c = local_7c + 0xf;
              if ((balloonistCursorPlacement == iVar3) && (ptr_hudMobys <= uVar9)) {
                iVar4 = 0;
                do {
                  *(char *)(uVar9 + 0x46) =
                       (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar4 & 0xff) + 0x40] >> 8);
                  uVar9 = uVar9 - 0x58;
                  iVar4 = iVar4 + 0xc;
                } while (ptr_hudMobys <= uVar9);
              }
              iVar3 = iVar3 + 1;
            }
            iVar2 = iVar2 + 1;
          } while (iVar2 < 6);
          DrawTextBox(0xe0,0x1d8,0x19,iVar3 * 0xf + 0x33);
          DrawLine(0xf0,0x2e,0x1a0,0x2e);
          local_80 = 0xf4;
          local_78 = 0x1100;
          local_7c = balloonistCursorPlacement * 0xf + 0x36;
          DrawArrow(&local_80,DAT_800777ec,0);
        }
        else if (balloonistDialogue - 0x1fU < 2) {
          DrawTextBox(0x48,0x1b8,0x1c,0x66);
          DrawLine(100,0x37,0x184,0x37);
          local_60 = 0x60;
          local_58 = 0x1100;
          local_5c = balloonistCursorPlacement * 0x13 + 0x43;
          DrawArrow(&local_60,DAT_800777ec,0);
          local_50 = 0x10;
          local_48 = 0x1400;
          local_5c = 0x2c;
          local_4c = iVar2;
          local_58 = 0x1100;
          local_60 = 0x60;
          if (balloonistDialogue == 0x1f) {
            pcVar6 = s_ARE_YOU_READY_TO_GO__stone__8007aab0;
          }
          else {
            pcVar6 = s_WOULD_YOU_LIKE_TO_GO__stone__8007aac8;
          }
          DrawTextAll((byte *)pcVar6,&local_60,&local_50,0x12,'\v');
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          local_5c = local_5c + 0x19;
          DrawTextAll((byte *)s_STAY_HERE_stone__8007aaa4,&local_60,&local_50,0x12,'\v');
          local_5c = local_5c + 0x13;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          if (balloonistDialogue == 0x1f) {
            puVar7 = (&PTR_s_ARTISANS_8006f7d4)[levelIDPortalExit / 10];
          }
          else {
            puVar7 = (&PTR_s_PEACE_KEEPERS_8006f7d8)[levelID + ((int)levelID / 10) * -4];
          }
          sprintf((char *)abStack_40,s_GO_TO__s_stone__8007aae0,puVar7);
          DrawTextAll(abStack_40,&local_60,&local_50,0x12,'\v');
          if ((balloonistCursorPlacement == 1) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
        }
      }
      else {
        DrawTextBox(0x48,0x1b8,0x1c,0x68);
        uVar9 = ptr_hudMobys;
        local_9c = 0x2c;
        local_98 = 0x1100;
        local_90 = 0x10;
        local_8c = iVar2;
        local_88 = 0x1400;
        uVar8 = (uint)(byte)(&DAT_8006f89c)[balloonistDialogue];
        if (uVar8 < (byte)(&DAT_8006f89d)[balloonistDialogue]) {
          ppbVar10 = &PTR_s_IF_YOU_PROVE_YOUR_8006f8c4 + uVar8;
          do {
            local_a0 = 0x5e;
            text = *ppbVar10;
            ppbVar10 = ppbVar10 + 1;
            DrawTextAll(text,&local_a0,&local_90,0x12,'\v');
            local_9c = local_9c + 0x12;
            uVar8 = uVar8 + 1;
          } while ((int)uVar8 < (int)(uint)(byte)(&DAT_8006f89d)[balloonistDialogue]);
        }
        if (((int)DAT_800777ec < 0x50) &&
           (uVar8 = uVar9 + DAT_800777ec * -0x58, (int)ptr_hudMobys <= (int)uVar8)) {
          ptr_hudMobys = uVar8;
        }
        iVar2 = uVar9 - 0x58;
        if ((int)ptr_hudMobys <= iVar2) {
          iVar3 = 0;
          do {
            *(char *)(iVar2 + 0x46) =
                 (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
            iVar2 = iVar2 + -0x58;
            iVar3 = iVar3 + 0xc;
          } while ((int)ptr_hudMobys <= iVar2);
        }
        if (0x4f < (int)DAT_800777ec) {
          local_a0 = 0x19c;
          local_9c = 0x60;
          local_98 = 0x1100;
          DrawArrow(&local_a0,DAT_800777ec,0);
        }
      }
    }
    Maybe_DrawingMobyParticlesRelated();
    RenderObjs();
    if (balloonistState < 2) {
      ptr_maybeTextObj = 0;
      CopyHudToShaded();
      DrawShadedMobys();
    }
  }
  else {
    Maybe_DrawingMobyParticlesRelated();
    iVar2 = DAT_80077850;
    piVar5 = &DAT_8006fcf4;
    if (DAT_8006fcf4 != 0) {
      piVar1 = &DAT_8006fcf8;
      do {
        piVar5 = piVar1;
        piVar1 = piVar5 + 1;
      } while (*piVar5 != 0);
    }
    piVar5[1] = 0;
    *piVar5 = iVar2;
    RenderObjs();
  }
  RenderWorld();
  RenderAllSkyBoxes();
  RenderAllParticles();
  return;
}


/*
Unable to decompile 'FUN_stone__8007da78'
Cause: Exception while decompiling stone::8007da78: process: timeout

*/


int ** FUN_stone__8008772c(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  int **ppiVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  short sVar7;
  uint uVar8;
  Spyro *pSVar9;
  int *piVar10;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar3 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar3 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar3 + 0x56) = (char)uVar8;
  if (param_1 < 0x102) {
    if (0xfe < param_1) {
LAB_stone__80087bfc:
      piVar10 = *ppiVar3;
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppiVar3);
      uVar8 = rand();
      uVar4 = rand();
      uVar4 = uVar4 & 0x7ff;
      iVar6 = CosScaled(uVar4);
      iVar5 = CosScaled(uVar8 & 0xfff);
      *(short *)piVar10 = (short)((iVar6 >> 5) * iVar5 >> 0xc);
      iVar6 = CosScaled(uVar4);
      iVar5 = SinScaled(uVar8 & 0xfff);
      *(short *)((int)piVar10 + 2) = (short)((iVar6 >> 5) * iVar5 >> 0xc);
      iVar6 = SinScaled(uVar4);
      *(short *)(piVar10 + 1) = (short)(iVar6 >> 5);
      if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
        *(short *)piVar10 = *(short *)piVar10 + (short)(spyro.airMomentum.x >> 6);
        *(short *)((int)piVar10 + 2) =
             *(short *)((int)piVar10 + 2) + (short)(spyro.airMomentum.y >> 6);
        *(short *)(piVar10 + 1) = *(short *)(piVar10 + 1) + (short)(spyro.airMomentum.z >> 6);
      }
      ppiVar3[3] = ppiVar3[3] + *(short *)piVar10;
      ppiVar3[4] = ppiVar3[4] + *(short *)((int)piVar10 + 2);
      ppiVar3[5] = ppiVar3[5] + *(short *)(piVar10 + 1);
      iVar6 = rand();
      *(ushort *)((int)piVar10 + 6) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)(piVar10 + 2) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)((int)piVar10 + 10) = (ushort)iVar6 & 0xf;
      piVar10[4] = *(int *)(param_2 + 0x14) + -0x40;
      uVar8 = rand();
      piVar10[3] = 0x40 - (uVar8 & 0xf);
      if (2 < *(ushort *)((int)ppiVar3 + 0x36) - 0x135) {
        return ppiVar3;
      }
      bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
      ppiVar3[0x13] = (int *)0xa18618;
LAB_stone__80087d9c:
      *(byte *)((int)ppiVar3 + 0x4b) = bVar2 | 0x80;
      return ppiVar3;
    }
    if (param_1 == 0x4c) {
LAB_stone__80088010:
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
      FUN_800529cc(ppiVar3);
      return ppiVar3;
    }
    if (param_1 < 0x4d) {
      if (param_1 == 0xf) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        piVar10[2] = 0x8c;
        *(undefined *)(piVar10 + 4) = 3;
        *(undefined *)(piVar10 + 5) = 0xff;
        *piVar10 = 0;
        piVar10[1] = 0;
        *(undefined *)((int)piVar10 + 0xe) = 0;
        *(undefined *)((int)piVar10 + 0xf) = 0;
        *(undefined *)((int)piVar10 + 0x11) = 0;
        *(undefined *)((int)piVar10 + 0x12) = 0;
        *(undefined *)((int)piVar10 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x49) = 2;
        *(undefined *)(ppiVar3 + 0x14) = 0x18;
        *(undefined *)((int)ppiVar3 + 0x52) = 0x10;
        *(undefined *)(ppiVar3 + 0x11) = 0x20;
        *(undefined *)((int)ppiVar3 + 0x45) = 0;
        *(undefined *)((int)ppiVar3 + 0x46) = 0;
        if (param_2 != 0) {
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        }
        FUN_800526a8(ppiVar3);
        bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *(undefined *)((int)ppiVar3 + 0x4f) = 1;
        goto LAB_stone__80087d9c;
      }
      if (param_1 < 0x10) {
        if (param_1 == 0xe) goto LAB_stone__80087a1c;
      }
      else {
        if (param_1 == 0x10) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          FUN_800526a8(ppiVar3);
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          ppiVar3[5] = ppiVar3[5] + 0x80;
          Vec3Copy(piVar10 + 1,(int *)(ppiVar3 + 3));
          *(undefined *)((int)piVar10 + 0x13) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(short *)(piVar10 + 5) = 0x708;
          return ppiVar3;
        }
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar3);
          return ppiVar3;
        }
      }
    }
    else {
      if (param_1 == 0x78) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        *(undefined *)((int)ppiVar3 + 0x49) = 0;
        *piVar10 = 0;
        *(undefined2 *)(piVar10 + 2) = 0;
        *(undefined2 *)((int)piVar10 + 6) = 0;
        *(undefined2 *)(piVar10 + 1) = 0;
        piVar10[3] = 0;
        piVar10[4] = 0;
        if (param_2 == 0) {
          return ppiVar3;
        }
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        return ppiVar3;
      }
      if (param_1 < 0x79) {
        if ((param_1 < 0x58) && (0x52 < param_1)) {
LAB_stone__80087a1c:
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *piVar10 = 0;
          piVar10[1] = 0;
          piVar10[2] = 0x8c;
          *(undefined *)((int)piVar10 + 0xe) = 0;
          *(undefined *)((int)piVar10 + 0xf) = 0;
          *(undefined *)((int)piVar10 + 0x11) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(undefined *)((int)piVar10 + 0x13) = 0;
          uVar1 = 3;
          if (*(short *)(param_2 + 0x36) == 0xd) {
            uVar1 = 2;
          }
          *(undefined *)(piVar10 + 4) = uVar1;
          *(undefined *)(piVar10 + 5) = 0xff;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x40;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          FUN_800529cc(ppiVar3);
          ppiVar3[7] = (int *)0xffffffff;
          Vec3Copy(aiStack_48,(int *)(ppiVar3 + 3));
          local_40 = local_40 + 0x400;
          MobyUpdatePosition(aiStack_48,0x10000);
          FUN_800533d0(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          if (*(short *)((int)ppiVar3 + 0x36) == 0xe) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 0xc;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x53) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 1;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x54) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 2;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x55) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 3;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x56) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 4;
          }
          if (*(short *)((int)ppiVar3 + 0x36) != 0x57) {
            return ppiVar3;
          }
          *(undefined *)((int)ppiVar3 + 0x4f) = 5;
          return ppiVar3;
        }
      }
      else {
        if (param_1 == 0xea) {
          InitArrayRelated(ppiVar3);
          Vec3Copy((int *)(ppiVar3 + 3),&spyro.lastGroundedPosition.x);
          iVar6 = ATan2Scaled(spyro.unkown33,spyro.unkown34,0);
          *(char *)((int)ppiVar3 + 0x46) = (char)iVar6 + '@';
          goto LAB_stone__80088064;
        }
        if (param_1 == 0xfb) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          FUN_800529cc(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 0xe;
          if (dragonState == 3) {
            uVar1 = 0x14;
          }
          else {
            uVar1 = 0x30;
            if (dragonState != 1) goto LAB_stone__80087e08;
          }
          *(undefined *)((int)ppiVar3 + 0x57) = uVar1;
LAB_stone__80087e08:
          uVar8 = rand();
          iVar6 = (uVar8 & 7) * 4;
          local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar6);
          local_34 = 0;
          local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar6);
          Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
          uVar8 = rand();
          local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
          Vec3Add(ppiVar3 + 3,param_2 + 0xc,&local_38);
          Vec3Copy(piVar10,&local_38);
          Vec3ScaleDownByPowerOfTwo(piVar10,2);
          uVar8 = rand();
          *piVar10 = *piVar10 + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar10[1] = piVar10[1] + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar10[2] = piVar10[2] + -0x7f + (uVar8 & 0xff);
          iVar6 = rand();
          *(char *)(ppiVar3 + 0x11) = (char)iVar6;
          iVar6 = rand();
          *(char *)((int)ppiVar3 + 0x45) = (char)iVar6;
          iVar6 = rand();
          *(char *)((int)ppiVar3 + 0x46) = (char)iVar6;
          iVar6 = rand();
          *(byte *)(piVar10 + 4) = (byte)iVar6 & 0xf;
          iVar6 = rand();
          *(byte *)((int)piVar10 + 0x11) = (byte)iVar6 & 0xf;
          iVar6 = rand();
          *(byte *)((int)piVar10 + 0x12) = (byte)iVar6 & 0xf;
          piVar10[3] = *(int *)(param_2 + 0x14);
          iVar6 = rand();
          *(byte *)((int)piVar10 + 0x13) = ((byte)iVar6 & 3) + 0x10;
          return ppiVar3;
        }
      }
    }
  }
  else {
    if (param_1 == 0x147) {
LAB_stone__80087f68:
      piVar10 = *ppiVar3;
      InitArrayRelated(ppiVar3);
      FUN_800529cc(ppiVar3);
      *(undefined *)((int)ppiVar3 + 0x4f) = 2;
      *(undefined *)(ppiVar3 + 0x13) = 0;
      *(undefined *)((int)ppiVar3 + 0x4d) = 0;
      *(undefined *)((int)ppiVar3 + 0x4e) = 0;
      *piVar10 = 0x40;
      return ppiVar3;
    }
    if (param_1 < 0x148) {
      if (param_1 == 0x115) goto LAB_stone__80087f68;
      if (param_1 < 0x116) {
        if ((param_1 < 0x10e) && (0x103 < param_1)) goto LAB_stone__80087f68;
      }
      else if ((param_1 < 0x138) && (0x134 < param_1)) goto LAB_stone__80087bfc;
    }
    else if (param_1 < 0x1aa) {
      if (0x1a6 < param_1) goto LAB_stone__80087bfc;
      if (param_1 == 0x195) {
LAB_stone__80087f9c:
        InitArrayRelated(ppiVar3);
        if (param_2 == 0) {
          pSVar9 = &spyro;
        }
        else {
          pSVar9 = (Spyro *)(param_2 + 0xc);
        }
        Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
        ppiVar3[5] = ppiVar3[5] + 0x80;
        piVar10 = (int *)MobyUpdatePosition(ppiVar3 + 3,0x800);
        iVar6 = (int)piVar10 - (int)ppiVar3[5];
        if (iVar6 < 0) {
          iVar6 = -iVar6;
        }
        if (iVar6 < 0x800) {
          ppiVar3[5] = piVar10;
        }
        else {
          ppiVar3[5] = ppiVar3[5] + -0x80;
        }
        goto LAB_stone__80088064;
      }
    }
    else {
      if (param_1 < 0x1c4) goto LAB_stone__80088010;
      if (param_1 == 0x1dd) goto LAB_stone__80087f9c;
    }
  }
  InitArrayRelated(ppiVar3);
  if (param_2 == 0) {
    pSVar9 = &spyro;
  }
  else {
    pSVar9 = (Spyro *)(param_2 + 0xc);
  }
  Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
LAB_stone__80088064:
  FUN_800526a8(ppiVar3);
  return ppiVar3;
}



void FUN_stone__80088098(int param_1)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  short sVar10;
  short sVar11;
  char *pcVar12;
  int iVar13;
  char *pcVar14;
  short *result;
  char *pcVar15;
  int local_68;
  int local_64;
  int local_60;
  int local_58;
  int local_54;
  int local_50;
  undefined4 local_48;
  undefined4 local_44;
  int local_40;
  int local_3c;
  int local_38;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    cVar4 = (char)param_1;
    pcVar12 = ptr_headOfParticleBuffer + 1;
    pcVar15 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar14 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar14) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar4 * '\x02';
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_stone__80089254;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_stone__80089254;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_stone__80089254;
      case '\x06':
        Vec3Copy(&local_68,*(int **)(pcVar12 + 0x17));
        iVar7 = (uint)(byte)pcVar12[1] << 6;
        iVar13 = local_60 + *(short *)(pcVar12 + 0x1d) * 0x40;
        iVar8 = iVar7;
        if (*(short *)(pcVar12 + 0x1b) < iVar7) {
          iVar8 = (int)*(short *)(pcVar12 + 0x1b);
        }
        iVar6 = CosScaled(iVar7);
        local_68 = local_68 + (iVar8 * iVar6 >> 0xc);
        iVar7 = SinScaled(iVar7);
        local_64 = local_64 + (iVar8 * iVar7 >> 0xc);
        local_60 = *(short *)(pcVar12 + 7) * 4 + 0x40;
        if ((iVar13 < local_60) || (200 < (byte)pcVar12[1])) goto LAB_stone__8008926c;
        Vec3ScaleDownBy4(result,&local_68);
        pcVar12[1] = pcVar12[1] + '\x01';
        break;
      case '\t':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[9] = pcVar12[9] + cVar4 * '\x02';
        goto LAB_stone__80089254;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_stone__8008926c;
        Vec3Copy(&local_58,(int *)&spyro);
        iVar8 = CosScaled((int)*(short *)(pcVar12 + 0x17));
        local_58 = local_58 + (iVar8 >> 4);
        iVar8 = SinScaled((int)*(short *)(pcVar12 + 0x17));
        local_54 = local_54 + (iVar8 >> 4);
        local_50 = local_50 + 0x100;
        Vec3ScaleDownBy4(result,&local_58);
        sVar10 = *(short *)(pcVar12 + 0x17);
        *(short *)(pcVar12 + 0x17) = sVar10 + 0x40;
        iVar8 = CosScaled((int)(short)(sVar10 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar8 < 0) {
          iVar8 = -iVar8;
        }
        pcVar12[9] = (char)(iVar8 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar14 + 0x12);
        pcVar12[0xb] = pcVar12[0xb] + -8;
        pcVar12[0xc] = pcVar12[0xc] + -8;
        pcVar12[0xd] = pcVar12[0xd] + -8;
        if (pcVar12[0xb] == '\0') goto LAB_stone__8008926c;
        goto LAB_stone__8008925c;
      case '\f':
        pcVar12[10] = pcVar12[10] + '\b';
        pcVar12[9] = pcVar12[9] + '\x02';
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -8;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -8;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -8;
        }
        if ((*(uint *)(pcVar12 + 0xb) & 0xffffff) != 0) goto LAB_stone__8008925c;
        goto LAB_stone__8008926c;
      case '\x15':
        pcVar12[0x17] = pcVar12[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar9 = (uint)(byte)pcVar12[0x18] + gameSpeedMultiplyer;
        pcVar12[0x18] = (char)uVar9;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0x11) +
             (short)((int)((int)sineWaveArray[(byte)pcVar12[0x17] + 0x40] * (uVar9 & 0xff)) >> 0xc);
        iVar8 = (int)sineWaveArray[(byte)pcVar12[0x17]] * (uint)(byte)pcVar12[0x18];
        sVar10 = (short)gameSpeedMultiplyer;
        bVar1 = pcVar12[0x18];
        pcVar12[10] = pcVar12[10] + '\x04';
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10 * 6;
        sVar10 = *(short *)(pcVar12 + 0x13);
        goto LAB_stone__80088664;
      case '\x18':
        if ((byte)pcVar12[0xb] < 0xf0) {
          pcVar12[0xb] = pcVar12[0xb] + 4;
        }
        if ((byte)pcVar12[0xc] < 0xf0) {
          pcVar12[0xc] = pcVar12[0xc] + 4;
        }
        if ((byte)pcVar12[0xd] < 0xf0) {
          pcVar12[0xd] = pcVar12[0xd] + 4;
        }
        pcVar12[0x1b] = pcVar12[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar8 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar8 = dragonTimerCurrentState;
        }
        *(short *)(pcVar12 + 0x17) = (short)((int)((uint)(byte)pcVar12[0x1c] * (0x48 - iVar8)) >> 3)
        ;
        iVar8 = ((int)((0x20 - (uint)(byte)pcVar12[0x1c]) * iVar8) >> 4) + 8;
        *(short *)(pcVar12 + 0x19) = (short)iVar8;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar12[0x1b] + 0x40] * (iVar8 * 0x10000 >> 0x10) >>
                    0xc);
        sVar10 = sineWaveArray[(byte)pcVar12[0x1b]];
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0x15) + *(short *)(pcVar12 + 0x17) + 0x20;
        *(short *)(pcVar12 + 5) =
             *(short *)(pcVar12 + 0x13) +
             (short)((int)sVar10 * (int)*(short *)(pcVar12 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar8 = (uint)(byte)pcVar12[0xb] - param_1;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar4 * '\x02';
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xb] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xc] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xc] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xd] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        bVar1 = pcVar12[1];
        pcVar12[0xd] = (char)iVar8;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_stone__80089254;
      case 'B':
        iVar8 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar12[1] & 1U) != 0) {
              *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
              *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
              *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
              if ((pcVar12[1] & 2U) != 0) {
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x13) = *(short *)(pcVar12 + 0x13) + -1 + ((ushort)iVar7 & 2);
              }
            }
            iVar8 = iVar8 + 1;
            pcVar12[1] = pcVar12[1] + '\x01';
          } while (iVar8 < param_1);
        }
        bVar3 = (byte)pcVar12[1] < 0x18;
        goto LAB_stone__80089254;
      case 'F':
        local_48._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_48._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_48._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        iVar8 = rand();
        local_48._0_2_ = (short)local_48 + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        sVar10 = local_48._2_2_ + -1 + ((ushort)iVar8 & 2);
        local_48 = CONCAT22(sVar10,(short)local_48);
        if ((pcVar12[1] & 1U) != 0) {
          local_44 = CONCAT22(local_44._2_2_,(short)local_44 + -1);
        }
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_48;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_44;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_stone__8008926c;
        cVar2 = pcVar12[0xf];
        pcVar12[0xf] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0x80) {
          pcVar12[0xf] = -0x80;
        }
        cVar2 = pcVar12[0x10];
        pcVar12[0x10] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x60) {
          pcVar12[0x10] = '`';
        }
        cVar2 = pcVar12[0x13];
        pcVar12[0x11] = '\0';
        pcVar12[0x13] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0xc0) {
          pcVar12[0x13] = -0x40;
        }
        cVar2 = pcVar12[0x14];
        pcVar12[0x14] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x80) {
          pcVar12[0x14] = -0x80;
        }
        cVar2 = pcVar12[0x15];
        pcVar12[0x15] = cVar2 - 6U;
        if ((byte)(cVar2 - 6U) < 0x20) {
          pcVar12[0x15] = ' ';
        }
        break;
      case 'G':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_stone__8008926c;
        local_40 = (int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3);
        local_3c = (int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5);
        local_38 = (int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_3c = local_3c + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_38 = local_38 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_40;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + (short)local_3c;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_38;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 9) - (short)local_40;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 0xb) - (short)local_3c;
        pcVar12[0x13] = pcVar12[0x13] + -2;
        pcVar12[0x15] = pcVar12[0x15] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -2;
        pcVar12[0x10] = pcVar12[0x10] + -3;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0xd) - (short)local_38;
        pcVar12[0x11] = pcVar12[0x11] + -3;
        break;
      case 'H':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x2f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_stone__8008926c;
        local_48 = (int)*(short *)(pcVar12 + 3) - (int)*(short *)(pcVar12 + 9) >> 1;
        local_44 = (int)*(short *)(pcVar12 + 5) - (int)*(short *)(pcVar12 + 0xb) >> 1;
        local_40 = (int)*(short *)(pcVar12 + 7) - (int)*(short *)(pcVar12 + 0xd) >> 1;
        uVar9 = rand();
        local_48 = local_48 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_44 = local_44 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + (short)local_44;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)local_40;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 3) + (short)local_48 * -2;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 5) + (short)local_44 * -2;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 7) + (short)local_40 * -2;
        break;
      case 'L':
        pcVar12[0x17] = pcVar12[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar9 = (uint)(byte)pcVar12[0x18] + gameSpeedMultiplyer;
        pcVar12[0x18] = (char)uVar9;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0xf) +
             (short)((int)((int)sineWaveArray[(byte)pcVar12[0x17] + 0x40] * (uVar9 & 0xff)) >> 0xc);
        iVar8 = (int)sineWaveArray[(byte)pcVar12[0x17]] * (uint)(byte)pcVar12[0x18];
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)gameSpeedMultiplyer * 6;
        bVar1 = pcVar12[0x18];
        sVar10 = *(short *)(pcVar12 + 0x11);
LAB_stone__80088664:
        *(short *)(pcVar12 + 5) = sVar10 + (short)(iVar8 >> 0xc);
        if (bVar1 < 0xc1) break;
        goto LAB_stone__8008926c;
      case 'M':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        sVar5 = sVar5 + 1;
        local_48 = CONCAT22(sVar5,sVar11);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
        if (0x1f < (byte)(cVar2 + 1U)) goto LAB_stone__8008926c;
        break;
      case 'N':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x27 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_stone__8008926c;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar8 & 2);
        uVar9 = rand();
        iVar8 = (*(ushort *)(pcVar12 + 0x13) - 1) + (uVar9 & 2);
        *(short *)(pcVar12 + 0x13) = (short)iVar8;
        if (2 < iVar8 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar12 + 0x13) = 2;
        }
        if (*(short *)(pcVar12 + 0x13) < -4) {
          *(undefined2 *)(pcVar12 + 0x13) = 0xfffc;
        }
        pcVar12[0xb] = pcVar12[0xb] + -2;
        pcVar12[0xd] = pcVar12[0xd] + -1;
        pcVar12[0xc] = pcVar12[0xc] + -2;
        break;
      case 'O':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        local_48 = CONCAT22(sVar10,sVar11);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar5);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar10;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar5;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_stone__8008926c;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        pcVar12[0x13] = pcVar12[0x13] + -3;
        pcVar12[0x10] = pcVar12[0x10] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -4;
        if (5 < (byte)pcVar12[0x15]) {
          pcVar12[0x15] = pcVar12[0x15] - 6;
        }
        break;
      case 'P':
        sVar11 = *(short *)(pcVar12 + 9) - *(short *)(pcVar12 + 3);
        sVar5 = *(short *)(pcVar12 + 0xb) - *(short *)(pcVar12 + 5);
        local_48 = CONCAT22(sVar5,sVar11);
        sVar10 = *(short *)(pcVar12 + 7);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (*(short *)(pcVar12 + 0xd) - sVar10);
        sVar10 = (*(short *)(pcVar12 + 0xd) - sVar10) + -1;
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        bVar3 = (byte)(cVar2 + 1U) < 0x20;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
LAB_stone__80089254:
        if (bVar3) {
LAB_stone__8008925c:
          if (pcVar12[2] != '\0') break;
        }
LAB_stone__8008926c:
        FUN_80053608(pcVar14);
      }
      pcVar12 = pcVar12 + 0x20;
      pcVar15 = pcVar15 + 0x20;
      result = result + 0x10;
      pcVar14 = pcVar14 + 0x20;
    } while (*pcVar12 != -1);
  }
  return;
}



void FUN_stone__800892c4(int param_1,undefined4 param_2,int **param_3,int *param_4)

{
  bool bVar1;
  char cVar2;
  short extraout_var;
  undefined *puVar3;
  uint uVar4;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  undefined uVar8;
  short sVar9;
  int *piVar10;
  int iVar11;
  int local_a8;
  int local_a4;
  undefined4 local_a0;
  int aiStack_98 [4];
  int local_88;
  int local_84;
  int local_80;
  int local_78;
  int local_74;
  int local_70;
  int local_68;
  int local_64;
  int local_60;
  int local_58;
  int local_50;
  uint local_48;
  int local_40;
  int local_30;
  
  iVar11 = 0;
  if (0 < param_1) {
    local_50 = (int)param_4 >> 0x18;
    local_48 = (uint)param_4 & 0xf;
    local_40 = local_48 << 1;
    local_30 = 0;
    local_58 = param_1;
    do {
      uVar8 = (undefined)param_2;
      cVar2 = (char)param_4;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_stone__80089b08;
      case 1:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        if (bVar1) {
          uVar8 = 8;
        }
        else {
          uVar8 = 0x10;
        }
        puVar5[10] = uVar8;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x60;
        goto LAB_stone__80089af4;
      case 2:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_a8 = (uVar7 & 0x3f) - 0x20;
        uVar7 = rand();
        local_a4 = (uVar7 & 0x3f) - 0x20;
        local_a0 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),&local_a8);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x20;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_stone__80089b08;
      case 6:
        piVar10 = *param_3;
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)(param_3 + 3));
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(int ***)(puVar5 + 0x18) = param_3 + 3;
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x100 + ((ushort)iVar6 & 0x1ff);
        *(short *)(puVar5 + 0x1c) = (short)piVar10[1];
        iVar6 = *piVar10;
        puVar5[10] = 0x20;
        puVar5[0xb] = 0x14;
        *(short *)(puVar5 + 0x1e) = (short)(iVar6 >> 6);
        if (*(char *)((int)param_3 + 0x49) == '\0') {
          if (levelIDPortalExit != 0x32) {
            puVar5[0xc] = 0x80;
            goto LAB_stone__80089618;
          }
switchD_stone__8008958c_caseD_1:
          puVar5[0xc] = 0x80;
LAB_stone__80089608:
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          goto switchD_stone__8008958c_caseD_8;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          goto switchD_stone__8008958c_caseD_8;
        case 1:
          goto switchD_stone__8008958c_caseD_1;
        case 2:
          puVar5[0xc] = 0;
          goto LAB_stone__80089608;
        case 3:
          puVar5[0xc] = 0;
LAB_stone__80089618:
          puVar5[0xd] = 0x80;
          break;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          break;
        case 5:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          break;
        case 6:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0x40;
          puVar5[0xe] = 0;
          goto switchD_stone__8008958c_caseD_8;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x40;
          break;
        default:
          goto switchD_stone__8008958c_caseD_8;
        }
        puVar5[0xe] = 0x80;
switchD_stone__8008958c_caseD_8:
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 0;
        puVar5[0x10] = 0;
        break;
      case 9:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar8 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar5[0xc] = 0x80;
              puVar5[0xd] = 0x80;
              puVar5[0xe] = 0x80;
              goto LAB_stone__80089b08;
            }
            puVar5[0xc] = 0xe0;
          }
          else {
            puVar5[0xc] = 0xf0;
            uVar8 = 0x60;
          }
          puVar5[0xd] = uVar8;
          puVar5[0xe] = 0;
        }
        else {
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
        }
        goto LAB_stone__80089b08;
      case 10:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)&spyro);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_8006e438)[local_30];
        puVar5[0xd] = (&DAT_8006e439)[local_30];
        uVar8 = (&DAT_8006e43a)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar8;
        *(short *)(puVar5 + 0x18) = (short)(((local_58 - iVar11) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        puVar5[3] = 1;
        *puVar5 = uVar8;
        puVar5[0x11] = 4;
        sVar9 = *(short *)((int)param_3 + 0x36);
        if (sVar9 == 0x22) {
          Vec3Copy(aiStack_98,(int *)(param_3 + 3));
        }
        else if ((sVar9 == 0xad) || (sVar9 == 0xb5)) {
          if (local_50 < 6) {
            puVar3 = (undefined *)0x8006e4e0;
            iVar6 = local_50;
            goto LAB_stone__8008988c;
          }
          puVar5[1] = 5;
          puVar5[0x11] = 0x16;
          Vec3Copy(aiStack_98,(int *)(local_50 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar9 == 0x78) {
            puVar3 = &DAT_8006e570;
          }
          else {
            puVar3 = &DAT_8006e498;
            iVar6 = iVar11;
LAB_stone__8008988c:
            puVar3 = puVar3 + iVar6 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar3,aiStack_98);
          Vec3Add(aiStack_98,aiStack_98,param_3 + 3);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),aiStack_98);
        puVar5[0xd] = (char)((uint)param_4 >> 8);
        puVar5[0xc] = cVar2;
        puVar5[0xe] = (char)((uint)param_4 >> 0x10);
        puVar5[0xf] = 0x2e;
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 7) + 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0x10] = 0;
        break;
      case 0x15:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),(int *)param_3);
        cVar2 = cVar2 * '\x02';
        if (0xf < ((uint)param_4 & 0x1f)) {
          cVar2 = cVar2 + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        puVar5[0xe] = (char)local_48 * -8 + -0x80;
        puVar5[0x10] = 0;
        puVar5[10] = '0' - (char)local_40;
        puVar5[0xb] = (char)((int)param_4 << 1);
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 2;
        break;
      case 0x18:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),(int *)param_3);
        puVar5[10] = 0x30;
        puVar5[0x11] = 8;
        *(short *)(puVar5 + 0x18) = (short)(iVar11 << 5);
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        uVar8 = (undefined)(iVar11 << 4);
        puVar5[0xb] = uVar8;
        puVar5[0xf] = 0x2e;
        puVar5[0x10] = 0;
        *(undefined2 *)(puVar5 + 0x1a) = 0x10;
        puVar5[0x1c] = uVar8;
        puVar5[0x1d] = (char)iVar11;
        break;
      case 0x21:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_88,(int *)&spyro);
          local_80 = spyro.unkown_heightRelated;
          uVar7 = rand();
          local_88 = local_88 + -0x1f + (uVar7 & 0x3e);
          uVar7 = rand();
          local_84 = local_84 + -0x1f + (uVar7 & 0x3e);
        }
        else {
          local_88 = 0x164;
          local_84 = 0;
          local_80 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_88,&local_88);
          Vec3Add(&local_88,&local_88,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_88);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),(int *)param_3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x20;
LAB_stone__80089af4:
        puVar5[0xc] = uVar8;
        puVar5[0xd] = uVar8;
        puVar5[0xe] = uVar8;
LAB_stone__80089b08:
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x42:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        piVar10 = param_3[2];
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)((int)piVar10 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_stone__80089c20;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_stone__80089c20;
        case 2:
          puVar5[0xc] = 0;
LAB_stone__80089c20:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_stone__80089c68;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_stone__80089c68;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_stone__80089c68;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_stone__80089c68:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        uVar7 = rand();
        local_78 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_74 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_70 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_78 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_74 * 4;
        sVar9 = (short)local_70;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_78 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_74 * 2;
        goto LAB_stone__8008a324;
      case 0x47:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        uVar7 = rand();
        local_78 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_74 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_70 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_78 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_74 * 4;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + (short)local_70 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_78;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_74;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_70;
        break;
      case 0x4c:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x10),(int *)param_3);
        if (((uint)param_4 & 0x1f) < 0x10) {
          cVar2 = (char)((int)param_4 << 1);
        }
        else {
          cVar2 = cVar2 * '\x02' + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        cVar2 = (char)local_48 * -8 + -0x80;
        goto LAB_stone__8008a0b8;
      case 0x4d:
        puVar5 = (undefined *)AllocateParticleToBuffer(4);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        CosScaled(uVar7 & 0xfff);
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + extraout_var;
        uVar4 = rand();
        SinScaled(uVar4 & 0x7ff);
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + extraout_var_00;
        SinScaled(uVar7 & 0xfff);
        puVar5[0x17] = 0x7f;
        puVar5[0x11] = 0x40;
        puVar5[0x12] = 0x60;
        puVar5[0x16] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x10] = 0x80;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0x80;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar6 & 1);
        iVar6 = rand();
        puVar5[0xc] = (byte)iVar6 | 0x80;
        uVar7 = rand();
        uVar7 = (uVar7 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar7;
        if ((byte)puVar5[0xc] < uVar7) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar6 = rand();
        cVar2 = ((byte)iVar6 & 0x3f) + 0x40;
LAB_stone__8008a0b8:
        puVar5[0xe] = cVar2;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3Add(&local_78,param_3,param_4);
        uVar7 = rand();
        local_78 = local_78 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_74 = local_74 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_70 = local_70 + -0x40 + (uVar7 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_78);
        puVar5[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0xa0;
          puVar5[0x12] = 0;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = (byte)iVar6 | 0xe0;
          puVar5[0x16] = 0x80;
        }
        else {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x12] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = ((byte)iVar6 & 0x1f) + 0xa0;
          iVar6 = rand();
          puVar5[0x16] = ((byte)iVar6 & 0x1f) + 0xa0;
        }
        puVar5[0x13] = 0x50;
        break;
      case 0x50:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_68 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_64 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_60 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + (short)local_68 * 4;
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + (short)local_64 * 4;
        sVar9 = (short)local_60;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_68 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_64 * 2;
LAB_stone__8008a324:
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + sVar9 * 2;
      }
      local_30 = local_30 + 4;
      iVar11 = iVar11 + 1;
    } while (iVar11 < local_58);
  }
  return;
}



void FUN_title__8007aad4(int param_1)

{
  sfxMetadataArray = (MaybeSoundEffectMetadata **)&DAT_800778f0;
  DAT_800778f0 = *(int *)(&DAT_8006fa94 + param_1 * 4) + 0x1010;
  DAT_800778f4 = 0xffffffff;
  DAT_800778f8 = 0x50;
  DAT_800778fa = 0x800;
  DAT_800778fc = 0;
  DAT_800778fe = 0;
  collectableRelated = 0;
  DAT_800761dc = 1;
  USHORT_800761e8 = 0x3fff;
  USHORT_800761ea = 0x3fff;
  PlaySoundEffect(0,(int *)0x0,0x10,&DAT_80077084);
  return;
}



// WARNING: Type propagation algorithm not settling

void MainTitleScreenFunc(void)

{
  bool bVar1;
  ushort uVar2;
  uint uVar3;
  int iVar4;
  long lVar5;
  int iVar6;
  int *piVar7;
  undefined4 uVar8;
  int iVar9;
  RECT local_50 [7];
  
  piVar7 = ptr_titleScreenAnimationTimer;
  iVar9 = DAT_80078d7c;
  if (titleScreenState < 2) {
    iVar9 = titleScreenMenu;
  }
  iVar6 = *ptr_titleScreenAnimationTimer + 2;
  *ptr_titleScreenAnimationTimer = iVar6;
  if (iVar6 < 0x44c) {
    DAT_80078d80 = 0;
    if (((titleScreenMenu == 2) && (299 < *piVar7)) &&
       ((currentButton & (X_BUTTON|START_BUTTON)) != 0)) {
      FUN_80056200(DAT_80077084,4);
      iVar6 = 0x492;
LAB_title__8007accc:
      *ptr_titleScreenAnimationTimer = iVar6;
    }
  }
  else {
    if (iVar6 == 0x540) {
      uVar3 = rand();
      iVar6 = 0x494;
      if ((uVar3 & 3) != 0) goto LAB_title__8007accc;
    }
    iVar6 = 0x494;
    if (0x5f9 < *ptr_titleScreenAnimationTimer) goto LAB_title__8007accc;
  }
  if (fadeInTimer != 0) {
    fadeInTimer = fadeInTimer + -1;
  }
  TitleCameraRelated(*ptr_titleScreenAnimationTimer);
  cameraAngle.roll = 0;
  cameraAngle.pitch = cameraAngle.pitch + 0x10;
  if (titleScreenState != 1) {
    if (titleScreenState < 2) {
      if (titleScreenState != 0) goto switchD_title__8007b0e0_caseD_e;
      if (titleScreenMenu < 2) {
        FUN_800163e4();
        if (((DAT_80076bb8 == 0) && (iVar6 = CdSync(1,(u_char_conflict *)0x0), iVar6 == 2)) &&
           ((musicState & 0x40) != 0)) {
          if (titleScreenMenu == 0) {
            FUN_80016698(WADStartSector,DAT_800785e8 + -0x40000,0x40000,DAT_8007a6d8,600);
            titleScreenMenu = 1;
          }
          else if (titleScreenMenu == 1) {
            musicLevelTrack = 0x14;
            DAT_800776cc = 0x9450c00;
            PlayMusicTrack(0x14,1,0x40000);
            local_50[0].y = 0x100;
            local_50[0].h = 0x100;
            local_50[0].x = 0x200;
            local_50[0].w = 0x200;
            LoadImage(local_50,(u_long *)(DAT_800785e8 + -0x40000));
            titleScreenMenu = 2;
          }
        }
        goto switchD_title__8007b0e0_caseD_e;
      }
      if (titleScreenMenu == 2) {
        if (*ptr_titleScreenAnimationTimer < 0x491) {
          DAT_80078d84 = 0;
        }
        else {
          if (DAT_80078d84 == 1) {
            FUN_title__8007aad4(6);
          }
          if (0xf < DAT_80078d84) {
            titleScreenMenu = 3;
          }
        }
        goto switchD_title__8007b0e0_caseD_e;
      }
      if (titleScreenMenu == 3) {
        if ((currentButton & (L1_BUTTON|TRIANGLE_BUTTON)) == (L1_BUTTON|TRIANGLE_BUTTON)) {
          PauseMusicAndSFX(0);
          FUN_title__8007aad4(9);
          FUN_80056ed4();
          while (((DAT_80076bb8 != 0 || (iVar6 = CdSync(1,(u_char_conflict *)0x0), iVar6 != 2)) ||
                 ((musicState & 0x40) == 0))) {
            FUN_800163e4();
            Maybe_SoundEffectProcessing();
            FUN_8002bbe0();
          }
          FUN_8002bab8();
        }
        else if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
          if (0x3dd < DAT_80078d80) {
            titleScreenMenu = 5;
          }
        }
        else {
          titleScreenMenu = 4;
          FUN_title__8007aad4(7);
        }
        goto switchD_title__8007b0e0_caseD_e;
      }
      if (titleScreenMenu == 4) {
        if (DAT_80078d84 == 0x10) {
          FUN_title__8007aad4(8);
        }
        if (0x1f < DAT_80078d84) {
          titleScreenState = 1;
          titleScreenMenu = 0;
          DAT_80078d7c = 0;
          MemCardStart();
        }
        goto switchD_title__8007b0e0_caseD_e;
      }
      if (titleScreenMenu != 5) goto switchD_title__8007b0e0_caseD_e;
      if (DAT_80078d84 == 0) {
        FUN_title__8007aad4(5);
      }
      fadeInTimer = DAT_80078d84;
      if ((DAT_80078d84 < 0x10) || (fadeInTimer = 0xf, DAT_80078d84 < 0x10))
      goto switchD_title__8007b0e0_caseD_e;
      DAT_80078d94 = 2;
LAB_title__8007cc30:
      local_50[0].w = 0x200;
      DAT_80078d7c = 0;
      titleScreenState = 3;
      local_50[0].x = 0;
      local_50[0].y = 0;
      local_50[0].h = 0x1e0;
      ClearImage(local_50,'\0','\0','\0');
      DrawSync(0);
      goto switchD_title__8007b0e0_caseD_e;
    }
    if (titleScreenState != 2) goto switchD_title__8007b0e0_caseD_e;
    if (DAT_80078d7c < 5) {
      FUN_80032a20();
      if (((&DAT_80078da8)[memoryCardSlot] != 0) || ((&DAT_80078da8)[1 - memoryCardSlot] == 3)) {
        titleScreenState = 1;
        titleScreenMenu = 0;
        DAT_80078d7c = 0;
        MemCardSync(0,(ulong *)&DAT_80078db8,(ulong *)&DAT_80078dbc);
        goto switchD_title__8007b0e0_caseD_e;
      }
    }
    iVar6 = DAT_80078d7c;
    DAT_80078dc8 = loadedMemoryCardDataBuffer + 0x80;
    DAT_80078dcc = loadedMemoryCardDataBuffer + 0x200;
    DAT_80078dd0 = loadedMemoryCardDataBuffer + 0x380;
    if (((*(char *)(loadedMemoryCardDataBuffer + 0x90) == '\0') &&
        (*(char *)(loadedMemoryCardDataBuffer + 0x210) == '\0')) &&
       (*(char *)(loadedMemoryCardDataBuffer + 0x390) == '\0')) {
      DAT_80078dc0 = 0;
    }
    else {
      DAT_80078dc0 = 1;
    }
    if (DAT_80078d7c == 0) {
      iVar6 = titleScreenMenu;
      if (DAT_80078d98 == 0) {
        DAT_80078d7c = 1;
        if (*(char *)(loadedMemoryCardDataBuffer + 0x90) != '\0') {
          if (*(char *)(loadedMemoryCardDataBuffer + 0x210) == '\0') {
            DAT_80078d8c = 1;
            goto switchD_title__8007b0e0_caseD_e;
          }
          if (*(char *)(loadedMemoryCardDataBuffer + 0x390) == '\0') goto LAB_title__8007c64c;
        }
      }
      else {
        if (DAT_80078dc0 == 0) {
          DAT_80078d8c = 1;
          DAT_80078d7c = 4;
          goto switchD_title__8007b0e0_caseD_e;
        }
        DAT_80078d7c = 3;
        if (*(char *)(loadedMemoryCardDataBuffer + 0x90) == '\0') {
          if (*(char *)(loadedMemoryCardDataBuffer + 0x210) != '\0') {
            DAT_80078d8c = 1;
            goto switchD_title__8007b0e0_caseD_e;
          }
LAB_title__8007c64c:
          DAT_80078d8c = 2;
          goto switchD_title__8007b0e0_caseD_e;
        }
      }
    }
    else {
      if (DAT_80078d7c != 1) {
        if (DAT_80078d7c == 2) {
          if (DAT_80078d84 < 8) goto switchD_title__8007b0e0_caseD_e;
          if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
            DAT_80078d84 = 0x10;
            DAT_80078d90 = 1 - DAT_80078d90;
            FUN_title__8007aad4(0);
            goto switchD_title__8007b0e0_caseD_e;
          }
          if ((currentButtonOneFrame & (TRIANGLE_BUTTON|X_BUTTON|START_BUTTON)) == 0)
          goto switchD_title__8007b0e0_caseD_e;
          if ((DAT_80078d90 != 1) && ((currentButtonOneFrame & TRIANGLE_BUTTON) == 0)) {
            FUN_8001277c();
            DAT_80078d94 = 0;
LAB_title__8007ca68:
            uVar2 = *(ushort *)((int)loadedMemoryCardDataBuffer + 0x7e);
            DAT_80078d14 = 1;
            goto LAB_title__8007ca80;
          }
          DAT_80078d7c = 1;
        }
        else {
          if (DAT_80078d7c == 3) {
            if (DAT_80078d84 < 8) goto switchD_title__8007b0e0_caseD_e;
            if ((currentButtonOneFrame & (TRIANGLE_BUTTON|DOWN_BUTTON)) != 0) {
              FUN_title__8007aad4(9);
              DAT_80078d7c = 4;
              DAT_80078d8c = 1;
              goto switchD_title__8007b0e0_caseD_e;
            }
            if ((currentButtonOneFrame & LEFT_BUTTON) == 0) {
              if ((currentButtonOneFrame & RIGHT_BUTTON) == 0) {
                if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0)
                goto switchD_title__8007b0e0_caseD_e;
                spyro.health = 3;
                lifePellets = 0;
                healthFromLastLevel = 0xffffffff;
                FUN_80059594((&DAT_80078dc8)[DAT_80078d8c]);
                DAT_80078d94 = 1;
                goto LAB_title__8007ca68;
              }
              iVar6 = DAT_80078d8c + 1;
              if (2 < iVar6) goto switchD_title__8007b0e0_caseD_e;
              piVar7 = (int *)(&DAT_80078dc8 + iVar6);
              do {
                if (*(char *)(*piVar7 + 0x40) != '\0') {
                  DAT_80078d84 = 0x10;
                  break;
                }
                iVar6 = iVar6 + 1;
                piVar7 = piVar7 + 1;
              } while (iVar6 < 3);
              if (2 < iVar6) goto switchD_title__8007b0e0_caseD_e;
            }
            else {
              iVar6 = DAT_80078d8c + -1;
              if (iVar6 < 0) goto switchD_title__8007b0e0_caseD_e;
              piVar7 = (int *)(&DAT_80078dc8 + iVar6);
              do {
                if (*(char *)(*piVar7 + 0x40) != '\0') {
                  DAT_80078d84 = 0x10;
                  break;
                }
                iVar6 = iVar6 + -1;
                piVar7 = piVar7 + -1;
              } while (-1 < iVar6);
              if (iVar6 < 0) goto switchD_title__8007b0e0_caseD_e;
            }
            goto LAB_title__8007c9ec;
          }
          if (DAT_80078d7c != 4) {
            if (DAT_80078d7c != 5) goto switchD_title__8007b0e0_caseD_e;
            if (DAT_80078d84 == 0) {
              FUN_title__8007aad4(5);
            }
            fadeInTimer = DAT_80078d84 + 1;
            if (0xf < fadeInTimer) {
              fadeInTimer = 0xf;
            }
            if (DAT_80078d84 < 0x10) goto switchD_title__8007b0e0_caseD_e;
            MemCardStop();
            goto LAB_title__8007cc30;
          }
          if ((DAT_80078d84 < 8) || (iVar6 = FUN_80032ab0(), iVar6 != 0))
          goto switchD_title__8007b0e0_caseD_e;
          if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) != 0) goto LAB_title__8007caf0;
          if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|UP_BUTTON)) == 0)
          goto switchD_title__8007b0e0_caseD_e;
          if ((DAT_80078d8c != 1) || (DAT_80078dc0 != 0)) {
            DAT_80078d7c = 0;
            DAT_8007579c = 1;
            DAT_80078d98 = DAT_80078d8c;
            FUN_title__8007aad4(1);
            goto switchD_title__8007b0e0_caseD_e;
          }
          DAT_80078d84 = 0x10;
        }
        FUN_title__8007aad4(4);
        goto switchD_title__8007b0e0_caseD_e;
      }
      if (DAT_80078d84 < 8) goto switchD_title__8007b0e0_caseD_e;
      if ((currentButtonOneFrame & (TRIANGLE_BUTTON|DOWN_BUTTON)) == 0) {
        if ((currentButtonOneFrame & LEFT_BUTTON) == 0) {
          if ((currentButtonOneFrame & RIGHT_BUTTON) == 0) {
            if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0)
            goto switchD_title__8007b0e0_caseD_e;
            if (*(char *)((int)(&DAT_80078dc8)[DAT_80078d8c] + 0x40) != '\0') {
              FUN_title__8007aad4(3);
              DAT_80078d7c = 2;
              DAT_80078d90 = iVar6;
              goto switchD_title__8007b0e0_caseD_e;
            }
            FUN_8001277c();
            DAT_80078d94 = 0;
            uVar2 = *(ushort *)((int)loadedMemoryCardDataBuffer + 0x7e);
            DAT_80078d14 = iVar6;
LAB_title__8007ca80:
            DAT_80078d7c = 5;
            DAT_80078d20 = (uint)uVar2;
            DAT_80078d18 = memoryCardSlot << 4;
            DAT_80078d1c = DAT_80078d8c;
            MemCardSync(0,(ulong *)&DAT_80078db8,(ulong *)&DAT_80078dbc);
            goto switchD_title__8007b0e0_caseD_e;
          }
          DAT_80078d84 = 0x10;
          iVar6 = DAT_80078d8c + 1;
          if (2 < DAT_80078d8c + 1) {
            DAT_80078d8c = 0;
            iVar6 = DAT_80078d8c;
          }
        }
        else {
          DAT_80078d84 = 0x10;
          iVar6 = DAT_80078d8c + -1;
          if (DAT_80078d8c + -1 < 0) {
            DAT_80078d8c = 2;
            iVar6 = DAT_80078d8c;
          }
        }
LAB_title__8007c9ec:
        DAT_80078d8c = iVar6;
        FUN_title__8007aad4(0);
        goto switchD_title__8007b0e0_caseD_e;
      }
      FUN_title__8007aad4(9);
      DAT_80078d7c = 4;
      iVar6 = titleScreenMenu;
    }
    goto LAB_title__8007b280;
  }
  switch(titleScreenMenu) {
  case 0:
    lVar5 = MemCardSync(1,(ulong *)&DAT_80078db8,(ulong *)&DAT_80078dbc);
    if (lVar5 == 0) goto switchD_title__8007b0e0_caseD_e;
    if (DAT_80078d7c == 0) {
      FUN_title__8007aad4(2);
      MemCardAccept(0);
LAB_title__8007b378:
      DAT_80078d7c = 1;
      goto switchD_title__8007b0e0_caseD_e;
    }
    if (DAT_80078d7c == 1) {
      DAT_80078da8 = DAT_80078dbc;
      if (DAT_80078dbc == 3) {
        DAT_80078da8 = 0;
      }
      bVar1 = DAT_80078da8 == 4;
      if (bVar1) {
        DAT_80078da8 = 0;
      }
      DAT_80078db0 = (uint)bVar1;
      MemCardAccept(0x10);
      iVar6 = DAT_80078d9c;
      goto LAB_title__8007bfec;
    }
    DAT_80078dac = DAT_80078dbc;
    if (DAT_80078dbc == 3) {
      DAT_80078dac = 0;
    }
    bVar1 = DAT_80078dac == 4;
    if (bVar1) {
      DAT_80078dac = 0;
    }
    DAT_80078db4 = (uint)bVar1;
    if (DAT_80078da8 == 0) {
      iVar6 = 0xf;
      if (DAT_80078dac == 0) goto LAB_title__8007b280;
      if (DAT_80078db0 != 0) goto LAB_title__8007b238;
      memoryCardSlot = 0;
    }
    else {
LAB_title__8007b238:
      if ((DAT_80078dac != 0) || (DAT_80078db4 != 0)) {
        if ((DAT_80078da8 == 0) && (DAT_80078db0 != 0)) {
          memoryCardSlot = 0;
          iVar6 = 5;
        }
        else if ((DAT_80078dac == 0) && (DAT_80078db4 != 0)) {
          memoryCardSlot = 1;
          iVar6 = 5;
        }
        else {
          memoryCardSlot = -1;
          iVar6 = 2;
        }
        goto LAB_title__8007b280;
      }
      memoryCardSlot = 1;
    }
    titleScreenMenu = 1;
    DAT_80078d7c = 0;
    DAT_80078d9c = 0;
    iVar6 = titleScreenMenu;
    goto LAB_title__8007b280;
  case 1:
    lVar5 = MemCardSync(1,(ulong *)&DAT_80078db8,(ulong *)&DAT_80078dbc);
    iVar6 = DAT_80078d7c;
    if (lVar5 == 0) goto switchD_title__8007b0e0_caseD_e;
    if (DAT_80078d7c == 0) {
      MemCardReadFile(memoryCardSlot << 4,SAVE_FILE_NAME,loadedMemoryCardDataBuffer,0,0x1400);
      goto LAB_title__8007b378;
    }
    if (DAT_80078d7c != 1) goto switchD_title__8007b0e0_caseD_e;
    if (DAT_80078dbc == 0) {
      iVar4 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x80);
      if (((iVar4 == loadedMemoryCardDataBuffer[0x1e3]) &&
          (iVar4 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x200),
          iVar4 == loadedMemoryCardDataBuffer[0x363])) &&
         (iVar4 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x380),
         iVar4 == loadedMemoryCardDataBuffer[0x4e3])) {
        titleScreenState = 2;
        DAT_80078d7c = 4;
        DAT_80078d8c = iVar6;
        DAT_8007579c = iVar6;
        FUN_title__8007aad4(9);
        goto switchD_title__8007b0e0_caseD_e;
      }
      if (DAT_80078d9c < 2) {
        DAT_80078d7c = 0;
        DAT_80078d9c = DAT_80078d9c + 1;
        goto switchD_title__8007b0e0_caseD_e;
      }
      FUN_8001277c();
      iVar6 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x80);
      if (iVar6 != loadedMemoryCardDataBuffer[0x1e3]) {
        FUN_80059864(loadedMemoryCardDataBuffer + 0x80);
      }
      iVar6 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x200);
      if (iVar6 != loadedMemoryCardDataBuffer[0x363]) {
        FUN_80059864(loadedMemoryCardDataBuffer + 0x200);
      }
      iVar6 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x380);
      if (iVar6 != loadedMemoryCardDataBuffer[0x4e3]) {
        FUN_80059864(loadedMemoryCardDataBuffer + 0x380);
      }
      DAT_80078d8c = 1;
LAB_title__8007c0c8:
      DAT_80078d7c = 4;
      titleScreenState = 2;
      DAT_8007579c = 1;
      FUN_title__8007aad4(9);
      goto switchD_title__8007b0e0_caseD_e;
    }
    iVar6 = 3;
    if (DAT_80078dbc == 5) {
      iVar6 = 10;
    }
    goto LAB_title__8007b280;
  case 2:
    FUN_80032a20();
    if ((((DAT_80078da8 != 0) && (DAT_80078da8 != 3)) && (DAT_80078dac != 0)) && (DAT_80078dac != 3)
       ) {
      if (DAT_80078d84 == 0) {
        FUN_title__8007aad4(4);
      }
      if ((DAT_80078d84 < 8) || (iVar6 = FUN_80032ab0(), iVar6 != 0))
      goto switchD_title__8007b0e0_caseD_e;
      uVar8 = 0;
      if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
        DAT_80078d84 = 0x10;
        DAT_80078d8c = 1 - DAT_80078d8c;
        goto LAB_title__8007cb08;
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0)
      goto switchD_title__8007b0e0_caseD_e;
      if (DAT_80078d8c != 0) break;
LAB_title__8007b77c:
      titleScreenMenu = 4;
      FUN_title__8007aad4(3);
      goto switchD_title__8007b0e0_caseD_e;
    }
    break;
  case 3:
    FUN_80032a20();
    if (memoryCardSlot < 0) {
      if (((DAT_80078da8 != 0) && (DAT_80078da8 != 3)) && (iVar6 = DAT_80078dac, DAT_80078dac != 0))
      goto joined_r0x8007b6f4;
    }
    else if ((&DAT_80078da8)[memoryCardSlot] == 0) {
      iVar6 = (&DAT_80078da8)[1 - memoryCardSlot];
joined_r0x8007b6f4:
      if (iVar6 != 3) {
        if ((DAT_80078d84 < 8) || (iVar6 = FUN_80032ab0(), iVar6 != 0))
        goto switchD_title__8007b0e0_caseD_e;
        uVar8 = 0;
        if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
          DAT_80078d84 = 0x10;
          DAT_80078d8c = 1 - DAT_80078d8c;
          goto LAB_title__8007cb08;
        }
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0)
        goto switchD_title__8007b0e0_caseD_e;
        if (DAT_80078d8c == 0) goto LAB_title__8007b77c;
      }
    }
    break;
  case 4:
    FUN_80032a20();
    if (memoryCardSlot < 0) {
      if (((DAT_80078da8 != 0) && (DAT_80078da8 != 3)) && (iVar6 = DAT_80078dac, DAT_80078dac != 0))
      goto joined_r0x8007b854;
    }
    else if ((&DAT_80078da8)[memoryCardSlot] == 0) {
      iVar6 = (&DAT_80078da8)[1 - memoryCardSlot];
joined_r0x8007b854:
      if (iVar6 != 3) {
        if ((DAT_80078d84 < 8) || (iVar6 = FUN_80032ab0(), iVar6 != 0))
        goto switchD_title__8007b0e0_caseD_e;
        uVar8 = 0;
        if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
          DAT_80078d84 = 0x10;
          DAT_80078d8c = 1 - DAT_80078d8c;
          goto LAB_title__8007cb08;
        }
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0)
        goto switchD_title__8007b0e0_caseD_e;
        if (DAT_80078d8c == 0) {
          FUN_8001277c();
          titleScreenState = 2;
          DAT_80078d7c = 5;
          DAT_80078d94 = 0;
          DAT_80078d14 = 0;
          goto switchD_title__8007b0e0_caseD_e;
        }
      }
    }
    break;
  case 5:
  case 6:
    FUN_80032a20();
    if (((&DAT_80078da8)[memoryCardSlot] == 0) && ((&DAT_80078da8)[1 - memoryCardSlot] != 3)) {
      if (DAT_80078d84 == 0) {
        FUN_title__8007aad4(3);
      }
      if ((DAT_80078d84 < 8) || (iVar6 = FUN_80032ab0(), iVar6 != 0))
      goto switchD_title__8007b0e0_caseD_e;
      uVar8 = 0;
      if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
        DAT_80078d84 = 0x10;
        DAT_80078d8c = 1 - DAT_80078d8c;
        goto LAB_title__8007cb08;
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0)
      goto switchD_title__8007b0e0_caseD_e;
      if (DAT_80078d8c != 0) {
        titleScreenMenu = 3;
        uVar8 = 3;
        goto LAB_title__8007c2ec;
      }
      if (titleScreenMenu == 5) {
        titleScreenMenu = 6;
        DAT_80078d8c = 1;
        goto switchD_title__8007b0e0_caseD_e;
      }
      titleScreenMenu = 7;
LAB_title__8007c2c8:
      MemCardSync(0,(ulong *)&DAT_80078db8,(ulong *)&DAT_80078dbc);
      FUN_title__8007aad4(2);
      goto switchD_title__8007b0e0_caseD_e;
    }
    break;
  case 7:
    if (DAT_80078d84 < 2) goto switchD_title__8007b0e0_caseD_e;
    DAT_80078dbc = _card_format(memoryCardSlot << 4);
    uVar8 = 4;
    if (DAT_80078dbc == 0) {
      (&DAT_80078da8)[memoryCardSlot] = 0;
      titleScreenMenu = 8;
      uVar8 = 9;
LAB_title__8007c2ec:
      DAT_80078d8c = 0;
      FUN_title__8007aad4(uVar8);
      goto switchD_title__8007b0e0_caseD_e;
    }
    titleScreenMenu = 9;
    DAT_80078d8c = 1;
LAB_title__8007cb08:
    FUN_title__8007aad4(uVar8);
    goto switchD_title__8007b0e0_caseD_e;
  case 8:
    FUN_80032a20();
    if (((&DAT_80078da8)[memoryCardSlot] == 0) && ((&DAT_80078da8)[1 - memoryCardSlot] != 3)) {
      if ((7 < DAT_80078d84) &&
         ((iVar6 = FUN_80032ab0(), iVar6 == 0 &&
          ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) != 0)))) {
        FUN_title__8007aad4(1);
        titleScreenMenu = 1;
        DAT_80078d7c = 0;
        DAT_80078d9c = 0;
        DAT_80078d8c = 1;
      }
      goto switchD_title__8007b0e0_caseD_e;
    }
    break;
  case 9:
    FUN_80032a20();
    if (((&DAT_80078da8)[memoryCardSlot] == 0) && ((&DAT_80078da8)[1 - memoryCardSlot] != 3)) {
      if ((DAT_80078d84 < 8) || (iVar6 = FUN_80032ab0(), iVar6 != 0))
      goto switchD_title__8007b0e0_caseD_e;
      if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) == 0) {
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0)
        goto switchD_title__8007b0e0_caseD_e;
        if (DAT_80078d8c == 0) {
          titleScreenMenu = 7;
          goto LAB_title__8007c2c8;
        }
LAB_title__8007c2e4:
        uVar8 = 3;
        titleScreenMenu = 3;
        goto LAB_title__8007c2ec;
      }
LAB_title__8007caf0:
      uVar8 = 0;
      DAT_80078d84 = 0x10;
      DAT_80078d8c = 1 - DAT_80078d8c;
      goto LAB_title__8007cb08;
    }
    break;
  case 10:
    FUN_80032a20();
    if (((&DAT_80078da8)[memoryCardSlot] == 0) && ((&DAT_80078da8)[1 - memoryCardSlot] != 3)) {
      if (DAT_80078d84 == 0) {
        FUN_title__8007aad4(3);
      }
      if (DAT_80078d84 < 8) goto switchD_title__8007b0e0_caseD_e;
      iVar6 = FUN_80032ab0();
joined_r0x8007c260:
      if (iVar6 != 0) goto switchD_title__8007b0e0_caseD_e;
      if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) != 0) goto LAB_title__8007caf0;
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0)
      goto switchD_title__8007b0e0_caseD_e;
      if (DAT_80078d8c != 0) goto LAB_title__8007c2e4;
      titleScreenMenu = 0xb;
      DAT_80078d7c = 0;
      DAT_80078d9c = 0;
      DAT_80078d8c = 0;
      goto LAB_title__8007c2c8;
    }
    break;
  case 0xb:
    if (DAT_80078d7c == 0) {
      DAT_80078d7c = 1;
      goto switchD_title__8007b0e0_caseD_e;
    }
    if (DAT_80078d7c == 1) {
      if (DAT_80078d9c == 0) {
        DAT_80078dbc = MemCardCreateFile(memoryCardSlot << 4,SAVE_FILE_NAME,1);
      }
      piVar7 = loadedMemoryCardDataBuffer;
      if (DAT_80078dbc == 0) {
        iVar6 = 0;
        ArrayCopy(loadedMemoryCardDataBuffer,&DAT_8006f494,0x200);
        piVar7 = piVar7 + 0x80;
        DAT_80078d20 = TMR_SYSCLOCK_VAL();
        *(short *)((int)loadedMemoryCardDataBuffer + 0x7e) = (short)DAT_80078d20;
        FUN_8001277c();
        do {
          FUN_80059864(piVar7);
          iVar6 = iVar6 + 1;
          piVar7 = piVar7 + 0x180;
        } while (iVar6 < 3);
        MemCardWriteFile(memoryCardSlot << 4,SAVE_FILE_NAME,loadedMemoryCardDataBuffer,0,0x1400);
        iVar6 = DAT_80078d9c;
LAB_title__8007bfec:
        DAT_80078d9c = iVar6;
        DAT_80078d7c = 2;
        goto switchD_title__8007b0e0_caseD_e;
      }
      iVar6 = 0xd;
      if (DAT_80078dbc == 7) {
        iVar6 = 0xc;
      }
    }
    else if (DAT_80078d7c == 2) {
      lVar5 = MemCardSync(1,(ulong *)&DAT_80078db8,(ulong *)&DAT_80078dbc);
      if (lVar5 == 0) goto switchD_title__8007b0e0_caseD_e;
      iVar6 = 0xd;
      if (DAT_80078dbc == 0) {
        MemCardReadFile(memoryCardSlot << 4,SAVE_FILE_NAME,loadedMemoryCardDataBuffer,0,0x1400);
        DAT_80078d7c = 3;
        goto switchD_title__8007b0e0_caseD_e;
      }
    }
    else {
      iVar6 = 0xd;
      if (DAT_80078dbc == 0) {
        iVar6 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x80);
        if (((iVar6 == loadedMemoryCardDataBuffer[0x1e3]) &&
            (iVar6 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x200),
            iVar6 == loadedMemoryCardDataBuffer[0x363])) &&
           (iVar6 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x380),
           iVar6 == loadedMemoryCardDataBuffer[0x4e3])) {
          titleScreenState = 2;
          DAT_80078d7c = 4;
          DAT_80078d8c = 0;
          DAT_8007579c = 1;
          FUN_title__8007aad4(9);
          goto switchD_title__8007b0e0_caseD_e;
        }
        iVar6 = DAT_80078d9c + 1;
        if (1 < DAT_80078d9c) {
          FUN_8001277c();
          iVar6 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x80);
          if (iVar6 != loadedMemoryCardDataBuffer[0x1e3]) {
            FUN_80059864(loadedMemoryCardDataBuffer + 0x80);
          }
          iVar6 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x200);
          if (iVar6 != loadedMemoryCardDataBuffer[0x363]) {
            FUN_80059864(loadedMemoryCardDataBuffer + 0x200);
          }
          iVar6 = FUN_8005956c(loadedMemoryCardDataBuffer + 0x380);
          if (iVar6 != loadedMemoryCardDataBuffer[0x4e3]) {
            FUN_80059864(loadedMemoryCardDataBuffer + 0x380);
          }
          DAT_80078d8c = 0;
          goto LAB_title__8007c0c8;
        }
        goto LAB_title__8007bfec;
      }
    }
    goto LAB_title__8007b280;
  case 0xc:
    FUN_80032a20();
    if (((&DAT_80078da8)[memoryCardSlot] != 0) || ((&DAT_80078da8)[1 - memoryCardSlot] == 3)) break;
    if (DAT_80078d84 == 0) {
      FUN_title__8007aad4(4);
    }
    if (((DAT_80078d84 < 8) || (iVar6 = FUN_80032ab0(), iVar6 != 0)) ||
       ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0))
    goto switchD_title__8007b0e0_caseD_e;
    FUN_title__8007aad4(3);
    titleScreenMenu = 3;
    iVar6 = titleScreenMenu;
    goto LAB_title__8007b280;
  case 0xd:
    FUN_80032a20();
    if (((&DAT_80078da8)[memoryCardSlot] == 0) && ((&DAT_80078da8)[1 - memoryCardSlot] != 3)) {
      if (DAT_80078d84 == 0) {
        FUN_title__8007aad4(4);
      }
      if (DAT_80078d84 < 8) goto switchD_title__8007b0e0_caseD_e;
      iVar6 = FUN_80032ab0();
      goto joined_r0x8007c260;
    }
    break;
  default:
    goto switchD_title__8007b0e0_caseD_e;
  case 0xf:
    FUN_80032a20();
    if ((((DAT_80078da8 == 1) || (DAT_80078da8 == 3)) || (DAT_80078dac == 1)) || (DAT_80078dac == 3)
       ) break;
    if (DAT_80078d84 == 0) {
      FUN_title__8007aad4(3);
    }
    if (DAT_80078d84 < 8) goto switchD_title__8007b0e0_caseD_e;
    uVar8 = 0;
    if ((currentButtonOneFrame & (RIGHT_BUTTON|LEFT_BUTTON)) != 0) {
      DAT_80078d84 = 0x10;
      DAT_80078d8c = 1 - DAT_80078d8c;
      goto LAB_title__8007cb08;
    }
    if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0)
    goto switchD_title__8007b0e0_caseD_e;
    memoryCardSlot = DAT_80078d8c;
    iVar6 = 5;
    if ((&DAT_80078db0)[DAT_80078d8c] == 0) {
      titleScreenMenu = 1;
      DAT_80078d7c = 0;
      DAT_80078d9c = 0;
      DAT_80078d8c = 1;
      FUN_title__8007aad4(1);
      goto switchD_title__8007b0e0_caseD_e;
    }
LAB_title__8007b280:
    titleScreenMenu = iVar6;
    DAT_80078d8c = 0;
    goto switchD_title__8007b0e0_caseD_e;
  }
  titleScreenMenu = 0;
  DAT_80078d7c = 0;
  MemCardSync(0,(ulong *)&DAT_80078db8,(ulong *)&DAT_80078dbc);
switchD_title__8007b0e0_caseD_e:
  SetTextWobbleTimerSpeed(3);
  if ((unk_movementRelated < 2) || ((short)currentButton == 0)) {
    DAT_80078d80 = DAT_80078d80 + 1;
  }
  else {
    DAT_80078d80 = 0;
  }
  iVar6 = DAT_80078d7c;
  if (titleScreenState < 2) {
    iVar6 = titleScreenMenu;
  }
  if (iVar6 == iVar9) {
    DAT_80078d84 = DAT_80078d84 + 1;
  }
  else {
    DAT_80078d84 = 0;
  }
  return;
}



void FUN_title__8007cd38(short param_1,short param_2,int param_3,int param_4)

{
  bool bVar1;
  byte bVar2;
  char cVar3;
  undefined4 *puVar4;
  undefined4 uVar5;
  
  puVar4 = ptr_graphicsRelated;
  bVar1 = param_3 < 0;
  if (bVar1) {
    param_3 = -param_3;
  }
  *ptr_graphicsRelated = 0x9000000;
  uVar5 = *(undefined4 *)(&DAT_8006fabc + param_4 * 4);
  param_3 = param_3 * 8;
  *(short *)(puVar4 + 2) = param_1;
  *(short *)((int)puVar4 + 10) = param_2;
  puVar4[1] = uVar5;
  bVar2 = (&DAT_8006fad0)[param_3];
  *(short *)((int)puVar4 + 0x12) = param_2;
  *(short *)(puVar4 + 6) = param_1;
  *(ushort *)(puVar4 + 4) = (ushort)bVar2 + param_1;
  *(ushort *)((int)puVar4 + 0x1a) = (ushort)(byte)(&DAT_8006fad1)[param_3] + param_2;
  *(ushort *)(puVar4 + 8) = (ushort)(byte)(&DAT_8006fad0)[param_3] + param_1;
  *(ushort *)((int)puVar4 + 0x22) = (ushort)(byte)(&DAT_8006fad1)[param_3] + param_2;
  *(undefined *)(puVar4 + 3) = (&DAT_8006fad2)[param_3];
  *(undefined *)((int)puVar4 + 0xd) = (&DAT_8006fad3)[param_3];
  cVar3 = (&DAT_8006fad0)[param_3];
  *(undefined *)(puVar4 + 7) = *(undefined *)(puVar4 + 3);
  *(undefined *)((int)puVar4 + 0x15) = *(undefined *)((int)puVar4 + 0xd);
  *(char *)(puVar4 + 5) = *(char *)(puVar4 + 3) + cVar3;
  *(char *)((int)puVar4 + 0x1d) = *(char *)((int)puVar4 + 0xd) + (&DAT_8006fad1)[param_3];
  *(undefined *)(puVar4 + 9) = *(undefined *)(puVar4 + 5);
  *(undefined *)((int)puVar4 + 0x25) = *(undefined *)((int)puVar4 + 0x1d);
  *(undefined2 *)((int)puVar4 + 0x16) = *(undefined2 *)(&DAT_8006facc + param_3);
  *(undefined2 *)((int)puVar4 + 0xe) = *(undefined2 *)(&DAT_8006face + param_3);
  DrawPrimitive(puVar4);
  ptr_graphicsRelated = puVar4 + 10;
  if (bVar1) {
    *(undefined *)(puVar4 + 3) = *(undefined *)(puVar4 + 5);
    *(undefined *)(puVar4 + 5) = *(undefined *)(puVar4 + 7);
    *(undefined *)(puVar4 + 7) = *(undefined *)(puVar4 + 3);
    *(undefined *)(puVar4 + 9) = *(undefined *)(puVar4 + 5);
  }
  return;
}


/*
Unable to decompile 'Toasty_UpdateMobys'
Cause: Exception while decompiling toasty::8007af94: process: timeout

*/


int ** Toasty_SpawnDynamicObj(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  int **ppiVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  short sVar7;
  uint uVar8;
  Spyro *pSVar9;
  int *piVar10;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar3 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar3 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar8 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar8)) {
    uVar8 = 0;
  }
  *(char *)((int)ppiVar3 + 0x56) = (char)uVar8;
  if (param_1 < 0x102) {
    if (0xfe < param_1) {
LAB_toasty__80082254:
      piVar10 = *ppiVar3;
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppiVar3);
      uVar8 = rand();
      uVar4 = rand();
      uVar4 = uVar4 & 0x7ff;
      iVar6 = CosScaled(uVar4);
      iVar5 = CosScaled(uVar8 & 0xfff);
      *(short *)piVar10 = (short)((iVar6 >> 5) * iVar5 >> 0xc);
      iVar6 = CosScaled(uVar4);
      iVar5 = SinScaled(uVar8 & 0xfff);
      *(short *)((int)piVar10 + 2) = (short)((iVar6 >> 5) * iVar5 >> 0xc);
      iVar6 = SinScaled(uVar4);
      *(short *)(piVar10 + 1) = (short)(iVar6 >> 5);
      if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
        *(short *)piVar10 = *(short *)piVar10 + (short)(spyro.airMomentum.x >> 6);
        *(short *)((int)piVar10 + 2) =
             *(short *)((int)piVar10 + 2) + (short)(spyro.airMomentum.y >> 6);
        *(short *)(piVar10 + 1) = *(short *)(piVar10 + 1) + (short)(spyro.airMomentum.z >> 6);
      }
      ppiVar3[3] = ppiVar3[3] + *(short *)piVar10;
      ppiVar3[4] = ppiVar3[4] + *(short *)((int)piVar10 + 2);
      ppiVar3[5] = ppiVar3[5] + *(short *)(piVar10 + 1);
      iVar6 = rand();
      *(ushort *)((int)piVar10 + 6) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)(piVar10 + 2) = (ushort)iVar6 & 0xf;
      iVar6 = rand();
      *(ushort *)((int)piVar10 + 10) = (ushort)iVar6 & 0xf;
      piVar10[4] = *(int *)(param_2 + 0x14) + -0x40;
      uVar8 = rand();
      piVar10[3] = 0x40 - (uVar8 & 0xf);
      if (2 < *(ushort *)((int)ppiVar3 + 0x36) - 0x135) {
        return ppiVar3;
      }
      bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
      ppiVar3[0x13] = (int *)0xa18618;
LAB_toasty__800823f4:
      *(byte *)((int)ppiVar3 + 0x4b) = bVar2 | 0x80;
      return ppiVar3;
    }
    if (param_1 == 0x4c) {
LAB_toasty__80082668:
      InitArrayRelated(ppiVar3);
      *(undefined *)(ppiVar3 + 0x14) = 0x20;
      *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
      FUN_800529cc(ppiVar3);
      return ppiVar3;
    }
    if (param_1 < 0x4d) {
      if (param_1 == 0xf) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        piVar10[2] = 0x8c;
        *(undefined *)(piVar10 + 4) = 3;
        *(undefined *)(piVar10 + 5) = 0xff;
        *piVar10 = 0;
        piVar10[1] = 0;
        *(undefined *)((int)piVar10 + 0xe) = 0;
        *(undefined *)((int)piVar10 + 0xf) = 0;
        *(undefined *)((int)piVar10 + 0x11) = 0;
        *(undefined *)((int)piVar10 + 0x12) = 0;
        *(undefined *)((int)piVar10 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x49) = 2;
        *(undefined *)(ppiVar3 + 0x14) = 0x18;
        *(undefined *)((int)ppiVar3 + 0x52) = 0x10;
        *(undefined *)(ppiVar3 + 0x11) = 0x20;
        *(undefined *)((int)ppiVar3 + 0x45) = 0;
        *(undefined *)((int)ppiVar3 + 0x46) = 0;
        if (param_2 != 0) {
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        }
        FUN_800526a8(ppiVar3);
        bVar2 = *(byte *)((int)ppiVar3 + 0x4b);
        *(undefined *)(ppiVar3 + 0x13) = 0;
        *(undefined *)((int)ppiVar3 + 0x4d) = 0;
        *(undefined *)((int)ppiVar3 + 0x4e) = 0;
        *(undefined *)((int)ppiVar3 + 0x4f) = 1;
        goto LAB_toasty__800823f4;
      }
      if (param_1 < 0x10) {
        if (param_1 == 0xe) goto LAB_toasty__80082074;
      }
      else {
        if (param_1 == 0x10) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          FUN_800526a8(ppiVar3);
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          ppiVar3[5] = ppiVar3[5] + 0x80;
          Vec3Copy(piVar10 + 1,(int *)(ppiVar3 + 3));
          *(undefined *)((int)piVar10 + 0x13) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(short *)(piVar10 + 5) = 0x708;
          return ppiVar3;
        }
        if (param_1 == 0x22) {
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          if (param_2 != 0) {
            Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          }
          FUN_800529cc(ppiVar3);
          return ppiVar3;
        }
      }
    }
    else {
      if (param_1 == 0x78) {
        piVar10 = *ppiVar3;
        InitArrayRelated(ppiVar3);
        FUN_800526a8(ppiVar3);
        *(undefined *)((int)ppiVar3 + 0x49) = 0;
        *piVar10 = 0;
        *(undefined2 *)(piVar10 + 2) = 0;
        *(undefined2 *)((int)piVar10 + 6) = 0;
        *(undefined2 *)(piVar10 + 1) = 0;
        piVar10[3] = 0;
        piVar10[4] = 0;
        if (param_2 == 0) {
          return ppiVar3;
        }
        Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
        return ppiVar3;
      }
      if (param_1 < 0x79) {
        if ((param_1 < 0x58) && (0x52 < param_1)) {
LAB_toasty__80082074:
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *piVar10 = 0;
          piVar10[1] = 0;
          piVar10[2] = 0x8c;
          *(undefined *)((int)piVar10 + 0xe) = 0;
          *(undefined *)((int)piVar10 + 0xf) = 0;
          *(undefined *)((int)piVar10 + 0x11) = 0;
          *(undefined *)((int)piVar10 + 0x12) = 0;
          *(undefined *)((int)piVar10 + 0x13) = 0;
          uVar1 = 3;
          if (*(short *)(param_2 + 0x36) == 0xd) {
            uVar1 = 2;
          }
          *(undefined *)(piVar10 + 4) = uVar1;
          *(undefined *)(piVar10 + 5) = 0xff;
          *(undefined *)(ppiVar3 + 0x14) = 0x18;
          *(undefined *)((int)ppiVar3 + 0x52) = 0x40;
          *(undefined *)((int)ppiVar3 + 0x49) = 2;
          *(undefined *)(ppiVar3 + 0x11) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x45) = 0;
          *(undefined *)((int)ppiVar3 + 0x46) = 0;
          Vec3Copy((int *)(ppiVar3 + 3),(int *)(param_2 + 0xc));
          FUN_800529cc(ppiVar3);
          ppiVar3[7] = (int *)0xffffffff;
          Vec3Copy(aiStack_48,(int *)(ppiVar3 + 3));
          local_40 = local_40 + 0x400;
          MobyUpdatePosition(aiStack_48,0x10000);
          FUN_800533d0(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          if (*(short *)((int)ppiVar3 + 0x36) == 0xe) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 0xc;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x53) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 1;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x54) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 2;
          }
          sVar7 = *(short *)((int)ppiVar3 + 0x36);
          if (sVar7 == 0x55) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 3;
            sVar7 = *(short *)((int)ppiVar3 + 0x36);
          }
          if (sVar7 == 0x56) {
            *(undefined *)((int)ppiVar3 + 0x4f) = 4;
          }
          if (*(short *)((int)ppiVar3 + 0x36) != 0x57) {
            return ppiVar3;
          }
          *(undefined *)((int)ppiVar3 + 0x4f) = 5;
          return ppiVar3;
        }
      }
      else {
        if (param_1 == 0xea) {
          InitArrayRelated(ppiVar3);
          Vec3Copy((int *)(ppiVar3 + 3),&spyro.lastGroundedPosition.x);
          iVar6 = ATan2Scaled(spyro.unkown33,spyro.unkown34,0);
          *(char *)((int)ppiVar3 + 0x46) = (char)iVar6 + '@';
          goto LAB_toasty__800826bc;
        }
        if (param_1 == 0xfb) {
          piVar10 = *ppiVar3;
          InitArrayRelated(ppiVar3);
          *(undefined *)(ppiVar3 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar3 + 0x52) = 0xff;
          FUN_800529cc(ppiVar3);
          *(undefined *)(ppiVar3 + 0x13) = 0;
          *(undefined *)((int)ppiVar3 + 0x4d) = 0;
          *(undefined *)((int)ppiVar3 + 0x4e) = 0;
          *(undefined *)((int)ppiVar3 + 0x4f) = 0xe;
          if (dragonState == 3) {
            uVar1 = 0x14;
          }
          else {
            uVar1 = 0x30;
            if (dragonState != 1) goto LAB_toasty__80082460;
          }
          *(undefined *)((int)ppiVar3 + 0x57) = uVar1;
LAB_toasty__80082460:
          uVar8 = rand();
          iVar6 = (uVar8 & 7) * 4;
          local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar6);
          local_34 = 0;
          local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar6);
          Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
          uVar8 = rand();
          local_38 = local_38 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_34 = local_34 + -0x3f + (uVar8 & 0x7f);
          uVar8 = rand();
          local_30 = local_30 + -0x3f + (uVar8 & 0x7f);
          Vec3Add(ppiVar3 + 3,param_2 + 0xc,&local_38);
          Vec3Copy(piVar10,&local_38);
          Vec3ScaleDownByPowerOfTwo(piVar10,2);
          uVar8 = rand();
          *piVar10 = *piVar10 + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar10[1] = piVar10[1] + -0x7f + (uVar8 & 0xff);
          uVar8 = rand();
          piVar10[2] = piVar10[2] + -0x7f + (uVar8 & 0xff);
          iVar6 = rand();
          *(char *)(ppiVar3 + 0x11) = (char)iVar6;
          iVar6 = rand();
          *(char *)((int)ppiVar3 + 0x45) = (char)iVar6;
          iVar6 = rand();
          *(char *)((int)ppiVar3 + 0x46) = (char)iVar6;
          iVar6 = rand();
          *(byte *)(piVar10 + 4) = (byte)iVar6 & 0xf;
          iVar6 = rand();
          *(byte *)((int)piVar10 + 0x11) = (byte)iVar6 & 0xf;
          iVar6 = rand();
          *(byte *)((int)piVar10 + 0x12) = (byte)iVar6 & 0xf;
          piVar10[3] = *(int *)(param_2 + 0x14);
          iVar6 = rand();
          *(byte *)((int)piVar10 + 0x13) = ((byte)iVar6 & 3) + 0x10;
          return ppiVar3;
        }
      }
    }
  }
  else if (param_1 < 0x138) {
    if (0x134 < param_1) goto LAB_toasty__80082254;
    if ((0x103 < param_1) && ((param_1 < 0x10e || (param_1 == 0x115)))) {
LAB_toasty__800825c0:
      piVar10 = *ppiVar3;
      InitArrayRelated(ppiVar3);
      FUN_800529cc(ppiVar3);
      *(undefined *)((int)ppiVar3 + 0x4f) = 2;
      *(undefined *)(ppiVar3 + 0x13) = 0;
      *(undefined *)((int)ppiVar3 + 0x4d) = 0;
      *(undefined *)((int)ppiVar3 + 0x4e) = 0;
      *piVar10 = 0x40;
      return ppiVar3;
    }
  }
  else if (param_1 < 0x1c4) {
    if (0x1a9 < param_1) goto LAB_toasty__80082668;
    if (param_1 == 0x147) goto LAB_toasty__800825c0;
  }
  else if ((param_1 < 0x1fd) && (0x1fa < param_1)) {
    InitArrayRelated(ppiVar3);
    if (param_2 == 0) {
      pSVar9 = &spyro;
    }
    else {
      pSVar9 = (Spyro *)(param_2 + 0xc);
    }
    Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
    ppiVar3[5] = ppiVar3[5] + 0x80;
    piVar10 = (int *)MobyUpdatePosition(ppiVar3 + 3,0x800);
    iVar6 = (int)piVar10 - (int)ppiVar3[5];
    if (iVar6 < 0) {
      iVar6 = -iVar6;
    }
    if (iVar6 < 0x800) {
      ppiVar3[5] = piVar10;
    }
    else {
      ppiVar3[5] = ppiVar3[5] + -0x80;
    }
    goto LAB_toasty__800826bc;
  }
  InitArrayRelated(ppiVar3);
  if (param_2 == 0) {
    pSVar9 = &spyro;
  }
  else {
    pSVar9 = (Spyro *)(param_2 + 0xc);
  }
  Vec3Copy((int *)(ppiVar3 + 3),(int *)pSVar9);
LAB_toasty__800826bc:
  FUN_800526a8(ppiVar3);
  return ppiVar3;
}



void Toasty_UpdateParticles(int param_1)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  short sVar10;
  short sVar11;
  char *pcVar12;
  int iVar13;
  char *pcVar14;
  short *result;
  char *pcVar15;
  int local_68;
  int local_64;
  int local_60;
  int local_58;
  int local_54;
  int local_50;
  undefined4 local_48;
  undefined4 local_44;
  int local_40;
  int local_3c;
  int local_38;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    cVar4 = (char)param_1;
    pcVar12 = ptr_headOfParticleBuffer + 1;
    pcVar15 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar14 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar14) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar4 * '\x02';
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_toasty__800838ac;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_toasty__800838ac;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        pcVar12[9] = pcVar12[9] + cVar4 * '\x04';
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[0xc] = pcVar12[0xc] + cVar4 * -4;
        pcVar12[0xb] = pcVar12[0xb] + cVar4 * -4;
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[0xd] = pcVar12[0xd] + cVar4 * -4;
        goto LAB_toasty__800838ac;
      case '\x06':
        Vec3Copy(&local_68,*(int **)(pcVar12 + 0x17));
        iVar7 = (uint)(byte)pcVar12[1] << 6;
        iVar13 = local_60 + *(short *)(pcVar12 + 0x1d) * 0x40;
        iVar8 = iVar7;
        if (*(short *)(pcVar12 + 0x1b) < iVar7) {
          iVar8 = (int)*(short *)(pcVar12 + 0x1b);
        }
        iVar6 = CosScaled(iVar7);
        local_68 = local_68 + (iVar8 * iVar6 >> 0xc);
        iVar7 = SinScaled(iVar7);
        local_64 = local_64 + (iVar8 * iVar7 >> 0xc);
        local_60 = *(short *)(pcVar12 + 7) * 4 + 0x40;
        if ((iVar13 < local_60) || (200 < (byte)pcVar12[1])) goto LAB_toasty__800838c4;
        Vec3ScaleDownBy4(result,&local_68);
        pcVar12[1] = pcVar12[1] + '\x01';
        break;
      case '\t':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        bVar1 = pcVar12[1];
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar12[9] = pcVar12[9] + cVar4 * '\x02';
        goto LAB_toasty__800838ac;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_toasty__800838c4;
        Vec3Copy(&local_58,(int *)&spyro);
        iVar8 = CosScaled((int)*(short *)(pcVar12 + 0x17));
        local_58 = local_58 + (iVar8 >> 4);
        iVar8 = SinScaled((int)*(short *)(pcVar12 + 0x17));
        local_54 = local_54 + (iVar8 >> 4);
        local_50 = local_50 + 0x100;
        Vec3ScaleDownBy4(result,&local_58);
        sVar10 = *(short *)(pcVar12 + 0x17);
        *(short *)(pcVar12 + 0x17) = sVar10 + 0x40;
        iVar8 = CosScaled((int)(short)(sVar10 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar8 < 0) {
          iVar8 = -iVar8;
        }
        pcVar12[9] = (char)(iVar8 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar14 + 0x12);
        pcVar12[0xb] = pcVar12[0xb] + -8;
        pcVar12[0xc] = pcVar12[0xc] + -8;
        pcVar12[0xd] = pcVar12[0xd] + -8;
        if (pcVar12[0xb] == '\0') goto LAB_toasty__800838c4;
        goto LAB_toasty__800838b4;
      case '\f':
        pcVar12[10] = pcVar12[10] + '\b';
        pcVar12[9] = pcVar12[9] + '\x02';
        if (pcVar12[0xb] != '\0') {
          pcVar12[0xb] = pcVar12[0xb] + -8;
        }
        if (pcVar12[0xc] != '\0') {
          pcVar12[0xc] = pcVar12[0xc] + -8;
        }
        if (pcVar12[0xd] != '\0') {
          pcVar12[0xd] = pcVar12[0xd] + -8;
        }
        if ((*(uint *)(pcVar12 + 0xb) & 0xffffff) != 0) goto LAB_toasty__800838b4;
        goto LAB_toasty__800838c4;
      case '\x15':
        pcVar12[0x17] = pcVar12[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar9 = (uint)(byte)pcVar12[0x18] + gameSpeedMultiplyer;
        pcVar12[0x18] = (char)uVar9;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0x11) +
             (short)((int)((int)sineWaveArray[(byte)pcVar12[0x17] + 0x40] * (uVar9 & 0xff)) >> 0xc);
        iVar8 = (int)sineWaveArray[(byte)pcVar12[0x17]] * (uint)(byte)pcVar12[0x18];
        sVar10 = (short)gameSpeedMultiplyer;
        bVar1 = pcVar12[0x18];
        pcVar12[10] = pcVar12[10] + '\x04';
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10 * 6;
        sVar10 = *(short *)(pcVar12 + 0x13);
        goto LAB_toasty__80082cbc;
      case '\x18':
        if ((byte)pcVar12[0xb] < 0xf0) {
          pcVar12[0xb] = pcVar12[0xb] + 4;
        }
        if ((byte)pcVar12[0xc] < 0xf0) {
          pcVar12[0xc] = pcVar12[0xc] + 4;
        }
        if ((byte)pcVar12[0xd] < 0xf0) {
          pcVar12[0xd] = pcVar12[0xd] + 4;
        }
        pcVar12[0x1b] = pcVar12[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar8 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar8 = dragonTimerCurrentState;
        }
        *(short *)(pcVar12 + 0x17) = (short)((int)((uint)(byte)pcVar12[0x1c] * (0x48 - iVar8)) >> 3)
        ;
        iVar8 = ((int)((0x20 - (uint)(byte)pcVar12[0x1c]) * iVar8) >> 4) + 8;
        *(short *)(pcVar12 + 0x19) = (short)iVar8;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar12[0x1b] + 0x40] * (iVar8 * 0x10000 >> 0x10) >>
                    0xc);
        sVar10 = sineWaveArray[(byte)pcVar12[0x1b]];
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0x15) + *(short *)(pcVar12 + 0x17) + 0x20;
        *(short *)(pcVar12 + 5) =
             *(short *)(pcVar12 + 0x13) +
             (short)((int)sVar10 * (int)*(short *)(pcVar12 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar15);
        if (*(short *)(pcVar12 + 0x1d) != 0) {
          *(short *)(pcVar12 + 0x1b) = *(short *)(pcVar12 + 0x1b) + 1;
        }
        iVar8 = (uint)(byte)pcVar12[0xb] - param_1;
        *(short *)(pcVar12 + 0x1d) = 1 - *(short *)(pcVar12 + 0x1d);
        pcVar12[9] = pcVar12[9] + cVar4 * '\x02';
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xb] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xc] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        pcVar12[0xc] = (char)iVar8;
        iVar8 = (uint)(byte)pcVar12[0xd] - param_1;
        if (iVar8 < 0) {
          iVar8 = 0;
        }
        bVar1 = pcVar12[1];
        pcVar12[0xd] = (char)iVar8;
        pcVar12[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_toasty__800838ac;
      case 'B':
        iVar8 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar12[1] & 1U) != 0) {
              *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
              *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
              *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
              if ((pcVar12[1] & 2U) != 0) {
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar7 & 2);
                iVar7 = rand();
                *(ushort *)(pcVar12 + 0x13) = *(short *)(pcVar12 + 0x13) + -1 + ((ushort)iVar7 & 2);
              }
            }
            iVar8 = iVar8 + 1;
            pcVar12[1] = pcVar12[1] + '\x01';
          } while (iVar8 < param_1);
        }
        bVar3 = (byte)pcVar12[1] < 0x18;
        goto LAB_toasty__800838ac;
      case 'F':
        local_48._0_2_ = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        local_48._2_2_ = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1)
        ;
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + local_48._2_2_;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        iVar8 = rand();
        local_48._0_2_ = (short)local_48 + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        sVar10 = local_48._2_2_ + -1 + ((ushort)iVar8 & 2);
        local_48 = CONCAT22(sVar10,(short)local_48);
        if ((pcVar12[1] & 1U) != 0) {
          local_44 = CONCAT22(local_44._2_2_,(short)local_44 + -1);
        }
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_48;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_44;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_toasty__800838c4;
        cVar2 = pcVar12[0xf];
        pcVar12[0xf] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0x80) {
          pcVar12[0xf] = -0x80;
        }
        cVar2 = pcVar12[0x10];
        pcVar12[0x10] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x60) {
          pcVar12[0x10] = '`';
        }
        cVar2 = pcVar12[0x13];
        pcVar12[0x11] = '\0';
        pcVar12[0x13] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0xc0) {
          pcVar12[0x13] = -0x40;
        }
        cVar2 = pcVar12[0x14];
        pcVar12[0x14] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x80) {
          pcVar12[0x14] = -0x80;
        }
        cVar2 = pcVar12[0x15];
        pcVar12[0x15] = cVar2 - 6U;
        if ((byte)(cVar2 - 6U) < 0x20) {
          pcVar12[0x15] = ' ';
        }
        break;
      case 'G':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_toasty__800838c4;
        local_40 = (int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3);
        local_3c = (int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5);
        local_38 = (int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_3c = local_3c + -1 + (uVar9 & 2);
        uVar9 = rand();
        local_38 = local_38 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + (short)local_40;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + (short)local_3c;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + (short)local_38;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 9) - (short)local_40;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 0xb) - (short)local_3c;
        pcVar12[0x13] = pcVar12[0x13] + -2;
        pcVar12[0x15] = pcVar12[0x15] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -2;
        pcVar12[0x10] = pcVar12[0x10] + -3;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 0xd) - (short)local_38;
        pcVar12[0x11] = pcVar12[0x11] + -3;
        break;
      case 'H':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x2f < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_toasty__800838c4;
        local_48 = (int)*(short *)(pcVar12 + 3) - (int)*(short *)(pcVar12 + 9) >> 1;
        local_44 = (int)*(short *)(pcVar12 + 5) - (int)*(short *)(pcVar12 + 0xb) >> 1;
        local_40 = (int)*(short *)(pcVar12 + 7) - (int)*(short *)(pcVar12 + 0xd) >> 1;
        uVar9 = rand();
        local_48 = local_48 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_44 = local_44 + -2 + (uVar9 & 4);
        uVar9 = rand();
        local_40 = local_40 + -1 + (uVar9 & 2);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + (short)local_48;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + (short)local_44;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)local_40;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 3) + (short)local_48 * -2;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 5) + (short)local_44 * -2;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 7) + (short)local_40 * -2;
        break;
      case 'L':
        pcVar12[0x17] = pcVar12[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar9 = (uint)(byte)pcVar12[0x18] + gameSpeedMultiplyer;
        pcVar12[0x18] = (char)uVar9;
        *(short *)(pcVar12 + 3) =
             *(short *)(pcVar12 + 0xf) +
             (short)((int)((int)sineWaveArray[(byte)pcVar12[0x17] + 0x40] * (uVar9 & 0xff)) >> 0xc);
        iVar8 = (int)sineWaveArray[(byte)pcVar12[0x17]] * (uint)(byte)pcVar12[0x18];
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (short)gameSpeedMultiplyer * 6;
        bVar1 = pcVar12[0x18];
        sVar10 = *(short *)(pcVar12 + 0x11);
LAB_toasty__80082cbc:
        *(short *)(pcVar12 + 5) = sVar10 + (short)(iVar8 >> 0xc);
        if (bVar1 < 0xc1) break;
        goto LAB_toasty__800838c4;
      case 'M':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar10;
        sVar5 = sVar5 + 1;
        local_48 = CONCAT22(sVar5,sVar11);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
        if (0x1f < (byte)(cVar2 + 1U)) goto LAB_toasty__800838c4;
        break;
      case 'N':
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        if ((0x27 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_toasty__800838c4;
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + *(short *)(pcVar12 + 0xf);
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + *(short *)(pcVar12 + 0x11);
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + *(short *)(pcVar12 + 0x13);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0xf) = *(short *)(pcVar12 + 0xf) + -1 + ((ushort)iVar8 & 2);
        iVar8 = rand();
        *(ushort *)(pcVar12 + 0x11) = *(short *)(pcVar12 + 0x11) + -1 + ((ushort)iVar8 & 2);
        uVar9 = rand();
        iVar8 = (*(ushort *)(pcVar12 + 0x13) - 1) + (uVar9 & 2);
        *(short *)(pcVar12 + 0x13) = (short)iVar8;
        if (2 < iVar8 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar12 + 0x13) = 2;
        }
        if (*(short *)(pcVar12 + 0x13) < -4) {
          *(undefined2 *)(pcVar12 + 0x13) = 0xfffc;
        }
        pcVar12[0xb] = pcVar12[0xb] + -2;
        pcVar12[0xd] = pcVar12[0xd] + -1;
        pcVar12[0xc] = pcVar12[0xc] + -2;
        break;
      case 'O':
        sVar11 = (short)((int)*(short *)(pcVar12 + 9) - (int)*(short *)(pcVar12 + 3) >> 1);
        sVar10 = (short)((int)*(short *)(pcVar12 + 0xb) - (int)*(short *)(pcVar12 + 5) >> 1);
        local_48 = CONCAT22(sVar10,sVar11);
        sVar5 = (short)((int)*(short *)(pcVar12 + 0xd) - (int)*(short *)(pcVar12 + 7) >> 1);
        local_44 = CONCAT22(local_44._2_2_,sVar5);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar10;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + sVar5;
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar10;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar2 + 1U)) || (pcVar12[2] == '\0')) goto LAB_toasty__800838c4;
        pcVar12[0xf] = pcVar12[0xf] + -3;
        pcVar12[0x13] = pcVar12[0x13] + -3;
        pcVar12[0x10] = pcVar12[0x10] + -4;
        pcVar12[0x14] = pcVar12[0x14] + -4;
        if (5 < (byte)pcVar12[0x15]) {
          pcVar12[0x15] = pcVar12[0x15] - 6;
        }
        break;
      case 'P':
        sVar11 = *(short *)(pcVar12 + 9) - *(short *)(pcVar12 + 3);
        sVar5 = *(short *)(pcVar12 + 0xb) - *(short *)(pcVar12 + 5);
        local_48 = CONCAT22(sVar5,sVar11);
        sVar10 = *(short *)(pcVar12 + 7);
        *(short *)(pcVar12 + 3) = *(short *)(pcVar12 + 3) + sVar11;
        *(short *)(pcVar12 + 5) = *(short *)(pcVar12 + 5) + sVar5;
        *(short *)(pcVar12 + 7) = *(short *)(pcVar12 + 7) + (*(short *)(pcVar12 + 0xd) - sVar10);
        sVar10 = (*(short *)(pcVar12 + 0xd) - sVar10) + -1;
        local_44 = CONCAT22(local_44._2_2_,sVar10);
        *(short *)(pcVar12 + 9) = *(short *)(pcVar12 + 9) + sVar11;
        *(short *)(pcVar12 + 0xb) = *(short *)(pcVar12 + 0xb) + sVar5;
        cVar2 = pcVar12[1];
        pcVar12[1] = cVar2 + 1U;
        bVar3 = (byte)(cVar2 + 1U) < 0x20;
        *(short *)(pcVar12 + 0xd) = *(short *)(pcVar12 + 0xd) + sVar10;
LAB_toasty__800838ac:
        if (bVar3) {
LAB_toasty__800838b4:
          if (pcVar12[2] != '\0') break;
        }
LAB_toasty__800838c4:
        FUN_80053608(pcVar14);
      }
      pcVar12 = pcVar12 + 0x20;
      pcVar15 = pcVar15 + 0x20;
      result = result + 0x10;
      pcVar14 = pcVar14 + 0x20;
    } while (*pcVar12 != -1);
  }
  return;
}



void Toasty_CreateParticle(int param_1,undefined4 param_2,int **param_3,int *param_4)

{
  bool bVar1;
  char cVar2;
  short extraout_var;
  undefined *puVar3;
  uint uVar4;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  undefined uVar8;
  short sVar9;
  int *piVar10;
  int iVar11;
  int local_a8;
  int local_a4;
  undefined4 local_a0;
  int aiStack_98 [4];
  int local_88;
  int local_84;
  int local_80;
  int local_78;
  int local_74;
  int local_70;
  int local_68;
  int local_64;
  int local_60;
  int local_58;
  int local_50;
  uint local_48;
  int local_40;
  int local_30;
  
  iVar11 = 0;
  if (0 < param_1) {
    local_50 = (int)param_4 >> 0x18;
    local_48 = (uint)param_4 & 0xf;
    local_40 = local_48 << 1;
    local_30 = 0;
    local_58 = param_1;
    do {
      uVar8 = (undefined)param_2;
      cVar2 = (char)param_4;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_toasty__80084160;
      case 1:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        if (bVar1) {
          uVar8 = 8;
        }
        else {
          uVar8 = 0x10;
        }
        puVar5[10] = uVar8;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x60;
        goto LAB_toasty__8008414c;
      case 2:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_a8 = (uVar7 & 0x3f) - 0x20;
        uVar7 = rand();
        local_a4 = (uVar7 & 0x3f) - 0x20;
        local_a0 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),&local_a8);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x20;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_toasty__80084160;
      case 6:
        piVar10 = *param_3;
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)(param_3 + 3));
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x3f + ((ushort)iVar6 & 0x7e);
        iVar6 = rand();
        *(int ***)(puVar5 + 0x18) = param_3 + 3;
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x100 + ((ushort)iVar6 & 0x1ff);
        *(short *)(puVar5 + 0x1c) = (short)piVar10[1];
        iVar6 = *piVar10;
        puVar5[10] = 0x20;
        puVar5[0xb] = 0x14;
        *(short *)(puVar5 + 0x1e) = (short)(iVar6 >> 6);
        if (*(char *)((int)param_3 + 0x49) == '\0') {
          if (levelIDPortalExit != 0x32) {
            puVar5[0xc] = 0x80;
            goto LAB_toasty__80083c70;
          }
switchD_toasty__80083be4_caseD_1:
          puVar5[0xc] = 0x80;
LAB_toasty__80083c60:
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          goto switchD_toasty__80083be4_caseD_8;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          goto switchD_toasty__80083be4_caseD_8;
        case 1:
          goto switchD_toasty__80083be4_caseD_1;
        case 2:
          puVar5[0xc] = 0;
          goto LAB_toasty__80083c60;
        case 3:
          puVar5[0xc] = 0;
LAB_toasty__80083c70:
          puVar5[0xd] = 0x80;
          break;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          break;
        case 5:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0;
          break;
        case 6:
          puVar5[0xc] = 0x80;
          puVar5[0xd] = 0x40;
          puVar5[0xe] = 0;
          goto switchD_toasty__80083be4_caseD_8;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x40;
          break;
        default:
          goto switchD_toasty__80083be4_caseD_8;
        }
        puVar5[0xe] = 0x80;
switchD_toasty__80083be4_caseD_8:
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 0;
        puVar5[0x10] = 0;
        break;
      case 9:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar8 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar5[0xc] = 0x80;
              puVar5[0xd] = 0x80;
              puVar5[0xe] = 0x80;
              goto LAB_toasty__80084160;
            }
            puVar5[0xc] = 0xe0;
          }
          else {
            puVar5[0xc] = 0xf0;
            uVar8 = 0x60;
          }
          puVar5[0xd] = uVar8;
          puVar5[0xe] = 0;
        }
        else {
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
        }
        goto LAB_toasty__80084160;
      case 10:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)&spyro);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_8006e438)[local_30];
        puVar5[0xd] = (&DAT_8006e439)[local_30];
        uVar8 = (&DAT_8006e43a)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar8;
        *(short *)(puVar5 + 0x18) = (short)(((local_58 - iVar11) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        puVar5[3] = 1;
        *puVar5 = uVar8;
        puVar5[0x11] = 4;
        sVar9 = *(short *)((int)param_3 + 0x36);
        if (sVar9 == 0x22) {
          Vec3Copy(aiStack_98,(int *)(param_3 + 3));
        }
        else if ((sVar9 == 0xad) || (sVar9 == 0xb5)) {
          if (local_50 < 6) {
            puVar3 = (undefined *)0x8006e4e0;
            iVar6 = local_50;
            goto LAB_toasty__80083ee4;
          }
          puVar5[1] = 5;
          puVar5[0x11] = 0x16;
          Vec3Copy(aiStack_98,(int *)(local_50 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar9 == 0x78) {
            puVar3 = &DAT_8006e570;
          }
          else {
            puVar3 = &DAT_8006e498;
            iVar6 = iVar11;
LAB_toasty__80083ee4:
            puVar3 = puVar3 + iVar6 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar3,aiStack_98);
          Vec3Add(aiStack_98,aiStack_98,param_3 + 3);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),aiStack_98);
        puVar5[0xd] = (char)((uint)param_4 >> 8);
        puVar5[0xc] = cVar2;
        puVar5[0xe] = (char)((uint)param_4 >> 0x10);
        puVar5[0xf] = 0x2e;
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 7) + 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0x10] = 0;
        break;
      case 0x15:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),(int *)param_3);
        cVar2 = cVar2 * '\x02';
        if (0xf < ((uint)param_4 & 0x1f)) {
          cVar2 = cVar2 + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        puVar5[0xe] = (char)local_48 * -8 + -0x80;
        puVar5[0x10] = 0;
        puVar5[10] = '0' - (char)local_40;
        puVar5[0xb] = (char)((int)param_4 << 1);
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 2;
        break;
      case 0x18:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),(int *)param_3);
        puVar5[10] = 0x30;
        puVar5[0x11] = 8;
        *(short *)(puVar5 + 0x18) = (short)(iVar11 << 5);
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        uVar8 = (undefined)(iVar11 << 4);
        puVar5[0xb] = uVar8;
        puVar5[0xf] = 0x2e;
        puVar5[0x10] = 0;
        *(undefined2 *)(puVar5 + 0x1a) = 0x10;
        puVar5[0x1c] = uVar8;
        puVar5[0x1d] = (char)iVar11;
        break;
      case 0x21:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_88,(int *)&spyro);
          local_80 = spyro.unkown_heightRelated;
          uVar7 = rand();
          local_88 = local_88 + -0x1f + (uVar7 & 0x3e);
          uVar7 = rand();
          local_84 = local_84 + -0x1f + (uVar7 & 0x3e);
        }
        else {
          local_88 = 0x164;
          local_84 = 0;
          local_80 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_88,&local_88);
          Vec3Add(&local_88,&local_88,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_88);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),(int *)param_3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x20;
LAB_toasty__8008414c:
        puVar5[0xc] = uVar8;
        puVar5[0xd] = uVar8;
        puVar5[0xe] = uVar8;
LAB_toasty__80084160:
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x42:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        piVar10 = param_3[2];
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)((int)piVar10 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_toasty__80084278;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_toasty__80084278;
        case 2:
          puVar5[0xc] = 0;
LAB_toasty__80084278:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_toasty__800842c0;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_toasty__800842c0;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_toasty__800842c0;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_toasty__800842c0:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        uVar7 = rand();
        local_78 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_74 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_70 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_78 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_74 * 4;
        sVar9 = (short)local_70;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_78 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_74 * 2;
        goto LAB_toasty__8008497c;
      case 0x47:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        uVar7 = rand();
        local_78 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_74 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_70 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)((int)*param_3 >> 2) + (short)local_78 * 4;
        *(short *)(puVar5 + 6) = (short)((int)param_3[1] >> 2) + (short)local_74 * 4;
        *(short *)(puVar5 + 8) = (short)((int)param_3[2] >> 2) + (short)local_70 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_78;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_74;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_70;
        break;
      case 0x4c:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x10),(int *)param_3);
        if (((uint)param_4 & 0x1f) < 0x10) {
          cVar2 = (char)((int)param_4 << 1);
        }
        else {
          cVar2 = cVar2 * '\x02' + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        cVar2 = (char)local_48 * -8 + -0x80;
        goto LAB_toasty__80084710;
      case 0x4d:
        puVar5 = (undefined *)AllocateParticleToBuffer(4);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        CosScaled(uVar7 & 0xfff);
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + extraout_var;
        uVar4 = rand();
        SinScaled(uVar4 & 0x7ff);
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + extraout_var_00;
        SinScaled(uVar7 & 0xfff);
        puVar5[0x17] = 0x7f;
        puVar5[0x11] = 0x40;
        puVar5[0x12] = 0x60;
        puVar5[0x16] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x10] = 0x80;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0x80;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar6 & 1);
        iVar6 = rand();
        puVar5[0xc] = (byte)iVar6 | 0x80;
        uVar7 = rand();
        uVar7 = (uVar7 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar7;
        if ((byte)puVar5[0xc] < uVar7) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar6 = rand();
        cVar2 = ((byte)iVar6 & 0x3f) + 0x40;
LAB_toasty__80084710:
        puVar5[0xe] = cVar2;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),(int *)param_3);
        Vec3Add(&local_78,param_3,param_4);
        uVar7 = rand();
        local_78 = local_78 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_74 = local_74 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_70 = local_70 + -0x40 + (uVar7 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_78);
        puVar5[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0xa0;
          puVar5[0x12] = 0;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = (byte)iVar6 | 0xe0;
          puVar5[0x16] = 0x80;
        }
        else {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x12] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = ((byte)iVar6 & 0x1f) + 0xa0;
          iVar6 = rand();
          puVar5[0x16] = ((byte)iVar6 & 0x1f) + 0xa0;
        }
        puVar5[0x13] = 0x50;
        break;
      case 0x50:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)param_3);
        uVar7 = rand();
        local_68 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_64 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_60 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + (short)local_68 * 4;
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + (short)local_64 * 4;
        sVar9 = (short)local_60;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_68 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_64 * 2;
LAB_toasty__8008497c:
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + sVar9 * 2;
      }
      local_30 = local_30 + 4;
      iVar11 = iVar11 + 1;
    } while (iVar11 < local_58);
  }
  return;
}



void FUN_town_square__8007af2c(int **param_1)

{
  int aiStack_20 [4];
  
  gameState = GAMESTATE_BALLOONIST;
  balloonistState = 0;
  DAT_800777ec = 0;
  balloonistCursorPlacement = 0;
                    // WARNING: Read-only address (ram,0x8007784c) is written
  isInDragonState = 1;
  DAT_8007579c = 1;
  DAT_80077850 = ptr_startOfCurrentLevelMobys + **param_1 * 0x58;
  DAT_8007784c = param_1;
  DAT_80077820 = ATan2Scaled(cameraPosition.x - (int)param_1[3],cameraPosition.y - (int)param_1[4],1
                            );
  Vec3Subtract(aiStack_20,&cameraPosition.x,(int *)(param_1 + 3));
  DAT_80077824 = Vec3CalculateLengthE(aiStack_20,flag2D);
  DAT_80077828 = cameraPosition.z;
  DAT_8007783c = 0x52e;
  DAT_80077838 = (uint)*(byte *)((int)param_1 + 0x46) * 0x10 - 0x312 & 0xfff;
  DAT_80077840 = (int)param_1[5] + 0x58f;
  return;
}



void FUN_town_square__8007b068(void)

{
  ExitFairyOrBalloonist();
  spyro.headAngle.pitch = 0;
  spyro.headAngle.pad2 = 0;
  spyro.unkown1._1_1_ = 0;
  if (ptr_SparxMoby != 0) {
    *(undefined *)(ptr_SparxMoby + 0x50) = 0x10;
  }
  return;
}



void FUN_town_square__8007b0ac(void)

{
  undefined4 uVar1;
  LevelIDS LVar2;
  int iVar3;
  int iVar4;
  uint uVar5;
  int iVar6;
  int iVar7;
  int *outputArray;
  uint local_78;
  uint local_74;
  int local_70;
  short local_68;
  short local_66;
  short local_64;
  uint local_60;
  uint local_5c;
  int local_58;
  uint local_50;
  uint local_4c;
  int local_48;
  uint local_40;
  uint local_3c;
  int local_38;
  uint local_30;
  uint local_2c;
  int local_28;
  
  if (balloonistState < 4) {
    DAT_800700f8 = 0;
    DAT_800700f4 = DAT_8007784c;
    FUN_800522c0(&DAT_800700f4,0);
  }
  switch(balloonistState) {
  case 0:
    if (0x5f < DAT_800777ec) {
      iVar6 = CosScaled(DAT_80077838);
      cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar6 * DAT_8007783c >> 0xc);
      iVar6 = SinScaled(DAT_80077838);
      cameraPosition.z = DAT_80077840;
      cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar6 * DAT_8007783c >> 0xc);
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      balloonistState = 1;
      DAT_800777ec = 0;
      spyro.RelativeSparxAngle.roll = (char)((int)DAT_8007781c >> 4);
      spyro.nextAnim = '\0';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    iVar6 = SinScaled((DAT_800777ec << 0xb) / 0x60 + -0x400);
    iVar6 = iVar6 + 0x1000;
    if (DAT_800777ec == gameSpeedMultiplyer) {
      if (ptr_SparxMoby != (int *)0x0) {
        *(undefined *)(ptr_SparxMoby + 0x14) = 0;
        *(undefined *)((int)ptr_SparxMoby + 0x51) = 0;
        if (*(int *)(*ptr_SparxMoby + 0xc) != 0) {
          SetToZero();
          *(undefined4 *)(*ptr_SparxMoby + 0xc) = 0;
        }
      }
      backupSuperFlameTimer = superFlameTimer;
      Unk_UpdateSpyroAfterEvents(1);
      spyro.currentAnim = '\x01';
      spyro.nextAnim = '\x01';
      spyro.nextKeyframe = '\x01';
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = 0x4a0;
      DAT_80077810 = 0;
      DAT_80077814 = 0x164;
      Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&DAT_8007780c,&DAT_8007780c);
      Vec3Add(&DAT_8007780c,&DAT_8007780c,DAT_8007784c + 0xc);
      DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      DAT_8007781c = ATan2Scaled(local_78,local_74,1);
    }
    if (DAT_800777ec < 0x18) {
      iVar3 = SinScaled((DAT_800777ec << 0xb) / 0x18 + -0x400);
      iVar3 = iVar3 + 0x1000;
      if ((DAT_8007781c - DAT_80077818 & 0xfff) < 0x801) {
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
      }
      else {
LAB_town_square__8007b520:
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 - (iVar4 * iVar3 >> 0xd);
      }
LAB_town_square__8007b540:
      spyro.RelativeSparxAngle.roll = (char)(iVar3 >> 4);
      uVar1._0_1_ = '\b';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
LAB_town_square__8007b550:
      spyro._88_4_ = uVar1;
    }
    else {
      if (0x47 < DAT_800777ec) {
        iVar3 = SinScaled(((DAT_800777ec + -0x48) * 0x800) / 0x18 + -0x400);
        iVar3 = iVar3 + 0x1000;
        if (DAT_800777ec - gameSpeedMultiplyer < 0x48) {
          DAT_80077818 = (uint)(byte)spyro.RelativeSparxAngle.roll << 4;
          spyro.nextAnim = '\x03';
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\b';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          DAT_8007781c = (uint)*(byte *)(DAT_8007784c + 0x46) * 0x10 - 0x800 & 0xfff;
        }
        if (0x800 < (DAT_8007781c - DAT_80077818 & 0xfff)) goto LAB_town_square__8007b520;
        iVar4 = Maybe_AngleDiff();
        iVar3 = DAT_80077818 + (iVar4 * iVar3 >> 0xd);
        goto LAB_town_square__8007b540;
      }
      iVar3 = SinScaled(((DAT_800777ec + -0x18) * 0x800) / 0x30 + -0x400);
      Vec3Subtract((int *)&local_78,&DAT_8007780c,&DAT_80077800);
      Vec3Scale(&local_78,&local_78,iVar3 + 0x1000);
      Vec3ScaleDownByPowerOfTwo((int *)&local_78,0xd);
      Vec3Add(&spyro,&DAT_80077800,&local_78);
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      spyro._88_4_ = (int)uVar5 >> 1;
      if ((int)spyro._88_4_ < 4) {
        spyro.animSpeed = '\x04';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      uVar1._0_1_ = '\x10';
      uVar1._1_1_ = '\0';
      uVar1._2_1_ = '\0';
      uVar1._3_1_ = '\0';
      if (0x10 < (int)spyro._88_4_) goto LAB_town_square__8007b550;
    }
    spyro.RelativeSparxAngle.yaw = '\0';
    spyro.RelativeSparxAngle.pitch = '\0';
    spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
    UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
    FUN_80049fac(1);
    FlameButAlsoNotFlame(gameSpeedMultiplyer);
    if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
    }
    else {
      iVar3 = Maybe_AngleDiff();
      iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
    }
    iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
    iVar4 = CosScaled(iVar3);
    cameraPosition.x = *(int *)(DAT_8007784c + 0xc) + (iVar4 * iVar7 >> 0xc);
    iVar3 = SinScaled(iVar3);
    local_78 = 0x220;
    local_70 = 0x340;
    local_74 = 0;
    cameraPosition.y = *(int *)(DAT_8007784c + 0x10) + (iVar3 * iVar7 >> 0xc);
    cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
    Vec3ApplyRotationMatrix(DAT_8007784c + 0x20,&local_78,&local_78);
    Vec3Add(&local_78,&local_78,DAT_8007784c + 0xc);
    Vec3Subtract((int *)&local_78,(int *)&local_78,&cameraPosition.x);
    if (DAT_800777ec < 0x20) {
      local_68 = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      local_66 = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      local_64 = (short)iVar6;
      iVar6 = FUN_8001796c((int)local_68,(int)cameraAngle.roll);
      cameraAngle.roll = cameraAngle.roll + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_66,(int)cameraAngle.pitch);
      cameraAngle.pitch = cameraAngle.pitch + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
      iVar6 = FUN_8001796c((int)local_64,(int)cameraAngle.yaw);
      cameraAngle.yaw = cameraAngle.yaw + (short)(iVar6 * DAT_800777ec >> 5) & 0xfff;
    }
    else {
      cameraAngle.roll = 0;
      uVar5 = Vec3CalculateLengthE((int *)&local_78,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_70,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_78,local_74,1);
      cameraAngle.yaw = (short)iVar6;
    }
    (*ptr_OverlayUpdateParticles)(gameSpeedMultiplyer);
    Maybe_SoundEffectProcessing();
    break;
  case 1:
    if (balloonistDialogue < 0x1e) {
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x51) {
        return;
      }
      iVar6 = balloonistDialogue % 6;
      if (iVar6 == 0) {
        iVar3 = balloonistDialogue + 1;
      }
      else if (iVar6 < 3) {
        if ((balloonistDialogue < 3) && (requirementArtisans < 2)) {
          (*ptr_OverlayBalloonistStayHere)();
          iVar3 = balloonistDialogue;
        }
        else if (balloonistDialogue == 0xe) {
          do {
            iVar6 = rand();
            iVar6 = iVar6 % 5;
            if ((iVar6 == 0) && (DAT_80076fec == 0)) {
              iVar3 = 0x21;
LAB_town_square__8007bb48:
              balloonistDialogue = iVar3;
            }
            else {
              if ((iVar6 == 1) && (DAT_80077004 == 0)) {
                iVar3 = 0x22;
                goto LAB_town_square__8007bb48;
              }
              if ((iVar6 == 2) && (DAT_80077008 == 0)) {
                iVar3 = 0x23;
                goto LAB_town_square__8007bb48;
              }
              if (((iVar6 == 3) && (iVar3 = 0x24, DAT_80077018 < 2)) ||
                 ((iVar6 == 4 && (iVar3 = 0x25, DAT_80077024 == 0))))
              goto LAB_town_square__8007bb48;
            }
            iVar3 = balloonistDialogue;
          } while (balloonistDialogue == 0xe);
        }
        else {
          balloonistDialogue = 0x1e;
          iVar3 = balloonistDialogue;
        }
      }
      else if (iVar6 == 3) {
        iVar3 = balloonistDialogue + 2;
      }
      else {
        iVar3 = 0x1f;
        if (iVar6 == 4) {
          iVar3 = balloonistDialogue + 1;
        }
      }
      balloonistDialogue = iVar3;
      DAT_800777ec = 0;
      return;
    }
    if (balloonistDialogue == 0x1e) {
      iVar6 = 1;
      do {
        if ((&unlockedHWs)[iVar6] != '\x02') break;
        iVar6 = iVar6 + 1;
      } while (iVar6 < 6);
      if ((currentButtonOneFrame & UP_BUTTON) == 0) {
        if ((currentButtonOneFrame & DOWN_BUTTON) != 0) {
          balloonistCursorPlacement = balloonistCursorPlacement + 1;
          if (iVar6 <= balloonistCursorPlacement) {
            balloonistCursorPlacement = 0;
          }
          goto LAB_town_square__8007bc54;
        }
      }
      else {
        balloonistCursorPlacement = balloonistCursorPlacement + -1;
        if (balloonistCursorPlacement < 0) {
          balloonistCursorPlacement = iVar6 + -1;
        }
LAB_town_square__8007bc54:
        DAT_800777ec = 0x20;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        levelID = balloonistCursorPlacement * 10;
        if (levelIDPortalExit <= (int)levelID) {
          levelID = levelID + ARTISANS_ID;
        }
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)levelID / 10 + -1;
        return;
      }
    }
    else {
      if (1 < balloonistDialogue - 0x1fU) {
        if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON|RIGHT_BUTTON|DOWN_BUTTON)) == 0) {
          return;
        }
        if (DAT_800777ec < 0x51) {
          return;
        }
        if ((balloonistDialogue == 0x24) || (balloonistDialogue == 0x26)) {
          balloonistCursorPlacement = 0;
          balloonistDialogue = 0x1e;
          balloonistRandomGreeting = 1;
          return;
        }
        if (balloonistDialogue == 0x25) {
          DAT_800777ec = 0;
          balloonistDialogue = 0x26;
          return;
        }
        if (balloonistDialogue == 0x21) {
          LVar2 = STONE_HILL_ID;
        }
        else if (balloonistDialogue == 0x22) {
          LVar2 = DRY_CANYON_ID;
        }
        else {
          LVar2 = CLIFF_TOWN_ID;
          if (balloonistDialogue != 0x23) goto LAB_town_square__8007bf30;
        }
        levelID = LVar2;
LAB_town_square__8007bf30:
        balloonistDropoffLocation = balloonistDialogue + -0x1b;
        DAT_800777ec = 0;
        balloonistDialogue = 0x20;
        return;
      }
      if ((currentButtonOneFrame & (UP_BUTTON|DOWN_BUTTON)) != 0) {
        DAT_800777ec = 0x20;
        balloonistCursorPlacement = 1 - balloonistCursorPlacement;
        PlaySoundEffect((uint)localSFXArray[0x2d],(int *)0x0,0x10,0);
      }
      if ((currentButtonOneFrame & (X_BUTTON|START_BUTTON)) == 0) {
        return;
      }
      if (DAT_800777ec < 0x1f) {
        return;
      }
      if (balloonistCursorPlacement != 0) {
        PauseMusicAndSFX(0);
        if (balloonistDialogue != 0x1f) {
          balloonistState = 2;
          DAT_800777ec = 0;
          return;
        }
        levelID = levelIDPortalExit + ARTISANS_ID;
        balloonistState = 2;
        DAT_800777ec = 0;
        balloonistDropoffLocation = (int)(levelIDPortalExit + ARTISANS_ID) / 10 + -1;
        return;
      }
      if (balloonistDialogue != 0x1f) {
        balloonistCursorPlacement = 0;
        balloonistDialogue = 0x1e;
        balloonistRandomGreeting = 1;
        return;
      }
    }
    (*ptr_OverlayBalloonistStayHere)();
    break;
  case 2:
    if (DAT_800777ec < 0x66) {
      iVar6 = SinScaled((DAT_800777ec * 0x800) / 0x66 + -0x400);
      iVar6 = iVar6 + 0x1000;
      if (DAT_800777ec == gameSpeedMultiplyer) {
        *(undefined *)((int)DAT_80077850 + 0x4a) = 0xff;
        DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                   cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
        Vec3Subtract((int *)&local_60,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
        DAT_80077824 = Vec3CalculateLengthE((int *)&local_60,flag2D);
        DAT_8007782c = (int)cameraAngle.roll;
        DAT_80077830 = (int)cameraAngle.pitch;
        DAT_80077834 = (int)cameraAngle.yaw;
        DAT_80077828 = cameraPosition.z;
        DAT_8007783c = 0xe00;
        DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 - 0x480 & 0xfff;
        DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
        DAT_80077848 = *(int *)(DAT_8007784c + 0x14) + 0x488;
        Vec3Copy(&DAT_80077800,(int *)&spyro);
        Vec3Copy(&DAT_8007780c,(int *)(DAT_8007784c + 0xc));
        spyro.currentKeyfame = spyro.nextKeyframe;
        spyro.nextAnim = '\x05';
        spyro.nextKeyframe = '\0';
        spyro.maybe_AnimSpeedRelated = '\0';
        spyro.animSpeed = '\a';
        spyro.unkown10 = '\0';
        spyro.unkown11 = '\0';
        spyro.unkown12 = '\0';
      }
      if (DAT_800777ec < 0x30) {
        spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec) / 0x30;
        spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec) / 0x30;
        iVar3 = SinScaled(DAT_800777ec << 5);
        spyro.position.z = DAT_80077808 + (iVar3 * 10) / 0x24;
        spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
        UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
        FUN_80049fac(1);
      }
      else {
        if (DAT_800777ec - gameSpeedMultiplyer < 0x30) {
          DAT_80077808 = DAT_80077808 + 0x325;
          DAT_80077800 = DAT_8007780c;
          DAT_80077804 = DAT_80077810;
          Vec3Copy(&DAT_8007780c,(int *)((int)DAT_80077850 + 0xc));
          spyro.currentKeyfame = spyro.nextKeyframe;
          spyro.nextKeyframe = '\0';
          spyro.maybe_AnimSpeedRelated = '\0';
          spyro.animSpeed = '\x04';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
        }
        iVar3 = DAT_800777ec + -0x36;
        if (0x35 < DAT_800777ec - gameSpeedMultiplyer) {
          spyro.animSpeed = '\a';
          spyro.unkown10 = '\0';
          spyro.unkown11 = '\0';
          spyro.unkown12 = '\0';
          spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * iVar3) / 0x30;
          spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * iVar3) / 0x30;
          iVar3 = SinScaled(iVar3 * 0x20);
          spyro.position.z = DAT_80077808 + (iVar3 >> 2);
        }
      }
      if ((DAT_80077838 - DAT_80077820 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077820 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_80077824 + ((int)((DAT_8007783c - DAT_80077824) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077828 + ((DAT_80077840 - DAT_80077828) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_60,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      uVar5 = Vec3CalculateLengthE((int *)&local_60,flag2D);
      iVar3 = ATan2Scaled(uVar5,-local_58,1);
      local_66 = (short)iVar3;
      iVar3 = ATan2Scaled(local_60,local_5c,1);
      local_64 = (short)iVar3;
      iVar3 = FUN_8001796c((int)local_66,DAT_80077830);
      cameraAngle.pitch = (short)DAT_80077830 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      iVar3 = FUN_8001796c((int)local_64,DAT_80077834);
      cameraAngle.yaw = (short)DAT_80077834 + (short)(iVar3 * iVar6 >> 0xd) & 0xfff;
      *(int *)((int)DAT_80077850 + 0x14) =
           DAT_80077844 + ((DAT_80077848 - DAT_80077844) * iVar6 >> 0xd);
    }
    else {
      balloonistState = 3;
      DAT_800777ec = 0;
    }
    break;
  case 3:
    if (0x7f < DAT_800777ec) {
      DAT_80077820 = ATan2Scaled(cameraPosition.x - *(int *)((int)DAT_80077850 + 0xc),
                                 cameraPosition.y - *(int *)((int)DAT_80077850 + 0x10),1);
      Vec3Subtract((int *)&local_50,&cameraPosition.x,(int *)((int)DAT_80077850 + 0xc));
      DAT_80077824 = Vec3CalculateLengthE((int *)&local_50,flag2D);
      DAT_80077828 = cameraPosition.z;
      DAT_8007783c = 0x800;
      levelLoadState = 0;
      portalNumber = 0xffffffff;
      canFlyIn = 0;
      portalToExitFromInHW = 0;
      DAT_80077838 = (uint)*(byte *)((int)DAT_80077850 + 0x46) * 0x10 + 0x390 & 0xfff;
      balloonistState = 4;
      DAT_800777ec = 0;
      DAT_80077840 = *(int *)((int)DAT_80077850 + 0x14) + 0x200;
      LevelTransitionRelated(1);
      ArrayCopy((int *)&DAT_80071e9c,DAT_80077850,0x58);
      DAT_80077850 = &DAT_80071e9c;
      if (DAT_800785e8 < 0x80200000) {
        outputArray = (int *)(DAT_80078a44 + -0x400c);
      }
      else {
        outputArray = (int *)&DAT_801fe000;
      }
      ArrayCopy(outputArray,DAT_800769f8,0x4000);
      iVar3 = (int)DAT_800769f8;
      iVar6 = outputArray[0xe] - (int)DAT_800769f8;
      DAT_800769f8 = outputArray;
      outputArray[0xe] = (int)outputArray + iVar6;
      *(int *)(DAT_800769f8[0xe] + 0x14) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x14) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x18) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x18) - iVar3);
      *(int *)(DAT_800769f8[0xe] + 0x24) =
           (int)outputArray + (*(int *)(DAT_800769f8[0xe] + 0x24) - iVar3);
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      spyro.position.x = DAT_8007780c;
      DAT_80077828 = cameraPosition.z;
      spyro.position.y = DAT_80077810;
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.animSpeed = '\x04';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      spyro.nextAnim = '\0';
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.unkown3 = '\x03';
      spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    }
    if (DAT_800777ec < 0x40) {
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0xc00);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    else {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * 0x4b;
      iVar6 = SinScaled(DAT_800777ec * 0x10 + 0x800);
      cameraPosition.z = DAT_80077828 + ((iVar6 + 0x1000) * 3 >> 2);
    }
    Vec3Subtract((int *)&local_50,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_50,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_48,1);
    cameraAngle.pitch = (short)iVar6;
    local_30 = local_50;
    local_2c = local_4c;
    goto LAB_town_square__8007cd0c;
  case 5:
    if (levelLoadState < 0xd) {
      LevelTransitionRelated(1);
    }
    if (DAT_800777ec < 0x100) {
      iVar6 = SinScaled(((DAT_800777ec << 0xb) >> 8) + -0x400);
      iVar6 = iVar6 + 0x1000;
      if ((DAT_80077820 - DAT_80077838 & 0xfff) < 0x801) {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 + (iVar3 * iVar6 >> 0xd);
      }
      else {
        iVar3 = Maybe_AngleDiff();
        iVar3 = DAT_80077838 - (iVar3 * iVar6 >> 0xd);
      }
      iVar7 = DAT_8007783c + ((int)((DAT_80077824 - DAT_8007783c) * iVar6) >> 0xd);
      iVar4 = CosScaled(iVar3);
      cameraPosition.x = *(int *)((int)DAT_80077850 + 0xc) + (iVar4 * iVar7 >> 0xc);
      iVar3 = SinScaled(iVar3);
      cameraPosition.y = *(int *)((int)DAT_80077850 + 0x10) + (iVar3 * iVar7 >> 0xc);
      cameraPosition.z = DAT_80077840 + ((DAT_80077828 - DAT_80077840) * iVar6 >> 0xd);
      Vec3Subtract((int *)&local_40,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
      local_38 = (local_38 + 0x200) - (iVar6 >> 4);
      uVar5 = Vec3CalculateLengthE((int *)&local_40,flag2D);
      iVar6 = ATan2Scaled(uVar5,-local_38,1);
      cameraAngle.pitch = (short)iVar6;
      iVar6 = ATan2Scaled(local_40,local_3c,1);
      cameraAngle.yaw = (short)iVar6;
    }
    else if (levelLoadState == 0xd) {
      balloonistState = 6;
      DAT_800777ec = 0;
      LevelTransitionRelated(1);
    }
    break;
  case 6:
    if (0x7f < DAT_800777ec) {
      balloonistState = 7;
      DAT_800777ec = 0;
      Vec3Copy(&DAT_80077800,(int *)&spyro);
      DAT_8007780c = *(int *)(&DAT_8006eadc + balloonistDropoffLocation * 8);
      DAT_80077810 = *(int *)(&DAT_8006eae0 + balloonistDropoffLocation * 8);
      DAT_80077814 = spyro.position.z;
      iVar6 = MobyUpdatePosition(&DAT_8007780c,0x10000);
      DAT_80077814 = iVar6 + 0x164;
      spyro.nextAnim = '\x05';
      spyro.currentKeyfame = spyro.nextKeyframe;
      spyro.nextKeyframe = '\0';
      spyro.maybe_AnimSpeedRelated = '\0';
      spyro.animSpeed = '\x06';
      spyro.unkown10 = '\0';
      spyro.unkown11 = '\0';
      spyro.unkown12 = '\0';
      return;
    }
    if (DAT_800777ec == gameSpeedMultiplyer) {
      DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14);
      DAT_80077828 = cameraPosition.z;
    }
    if (DAT_800777ec < 0x40) {
      *(int *)((int)DAT_80077850 + 0x14) =
           *(int *)((int)DAT_80077850 + 0x14) + gameSpeedMultiplyer * -0x4b;
      iVar6 = SinScaled(DAT_800777ec * -0x10);
      cameraPosition.z = DAT_80077828 + (iVar6 * 3 >> 2);
    }
    else {
      if (DAT_800777ec - gameSpeedMultiplyer < 0x40) {
        DAT_80077844 = *(int *)((int)DAT_80077850 + 0x14) + -0x4b;
      }
      iVar6 = SinScaled(DAT_800777ec * -0x10 + 0x400);
      *(int *)((int)DAT_80077850 + 0x14) = DAT_80077844 + (iVar6 * 3 >> 2);
    }
    Vec3Subtract((int *)&local_30,(int *)((int)DAT_80077850 + 0xc),&cameraPosition.x);
    uVar5 = Vec3CalculateLengthE((int *)&local_30,flag2D);
    iVar6 = ATan2Scaled(uVar5,-local_28,1);
    cameraAngle.pitch = (short)iVar6;
LAB_town_square__8007cd0c:
    iVar6 = ATan2Scaled(local_30,local_2c,1);
    cameraAngle.yaw = (short)iVar6;
    spyro.position.z = *(int *)((int)DAT_80077850 + 0x14) + 0x2d4;
    spyro.RelativeSparxAngle.roll = *(char *)((int)DAT_80077850 + 0x46) + -0x80;
    break;
  case 7:
    if (DAT_800777ec < 0x40) {
      spyro.position.x = DAT_80077800 + ((DAT_8007780c - DAT_80077800) * DAT_800777ec >> 6);
      spyro.position.y = DAT_80077804 + ((DAT_80077810 - DAT_80077804) * DAT_800777ec >> 6);
      iVar6 = SinScaled(DAT_800777ec * 0x18 + 0x200);
      spyro.position.z = DAT_80077814 + (iVar6 * (DAT_80077808 - DAT_80077814)) / 0xb50;
      spyro.unkown_heightRelated = MobyUpdatePosition(&spyro,0x10000);
      UNK_MatrixOperation(0x80078a64,0x80078a8c,0);
      FUN_80049fac(1);
      if (0x1f < DAT_800777ec) {
        *(int *)((int)DAT_80077850 + 0x14) =
             *(int *)((int)DAT_80077850 + 0x14) + DAT_800777ec * gameSpeedMultiplyer;
      }
    }
    else {
      Vec3Copy((int *)&spyro,&DAT_8007780c);
      Unk_UpdateSpyroAfterEvents(1);
      spyro.isMovementLocked = 0x10;
      DAT_80076ea0 = &spyro;
      maybe_cameraRelated = 0;
      unk_cameraRelatedLocking = 0;
      flyInAnimation = &DAT_8006c8bc;
      unk_camera_related_angle = spyro.angle.yaw;
      CameraRotation(&cameraPosition);
      ArrayCopy((int *)&DAT_8006c8bc,&maybeSpyroCameraOrbitYaw2,0x18);
      DAT_8006c8bc = DAT_8006c8bc + unk_camera_related_angle & 0xfff;
      ChangeFlyInCamera();
      Maybe_HudInPauseMenu(0);
      gameState = GAMESTATE_GAMEPLAY;
      DAT_8007579c = 1;
      isInDragonState = 0;
      Maybe_ResetHudTimers();
    }
  }
                    // WARNING: Read-only address (ram,0x80076fec) is written
                    // WARNING: Read-only address (ram,0x80077004) is written
                    // WARNING: Read-only address (ram,0x80077008) is written
                    // WARNING: Read-only address (ram,0x80077018) is written
                    // WARNING: Read-only address (ram,0x80077024) is written
                    // WARNING: Read-only address (ram,0x8007784c) is written
  return;
}



void FUN_town_square__8007d04c(void)

{
  int *piVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  int *piVar5;
  byte *text;
  char *pcVar6;
  undefined *puVar7;
  uint uVar8;
  uint uVar9;
  byte **ppbVar10;
  int local_e0;
  undefined4 local_dc;
  undefined4 local_d8;
  int local_d0;
  undefined4 local_cc;
  undefined4 local_c8;
  byte abStack_c0 [32];
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int local_90;
  int local_8c;
  undefined4 local_88;
  int local_80;
  int local_7c;
  undefined4 local_78;
  int local_70;
  int local_6c;
  undefined4 local_68;
  int local_60;
  int local_5c;
  undefined4 local_58;
  int local_50;
  int local_4c;
  undefined4 local_48;
  byte abStack_40 [40];
  
  uVar9 = ptr_hudMobys;
  if (balloonistState < 4) {
    if (balloonistState < 2) {
      sprintf((char *)abStack_c0,s__s_THE_BALLOONIST_town_square__8007aa5c,
              (&PTR_s_RETURN_HOME_8006f880)[levelIDPortalExit / 10]);
      iVar2 = strlen((char *)abStack_c0);
      local_e0 = iVar2 * -8 + 0x108;
      local_dc = 0xcc;
      local_d8 = 0x1100;
      local_d0 = 0x10;
      local_cc = 1;
      local_c8 = 0x1400;
      DrawTextAll(abStack_c0,&local_e0,&local_d0,0x12,'\v');
      iVar2 = uVar9 - 0x58;
      if ((int)ptr_hudMobys <= iVar2) {
        iVar3 = 0;
        do {
          *(char *)(iVar2 + 0x46) =
               (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
          iVar2 = iVar2 + -0x58;
          iVar3 = iVar3 + 0xc;
        } while ((int)ptr_hudMobys <= iVar2);
      }
    }
    iVar2 = balloonistState;
    if (balloonistState == 1) {
      if (balloonistDialogue - 0x1eU < 3) {
        if (balloonistDialogue == 0x1e) {
          local_70 = 0xe;
          local_68 = 0x1600;
          local_78 = 0x1400;
          local_80 = 0xf0;
          local_6c = balloonistState;
          local_7c = 0x24;
          if (balloonistRandomGreeting == 0) {
            pcVar6 = s_HOP_ON__SPYRO__town_square__8007aa70;
          }
          else if (balloonistRandomGreeting == 1) {
            pcVar6 = s_NEED_A_LIFT__town_square__8007aa80;
          }
          else {
            pcVar6 = s_WHERE_TO__SPYRO__town_square__8007aa90;
          }
          DrawTextAll((byte *)pcVar6,&local_80,&local_70,0x10,'\v');
          local_80 = 0x110;
          uVar9 = ptr_hudMobys - 0x58;
          local_7c = local_7c + 0x14;
          DrawTextAll((byte *)s_STAY_HERE_town_square__8007aaa4,&local_80,&local_70,0x10,'\v');
          local_7c = local_7c + 0xf;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          iVar3 = 1;
          iVar2 = 0;
          do {
            if ((levelIDPortalExit / 10 + -1 != iVar2) && ((&unlockedHWs)[iVar2] == '\x02')) {
              local_80 = 0x110;
              uVar9 = ptr_hudMobys - 0x58;
              DrawTextAll((&PTR_s_ARTISANS_8006f7d4)[iVar2],&local_80,&local_70,0x10,'\v');
              local_7c = local_7c + 0xf;
              if ((balloonistCursorPlacement == iVar3) && (ptr_hudMobys <= uVar9)) {
                iVar4 = 0;
                do {
                  *(char *)(uVar9 + 0x46) =
                       (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar4 & 0xff) + 0x40] >> 8);
                  uVar9 = uVar9 - 0x58;
                  iVar4 = iVar4 + 0xc;
                } while (ptr_hudMobys <= uVar9);
              }
              iVar3 = iVar3 + 1;
            }
            iVar2 = iVar2 + 1;
          } while (iVar2 < 6);
          DrawTextBox(0xe0,0x1d8,0x19,iVar3 * 0xf + 0x33);
          DrawLine(0xf0,0x2e,0x1a0,0x2e);
          local_80 = 0xf4;
          local_78 = 0x1100;
          local_7c = balloonistCursorPlacement * 0xf + 0x36;
          DrawArrow(&local_80,DAT_800777ec,0);
        }
        else if (balloonistDialogue - 0x1fU < 2) {
          DrawTextBox(0x48,0x1b8,0x1c,0x66);
          DrawLine(100,0x37,0x184,0x37);
          local_60 = 0x60;
          local_58 = 0x1100;
          local_5c = balloonistCursorPlacement * 0x13 + 0x43;
          DrawArrow(&local_60,DAT_800777ec,0);
          local_50 = 0x10;
          local_48 = 0x1400;
          local_5c = 0x2c;
          local_4c = iVar2;
          local_58 = 0x1100;
          local_60 = 0x60;
          if (balloonistDialogue == 0x1f) {
            pcVar6 = s_ARE_YOU_READY_TO_GO__town_square__8007aab0;
          }
          else {
            pcVar6 = s_WOULD_YOU_LIKE_TO_GO__town_square__8007aac8;
          }
          DrawTextAll((byte *)pcVar6,&local_60,&local_50,0x12,'\v');
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          local_5c = local_5c + 0x19;
          DrawTextAll((byte *)s_STAY_HERE_town_square__8007aaa4,&local_60,&local_50,0x12,'\v');
          local_5c = local_5c + 0x13;
          if ((balloonistCursorPlacement == 0) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
          local_60 = 0x80;
          uVar9 = ptr_hudMobys - 0x58;
          if (balloonistDialogue == 0x1f) {
            puVar7 = (&PTR_s_ARTISANS_8006f7d4)[levelIDPortalExit / 10];
          }
          else {
            puVar7 = (&PTR_s_PEACE_KEEPERS_8006f7d8)[levelID + ((int)levelID / 10) * -4];
          }
          sprintf((char *)abStack_40,s_GO_TO__s_town_square__8007aae0,puVar7);
          DrawTextAll(abStack_40,&local_60,&local_50,0x12,'\v');
          if ((balloonistCursorPlacement == 1) && (ptr_hudMobys <= uVar9)) {
            iVar2 = 0;
            do {
              *(char *)(uVar9 + 0x46) =
                   (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar2 & 0xff) + 0x40] >> 8);
              uVar9 = uVar9 - 0x58;
              iVar2 = iVar2 + 0xc;
            } while (ptr_hudMobys <= uVar9);
          }
        }
      }
      else {
        DrawTextBox(0x48,0x1b8,0x1c,0x68);
        uVar9 = ptr_hudMobys;
        local_9c = 0x2c;
        local_98 = 0x1100;
        local_90 = 0x10;
        local_8c = iVar2;
        local_88 = 0x1400;
        uVar8 = (uint)(byte)(&DAT_8006f89c)[balloonistDialogue];
        if (uVar8 < (byte)(&DAT_8006f89d)[balloonistDialogue]) {
          ppbVar10 = &PTR_s_IF_YOU_PROVE_YOUR_8006f8c4 + uVar8;
          do {
            local_a0 = 0x5e;
            text = *ppbVar10;
            ppbVar10 = ppbVar10 + 1;
            DrawTextAll(text,&local_a0,&local_90,0x12,'\v');
            local_9c = local_9c + 0x12;
            uVar8 = uVar8 + 1;
          } while ((int)uVar8 < (int)(uint)(byte)(&DAT_8006f89d)[balloonistDialogue]);
        }
        if (((int)DAT_800777ec < 0x50) &&
           (uVar8 = uVar9 + DAT_800777ec * -0x58, (int)ptr_hudMobys <= (int)uVar8)) {
          ptr_hudMobys = uVar8;
        }
        iVar2 = uVar9 - 0x58;
        if ((int)ptr_hudMobys <= iVar2) {
          iVar3 = 0;
          do {
            *(char *)(iVar2 + 0x46) =
                 (char)((ushort)sineWaveArray[(DAT_800777ec * 4 + iVar3 & 0xff) + 0x40] >> 8);
            iVar2 = iVar2 + -0x58;
            iVar3 = iVar3 + 0xc;
          } while ((int)ptr_hudMobys <= iVar2);
        }
        if (0x4f < (int)DAT_800777ec) {
          local_a0 = 0x19c;
          local_9c = 0x60;
          local_98 = 0x1100;
          DrawArrow(&local_a0,DAT_800777ec,0);
        }
      }
    }
    Maybe_DrawingMobyParticlesRelated();
    RenderObjs();
    if (balloonistState < 2) {
      ptr_maybeTextObj = 0;
      CopyHudToShaded();
      DrawShadedMobys();
    }
  }
  else {
    Maybe_DrawingMobyParticlesRelated();
    iVar2 = DAT_80077850;
    piVar5 = &DAT_8006fcf4;
    if (DAT_8006fcf4 != 0) {
      piVar1 = &DAT_8006fcf8;
      do {
        piVar5 = piVar1;
        piVar1 = piVar5 + 1;
      } while (*piVar5 != 0);
    }
    piVar5[1] = 0;
    *piVar5 = iVar2;
    RenderObjs();
  }
  RenderWorld();
  RenderAllSkyBoxes();
  RenderAllParticles();
  return;
}


/*
Unable to decompile 'FUN_town_square__8007da54'
Cause: Exception while decompiling town_square::8007da54: process: timeout

*/


int ** FUN_town_square__800872a4(int param_1,int param_2)

{
  undefined uVar1;
  byte bVar2;
  char cVar3;
  short sVar4;
  int **ppiVar5;
  uint uVar6;
  int iVar7;
  int iVar8;
  uint uVar9;
  uint uVar10;
  Spyro *pSVar11;
  int *piVar12;
  int aiStack_48 [2];
  int local_40;
  int local_38;
  int local_34;
  int local_30;
  
  ppiVar5 = (int **)SpawnDynamicObjects();
  *(short *)((int)ppiVar5 + 0x36) = (short)param_1;
  if ((param_2 == 0) ||
     (uVar10 = (param_2 - (int)ptr_startOfCurrentLevelMobys) * -0x45d1745d >> 3, 0xff < uVar10)) {
    uVar10 = 0;
  }
  *(char *)((int)ppiVar5 + 0x56) = (char)uVar10;
  if (param_1 < 0x102) {
    if (param_1 < 0xff) {
      if (0x45 < param_1) {
        if (param_1 < 0x58) {
          if (0x52 < param_1) {
LAB_town_square__800875c0:
            piVar12 = *ppiVar5;
            InitArrayRelated(ppiVar5);
            *piVar12 = 0;
            piVar12[1] = 0;
            piVar12[2] = 0x8c;
            *(undefined *)((int)piVar12 + 0xe) = 0;
            *(undefined *)((int)piVar12 + 0xf) = 0;
            *(undefined *)((int)piVar12 + 0x11) = 0;
            *(undefined *)((int)piVar12 + 0x12) = 0;
            *(undefined *)((int)piVar12 + 0x13) = 0;
            uVar1 = 3;
            if (*(short *)(param_2 + 0x36) == 0xd) {
              uVar1 = 2;
            }
            *(undefined *)(piVar12 + 4) = uVar1;
            *(undefined *)(piVar12 + 5) = 0xff;
            *(undefined *)(ppiVar5 + 0x14) = 0x18;
            *(undefined *)((int)ppiVar5 + 0x52) = 0x40;
            *(undefined *)((int)ppiVar5 + 0x49) = 2;
            *(undefined *)(ppiVar5 + 0x11) = 0x20;
            *(undefined *)((int)ppiVar5 + 0x45) = 0;
            *(undefined *)((int)ppiVar5 + 0x46) = 0;
            Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
            FUN_800529cc(ppiVar5);
            ppiVar5[7] = (int *)0xffffffff;
            Vec3Copy(aiStack_48,(int *)(ppiVar5 + 3));
            local_40 = local_40 + 0x400;
            MobyUpdatePosition(aiStack_48,0x10000);
            FUN_800533d0(ppiVar5);
            *(undefined *)(ppiVar5 + 0x13) = 0;
            *(undefined *)((int)ppiVar5 + 0x4d) = 0;
            *(undefined *)((int)ppiVar5 + 0x4e) = 0;
            if (*(short *)((int)ppiVar5 + 0x36) == 0xe) {
              *(undefined *)((int)ppiVar5 + 0x4f) = 0xc;
            }
            sVar4 = *(short *)((int)ppiVar5 + 0x36);
            if (sVar4 == 0x53) {
              *(undefined *)((int)ppiVar5 + 0x4f) = 1;
              sVar4 = *(short *)((int)ppiVar5 + 0x36);
            }
            if (sVar4 == 0x54) {
              *(undefined *)((int)ppiVar5 + 0x4f) = 2;
            }
            sVar4 = *(short *)((int)ppiVar5 + 0x36);
            if (sVar4 == 0x55) {
              *(undefined *)((int)ppiVar5 + 0x4f) = 3;
              sVar4 = *(short *)((int)ppiVar5 + 0x36);
            }
            if (sVar4 == 0x56) {
              *(undefined *)((int)ppiVar5 + 0x4f) = 4;
            }
            if (*(short *)((int)ppiVar5 + 0x36) != 0x57) {
              return ppiVar5;
            }
            *(undefined *)((int)ppiVar5 + 0x4f) = 5;
            return ppiVar5;
          }
          if (param_1 == 0x4c) goto LAB_town_square__80087bd4;
LAB_town_square__80087dbc:
          InitArrayRelated(ppiVar5);
          if (param_2 == 0) goto LAB_town_square__80087dd4;
          pSVar11 = (Spyro *)(param_2 + 0xc);
          goto LAB_town_square__80087de0;
        }
        if (param_1 != 0xea) {
          if (param_1 < 0xeb) {
            if (param_1 == 0x78) {
              piVar12 = *ppiVar5;
              InitArrayRelated(ppiVar5);
              FUN_800526a8(ppiVar5);
              *(undefined *)((int)ppiVar5 + 0x49) = 0;
              *piVar12 = 0;
              *(undefined2 *)(piVar12 + 2) = 0;
              *(undefined2 *)((int)piVar12 + 6) = 0;
              *(undefined2 *)(piVar12 + 1) = 0;
              piVar12[3] = 0;
              piVar12[4] = 0;
              if (param_2 == 0) {
                return ppiVar5;
              }
              Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
              return ppiVar5;
            }
          }
          else if (param_1 == 0xfb) {
            piVar12 = *ppiVar5;
            InitArrayRelated(ppiVar5);
            *(undefined *)(ppiVar5 + 0x14) = 0x20;
            *(undefined *)((int)ppiVar5 + 0x52) = 0xff;
            FUN_800529cc(ppiVar5);
            *(undefined *)(ppiVar5 + 0x13) = 0;
            *(undefined *)((int)ppiVar5 + 0x4d) = 0;
            *(undefined *)((int)ppiVar5 + 0x4e) = 0;
            *(undefined *)((int)ppiVar5 + 0x4f) = 0xe;
            if (dragonState == 3) {
              uVar1 = 0x14;
            }
            else {
              uVar1 = 0x30;
              if (dragonState != 1) goto LAB_town_square__800879ac;
            }
            *(undefined *)((int)ppiVar5 + 0x57) = uVar1;
LAB_town_square__800879ac:
            uVar10 = rand();
            iVar7 = (uVar10 & 7) * 4;
            local_38 = (int)*(short *)(&DAT_8006f3a0 + iVar7);
            local_34 = 0;
            local_30 = (int)*(short *)(&DAT_8006f3a2 + iVar7);
            Vec3ApplyRotationMatrix(param_2 + 0x20,&local_38,&local_38);
            uVar10 = rand();
            local_38 = local_38 + -0x3f + (uVar10 & 0x7f);
            uVar10 = rand();
            local_34 = local_34 + -0x3f + (uVar10 & 0x7f);
            uVar10 = rand();
            local_30 = local_30 + -0x3f + (uVar10 & 0x7f);
            Vec3Add(ppiVar5 + 3,param_2 + 0xc,&local_38);
            Vec3Copy(piVar12,&local_38);
            Vec3ScaleDownByPowerOfTwo(piVar12,2);
            uVar10 = rand();
            *piVar12 = *piVar12 + -0x7f + (uVar10 & 0xff);
            uVar10 = rand();
            piVar12[1] = piVar12[1] + -0x7f + (uVar10 & 0xff);
            uVar10 = rand();
            piVar12[2] = piVar12[2] + -0x7f + (uVar10 & 0xff);
            iVar7 = rand();
            *(char *)(ppiVar5 + 0x11) = (char)iVar7;
            iVar7 = rand();
            *(char *)((int)ppiVar5 + 0x45) = (char)iVar7;
            iVar7 = rand();
            *(char *)((int)ppiVar5 + 0x46) = (char)iVar7;
            iVar7 = rand();
            *(byte *)(piVar12 + 4) = (byte)iVar7 & 0xf;
            iVar7 = rand();
            *(byte *)((int)piVar12 + 0x11) = (byte)iVar7 & 0xf;
            iVar7 = rand();
            *(byte *)((int)piVar12 + 0x12) = (byte)iVar7 & 0xf;
            piVar12[3] = *(int *)(param_2 + 0x14);
            iVar7 = rand();
            *(byte *)((int)piVar12 + 0x13) = ((byte)iVar7 & 3) + 0x10;
            return ppiVar5;
          }
          goto LAB_town_square__80087dbc;
        }
        InitArrayRelated(ppiVar5);
        Vec3Copy((int *)(ppiVar5 + 3),&spyro.lastGroundedPosition.x);
        iVar7 = ATan2Scaled(spyro.unkown33,spyro.unkown34,0);
        *(char *)((int)ppiVar5 + 0x46) = (char)iVar7 + '@';
        goto LAB_town_square__80087dec;
      }
      if (0x42 < param_1) goto LAB_town_square__800877a0;
      if (param_1 != 0xf) {
        if (param_1 < 0x10) {
          if (param_1 == 0xe) goto LAB_town_square__800875c0;
        }
        else {
          if (param_1 == 0x10) {
            piVar12 = *ppiVar5;
            InitArrayRelated(ppiVar5);
            FUN_800526a8(ppiVar5);
            Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
            ppiVar5[5] = ppiVar5[5] + 0x80;
            Vec3Copy(piVar12 + 1,(int *)(ppiVar5 + 3));
            *(undefined *)((int)piVar12 + 0x13) = 0;
            *(undefined *)((int)piVar12 + 0x12) = 0;
            *(short *)(piVar12 + 5) = 0x708;
            return ppiVar5;
          }
          if (param_1 == 0x22) {
            InitArrayRelated(ppiVar5);
            *(undefined *)(ppiVar5 + 0x14) = 0x20;
            *(undefined *)((int)ppiVar5 + 0x52) = 0xff;
            if (param_2 != 0) {
              Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
            }
            FUN_800529cc(ppiVar5);
            return ppiVar5;
          }
        }
        goto LAB_town_square__80087dbc;
      }
      piVar12 = *ppiVar5;
      InitArrayRelated(ppiVar5);
      piVar12[2] = 0x8c;
      *(undefined *)(piVar12 + 4) = 3;
      *(undefined *)(piVar12 + 5) = 0xff;
      *piVar12 = 0;
      piVar12[1] = 0;
      *(undefined *)((int)piVar12 + 0xe) = 0;
      *(undefined *)((int)piVar12 + 0xf) = 0;
      *(undefined *)((int)piVar12 + 0x11) = 0;
      *(undefined *)((int)piVar12 + 0x12) = 0;
      *(undefined *)((int)piVar12 + 0x13) = 0;
      *(undefined *)((int)ppiVar5 + 0x49) = 2;
      *(undefined *)(ppiVar5 + 0x14) = 0x18;
      *(undefined *)((int)ppiVar5 + 0x52) = 0x10;
      *(undefined *)(ppiVar5 + 0x11) = 0x20;
      *(undefined *)((int)ppiVar5 + 0x45) = 0;
      *(undefined *)((int)ppiVar5 + 0x46) = 0;
      if (param_2 != 0) {
        Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
      }
      FUN_800526a8(ppiVar5);
      bVar2 = *(byte *)((int)ppiVar5 + 0x4b);
      *(undefined *)(ppiVar5 + 0x13) = 0;
      *(undefined *)((int)ppiVar5 + 0x4d) = 0;
      *(undefined *)((int)ppiVar5 + 0x4e) = 0;
      *(undefined *)((int)ppiVar5 + 0x4f) = 1;
    }
    else {
LAB_town_square__800877a0:
      piVar12 = *ppiVar5;
      InitArrayRelated(ppiVar5);
      *(undefined *)(ppiVar5 + 0x14) = 0x20;
      Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
      FUN_800526a8(ppiVar5);
      uVar10 = rand();
      uVar6 = rand();
      uVar6 = uVar6 & 0x7ff;
      iVar7 = CosScaled(uVar6);
      iVar8 = CosScaled(uVar10 & 0xfff);
      *(short *)piVar12 = (short)((iVar7 >> 5) * iVar8 >> 0xc);
      iVar7 = CosScaled(uVar6);
      iVar8 = SinScaled(uVar10 & 0xfff);
      *(short *)((int)piVar12 + 2) = (short)((iVar7 >> 5) * iVar8 >> 0xc);
      iVar7 = SinScaled(uVar6);
      *(short *)(piVar12 + 1) = (short)(iVar7 >> 5);
      if ((*(uint *)(param_2 + 0x18) & 0x20000) != 0) {
        *(short *)piVar12 = *(short *)piVar12 + (short)(spyro.airMomentum.x >> 6);
        *(short *)((int)piVar12 + 2) =
             *(short *)((int)piVar12 + 2) + (short)(spyro.airMomentum.y >> 6);
        *(short *)(piVar12 + 1) = *(short *)(piVar12 + 1) + (short)(spyro.airMomentum.z >> 6);
      }
      ppiVar5[3] = ppiVar5[3] + *(short *)piVar12;
      ppiVar5[4] = ppiVar5[4] + *(short *)((int)piVar12 + 2);
      ppiVar5[5] = ppiVar5[5] + *(short *)(piVar12 + 1);
      iVar7 = rand();
      *(ushort *)((int)piVar12 + 6) = (ushort)iVar7 & 0xf;
      iVar7 = rand();
      *(ushort *)(piVar12 + 2) = (ushort)iVar7 & 0xf;
      iVar7 = rand();
      *(ushort *)((int)piVar12 + 10) = (ushort)iVar7 & 0xf;
      piVar12[4] = *(int *)(param_2 + 0x14) + -0x40;
      uVar10 = rand();
      piVar12[3] = 0x40 - (uVar10 & 0xf);
      if (2 < *(ushort *)((int)ppiVar5 + 0x36) - 0x135) {
        return ppiVar5;
      }
      bVar2 = *(byte *)((int)ppiVar5 + 0x4b);
      ppiVar5[0x13] = (int *)0xa18618;
    }
    *(byte *)((int)ppiVar5 + 0x4b) = bVar2 | 0x80;
  }
  else {
    if (param_1 != 0x188) {
      if (param_1 < 0x189) {
        if (param_1 == 0x115) {
LAB_town_square__80087b0c:
          piVar12 = *ppiVar5;
          InitArrayRelated(ppiVar5);
          FUN_800529cc(ppiVar5);
          *(undefined *)((int)ppiVar5 + 0x4f) = 2;
          *(undefined *)(ppiVar5 + 0x13) = 0;
          *(undefined *)((int)ppiVar5 + 0x4d) = 0;
          *(undefined *)((int)ppiVar5 + 0x4e) = 0;
          *piVar12 = 0x40;
          return ppiVar5;
        }
        if (param_1 < 0x116) {
          if ((param_1 < 0x10e) && (0x103 < param_1)) goto LAB_town_square__80087b0c;
        }
        else if (0x134 < param_1) {
          if (param_1 < 0x138) goto LAB_town_square__800877a0;
          if (param_1 == 0x147) goto LAB_town_square__80087b0c;
        }
      }
      else if (param_1 < 0x1c4) {
        if (0x1a9 < param_1) {
LAB_town_square__80087bd4:
          InitArrayRelated(ppiVar5);
          *(undefined *)(ppiVar5 + 0x14) = 0x20;
          *(undefined *)((int)ppiVar5 + 0x52) = 0xff;
          FUN_800529cc(ppiVar5);
          return ppiVar5;
        }
        if (param_1 == 0x195) goto LAB_town_square__80087b60;
        if ((0x194 < param_1) && (0x1a6 < param_1)) goto LAB_town_square__800877a0;
      }
      else {
        if (param_1 == 0x1dd) {
LAB_town_square__80087b60:
          InitArrayRelated(ppiVar5);
          if (param_2 == 0) {
            pSVar11 = &spyro;
          }
          else {
            pSVar11 = (Spyro *)(param_2 + 0xc);
          }
          Vec3Copy((int *)(ppiVar5 + 3),(int *)pSVar11);
          ppiVar5[5] = ppiVar5[5] + 0x80;
          piVar12 = (int *)MobyUpdatePosition(ppiVar5 + 3,0x800);
          iVar7 = (int)piVar12 - (int)ppiVar5[5];
          if (iVar7 < 0) {
            iVar7 = -iVar7;
          }
          if (iVar7 < 0x800) {
            ppiVar5[5] = piVar12;
          }
          else {
            ppiVar5[5] = ppiVar5[5] + -0x80;
          }
          goto LAB_town_square__80087dec;
        }
        if (param_1 == 0x1f6) {
          piVar12 = *ppiVar5;
          InitArrayRelated(ppiVar5);
          Vec3Copy((int *)(ppiVar5 + 3),(int *)(param_2 + 0xc));
          FUN_800526a8(ppiVar5);
          uVar6 = rand();
          uVar9 = rand();
          uVar9 = uVar9 & 0x7ff;
          uVar10 = uVar9;
          if (uVar9 < 0x80) {
            uVar10 = 0x80;
          }
          if (0x780 < uVar9) {
            uVar10 = 0x780;
          }
          iVar7 = CosScaled(uVar10);
          iVar8 = CosScaled(uVar6 & 0xfff);
          *(short *)piVar12 = (short)(iVar7 >> 5) * (short)(iVar8 >> 0xc);
          iVar7 = CosScaled(uVar10);
          iVar8 = SinScaled(uVar6 & 0xfff);
          *(short *)((int)piVar12 + 2) = (short)(iVar7 >> 5) * (short)(iVar8 >> 0xc);
          iVar7 = SinScaled(uVar10);
          sVar4 = (short)(iVar7 >> 5);
          *(short *)(piVar12 + 1) = sVar4;
          if (sVar4 < 0x20) {
            *(short *)(piVar12 + 1) = 0x20;
          }
          *(short *)(piVar12 + 1) = *(short *)(piVar12 + 1) + 0x20;
          iVar7 = rand();
          *(char *)((int)ppiVar5 + 0x46) = (char)iVar7;
          uVar10 = rand();
          if (0x80 < (uVar10 & 0xff)) {
            iVar7 = rand();
            *(byte *)((int)ppiVar5 + 0x45) = ((byte)iVar7 & 0x1c) - 0x10;
            piVar12[4] = 1;
            if (0x20 < *(short *)(piVar12 + 1)) {
              *(short *)(piVar12 + 1) = 0x20;
            }
          }
          ppiVar5[3] = ppiVar5[3] + *(short *)piVar12;
          ppiVar5[4] = ppiVar5[4] + *(short *)((int)piVar12 + 2);
          ppiVar5[5] = ppiVar5[5] + *(short *)(piVar12 + 1);
          iVar7 = rand();
          *(ushort *)((int)piVar12 + 6) = ((ushort)iVar7 & 0x1f) - 0x10;
          iVar7 = rand();
          *(ushort *)(piVar12 + 2) = ((ushort)iVar7 & 0x1f) - 0x10;
          iVar7 = rand();
          *(ushort *)((int)piVar12 + 10) = ((ushort)iVar7 & 0x1f) - 0x10;
          cVar3 = FUN_80037ea0(0,0x14);
          *(undefined *)((int)piVar12 + 0xd) = 10;
          *(char *)(piVar12 + 3) = '2' - cVar3;
          *(short *)((int)piVar12 + 0xe) = 4;
          return ppiVar5;
        }
      }
      goto LAB_town_square__80087dbc;
    }
    InitArrayRelated(ppiVar5);
    *(undefined *)((int)ppiVar5 + 0x47) = 5;
    if (param_2 == 0) {
LAB_town_square__80087dd4:
      pSVar11 = &spyro;
    }
    else {
      pSVar11 = (Spyro *)(param_2 + 0xc);
    }
LAB_town_square__80087de0:
    Vec3Copy((int *)(ppiVar5 + 3),(int *)pSVar11);
LAB_town_square__80087dec:
    FUN_800526a8(ppiVar5);
  }
  return ppiVar5;
}



void FUN_town_square__80087e20(int param_1)

{
  byte bVar1;
  char cVar2;
  bool bVar3;
  char cVar4;
  short sVar5;
  int iVar6;
  int iVar7;
  uint uVar8;
  short sVar9;
  short sVar10;
  char *pcVar11;
  char *pcVar12;
  short *result;
  char *pcVar13;
  int local_50;
  int local_4c;
  int local_48;
  undefined4 local_40;
  undefined4 local_3c;
  int local_38;
  int local_34;
  int local_30;
  
  if (ptr_headOfParticleBuffer[1] != -1) {
    cVar4 = (char)param_1;
    pcVar11 = ptr_headOfParticleBuffer + 1;
    pcVar13 = ptr_headOfParticleBuffer + 0x18;
    result = (short *)(ptr_headOfParticleBuffer + 4);
    pcVar12 = ptr_headOfParticleBuffer;
    do {
      switch(*pcVar12) {
      case '\0':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[9] = pcVar11[9] + cVar4 * '\x02';
        pcVar11[0xc] = pcVar11[0xc] + cVar4 * -4;
        pcVar11[0xb] = pcVar11[0xb] + cVar4 * -4;
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar11[0xd] = pcVar11[0xd] + cVar4 * -4;
        goto LAB_town_square__80088f00;
      case '\x01':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        pcVar11[9] = pcVar11[9] + cVar4 * '\x04';
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[0xc] = pcVar11[0xc] + cVar4 * -4;
        pcVar11[0xb] = pcVar11[0xb] + cVar4 * -4;
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x18;
        pcVar11[0xd] = pcVar11[0xd] + cVar4 * -4;
        goto LAB_town_square__80088f00;
      case '\x02':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        pcVar11[9] = pcVar11[9] + cVar4 * '\x04';
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[0xc] = pcVar11[0xc] + cVar4 * -4;
        pcVar11[0xb] = pcVar11[0xb] + cVar4 * -4;
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar11[0xd] = pcVar11[0xd] + cVar4 * -4;
        goto LAB_town_square__80088f00;
      case '\t':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        bVar1 = pcVar11[1];
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        pcVar11[9] = pcVar11[9] + cVar4 * '\x02';
        goto LAB_town_square__80088f00;
      case '\n':
        if ((((spyro.state == 0x1d) && (spyro.health < 0)) || (spyroInvisible != 0)) ||
           (spyro.iFramesTimer < 1)) goto LAB_town_square__80088f18;
        Vec3Copy(&local_50,(int *)&spyro);
        iVar7 = CosScaled((int)*(short *)(pcVar11 + 0x17));
        local_50 = local_50 + (iVar7 >> 4);
        iVar7 = SinScaled((int)*(short *)(pcVar11 + 0x17));
        local_4c = local_4c + (iVar7 >> 4);
        local_48 = local_48 + 0x100;
        Vec3ScaleDownBy4(result,&local_50);
        sVar9 = *(short *)(pcVar11 + 0x17);
        *(short *)(pcVar11 + 0x17) = sVar9 + 0x40;
        iVar7 = CosScaled((int)(short)(sVar9 + 0x40) - (int)cameraAngle.yaw & 0xfff);
        if (iVar7 < 0) {
          iVar7 = -iVar7;
        }
        pcVar11[9] = (char)(iVar7 / 0xaa);
        break;
      case '\v':
        Vec3ShortAdd(result,result,pcVar12 + 0x12);
        pcVar11[0xb] = pcVar11[0xb] + -8;
        pcVar11[0xc] = pcVar11[0xc] + -8;
        pcVar11[0xd] = pcVar11[0xd] + -8;
        if (pcVar11[0xb] == '\0') goto LAB_town_square__80088f18;
        goto LAB_town_square__80088f08;
      case '\f':
        pcVar11[10] = pcVar11[10] + '\b';
        pcVar11[9] = pcVar11[9] + '\x02';
        if (pcVar11[0xb] != '\0') {
          pcVar11[0xb] = pcVar11[0xb] + -8;
        }
        if (pcVar11[0xc] != '\0') {
          pcVar11[0xc] = pcVar11[0xc] + -8;
        }
        if (pcVar11[0xd] != '\0') {
          pcVar11[0xd] = pcVar11[0xd] + -8;
        }
        if ((*(uint *)(pcVar11 + 0xb) & 0xffffff) != 0) goto LAB_town_square__80088f08;
        goto LAB_town_square__80088f18;
      case '\x15':
        pcVar11[0x17] = pcVar11[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar8 = (uint)(byte)pcVar11[0x18] + gameSpeedMultiplyer;
        pcVar11[0x18] = (char)uVar8;
        *(short *)(pcVar11 + 3) =
             *(short *)(pcVar11 + 0x11) +
             (short)((int)((int)sineWaveArray[(byte)pcVar11[0x17] + 0x40] * (uVar8 & 0xff)) >> 0xc);
        iVar7 = (int)sineWaveArray[(byte)pcVar11[0x17]] * (uint)(byte)pcVar11[0x18];
        sVar9 = (short)gameSpeedMultiplyer;
        bVar1 = pcVar11[0x18];
        pcVar11[10] = pcVar11[10] + '\x04';
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar9 * 6;
        sVar9 = *(short *)(pcVar11 + 0x13);
        goto LAB_town_square__80088310;
      case '\x18':
        if ((byte)pcVar11[0xb] < 0xf0) {
          pcVar11[0xb] = pcVar11[0xb] + 4;
        }
        if ((byte)pcVar11[0xc] < 0xf0) {
          pcVar11[0xc] = pcVar11[0xc] + 4;
        }
        if ((byte)pcVar11[0xd] < 0xf0) {
          pcVar11[0xd] = pcVar11[0xd] + 4;
        }
        pcVar11[0x1b] = pcVar11[0x1b] + (char)gameSpeedMultiplyer * '\b';
        iVar7 = 0x3f;
        if (dragonTimerCurrentState < 0x40) {
          iVar7 = dragonTimerCurrentState;
        }
        *(short *)(pcVar11 + 0x17) = (short)((int)((uint)(byte)pcVar11[0x1c] * (0x48 - iVar7)) >> 3)
        ;
        iVar7 = ((int)((0x20 - (uint)(byte)pcVar11[0x1c]) * iVar7) >> 4) + 8;
        *(short *)(pcVar11 + 0x19) = (short)iVar7;
        *(short *)(pcVar11 + 3) =
             *(short *)(pcVar11 + 0x11) +
             (short)((int)sineWaveArray[(byte)pcVar11[0x1b] + 0x40] * (iVar7 * 0x10000 >> 0x10) >>
                    0xc);
        sVar9 = sineWaveArray[(byte)pcVar11[0x1b]];
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 0x15) + *(short *)(pcVar11 + 0x17) + 0x20;
        *(short *)(pcVar11 + 5) =
             *(short *)(pcVar11 + 0x13) +
             (short)((int)sVar9 * (int)*(short *)(pcVar11 + 0x19) >> 0xc);
        break;
      case '!':
        Vec3ShortAdd(result,result,pcVar13);
        if (*(short *)(pcVar11 + 0x1d) != 0) {
          *(short *)(pcVar11 + 0x1b) = *(short *)(pcVar11 + 0x1b) + 1;
        }
        iVar7 = (uint)(byte)pcVar11[0xb] - param_1;
        *(short *)(pcVar11 + 0x1d) = 1 - *(short *)(pcVar11 + 0x1d);
        pcVar11[9] = pcVar11[9] + cVar4 * '\x02';
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar11[0xb] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar11[0xc] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        pcVar11[0xc] = (char)iVar7;
        iVar7 = (uint)(byte)pcVar11[0xd] - param_1;
        if (iVar7 < 0) {
          iVar7 = 0;
        }
        bVar1 = pcVar11[1];
        pcVar11[0xd] = (char)iVar7;
        pcVar11[1] = (char)((uint)bVar1 + param_1);
        bVar3 = ((uint)bVar1 + param_1 & 0xff) < 0x20;
        goto LAB_town_square__80088f00;
      case 'B':
        iVar7 = 0;
        if (0 < param_1) {
          do {
            if ((pcVar11[1] & 1U) != 0) {
              *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + *(short *)(pcVar11 + 0xf);
              *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + *(short *)(pcVar11 + 0x11);
              *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + *(short *)(pcVar11 + 0x13);
              if ((pcVar11[1] & 2U) != 0) {
                iVar6 = rand();
                *(ushort *)(pcVar11 + 0xf) = *(short *)(pcVar11 + 0xf) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar11 + 0x11) = *(short *)(pcVar11 + 0x11) + -1 + ((ushort)iVar6 & 2);
                iVar6 = rand();
                *(ushort *)(pcVar11 + 0x13) = *(short *)(pcVar11 + 0x13) + -1 + ((ushort)iVar6 & 2);
              }
            }
            iVar7 = iVar7 + 1;
            pcVar11[1] = pcVar11[1] + '\x01';
          } while (iVar7 < param_1);
        }
        bVar3 = (byte)pcVar11[1] < 0x18;
        goto LAB_town_square__80088f00;
      case 'F':
        local_40._0_2_ = (short)((int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3) >> 1);
        local_40._2_2_ = (short)((int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5) >> 1)
        ;
        sVar9 = (short)((int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7) >> 1);
        local_3c = CONCAT22(local_3c._2_2_,sVar9);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + (short)local_40;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + local_40._2_2_;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar9;
        iVar7 = rand();
        local_40._0_2_ = (short)local_40 + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        sVar9 = local_40._2_2_ + -1 + ((ushort)iVar7 & 2);
        local_40 = CONCAT22(sVar9,(short)local_40);
        if ((pcVar11[1] & 1U) != 0) {
          local_3c = CONCAT22(local_3c._2_2_,(short)local_3c + -1);
        }
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + (short)local_40;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar9;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + (short)local_3c;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_town_square__80088f18;
        cVar2 = pcVar11[0xf];
        pcVar11[0xf] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0x80) {
          pcVar11[0xf] = -0x80;
        }
        cVar2 = pcVar11[0x10];
        pcVar11[0x10] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x60) {
          pcVar11[0x10] = '`';
        }
        cVar2 = pcVar11[0x13];
        pcVar11[0x11] = '\0';
        pcVar11[0x13] = cVar2 - 3U;
        if ((byte)(cVar2 - 3U) < 0xc0) {
          pcVar11[0x13] = -0x40;
        }
        cVar2 = pcVar11[0x14];
        pcVar11[0x14] = cVar2 - 4U;
        if ((byte)(cVar2 - 4U) < 0x80) {
          pcVar11[0x14] = -0x80;
        }
        cVar2 = pcVar11[0x15];
        pcVar11[0x15] = cVar2 - 6U;
        if ((byte)(cVar2 - 6U) < 0x20) {
          pcVar11[0x15] = ' ';
        }
        break;
      case 'G':
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        if ((0x1f < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_town_square__80088f18;
        local_38 = (int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3);
        local_34 = (int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5);
        local_30 = (int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7);
        uVar8 = rand();
        local_38 = local_38 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_34 = local_34 + -1 + (uVar8 & 2);
        uVar8 = rand();
        local_30 = local_30 + -1 + (uVar8 & 2);
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + (short)local_38;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + (short)local_34;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + (short)local_30;
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 9) - (short)local_38;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 0xb) - (short)local_34;
        pcVar11[0x13] = pcVar11[0x13] + -2;
        pcVar11[0x15] = pcVar11[0x15] + -4;
        pcVar11[0x14] = pcVar11[0x14] + -2;
        pcVar11[0x10] = pcVar11[0x10] + -3;
        pcVar11[0xf] = pcVar11[0xf] + -3;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 0xd) - (short)local_30;
        pcVar11[0x11] = pcVar11[0x11] + -3;
        break;
      case 'H':
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        if ((0x2f < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_town_square__80088f18;
        local_40 = (int)*(short *)(pcVar11 + 3) - (int)*(short *)(pcVar11 + 9) >> 1;
        local_3c = (int)*(short *)(pcVar11 + 5) - (int)*(short *)(pcVar11 + 0xb) >> 1;
        local_38 = (int)*(short *)(pcVar11 + 7) - (int)*(short *)(pcVar11 + 0xd) >> 1;
        uVar8 = rand();
        local_40 = local_40 + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_3c = local_3c + -2 + (uVar8 & 4);
        uVar8 = rand();
        local_38 = local_38 + -1 + (uVar8 & 2);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + (short)local_40;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + (short)local_3c;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + (short)local_38;
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 3) + (short)local_40 * -2;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 5) + (short)local_3c * -2;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 7) + (short)local_38 * -2;
        break;
      case 'L':
        pcVar11[0x17] = pcVar11[0x17] + (char)gameSpeedMultiplyer * '\x04';
        uVar8 = (uint)(byte)pcVar11[0x18] + gameSpeedMultiplyer;
        pcVar11[0x18] = (char)uVar8;
        *(short *)(pcVar11 + 3) =
             *(short *)(pcVar11 + 0xf) +
             (short)((int)((int)sineWaveArray[(byte)pcVar11[0x17] + 0x40] * (uVar8 & 0xff)) >> 0xc);
        iVar7 = (int)sineWaveArray[(byte)pcVar11[0x17]] * (uint)(byte)pcVar11[0x18];
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + (short)gameSpeedMultiplyer * 6;
        bVar1 = pcVar11[0x18];
        sVar9 = *(short *)(pcVar11 + 0x11);
LAB_town_square__80088310:
        *(short *)(pcVar11 + 5) = sVar9 + (short)(iVar7 >> 0xc);
        if (bVar1 < 0xc1) break;
        goto LAB_town_square__80088f18;
      case 'M':
        sVar10 = (short)((int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3) >> 1);
        sVar5 = (short)((int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7) >> 1);
        local_3c = CONCAT22(local_3c._2_2_,sVar9);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + sVar10;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + sVar5;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar9;
        sVar5 = sVar5 + 1;
        local_40 = CONCAT22(sVar5,sVar10);
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + sVar10;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar5;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + sVar9;
        if (0x1f < (byte)(cVar2 + 1U)) goto LAB_town_square__80088f18;
        break;
      case 'N':
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        if ((0x27 < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_town_square__80088f18;
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + *(short *)(pcVar11 + 0xf);
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + *(short *)(pcVar11 + 0x11);
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + *(short *)(pcVar11 + 0x13);
        iVar7 = rand();
        *(ushort *)(pcVar11 + 0xf) = *(short *)(pcVar11 + 0xf) + -1 + ((ushort)iVar7 & 2);
        iVar7 = rand();
        *(ushort *)(pcVar11 + 0x11) = *(short *)(pcVar11 + 0x11) + -1 + ((ushort)iVar7 & 2);
        uVar8 = rand();
        iVar7 = (*(ushort *)(pcVar11 + 0x13) - 1) + (uVar8 & 2);
        *(short *)(pcVar11 + 0x13) = (short)iVar7;
        if (2 < iVar7 * 0x10000 >> 0x10) {
          *(undefined2 *)(pcVar11 + 0x13) = 2;
        }
        if (*(short *)(pcVar11 + 0x13) < -4) {
          *(undefined2 *)(pcVar11 + 0x13) = 0xfffc;
        }
        pcVar11[0xb] = pcVar11[0xb] + -2;
        pcVar11[0xd] = pcVar11[0xd] + -1;
        pcVar11[0xc] = pcVar11[0xc] + -2;
        break;
      case 'O':
        sVar10 = (short)((int)*(short *)(pcVar11 + 9) - (int)*(short *)(pcVar11 + 3) >> 1);
        sVar9 = (short)((int)*(short *)(pcVar11 + 0xb) - (int)*(short *)(pcVar11 + 5) >> 1);
        local_40 = CONCAT22(sVar9,sVar10);
        sVar5 = (short)((int)*(short *)(pcVar11 + 0xd) - (int)*(short *)(pcVar11 + 7) >> 1);
        local_3c = CONCAT22(local_3c._2_2_,sVar5);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + sVar10;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + sVar9;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + sVar5;
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + sVar10;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar9;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + sVar5;
        if ((0x17 < (byte)(cVar2 + 1U)) || (pcVar11[2] == '\0')) goto LAB_town_square__80088f18;
        pcVar11[0xf] = pcVar11[0xf] + -3;
        pcVar11[0x13] = pcVar11[0x13] + -3;
        pcVar11[0x10] = pcVar11[0x10] + -4;
        pcVar11[0x14] = pcVar11[0x14] + -4;
        if (5 < (byte)pcVar11[0x15]) {
          pcVar11[0x15] = pcVar11[0x15] - 6;
        }
        break;
      case 'P':
        sVar10 = *(short *)(pcVar11 + 9) - *(short *)(pcVar11 + 3);
        sVar5 = *(short *)(pcVar11 + 0xb) - *(short *)(pcVar11 + 5);
        local_40 = CONCAT22(sVar5,sVar10);
        sVar9 = *(short *)(pcVar11 + 7);
        *(short *)(pcVar11 + 3) = *(short *)(pcVar11 + 3) + sVar10;
        *(short *)(pcVar11 + 5) = *(short *)(pcVar11 + 5) + sVar5;
        *(short *)(pcVar11 + 7) = *(short *)(pcVar11 + 7) + (*(short *)(pcVar11 + 0xd) - sVar9);
        sVar9 = (*(short *)(pcVar11 + 0xd) - sVar9) + -1;
        local_3c = CONCAT22(local_3c._2_2_,sVar9);
        *(short *)(pcVar11 + 9) = *(short *)(pcVar11 + 9) + sVar10;
        *(short *)(pcVar11 + 0xb) = *(short *)(pcVar11 + 0xb) + sVar5;
        cVar2 = pcVar11[1];
        pcVar11[1] = cVar2 + 1U;
        bVar3 = (byte)(cVar2 + 1U) < 0x20;
        *(short *)(pcVar11 + 0xd) = *(short *)(pcVar11 + 0xd) + sVar9;
LAB_town_square__80088f00:
        if (bVar3) {
LAB_town_square__80088f08:
          if (pcVar11[2] != '\0') break;
        }
LAB_town_square__80088f18:
        FUN_80053608(pcVar12);
      }
      pcVar11 = pcVar11 + 0x20;
      pcVar13 = pcVar13 + 0x20;
      result = result + 0x10;
      pcVar12 = pcVar12 + 0x20;
    } while (*pcVar11 != -1);
  }
  return;
}



void FUN_town_square__80088f68(int param_1,undefined4 param_2,int *param_3,int *param_4)

{
  bool bVar1;
  char cVar2;
  short extraout_var;
  undefined *puVar3;
  uint uVar4;
  short extraout_var_00;
  short extraout_var_01;
  undefined *puVar5;
  int iVar6;
  uint uVar7;
  undefined uVar8;
  short sVar9;
  int iVar10;
  int iVar11;
  int local_a0;
  int local_9c;
  undefined4 local_98;
  int aiStack_90 [4];
  int local_80;
  int local_7c;
  int local_78;
  int local_70;
  int local_6c;
  int local_68;
  int local_60;
  int local_5c;
  int local_58;
  int local_50;
  uint local_48;
  int local_40;
  int local_30;
  
  iVar11 = 0;
  if (0 < param_1) {
    local_48 = (uint)param_4 & 0xf;
    local_40 = local_48 << 1;
    local_30 = 0;
    local_50 = param_1;
    do {
      uVar8 = (undefined)param_2;
      cVar2 = (char)param_4;
      switch(param_2) {
      case 0:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xf] = 0x2e;
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_town_square__80089620;
      case 1:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        bVar1 = gameState == GAMESTATE_DRAGON_STATE;
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        if (bVar1) {
          uVar8 = 8;
        }
        else {
          uVar8 = 0x10;
        }
        puVar5[10] = uVar8;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x60;
        goto LAB_town_square__80089608;
      case 2:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        uVar7 = rand();
        local_a0 = (uVar7 & 0x3f) - 0x20;
        uVar7 = rand();
        local_9c = (uVar7 & 0x3f) - 0x20;
        local_98 = 0x1e;
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),&local_a0);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x20;
        iVar6 = rand();
        puVar5[0xf] = 0x2e;
        puVar5[0xb] = (char)iVar6;
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        goto LAB_town_square__80089620;
      case 9:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_4);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x18;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        if (spyro.absoluteMomentum < 0x5781) {
          if (spyro.absoluteMomentum < 0x4241) {
            uVar8 = 0xe0;
            if (spyro.absoluteMomentum < 0x3681) {
              puVar5[0xc] = 0x80;
              puVar5[0xd] = 0x80;
              puVar5[0xe] = 0x80;
              goto LAB_town_square__800891f4;
            }
            puVar5[0xc] = 0xe0;
          }
          else {
            puVar5[0xc] = 0xf0;
            uVar8 = 0x60;
          }
          puVar5[0xd] = uVar8;
          puVar5[0xe] = 0;
        }
        else {
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
        }
LAB_town_square__800891f4:
        puVar5[0xf] = 0x2e;
        goto LAB_town_square__80089620;
      case 10:
        puVar5 = (undefined *)AllocateParticleToBuffer(3);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),(int *)&spyro);
        puVar5[10] = 0x18;
        puVar5[0xb] = 0xf;
        puVar5[0xc] = (&DAT_8006e438)[local_30];
        puVar5[0xd] = (&DAT_8006e439)[local_30];
        uVar8 = (&DAT_8006e43a)[local_30];
        puVar5[0xf] = 0x2c;
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        puVar5[0xe] = uVar8;
        *(short *)(puVar5 + 0x18) = (short)(((local_50 - iVar11) * 0x1000) / 5);
        break;
      case 0xc:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        puVar5[0x11] = 4;
        sVar9 = *(short *)((int)param_3 + 0x36);
        if (sVar9 == 0x22) {
          Vec3Copy(aiStack_90,param_3 + 3);
        }
        else if ((sVar9 == 0xad) || (sVar9 == 0xb5)) {
          iVar6 = (int)param_4 >> 0x18;
          if (iVar6 < 6) {
            puVar3 = (undefined *)0x8006e4e0;
            goto LAB_town_square__800893a0;
          }
          puVar5[1] = 5;
          puVar5[0x11] = 0x16;
          Vec3Copy(aiStack_90,(int *)(iVar6 * 0xc + -0x7ff91b20));
        }
        else {
          if (sVar9 == 0x78) {
            puVar3 = &DAT_8006e570;
          }
          else {
            puVar3 = &DAT_8006e498;
            iVar6 = iVar11;
LAB_town_square__800893a0:
            puVar3 = puVar3 + iVar6 * 0xc;
          }
          Vec3ApplyRotationMatrix(param_3 + 8,puVar3,aiStack_90);
          Vec3Add(aiStack_90,aiStack_90,param_3 + 3);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),aiStack_90);
        puVar5[0xd] = (char)((uint)param_4 >> 8);
        puVar5[0xc] = cVar2;
        puVar5[0xe] = (char)((uint)param_4 >> 0x10);
        puVar5[0xf] = 0x2e;
        iVar6 = rand();
        puVar5[10] = ((byte)iVar6 & 7) + 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        puVar5[0x10] = 0;
        break;
      case 0x15:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),param_3);
        cVar2 = cVar2 * '\x02';
        if (0xf < ((uint)param_4 & 0x1f)) {
          cVar2 = cVar2 + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        puVar5[0xe] = (char)local_48 * -8 + -0x80;
        puVar5[0x10] = 0;
        puVar5[10] = '0' - (char)local_40;
        puVar5[0xb] = (char)((int)param_4 << 1);
        puVar5[0xf] = 0x2e;
        puVar5[0x11] = 2;
        break;
      case 0x18:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x12),param_3);
        puVar5[10] = 0x30;
        puVar5[0x11] = 8;
        *(short *)(puVar5 + 0x18) = (short)(iVar11 << 5);
        puVar5[0xc] = 0x80;
        puVar5[0xd] = 0x80;
        puVar5[0xe] = 0x80;
        uVar8 = (undefined)(iVar11 << 4);
        puVar5[0xb] = uVar8;
        puVar5[0xf] = 0x2e;
        puVar5[0x10] = 0;
        *(undefined2 *)(puVar5 + 0x1a) = 0x10;
        puVar5[0x1c] = uVar8;
        puVar5[0x1d] = (char)iVar11;
        break;
      case 0x21:
        puVar5 = (undefined *)AllocateParticleToBuffer(2);
        *puVar5 = uVar8;
        puVar5[2] = 0;
        puVar5[3] = 1;
        if (param_4 == (int *)0x0) {
          Vec3Copy(&local_80,(int *)&spyro);
          local_78 = spyro.unkown_heightRelated;
          uVar7 = rand();
          local_80 = local_80 + -0x1f + (uVar7 & 0x3e);
          uVar7 = rand();
          local_7c = local_7c + -0x1f + (uVar7 & 0x3e);
        }
        else {
          local_80 = 0x164;
          local_7c = 0;
          local_78 = 0;
          Vec3ApplyRotationMatrix(0x80078a8c,&local_80,&local_80);
          Vec3Add(&local_80,&local_80,&spyro);
        }
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_80);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x18),param_3);
        *(undefined2 *)(puVar5 + 0x1e) = 0;
        puVar5[10] = 0x10;
        iVar6 = rand();
        puVar5[0xb] = (char)iVar6;
        uVar8 = 0x20;
LAB_town_square__80089608:
        puVar5[0xf] = 0x2e;
        puVar5[0xc] = uVar8;
        puVar5[0xd] = uVar8;
        puVar5[0xe] = uVar8;
LAB_town_square__80089620:
        puVar5[0x11] = 4;
        puVar5[0x10] = 0;
        break;
      case 0x42:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = (short)(*param_3 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = (short)(param_3[1] >> 2) + ((ushort)iVar6 & 0xf) + -8;
        iVar6 = rand();
        iVar10 = param_3[2];
        *(undefined2 *)(puVar5 + 0x10) = 0;
        *(undefined2 *)(puVar5 + 0x12) = 0;
        *(undefined2 *)(puVar5 + 0x14) = 0;
        puVar5[10] = 2;
        *(ushort *)(puVar5 + 8) = (short)(iVar10 >> 2) + ((ushort)iVar6 & 0xf) + -8;
        if ((param_4 == (int *)0x1) || ((param_4 == (int *)0x0 && (2 < spyro.health)))) {
          puVar5[0xc] = 0xff;
          goto LAB_town_square__80089734;
        }
        uVar7 = rand();
        switch(uVar7 & 7) {
        case 0:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          puVar5[0xe] = 0;
          break;
        case 1:
          puVar5[0xc] = 0xff;
          goto LAB_town_square__80089734;
        case 2:
          puVar5[0xc] = 0;
LAB_town_square__80089734:
          puVar5[0xd] = 0xff;
          puVar5[0xe] = 0;
          break;
        case 3:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0xff;
          goto LAB_town_square__8008977c;
        case 4:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0;
          goto LAB_town_square__8008977c;
        case 5:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0;
          goto LAB_town_square__8008977c;
        case 6:
          puVar5[0xc] = 0xff;
          puVar5[0xd] = 0x80;
          puVar5[0xe] = 0;
          break;
        case 7:
          puVar5[0xc] = 0;
          puVar5[0xd] = 0x80;
LAB_town_square__8008977c:
          puVar5[0xe] = 0xff;
        }
        puVar5[0xf] = 0x40;
        break;
      case 0x46:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        uVar7 = rand();
        local_70 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_6c = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_68 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = (short)(*param_3 >> 2) + (short)local_70 * 4;
        *(short *)(puVar5 + 6) = (short)(param_3[1] >> 2) + (short)local_6c * 4;
        sVar9 = (short)local_68;
        *(short *)(puVar5 + 8) = (short)(param_3[2] >> 2) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_70 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_6c * 2;
        goto LAB_town_square__80089e38;
      case 0x47:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 7;
        puVar5[3] = 1;
        uVar7 = rand();
        local_70 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_6c = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        uVar7 = rand();
        local_68 = (int)(((uVar7 & 0xfff) - 0x800) * 0x10) >> 0xc;
        *(short *)(puVar5 + 4) = (short)(*param_3 >> 2) + (short)local_70 * 4;
        *(short *)(puVar5 + 6) = (short)(param_3[1] >> 2) + (short)local_6c * 4;
        *(short *)(puVar5 + 8) = (short)(param_3[2] >> 2) + (short)local_68 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_70;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_6c;
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xe0;
        puVar5[0x12] = 0x60;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0xff;
        puVar5[0x13] = 0x50;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + (short)local_68;
        break;
      case 0x4c:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 0x10),param_3);
        if (((uint)param_4 & 0x1f) < 0x10) {
          cVar2 = (char)((int)param_4 << 1);
        }
        else {
          cVar2 = cVar2 * '\x02' + -0x80;
        }
        puVar5[0x18] = cVar2;
        puVar5[0x19] = 8;
        puVar5[0xd] = 0xff;
        puVar5[0xc] = ~(byte)(local_48 << 4);
        cVar2 = (char)local_48 * -8 + -0x80;
        goto LAB_town_square__80089bcc;
      case 0x4d:
        puVar5 = (undefined *)AllocateParticleToBuffer(4);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),param_3);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        uVar7 = rand();
        CosScaled(uVar7 & 0xfff);
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + extraout_var;
        uVar4 = rand();
        SinScaled(uVar4 & 0x7ff);
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + extraout_var_00;
        SinScaled(uVar7 & 0xfff);
        puVar5[0x17] = 0x7f;
        puVar5[0x11] = 0x40;
        puVar5[0x12] = 0x60;
        puVar5[0x16] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x10] = 0x80;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0x80;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + extraout_var_01;
        break;
      case 0x4e:
        puVar5 = (undefined *)AllocateParticleToBuffer(0);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0x1f;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        iVar6 = rand();
        *(ushort *)(puVar5 + 4) = *(short *)(puVar5 + 4) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 6) = *(short *)(puVar5 + 6) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 8) = *(short *)(puVar5 + 8) + -0x20 + ((ushort)iVar6 & 0x3f);
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x10) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x12) = ((ushort)iVar6 & 2) - 1;
        iVar6 = rand();
        *(ushort *)(puVar5 + 0x14) = -((ushort)iVar6 & 1);
        iVar6 = rand();
        puVar5[0xc] = (byte)iVar6 | 0x80;
        uVar7 = rand();
        uVar7 = (uVar7 & 0x7f) + 0x60;
        puVar5[0xd] = (char)uVar7;
        if ((byte)puVar5[0xc] < uVar7) {
          puVar5[0xd] = puVar5[0xc];
        }
        iVar6 = rand();
        cVar2 = ((byte)iVar6 & 0x3f) + 0x40;
LAB_town_square__80089bcc:
        puVar5[0xe] = cVar2;
        puVar5[0xf] = 0x40;
        puVar5[10] = 2;
        break;
      case 0x4f:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 10),param_3);
        Vec3Add(&local_70,param_3,param_4);
        uVar7 = rand();
        local_70 = local_70 + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_6c = local_6c + -0x20 + (uVar7 & 0x3f);
        uVar7 = rand();
        local_68 = local_68 + -0x40 + (uVar7 & 0x7f);
        Vec3ScaleDownBy4((short *)(puVar5 + 4),&local_70);
        puVar5[0x17] = 2;
        if (DAT_80078764 == 0) {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0xa0;
          puVar5[0x12] = 0;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = (byte)iVar6 | 0xe0;
          puVar5[0x16] = 0x80;
        }
        else {
          iVar6 = rand();
          puVar5[0x10] = (byte)iVar6 | 0xc0;
          iVar6 = rand();
          puVar5[0x11] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x12] = ((byte)iVar6 & 0x3f) + 0x40;
          iVar6 = rand();
          puVar5[0x14] = (byte)iVar6 | 0xe0;
          iVar6 = rand();
          puVar5[0x15] = ((byte)iVar6 & 0x1f) + 0xa0;
          iVar6 = rand();
          puVar5[0x16] = ((byte)iVar6 & 0x1f) + 0xa0;
        }
        puVar5[0x13] = 0x50;
        break;
      case 0x50:
        puVar5 = (undefined *)AllocateParticleToBuffer(1);
        *puVar5 = uVar8;
        iVar6 = rand();
        puVar5[2] = (byte)iVar6 & 0xf;
        puVar5[3] = 1;
        Vec3ScaleDownBy4((short *)(puVar5 + 4),param_3);
        uVar7 = rand();
        local_60 = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_5c = (int)((int)param_4 * ((uVar7 & 0xfff) - 0x800)) >> 0xc;
        uVar7 = rand();
        local_58 = (int)((int)param_4 * (uVar7 & 0xfff)) >> 0xc;
        *(short *)(puVar5 + 4) = *(short *)(puVar5 + 4) + (short)local_60 * 4;
        *(short *)(puVar5 + 6) = *(short *)(puVar5 + 6) + (short)local_5c * 4;
        sVar9 = (short)local_58;
        *(short *)(puVar5 + 8) = *(short *)(puVar5 + 8) + sVar9 * 4;
        *(short *)(puVar5 + 10) = *(short *)(puVar5 + 4) + (short)local_60 * 2;
        *(short *)(puVar5 + 0xc) = *(short *)(puVar5 + 6) + (short)local_5c * 2;
LAB_town_square__80089e38:
        puVar5[0x17] = 2;
        puVar5[0x10] = 0xe0;
        puVar5[0x11] = 0xc0;
        puVar5[0x13] = 0x50;
        puVar5[0x12] = 0;
        puVar5[0x14] = 0xff;
        puVar5[0x15] = 0xff;
        puVar5[0x16] = 0x80;
        *(short *)(puVar5 + 0xe) = *(short *)(puVar5 + 8) + sVar9 * 2;
      }
      local_30 = local_30 + 4;
      iVar11 = iVar11 + 1;
    } while (iVar11 < local_50);
  }
  return;
}


